{"version":3,"sources":["definitions/generalDefinitions.js","definitions/outputDefinitionsEP.js","data/dataExchangeMCC.js","components/Collapsible.js","data/assetGridProjections.js","components/PDF.js","data/aggregateGridProjections.js","definitions/infoIconsDefinitions.js","components/AdjustibleImage.js","components/Header.js","images/INA.png","images/estate.protection.applet.cover.graphic.png","components/inputField.js","utils/helper.js","components/PopupInfo.js","components/Info.js","utils/FetchAPIs.js","data/createDefaults.js","definitions/outputDefinitions.js","images/gridOff.png","images/gridOn.png","components/MultiButtons.js","components/NA.js","components/Client.js","components/Liability.js","components/Source.js","components/Need.js","components/Presentation.js","components/PopupUserInput.js","components/PasteClients.js","components/AggregateGrid.js","components/OutputGraphsEP.js","components/ProjectionGrid.js","components/ProjectionGrid1.js","components/GridButton.js","components/Asset.js","components/OutputPDFINAAppendix.js","components/OutputGraphs.js","components/AnalysisGraph.js","images/info.png","images/infoLightBlue.png","images/infoWhite.png","images/infoRed.png","../node_modules/validatorjs/src/lang sync /^/.*$","components/AddRemove.js","data/dataExchange.js","components/DropDown.js","components/GridExcelComponent/DownloadExcel.js","components/GridExcelComponent/ExcelToolbar.js","components/GridExcelComponent/DataTable.js","images/chooseButton.png","images/chooseButtonChrome.png","images/optionsEdge.png","images/optionsChrome.png","CacheBuster.js","App.js","index.js"],"names":["APPLET_INA","appletMode","APPLET_EP","DISPLAY_NAME","DEFAULT_QUOTE","QUOTE_CLIENT","QUOTE_SPOUSE","QUOTE_JOINT","FIRST_BENEFICIARY_ID","OUTPUT_WIDTH_PCT","IMAGE_APPLET_EP","IMAGE_APPLET_INA","IMAGE_LOGO","IMAGE_LOGO_OTHERPAGES","ASSET_API_OUTPUT_Year","ASSET_API_OUTPUT_Age","ASSET_API_OUTPUT_FMV","ASSET_API_OUTPUT_EOYBalance","ASSET_API_OUTPUT_ACB","ASSET_API_OUTPUT_CapitalGain","ASSET_API_OUTPUT_TaxPayable","ASSET_API_OUTPUT_CapGainsExemption","ASSET_API_OUTPUT_Deposits","ASSET_API_OUTPUT_Withdrawals","ASSET_API_OUTPUT_RRIF","ASSET_API_OUTPUT_TaxPayableonIncome","ASSET_API_OUTPUT_DispositionAmount","DROPDOWN_WIDE","DEFAULT_DIVIDEND_TAX_RATE","DEFAULT_AVG_TAX_RATE","DEFAULT_CLIENT_AGE","DEFAULT_SPOUSE_AGE","DEFAULT_SPOUSE_SALARY","DEFAULT_CLIENT_SALARY","DEFAULT_SPOUSE_CPP","DEFAULT_CLIENT_CPP","DEFAULT_SPOUSE_RETIREMENT","DEFAULT_CLIENT_RETIREMENT","DEFAULT_INFLATION","DEFAULT_INVESTMENT","DEFAULT_NEED_PERCENT1","DEFAULT_NEED_PERCENT2","DEFAULT_RRIF_AGE","DISPLAY_RETIREMENT","DISPLAY_LIFEEXP","DISPLAY_ENDAGE","DISPLAY_LIFEEXP_PLUS_3","ORPHAN_AGE_QC","ORPHAN_AGE_NON_QC","MAX_ORPHAN_DUR_QC","MAX_ORPHAN_DUR_NON_QC","UNIVERSITY_START_AGE","UNIVERSITY_END_AGE","DISPLAY_PRESENTATION","DISPLAY_GRAPHS","DISPLAY_SPREADSHEET","DISPLAY_ANALYSIS","appSiteAPI","buildMode","ASSET_YEAR_TODAY","en","today","fr","CONTROLTITLELIABS","year","repay","projValue","CONTROLTITLE","age","sex","smoking","name","member","type","owner","growthDir","exposureDur","changeRate","amount","FA","amountGross","afterTaxAmount","percent","tax","desc","disposeYr","disposeDur","startYear","dur","ACB","smallBusinessCapGainExemption","growth","income","avgTax","retAge","protectToAge","cppElig","qppElig","invRate","inflation","taxRate","dividendTaxRate","province","designedBy","designedFor","contributionAmt","contributionStartYr","contributionDur","withdrawalAmt","withdrawalStartYr","withdrawalDur","incomeRate","RRIFRate","RRIFAge","ownershipAction","pdf","pdfINAAppendix","print","lifo","wl","ep","compulife","save","load","rec","notes","switch","TITLES","appletINA","appletEP","clients","clients_1","assets","liabilities","sources","sources_1","needs","needs_1","settings","presentations","results","presBut","graphsBut","retBut","protectButton","leBut","age100But","spreadsheetBut","analysisBut","benef","insuredJLTD","insured","default","defaultClear","OUTPUTTITLE","Values","MESSAGES","insNeed","graphLine2","graphT1","graphT2","graphT3","graphT4","ever","taxMsg","fetch","infoYr0","infoRetDur","infoAvgTax","infoAdjust","clientOnly","infoElig","ie","govB","assetTax","COLUMN_TITLES","INA_SHEET_HEADERS","Full","EP_SHEET_HEADERS","intRate","infRate","surplusCapital","blank","additionalCapitalReq","survivorLE","survivor65","survivorProtection","Year","Age","FMV","EOYBalance","AvgGrowth","AnnualContribution","MinRRIFIncome","Withdrawal","SaleProceeds","RentalIncome","TaxLiability","Taxonincome","TaxLiabilityatDeath","CapitalGain","CapitalGainsExemption","GRID_INTERNAL_CAPTIONS","excel","rows","of","TOTALS","ESTATE_LIAB","value","Key","order","colour","TAX_LIAB","EMAIL","body","LIABILITIES","LAST_EXPENSES","ID","LEGAL_AND_EXECUTOR_FEES","OUTSTANDING_LOANS","MORTGAGE_REDEMPTION","EMERGENCY_FUND","CHARITABLE_GIFTS","LEGACY_FOR_CHILDREN","CHILD_HOME_CARE","CREDIT_CARDS","INCOME_TAXES","OTHER","CLIENT_TAX_LIABILITY","PROBATE","ASSETS","PERSONAL_RESIDENCE","oldName","REAL_ESTATE","STOCKS_BONDS","SMALL_BUSINESS_SHARES","RRSP_RRIF","INTEREST_BEARING","CASH","OTHER_ASSETS","LIFE_INSURANCE","CHARITABLE_GIFTS_TAX_CREDIT","TFSA","OWNERSHIP","CLIENT","SPOUSE","JOINT","ASSET_OWNERSHIP_ACTION","CLIENT_LIQUIDATE","CLIENT_ROLLOVER","ASSET_TAX","NON_TAXABLE","CAPITAL_GAINS_DEFERRED","CAPITAL_GAINS_ANNUAL","REGISTERED","FULLY_TAXABLE","DIVIDEND","INTEREST","QUALIFYING_SMALL_BUSINESS","INCOMESOURCES","SURVIVORS_INCOME","GOV_SURVIVORS_PENSION","GOV_DEATH_BENEFIT","GOV_ORPHANS_BENEFIT","RENTAL_INCOME","DIVIDEND_INCOME","RETIREMENT_INCOME","RRIF","INCOMENEEDS","PERCET_OF_INCOME","EDUCATION_FUND","TEMPORARY_INCOME","PROVINCE","AB","BC","ON","QC","MB","NS","NB","NF","SK","PE","YU","NU","NT","MEMBER","CHILD","DEPENDENT_ADULT","SEX","MALE","FEMALE","GROWTHDIR","GROWS","REDUCES","SMOKING","NON_SMOKER","SMOKER","MONTHS","ASSET_TAX_TYPE_PRINCIPAL_RES","ASSET_TAX_TYPE_REAL_ESTATE","ASSET_TAX_TYPE_STOCKS","ASSET_TAX_TYPE_SMALL_BUS","ASSET_TAX_TYPE_RRSP","ASSET_TAX_TYPE_INTEREST","ASSET_TAX_TYPE_OTHER","ASSET_TAX_TYPE_COUNT","OUTPUTTEXTEP","pg1T","pg1P1","pg1P2","pg1P3","pg1P4","pg2T","pg2Paragraphs","pg3T","pg3P1","pg3TabT","pg3TabRTot","pg3Tab2T","pg3Tab2RTot","pg3Tab2NW","pg3T2","pg3P2","pg3P3","pg3Tab3R1C1","pg3Tab3R1C2","pg3Tab3R1C3","pg3Tab3R1C4","pg3Tab3R2C1","pg3Tab3R2C2","pg3Tab3R2C3","pg3Tab3R2C4","pg3Tab3R3C1","pg3Tab3R3C2","pg3Tab3R3C3","pg3Tab3R3C4","pg3Tab3R4C1","pg3Tab3R4C2","pg3Tab3R4C3","pg3Tab3R4C4","pg3Tab3R5C1","pg3Tab3R5C2","pg3Tab3R5C3","pg3Tab3R5C4","pg3Tab3R6C1","pg3Tab3R6C2","pg3Tab3R6C3","pg3Tab3R6C4","pg3Tab3R7C1","pg3Tab3R7C2","pg3Tab3R7C3","pg3Tab3R7C4","pg3Tab3R8C1","pg3Tab3R8C2","pg3Tab3R8C3","pg3Tab3R8C4","pg3P4","pg3P5","pg4T","pg4P1","pg4GT","pg4P2","pg4P3","pg5T","pg5Paragraphs","pg5Plast","pg6T","pg6Paragraphs1","pg6Paragraphs2","pg7T","pg7P1","pg8T","pg8P1","pg8P2","pg8O1","pg8O2","pgFooter","pg9T","pg9P1","pg9P2","graphsT1","graphsT2","graphsT3","graphsL1","graphsL2","graphsL3","graphsL4","graphsL5","graphs2L1","graphs2L2","graphsTaxes","graphsLeakageT1","graphsLeakageT2","graphsLeakageT3","graphsLeakage1","graphsLeakage2","graphsLeakage3","readMCCData","dataInput","planID","client","lives","clientID","i","dataE","push","Clients","sexKey","smk","smokerKey","rating","length","setLives","lifeStatus","policy","planName","carrierName","carrierID","faceAmount","Presentations","Province","objPremium","DepositMode","PremCustom","PremSet","PremSolve","PremSetDur","PremSolveDur","PremOffsetOn","PremOffsetYear","objCustomDB","solveForPremium_On","solveForPUA_On","solveRider_On","customDB","objRider","T10","T20","ICO10","ICO20","T25","T30","T25Amt","T30Amt","T10Dur","T20Dur","T10Amt","T20Amt","objPUA","MaxPUA","MaxPUAAmt","BonusPUA","FundPUA","FundPUAAmt","FundPUADur","outputOptions","extCoverage","IRR_ERR","outputColumnIDs","generalInfo","language","lang","formatNumericOutput","Collapsible","props","togglePanel","e","a","enabled","handleCollapsibleClick","id","state","open","setState","openCollapsible","nextProps","this","arr","style","fontSize","float","onClick","className","title","undefined","infoIcon","children","Component","getAssetGridValues","dataNA","assetCurr","aggregate","fetchAssetAllGridColumns","data","console","log","taxOnDisposition","yr","numericValues","arrayFormatMoney","arrYear","arrAge","arrAdjAge","age1","age2","parseInt","arrDeposits","arrFMV","arrRRIF","arrEOYBalance","arrWithdrawals","arrTaxPayableonIncome","arrTaxPayable","arrDispositionAmount","arrACB","arrCapitalGain","arrCapGainsExemption","gridTitleSection","getListItemNameFromKey","ownerKey","description","gridTitle","assetTypeKey","dataColTitles","dataProjection","assetTaxTypeKey","HELVETICA","TIMES","NORMAL","BOLD","MAX_LOGO_HEIGHT","InToPt","in_","PxToPt","px","PAGE_HEIGHT","PDF","AddImage","imageID","x","y","w","h","imgData","document","getElementById","imgProps","getImageProperties","pdfHeight","height","width","addImage","AddImageFitWidthOnly","maxHeight","error","addCustomImage","pg1TitleY","image","firstPage","top","left","FOOTER_TEXT_IN_Y","size","AddChart","containerID","containerElement","canvasElement","getElementsByClassName","dataUrl","toDataURL","AddCanvas","canvasID","AddPage","mode","addPage","Create","jsPDF","orientation","unit","format","ShowGrids","showGrids","Grid","setFontSize","setFont","setTextColor","text","textRed","textGreen","textBlue","fontName","fontStyle","MultilineText","textLines","splitTextToSize","DrawLine","line","Reset","SetFont","SetFontSize","Save","fileName","SetTextColor","red","green","blue","SetFillColor","setFillColor","fillRed","fillGreen","fillBlue","showOnPage","output","Rectangle","roundedRect","textWidth","arrayText","split","minWidth","Math","max","getTextWidth","textWidthMultiLine","adjustTextWidth","tableRow","fill","textColor","values","Widths","box","align","rightAlign","cols","textY","parseFloat","textOut","xi","setDrawColor","rect","RightText","Text","CenterText","tw","Header","textH","headerOffset","addFooterAndHeader","footerText","headerText","Footer","textF","FooterLandscape","addFooter","footer","addHeaderNoFooter","tableRowSingle","values2","coloured","paraLeft","paraY","paraWidth","color","INAFullSpreadsheetData","dataPCV","survivors","dataNeed","dataGov","dataShort","afterTaxCPP_DB","colNo","dataColumns","dataColumn","noYrs","Date","getFullYear","dataColumnCapFund","survivorsIncome","surivorsSalaryProjection","totalIncome","Array","avgTaxRate","forEach","element","sourceTypeKey","filter","item","ownerID","duration","pow","round","toFixed","getSurivorsSalaryProjection","survivorsNonGovNonAssetLiabIncomeProjection","getSurvivorsNonGovNonAssetLiabIncomeProjections","capFundBase","cleanFormat","beneficiaryAge","formatMoney2","otherIncome","abs","getINAGridData","insNeedRet","insNeedLE","Survivors","Sources","gridColumnAligns","dataTitle","dataColHeaders","gridIcons","headers","INAFullSpreadsheetHeaders","getInfoExcelcapFund","getInfoExcelAllAfterTax","gridColumnsDataExcelInfoSection","memberKey","toString","EPFullSpreadsheetData","noProjectYrs","input","map","setUIDataToAPI","assetsLength","Assets","col","min","ratio","Number","EPSILON","isNaN","getEPGridData","EPFullSpreadsheetHeaders","getInfoBOYEOY","getInfoAvgGrowth","getAssetLiabProjections","assetProjections","startAge","LE3","LE","EstateLiabsByType","EstateLiabsByTypeLE3","proj","dataEstateLiability","tmpGrids","taxLiabCol","FMVCol","EstateLiabsByTypeTotal","EstateLiabsByTypeLE3Total","EstateLiabsByTypeGrowth","EstateLiabsByTypeInitialAmt","grid","fmv","addAssetToProjections","currValue","rateRS","rateS","rateSB","rateRR","rateI","rateO","numFormat","replace","AssetnEstateLiabs","projectionsGrids","assetName","alreadyThere","j","SHOW_AUTOMATIC_RED","SHOW_STANDARD","SHOW_NONE","SHOW_STANDARD_LIGHT_BLUE","SHOW_STANDARD_WHITE","infoHighlightStyle","fontWeight","infoIconRetire","infoEligSinglePerson","infoSpouseElig","internet","rollOver","insurance","rental","note","gridCapFund","salary","salaryPercent","afterTax","taxExempt","infoINA","infoBOYEOY","infoAvgGrowth","infoPDF","probate","DepositWithd","inflationGrowth","PYE_JLTD","needGrowth","needGrowth_1","exportINA","taxLiab","liabDesc","getGenericMessage","infoID","infoText","iconMode","popupOpenByProps","popupBorderColor","position","marginLeft","marginTop","DEFAULT_MARGIN_TOP","DEFAULT_WIDTH","getInfoIconTaxExempt","getInfoIconSourcesGov","DEFAULT_MARGIN_LEFT","getInfoNoInternetAccess","getInfoIconSourcesRRIF","getInfoIconClientsMember","getInfoIncome","getInfoSalaryPercent","getInfoIconAssetsIncomeRate","getInfoIconPYE_JLTD","getInfoIconNeedGrowth","getInfoINA","getInfoPDF","getInfoExportINA","getInfoIconAssetsOwner","getInfoIconTFSA","getInfoIconProbate","getInfoIconLiabDesc","getInfoIconDepositWithd","getInfoIconInflationGrowth","getInfoIconAssetsIns","getInfoIconAssetsYr0","getInfoIconClientsElig","getInfoIconClientsEligSinglePerson","getInfoIconSpouseElig","getInfoIconClientsTax","getInfoIconClientsRetire","flagRed","getInfoTaxLiability","getInfoIconTaxLiab","getInfoIconNotes","getInfoSave","DEFAULT_HEIGHT","AdjustibleImage","componentDidMount","showDetails","updateImage","imageLeft","imageSize","allPages","imageTop","imageAdjust","imageBigger","prevState","imageSmaller","imageRight","imagePosition","imagePages","imageRemove","undoImage","undo","imageDone","loadImage","file","target","files","reader","FileReader","readAsDataURL","onload","imageObj","result","styleImage","display","marginBottom","cmdWidth","buttonText","paddingLeft","required","accept","onChange","event","noButtons","buttonCaption","selected","selectMultiButton","src","React","hideRecover","ref","last","current","saveDefault","saveAsDefaultCase","defaultCommand","storageName","set","clear","localStorage","getItem","changeLanguage","defaultButton","createRef","emailAllowed","versionDetails","allowEmail","iOS","isMobileDevice","class1","styleVersion","right","changeLang","maxWidth","version","saveToFile","loadFromFile","EmailINA","loadStorage","module","exports","InputField","getInut","evt","chkNum","substring","maxValue","minValue","handleFocus","navigator","userAgent","match","select","selectField","setSelectionRange","onMouseUpSelect","test","window","MSStream","handleFocusIOS","toggleEditing","toFormat","inputValue","isEditing","afterStateUpdate","getValue","dec","indexOf","slice","selectText","s","refs","InputTxt","setTimeout","getRidOfZerosAfterDecimal","displayValue","decimalPos","handleUpdateInput","number","Intl","NumberFormat","inputName","disable","readOnly","styleClass","styleClass2","divStyleClass","inputColorStyle","colorDiv","border","info","showInfo","perc","titleColour","french","paddingTop","inputMode","disabled","autoFocus","onFocus","onMouseUp","updateInputValue","onBlur","bind","key","amt","nSeperator","search","s1","EngToFrConversion","v","bInput","seperator","decimalChar","v1","v2","v3","formatted","get1000","includes","num","formatMoney","decimalCount","decimal","thousands","negativeSign","substr","dollarSign","array","noOfDecimals","arrayFormatted","ver","verNo","inS","verS","inS2","versionNumeric","saveEncrypt","allowAnalysis","n","getProjectedLiabilities","years","totalLiabProjections","Liabilitys","liabTypeKey","liabProj","getProjectedLiability","liability","totalLiab","rate","dU","dL","getLoanBalance","assetTaxLiabProj","change","growthDirKey","getINA_LifeExp_Plus_yrs","INALifeExp","dataShortfall","lifeExp","yrs","INA","getDataFutureEstateLiability","dataTaxLiability","projectEnd","dataFutureEstateLiability","getListToShowByOrder","fullListOfItems","Object","obj","sort","b","list","found","find","getListItemKeyFromName","join","getAssetsTaxCategoryTotal","totalAsset","getDisableValues","val","getAssetsCategoryTotal","dataList","total","getLiabsCategoryTotal","getAgesEP","dataAges","getTaxLiabCategoryTotal","dataAss","getAssetTL","fetchAssetProjection2","getDefaultImages","adviserLogo","appletImage","require","getAfterTaxTotalIncome","index","Income","isSingleFamily","spouseKey","singleFamilyProjectionYears","minAge","maxRet","clientKey","reduce","prev","curr","retirementAge","noYrsDiff","projectionEnd","noProjectionYrs","survivorAge","familyProjectionYears","periodOption","insuranceNeeds","presentation","insNeedLE3","insNeedEAge","Value","joint","singleFamilyvalues","insuranceNeed","insuranceNeedToRet","insuranceNeedToLE","insuranceNeedToLE3","insuranceNeedToEnd","survAge","spouse","getInsNeedLine","projEnd","numSurvivor","singleFamily","protectionPeriod","labelsBilingual","OUTPUTTEXT","dollarEn","dollarFr","needTo","insNeedsSingleFamily","insNeedsSinglePerson","insNeedsRet","insNeeds100","insNeedsRetLE","addSurvivor","getName","getLeakageGraphs","AssetLiabProjs","optionsPie","responsive","maintainAspectRatio","fontColor","legend","labels","space","optionsPieEstateLeakage","JSON","parse","stringify","optionsPieEstateLeakageLE","assetsTotalNow","assetsTotalLE3","totalLiabProjectionsNow","totalLiabProjectionsLE3","assetPercent","taxPercent","dataEstateLeakage","dataEstateLeakageLE","assetPercentLE3","taxPercentLE3","dataPieEstateLeakage","datasets","backgroundColor","dataPieEstateLeakageLE","getLogoAndAppletImage","logoSize","logoLeft","logo","logoTop","logoBottom","logo1stPage","applet","global","langFr","languages","userLanguage","PopupInfoDialog","theme","createMuiTheme","typography","fontFamily","Box","borderColor","borderRadius","Card","CardContent","ThemeProvider","Typography","component","Info","showPopup","respondToPopUp","popupInfo","classList","toggle","chkClose","source","classP","zIndx","zIndex","onMouseEnter","onMouseLeave","alt","fetchTimerAPICheck","fails","then","response","json","catch","setItem","fetchMCCData","Promise","all","fetchMCC","url","method","Accept","ok","Error","statusText","getTaxRate","fetchInsuranceNeedsData","provincekey","projectionSettings","isQC","insuranceNeedsData","ages","govCF","personalCF","shortfall","cpp","cppDB","orphan","lifeExpClient","lifeExpJLTD","provinceMargTax","encryptedInput","assetID","dataAsset","asset","ratesPack","dataProj","asyncAPICall","fetchAssetProjectionAPI","dataValues","handleFetchInsuranceNeedsNew","dataINA","dataDetails","dataInsuranceNeeds","dataNAAges","dataCashFlowGov","dataCashFlowPersonal","dataCashFlowNeeds","handleFetchINADataFromQueryString","savedINA","savedData","handleFetchQueryString","fetchData","fetchValidateTokenGetAgentEmailFromDB","authToken","jwt","createDefaultAsset","DisposeYr","DisposeDur","RRIFStartAge","projection","copyFromAnotherAsset","anotherAsset","createDefaultClient","defaultClient1","Eligibility","Name","defaultClient2","child","createDefaultSource","growthRate","createDefaultNeed","defaultNeed1","needTypeKey","Percent","defaultNeed2","createDefaultPres","images","provinceKey","valuationDate","presentationDate","resultsOption","getDefaultData","getDefaultCase","loadDefaultCase","defaultClients","defaultAssets","defaultSources","defaultLiab","assetTaxLiabID","defaultNeeds","Needs","pg2TabT1","pg2TabT1_1","pg2TabT2","pg2TabT3","pg2TabT4","pg2TabT4Alt","pg2TabT5","pg2TabT6","pg2T2","pg2Tab2","pg2Tab2_1","pg2Tab3","pg2T3","pg2P5","pg2P6","pg2P7","pg2P8","pg2P9","pg2P10","pg2P12","pg2P11","pg3T_1","pg3P1_1","pg4TabT","pg4TabRow1","pg4TabRow1_1","pg4TabRow2","pg4TabRow2_1","pg4TabRow5","pgTabRowMoreIncome","pgTabRowThereAfter","pgTabRowThereAfter_1","pg5T_1","pg5TabT","pg5TabT2","pg5TabT3","pg5TabRow1","pg5TabRow3","pg5TabRow4","pg5TabRow4_1","pg5TabRow5","pg5TabRow5_1","pg6T_1","pg6TabT","pg6TabRow1","pg5TabRow7","pg5TabRow7_1","pg6TabRow4","pg6Net","pg7TabT","pg7TabT_1","pg7TabRow1","pg7TabRow4","pg7TabRow5","pg7TabRow5_1","pg7TabRow6","pg7TabRow7","pg7TabRow8","pg7TabRow9","pg7TabRow10","pg8TabT","pg8TabT_1","pg8TabRow1","pg8TabRow2","pg8TabRow3","pg8TabRow4","pg8TabRow5","pg8TabRow6","pg8TabRow4Alt","pg10T","pg10P1","pg10TabRow1","pg10TabRow11","pg10TabRow2","pg10TabRow3","pgAppendix","pgAppendixT","pgAppendixP1","pgAppendixP2","pgAppendixP3","GRAPHS_LABLES","graphMsg","persCF","incomeNeeds","assetsBrk","liabsBrk","cashLike","RRSP","shares","realEstate","otherAssets","loans","taxes","emergency","otherLiabs","atDeath","currFins","MultiButtons","setupButtons","buttonsDefault","selectButton","buttons","stylePosition","stylePositionLast","marginRight","appSiteParent","defaults","OutputPresentation","lazy","OutputPresentationEP","NA","displayName","probateSync","dataOutput","qbProbate","hasProbate","govBenefitsSync","gov1","gov","gov2","govDB","hasSpouseArray","hasSpouse","sourceGovSurv","govBenefits","cppSurvivor","sourceGovDB","manageOrphanSync","el","querySelector","initialLoading","remove","intervalID","setInterval","loadData","OKToRemove","query","queryString","location","setToken","TKTOK","QS","handleInitilizeQuoteFromQueryString","handleIntitalFetch","recover","d","setHours","getHours","getMinutes","objJSONData","dataPresentations","snapimport","SnapImport","parent","postMessage","validToken","email","sessionStorage","userEmail","agentID","agentSpecs","guid","loading","newDataInput","_","cloneDeep","newDataOutput","tr","reSync_reCalculate_reRender","newState","handleUpdateOutput","newStateCandidateInput","itemToUpdateGroup","itemToUpdateID","newStateCandidateOutput","populateOutput2","updateAssetProjectionOutput","newDataInputClient12","handleQueryString","encryptedInputLife1AndSpouse","newDataInputClient1","encryptedInputLife1","updateOutputData","aggregateGrid","dataOutputCandidate","cppOrphan","lifeExpectancy","alert","populateOutput","dataQS","showMsg","ft","encodeURIComponent","href","savedINA_QS","loadSavedDataToUI","updateStateFromJSon","handleUpdateClient","redoAll","count","debounce","saveToStorage","syncPanelsValues2","debounceHandleUpdateOutput","debounceSaveToStorage","Survivor","survIdx","projYears","switchClients","getSwitchClientsState","client1","handleUpdateAsset","manageRRIFBounds","addRRIFSource2","handleUpdateLiability","handleUpdateSource","failedRemove","handleUpdateNeed","need","handleUpdatePresentation","removeItem","handleUpdatePresentationChange","noRecalc","handleAddClient","manageAddingClientWithIncome","manageAddingChild","manageEducation2","manageOrphan2","manageRemovingClientWithIncome","handleAddAsset","updateProjection","handleAddLiability","Liab","handleAddAssetTaxCredit","data2","taxCredit","exists","handleAddAssetTaxCredit2","handleAddSource","handleAddNeed","nextKey","handleRemoveClient","cl","manageRemoveOrphan","splice","setAssetActionToLiquidate","setNeedsSinglePerson","handleRemoveAsset","removeRRIFSource","handleRemoveLiability","charit","liab","charitAsset","handleRemoveSource","handleRemoveNeed","addRRIFSource","existingRRIF","sourceRRIF","copyPresentation","pres","leading","trailing","areThereChildren","manageEducation","Children","childMember","orphanBen","orphSources","maxDur","orphAge","pop","sourcesNo","setChildIDs","Set","add","has","childID","updateDataLang","openParent","openForce","totalATaxIncome","setSurivorIndex","spKey","setSurivorIndex2","needPercent","caseFromFile","setRates","investmentRate","capitalGainsInclusion","inflationRate","storageKey","showRecover","fileTarget","contentsFile","Sex","Smoker","Type","Tax","readAsText","respondToSaveRequest","blob","Blob","saveAs","saveToFile_OLD","failedAPI","urlReload","PARENT_SITE_PROD","shortid","generate","PARENT_SITE_TEST","callCalculateResultsAPI","resultIsOpen","adjustVisibleOutputSection","visibleOutputSection","hasPersonalResidenceAlready","collapsible","setOutput","documentMode","graphs","selectMultiButtonPeriod","selectMultiButtonINAorTax","INAOption","l","hideEstateRemoveMsg","tag","t","accessedAPI","langText","showInput","singlePerson","insNeedLine","buttonCaption3","buttonCaptionPeriod","inputOutputIsValid","dataSurvivorSalaryIncome","graphsEP","analysis","dataAPISite","govPopup","openDialog","respondToInput","presentationCurr","presentationsNo","handleUpdate","clientCurr","isTheSurvivor","themeColor","clientsNo","disableAddRemove","assetsNo","currentID","minComps","numberComps","handleDoAdd","handleDoRemove","liabilityCurr","liabilitysNo","OrphanAges","maxOrphanDur","sourceCurr","maxOrphan","includeGovOrphanBenefit","needCurr","needsNo","afterTaxTotalIncome","dlgLogin","fallback","insuranceNeedRet","insuranceNeedLE","insuranceNeedEAge","getSpouseINA","paddingBottom","Client","newCliet","doSwitch","getCurrClient","valueClean","valueCleanInt","changed","infoRetireRed","updateDDown","selection","writeBack","updateName","sexValues","label","smokingValues","memberValues","bilingual","DD","Title","defValue","disableOptionValue","nonSpouse","nonSpouseIsTheSurvivor","clientMember","disableMember","greyedName","placeholder","Count","dd","disableOption","fixedFirstRow","maxRows","Liability","liabNo","liabNext","setLiabilityValuesToDefault","displaySreadsheet","setLiabData","updateDesc","loan","liabs","repays","handleClick","typeValues","listLiabsToShow","ownerValues","growthDirValues","growthSel","loanOrTax","showRepay","showExposure","Source","isSourceGovNonOrphanBenefit","isDividendIncome","isSourceGovOrphansBenefit","sourceNo","sourceNextKey","annualGrowth","listSourcesToShow","unlistedGreyedOption","govOrphan","dividend","inputTitle","disabledRemove","Need","needNo","needNext","Owner","listNeedsToShow","percentN","isDisabled","Presentation","getNewPresentation","listProvincesToShow","showSaved","PopupUserinputDialog","makeStyles","root","margin","spacing","handleOK","handleCancel","handleInfo","sourceEdge","sourceChrome","optionsEdge","optionsChrome","onClose","handleToggle","aria-labelledby","paddingRight","variant","useState","encryptedJson","setEncryptedJson","jsonEncrypted","setJsonEncrypted","encryptedJsonAssigned","setEncryptedJsonAssigned","useEffect","myHeaders","Headers","append","clientJson","raw","redirect","setClientFileContent","clientIndex","clientFileName","PasteClients","setClients","setNote","clientFileContent","newClients","allClientFileContentsAssigned","newClient","clientFileSpecs","clientFileSpec","clientFileSpecsCollection","clientFileSpecsCollectionJson","clipboard","writeText","readText","clipText","parsedObject","pastedClients","isArray","clientComponents","Fragment","AggregateGrid","specialRow","OutputGraphsEP","loadingMCC","estateLiab","estateLiabLE","taxL","dataPremiums","dataDB","dataSVEquiBuild","dataSVManulife","Prem","bestPremiumDur","bestMinMultiple","premiumDur","minMultiple","insMultiple","bestFitEquiBuild","INAEstateOption","chartRef","taxLiabChartRef","dtaAgesAll","k","leakageGraps","taxLiabTotal_Index","dataTaxLiabLifeExp","dataTaxLiab","dataLiabAtDeath","taxLiabs","optionsTaxLiab","scales","xAxes","stacked","ticks","beginAtZero","yAxes","callback","steps","stepValue","dataPieEstateLiabNow","estateLiabLE3","dataPieEstateLiabLE","optionsLiab","optionsLiabLE","options","ProjectionGrid1","assetProjection","projectionGrid","setProjectionGrid","DataTable","GridButton","handleClickGridButton","Asset","assNo","assNext","assTaxTypeKey","setAssetValuesToDefault","taxValues","propId","updateClientTaxLiability","getAssetProjection","getData","clone2","cln","cloneNode","cln2","createElement","appendChild","addEventListener","listAssetsToShow","ownerActionValues","listAssetTaxesToShow","DDTax","taxLiabOfClient","isEqual","disableTaxMethods","taxStocks","taxRS","hideOwner","taxT","ownerT","assetTypeIns","rrsp","showACB","showIncome","showDur","showGrowth","showDispose","showContribution","showWithdrawal","showCGE","disableAll","p","DropDown","ownerAction","unlistedValue","AddRemove","setFontForTitle","paragraph","insertPara","setFontForParas","clientHeight","clientWidth","hFinal","wFinal","graphWidth","lastRow","insertGrid","para","insertTableRow","paraWidths","bold","fillColor","wrappedTitleBar","startYr","titleY","title1","title2","para1","para2","totalGridWidth","goodWidth","widthTotal","goodWidthMultiLine","addMore","height2","insertTableTitle","String","OutputGraphs","doPDF","doSavePdfINAAppendixAction","pv","negNeed","mobile","innerWidth","innerHeight","maxYScale","ceil","PDFTopMargin","dataFutureINA","shortfallNeg","optionsPieLiabs","dataPieAssets","dataPieLiabs","assetsPie","liabsPie","AnalysisGraphs","getMCCQuoteOutput","getMCCQuoteOutput1","getMCCQuoteOutput4","quoteClient","FAClean","dataMCC","minPrem","getDataFutureINA","PremSetAmt","unshift","getMCCQuoteOutputManu","insuranceAmtInitial","solveForOptimumQuote","dataFVofPrems","getDataFVofPrems","SumOfSquresDiff","insVal","gotHereInInnerLoop","solveForOptimumEquiBuild","getEstateLiabPieCharts","estateLiab2","l1","l2","l3","estateLiab3","l2LE","l3LE","currINA","dataFuture","fv","nextState","dataShortfallFV","dataPieTax","dataPieLiabsAtDeath","optionsPieTax","optionsPieLiabsAtDeath","optionsPieEstateLiab","optionsPieEstateLiabLE","dataMCCpremFV","dataMCCQuoteDB","optionsFV","dataProjectionCV","needToE","needToF","overflow","leftPadding","webpackContext","req","webpackContextResolve","__webpack_require__","o","code","keys","resolve","doRemove","doAdd","classNameRemove","minRows","returnAR","outputInsuranceNeed","Smk","Rating","CPPeligibility","assetDesc","taxMethod","dispositionYr","dispositionDur","dispositionYrUlt","setAssets","annualRepay","setLiabs","personalIncomeSources","salaryOwner","setSources","estateContingiencies","dataItems","incomePercent","incomePercentAfterDeath","incomeNeedItems","upToChildrenOutYrs","childrenOutToRetirementYrs","retirementToEndYrs","setIncomeNeeds","tempDate","date","getMonth","getDate","deathYear","deathOf","endYear","returnType","projectEndOption","clientsName1","agentName","caller","insuranceAmt","setProjSettings","savedJSon","addLife","findMatchingKey","needKey","dataInputDefImages","getOutputValues","dateApplet","Income2","survivorATaxIncome","percentNeed1","percentNeed2","totalDisposeAsset","dateObj","month","getUTCMonth","day","getUTCDate","getUTCFullYear","ygChild","hasChild","youngestChildEndAge","insNeedYgChild25","insNeedYgChild18","totalLiabExcludeDeathRelated","pos","grossIncome","ret","disposeValue","totalAssetExcludeInsurance","totalAssetInsurance","totalAssetInsuranceIfSpouse","showAsDisposed","otherAssetsList","srcDB","valueAtDeath","totalSource","totalSource2","totalSourceATax","totalSource2ATax","totalSourceAtDeath","totalSource2AtDeath","totalSourceATaxAtDeath","totalSource2ATaxAtDeath","totalDesiredGrossIncome","totalDesiredGrossIncome2","srcOrphan","percent1","percent2","totalNeed","objValues","nameFromFile","handleChange","valueOf","valueSelected","update","option","styleDD","customStyles","control","base","minHeight","getDefault","charOp","selectComponent","isSearchable","onfocus","oc","styles","isOptionDisabled","ExcelFile","ReactExport","ExcelSheet","DownloadExcel","dataCell","styleCell","alignment","horizontal","font","numFmt","styleCellCol1","styleCellAlt","patternType","fgColor","rgb","styleCellAltCol1","styleTitleRowInfo","wrapText","bottom","styleCellLeftAllign","styleTitleRow","excelColumnsDataInfoSection","dataBodyTitles","dataBody","dataRow","excelColumnsHeaders","sz","wpx","excelColumnsDataMain","multiDataSet","columns","xSteps","ySteps","toLocaleString","downloadNow","hideElement","filename","dataSet","ExcelToolbar","setExcel","classes","padding","excelToolbarText","Tooltip","placement","IconButton","xmlns","viewBox","Datatable","getMuiTheme","overrides","MUIDataTable","tableRoot","paper","boxShadow","borderBottom","borderRight","MuiTableRow","head","MuiTableCell","sizeSmall","MUIDataTableToolbar","titleRoot","icon","MUIDataTableBodyCell","MUITypography","body2","MUITablePagination","caption","downloadExcelNow","divStyle","styleHeader","textAlign","customHeader","column","TableCell","customHeadRender","captions","filterType","selectableRows","resizableColumns","selectableRowsHeader","viewColumns","download","textLabels","pagination","rowsPerPage","displayRows","setTableProps","downloadOptions","separator","onDownload","buildHead","buildBody","customRowRender","dataIndex","rowIndex","dataI","TableRow","customToolbar","appVersion","packageJson","App","baseUrl","getElementsByTagName","getAttribute","rootElement","ReactDOM","render","basename"],"mappings":"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wP,KAAM,yBACNC,MAAO,iBACPC,MAAO,gBACPC,MAAO,SACPC,MAAO,aAEPC,KAAM,eACNC,cAAe,CACb,0TACA,uTACA,wCACA,qCACA,2GACA,oCACA,8FACA,iHACA,4CACA,sBACA,sDAGFC,KAAM,2BACNC,MACE,wOACFC,QAAS,SACTC,WAAY,yBACZC,SAAU,cACVC,YAAa,QACbC,UAAW,YAEXC,MAAO,6BACPC,MACE,kLACFC,MAAO,GACPC,YAAa,SACbC,YAAa,cACbC,YAAa,sBACbC,YAAa,+BAEbC,YAAa,8BACbC,YAAa,GACbC,YAAa,GACbC,YAAa,GAEbC,YAAa,iBACbC,YAAa,GACbC,YAAa,GACbC,YAAa,GAEbC,YAAa,wBACbC,YAAa,GACbC,YAAa,GACbC,YAAa,GAEbC,YAAa,YACbC,YAAa,GACbC,YAAa,GACbC,YAAa,GAEbC,YAAa,mBACbC,YAAa,GACbC,YAAa,GACbC,YAAa,GAEbC,YAAa,QACbC,YAAa,GACbC,YAAa,GACbC,YAAa,GAEbC,YAAa,QACbC,YAAa,GACbC,YAAa,GACbC,YAAa,GACbC,MAAM,8GACNC,MAAM,mHACNC,KAAM,8BACNC,MACE,yNACFC,MAAM,+BACNC,MAAO,iEACPC,MACE,gIAEFC,KAAM,iCACNC,cAAe,CACb,gNACA,oGACA,oBACA,6DACA,sEACA,4DACA,yEACA,kUACA,oXACA,0MACA,8SAEFC,SACE,gIAEFC,KAAM,+CACNC,eAAgB,CACd,mRACA,mOACA,iBACA,aACA,cACA,qZACA,uSAEFC,eAAgB,CACd,gPACA,kDACA,wHACA,kDACA,kEACA,uOAGFC,KAAM,UACNC,MACE,6QACFC,KAAM,WACNC,MACE,8DACFC,MAAO,mEACPC,MAAO,OACPC,MAAO,OAEPC,SAAU,4DAEVC,KAAM,uBACNC,MACE,8aACFC,MACE,uPAEAC,SAAS,wEACTC,SAAS,yBACTC,SAAS,yCACTC,SAAS,cACTC,SAAS,mBACTC,SAAS,uBACTC,SAAS,mBACTC,SAAS,kBACTC,UAAU,yBACVC,UAAU,kBACVC,YAAY,UACZC,gBAAiB,4DACjBC,gBAAiB,uBACjBC,gBAAiB,uCACjBC,eAAgB,mBAChBC,eAAgB,gBAChBC,eAAgB,qBAGpB/U,GAAK,CACCsP,KAAM,iCACVC,MAAO,wBACPC,MAAO,uBACPC,MAAO,UACPC,MAAO,cAEPC,KAAM,eACNC,cAAe,CACb,kWACA,qdACA,oDACA,2CACA,6KACA,sCACA,uIACA,0LACA,gEACA,0BACA,8EAGFC,KAAM,gCACNC,MACE,oRACFC,QAAS,SACTC,WAAY,+BACZC,SAAU,UACVC,YAAa,QACbC,UAAW,eAEXC,MAAO,2CACPC,MACE,kQACFC,MAAO,GACPC,YAAa,SACbC,YAAa,qBACbC,YAAa,8BACbC,YAAa,6DAEbC,YAAa,qCACbC,YAAa,GACbC,YAAa,GACbC,YAAa,GAEbC,YAAa,yBACbC,YAAa,GACbC,YAAa,GACbC,YAAa,GAEbC,YAAa,iCACbC,YAAa,GACbC,YAAa,GACbC,YAAa,GAEbC,YAAa,cACbC,YAAa,GACbC,YAAa,GACbC,YAAa,GAEbC,YAAa,mCACbC,YAAa,GACbC,YAAa,GACbC,YAAa,GAEbC,YAAa,SACbC,YAAa,GACbC,YAAa,GACbC,YAAa,GAGbC,YAAa,QACbC,YAAa,GACbC,YAAa,GACbC,YAAa,GAEbC,MACE,+IACFC,MACE,+IAEFC,KAAM,oCACNC,MACM,6OACNC,MAAM,6CACNC,MAAO,sGACPC,MACE,0JAEFC,KAAM,sCACNC,cAAe,CACb,qSACA,kJACA,sBACA,4FACA,8GACA,yEACA,+EACA,yXACA,scACN,oQACM,0YAEFC,SACE,6KAEFC,KAAM,6DACNC,eAAgB,CACd,+TACA,mPACA,kBACA,iBACA,cACA,mcACA,qZAEFC,eAAgB,CACd,kWACA,6CACA,yJACA,oEACA,gGACA,mSAGFC,KAAM,eACNC,MACE,wVACFC,KAAM,SACNC,MACE,2GACFC,MAAO,mFACPC,MAAO,SACPC,MAAO,UAGPC,SAAU,sDAEVC,KAAM,oBACNC,MACE,0hBACFC,MACE,+RACAC,SAAS,2EACTC,SAAS,iCACTC,SAAS,4DACTC,SAAS,UACTC,SAAS,sBACTC,SAAS,4BACTC,SAAS,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","file":"static/js/main.4e964508.chunk.js","sourcesContent":["import { buildMode } from \"../../package.json\";\r\nimport { appletMode } from \"../../package.json\";\r\n\r\nexport const APPLET_INA = appletMode === \"INA\";\r\nexport const APPLET_EP = appletMode === \"EP\";\r\nexport const DISPLAY_NAME = appletMode;\r\nexport const DEFAULT_QUOTE = appletMode === \"INA\" ? \"INADefaultData\" : \"EPDefaultData\";\r\n\r\nexport const QUOTE_CLIENT = 0;\r\nexport const QUOTE_SPOUSE = 1;\r\nexport const QUOTE_JOINT = 2;\r\nexport const FIRST_BENEFICIARY_ID = 2; // index is 1 in Clients\r\n\r\nexport const ALIGN_LEFT = 1;\r\nexport const ALIGN_CENTRE = 2;\r\nexport const ALIGN_RIGHT = 3;\r\n\r\nexport const OUTPUT_WIDTH_PCT = 97.5;\r\nexport const OUTPUT_PADDING_LEFT = 2.5;\r\n\r\nexport const IMAGE_APPLET_EP = \"EPPage1\";\r\nexport const IMAGE_APPLET_INA = \"INAPage1\";\r\nexport const IMAGE_LOGO = \"AdvisorLogo\";\r\nexport const IMAGE_LOGO_OTHERPAGES = \"AdvisorLogoOtherPages\";\r\n\r\nexport const ASSET_PersonalResidence = 0;\r\nexport const ASSET_RealEstate = 1;\r\nexport const ASSET_Stocks = 2;\r\nexport const ASSET_company = 3;\r\nexport const ASSET_RRSP = 4;\r\nexport const ASSET_Bank = 5;\r\nexport const ASSET_Cash = 6;\r\nexport const ASSET_Other = 7;\r\nexport const ASSET_Insurance = 8;\r\nexport const ASSET_TaxCredit = 0;\r\n\r\nexport const TAX_NonTaxable = 0;\r\nexport const TAX_CapGains = 1;\r\nexport const TAX_CapGainsAnnual = 2;\r\nexport const TAX_RRSP = 3;\r\nexport const TAX_Taxable = 4;\r\nexport const TAX_Dividend = 5;\r\n\r\nexport const LIABILITY_LastExpenses = 0;\r\nexport const LIABILITY_LegalExecutorFees = 1;\r\nexport const LIABILITY_OutstandingLoans = 2;\r\nexport const LIABILITY_MortgageRedemption = 3;\r\nexport const LIABILITY_EmergencyFund = 4;\r\nexport const LIABILITY_CharitableGifts = 5;\r\nexport const LIABILITY_LegacyforChildren = 6;\r\nexport const LIABILITY_ChildHomeCare = 7;\r\nexport const LIABILITY_CreditCards = 8;\r\nexport const LIABILITY_IncomeTaxes = 9;\r\nexport const LIABILITY_ClientTaxliability = 10;\r\nexport const LIABILITY_Other = 11;\r\n\r\nexport const ASSET_API_OUTPUT_Year = 0;\r\nexport const ASSET_API_OUTPUT_Age = 1;\r\nexport const ASSET_API_OUTPUT_FMV = 2;\r\nexport const ASSET_API_OUTPUT_EOYBalance = 3;\r\nexport const ASSET_API_OUTPUT_ACB = 4;\r\nexport const ASSET_API_OUTPUT_UCC = 5;\r\nexport const ASSET_API_OUTPUT_CCA = 6;\r\nexport const ASSET_API_OUTPUT_CapitalGain = 7;\r\nexport const ASSET_API_OUTPUT_TaxabaleGain = 8;\r\nexport const ASSET_API_OUTPUT_Recapture = 9;\r\nexport const ASSET_API_OUTPUT_TaxPayable = 10;\r\nexport const ASSET_API_OUTPUT_CapGainsExemption = 11;\r\nexport const ASSET_API_OUTPUT_Deposits = 12;\r\nexport const ASSET_API_OUTPUT_Withdrawals = 13;\r\nexport const ASSET_API_OUTPUT_RRIF = 14;\r\nexport const ASSET_API_OUTPUT_TaxPayableonIncome = 15;\r\nexport const ASSET_API_OUTPUT_DispositionAmount = 16;\r\n\r\nexport const LIABILITY_API_OUTPUT_Year = 0;\r\nexport const LIABILITY_API_OUTPUT_Age = 1;\r\nexport const LIABILITY_API_OUTPUT_ProjectedValue = 2;\r\nexport const LIABILITY_API_OUTPUT_TaxCredit = 3;\r\n\r\nexport const DROPDOWN_WIDE = 1;\r\n\r\nexport const OWNER_ACTION_CLIENTLIQUIDATE = 0;\r\nexport const OWNER_ACTION_CLIENTROLLOVER = 1;\r\nexport const OWNER_ACTION_Spouse = 2;\r\nexport const OWNER_ACTION_Joint = 3;\r\n\r\nexport const DEFAULT_DIVIDEND_TAX_RATE = 30;\r\nexport const DEFAULT_AVG_TAX_RATE = 25;\r\nexport const DEFAULT_CLIENT_AGE = 45;\r\nexport const DEFAULT_SPOUSE_AGE = 40;\r\nexport const DEFAULT_SPOUSE_SALARY = 60000;\r\nexport const DEFAULT_CLIENT_SALARY = 60000;\r\nexport const DEFAULT_SPOUSE_CPP = 100;\r\nexport const DEFAULT_CLIENT_CPP = 50;\r\nexport const DEFAULT_SPOUSE_RETIREMENT = 65;\r\nexport const DEFAULT_CLIENT_RETIREMENT = 65;\r\nexport const DEFAULT_PROVINCE = \"BC\";\r\nexport const DEFAULT_INFLATION = 2;\r\nexport const DEFAULT_INVESTMENT = 3;\r\nexport const DEFAULT_NEED_PERCENT1 = 75;\r\nexport const DEFAULT_NEED_PERCENT2 = 60;\r\n\r\nexport const DEFAULT_RRIF_AGE = 71;\r\n\r\nexport const DISPLAY_RETIREMENT = 0;\r\nexport const DISPLAY_LIFEEXP = 1;\r\nexport const DISPLAY_ENDAGE = 2;\r\nexport const DISPLAY_LIFEEXP_PLUS_3 = 3;\r\n\r\nexport const ORPHAN_AGE_QC = 17;\r\nexport const ORPHAN_AGE_NON_QC = 18;\r\nexport const MAX_ORPHAN_DUR_QC = 18;\r\nexport const MAX_ORPHAN_DUR_NON_QC = 25;\r\nexport const UNIVERSITY_START_AGE = 18;\r\nexport const UNIVERSITY_END_AGE = 22;\r\n\r\nexport const DISPLAY_PRESENTATION = 1;\r\nexport const DISPLAY_GRAPHS = 2;\r\nexport const DISPLAY_SPREADSHEET = 3;\r\nexport const DISPLAY_ANALYSIS = 4;\r\n\r\nconst API_SITE_PROD = \"\"; //\"https://privateapi.ppi.ca/ToolkitDirect\"\r\nconst API_SITE_TEST = \"\"; //\"https://test-tkdirectapi.ppi.ca\";\r\nconst API_SITE_LOCAL = \"http://localhost:8082\"; // \"\"; turn this to \"\" and use proxy server on 3003, first turn on from toolkitDirectProxy Server projet by npm start\r\n\r\nexport const appSiteAPI =\r\n  buildMode === 0\r\n    ? API_SITE_LOCAL\r\n    : buildMode === 1\r\n    ? API_SITE_TEST\r\n    : API_SITE_PROD;\r\n\r\n\r\nexport const ASSET_YEAR_TODAY = {\r\n  en: {\r\n    today: \"today\",\r\n  },\r\n  fr: {\r\n    today: \"auj.\",\r\n  },\r\n};\r\n\r\nexport const TAXASSETS = {\r\n  en: {\r\n    header: \"Tax Treatment\",\r\n    Values: [\r\n      /* 'Non-taxable',\t\r\n\t\t\t'Capital Gains Income',\t\r\n\t\t\t'Registered',\t\r\n\t\t\t'Fully Taxable',\t\r\n\t\t\t'RRIF',\t\r\n\t\t\t'Life Insurance',\t\r\n\t\t\t'Dividend'\t */\r\n      \"Non-taxable\",\r\n      \"Capital Gains Deferred\",\r\n      \"Capital Gains Annual\",\r\n      \"Registered\",\r\n      \"Fully Taxable\",\r\n      \"Dividend\",\r\n    ],\r\n  },\r\n  fr: {\r\n    header: \"Traitement fiscal\",\r\n    Values: [\r\n      \"Non imposable\",\r\n      \"Gains en capital diffrs\",\r\n      \"Gains en capital annuels\",\r\n      \"Enregistr\",\r\n      \"Pleinement imposable\",\r\n      \"Dividende\",\r\n      /* 'Non imposable',\t\r\n\t\t\t'Revenus de gains en capital',\t\r\n\t\t\t'Enregistr',\t\r\n\t\t\t'Pleinement imposable',\t\r\n\t\t\t'FERR',\t\r\n\t\t\t'Assurance vie',\t\r\n\t\t\t'Dividendes/Participations'\t */\r\n    ],\r\n  },\r\n};\r\n\r\nexport const CONTROLTITLEASSETS = {\r\n  en: {\r\n    type: \"Type\",\r\n    owner: \"Owner\",\r\n    amount: \"Current Value\",\r\n    tax: \"Tax Method\",\r\n    disposeYr: \"Year to Dispose\",\r\n    disposeDur: \"Duration of Disposal\",\r\n    ACB: \"ACB\",\r\n    smallBusinessCapGainExemption: \"Exemption ...\",\r\n    \r\n  },\r\n  fr: {\r\n    type: \"Type\",\r\n    owner: \"Propritaire\",\r\n    amount: \"Valeur actuelle\",\r\n    tax: \"Moyen de taxation\",\r\n    disposeYr: \"Anne d'limination\",\r\n    disposeDur: \"Dure de la cession\",\r\n    ACB: \"PBR\",\r\n    smallBusinessCapGainExemption: \"Exonration ...\",\r\n    \r\n  },\r\n};\r\n\r\nexport const CONTROLTITLELIABS = {\r\n  en: {\r\n    year: \"Year\",\r\n    repay: \"Repayment\",\r\n    projValue: \"Projected Value\",\r\n  },\r\n  fr: {\r\n    year: \"Anne\",\r\n    repay: \"Remboursement\",\r\n    projValue: \"Valeur projete\",\r\n  },\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n/* export const LIABILITIES = {\r\n  en: {\r\n    header: \"Cash Needs at Death\",\r\n    Values: [\r\n      \"Last Expenses\",\r\n      \"Legal and Executor Fees\",\r\n      \"Outstanding Loans\",\r\n      \"Mortgage Redemption\",\r\n      \"Emergency Fund\",\r\n      \"Charitable Gifts\",\r\n      \"Legacy for Children\",\r\n      \"Child/Home Care\",\r\n      \"Credit Cards\",\r\n      \"Income Taxes\",\r\n      \"Other\",\r\n      \"Client Tax liability\"\r\n    ]\r\n  },\r\n  fr: {\r\n    header: \"Liquidits requises au dcs\",\r\n    Values: [\r\n      \"Derniers frais\",\r\n      \"Frais juridiques et successoraux\",\r\n      \"Emprunts  rembourser\",\r\n      \"Acquittement de l'hypothque\",\r\n      \"Fonds d'urgence\",\r\n      \"Dons de bienfaisance\",\r\n      \"Hritage pour les enfants\",\r\n      \"Garde d'enfants/soins  domicile\",\r\n      \"Cartes de crdit\",\r\n      \"Impt sur le revenu\",\r\n      \"Autre\",\r\n      \"Impt  payer par le client\"\r\n    ]\r\n  }\r\n}; */\r\n\r\nexport const INCSOURCESATDEATH = {\r\n  en: {\r\n    options: {\r\n      header: \"Options\",\r\n      client: \"Client Retirement Age\",\r\n      spouse: \"Spouse Retirement Age\",\r\n    },\r\n    CPP: {\r\n      header: \"Canada Pension Plan\",\r\n      client: \"Client Participation\",\r\n      spouse: \"Spouse Participation\",\r\n    },\r\n    survivorRetInc: {\r\n      header: \"Estimated Survivor's Retirement Income (in today's dollars)\",\r\n      client: \"Client Annual Income\",\r\n      spouse: \"Spouse Annual Income\",\r\n    },\r\n  },\r\n  fr: {\r\n    options: {\r\n      header: \"Options\",\r\n      client: \"ge de la retraite - client\",\r\n      spouse: \"ge de la retraite - conjoint\",\r\n    },\r\n    CPP: {\r\n      header: \"Rgime de pensions du Canada\",\r\n      client: \"Contribution du client\",\r\n      spouse: \"Contribution du conjoint\",\r\n    },\r\n    survivorRetInc: {\r\n      header:\r\n        \"Estimation du revenu de retraite du survivant (en dollars d'aujourd'hui)\",\r\n      client: \"Revenu annuel du client\",\r\n      spouse: \"Revenu annuel du conjoint\",\r\n    },\r\n  },\r\n};\r\n\r\nexport const PRESENTATION = {\r\n  en: {\r\n    illustrate: {\r\n      header: \"Illustrate Death Of\",\r\n      client: \"Client (New Client)\",\r\n      spouse: \"Spouse\",\r\n      combined: \"Combined\",\r\n    },\r\n    pres: {\r\n      header: \"Presentation\",\r\n      assump: {\r\n        header: \"Presentation Options\",\r\n        inf: \"Inflation Rate\",\r\n        inv: \"Investment Interest Rate\",\r\n      },\r\n      type: {\r\n        header: \"Presentation Type\",\r\n        power: \"PowerPoint\",\r\n        excel: \"Excel\",\r\n      },\r\n      lang: {\r\n        header: \"Presentation Language\",\r\n        en: \"English\",\r\n        fr: \"French\",\r\n      },\r\n      template: {\r\n        header: \"Presentation Templates - 1 available\",\r\n        file: \"File Name\",\r\n      },\r\n    },\r\n    insQuote: {\r\n      header: \"Life Insurance Quote\",\r\n      lifeExp: \"For survivor's normal life expectancy\",\r\n      65: \"Until survivor is age 65\",\r\n      25: \"Until youngest child is age 25\",\r\n      18: \"Until youngest child is age 18\",\r\n    },\r\n  },\r\n  fr: {\r\n    illustrate: {\r\n      header: \"Exemple prsentant le dcs...\",\r\n      client: \"Client (nouveau client)\",\r\n      spouse: \"Conjoint\",\r\n      combined: \"Combin\",\r\n    },\r\n    pres: {\r\n      header: \"Prsentation\",\r\n      assump: {\r\n        header: \"Options de la prsentation\",\r\n        inf: \"Taux d'inflation\",\r\n        inv: \"Taux d'intrt des placements\",\r\n      },\r\n      type: {\r\n        header: \"Type de prsentation\",\r\n        power: \"PowerPoint\",\r\n        excel: \"Excel\",\r\n      },\r\n      lang: {\r\n        header: \"Langue de la prsentation\",\r\n        en: \"Anglais\",\r\n        fr: \"Franais\",\r\n      },\r\n      template: {\r\n        header: \"Modles de prsentation - 1 disponible\",\r\n        file: \"Nom du fichier\",\r\n      },\r\n    },\r\n    insQuote: {\r\n      header: \"Soumission d'assurance vie\",\r\n      lifeExp: \"Pour l'esprance de vie moyenne du survivant\",\r\n      65: \"Jusqu'au 65e anniversaire du survivant\",\r\n      25: \"Jusqu'au 25e anniversaire de l'enfant le plus jeune\",\r\n      18: \"Jusqu'au 18e anniversaire de l'enfant le plus jeune\",\r\n    },\r\n  },\r\n};\r\n\r\nexport const ASSUMPTIONS = {\r\n  en: {\r\n    client: {\r\n      header: \"Client\",\r\n      retAge: \"Retirement Age\",\r\n      margTax: \"Current Marginal Tax Rate\",\r\n      avTax: \"Average Tax Rate at Retirement\",\r\n    },\r\n    spouse: {\r\n      header: \"Spouse\",\r\n      retAge: \"Retirement Age\",\r\n      margTax: \"Current Marginal Tax Rate\",\r\n      avTax: \"Average Tax Rate at Retirement\",\r\n    },\r\n    incAndInf: {\r\n      header: \"Retirement Income and Inflation\",\r\n      aftTaxInc: \"Current After-Tax Income\",\r\n      avTax: \"Current Average Tax Rate\",\r\n      aftTaxRetInc: \"Desired After-Tax Retirement Income\",\r\n      infRate: \"Inflation Rate\",\r\n    },\r\n  },\r\n  fr: {\r\n    client: {\r\n      header: \"Client\",\r\n      retAge: \"ge de la retraite\",\r\n      margTax: \"Taux d'imposition marginal actuel\",\r\n      avTax: \"Taux d'imposition moyen  la retraite\",\r\n    },\r\n    spouse: {\r\n      header: \"Conjoint\",\r\n      retAge: \"ge de la retraite\",\r\n      margTax: \"Taux d'imposition marginal actuel\",\r\n      avTax: \"Taux d'imposition moyen  la retraite\",\r\n    },\r\n    incAndInf: {\r\n      header: \"Revenus de retraite et inflation\",\r\n      aftTaxInc: \"Revenus actuels aprs impts\",\r\n      avTax: \"Taux d'imposition moyen actuel\",\r\n      aftTaxRetInc: \"Revenus de retraite souhaits aprs impts\",\r\n      infRate: \"Taux d'inflation\",\r\n    },\r\n  },\r\n};\r\n\r\nexport const CURRENTSAVE = {\r\n  en: {\r\n    client: {\r\n      header: \"Client\",\r\n      regist: {\r\n        header: \"Registered\",\r\n        currVal: \"Current Value\",\r\n        annCont: \"Annual Contributions\",\r\n        RoR: \"Current Rate of Return\",\r\n        RoRAtRet: \"Assumed Rate of Return at Retirement\",\r\n      },\r\n      nonRegist: {\r\n        header: \"Non-Registered\",\r\n        currVal: \"Current Value\",\r\n        annCont: \"Annual Contributions\",\r\n        RoR: \"Current Rate of Return\",\r\n        RoRAtRet: \"Assumed Rate of Return at Retirement\",\r\n      },\r\n      TFSA: {\r\n        header: \"TFSA\",\r\n        currVal: \"Current Value\",\r\n        annCont: \"Annual Contributions\",\r\n        RoR: \"Current Rate of Return\",\r\n        RoRAtRet: \"Assumed Rate of Return at Retirement\",\r\n      },\r\n    },\r\n    spouse: {\r\n      header: \"Spouse\",\r\n      regist: {\r\n        header: \"Registered\",\r\n        currVal: \"Current Value\",\r\n        annCont: \"Annual Contributions\",\r\n        RoR: \"Current Rate of Return\",\r\n        RoRAtRet: \"Assumed Rate of Return at Retirement\",\r\n      },\r\n      nonRegist: {\r\n        header: \"Non-Registered\",\r\n        currVal: \"Current Value\",\r\n        annCont: \"Annual Contributions\",\r\n        RoR: \"Current Rate of Return\",\r\n        RoRAtRet: \"Assumed Rate of Return at Retirement\",\r\n      },\r\n      TFSA: {\r\n        header: \"TFSA\",\r\n        currVal: \"Current Value\",\r\n        annCont: \"Annual Contributions\",\r\n        RoR: \"Current Rate of Return\",\r\n        RoRAtRet: \"Assumed Rate of Return at Retirement\",\r\n      },\r\n    },\r\n  },\r\n  fr: {\r\n    client: {\r\n      header: \"Client\",\r\n      regist: {\r\n        header: \"Enregistre\",\r\n        currVal: \"Valeur actuelle\",\r\n        annCont: \"Cotisations annuelles\",\r\n        RoR: \"Taux de rendement actuel\",\r\n        RoRAtRet: \"Taux de rendement hypothtique  la retraite\",\r\n      },\r\n      nonRegist: {\r\n        header: \"Non enregistre\",\r\n        currVal: \"Valeur actuelle\",\r\n        annCont: \"Cotisations annuelles\",\r\n        RoR: \"Taux de rendement actuel\",\r\n        RoRAtRet: \"Taux de rendement hypothtique  la retraite\",\r\n      },\r\n      TFSA: {\r\n        header: \"CELI\",\r\n        currVal: \"Valeur actuelle\",\r\n        annCont: \"Cotisations annuelles\",\r\n        RoR: \"Taux de rendement actuel\",\r\n        RoRAtRet: \"Taux de rendement hypothtique  la retraite\",\r\n      },\r\n    },\r\n    spouse: {\r\n      header: \"Spouse\",\r\n      regist: {\r\n        header: \"Enregistre\",\r\n        currVal: \"Valeur actuelle\",\r\n        annCont: \"Cotisations annuelles\",\r\n        RoR: \"Taux de rendement actuel\",\r\n        RoRAtRet: \"Taux de rendement hypothtique  la retraite\",\r\n      },\r\n      nonRegist: {\r\n        header: \"Non enregistre\",\r\n        currVal: \"Valeur actuelle\",\r\n        annCont: \"Cotisations annuelles\",\r\n        RoR: \"Taux de rendement actuel\",\r\n        RoRAtRet: \"Taux de rendement hypothtique  la retraite\",\r\n      },\r\n      TFSA: {\r\n        header: \"CELI\",\r\n        currVal: \"Valeur actuelle\",\r\n        annCont: \"Cotisations annuelles\",\r\n        RoR: \"Taux de rendement actuel\",\r\n        RoRAtRet: \"Taux de rendement hypothtique  la retraite\",\r\n      },\r\n    },\r\n  },\r\n};\r\n\r\nexport const PROGGOUV = {\r\n  en: {\r\n    CPP: {\r\n      header: \"Canada Pension Plan\",\r\n      part: \"Client Participation\",\r\n      start: \"Client Start Age\",\r\n      spousePart: \"Spouse Participation\",\r\n      spouseStart: \"Spouse Start Age\",\r\n    },\r\n    oldAgeSec: {\r\n      header: \"Old Age Security\",\r\n      part: \"Client Participation\",\r\n      start: \"Client Start Age\",\r\n      spousePart: \"Spouse Participation\",\r\n      spouseStart: \"Spouse Start Age\",\r\n    },\r\n  },\r\n  fr: {\r\n    CPP: {\r\n      header: \"Rgime de pensions du Canada\",\r\n      part: \"Contribution du client\",\r\n      start: \"ge du client au dpart\",\r\n      spousePart: \"Contribution du conjoint\",\r\n      spouseStart: \"ge du conjoint au dpart\",\r\n    },\r\n    oldAgeSec: {\r\n      header: \"Scurit de la vieillesse\",\r\n      part: \"Contribution du client\",\r\n      start: \"ge du client au dpart\",\r\n      spousePart: \"Contribution du conjoint\",\r\n      spouseStart: \"ge du conjoint au dpart\",\r\n    },\r\n  },\r\n};\r\n\r\nexport const INCSOURCESATRET = {\r\n  en: {\r\n    client: {\r\n      header: \"Client\",\r\n      from: \"From Age\",\r\n      to: \"To Age\",\r\n      inc: \"Income Amount\",\r\n    },\r\n    spouse: {\r\n      header: \"Spouse\",\r\n      from: \"From Age\",\r\n      to: \"To Age\",\r\n      inc: \"Income Amount\",\r\n    },\r\n  },\r\n  fr: {\r\n    client: {\r\n      header: \"Client\",\r\n      from: \"de l'ge\",\r\n      to: \" l'ge\",\r\n      inc: \"Montant des revenus\",\r\n    },\r\n    spouse: {\r\n      header: \"Spouse\",\r\n      from: \"de l'ge\",\r\n      to: \" l'ge\",\r\n      inc: \"Montant des revenus\",\r\n    },\r\n  },\r\n};\r\n\r\nexport const CONTROLTITLE = {\r\n  en: {\r\n    age: \"Age\",\r\n    sex: \"Sex\",\r\n    smoking: \"Smoking Status\",\r\n    name: \"Name\",\r\n    member: \"Member\",\r\n    type: \"Type\",\r\n    owner: \"Owner\",\r\n    growthDir: \"Grows/Reduces\",\r\n    exposureDur: \"Exposure Duration\",\r\n    changeRate: \"Reduction Rate\",\r\n    repay: \"Annual Repayment\",\r\n    amount: \"Current Value\",\r\n    FA: \"Face Amount\",\r\n    amountGross: \"Gross Value\",\r\n    afterTaxAmount: \"After-tax Value\",\r\n    percent: \"Percent\",\r\n    tax: \"Tax Method\",\r\n    desc: \"Description\",\r\n    disposeYr: \"Year to Dispose\",\r\n    disposeDur: \"Dur. of Disposal\",\r\n    startYear: \"Start Year\",\r\n    dur: \"Duration\",\r\n    ACB: \"ACB\",\r\n    smallBusinessCapGainExemption: \"Exemption...\",\r\n    growth: \"Growth Rate\",\r\n    income: \"Gross Income\",\r\n    avgTax: \"Avg. Tax Rate\",\r\n    retAge: \"Retirement Age\",\r\n    protectToAge: \"Protect to Age\",\r\n    cppElig: \"CPP Eligibility\",\r\n    qppElig: \"QPP Eligibility\",\r\n    invRate: \"Investment Rate\",\r\n    inflation: \"Inflation Rate\",\r\n    taxRate: \"Marginal Tax Rate\",\r\n    dividendTaxRate: \"Dividend Tax Rate\",\r\n    province: \"Province\",\r\n    designedBy: \"Designed By\",\r\n    designedFor: \"Designed For\",\r\n    contributionAmt: \"Contribution\",\r\n    contributionStartYr: \"From Year\",\r\n    contributionDur: \"Duration\",\r\n    withdrawalAmt: \"Withdrawal\",\r\n    withdrawalStartYr: \"From Year\",\r\n    withdrawalDur: \"Duration\",\r\n    incomeRate: \"Income Rate\",\r\n    RRIFRate: \"RRIF Growth Rate\",\r\n    RRIFAge: \"RRIF Age\",\r\n    ownershipAction: \"Ownership\",\r\n    pdf: \"Export to PDF\",\r\n    pdfINAAppendix: \"Export to PDF Appendix\",\r\n    print: \"Printable Page\",\r\n    lifo: \"Life Insurance Funding Options\",\r\n    wl: \"Insurance for Your Whole Life\",\r\n    ep: \"Protecting Your Estate \",\r\n    compulife: \"Get a Quote ...\",\r\n    save: \"Save\",\r\n    load: \"Load\",\r\n    rec: \"Recover\",\r\n    notes: \"Notes\",\r\n    switch: \"Switch Client\"\r\n  },\r\n  fr: {\r\n    age: \"ge\",\r\n    sex: \"Sexe\",\r\n    smoking: \"Fumeur/ non-fumeur\",\r\n    name: \"Nom\",\r\n    member: \"Membre\",\r\n    type: \"Type\",\r\n    owner: \"Propritaire\",\r\n    growthDir: \"Augmente/diminue\",\r\n    exposureDur: \"Dure de l'exposition\",\r\n    changeRate: \"Taux de rduction\",\r\n    repay: \"Remboursement annuel\",\r\n    amount: \"Valeur actuelle\",\r\n    FA: \"Capital assur\",\r\n    amountGross: \"Valeur brute\",\r\n    afterTaxAmount: \"Valeur aprs impt\",\r\n    percent: \"Pourcentage\",\r\n    tax: \"Mthode fiscale\",\r\n    desc: \"Description\",\r\n    disposeYr: \"Anne  liminer\",\r\n    disposeDur: \"Dure de l'limination\",\r\n    startYear: \"Anne de dmarrage\",\r\n    dur: \"Dure\",\r\n    ACB: \"PBR\",\r\n    smallBusinessCapGainExemption: \"Exonration...\",\r\n    growth: \"Taux de croissance\",\r\n    income: \"Revenu brut\",\r\n    avgTax: \"% d'impt moyen\",\r\n    retAge: \"ge de la retraite\",\r\n    protectToAge: \"Protection  l'ge\",\r\n    cppElig: \"Admissibilit au RPC\",\r\n    qppElig: \"Admissibilit au RRQ\",\r\n    invRate: \"Taux de rendement\",\r\n    inflation: \"Taux d'inflation\",\r\n    taxRate: \"% d'impt marginal\",\r\n    dividendTaxRate: \"Taux d'imposition\", // des dividendes\",\r\n    province: \"Province\",\r\n    designedBy: \"Par\",\r\n    designedFor: \"Conu pour\",\r\n    contributionAmt: \"Contribution\",\r\n    contributionStartYr: \"From Year\",\r\n    contributionDur: \"Dure\",\r\n\r\n    withdrawalAmt: \"Retrait\",\r\n    withdrawalStartYr: \"De l'anne\",\r\n    withdrawalDur: \"Dure\",\r\n\r\n    incomeRate: \"Revenu en %\",\r\n    RRIFRate: \"Taux de crois. FERR\",\r\n    RRIFAge: \"ge  FERR\",\r\n    ownershipAction: \"Proprit\",\r\n    pdf: \"Exporter en format PDF\",\r\n    pdfINAAppendix: \"Exporter vers l'annexe PDF\",\r\n    print: \"Page imprimable\",\r\n    lifo: \"Modes de financement de l'assurance vie\",\r\n    wl: \"L'assurance pour votre vie entire\",\r\n    ep: \"Protection de votre patrimoine\",\r\n    compulife: \"Gnrer une cotation\",\r\n    save: \"Enregistrer\",\r\n    load: \"Charger\",\r\n    rec: \"Rcuprer\",\r\n    notes: \"Notes\",\r\n    switch: \"Client d'change\"\r\n  },\r\n};\r\n\r\nexport const TITLES = {\r\n  en: {\r\n    appletINA: \"Insurance Needs Analysis\",\r\n    appletEP: \"Protecting Your Estate\",\r\n    clients: \"Family Profile\",\r\n    clients_1: \"Client Profile\",\r\n    assets: \"Assets, Sources of Cash\",\r\n    liabilities: \"Liabilities, Cash Needs at Death\",\r\n    sources: \"Sources of Income of the Survivor\",\r\n    sources_1: \"Sources of Income of the Estate\",\r\n    needs: \"Income Needs of the Survivor\",\r\n    needs_1: \"Income Needs of the Estate\",\r\n    settings: \"Presentation Options\",\r\n    presentations: \"Presentation Details\",\r\n    results: \"Results\",\r\n    presBut: \"Presentation\",\r\n    graphsBut: \"Graphs\",\r\n    retBut: \"Retirement\",\r\n    protectButton: \"Protection Period\",\r\n    leBut: \"Life Expectancy\",\r\n    age100But: \"Age 100\",\r\n    spreadsheetBut: \"Spreadsheet\",\r\n    analysisBut: \"Analysis\",\r\n    benef: \"beneficiary...\",\r\n    insuredJLTD: \"insure as JLTD\",\r\n    insured: \"to be insured...\",\r\n\r\n    default: \"Set as Default\",\r\n    defaultClear: \"Clear Default\",\r\n  },\r\n  fr: {\r\n    appletINA: \"Analyse des besoins en matire d'assurance\",\r\n    appletEP: \"Protection de votre patrimoine\",\r\n    clients: \"Profil familial\",\r\n    clients_1: \"Profil du client\",\r\n    assets: \"Sources de capitaux\",\r\n    liabilities: \"Liquidits requises au dcs\",\r\n    sources: \"Sources de revenus au dcs\",\r\n    sources_1: \"Sources de revenus de la succession\",\r\n    needs: \"Besoins de revenu du survivant\",\r\n    needs_1: \"Besoins de revenu du la succession\",\r\n    settings: \"Options de la prsentation\",\r\n    presentations: \"Prcisions sur la prsentation\",\r\n    results: \"Rsultats\",\r\n    presBut: \"Prsentation\",\r\n    graphsBut: \"Graphique\",\r\n    retBut: \"Retraite\",\r\n    protectButton: \"Priode de protection\",\r\n    leBut: \"Esprance de vie\",\r\n    age100But: \"100 ans\",\r\n    spreadsheetBut: \"Feuille de calcul\",\r\n    analysisBut: \"Analyse\",\r\n    benef: \"bnficiaire...\",\r\n    insured: \"tre assur...\",\r\n    default: \"Dfinir par dfaut\",\r\n    defaultClear: \"Effacer Par dfaut\",\r\n  },\r\n};\r\n\r\nexport const UNLISTED = {\r\n  en: {\r\n    Assets: {\r\n      Values: [\"Charit. Gifts Tax Credit\"],\r\n    },\r\n  },\r\n  fr: {\r\n    Assets: {\r\n      Values: [\"Crdit d'impt pour don de bienfaisance\"],\r\n    },\r\n  },\r\n};\r\n\r\nexport const OUTPUTTITLE = {\r\n  en: {\r\n    Values: [\r\n      \"Insurance Needs Analysis\",\r\n      \"Family Cash Needs at Death\",\r\n      \"Family Income Needs at Death\",\r\n      \"Family Cash Sources at Death\",\r\n      \"Family Income Sources at Death\",\r\n      \"Life Insurance Analysis\",\r\n      \"Some Important Notes\",\r\n    ],\r\n  },\r\n  fr: {\r\n    Values: [\r\n      \"Analyse des besoins en matire d'assurance\",\r\n      \"Liquidits requises pour la famille au dcs\",\r\n      \"Revenus requis pour la famille au dcs\",\r\n      \"Sources de liquidits de la famille au dcs\",\r\n      \"Sources de revenus de la famille au dcs\",\r\n      \"Analyse des besoins d'assurance vie\",\r\n      \"Notes importantes\",\r\n    ],\r\n  },\r\n};\r\n\r\nexport const OUTPUTTITLE_EP = {\r\n  en: {\r\n    Values: [\r\n      \"Protecting your Estate\",\r\n      \"Family Cash Needs at Death\",\r\n      \"Family Income Needs at Death\",\r\n      \"Family Cash Sources at Death\",\r\n      \"Family Income Sources at Death\",\r\n      \"Life Insurance Analysis\",\r\n      \"Some Important Notes\",\r\n    ],\r\n  },\r\n  fr: {\r\n    Values: [\r\n      \"Protection de votre patrimoine\",\r\n      \"Liquidits requises pour la famille au dcs\",\r\n      \"Revenus requis pour la famille au dcs\",\r\n      \"Sources de liquidits de la famille au dcs\",\r\n      \"Sources de revenus de la famille au dcs\",\r\n      \"Analyse des besoins d'assurance vie\",\r\n      \"Notes importantes\",\r\n    ],\r\n  },\r\n};\r\n\r\nexport const MESSAGES = {\r\n  en: {\r\n    insNeed: \"Insurance Needs\",\r\n    graphLine2: \"To provide for the income shortfall until retirement\",\r\n    graphT1: \"Personal cash Flow\",\r\n    graphT2: \"Government cash Flow\",\r\n    graphT3: \"Income Needs\",\r\n    graphT4: \"Shortfall(-)/Surplus(+)\",\r\n    \r\n    ever: \" ... for ever\",\r\n    taxMsg: \"Tax methods need to be discussed with your financial advisor\",\r\n    fetch: \"Failed to connect to the server\",\r\n    \r\n  },\r\n  fr: {\r\n    insNeed: \"Besoins d'assurance\",\r\n    graphLine2:\r\n      \"Pour couvrir le manque  gagner en matire de revenus jusqu' la retraite\",\r\n    graphT1: \"Liquidits personnelles\",\r\n    graphT2: \"Liquidits verses par l'tat\",\r\n    graphT3: \"Revenus requis\",\r\n    graphT4: \"Manque  gagner(-)/surplus(+)\",\r\n    infoYr0:\r\n      \"L'anne 0 est l'anne d                                                                                     u dcs\",\r\n    infoRetDur: \"Le nombre d'annes avant la retraite est de .... ans\",\r\n    infoAvgTax:\r\n      \"Survivor's tax rate is applied to annual income and interest and annual asset disposition. Marginal tax rate (under Presentaion Details) is applied to planned or potential full disposition of an asset\",\r\n    infoAdjust:\r\n      \"Ajuster les besoins de revenu et les dures de la source de revenu  dernier ge (99) or l'esprance de vie de\",\r\n    clientOnly:\r\n      \"L'analyse des besoins est toujours effectue pour le client membre de la famille\",\r\n    infoElig:\r\n      \"Les prestations du survivant et de l'orphelin sont bases sur l'admissibilit du client\",\r\n    ever: \" ... pour toujours\",\r\n    taxMsg:\r\n      \"Les mthodes fiscales doivent tre discutes avec votre conseiller financier\",\r\n    fetch: \"Dfaut de connexion au serveur\",\r\n    ie:\r\n      \"s'il vous plat utiliser les navigateurs Edge ou Chrome pour les graphiques et les fonctionnalits compltes\",\r\n    govB:\r\n      \"Ne supprimez pas les prestations gouvernementales. Pour les ajuster, modifier l'admissibilit du client\",\r\n    assetTax:\r\n      \"Veuillez utiliser les valeurs des actifs aprs impt jusqu' ce que la mthode d'imposition devienne disponibl\",\r\n  },\r\n};\r\n\r\nexport const COLUMN_TITLES = {\r\n  INA_SHEET_HEADERS: {\r\n    en: {\r\n      Full: [\r\n        \"Calendar Year\",\r\n        \"Survivor Age\",\r\n        \"Income Needs\",\r\n        \"Survivors' CPP/QPP\",\r\n        \"Survivors' Income\",\r\n        \"Other Income\",\r\n        \"Total Income\",\r\n        \"Assets, Liabilities Cash Flow\",\r\n        \"Additional Amounts Required\",\r\n        \"Additional Capital Required\",\r\n        \"Capital Fund\",\r\n      ],\r\n    },\r\n    fr: {\r\n      Full: [\r\n        \"Anne calendaire\",\r\n        \"ge du survivant\",\r\n        \"Revenus requis\",\r\n        \"RPC/RRQ des survivants\",\r\n        \"Revenu des survivants\",\r\n        \"Autre revenu\",\r\n        \"Revenu total\",\r\n        \"Flux de trsorerie des actifs et des passifs\",\r\n        \"Montants additionnel requis\",\r\n        \"Capital additionnel requis\",\r\n        \"Fonds de capitaux\",\r\n      ],\r\n    },\r\n  },\r\n  EP_SHEET_HEADERS: {\r\n    en: {\r\n      Full: [\r\n        \"Year\",\r\n        \"Age\",\r\n        \"BOY Balance\",\r\n        \"Fair Market Value\",\r\n        \"Contributions\",\r\n        \"Income, RRIF\",\r\n        \"Sale Proceeds\",\r\n        \"Tax on Income\",\r\n        \"Capital Gain\",\r\n        \"Capital Gains Exemption\",\r\n        \"EOY Balance\",\r\n        \"Average Growth\",\r\n        \"Tax Payable at Death\",\r\n      ],\r\n    },\r\n    fr: {\r\n      Full: [\r\n        \"Anne\",\r\n        \"ge\",\r\n        \"Valeur en dbut d'anne\",\r\n        \"Juste valeur marchande\",\r\n        \"Contributions\",\r\n        \"Revenus, FEER\",\r\n        \"Produits de la vente\",\r\n        \"Impt sur le revenu\",\r\n        \"Gain en capital\",\r\n        \"Exonration des gains en capital\",\r\n        \"Valeur en fin d'anne\",\r\n        \"Croissance moyenne\",\r\n        \"Impt payable au dcs\",\r\n      ],\r\n    },\r\n  },\r\n\r\n  en: {\r\n    intRate: \"Interest Rate\",\r\n    infRate: \"Inflation Rate\",\r\n    surplusCapital: \"Surplus Capital\",\r\n    blank: \"\",\r\n    additionalCapitalReq: \"Additional Capital Required:\",\r\n    survivorLE: \"For survivor's normal life expectancy\",\r\n    survivor65: \"Until survivor is age 65\",\r\n    survivorProtection: \"Until the end of Protection Period\",\r\n    Year: \"Year\",\r\n    Age: \"Age\",\r\n    FMV: \"Fair Market Value\",\r\n    FA: \"Face Amount\",\r\n    EOYBalance: \"EOY Balance\",\r\n    AvgGrowth: \"Average Growth\",\r\n    ACB: \"ACB\",\r\n    AnnualContribution: \"Annual Contribution\",\r\n    MinRRIFIncome: \"Min. RRIF Income\",\r\n    Withdrawal: \"Income, Withdrawal\",\r\n    SaleProceeds: \"Sale Proceeds\",\r\n    RentalIncome: \"Rental Income\",\r\n    TaxLiability: \"Tax Liability\",\r\n    Taxonincome: \"Tax on income\",\r\n    TaxLiabilityatDeath: \"Tax Liability at Death\",\r\n    CapitalGain: \"Capital Gain\",\r\n    CapitalGainsExemption: \"Capital Gains Exemption\",\r\n  },\r\n  fr: {\r\n    intRate: \"Taux d'intrt\",\r\n    infRate: \"Taux d'inflation\",\r\n    surplusCapital: \"Capital excdentaire\",\r\n    blank: \"\",\r\n    additionalCapitalReq: \"Capital additionnel requis: \",\r\n    survivorLE: \"Pour l'esprance de vie moyenne du survivant\",\r\n    survivor65: \"Jusqu'au 65e anniversaire du survivant\",\r\n    survivorProtection: \"Jusqu' la fin de la priode de protection\",\r\n    Year: \"Anne\",\r\n    Age: \"ge\",\r\n    FMV: \"Juste valeur marchande\",\r\n    FA: \"Capital assur\",\r\n    EOYBalance: \"Valeur FDA\",\r\n    AvgGrowth: \"Croissance moyenne\",\r\n    ACB: \"PBR\",\r\n    AnnualContribution: \"Cotisations annuelles\",\r\n    MinRRIFIncome: \"Revenu minimal d'un FERR\",\r\n    Withdrawal: \"Revenu, retrait\",\r\n    SaleProceeds: \"Produits de la vente\",\r\n    RentalIncome: \"Revenus locatifs\",\r\n    TaxLiability: \"Impt  payer\",\r\n    Taxonincome: \"Impt sur le revenu\",\r\n    TaxLiabilityatDeath: \"Impt  payer au dcs\",\r\n    CapitalGain: \"Gain en capital\",\r\n    CapitalGainsExemption: \"Exonration des gains en capital\",    \r\n  },\r\n};\r\n\r\nexport const GRID_INTERNAL_CAPTIONS = {\r\n  en: {\r\n    excel: \"Download Excel\",\r\n    rows: \"Rows per page\",\r\n    of: \"of\",\r\n  },\r\n  fr: {\r\n    excel: \"Tlcharger le fichier Excel\",\r\n    rows: \"Lignes par page\",\r\n    of: \"lignes 1-5 sur 10\",\r\n  },\r\n};\r\n\r\nexport const TOTALS = {\r\n  ESTATE_LIAB: {\r\n    value: { en: \"Estate Liability\", fr: \"Droits successoraux\" },\r\n    Key: \"ESTATE_LIAB\",\r\n    order: 1,\r\n    colour: \"#872651\",\r\n  },\r\n  TAX_LIAB: {\r\n    value: { en: \"Tax Liability\", fr: \"Impt  payer\" },\r\n    Key: \"TAX_LIAB\",\r\n    order: 1,\r\n    colour: \"#872651\",\r\n  },\r\n};\r\n\r\nexport const EMAIL = {\r\n  en: {\r\n    body: \"The following link opens your quote in Toolkit Direct\", //. Once there, click on Insurance Needs Analysis to open up the attached quote.\",\r\n  },\r\n  fr: {\r\n    body:\r\n      \"Le lien suivant ouvre vos valeurs d'entre dans Bote  outils directe\",\r\n  },\r\n};\r\n\r\nexport const LIABILITIES = {\r\n  LAST_EXPENSES: {\r\n    value: { en: \"Last Expenses\", fr: \"Derniers frais\" },\r\n    Key: \"LAST_EXPENSES\",\r\n    order: 2,\r\n    ID: 0,\r\n  },\r\n  LEGAL_AND_EXECUTOR_FEES: {\r\n    value: {\r\n      en: \"Legal and Executor Fees\",\r\n      fr: \"Frais juridiques et successoraux\",\r\n    },\r\n    Key: \"LEGAL_AND_EXECUTOR_FEES\",\r\n    order: 3,\r\n    ID: 1,\r\n  },\r\n  OUTSTANDING_LOANS: {\r\n    value: { en: \"Outstanding Loans\", fr: \"Empruntsrembourser\" },\r\n    Key: \"OUTSTANDING_LOANS\",\r\n    order: 4,\r\n    ID: 2,\r\n  },\r\n  MORTGAGE_REDEMPTION: {\r\n    value: { en: \"MortgageRedemption\", fr: \"Acquittementdel'hypothque\" },\r\n    Key: \"MORTGAGE_REDEMPTION\",\r\n    order: 5,\r\n    ID: 3,\r\n  },\r\n  EMERGENCY_FUND: {\r\n    value: { en: \"EmergencyFund\", fr: \"Fondsd'urgence\" },\r\n    Key: \"EMERGENCY_FUND\",\r\n    order: 6,\r\n    ID: 4,\r\n  },\r\n  CHARITABLE_GIFTS: {\r\n    value: { en: \"CharitableGifts\", fr: \"Donsdebienfaisance\" },\r\n    Key: \"CHARITABLE_GIFTS\",\r\n    order: 7,\r\n    ID: 5,\r\n  },\r\n  LEGACY_FOR_CHILDREN: {\r\n    value: { en: \"LegacyforChildren\", fr: \"Hritagepourlesenfants\" },\r\n    Key: \"LEGACY_FOR_CHILDREN\",\r\n    order: 8,\r\n    ID: 6,\r\n  },\r\n  CHILD_HOME_CARE: {\r\n    value: { en: \"Child/HomeCare\", fr: \"Garded'enfants/soinsdomicile\" },\r\n    Key: \"CHILD_HOME_CARE\",\r\n    order: 9,\r\n    ID: 7,\r\n  },\r\n  CREDIT_CARDS: {\r\n    value: { en: \"CreditCards\", fr: \"Cartesdecrdit\" },\r\n    Key: \"CREDIT_CARDS\",\r\n    order: 10,\r\n    ID: 8,\r\n  },\r\n  INCOME_TAXES: {\r\n    value: { en: \"IncomeTaxes\", fr: \"Imptsurlerevenu\" },\r\n    Key: \"INCOME_TAXES\",\r\n    order: 11,\r\n    ID: 9,\r\n  },\r\n  OTHER: { value: { en: \"Other\", fr: \"Autre\" }, Key: \"OTHER\", order: 10 },\r\n  CLIENT_TAX_LIABILITY: {\r\n    value: { en: \"ClientTaxliability\", fr: \"Impt  payer par le client\" },\r\n    Key: \"CLIENT_TAX_LIABILITY\",\r\n    order: 0, // no show\r\n    ID: 10,\r\n  },\r\n  PROBATE: {\r\n    value: { en: \"Probate\", fr: \"Frais d'homologation\" },\r\n    Key: \"PROBATE\",\r\n    order: 1,\r\n    ID: 11,\r\n  },\r\n  \r\n};\r\n\r\nexport const ASSETS = {\r\n  PERSONAL_RESIDENCE: {\r\n    value: {\r\n      en: \"Principal Residence\",\r\n      fr: \"Rsidence principale\",\r\n      oldName: \"Personal Residence\",\r\n    },\r\n    Key: \"PERSONAL_RESIDENCE\",\r\n    order: 1,\r\n    ID: 0,\r\n    colour: \"#9B5BA5\",\r\n  },\r\n  REAL_ESTATE: {\r\n    value: { en: \"Real Estate\", fr: \"Immobilier\" },\r\n    Key: \"REAL_ESTATE\",\r\n    order: 2,\r\n    ID: 1,\r\n    colour: \"#0093b2\",\r\n  },\r\n  STOCKS_BONDS: {\r\n    value: { en: \"Stocks & Bonds\", fr: \"Actions et obligations\" },\r\n    Key: \"STOCKS_BONDS\",\r\n    order: 3,\r\n    ID: 2,\r\n    colour: \"#00215b\",\r\n  },\r\n  SMALL_BUSINESS_SHARES: {\r\n    value: {\r\n      en: \"Small Business Shares\",\r\n      fr: \"Actions de petites entreprises \",\r\n    },\r\n    Key: \"SMALL_BUSINESS_SHARES\",\r\n    order: 4,\r\n    ID: 3,\r\n    colour: \"#c4dfe0\",\r\n  },\r\n  RRSP_RRIF: {\r\n    value: { en: \"RRSP/RRIF\", fr: \"REER/FERR\" },\r\n    Key: \"RRSP_RRIF\",\r\n    order: 5,\r\n    ID: 4,\r\n    colour: \"#cf7f00\",\r\n  },\r\n  INTEREST_BEARING: {\r\n    value: { en: \"Interest Bearing\", fr: \"Placement  intrt\" },\r\n    Key: \"INTEREST_BEARING\",\r\n    order: 7,\r\n    ID: 5,\r\n    colour: \"#dfd666\",\r\n  },\r\n  CASH: {\r\n    value: { en: \"Cash\", fr: \"Liquidits\" },\r\n    Key: \"CASH\",\r\n    order: 8,\r\n    ID: 6,\r\n    colour: \"darkred\",\r\n  },\r\n  OTHER_ASSETS: {\r\n    value: { en: \"Other Assets\", fr: \"Autres actifs\" },\r\n    Key: \"OTHER_ASSETS\",\r\n    order: 9,\r\n    ID: 7,\r\n    colour: \"#949a9e\",\r\n  },\r\n  LIFE_INSURANCE: {\r\n    value: { en: \"Life Insurance\", fr: \"Assurance vie\" },\r\n    Key: \"LIFE_INSURANCE\",\r\n    order: 10,\r\n    ID: 8,\r\n    colour: \"872651\",\r\n  },\r\n  CHARITABLE_GIFTS_TAX_CREDIT: {\r\n    value: {\r\n      en: \"Charit. Gifts Tax Credit\",\r\n      fr: \"Crdit d'impt pour don de bienfaisance\",\r\n    },\r\n    Key: \"CHARITABLE_GIFTS_TAX_CREDIT\",\r\n    order: 0, // no show,\r\n    ID: 9,\r\n    colour: \"872651\",\r\n  },\r\n  TFSA: {\r\n    value: {\r\n      en: \"TFSA\",\r\n      fr: \"CELI\",\r\n    },\r\n    Key: \"TFSA\",\r\n    order: 6,\r\n    ID: 10,\r\n    colour: \"872651\",\r\n  },\r\n};\r\n\r\nexport const OWNERSHIP = {\r\n  CLIENT: {\r\n    value: { en: \"Client\", fr: \"Client\" },\r\n    Key: \"CLIENT\",\r\n    order: 0,\r\n    ID: 0,\r\n  },\r\n  SPOUSE: {\r\n    value: { en: \"Spouse\", fr: \"Conjoint\" },\r\n    Key: \"SPOUSE\",\r\n    order: 3,\r\n    ID: 1,\r\n  },\r\n  JOINT: {\r\n    value: { en: \"Joint\", fr: \"Conjoint\" },\r\n    Key: \"JOINT\",\r\n    order: 4,\r\n    ID: 2,\r\n  },\r\n};\r\n\r\nexport const ASSET_OWNERSHIP_ACTION = {\r\n  CLIENT: {\r\n    value: { en: \"Client\", fr: \"Client\" },\r\n    Key: \"CLIENT\",\r\n    order: 0,\r\n    ID: 0,\r\n  },\r\n  SPOUSE: {\r\n    value: { en: \"Spouse\", fr: \"Conjoint\" },\r\n    Key: \"SPOUSE\",\r\n    order: 3,\r\n    ID: 1,\r\n  },\r\n  JOINT: {\r\n    value: { en: \"Joint\", fr: \"Conjoint\" },\r\n    Key: \"JOINT\",\r\n    order: 4,\r\n    ID: 2,\r\n  },\r\n  CLIENT_LIQUIDATE: {\r\n    value: { en: \"Client: Liquidate\", fr: \"Client : Liquider\" },\r\n    Key: \"CLIENT_LIQUIDATE\",\r\n    order: 1,\r\n    ID: 3,\r\n  },\r\n  CLIENT_ROLLOVER: {\r\n    value: { en: \"Client: Roll-over\", fr: \"Client : Report\" },\r\n    Key: \"CLIENT_ROLLOVER\",\r\n    order: 2,\r\n    ID: 4,\r\n  },\r\n};\r\n\r\nexport const ASSET_TAX = {\r\n  NON_TAXABLE: {\r\n    value: { en: \"Non-taxable\", fr: \"Non imposable\" },\r\n    Key: \"NON_TAXABLE\",\r\n    order: 1,\r\n    ID: 0,\r\n  },\r\n  CAPITAL_GAINS_DEFERRED: {\r\n    value: { en: \"Capital Gains Deferred\", fr: \"Gains en capital diffrs\" },\r\n    Key: \"CAPITAL_GAINS_DEFERRED\",\r\n    order: 2,\r\n    ID: 1,\r\n  },\r\n  CAPITAL_GAINS_ANNUAL: {\r\n    value: { en: \"Capital Gains Annual\", fr: \"Gains en capital annuels\" },\r\n    Key: \"CAPITAL_GAINS_ANNUAL\",\r\n    order: 3,\r\n    ID: 2,\r\n  },\r\n  REGISTERED: {\r\n    value: { en: \"Registered\", fr: \"Enregistr\" },\r\n    Key: \"REGISTERED\",\r\n    order: 4,\r\n    ID: 3,\r\n  },\r\n  FULLY_TAXABLE: {\r\n    value: { en: \"Fully Taxable\", fr: \"Pleinement imposable\" },\r\n    Key: \"FULLY_TAXABLE\",\r\n    order: 5,\r\n    ID: 4,\r\n  },\r\n  DIVIDEND: {\r\n    value: { en: \"Dividend\", fr: \"Dividende\" },\r\n    Key: \"DIVIDEND\",\r\n    order: 0,\r\n    ID: 5,\r\n  },\r\n  INTEREST: {\r\n    value: { en: \"Interest\", fr: \"Intrts\" },\r\n    Key: \"INTEREST\",\r\n    order: 6,\r\n    ID: 6,\r\n  },\r\n  QUALIFYING_SMALL_BUSINESS: {\r\n    value: { en: \"Qualif. Small Business\", fr: \"petites entreprises\" },\r\n    Key: \"QUALIFYING_SMALL_BUSINESS\",\r\n    order: 7,\r\n    ID: 7,\r\n  },\r\n};\r\n\r\nexport const INCOMESOURCES = {\r\n  SURVIVORS_INCOME: {\r\n    value: { en: \"Survivor's Income\", fr: \"Revenus du survivant\" },\r\n    Key: \"SURVIVORS_INCOME\",\r\n    order: 1,\r\n    ID: 0,\r\n  },\r\n  GOV_SURVIVORS_PENSION: {\r\n    value: {\r\n      en: \"Gov. Survivor's Pension\",\r\n      fr: \"Pension de survivant du gouv.\",\r\n    },\r\n    Key: \"GOV_SURVIVORS_PENSION\",\r\n    order: 2,\r\n    ID: 1,\r\n  },\r\n  GOV_DEATH_BENEFIT: {\r\n    value: { en: \"Gov. Death Benefit\", fr: \"Prestation de dcs du gouv.\" },\r\n    Key: \"GOV_DEATH_BENEFIT\",\r\n    order: 3,\r\n    ID: 2,\r\n  },\r\n  GOV_ORPHANS_BENEFIT: {\r\n    value: {\r\n      en: \"Gov. Orphan's Benefit\",\r\n      fr: \"Prestation d'orphelin du gouv.\",\r\n    },\r\n    Key: \"GOV_ORPHANS_BENEFIT\",\r\n    order: 4,\r\n    ID: 3,\r\n  },\r\n  RENTAL_INCOME: {\r\n    value: { en: \"Rental Income\", fr: \"Revenus locatifs\" },\r\n    Key: \"RENTAL_INCOME\",\r\n    order: 5,\r\n    ID: 4,\r\n  },\r\n  DIVIDEND_INCOME: {\r\n    value: { en: \"Dividend Income\", fr: \"Revenu de dividendes\" },\r\n    Key: \"DIVIDEND_INCOME\",\r\n    order: 6,\r\n    ID: 5,\r\n  },\r\n\r\n  RETIREMENT_INCOME: {\r\n    value: { en: \"Retirement Income\", fr: \"Revenus de retraite\" },\r\n    Key: \"RETIREMENT_INCOME\",\r\n    order: 7,\r\n    ID: 6,\r\n  },\r\n  OTHER: {\r\n    value: { en: \"Other\", fr: \"Autre\" },\r\n    Key: \"OTHER\",\r\n    order: 8,\r\n    ID: 7,\r\n  },\r\n  RRIF: {\r\n    value: { en: \"RRIF\", fr: \"FERR\" },\r\n    Key: \"RRIF\",\r\n    order: 0,\r\n    ID: 8,\r\n  },\r\n};\r\n\r\nexport const INCOMENEEDS = {\r\n  PERCET_OF_INCOME: {\r\n    value: { en: \"% of Total Income\", fr: \"% du revenu total\" },\r\n    Key: \"PERCET_OF_INCOME\",\r\n    order: 1,\r\n    ID: 0,\r\n  },\r\n\r\n  EDUCATION_FUND: {\r\n    value: { en: \"Education Fund\", fr: \"Fonds d'tudes\" },\r\n    Key: \"EDUCATION_FUND\",\r\n    order: 2,\r\n    ID: 1,\r\n  },\r\n\r\n  TEMPORARY_INCOME: {\r\n    value: { en: \"Temporary Income\", fr: \"Revenus temporaires\" },\r\n    Key: \"TEMPORARY_INCOME\",\r\n    order: 3,\r\n    ID: 2,\r\n  },\r\n\r\n  OTHER: {\r\n    value: { en: \"Other\", fr: \"Autre\" },\r\n    Key: \"OTHER\",\r\n    order: 4,\r\n    ID: 3,\r\n  },\r\n};\r\n\r\nexport const PROVINCE = {\r\n  // \r\n  // {AB, BC, ON, QC, MB, NS, NB, NF, SK, PE, NT, NU,YU,YT}\r\n  AB: {\r\n    value: { en: \"Alberta\", fr: \"Alberta\" },\r\n    Key: \"AB\",\r\n    order: 1,\r\n    ID: 0,\r\n  },\r\n  BC: {\r\n    value: { en: \"British Columbia\", fr: \"Colombie-Britannique\" },\r\n    Key: \"BC\",\r\n    order: 2,\r\n    ID: 1,\r\n  },\r\n  ON: {\r\n    value: { en: \"Ontario\", fr: \"Ontario\" },\r\n    Key: \"ON\",\r\n    order: 8,\r\n    ID: 2,\r\n  },\r\n  QC: {\r\n    value: { en: \"Quebec\", fr: \"Qubec\" },\r\n    Key: \"QC\",\r\n    order: 10,\r\n    ID: 3,\r\n  },\r\n  MB: {\r\n    value: { en: \"Manitoba\", fr: \"Manitoba\" },\r\n    Key: \"MB\",\r\n    order: 3,\r\n    ID: 4,\r\n  },\r\n  NS: {\r\n    value: { en: \"Nova Scotia\", fr: \"Nouvelle-cosse\" },\r\n    Key: \"NS\",\r\n    order: 6,\r\n    ID: 5,\r\n  },\r\n  NB: {\r\n    value: { en: \"New Brunswick\", fr: \"Nouveau-Brunswick\" },\r\n    Key: \"NB\",\r\n    order: 4,\r\n    ID: 6,\r\n  },\r\n  NF: {\r\n    value: { en: \"Newfoundland and Labrador\", fr: \"Terre-Neuve-et-Labrador\" },\r\n    Key: \"NF\",\r\n    order: 3,\r\n    ID: 7,\r\n  },\r\n  SK: {\r\n    value: { en: \"Saskatchewan\", fr: \"Saskatchewan\" },\r\n    Key: \"SK\",\r\n    order: 11,\r\n    ID: 8,\r\n  },\r\n  PE: {\r\n    value: { en: \"Prince Edward Island\", fr: \"le-du-Prince-douard\" },\r\n    Key: \"PE\",\r\n    order: 9,\r\n    ID: 9,\r\n  },\r\n  YU: {\r\n    value: { en: \"Yukon\", fr: \"Yukon\" },\r\n    Key: \"YU\",\r\n    order: 12,\r\n    ID: 12,\r\n  },\r\n  NU: {\r\n    value: { en: \"Nunavut\", fr: \"Nunavut\" },\r\n    Key: \"NU\",\r\n    order: 7,\r\n    ID: 11,\r\n  },\r\n  NT: {\r\n    value: { en: \"Northwest Territories\", fr: \"Territoires du Nord-Ouest\" },\r\n    Key: \"NT\",\r\n    order: 5,\r\n    ID: 10,\r\n  },\r\n};\r\n\r\nexport const MEMBER = {\r\n  CLIENT: {\r\n    value: { en: \"Client\", fr: \"Client\" },\r\n    Key: \"CLIENT\",\r\n    order: 1,\r\n    ID: 0,\r\n  },\r\n  SPOUSE: {\r\n    value: { en: \"Spouse\", fr: \"Conjoint\" },\r\n    Key: \"SPOUSE\",\r\n    order: 2,\r\n    ID: 1,\r\n  },\r\n  CHILD: {\r\n    value: { en: \"Child\", fr: \"Enfant\" },\r\n    Key: \"CHILD\",\r\n    order: 3,\r\n    ID: 2,\r\n  },\r\n  DEPENDENT_ADULT: {\r\n    value: { en: \"Dependent Adult\", fr: \"Adulte  charge\" },\r\n    Key: \"DEPENDENT_ADULT\",\r\n    order: 4,\r\n    ID: 3,\r\n  },\r\n};\r\n\r\nexport const SEX = {\r\n  MALE: {\r\n    value: { en: \"Male\", fr: \"Homme\" },\r\n    Key: \"MALE\",\r\n    order: 1,\r\n    ID: 0,\r\n  },\r\n  FEMALE: {\r\n    value: { en: \"Female\", fr: \"Femme\" },\r\n    Key: \"FEMALE\",\r\n    order: 2,\r\n    ID: 1,\r\n  },\r\n};\r\n\r\nexport const GROWTHDIR = {\r\n  GROWS: {\r\n    value: { en: \"Grows\", fr: \"Augmente\" },\r\n    Key: \"GROWS\",\r\n    order: 1,\r\n    ID: 0,\r\n  },\r\n  REDUCES: {\r\n    value: { en: \"Reduces\", fr: \"Diminue\" },\r\n    Key: \"REDUCES\",\r\n    order: 2,\r\n    ID: 1,\r\n  },\r\n  /* en: {\r\n    Values: [\"Grows\", \"Reduces\"],\r\n  },\r\n  fr: {\r\n    Values: [\"Augmente\", \"Diminue\"],\r\n  }, */\r\n};\r\n\r\nexport const SMOKING = {\r\n  NON_SMOKER: {\r\n    value: { en: \"Non-Smoker\", fr: \"Non-fumeur\" },\r\n    Key: \"NON_SMOKER\",\r\n    order: 1,\r\n    ID: 0,\r\n  },\r\n  SMOKER: {\r\n    value: { en: \"Smoker\", fr: \"Fumeur\" },\r\n    Key: \"SMOKER\",\r\n    order: 2,\r\n    ID: 1,\r\n  },\r\n};\r\n\r\nexport const MONTHS = {\r\n  en: [\r\n    \"January\",\r\n    \"February\",\r\n    \"March\",\r\n    \"April\",\r\n    \"May\",\r\n    \"June\",\r\n    \"July\",\r\n    \"August\",\r\n    \"September\",\r\n    \"October\",\r\n    \"November\",\r\n    \"December\",\r\n  ],\r\n  fr: [\r\n    \"janvier\",\r\n    \"fvrier\",\r\n    \"mars\",\r\n    \"avril\",\r\n    \"mai\",\r\n    \"juin\",\r\n    \"juillet\",\r\n    \"aot\",\r\n    \"septembre\",\r\n    \"octobre\",\r\n    \"novembre\",\r\n    \"dcembre\",\r\n  ],\r\n};\r\n","export const ASSET_TAX_TYPE_PRINCIPAL_RES = 0;\r\nexport const ASSET_TAX_TYPE_REAL_ESTATE = 1;\r\nexport const ASSET_TAX_TYPE_STOCKS = 2;\r\nexport const ASSET_TAX_TYPE_SMALL_BUS = 3;\r\nexport const ASSET_TAX_TYPE_RRSP = 4;\r\nexport const ASSET_TAX_TYPE_INTEREST = 5;\r\nexport const ASSET_TAX_TYPE_OTHER = 6;\r\n\r\n\r\nexport const ASSET_TAX_TYPE_COUNT = 7;\r\n\r\n\r\nexport const OUTPUTTEXTEP = {\r\n  en: {\r\n    pg1T: \"Protecting Your Estate\",\r\n    pg1P1: \"Designed for: \",\r\n    pg1P2: \"Designed by: \",\r\n    pg1P3: \"Date: \",\r\n    pg1P4: \"Province: \",\r\n\r\n    pg2T: \"Introduction\",\r\n    pg2Paragraphs: [\r\n      \"Throughout your lifetime, your success has allowed you to accumulate assets beyond those that you will need to provide for an enjoyable retirement. The ownership of some of these assets will result in a tax liability upon your death (or the death of your spouse). These assets can be divided into three groups: \",\r\n      \"First, assets of a capital nature. The current Canadian tax law provides for the deemed disposition of your capital assets on your death at fair market value, and any increase in value over the cost (the tax term is Adjusted Cost Base) is taxed as a capital gain. The most common assets in this category are:\",\r\n      \"Shares in private or public companies\",\r\n      \"Second home or vacation properties\",\r\n      \"Second, assets that generally produce income on your death. The most common assets in this category are:\",\r\n      \"Registered assets, RRSPs or RRIFs\",\r\n      \"Assets that are taxed as income such as interest bearing assets, GICs or money market funds\",\r\n      \"Third, are assets that are either fully tax paid or do not attract tax on death. The most common of these are:\",\r\n      \"Non-taxable assets such as cash and TFSAs\",\r\n      \"Principal residence\",\r\n      \"The tax free proceeds from a life insurance policy\",\r\n    ],\r\n\r\n    pg3T: \"Your Financial Situation\",\r\n    pg3P1:\r\n      \"Your current balance sheet and estimated net worth are summarized below. In order to calculate your future tax liability it is necessary to project the growth in the value of your assets going forward. (See Appendix for details.)\",\r\n    pg3TabT: \"Assets\",\r\n    pg3TabRTot: \"Total Assets Available\",\r\n    pg3Tab2T: \"Liabilities\",\r\n    pg3Tab2RTot: \"Total\",\r\n    pg3Tab2NW: \"Net Worth\",\r\n\r\n    pg3T2: \"Your Growing Tax Liability\",\r\n    pg3P2:\r\n      \"As the value of your assets grow so does the tax liability that your estate will incur upon death. To project this liability, we have assumed the following asset growth rates:\",\r\n    pg3P3: \"\",\r\n    pg3Tab3R1C1: \"Assets\",\r\n    pg3Tab3R1C2: \"Growth Rate\",\r\n    pg3Tab3R1C3: \"Tax Liability Today\",\r\n    pg3Tab3R1C4: \"Tax Liability Life Exp. + 3*\",\r\n\r\n    pg3Tab3R2C1: \"Real Estate (Non-Principal)\",\r\n    pg3Tab3R2C2: \"\",\r\n    pg3Tab3R2C3: \"\",\r\n    pg3Tab3R2C4: \"\",\r\n\r\n    pg3Tab3R3C1: \"Stocks & Bonds\",\r\n    pg3Tab3R3C2: \"\",\r\n    pg3Tab3R3C3: \"\",\r\n    pg3Tab3R3C4: \"\",\r\n\r\n    pg3Tab3R4C1: \"Small Business Shares\",\r\n    pg3Tab3R4C2: \"\",\r\n    pg3Tab3R4C3: \"\",\r\n    pg3Tab3R4C4: \"\",\r\n\r\n    pg3Tab3R5C1: \"RRSP/RRIF\",\r\n    pg3Tab3R5C2: \"\",\r\n    pg3Tab3R5C3: \"\",\r\n    pg3Tab3R5C4: \"\",\r\n\r\n    pg3Tab3R6C1: \"Interest Bearing\",\r\n    pg3Tab3R6C2: \"\",\r\n    pg3Tab3R6C3: \"\",\r\n    pg3Tab3R6C4: \"\",\r\n\r\n    pg3Tab3R7C1: \"Other\",\r\n    pg3Tab3R7C2: \"\",\r\n    pg3Tab3R7C3: \"\",\r\n    pg3Tab3R7C4: \"\",\r\n\r\n    pg3Tab3R8C1: \"Total\",\r\n    pg3Tab3R8C2: \"\",\r\n    pg3Tab3R8C3: \"\",\r\n    pg3Tab3R8C4: \"\",\r\n    pg3P4:\" * Tax liability is estimated based on today's  personal income tax rate and current income tax legislation\",\r\n    pg3P5:\" ** Please see assumptions in Appendix for withdrawals of amounts from RRIF as they factor into this calculation\",\r\n    pg4T: \"Future Value of Your Estate\",\r\n    pg4P1:\r\n      \"Using the growth rate and income tax assumptions, this chart shows the total value of your estate in the future and the corresponding tax liability on death that would need to be funded for each year going forward.\",\r\n    pg4GT:\"Estate Value & Tax Liability\",\r\n    pg4P2: \" * Life Expectancy is slightly shaded in the bar graph (year: \",\r\n    pg4P3:\r\n      \"Your future tax liability grows from $X1 today to $X2 at life expectancy plus 3 years, and will need to be funded upon death.\",\r\n\r\n    pg5T: \"Estate Protection Alternatives\",\r\n    pg5Paragraphs: [\r\n      \"Many people want to keep their estate intact to pass on to their heirs.  But what is the best method to fund this tax liability upon your death so that your assets can be passed to your heirs unencumbered?\",\r\n      \"Typically, there are four options to provide the liquidity to pay taxes that come due upon death:\",\r\n      \"Liquidate assets \",\r\n      \"Borrow funds, which usually means using assets as security\",\r\n      \"Create a cash reserve by systematically saving during your lifetime\",\r\n      \"Transfer the risk by purchasing life insurance in advance\",\r\n      \"Some of the advantages and disadvantages to each of these methods are:\",\r\n      \"Liquidate assets -  Business cycles and the state of the markets are critical in the value of an asset. You have no way of knowing what this will be at your death. Further, the sale of assets by an estate often signals to a purchaser that there is a degree of urgency, which does not help the seller realize full value.\",\r\n      \"Borrow Funds -  In estate situations, the main objective is usually to distribute the assets to the beneficiaries.  Borrowing against the assets, which will likely require pledging them as security, makes this more difficult. Further, it is not possible to predict the market conditions at the time of death. Financial institutions go through cycles, as do loan rates. \",\r\n      \"Create a cash reserve - In the context of an estate situation a cash reserve is not a practical option as you do not know when death will occur and whether there will be ample cash flow at that time.\",\r\n      \"Transfer the risk by purchasing life insurance -  Life insurance, purchased in advance, removes many of the risks associated with funding the tax liability upon death. The death benefit provides liquidity at exactly the time it is needed, and in Canada it is paid tax-free to the named beneficiary.\",\r\n    ],\r\n    pg5Plast:\r\n      \"The most practical, and cost effective, method to transfer the risk of funding a tax liability is to purchase life insurance.\",\r\n\r\n    pg6T: \"Using Life Insurance to Preserve Your Estate\",\r\n    pg6Paragraphs1: [\r\n      \"A permanent life insurance policy can be a good way to provide for this future tax liability. Life insurance removes many of the financial risks associated with a premature death. It provides the financial assistance when it is needed, upon the death of the life insured. \",\r\n      \"The type of life insurance that is most appropriate for this need is permanent insurance, because coverage stays in place until death, no matter the age. There are three types of permanent cash value life insurance coverage:\",\r\n      \"Universal Life\",\r\n      \"Whole Life\",\r\n      \"Hybrid Life\",\r\n      \"Cash values are made up of accumulated capital within the policy's tax deferred accumulation fund including any guaranteed cash surrender values that are offered to the policyowner by the insurance company upon cancellation of the contract. Depending on the type of policy the total cash value, including the guaranteed portion, may be accessed by the policyowner through a number of different methods.\",\r\n      \"One of the challenges facing the purchase of insurance is that the tax liability changes over time. Insurance policies can be custom designed to meet your unique situation by matching the death benefit as closely as possible to the need for cash to pay tax liabilities at the time of death. \",\r\n    ],\r\n    pg6Paragraphs2: [\r\n      \"This is a hybrid product that is customized to address your growing estate liability insurance needs. A hybrid life insurance policy offers a unique combination of the best elements of traditional whole life and universal life insurance:\",\r\n      \"Cost of insurance is guaranteed not to increase\",\r\n      \"Death benefit is a combination of the base insurance amount, additional paid up coverage and the value of investments\",\r\n      \"Policy has contractually guaranteed cash values\",\r\n      \"Additional funds, above the cost of insurance, may be deposited\",\r\n      \"The funds are invested at the discretion of the policy owner (not the insurance company) and include these options: fixed income, stock market index accounts, mutual fund mirrored accounts and smoothed return investment account\",\r\n    ],\r\n\r\n    pg7T: \"Summary\",\r\n    pg7P1:\r\n      \"The best method of covering a future tax liability upon death is to purchase life insurance, which effectively transfers the risk away from the estate. Not only does it give you peace of mind, it also outperforms other alternative methods in terms of financial cost.\",\r\n    pg8T: \"Appendix\",\r\n    pg8P1:\r\n      \"Detailed tax liability projections for all asset categories\",\r\n    pg8P2: \"Detailed tax liability projections by individual asset category:\",\r\n    pg8O1: \"Hide\",\r\n    pg8O2: \"Show\",\r\n\r\n    pgFooter: \"See Some Important Notes at the end of this presentation.\",\r\n\r\n    pg9T: \"Some Important Notes\",\r\n    pg9P1:\r\n      \"This presentation is for general information purposes. The information contained in this presentation must not be taken or relied upon by the reader as legal, accounting, taxation or actuarial advice. For these matters readers should seek independent professional advice. Please refer to insurance company illustrations, policy contracts and information folders regarding any insurance matters referred to in this presentation.\",\r\n    pg9P2:\r\n      \"Any tax calculations are provided as examples only and are based on the personal income tax rates and income tax legislation in effect on the date of the presentation. It is assumed that the taxpayer is a Canadian resident and not a US citizen.\",\r\n\r\n      graphsT1:\"Estate Liability breakdown Today and at Life Expectancy plus 3 years:\",\r\n      graphsT2:\"Estate Liability Today\",\r\n      graphsT3:\"Estate Liability at Life Expectancy +3\",\r\n      graphsL1:\"Liabilities\",\r\n      graphsL2:\"Taxes: RRSP/RRIF\",\r\n      graphsL3:\"Taxes: Capital Gains\",\r\n      graphsL4:\"Taxes: As Income\",\r\n      graphsL5:\"Taxes: Dividend\",\r\n      graphs2L1:\"Future Insurance Needs\",\r\n      graphs2L2:\"Life Expectancy\",\r\n      graphsTaxes:\"Taxes: \",\r\n      graphsLeakageT1: \"Estate Leakage Today and at Life Expectancy plus 3 years:\",\r\n      graphsLeakageT2: \"Estate Leakage Today\",\r\n      graphsLeakageT3: \"Estate Leakage at Life Expectancy +3\",\r\n      graphsLeakage1: \"Net Estate Value\",\r\n      graphsLeakage2: \"Tax Liability\",\r\n      graphsLeakage3: \"Other Liabilities\",\r\n      \r\n  },\r\n  fr:  {\r\n        pg1T: \"Protection de votre patrimoine\",\r\n    pg1P1: \"Prpar pour : \",\r\n    pg1P2: \"Prpar par : \",\r\n    pg1P3: \"Date : \",\r\n    pg1P4: \"Province : \",\r\n\r\n    pg2T: \"Introduction\",\r\n    pg2Paragraphs: [\r\n      \"Tout au long de votre vie, votre russite vous a permis d'accumuler plus d'actifs que ce dont vous aurez besoin pour vous assurer une retraite agrable. La proprit de certains de ces actifs entranera une obligation fiscale  votre dcs (ou au dcs de votre conjoint). Ces actifs se divisent en trois catgories : \",\r\n      \"Premirement, les immobilisations. La Loi de l'impt sur le revenu du Canada prvoit actuellement une disposition prsume de vos biens en immobilisation  la juste valeur marchande  votre dcs, et toute augmentation de la valeur par rapport au cot d'acquisition (le terme fiscal est  prix de base rajust ) sera impose comme un gain en capital. Les actifs les plus courants dans cette catgorie sont les suivants :\",\r\n      \"Actions de socits publiques ou fermes\",\r\n      \"Rsidences secondaires ou de vacances\",\r\n      \"Deuximement, les actifs qui produisent gnralement des revenus  votre dcs. Les actifs les plus courants dans cette catgorie sont les suivants :\",\r\n      \"Actifs enregistrs, REER ou FERR\",\r\n      \"Actifs imposs en tant que revenus, tels que les actifs porteurs d'intrts, les CPG ou les fonds du march montaire\",\r\n      \"Troisimement, les actifs totalement librs d'impt ou qui ne sont pas imposables au dcs. Les actifs les plus courants dans cette catgorie sont les suivants :\",\r\n      \"Actifs non imposables, tels que les liquidits et les CELI\",\r\n      \"Rsidence principale\",\r\n      \"Capital dcs libre d'impt au titre d'une police d'assurance vie\",\r\n    ],\r\n\r\n    pg3T: \"Votre situation financire\",\r\n    pg3P1:\r\n      \"Votre bilan actuel et la valeur nette approximative de vos actifs sont rsums ci-dessous. Afin de calculer l'impt que vous aurez  payer, il est ncessaire de prvoir la croissance future de vos actifs. (Voir les projections dtailles en annexe.)\",\r\n    pg3TabT: \"Actifs\",\r\n    pg3TabRTot: \"Total des actifs disponibles\",\r\n    pg3Tab2T: \"Passifs\",\r\n    pg3Tab2RTot: \"Total\",\r\n    pg3Tab2NW: \"Valeur nette\",\r\n\r\n    pg3T2: \"Augmentation de votre obligation fiscale\",\r\n    pg3P2:\r\n      \"L'obligation fiscale  laquelle sera assujetti votre patrimoine  votre dcs augmente proportionnellement  la valeur de vos biens. Pour prvoir cette obligation, nous avons utilis les hypothses de taux de croissance suivantes :\",\r\n    pg3P3: \"\",\r\n    pg3Tab3R1C1: \"Actifs\",\r\n    pg3Tab3R1C2: \"Taux de croissance\",\r\n    pg3Tab3R1C3: \"Obligation fiscale actuelle\",\r\n    pg3Tab3R1C4: \"Obligation fiscale  l'esprance de vie, plus 3 ans*\",\r\n\r\n    pg3Tab3R2C1: \"Biens immobiliers (non principaux)\",\r\n    pg3Tab3R2C2: \"\",\r\n    pg3Tab3R2C3: \"\",\r\n    pg3Tab3R2C4: \"\",\r\n\r\n    pg3Tab3R3C1: \"Actions et obligations\",\r\n    pg3Tab3R3C2: \"\",\r\n    pg3Tab3R3C3: \"\",\r\n    pg3Tab3R3C4: \"\",\r\n\r\n    pg3Tab3R4C1: \"Actions de petites entreprises\",\r\n    pg3Tab3R4C2: \"\",\r\n    pg3Tab3R4C3: \"\",\r\n    pg3Tab3R4C4: \"\",\r\n\r\n    pg3Tab3R5C1: \"REER/FERR**\",\r\n    pg3Tab3R5C2: \"\",\r\n    pg3Tab3R5C3: \"\",\r\n    pg3Tab3R5C4: \"\",\r\n\r\n    pg3Tab3R6C1: \"Actifs porteurs d'intrts\",\r\n    pg3Tab3R6C2: \"\",\r\n    pg3Tab3R6C3: \"\",\r\n    pg3Tab3R6C4: \"\",\r\n\r\n    pg3Tab3R7C1: \"Autres\",\r\n    pg3Tab3R7C2: \"\",\r\n    pg3Tab3R7C3: \"\",\r\n    pg3Tab3R7C4: \"\",\r\n\r\n    \r\n    pg3Tab3R8C1: \"Total\",\r\n    pg3Tab3R8C2: \"\",\r\n    pg3Tab3R8C3: \"\",\r\n    pg3Tab3R8C4: \"\",\r\n\r\n    pg3P4:\r\n      \" * L'obligation fiscale est projete en utilisant votre taux d'imposition personnel actuel et la loi de l'impt sur le revenu courante\",\r\n    pg3P5:\r\n      \" ** Veuillez consulter en annexe les hypothses relatives aux retraits de montants du FERR, puisqu'ils sont pris en compte dans ce calcul\",\r\n\r\n    pg4T: \"Valeur future de votre patrimoine\",\r\n    pg4P1:\r\n          \"Selon les taux de croissance et d'imposition prsums, le tableau ci-dessous prsente la valeur totale future de votre patrimoine et l'obligation fiscale au dcs qu'il faudrait financer pour chaque anne  venir.\",\r\n    pg4GT:\"Valeur du patrimoine et obligation fiscale\",\r\n    pg4P2: \" * L'esprance de vie est lgrement ombrage dans le graphique  barres (anne: \",\r\n    pg4P3:\r\n      \"Votre obligation fiscale future passe de X1 $ aujourd'hui  X2 $  l'esprance de vie plus 3 ans, et devra tre finance au dcs.\",\r\n\r\n    pg5T: \"Options de protection du patrimoine\",\r\n    pg5Paragraphs: [\r\n      \"Beaucoup de gens veulent garder leur patrimoine intact pour le transmettre  leurs hritiers.  Mais quel est le meilleur moyen de financer l'obligation fiscale qui en dcoule  au dcs afin que leurs actifs puissent tre transmis sans encombre  leurs hritiers?\",\r\n      \"En rgle gnrale, il y a quatre moyens d'obtenir les liquidits ncessaires pour payer les impts exigibles au dcs :\",\r\n      \"Liquider les actifs\",\r\n      \"Emprunter de l'argent, ce qui signifie gnralement utiliser des actifs en garantie\",\r\n      \"Crer une rserve de liquidits en pargnant de faon systmatique tout au long de sa vie\",\r\n      \"Transfrer le risque en souscrivant une assurance vie  l'avance\",\r\n      \"Voici certains des avantages et inconvnients de chacune de ces options :\",\r\n      \"Liquider les actifs - Les cycles conomiques et l'tat des marchs sont dterminants pour la valeur d'un actif. Vous n'avez aucun moyen de savoir ce qu'elle sera  votre dcs. En outre, la vente d'actifs par les ayants droit indique souvent  un acheteur qu'il y a une certaine urgence, ce qui n'aide pas le vendeur  en obtenir la pleine valeur.\",\r\n      \"Emprunter de l'argent -  En planification successorale, l'objectif principal est gnralement de distribuer les actifs aux bnficiaires. Emprunter de l'argent en cdant des actifs en garantie rend la tche plus difficile. En outre, il n'est pas possible de prvoir les conditions du march au moment du dcs. Les institutions financires connaissent des cycles, tout comme les taux d'intrt sur les prts. \",\r\n\"Crer une rserve de liquidits - en planification successorale, une rserve de liquidits n'est pas une option pratique, puisque vous ne savez pas quand le dcs surviendra et si,  ce moment-l, il y aura assez de liquidits.\",\r\n      \"Transfrer le risque en souscrivant une assurance vie -  la souscription  l'avance d'une assurance vie permet d'liminer une grande partie des risques associs au financement de l'obligation fiscale au dcs. Le capital dcs procure des liquidits au moment mme o on en a besoin. Au Canada, il est vers au bnficiaire en franchise d'impt.\",\r\n    ],\r\n    pg5Plast:\r\n      \"La souscription d'une assurance vie est la mthode la plus pratique et la plus rentable pour transfrer le risque associ au financement de l'obligation fiscale.\",\r\n\r\n    pg6T: \"Utiliser l'assurance vie pour protger votre patrimoine\",\r\n    pg6Paragraphs1: [\r\n      \"Une police d'assurance vie permanente peut tre un bon moyen de scuriser cette future obligation fiscale. L'assurance vie limine une grande partie des risques financiers associs  un dcs prmatur. Elle fournit l'aide financire ncessaire moment du dcs de l'assur. \",\r\n      \" cette fin, l'assurance permanente est le type d'assurance vie le plus appropri, car la protection reste en vigueur jusqu'au dcs, peu importe l'ge. Il y a trois formules d'assurance vie permanente avec valeur de rachat :\",\r\n      \"Vie universelle\",\r\n      \"Vie entire\",\r\n      \"Vie hybride\",\r\n      \"Les valeurs de rachat comprennent le capital accumul dans le fonds d'accumulation  impt diffr de la police, y compris toute valeur de rachat garantie offerte au titulaire de police par la compagnie d'assurance  la rsiliation du contrat. Selon le type de police, le titulaire peut avoir accs  la valeur de rachat totale, y compris la partie garantie, grce  un certain nombre de mthodes diffrentes.\",\r\n      \"L'une des difficults que pose l'achat d'une assurance est que l'obligation fiscale change au fil du temps. Les polices d'assurance peuvent tre conues sur mesure pour rpondre  votre situation particulire. Pour ce faire, on s'assure que le capital dcs correspond le plus possible aux liquidits ncessaires pour payer l'obligation fiscale au moment du dcs. \",\r\n    ],\r\n    pg6Paragraphs2: [\r\n      \"Il s'agit d'un produit hybride conu sur mesure pour rpondre  vos besoins d'assurance visant  prvoir les obligations croissantes lies  votre patrimoine. Une police d'assurance vie hybride combine de faon unique les meilleurs lments de l'assurance vie entire traditionnelle et de l'assurance vie universelle :\",\r\n      \"Le cot de l'assurance n'augmentera pas\",\r\n      \"Le capital dcs est constitu du montant d'assurance de base, d'une assurance supplmentaire libre et de la valeur des placements\",\r\n      \"La police comprend des valeurs de rachat garanties par le contrat\",\r\n      \"Des fonds supplmentaires, en sus du cot de l'assurance, peuvent tre dposs\",\r\n      \"Les fonds sont investis  la discrtion du titulaire de la police (et non de la compagnie d'assurance) et comprennent les options suivantes : revenu fixe, comptes indiciels d'actions, fonds distincts qui calquent des fonds communs et compte de placement  rendement stabilit\",\r\n    ],\r\n\r\n    pg7T: \"Rsum\",\r\n    pg7P1:\r\n      \"La souscription d'une assurance vie constitue le meilleur moyen de prvoir l'obligation fiscale au dcs. Elle dgage efficacement les ayants droit du risque financier. Non seulement elle vous apporte la tranquillit d'esprit, mais elle surpasse galement les autres mthodes alternatives en terme de cot financier..\",\r\n    pg8T: \"Annexe\",\r\n    pg8P1:\r\n      \"Projections dtailles de l'obligation fiscale pour toutes les catgories d'actifs combines\",\r\n    pg8P2: \"Projections dtailles de l'obligation fiscale par catgorie d'actifs :\",\r\n    pg8O1: \"Cacher\",\r\n    pg8O2: \"Montrer\",\r\n\r\n\r\n    pgFooter: \"Voir les notes importantes  la fin du document.\",\r\n\r\n    pg9T: \"Notes importantes\",\r\n    pg9P1:\r\n      \"Le prsent expos ne comporte que des renseignements gnraux. L'information qui s'y trouve ne doit pas tre considre par le lecteur comme des conseils juridiques, comptables, fiscaux ou actuariels. Pour ces questions, le lecteur devrait consulter un professionnel indpendant. Veuillez vous reporter aux exposs de vente, au libell des contrats et  la documentation des compagnies d'assurance pour obtenir des prcisions sur les questions d'assurance mentionnes dans le prsent document.\",\r\n    pg9P2:\r\n      \"Tous les calculs fiscaux sont fournis  titre d'exemple seulement et sont bass sur les taux d'impt et la Loi de l'impt sur le revenu en vigueur en date de la prsentation. Nous prsumons qu'il s'agit d'un rsident canadien et non pas d'un citoyen amricain.\",\r\n      graphsT1:\"Obligation fiscale aujourd'hui et  l'esprance de vie, plus 3 ans\",\r\n      graphsT2:\"Obligation fiscale aujourd'hui\",\r\n      graphsT3:\"Obligation fiscale  l'esprance de vie, plus 3 ans\",\r\n      graphsL1:\"Passifs\",\r\n      graphsL2:\"Impt: REER/FERR\",\r\n      graphsL3:\"Impt: Gain en capital\",\r\n      graphsL4:\"Impt: sur le revenu\",\r\n      graphsL5:\"Impt: sur dividende\",\r\n      graphs2L1:\"Besoins d'assurance futurs \",\r\n      graphs2L2:\" l'esprance de vie\",\r\n      graphsTaxes:\"Impt: \",\r\n      graphsLeakageT1: \"Rduction du patrimoine aujourd'hui et  l'esprance de vie, plus 3 ans\",\r\n      graphsLeakageT2: \"Rduction du patrimoine aujourd'hui\",\r\n      graphsLeakageT3: \"Rduction du patrimoine  l'esprance de vie, plus 3 ans\",\r\n      graphsLeakage1: \"Valeur successorale nette\",\r\n      graphsLeakage2: \"Obligation fiscale\",\r\n      graphsLeakage3: \"Autres lments de passif\",\r\n  },\r\n\r\n};\r\n","import { name, version } from \"../../package.json\";\r\nimport { SEX, SMOKING } from \"../definitions/generalDefinitions\";\r\nimport { QUOTE_CLIENT, QUOTE_SPOUSE, QUOTE_JOINT } from \"../definitions/generalDefinitions\";\r\n\r\nexport function readMCCData(dataInput, planID, client, insNeed) {\r\n   let dataLives = setLives(\r\n    client,\r\n    dataInput\r\n  );\r\n  let dataMCC = {\r\n    insured: {\r\n      lives: dataLives,\r\n      lifeStatus: client===QUOTE_JOINT?1:0\r\n    },\r\n    policy: {\r\n      planName: \"EquiBuild\",\r\n      carrierName: \"Industrial Alliance\",\r\n      planID: planID,\r\n      carrierID:5,\r\n      faceAmount: insNeed,\r\n      intRate: 0.0375,\r\n      province: dataInput.Presentations[0].Province,\r\n      objPremium: {\r\n        DepositMode: 1, //annual\r\n        PremCustom: false,\r\n        PremSet: false,\r\n        PremSolve: true,\r\n        PremSetDur: 50,\r\n        PremSolveDur: 99,\r\n        PremOffsetOn: false,\r\n        PremOffsetYear: 0\r\n      },\r\n      objCustomDB: {\r\n        solveForPremium_On: false,\r\n        solveForPUA_On: false,\r\n        solveRider_On: false,\r\n        customDB: []\r\n      },\r\n      objRider: {\r\n      T10: false,\r\n      T20: false,\r\n      ICO10: false,\r\n      ICO20: false,\r\n      T25: false,\r\n      T30: false,\r\n      T25Amt: 0.0,\r\n      T30Amt: 0.0,\r\n      T10Dur: 10,\r\n      T20Dur: 20,\r\n      T10Amt: 0.0,\r\n      T20Amt: 0.0\r\n    }\r\n    },\r\n    objPUA: {\r\n      MaxPUA: false,\r\n      MaxPUAAmt: 90000000.0,\r\n      BonusPUA: true,\r\n      FundPUA: false,\r\n      FundPUAAmt: 0.0,\r\n      FundPUADur: 10.0\r\n    },\r\n    outputOptions: {\r\n      extCoverage: false,\r\n      IRR_ERR: false,\r\n      outputColumnIDs: [0, 1, 2, 105, 14, 25]\r\n    },\r\n    generalInfo: {\r\n      designedFor: \"\",\r\n      designedBy: \"\",\r\n      language: dataInput.lang === \"en\" ? 0 : 1,\r\n      formatNumericOutput: true\r\n    }\r\n  };\r\n  return dataMCC;\r\n}\r\n\r\nfunction setLives(clientID, dataInput) {\r\n  let dataE = [];\r\n  let i;\r\n  // for calc purposes\r\n  if (clientID === QUOTE_SPOUSE)\r\n    dataE.push({\r\n      age: dataInput.Clients[1].Age,\r\n      sex: dataInput.Clients[1].sexKey === SEX.FEMALE.Key ? 1 : 0,\r\n      smk:\r\n        dataInput.Clients[1].smokerKey === SMOKING.SMOKER.Key ? \"S_STD\" : \"NS_STD\", //Smoker === SMOKING[lang].Values[1]\r\n          //? \"S_STD\"\r\n          //: \"NS_STD\",\r\n      rating: 100 //dataInput.Clients[1].Rating\r\n    });\r\n  else if (clientID === QUOTE_CLIENT)\r\n    dataE.push({\r\n      age: dataInput.Clients[0].Age,\r\n      sex: dataInput.Clients[0].sexKey === SEX.FEMALE.Key ? 1 : 0,\r\n      smk:\r\n        dataInput.Clients[0].smokerKey === SMOKING.SMOKER.Key ? \"S_STD\" : \"NS_STD\", //Smoker === SMOKING[lang].Values[1]\r\n          //? \"S_STD\"\r\n          //: \"NS_STD\",\r\n      rating: 100 //dataInput.Clients[0].Rating\r\n    });\r\n  else {\r\n    for (i = 0; i < dataInput.Clients.length; i++) {\r\n      dataE.push({\r\n        age: dataInput.Clients[i].Age,\r\n        sex: dataInput.Clients[i].sexKey === SEX.FEMALE.Key ? 1 : 0,\r\n        smk:\r\n          dataInput.Clients[i].smokerKey === SMOKING.SMOKER.Key ? \"S_STD\" : \"NS_STD\", //Smoker === SMOKING[lang].Values[1]\r\n            //? \"S_STD\"\r\n            //: \"NS_STD\",\r\n        rating: 100\r\n      });\r\n    }\r\n  }\r\n  return dataE;\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Info } from \"./Info\";\r\n\r\nexport class Collapsible extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      open: this.props.openCollapsible.open,\r\n      id: this.props.openCollapsible.id,\r\n    };\r\n    // console.log(this.state)\r\n  }\r\n  componentWillReceiveProps(nextProps) {\r\n    if (this.state.open !== nextProps.openCollapsible.open)\r\n      this.setState({\r\n        open: nextProps.openCollapsible.open,\r\n        id: nextProps.openCollapsible.id,\r\n      });\r\n  }\r\n\r\n  togglePanel = async (e) => {\r\n    if(this.props.enabled!==false)\r\n      {\r\n    await this.props.handleCollapsibleClick({\r\n      id: this.state.id,\r\n      open: this.state.open,\r\n    });\r\n    this.setState({ open: !this.state.open });\r\n  }\r\n  };\r\n  render() {\r\n    const arr = this.state.open ? (\r\n      <span style={{ fontSize: \"14px\", float: \"right\" }}>&#9650;</span>\r\n    ) : (\r\n      <span style={{ fontSize: \"14px\", float: \"right\" }}>&#9660;</span>\r\n    );\r\n    return (\r\n      <div >\r\n        <div onClick={this.togglePanel} className=\"header\">\r\n          {this.props.title}\r\n          {this.props.infoIcon !== undefined && <Info infoIcon={this.props.infoIcon} /> }\r\n             {arr}\r\n        </div>\r\n        {this.state.open ? (\r\n          <div className=\"content\">{this.props.children}</div>\r\n        ) : null}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import {\r\n  ASSETS,\r\n  ASSET_TAX,\r\n  ASSET_OWNERSHIP_ACTION,\r\n  COLUMN_TITLES,\r\n} from \"../definitions/generalDefinitions\";\r\nimport { getListItemNameFromKey, arrayFormatMoney } from \"../utils/helper\";\r\n\r\nimport { fetchAssetAllGridColumns } from \"../utils/FetchAPIs\";\r\n\r\nimport {\r\n  ASSET_API_OUTPUT_Year,\r\n  ASSET_API_OUTPUT_Age,\r\n  ASSET_API_OUTPUT_FMV,\r\n  ASSET_API_OUTPUT_EOYBalance,\r\n  ASSET_API_OUTPUT_ACB,\r\n  ASSET_API_OUTPUT_CapitalGain,\r\n  ASSET_API_OUTPUT_TaxPayable,\r\n  ASSET_API_OUTPUT_CapGainsExemption,\r\n  ASSET_API_OUTPUT_Deposits,\r\n  ASSET_API_OUTPUT_Withdrawals,\r\n  ASSET_API_OUTPUT_RRIF,\r\n  ASSET_API_OUTPUT_TaxPayableonIncome,\r\n  ASSET_API_OUTPUT_DispositionAmount,\r\n  ASSET_YEAR_TODAY,\r\n  APPLET_INA,\r\n  APPLET_EP,\r\n} from \"../definitions/generalDefinitions\";\r\nimport { appletMode } from \"../../package.json\";\r\n\r\nexport async function getAssetGridValues(dataNA, assetCurr, lang, aggregate) {\r\n  const title = COLUMN_TITLES[lang];\r\n\r\n  let data = await fetchAssetAllGridColumns(dataNA, assetCurr.id);\r\n  if (data !== undefined && data !== undefined) {\r\n    console.log(\"POST: NA_AssetProj success\");\r\n\r\n    let taxOnDisposition = [];\r\n    let yr;\r\n    for (\r\n      yr = 0;\r\n      yr < data[ASSET_API_OUTPUT_TaxPayable].numericValues.length;\r\n      ++yr\r\n    ) {\r\n      taxOnDisposition[yr] =\r\n        data[ASSET_API_OUTPUT_DispositionAmount].numericValues[yr] > 0\r\n          ? data[ASSET_API_OUTPUT_TaxPayable].numericValues[yr]\r\n          : 0;\r\n    }\r\n    taxOnDisposition = arrayFormatMoney(taxOnDisposition, lang, 0);\r\n\r\n    let arrYear = data[ASSET_API_OUTPUT_Year].numericValues;\r\n    \r\n    // year 0 is today, change it\r\n    arrYear[0] = ASSET_YEAR_TODAY[lang].today;\r\n    const arrAge = data[ASSET_API_OUTPUT_Age].numericValues;\r\n    let arrAdjAge = [];// to be used for all and JLTD\r\n    if(appletMode === \"EP\" && dataNA.lives.length>1) // JLTD\r\n    {\r\n      const age1=dataNA.lives[0].Age // missing age is clients if 2 lives surviver is picked up in API\r\n      const age2=dataNA.lives[1].Age // missing age is clients if 2 lives surviver is picked up in API\r\n      \r\n      for (\r\n          let i = 0;\r\n          i < arrYear.length;\r\n          ++i\r\n        ) {\r\n          arrAdjAge.push(parseInt(age1+i) + \"/\" + parseInt(age2+i));\r\n      }\r\n    }\r\n    else\r\n      arrAdjAge =arrAge\r\n    \r\n    const arrDeposits = arrayFormatMoney(\r\n      data[ASSET_API_OUTPUT_Deposits].numericValues,\r\n      lang,\r\n      0\r\n    );\r\n    const arrFMV = arrayFormatMoney(\r\n      data[ASSET_API_OUTPUT_FMV].numericValues,\r\n      lang,\r\n      0\r\n    );\r\n    \r\n    const arrRRIF = arrayFormatMoney(\r\n      data[ASSET_API_OUTPUT_RRIF].numericValues,\r\n      lang,\r\n      0\r\n    );\r\n    const arrEOYBalance = arrayFormatMoney(\r\n      data[ASSET_API_OUTPUT_EOYBalance].numericValues,\r\n      lang,\r\n      0\r\n    );\r\n    const arrWithdrawals = arrayFormatMoney(\r\n      data[ASSET_API_OUTPUT_Withdrawals].numericValues,\r\n      lang,\r\n      0\r\n    );\r\n    const arrTaxPayableonIncome = arrayFormatMoney(\r\n      data[ASSET_API_OUTPUT_TaxPayableonIncome].numericValues,\r\n      lang,\r\n      0\r\n    );\r\n    const arrTaxPayable = arrayFormatMoney(\r\n      data[ASSET_API_OUTPUT_TaxPayable].numericValues,\r\n      lang,\r\n      0\r\n    );\r\n    const arrDispositionAmount = arrayFormatMoney(\r\n      data[ASSET_API_OUTPUT_DispositionAmount].numericValues,\r\n      lang,\r\n      0\r\n    );\r\n    const arrACB = arrayFormatMoney(\r\n      data[ASSET_API_OUTPUT_ACB].numericValues,\r\n      lang,\r\n      0\r\n    );\r\n\r\n\r\n\r\n    const arrCapitalGain = arrayFormatMoney(\r\n      data[ASSET_API_OUTPUT_CapitalGain].numericValues,\r\n      lang,\r\n      0\r\n    );\r\n    const arrCapGainsExemption = arrayFormatMoney(\r\n      data[ASSET_API_OUTPUT_CapGainsExemption].numericValues,\r\n      lang,\r\n      0\r\n    );\r\n    const gridTitleSection =\r\n      appletMode === \"INA\"\r\n        ? \" (\" +\r\n          getListItemNameFromKey(\r\n            ASSET_OWNERSHIP_ACTION,\r\n            assetCurr.ownerKey,\r\n            lang\r\n          ) +\r\n          \")\"\r\n        : \"\" +\r\n          (assetCurr.description !== \"\"\r\n            ? \" (\" + assetCurr.description + \")\"\r\n            : \"\");\r\n    const gridTitle =\r\n      getListItemNameFromKey(ASSETS, assetCurr.assetTypeKey, lang) +\r\n      gridTitleSection +\r\n      \" Projection\";\r\n\r\n    let dataColTitles = [];\r\n    let dataProjection = [];\r\n\r\n   // console.log(arrCapitalGain)\r\n    // aggregate table\r\n    if (aggregate === true) {\r\n      for (\r\n        let i = 0;\r\n        i < COLUMN_TITLES.EP_SHEET_HEADERS[lang].Full.length;\r\n        ++i\r\n      ) {\r\n        dataColTitles.push(COLUMN_TITLES.EP_SHEET_HEADERS[lang].Full[i]);\r\n      }\r\n\r\n      dataProjection[0] = arrYear;\r\n      dataProjection[1] = arrAdjAge;\r\n      dataProjection[2] = arrFMV;\r\n      dataProjection[3] = arrFMV;\r\n      dataProjection[4] = arrDeposits;\r\n      dataProjection[5] = arrRRIF; //+ arrWithdrawals;\r\n      dataProjection[6] = arrDispositionAmount;\r\n      dataProjection[7] = arrTaxPayableonIncome;\r\n      dataProjection[8] = arrCapitalGain;\r\n      dataProjection[9] = arrCapGainsExemption;\r\n      dataProjection[10] = arrEOYBalance;\r\n      dataProjection[11] = arrFMV;\r\n      dataProjection[12] = arrTaxPayable;\r\n    }\r\n\r\n    // individual tables\r\n    else {\r\n      if (assetCurr.assetTaxTypeKey === ASSET_TAX.REGISTERED.Key) {\r\n        //\t\t'Registered')\r\n        if (APPLET_INA) {\r\n          dataColTitles = [\r\n            title.Year,\r\n            title.Age,\r\n            title.FMV,\r\n            title.AnnualContribution,\r\n            title.MinRRIFIncome,\r\n            title.Withdrawal,\r\n            //title.Taxonincome,\r\n            title.EOYBalance,\r\n          ];\r\n\r\n          // F^\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] = arrFMV;\r\n          dataProjection[3] = arrDeposits;\r\n          dataProjection[4] = arrRRIF;\r\n          dataProjection[5] = arrWithdrawals;\r\n          //dataProjection[6] = arrTaxPayableonIncome;\r\n          dataProjection[6] = arrEOYBalance;\r\n        } else {\r\n          dataColTitles = [\r\n            title.Year,\r\n            title.Age,\r\n            title.FMV,\r\n            title.AnnualContribution,\r\n            title.MinRRIFIncome,\r\n            title.Withdrawal,\r\n            //title.Taxonincome,\r\n            title.EOYBalance,\r\n            //title.TaxLiabilityatDeath,\r\n            title.TaxLiability,\r\n          ];\r\n\r\n          // F^\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] = arrFMV;\r\n          dataProjection[3] = arrDeposits;\r\n          dataProjection[4] = arrRRIF;\r\n          dataProjection[5] = arrWithdrawals;\r\n          //dataProjection[6] = arrTaxPayableonIncome;\r\n          dataProjection[6] = arrEOYBalance;\r\n          dataProjection[7] = arrTaxPayable;\r\n        }\r\n      } else if (assetCurr.assetTypeKey === ASSETS.PERSONAL_RESIDENCE.Key) {\r\n        if (APPLET_INA) {\r\n          dataColTitles = [\r\n            title.Year,\r\n            title.Age,\r\n            title.FMV,\r\n            title.SaleProceeds,\r\n          ];\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] =\r\n            //arrEOYBalance;\r\n            arrFMV;\r\n          dataProjection[3] = arrDispositionAmount;\r\n        } else {\r\n          dataColTitles = [\r\n            title.Year,\r\n            title.Age,\r\n            title.FMV,\r\n            title.SaleProceeds,\r\n            title.TaxLiability,\r\n          ];\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] =\r\n            //arrEOYBalance;\r\n            arrFMV;\r\n          dataProjection[3] = arrDispositionAmount;\r\n          dataProjection[4] = arrTaxPayable;\r\n        }\r\n\r\n      } else if (assetCurr.assetTypeKey === ASSETS.LIFE_INSURANCE.Key) {\r\n        if (APPLET_INA) {\r\n          dataColTitles = [title.Year, title.Age, title.FA];\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] =\r\n            //arrEOYBalance;\r\n            arrFMV;\r\n        } else {\r\n          dataColTitles = [title.Year, title.Age, title.FA];\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] =\r\n            //arrEOYBalance;\r\n            arrFMV;\r\n        }\r\n\r\n      } else if (assetCurr.assetTypeKey === ASSETS.REAL_ESTATE.Key) {\r\n        if (APPLET_INA) {\r\n          dataColTitles = [\r\n            title.Year,\r\n            title.Age,\r\n            title.FMV,\r\n            title.ACB,\r\n            title.RentalIncome,\r\n            title.SaleProceeds,\r\n          ];\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] =\r\n            //arrEOYBalance;\r\n            arrFMV;\r\n          dataProjection[3] = arrACB;\r\n          dataProjection[4] = arrWithdrawals;\r\n          dataProjection[5] = arrDispositionAmount;\r\n          dataProjection[6] = taxOnDisposition;\r\n        } else {\r\n          dataColTitles = [\r\n            title.Year,\r\n            title.Age,\r\n            title.FMV,\r\n            title.ACB,\r\n          //  title.RentalIncome,\r\n          //  title.Taxonincome,\r\n            title.SaleProceeds,\r\n            title.CapitalGain,\r\n            title.TaxLiability,\r\n          ];\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] =\r\n            //arrEOYBalance;\r\n            arrFMV;\r\n          dataProjection[3] = arrACB;\r\n       //   dataProjection[4] = arrWithdrawals;\r\n       //   dataProjection[5] = arrTaxPayableonIncome;\r\n          dataProjection[4] = arrDispositionAmount;\r\n          dataProjection[5] = arrCapitalGain;\r\n          dataProjection[6] = arrTaxPayable;\r\n        }\r\n      } else if (assetCurr.assetTypeKey === ASSETS.SMALL_BUSINESS_SHARES.Key) {\r\n        if (APPLET_INA) {\r\n          dataColTitles = [\r\n            title.Year,\r\n            title.Age,\r\n            title.FMV,\r\n            title.ACB,\r\n            title.SaleProceeds,\r\n            title.TaxLiability,\r\n          ];\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] =\r\n            //arrEOYBalance;\r\n\r\n            arrFMV;\r\n          dataProjection[3] = arrACB;\r\n          dataProjection[4] = arrDispositionAmount;\r\n          dataProjection[5] = taxOnDisposition;\r\n        } else {\r\n          dataColTitles = [\r\n            title.Year,\r\n            title.Age,\r\n            title.FMV,\r\n            title.ACB,\r\n            title.SaleProceeds,\r\n            title.CapitalGainsExemption,\r\n            title.CapitalGain,\r\n            title.TaxLiability,\r\n          ];\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] =\r\n            //arrEOYBalance;\r\n\r\n            arrFMV;\r\n          dataProjection[3] = arrACB;\r\n          dataProjection[4] = arrDispositionAmount;\r\n          dataProjection[5] = arrCapGainsExemption;\r\n          dataProjection[6] = arrCapitalGain;\r\n          dataProjection[7] = arrTaxPayable;\r\n        }\r\n      } else if (\r\n        assetCurr.assetTypeKey === ASSETS.INTEREST_BEARING.Key ||\r\n        assetCurr.assetTypeKey === ASSETS.STOCKS_BONDS.Key ||\r\n        assetCurr.assetTypeKey === ASSETS.TFSA.Key\r\n      ) {\r\n        if (APPLET_INA) {\r\n          dataColTitles = [\r\n            title.Year,\r\n            title.Age,\r\n            title.FMV,\r\n            title.AnnualContribution,\r\n            title.Withdrawal,\r\n            title.EOYBalance,\r\n          ];\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] = arrFMV;\r\n          dataProjection[3] = arrDeposits;\r\n          dataProjection[4] = arrWithdrawals;\r\n          dataProjection[5] = arrEOYBalance;\r\n        } else {\r\n          dataColTitles = [\r\n            title.Year,\r\n            title.Age,\r\n            title.FMV,\r\n            title.AnnualContribution,\r\n            title.Withdrawal,\r\n            title.EOYBalance,\r\n            title.TaxLiability,\r\n          ];\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] = arrFMV;\r\n          dataProjection[3] = arrDeposits;\r\n          dataProjection[4] = arrWithdrawals;\r\n          dataProjection[5] = arrEOYBalance;\r\n          dataProjection[6] = arrTaxPayable;\r\n          if (assetCurr.assetTypeKey === ASSETS.STOCKS_BONDS.Key) {\r\n            dataColTitles = [\r\n              title.Year,\r\n              title.Age,\r\n              title.FMV,\r\n              title.ACB,\r\n              title.AnnualContribution,\r\n              title.Withdrawal,\r\n              title.SaleProceeds,\r\n              title.CapitalGain,\r\n              title.EOYBalance,\r\n              title.TaxLiability,\r\n            ];\r\n            dataProjection[0] = arrYear;\r\n            dataProjection[1] = arrAdjAge;\r\n            dataProjection[2] = arrFMV;\r\n            dataProjection[3] = arrACB;\r\n            dataProjection[4] = arrDeposits;\r\n            dataProjection[5] = arrWithdrawals;\r\n            dataProjection[6] = arrDispositionAmount;\r\n            dataProjection[7] = arrCapitalGain;\r\n            dataProjection[8] = arrEOYBalance;\r\n            dataProjection[9] = arrTaxPayable;\r\n          }\r\n        }\r\n\r\n        //  arrTaxPayable;\r\n      } else {\r\n        if (APPLET_INA) {\r\n          dataColTitles = [title.Year, title.Age, title.FMV, title.EOYBalance];\r\n\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] = arrFMV;\r\n          dataProjection[3] = arrEOYBalance;\r\n        } else {\r\n          dataColTitles = [\r\n            title.Year,\r\n            title.Age,\r\n            title.FMV,\r\n            title.EOYBalance,\r\n            title.Withdrawal,\r\n            title.TaxLiability,\r\n          ];\r\n\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] = arrFMV;\r\n          dataProjection[3] = arrEOYBalance;\r\n          dataProjection[4] = arrWithdrawals;\r\n          dataProjection[5] = arrTaxPayable;\r\n        }\r\n      }\r\n    }\r\n    return { dataColTitles, dataProjection, gridTitle };\r\n  }\r\n}\r\n","// Imports\r\nimport React, { Component } from \"react\";\r\nimport jsPDF from \"jspdf\";\r\n\r\n// Constants\r\nconst PORTRAIT = \"portrait\";\r\nconst PT = \"pt\";\r\nconst LETTER = \"letter\";\r\n\r\nconst PNG = \"png\";\r\n\r\nexport const HELVETICA = \"Helvetica\";\r\nexport const TIMES = \"Times\";\r\n\r\nexport const NORMAL = \"normal\";\r\nexport const BOLD = \"bold\";\r\nexport const ITALIC = \"italic\";\r\n\r\nexport const HEADER_RECT_IN_X: number = 1;\r\nexport const HEADER_RECT_IN_Y: number = 0.48;\r\nexport const HEADER_RECT_IN_W: number = 6.4;\r\nexport const HEADER_RECT_IN_H: number = 0.45;\r\nexport const HEADER_RECT_R: number = 148;\r\nexport const HEADER_RECT_G: number = 148;\r\nexport const HEADER_RECT_B: number = 148;\r\n\r\nexport const HEADER_TEXT_PT_SIZE: number = 10;\r\nexport const HEADER_TEXT_IN_X: number = 1;\r\nexport const HEADER_TEXT_IN_Y: number = 0.75;\r\nexport const HEADER_TEXT_IN_W: number = 6;\r\nexport const HEADER_TEXT_R: number = 0xff;\r\nexport const HEADER_TEXT_G: number = 0xff;\r\nexport const HEADER_TEXT_B: number = 0xff;\r\n\r\nexport const FOOTER_TEXT_PT_SIZE: number = 8;\r\nexport const FOOTER_TEXT_IN_X: number = 1.5;\r\nexport const FOOTER_TEXT_IN_Y: number = 11 - 3 * 0.125;\r\nexport const FOOTER_TEXT_IN_Y_L: number = 8 - 3 * 0.125;\r\n\r\nexport const TEXT_R: number = 0x45;\r\nexport const TEXT_G: number = 0x55;\r\nexport const TEXT_B: number = 0x60;\r\n\r\nexport const MAX_LOGO_HEIGHT = 0.38;\r\n// Functions\r\nexport const InToPt = (in_) => {\r\n  return in_ * 25;\r\n};\r\n\r\nexport const PxToPt = (px) => {\r\n  return (px / 96) * 72;\r\n};\r\n\r\nconst fontName = HELVETICA;\r\nconst fontStyle = NORMAL;\r\nconst fontSize = 16;\r\n\r\nconst textRed = 0x00;\r\nconst textGreen = 0x00;\r\nconst textBlue = 0x00;\r\n\r\nconst fillRed = 0xff;\r\nconst fillGreen = 0xff;\r\nconst fillBlue = 0xff;\r\n\r\nconst showGrids = true;\r\n\r\nconst PAGE_WIDTH = 8.4;\r\nexport const PAGE_HEIGHT = 11;\r\nconst PAGE_USED_AREA_LEFT = 1.2;\r\nconst PAGE_USED_AREA_RIGHT = 7.24;\r\n\r\n// Classes\r\nexport class PDF extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {};\r\n    this.pdf = new jsPDF();\r\n  }\r\n\r\n  AddImage = (imageID, x, y, w, h) => {\r\n    if (this.pdf === null) return;\r\n    const imgData = document.getElementById(imageID);\r\n    const imgProps = this.pdf.getImageProperties(imgData);\r\n    const pdfHeight = (imgProps.height * w) / imgProps.width;\r\n    if (pdfHeight > h) {\r\n      w = (imgProps.width * h) / imgProps.height;\r\n    } else h = pdfHeight;\r\n    this.pdf.addImage(document.getElementById(imageID), PNG, x, y, w, h);\r\n  };\r\n\r\n  AddImageFitWidthOnly = (imageID, x, y, w, maxHeight) => {\r\n    if (this.pdf === null) return;\r\n    let imgData = document.getElementById(imageID);\r\n\r\n    if (imgData !== null) {\r\n      try {\r\n        const imgProps = this.pdf.getImageProperties(imgData);\r\n\r\n        //const pdfWidth = this.pdf.internal.pageSize.getWidth();\r\n        let pdfHeight = (imgProps.height * w) / imgProps.width;\r\n\r\n        if (pdfHeight > maxHeight) {\r\n          if (x + w > (3 * InToPt(PAGE_WIDTH)) / 4)\r\n            x += w - (w * maxHeight) / pdfHeight;\r\n          else if (x + (w * maxHeight) / pdfHeight / 2 > InToPt(PAGE_WIDTH) / 4)\r\n            x += w / 2 - (w * maxHeight) / pdfHeight / 2;\r\n\r\n          /*  else if(x+w/2>InToPt(PAGE_WIDTH/4))\r\n          x-=(w-w*maxHeight / pdfHeight)/2 */\r\n\r\n          w *= maxHeight / pdfHeight;\r\n          pdfHeight = maxHeight;\r\n        }\r\n        this.pdf.addImage(imgData, PNG, x, y, w, pdfHeight);\r\n        return true;\r\n      } catch (error) {\r\n        return false;\r\n      }\r\n    }\r\n  };\r\n\r\n  addCustomImage = (id, pg1TitleY, image, firstPage, top) => {\r\n     const left =\r\n      image === null || image === undefined\r\n        ? 0\r\n        : (image.left * HEADER_RECT_IN_W) / 100;\r\n    const result = this.AddImageFitWidthOnly(\r\n      id,\r\n      InToPt(pg1TitleY - 3 + left), //1.51),\r\n      InToPt(\r\n        firstPage\r\n          ? top\r\n            ? 1.06\r\n            : FOOTER_TEXT_IN_Y + 0.25\r\n          : top\r\n          ? 0.29\r\n          : FOOTER_TEXT_IN_Y + 0.25\r\n      ),\r\n      InToPt((6.04 * image.size) / 100),\r\n      InToPt(firstPage ? (top ? 2.76 : MAX_LOGO_HEIGHT) : MAX_LOGO_HEIGHT) // max height\r\n    );\r\n    return result;\r\n  };\r\n\r\n  AddChart = (containerID, x, y, w, h) => {\r\n    if (this.pdf === null) return;\r\n\r\n    const CANVAS_CLASS_NAME = \"chartjs-render-monitor\";\r\n\r\n    let containerElement = document.getElementById(containerID);\r\n    let canvasElement = null;\r\n\r\n    if (containerElement !== null)\r\n      if (\r\n        containerElement.getElementsByClassName(CANVAS_CLASS_NAME).length === 1\r\n      )\r\n        canvasElement = containerElement.getElementsByClassName(\r\n          CANVAS_CLASS_NAME\r\n        )[0];\r\n\r\n    let dataUrl = canvasElement.toDataURL();\r\n\r\n    if (dataUrl !== null) this.pdf.addImage(dataUrl, \"JPEG\", x, y, w, h);\r\n  };\r\n\r\n  AddCanvas = (canvasID, x, y, w, h) => {\r\n    if (this.pdf === null) return;\r\n\r\n    let canvasElement = null;\r\n    let dataUrl = null;\r\n\r\n    canvasElement = document.getElementById(canvasID);\r\n\r\n    if (canvasElement !== null) dataUrl = canvasElement.toDataURL();\r\n\r\n    if (dataUrl !== null) this.pdf.addImage(dataUrl, \"JPEG\", x, y, w, h);\r\n  };\r\n\r\n  AddPage = (mode) => {\r\n    if (this.pdf === null) return;\r\n\r\n    this.pdf.addPage(\"\", mode);\r\n  };\r\n\r\n  Create = () => {\r\n    if (this.pdf !== null) return;\r\n\r\n    this.pdf = new jsPDF({\r\n      orientation: PORTRAIT,\r\n      unit: PT,\r\n      format: LETTER,\r\n    });\r\n  };\r\n\r\n  ShowGrids = () => {\r\n    return this.showGrids;\r\n  };\r\n\r\n  ShowGrids = (showGrids) => {\r\n    this.showGrids = showGrids;\r\n  };\r\n\r\n  Grid = () => {\r\n    if (this.pdf === null) return;\r\n\r\n    if (this.showGrids === false) return;\r\n\r\n    const FONT_SIZE = 12;\r\n    const LARGE_FONT_SIZE = 16;\r\n\r\n    this.pdf.setFontSize(12);\r\n    this.pdf.setFont(HELVETICA, NORMAL);\r\n    this.pdf.setTextColor(0x00, 0x88, 0x00);\r\n\r\n    let x;\r\n    let y;\r\n\r\n    this.pdf.text(\"0\", 0, FONT_SIZE);\r\n\r\n    for (x = 1; x <= 8; x++) this.pdf.text(\"\" + x, InToPt(x), FONT_SIZE);\r\n\r\n    for (y = 1; y <= 11; y++) this.pdf.text(\"\" + y, 0, InToPt(y));\r\n\r\n    for (x = 0.25; x <= 8.5; x += 0.25)\r\n      for (y = 0.25; y <= 11; y += 0.25)\r\n        this.pdf.text(\".\", InToPt(x), InToPt(y));\r\n\r\n    this.pdf.setFont(HELVETICA, BOLD);\r\n    this.pdf.setFontSize(LARGE_FONT_SIZE);\r\n    for (x = 1; x <= 8; x += 1)\r\n      for (y = 1; y <= 11; y += 1) this.pdf.text(\".\", InToPt(x), InToPt(y));\r\n\r\n    if (this.fontSize !== null) this.pdf.setFontSize(this.fontSize);\r\n\r\n    if (\r\n      this.textRed !== null &&\r\n      this.textGreen !== null &&\r\n      this.textBlue !== null\r\n    )\r\n      this.pdf.setTextColor(this.textRed, this.textGreen, this.textBlue);\r\n\r\n    if (this.fontName !== null && this.fontStyle !== null)\r\n      this.pdf.setFont(this.fontName, this.fontStyle);\r\n  };\r\n\r\n  MultilineText = (text, x, y, w) => {\r\n    if (this.pdf === null) return;\r\n\r\n    let textLines = [];\r\n\r\n    textLines = this.pdf.splitTextToSize(text, w, {\r\n      fontName: this.fontName,\r\n      fontSize: this.fontSize,\r\n    });\r\n\r\n    this.pdf.text(textLines, x, y);\r\n  };\r\n\r\n  DrawLine = (x, y, w) => {\r\n    this.pdf.line(x, y, x + w, y);\r\n  };\r\n\r\n  Reset = () => {\r\n    this.pdf = null;\r\n  };\r\n\r\n  SetFont = (fontName, fontStyle) => {\r\n    if (this.pdf === null) return;\r\n\r\n    this.pdf.setFont(fontName, fontStyle);\r\n\r\n    this.fontName = fontName;\r\n    this.fontStyle = fontStyle;\r\n  };\r\n\r\n  SetFontSize = (fontSize) => {\r\n    if (this.pdf === null) return;\r\n\r\n    this.pdf.setFontSize(fontSize);\r\n\r\n    this.fontSize = fontSize;\r\n  };\r\n\r\n  Save = (fileName) => {\r\n    if (this.pdf === null) return;\r\n\r\n    this.pdf.save(fileName);\r\n  };\r\n\r\n  SetTextColor = (red, green, blue) => {\r\n    if (this.pdf === null) return;\r\n\r\n    this.pdf.setTextColor(red, green, blue);\r\n\r\n    this.textRed = red;\r\n    this.textGreen = green;\r\n    this.textBlue = blue;\r\n  };\r\n\r\n  SetFillColor = (red, green, blue) => {\r\n    if (this.pdf === null) return;\r\n\r\n    this.pdf.setFillColor(red, green, blue);\r\n\r\n    this.fillRed = red;\r\n    this.fillGreen = green;\r\n    this.fillBlue = blue;\r\n  };\r\n\r\n  showOnPage = () => {\r\n    //this.pdf.output('datauri');\r\n    //window.open(this.pdf.output('bloburl'))\r\n    //this.pdf.output('dataurlnewwindow');\r\n    //return this.pdf.output('datauri')\r\n    var blob = this.pdf.output(\"bloburl\");\r\n    return blob;\r\n  };\r\n  Rectangle = (x, y, w, h) => {\r\n    if (this.pdf === null) return;\r\n\r\n    this.pdf.roundedRect(x, y, w, h, 0, 0, \"F\");\r\n  };\r\n\r\n  textWidth = (text) => {\r\n    var arrayText = text.split(\" \");\r\n    let minWidth = 0;\r\n    //console.log(arrayText)\r\n    for (let i = 0; i < arrayText.length; i++) {\r\n      minWidth = Math.max(minWidth, this.pdf.getTextWidth(arrayText[i]));\r\n    }\r\n    return minWidth / 25; // pt to int\r\n  };\r\n  textWidthMultiLine = (text, width) => {\r\n    let arrayText = this.pdf.splitTextToSize(text, InToPt(width));\r\n    let minWidth = 0;\r\n    for (let i = 0; i < arrayText.length; i++) {\r\n      minWidth = Math.max(minWidth, this.pdf.getTextWidth(arrayText[i]));\r\n    }\r\n    return minWidth / 25; // pt to int\r\n  };\r\n\r\n  adjustTextWidth = (arrayText) => {\r\n    let minWidth = 0;\r\n    for (let i = 0; i < arrayText.length; i++) {\r\n      minWidth = Math.max(minWidth, this.pdf.getTextWidth(arrayText[i]));\r\n    }\r\n    return minWidth / 25; // pt to int\r\n  };\r\n\r\n  tableRow = (\r\n    fill,\r\n    textColor,\r\n    x,\r\n    y,\r\n    values,\r\n    height,\r\n    Widths,\r\n    box,\r\n    align,\r\n    title\r\n  ) => {\r\n    const lines2Fac = 1.75;\r\n    const lines3Fac = 2.7;\r\n    const cols = values.length;\r\n    let textY = y + height / 2 + 0.05;\r\n    // wrap if needed\r\n    let h = height;\r\n    for (i = 1; i <= cols; i++) {\r\n      if (\r\n        this.pdf.getTextWidth(values[i - 1]) > 2 * InToPt(Widths[i - 1]) &&\r\n        h < parseFloat(lines3Fac * height)\r\n      ) {\r\n        //console.log(values[i - 1],this.pdf.getTextWidth(values[i - 1]),.8*InToPt(Widths[i - 1]))\r\n        h = lines3Fac * height;\r\n        textY = y + height / 2 + 0.07;\r\n      } else if (\r\n        this.pdf.getTextWidth(values[i - 1]) > InToPt(Widths[i - 1]) &&\r\n        h < parseFloat(lines2Fac * height)\r\n      ) {\r\n        //console.log(values[i - 1],this.pdf.getTextWidth(values[i - 1]),.8*InToPt(Widths[i - 1]))\r\n        h = lines2Fac * height;\r\n        textY = y + height / 2 + 0.07;\r\n      }\r\n      let textOut;\r\n      if (h > height) {\r\n        textOut = this.pdf.splitTextToSize(\r\n          values[i - 1],\r\n          InToPt(Widths[i - 1] - 0.1)\r\n        );\r\n        // adjust width if necessary\r\n        //console.log(textOut,h,height)\r\n        if (title === true) {\r\n          if (textOut.length > 2 && h < parseFloat(lines3Fac * height))\r\n            h = lines3Fac * height;\r\n          else if (textOut.length > 1 && h < parseFloat(lines2Fac * height))\r\n            h = lines2Fac * height;\r\n          textY = y + height / 2 + 0.07;\r\n          // console.log(textOut,h,height)\r\n        }\r\n      }\r\n    }\r\n    this.SetTextColor(textColor[0], textColor[1], textColor[2]);\r\n    //this.SetFontSize(12);\r\n    var i;\r\n    let rightAlign;\r\n    let xi = x;\r\n    for (i = 1; i <= cols; i++) {\r\n      // wrap if needed\r\n      let textOut;\r\n      if (h > height) {\r\n        textOut = this.pdf.splitTextToSize(\r\n          values[i - 1],\r\n          InToPt(Widths[i - 1] - 0.1)\r\n        );\r\n      } else {\r\n        textOut = values[i - 1];\r\n        if (align !== undefined) {\r\n          if (align[i - 1] !== undefined) {\r\n            if (align[i - 1] === 2) rightAlign = true;\r\n          }\r\n        }\r\n      }\r\n      this.SetFillColor(fill[0], fill[1], fill[2]);\r\n      this.Rectangle(\r\n        InToPt(xi),\r\n        InToPt(y),\r\n        InToPt(Widths[i - 1] + 0.1),\r\n        InToPt(h)\r\n      );\r\n      if (box) {\r\n        this.pdf.setDrawColor(155, 155, 155);\r\n        this.pdf.rect(\r\n          InToPt(xi),\r\n          InToPt(y),\r\n          InToPt(Widths[i - 1] + 0.1),\r\n          InToPt(h)\r\n        );\r\n      }\r\n      if (rightAlign)\r\n        this.RightText(\r\n          values[i - 1],\r\n          InToPt(xi - 0.05),\r\n          InToPt(textY),\r\n          InToPt(Widths[i - 1])\r\n        );\r\n      else this.pdf.text(textOut, InToPt(xi + 0.1), InToPt(textY));\r\n\r\n      //  this.MultilineText(values[i - 1], InToPt(xi + .1), InToPt(y + .25), InToPt(3));\r\n      xi += Widths[i - 1];\r\n    }\r\n    //pdf.SetFillColor(fill[0], fill[1], fill[2]);\r\n    //pdf.Rectangle(InToPt(x), InToPt(y), InToPt(w), InToPt(height));\r\n    //pdf.Text(\"Family Profile\", InToPt(x[0] + .1), InToPt(y + .25));\r\n    //pdf.SetFillColor(115, 153, 198);\r\n    //pdf.Rectangle(InToPt(x[1]), InToPt(y), InToPt(w), InToPt(0.4));\r\n    //pdf.Text(\"Income\", InToPt(x[1] + .1), InToPt(y + .25));\r\n    //pdf.SetFillColor(115, 153, 198);\r\n    //pdf.Rectangle(InToPt(x[2]), InToPt(y), InToPt(w), InToPt(0.4));\r\n    //pdf.Text(\"Retirement Age\", InToPt(x[2] + .1), InToPt(y + .25));\r\n\r\n    return h - height; // excess height from here\r\n  };\r\n\r\n  Text = (text, x, y) => {\r\n    if (this.pdf === null) return;\r\n\r\n    this.pdf.text(text, x, y);\r\n  };\r\n\r\n  CenterText = (text, x, y, w) => {\r\n    if (this.pdf === null) return;\r\n\r\n    let tw = this.pdf.getTextWidth(text);\r\n\r\n    this.pdf.text(text, x + (w - tw) / 2, y);\r\n  };\r\n\r\n  RightText = (text, x, y, w) => {\r\n    if (this.pdf === null) return;\r\n\r\n    let tw = this.pdf.getTextWidth(text);\r\n\r\n    this.pdf.text(text, x + (w - tw) + 0.1, y);\r\n  };\r\n\r\n  Header = (textH, headerOffset) => {\r\n    if (headerOffset === undefined) headerOffset = 0;\r\n    this.SetFillColor(HEADER_RECT_R, HEADER_RECT_G, HEADER_RECT_B);\r\n\r\n    this.Rectangle(\r\n      InToPt(HEADER_RECT_IN_X),\r\n      InToPt(HEADER_RECT_IN_Y + headerOffset),\r\n      InToPt(HEADER_RECT_IN_W),\r\n      InToPt(HEADER_RECT_IN_H)\r\n    );\r\n\r\n    this.SetTextColor(HEADER_TEXT_R, HEADER_TEXT_G, HEADER_TEXT_B);\r\n    this.SetFont(HELVETICA, NORMAL);\r\n    this.SetFontSize(HEADER_TEXT_PT_SIZE);\r\n    this.CenterText(\r\n      textH,\r\n      InToPt(HEADER_TEXT_IN_X),\r\n      InToPt(HEADER_TEXT_IN_Y + headerOffset),\r\n      InToPt(HEADER_TEXT_IN_W)\r\n    );\r\n  };\r\n\r\n  addFooterAndHeader = (headerOffset, footerText, headerText) => {\r\n    this.Footer(footerText);\r\n    this.AddPage();\r\n    this.Header(headerText, headerOffset);\r\n  };\r\n\r\n  Footer = (textF) => {\r\n    this.SetTextColor(TEXT_R, TEXT_G, TEXT_B);\r\n    this.SetFont(TIMES, NORMAL);\r\n    this.SetFontSize(FOOTER_TEXT_PT_SIZE);\r\n    this.Text(textF, InToPt(FOOTER_TEXT_IN_X), InToPt(FOOTER_TEXT_IN_Y));\r\n  };\r\n\r\n  FooterLandscape = (textF) => {\r\n    this.SetTextColor(TEXT_R, TEXT_G, TEXT_B);\r\n    this.SetFont(TIMES, NORMAL);\r\n    this.SetFontSize(FOOTER_TEXT_PT_SIZE);\r\n    this.Text(textF, InToPt(FOOTER_TEXT_IN_X), InToPt(FOOTER_TEXT_IN_Y_L));\r\n  };\r\n\r\n  drawRect(paraLeft, paraY, paraWidth, height, color) {\r\n    this.SetFillColor(color[0], color[1], color[2]);\r\n    this.pdf.rect(\r\n      InToPt(paraLeft),\r\n      InToPt(paraY),\r\n      InToPt(paraWidth),\r\n      InToPt(height),\r\n      \"F\"\r\n    );\r\n  }\r\n\r\n  addFooter = (footer, title) => {\r\n    this.Footer(footer);\r\n    this.AddPage();\r\n    this.Header(title);\r\n  };\r\n\r\n  addHeaderNoFooter = (headerOffset, headerText) => {\r\n    this.AddPage();\r\n    this.Header(headerText, headerOffset);\r\n  };\r\n\r\n  tableRowSingle = (\r\n    fill,\r\n    textColor,\r\n    x,\r\n    y,\r\n    values2,\r\n    height,\r\n    Widths,\r\n    coloured\r\n  ) => {\r\n    const values = [values2];\r\n\r\n    if (coloured)\r\n      // has colour\r\n      this.tableRow(fill, textColor, x, y + 0.1, values, height - 0.1, [1.2]);\r\n    else this.tableRow(fill, textColor, x, y, values, height, Widths);\r\n  };\r\n\r\n}","import { numFormat, cleanFormat, formatMoney2 } from \"../utils/helper\";\r\nimport { getAssetGridValues } from \"./assetGridProjections\";\r\nimport { setUIDataToAPI } from \"./dataExchange\";\r\nimport _ from \"lodash\";\r\n\r\nimport {\r\n  COLUMN_TITLES,\r\n  TITLES,\r\n  INCOMESOURCES,\r\n  MEMBER,\r\n} from \"../definitions/generalDefinitions\";\r\nimport {\r\n  getInfoExcelcapFund,\r\n  getInfoExcelAllAfterTax,\r\n  getInfoBOYEOY,\r\n  getInfoAvgGrowth\r\n} from \"../definitions/infoIconsDefinitions\";\r\n\r\nimport {\r\n  ASSETS,\r\n  ASSET_TAX,\r\n  CONTROLTITLE,\r\n  TOTALS,\r\n  QUOTE_SPOUSE,\r\n  QUOTE_CLIENT,\r\n  ASSET_YEAR_TODAY,\r\n  FIRST_BENEFICIARY_ID,\r\n} from \"../definitions/generalDefinitions\";\r\n\r\nimport {\r\n  ASSET_TAX_TYPE_PRINCIPAL_RES,\r\n  ASSET_TAX_TYPE_REAL_ESTATE,\r\n  ASSET_TAX_TYPE_STOCKS,\r\n  ASSET_TAX_TYPE_SMALL_BUS,\r\n  ASSET_TAX_TYPE_RRSP,\r\n  ASSET_TAX_TYPE_INTEREST,\r\n  ASSET_TAX_TYPE_OTHER,\r\n  ASSET_TAX_TYPE_COUNT,\r\n} from \"../definitions/outputDefinitionsEP\";\r\n\r\nconst COLUMN_YEAR = 0;\r\nconst COLUMN_AGE = 1;\r\nconst COLUMN_INCOME_NEED = 2;\r\nconst COLUMN_CPP = 3;\r\nconst COLUMN_SURVIVOR_INCOME = 4;\r\nconst COLUMN_OTHER_INCOME = 5;\r\nconst COLUMN_TOTAL_INCOME = 6;\r\nconst COLUMN_TOTAL_ASSET_LIAB = 7;\r\nconst COLUMN_SHORTFALL = 8;\r\nconst COLUMN_INSURANCE_NEED = 9;\r\nconst COLUMN_FUND = 10;\r\n\r\nconst EP_SHEET_HEADERS_AVG_GROWTH = 11;\r\n\r\n// INA\r\n\r\nfunction INAFullSpreadsheetData(\r\n  cols,\r\n  insNeed,\r\n  dataInput,\r\n  dataPCV,\r\n  //Spouse,\r\n  survivors,\r\n  dataNeed,\r\n  dataGov,\r\n  dataShort,\r\n  inflation,\r\n  invRate,\r\n  afterTaxCPP_DB,\r\n  language\r\n) {\r\n  let dataColumns = [];\r\n  let dataColumn = [];\r\n  let noYrs = dataNeed.length;\r\n  const tempDate = new Date();\r\n  const year = tempDate.getFullYear();\r\n\r\n  let dataColumnCapFund = [];\r\n\r\n  let colNo;\r\n  let yr;\r\n  let survivorsIncome = 0;\r\n  let surivorsSalaryProjection = getSurivorsSalaryProjection(\r\n    dataInput,\r\n    noYrs,\r\n    survivors,\r\n    inflation\r\n  );\r\n  let surivorsCashFlowsFromAllSources = dataPCV;\r\n  let survivorsNonGovNonAssetLiabIncomeProjection =\r\n    getSurvivorsNonGovNonAssetLiabIncomeProjections(\r\n      dataInput,\r\n      noYrs,\r\n      //Spouse.avgTaxRate,\r\n      survivors,\r\n      inflation\r\n    );\r\n  //const formatFr = language === \"fr\" ? true : false;\r\n  const decimalChar = language === \"en\" ? \".\" : \",\";\r\n  const thousands = language === \"en\" ? \",\" : \" \";\r\n  const capFundBase = cleanFormat(insNeed, language); //+parseFloat(CPP_DB)\r\n\r\n  //console.log(Spouse);\r\n\r\n  // console.log(surivorsSalaryProjection,survivorsNonGovNonAssetLiabIncomeProjection)\r\n  // for cap fund use first survivor tax rate\r\n  let avgTaxRate = 0;\r\n  let beneficiaryAge = 0;\r\n  if (survivors.length > 0) {\r\n    avgTaxRate = survivors.filter((item) => {\r\n      return item.id === FIRST_BENEFICIARY_ID;\r\n    })[0].avgTaxRate;\r\n    beneficiaryAge = survivors.filter((item) => {\r\n      return item.id === FIRST_BENEFICIARY_ID;\r\n    })[0].Age;\r\n  }\r\n  for (colNo = 0; colNo < cols; colNo++) {\r\n    dataColumn = [];\r\n    for (yr = 0; yr < noYrs; yr++) {\r\n      if (yr === 0)\r\n        dataColumnCapFund[yr] = Math.max(\r\n          0,\r\n          (capFundBase -\r\n            cleanFormat(dataShort[yr] > 0 ? dataShort[yr] : 0, language)) *\r\n            Math.pow(1 + (invRate / 100) * (1 - avgTaxRate / 100), 1)\r\n        );\r\n      else\r\n        dataColumnCapFund[yr] = Math.max(\r\n          0,\r\n          (dataColumnCapFund[yr - 1] -\r\n            cleanFormat(dataShort[yr] > 0 ? dataShort[yr] : 0, language)) *\r\n            Math.pow(1 + (invRate / 100) * (1 - avgTaxRate / 100), 1)\r\n        );\r\n\r\n      if (colNo === COLUMN_YEAR) dataColumn.push(year + yr);\r\n      else if (colNo === COLUMN_AGE) dataColumn.push(beneficiaryAge + yr);\r\n      else if (colNo === COLUMN_INCOME_NEED)\r\n        dataColumn.push(formatMoney2(-dataNeed[yr], 0, language, false));\r\n      //numFormat(dataNeed[yr],  language===\"en\"?false:true, 2, language===\"en\"?\",\":\" \"));\r\n      else if (colNo === COLUMN_CPP)\r\n        dataColumn.push(formatMoney2(dataGov[yr], 0, language, false));\r\n      //numFormat(dataGov[yr],   language===\"en\"?false:true, 2,  language===\"en\"?\",\":\" \"));\r\n      else if (colNo === COLUMN_SURVIVOR_INCOME) {\r\n        survivorsIncome = surivorsSalaryProjection[yr];\r\n        dataColumn.push(formatMoney2(survivorsIncome, 0, language, false)); //numFormat(spouseIncome,   language===\"en\"?false:true, 2, language===\"en\"?\",\":\" \"));\r\n      } else if (colNo === COLUMN_OTHER_INCOME) {\r\n        let otherIncome =\r\n          //Math.round((dataPCV[yr] - surivorsSalaryProjection[yr]) * 100) / 100\r\n          (\r\n            Math.round(\r\n              (parseFloat(survivorsNonGovNonAssetLiabIncomeProjection[yr]) -\r\n                parseFloat(surivorsSalaryProjection[yr])) *\r\n                100\r\n            ) / 100\r\n          ).toFixed(0);\r\n        if (Math.abs(otherIncome) <= 1) otherIncome = 0;\r\n        dataColumn.push(formatMoney2(otherIncome, 0, language, false)); //numFormat(otherIncome,   language===\"en\"?false:true, 2, language===\"en\"?\",\":\" \"));\r\n      } else if (colNo === COLUMN_TOTAL_INCOME)\r\n        dataColumn.push(\r\n          formatMoney2(\r\n            parseFloat(survivorsNonGovNonAssetLiabIncomeProjection[yr]) +\r\n              parseFloat(dataGov[yr]),\r\n            0,\r\n            language,\r\n            false\r\n          )\r\n        );\r\n      //numFormat(dataPCV[yr] + dataGov[yr],   language===\"en\"?false:true, 2, language===\"en\"?\",\":\" \"));\r\n      else if (colNo === COLUMN_TOTAL_ASSET_LIAB)\r\n        dataColumn.push(\r\n          formatMoney2(\r\n            Math.abs(\r\n              dataPCV[yr] -\r\n                parseFloat(survivorsNonGovNonAssetLiabIncomeProjection[yr])\r\n            ) > 1\r\n              ? dataPCV[yr] -\r\n                  parseFloat(survivorsNonGovNonAssetLiabIncomeProjection[yr])\r\n              : 0,\r\n            0,\r\n            language,\r\n            false\r\n          )\r\n        ); //numFormat(dataPCV[yr] + dataGov[yr],   language===\"en\"?false:true, 2, language===\"en\"?\",\":\" \"));\r\n      if (colNo === COLUMN_SHORTFALL)\r\n        dataColumn.push(\r\n          formatMoney2(\r\n            dataShort[yr] > 0 ? dataShort[yr] : 0,\r\n            0,\r\n            language,\r\n            false\r\n          )\r\n          // numFormat(dataShort[yr] > 0 ? dataShort[yr] : 0, false,   language===\"en\"?false:true, 2, language===\"en\"?\",\":\" \")\r\n        );\r\n      else if (colNo === COLUMN_INSURANCE_NEED)\r\n        dataColumn.push(\r\n          yr === 0 ? formatMoney2(capFundBase, 0, language, false) : 0\r\n        );\r\n      //numFormat(insNeed, false,   language===\"en\"?false:true, 2, language===\"en\"?\",\":\" \") : 0);\r\n      else if (colNo === COLUMN_FUND)\r\n        dataColumn.push(\r\n          formatMoney2(dataColumnCapFund[yr], 0, language, false)\r\n        ); //numFormat(0, false,   language===\"en\"?false:true, 2, language===\"en\"?\",\":\" \"));\r\n    }\r\n\r\n    // add CPP DB to other from CPP do this above before formatting\r\n    /* if (colNo === COLUMN_CPP)\r\n      dataColumn[0] = formatMoney2(parseFloat(cleanformat(dataColumn[0])) - parseFloat(afterTaxCPP_DB));\r\n    \r\n    if (colNo === COLUMN_OTHER_INCOME)\r\n      dataColumn[0] = formatMoney2(parseFloat(cleanformat(ddataColumn[0])) - parseFloat(afterTaxCPP_DB)); */\r\n\r\n    dataColumns.push(dataColumn);\r\n\r\n    dataColumn = [];\r\n  }\r\n  return dataColumns;\r\n}\r\n\r\nfunction getSurivorsSalaryProjection(sources, noYrs, survivors, inflation) {\r\n  let totalIncome = Array(noYrs).fill(0);\r\n  let yr;\r\n  // console.log(sources)\r\n\r\n  let avgTaxRate = 0;\r\n  sources.forEach((element) => {\r\n    if (element.sourceTypeKey === INCOMESOURCES.SURVIVORS_INCOME.Key) {\r\n      try {\r\n        avgTaxRate = survivors.filter((item) => {\r\n          return item.id === element.ownerID;\r\n        })[0].avgTaxRate;\r\n      } catch (error) {}\r\n      /* console.log(element,survivors,avgTaxRate) */\r\n      for (yr = 0; yr < noYrs; yr++) {\r\n        totalIncome[yr] +=\r\n          yr >= element.startYear &&\r\n          yr < parseInt(element.startYear) + parseInt(element.duration)\r\n            ? parseFloat(element.amount) *\r\n              (1 - avgTaxRate / 100) *\r\n              Math.pow(1 + inflation / 100, yr)\r\n            : 0;\r\n      }\r\n    }\r\n  });\r\n  for (yr = 0; yr < noYrs; yr++)\r\n    totalIncome[yr] = (Math.round(totalIncome[yr] * 100) / 100).toFixed(0);\r\n\r\n  return totalIncome;\r\n}\r\n\r\nfunction getSurvivorsNonGovNonAssetLiabIncomeProjections(\r\n  sources,\r\n  noYrs,\r\n  //avgTaxRate,\r\n  survivors,\r\n  inflation\r\n) {\r\n  let totalIncome = Array(noYrs).fill(0);\r\n  let yr;\r\n  // console.log(sources)\r\n\r\n  let avgTaxRate = 0;\r\n  sources.forEach((element) => {\r\n    if (\r\n      !(\r\n        element.sourceTypeKey === INCOMESOURCES.GOV_DEATH_BENEFIT.Key ||\r\n        element.sourceTypeKey === INCOMESOURCES.GOV_ORPHANS_BENEFIT.Key ||\r\n        element.sourceTypeKey === INCOMESOURCES.GOV_SURVIVORS_PENSION.Key\r\n      )\r\n    ) {\r\n      // console.log(element.sourceTypeKey)\r\n      try {\r\n        avgTaxRate = survivors.filter((item) => {\r\n          return item.id === element.ownerID;\r\n        })[0].avgTaxRate;\r\n      } catch (error) {}\r\n      for (yr = 0; yr < noYrs; yr++) {\r\n        totalIncome[yr] +=\r\n          yr >= element.startYear &&\r\n          yr < parseInt(element.startYear) + parseInt(element.duration)\r\n            ? parseFloat(element.amount) *\r\n              (1 - avgTaxRate / 100) *\r\n              Math.pow(1 + inflation / 100, yr)\r\n            : 0;\r\n      }\r\n    }\r\n  });\r\n  for (yr = 0; yr < noYrs; yr++)\r\n    totalIncome[yr] = (Math.round(totalIncome[yr] * 100) / 100).toFixed(0);\r\n\r\n  return totalIncome;\r\n}\r\n\r\n// INA spreadsheet\r\nexport function getINAGridData(\r\n  insNeed,\r\n  insNeedRet,\r\n  insNeedLE,\r\n  dataPCV,\r\n  // Spouse,\r\n  Survivors,\r\n  dataNeed,\r\n  dataGov,\r\n  dataShort,\r\n  inflation,\r\n  language,\r\n  invRate,\r\n  Sources,\r\n  afterTaxCPP_DB\r\n) {\r\n  let gridColumnAligns;\r\n  let dataTitle;\r\n  let dataColHeaders;\r\n  let dataColumns;\r\n  let excelDataInfoSection;\r\n  let gridIcons;\r\n\r\n  {\r\n    // spreadsheet\r\n    dataTitle = TITLES[language].appletINA;\r\n    dataColHeaders = INAFullSpreadsheetHeaders(language);\r\n    dataColumns = INAFullSpreadsheetData(\r\n      dataColHeaders.length,\r\n      insNeed,\r\n      Sources,\r\n      dataPCV,\r\n      //    Spouse,\r\n      Survivors,\r\n      dataNeed,\r\n      dataGov,\r\n      dataShort,\r\n      inflation,\r\n      invRate,\r\n      afterTaxCPP_DB,\r\n      language\r\n    );\r\n    gridColumnAligns = new Array(dataColHeaders.length).fill(2);\r\n\r\n    gridIcons = new Array(dataColHeaders.length);\r\n    gridIcons[COLUMN_FUND] = getInfoExcelcapFund(language);\r\n    gridIcons[COLUMN_YEAR] = getInfoExcelAllAfterTax(language);\r\n\r\n    const singleFamily =\r\n      Survivors.filter((client) => client.memberKey === MEMBER.SPOUSE.Key)\r\n        .length === 0;\r\n\r\n    const decimalChar = language === \"en\" ? \".\" : \",\";\r\n    const thousands = language === \"en\" ? \",\" : \" \";\r\n\r\n    if (singleFamily) {\r\n      excelDataInfoSection = [\r\n        [\r\n          COLUMN_TITLES[language].intRate,\r\n          COLUMN_TITLES[language].infRate,\r\n          COLUMN_TITLES[language].surplusCapital,\r\n          COLUMN_TITLES[language].blank,\r\n          COLUMN_TITLES[language].additionalCapitalReq,\r\n          COLUMN_TITLES[language].survivorProtection,\r\n        ],\r\n        [\r\n          invRate.toString() + \"%\",\r\n          inflation.toString() + \"%\",\r\n          parseFloat(afterTaxCPP_DB),\r\n          \"\",\r\n          \"\",\r\n          insNeedRet,\r\n        ],\r\n      ];\r\n    } else {\r\n      excelDataInfoSection = [\r\n        [\r\n          COLUMN_TITLES[language].intRate,\r\n          COLUMN_TITLES[language].infRate,\r\n          COLUMN_TITLES[language].surplusCapital,\r\n          COLUMN_TITLES[language].blank,\r\n          COLUMN_TITLES[language].additionalCapitalReq,\r\n          COLUMN_TITLES[language].survivor65,\r\n          COLUMN_TITLES[language].survivorLE,\r\n        ],\r\n        [\r\n          invRate.toString() + \"%\",\r\n          inflation.toString() + \"%\",\r\n          parseFloat(afterTaxCPP_DB),\r\n          \"\",\r\n          \"\",\r\n          insNeedRet,\r\n          insNeedLE,\r\n        ],\r\n      ];\r\n    }\r\n  }\r\n  return {\r\n    gridTitle: dataTitle,\r\n    dataColTitles: dataColHeaders,\r\n    dataProjection: dataColumns,\r\n    gridColumnsDataExcelInfoSection: excelDataInfoSection,\r\n    gridColumnAligns: gridColumnAligns,\r\n    gridIcons: gridIcons,\r\n  };\r\n}\r\n\r\nfunction INAFullSpreadsheetHeaders(lang) {\r\n  let headers = [];\r\n  let i;\r\n\r\n  for (i = 0; i < COLUMN_TITLES.INA_SHEET_HEADERS[lang].Full.length; ++i) {\r\n    headers.push(COLUMN_TITLES.INA_SHEET_HEADERS[lang].Full[i]);\r\n  }\r\n\r\n  return headers;\r\n}\r\n\r\n// ESTATE PROTECTION\r\nasync function EPFullSpreadsheetData(\r\n  cols,\r\n  noProjectYrs, // + 1,\r\n  input\r\n) {\r\n  let noYrs = noProjectYrs;\r\n  const language = input.Presentations[0].language;\r\n  // const formatFr = language === \"fr\" ? true : false;\r\n  const decimalChar = language === \"en\" ? \".\" : \",\";\r\n  const thousands = language === \"en\" ? \",\" : \" \";\r\n\r\n  let count = 0;\r\n  let dataColumns = new Array(cols).fill(0).map(() => new Array(noYrs).fill(0));\r\n\r\n  const dataNA = await setUIDataToAPI(input);\r\n\r\n  const assetsLength = input.Assets.length;\r\n\r\n  for (let i = 0; i < assetsLength; i++) {\r\n    const element = input.Assets[i];\r\n    const data = await getAssetGridValues(dataNA, element, language, true);\r\n    count += 1;\r\n\r\n    for (let col = 0; col < 2; col++) {\r\n      for (let yr = 0; yr < noYrs; yr++) {\r\n        dataColumns[col][yr] = data.dataProjection[col][yr];\r\n      }\r\n    }\r\n    // year 0 is today, change it\r\n    // dataColumns[0][0]=ASSET_YEAR_TODAY[language].today;\r\n    // dont add up year and age\r\n    for (let col = 2; col < Math.min(cols, data.dataProjection.length); col++) {\r\n      for (let yr = 0; yr < noYrs; yr++) {\r\n        dataColumns[col][yr] =\r\n          parseInt(cleanFormat(dataColumns[col][yr], language)) +\r\n          parseInt(cleanFormat(data.dataProjection[col][yr], language));\r\n      }\r\n    }\r\n    //  console.log(dataColumns)\r\n  }\r\n\r\n  for (let col = 0; col < cols; col++) {\r\n    for (let yr = 0; yr < noYrs; yr++) {\r\n      if (yr === 0)\r\n        dataColumns[2][yr] =\r\n          parseInt(dataColumns[10][yr]) -\r\n          parseInt(dataColumns[4][yr]) -\r\n          parseInt(dataColumns[5][yr]) +\r\n          parseInt(dataColumns[6][yr]) +\r\n          parseInt(dataColumns[7][yr]);\r\n      else dataColumns[2][yr] = dataColumns[10][yr - 1];\r\n\r\n      // average growth\r\n      const ratio =\r\n        -1 +\r\n        (parseFloat(dataColumns[10][yr]) + parseFloat(dataColumns[6][yr])) /\r\n          parseFloat(dataColumns[2][yr]);\r\n      dataColumns[EP_SHEET_HEADERS_AVG_GROWTH][yr] =\r\n        Math.round((ratio + Number.EPSILON) * 10000) / 100;\r\n\r\n      /* dataColumns[EP_SHEET_HEADERS_AVG_GROWTH][yr] =\r\n        Math.round(\r\n          10000 *\r\n            (-1 +\r\n              (parseInt(dataColumns[10][yr]) + parseInt(dataColumns[6][yr])) /\r\n                parseInt(dataColumns[2][yr]))\r\n        ).toFixed(2) /\r\n          100 +\r\n        \" %\"; */\r\n    }\r\n  }\r\n\r\n  for (let col = 0; col < cols; col++) {\r\n    if (col !== EP_SHEET_HEADERS_AVG_GROWTH && col !== 1) {\r\n      for (let yr = 0; yr < noYrs; yr++) {\r\n        dataColumns[col][yr] = formatMoney2(\r\n          dataColumns[col][yr],\r\n          0,\r\n          language,\r\n          false\r\n        );\r\n      }\r\n    } else\r\n      for (let yr = 0; yr < noYrs; yr++) {\r\n        if (col !== 1 && isNaN(dataColumns[col][yr])) dataColumns[col][yr] = 0;\r\n      }\r\n  }\r\n  // year 0 is today, change it\r\n  dataColumns[0][0] = ASSET_YEAR_TODAY[language].today;\r\n  return dataColumns;\r\n}\r\n\r\n// EP spreadsheet\r\nexport async function getEPGridData(noProjectYrs, input) {\r\n  let gridColumnAligns;\r\n  let dataTitle;\r\n  let dataColHeaders;\r\n  let dataColumns;\r\n  let excelDataInfoSection;\r\n  let gridIcons;\r\n\r\n  // spreadsheet\r\n  const language = input.Presentations[0].language;\r\n\r\n  dataTitle = TITLES[language].appletEP;\r\n  dataColHeaders = EPFullSpreadsheetHeaders(language);\r\n\r\n  dataColumns = await EPFullSpreadsheetData(\r\n    dataColHeaders.length,\r\n    noProjectYrs + 1, // + 1,\r\n    input\r\n  );\r\n  gridColumnAligns = new Array(dataColHeaders.length).fill(2);\r\n  gridIcons = new Array(dataColHeaders.length);\r\n  dataColHeaders.forEach((item) => {\r\n    if (item === COLUMN_TITLES[language].EOYBalance)\r\n      gridIcons[2] = getInfoBOYEOY(\r\n        // boy\r\n        language\r\n      );\r\n    gridIcons[dataColHeaders.length - 3] = gridIcons[2]; //eoy\r\n    if (item === COLUMN_TITLES[language].AvgGrowth)\r\n      gridIcons[dataColHeaders.length-2] = getInfoAvgGrowth(  // boy\r\n        language\r\n      );\r\n  });\r\n  const decimalChar = language === \"en\" ? \".\" : \",\";\r\n  const thousands = language === \"en\" ? \",\" : \" \";\r\n\r\n  return {\r\n    gridTitle: dataTitle,\r\n    dataColTitles: dataColHeaders,\r\n    dataProjection: dataColumns,\r\n    gridIcons: gridIcons,\r\n  };\r\n}\r\n\r\nfunction EPFullSpreadsheetHeaders(lang) {\r\n  let headers = [];\r\n  let i;\r\n\r\n  for (i = 0; i < COLUMN_TITLES.EP_SHEET_HEADERS[lang].Full.length; ++i) {\r\n    headers.push(COLUMN_TITLES.EP_SHEET_HEADERS[lang].Full[i]);\r\n  }\r\n\r\n  return headers;\r\n}\r\n\r\nexport function getAssetLiabProjections(props) {\r\n  // add liab and tax liab\r\n  const input = props.dataInput;\r\n  const assetProjections = props.assetProjections;\r\n  //console.log(assetProjections)\r\n  const lang = input.Presentations[0].language;\r\n  // const formatFr = lang === \"fr\" ? true : false;\r\n  const clients = input.Clients;\r\n  const startAge =\r\n    clients.length > 1\r\n      ? Math.min(clients[QUOTE_SPOUSE].Age, clients[QUOTE_CLIENT].Age)\r\n      : clients[QUOTE_CLIENT].Age;\r\n\r\n  const LE3 = parseInt(props.LE) + 3;\r\n  let EstateLiabsByType = Array(ASSET_TAX_TYPE_COUNT).fill(0);\r\n  let EstateLiabsByTypeLE3 = Array(ASSET_TAX_TYPE_COUNT).fill(0);\r\n  let proj = [];\r\n  let dataEstateLiability = Array(100 - startAge + 1).fill(0);\r\n\r\n  //const dataNA = setUIDataToAPI(props.dataInput);\r\n\r\n  let tmpGrids = [];\r\n  let AssetProjectionsGrid = [];\r\n  let taxLiabCol = 0;\r\n  let FMVCol = 0;\r\n  let EstateLiabsByTypeTotal = 0;\r\n  let EstateLiabsByTypeLE3Total = 0;\r\n  let EstateLiabsByTypeGrowth = [];\r\n  let EstateLiabsByTypeInitialAmt = [];\r\n  EstateLiabsByTypeGrowth = Array(ASSET_TAX_TYPE_COUNT).fill(0);\r\n  EstateLiabsByTypeInitialAmt = Array(ASSET_TAX_TYPE_COUNT).fill(0);\r\n  // add all assets\r\n\r\n  if (input.Assets.length === 0) {\r\n    proj.values = Array(100).fill(0);\r\n    const grid = assetProjections[0].grid;\r\n    tmpGrids.push(grid);\r\n  } else {\r\n    input.Assets.forEach((element) => {\r\n      proj.values = Array(100).fill(0);\r\n      //console.log(assetProjections);\r\n      //console.log(assetProjections[element.id - 1]);\r\n\r\n      const grid = assetProjections[element.id - 1].grid;\r\n      tmpGrids.push(grid);\r\n      FMVCol = 2;\r\n      let fmv = [];\r\n      for (let i = 0; i < 100 - startAge; i++) {\r\n        fmv.push(parseFloat(cleanFormat(grid.dataProjection[FMVCol][i])));\r\n      }\r\n\r\n      if (element.assetTaxTypeKey !== ASSET_TAX.NON_TAXABLE.Key) {\r\n        if (element.assetTypeKey === ASSETS.PERSONAL_RESIDENCE.Key) {\r\n          taxLiabCol = grid.dataProjection.length - 1;\r\n          EstateLiabsByType[ASSET_TAX_TYPE_PRINCIPAL_RES] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][0], lang)\r\n          );\r\n          EstateLiabsByTypeLE3[ASSET_TAX_TYPE_PRINCIPAL_RES] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][LE3], lang)\r\n          );\r\n          addAssetToProjections(\r\n            proj,\r\n            fmv,\r\n            ASSETS.PERSONAL_RESIDENCE.value[lang],\r\n            ASSETS.PERSONAL_RESIDENCE.colour\r\n          );\r\n        } else if (element.assetTypeKey === ASSETS.REAL_ESTATE.Key) {\r\n          taxLiabCol = grid.dataProjection.length - 1;\r\n          FMVCol = 2;\r\n\r\n          EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_REAL_ESTATE] +=\r\n            (parseFloat(cleanFormat(element.currValue, lang)) *\r\n              element.growth) /\r\n            100;\r\n          EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_REAL_ESTATE] += parseFloat(\r\n            cleanFormat(element.currValue, lang)\r\n          );\r\n\r\n          EstateLiabsByType[ASSET_TAX_TYPE_REAL_ESTATE] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][0], lang)\r\n          );\r\n\r\n          EstateLiabsByTypeLE3[ASSET_TAX_TYPE_REAL_ESTATE] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][LE3], lang)\r\n          );\r\n          addAssetToProjections(\r\n            proj,\r\n            fmv,\r\n            ASSETS.REAL_ESTATE.value[lang],\r\n            ASSETS.REAL_ESTATE.colour\r\n          );\r\n        } else if (element.assetTypeKey === ASSETS.STOCKS_BONDS.Key) {\r\n          taxLiabCol = grid.dataProjection.length - 1;\r\n          FMVCol = 2;\r\n          EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_STOCKS] +=\r\n            (parseFloat(cleanFormat(element.currValue, lang)) *\r\n              element.growth) /\r\n            100;\r\n          EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_STOCKS] += parseFloat(\r\n            cleanFormat(element.currValue, lang)\r\n          );\r\n          EstateLiabsByType[ASSET_TAX_TYPE_STOCKS] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][0], lang)\r\n          );\r\n          EstateLiabsByTypeLE3[ASSET_TAX_TYPE_STOCKS] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][LE3], lang)\r\n          );\r\n          addAssetToProjections(\r\n            proj,\r\n            fmv,\r\n            ASSETS.STOCKS_BONDS.value[lang],\r\n            ASSETS.STOCKS_BONDS.colour\r\n          );\r\n        } else if (element.assetTypeKey === ASSETS.SMALL_BUSINESS_SHARES.Key) {\r\n          taxLiabCol = grid.dataProjection.length - 1;\r\n          FMVCol = 2;\r\n          EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_SMALL_BUS] +=\r\n            (parseFloat(cleanFormat(element.currValue, lang)) *\r\n              element.growth) /\r\n            100;\r\n          EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_SMALL_BUS] += parseFloat(\r\n            cleanFormat(element.currValue, lang)\r\n          );\r\n          EstateLiabsByType[ASSET_TAX_TYPE_SMALL_BUS] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][0], lang)\r\n          );\r\n          EstateLiabsByTypeLE3[ASSET_TAX_TYPE_SMALL_BUS] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][LE3], lang)\r\n          );\r\n          addAssetToProjections(\r\n            proj,\r\n            fmv,\r\n            ASSETS.SMALL_BUSINESS_SHARES.value[lang],\r\n            ASSETS.SMALL_BUSINESS_SHARES.colour\r\n          );\r\n        } else if (element.assetTypeKey === ASSETS.RRSP_RRIF.Key) {\r\n          taxLiabCol = grid.dataProjection.length - 1;\r\n          FMVCol = 2;\r\n          EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_RRSP] +=\r\n            (parseFloat(cleanFormat(element.currValue, lang)) *\r\n              element.growth) /\r\n            100;\r\n          EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_RRSP] += parseFloat(\r\n            cleanFormat(element.currValue, lang)\r\n          );\r\n          EstateLiabsByType[ASSET_TAX_TYPE_RRSP] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][0], lang)\r\n          );\r\n          EstateLiabsByTypeLE3[ASSET_TAX_TYPE_RRSP] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][LE3], lang)\r\n          );\r\n          addAssetToProjections(\r\n            proj,\r\n            fmv,\r\n            ASSETS.RRSP_RRIF.value[lang],\r\n            ASSETS.RRSP_RRIF.colour\r\n          );\r\n        } else if (element.assetTypeKey === ASSETS.INTEREST_BEARING.Key) {\r\n          taxLiabCol = grid.dataProjection.length - 1;\r\n          FMVCol = 2;\r\n\r\n          EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_INTEREST] +=\r\n            (parseFloat(cleanFormat(element.currValue, lang)) *\r\n              element.growth) /\r\n            100;\r\n          EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_INTEREST] += parseFloat(\r\n            cleanFormat(element.currValue, lang)\r\n          );\r\n          EstateLiabsByType[ASSET_TAX_TYPE_INTEREST] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][0], lang)\r\n          );\r\n          EstateLiabsByTypeLE3[ASSET_TAX_TYPE_INTEREST] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][LE3], lang)\r\n          );\r\n          addAssetToProjections(\r\n            proj,\r\n            fmv,\r\n            ASSETS.INTEREST_BEARING.value[lang],\r\n            ASSETS.INTEREST_BEARING.colour\r\n          );\r\n        }\r\n        // take other, bundle taxable together\r\n        else if (element.assetTypeKey === ASSETS.OTHER_ASSETS.Key) {\r\n          taxLiabCol = grid.dataProjection.length - 1;\r\n          FMVCol = 2;\r\n          EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_OTHER] +=\r\n            (parseFloat(cleanFormat(element.currValue, lang)) *\r\n              element.growth) /\r\n            100;\r\n          EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_OTHER] += parseFloat(\r\n            cleanFormat(element.currValue, lang)\r\n          );\r\n          EstateLiabsByType[ASSET_TAX_TYPE_OTHER] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][0], lang)\r\n          );\r\n          EstateLiabsByTypeLE3[ASSET_TAX_TYPE_OTHER] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][LE3], lang)\r\n          );\r\n          addAssetToProjections(\r\n            proj,\r\n            fmv,\r\n            ASSETS.OTHER_ASSETS.value[lang],\r\n            ASSETS.OTHER_ASSETS.colour\r\n          );\r\n        }\r\n        // bundle non-taxable together\r\n        /* else if (element.assetTypeKey === ASSETS.CASH.Key) {\r\n      FMVCol = 2;\r\n      addAssetToProjections(\r\n        proj,\r\n        fmv,\r\n        ASSET_TAX.NON_TAXABLE.value[lang],\r\n        ASSETS.CASH.colour\r\n      );\r\n    } else if (element.assetTypeKey === ASSETS.LIFE_INSURANCE.Key) {\r\n      FMVCol = 2;\r\n      addAssetToProjections(\r\n        proj,\r\n        fmv,\r\n        ASSET_TAX.NON_TAXABLE.value[lang],\r\n        ASSETS.LIFE_INSURANCE.colour\r\n      );\r\n    } else if (\r\n      element.assetTypeKey === ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.Key\r\n    ) {\r\n      FMVCol = 2;\r\n      addAssetToProjections(\r\n        proj,\r\n        fmv,\r\n        ASSET_TAX.NON_TAXABLE.value[lang],\r\n        ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.colour\r\n      );\r\n    } */\r\n        /* else {\r\n      taxLiabCol = grid.dataProjection.length - 1;\r\n      FMVCol = 2;\r\n     \r\n      EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_OTHER] +=  parseFloat(cleanFormat(element.currValue, lang))*element.growth/100;\r\n      EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_OTHER]+=parseFloat(cleanFormat(element.currValue, lang));\r\n      EstateLiabsByType[ASSET_TAX_TYPE_OTHER] += parseFloat(\r\n        cleanFormat(grid.dataProjection[taxLiabCol][0], lang)\r\n      );\r\n      EstateLiabsByTypeLE3[ASSET_TAX_TYPE_OTHER] += parseFloat(\r\n        cleanFormat(grid.dataProjection[taxLiabCol][LE3], lang)\r\n      );\r\n      addAssetToProjections(\r\n        proj,\r\n        fmv,\r\n        ASSETS.OTHER_BEARING.value[lang],\r\n        ASSETS.OTHER_BEARING.colour\r\n      );\r\n    }\r\n */\r\n        EstateLiabsByTypeTotal += parseFloat(\r\n          cleanFormat(grid.dataProjection[taxLiabCol][0], lang)\r\n        );\r\n        EstateLiabsByTypeLE3Total += parseFloat(\r\n          cleanFormat(grid.dataProjection[taxLiabCol][LE3], lang)\r\n        );\r\n        // sum all for total tax liab\r\n        if (proj.length > 0) {\r\n          for (let i = 0; i < grid.dataProjection[0].length - 1; i++) {\r\n            if (grid.dataProjection[taxLiabCol][i] !== undefined)\r\n              dataEstateLiability[i] += parseFloat(\r\n                cleanFormat(grid.dataProjection[taxLiabCol][i], lang)\r\n              );\r\n          }\r\n          dataEstateLiability[100 - startAge] =\r\n            dataEstateLiability[100 - startAge - 1];\r\n        }\r\n      }\r\n    });\r\n  }\r\n  proj.push({\r\n    name: TOTALS.TAX_LIAB.value[lang], // TOTALS.ESTATE_LIAB.value[lang],\r\n    colour: TOTALS.ESTATE_LIAB.colour,\r\n    values: dataEstateLiability,\r\n  });\r\n\r\n  const rateRS =\r\n    EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_REAL_ESTATE] === 0\r\n      ? 0\r\n      : (100 * EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_REAL_ESTATE]) /\r\n        EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_REAL_ESTATE];\r\n  const rateS =\r\n    EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_STOCKS] === 0\r\n      ? 0\r\n      : (100 * EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_STOCKS]) /\r\n        EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_STOCKS];\r\n  const rateSB =\r\n    EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_SMALL_BUS] === 0\r\n      ? 0\r\n      : (100 * EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_SMALL_BUS]) /\r\n        EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_SMALL_BUS];\r\n  const rateRR =\r\n    EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_RRSP] === 0\r\n      ? 0\r\n      : (100 * EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_RRSP]) /\r\n        EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_RRSP];\r\n  const rateI =\r\n    EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_INTEREST] === 0\r\n      ? 0\r\n      : (100 * EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_INTEREST]) /\r\n        EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_INTEREST];\r\n  const rateO =\r\n    EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_OTHER] === 0\r\n      ? 0\r\n      : (100 * EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_OTHER]) /\r\n        EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_OTHER];\r\n\r\n  EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_REAL_ESTATE] =\r\n    lang === \"en\"\r\n      ? numFormat(rateRS, false, 3)\r\n      : numFormat(rateRS, false, 3).replace(\".\", \",\");\r\n  EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_STOCKS] =\r\n    lang === \"en\"\r\n      ? numFormat(rateS, false, 3)\r\n      : numFormat(rateS, false, 3).replace(\".\", \",\");\r\n  EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_SMALL_BUS] =\r\n    lang === \"en\"\r\n      ? numFormat(rateSB, false, 3)\r\n      : numFormat(rateSB, false, 3).replace(\".\", \",\");\r\n  EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_RRSP] =\r\n    lang === \"en\"\r\n      ? numFormat(rateRR, false, 3)\r\n      : numFormat(rateRR, false, 3).replace(\".\", \",\");\r\n  EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_INTEREST] =\r\n    lang === \"en\"\r\n      ? numFormat(rateI, false, 3)\r\n      : numFormat(rateI, false, 3).replace(\".\", \",\");\r\n  EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_OTHER] =\r\n    lang === \"en\"\r\n      ? numFormat(rateO, false, 3)\r\n      : numFormat(rateO, false, 3).replace(\".\", \",\");\r\n\r\n  let projectionsGrids = tmpGrids;\r\n  //setState({ grids: tmpGrids, loading: false });\r\n\r\n  const AssetnEstateLiabs = proj;\r\n\r\n  return {\r\n    EstateLiabsByType,\r\n    EstateLiabsByTypeTotal,\r\n    EstateLiabsByTypeLE3,\r\n    EstateLiabsByTypeLE3Total,\r\n    EstateLiabsByTypeGrowth,\r\n    AssetnEstateLiabs,\r\n    projectionsGrids,\r\n  };\r\n}\r\n\r\nfunction addAssetToProjections(proj, data, assetName, colour) {\r\n  let alreadyThere = false;\r\n  for (let i = 0; i < proj.length; i++) {\r\n    if (proj[i].colour === colour) {\r\n      alreadyThere = true;\r\n      for (let j = 0; j < 100; j++) proj[i].values[j] += data[j];\r\n    }\r\n  }\r\n  if (alreadyThere === false)\r\n    proj.push({ name: assetName, colour: colour, values: data });\r\n\r\n  //console.log(proj);\r\n  return proj;\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { appletMode } from \"../../package.json\";\r\nimport { INCOMENEEDS } from \"./generalDefinitions\";\r\n\r\nconst DEFAULT_MARGIN_LEFT = -67;\r\nconst DEFAULT_MARGIN_TOP = 0;\r\nconst DEFAULT_WIDTH = 140;\r\nconst DEFAULT_HEIGHT = 100;\r\n\r\nconst POPUP_BORDER_INFO = \"#7399C6\";\r\nconst POPUP_BORDER_ALERT = \"red\";\r\nconst POPUP_BORDER_MESSAGE = \"#7399C6\";\r\n\r\nexport const SHOW_AUTOMATIC_RED = 0;\r\nexport const SHOW_STANDARD = 1;\r\nexport const SHOW_STANDARD_RED = 2;\r\nexport const SHOW_NONE = 3;\r\nexport const SHOW_STANDARD_LIGHT_BLUE = 4;\r\nexport const SHOW_STANDARD_WHITE = 5;\r\n\r\nconst infoHighlightStyle = { color: \"#6f2852\", fontWeight: \"bold\" };\r\n\r\nconst MESSAGES = {\r\n  en: {\r\n    infoYr0: appletMode===\"INA\"?\"Year 0 stands for 'at death': today\":\"Year 0 stands for 'today'\",\r\n    infoRetDur: \"Duration to retirement is  years\",\r\n    infoAvgTax: (\r\n      <div>\r\n        {\" \"}\r\n        {/* style={{color:\"#54585a\"}}> */}\r\n        Survivor's <span style={infoHighlightStyle}>Avg. Tax Rate</span> is\r\n        applied to annual income, interest and annual asset disposition. <br />\r\n        <span style={infoHighlightStyle}>Marginal Tax Rate </span>(under\r\n        Presentation Details) is applied to planned or potential full\r\n        disposition of an asset\r\n      </div>\r\n    ),\r\n    infoIconRetire: (\r\n      <div>\r\n        {\" \"}\r\n        {/* style={{color:\"#54585a\"}}> */}\r\n        <span style={infoHighlightStyle}>Income Source</span> and <span style={infoHighlightStyle}>Income Needs</span> durations are usually based on this value.\r\n        <br />They will be adjusted automatically, <br />please recheck.\r\n      </div>\r\n    ),\r\n    infoAdjust:\r\n      \"Adjust Income Needs and Income Source durations to end age (99) or Life Expectancy of\",\r\n    clientOnly: \"Needs Analysis is always done for member 'Client'\",\r\n    infoElig: (\r\n      <div>\r\n        {\" \"}\r\n        Survivor's and orphan's benefits are based on Client's eligibility\r\n        <br />\r\n        Set <span style={infoHighlightStyle}>Province</span> under \"Presentation\r\n        Details\" for CPP or QPP\r\n      </div>\r\n    ),\r\n    infoEligSinglePerson:\r\n    \"for government Death Benefit\",\r\n    infoSpouseElig:\r\n      \"100% means the Survivor is assumed to be fully eligible for government benefits by the age of 65\",\r\n    ever: \" ... for ever\",\r\n    taxMsg: \"Tax methods need to be discussed with your financial advisor\",\r\n    fetch: \"Failed to connect to the server\",\r\n    ie: \"Please use Edge or Chrome browsers for graphs and full functionality\",\r\n    govB: (\r\n      <div>\r\n        Do not delete government benefits. <br />\r\n        To adjust them, change{\" \"}\r\n        <span style={infoHighlightStyle}>Client's \"CPP/QPP Eligibility\"</span>\r\n      </div>\r\n    ),\r\n    assetTax:\r\n      \"Please use after tax asset values until Tax Method becomes available\",\r\n    internet:\r\n      \"You need to login to the PPI site again.\" +\r\n      \"You can save your data before clicking on this message or use \" +\r\n      \"'Recover' in INA to reload your input data.\" +\r\n      \"Please click to refresh.\",\r\n\r\n    RRIF:\r\n      \"RRIF is reflected in survivor's income based on their own or rolled-over RRSP. Maximum withdrawal age is 71\",\r\n    rollOver:\r\n      \"Client's assets can usually be rolled-over to their spouse to avoid liquidation\",\r\n    insurance:\r\n      \"Client's insurance is available to the survivor while Spouse or Joint (JLTD) insurance is not.\",\r\n    rental:\r\n      \"This is rental income for Real Estate and Dividend income for Stocks. Both as a % of Current Value. Alternatively they can be entered under 'Sources of Income ...'. Such income (after tax) impacts survivors' cash flows and therefore 'Insurance Needs' of the Client\",\r\n    note:\r\n      \"Pull down on lower bottom to enlarge. A few small paragraphs can be saved (up to 5000 characters)\",\r\n    save: (\r\n      <div>\r\n        To save files to your desired location:\r\n        <br />\r\n        <span style={infoHighlightStyle}>Microsoft Edge:</span>\r\n        <li>Go to menu ..., Downloads, Download Settings</li>\r\n        <span style={infoHighlightStyle}>Google Chrome:</span>\r\n        <li>Go to menu ..., Settings, Advanced, Downloads</li>\r\n        <span style={infoHighlightStyle}>then in either browser:</span>\r\n        <li>Turn on \"Ask where to save each file before downloading\"</li>\r\n      </div>\r\n    ),\r\n    gridCapFund:\r\n      \"Capital Fund consists of Additional Capital required (Insurance Needs) less Additional Income Required, accruing at after-tax 'Investment Rate'\",\r\n    salary:\r\n      \"Gross income, government benefits and other annual income types are assumed to grow at inflation rate\",\r\n    salaryPercent:\r\n      \"The After-tax value is shown in today's dollars. It will grow at inflation rate\",\r\n    afterTax: \"All amounts are after tax\",\r\n    taxExempt: (\r\n      <div>\r\n        Small Business{\" \"}\r\n        <span style={infoHighlightStyle}>Capital Gains Tax Exemption</span> is\r\n        assumed to grow at inflation rate\r\n      </div>\r\n    ),\r\n    infoINA:\r\n      \"This amount is based on the present value of shortfalls, discounted at the after tax investment rate. It is adjusted if necessary, to make sure early shortfalls are provided for\",\r\n      infoBOYEOY: \"BOY stands for Beginning of Year and EOY for End of Year\",\r\n      infoAvgGrowth:  <div>Average Growth = ( <br/>EOY Balance + Sale Proceeds <br/> - BOY Balance <br/>) / BOY Balance </div>,\r\n      infoPDF:\r\n      \"INA Graphs and Spreadsheet can be exported to PDF under 'Graphs' tab\",  \r\n      probate:\r\n      appletMode===\"INA\"?\"Probate is based on Client's assets at time of death and does not include Joint assets or assets that belong to, or can be rolled-over to Spouse\":\r\n      \"Probate is based on Client's assets at time of death. If a Spouse is added, hence JLTD coverage, it will also include Joint assets or assets that belong to, or can be rolled-over to Spouse\",  \r\n      TFSA:\r\n      \"RRSP and TFSA contributions and withdrawals are subject to limitations set by CRA\",  \r\n      DepositWithd:\r\n      \"Contributions and Withdrawals affect asset's fair market value and also cash flows. Survivors' cash flows from all sources directly impact 'Insurance Needs' of the Client\",  \r\n      inflationGrowth:\r\n      \"Gross income, government benefits and other annual income types are assumed to grow at your selected inflation rate\",  \r\n      PYE_JLTD:\r\n      \"When a Spouse is added, the Estate liability needs to be insured with a JLTD coverage. As such, it includes tax and other liabilities of both at the last death\",  \r\n      needGrowth:\r\n      \"Income Needs are assumed to grow at your selected inflation rate\",\r\n      needGrowth_1:\r\n      \"Estate Income Needs are assumed to grow at your selected inflation rate\",\r\n      exportINA:\r\n      \"Data can be exported to Insurance Needs Analysis, where insurance needs to support survivor(s) life style can be calculated\",\r\n      taxLiab:\r\n      \"Asset projections take Tax Liability into account. You don't need to enter a separate liability related to taxes such as capital gains\",\r\n      liabDesc:\r\n      \"You may use this to indicate a permanent/non-permanent liability\",\r\n  },\r\n  fr: {\r\n    infoYr0:\r\n    appletMode===\"INA\"?\"L'anne 0 est l'anne du dcs: aujourd'hui\":\"L'anne 0 reprsente aujourd'hui\",\r\n    infoRetDur: \"Le nombre d'annes avant la retraite est de .... ans\",\r\n    infoAvgTax: (\r\n      <div>\r\n        Le taux d'imposition marginal (sous la rubrique  Prcisions sur la\r\n        prsentation ) s'applique  la disposition planifie ou potentielle\r\n        complte d'un actif.{\" \"}\r\n        <span style={infoHighlightStyle}>Le taux d'imposition moyen</span> du\r\n        survivant s'applique au revenu annuel, aux intrts et  la disposition\r\n        annuelle des actifs.\r\n        <br />\r\n        <span style={infoHighlightStyle}>\r\n          Le taux d'imposition marginal{\" \"}\r\n        </span>{\" \"}\r\n        (sous la rubrique  Prcisions sur la prsentation ) s'applique  la\r\n        disposition planifie ou potentielle complte d'un actif.\r\n      </div>\r\n    ),\r\n    infoIconRetire: <div>\r\n    {\" \"}\r\n    {/* style={{color:\"#54585a\"}}> */}\r\n    Les dures de la <span style={infoHighlightStyle}>source de revenus</span> et des <span style={infoHighlightStyle}>besoins en matire de revenus</span> sont gnralement bases sur cette valeur.\r\n        <br />Elles seront rajustes automatiquement, veuillez les vrifier de nouveau.\r\n  </div>,\r\n    \r\n    infoAdjust:\r\n      \"Ajuster les besoins de revenu et les dures de la source de revenu  ge  l'chance (99) or l'esprance de vie de\",\r\n    clientOnly:\r\n      \"L'analyse des besoins est toujours effectue pour le client membre de la famille\",\r\n    infoElig: (\r\n      <div>\r\n        Les prestations du survivant et de l'orphelin sont bases sur\r\n        l'admissibilit du client\r\n        <br />\r\n        Dfinir{\" \"}\r\n        <span style={infoHighlightStyle}>la province</span> (RPC ou RRQ)  la\r\n        rubrique 'Prcisions sur la prsentation'\r\n      </div>\r\n    ),\r\n    infoEligSinglePerson:\r\n    \"pour prestation de dcs du gouvernment\",\r\n    \r\n    infoSpouseElig:\r\n      \"100 % signifie que le survivant est suppos tre pleinement admissible aux prestations gouvernementales avant l'ge de 65 ans\",\r\n    ever: \" ... pour toujours\",\r\n    taxMsg:\r\n      \"Les mthodes fiscales doivent tre discutes avec votre conseiller financier\",\r\n    fetch: \"Dfaut de connexion au serveur\",\r\n    ie:\r\n      \"s'il vous plat utiliser les navigateurs Edge ou Chrome pour les graphiques et les fonctionnalits compltes\",\r\n    govB: (\r\n      <div>\r\n        Ne supprimez pas les prestations gouvernementales. <br />\r\n        Pour les ajuster, modifier{\" \"}\r\n        <span style={infoHighlightStyle}>l'admissibilit du client</span>\r\n      </div>\r\n    ),\r\n    assetTax:\r\n      \"Veuillez utiliser les valeurs des actifs aprs impt jusqu' ce que la mthode d'imposition devienne disponibl\",\r\n    internet:\r\n      \"  Vous devez vous connecter  nouveau au site PPI.\" +\r\n      \"Vous pouvez enregistrer vos donnes avant de cliquer sur ce message\" +\r\n      \"pour recharger vos donnes d'entre.\" +\r\n      \"S'il vous plat cliquez pour rafrachir.\",\r\n    RRIF:\r\n      \"Le FERR est pris en compte dans le revenu du survivant sur la base de son propre REER ou d'un REER transfr. L'ge maximal pour retirer des fonds est de 71 ans.\",\r\n    rollOver:\r\n      \"Les actifs du client peuvent habituellement tre transfrs au conjoint pour viter une liquidation.\",\r\n    insurance:\r\n      \"L'assurance du client est offerte au survivant, alors que l'assurance du conjoint ou l'assurance conjointe (sur deux ttes) ne le sont pas.\",\r\n    rental:\r\n      \"Il s'agit du revenu de location li aux biens immobiliers et du revenu de dividende li aux actions. Il s'agit dans les deux cas d'un pourcentage de la valeur actuelle. Ils peuvent galement tre saisis dans la rubrique  Sources de revenus . Un tel revenu (aprs impt) aura un impact sur les flux montaires des survivants et par consquent, sur les  besoins en assurance  du client.\",\r\n    note:\r\n      \"Abaissez le bord infrieur pour agrandir. Quelques petits paragraphes peuvent tre enregistrs (jusqu' 5 000 caractres).\",\r\n    save: (\r\n      <div>\r\n        Pour enregistrer les fichiers  l'emplacement voulu :<br />\r\n        <span style={infoHighlightStyle}>Microsoft Edge:</span>\r\n        <li>Aller au menu..., Tlchargements, Paramtres de tlchargement</li>\r\n        <span style={infoHighlightStyle}>Google Chrome:</span>\r\n        <li>\r\n          Aller au menu..., Paramtres, Paramtres avancs, Tlchargements\r\n        </li>\r\n        <span style={infoHighlightStyle}>\r\n          puis dans l'un ou l'autre des navigateurs :\r\n        </span>\r\n        <li>\r\n          Activer la fonction  Me demander quoi faire avec chaque\r\n          tlchargement  ou  Toujours demander o enregistrer les fichiers .\r\n        </li>\r\n      </div>\r\n    ),\r\n    gridCapFund:\r\n      \"Le fonds de capitaux est constitu du capital additionnel requis (besoins d'assurance), diminu du revenu additionnel requis et accru du taux de rendement aprs impt.\",\r\n    salary:\r\n      \"Le revenu brut, les prestations de l'tat et les autres types de revenus annuels sont prsums crotre au taux d'inflation\",\r\n    salaryPercent:\r\n      \"La valeur aprs impt est indique en dollars d'aujourd'hui. Il augmentera au taux d'inflation\",\r\n    afterTax: \"Tous les montants sont aprs impt\",\r\n    taxExempt: (\r\n      <div>\r\n        {\" \"}\r\n        <span style={infoHighlightStyle}>\r\n          Exonration des gains en capital\r\n        </span>{\" \"}\r\n        pour les petites entreprises est prsume crotre au taux d'inflation\r\n      </div>\r\n    ),\r\n    infoINA:\r\n      \"Ce montant est bas sur la valeur actualise des manques  gagner en matire de revenus, actualise au taux de rendement aprs impt. Il est ajust, si ncessaire, pour s'assurer que des manque  gagner prcoces sont prvus\",\r\n      infoBOYEOY: \"DDA signifie Dbut d'anne et FDA, Fin d'anne\",\r\n      infoAvgGrowth:  <div>Croissance moyenne = ( <br/>Valeur FDA + Produits de la vente <br/> - Valeur en dbut d'anne <br/>)/Valeur en dbut d'anne </div>,\r\n      infoPDF:\r\n      \"Les graphiques et la feuille de calcul de l'analyse des besoins en matire d'assurance peuvent tre exports en format PDF sous l'onglet 'Graphique'\",      \r\n      probate:\r\n      appletMode===\"INA\"?\"L'homologation est base sur les actifs du client au moment du dcs et n'inclut pas les actifs communs ou les actifs qui appartiennent au conjoint ou qui peuvent tre transfrs  celui-ci\":\r\n      \"L'homologation est base sur les actifs du client au moment du dcs. Si un conjoint est ajout, donc la couverture CDD (conjointe au dernier dcs), elle comprendra galement les actifs communs ou les actifs qui appartiennent au conjoint ou qui peuvent lui tre transfrs\",  \r\n   TFSA:\r\n      \"Les cotisations et les retraits REER et CELI sont assujettis aux limites tablies par l'ARC\",  \r\n      DepositWithd:\r\n      \"Les cotisations et les retraits affectent la juste valeur marchande des actifs et les flux montaires. Les flux montaires des survivants, quelle que soit leur origine, ont un impact direct sur les 'besoins en assurance' du client\",  \r\n      inflationGrowth:\r\n      \"Le revenu brut, les prestations gouvernementales et les autres types de revenus annuels sont supposs crotre au taux d'inflation que vous avez slectionn\",  \r\n      PYE_JLTD:\r\n      \"Lorsqu'un conjoint est ajout, la responsabilit de la succession doit tre assure avec une couverture CDD. En tant que telle, elle comprend les obligations fiscales et les autres dettes des deux conjoints au dernier dcs\",  \r\n      needGrowth:\r\n      \"Les besoins en revenu sont supposs crotre au taux d'inflation que vous avez choisi\",\r\n      needGrowth_1:\r\n      \"Les besoins en revenu de la succession sont supposs crotre au taux d'inflation que vous avez choisi\",\r\n      exportINA:\r\n      \"Les donnes peuvent tre exportes vers l'analyse des besoins en assurance, qui permet de calculer les besoins en assurance pour soutenir le style de vie du ou des survivant(s)\",\r\n      taxLiab:\r\n      \"Les projections d'actifs prennent en compte le passif fiscal. Vous n'avez pas besoin d'entrer un passif spar li aux impts tel que les gains en capital\",\r\n      liabDesc:\r\n      \"You may use this to indicate a permanent/non-permanent liability ^F\",\r\n  },\r\n};\r\n\r\nexport function getGenericMessage(lang) {\r\n  return {\r\n    infoID: \"infoGenericMsg\",\r\n    infoText: \"\",\r\n    iconMode: SHOW_NONE,\r\n    popupOpenByProps: true,\r\n    popupBorderColor: POPUP_BORDER_ALERT,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT,\r\n      marginTop: DEFAULT_MARGIN_TOP + 5,\r\n      width: DEFAULT_WIDTH + 30,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconTaxExempt(lang) {\r\n  return {\r\n    infoID: \"infoExempt\",\r\n    infoText: MESSAGES[lang].taxExempt,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH + 20,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconSourcesGov(lang) {\r\n  return {\r\n    infoID: \"infogov\",\r\n    infoText: MESSAGES[lang].govB,\r\n    iconMode: SHOW_STANDARD_RED,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_ALERT,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 12,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoNoInternetAccess(lang) {\r\n  return {\r\n    infoID: \"infoNoInternetAccess\",\r\n    infoText: MESSAGES[lang].internet,\r\n    iconMode: SHOW_NONE,\r\n    popupOpenByProps: true,\r\n    popupBorderColor: POPUP_BORDER_ALERT,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT,\r\n      marginTop: DEFAULT_MARGIN_TOP + 5,\r\n      width: DEFAULT_WIDTH + 80,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconSourcesRRIF(lang) {\r\n  return {\r\n    infoID: \"RRIF\",\r\n    infoText: MESSAGES[lang].RRIF,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconClientsMember(lang) {\r\n  return {\r\n    infoID: \"infoMember\",\r\n    infoText: MESSAGES[lang].clientOnly,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 12,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIncome(lang) {\r\n  return {\r\n    infoID: \"infosalary\",\r\n    infoText: MESSAGES[lang].salary,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 12,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoSalaryPercent(lang) {\r\n  return {\r\n    infoID: \"infoSalaryPercent\",\r\n    infoText: MESSAGES[lang].salaryPercent,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconAssetsIncomeRate(lang) {\r\n  return {\r\n    infoID: \"infoIconIncomeRate\",\r\n    infoText: MESSAGES[lang].rental,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH +100,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconPYE_JLTD(lang) {\r\n  return {\r\n    infoID: \"infoIconPYE_JLTD\",\r\n    infoText: MESSAGES[lang].PYE_JLTD,\r\n    iconMode: SHOW_STANDARD_WHITE,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH +100,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\n\r\nexport function getInfoIconNeedGrowth(lang) {\r\n  return {\r\n    infoID: \"infoIconNeedGrowth\",\r\n    infoText: MESSAGES[lang].needGrowth,\r\n    iconMode: SHOW_STANDARD_WHITE,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH +100,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\n\r\nexport function getInfoINA(lang) {\r\n  return {\r\n    infoID: \"infoINA\",\r\n    infoText: MESSAGES[lang].infoINA,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH + 50,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoPDF(lang) {\r\n  return {\r\n    infoID: \"infoPDF\",\r\n    infoText: MESSAGES[lang].infoPDF,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH + 30,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\n\r\n\r\nexport function getInfoExportINA(lang) {\r\n  return {\r\n    infoID: \"exportINA\",\r\n    infoText: MESSAGES[lang].exportINA,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH + 30,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconAssetsOwner(lang) {\r\n  return {\r\n    infoID: \"infoIconOwner\",\r\n    infoText: MESSAGES[lang].rollOver,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 12,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconTFSA(lang) {\r\n  return {\r\n    infoID: \"infoIconTFSA\",\r\n    infoText: MESSAGES[lang].TFSA,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 20,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconProbate(lang) {\r\n  return {\r\n    infoID: \"infoIconProbate\",\r\n    infoText: MESSAGES[lang].probate,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 20,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH +30,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\n\r\n\r\nexport function getInfoIconLiabDesc(lang) {\r\n  return {\r\n    infoID: \"infoIconLiabDesc\",\r\n    infoText: MESSAGES[lang].liabDesc,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 20,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH +80,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconDepositWithd(lang) {\r\n  return {\r\n    infoID: \"infoIconDepositWithd\",\r\n    infoText: MESSAGES[lang].DepositWithd,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 20,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH +50,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\n\r\nexport function getInfoIconInflationGrowth(lang) {\r\n  return {\r\n    infoID: \"infoIconInflationGrowth\",\r\n    infoText: MESSAGES[lang].inflationGrowth,\r\n    iconMode: SHOW_STANDARD_WHITE,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 20,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH +50,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconAssetsIns(lang) {\r\n  return {\r\n    infoID: \"insurance\",\r\n    infoText: MESSAGES[lang].insurance,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 30,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconAssetsYr0(lang) {\r\n  return {\r\n    infoID: \"infoIconYr0\",\r\n    infoText: MESSAGES[lang].infoYr0,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 12,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconClientsElig(lang) {\r\n  return {\r\n    infoID: \"infoIconElig\",\r\n    infoText: MESSAGES[lang].infoElig,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 6,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH + 25,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconClientsEligSinglePerson(lang) {\r\n  return {\r\n    infoID: \"infoIconEligSP\",\r\n    infoText: MESSAGES[lang].infoEligSinglePerson,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 6,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH + 25,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconSpouseElig(lang) {\r\n  return {\r\n    infoID: \"infoIconSpouseElig\",\r\n    infoText: MESSAGES[lang].infoSpouseElig,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 6,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH + 25,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconClientsTax(lang) {\r\n  return {\r\n    infoID: \"infoIconAvgTax\",\r\n    infoText: MESSAGES[lang].infoAvgTax,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT - 20,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH + 70,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\n\r\n\r\nexport function getInfoIconClientsRetire(lang,flagRed) {\r\n  return {\r\n    infoID: \"infoIconRetire\",\r\n    infoText: MESSAGES[lang].infoIconRetire,\r\n    iconMode: flagRed?SHOW_STANDARD_RED:SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT - 20,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH + 45,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoTaxLiability(lang) {\r\n  return {\r\n    infoID: \"infoIconAvgTax\",\r\n    infoText: MESSAGES[lang].infoAvgTax,\r\n    iconMode: SHOW_STANDARD_LIGHT_BLUE,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT - 88,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH + 70,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconTaxLiab(lang) {\r\n  return {\r\n    infoID: \"infoIcontaxLiab\",\r\n    infoText: MESSAGES[lang].taxLiab,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT - 20,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH + 70,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\nexport function getInfoBOYEOY(lang) {\r\n  return {\r\n    infoID: \"infoBOYEOY\",\r\n    infoText: MESSAGES[lang].infoBOYEOY,\r\n    iconMode: SHOW_STANDARD_LIGHT_BLUE,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT - 70,\r\n      marginTop: DEFAULT_MARGIN_TOP+45,\r\n      width: DEFAULT_WIDTH + 35,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoAvgGrowth(lang) {\r\n  return {\r\n    infoID: \"infoAvgGrowth\",\r\n    infoText: MESSAGES[lang].infoAvgGrowth,\r\n    iconMode: SHOW_STANDARD_LIGHT_BLUE,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT - 70,\r\n      marginTop: DEFAULT_MARGIN_TOP+45,\r\n      width: DEFAULT_WIDTH + 70,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconNotes(lang) {\r\n  return {\r\n    infoID: \"InfoIconNotes\",\r\n    infoText: MESSAGES[lang].note,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 20,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH + 70,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoSave(lang) {\r\n  return {\r\n    infoID: \"InfoSave\",\r\n    infoText: MESSAGES[lang].save,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 105,\r\n      marginTop: DEFAULT_MARGIN_TOP - 172,\r\n      width: DEFAULT_WIDTH + 225,\r\n      height: DEFAULT_HEIGHT - 280,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoExcelcapFund(lang) {\r\n  return {\r\n    infoID: \"InfoExcelcapFun\",\r\n    infoText: MESSAGES[lang].gridCapFund,\r\n    iconMode: SHOW_STANDARD_LIGHT_BLUE,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT - 88,\r\n      marginTop: DEFAULT_MARGIN_TOP+35,\r\n      width: DEFAULT_WIDTH + 110,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoExcelAllAfterTax(lang) {\r\n  return {\r\n    infoID: \"InfoATax\",\r\n    infoText: MESSAGES[lang].afterTax,\r\n    iconMode: SHOW_STANDARD_LIGHT_BLUE,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 30,\r\n      marginTop: DEFAULT_MARGIN_TOP+45,\r\n      width: DEFAULT_WIDTH + 20,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n","import React from \"react\";\r\nimport { MultiButtons } from \"./MultiButtons\";\r\n\r\nimport { OUTPUT_WIDTH_PCT } from \"../definitions/generalDefinitions\";\r\n\r\nexport class AdjustibleImage extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      imageSize: this.props.size,\r\n      imageLeft: this.props.imageLeft,\r\n      allPages: this.props.allPages,\r\n      imageTop: this.props.top,\r\n      showDetails: false,\r\n      image: this.props.image,\r\n      undo: false,\r\n    };\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    this.setState({ showDetails: false });\r\n  };\r\n\r\n  updateImage = () => {\r\n    const image = {\r\n      image: this.state.image,\r\n      left: this.state.imageLeft,\r\n      size: this.state.imageSize,\r\n      allPages: this.state.allPages,\r\n      top: this.state.imageTop,\r\n      showDetails: this.state.showDetails,\r\n    };\r\n    this.props.imageAdjust(image, this.props.ID);\r\n  };\r\n\r\n  imageBigger = () => {\r\n    this.setState(\r\n      (prevState) => ({\r\n        imageSize: parseFloat(prevState.imageSize * 1.1),\r\n      }),\r\n      this.updateImage\r\n    );\r\n  };\r\n\r\n  imageSmaller = () => {\r\n    this.setState(\r\n      (prevState) => ({\r\n        imageSize: parseFloat(prevState.imageSize * 0.9),\r\n      }),\r\n      this.updateImage\r\n    );\r\n  };\r\n\r\n  imageLeft = () => {\r\n    this.setState(\r\n      (prevState) => ({\r\n        imageLeft: parseFloat(prevState.imageLeft - 2),\r\n      }),\r\n      this.updateImage\r\n    );\r\n  };\r\n\r\n  imageRight = () => {\r\n    this.setState(\r\n      (prevState) => ({\r\n        imageLeft: parseFloat(prevState.imageLeft + 2),\r\n      }),\r\n      this.updateImage\r\n    );\r\n  };\r\n\r\n  imagePosition = (e) => {\r\n    let top = e === 1 ? true : false;\r\n    this.setState(\r\n      { imageTop: top },\r\n\r\n      this.updateImage\r\n    );\r\n  };\r\n\r\n  imagePages = (e) => {\r\n    let allPages = e === 1 ? false : true;\r\n    this.setState(\r\n      { allPages: allPages },\r\n\r\n      this.updateImage\r\n    );\r\n  };\r\n\r\n  imageRemove = () => {\r\n    this.setState(\r\n      {\r\n        image: null,\r\n        showDetails: false,\r\n      },\r\n      this.updateImage\r\n    );\r\n  };\r\n\r\n  showDetails = () => {\r\n    const image = {\r\n      image: this.state.image,\r\n      left: this.state.imageLeft,\r\n      size: this.state.imageSize,\r\n      allPages: this.state.allPages,\r\n      imageTop: this.state.imageTop,\r\n      showDetails: !this.state.showDetails,\r\n    };\r\n    this.props.imageAdjust(image, this.props.ID);\r\n  };\r\n\r\n  undoImage = () => {\r\n    const image = {\r\n      image: this.state.image,\r\n      left: this.state.imageLeft,\r\n      size: this.state.imageSize,\r\n      allPages: this.state.allPages,\r\n      imageTop: this.state.imageTop,\r\n      showDetails: false,\r\n    };\r\n    \r\n    if(this.props.undoImage!==undefined)\r\n      image.image=this.props.undoImage\r\n      this.setState(\r\n      {\r\n        image: image,\r\n        undo: true\r\n      },\r\n    );\r\n\r\n  };\r\n\r\n  imageDone = () => {\r\n    this.setState({\r\n      showDetails: false,\r\n    });\r\n  };\r\n\r\n  loadImage = (e) => {\r\n    let file = e.target.files[0];\r\n\r\n    let reader = new FileReader();\r\n    reader.readAsDataURL(file);\r\n\r\n    let image;\r\n    reader.onload = () => {\r\n      image = reader.result;\r\n\r\n      const imageObj = {\r\n        image: image,\r\n        left: this.state.imageLeft,\r\n        size: this.state.imageSize,\r\n        allPages: false,\r\n        imageTop: this.state.imageTop,\r\n        showDetails: this.props.showDetails,\r\n      };\r\n      this.setState(\r\n        () => ({\r\n          image: image,\r\n          showDetails: this.props.showDetails,\r\n          allPages: this.props.allPages,\r\n          undo: false\r\n        }),\r\n        this.props.imageAdjust(imageObj, this.props.ID)\r\n      );\r\n    };\r\n  };\r\n\r\n  render() {\r\n    const styleImage = {\r\n      float: \"left\",\r\n      width: OUTPUT_WIDTH_PCT + \"%\",\r\n      display: \"table-cell\",\r\n      marginTop: \"-3px\",\r\n      marginBottom: \"15px\",\r\n      marginLeft: this.state.imageLeft + \"%\",\r\n    };\r\n    //console.log(this.state.image)\r\n    const lang = this.props.language !== undefined ? this.props.language : \"en\";\r\n    const cmdWidth =\r\n      this.props.buttonText !== undefined\r\n        ? this.props.buttonText.length * (lang === \"en\" ? 10 : 14)\r\n        : 0;\r\n\r\n    return (\r\n      <div\r\n        id=\"image\"\r\n        style={{\r\n          float: \"left\",\r\n          marginTop: \"12px\",\r\n          marginBottom: \"12px\",\r\n          width: OUTPUT_WIDTH_PCT + \"%\",\r\n        }}\r\n      >\r\n        <div style={{ paddingLeft: \"2.5%\" }}>\r\n          {this.state.showDetails === false && cmdWidth > 0 && (\r\n            <label className=\"roundedCornerCmd\">\r\n              <input\r\n                type=\"file\"\r\n                required\r\n                style={{ display: \"none\" }}\r\n                accept=\".jpg, .png, .jpeg, .gif, .bmp, .tif, .ico, .tiff, .svg,|image/*\"\r\n                onChange={this.loadImage}\r\n                onClick={(event) => {\r\n                  event.target.value = null;\r\n                }}\r\n              />\r\n              <span style={{ marginTop: \"10px\", width: \"40px\" }}>\r\n                {this.props.buttonText}\r\n              </span>\r\n              \r\n            </label>\r\n          )}\r\n          {this.props.undoImage!==undefined && <input\r\n             className=\"roundedCornerCmd\"\r\n              style={{marginLeft:\"10px\"}}\r\n              onClick={this.undoImage}\r\n              type=\"button\"\r\n              value={lang === \"en\" ? \"Undo\":\"Annuler\"}\r\n            />}\r\n        </div>\r\n        <br /> <br />\r\n        <hr className=\"ppi1\" />\r\n        {this.state.showDetails && (\r\n          <>\r\n            <div style={{ marginLeft: \"20px\" }}>\r\n              <MultiButtons\r\n                width={\"80px\"}\r\n                noButtons={2}\r\n                buttonCaption={[\r\n                  lang === \"en\" ? \"Top\" : \"Haut\",\r\n                  lang === \"en\" ? \"Bottom\" : \"Bas\",\r\n                ]}\r\n                selected={this.state.imageTop ? 1 : 2}\r\n                selectMultiButton={this.imagePosition}\r\n              />\r\n\r\n              <MultiButtons\r\n                width={\"40px\"}\r\n                noButtons={1}\r\n                buttonCaption={[\"+\"]}\r\n                selected={1}\r\n                selectMultiButton={this.imageBigger}\r\n              />\r\n              <MultiButtons\r\n                width={\"40px\"}\r\n                noButtons={1}\r\n                buttonCaption={[\"-\"]}\r\n                selected={1}\r\n                selectMultiButton={this.imageSmaller}\r\n              />\r\n\r\n              <MultiButtons\r\n                width={\"50px\"}\r\n                noButtons={1}\r\n                buttonCaption={[<text>&#8592;</text>]}\r\n                selected={1}\r\n                selectMultiButton={this.imageLeft}\r\n              />\r\n              <MultiButtons\r\n                width={\"50px\"}\r\n                noButtons={1}\r\n                buttonCaption={[<text>&#8594;</text>]}\r\n                selected={1}\r\n                selectMultiButton={this.imageRight}\r\n              />\r\n\r\n              <MultiButtons\r\n                width={lang === \"en\" ?\"80px\":\"120px\"}\r\n                noButtons={2}\r\n                buttonCaption={[\r\n                  lang === \"en\" ? \"1st page\" : \"1re page\",\r\n                  lang === \"en\" ? \"All pages\" : \"toutes les pages\",\r\n                ]}\r\n                selected={this.state.allPages ? 2 : 1}\r\n                selectMultiButton={this.imagePages}\r\n              />\r\n              <MultiButtons\r\n                width={\"40px\"}\r\n                noButtons={1}\r\n                buttonCaption={[\"x\"]}\r\n                selected={1}\r\n                selectMultiButton={this.imageRemove}\r\n              />\r\n              <MultiButtons\r\n                style={{ marginLeft: \"20px\" }}\r\n                width={\"80px\"}\r\n                noButtons={1}\r\n                buttonCaption={[lang === \"en\" ? \"done\" : \"termin\"]}\r\n                selected={1}\r\n                selectMultiButton={this.imageDone}\r\n              />\r\n            </div>\r\n          </>\r\n        )}\r\n        <p />\r\n        <div style={styleImage}>\r\n          {this.state.image === null ? (\r\n            \"\"\r\n          ) : (\r\n            <img\r\n              className=\"ppi1\"\r\n              id={this.props.ID}\r\n              src={this.state.undo?this.state.image.image: this.state.image}\r\n              width={this.state.imageSize + \"%\"}\r\n            />\r\n          )}\r\n        </div>\r\n        <br />\r\n        <br />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import { TITLES, APPLET_INA, DEFAULT_QUOTE  } from \"../definitions/generalDefinitions\";\r\nimport React, { Component } from \"react\";\r\nimport { Info } from \"./Info\";\r\n\r\n//import {convertToINA} from '../utils/helper'\r\nimport { versionDetails, isVersion2019, isMobileDevice } from \"../utils/helper\";\r\nimport { version } from \"../../package.json\";\r\n\r\nexport function hideRecover() {\r\n  document.getElementById(\"last\").style.display = \"none\";\r\n}\r\n\r\nexport class Header extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.last = React.createRef();\r\n    this.default = React.createRef();\r\n//    this.defaultButton=this.defaultCommand(this.props.language); \r\nconst language=this.props.language\r\n    const storageName=DEFAULT_QUOTE\r\n    const set= TITLES[language ].default \r\n    const clear=TITLES[language ].defaultClear \r\n    this.defaultButton= localStorage.getItem(storageName) === null?set:clear\r\n  }\r\n\r\n  hideRecover = () => {\r\n    const ref = this.last.current;\r\n    //const last = document.getElementById(\"last\");\r\n    if (ref !== undefined) ref.style.display = \"none\";\r\n  };\r\n\r\n  saveDefault = () => {\r\n    //const def = document.getElementById(\"default\");\r\n\r\n    const ref = this.default.current;\r\n    const val = ref.value;\r\n    //console.log(ref)\r\n    if (ref !== undefined) {\r\n     \r\n      if (ref.value===TITLES[this.props.language ].default)\r\n      {\r\n        this.props.saveAsDefaultCase(false);\r\n    \r\n    //  ref.style.backgroundColor = \"lightgrey\";\r\n     // ref.style.color = \"white\";\r\n      ref.value = TITLES[this.props.language ].defaultClear\r\n   //  setTimeout(() => {\r\n    //    ref.style.backgroundColor = \"white\";\r\n        //ref.style.color = \"#455560\";\r\n       // ref.value = val;\r\n    //  }, 1000);\r\n\r\n    }\r\n    else{\r\n      this.props.saveAsDefaultCase(true);\r\n    \r\n      ref.value = TITLES[this.props.language ].default\r\n    } \r\n    }\r\n  };\r\n\r\n  defaultCommand=(language)=>{\r\n    const storageName=DEFAULT_QUOTE;\r\n    const set= TITLES[language ].default \r\n    const clear=TITLES[language ].defaultClear \r\n    return localStorage.getItem(storageName) === null?set:clear\r\n  }\r\n\r\n  changeLanguage=()=>{\r\n    this.defaultButton=this.defaultCommand(this.props.language===\"en\"?\"en\":\"fr\")\r\n    //this.props.changeLang()\r\n  }\r\n\r\n  render() {\r\n    const vd = versionDetails();\r\n    const emailAllowed = vd.allowEmail;\r\n    let style1 =\r\n      this.props.language === \"en\" ? { right: \"45px\" } : { right: \"55px\" };\r\n    let style2 =\r\n      this.props.language === \"en\" ? { right: \"90px\" } : { right: \"152px\" };\r\n    let style3 =\r\n      this.props.language === \"en\"\r\n        ? { right: emailAllowed ? \"145px\" : \"97px\" }\r\n        : { right: emailAllowed ? \"210px\" : \"158px\" };\r\n    let style4 =\r\n      this.props.language === \"en\"\r\n        ? { right: emailAllowed ? \"255px\" : \"197px\" }\r\n        : { right: emailAllowed ? \"320px\" : \"256px\" };\r\n    //if(isVersion2019())\r\n    //\tstyle3= this.props.language===\"en\" ? {right: '90px'}:  {right: '152px'};\r\n    var iOS = isMobileDevice(); // /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\r\n    const class1 = iOS === true ? \"headerBarIOS\" : \"headerBar\";\r\n    const styleTitle =\r\n      iOS === true\r\n        ? { color: \"#282e31\", marginBottom: \"8px\", marginTop: \"-10px\" }\r\n        : { color: \"#282e31\", marginBottom: \"8px\" };\r\n    const styleVersion =\r\n      iOS === true\r\n        ? { fontSize: \"10px\" }\r\n        : { display: \"inline-block\", fontSize: \"10px\", paddingLeft: \"4px\" };\r\n    return (\r\n      <div className={class1}>\r\n        <input\r\n          className=\"language\"\r\n          style={{ marginTop: \"0px\", right: \"0px\" }}\r\n          onClick={this.changeLanguage(), this.props.changeLang} /* this.changeLanguage()} */ \r\n          type=\"button\"\r\n          value={this.props.language === \"en\" ? \"Franais\" : \"English\"}\r\n        />\r\n        <span>\r\n          <div style={{ maxWidth: \"70%\" }}>\r\n            <div style={{ display: \"inline-block\" }}>\r\n              <h2 className=\"headerTitle\" /* style={styleTitle} */>{this.props.title}</h2>\r\n            </div>\r\n            <div style={styleVersion}>({version})</div>\r\n          </div>\r\n        </span>\r\n        <span className=\"topCommandLine\">\r\n          <input\r\n            className=\"titleButtons\"\r\n            onClick={this.props.saveToFile}\r\n           // style={style1}\r\n            type=\"button\"\r\n            value={this.props.language === \"en\" ? \"Save\" : \"Enregistrer\"}\r\n          />\r\n          <label className=\"titleButtons\" style={{ right: \"0px\" }}>\r\n            <input\r\n              type=\"file\"\r\n              required\r\n              style={{ display: \"none\" }}\r\n              accept=\".ppi_INA_TKD, .ppi_EP_TKD, .json\"\r\n              onChange={this.props.loadFromFile}\r\n              onClick={(event) => {\r\n                event.target.value = null;\r\n              }}\r\n            />\r\n            <span className=\"titleLoad\">\r\n              {this.props.language === \"en\" ? \"Load\" : \"Ouvrir\"}\r\n            </span>\r\n          </label>\r\n          {emailAllowed && (\r\n            <input\r\n              className=\"titleButtons\"\r\n            //  style={style2}\r\n              onClick={this.props.EmailINA}\r\n              type=\"button\"\r\n              value={this.props.language === \"en\" ? \"e-mail\" : \"e-mail\"}\r\n              id=\"email\"\r\n            />\r\n          )}\r\n          <input\r\n            className=\"titleButtons\"\r\n          //  style={style3}\r\n            onClick={(event) => {\r\n              this.saveDefault();\r\n            }}\r\n            type=\"button\"\r\n            ref={this.default}\r\n            value={\r\n              this.defaultButton\r\n            }\r\n            id=\"default\"\r\n          />\r\n          <input\r\n            className=\"titleButtons\"\r\n          //  style={style4}\r\n            onClick={(event) => {\r\n              this.props.loadStorage();\r\n              hideRecover();\r\n            }}\r\n            type=\"button\"\r\n            ref={this.last}\r\n            value={this.props.language === \"en\" ? \"Recover\" : \"Rcuprer\"}\r\n            id=\"last\"\r\n          />\r\n\r\n          {/*<input className=\"titleButtons\" onClick={this.EmailINA} style={{right: '130px'}} type=\"button\" value={this.props.language=== \"en\"?\"Email\":\"Email\"} />*/}\r\n        </span>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","module.exports = __webpack_public_path__ + \"static/media/INA.07a8e16f.png\";","module.exports = __webpack_public_path__ + \"static/media/estate.protection.applet.cover.graphic.d3f3dbc3.png\";","import React, { Component } from \"react\";\r\nimport { cleanFormat } from \"../utils/helper\";\r\nimport { Info } from \"./Info\";\r\n\r\nexport class InputField extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      inputValue: this.toFormat(this.props.inputValue),\r\n      isEditing: false,\r\n    };\r\n    \r\n    /* this.infoIcon= this.props.infoIcon === undefined? \r\n\t\t{\r\n\t\t\tmsg: \"\",\r\n\t\t\ticonAlert: false,\r\n      checkInfo: false,\r\n      popupRight:false,\r\n\t\t\tidM: 0\r\n\t\t} : {\r\n\t\t\tmsg: this.props.infoIcon.infoText,\r\n\t\t\ticonAlert: this.props.infoIcon.infoAlert,\r\n      checkInfo: this.props.infoIcon.showInfoIcon,\r\n      popupRight: this.props.infoIcon.popupRight,\r\n\t\t\tidM: this.props.infoIcon.infoID\r\n\t\t} */\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (nextProps.inputValue !== this.props.inputValue) {\r\n      this.setState({ inputValue: this.toFormat(nextProps.inputValue) });\r\n    }\r\n  }\r\n\r\n  updateInputValue(evt) {\r\n    //  const input = this.getInut(evt);\r\n    this.setState({ inputValue: evt.target.value }); // input });\r\n  }\r\n\r\n  getInut = (evt) => {\r\n    var input;\r\n    let chkNum;\r\n    const value = evt.target.value;\r\n    \r\n    /* if (\r\n      this.props.language === \"fr\" &&\r\n      this.props.format === 3 \r\n    )\r\n      chkNum = cleanFormat(value, true, lang);\r\n    else */ \r\n    chkNum = cleanFormat(value, this.props.language);\r\n\r\n    if (\r\n      (isNaN(chkNum.replace(\",\", \".\")) || value === \"\") &&\r\n      !(\r\n        value.toString()[value.toString().length - 1] === \".\" ||\r\n        value.toString()[value.toString().length - 1] === \",\"\r\n      )\r\n    )\r\n      input = value.substring(0, value.length - 1);\r\n    else input = chkNum;\r\n\r\n    const max =\r\n      this.props.format === 2\r\n        ? this.props.maxValue === undefined\r\n          ? 1000000000\r\n          : this.props.maxValue\r\n        : this.props.maxValue === undefined\r\n        ? 100\r\n        : this.props.maxValue;\r\n\r\n    if (input > max) input = max;\r\n    const min = this.props.minValue === undefined ? 0 : this.props.minValue;\r\n\r\n    if (input < min) input = min;\r\n  \r\n    return input;\r\n  };\r\n\r\n  afterStateUpdate() {\r\n    //this.props.handleUpdateInput(this.props.inputName, this.state.inputValue);\r\n    this.props.handleUpdateInput(this.props.id, this.state.inputValue);\r\n  }\r\n\r\n  handleFocus = (event) => {\r\n    if (navigator.userAgent.match(/Edge\\/(13|14|15|16|17)/)) {\r\n      //\treturn setTimeout( event.target.select.bind( event.target ), 1)\r\n    } else event.target.select();\r\n  };\r\n\r\n  selectField = (event) => {\r\n    if (navigator.userAgent.match(/Edge\\/(13|14|15|16|17)/)) {\r\n      event.target.setSelectionRange(0, event.target.value.length);\r\n    }\r\n  };\r\n  onMouseUpSelect = (event) => {\r\n    if (/iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream) {\r\n      event.target.select();\r\n    }\r\n  };\r\n\r\n  handleFocusIOS = (event) => {\r\n    event.target.value = cleanFormat(event.target.value, this.props.language);\r\n  };\r\n\r\n  toFormat(number) {\r\n    let formatter;\r\n    const lang = this.props.language;\r\n    /* if ((lang === \"fr\" || global.langFr) && this.props.format === 3)\r\n      number = cleanFormat(number, true); \r\n    else */\r\n    number = cleanFormat(number, lang);\r\n\r\n    if (isNaN(number) || number === \"\") number = 0;\r\n    if (this.props.format === 2) {\r\n      formatter =\r\n        (lang === \"fr\" ? \"\" : \"$\") +\r\n        new Intl.NumberFormat(lang).format(parseInt(number));\r\n    } else if (this.props.format === 3) {\r\n      if (lang === \"fr\") {\r\n        formatter =\r\n          number.toString()[number.toString().length - 1] === \".\"\r\n            ? parseFloat(number) + \",\"\r\n            : parseFloat(number);\r\n        formatter = formatter.toString().replace(\".\", \",\");\r\n      } else\r\n        formatter =\r\n          number.toString()[number.toString().length - 1] === \".\"\r\n            ? parseFloat(number) + \".\"\r\n            : parseFloat(number);\r\n    } else formatter = parseInt(number);\r\n    return formatter;\r\n  }\r\n\r\n  toggleEditing = (e) => {\r\n    /* e.target.value=this.toFormat(e.target.value);\t\t\r\n\t\t\t\tif(this.props.format === 3)e.target.value+=\"%\"; */\r\n    let input = this.getInut(e);\r\n    input = this.toFormat(input);\r\n    this.setState({ inputValue: input, isEditing: !this.state.isEditing }, () =>\r\n      this.afterStateUpdate()\r\n    );\r\n    //\tthis.props.handleUpdateInput(this.props.id, this.state.inputValue);\r\n  };\r\n\r\n  getValue = (value) => {\r\n    const dec = value.toString().indexOf(\".\");\r\n    const first = value.toString()[0];\r\n\r\n    if (first === 0 && dec === -1)\r\n      return (\r\n        parseFloat(100 * value.toString().slice(1, value.toString().length)) /\r\n        100\r\n      );\r\n    else return parseFloat(100 * value) / 100;\r\n  };\r\n\r\n  selectText = () => {\r\n    var s = this.refs.InputTxt.value;\r\n    if (s.length) {\r\n      window.setTimeout(function () {\r\n        this.refs.InputTxt.setSelectionRange(s.length - 1, s.length);\r\n      }, 0);\r\n    }\r\n  };\r\n\r\n  getRidOfZerosAfterDecimal = (displayValue) => {\r\n    const decimalPos = displayValue.indexOf(\".\");\r\n    if (decimalPos >= 0) {\r\n      if (displayValue.length >= decimalPos + 3)\r\n        // 2 decimals max\r\n        displayValue = displayValue.substring(0, decimalPos + 3);\r\n      // get rid of zeros\r\n      while (\r\n        displayValue.slice(-1) === \"0\" &&\r\n        displayValue.length > decimalPos + 3\r\n      ) {\r\n        displayValue = displayValue.substring(0, displayValue.length - 1);\r\n      }\r\n    }\r\n\r\n    return displayValue;\r\n  };\r\n\r\n  render() {\r\n    let displayValue =\r\n      this.state.inputValue !== undefined\r\n        ? this.state.inputValue.toString()\r\n        : \"\";\r\n    if (displayValue.indexOf(\".\") >= 0)\r\n      displayValue = this.getRidOfZerosAfterDecimal(displayValue);\r\n    //  displayValue=parseFloat(displayValue).toFixed(2);\r\n\r\n    const title = this.props.inputName; //  this.props.Count === 1 ? this.state.inputName : this.state.inputName;\r\n    const disable = this.props.readOnly ? true : false;\r\n    let styleClass = disable ? \"inputField inputFieldDisabled\" : \"inputField\";\r\n    styleClass += this.props.language === \"fr\" ? \" inputFieldFrench\" : \"\";\r\n    const styleClass2 =\r\n      styleClass +\r\n      (this.props.format === 3 ||\r\n      (this.props.format === 2 && this.props.language === \"fr\")\r\n        ? \" percentField\"\r\n        : \"\");\r\n\r\n    let divStyleClass = \"dropDown inputDiv\";\r\n    divStyleClass += this.props.language === \"fr\" ? \" inputDivFrench\" : \"\";\r\n\r\n    let inputColorStyle =\r\n      this.props.colorDiv === undefined\r\n        ? {}\r\n        : { border: \"1px solid \" + this.props.colorDiv };\r\n\r\n    //iOS=false;\r\n    var iOS2 = false;\r\n\r\n    if (\r\n      this.props.info !== undefined &&\r\n      (this.props.showInfo === true || this.props.showInfo === undefined)\r\n    ) {\r\n    }\r\n    //\tlet st1=this.props.format===3?\"styleClass st1percentField\":\"\";\r\n    let perc = this.props.format === 3;\r\n    const style = (this.props.titleColour===undefined || this.props.titleColour===\"\")?{}:{color:this.props.titleColour}\r\n\r\n    if (this.props.language === \"fr\" && this.props.format === 2) {\r\n      return (\r\n        <div\r\n          className={divStyleClass}\r\n          french={this.props.language === \"en\" ? \"true\" : \"false\"}\r\n        >\r\n          <div className=\"controlTitle\" style={style}>\r\n            {title}\r\n            {/*  {checkInfo === true ? (\r\n              <Info id={idM} msg={msg} infoPosition={this.props.infoPosition} />\r\n            ) : (\r\n              \"\"\r\n            )} */}\r\n            {this.props.infoIcon !== undefined ? (\r\n              <Info infoIcon={this.props.infoIcon} /> //id={this.props.infoIcon.infoID} msg={this.props.infoIcon.infoText}  popupRight={this.props.infoIcon.popupRight}  iconName={this.props.infoIcon.infoAlert? \"infoRed.png\":\"info.png\"} />\r\n            ) : (\r\n              \"\"\r\n            )}\r\n          </div>\r\n          {/*{iOS ? <input type=\"number\" inputmode=\"numeric\" pattern=\"\\d*\"  min=\"0\" max={max} step={step} className={styleClass} isDisabled={disable} onFocus={this.handleFocus} onClick={this.select} value={this.getValue(displayValue)} onChange={evt => this.updateInputValue(evt)} onBlur={this.toggleEditing.bind(this)} />*/}\r\n          {iOS2 ? (\r\n            \"\" //<input type=\"text\" inputmode=\"decimal\" min=\"0.0\" max={max} step={step} className={styleClass} isDisabled={disable} onFocus={this.handleFocus} onClick={this.select} value={displayValue} onChange={evt => this.updateInputValue(evt)}  />\r\n          ) : (\r\n            <div className={styleClass}>\r\n              <span>\r\n                <input\r\n                  type=\"text\"\r\n                  className={styleClass2}\r\n                  style={{ paddingTop: \"0px\", width: \"86%\" }}\r\n                  inputMode=\"decimal\"\r\n                  disabled={disable}\r\n                  value={displayValue}\r\n                  autoFocus\r\n                  onFocus={(e) => this.handleFocus(e)}\r\n                  onMouseUp={this.onMouseUpSelect}\r\n                  onClick={this.selectField}\r\n                  onChange={(evt) => this.updateInputValue(evt)}\r\n                  onBlur={this.toggleEditing.bind(this)}\r\n                />\r\n                <label\r\n                  style={{\r\n                    display: \"inline-block\",\r\n                    float: \"left\",\r\n                    width: \"3%\",\r\n                  }}\r\n                >\r\n                  $\r\n                </label>\r\n              </span>\r\n            </div>\r\n          )}\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div\r\n          className={divStyleClass}\r\n          french={this.props.language === \"en\" ? \"true\" : \"false\"}\r\n        >\r\n         <div className=\"controlTitle\" style={style}>\r\n            {title}\r\n            {/*  {checkInfo === true && (\r\n              <Info id={idM} msg={msg} infoPosition={this.props.infoPosition}/>\r\n            )} */}\r\n            {this.props.infoIcon !== undefined ? (\r\n              <Info infoIcon={this.props.infoIcon} /> // id={this.props.infoIcon.infoID} msg={this.props.infoIcon.infoText} popupRight={this.props.infoIcon.popupRight} iconName={this.props.infoIcon.infoAlert? \"infoRed.png\":\"info.png\"} />\r\n            ) : (\r\n              \"\"\r\n            )}\r\n          </div>\r\n          {/*{iOS ? <input type=\"number\" inputmode=\"numeric\" pattern=\"\\d*\"  min=\"0\" max={max} step={step} className={styleClass} isDisabled={disable} onFocus={this.handleFocus} onClick={this.select} value={this.getValue(displayValue)} onChange={evt => this.updateInputValue(evt)} onBlur={this.toggleEditing.bind(this)} />*/}\r\n          {iOS2 ? (\r\n            \"\" //<input type=\"text\" inputmode=\"decimal\" min=\"0.0\" max={max} step={step} className={styleClass} isDisabled={disable} onFocus={this.handleFocus} onClick={this.select} value={displayValue} onChange={evt => this.updateInputValue(evt)}  />\r\n          ) : (\r\n            <div>\r\n              {perc === false ? (\r\n                <div>\r\n                  <input\r\n                    style={inputColorStyle}\r\n                    type=\"text\"\r\n                    key=\"if\"\r\n                    className={styleClass}\r\n                    inputMode=\"decimal\"\r\n                    disabled={disable}\r\n                    value={displayValue}\r\n                    onFocus={(e) => this.handleFocus(e)}\r\n                    onClick={this.selectField}\r\n                    onMouseUp={this.onMouseUpSelect}\r\n                    onChange={(evt) => this.updateInputValue(evt)}\r\n                    onBlur={this.toggleEditing.bind(this)}\r\n                  />\r\n                </div>\r\n              ) : (\r\n                <div className={styleClass}>\r\n                  {/* <div className=\"percentDiv\"> */}\r\n                  <span>\r\n                    <input\r\n                      type=\"text\"\r\n                      key=\"if1\"\r\n                      className={styleClass2}\r\n                      style={{ paddingTop: \"0px\", width: \"86%\" }}\r\n                      inputMode=\"decimal\"\r\n                      disabled={disable}\r\n                      value={displayValue}\r\n                      onFocus={(e) => this.handleFocus(e)}\r\n                      onMouseUp={this.onMouseUpSelect}\r\n                      onClick={this.selectField}\r\n                      onChange={(evt) => this.updateInputValue(evt)}\r\n                      onBlur={this.toggleEditing.bind(this)}\r\n                    />\r\n                    <label\r\n                      style={{\r\n                        display: \"inline-block\",\r\n                        float: \"left\",\r\n                        width: \"3%\",\r\n                      }}\r\n                    >\r\n                      %\r\n                    </label>\r\n                  </span>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n}\r\n","import { version } from \"../../package.json\";\r\nimport {\r\n  GROWTHDIR,\r\n  MEMBER,\r\n  LIABILITIES,\r\n  APPLET_EP,\r\n  APPLET_INA,\r\n} from \"../definitions/generalDefinitions\";\r\nimport XLSX from \"xlsx\";\r\nimport React from \"react\";\r\nimport { fetchMCCData, fetchAssetProjection2 } from \"../utils/FetchAPIs\";\r\nimport { readMCCData } from \"../data/dataExchangeMCC\";\r\nimport {\r\n  ASSET_API_OUTPUT_TaxPayable,\r\n  QUOTE_CLIENT,QUOTE_SPOUSE\r\n} from \"../definitions/generalDefinitions\";\r\nimport { OUTPUTTEXT } from \"../definitions/outputDefinitions\";\r\nimport { OUTPUTTEXTEP } from \"../definitions/outputDefinitionsEP\";\r\nimport {\r\n  DISPLAY_RETIREMENT,\r\n  DISPLAY_LIFEEXP,\r\n  DISPLAY_ENDAGE,\r\n  DISPLAY_LIFEEXP_PLUS_3,\r\n  DISPLAY_ANALYSIS,\r\n  OUTPUT_WIDTH_PCT,\r\n  IMAGE_LOGO_OTHERPAGES,\r\n  IMAGE_LOGO,\r\n  IMAGE_APPLET_INA,\r\n  IMAGE_APPLET_EP,\r\n  TITLES\r\n} from \"../definitions/generalDefinitions\";\r\nimport { AdjustibleImage } from \"../components/AdjustibleImage\";\r\nimport { MAX_LOGO_HEIGHT, PAGE_HEIGHT } from \"../components/PDF\";\r\nimport { getMessages } from \"validatorjs\";\r\n\r\nglobal.langFr =\r\n  (\r\n    (navigator.languages && navigator.languages[0]) ||\r\n    navigator.language ||\r\n    navigator.userLanguage\r\n  )\r\n    .toString()\r\n    .indexOf(\"fr\") >= 0;\r\n\r\nexport function cleanFormat(value, lang) {\r\n  if (value !== null) {\r\n    if (value !== undefined) {\r\n      if(lang===undefined) lang=\"en\"\r\n      if (!EngToFrConversion(value) && lang===\"fr\")\r\n        return value\r\n          .toString()\r\n          .replace(\",\", \".\")\r\n          .replace(\"$\", \"\")\r\n          .replace(\"%\", \"\")\r\n          .replace(/ /g, \"\")\r\n          .replace(\" \", \"\")\r\n          .replace(\r\n            /[\\u00A0\\u1680\\u180e\\u2000-\\u2009\\u200a\\u200b\\u202f\\u205f\\u3000]/g,\r\n            \"\"\r\n          );\r\n      else\r\n        return value\r\n          .toString()\r\n          .replace(/,/g, \"\")\r\n          .replace(\"$\", \"\")\r\n          .replace(\"%\", \"\")\r\n          .replace(/ /g, \"\")\r\n          .replace(\" \", \"\")\r\n          .replace(\r\n            /[\\u00A0\\u1680\\u180e\\u2000-\\u2009\\u200a\\u200b\\u202f\\u205f\\u3000]/g,\r\n            \"\"\r\n          );\r\n    }\r\n  }\r\n}\r\n\r\nfunction EngToFrConversion(amt){\r\n  let nSeperator=amt.toString().search(\",\");\r\n  if( nSeperator <0)\r\n    return false\r\n  else\r\n  {\r\n    let s1= amt;   \r\n    while (nSeperator >=0)\r\n    {\r\n      s1= s1.toString().substring(nSeperator+1, parseInt(s1.length));\r\n      nSeperator=s1.toString().search(\",\");\r\n      \r\n    }\r\n    if (s1.length>=3) \r\n      return true\r\n    else\r\n      return false\r\n  \r\n}\r\n}\r\n\r\nexport function isMobileDevice() {\r\n  return (\r\n    typeof window.orientation !== \"undefined\" ||\r\n    navigator.userAgent.indexOf(\"IEMobile\") !== -1\r\n  );\r\n}\r\n\r\nexport function numFormat(v, bInput, mode, seperator,decimalChar) {\r\n   var v1;\r\n  var v2;\r\n  var v3;\r\n\r\n  \r\n  var formatted;\r\n  const lang=decimalChar===\".\" || decimalChar=== undefined ? \"en\":\"fr\";\r\n  //const seperator = this.props.language === \"en\" ? \",\" : \" \";\r\n  //console.log(v);\r\n  if (typeof v !== \"undefined\") {\r\n    //console.log(v);\r\n    v = cleanFormat(v, lang);\r\n    if (mode !== 3) v = parseInt(v).toFixed(0);\r\n\r\n    if (mode === 3 && bInput) {\r\n      if (v[v.length - 1] === \".\") v = v.substring(0, v.length - 1);\r\n      else {\r\n        if (v.length > 1) v = (v * 10).toFixed(2);\r\n        if (v > 100) v = (v / 10).toFixed(2);\r\n      }\r\n    }\r\n\r\n    //console.log(v);\r\n    v1 = get1000(v);\r\n    v2 = get1000((v - v1) / 1000);\r\n    v3 = parseInt((v - v1 - 1000 * v2) / 1000000);\r\n\r\n    if (v2 > 0 || v3 > 0) {\r\n      v = v2 + seperator + (v1 > 99 ? v1 : v1 > 10 ? \"0\" + v1 : \"00\" + v1);\r\n      if (v3 > 0)\r\n        v =\r\n          v3 +\r\n          seperator +\r\n          (v2 > 99 ? v2 : v2 > 10 ? \"0\" + v2 : \"00\" + v2) +\r\n          seperator +\r\n          (v1 > 99 ? v1 : v1 > 10 ? \"0\" + v1 : \"00\" + v1);\r\n    }\r\n    \r\n    if (mode === 3) {\r\n      if (\r\n        /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\r\n          navigator.userAgent\r\n        )\r\n      )\r\n        formatted = parseFloat(Math.round(v * 100) / 100).toFixed(2);\r\n      else {\r\n        formatted = parseFloat(\r\n          Math.round(100 * v) / 100 / (v.length === 1 && bInput ? 100 : 1)\r\n        ); // + '%';\r\n        formatted = formatted > 100 ? 100 : formatted;\r\n        formatted = formatted.toFixed(2) + \"%\";\r\n        if(decimalChar!==undefined){\r\n          if(formatted.includes(\".\"))formatted=formatted.replace(\".\",decimalChar)\r\n        }\r\n      }\r\n    } else if (mode === 4) {\r\n      formatted =\r\n        25 * parseInt(parseFloat(Math.round(v * 100) / 100).toFixed(0) / 25);\r\n      if (formatted < 100) formatted = 100;\r\n      if (formatted > 400) formatted = 400;\r\n      if (\r\n        /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\r\n          navigator.userAgent\r\n        )\r\n      )\r\n        formatted = formatted;\r\n      else formatted = formatted + \"%\";\r\n    } else if (mode === 2) formatted = \"$\" + v;\r\n    else formatted = v;\r\n  }\r\n  if (isNaN(cleanFormat(formatted, lang))) formatted = 0;\r\n  return formatted;\r\n}\r\n\r\n//valueChanged = (num, mode) => {\r\n//\tlet seperator = this.props.language === \"en\" ? \",\" : \" \";\r\n//\tvar v = num.value.replace('$', '').replace('%', '').replace(seperator, '');\r\n//\tnum.value = this.numFormat(v);\r\n//}\r\n\r\n\r\nfunction get1000(num) {\r\n  return parseFloat(num) - 1000 * parseInt(num / 1000);\r\n}\r\n\r\n\r\nexport function formatMoney(amount, decimalCount, decimal, thousands) {\r\n  try {\r\n    const lang=decimal===\".\" || decimal=== undefined ? \"en\":\"fr\";\r\n\r\n    cleanFormat(amount, lang);\r\n    decimalCount = Math.abs(decimalCount);\r\n    decimalCount = isNaN(decimalCount) ? 2 : decimalCount;\r\n\r\n    const negativeSign = amount < 0 ? \"-\" : \"\";\r\n\r\n    let i = parseFloat(\r\n      (amount = Math.abs(Number(amount) || 0).toFixed(decimalCount))\r\n    ).toString();\r\n\r\n    let j = i.length > 3 ? i.length % 3 : 0;\r\n\r\n    return (\r\n      negativeSign +\r\n      (j ? i.substr(0, j) + thousands : \"\") +\r\n      i.substr(j).replace(/(\\d{3})(?=\\d)/g, \"$1\" + thousands) +\r\n      (decimalCount\r\n        ? decimal +\r\n          Math.abs(amount - i)\r\n            .toFixed(decimalCount)\r\n            .slice(2)\r\n        : \"\")\r\n    );\r\n  } catch (e) {\r\n    //\tconsole.log(e);\r\n  }\r\n}\r\n\r\nexport function formatMoney2(amount, decimalCount, lang, dollarSign) {\r\n  const decimalChar = lang === \"en\" ? \".\" : \",\";\r\n  const thousands = lang === \"en\" ? \",\" : \" \";\r\n // const formatFr = lang === \"fr\" ? true : false;\r\n\r\n  try {\r\n    cleanFormat(amount, lang);\r\n    decimalCount = Math.abs(decimalCount);\r\n    decimalCount = isNaN(decimalCount) ? 2 : decimalCount;\r\n\r\n    const negativeSign = amount < 0 ? \"-\" : \"\";\r\n\r\n    let i = parseFloat(\r\n      (amount = Math.abs(Number(amount) || 0).toFixed(decimalCount))\r\n    ).toString();\r\n\r\n    let j = i.length > 3 ? i.length % 3 : 0;\r\n\r\n    const returnValue = (\r\n      negativeSign +\r\n      (lang === \"en\" && dollarSign ? \"$\" : \"\") +\r\n      (j ? i.substr(0, j) + thousands : \"\") +\r\n      i.substr(j).replace(/(\\d{3})(?=\\d)/g, \"$1\" + thousands) +\r\n      (decimalCount\r\n        ? decimalChar +\r\n          Math.abs(amount - i)\r\n            .toFixed(decimalCount)\r\n            .slice(2)\r\n        : \"\") +\r\n      (lang === \"fr\" && dollarSign ? \" $\" : \"\")\r\n    ).toString();\r\n\r\n    return returnValue;\r\n  } catch (e) {\r\n    //\tconsole.log(e);\r\n  }\r\n}\r\n\r\nexport function arrayFormatMoney(array, language, noOfDecimals) {\r\n  let arrayFormatted = [];\r\n\r\n  for (let i = 0; i < array.length; i++) {\r\n    arrayFormatted[i] = formatMoney2(\r\n      array[i],\r\n      noOfDecimals,\r\n      language,\r\n      false\r\n      /* decimalChar,\r\n      thousands */\r\n    );\r\n  }\r\n  // console.log(arrayFormatted,array)\r\n  return arrayFormatted;\r\n}\r\n\r\nexport function clearListCookies() {\r\n  // console.log(document.cookie);\r\n  var cookies = document.cookie.split(\";\");\r\n  for (var i = 0; i < cookies.length; i++) {\r\n    var spcook = cookies[i].split(\"=\");\r\n    deleteCookie(spcook[0]);\r\n  }\r\n  function deleteCookie(cookiename) {\r\n    var d = new Date();\r\n    d.setDate(d.getDate() - 1);\r\n    var expires = \";expires=\" + d;\r\n    var name = cookiename;\r\n    var value = \"\";\r\n    document.cookie = name + \"=\" + value + \"; \" + expires + \"; path=/acc/html\";\r\n  }\r\n  localStorage.clear();\r\n  //window .location = \"\"; // TO REFRESH THE PAGE\r\n}\r\n\r\nexport function isVersion2019() {\r\n  const ver = version;\r\n  let verNo = 0;\r\n  let inS = ver.indexOf(\".\");\r\n  verNo = ver.substring(0, inS);\r\n  let verS = num(Number(verNo));\r\n  let inS2 = ver.indexOf(\".\", inS + 1);\r\n  verNo = ver.substring(inS + 1, inS2);\r\n  verS += num(Number(verNo));\r\n  verNo = ver.substring(inS2 + 1, ver.length);\r\n  verS += num(Number(verNo));\r\n  \r\n  return Number(verS) <= 10002;\r\n}\r\n\r\nexport function versionDetails() {\r\n  const ver = version;\r\n  let verNo = 0;\r\n  let inS = ver.indexOf(\".\");\r\n  verNo = ver.substring(0, inS);\r\n  let verS = num(Number(verNo));\r\n  let inS2 = ver.indexOf(\".\", inS + 1);\r\n  verNo = ver.substring(inS + 1, inS2);\r\n  verS += num(Number(verNo));\r\n  verNo = ver.substring(inS2 + 1, ver.length);\r\n  verS += num(Number(verNo));\r\n  let versionNumeric = Number(verS);\r\n\r\n  // 1.0.4\r\n  let allowEmail = false;\r\n  let saveEncrypt = versionNumeric >= 10003 ? true : false;\r\n  let allowAnalysis = versionNumeric > 10004 ? true : false;\r\n  // 1.0.5\r\n  allowEmail = true;\r\n  saveEncrypt = true;\r\n  allowAnalysis = true;\r\n  let verDetails = {\r\n    version: ver,\r\n    versionNumeric: versionNumeric,\r\n    allowEmail: allowEmail,\r\n    saveEncrypt: saveEncrypt,\r\n    allowAnalysis: allowAnalysis,\r\n  };\r\n  // 1.0.6\r\n  allowEmail = true;\r\n  saveEncrypt = true;\r\n  allowAnalysis = false;\r\n  verDetails = {\r\n    version: ver,\r\n    versionNumeric: versionNumeric,\r\n    allowEmail: allowEmail,\r\n    saveEncrypt: saveEncrypt,\r\n    allowAnalysis: allowAnalysis,\r\n  };\r\n  return verDetails;\r\n}\r\n\r\nfunction num(n) {\r\n  return n > 9 ? \"\" + n : \"0\" + n;\r\n}\r\n\r\n/* 16\r\n */\r\n/* \r\nexport function INAAssetSpreadsheetData(asset, taxRate, Spouse, inflation,language) {\r\n  let dataColumns = [];\r\n  let dataColumn = [];\r\n  let noYrs = 100 - Spouse.Age;\r\n\r\n  let i;\r\n  let j;\r\n\r\n  for (i = 0; i < 4; i++) {\r\n    dataColumn = [];\r\n    for (j = 0; j < noYrs; j++) {\r\n      if (i === 0) dataColumn.push(1 + j);\r\n      else if (i === 1) dataColumn.push(Spouse.Age + j);\r\n      else if (i === 2)\r\n        dataColumn.push(numFormat(asset.currValue * 1.03,   language===\"en\"?false:true, 2, language===\"en\"?\",\":\" \"));\r\n      else if (i === 3)\r\n        dataColumn.push(\r\n          numFormat(\r\n            (asset.currValue * 1.03 - asset.ACB) * taxRate,\r\n            language===\"en\"?false:true, 2, language===\"en\"?\",\":\" \"\r\n          )\r\n        );\r\n    }\r\n    dataColumns.push(dataColumn);\r\n    dataColumn = [];\r\n  }\r\n\r\n  //console.log(dataColumns);\r\n  return dataColumns;\r\n}\r\n */\r\nexport function handleCSVDownload2() {\r\n  var de = document.getElementById(\"DExcel\");\r\n  de.setAttribute(\"downloadNow\", \"1\");\r\n}\r\n\r\nexport function handleCSVDownload(data, columns) {\r\n  const CSVHead =\r\n    columns\r\n      .reduce((soFar, column) => soFar + '\"' + column.name + '\",', \"\")\r\n      .slice(0, -1) + \"\\r\\n\";\r\n  const CSVBody = data\r\n    .reduce((soFar, row) => soFar + '\"' + row.data.join('\",\"') + '\"\\r\\n', [])\r\n    .trim();\r\n\r\n  /* taken from react-csv */\r\n  const csv = `${CSVHead}${CSVBody}`;\r\n  const blob = new Blob([csv], { type: \"text/csv\" });\r\n  const dataURI = `data:text/csv;charset=utf-8,${csv}`;\r\n\r\n  const URL = window.URL || window.webkitURL;\r\n  const downloadURI =\r\n    typeof URL.createObjectURL === \"undefined\"\r\n      ? dataURI\r\n      : URL.createObjectURL(blob);\r\n\r\n  let link = document.createElement(\"a\");\r\n  link.setAttribute(\"href\", downloadURI);\r\n  link.setAttribute(\"download\", \"tableDownload.csv\");\r\n  /* document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link); */\r\n  const workbook = XLSX.utils.book_new();\r\n  workbook.SheetNames.push(\"T1\");\r\n  var d = [[\"hey\", \"goh\"]];\r\n  var v = XLSX.utils.aoa_to_sheet(d);\r\n  workbook.Sheets[\"T1\"] = v;\r\n  const worksheet = XLSX.utils.aoa_to_sheet(\r\n    [columns.map((r) => r.name)].concat(data.map((r) => r.data))\r\n  );\r\n\r\n  //\tworksheet.cells(10,10).value=3333333\r\n  XLSX.utils.book_append_sheet(workbook, worksheet, \"Tabela Exportada\");\r\n  XLSX.writeFile(workbook, \"TabelaExportada.xls\", { compression: true });\r\n}\r\n\r\nexport function INAMCCQuote() {\r\n  let MCC = async function (input, insuranceNeed) {\r\n    const minPrem = await getMCCQuoteOutput1(input, insuranceNeed);\r\n    const MCCData = await getMCCQuoteOutput2(input, insuranceNeed, minPrem);\r\n    // console.log(minPrem);\r\n    return MCCData;\r\n  };\r\n\r\n  // console.log(MCC);\r\n  return MCC;\r\n}\r\n\r\n\r\n/* function getMCCQuoteOutput(){\r\n  \t\treturn Promise.all([getMCCQuoteOutput1(),getMCCQuoteOutput2()])\r\n\t} */\r\n\r\nfunction getMCCQuoteOutput1(input, insuranceNeed) {\r\n  let quotePlanID = 48;\r\n  let quoteClient = 1; //\r\n  let dataMCC = readMCCData(input, quotePlanID, quoteClient, insuranceNeed);\r\n\r\n  //let dataAPISite = \"http://localhost:8082\";\r\n  fetchMCCData(dataMCC, insuranceNeed).then((data) => {\r\n    // console.log(data[0]);\r\n    if (data[0][1] !== undefined) {\r\n      console.log(\"POST: MCC_OutputArrays success\");\r\n      return data[0];\r\n    }\r\n  });\r\n}\r\n\r\nfunction getMCCQuoteOutput2(input, insuranceNeed, minPrem) {\r\n  let dataDB = [];\r\n  let quotePlanID = 48;\r\n  let quoteClient = 1; //\r\n  //let dataAPISite = \"http://localhost:8082\";\r\n  let dataMCC = readMCCData(input, quotePlanID, quoteClient, insuranceNeed);\r\n\r\n  dataMCC.policy.objPremium.PremSet = true;\r\n  dataMCC.policy.objPremium.PremSetAmt = minPrem;\r\n  dataMCC.policy.objPremium.PremSetDur = 19;\r\n  dataMCC.policy.objPremium.PremSolve = false;\r\n  fetchMCCData(dataMCC, insuranceNeed).then((data) => {\r\n    //console.log(data[0]);\r\n    if (data[0][1] !== undefined) {\r\n      //console.log(\"POST: MCC_OutputArrays success\");\r\n      dataDB = data[0][3].Values.map((x) => parseInt(cleanFormat(x)));\r\n      dataDB.unshift(parseInt(cleanFormat(insuranceNeed)));\r\n      return dataDB;\r\n    }\r\n  });\r\n}\r\n\r\nexport function getProjectedLiabilities(dataInput, years, probate) {\r\n  let i;\r\n  let j;\r\n  var totalLiabProjections = [];\r\n  for (i = 0; i < years; ++i) totalLiabProjections.push(0);\r\n  // add probate seperately\r\n  for (j = 0; j < dataInput.Liabilitys.length; j++) {\r\n    if (dataInput.Liabilitys[j].liabTypeKey!==LIABILITIES.PROBATE.Key)\r\n    {\r\n      const liabProj = getProjectedLiability(dataInput.Liabilitys[j]);\r\n      for (i = 0; i < Math.min(years, liabProj.length); ++i)\r\n        totalLiabProjections[i] += liabProj[i];\r\n    }\r\n  }\r\n  //console.log(probate.numericValues,years, probate.length)\r\n  // add probate\r\n  if(probate!==undefined)\r\n  {\r\n    for (i = 0; i < Math.min(years, probate.numericValues.length); ++i)\r\n    totalLiabProjections[i] += probate.numericValues[i];\r\n   // console.log(probate.numericValues[i],totalLiabProjections[i])\r\n  }\r\n\r\n  return totalLiabProjections;\r\n}\r\n\r\nexport function getProjectedLiability(liability,probate) {\r\n  let i;\r\n  var totalLiab = 0;\r\n  var totalLiabProjections = [];\r\n\r\n  if (\r\n    liability.liabTypeKey === LIABILITIES.OUTSTANDING_LOANS.Key ||\r\n    liability.liabTypeKey === LIABILITIES.MORTGAGE_REDEMPTION.Key\r\n  ) {\r\n    let amt = liability.currValue;\r\n    totalLiabProjections.push(Math.round(amt));\r\n    liability.growth = getLoanBalance(\r\n      liability.currValue,\r\n      liability.exposureDur,\r\n      liability.repay\r\n    );\r\n    //console.log(liability.growth);\r\n    for (i = 0; i < liability.exposureDur; ++i) {\r\n      amt = (amt - liability.repay) * (1 + liability.growth);\r\n      totalLiabProjections.push(Math.round(amt));\r\n    }\r\n  } else if (liability.liabTypeKey === LIABILITIES.CLIENT_TAX_LIABILITY.Key) {\r\n    //console.log(liability.assetTaxLiabProj)\r\n    let amt = liability.currValue;\r\n    totalLiabProjections.push(Math.round(amt));\r\n    for (i = 1; i < liability.exposureDur; ++i) {\r\n      amt = liability.assetTaxLiabProj[i];\r\n      totalLiabProjections.push(Math.round(amt));\r\n    }\r\n  } else if (liability.liabTypeKey === LIABILITIES.PROBATE.Key) {\r\n    if (probate ===undefined){\r\n      for (i = 0; i < liability.exposureDur; ++i) {\r\n        const amt = i < liability.exposureDur ? liability.currValue : 0;\r\n        totalLiab = amt;\r\n        totalLiabProjections.push(totalLiab);\r\n      }  \r\n    }\r\n    else\r\n      {\r\n        for (i = 0; i < liability.exposureDur; ++i) {\r\n        totalLiab = probate.numericValues[i];\r\n        totalLiabProjections.push(totalLiab);\r\n      }\r\n    }\r\n  } else {\r\n    for (i = 0; i < liability.exposureDur; ++i) {\r\n      const amt = i < liability.exposureDur ? liability.currValue : 0;\r\n      const change =\r\n        //liability.growthDir === GROWTHDIR[lang].Values[0]\r\n        liability.growthDirKey === GROWTHDIR.GROWS.Key\r\n          ? liability.growth / 100\r\n          : -liability.growth / 100;\r\n      totalLiab = amt * Math.pow(1 + change, i);\r\n      totalLiabProjections.push(totalLiab);\r\n    }\r\n  }\r\n\r\n  return totalLiabProjections;\r\n}\r\n\r\nfunction getLoanBalance(currValue, exposureDur, repay) {\r\n  //console.log(currValue,exposureDur,repay)\r\n  let rate = 0.1;\r\n  let dU = 0.2;\r\n  let dL = 0; //-.1111111;\r\n  let dBal = 1;\r\n\r\n  while (dU - dL > 0.0000001) {\r\n    dBal =\r\n      (currValue - repay) * Math.pow(1 + rate, exposureDur) -\r\n      (repay * (1 + rate) * (1 - Math.pow(1 + rate, exposureDur - 1))) / -rate;\r\n\r\n    if (dBal > 0) dU = rate;\r\n    else dL = rate;\r\n\r\n    rate = (dL + dU) / 2;\r\n  }\r\n\r\n  return rate;\r\n}\r\n\r\nexport function getINA_LifeExp_Plus_yrs(\r\n  INALifeExp,\r\n  dataShortfall,\r\n  invRate,\r\n  lifeExp,\r\n  yrs\r\n) {\r\n  let i;\r\n  let INA = INALifeExp;\r\n  \r\n  for (i = 0; i < yrs; ++i) {\r\n    INA =parseInt(INA)+parseInt(\r\n      dataShortfall[lifeExp + i] *\r\n      Math.pow(1 / (1 + invRate / 100), lifeExp + i));\r\n  \r\n  }\r\n\r\n  //console.log(INA)\r\n  return numFormat(INA, false, 2, \",\");\r\n}\r\n\r\nexport function getDataFutureEstateLiability(\r\n  dataTaxLiability,\r\n  totalLiabProjections\r\n) {\r\n  let i;\r\n  let projectEnd = Math.min(\r\n    totalLiabProjections.length,\r\n    dataTaxLiability.length\r\n  );\r\n  let dataFutureEstateLiability = [];\r\n\r\n  for (i = 0; i < projectEnd; ++i) {\r\n    dataFutureEstateLiability.push(dataTaxLiability[i]);\r\n  }\r\n  // add liab\r\n  for (i = 0; i < projectEnd; ++i) {\r\n    dataFutureEstateLiability[i] += totalLiabProjections[i];\r\n  }\r\n  return dataFutureEstateLiability;\r\n}\r\n\r\nexport function getListToShowByOrder(fullListOfItems) {\r\n  const showableList = Object.values(fullListOfItems)\r\n    .filter((obj) => obj.order > 0)\r\n    .slice(0);\r\n\r\n  return showableList.sort(function (a, b) {\r\n    return a.order - b.order;\r\n  });\r\n}\r\n\r\nexport function getListItemNameFromKey(list, Key, lang) {\r\n  let found = Object.values(list).find((obj) => obj.Key === Key);\r\n  if (found === undefined) found = \"\";\r\n  else found = found.value[lang];\r\n  return found;\r\n}\r\n\r\nexport function getListItemKeyFromName(list, name) {\r\n  // console.log(name,list)\r\n  name = name.split(\" \").join(\"\").split(\"\").join(\"\");\r\n  /*  Object.values(list).forEach(\r\n    obj => console.log(obj.value.en.split(\" \").join(\"\").split(\"\").join(\"\"),name,obj.value.en==name))\r\n   */\r\n\r\n  let found = Object.values(list).find(\r\n    (obj) =>\r\n      obj.value.en.split(\" \").join(\"\").split(\"\").join(\"\") == name ||\r\n      obj.value.fr.split(\" \").join(\"\").split(\"\").join(\"\") == name\r\n  );\r\n  if (found === undefined) found = 0;\r\n  else found = found.Key;\r\n  return found;\r\n}\r\n\r\nexport function getAssetsTaxCategoryTotal(dataInput, key) {\r\n  var totalAsset = 0;\r\n  dataInput.Assets.forEach((element) => {\r\n    if (element.assetTaxTypeKey === key) totalAsset += element.currValue;\r\n  });\r\n\r\n  return totalAsset;\r\n}\r\n\r\nexport function getDisableValues(list) {\r\n  let val = [];\r\n  Object.values(list).forEach(() => {\r\n    val.push(false);\r\n  });\r\n  return val;\r\n}\r\n\r\nexport function getAssetsCategoryTotal(dataList, key) {\r\n  var total = 0;\r\n  dataList.Assets.forEach((element) => {\r\n    if (element.assetTypeKey === key) total += element.currValue;\r\n  });\r\n  // // console.log(total,dataList,key)\r\n  return total;\r\n}\r\n\r\nexport function getLiabsCategoryTotal(dataList, key) {\r\n  var total = 0;\r\n  dataList.Liabilitys.forEach((element) => {\r\n    if (element.liabTypeKey === key) total += element.currValue;\r\n  });\r\n  // console.log(total,dataList,key)\r\n  return total;\r\n}\r\n\r\nexport function getAgesEP(clients,LE)\r\n{\r\n  const age1= clients[QUOTE_CLIENT].Age\r\n        \r\n  let dataAges=[]\r\n    //for (let i = startAge; i < parseFloat(startAge + LE + 4); i++)\r\n      if(clients.length > 1)\r\n      {\r\n        const age2= clients[QUOTE_SPOUSE].Age\r\n        for (let i = 0; i < parseFloat(LE + 4); i++)\r\n          dataAges.push(parseInt(age1+i) + \"/\" + parseInt(age2+i));\r\n      }\r\n      else\r\n      {\r\n        for (let i = 0; i < parseFloat(LE + 4); i++)\r\n          dataAges.push(parseInt(age1+i));\r\n      } \r\n\r\n      return dataAges\r\n}\r\n\r\n\r\nexport async function getTaxLiabCategoryTotal(dataInput, key, dataNA, yr) {\r\n  //let appSiteAPI = \"http://localhost:8082\";\r\n\r\n  var totalAsset = 0;\r\n\r\n  let dataAss = dataInput.Assets.filter(\r\n    (obj) => obj.assetTaxTypeKey === key\r\n  ).slice(0);\r\n\r\n  //await dataInput.Assets.forEach(async (element) => {\r\n  // if(element.assetTaxTypeKey === key)\r\n  //{\r\n  for (var i = 0; i < dataAss.length; ++i) {\r\n    let data = await getAssetTL(dataNA, dataAss[i].id, yr);\r\n    if (data !== undefined) {\r\n      totalAsset += data;\r\n    }\r\n  }\r\n  return totalAsset;\r\n}\r\n\r\nasync function getAssetTL(dataNA, id, yr) {\r\n  let data = await fetchAssetProjection2(dataNA, id);\r\n  if (data !== undefined) {\r\n    if (data[ASSET_API_OUTPUT_TaxPayable] !== undefined) {\r\n      return data[ASSET_API_OUTPUT_TaxPayable].numericValues[yr];\r\n    }\r\n   }\r\n}\r\n\r\n\r\n\r\n  export function getDefaultImages()\r\n  {\r\n    return{\r\n      adviserLogo:{image:null, left: 0,size: OUTPUT_WIDTH_PCT, allPages: false, top:true, showDetails:false},\r\n      appletImage:{image:APPLET_INA? require(\"../images/INA.png\"):require(\"../images/estate.protection.applet.cover.graphic.png\"), left: 0,size: OUTPUT_WIDTH_PCT, allPages: false, top:true, showDetails:false}\r\n    }\r\n  }\r\n  \r\n  \r\n\r\nexport function getAfterTaxTotalIncome(clients, index) {\r\n  return (\r\n    clients[QUOTE_CLIENT].Income *\r\n      (1 - clients[QUOTE_CLIENT].avgTaxRate / 100) +\r\n    clients[index].Income * (1 - clients[index].avgTaxRate / 100)\r\n  ); //* Math.pow(1+this.state.dataInput.Presentations[0].inflation / 100,data2.Needs[i].startYear)\r\n}\r\n\r\nexport function isSingleFamily(clients) {\r\n  const spouseKey = MEMBER.SPOUSE.Key;\r\n  let survivors = clients.filter((x) => x.memberKey === spouseKey);\r\n  if (APPLET_INA) return survivors === undefined || survivors.length === 0;\r\n  else if (APPLET_INA) return false;\r\n}\r\n\r\nexport function singleFamilyProjectionYears(clients) {\r\n  let minAge = 0;\r\n  let maxRet = 0;\r\n  let noYrs = 0;\r\n  const clientKey = MEMBER.CLIENT.Key;\r\n  let survivors = clients.filter((x) => x.memberKey !== clientKey);\r\n  if (survivors !== undefined && survivors.length > 0) {\r\n    minAge = survivors.reduce(function (prev, curr) {\r\n      return prev.Age < curr.Age ? prev : curr;\r\n    }).Age;\r\n\r\n    maxRet = survivors.reduce(function (prev, curr) {\r\n      return prev.retirementAge > curr.retirementAge ? prev : curr;\r\n    }).retirementAge;\r\n    \r\n    let noYrsDiff = survivors.reduce(function (prev, curr) {\r\n      return prev.Age - prev.retirementAge < curr.Age - curr.retirementAge ? prev : curr;\r\n    });\r\n    noYrs=noYrsDiff.retirementAge-noYrsDiff.Age\r\n  \r\n  }\r\n  else\r\n  {\r\n    maxRet=clients[0].retirementAge\r\n    minAge=clients[0].Age\r\n    noYrs=clients[0].retirementAge-clients[0].Age\r\n  }\r\n  return {\r\n    projectionEnd: maxRet,\r\n    noProjectionYrs: noYrs,//maxRet - minAge,\r\n    survivorAge: minAge,\r\n  };\r\n}\r\n\r\nexport function familyProjectionYears(\r\n  clients,\r\n  periodOption,\r\n  LE,\r\n  insuranceNeeds,\r\n  dataShortfall,\r\n  presentation\r\n) {\r\n  let insNeed = 0;\r\n  let insNeedRet = 0;\r\n  let insNeedLE = 0;\r\n  let insNeedLE3 = 0;\r\n  let insNeedEAge = 0;\r\n\r\n  if (insuranceNeeds.length > 0) {\r\n    insNeedRet = cleanFormat(insuranceNeeds[DISPLAY_RETIREMENT].Value, presentation.language);\r\n    insNeedLE =  cleanFormat(insuranceNeeds[DISPLAY_LIFEEXP].Value, presentation.language);\r\n    insNeedEAge =  cleanFormat(insuranceNeeds[DISPLAY_ENDAGE].Value, presentation.language);\r\n    const lifeExp=parseFloat(cleanFormat(LE.joint, presentation.language)) // this is either client or jltd if two lives\r\n\r\n    insNeed =\r\n      periodOption === DISPLAY_RETIREMENT\r\n        ? insNeedRet\r\n        : periodOption === DISPLAY_LIFEEXP\r\n        ? insNeedLE\r\n        : periodOption === DISPLAY_LIFEEXP_PLUS_3\r\n        ? getINA_LifeExp_Plus_yrs(\r\n          insNeedLE,\r\n            dataShortfall,\r\n            presentation.invRate,\r\n            //LE.spouse,\r\n            lifeExp, // this is either client or jltd if two lives\r\n            3\r\n          )\r\n        : insNeedEAge;\r\n    \r\n    insNeedLE3 =\r\n      dataShortfall !== undefined\r\n        ? getINA_LifeExp_Plus_yrs(\r\n          insNeedLE ,\r\n            dataShortfall,\r\n            presentation.invRate,\r\n            lifeExp,\r\n            3\r\n          )\r\n        : insNeed;\r\n  }\r\n\r\n  // if single family survivor Index could be more than on child, otherwise it is always 1 for spouse\r\n  if (isSingleFamily(clients) && !APPLET_EP) {\r\n    let singleFamilyvalues = singleFamilyProjectionYears(clients);\r\n    singleFamilyvalues.insuranceNeed = insNeedRet;\r\n    singleFamilyvalues.insuranceNeedToRet = insNeedRet;\r\n    singleFamilyvalues.insuranceNeedToLE = insNeedRet;\r\n    singleFamilyvalues.insuranceNeedToLE3 = insNeedRet;\r\n    singleFamilyvalues.insuranceNeedToEnd = insNeedRet;\r\n    return singleFamilyvalues;\r\n  } else {\r\n    let projectEnd = 65;\r\n    let noProjectYrs = 0;\r\n    let survAge;\r\n    const survIdx = 1; // spouse\r\n\r\n    if (APPLET_EP) {\r\n      // survivorExists or EP\r\n      if(clients.length===1){\r\n      projectEnd = LE.client + clients[QUOTE_CLIENT].Age + 3;\r\n      noProjectYrs = projectEnd - clients[QUOTE_CLIENT].Age;\r\n      survAge = clients[QUOTE_CLIENT].Age;\r\n      }\r\n      else // jltd\r\n      {\r\n        const minAge=Math.min(clients[QUOTE_CLIENT].Age, clients[QUOTE_SPOUSE].Age)\r\n        projectEnd = LE.joint + minAge + 3;\r\n        noProjectYrs = projectEnd - minAge;\r\n        survAge = minAge;\r\n      \r\n      }\r\n    } else if (clients.length > 1) {\r\n      // survivorExists or EP\r\n      projectEnd =\r\n        periodOption === DISPLAY_RETIREMENT\r\n          ? clients[survIdx].retirementAge\r\n          : periodOption === DISPLAY_LIFEEXP\r\n          ? LE.spouse + clients[survIdx].Age\r\n          : periodOption === DISPLAY_ANALYSIS\r\n          ? LE.joint + clients[survIdx].Age + 3\r\n          : 100;\r\n      noProjectYrs = projectEnd - clients[survIdx].Age;\r\n      survAge = clients[survIdx].Age;\r\n    } else {\r\n      survAge = clients[QUOTE_CLIENT].Age;\r\n      noProjectYrs = 0;\r\n    }\r\n    return {\r\n      projectionEnd: projectEnd,\r\n      noProjectionYrs: noProjectYrs,\r\n      survivorAge: survAge,\r\n      insuranceNeed: insNeed,\r\n      insuranceNeedToRet: insNeedRet,\r\n      insuranceNeedToLE: insNeedLE,\r\n      insuranceNeedToLE3: insNeedLE3,\r\n      insuranceNeedToEnd: insNeedEAge,\r\n    };\r\n  }\r\n}\r\n\r\nexport function getInsNeedLine(\r\n  presentation,\r\n  projEnd,\r\n  lang,\r\n  numSurvivor,\r\n  singleFamily,\r\n  protectionPeriod,\r\n  insuranceNeed,\r\n  name\r\n) {\r\n  const labelsBilingual = OUTPUTTEXT[lang];\r\n  const decimalChar = lang === \"en\" ? \".\" : \",\";\r\n  const thousands = lang === \"en\" ? \",\" : \" \";\r\n // const formatFr = lang === \"fr\" ? true : false;\r\n  const dollarEn= lang === \"fr\" ? \"\" : \"$\";\r\n  const dollarFr= lang === \"fr\" ? \"$\" : \"\";\r\n\r\n  let needTo =\r\n    presentation.periodOption === DISPLAY_RETIREMENT\r\n      ? singleFamily\r\n        ? (numSurvivor>0?labelsBilingual.insNeedsSingleFamily:labelsBilingual.insNeedsSinglePerson)\r\n        : labelsBilingual.insNeedsRet\r\n      : presentation.periodOption === DISPLAY_ENDAGE\r\n      ? labelsBilingual.insNeeds100\r\n      : labelsBilingual.insNeedsRetLE;\r\n\r\n  if (versionDetails().versionNumeric<=10014 && numSurvivor === 0) needTo = labelsBilingual.addSurvivor;\r\n  else if (singleFamily)\r\n    needTo +=\r\n      +protectionPeriod +\r\n      labelsBilingual.years +\r\n      \": \" + dollarEn +\r\n      formatMoney(\r\n        cleanFormat(insuranceNeed, lang),\r\n        0,\r\n        decimalChar,\r\n        thousands\r\n      )+dollarFr;\r\n  else if (presentation.periodOption !== DISPLAY_ENDAGE)\r\n    needTo +=\r\n      +projEnd +\r\n      \"): \" + dollarEn +\r\n      formatMoney(\r\n        cleanFormat(insuranceNeed, lang),\r\n        0,\r\n        decimalChar,\r\n        thousands\r\n      ) +dollarFr;\r\n  else\r\n    needTo +=\r\n      \": \" + dollarEn +\r\n      formatMoney(\r\n        cleanFormat(insuranceNeed, lang),\r\n        0,\r\n        decimalChar,\r\n        thousands\r\n      ) +dollarFr;\r\n  if (name !== \"\" && name !== undefined && name !== TITLES[lang].insured) needTo += \"  (\" + name + \")\";\r\n  return needTo;\r\n}\r\n\r\nexport function getName(name,lang) {\r\n  if (!(name === \"\" || name === undefined || name === TITLES[lang].insured  || name === TITLES[lang].benef)) return \" (\" + name + \")\";\r\n  else return \"\";\r\n}\r\n\r\nexport function formatted(value,lang){\r\n  const decimalChar = lang === \"en\" ? \".\" : \",\";\r\n  const thousands = lang === \"en\" ? \",\" : \" \";\r\n  \r\n  const formattedValue= (lang === \"en\" ? \"$\" : \"\" )+\r\n  formatMoney(\r\n    value,\r\n    0,\r\n    decimalChar,\r\n    thousands\r\n  )+(lang === \"en\" ? \"\" : \"$\" )\r\n\r\n  return formattedValue\r\n }\r\n \r\n\r\n\r\nexport function getLeakageGraphs(\r\n  assets,\r\n  assetProjections,\r\n  AssetLiabProjs,\r\n  totalLiabProjections,\r\n  lang,\r\n  lifeExp\r\n) {\r\n  const optionsPie = {\r\n    responsive: true,\r\n    maintainAspectRatio: true,\r\n    title: {\r\n      display: true,\r\n      position: \"top\",\r\n      text: \"\",\r\n      fontSize: 14, //8,\r\n      fontColor: \"#111\",\r\n    },\r\n    legend: {\r\n      display: true,\r\n      position: \"right\",\r\n      labels: {\r\n        fontColor: \"#333\",\r\n        fontSize: 12, //16\r\n      },\r\n    },\r\n    /*  plugins: {\r\n      // Change options for ALL labels of THIS CHART\r\n      display: true,\r\n      datalabels: {\r\n        color: \"white\",\r\n      },\r\n    },  */\r\n  };\r\n\r\n  const space = \"                                       \";\r\n  let optionsPieEstateLeakage = JSON.parse(JSON.stringify(optionsPie));\r\n  optionsPieEstateLeakage.title.text =\r\n    OUTPUTTEXTEP[lang].graphsLeakageT2 + space;\r\n  //optionsPieEstateLeakage.legend.labels.boxWidth = 20;\r\n  //optionsPieEstateLeakage.plugins.display = true;\r\n\r\n  let optionsPieEstateLeakageLE = JSON.parse(JSON.stringify(optionsPie));\r\n  optionsPieEstateLeakageLE.title.text =\r\n    OUTPUTTEXTEP[lang].graphsLeakageT3 + space; // needTo += +this.props.projectEnd + \")\";\r\n  // optionsPieEstateLeakageLE.legend.labels.boxWidth = 20;\r\n  //optionsPieEstateLeakageLE.plugins.display = true;\r\n \r\n  // asset info\r\n  let assetsTotalNow = 0;\r\n  let assetsTotalLE3 = 0;\r\n // const formatFr = lang === \"fr\" ? true : false;\r\n  const FMVCol = 2;\r\n  for (let i = 0; i < assets.length; ++i) {\r\n    assetsTotalNow += assets[i].currValue;\r\n    assetsTotalLE3 += parseFloat(\r\n      cleanFormat(\r\n        assetProjections[i].grid.dataProjection[FMVCol][lifeExp + 3],\r\n        lang\r\n      )\r\n    );\r\n  }\r\n\r\n  // liab info\r\n  const totalLiabProjectionsNow = parseInt(totalLiabProjections[0]);\r\n  const totalLiabProjectionsLE3 = parseInt(totalLiabProjections[lifeExp + 3]);\r\n\r\n  // leakage data\r\n  // use net worth as full circle in pie chart\r\n  const assetPercent =\r\n    assetsTotalNow - totalLiabProjectionsNow === 0\r\n      ? 0\r\n      : parseInt(\r\n          (100 *\r\n            (assetsTotalNow -\r\n              totalLiabProjectionsNow -\r\n              AssetLiabProjs.EstateLiabsByTypeTotal)) /\r\n            (assetsTotalNow - totalLiabProjectionsNow) +\r\n            0.5\r\n        );\r\n  const taxPercent =\r\n    AssetLiabProjs.EstateLiabsByTypeTotal === 0 ? 0 : 100 - assetPercent;\r\n\r\n  let dataEstateLeakage = [];\r\n  let dataEstateLeakageLE = [];\r\n  dataEstateLeakage.push(\r\n    assetsTotalNow -\r\n      totalLiabProjectionsNow -\r\n      AssetLiabProjs.EstateLiabsByTypeTotal >=\r\n      0\r\n      ? assetsTotalNow -\r\n          totalLiabProjectionsNow -\r\n          AssetLiabProjs.EstateLiabsByTypeTotal\r\n      : 0\r\n  );\r\n  dataEstateLeakage.push(AssetLiabProjs.EstateLiabsByTypeTotal);\r\n  dataEstateLeakageLE.push(\r\n    assetsTotalLE3 -\r\n      totalLiabProjectionsLE3 -\r\n      AssetLiabProjs.EstateLiabsByTypeLE3Total >=\r\n      0\r\n      ? assetsTotalLE3 -\r\n          totalLiabProjectionsLE3 -\r\n          AssetLiabProjs.EstateLiabsByTypeLE3Total\r\n      : 0\r\n  );\r\n  dataEstateLeakageLE.push(AssetLiabProjs.EstateLiabsByTypeLE3Total);\r\n\r\n  const assetPercentLE3 =\r\n    assetsTotalLE3 - totalLiabProjectionsLE3 === 0\r\n      ? 0\r\n      : parseInt(\r\n          (100 *\r\n            (assetsTotalLE3 -\r\n              totalLiabProjectionsLE3 -\r\n              AssetLiabProjs.EstateLiabsByTypeLE3Total)) /\r\n            (assetsTotalLE3 - totalLiabProjectionsLE3) +\r\n            0.5\r\n        );\r\n  const taxPercentLE3 =\r\n    AssetLiabProjs.EstateLiabsByTypeLE3Total +\r\n      assetsTotalLE3 -\r\n      totalLiabProjectionsLE3 ===\r\n    0\r\n      ? 0\r\n      : 100 - assetPercentLE3;\r\n\r\n  //var ctx = document.getElementById('pieEstateLeakage').getContext('2d');\r\n  var dataPieEstateLeakage = {\r\n    labels: [\r\n      // OUTPUTTEXT[lang].graphsL1,OUTPUTTEXT[lang].graphsL2,OUTPUTTEXT[lang].graphsL3,OUTPUTTEXT[lang].graphsL4,OUTPUTTEXT[lang].graphsL5,\r\n      OUTPUTTEXTEP[lang].graphsLeakage1 + \" (\" + assetPercent + \"%)\" + space,\r\n      OUTPUTTEXTEP[lang].graphsLeakage2 + \" (\" + taxPercent + \"%)\" + space,\r\n    ],\r\n    datasets: [\r\n      {\r\n        //data: this.state.estateLiabLE,\r\n        data: dataEstateLeakage,\r\n        //backgroundColor: [\"#F7464A\", \"#46BFBD\", \"#FDB45C\", \"#949FB1\", \"#4D5360\"]\r\n        backgroundColor: [\"#4D7966\", \"#872651\"],\r\n      },\r\n    ],\r\n  };\r\n  const dataPieEstateLeakageLE = {\r\n    labels: [\r\n      // OUTPUTTEXT[lang].graphsL1,OUTPUTTEXT[lang].graphsL2,OUTPUTTEXT[lang].graphsL3,OUTPUTTEXT[lang].graphsL4,OUTPUTTEXT[lang].graphsL5,\r\n      OUTPUTTEXTEP[lang].graphsLeakage1 + \" (\" + assetPercentLE3 + \"%)\" + space,\r\n      OUTPUTTEXTEP[lang].graphsLeakage2 + \" (\" + taxPercentLE3 + \"%)\" + space,\r\n    ],\r\n    datasets: [\r\n      {\r\n        //data: this.state.estateLiabLE,\r\n        data: dataEstateLeakageLE,\r\n        //backgroundColor: [\"#F7464A\", \"#46BFBD\", \"#FDB45C\", \"#949FB1\", \"#4D5360\"]\r\n        backgroundColor: [\"#4D7966\", \"#872651\"],\r\n      },\r\n    ],\r\n  };\r\n  return {\r\n    dataPieEstateLeakage: dataPieEstateLeakage,\r\n    dataPieEstateLeakageLE: dataPieEstateLeakageLE,\r\n    optionsPieEstateLeakage: optionsPieEstateLeakage,\r\n    optionsPieEstateLeakageLE: optionsPieEstateLeakageLE,\r\n  };\r\n}\r\n\r\nexport function getLogoAndAppletImage(dataInput, imageRemove, imageAdjust) {\r\n  const lang = dataInput.Presentations[0].language;\r\n  const allPages =\r\n      dataInput.Presentations[0].adviserLogo.image !== null &&\r\n      dataInput.Presentations[0].adviserLogo.allPages;\r\n  const appletImage =\r\n    dataInput.Presentations[0].appletImage === undefined\r\n      ? APPLET_INA\r\n        ? require(\"../images/INA.png\")\r\n        : require(\"../images/estate.protection.applet.cover.graphic.png\")\r\n      : dataInput.Presentations[0].appletImage.image;\r\n  const logoSize = Math.max(\r\n    500 * (MAX_LOGO_HEIGHT / PAGE_HEIGHT),\r\n    Math.min(\r\n      500 * (MAX_LOGO_HEIGHT / PAGE_HEIGHT),\r\n      (100 *\r\n        (MAX_LOGO_HEIGHT / PAGE_HEIGHT) *\r\n        dataInput.Presentations[0].adviserLogo.size) /\r\n        OUTPUT_WIDTH_PCT\r\n    )\r\n  );\r\n  const logoLeft =\r\n    dataInput.Presentations[0].adviserLogo.size / 2 +\r\n    dataInput.Presentations[0].adviserLogo.left -\r\n    logoSize / 2;\r\n  const logo = (allPages && \r\n    <AdjustibleImage\r\n      image={dataInput.Presentations[0].adviserLogo.image}\r\n      showDetails={false}\r\n      size={logoSize}\r\n      imageLeft={logoLeft}\r\n      ID={IMAGE_LOGO_OTHERPAGES}\r\n    />\r\n  );\r\n  const top=dataInput.Presentations[0].adviserLogo.top \r\n  /* const logoTop = dataInput.Presentations[0].adviserLogo.top && logo\r\n  const logoBottom = !dataInput.Presentations[0].adviserLogo.top && logo\r\n   */\r\n  const logo1stPage = dataInput.Presentations[0].adviserLogo.image !==\r\n    undefined && ( // from older files not null but undefined\r\n    <AdjustibleImage\r\n      image={dataInput.Presentations[0].adviserLogo.image}\r\n      showDetails={true}\r\n      size={dataInput.Presentations[0].adviserLogo.size}\r\n      imageLeft={dataInput.Presentations[0].adviserLogo.left}\r\n      allPages={dataInput.Presentations[0].adviserLogo.allPages}\r\n      top={dataInput.Presentations[0].adviserLogo.top}\r\n      imageRemove={imageRemove}\r\n      imageAdjust={imageAdjust}\r\n      buttonText={lang === \"en\" ? \"Add/Edit logo\" : \"Ajouter/modifier le logo\"}\r\n      ID={IMAGE_LOGO}\r\n      language={lang}\r\n    />\r\n  );\r\n  const applet = (\r\n    <div>\r\n    <AdjustibleImage\r\n      image={appletImage}\r\n      showDetails={false}\r\n      size={OUTPUT_WIDTH_PCT}\r\n      imageLeft={0}\r\n      imageAdjust={imageAdjust}\r\n      //newImagethis.props.loadImage\r\n      buttonText={lang === \"en\" ? \"Replace Applet image\" : \"Remplacer limage de lapplet\"}\r\n      language={lang}\r\n      top={true}\r\n      ID={APPLET_INA ? IMAGE_APPLET_INA : IMAGE_APPLET_EP}\r\n      undoImage={APPLET_INA\r\n      ? require(\"../images/INA.png\")\r\n      : require(\"../images/estate.protection.applet.cover.graphic.png\")}\r\n    />\r\n    \r\n    </div>\r\n  );\r\n  return {\r\n    //appletImage: appletImage,\r\n    logoSize: logoSize,\r\n    logoLeft: logoLeft,\r\n    logoTop: top?logo:\"\",\r\n    logoBottom: !top?logo:\"\",\r\n    logo1stPage: logo1stPage,\r\n    applet:applet\r\n  };\r\n}\r\n\r\nexport function extractCSS() {\r\n  const allCSS = Object.values(document.styleSheets)\r\n    // eslint-disable-next-line array-callback-return\r\n    .map((styleSheet) => {\r\n      try {\r\n        return Object.values(styleSheet.cssRules)\r\n          .map((rule) => rule.cssText)\r\n          .join(\"\");\r\n      } catch (e) {\r\n        console.log(\r\n          \"Access to stylesheet %s is denied. Ignoring...\",\r\n          styleSheet.href\r\n        );\r\n      }\r\n    })\r\n    .filter(Boolean)\r\n    .join(\"\");\r\n\r\n  return allCSS;\r\n}\r\n","import React, { Component } from 'react';\r\nimport { Box, Card, CardContent, Typography } from '@material-ui/core'\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { createMuiTheme, ThemeProvider } from \"@material-ui/core/styles\";\r\n\r\nimport {\r\n  getInfoSave\r\n} from \"../definitions/infoIconsDefinitions.js\";\r\n\r\n\r\n\r\nexport class PopupInfoDialog extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      open: this.props.infoIcon.popupOpenByProps,\r\n      name: '',\r\n      showInfo: false\r\n    }\r\n  };\r\n\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (nextProps !== this.props) {\r\n\r\n      this.setState({\r\n        open: nextProps.infoIcon.popupOpenByProps\r\n      })\r\n    }\r\n  }\r\n\r\n  render() {\r\n\r\n    const theme = createMuiTheme({\r\n      typography: {\r\n        fontFamily: '\"Trebuchet MS\"',\r\n        fontSize: 12,\r\n        color: 'red',      \r\n      },\r\n    })  \r\n\r\n    return (\r\n\r\n    \r\n\r\n<Box width=\"100%\" border={2} borderColor={ this.props.infoIcon.popupBorderColor} borderRadius={5}>\r\n        <Card> <CardContent >\r\n        <ThemeProvider theme={theme}>\r\n          <Typography color=\"textPrimary\" component=\"p\" >\r\n                {this.props.infoIcon.infoText}\r\n             \r\n               {/*  <div>\r\n                To save files in your desired location:<ul><li>Microsofrft Edge:\r\n              <ul>\r\n                <li>Go to Options {this.state.showInfo && <img  alt=\"info\" src={optionsEdge}  />} </li>\r\n                <li>Click Downlods - Click Download settings</li>\r\n                <li>Turn on \"Ask where to save each file before downloading\" {this.state.showInfo && <img  alt=\"info\" src={sourceEdge}  />}\r\n              </li>\r\n               </ul>\r\n               </li><li>Google Chrome:\r\n               <ul>\r\n               <li>Go to Options {this.state.showInfo && <img  alt=\"info\" src={optionsChrome}  />} </li>\r\n                <li>Click Settings - Advanced - Downloads</li>\r\n                <li>Turn on \"Ask where to save each file before downloading\" {this.state.showInfo && <img  alt=\"info\" src={sourceChrome}  />}\r\n                </li>\r\n               </ul>\r\n              \r\n              </li></ul></div> */}\r\n             \r\n          </Typography>\r\n          </ThemeProvider>\r\n         \r\n        </CardContent></Card>\r\n        </Box>\r\n \r\n    )\r\n\r\n\r\n  }\r\n}","import React, { Component } from 'react';\r\nimport './info.css';\r\nimport {\r\n\tSHOW_AUTOMATIC_RED,\r\n\tSHOW_STANDARD,\r\n\tSHOW_STANDARD_RED,\r\n\tSHOW_STANDARD_LIGHT_BLUE,\r\n\tSHOW_NONE,\r\n\tSHOW_STANDARD_WHITE,\r\n}\r\n\tfrom \"../definitions/infoIconsDefinitions.js\";\r\nimport { PopupInfoDialog } from \"./PopupInfo\";\r\n\r\nexport class Info extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\topen: this.props.infoIcon.popupOpenByProps\r\n\t\t};\r\n\t\tthis.chkClose = false;\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tif (this.props.iconMode === SHOW_AUTOMATIC_RED) {\r\n\t\t\t//\t  console.log('in info');\r\n\r\n\t\t\tthis.popupInfo(0);\r\n\t\t\tthis.chkClose = true;\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tthis.setState({ open:  this.props.infoIcon.popupOpenByProps })\r\n\t}\r\n\r\n\tshowPopup = () => {\r\n\t\tthis.setState({ open: !this.state.open })\r\n\t\tif (this.props.respondToPopUp!==undefined)this.props.respondToPopUp();\r\n\t}\r\n\r\n\tpopupInfo = () => {\r\n\t\tvar popup = document.getElementById(this.props.infoIcon.infoID);\r\n\t\tpopup.classList.toggle(\"show\");\r\n\t//\tif (this.props.infoIcon.iconMode === SHOW_AUTOMATIC_RED && this.chkClose === true) {\r\n\t\t\tthis.props.respondToPopUp();\r\n\t\t\tthis.chkClose = false;\r\n\t//\t}\r\n\t}\r\n\r\n\r\n\trender() {\r\n\t\tconst position = this.props.infoIcon.position\r\n\t\t// console.log(position)\r\n\r\n\t\t//var icon=this.props.icon===undefined?'../images/info.png':this.props.icon;\r\n\r\n\t\t//var style1=this.props.popupRightMiddle? {paddingLeft:\"14px\", marginLeft: '75px',marginTop: '-135px', width:'196px' }:(this.props.popupRight===true?{marginLeft: '50px'}:{});\r\n\r\n\t\tvar stylePosition = position !== undefined ?\r\n\t\t\t({ marginLeft: position.marginLeft + 'px', marginTop: position.marginTop + 'px', width: position.width + 'px' }) : {};\r\n\t//var style={paddingLeft: this.props.popupRightMiddle?'25px':'8px', height: this.props.sizeIcon===undefined?'14px':this.props.sizeIcon, };\r\n\t\tconst style = { paddingLeft: '8px', height: '14px'};\r\n\t\t//var sour=this.props.iconName===undefined || this.props.iconName==='info.png'?require('../images/info.png'):require('../images/'+this.props.iconName);\r\n\t\tconst source = this.props.infoIcon.iconMode === SHOW_STANDARD ? require('../images/info.png') : (this.props.infoIcon.iconMode === SHOW_NONE ? \"\": (this.props.infoIcon.iconMode === SHOW_STANDARD_LIGHT_BLUE ?require('../images/infoLightBlue.png'): (this.props.infoIcon.iconMode === SHOW_STANDARD_WHITE ?require('../images/infoWhite.png'): require('../images/infoRed.png'))));\r\n\r\n\t\tconst classP = this.state.open === true ? \"popup2\" : \"popup\"\r\n\t\t\r\n\t\t//const width=this.props.infoIcon.infoText.length>120?'600%': (this.props.infoIcon.infoText.length>90?'420%':'350%');\r\n\t\t\r\n\t\tconst marginLeft=position.marginLeft//this.props.infoIcon.infoText.length>120?'-275%':'-125%';\r\n\t\tconst marginTop=position.marginTop\r\n\t\tconst width=position.width\r\n\t\tconst height=position.height\r\n\r\n\t\tconst zIndx=this.props.zIndex===undefined?1:this.props.zIndex\r\n\t\t\r\n\t\tlet borderColor\r\n\r\n\t\treturn (\r\n\t\t\t<div  className={classP} style={{ float: 'right', width: '40px', height: '40px'   }}><div>\r\n\t\t\t\t{this.props.iconMode !== SHOW_AUTOMATIC_RED && this.props.infoIcon.iconMode !== SHOW_NONE && <img onMouseEnter={this.showPopup} onMouseLeave={this.showPopup} onClick={this.showPopup} id={\"info\"} alt=\"info\" src={source} style={style} />}\r\n\t\t\t\t{/* <div className=\"popup\"  onMouseEnter={this.popupInfo} onMouseLeave={this.popupInfo}   onClick={this.popupInfo}>{this.props.showMode!==SHOW_AUTOMATIC_RED && <img  id={\"info\"} alt=\"info\" src={source} style={style} />} */}\r\n\t\t\t\t{/* <span className=\"popuptextBottom\"   style={stylePosition} id={this.props.infoIcon.infoID}>{this.props.infoIcon.infoText}</span> */}\r\n\t\t\t</div>\r\n\t\t\t <div style={{position:'absolute', marginTop: '2px',marginTop:marginTop,  marginLeft: marginLeft, width: width, zIndex: zIndx}}>\t\t\t<span onMouseEnter={this.showPopup} onMouseLeave={this.showPopup}  onClick={this.showPopup} >{this.state.open === true && <PopupInfoDialog  infoIcon={this.props.infoIcon} />}</span>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\r\n}\r\n","import { readMCCData } from \"../data/dataExchangeMCC\";\r\nimport {\r\n  PROVINCE,\r\n  ASSET_API_OUTPUT_Year,\r\n  ASSET_API_OUTPUT_Age,\r\n  ASSET_API_OUTPUT_FMV,\r\n  ASSET_API_OUTPUT_EOYBalance,\r\n  ASSET_API_OUTPUT_ACB,\r\n  ASSET_API_OUTPUT_UCC,\r\n  ASSET_API_OUTPUT_CCA,\r\n  ASSET_API_OUTPUT_CapitalGain,\r\n  ASSET_API_OUTPUT_TaxabaleGain,\r\n  ASSET_API_OUTPUT_Recapture,\r\n  ASSET_API_OUTPUT_TaxPayable,\r\n  ASSET_API_OUTPUT_CapGainsExemption,\r\n  ASSET_API_OUTPUT_Deposits,\r\n  ASSET_API_OUTPUT_Withdrawals,\r\n  ASSET_API_OUTPUT_RRIF,\r\n  ASSET_API_OUTPUT_TaxPayableonIncome,\r\n  ASSET_API_OUTPUT_DispositionAmount,appSiteAPI,\r\n  ASSETS,\r\n  ASSET_TAX,\r\n} from \"../definitions/generalDefinitions\";\r\n\r\nexport function fetchTimerAPICheck() {\r\n  let fails = parseInt(localStorage.getItem(\"INAAPIFails\"));\r\n  fetch(appSiteAPI + \"/api/MCC_Carriers?id=1\")\r\n    .then((response) => {\r\n      //console.log(response);\r\n      response.json();\r\n    })\r\n    .then((data) => console.log(\"timer API check\"))\r\n    .catch((error) => {\r\n      if (!fails) fails = 0;\r\n      fails++;\r\n      localStorage.setItem(\"INAAPIFails\", parseInt(fails));\r\n      //console.log(error);\r\n    });\r\n\r\n  return fails;\r\n}\r\n\r\nexport function fetchAssetProjection(dataNA, assetID) {\r\n  return Promise.all([fetchAP(dataNA, assetID)]);\r\n}\r\n\r\nfunction fetchAP(dataNA, assetID) {\r\n  let url = appSiteAPI + \"/api/NA_AssetProjection/\";\r\n  let dataAsset = {};\r\n\r\n  if (assetID === undefined) assetID = 0;\r\n  dataAsset.lives = dataNA.lives;\r\n  dataAsset.asset = dataNA.assets[assetID - 1];\r\n  dataAsset.projectionSettings = dataNA.projectionSettings;\r\n  dataAsset.ratesPack = dataNA.ratesPack;\r\n  /* \r\n dataAsset.asset.incomeRate= 0.0;\r\n            dataAsset.asset.contributionAmt= 1000;\r\n            dataAsset.asset.contributionStartYr= 1;\r\n            dataAsset.asset.contributionDur= 20;  */\r\n\r\n   return fetch(url, {\r\n    method: \"POST\",\r\n    //\t\t\tredirect: 'follow',\r\n    //\t\t\tcredentials: 'same-origin',\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(dataAsset),\r\n  })\r\n    .then((response) => {\r\n      if (response.ok === false) {\r\n        throw Error(response.statusText);\r\n      }\r\n      return response;\r\n    })\r\n    .then((response) => response.json())\r\n    .then((data) => {\r\n      return data;\r\n    })\r\n    .catch((error) => {\r\n      console.log(\"handleAssetProjection failed: \" + error);\r\n      // this.setState({failedAPI: true});\r\n    });\r\n}\r\n\r\nexport function fetchMCCData(dataNA, insNeed) {\r\n  return Promise.all([fetchMCC(dataNA, insNeed)]);\r\n}\r\n\r\nfunction fetchMCC(dataNA, insNeed) {\r\n  // let dataMCC=readMCCData(dataNA, 48,insNeed);\r\n\r\n  let url = appSiteAPI + \"/api/MCC_OutputArrays/\";\r\n  // console.log(url, dataNA);\r\n\r\n  return fetch(url, {\r\n    method: \"POST\",\r\n    //\t\t\tredirect: 'follow',\r\n    //\t\t\tcredentials: 'same-origin',\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(dataNA),\r\n  })\r\n    .then((response) => {\r\n      if (response.ok === false) {\r\n        throw Error(response.statusText);\r\n      }\r\n      return response;\r\n    })\r\n    .then((response) => response.json())\r\n    .then((data) => {\r\n      // console.log(data);\r\n      return data;\r\n    })\r\n    .catch((error) => {\r\n      console.log(\"handleFetchMCCData failed: \" + error);\r\n      // this.setState({failedAPI: true});\r\n    });\r\n}\r\n\r\n\r\n//async function fetchTaxRate1(appSiteAPI, type, province) {\r\nexport async function getTaxRate(type, province) {\r\n  try {\r\n    let taxRate = await fetch(\r\n      appSiteAPI + \"/api/RATES?type=\" + type + \"&province=\" + province\r\n    );\r\n    let data = await taxRate.json();\r\n    // console.log(data)\r\n\r\n    return (Math.round(parseFloat(data) * 10000) / 10000).toFixed(4);\r\n  } catch (error) {\r\n    console.log(\"error, rates API failed\", error);\r\n  }\r\n}\r\n\r\nexport async function fetchGovBenefits(dataNA, provincekey) {\r\n  try {\r\n    if (provincekey !== undefined) {\r\n      dataNA.projectionSettings.province = provincekey;\r\n      dataNA.lives[1].isQC = provincekey === \"QC\" ? true : false;\r\n    }\r\n    let url = appSiteAPI + \"/api/NA_GovBenefits/\";\r\n    let govBenefits = await fetch(url, {\r\n      method: \"POST\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(dataNA),\r\n    });\r\n    let data = await govBenefits.json();\r\n    // console.log(data)\r\n\r\n    return {\r\n      cpp: data[0].Values[0],\r\n      cppDB: Math.round(data[1].Values[0]),\r\n      orphan: Math.round(data[2].Values[0]),\r\n    };\r\n  } catch (error) {\r\n    console.log(\"error, InsuranceNeedsData API failed\", error);\r\n  }\r\n}\r\n\r\nexport async function fetchInsuranceNeedsData(dataNA, provincekey) {\r\n  try {\r\n    if (provincekey !== undefined) {\r\n      dataNA.projectionSettings.province = provincekey;\r\n      dataNA.lives[1].isQC = provincekey === \"QC\" ? true : false;\r\n    }\r\n    let url = appSiteAPI + \"/api/NA_OutputAll/\";\r\n    let insuranceNeedsData = await fetch(url, {\r\n      method: \"POST\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(dataNA),\r\n    });\r\n    let data = await insuranceNeedsData.json();\r\n  //  console.log(dataNA, data)\r\n\r\n    return {\r\n      ages: data[1],\r\n      govCF: data[3],\r\n      personalCF: data[4],\r\n      needs: data[5],\r\n      shortfall: data[6],\r\n      cpp: data[7].Values[0],\r\n      cppDB: Math.round(data[8].Values[0]),\r\n      orphan: Math.round(data[9].Values[0]),\r\n      lifeExp: Math.round(data[12].Values[0]),\r\n      lifeExpClient: Math.round(data[13].Values[0]),\r\n      lifeExpJLTD: Math.round(data[14].Values[0]),\r\n      provinceMargTax: data[15].Values[0],\r\n      dataTaxLiability: data[16],\r\n      encryptedInput: data[17].Values[0],\r\n      probate: data[18],\r\n    };\r\n  } catch (error) {\r\n    console.log(\"error, InsuranceNeedsData API failed\", error);\r\n  }\r\n}\r\n\r\nexport async function handleFetchInsuranceNeeds(dataNA, dataP) {\r\n  try {\r\n    console.log(\"Data sent to POST:\");\r\n    // console.log(dataNA);\r\n\r\n    let url = appSiteAPI + \"/api/NA_InsuranceNeeds/\";\r\n    let insuranceNeeds = await fetch(url, {\r\n      method: \"POST\",\r\n      //\t\t\tredirect: 'follow',\r\n      //\t\t\tcredentials: 'same-origin',\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(dataNA),\r\n    });\r\n\r\n    let data = await insuranceNeeds.json();\r\n   \r\n    return data;\r\n  } catch (error) {\r\n    console.log(\"handleFetchInsuranceNeeds failed: \", error);\r\n  }\r\n}\r\n\r\n/* export async function fetchTaxRate(appSiteAPI, type, province) {\r\n  await fetch(\r\n    appSiteAPI +\r\n      \"/api/RATES?type=\" +\r\n      type +\r\n      \"&province=\" +\r\n      province\r\n  )\r\n    .then(response => response.json())\r\n    .then(data => {\r\n      console.log(data);\r\n      return data;\r\n    })\r\n    .catch(error => {\r\n      console.log(\"error, rates API failed\", error);\r\n    });\r\n}\r\n\r\n */\r\n\r\n// BEGIN TEMPALTE\r\n// THIS IS THE WAY TO MAKE SURE DATA HAS COME BACK FROM API\r\n// IN THE CALLING MODULE\r\n/* updateClientTaxLiability = async () => {\r\n    let dataNA = this.props.getAssetProjection();\r\n    let appSiteAPI = \"http://localhost:8082\";\r\n    let data = await fetchAssetProjection2(appSiteAPI, dataNA, this.props.id);\r\n    console.log(data);\r\n    if (data !== undefined) {\r\n      console.log(data[ASSET_API_OUTPUT_TaxPayable].numericValues[0]);\r\n\r\n      return data[ASSET_API_OUTPUT_TaxPayable].numericValues;\r\n    }\r\n  }; */\r\n\r\n// USE componentDidUpdate IF NEED TO UPDATE SOMETHING BASED ON THE LATEST VALUE OF ANOTHER AFTER setState or changed props\r\n// componentDidUpdate= async (prevProps, prevState) => {\r\n\r\n// FETCH\r\nexport async function fetchAssetProjection2(dataNA, assetID) {\r\n  try {\r\n    let url = appSiteAPI + \"/api/NA_AssetProjection/\";\r\n    let dataAsset = {};\r\n\r\n    if (assetID === undefined) assetID = 0;\r\n    dataAsset.lives = dataNA.lives;\r\n    dataAsset.asset = dataNA.assets[assetID - 1];\r\n    dataAsset.projectionSettings = dataNA.projectionSettings;\r\n    dataAsset.ratesPack = dataNA.ratesPack;\r\n    //   console.log(dataAsset);\r\n\r\n    let dataProj = await fetch(url, {\r\n      method: \"POST\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(dataAsset),\r\n    });\r\n\r\n    let data = await dataProj.json();\r\n    //      console.log(data);\r\n    return data;\r\n  } catch (error) {\r\n    console.log(\"error, Asset proj API failed\", error);\r\n  }\r\n}\r\n// END TEMPALTE\r\n\r\nasync function asyncAPICall(dataNA, assetID) {\r\n  let data = await fetchAssetProjection2(dataNA, assetID);\r\n  // console.log(data);\r\n  if (data !== undefined) {\r\n    //   console.log(data);\r\n\r\n    return data; //[ASSET_API_OUTPUT_TaxPayable].numericValues;\r\n  }\r\n}\r\n\r\n/* async function fetchAssetProjectionAPI2 (appSiteAPI,dataNA, assetID){\r\n  let data = await asyncAPICall(appSiteAPI, dataNA, assetID);\r\n\r\n  return data\r\n}\r\n */\r\nexport async function fetchAssetProjectionAPI(dataNA, assetID) {\r\n   let dataProjection = {\r\n    dataColTitles: [],\r\n    dataValues: [],\r\n  };\r\n  // console.log(appSiteAPI,dataNA, assetID);\r\n\r\n  //let data =await fetchAssetProjectionAPI2(appSiteAPI, dataNA, assetID);\r\n  let data = await asyncAPICall(dataNA, assetID);\r\n\r\n  return data;\r\n\r\n}\r\n\r\nexport async function fetchAssetFMVandTaxLiab(dataNA, assetID) {\r\n  let dataProjection = {\r\n    FMV: [],\r\n    TaxLiab: [],\r\n  };\r\n  let data = await asyncAPICall(dataNA, assetID);\r\n  if (data[0] !== undefined) {\r\n    dataProjection.FMV = data[ASSET_API_OUTPUT_FMV].numericValues;\r\n    dataProjection.TaxLiab = data[ASSET_API_OUTPUT_TaxPayable].numericValues;\r\n  }\r\n  //console.log(dataProjection);\r\n  return dataProjection;\r\n}\r\n\r\nexport async function fetchAssetAllGridColumns(dataNA, assetID) {\r\n  let data = await asyncAPICall(dataNA, assetID);\r\n  //console.log(data);\r\n  return data;\r\n}\r\n\r\nexport async function handleFetchInsuranceNeedsNew(dataNA, dataInput) {\r\n  try {\r\n    let url = appSiteAPI + \"/api/NA_InsuranceNeeds/\";\r\n\r\n    let data = await fetch(url, {\r\n      method: \"POST\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(dataNA),\r\n    });\r\n\r\n    let dataINA = await data.json();\r\n    // console.log(data)\r\n\r\n    let dataDetails = await fetchInsuranceNeedsData(\r\n      dataNA,\r\n      dataInput.Presentations[0].provincekey\r\n    );\r\n\r\n    if (dataINA !== undefined && dataDetails !== undefined) {\r\n       console.log(\"POST: NA_OutputAll success\");\r\n       return {\r\n        dataInsuranceNeeds: dataINA,\r\n        dataNAAges: dataDetails.ages,\r\n        dataCashFlowGov: dataDetails.govCF,\r\n        dataCashFlowPersonal: dataDetails.personalCF,\r\n        dataCashFlowNeeds: dataDetails.needs,\r\n        dataShortfall: dataDetails.shortfall,\r\n        cpp: dataDetails.cpp,\r\n        cppDB: dataDetails.cppDB,\r\n        orphan: dataDetails.orphan,\r\n        probate: dataDetails.probate,\r\n        lifeExp: dataDetails.lifeExp,\r\n        lifeExpClient: dataDetails.lifeExpClient,\r\n        lifeExpJLTD: dataDetails.lifeExpJLTD,\r\n        provinceMargTax: dataDetails.provinceMargTax,\r\n        dataTaxLiability: dataDetails.dataTaxLiability,\r\n        encryptedInput: dataDetails.encryptedInput,\r\n      };\r\n    }\r\n  } catch (error) {\r\n    console.log(\"error, rates API failed\", error);\r\n  }\r\n}\r\n\r\nexport async function handleFetchQueryStringSave(dataNA) {\r\n  //console.log(dataNA);\r\n\r\n  let url = appSiteAPI + \"/api/NA_QS/\";\r\n\r\n  fetch(url, {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(dataNA),\r\n  })\r\n    .then((response) => {\r\n      if (response.ok === false) {\r\n        throw Error(response.statusText);\r\n      }\r\n      return response;\r\n    })\r\n    .then((response) => response.json())\r\n    .then((data) => {\r\n      if (data !== undefined) {\r\n        //console.log(data);\r\n\r\n        return data;\r\n      }\r\n    })\r\n    .catch((error) => {\r\n      console.log(\"handleFetchQueryString failed: \" + error);\r\n      // this.setState({failedAPI: true});\r\n    });\r\n}\r\n\r\nexport async function handleFetchLoadFromQueryString(contentsFile) {\r\n\r\n  fetch(appSiteAPI + \"/api/NA_QS?QS=\" + contentsFile)\r\n    .then((response) => {\r\n      if (response.ok === false) {\r\n        throw Error(response.statusText);\r\n      }\r\n      return response;\r\n    })\r\n    .then((response) => response.json())\r\n    .then(async (data) => {\r\n    \r\n      return data;\r\n    })\r\n    .catch((error) => {\r\n      console.log(\"handleFetchLoadFromQueryString failed: \" + error);\r\n    });\r\n}\r\n\r\nexport async function handleFetchINADataFromQueryString(savedINA) {\r\n  try {\r\n    let url = appSiteAPI + \"/api/NA_QS?QS=\" + savedINA;\r\n    \r\n    try {\r\n      let savedData = await fetch(url);\r\n      let data = await savedData.json();\r\n      \r\n      return data;\r\n    } catch (error) {\r\n      console.log(\"error, handleFetchINADataFromQueryString failed\", error);\r\n    }\r\n  } catch (error) {\r\n    console.log(\"error, handleFetchINADataFromQueryString\", error);\r\n  }\r\n}\r\n\r\n\r\nexport async function handleFetchQueryString2(dataNA){\r\n\r\n  //const lang=this.state.dataInput.Presentations[0].language\r\n  /* console.log(\r\n    this.state.dataOutput.dataInsuranceNeeds[\r\n      this.state.dataInput.Presentations[0].periodOption\r\n    ].Value\r\n  ); */\r\n  /* const insuranceNeed = this.state.dataOutput.dataInsuranceNeeds[\r\n    this.state.dataInput.Presentations[0].periodOption\r\n  ].Value;\r\n  let dataNA = setUIDataToAPI(this.state.dataInput, insuranceNeed); */\r\n  //console.log(dataNA);\r\n\r\n  let url = appSiteAPI + \"/api/NA_QS/\";\r\n\r\n  //this.setState({ ...this.state });\r\n  await fetch(url, {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(dataNA),\r\n  })\r\n    .then((response) => {\r\n      if (response.ok === false) {\r\n        throw Error(response.statusText);\r\n      }\r\n      return response;\r\n    })\r\n    .then((response) => response.json())\r\n    .then((data) => {\r\n      if (data !== undefined) {\r\n        return data;\r\n\r\n        /* this.dataQS = data;\r\n        if (mode === MODE_SAVE) this.setState({ showMsg: true });\r\n        else if (mode === MODE_EMAIL){\r\n       let url=\"mailto: ?subject= \" +  (appletMode===\"INA\"?TITLES[lang].appletINA:TITLES[lang].appletEP) + \" &body= \" + (EMAIL[lang].body+ \".%0D%0A\"  + appSiteParent + \"?applet=EP\\&QS=\" + this.dataQS);\r\n       /* const s1 =\"?applet=EP\"\r\n       const s2=\"&QS=\" + this.dataQS\r\n        url=\"mailto: ?subject= Needs Analysis Quote &body=The following link takes you to the landing page of Toolkit Direct. Once there, click on Insurance Needs Analysis to open up the attached quote.%0D%0A\" +\r\n        + appSiteParent + [\"applet=EP\",\"QS=\" + this.dataQS].join('&')\r\n*/\r\n\r\n      //  const ft=appSiteParent + \"/?\" + [\"applet=\"+appletMode , \"QS=\"+this.dataQS].join('&')\r\n        /* url=\"mailto: ?subject= Needs Analysis Quote &body= The following link takes you to the landing page of Toolkit Direct. Once there, click on Insurance Needs Analysis to open up the attached quote.%0D%0A\" +\r\n        encodeURIComponent(ft) */\r\n       // url=\"mailto: ?subject= \" +  (appletMode===\"INA\"?TITLES[lang].appletINA:TITLES[lang].appletEP) + \" &body= \" + EMAIL[lang].body+ \".%0D%0A\"  + encodeURIComponent(ft)\r\n\r\n        //return url;\r\n       // console.log(url)\r\n        //  window.location.href = url; */\r\n        }\r\n      }\r\n    )\r\n    .catch((error) => {\r\n      console.log(\"handleFetchQueryString failed: \" + error);\r\n      // this.setState({failedAPI: true});\r\n      return \"\";\r\n    });\r\n};\r\n\r\nexport async function handleFetchQueryString(dataNA){\r\n\r\n  try {\r\n    const url = appSiteAPI + \"/api/NA_QS/\";\r\n  let fetchData = await fetch(url, {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(dataNA),\r\n  })\r\n  let data = await fetchData.json();\r\n  if (data !== undefined)\r\n        return data;\r\n } catch (error) {\r\n    console.log(\"handleFetchQueryString\", error);\r\n  }\r\n}\r\n\r\nexport async function handleFetchPDF(){\r\n\r\n  try {\r\n    const dataNA={\r\n      Html:\"<span>goh</span>\",\r\n      Css:\".canvas-containerWeb {Height: 20vh;}\"\r\n      \r\n      }\r\n\r\n      console.log( JSON.stringify(dataNA))\r\n    const url = appSiteAPI + \"/api/TKD_PDFGenerator/\";\r\n  let fetchData = await fetch(url, {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(dataNA),\r\n  })\r\n  let data = await fetchData.json();\r\n  if (data !== undefined){\r\n        console.log(data)\r\n        return data;}\r\n } catch (error) {\r\n    console.log(\"handleFetchQueryString\", error);\r\n  }\r\n}\r\n\r\n\r\nexport async function fetchValidateTokenGetAgentEmailFromDB(authToken, applet){\r\n  /* \r\n  try {\r\n    const url = appSiteAPI + \"/api/TKD_ValidateJWT?authToken=\" + authToken;\r\n    console.log(url)\r\n    \r\n    let agentInfo = {email:\"\",guid:\"\"} \r\n    agentInfo = await fetch(url);\r\n    \r\n    \r\n    return (agentInfo.json());\r\n  } catch (error) {\r\n    console.log(\"error, fetchGetAgentEmailFromDB failed\", error);\r\n  }\r\n */\r\n\r\n  try {\r\n    const url = appSiteAPI + \"/api/TKD_ValidateJWT\";//?authToken=\";\r\n    let jwt = {\"authToken\": authToken, \"applet\":applet} \r\n\r\n    let fetchData = await fetch(url, {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(jwt)\r\n  })\r\n   let data = await fetchData.json();\r\n  if (data !== undefined)\r\n  {\r\n    console.log(data)\r\n    return data;\r\n  }\r\n } catch (error) {\r\n    console.log(\"fetchValidateTokenGetAgentEmailFromDB\", error);\r\n  }\r\n}\r\n","import { appletMode } from \"../../package.json\";\r\nimport {\r\n  ASSETS,\r\n  ASSET_TAX,\r\n  ASSET_OWNERSHIP_ACTION,\r\n  INCOMESOURCES,\r\n  LIABILITIES,\r\n  OWNERSHIP,\r\n  GROWTHDIR,\r\n  INCOMENEEDS,\r\n  PROVINCE,\r\n  APPLET_INA,\r\n  OUTPUT_WIDTH_PCT,\r\n  DEFAULT_QUOTE\r\n} from \"../definitions/generalDefinitions\";\r\n\r\nimport {\r\n  SEX,\r\n  SMOKING,\r\n  MEMBER,\r\n  DEFAULT_DIVIDEND_TAX_RATE,\r\n  DEFAULT_AVG_TAX_RATE,\r\n  DEFAULT_CLIENT_AGE,\r\n  DEFAULT_SPOUSE_AGE,\r\n  DEFAULT_SPOUSE_SALARY,\r\n  DEFAULT_CLIENT_SALARY,\r\n  DEFAULT_SPOUSE_CPP,\r\n  DEFAULT_CLIENT_CPP,\r\n  DEFAULT_SPOUSE_RETIREMENT,\r\n  DEFAULT_CLIENT_RETIREMENT,\r\n  DEFAULT_PROVINCE,\r\n  DEFAULT_INFLATION,\r\n  DEFAULT_INVESTMENT,\r\n  DEFAULT_NEED_PERCENT1,\r\n  DEFAULT_NEED_PERCENT2,\r\n  QUOTE_CLIENT,\r\n  QUOTE_SPOUSE,\r\n  DEFAULT_RRIF_AGE,\r\n  appSiteAPI,\r\n  DISPLAY_RETIREMENT,\r\n  DISPLAY_LIFEEXP,\r\n  DISPLAY_ENDAGE,\r\n  DISPLAY_LIFEEXP_PLUS_3,\r\n  ORPHAN_AGE_QC,\r\n  ORPHAN_AGE_NON_QC,\r\n  MAX_ORPHAN_DUR_QC,\r\n  MAX_ORPHAN_DUR_NON_QC,\r\n  UNIVERSITY_START_AGE,\r\n  UNIVERSITY_END_AGE,\r\n  DISPLAY_PRESENTATION,\r\n} from \"../definitions/generalDefinitions\";\r\nimport { versionDetails, getDefaultImages } from \"../utils/helper\";\r\nimport {loadDefaultCase} from \"../data/dataExchange\";\r\n\r\n\r\nexport function createDefaultAsset(id) {\r\n  let asset = {\r\n    id: id,\r\n    assetTypeKey: ASSETS.PERSONAL_RESIDENCE.Key,\r\n    description: \"\",\r\n    ownerKey: appletMode===\"EP\" ?ASSET_OWNERSHIP_ACTION.CLIENT_ROLLOVER.Key:ASSET_OWNERSHIP_ACTION.JOINT.Key,\r\n    currValue: 0,\r\n    assetTaxTypeKey: ASSET_TAX.NON_TAXABLE.Key,\r\n    growth: 0,\r\n    DisposeYr: 99,\r\n    DisposeDur: 1,\r\n    ACB: 0,\r\n    smallBusinessCapGainExemption: 0,\r\n    contributionAmt: 0,\r\n    contributionStartYr: 0,\r\n    contributionDur: 0,\r\n    withdrawalAmt: 0,\r\n    withdrawalStartYr: 1,\r\n    withdrawalDur: 0,\r\n    incomeRate: 0,\r\n    RRIFStartAge: DEFAULT_RRIF_AGE,\r\n    projection: null,\r\n  };\r\n  return asset;\r\n}\r\n\r\nexport function copyFromAnotherAsset(anotherAsset) {\r\n  return JSON.parse(JSON.stringify(anotherAsset));\r\n}\r\n\r\nexport function copyFromAnotherObject(sourceObject) {\r\n  return JSON.parse(JSON.stringify(sourceObject));\r\n}\r\nexport function createDefaultClient(id) {\r\n  const defaultClient1 = {\r\n    id: 1,\r\n    Age: DEFAULT_CLIENT_AGE,\r\n    sexKey: SEX.MALE.Key, //[\"en\"].Values[0],\r\n    smokerKey: SMOKING.NON_SMOKER.Key,\r\n    Income: DEFAULT_CLIENT_SALARY,\r\n    avgTaxRate: DEFAULT_AVG_TAX_RATE,\r\n    //  member: MEMBER.CLIENT.value[\"en\"],\r\n    memberKey: MEMBER.CLIENT.Key,\r\n    retirementAge: DEFAULT_CLIENT_RETIREMENT,\r\n    Eligibility: DEFAULT_CLIENT_CPP,\r\n    Name: \"\",\r\n  };\r\n  const defaultClient2 = {\r\n    id: 2,\r\n    Age: DEFAULT_SPOUSE_AGE,\r\n    //Sex: SEX[\"en\"].Values[1],\r\n    sexKey: SEX.FEMALE.Key, //[\"en\"].Values[0],\r\n    smokerKey: SMOKING.NON_SMOKER.Key,\r\n    Income: DEFAULT_SPOUSE_SALARY,\r\n    avgTaxRate: DEFAULT_AVG_TAX_RATE,\r\n    //member: MEMBER.SPOUSE.value[\"en\"],\r\n    memberKey: MEMBER.SPOUSE.Key,\r\n    retirementAge: DEFAULT_SPOUSE_RETIREMENT,\r\n    Eligibility: DEFAULT_SPOUSE_CPP,\r\n    Name: \"\",\r\n  };\r\n  const child = {\r\n    id: id, //this.state.dataInput.clientsNo,\r\n    Age: 1,\r\n    sexKey: SEX.MALE.Key,\r\n    smokerKey: SMOKING.NON_SMOKER.Key,\r\n    Income: 0,\r\n    avgTaxRate: 0.0,\r\n    memberKey: MEMBER.CHILD.Key,\r\n    retirementAge: 65,\r\n    Eligibility: 0,\r\n    Name: \"\",\r\n  };\r\n  if (id === 1) return defaultClient1;\r\n  else if (id === 2) return defaultClient2;\r\n  else return child;\r\n}\r\n\r\nexport function createDefaultSource(id) {\r\n  const defaultSource = {\r\n    id: id,\r\n    //Type: INCOMESOURCES.SURVIVORS_INCOME.value[\"en\"],\r\n    sourceTypeKey: INCOMESOURCES.SURVIVORS_INCOME.Key,\r\n    amount: DEFAULT_SPOUSE_SALARY,\r\n    startYear: 0,\r\n    duration: DEFAULT_SPOUSE_RETIREMENT - DEFAULT_SPOUSE_AGE,\r\n    ownerID: 2,\r\n    taxRate: DEFAULT_AVG_TAX_RATE,\r\n    growthRate: DEFAULT_INFLATION,\r\n  };\r\n  return defaultSource;\r\n}\r\n\r\nexport function createDefaultLiab(id) {\r\n  const defaultLiab = {\r\n    id: id,\r\n    //Type: LIABILITIES.LAST_EXPENSES.value[\"en\"],\r\n    liabTypeKey: LIABILITIES.PROBATE.Key,//.LAST_EXPENSES.Key,\r\n    description: \"\",\r\n    ownerKey: OWNERSHIP.CLIENT.Key,\r\n    currValue: 0,\r\n    //growthDir: GROWTHDIR[\"en\"].Values[0], //increases\r\n    growthDirKey: GROWTHDIR.GROWS.Key, //increases\r\n    growth: 0,\r\n    repay: 0,\r\n    exposureDur: 99,\r\n    assetTaxLiabID: 0,\r\n    assetTaxLiabProj: [],\r\n  };\r\n  return defaultLiab;\r\n}\r\n\r\nexport function createDefaultNeed(id) {\r\n  const defaultNeed1 = {\r\n    id: 1,\r\n    needTypeKey: INCOMENEEDS.PERCET_OF_INCOME.Key,\r\n    Percent: DEFAULT_NEED_PERCENT1,\r\n    amount:\r\n      (DEFAULT_NEED_PERCENT1 *\r\n        (DEFAULT_SPOUSE_SALARY + DEFAULT_CLIENT_SALARY) *\r\n        (1 - DEFAULT_AVG_TAX_RATE / 100)) /\r\n      100,\r\n    startYear: 0,\r\n    duration: DEFAULT_SPOUSE_RETIREMENT - DEFAULT_SPOUSE_AGE,\r\n  };\r\n  const defaultNeed2 = {\r\n    id: id,\r\n    needTypeKey: INCOMENEEDS.PERCET_OF_INCOME.Key,\r\n    Percent: DEFAULT_NEED_PERCENT2,\r\n    amount:\r\n      (DEFAULT_NEED_PERCENT2 *\r\n        (DEFAULT_SPOUSE_SALARY + DEFAULT_CLIENT_SALARY) *\r\n        (1 - DEFAULT_AVG_TAX_RATE / 100)) /\r\n      100,\r\n    startYear: DEFAULT_SPOUSE_RETIREMENT - DEFAULT_SPOUSE_AGE,\r\n    duration: 100,\r\n  };\r\n  if (id === 1) return defaultNeed1;\r\n  else return defaultNeed2;\r\n}\r\n\r\nexport function createDefaultPres(id, tax) {\r\n  const images=getDefaultImages()\r\n  const defaultPres = {\r\n    id: id,\r\n    provinceKey: PROVINCE.BC.Key,\r\n    invRate: DEFAULT_INVESTMENT,\r\n    inflation: DEFAULT_INFLATION,\r\n    taxRate: tax,\r\n    designedFor: \"\",\r\n    designedBy: \"\",\r\n    valuationDate: new Date(),\r\n    presentationDate: new Date(),\r\n    notes: \"\",\r\n    version: versionDetails().version,\r\n    periodOption: APPLET_INA ? DISPLAY_RETIREMENT : DISPLAY_ENDAGE,\r\n    language: global.langFr? \"fr\" : \"en\",// \"en\",\r\n    resultsOption: DISPLAY_PRESENTATION,\r\n    adviserLogo: images.adviserLogo,// {image:null, left: 0,size: OUTPUT_WIDTH_PCT, allPages: false, top:true, showDetails:false},\r\n    appletImage:images.appletImage ,//{image:APPLET_INA? require(\"../images/INA.png\"):require(\"../images/estate.protection.applet.cover.graphic.png\"), left: 0,size: OUTPUT_WIDTH_PCT, allPages: false, top:true, showDetails:false},\r\n  };\r\n  return defaultPres;\r\n}\r\n\r\n\r\nexport function getDefaultData(){\r\n  let dataInput;\r\n \r\n  if(localStorage.getItem(DEFAULT_QUOTE)===null)\r\n  {\r\n    dataInput= getDefaultCase()\r\n\r\n    }\r\n    else\r\n{\r\n  try {\r\n    dataInput=loadDefaultCase()  \r\n  } catch (error) {\r\n    dataInput= getDefaultCase()\r\n  }  \r\n  \r\n}\r\nreturn dataInput;\r\n}\r\n\r\nfunction getDefaultCase()\r\n{\r\n  let dataInput;\r\n  let defaultClients = [];\r\ndefaultClients.push(createDefaultClient(1));\r\nif (APPLET_INA) defaultClients.push(createDefaultClient(2));\r\nlet defaultAssets = [];\r\ndefaultAssets.push(createDefaultAsset(1));\r\nlet defaultSources =[]\r\nif (APPLET_INA) defaultSources.push(createDefaultSource(1));\r\n \r\nconst defaultLiab = [createDefaultLiab(1)];\r\nlet defaultNeeds = [];\r\ndefaultNeeds.push(createDefaultNeed(1));\r\ndefaultNeeds.push(createDefaultNeed(2));\r\nconst defaultPresentation = [createDefaultPres(1, 0)];\r\n\r\n// build state with defaults\r\ndataInput={      \r\n    Clients: defaultClients, //, clientsNo: defaultClients.length },\r\n    Assets: defaultAssets, //, assetsNo: defaultAsset.length },\r\n    Liabilitys: defaultLiab, //, liabilitysNo: 1 },\r\n    Sources: defaultSources, //, sourcesNo: 1 },\r\n    Needs: defaultNeeds, //,  needsNo: 2},\r\n    Presentations: defaultPresentation, //, presentationsNo: 1 },\r\n  }\r\n  return dataInput;\r\n}","export const OUTPUTTEXT = {\r\n  en: {\r\n    insNeeds100: \"Insurance Needs to age 100\",\r\n    insNeedsRet: \"Insurance Needs to retirement (age \",\r\n    insNeedsRetLE: \"Insurance Needs to life expectancy (age \",\r\n    insNeedsSingleFamily: \"Insurance Needs for a Single Parent with Protection Period of \",\r\n    insNeedsSinglePerson: \"Insurance Needs for a Single Person with Protection Period of \",\r\n    years: \" years\",\r\n    addSurvivor: \"Survivors need to be added under Family Profile. Single Person 'Insurance Needs' is coming soon!\",\r\n    pg1T: \"Insurance Needs Analysis - Estate\",\r\n    pg1P1: \"Designed for:\",\r\n    pg1P2: \"Designed by:\",\r\n    pg1P3: \"Date: \",\r\n    pg1P4: \"Province:\",\r\n    pg2TabT1: \"Family Profile\",\r\n    pg2TabT1_1: \"Profile\",\r\n    pg2TabT2: \"Age\",\r\n    pg2TabT3: \"Annual Income\",\r\n    pg2TabT4: \"Retirement Age\",\r\n    pg2TabT4Alt: \"Protection Period\",\r\n    pg2TabT5: \"Avg. Tax Rate\",\r\n    pg2TabT6: \"Marginal Tax Rate\",\r\n    pg2T2: \"Assumptions\",\r\n    /* pg3T: \"Family Cash Needs at Death\", */\r\n    pg2Tab2: \"Needs Analysis is always done for the family member 'Client'\",\r\n    pg2Tab2_1: \"Needs Analysis is always done for 'Client'\",\r\n    pg2Tab3: \"Using these factors the total capital required to generate an inflation indexed income thus depleting all capital at the end of the desired insurance time period is calculated. This amount is based on the present value of shortfalls, discounted at the after tax investment rate. It is adjusted, if necessary to make sure early shortfalls are provided for\",\r\n    pg2T3: \"Financial Summary\",\r\n    pg2P5:\"Total Assets (excluding insurance)\",\r\n    pg2P6: \"Total Liabilities (excluding death related)\",//OUTPUTTEXT[lang].pg7TabRow4,\r\n    pg2P7: \"Net Worth\",//OUTPUTTEXT[lang].pg7TabRow4,\r\n    pg2P8: \"Total insurance available at death, yyy of which is taxable\",//OUTPUTTEXT[lang].pg7TabRow4, //  + output.govDB already part of totalassets\r\n    pg2P9: \"Total death related liabilities\",\r\n    pg2P10: \"Additional Life Insurance for Client\",\r\n    pg2P12: \"This is a good opportunity to consider life insurance for Spouse as well (survivor now changes)\",\r\n    pg2P11: \"Life Insurance for Spouse NAME in addition to:\",\r\n    \r\n    pg3T: \"Family Cash and Income Needs\",\r\n    pg3T_1: \"Estate Cash and Income Needs\",\r\n    pg3P1:\r\n      \"When you die, your family will face two important money needs, a need for Cash and a need for Income. While some cash needs are temporary, others are required at all stages of life.\",\r\n    pg3P1_1:\r\n      \"When you die, your Estate will face two important money needs, a need for Cash and a need for Income. While some cash needs are temporary, others are required at all stages of life.\",\r\n    pg3TabT: \"Cash Needs\",\r\n    pg3TabRTot: \"Total\",\r\n    /* pg4T: \"Family Income Needs\", */\r\n    pg4T: \"\",\r\n    /* pg4P1: \"When you die, your family will face two important money needs, a need for Cash and a need for Income.\", */\r\n    pg4P1: \"Continued ...\",\r\n    pg4TabT: \"Income Needs\",\r\n    pg4TabRow1: \"Current Total Annual Family Income\",\r\n    pg4TabRow1_1: \"Current Total Annual Income\",\r\n    pg4TabRow2:\r\n      \"Percentage of this income you want your family to have to maintain your present standard of living for these time periods is:\",\r\n    pg4TabRow2_1:\r\n      \"Percentage of this income you want your Estate to have for these time periods is:\",\r\n    //pg4TabRow3: \"While more income is required\",\r\n    //pg4TabRow4: \"For survivor thereafter\",\r\n    pg4TabRow5: \"Therefore your desired after-tax income is:\",\r\n    pgTabRowMoreIncome: \"While more income is required\",\r\n    pgTabRowThereAfter: \"For the survivor thereafter\",\r\n    pgTabRowThereAfter_1: \"For the Estate thereafter\",\r\n    //pgTabRowThereAfter: \"For the survivor thereafter\",\r\n    pg5T: \"Family Cash Sources\",// at Death\",\r\n    pg5T_1: \"Estate Cash Sources\",// at Death\",\r\n    pg5TabT: \"Cash Sources\",\r\n    pg5TabT2: \"All\", \r\n    pg5TabT3: \"At Death\",\r\n    pg5TabRow1: \"CPP/QPP Lump Sum Death Benefit\",\r\n    pg5TabRow3: \"Total Cash Available\",\r\n    pg5TabRow4: \"Less Family Cash needs at Death\",\r\n    pg5TabRow4_1: \"Less Estate Cash needs at Death\",\r\n    pg5TabRow5:\r\n      \"Surplus Cash available to produce income for surviving members of the family\",\r\n    pg5TabRow5_1:\r\n      \"Surplus Cash available to produce income for the Estate\",\r\n    pg6T: \"Family Income Sources\",// at Death\",\r\n    pg6T_1: \"Estate Income Sources\",// at Death\",\r\n    pg6TabT: \"Income Sources\",\r\n    pg6TabRow1:\r\n      \"Therefore the total annual income available for this time period is:\",\r\n    //pg6TabRow2: \"While more income is required\",\r\n    //pg6TabRow3: \"For survivor thereafter\",\r\n    pg5TabRow7: \"For surviving members of the family\",\r\n    pg5TabRow7_1: \"For the Estate\",\r\n    pg6TabRow4:\r\n      \"The additional after tax income required (desired income less income available) for this time period is:\",\r\n    //pg6TabRow5: \"While more income is required\",\r\n    //pg6TabRow6: \"For survivor thereafter\",\r\n    pg6Net: \"net \",\r\n    pg7T: \"Life Insurance Analysis\",\r\n    pg7TabT: \"Your Family Income Position at Death\",\r\n    pg7TabT_1: \"Your Estate Income Position at your Death\",\r\n    pg7TabRow1:\r\n      \"The additional  after tax income required (desired income less income available) for this time period is:\",\r\n    //pg7TabRow2: \"While more income is required\",\r\n    //pg7TabRow3: \"For survivor thereafter\",\r\n    pg7TabRow4: \"Rate of inflation you think will continue\",\r\n    pg7TabRow5:\r\n      \"Rate of interest the survivor could earn on investments in future years\",\r\n    pg7TabRow5_1:\r\n      \"Rate of interest the Estate could earn on investments in future years\",\r\n    pg7TabRow6:\r\n      \"Using these factors the total capital required to generate an inflation indexed income thus depleting all capital at the end of this time period is:\",\r\n    pg7TabRow7: \"A.For survivor's normal life expectancy (age \",\r\n    pg7TabRow8: \"B.Until survivor retirement\",\r\n    pg7TabRow9: \"C.Until youngest child is age 25\",\r\n    pg7TabRow10: \"D.Until youngest child is age 18\",\r\n    pg8T: \"Life Insurance Analysis\",\r\n    pg8TabT: \"Your Family Financial Position at Death\",\r\n    pg8TabT_1: \"Your Estate's Financial Position at Death\",\r\n    pg8TabRow1:\r\n      \"Present surplus capital available for investment after covering cash needs is:\",\r\n    pg8TabRow2:\r\n      \"Therefore the additional  income-producing capital (i.e. Life Insurance) needed to solve the income requirement for these time periods is:\",\r\n    pg8TabRow3: \"A.For survivor's normal life expectancy (age \",\r\n    pg8TabRow4: \"B.Until survivor retirement\",\r\n    pg8TabRow5: \"C.Until youngest child is age 25\",\r\n    pg8TabRow6: \"D.Until youngest child is age 18\",\r\n    pg8TabRow4Alt: \"A.Until end of Protection Period\",\r\n    pg9T: \"Some Important Notes\",\r\n    pg9P1:\r\n      \"This presentation is for general information purposes. The information contained in this presentation must not be taken or relied upon by the reader as legal, accounting, taxation or actuarial advice. For these matters readers should seek independent professional advice. Please refer to insurance company illustrations, policy contracts and information folders regarding any insurance matters referred to in this presentation, as those documents will govern in all cases.\",\r\n    //pgFooter: \"See Some Important Notes at the end of this presentation.\",\r\n    pgFooter: \"See Some Important Notes at the end of this presentation.\",\r\n    pg10T: \"Acknowledgments\",\r\n    pg10P1:\r\n      \"I, ____________________________ acknowledge receipt of this Presentation and any quotes related to the information therein, and confirm my understanding of it as a summary and general overview of the illustrated benefits and values. I understand that the aforementioned illustrated benefits and values are neither estimates nor guarantees of future performance; and that actual results may vary based on timing, market performance, health and insurability. These values are subject to change and may differ from those illustrated.\",\r\n    pg10TabRow1: \"Signature of Client(s): ____________________\",\r\n    pg10TabRow11: \"Date: ___________\",\r\n    pg10TabRow2: \"Signature of Client(s): ____________________\",\r\n    pg10TabRow3: \"Signature of Advisor: ____________________\",\r\n    pgAppendix: \"Appendix\",\r\n    pgAppendixT:\r\n      \"INA Graphs and Spreadsheet\",\r\n      pgAppendixP1: \"Incoming cash flows (+) vs outgoing income needs (-)\",\r\n      pgAppendixP2: \"Shortfall = incoming - outgoing cash flows and is funded by insurance\",\r\n      pgAppendixP3 : \"Current financial situation\"\r\n  },\r\n  fr: {\r\n    insNeeds100: \"Besoins en assurance jusqu' l'ge de 100 ans\",\r\n    insNeedsRet: \"Besoins en assurance jusqu' la retraite(ge \",\r\n    insNeedsRetLE: \"Besoins en assurance jusqu' l'esprance de vie (ge \",\r\n    insNeedsSingleFamily: \"Besoins d'assurance pour un parent isol avec une priode de protection de \",\r\n    insNeedsSinglePerson: \"Besoins d'assurance pour un seul individu avec une priode de protection de \",\r\n    years: \" annes\",\r\n    addSurvivor: \"Les survivants doivent tre ajouts dans le profil familial. Besoins d'assurance pour un seul individu arrive bientt!\",\r\n    pg1T: \"Analyse des besoins en matire d'assurance - successorale\",\r\n    pg1P1: \"Conu pour :\",\r\n    pg1P2: \"Par:\",\r\n    pg1P3: \"Date: \",\r\n    pg1P4: \"Province:\",\r\n    pg2TabT1: \"Profil familial\",\r\n    pg2TabT1_1: \"Profil\",\r\n    pg2TabT2: \"ge\",\r\n    pg2TabT3: \"Revenu annuel\",\r\n    pg2TabT4: \"ge de la retraite\",\r\n    pg2TabT4Alt: \"Priode de protection\",\r\n    pg2T2: \"Hypothses\",\r\n    pg2Tab2: \"L'analyse des besoins est toujours faite pour le membre de la famille 'Client'\",\r\n    pg2Tab2_1: \"L'analyse des besoins est toujours faite pour le 'Client'\",\r\n    pg2Tab3: \"Ces facteurs permettent de calculer le capital total ncessaire pour gnrer un revenu index  l'inflation, le capital tant donc compltement puis  la fin de la priode d'assurance souhaite. Ce montant est bas sur la valeur actuelle des manques  gagner, actualise au taux de rendement aprs impt. Il est rajust au besoin, afin que l'on puisse s'assurer que les manques  gagner initiaux sont prvus pour.\",\r\n    \r\n    pg2TabT5: \"Taux d'imposition moyen\",\r\n    pg2TabT6: \"Taux marginal d'imposition\",\r\n   /*  pg3T: \"Besoin de liquidits pour la famille au dcs\", */\r\n    pg2T3: \"Rsum financier \",\r\n    pg2P5:\"Total des actifs (hors assurance)\",\r\n    pg2P6: \"Total des passifs (non lis au dcs)\",//OUTPUTTEXT[lang].pg7TabRow4,\r\n    pg2P7: \"Valeur nette\",//OUTPUTTEXT[lang].pg7TabRow4,\r\n    pg2P8: \"Assurance totale disponible au dcs, dont yyy imposables\",//OUTPUTTEXT[lang].pg7TabRow4, //  + output.govDB already part of totalassets\r\n    pg2P9: \"Total des passifs lis au dcs\",\r\n    pg2P10: \"Client d'assurance vie supplmentaire\",\r\n    pg2P12: \"C'est aussi une bonne occasion d'envisager une assurance-vie pour le conjoint galement (le survivant change maintenant)\",\r\n    pg2P11: \"Assurance vie pour NOM du conjoint en plus de : \",\r\n    \r\n    pg3T: \"Besoins familiaux en matire de liquidits et de revenus\",\r\n    pg3T_1: \"Besoins la succession en matire de liquidits et de revenus\",\r\n   \r\n    pg3P1:\r\n      /* \" votre dcs, votre famille fera face  deux importants besoins financiers, soient d'obtenir des liquidits ainsi que des revenus. Bien que certains besoins de liquidits soient temporaires, d'autres sont ncessaires lors de toutes les tapes de la vie, ils sont donc identifis comme 'Besoins de liquidits permanents'..\", */\r\n      \" votre dcs, votre famille fera face  deux importants besoins financiers, soient d'obtenir des liquidits ainsi que des revenus. Bien que certains besoins de liquidits soient temporaires, d'autres sont ncessaires lors de toutes les tapes de la vie.\",\r\n    pg3P1_1:\r\n      /* \" votre dcs, votre famille fera face  deux importants besoins financiers, soient d'obtenir des liquidits ainsi que des revenus. Bien que certains besoins de liquidits soient temporaires, d'autres sont ncessaires lors de toutes les tapes de la vie, ils sont donc identifis comme 'Besoins de liquidits permanents'..\", */\r\n      \" votre dcs, votre succession fera face  deux importants besoins financiers, soient d'obtenir des liquidits ainsi que des revenus. Bien que certains besoins de liquidits soient temporaires, d'autres sont ncessaires lors de toutes les tapes de la vie.\",\r\n    pg3TabT: \"Besoins de liquidits\",\r\n    pg3TabRTot: \"Total\",\r\n    /* pg4T: \"Besoin de revenus pour la famille au dcs\", */\r\n    pg4T: \"\",\r\n    /* pg4P1:\r\n      \" votre dcs, votre famille fera face  deux importants besoins financiers, soient d'obtenir des liquidits ainsi que des revenus.\",\r\n    */\r\n   pg4P1: \"Suite ... \", \r\n    pg4TabT: \"Besoins de revenus\",\r\n    pg4TabRow1: \"Montant actuel du revenu familial annuel\",\r\n    pg4TabRow1_1: \"Montant actuel du revenu annuel\",\r\n    pg4TabRow2:\r\n      \"Pourcentage du revenu souhait pour maintenir le niveau de vie actuel de votre famille pendant la priode:\",\r\n    pg4TabRow2_1:\r\n      \"Pourcentage du revenu souhait pour les besoins votre succession pendant la priode:\",\r\n    //pg4TabRow3: \"While more income is required\",\r\n    //pg4TabRow3: \"Un revenu plus lev est requis\",\r\n   \r\n    //pg4TabRow4: \"Pour le survivant par la suite\",\r\n    pg4TabRow5: \"Le revenu souhait s'lve donc :\",\r\n    pgTabRowMoreIncome: \"Un revenu plus lev est requis\",\r\n    pgTabRowThereAfter: \"Pour le survivant par la suite\",\r\n    pgTabRowThereAfter_1: \"Pour la succession par la suite\",\r\n    pg5T: \"Sources de liquidit pour la famille\",// au dcs\",\r\n    pg5T_1: \"Sources de liquidit pour la succession\",// au dcs\",\r\n    pg5TabT: \"Sources de liquidit\",\r\n    pg5TabT2: \"Tous\",\r\n    pg5TabT3: \"Au dcs\",\r\n  \r\n    pg5TabRow1:\r\n      \"Prestation de dcs forfaitaire du RPC/RRQ\",\r\n    pg5TabRow3: \"Total des liquidits disponibles\",\r\n    pg5TabRow4: \"Moinsles liquidits ncessaires au dcs de l'assur\",\r\n    pg5TabRow4_1: \"Moinsles liquidits ncessaires au dcs de l'assur\",\r\n    pg5TabRow5:\r\n      \"Excdent sur les liquidits disponibles pouvant assurer un revenu  la famille\",\r\n    pg5TabRow5_1:\r\n      \"Excdent sur les liquidits disponibles pouvant assurer un revenu  la succession\",\r\n    pg6T: \"Sources de revenu pour la famille\",// au dcs\",\r\n    pg6T_1: \"Sources de revenu pour la succession\",// au dcs\",\r\n    pg6TabT: \"Sources de revenu\",\r\n    pg6TabRow1:\r\n      \"Le revenu annuel total disponible pour cette priode s'lve donc :\",\r\n    //pg6TabRow2: \"Un revenu plus lev est requis\",\r\n    //pg6TabRow3: \"Pour le survivant par la suite\",\r\n    pg5TabRow7:\r\n    \"Pour les membres survivants de la famille\",\r\n    pg5TabRow7_1:\r\n    \"Pour la succession\",\r\n    \r\n    pg6TabRow4:\r\n    \"Le revenu supplmentaire aprs impt requis (revenu souhait moins revenu disponible) pour cette priode est :\",      \r\n    //pg6TabRow5: \"Un revenu plus lev est requis\",\r\n    //pg6TabRow6: \"Pour le survivant par la suite\",\r\n    pg6Net: \"net\",\r\n    \r\n    pg7T: \"Besoins d'assurance\",\r\n    pg7TabT: \"tat des revenus de la famille au dcs\",\r\n    pg7TabT_1: \"tat des revenus de la succession au dcs\",\r\n    pg7TabRow1:\r\n    \"Le revenu supplmentaire aprs impt requis (revenu souhait moins revenu disponible) pour cette priode est :\",\r\n    //pg7TabRow2: \"Un revenu plus lev est requis\",\r\n    //pg7TabRow3: \"Pour le survivant par la suite\",\r\n    pg7TabRow4: \"Taux d'inflation prvu\",\r\n    pg7TabRow5: \"Taux d'intrt potentiel des placements futurs du survivant\",\r\n    pg7TabRow5_1: \"Taux d'intrt potentiel des placements futurs de la succession\",\r\n    pg7TabRow6:\r\n      \"Bas sur ces facteurs financiers, le capital total requis pour gnrer des revenus indexs  l'inflation et qui sera puis  la fin de la priode est:\",\r\n    pg7TabRow7: \"A.Pour la dure de vie prsume du survivant (ge \",\r\n    pg7TabRow8: \"B. Jusqu' la retraite du survivant\",\r\n    pg7TabRow9: \"C.Jusqu'au 25e anniv. du benjamin\",\r\n    pg7TabRow10: \"D.Jusqu'au 18e anniv. du benjamin\",\r\n    pg8T: \"Besoins d'assurance\",\r\n    pg8TabT: \"tat des revenus de la famille au dcs\",\r\n    pg8TabT_1: \"tat des revenus de la succession au dcs\",\r\n    pg8TabRow1:\r\n      \"Capitaux excdentaires actuellement disponibles pour investissement aprs couverture des besoins financiers:\",\r\n    pg8TabRow2:\r\n      \"Manque  gagner en capitaux productifs de revenu(ex. assurance) pour les priodes ci-dessous:\",\r\n    pg8TabRow3: \"A.Pour la dure de vie prsume du survivant (ge \",\r\n    pg8TabRow4: \"B. Jusqu' la retraite du survivant\",\r\n    pg8TabRow5: \"C.Jusqu'au 25e anniv. du benjamin\",\r\n    pg8TabRow6: \"D.Jusqu'au 18e anniv. du benjamin\",\r\n    pg8TabRow4Alt: \"A. Jusqu' la fin de la priode de protection\",\r\n    pg9T: \"Notes importantes\",\r\n    pg9P1:\r\n      \"Le prsent expos ne comporte que des renseignements gnraux. L'information qui s'y trouve ne doit pas tre considre par le lecteur comme des conseils juridiques, comptables, fiscaux ou actuariels. Pour ces questions, le lecteur devrait consulter un professionnel indpendant. Veuillez-vous reporter aux illustrations d'assurance, aux libells des contrats et aux documents d'information des socits d'assurance pour obtenir des prcisions sur les questions d'assurance mentionnes dans le prsent expos, puisque dans tous les cas, ce sont ces documents qui prvalent.\",\r\n    pgFooter: \"Voir les Notes importantes  la fin du prsent expos.\",\r\n      pg10T: \"Accus de rception\",\r\n    pg10P1:\r\n      \"Je soussign, _______________________ accuse rception du prsent document et des soumissions connexes, et considre toute l'information sur les prestations et les valeurs comme un rsum seulement. Je comprends que les prestations et les valeurs susmentionnes ne sont ni estimatives ni garantes du rendement futur. Je comprends aussi que les rsultats rels peuvent fluctuer en fonction du temps et du rendement du march, ainsi que de l'tat de sant et de l'assurabilit de la personne. Ces rsultats peuvent faire l'objet de modifications et diffrer des valeurs prsentes dans l'expos.\",\r\n    pg10TabRow1: \"Signature du client: ____________________\",\r\n    pg10TabRow11: \"jour, mois, anne: ___________\",\r\n    pg10TabRow2: \"Signature du client: ____________________\",\r\n    pg10TabRow3: \"Signature du conseiller en assurance: ____________________\",\r\n    pgAppendix:  \"Annexe\",\r\n    pgAppendixT:\r\n      \"Graphiques et feuilles de calcul de l'analyse des besoins en matire d'assurance\",\r\n      pgAppendixP1: \"Flux de trsorerie entrants (+) et sortants (-)\",\r\n      pgAppendixP2: \"Le manque  gagner = flux de trsorerie entrants - sortants et est financ par l'assurance\",\r\n      pgAppendixP3 : \"Situation financire actuelle\"\r\n\r\n  }\r\n};\r\n\r\nexport const GRAPHS_LABLES = {\r\n  en: {\r\n    insNeed: \"Insurance Needs\",\r\n    graphMsg: \"To provide for the income shortfall until retirement\",\r\n    persCF: \"Personal cash Flow\",\r\n    govCF: \"Government cash Flow\",\r\n    incomeNeeds: \"Income Needs\",\r\n    shortfall: \"Shortfall (-) / Surplus (+)\",\r\n    assetsBrk: \"Assets Breakdown Today\",\r\n    liabsBrk: \"Liabilities Breakdown\" ,\r\n    cashLike:        \"Cash/TFSA/Insurance\", \r\n    RRSP: \"RRSP/RRIF\", \r\n    shares: \"Public/Private shares\", \r\n    realEstate: \"Real Estate\", \r\n    otherAssets:\"Other\",\r\n    loans: \"Loans\", \r\n    taxes:\"Taxes\", \r\n    emergency:\"Emergency Fund\", \r\n    otherLiabs:\"Other\",\r\n    atDeath: \"At Death and Future Amts.\",\r\n    insNeeds100: \"Insurance Needs to age 100\",\r\n    insNeedsRet: \"Insurance Needs to retirement (age \",\r\n    insNeedsRetLE: \"Insurance Needs to life expectancy (age \",\r\n    \r\n    currFins: \"Your current financial situation is summarized below: \"\r\n  },\r\n  fr: {\r\n    insNeed: \"Besoins d'assurance\",\r\n    graphMsg:\r\n      \"Pour couvrir le manque  gagner en matire de revenus jusqu' la retraite\",\r\n      persCF: \"Liquidits personnelles\",\r\n      govCF: \"Liquidits verses par l'tat\",\r\n      incomeNeeds: \"Revenus requis\",\r\n      shortfall: \"Manque  gagner (-) / Surplus (+)\",\r\n      \r\n    assetsBrk: \"Ventilation des actifs (aujourd'hui)\",\r\n    liabsBrk: \"Ventilation des passifs\",\r\n    cashLike:        \"Liquidits/CELI/Assurance\",\r\n    RRSP: \"REER/FERR\",\r\n    shares: \"Titres publics/privs\",\r\n    realEstate: \"Immobilier\",\r\n    otherAssets:\"Autre\",\r\n    loans: \"Prts\",\r\n    taxes:\"Charges fiscales\",\r\n    emergency:\"Fonds d'urgence\",\r\n    otherLiabs:\"Autre\",\r\n    atDeath: \"Au dcs et engagements futurs\",\r\n    insNeeds100: \"Besoins en assurance jusqu' l'ge de 100 ans\",\r\n    insNeedsRet: \"Besoins en assurance jusqu' la retraite(ge \",\r\n    insNeedsRetLE: \"Besoins en assurance jusqu' l'esprance de vie (ge \",\r\n    \r\n    currFins: \"YLe sommaire de votre situation financire actuelle se trouve ci-dessous: \"\r\n  }\r\n}\r\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAAAhdEVYdENyZWF0aW9uIFRpbWUAMjAxOTowODozMSAwOTowOTo1NrtZ+qQAAAJgSURBVEhL7ZVLaBNRFIb/ySRNTCaPJjUqIii4sG4tahRxJ924qkUQoaCCO6HV2oi616JSqFtFdFGVboRu4kJQrOAiuvCxEgSpVfsgSTPJZJJ5eO7t1DyamSYt3fnN3MWcO3P+c+8954xgEiB6ztzGr4UleNwimGnZ2iYC4BIEaLqBsOTDh4kkuMDU60/ov/oQ8aiE2fkcOjxueDvcaE9FgGEakIsq+QkhXyxh7Eof82GaqekvppQYMgOJQfa4YY6du2cGDg+aT6bemxSmBS3PS5E/S6Uh+b0I+n0UUesroJ1BSdWgqBUsZApwucjAbqb48t1X9A0/QDTkR04uwTCMDZ1BKOCDrKgYT/bDZU1xBJqMBLcgGg4gFlk9omE/RFFAkBw0m4/Rd50UpChW3dYJOMFWNTOXxfPR89jRFeKH2QotCWi6jp+UXZ8nr+NEohvpiRHs270N2bxivWHPmgLlisbPZe7VLXTv2W5ZgbePhnD8wF4sZguWpTmOAhVN5zWRn77L97eRF2MXMXDyIDJLRcuyGlsBSi7oVJEfnyZ58el0Bo3M/Mni/rXT6D26H2pZs6z12AqwjGLVvKv3BnYeuYwfvzPWTJVDZ0fh6bmEN+lvy5XfBMctYiJdEQm+aBDumtRbgaVmnObsnDMcBWrhlbkOWhJgztnVCLOwFuEEbxUpahWnqFU0y5QV5jMyKpSytcRjbOtE66menKxgfKSmVRSUMs8Eu8H6S4zOo3boutn0XTaK5I/9F/79cAZuPsb32UV4bCJqB+Z4a6eEyTsXqgKbRctZtF7+C6zJJgsAfwFSJkjpY7Y95gAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAAAhdEVYdENyZWF0aW9uIFRpbWUAMjAxOTowODozMSAwOTowOTo1NrtZ+qQAAAMVSURBVEhLpZVLTBNRFIb/PqcPKoXyKoqvsFFZ4GPloqJBowkLHxDApSy6MCExxkeKG2OMcYHEsEDcqEsDNRHi0hWiGBegYmIMwZAYCaIgUNppO9N6zm2bTgEHCl9z03bm3vnvOf85dwxJ4sOXKdT7u+F22WEwGLBV6JFYCMl4fv8ShMDVzhd4OjiCAruE5UgMiUQCyfTkfDEZjXDYrYjGFDT4alICge4B9Pa/gWQ1o+3sUXjcTvE7LxUKXFFUzM6H8GRgRAg0nTyYFejpG6IUOfD91e30is1zqOUepqbn0XL6cFbgcXBY7JrSh3KPi9JlRSKPCIwUwbIcw6+5EFQ1QWuTaKyvzRUocEiIxRXEKdREPk9PwwViMZtgtZggU4pWCdgoApvNgqryItglS3rZxlFpU9OzC5j5s8hquQJscjQeR+htV3r65mlo78Hw2CQunjmiEaAIzCYDzp+oRYm7AC6nJPK4UTg9shzH4rKM4OsxhKncm05pqohT5CRjI9G4yH8+D8/ALWokt+0S9QF5ySkypm5licXVlNH0ne9IrVVFJ2egbkqRpE8oEkXvrRZxZPAutBPXhbbPkS+EIgh0D1K5LqUuZ1KUMlkhkx+IG1vB19aF8YlptK5sNPbgJ5WZ2WSE3ZYbATePNh4jmcr5zsAmc2rlqIKyYheVbGK1Bzxpe5lbTOCDz+WwieEgsZ0VxdjtLcYuGnsqPfCWbBPXM3N4vqfQiR3lbtFoGVaZzLAQ7y4zfv8NYTzYgc/9HRin8akvgJddfpFv7Txet5I1BdaCT0ct80vh9C991hUI0wEWE++I3IpSyBN+d8jUN3roCvDDLzf74G8+JozXUkEetLfWoZHOfD0RXQHO6+jXH3hEvWHRGMdUV5Xi4fVGvPs4CdMKcS26AjarBUOjE9h37k76ShY2uMh3TZQ1H9H/Q1eA4RKcWwyj9PhNUefMt6kZeOpuwEllKtEm9BAC3ER68LuBd1lRH8CzgfeouXAXleSBWWfnDBeCEDhQ7RV/9ODm4dfolc4gvKWF5I9+8IqqYv9eL/4BgXeca9Es3FcAAAAASUVORK5CYII=\"","import React, { Component } from \"react\";\r\n\r\nexport class MultiButtons extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const buttonsDefault = this.setupButtons(\r\n      this.props.selected,\r\n      this.props.noButtons,\r\n      this.props.buttonCaption\r\n    );\r\n    this.state = {\r\n      buttons: buttonsDefault,\r\n    };\r\n  }\r\n\r\n /*  getDerivedStateFromProps(){\r\n\r\n  } */\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    const buttonsDefault = this.setupButtons(\r\n      nextProps.selected,\r\n      nextProps.noButtons,\r\n      nextProps.buttonCaption\r\n    );\r\n    this.setState({ buttons: buttonsDefault });\r\n  }\r\n\r\n  setupButtons = (selected, noButtons, buttonCaption) => {\r\n    selected = selected === undefined ? 0 : selected - 1;\r\n    let buttonsDefault = [];\r\n    let i;\r\n    for (i = 0; i < noButtons; ++i) {\r\n      if (i === selected)\r\n        buttonsDefault.push({\r\n          id: selected,\r\n          name: buttonCaption[selected],\r\n          style:\r\n            noButtons === 1\r\n              ? \"roundedCornerCmd\"\r\n              : \"multiButtons multiButtonsAct\",\r\n        });\r\n      else\r\n        buttonsDefault.push({\r\n          id: i,\r\n          name: buttonCaption[i],\r\n          style: \"multiButtons\",\r\n        });\r\n    }\r\n    return buttonsDefault;\r\n  };\r\n\r\n  selectButton = (index) => {\r\n    let buttonsDefault = this.state.buttons;\r\n    let i;\r\n    for (i = 0; i < this.props.noButtons; ++i) {\r\n      buttonsDefault[i].style =\r\n        buttonsDefault[i].id === index\r\n          ? \"multiButtons multiButtonsAct\"\r\n          : \"multiButtons\";\r\n    }\r\n    this.setState({ buttons: buttonsDefault });\r\n    this.props.selectMultiButton(index + 1);\r\n  };\r\n\r\n  render() {\r\n    const stylePosition =\r\n      this.props.width !== undefined ? { width: this.props.width } : {};\r\n    const stylePositionLast =\r\n      this.props.width !== undefined\r\n        ? { width: this.props.width, marginRight: \"5px\" }\r\n        : { marginRight: \"5px\" };\r\n\r\n    return (\r\n      <div style={{ marginRight: \"10px\" }}>\r\n        {this.state.buttons.map((item) => (\r\n          <button\r\n            key={item.id}\r\n            className={item.style}\r\n            style={\r\n              item.id === this.props.noButtons - 1\r\n                ? stylePositionLast\r\n                : stylePosition\r\n            }\r\n            onClick={() => this.selectButton(item.id)}\r\n          >\r\n            {item.name}\r\n          </button>\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component, Suspense } from \"react\";\r\nimport { Client } from \"./Client\";\r\nimport { defaults } from \"react-chartjs-2\";\r\nimport { Asset } from \"./Asset\";\r\nimport { Liability } from \"./Liability\";\r\nimport { Source } from \"./Source\";\r\nimport { Need } from \"./Need\";\r\nimport { Header, hideRecover } from \"./Header\";\r\nimport { Presentation } from \"./Presentation\";\r\nimport { PopupUserinputDialog } from \"./PopupUserInput\";\r\nimport { Collapsible } from \"./Collapsible\";\r\nimport PasteClients from \"./PasteClients\";\r\nimport {\r\n  getEPGridData,\r\n  getINAGridData,\r\n} from \"../data/aggregateGridProjections\";\r\nimport { AggregateGrid } from \"./AggregateGrid\";\r\nimport _ from \"lodash\";\r\nimport {\r\n  fetchTimerAPICheck,\r\n  getTaxRate,\r\n  handleFetchInsuranceNeedsNew,\r\n  handleFetchINADataFromQueryString,\r\n  handleFetchQueryString,\r\n  handleFetchPDF,\r\n  fetchValidateTokenGetAgentEmailFromDB\r\n} from \"../utils/FetchAPIs\";\r\nimport debounce from \"lodash.debounce\";\r\nimport queryString from \"query-string\";\r\nimport { MultiButtons } from \"./MultiButtons\";\r\nimport { saveAs } from \"file-saver\";\r\n//import { OutputPresentation } from \"./outputPresentation\";\r\n\r\n\r\n\r\n//import { OutputPresentationEP } from \"./outputPresentationEP\";\r\nimport { OutputGraphs } from \"./OutputGraphs\";\r\nimport { OutputGraphsEP } from \"./OutputGraphsEP\";\r\nimport { AnalysisGraphs } from \"./AnalysisGraph\";\r\nimport { AddRemove } from \"./AddRemove\";\r\nimport { Info } from \"./Info\";\r\nimport {\r\n  isMobileDevice,\r\n  //isVersion2019,\r\n  versionDetails,\r\n  getDataFutureEstateLiability,\r\n  getProjectedLiabilities,\r\n  getListItemKeyFromName,\r\n  familyProjectionYears,\r\n  singleFamilyProjectionYears,\r\n  isSingleFamily,\r\n  getInsNeedLine,\r\n} from \"../utils/helper\";\r\nimport {\r\n  QUOTE_CLIENT,\r\n  QUOTE_SPOUSE,\r\n  appSiteAPI,\r\n  DISPLAY_RETIREMENT,\r\n  DISPLAY_LIFEEXP,\r\n  DISPLAY_ENDAGE,\r\n  DISPLAY_LIFEEXP_PLUS_3,\r\n  ORPHAN_AGE_QC,\r\n  ORPHAN_AGE_NON_QC,\r\n  MAX_ORPHAN_DUR_QC,\r\n  MAX_ORPHAN_DUR_NON_QC,\r\n  UNIVERSITY_START_AGE,\r\n  UNIVERSITY_END_AGE,\r\n  DISPLAY_PRESENTATION,\r\n  DISPLAY_GRAPHS,\r\n  DISPLAY_SPREADSHEET,\r\n  DISPLAY_ANALYSIS,\r\n  MESSAGES,\r\n  ASSETS,\r\n  PROVINCE,\r\n  ASSET_TAX,\r\n  INCOMESOURCES,\r\n  OWNERSHIP,\r\n  SEX,\r\n  SMOKING,\r\n  MEMBER,\r\n  LIABILITIES,\r\n  TITLES,\r\n  INCOMENEEDS,\r\n  GROWTHDIR,\r\n  EMAIL,\r\n  ASSET_OWNERSHIP_ACTION,\r\n  APPLET_INA,\r\n  APPLET_EP,\r\n  DISPLAY_NAME,\r\n  IMAGE_LOGO,\r\n  DEFAULT_QUOTE,\r\n  DEFAULT_RRIF_AGE,\r\n} from \"../definitions/generalDefinitions\";\r\n\r\nimport \"isomorphic-fetch\";\r\nimport shortid from \"shortid\";\r\nimport { buildMode } from \"../../package.json\";\r\nimport { setUIDataToAPI, loadSavedDataToUI } from \"../data/dataExchange\";\r\nimport {\r\n  createDefaultAsset,\r\n  createDefaultClient,\r\n  createDefaultSource,\r\n  createDefaultNeed,\r\n  getDefaultData,\r\n} from \"../data/createDefaults\";\r\nimport {\r\n  getInfoNoInternetAccess,\r\n  getInfoIconSourcesGov,\r\n  getGenericMessage,\r\n  getInfoIconInflationGrowth,\r\n  getInfoIconPYE_JLTD,\r\n  getInfoIconNeedGrowth,\r\n} from \"../definitions/infoIconsDefinitions\";\r\n\r\nimport { getAssetGridValues } from \"../data/assetGridProjections\";\r\nimport Loader from \"react-loader-spinner\";\r\n\r\nconst COLLAPSIBLE_CLIENTS = 0;\r\nconst COLLAPSIBLE_ASSETS = 1;\r\nconst COLLAPSIBLE_LIABS = 2;\r\nconst COLLAPSIBLE_SOURCES = 3;\r\nconst COLLAPSIBLE_NEEDS = 4;\r\nconst COLLAPSIBLE_PRESENTATION = 5;\r\nconst COLLAPSIBLE_RESULTS = 6;\r\nconst COLLAPSIBLE_UPDATE_ALL = 7;\r\n\r\nconst COLLAPSIBLES_COUNT = 7;\r\nconst COLLAPSIBLES_CLOSED = false;\r\nconst COLLAPSIBLES_OPEN = true;\r\n\r\nconst DISPLAY_INCOME = 1;\r\nconst DISPLAY_TAXLIAB = 2;\r\nconst INA_FILE_TYPE = \".ppi_INA_TKD\";\r\nconst EP_FILE_TYPE = \".ppi_EP_TKD\";\r\nconst waitTime = 1800;\r\n//const RRIF_LAST_START_AGE = 71;\r\n\r\nconst SITE_TEST = \"https://test-tkdirect\";\r\n\r\n// to send it to Proxy make API site \"\"\r\n//const API_SITE=\"https://ppitoolkitapi.azurewebsites.net\"\r\n//const API_SITE_LOCAL=\"http://www.toolkitdirectapi.com\";\r\n//const API_SITE=\"\";\r\n\r\nconst PARENT_SITE_LOCAL = \"http://localhost:8083\";\r\nconst PARENT_SITE_TEST = \"https://test-tkdirect.ppi.ca/\";\r\nconst PARENT_SITE_PROD = \"https://toolkitdirect.ppi.ca/\";\r\nconst MODE_SAVE = 0;\r\nconst MODE_EMAIL = 1;\r\nconst MODE_ONLY_GET_ENCRYPTED_QS = 2;\r\n\r\n//\"local\"=0 \"test-tkdirect\"=1 \"toolkitdirect\" =2}\r\n/* let appSiteAPI =\r\n  buildMode === 0\r\n    ? API_SITE_LOCAL\r\n    : buildMode === 1\r\n    ? API_SITE_TEST\r\n    : API_SITE_PROD; */\r\nlet appSiteParent =\r\n  buildMode === 0\r\n    ? PARENT_SITE_LOCAL\r\n    : buildMode === 1\r\n    ? PARENT_SITE_TEST\r\n    : PARENT_SITE_PROD;\r\n\r\ndefaults.global.maintainAspectRatio = false;\r\n\r\nconst OutputPresentation = React.lazy(() => import('./outputPresentation'));\r\nconst OutputPresentationEP = React.lazy(() => import('./outputPresentationEP'));   \r\n\r\nexport class NA extends Component {\r\n  displayName = DISPLAY_NAME;\r\n  constructor(props) {\r\n    super(props);\r\n  \r\n    // define default starting clients assets .etc. rows\r\n    let defaultClients = [];\r\n    defaultClients.push(createDefaultClient(1));\r\n    if (APPLET_INA) defaultClients.push(createDefaultClient(2));\r\n    let defaultAssets = [];\r\n    defaultAssets.push(createDefaultAsset(1));\r\n    //  const defaultSources = [createDefaultSource(1)];\r\n    //  const defaultLiab = [createDefaultLiab(1)];\r\n    let defaultNeeds = [];\r\n    defaultNeeds.push(createDefaultNeed(1));\r\n    defaultNeeds.push(createDefaultNeed(2));\r\n    // const defaultPresentation = [createDefaultPres(1, this.provinceMargTax)];\r\n\r\n    // build state with defaults\r\n    this.state = {\r\n      dataInput: getDefaultData(),\r\n      loading: true,\r\n      initialLoading: true,\r\n      //outputInitilized: false,\r\n      failedAPI: false,\r\n      showMsg: false,\r\n      failedRemove: false,\r\n      SnapImport: false,\r\n\r\n      dataOutput: {\r\n        dataInsuranceNeeds: [],\r\n        dataCashFlowPersonal: [],\r\n        dataTaxLiability: [],\r\n        dataCashFlowGov: [],\r\n        dataCashFlowNeeds: [],\r\n        dataNAAges: [],\r\n        dataShortfall: [],\r\n        govBenefits: { cppSurvivor: null, cppDB: null, cppOrphan: null },\r\n        lifeExpectancy: { client: 0, spouse: 0, joint: 0 },\r\n        assetProjections: [],\r\n        aggregateGrid: null,\r\n        encryptedInputLife1AndSpouse: \"\",\r\n        encryptedInputLife1: \"\",\r\n      },\r\n    };\r\n    this.openCollapsible = [];\r\n    let i;\r\n    for (i = 0; i < COLLAPSIBLES_COUNT; ++i) {\r\n      this.openCollapsible.push({\r\n        open: COLLAPSIBLES_CLOSED,\r\n        id: i,\r\n      });\r\n    }\r\n    // open first bar\r\n    this.openCollapsible[COLLAPSIBLE_CLIENTS].open = COLLAPSIBLES_OPEN;\r\n\r\n    this.tag = { t: 0, y: 0 };\r\n    this.showRecover = 1;\r\n    this.survIdx = APPLET_INA ? QUOTE_SPOUSE : QUOTE_CLIENT;\r\n    this.graphs = false;\r\n    this.caseFromFile = false;\r\n    this.OKToRemove = true;\r\n    this.accessedAPI = false;\r\n    this.openParent = true;\r\n    this.openForce = true;\r\n    this.resultIsOpen = false;\r\n    this.langText = \"Franais\";\r\n    this.provinceMargTax = 0;\r\n    this.visibleOutputSection = 0;\r\n    this.dataQS = \"\";\r\n    this.intervalID = 0;\r\n    this.INAOption = APPLET_INA ? DISPLAY_INCOME : DISPLAY_TAXLIAB;\r\n    //this.OutputPresentation = null;\r\n    //this.OutputPresentationEP = null;\r\n  }\r\n\r\n  probateSync = async (dataInput, dataOutput) => {\r\n    // if not there add\r\n    let qbProbate = new Array(dataOutput.probate.numericValues.length).fill(0);\r\n    if (dataInput.Presentations[0].provinceKey === \"QC\")\r\n      dataOutput.probate.numericValues = qbProbate;\r\n\r\n    //  console.log(dataOutput.probate.numericValues)\r\n    let probate = LIABILITIES.PROBATE.Key;\r\n    let hasProbate = dataInput.Liabilitys.find(\r\n      (x) => x.liabTypeKey === probate\r\n    );\r\n    if (hasProbate !== undefined) {\r\n      hasProbate.currValue = dataOutput.probate.numericValues[0];\r\n    }\r\n    //console.log(hasProbate,dataInput)\r\n\r\n    return dataInput;\r\n  };\r\n\r\n  govBenefitsSync = async (dataInput, dataOutput) => {\r\n    // if not there add\r\n\r\n    if (APPLET_INA) {\r\n      //this.failedRemove=false\r\n      let gov1 = INCOMESOURCES.GOV_SURVIVORS_PENSION.Key; //value[this.state.dataInput.Presentations[0].language];\r\n      let gov = dataInput.Sources.find((x) => x.sourceTypeKey === gov1);\r\n\r\n      let gov2 = INCOMESOURCES.GOV_DEATH_BENEFIT.Key; //value[this.state.dataInput.Presentations[0].language];\r\n      let govDB = dataInput.Sources.find((x) => x.sourceTypeKey === gov2);\r\n\r\n      let hasSpouseArray = dataInput.Clients.find(\r\n        (x) => x.memberKey === MEMBER.SPOUSE.Key\r\n      );\r\n      const hasSpouse =\r\n        hasSpouseArray === undefined || hasSpouseArray.length === 0\r\n          ? false\r\n          : true;\r\n\r\n      const ownerID = dataInput.Clients.length > 1 ? 2 : 1;\r\n\r\n      if (gov === undefined) {\r\n        const sourceGovSurv = {\r\n          id: dataInput.Sources.length + 1, //sourcesNo + 1,\r\n          sourceTypeKey: INCOMESOURCES.GOV_SURVIVORS_PENSION.Key,\r\n          amount: hasSpouse ? parseInt(dataOutput.govBenefits.cppSurvivor) : 0, // * this.state.dataInput.Clients[QUOTE_CLIENT].Eligibility) / 100,\r\n          startYear: 0,\r\n          duration: 100,\r\n          ownerID: ownerID,\r\n        };\r\n        if (hasSpouse) dataInput.Sources.push(sourceGovSurv); // add at begi\r\n      } else {\r\n        gov.amount = hasSpouse\r\n          ? parseInt(dataOutput.govBenefits.cppSurvivor)\r\n          : 0;\r\n      }\r\n\r\n      if (govDB === undefined) {\r\n        const sourceGovDB = {\r\n          id: dataInput.Sources.length + 2,\r\n          sourceTypeKey: INCOMESOURCES.GOV_DEATH_BENEFIT.Key,\r\n          amount: parseInt(dataOutput.govBenefits.cppDB),\r\n          startYear: 0,\r\n          duration: 100,\r\n          ownerID: ownerID,\r\n        };\r\n        dataInput.Sources.push(sourceGovDB);\r\n      } else {\r\n        govDB.amount = parseInt(dataOutput.govBenefits.cppDB);\r\n      }\r\n\r\n      dataInput = await this.manageOrphanSync(dataInput, dataOutput); //}\r\n    }\r\n    return dataInput;\r\n  };\r\n\r\n  componentDidMount = async () => {\r\n    const el = document.querySelector(\".loader-container\");\r\n    if (el) {\r\n      this.setState({ initialLoading: false });\r\n      el.remove(); \r\n    }\r\n    document.title = APPLET_INA ? \"INA\" : \"EP\";\r\n    this.intervalID = setInterval(this.loadData, 100000);\r\n    localStorage.setItem(\"INAAPIFails\", parseInt(0));\r\n    this.OKToRemove = true;\r\n \r\n\r\n    const query = queryString.parse(window.location.search);\r\n\r\n    const validToken= await this.setToken(query.TKTOK);\r\n   \r\n\r\n    if (query.QS !== undefined) {\r\n       await this.handleInitilizeQuoteFromQueryString(query.QS);\r\n      //this.handleInitilizeQuoteFromQueryString(query.QS);\r\n    } else {\r\n      await this.handleIntitalFetch(\r\n      // this.handleIntitalFetch(\r\n        query.lang === \"fr\" || global.langFr ? \"fr\" : \"en\"\r\n      );\r\n    }\r\n\r\n\r\n\r\n    if (query.recover !== undefined) {\r\n      if (query.recover === \"true\") {\r\n        let d = new Date();\r\n        d = d.setHours(d.getHours(), d.getMinutes() - 5, 0, 0);\r\n        const objJSONData = JSON.parse(\r\n          localStorage.getItem(APPLET_INA ? \"INAData\" : \"EP\")\r\n        );\r\n\r\n        var dRecover = new Date(\r\n          objJSONData.dataPresentations.Presentations[0].valuationDate\r\n        );\r\n        dRecover = new Date(\r\n          objJSONData.dataPresentations.Presentations[0].presentationDate\r\n        );\r\n        if (dRecover > d) {\r\n          await this.loadStorage();\r\n          hideRecover();\r\n        }\r\n      }\r\n    }\r\n    console.log(query)\r\n    if (query.snapimport !== undefined) {\r\n      if (query.snapimport === \"1\") {\r\n        this.setState({ SnapImport: true });\r\n      }\r\n    }\r\n    if (this.state.initialLoading === false) {\r\n      window.parent.postMessage(\"FRAME_LOADED\",\t\"*\");\r\n    }  \r\n\r\n  };\r\n\r\n  setToken = async(authToken)=>{\r\n    \r\n    let validToken=false;\r\n    if(authToken !== undefined && authToken !== \"\")\r\n    {\r\n     // const decoded = jwt_decode(authToken);\r\n      console.log(authToken);       \r\n     // this.userEmail = decoded.upn;\r\n      const email=sessionStorage.getItem(\"userEmail\")\r\n      console.log(email, this.userEmail, this.agentID);\r\n      if(email===null || email===undefined || email===\"\")\r\n      {\r\n        const agentSpecs=await fetchValidateTokenGetAgentEmailFromDB(authToken, APPLET_INA?\"INA\":\"EP\");\r\n        await console.log(agentSpecs);\r\n        validToken=agentSpecs.validToken\r\n        if (validToken===true)\r\n        {\r\n          this.userEmail = agentSpecs.email\r\n          this.agentID = agentSpecs.guid\r\n          sessionStorage.setItem(\"userEmail\", this.userEmail )\r\n          sessionStorage.setItem(\"userGUID\", this.agentID)\r\n        }\r\n      }\r\n      else\r\n      {\r\n       // save applet login\r\n        fetchValidateTokenGetAgentEmailFromDB(authToken, APPLET_INA?\"INA\":\"EP\");\r\n      \r\n        this.userEmail = email\r\n        this.agentID = sessionStorage.getItem(\"userGUID\")\r\n        validToken=true\r\n      }\r\n\r\n    }\r\n    \r\n     return validToken;\r\n\r\n   //   let result= await fetchGetAgentGUIDFromDB(this.userEmail)\r\n   //   this.agentID=String(result.caseGUID);\r\n   //   await console.log(this.userEmail,this.agentID);       \r\n    \r\n    //await this.setState({userEmail:userEmail, userGUID: result.caseGUID});\r\n    \r\n  }\r\n\r\n\r\n\r\n  handleIntitalFetch = async (lang) => {\r\n    //let presentation = this.state.dataInput.Presentations[0];\r\n    /* await this.handleUpdatePresentation(presentation, true);\r\n\r\n    await this.govBenefits(); */\r\n\r\n    this.setState({ loading: true });\r\n    let { dataInput, dataOutput } = this.state;\r\n    const newDataInput = _.cloneDeep(dataInput);\r\n    const newDataOutput = _.cloneDeep(dataOutput);\r\n\r\n    let presentation = newDataInput.Presentations[0];\r\n\r\n    {\r\n      const tr = await getTaxRate(\r\n        \"PERSONAL_INCOME\",\r\n        presentation.provinceKey\r\n        //convertProvince(presentation.provinceKey, this.state.dataInput.Presentations[0].language)\r\n      );\r\n      presentation.taxRate = (Math.round(tr * 10000) / 100).toFixed(4);\r\n    }\r\n\r\n   \r\n    // set new lang if coming from lang change in landing page\r\n    presentation.language = lang;\r\n    newDataInput.Presentations[0] = presentation;\r\n\r\n   \r\n   \r\n\r\n    //this.AddInitialGovBenefits(newDataInput);\r\n\r\n    const newState = await this.reSync_reCalculate_reRender(\r\n      newDataInput,\r\n      newDataOutput,\r\n      //COLLAPSIBLE_ASSETS,\r\n      COLLAPSIBLE_UPDATE_ALL, // make sure initial from file, new default updates all\r\n      1,\r\n      0,\r\n      false // initial case is on set to 1, any change after this removes recover\r\n    );\r\n\r\n   \r\n    // first asset needs to be updated with grid etc\r\n    this.openCollapsible[COLLAPSIBLE_CLIENTS].open =\r\n    newDataInput.Presentations[0].language === \"en\"\r\n        ? COLLAPSIBLES_OPEN\r\n        : COLLAPSIBLES_CLOSED;\r\n\r\n\r\n    // before eupdating state, resync, recalcuate, update state to re_render\r\n    this.setState({ ...newState, loading: false, initialLoading: false });\r\n  };\r\n\r\n  handleUpdateOutput = async (\r\n    newStateCandidateInput,\r\n    dataOutput,\r\n    itemToUpdateGroup,\r\n    itemToUpdateID\r\n  ) => {\r\n    try {\r\n      //await this.handleFetchInsuranceNeeds();\r\n      const dataNA = await setUIDataToAPI(newStateCandidateInput);\r\n\r\n      // close results tab to avoid numerous recalcs\r\n      // this.openCollapsible[COLLAPSIBLE_RESULTS].open = false;\r\n\r\n      // main output data\r\n      const data = await handleFetchInsuranceNeedsNew(\r\n        dataNA,\r\n        newStateCandidateInput\r\n      );\r\n      let newStateCandidateOutput = this.populateOutput2(data, dataOutput);\r\n      // assets projs , do all assets if it is from a saved file we need all for RESULTS\r\n      if (\r\n        newStateCandidateOutput.assetProjections !== null &&\r\n        (itemToUpdateGroup === COLLAPSIBLE_ASSETS ||\r\n          itemToUpdateGroup === COLLAPSIBLE_RESULTS ||\r\n          itemToUpdateGroup === COLLAPSIBLE_UPDATE_ALL ||\r\n          newStateCandidateOutput.assetProjections.length <\r\n            newStateCandidateInput.Assets.length)\r\n      )\r\n        newStateCandidateOutput.assetProjections =\r\n          await this.updateAssetProjectionOutput(\r\n            dataNA,\r\n            newStateCandidateInput,\r\n            newStateCandidateOutput,\r\n            itemToUpdateGroup,\r\n            itemToUpdateID\r\n          );\r\n\r\n      // set new encrpt file that now has calculated ins. Amt\r\n      // need to only pass client & spouse to EP and Client only to others\r\n      let newDataInputClient12 = _.cloneDeep(newStateCandidateInput);\r\n      // remove sources based on child\r\n      newDataInputClient12.Clients.forEach((element) => {\r\n        if (\r\n          element.memberKey === MEMBER.CHILD.Key ||\r\n          element.memberKey === MEMBER.DEPENDENT_ADULT.Key\r\n        )\r\n          newDataInputClient12.Sources = newDataInputClient12.Sources.filter(\r\n            (item) => {\r\n              return item.ownerID !== element.id;\r\n            }\r\n          );\r\n      });\r\n      newDataInputClient12.Clients = newDataInputClient12.Clients.filter(\r\n        (item) => {\r\n          return (\r\n            item.memberKey === MEMBER.CLIENT.Key ||\r\n            item.memberKey === MEMBER.SPOUSE.Key\r\n          );\r\n        }\r\n      );\r\n\r\n      newStateCandidateOutput.encryptedInputLife1AndSpouse =\r\n        await this.handleQueryString(\r\n          MODE_ONLY_GET_ENCRYPTED_QS,\r\n          newDataInputClient12,\r\n          newStateCandidateOutput\r\n        );\r\n\r\n      // need to only pass client who is to be insured and not JLTD\r\n      let newDataInputClient1 = _.cloneDeep(newStateCandidateInput);\r\n      newDataInputClient1.Clients = newDataInputClient1.Clients.filter(\r\n        (item) => {\r\n          return item.memberKey === MEMBER.CLIENT.Key;\r\n        }\r\n      );\r\n\r\n      newStateCandidateOutput.encryptedInputLife1 =\r\n        await this.handleQueryString(\r\n          MODE_ONLY_GET_ENCRYPTED_QS,\r\n          newDataInputClient1,\r\n          newStateCandidateOutput\r\n        ); // set this.dataQS\r\n      //newStateCandidateOutput.encryptedInput = this.dataQS;\r\n      // liabs projs\r\n      // aggregate grid proj\r\n      newStateCandidateOutput.aggregateGrid = await this.updateOutputData(\r\n        newStateCandidateInput,\r\n        newStateCandidateOutput\r\n      );\r\n      return newStateCandidateOutput;\r\n    } catch (error) {\r\n      return null;\r\n    }\r\n  };\r\n  /* end Region */\r\n\r\n  updateAssetProjectionOutput = async (\r\n    dataNA,\r\n    newStateCandidateInput,\r\n    newStateCandidateOutput,\r\n    itemToUpdateGroup,\r\n    itemToUpdateID\r\n  ) => {\r\n    for (let i = 0; i < newStateCandidateInput.Assets.length; i++) {\r\n      const element = newStateCandidateInput.Assets[i];\r\n      if (\r\n        element.id === itemToUpdateID ||\r\n        itemToUpdateGroup === COLLAPSIBLE_RESULTS ||\r\n        itemToUpdateGroup === COLLAPSIBLE_UPDATE_ALL\r\n      ) {\r\n        let projection = await getAssetGridValues(\r\n          dataNA,\r\n          element,\r\n          newStateCandidateInput.Presentations[0].language,\r\n          false\r\n        ); //    this.updateProjection2(element,dataNA)\r\n        let a = newStateCandidateOutput.assetProjections.find(\r\n          (e) => e.id === element.id\r\n        );\r\n        if (a !== undefined) {\r\n          a.grid = projection;\r\n        } else\r\n          newStateCandidateOutput.assetProjections.push({\r\n            id: element.id,\r\n            grid: projection,\r\n          });\r\n      }\r\n    }\r\n\r\n    return newStateCandidateOutput.assetProjections;\r\n  };\r\n\r\n  populateOutput2 = (dataOutputCandidate, dataOutput) => {\r\n    try {\r\n      // console.log( dataOutput)\r\n      dataOutput.dataInsuranceNeeds = dataOutputCandidate.dataInsuranceNeeds;\r\n      dataOutput.dataCashFlowPersonal =\r\n        dataOutputCandidate.dataCashFlowPersonal.numericValues;\r\n      dataOutput.dataTaxLiability =\r\n        dataOutputCandidate.dataTaxLiability.numericValues;\r\n      dataOutput.dataCashFlowGov =\r\n        dataOutputCandidate.dataCashFlowGov.numericValues;\r\n      dataOutput.dataCashFlowNeeds =\r\n        dataOutputCandidate.dataCashFlowNeeds.numericValues;\r\n      dataOutput.dataNAAges = dataOutputCandidate.dataNAAges.numericValues;\r\n      dataOutput.dataShortfall =\r\n        dataOutputCandidate.dataShortfall.numericValues;\r\n      dataOutput.govBenefits.cppSurvivor = dataOutputCandidate.cpp;\r\n      dataOutput.govBenefits.cppDB = dataOutputCandidate.cppDB;\r\n      dataOutput.govBenefits.cppOrphan = dataOutputCandidate.orphan;\r\n      dataOutput.probate = dataOutputCandidate.probate;\r\n      dataOutput.lifeExpectancy.client = dataOutputCandidate.lifeExpClient;\r\n      dataOutput.lifeExpectancy.spouse = dataOutputCandidate.lifeExp;\r\n      dataOutput.lifeExpectancy.joint = dataOutputCandidate.lifeExpJLTD;\r\n      dataOutput.encryptedInputLife1AndSpouse =\r\n        dataOutputCandidate.encryptedInputLife1AndSpouse;\r\n      dataOutput.encryptedInputLife1 = dataOutputCandidate.encryptedInputLife1;\r\n      return dataOutput;\r\n    } catch (error) {\r\n      alert(\"Could not connect to the calculation engine API\");\r\n      return dataOutput;\r\n    }\r\n  };\r\n\r\n  populateOutput = async (data) => {\r\n    let dataOutput = this.state.dataOutput;\r\n\r\n    dataOutput.dataInsuranceNeeds = data.dataInsuranceNeeds;\r\n    dataOutput.dataCashFlowPersonal = data.dataCashFlowPersonal.numericValues;\r\n    dataOutput.dataTaxLiability = data.dataTaxLiability.numericValues;\r\n    dataOutput.dataCashFlowGov = data.dataCashFlowGov.numericValues;\r\n    dataOutput.dataCashFlowNeeds = data.dataCashFlowNeeds.numericValues;\r\n    dataOutput.dataNAAges = data.dataNAAges.numericValues;\r\n    dataOutput.dataShortfall = data.dataShortfall.numericValues;\r\n    dataOutput.govBenefits.cppSurvivor = data.cpp;\r\n    dataOutput.govBenefits.cppDB = data.cppDB;\r\n    dataOutput.govBenefits.cppOrphan = data.orphan;\r\n    dataOutput.lifeExpectancy.client = data.lifeExpClient;\r\n    dataOutput.lifeExpectancy.spouse = data.lifeExp;\r\n    dataOutput.lifeExpectancy.joint = data.lifeExpJLTD;\r\n\r\n    this.setState({ dataOutput: dataOutput, SnapImport: false });\r\n  };\r\n\r\n  handleQueryString = async (mode, dataInput, dataOutput) => {\r\n    const lang = dataInput.Presentations[0].language;\r\n    const insuranceNeed =\r\n      dataOutput.dataInsuranceNeeds[dataInput.Presentations[0].periodOption]\r\n        .Value;\r\n    let dataNA = await setUIDataToAPI(dataInput, insuranceNeed);\r\n    let data = await handleFetchQueryString(dataNA);\r\n    if (data !== undefined) {\r\n      this.dataQS = data;\r\n      if (mode === MODE_ONLY_GET_ENCRYPTED_QS) return data;\r\n      else if (mode === MODE_SAVE) this.setState({ showMsg: true });\r\n      else if (mode === MODE_EMAIL) {\r\n        let url =\r\n          \"mailto: ?subject= \" +\r\n          (APPLET_INA ? TITLES[lang].appletINA : TITLES[lang].appletEP) +\r\n          \" &body= \" +\r\n          (EMAIL[lang].body +\r\n            \".%0D%0A\" +\r\n            appSiteParent +\r\n            \"?applet=EP&QS=\" +\r\n            this.dataQS);\r\n\r\n        const ft =\r\n          appSiteParent +\r\n          \"/?\" +\r\n          [\"applet=\" + DISPLAY_NAME, \"QS=\" + this.dataQS].join(\"&\");\r\n        url =\r\n          \"mailto: ?subject= \" +\r\n          (APPLET_INA ? TITLES[lang].appletINA : TITLES[lang].appletEP) +\r\n          \" &body= \" +\r\n          EMAIL[lang].body +\r\n          \".%0D%0A\" +\r\n          encodeURIComponent(ft);\r\n\r\n        window.location.href = url;\r\n      }\r\n    }\r\n  };\r\n\r\n  handleInitilizeQuoteFromQueryString = async (savedINA_QS) => {\r\n    //log(savedINA_QS)\r\n    const data = await handleFetchINADataFromQueryString(savedINA_QS);\r\n    //  console.log(data)\r\n\r\n    let objJSONData = await loadSavedDataToUI(data, this.state.dataInput);\r\n\r\n    // put loaded data to quote and show\r\n    this.updateStateFromJSon(objJSONData);\r\n  };\r\n\r\n  handleUpdateClient = async (client) => {\r\n    // keep render to just once until or if needed. this also avoids flshing page before final render\r\n\r\n    {\r\n      this.setState({ loading: true });\r\n\r\n      const { dataOutput, dataInput } = this.state;\r\n      let newDataInput = _.cloneDeep(dataInput);\r\n      const newDataOutput = _.cloneDeep(dataOutput);\r\n\r\n      if (client.Age > client.retirementAge)\r\n        client.retirementAge = client.Age + 1;\r\n      const redoAll =\r\n        client.memberKey !== newDataInput.Clients[QUOTE_CLIENT].memberKey ||\r\n        client.Age !== newDataInput.Clients[QUOTE_CLIENT].Age ||\r\n        client.Eligibility !== newDataInput.Clients[QUOTE_CLIENT].Eligibility ||\r\n        client.avgTaxRate !== newDataInput.Clients[QUOTE_CLIENT].avgTaxRate ||\r\n        (newDataInput.Clients.count > 1 &&\r\n          (client.Age !== newDataInput.Clients[QUOTE_SPOUSE].Age ||\r\n            client.avgTaxRate !==\r\n              newDataInput.Clients[QUOTE_SPOUSE].avgTaxRate));\r\n      newDataInput.Clients[client.id - 1] = client;\r\n\r\n      const newState = await this.reSync_reCalculate_reRender(\r\n        newDataInput,\r\n        newDataOutput,\r\n        redoAll ? COLLAPSIBLE_UPDATE_ALL : COLLAPSIBLE_CLIENTS, // need to redo a\r\n        client.id\r\n      );\r\n      this.setState({ ...newState, loading: false });\r\n    }\r\n  };\r\n\r\n  reSync_reCalculate_reRender = async (\r\n    newStateCandidateInput,\r\n    dataOutput,\r\n    itemToUpdateGroup,\r\n    itemToUpdateID,\r\n    debounce,\r\n    saveToStorage\r\n  ) => {\r\n    try {\r\n      // reSync\r\n      newStateCandidateInput = await this.syncPanelsValues2(\r\n        newStateCandidateInput,\r\n        itemToUpdateGroup\r\n      );\r\n\r\n      let newStateCandidateOutput;\r\n\r\n      // reCalculate\r\n      if (debounce)\r\n        newStateCandidateOutput = await this.debounceHandleUpdateOutput(\r\n          newStateCandidateInput,\r\n          dataOutput,\r\n          itemToUpdateGroup,\r\n          itemToUpdateID\r\n        );\r\n      else\r\n        newStateCandidateOutput = await this.handleUpdateOutput(\r\n          newStateCandidateInput,\r\n          dataOutput,\r\n          itemToUpdateGroup,\r\n          itemToUpdateID\r\n        );\r\n\r\n      newStateCandidateInput = await this.govBenefitsSync(\r\n        newStateCandidateInput,\r\n        newStateCandidateOutput\r\n      );\r\n\r\n      newStateCandidateInput = await this.probateSync(\r\n        newStateCandidateInput,\r\n        newStateCandidateOutput\r\n      );\r\n\r\n      if (this.state.SnapImport) this.setState({ SnapImport: false });\r\n\r\n      if (saveToStorage !== false) this.debounceSaveToStorage();\r\n      return {\r\n        dataInput: newStateCandidateInput,\r\n        dataOutput: newStateCandidateOutput,\r\n      };\r\n    } catch (error) {}\r\n  };\r\n\r\n  updateOutputData = async (\r\n    newStateCandidateInput,\r\n    newStateCandidateOutput\r\n  ) => {\r\n    if (true) {\r\n      let dataGov;\r\n      let dataPCV;\r\n      let dataNeed;\r\n      let dataShort;\r\n\r\n      //    let hasSurivor = false;\r\n\r\n      let aggregateGrid;\r\n\r\n      /*       const spKey = APPLET_INA ? MEMBER.SPOUSE.Key : MEMBER.CLIENT.Key;\r\n            let Survivor = this.state.dataInput.Clients.find(x => x.memberKey === spKey);\r\n      \r\n            if (Survivor !== undefined) {\r\n              hasSurivor = true;\r\n            }\r\n       */\r\n      const Survivor = newStateCandidateInput.Clients[this.survIdx]; //.find(x => x.memberKey === spKey);\r\n      const Survivors = newStateCandidateInput.Clients.filter((item) => {\r\n        return item.id > 1;\r\n      });\r\n\r\n      /* if (Survivor !== undefined) {\r\n        hasSurivor = true;\r\n      }\r\n */\r\n      const insuranceNeeds = newStateCandidateOutput.dataInsuranceNeeds;\r\n      const periodOption = newStateCandidateInput.Presentations[0].periodOption;\r\n\r\n      const inputOutputIsValid =\r\n        insuranceNeeds.length > 0 &&\r\n        newStateCandidateOutput.dataNAAges !== undefined &&\r\n        Survivor !== undefined;\r\n\r\n      if (inputOutputIsValid) {\r\n        const projYears = familyProjectionYears(\r\n          newStateCandidateInput.Clients,\r\n          periodOption,\r\n          newStateCandidateOutput.lifeExpectancy,\r\n          insuranceNeeds,\r\n          newStateCandidateOutput.dataShortfall,\r\n          newStateCandidateInput.Presentations[0]\r\n        );\r\n        const insNeed = projYears.insuranceNeed;\r\n        const insNeedRet = projYears.insuranceNeedToRet;\r\n        const insNeedLE = projYears.insuranceNeedToLE;\r\n        const singleFamily = isSingleFamily(newStateCandidateInput.Clients);\r\n        const noProjectYrs = projYears.noProjectionYrs;\r\n        if (singleFamily) {\r\n          // use years\r\n          newStateCandidateOutput.dataNAAges = [];\r\n          for (let i = 0; i < noProjectYrs; i++)\r\n            newStateCandidateOutput.dataNAAges.push(i + 1);\r\n        }\r\n\r\n        dataGov = newStateCandidateOutput.dataCashFlowGov.slice(\r\n          0,\r\n          noProjectYrs\r\n        );\r\n        dataPCV = newStateCandidateOutput.dataCashFlowPersonal.slice(\r\n          0,\r\n          noProjectYrs\r\n        );\r\n        dataNeed = newStateCandidateOutput.dataCashFlowNeeds.slice(\r\n          0,\r\n          noProjectYrs\r\n        );\r\n        dataShort = newStateCandidateOutput.dataShortfall.slice(\r\n          0,\r\n          noProjectYrs\r\n        );\r\n\r\n        if (APPLET_INA) {\r\n          aggregateGrid = await getINAGridData(\r\n            insNeed,\r\n            insNeedRet,\r\n            insNeedLE,\r\n            dataPCV,\r\n            //  Survivor,\r\n            Survivors,\r\n            dataNeed,\r\n            dataGov,\r\n            dataShort,\r\n            newStateCandidateInput.Presentations[0].inflation,\r\n            newStateCandidateInput.Presentations[0].language,\r\n            newStateCandidateInput.Presentations[0].invRate,\r\n            newStateCandidateInput.Sources,\r\n            newStateCandidateOutput.govBenefits.cppDB *\r\n              (1 -\r\n                newStateCandidateInput.Clients[QUOTE_CLIENT].avgTaxRate / 100)\r\n          );\r\n        } else if (APPLET_EP) {\r\n          aggregateGrid = await getEPGridData(\r\n            noProjectYrs,\r\n            newStateCandidateInput\r\n          );\r\n        }\r\n      }\r\n      return aggregateGrid;\r\n    }\r\n  };\r\n\r\n  switchClients = async () => {\r\n    if (\r\n      this.state.dataInput.Clients.find(\r\n        (x) => x.memberKey === MEMBER.SPOUSE.Key\r\n      ) !== undefined\r\n    ) {\r\n      this.setState({ loading: true });\r\n\r\n      const newState = await this.getSwitchClientsState();\r\n\r\n      this.setState({ ...newState, loading: false });\r\n    }\r\n  };\r\n\r\n  getSwitchClientsState = async () => {\r\n    const { dataOutput, dataInput } = this.state;\r\n    const newDataInput = _.cloneDeep(dataInput);\r\n    const newDataOutput = _.cloneDeep(dataOutput);\r\n    let client1 = newDataInput.Clients[QUOTE_CLIENT];\r\n    newDataInput.Clients[QUOTE_CLIENT] = newDataInput.Clients[QUOTE_SPOUSE];\r\n    newDataInput.Clients[QUOTE_SPOUSE] = client1;\r\n    newDataInput.Assets.forEach((element) => {\r\n      if (\r\n        element.ownerKey === ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key ||\r\n        element.ownerKey === ASSET_OWNERSHIP_ACTION.CLIENT_ROLLOVER.Key\r\n      ) {\r\n        element.ownerKey = ASSET_OWNERSHIP_ACTION.SPOUSE.Key;\r\n      } else if (element.ownerKey === ASSET_OWNERSHIP_ACTION.SPOUSE.Key) {\r\n        element.ownerKey =\r\n          element.assetTypeKey === ASSETS.LIFE_INSURANCE.Key\r\n            ? ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key\r\n            : ASSET_OWNERSHIP_ACTION.CLIENT_ROLLOVER.Key;\r\n      }\r\n    });\r\n    newDataInput.Liabilitys.forEach((element) => {\r\n      if (element.ownerID === 0) {\r\n        element.ownerID = QUOTE_SPOUSE + 1;\r\n      }\r\n    });\r\n\r\n    newDataInput.Liabilitys.forEach((element) => {\r\n      if (element.ownerID === QUOTE_CLIENT + 1) {\r\n        element.ownerID = 0;\r\n      }\r\n      if (element.ownerID === QUOTE_SPOUSE + 1) {\r\n        element.ownerID = QUOTE_CLIENT + 1;\r\n      }\r\n    });\r\n    newDataInput.Liabilitys.forEach((element) => {\r\n      if (element.ownerID === 0) {\r\n        element.ownerID = QUOTE_SPOUSE + 1;\r\n      }\r\n    });\r\n\r\n    // keep member\r\n    newDataInput.Clients[QUOTE_CLIENT].memberKey = MEMBER.CLIENT.Key;\r\n    newDataInput.Clients[QUOTE_SPOUSE].memberKey = MEMBER.SPOUSE.Key;\r\n\r\n    newDataInput.Clients[QUOTE_CLIENT].id = QUOTE_CLIENT + 1;\r\n    newDataInput.Clients[QUOTE_SPOUSE].id = QUOTE_SPOUSE + 1;\r\n\r\n    const newState = await this.reSync_reCalculate_reRender(\r\n      newDataInput,\r\n      newDataOutput,\r\n      COLLAPSIBLE_UPDATE_ALL, // to updateAll\r\n      0\r\n    );\r\n\r\n    return newState;\r\n  };\r\n\r\n  handleUpdateAsset = async (asset) => {\r\n    this.setState({ loading: true });\r\n    const { dataInput, dataOutput } = this.state;\r\n    let newDataInput = _.cloneDeep(dataInput);\r\n    const newDataOutput = _.cloneDeep(dataOutput);\r\n    if (asset.assetTypeKey === ASSETS.RRSP_RRIF.Key) {\r\n      if (APPLET_EP) {\r\n        if (\r\n          asset.ownerKey === ASSET_OWNERSHIP_ACTION.SPOUSE.Key &&\r\n          newDataInput.Clients.length === 1\r\n        )\r\n          asset.ownerKey = ASSET_OWNERSHIP_ACTION.CLIENT.Key; // if no spouse\r\n        if (asset.assetTypeKey === ASSETS.RRSP_RRIF.Key) {\r\n          if (asset.ownerKey !== ASSET_OWNERSHIP_ACTION.SPOUSE.Key)\r\n            asset.ownerKey = ASSET_OWNERSHIP_ACTION.CLIENT.Key;\r\n        }\r\n      }\r\n      asset = this.manageRRIFBounds(asset, newDataInput.Clients);\r\n      newDataInput = this.addRRIFSource2(newDataInput, asset);\r\n    }\r\n    newDataInput.Assets[asset.id - 1] = asset;\r\n\r\n    const newState = await this.reSync_reCalculate_reRender(\r\n      newDataInput,\r\n      newDataOutput,\r\n      COLLAPSIBLE_ASSETS,\r\n      asset.id\r\n    );\r\n    this.setState({ ...newState, loading: false });\r\n  };\r\n\r\n  manageRRIFBounds = (asset, clients) => {\r\n    const age =\r\n      asset.ownerKey === ASSET_OWNERSHIP_ACTION.SPOUSE.Key\r\n        ? clients[QUOTE_SPOUSE].Age\r\n        : clients[QUOTE_CLIENT].Age;\r\n    if (asset.RRIFStartAge < age) asset.RRIFStartAge = age;\r\n    else if (asset.RRIFStartAge > DEFAULT_RRIF_AGE)\r\n      asset.RRIFStartAge = DEFAULT_RRIF_AGE;\r\n    return asset;\r\n  };\r\n\r\n  handleUpdateLiability = async (liability) => {\r\n    this.setState({ loading: true });\r\n    let { dataInput, dataOutput } = this.state;\r\n    const newDataInput = _.cloneDeep(dataInput);\r\n    const newDataOutput = _.cloneDeep(dataOutput);\r\n    newDataInput.Liabilitys[liability.id - 1] = liability;\r\n\r\n    const redoAll =\r\n      liability.liabTypeKey === LIABILITIES.CHARITABLE_GIFTS.Key ? true : false;\r\n    // before updating state, resync, recalcuate, then update state to re_render\r\n    let newState = await this.reSync_reCalculate_reRender(\r\n      newDataInput,\r\n      newDataOutput,\r\n      redoAll ? COLLAPSIBLE_UPDATE_ALL : COLLAPSIBLE_LIABS, //updateAll if liab is charitable\r\n      liability.id\r\n    );\r\n\r\n    this.setState({ ...newState, loading: false });\r\n  };\r\n\r\n  handleUpdateSource = async (source) => {\r\n    this.setState({ loading: true });\r\n    let { dataInput, dataOutput } = this.state;\r\n    const newDataInput = _.cloneDeep(dataInput);\r\n    const newDataOutput = _.cloneDeep(dataOutput);\r\n    newDataInput.Sources[source.id - 1] = source;\r\n\r\n    // before updating state, resync, recalcuate, then update state to re_render\r\n    const newState = await this.reSync_reCalculate_reRender(\r\n      newDataInput,\r\n      newDataOutput,\r\n      COLLAPSIBLE_SOURCES,\r\n      source.id\r\n    );\r\n    this.setState({ ...newState, loading: false, failedRemove: false });\r\n  };\r\n\r\n  handleUpdateNeed = async (need) => {\r\n    this.setState({ loading: true });\r\n    let { dataInput, dataOutput } = this.state;\r\n    const newDataInput = _.cloneDeep(dataInput);\r\n    const newDataOutput = _.cloneDeep(dataOutput);\r\n    newDataInput.Needs[need.id - 1] = need;\r\n\r\n    // before updating state, resync, recalcuate, then update state to re_render\r\n    const newState = await this.reSync_reCalculate_reRender(\r\n      newDataInput,\r\n      newDataOutput,\r\n      COLLAPSIBLE_NEEDS,\r\n      need.id\r\n    );\r\n    this.setState({ ...newState, loading: false });\r\n\r\n    //this.setState({ dataInput: data2 }, () => this.waitForSetStateCallback(0));\r\n  };\r\n\r\n  handleUpdatePresentation = async (presentation) => {\r\n    this.setState({ loading: true });\r\n    let { dataInput, dataOutput } = this.state;\r\n    let newDataInput = _.cloneDeep(dataInput);\r\n    const newDataOutput = _.cloneDeep(dataOutput);\r\n\r\n    // update tax rate\r\n    if (\r\n      //init === true ||\r\n      newDataInput.Presentations[0].provinceKey !== presentation.provinceKey\r\n    ) {\r\n      const tr = await getTaxRate(\r\n        \"PERSONAL_INCOME\",\r\n        presentation.provinceKey\r\n        //convertProvince(presentation.provinceKey, this.state.dataInput.Presentations[0].language)\r\n      );\r\n      presentation.taxRate = (Math.round(tr * 10000) / 100).toFixed(4);\r\n    }\r\n\r\n    const redoAll = true; //presentation.taxRate !== newDataInput.Presentations[0].taxRate || presentation.inflation !== newDataInput.Presentations[0].inflation\r\n\r\n    let debounce = false;\r\n    if (\r\n      newDataInput.Presentations[0].designedBy !== presentation.designedBy ||\r\n      newDataInput.Presentations[0].designedFor !== presentation.designedFor ||\r\n      newDataInput.Presentations[0].notes !== presentation.notes\r\n    )\r\n      debounce = true;\r\n\r\n    newDataInput.Presentations[presentation.id - 1] = presentation;\r\n    const newState = await this.reSync_reCalculate_reRender(\r\n      newDataInput,\r\n      newDataOutput,\r\n      redoAll ? COLLAPSIBLE_UPDATE_ALL : COLLAPSIBLE_PRESENTATION, //updateAll if tax rate or inf rate change\r\n      presentation.id\r\n    );\r\n\r\n    // before eupdating state, resync, recalcuate, update state to re_render\r\n    this.setState({ ...newState, loading: false });\r\n  };\r\n\r\n  saveAsDefaultCase = (clear) => {\r\n    // save as default if needed\r\n    const storageName = DEFAULT_QUOTE;\r\n    if (clear) {\r\n      localStorage.removeItem(storageName);\r\n    } else {\r\n      localStorage.setItem(storageName, JSON.stringify(this.state.dataInput));\r\n    }\r\n  };\r\n\r\n  // this updates all and changes languge for all grids\r\n  handleUpdatePresentationChange = async (presentation, noRecalc) => {\r\n    if (noRecalc) {\r\n      this.setState((prevState) => ({\r\n        dataInput: {\r\n          ...prevState.dataInput,\r\n          Presentations: [\r\n            {\r\n              ...prevState.dataInput.Presentations[0],\r\n              resultsOption: presentation.resultsOption,\r\n              periodOption: presentation.periodOption,\r\n            },\r\n          ],\r\n        },\r\n      }));\r\n    } else {\r\n      this.setState({ loading: true });\r\n      let { dataInput, dataOutput } = this.state;\r\n      const newDataInput = _.cloneDeep(dataInput);\r\n      const newDataOutput = _.cloneDeep(dataOutput);\r\n\r\n      newDataInput.Presentations[0] = presentation;\r\n\r\n      const newState = await this.reSync_reCalculate_reRender(\r\n        newDataInput,\r\n        newDataOutput,\r\n        COLLAPSIBLE_RESULTS,\r\n        0,\r\n        false,\r\n        false\r\n      );\r\n\r\n      // before eupdating state, resync, recalcuate, update state to re_render\r\n      this.setState({ ...newState, loading: false });\r\n    }\r\n  };\r\n\r\n  handleAddClient = async (client) => {\r\n    this.setState({ loading: true });\r\n    const { dataInput, dataOutput } = this.state;\r\n    let newDataInput = _.cloneDeep(dataInput);\r\n    const newDataOutput = _.cloneDeep(dataOutput);\r\n    newDataInput.Clients.push(client);\r\n    //if (client.memberKey === MEMBER.CHILD.Key)\r\n    //newDataInput = this.manageAddingChild(newDataInput);\r\n    // resync, recalcuate, then update state to re_render\r\n    // if has salary, add source\r\n\r\n    newDataInput = await this.manageAddingClientWithIncome(\r\n      newDataInput,\r\n      client\r\n    );\r\n\r\n    // adding a client to EP changes to JLTD and existing assets are affected\r\n\r\n    const newState = await this.reSync_reCalculate_reRender(\r\n      newDataInput,\r\n      newDataOutput,\r\n      APPLET_EP ? COLLAPSIBLE_UPDATE_ALL : COLLAPSIBLE_CLIENTS,\r\n      APPLET_EP ? 0 : client.id\r\n    );\r\n    this.setState({ ...newState, loading: false });\r\n    //this.setState({ dataInput: data2 }, () => this.manageAddingChild());\r\n  };\r\n\r\n  manageAddingChild = (input) => {\r\n    input = this.manageEducation2(input);\r\n    input = this.manageOrphan2(input);\r\n    return input;\r\n  };\r\n\r\n  manageAddingClientWithIncome = async (newDataInput, client) => {\r\n    let source = createDefaultSource(newDataInput.Sources.length + 1);\r\n    source.amount = client.Income;\r\n    source.duration = client.retirementAge - client.Age;\r\n    source.ownerID = client.id;\r\n    source.taxRate = client.avgTaxRate;\r\n    newDataInput.Sources.push(source);\r\n\r\n    return newDataInput;\r\n  };\r\n\r\n  manageRemovingClientWithIncome = async (dataInput) => {\r\n    // remove all salaryPct sources and re-add\r\n    dataInput.Sources = dataInput.Sources.filter(\r\n      (item) => item.sourceTypeKey !== INCOMESOURCES.SURVIVORS_INCOME.Key\r\n    );\r\n    dataInput.Clients.forEach(async (element) => {\r\n      if (element.memberKey !== MEMBER.CLIENT.Key) {\r\n        dataInput = await this.manageAddingClientWithIncome(dataInput, element);\r\n      }\r\n    });\r\n\r\n    return dataInput;\r\n  };\r\n\r\n  handleAddAsset = async (asset) => {\r\n    this.setState({ loading: true });\r\n\r\n    const { dataInput, dataOutput } = this.state;\r\n    let newDataInput = _.cloneDeep(dataInput);\r\n    let newDataOutput = _.cloneDeep(dataOutput);\r\n    if (asset === undefined) {\r\n      asset = createDefaultAsset(1);\r\n      // single person\r\n      if (newDataInput.Clients.length === 1)\r\n        asset.ownerKey = ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key;\r\n    }\r\n\r\n    //  dataInput.assetsNo++;\r\n    newDataInput.Assets.push(asset);\r\n\r\n    // resync, recalcuate, then update state to re_render\r\n    const newState = await this.reSync_reCalculate_reRender(\r\n      newDataInput,\r\n      newDataOutput,\r\n      COLLAPSIBLE_ASSETS,\r\n      asset.id\r\n    );\r\n    this.setState({ ...newState, loading: false });\r\n\r\n    /*     this.setState({ dataInput: dataInput, loading: true }, () =>\r\n      this.waitForSetStateCallback(0) // no need to save to storage when default is added\r\n    );\r\n */ //await this.updateProjection(asset)\r\n  };\r\n\r\n  updateProjection = async (asset) => {\r\n    let dataInput = this.state.dataInput;\r\n\r\n    const insuranceNeed =\r\n      this.state.dataOutput.dataInsuranceNeeds[\r\n        dataInput.Presentations[0].periodOption\r\n      ].Value;\r\n    let dataNA = await setUIDataToAPI(this.state.dataInput, insuranceNeed);\r\n    dataInput.Assets[asset.id - 1].projection = await getAssetGridValues(\r\n      dataNA,\r\n      asset,\r\n      this.state.dataInput.Presentations[0].language,\r\n      false\r\n    );\r\n\r\n    this.setState({ dataInput: dataInput, loading: false });\r\n  };\r\n\r\n  handleAddLiability = async (Liab) => {\r\n    this.setState({ loading: true });\r\n    const { dataInput, dataOutput } = this.state;\r\n    const newDataInput = _.cloneDeep(dataInput);\r\n    const newDataOutput = _.cloneDeep(dataOutput);\r\n    if (Liab === undefined) {\r\n      Liab = {\r\n        id: 1,\r\n        //Type: LIABILITIES.LAST_EXPENSES.value[\"en\"],\r\n        liabTypeKey: LIABILITIES.LAST_EXPENSES.Key,\r\n        ownerKey: OWNERSHIP.CLIENT.Key,\r\n        currValue: 0,\r\n        //growthDir: GROWTHDIR[\"en\"].Values[0], //increases\r\n        growthDirKey: GROWTHDIR.GROWS.Key, //increases\r\n        growth: 0,\r\n        repay: 0,\r\n        exposureDur: 99,\r\n        assetTaxLiabID: 0,\r\n        assetTaxLiabProj: [],\r\n      };\r\n    }\r\n\r\n    newDataInput.Liabilitys.push(Liab);\r\n\r\n    // resync, recalcuate, then update state to re_render\r\n\r\n    const newState = await this.reSync_reCalculate_reRender(\r\n      newDataInput,\r\n      newDataOutput,\r\n      COLLAPSIBLE_LIABS,\r\n      Liab.id\r\n    );\r\n    this.setState({ ...newState, loading: false });\r\n\r\n    /*     this.setState({ dataInput: data2 }, () =>\r\n      this.waitForSetStateCallback(0) // no need to save to storage when default is added\r\n    ); */\r\n  };\r\n\r\n  handleAddAssetTaxCredit = (type) => {\r\n    let data2 = this.state.dataInput;\r\n    // check if already there\r\n    let taxCredit = 0;\r\n    this.state.dataInput.Liabilitys.forEach((element) => {\r\n      if (element.liabTypeKey === LIABILITIES.CHARITABLE_GIFTS.Key) {\r\n        taxCredit += element.currValue;\r\n      }\r\n    });\r\n\r\n    taxCredit *= this.state.dataInput.Presentations[0].taxRate / 100;\r\n    let exists = false;\r\n    data2.Assets.forEach((element) => {\r\n      if (element.assetTypeKey === type) {\r\n        exists = true;\r\n        if (Math.abs(element.currValue - taxCredit) > 1) {\r\n          element.currValue = taxCredit;\r\n          this.handleUpdateAsset(element);\r\n        }\r\n      }\r\n    });\r\n    if (taxCredit > 0 && exists === false) {\r\n      const asset = createDefaultAsset(this.state.dataInput.Assets.length + 1); //assetsNo + 1)\r\n      asset.assetTypeKey = ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.Key;\r\n      asset.ownerKey = ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key;\r\n      asset.assetTaxTypeKey = ASSET_TAX.NON_TAXABLE.Key;\r\n      asset.currValue = taxCredit;\r\n      asset.DisposeYr = 0;\r\n\r\n      this.handleAddAsset(asset);\r\n      this.openCollapsible[COLLAPSIBLE_ASSETS].open = COLLAPSIBLES_OPEN;\r\n    }\r\n  };\r\n\r\n  handleAddAssetTaxCredit2 = (dataInput) => {\r\n    // check if already there\r\n    let taxCredit = 0;\r\n    dataInput.Liabilitys.forEach((element) => {\r\n      if (element.liabTypeKey === LIABILITIES.CHARITABLE_GIFTS.Key) {\r\n        taxCredit += element.currValue;\r\n      }\r\n    });\r\n\r\n    taxCredit *= dataInput.Presentations[0].taxRate / 100;\r\n    let exists = false;\r\n    dataInput.Assets.forEach((element) => {\r\n      if (element.assetTypeKey === ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.Key) {\r\n        exists = true;\r\n        if (Math.abs(element.currValue - taxCredit) > 1) {\r\n          element.currValue = taxCredit;\r\n          // this.handleUpdateAsset(element);\r\n        }\r\n      }\r\n    });\r\n    if (taxCredit > 0 && exists === false) {\r\n      const asset = createDefaultAsset(dataInput.Assets.length + 1); //assetsNo + 1)\r\n      asset.assetTypeKey = ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.Key;\r\n      asset.ownerKey = ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key;\r\n      asset.assetTaxTypeKey = ASSET_TAX.NON_TAXABLE.Key;\r\n      asset.currValue = taxCredit;\r\n      asset.DisposeYr = 0;\r\n\r\n      dataInput.Assets.push(asset);\r\n      this.openCollapsible[COLLAPSIBLE_ASSETS].open = COLLAPSIBLES_OPEN;\r\n    }\r\n    return dataInput;\r\n  };\r\n\r\n  handleAddSource = async (source) => {\r\n    this.setState({ loading: true });\r\n    const { dataInput, dataOutput } = this.state;\r\n    let newDataInput = _.cloneDeep(dataInput);\r\n    let newDataOutput = _.cloneDeep(dataOutput);\r\n    if (source === undefined) {\r\n      source = createDefaultSource();\r\n    }\r\n    // duration, growthRate,ownerID,taxRate depends on clients\r\n    source.ownerID = 2; // spouse or 1st child if single family57\r\n    source.duration = newDataInput.Sources[0].duration;\r\n    source.growthRate = newDataInput.Presentations[0].inflation;\r\n    source.taxRate =\r\n      newDataInput.Clients.length > 1\r\n        ? newDataInput.Clients[1].avgTaxRate\r\n        : newDataInput.Clients[0].avgTaxRate; // first survivor\r\n\r\n    newDataInput.Sources.push(source);\r\n    // resync, recalcuate, then update state to re_render\r\n    const newState = await this.reSync_reCalculate_reRender(\r\n      newDataInput,\r\n      newDataOutput,\r\n      COLLAPSIBLE_SOURCES,\r\n      source.id\r\n    );\r\n\r\n    this.setState({ ...newState, loading: false, failedRemove: false });\r\n  };\r\n\r\n  handleAddNeed = async (nextKey, startYear, duration) => {\r\n    if (nextKey === undefined) {\r\n      nextKey = INCOMENEEDS.TEMPORARY_INCOME.Key;\r\n      startYear = 0;\r\n      duration = 10;\r\n    }\r\n    this.setState({ loading: true });\r\n    const { dataInput, dataOutput } = this.state;\r\n    const newDataInput = _.cloneDeep(dataInput);\r\n    const newDataOutput = _.cloneDeep(dataOutput);\r\n\r\n    const need = {\r\n      id: newDataInput.Needs.length + 1, //needsNo,\r\n      needTypeKey: nextKey,\r\n      amount: 0,\r\n      Percent: 0,\r\n      startYear: startYear,\r\n      duration: duration,\r\n    };\r\n    newDataInput.Needs.push(need);\r\n\r\n    // resync, recalcuate, then update state to re_render\r\n    const newState = await this.reSync_reCalculate_reRender(\r\n      newDataInput,\r\n      newDataOutput,\r\n      COLLAPSIBLE_NEEDS,\r\n      need.id\r\n    );\r\n    this.setState({ ...newState, loading: false });\r\n\r\n    //    this.setState({ dataInput: data2 }, () => this.waitForSetStateCallback());\r\n  };\r\n\r\n  handleRemoveClient = async (id) => {\r\n    if (this.OKToRemove) {\r\n      this.setState({ loading: true });\r\n      const { dataInput, dataOutput } = this.state;\r\n      let newDataInput = _.cloneDeep(dataInput);\r\n      const newDataOutput = _.cloneDeep(dataOutput);\r\n      //   this.OKToRemove = false;\r\n\r\n      // first remove source if child\r\n      let cl = newDataInput.Clients.find((x) => x.id === id);\r\n\r\n      if (cl !== undefined && cl.memberKey === MEMBER.CHILD.Key)\r\n        newDataInput = await this.manageRemoveOrphan(newDataInput, cl.ownerID);\r\n\r\n      newDataInput.Clients.splice(id - 1, 1);\r\n      let i;\r\n      newDataInput.Sources = newDataInput.Sources.filter((item) => {\r\n        if (item.ownerID >= id) item.ownerID -= 1;\r\n      });\r\n\r\n      for (i = 1; i <= newDataInput.Clients.length; ++i) {\r\n        newDataInput.Clients[i - 1].id = i;\r\n      }\r\n      newDataInput = await this.manageRemovingClientWithIncome(newDataInput);\r\n      //data2.clientsNo = data2.Clients.length;\r\n      let redoAll = false;\r\n    \r\n      if (newDataInput.Clients.length === 1) {\r\n        // single person\r\n        newDataInput = await this.setAssetActionToLiquidate(newDataInput);\r\n        newDataInput = await this.setNeedsSinglePerson(newDataInput);\r\n        redoAll = true;\r\n    \r\n      }\r\n      // resync, recalcuate, then update state to re_render\r\n      const newState = await this.reSync_reCalculate_reRender(\r\n        newDataInput,\r\n        newDataOutput,\r\n        redoAll ? COLLAPSIBLE_UPDATE_ALL : COLLAPSIBLE_CLIENTS,\r\n        id\r\n      );\r\n      this.setState({ ...newState, loading: false });\r\n    }\r\n  };\r\n\r\n  handleRemoveAsset = async (id) => {\r\n    if (this.OKToRemove) {\r\n      //  this.OKToRemove = false;\r\n\r\n      this.setState({ loading: true });\r\n      const { dataInput, dataOutput } = this.state;\r\n      let newDataInput = _.cloneDeep(dataInput);\r\n      const newDataOutput = _.cloneDeep(dataOutput);\r\n\r\n      // remove RRIF\r\n      if (newDataInput.Assets[id - 1].assetTypeKey === ASSETS.RRSP_RRIF.Key)\r\n        newDataInput = this.removeRRIFSource(newDataInput);\r\n\r\n      newDataInput.Assets.splice(id - 1, 1);\r\n      newDataOutput.assetProjections.splice(id - 1, 1);\r\n      let i;\r\n      for (i = 1; i <= newDataInput.Assets.length; ++i) {\r\n        newDataInput.Assets[i - 1].id = i;\r\n        newDataOutput.assetProjections[i - 1].id = i;\r\n      }\r\n\r\n      // resync, recalcuate, then update state to re_render\r\n      // removing asset redoes ids need to do all grids\r\n      const newState = await this.reSync_reCalculate_reRender(\r\n        newDataInput,\r\n        newDataOutput,\r\n        COLLAPSIBLE_UPDATE_ALL,\r\n        0\r\n        //COLLAPSIBLE_ASSETS,\r\n        //id\r\n      );\r\n      this.setState({ ...newState, loading: false });\r\n    }\r\n  };\r\n\r\n  handleRemoveLiability = async (id) => {\r\n    if (this.OKToRemove) {\r\n      // this.OKToRemove = false;\r\n\r\n      this.setState({ loading: true });\r\n      const { dataInput, dataOutput } = this.state;\r\n      const newDataInput = _.cloneDeep(dataInput);\r\n      const newDataOutput = _.cloneDeep(dataOutput);\r\n      // if charit remove corresp asset\r\n      const charit = newDataInput.Liabilitys.filter(\r\n        (liab) =>\r\n          liab.liabTypeKey === LIABILITIES.CHARITABLE_GIFTS.Key &&\r\n          liab.id === id\r\n      );\r\n      if (charit !== undefined && charit.length > 0) {\r\n        const charitAsset = newDataInput.Assets.filter(\r\n          (asset) =>\r\n            asset.assetTypeKey === ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.Key\r\n        );\r\n        if (charitAsset !== undefined && charitAsset.length > 0) {\r\n          newDataInput.Assets = newDataInput.Assets.filter(\r\n            (asset) =>\r\n              asset.assetTypeKey !== ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.Key\r\n          );\r\n          let i;\r\n          for (i = 1; i <= newDataInput.Assets.length; ++i) {\r\n            newDataInput.Assets[i - 1].id = i;\r\n            newDataOutput.assetProjections[i - 1].id = i;\r\n          }\r\n        }\r\n      }\r\n\r\n      newDataInput.Liabilitys.splice(id - 1, 1);\r\n      let i;\r\n      for (i = 1; i <= newDataInput.Liabilitys.length; ++i) {\r\n        newDataInput.Liabilitys[i - 1].id = i;\r\n      }\r\n\r\n      // resync, recalcuate, then update state to re_render\r\n      const newState = await this.reSync_reCalculate_reRender(\r\n        newDataInput,\r\n        newDataOutput,\r\n        COLLAPSIBLE_LIABS,\r\n        id\r\n      );\r\n      this.setState({ ...newState, loading: false });\r\n    }\r\n  };\r\n\r\n  handleRemoveSource = async (id) => {\r\n    if (this.OKToRemove) {\r\n      //  this.OKToRemove = false;\r\n\r\n      let failedRemove = false;\r\n      this.setState({ loading: true });\r\n      const { dataInput, dataOutput } = this.state;\r\n      const newDataInput = _.cloneDeep(dataInput);\r\n      const newDataOutput = _.cloneDeep(dataOutput);\r\n      let i;\r\n      //this.failedRemove=false\r\n      for (i = 0; i < newDataInput.Sources.length; ++i) {\r\n        if (\r\n          newDataInput.Sources[i].id === id &&\r\n          (newDataInput.Sources[i].sourceTypeKey ===\r\n            INCOMESOURCES.GOV_SURVIVORS_PENSION.Key ||\r\n            newDataInput.Sources[i].sourceTypeKey ===\r\n              INCOMESOURCES.GOV_DEATH_BENEFIT.Key ||\r\n            newDataInput.Sources[i].sourceTypeKey ===\r\n              INCOMESOURCES.GOV_ORPHANS_BENEFIT.Key)\r\n        )\r\n          failedRemove = true;\r\n      }\r\n      //this.setState({ failedRemove: failedRemove})\r\n\r\n      this.setState((prevState) => ({\r\n        failedRemove: prevState.failedRemove === true ? false : failedRemove,\r\n      }));\r\n\r\n      if (failedRemove === false) {\r\n        newDataInput.Sources.splice(id - 1, 1);\r\n        for (i = 1; i <= newDataInput.Sources.length; ++i) {\r\n          newDataInput.Sources[i - 1].id = i;\r\n        }\r\n        //dataInput.sourcesNo = dataInput.Sources.length;\r\n\r\n        // resync, recalcuate, then update state to re_render\r\n        const newState = await this.reSync_reCalculate_reRender(\r\n          newDataInput,\r\n          newDataOutput,\r\n          COLLAPSIBLE_SOURCES,\r\n          id\r\n        );\r\n        this.setState({ ...newState, loading: false });\r\n      }\r\n    }\r\n  };\r\n\r\n  handleRemoveNeed = async (id) => {\r\n    if (this.OKToRemove) {\r\n      // this.OKToRemove = false;\r\n\r\n      this.setState({ loading: true });\r\n      const { dataInput, dataOutput } = this.state;\r\n      const newDataInput = _.cloneDeep(dataInput);\r\n      const newDataOutput = _.cloneDeep(dataOutput);\r\n      newDataInput.Needs.splice(id - 1, 1);\r\n      let i;\r\n      for (i = 1; i <= newDataInput.Needs.length; ++i) {\r\n        newDataInput.Needs[i - 1].id = i;\r\n      }\r\n\r\n      // resync, recalcuate, then update state to re_render\r\n      const newState = await this.reSync_reCalculate_reRender(\r\n        newDataInput,\r\n        newDataOutput,\r\n        COLLAPSIBLE_NEEDS,\r\n        id\r\n      );\r\n      this.setState({ ...newState, loading: false });\r\n    }\r\n  };\r\n\r\n  addRRIFSource = (asset) => {\r\n    const existingRRIF = this.state.dataInput.Sources.find(\r\n      (x) => x.sourceTypeKey === INCOMESOURCES.RRIF.Key\r\n    );\r\n    // this is done based on asset in API. this display only\r\n\r\n    if (existingRRIF === undefined) {\r\n      const sourceRRIF = {\r\n        id: this.state.dataInput.Sources.length + 1,\r\n        sourceTypeKey: INCOMESOURCES.RRIF.Key,\r\n        amount: 0,\r\n        startYear: asset.RRIFStartAge,\r\n        duration: 99,\r\n        ownerID: 2,\r\n        taxRate: 0,\r\n        growthRate: 0,\r\n      };\r\n\r\n      this.handleAddSource(sourceRRIF);\r\n    } else {\r\n      existingRRIF.startYear = asset.RRIFStartAge;\r\n      this.handleUpdateSource(existingRRIF);\r\n    }\r\n  };\r\n\r\n  addRRIFSource2 = (dataInput, asset) => {\r\n    const existingRRIF = dataInput.Sources.find(\r\n      (x) => x.sourceTypeKey === INCOMESOURCES.RRIF.Key\r\n    );\r\n    // this is done based on asset in API. this display only\r\n\r\n    if (existingRRIF === undefined) {\r\n      const sourceRRIF = {\r\n        id: this.state.dataInput.Sources.length + 1,\r\n        sourceTypeKey: INCOMESOURCES.RRIF.Key,\r\n        amount: 0,\r\n        startYear: asset.RRIFStartAge,\r\n        duration: 99,\r\n        ownerID: 2,\r\n        taxRate: 0,\r\n        growthRate: 0,\r\n      };\r\n\r\n      // do it right here\r\n      dataInput.Sources.push(sourceRRIF);\r\n\r\n      //dataInput = this.handleAddSource(sourceRRIF);\r\n    } else {\r\n      existingRRIF.startYear = asset.RRIFStartAge;\r\n      // do it right here\r\n      dataInput.Sources[existingRRIF.id - 1] = existingRRIF;\r\n    }\r\n\r\n    return dataInput;\r\n  };\r\n\r\n  removeRRIFSource = (dataInput) => {\r\n    const existingRRIF = dataInput.Sources.find(\r\n      (x) => x.sourceTypeKey === INCOMESOURCES.RRIF.Key\r\n    );\r\n    // this is done based on asset in API. this display only\r\n\r\n    if (existingRRIF !== undefined) {\r\n      const id = existingRRIF.id;\r\n      dataInput.Sources.splice(id - 1, 1);\r\n    }\r\n\r\n    return dataInput;\r\n  };\r\n\r\n  copyPresentation = () => {\r\n    return JSON.parse(JSON.stringify(this.state.dataInput.Presentations[0]));\r\n  };\r\n\r\n  changeLang = () => {\r\n    let pres = this.copyPresentation();\r\n    pres.language = pres.language === \"en\" ? \"fr\" : \"en\";\r\n    const noRecalc = false;\r\n\r\n    this.handleUpdatePresentationChange(pres, noRecalc);\r\n    // close all\r\n    let i;\r\n    for (i = 0; i < COLLAPSIBLES_COUNT; ++i) {\r\n      this.openCollapsible[i].open = COLLAPSIBLES_CLOSED;\r\n    }\r\n  };\r\n\r\n  debounceSaveToStorage = debounce(\r\n    () => {\r\n      return this.saveToStorage();\r\n    },\r\n    waitTime,\r\n    { leading: false, trailing: true }\r\n  );\r\n\r\n  areThereChildren = () => {\r\n    let Children = this.state.dataInput.Clients.find(\r\n      (x) => x.memberKey === MEMBER.CHILD.Key\r\n    );\r\n    if (Children !== undefined) return true;\r\n    else return false;\r\n  };\r\n\r\n  manageEducation = () => {\r\n    let Children = this.state.dataInput.Clients.find(\r\n      (x) => x.memberKey === MEMBER.CHILD.Key\r\n    );\r\n    if (Children !== undefined) {\r\n      let eduFunds = this.state.dataInput.Needs.find(\r\n        (x) => x.needTypeKey === INCOMENEEDS.EDUCATION_FUND.Key\r\n      );\r\n      if (eduFunds === undefined)\r\n        this.handleAddNeed(\r\n          INCOMENEEDS.EDUCATION_FUND.Key,\r\n          Math.max(0, UNIVERSITY_START_AGE - Children.Age),\r\n          Math.min(4, Math.max(0, UNIVERSITY_END_AGE - Children.Age))\r\n        );\r\n    }\r\n  };\r\n\r\n  manageEducation2 = (input) => {\r\n    let Children = input.Clients.find((x) => x.memberKey === MEMBER.CHILD.Key);\r\n    if (Children !== undefined) {\r\n      let eduFunds = input.Needs.find(\r\n        (x) => x.needTypeKey === INCOMENEEDS.EDUCATION_FUND.Key\r\n      );\r\n      if (eduFunds === undefined)\r\n        input.Needs.push({\r\n          id: input.Needs.length + 1, //needsNo,\r\n          needTypeKey: INCOMENEEDS.EDUCATION_FUND.Key,\r\n          amount: 0,\r\n          Percent: 0,\r\n          startYear: Math.max(0, UNIVERSITY_START_AGE - Children.Age),\r\n          duration: Math.min(4, Math.max(0, UNIVERSITY_END_AGE - Children.Age)),\r\n        });\r\n    }\r\n    return input;\r\n  };\r\n\r\n  manageOrphan2 = (input) => {\r\n    const childMember = MEMBER.CHILD.Key;\r\n    //const orphanBen = INCOMESOURCES.GOV_ORPHANS_BENEFIT.value[this.state.dataInput.Presentations[0].language];\r\n    const orphanBen = INCOMESOURCES.GOV_ORPHANS_BENEFIT.Key;\r\n    let Children = input.Clients.filter(function (item) {\r\n      return item.memberKey === childMember;\r\n    });\r\n    let orphSources = input.Sources.filter(function (item) {\r\n      return item.sourceTypeKey === orphanBen;\r\n    });\r\n\r\n    let maxDur =\r\n      input.Presentations[0].provinceKey === \"QC\"\r\n        ? MAX_ORPHAN_DUR_QC\r\n        : MAX_ORPHAN_DUR_NON_QC;\r\n    let orphAge =\r\n      input.Presentations[0].provinceKey === \"QC\"\r\n        ? ORPHAN_AGE_QC\r\n        : ORPHAN_AGE_NON_QC;\r\n\r\n    if (Children.length > 0) {\r\n      Children.forEach((element) => {\r\n        if (\r\n          element.Age <= orphAge &&\r\n          orphSources.filter((item) => {\r\n            return item.ownerID === element.id;\r\n          }).length === 0\r\n        ) {\r\n          const source = {\r\n            id: input.Sources.length + 1, //sourcesNo + 1,\r\n            sourceTypeKey: orphanBen,\r\n            amount: this.state.dataOutput.govBenefits.cppOrphan,\r\n            startYear: 0,\r\n            duration: maxDur - element.Age,\r\n            ownerID: element.id,\r\n          };\r\n          // no elig jan 2019 this.handleAddSource(orphanBen,this.orphan * this.state.dataInput.Clients[QUOTE_CLIENT].Eligibility / 100,25-element.Age,element.id, 1);\r\n          input.Sources.push(source);\r\n\r\n          //this.handleAddSource(source);\r\n        }\r\n      });\r\n    } else orphSources = [];\r\n\r\n    return input;\r\n  };\r\n\r\n  setAssetActionToLiquidate = async (dataInput) => {\r\n    dataInput.Assets.forEach((element) => {\r\n      element.ownerKey = ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key;\r\n      element.DisposeYr=0;\r\n    });\r\n    return dataInput;\r\n  };\r\n\r\n  setNeedsSinglePerson = async (dataInput) => {\r\n    dataInput.Needs.pop();\r\n    return dataInput;\r\n  };\r\n\r\n  manageOrphanSync = async (dataInput, dataOutput) => {\r\n    const childMember = MEMBER.CHILD.Key;\r\n    //const orphanBen = INCOMESOURCES.GOV_ORPHANS_BENEFIT.value[this.state.dataInput.Presentations[0].language];\r\n    const orphanBen = INCOMESOURCES.GOV_ORPHANS_BENEFIT.Key;\r\n\r\n    let sources = dataInput.Sources;\r\n\r\n    let orphSources = sources.filter(function (item) {\r\n      return item.sourceTypeKey === orphanBen;\r\n    });\r\n\r\n    let Children = dataInput.Clients.filter(function (item) {\r\n      return item.memberKey === childMember;\r\n    });\r\n\r\n    let sourcesNo = sources.length;\r\n    let maxDur =\r\n      dataInput.Presentations[0].provinceKey === \"QC\"\r\n        ? MAX_ORPHAN_DUR_QC\r\n        : MAX_ORPHAN_DUR_NON_QC;\r\n    let orphAge =\r\n      dataInput.Presentations[0].provinceKey === \"QC\"\r\n        ? ORPHAN_AGE_QC\r\n        : ORPHAN_AGE_NON_QC;\r\n\r\n    let setChildIDs = new Set();\r\n    if (Children.length > 0) {\r\n      Children.forEach((element) => {\r\n        setChildIDs.add(element.id);\r\n        sourcesNo = sources.length;\r\n        if (\r\n          element.Age <= orphAge &&\r\n          orphSources.filter((item) => {\r\n            return (\r\n              item.ownerID === element.id && item.sourceTypeKey === orphanBen\r\n            );\r\n          }).length === 0\r\n        ) {\r\n          /* let childID=orphSourcesIDs.length>0?orphSourcesIDs[0]:sources.length + 1\r\n          if(orphSourcesIDs.length>0)orphSourcesIDs=orphSourcesIDs.shift(); */\r\n          const source = {\r\n            id: sourcesNo + 1,\r\n            sourceTypeKey: orphanBen,\r\n            amount: dataOutput.govBenefits.cppOrphan,\r\n            startYear: 0,\r\n            duration: maxDur - element.Age,\r\n            ownerID: element.id,\r\n          };\r\n          // no elig jan 2019 this.handleAddSource(orphanBen,this.orphan * this.state.dataInput.Clients[QUOTE_CLIENT].Eligibility / 100,25-element.Age,element.id, 1);\r\n          sources.push(source);\r\n        } // exists but needs adj\r\n        else {\r\n          sources.forEach((source) => {\r\n            if (\r\n              source.sourceTypeKey === orphanBen &&\r\n              source.ownerID === element.id\r\n            )\r\n              source.amount = dataOutput.govBenefits.cppOrphan;\r\n          });\r\n        }\r\n      });\r\n      /*  for (let i = 1; i <= sources.length; ++i) {\r\n        sources[i - 1].id = i; \r\n      }*/\r\n    } else dataInput = await this.manageRemoveOrphan(dataInput);\r\n\r\n    sources = sources.filter((item) => {\r\n      return (\r\n        item.sourceTypeKey !== orphanBen ||\r\n        (setChildIDs.has(item.ownerID) && item.sourceTypeKey === orphanBen)\r\n      );\r\n    });\r\n\r\n    dataInput.Sources = sources;\r\n    return dataInput;\r\n  };\r\n\r\n  manageRemoveOrphan = async (input, childID) => {\r\n    //const orphanBen = INCOMESOURCES.GOV_ORPHANS_BENEFIT.value[this.state.dataInput.Presentations[0].language];\r\n    const orphanBen = INCOMESOURCES.GOV_ORPHANS_BENEFIT.Key;\r\n    input.Sources = input.Sources.filter(function (item) {\r\n      if (childID === undefined)\r\n        // remove all\r\n        return !(item.sourceTypeKey === orphanBen);\r\n      else\r\n        return !(item.ownerID === childID && item.sourceTypeKey === orphanBen);\r\n    });\r\n    let i;\r\n\r\n    //input.Sources.splice(orphSource.id - 1, 1);\r\n    for (i = 1; i <= input.Sources.length; ++i) {\r\n      input.Sources[i - 1].id = i;\r\n    }\r\n\r\n    return input;\r\n  };\r\n\r\n  updateDataLang = () => {\r\n    this.openParent = false;\r\n    this.openForce = false;\r\n  };\r\n\r\n  getAfterTaxTotalIncome = (newStateCandidateInput) => {\r\n    let totalATaxIncome = 0;\r\n    for (let i = 0; i < newStateCandidateInput.Clients.length; i++)\r\n      totalATaxIncome +=\r\n        newStateCandidateInput.Clients[i].Income *\r\n        (1 - newStateCandidateInput.Clients[i].avgTaxRate / 100);\r\n\r\n    return totalATaxIncome;\r\n  };\r\n\r\n  setSurivorIndex = () => {\r\n    const spKey = APPLET_INA ? MEMBER.SPOUSE.Key : MEMBER.CLIENT.Key;\r\n    let Survivor = this.state.dataInput.Clients.find(\r\n      (x) => x.memberKey === spKey\r\n    );\r\n\r\n    if (Survivor === undefined && APPLET_INA) {\r\n      if (this.state.dataInput.Clients.length === 1)\r\n        Survivor = this.state.dataInput.Clients.find(\r\n          (x) => x.memberKey === MEMBER.CLIENT.Key\r\n        );\r\n      else {\r\n        Survivor = this.state.dataInput.Clients.find(\r\n          (x) => x.memberKey === MEMBER.DEPENDENT_ADULT.Key\r\n        );\r\n        if (Survivor === undefined)\r\n          Survivor = this.state.dataInput.Clients.find(\r\n            (x) => x.memberKey === MEMBER.CHILD.Key\r\n          );\r\n      }\r\n    }\r\n\r\n    return Survivor.id - 1; // id is 1-based\r\n  };\r\n\r\n  setSurivorIndex2 = (newStateCandidateInput) => {\r\n    const spKey = APPLET_INA ? MEMBER.SPOUSE.Key : MEMBER.CLIENT.Key;\r\n    let Survivor = newStateCandidateInput.Clients.find(\r\n      (x) => x.memberKey === spKey\r\n    );\r\n\r\n    if (Survivor === undefined && APPLET_INA) {\r\n      if (newStateCandidateInput.Clients.length === 1)\r\n        Survivor = newStateCandidateInput.Clients.find(\r\n          (x) => x.memberKey === MEMBER.CLIENT.Key\r\n        );\r\n      else {\r\n        Survivor = newStateCandidateInput.Clients.find(\r\n          (x) => x.memberKey === MEMBER.DEPENDENT_ADULT.Key\r\n        );\r\n        if (Survivor === undefined)\r\n          Survivor = newStateCandidateInput.Clients.find(\r\n            (x) => x.memberKey === MEMBER.CHILD.Key\r\n          );\r\n      }\r\n    }\r\n\r\n    return Survivor.id - 1; // id is 1-based\r\n  };\r\n\r\n  syncPanelsValues2 = (newStateCandidateInput, itemToUpdateGroup) => {\r\n    // EP dosent have needs and sources to sync\r\n\r\n    this.survIdx = this.setSurivorIndex2(newStateCandidateInput);\r\n    let protectionPeriod =\r\n      newStateCandidateInput.Clients[this.survIdx].retirementAge -\r\n      newStateCandidateInput.Clients[this.survIdx].Age;\r\n    const singleFamily = isSingleFamily(newStateCandidateInput.Clients);\r\n    if (singleFamily) {\r\n      const yrs = singleFamilyProjectionYears(newStateCandidateInput.Clients);\r\n      protectionPeriod = yrs.noProjectionYrs;\r\n    }\r\n\r\n    newStateCandidateInput = this.handleAddAssetTaxCredit2(\r\n      newStateCandidateInput\r\n    );\r\n\r\n    if (APPLET_INA) {\r\n      if (this.survIdx !== -1) {\r\n        let i;\r\n        for (i = 0; i < newStateCandidateInput.Needs.length; i++) {\r\n          const needPercent = parseInt(\r\n            (newStateCandidateInput.Needs[i].Percent / 100) *\r\n              this.getAfterTaxTotalIncome(newStateCandidateInput)\r\n          );\r\n\r\n          const dur = protectionPeriod;\r\n          //const dur = 100 - newStateCandidateInput.Clients[this.survIdx].Age;\r\n          if (\r\n            this.caseFromFile === false &&\r\n            itemToUpdateGroup !== COLLAPSIBLE_RESULTS && // dont change if clicking on results\r\n            newStateCandidateInput.Needs[i].needTypeKey ===\r\n              INCOMENEEDS.PERCET_OF_INCOME.Key /* &&\r\n            newStateCandidateInput.Clients.length !== 1 */ // not for single person\r\n          ) {\r\n            if (\r\n              needPercent !== newStateCandidateInput.Needs[i].amount &&\r\n              newStateCandidateInput.Needs[i].Percent >= 0\r\n            ) {\r\n              newStateCandidateInput.Needs[i].amount = needPercent;\r\n            }\r\n\r\n            if (itemToUpdateGroup !== COLLAPSIBLE_NEEDS && newStateCandidateInput.Clients.length !== 1) {\r\n              // change duration of % of income\r\n              if (\r\n                (singleFamily &&\r\n                  newStateCandidateInput.Needs[i].startYear === 0) ||\r\n                (dur !== newStateCandidateInput.Needs[i].duration &&\r\n                  newStateCandidateInput.Needs[i].duration !== 100 &&\r\n                  dur > 0)\r\n              ) {\r\n                newStateCandidateInput.Needs[i].duration = dur;\r\n              }\r\n              if (\r\n                newStateCandidateInput.Needs[i].duration === 100 &&\r\n                dur > 0 &&\r\n                newStateCandidateInput.Needs[i].startYear !== dur\r\n              ) {\r\n                newStateCandidateInput.Needs[i].startYear = dur;\r\n              }\r\n            }\r\n          }\r\n\r\n          if (\r\n            this.caseFromFile === false &&\r\n            newStateCandidateInput.Needs[i].needTypeKey ===\r\n              INCOMENEEDS.EDUCATION_FUND.Key\r\n          ) {\r\n            let children = newStateCandidateInput.Clients.find(\r\n              (x) => x.memberKey === MEMBER.CHILD.Key\r\n            );\r\n            if (children !== undefined) {\r\n              if (\r\n                newStateCandidateInput.Needs[i].startYear !==\r\n                  Math.max(0, UNIVERSITY_START_AGE - children.Age) &&\r\n                children.length > 0\r\n              ) {\r\n                newStateCandidateInput.Needs[i].startYear = Math.max(\r\n                  0,\r\n                  UNIVERSITY_START_AGE - children.Age\r\n                );\r\n                newStateCandidateInput.Needs[i].duration = Math.max(\r\n                  0,\r\n                  Math.min(4, UNIVERSITY_END_AGE - children.Age)\r\n                );\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n        for (i = 0; i < newStateCandidateInput.Sources.length; i++) {\r\n          // all at income tax except divdend\r\n          if (\r\n            newStateCandidateInput.Sources[i].sourceTypeKey !==\r\n            INCOMESOURCES.DIVIDEND_INCOME.Key\r\n          )\r\n            newStateCandidateInput.Sources[i].taxRate =\r\n              newStateCandidateInput.Clients[this.survIdx].avgTaxRate; // spouse\r\n\r\n          // allow a different surv income dur if they input directly\r\n          if (\r\n            itemToUpdateGroup !== COLLAPSIBLE_SOURCES &&\r\n            itemToUpdateGroup !== COLLAPSIBLE_RESULTS\r\n          ) {\r\n            const dur = protectionPeriod;\r\n            if (\r\n              newStateCandidateInput.Sources[i].sourceTypeKey ===\r\n                INCOMESOURCES.SURVIVORS_INCOME.Key &&\r\n              newStateCandidateInput.Sources[i].startYear === 0 &&\r\n              dur !== newStateCandidateInput.Sources[i].duration &&\r\n              dur > 0\r\n            ) {\r\n              newStateCandidateInput.Sources[i].duration = dur;\r\n            }\r\n          }\r\n\r\n          if (newStateCandidateInput.Sources[i].ownerID === undefined)\r\n            newStateCandidateInput.Sources[i].ownerID =\r\n              newStateCandidateInput.Clients.length === 1 ? 1 : 2; // first surv\r\n          // allow a different surv income if they input directly\r\n          if (newStateCandidateInput.Clients.length > 1) {\r\n            //!singleFamily){\r\n            if (\r\n              itemToUpdateGroup !== COLLAPSIBLE_SOURCES &&\r\n              itemToUpdateGroup !== COLLAPSIBLE_RESULTS &&\r\n              newStateCandidateInput.Sources[i].ownerID - 1 > 0\r\n            ) {\r\n              if (\r\n                newStateCandidateInput.Sources[i].sourceTypeKey ===\r\n                  INCOMESOURCES.SURVIVORS_INCOME.Key &&\r\n                newStateCandidateInput.Sources[i].amount !==\r\n                  parseInt(\r\n                    newStateCandidateInput.Clients[\r\n                      newStateCandidateInput.Sources[i].ownerID - 1\r\n                    ].Income\r\n                  )\r\n              ) {\r\n                newStateCandidateInput.Sources[i].amount = parseInt(\r\n                  newStateCandidateInput.Clients[\r\n                    newStateCandidateInput.Sources[i].ownerID - 1\r\n                  ].Income\r\n                );\r\n              }\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        let i;\r\n        for (i = 0; i < newStateCandidateInput.Needs.length; i++) {\r\n          if (\r\n            newStateCandidateInput.Needs[i].needTypeKey ===\r\n            INCOMENEEDS.PERCET_OF_INCOME.Key\r\n          )\r\n            newStateCandidateInput.Needs[i].amount = 0;\r\n        }\r\n        //let newStateCandidateInput = newStateCandidateInput;\r\n        for (i = 0; i < newStateCandidateInput.Sources.length; i++) {\r\n          if (\r\n            newStateCandidateInput.Sources[i].sourceTypeKey ===\r\n            INCOMESOURCES.GOV_SURVIVORS_PENSION.Key\r\n          )\r\n            newStateCandidateInput.Sources[i].amount = 0;\r\n          else if (\r\n            newStateCandidateInput.Sources[i].sourceTypeKey ===\r\n            INCOMESOURCES.GOV_DEATH_BENEFIT.Key\r\n          )\r\n            newStateCandidateInput.Sources[i].amount = 0;\r\n          else if (\r\n            newStateCandidateInput.Sources[i].sourceTypeKey ===\r\n            INCOMESOURCES.GOV_ORPHANS_BENEFIT.Key\r\n          )\r\n            newStateCandidateInput.Sources[i].amount = 0;\r\n          else if (\r\n            newStateCandidateInput.Sources[i].sourceTypeKey ===\r\n            INCOMESOURCES.SURVIVORS_INCOME.Key\r\n          )\r\n            newStateCandidateInput.Sources[i].amount = 0;\r\n        }\r\n        this.OKToRemove = true;\r\n      }\r\n    }\r\n\r\n    return newStateCandidateInput;\r\n  };\r\n\r\n  setRates = () => {\r\n    let dataE = {\r\n      investmentRate: this.state.dataInput.Presentations[0].invRate / 100,\r\n      taxRate: this.state.dataInput.Presentations[0].taxRate / 100,\r\n      dividendTaxRate: 0.33,\r\n      capitalGainsInclusion: 0.5,\r\n      inflationRate: this.state.dataInput.Presentations[0].inflation / 100,\r\n    };\r\n\r\n    return dataE;\r\n  };\r\n\r\n  loadStorage = async () => {\r\n    let storageKey = APPLET_INA ? \"INAData\" : \"EPData\";\r\n\r\n    const objJSONData = JSON.parse(localStorage.getItem(storageKey));\r\n    this.updateStateFromJSon(objJSONData);\r\n  };\r\n\r\n  updateStateFromJSon = async (objJSONData) => {\r\n    if (objJSONData !== null && objJSONData !== undefined) {\r\n      // put loaded data to quote and show\r\n      this.setState({ loading: true });\r\n      //  console.log(objJSONData)\r\n      this.caseFromFile = true;\r\n      const { dataOutput } = this.state;\r\n      const newDataOutput = _.cloneDeep(dataOutput);\r\n      const newState = await this.reSync_reCalculate_reRender(\r\n        objJSONData,\r\n        newDataOutput,\r\n        COLLAPSIBLE_UPDATE_ALL, // to updateAll\r\n        0\r\n      );\r\n      this.setState({ ...newState, loading: false, initialLoading: false });\r\n    } //this.updateStateInput(objJSONData, () => this.waitForSetStateCallback());\r\n    this.caseFromFile = false;\r\n  };\r\n\r\n  saveToStorage = () => {\r\n    // in case we need to clear all\r\n    // localStorage.clear();\r\n    localStorage.setItem(\r\n      APPLET_INA ? \"INAData\" : \"EPData\",\r\n      JSON.stringify(this.state.dataInput)\r\n    );\r\n\r\n    // no recovery anymore\r\n    this.showRecover = 0;\r\n    hideRecover();\r\n  };\r\n\r\n  loadFromFile = (e) => {\r\n    const fileTarget = e.target.files[0];\r\n    if (!fileTarget) {\r\n      return;\r\n    }\r\n    this.setState({ loading: true });\r\n\r\n    // close all\r\n    let i;\r\n    for (i = 0; i < COLLAPSIBLES_COUNT; ++i) {\r\n      this.openCollapsible[i].open = COLLAPSIBLES_CLOSED;\r\n    }\r\n\r\n    const reader = new FileReader();\r\n    reader.onload = (e) => {\r\n      let contentsFile = e.target.result;\r\n      var objJSONData;\r\n      // is this a non-encrypted file\r\n      const encrptedSave =\r\n        contentsFile.search(\"dataInput\") > 0 ||\r\n        versionDetails().saveEncrypt === false\r\n          ? false\r\n          : true;\r\n\r\n      if (encrptedSave === true) {\r\n        // file is saved a s querystring\r\n        this.handleInitilizeQuoteFromQueryString(contentsFile);\r\n      } else {\r\n        // name changes\r\n        contentsFile = contentsFile.split(\"Amount\").join(\"amount\");\r\n        contentsFile = contentsFile.split(\"StartYr\").join(\"startYear\");\r\n        contentsFile = contentsFile.split(\"Duration\").join(\"duration\");\r\n        contentsFile = contentsFile\r\n          .split(\"\" + \"Tax\" + \"\")\r\n          .join(\"\" + \"avgTaxRate\" + \"\");\r\n        contentsFile = contentsFile.split(\"retireAge\").join(\"retirementAge\");\r\n\r\n        objJSONData = JSON.parse(contentsFile);\r\n        objJSONData.dataPresentations.Presentations[0].presentationDate =\r\n          new Date();\r\n\r\n        // old files\r\n        objJSONData.dataInput.Clients.forEach(function (element) {\r\n          if (element.sexKey == undefined) {\r\n            element.sexKey = getListItemKeyFromName(SEX, element.Sex);\r\n            delete element.Sex;\r\n          }\r\n        });\r\n        // old files\r\n        objJSONData.dataInput.Clients.forEach(function (element) {\r\n          if (element.smokerKey == undefined) {\r\n            element.smokerKey = getListItemKeyFromName(SMOKING, element.Smoker);\r\n            delete element.Smoker;\r\n          }\r\n        });\r\n        // old files\r\n        objJSONData.dataInput.Clients.forEach(function (element) {\r\n          if (element.memberKey == undefined) {\r\n            element.memberKey = getListItemKeyFromName(MEMBER, element.member);\r\n            delete element.member;\r\n          }\r\n        });\r\n\r\n        // old files\r\n        objJSONData.dataInput.Assets.forEach(function (element) {\r\n          if (element.assetTypeKey == undefined) {\r\n            element.assetTypeKey = getListItemKeyFromName(ASSETS, element.Type);\r\n            delete element.Type;\r\n          }\r\n        });\r\n        // old files\r\n        objJSONData.dataInput.Assets.forEach(function (element) {\r\n          if (element.assetTaxTypeKey == undefined) {\r\n            element.assetTaxTypeKey = getListItemKeyFromName(\r\n              ASSET_TAX,\r\n              element.Tax\r\n            );\r\n            delete element.Tax;\r\n          }\r\n        });\r\n\r\n        // old files\r\n        objJSONData.dataInput.Assets.forEach(function (element) {\r\n          if (element.ownerKey == undefined) {\r\n            element.ownerKey = ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key;\r\n          }\r\n        });\r\n\r\n        // old files note change in spelling\r\n        objJSONData.dataInput.Liabilitys.forEach(function (element) {\r\n          if (element.liabTypeKey == undefined) {\r\n            element.liabTypeKey = getListItemKeyFromName(\r\n              LIABILITIES,\r\n              element.Type\r\n            );\r\n            delete element.Type;\r\n          }\r\n        });\r\n\r\n        // old files\r\n        objJSONData.dataInput.Sources.forEach(function (element) {\r\n          if (element.sourceTypeKey == undefined) {\r\n            element.sourceTypeKey = getListItemKeyFromName(\r\n              INCOMESOURCES,\r\n              element.Type\r\n            );\r\n            delete element.Type;\r\n          }\r\n        });\r\n\r\n        // old files\r\n        objJSONData.dataInput.Needs.forEach(function (element) {\r\n          if (element.needTypeKey == undefined) {\r\n            element.needTypeKey = getListItemKeyFromName(\r\n              INCOMENEEDS,\r\n              element.Type\r\n            );\r\n            delete element.Type;\r\n          }\r\n        });\r\n\r\n        // old files\r\n        objJSONData.dataInput.Presentations.forEach(function (element) {\r\n          if (element.provinceKey == undefined) {\r\n            element.provinceKey = getListItemKeyFromName(\r\n              PROVINCE,\r\n              element.Province\r\n            );\r\n            delete element.Province;\r\n          }\r\n        });\r\n        this.updateStateFromJSon(objJSONData);\r\n      }\r\n    };\r\n    reader.readAsText(fileTarget);\r\n    this.setState({ loading: false });\r\n  };\r\n\r\n  respondToSaveRequest = (fileName) => {\r\n    this.setState({ showMsg: false });\r\n    let blob;\r\n    if (versionDetails().saveEncrypt === false)\r\n      // regular text file\r\n      blob = new Blob([JSON.stringify(this.state.dataInput)], {\r\n        type: \"text/plain;charset=utf-8\",\r\n      });\r\n    else blob = new Blob([this.dataQS], { type: \"text/plain;charset=utf-8\" });\r\n\r\n    // iphone\r\n    var iOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\r\n    if (fileName !== \"\") {\r\n      if (iOS === false) {\r\n        // works on IE and Edge to save file, would also work on Chrome, Firedox for desktop\r\n        saveAs(\r\n          blob,\r\n          fileName === undefined\r\n            ? \"INASavedData.json\"\r\n            : fileName + (APPLET_INA ? INA_FILE_TYPE : EP_FILE_TYPE) //\".json\"\r\n        );\r\n        //saveAs(blob, fileName===undefined?\"INASavedData.json\":prompt('Please enter file name:'))\r\n      } else {\r\n        blob = new Blob([JSON.stringify(this.state.dataInput)]);\r\n        saveAs(\r\n          blob,\r\n          fileName === undefined\r\n            ? \"INASavedData.json\"\r\n            : \"SignInINASavedData.json\"\r\n        );\r\n      }\r\n    }\r\n  };\r\n\r\n  saveToFile_OLD = () => {\r\n    const blob = new Blob([JSON.stringify(this.state.dataInput)], {\r\n      type: \"text/plain;charset=utf-8\",\r\n    });\r\n    saveAs(blob, \"INASavedData.json\");\r\n  };\r\n\r\n  saveToFile = () => {\r\n    if (versionDetails().saveEncrypt === false)\r\n      // regular text file\r\n      this.respondToSaveRequest(\"fileINA\");\r\n    else {\r\n      this.handleQueryString(\r\n        MODE_SAVE,\r\n        this.state.dataInput,\r\n        this.state.dataOutput\r\n      );\r\n    }\r\n  };\r\n\r\n  loadData = () => {\r\n    let fails = fetchTimerAPICheck();\r\n    if (fails > 1) this.setState({ failedAPI: true });\r\n  };\r\n\r\n  respondToPopUp = () => {\r\n    this.saveToStorage();\r\n\r\n    let urlReload = PARENT_SITE_PROD + \"?ina=\" + shortid.generate();\r\n    const url2 = window.location.href;\r\n\r\n    if (url2.indexOf(SITE_TEST) !== -1)\r\n      urlReload = PARENT_SITE_TEST + \"?ina=\" + shortid.generate();\r\n\r\n    const urlLogoff = \"https://adfs.ppi.ca/adfs/ls/?wa=wsignout1.0\";\r\n    //\tif(fails>1){\r\n    //localStorage.setItem('INAAPIFails', parseInt(0));\r\n    window.parent.location.href = urlLogoff;\r\n    //\t}\r\n    //\telse\r\n    {\r\n      window.parent.location.href = urlReload;\r\n    }\r\n  };\r\n\r\n  EmailINA = () => {\r\n    // test\r\n\r\n    this.handleQueryString(\r\n      MODE_EMAIL,\r\n      this.state.dataInput,\r\n      this.state.dataOutput\r\n    );\r\n    //window.location.href ='mailto: msamiei@ppi.ca ?subject= Needs Analysis Quote &body=' + this.dataQS;\r\n  };\r\n\r\n  callCalculateResultsAPI = (e) => {\r\n    if (!this.resultIsOpen)\r\n      //this.handleUpdataData();\r\n      this.resultIsOpen = !e;\r\n  };\r\n\r\n  adjustVisibleOutputSection = (unit) => {\r\n    this.visibleOutputSection = this.visibleOutputSection + unit;\r\n  };\r\n\r\n  hasPersonalResidenceAlready = () => {\r\n    let PR = this.state.dataInput.Assets.find(\r\n      (x) => x.assetTypeKey === ASSETS.PERSONAL_RESIDENCE.Key\r\n    );\r\n\r\n    return PR !== undefined;\r\n  };\r\n\r\n  handleCollapsibleClick = async (collapsible) => {\r\n    if (collapsible.id === COLLAPSIBLE_RESULTS) {\r\n      /* if (this.state.outputInitilized === false)\r\n      {\r\n          this.setState({ outputInitilized:true});\r\n      } */\r\n      this.adjustVisibleOutputSection(\r\n        this.openCollapsible[COLLAPSIBLE_RESULTS].open ? -1 : 1\r\n      );\r\n\r\n      this.callCalculateResultsAPI(collapsible.open);\r\n    }\r\n    if (collapsible.id === COLLAPSIBLE_SOURCES) {\r\n      // recheck gov\r\n      // await this.govBenefits();\r\n    }\r\n    // this.setState({failedRemove : false});\r\n    if (this.state.SnapImport) this.setState({ SnapImport: false });\r\n    this.openCollapsible[collapsible.id].open = !collapsible.open;\r\n  };\r\n\r\n  setOutput = (e) => {\r\n    // Internet Explorer 6-11\r\n    let isIE = /*@cc_on!@*/ false || !!document.documentMode;\r\n\r\n    if (isIE)\r\n      alert(MESSAGES[this.state.dataInput.Presentations[0].language].ie);\r\n    else this.graphs = e === 2 ? true : false;\r\n    this.setState({ loading: false });\r\n  };\r\n\r\n  selectMultiButtonPeriod = (e) => {\r\n    // selection is 1-based\r\n    let pres = this.copyPresentation();\r\n    if (e === DISPLAY_RETIREMENT + 1) {\r\n      pres.periodOption = DISPLAY_RETIREMENT;\r\n    } else if (e === DISPLAY_LIFEEXP + 1) {\r\n      pres.periodOption = DISPLAY_LIFEEXP;\r\n    } else if (e === DISPLAY_ENDAGE + 1) {\r\n      pres.periodOption = DISPLAY_ENDAGE;\r\n    } else if (e === DISPLAY_LIFEEXP_PLUS_3 + 1) {\r\n      pres.periodOption = DISPLAY_LIFEEXP_PLUS_3;\r\n    }\r\n    const noRecalc = false;\r\n    this.handleUpdatePresentationChange(pres, noRecalc);\r\n  };\r\n\r\n  selectMultiButton = (e) => {\r\n    //let pres = this.state.dataInput.Presentations;\r\n    let pres = this.copyPresentation();\r\n\r\n    if (e === DISPLAY_SPREADSHEET) {\r\n      pres.resultsOption = DISPLAY_SPREADSHEET;\r\n    } else if (e === DISPLAY_GRAPHS) {\r\n      pres.resultsOption = DISPLAY_GRAPHS;\r\n    } else if (e === DISPLAY_ANALYSIS) {\r\n      pres.resultsOption = DISPLAY_ANALYSIS;\r\n      pres.periodOption = DISPLAY_ENDAGE;\r\n      // try this now\r\n      pres.resultsOption = DISPLAY_LIFEEXP_PLUS_3;\r\n      pres.periodOption = DISPLAY_LIFEEXP_PLUS_3;\r\n    } else {\r\n      pres.resultsOption = DISPLAY_PRESENTATION;\r\n      //periodOption = DISPLAY_RETIREMENT;\r\n    }\r\n    // these don't require rescalc or resync\r\n    const noRecalc = true;\r\n    this.handleUpdatePresentationChange(pres, noRecalc);\r\n    //this.setState({ Presentations: pres });\r\n  };\r\n\r\n  selectMultiButtonINAorTax = (e) => {\r\n    if (e === DISPLAY_TAXLIAB) {\r\n      this.INAOption = DISPLAY_TAXLIAB;\r\n      // }else if (e === DISPLAY_TAXLIAB_JLTD) {\r\n      //  this.INAOption = DISPLAY_TAXLIAB_JLTD;\r\n    } else if (e === DISPLAY_INCOME) {\r\n      this.INAOption = DISPLAY_INCOME;\r\n    }\r\n    let l = this.state.loading;\r\n    l = !l;\r\n    this.setState({ loading: l });\r\n  };\r\n\r\n  hideEstateRemoveMsg = () => {\r\n    this.setState({ failedRemove: false });\r\n  };\r\n\r\n  imageRemove = () => {\r\n    this.setState((prevState) => ({\r\n      dataInput: {\r\n        ...prevState.dataInput,\r\n        Presentations: [\r\n          {\r\n            ...prevState.dataInput.Presentations[0],\r\n            adviserLogo: {\r\n              image: null,\r\n              left: 0,\r\n              size: 90,\r\n              allPages: false,\r\n              showDetails: false,\r\n            },\r\n          },\r\n        ],\r\n      },\r\n    }));\r\n  };\r\n\r\n  imageAdjust = (image, ID) => {\r\n    if (ID === IMAGE_LOGO)\r\n      this.setState((prevState) => ({\r\n        dataInput: {\r\n          ...prevState.dataInput,\r\n          Presentations: [\r\n            {\r\n              ...prevState.dataInput.Presentations[0],\r\n              adviserLogo: image,\r\n            },\r\n          ],\r\n        },\r\n      }));\r\n    else\r\n      this.setState((prevState) => ({\r\n        dataInput: {\r\n          ...prevState.dataInput,\r\n          Presentations: [\r\n            {\r\n              ...prevState.dataInput.Presentations[0],\r\n              appletImage: image,\r\n            },\r\n          ],\r\n        },\r\n      }));\r\n  };\r\n\r\n  render() {\r\n    let i = 1;\r\n    let j = 1;\r\n    let k = 1;\r\n    let l = 1;\r\n    let n = 1;\r\n\r\n    const showInput = this.state.showMsg;\r\n\r\n    const dataInput = this.state.dataInput;\r\n    const lang = dataInput.Presentations[0].language;\r\n\r\n    const dataOutput = this.state.dataOutput;\r\n    const insuranceNeeds = this.state.dataOutput.dataInsuranceNeeds;\r\n    const periodOption = dataInput.Presentations[0].periodOption;\r\n\r\n    const projYears = familyProjectionYears(\r\n      dataInput.Clients,\r\n      periodOption,\r\n      dataOutput.lifeExpectancy,\r\n      insuranceNeeds,\r\n      dataOutput.dataShortfall,\r\n      dataInput.Presentations[0]\r\n    );\r\n    const insNeed = projYears.insuranceNeed;\r\n    const insNeedRet = projYears.insuranceNeedToRet;\r\n    const insNeedLE = projYears.insuranceNeedToLE;\r\n    const insNeedLE3 = projYears.insuranceNeedToLE3;\r\n    const insNeedEAge = projYears.insuranceNeedToEnd;\r\n    let projectEnd = projYears.projectionEnd;\r\n    let noProjectYrs = projYears.noProjectionYrs;\r\n    const survAge = projYears.survivorAge;\r\n\r\n    const singleFamily = isSingleFamily(dataInput.Clients);\r\n    const singlePerson = dataInput.Clients.length === 1 ? true : false;\r\n    const showSinglePerson =\r\n      singlePerson && versionDetails().numericValues > 10014;\r\n\r\n    if (singleFamily) {\r\n      // this is protection period now\r\n      dataInput.Presentations[0].periodOption = DISPLAY_RETIREMENT;\r\n    }\r\n\r\n    // single person\r\n    if (dataInput.Clients.length === 1) {\r\n      noProjectYrs = 0;\r\n      dataInput.Needs.forEach((element) => {\r\n        if (noProjectYrs < element.duration) noProjectYrs = element.duration;\r\n      });\r\n      projectEnd = noProjectYrs + dataInput.Clients[0].Age;\r\n    }\r\n\r\n    const numSurvivor = dataInput.Clients.length - 1;\r\n    const insNeedLine = getInsNeedLine(\r\n      dataInput.Presentations[0],\r\n      projectEnd,\r\n      lang,\r\n      numSurvivor,\r\n      singleFamily,\r\n      noProjectYrs,\r\n      insNeed,\r\n      dataInput.Clients[0].Name\r\n    );\r\n\r\n    // if  singleFamily show years instead of ages as no children may be >1\r\n    if (singleFamily) {\r\n      dataOutput.dataNAAges = [];\r\n      for (let i = 0; i < noProjectYrs; i++) dataOutput.dataNAAges.push(i + 1);\r\n    }\r\n    // if file is PYE\r\n    if (dataInput.Clients.length === 1) this.survIdx = 0;\r\n\r\n    const Survivor = this.state.dataInput.Clients[this.survIdx]; //.find(x => x.memberKey === spKey);\r\n\r\n    const inputOutputIsValid =\r\n      insuranceNeeds.length > 0 &&\r\n      dataOutput.dataNAAges !== undefined &&\r\n      Survivor !== undefined;\r\n\r\n    //Survivor !== undefined\r\n\r\n    if (this.state.failedAPI) console.log(\"timer API call failed re ADSF\");\r\n\r\n    let dataAges;\r\n    let dataGov;\r\n    let dataPCV;\r\n    let dataNeed;\r\n    let dataShort;\r\n    let buttonCaption;\r\n    let buttonCaption3;\r\n    let buttonCaptionPeriod;\r\n    let tableWidth;\r\n    let dataEstateLiability;\r\n\r\n    buttonCaption = [\r\n      TITLES[lang].presBut,\r\n      TITLES[lang].graphsBut,\r\n      TITLES[lang].spreadsheetBut,\r\n      TITLES[lang].analysisBut,\r\n    ];\r\n    buttonCaption3 = [\r\n      TITLES[lang].presBut,\r\n      TITLES[lang].graphsBut,\r\n      TITLES[lang].spreadsheetBut,\r\n    ];\r\n    buttonCaptionPeriod = [\r\n      TITLES[lang].retBut,\r\n      TITLES[lang].leBut,\r\n      TITLES[lang].age100But,\r\n    ];\r\n\r\n    if (\r\n      this.survIdx !== undefined &&\r\n      dataInput.Clients[this.survIdx].memberKey !== MEMBER.SPOUSE.Key &&\r\n      dataInput.Clients[this.survIdx].memberKey !== MEMBER.CLIENT.Key\r\n    )\r\n      buttonCaptionPeriod = [TITLES[lang].protectButton];\r\n    if (inputOutputIsValid) {\r\n      // project liabs\r\n      var totalLiabProjections = getProjectedLiabilities(\r\n        dataInput,\r\n        projectEnd,\r\n        dataOutput.probate\r\n      );\r\n\r\n      dataAges = dataOutput.dataNAAges.slice(0, noProjectYrs);\r\n      dataGov = dataOutput.dataCashFlowGov.slice(0, noProjectYrs);\r\n      dataPCV = dataOutput.dataCashFlowPersonal.slice(0, noProjectYrs);\r\n      // if(this.INAOption!==DISPLAY_INCOME)\r\n      dataEstateLiability = getDataFutureEstateLiability(\r\n        //getDataFutureEstateLiability(this.dataTaxLiability.numericValues, totalLiabProjections).slice(0, noProjectYrs);\r\n        dataOutput.dataTaxLiability,\r\n        totalLiabProjections\r\n      );\r\n      dataNeed = dataOutput.dataCashFlowNeeds.slice(0, noProjectYrs);\r\n      dataShort = dataOutput.dataShortfall.slice(0, noProjectYrs);\r\n\r\n      let dataSurvivorSalaryIncome = dataInput.Sources.find(\r\n        (x) => x.sourceTypeKey === INCOMESOURCES.SURVIVORS_INCOME\r\n      );\r\n      if (dataSurvivorSalaryIncome !== undefined) {\r\n        dataSurvivorSalaryIncome.reduce((a, b) => a + b, 0);\r\n      }\r\n      dataSurvivorSalaryIncome = dataOutput.dataShortfall.slice(\r\n        0,\r\n        noProjectYrs\r\n      );\r\n\r\n      if (dataOutput.aggregateGrid != undefined)\r\n        tableWidth =\r\n          Math.min(\r\n            100,\r\n            10 * this.state.dataOutput.aggregateGrid.dataColTitles.length\r\n          ) + \"%\";\r\n\r\n      // MCC quote\r\n      // dataMCC= INAMCCQuote(this.state,insNeed);\r\n    }\r\n\r\n    const altRow = \"#F8F8F8\";\r\n\r\n    const graphs = (\r\n      <OutputGraphs\r\n        insuranceNeed={insNeed}\r\n        projectEnd={projectEnd}\r\n        dataCashFlowPersonal={dataPCV}\r\n        dataInput={dataInput}\r\n        dataNAAges={dataAges}\r\n        dataCashFlowNeeds={dataNeed}\r\n        dataCashFlowGov={dataGov}\r\n        dataShortfall={dataShort}\r\n        insNeedLine={insNeedLine}\r\n        aggregateGrid={dataOutput.aggregateGrid}\r\n        LE={dataOutput.lifeExpectancy.spouse} // + survAge}\r\n        //language={lang}\r\n        //projectTo={this.toRetirement ? 0 : 1}\r\n\r\n        periodOption={periodOption}\r\n        /* projectTo={\r\n        periodOption === DISPLAY_RETIREMENT\r\n          ? DISPLAY_RETIREMENT\r\n          : periodOption === DISPLAY_LIFEEXP\r\n            ? DISPLAY_LIFEEXP\r\n            : DISPLAY_ENDAGE\r\n      } */\r\n      />\r\n    );\r\n    const graphsEP = (\r\n      <OutputGraphsEP\r\n        insuranceNeed={insNeedLE3}\r\n        projectEnd={projectEnd} // try this now // always to the end\r\n        dataEstateLiability={dataEstateLiability}\r\n        dataInput={dataInput}\r\n        dataNAAges={dataAges}\r\n        lifeExp={dataOutput.lifeExpectancy.joint} // client or if spouse JLTD\r\n        lifeExpJLTD={dataOutput.lifeExpectancy.joint}\r\n        lifeExpClient={dataOutput.lifeExpectancy.client}\r\n        probate={dataOutput.probate}\r\n        INAOption={this.INAOption}\r\n        //dataShortfall={dataShort}\r\n        //dataAPISite={appSiteAPI}\r\n        LE={dataOutput.lifeExpectancy.spouse} // + survAge}\r\n        assetProjections={dataOutput.assetProjections}\r\n        //language={lang}\r\n        //projectTo={this.toRetirement ? 0 : 1}\r\n        // periodOption={DISPLAY_LIFEEXP_PLUS_3}\r\n      />\r\n    );\r\n\r\n    const analysis = (\r\n      <div\r\n        style={{\r\n          marginTop: \"-4px\",\r\n          backgroundColor: \"lightgrey\",\r\n          paddingLeft: \"5px\",\r\n        }}\r\n      >\r\n        <AnalysisGraphs\r\n          insuranceNeed={insNeedLE3}\r\n          projectEnd={projectEnd} // try this now // always to the end\r\n          dataEstateLiability={dataEstateLiability}\r\n          dataInput={dataInput}\r\n          dataNAAges={dataAges}\r\n          lifeExp={dataOutput.lifeExpectancy.spouse}\r\n          lifeExpJLTD={dataOutput.lifeExpectancy.joint}\r\n          lifeExpClient={dataOutput.lifeExpectancy.client}\r\n          INAOption={this.INAOption}\r\n          dataShortfall={dataShort}\r\n          dataAPISite={appSiteAPI}\r\n          language={lang}\r\n          //projectTo={this.toRetirement ? 0 : 1}\r\n          periodOption={DISPLAY_LIFEEXP_PLUS_3}\r\n          //projectTo={this.lifeExp + 3} // always to the end\r\n          /* periodOption === DISPLAY_RETIREMENT\r\n          ? 0\r\n          : periodOption === DISPLAY_LIFEEXP\r\n          ? 1\r\n          : 2\r\n      } */\r\n        />\r\n      </div>\r\n    );\r\n\r\n    let infoIcon = getGenericMessage(lang);\r\n    infoIcon.infoText = getInfoIconSourcesGov(lang).infoText;\r\n    const govPopup = this.state.failedRemove && (\r\n      <div style={{ paddingLeft: \"45%\" }}>\r\n        {\" \"}\r\n        <Info infoIcon={infoIcon} respondToPopUp={this.hideEstateRemoveMsg} />\r\n      </div>\r\n    );\r\n\r\n    //const singleFamily = isSingleFamily(dataInput.Clients); //this.survivorExists(dataInput.Clients.length) &&\r\n    //dataInput.Clients[this.survIdx].memberKey !==\r\n    //  MEMBER.SPOUSE.Key;\r\n\r\n    /* let OutputPresentation;\r\n    if (this.state.outputInitilized === true)\r\n    {\r\n        OutputPresentation = React.lazy(() => import('./outputPresentation'));\r\n        console.log(OutputPresentation)\r\n    } */\r\n      \r\n    if (this.state.initialLoading === true) {\r\n      return null;\r\n    } else {\r\n    return (\r\n      <div\r\n        id=\"main\"\r\n        className={\r\n          this.state.initialLoading === true ? \"mainDivBlocked\" : \"mainDiv\"\r\n        }\r\n      >\r\n        <style>{`@media print {display: none;}`}</style>\r\n        <Header\r\n          title={\r\n            this.INAOption === DISPLAY_INCOME\r\n              ? TITLES[lang].appletINA\r\n              : TITLES[lang].appletEP\r\n          }\r\n          saveToFile={this.saveToFile}\r\n          loadFromFile={this.loadFromFile}\r\n          loadStorage={this.loadStorage}\r\n          EmailINA={this.EmailINA}\r\n          changeLang={this.changeLang}\r\n          saveAsDefaultCase={this.saveAsDefaultCase}\r\n          language={lang}\r\n        />\r\n\r\n        {/* <div style={{marginTop:'15px'}} ><MultiButtons\r\n        \r\n          noButtons={2}\r\n          buttonCaption={[\"Income Protection\", \"Estate Protection\"]}\r\n          selectMultiButton={this.selectMultiButtonINAorTax}\r\n        /></div>\r\n         */}\r\n\r\n        <div className=\"topMargin\" />\r\n\r\n        <div style={{ height: \"0px\" }}>\r\n          <PopupUserinputDialog\r\n            openDialog={showInput === true}\r\n            language={lang}\r\n            respondToInput={this.respondToSaveRequest}\r\n          />\r\n        </div>\r\n        <Collapsible\r\n          id={COLLAPSIBLE_PRESENTATION}\r\n          title={TITLES[lang].presentations}\r\n          openParent={this.openParent}\r\n          openCollapsible={this.openCollapsible[COLLAPSIBLE_PRESENTATION]}\r\n          handleCollapsibleClick={this.handleCollapsibleClick}\r\n        >\r\n          {dataInput.Presentations.map((presentation) => (\r\n            <Presentation\r\n              key={presentation.id}\r\n              id={1}\r\n              provinceKey={presentation.provinceKey}\r\n              presentationCurr={presentation}\r\n              language={lang}\r\n              presentationsNo={1}\r\n              //saveAsDefaultCase={this.saveAsDefaultCase}\r\n              handleUpdate={this.handleUpdatePresentation}\r\n            />\r\n          ))}\r\n        </Collapsible>\r\n        <Collapsible\r\n          id={COLLAPSIBLE_CLIENTS}\r\n          title={singlePerson ? TITLES[lang].clients_1 : TITLES[lang].clients}\r\n          openParent={this.openParent}\r\n          openForce={this.openForce}\r\n          handleCollapsibleClick={this.handleCollapsibleClick}\r\n          openCollapsible={this.openCollapsible[COLLAPSIBLE_CLIENTS]}\r\n          infoIcon={APPLET_EP ? getInfoIconPYE_JLTD(lang) : undefined}\r\n        >\r\n          {dataInput.Clients.map((client) => (\r\n            <Client\r\n              key={client.id}\r\n              id={i++}\r\n              clientCurr={client}\r\n              singleFamily={singleFamily}\r\n              isTheSurvivor={\r\n                (this.survIdx !== undefined &&\r\n                  dataInput.Clients[this.survIdx].memberKey ===\r\n                    client.memberKey) ||\r\n                (singleFamily && client.id > 1)\r\n                  ? true\r\n                  : false\r\n              }\r\n              themeColor={i % 2 && isMobileDevice() ? altRow : \"white\"}\r\n              language={lang}\r\n              isQC={dataInput.Presentations[0].provinceKey === \"QC\"}\r\n              clientsNo={dataInput.Clients.length} //clientsNo}\r\n              handleUpdate={this.handleUpdateClient}\r\n              handleAddClient={this.handleAddClient}\r\n              handleRemoveClient={this.handleRemoveClient}\r\n              switchClients={this.switchClients}\r\n              disableAddRemove={this.state.loading}\r\n            />\r\n          ))}\r\n        </Collapsible>\r\n\r\n        <Collapsible\r\n          id={COLLAPSIBLE_ASSETS}\r\n          title={TITLES[lang].assets}\r\n          openParent={this.openParent}\r\n          openCollapsible={this.openCollapsible[COLLAPSIBLE_ASSETS]}\r\n          handleCollapsibleClick={this.handleCollapsibleClick}\r\n        >\r\n          {dataInput.Assets.map((asset) => (\r\n            <Asset\r\n              key={asset.id}\r\n              assetCurr={asset}\r\n              id={j++}\r\n              language={lang}\r\n              themeColor={j % 2 && isMobileDevice() ? altRow : \"white\"}\r\n              assetsNo={dataInput.Assets.length} //.assetsNo}\r\n              clientsNo={dataInput.Clients.length} //.assetsNo}\r\n              handleUpdate={this.handleUpdateAsset}\r\n              handleAddAsset={this.handleAddAsset}\r\n              handleRemoveAsset={this.handleRemoveAsset}\r\n              // handleAddAssetTaxLiability={this.handleAddAssetTaxLiability}\r\n              adjustVisibleOutputSection={this.adjustVisibleOutputSection}\r\n              hasPersonalResidenceAlready={this.hasPersonalResidenceAlready()}\r\n              projection={dataOutput.assetProjections}\r\n              disableAddRemove={this.state.loading}\r\n            />\r\n          ))}\r\n          {/* allow zero rows */}\r\n          {dataInput.Assets.length === 0 ? ( //).assetsNo === 0 ? (\r\n            <AddRemove\r\n              currentID={0}\r\n              minComps={0}\r\n              numberComps={0}\r\n              handleDoAdd={this.handleAddAsset}\r\n              handleDoRemove={this.handleRemoveAsset}\r\n            />\r\n          ) : (\r\n            \"\"\r\n          )}\r\n        </Collapsible>\r\n        <Collapsible\r\n          id={COLLAPSIBLE_LIABS}\r\n          title={TITLES[lang].liabilities}\r\n          openParent={this.openParent}\r\n          openCollapsible={this.openCollapsible[COLLAPSIBLE_LIABS]}\r\n          handleCollapsibleClick={this.handleCollapsibleClick}\r\n        >\r\n          {dataInput.Liabilitys.map((liability) => (\r\n            <Liability\r\n              key={liability.id}\r\n              liabilityCurr={liability}\r\n              probate={dataOutput.probate}\r\n              language={lang}\r\n              liabilitysNo={dataInput.Liabilitys.length} //.liabilitysNo}\r\n              themeColor={k % 2 && isMobileDevice() ? altRow : \"white\"}\r\n              handleUpdate={this.handleUpdateLiability}\r\n              handleAddLiability={this.handleAddLiability}\r\n              handleRemoveLiability={this.handleRemoveLiability}\r\n              // handleAddAssetTaxCredit={this.handleAddAssetTaxCredit}\r\n              disableAddRemove={this.state.loading}\r\n            />\r\n          ))}\r\n          {/* allow zero rows */}\r\n          {dataInput.Liabilitys.length === 0 ? ( //).liabilitysNo === 0 ? (\r\n            <AddRemove\r\n              currentID={0}\r\n              minComps={0}\r\n              numberComps={0}\r\n              handleDoAdd={this.handleAddLiability}\r\n              handleDoRemove={this.handleRemoveLiability}\r\n            />\r\n          ) : (\r\n            \"\"\r\n          )}\r\n        </Collapsible>\r\n\r\n        {this.INAOption === DISPLAY_INCOME && (\r\n          <Collapsible\r\n            id={COLLAPSIBLE_SOURCES}\r\n            title={singlePerson ? TITLES[lang].sources_1 : TITLES[lang].sources}\r\n            openParent={this.openParent}\r\n            openCollapsible={this.openCollapsible[COLLAPSIBLE_SOURCES]}\r\n            handleCollapsibleClick={this.handleCollapsibleClick}\r\n            infoIcon={getInfoIconInflationGrowth(lang)}\r\n          >\r\n            {govPopup}\r\n            {dataInput.Sources.map((source) => {\r\n              let OrphanAges;\r\n              let maxOrphanDur;\r\n              if (\r\n                source.sourceTypeKey === INCOMESOURCES.GOV_ORPHANS_BENEFIT.Key\r\n              ) {\r\n                OrphanAges = dataInput.Clients.filter(function (item) {\r\n                  return source.ownerID === item.id;\r\n                });\r\n\r\n                if (OrphanAges.length > 0)\r\n                  maxOrphanDur =\r\n                    (dataInput.Presentations[0].provinceKey === \"QC\"\r\n                      ? MAX_ORPHAN_DUR_QC\r\n                      : MAX_ORPHAN_DUR_NON_QC) - OrphanAges[0].Age;\r\n              }\r\n              return (\r\n                /* !(source.amount === 0 && source.id < noSources && source.sourceTypeKey === INCOMESOURCES.SURVIVORS_INCOME.Key) && */ <Source // notSurvivorWithZeroIncome and not new sources\r\n                  key={source.id}\r\n                  id={n++}\r\n                  sourceCurr={\r\n                    source.sourceTypeKey ===\r\n                    INCOMESOURCES.GOV_ORPHANS_BENEFIT.Key\r\n                      ? {\r\n                          ...source,\r\n                          maxOrphan: this.orphan,\r\n                          maxOrphanDur: maxOrphanDur,\r\n                        }\r\n                      : source\r\n                  }\r\n                  /* Type={source.Type}\r\n              amount={source.amount}\r\n              startYear={source.startYear}\r\n              duration={source.duration}\r\n              ownerID={source.ownerID} */\r\n                  includeGovOrphanBenefit={this.areThereChildren()}\r\n                  language={lang}\r\n                  sourcesNo={dataInput.Sources.length} //sourcesNo}\r\n                  themeColor={n % 2 && isMobileDevice() ? altRow : \"white\"}\r\n                  handleUpdate={this.handleUpdateSource}\r\n                  handleAddSource={this.handleAddSource}\r\n                  handleRemoveSource={this.handleRemoveSource}\r\n                  disableAddRemove={this.state.loading}\r\n                />\r\n              );\r\n            })}\r\n          </Collapsible>\r\n        )}\r\n        {this.INAOption === DISPLAY_INCOME && (\r\n          <Collapsible\r\n            id={COLLAPSIBLE_NEEDS}\r\n            title={singlePerson ? TITLES[lang].needs_1 : TITLES[lang].needs}\r\n            openParent={this.openParent}\r\n            openCollapsible={this.openCollapsible[COLLAPSIBLE_NEEDS]}\r\n            handleCollapsibleClick={this.handleCollapsibleClick}\r\n            infoIcon={getInfoIconNeedGrowth(lang)}\r\n          >\r\n            {dataInput.Needs.map((need) => (\r\n              <Need\r\n                key={need.id}\r\n                id={l++}\r\n                needCurr={need}\r\n                language={lang}\r\n                needsNo={dataInput.Needs.length} //needsNo}\r\n                afterTaxTotalIncome={this.getAfterTaxTotalIncome(dataInput)}\r\n                themeColor={l % 2 && isMobileDevice() ? altRow : \"white\"}\r\n                handleUpdate={this.handleUpdateNeed}\r\n                handleAddNeed={this.handleAddNeed}\r\n                handleRemoveNeed={this.handleRemoveNeed}\r\n                disableAddRemove={this.state.loading}\r\n              />\r\n            ))}\r\n            {/* allow zero rows */}\r\n            {dataInput.Needs.length === 0 ? ( //).liabilitysNo === 0 ? (\r\n              <AddRemove\r\n                currentID={0}\r\n                minComps={0}\r\n                numberComps={0}\r\n                handleDoAdd={this.handleAddNeed}\r\n                handleDoRemove={this.handleRemoveNeed}\r\n              />\r\n            ) : (\r\n              \"\"\r\n            )}\r\n          </Collapsible>\r\n        )}\r\n        {/*<Collapsible id=\"8\" title={TITLES[lang].settings} openParent={this.openParent}  handleCollapsibleClick\r\n={this. handleCollapsibleClick\r\n}>\r\n\t\t\t\t\t<Setting key={this.state.dataSettings.Settings.id} index={1} Province={this.state.dataSettings.Settings.Province} invRate={this.state.dataSettings.Settings.invRate} inflation={this.state.dataSettings.Settings.inflation} taxRate={this.state.dataSettings.Settings.taxRate} language={lang}  handleUpdate={this.handleUpdateSetting} />\r\n\t\t\t\t\t\r\n\t\t\t\t</Collapsible>*/}\r\n\r\n        {this.state.failedAPI ? (\r\n          <div style={{ paddingLeft: \"40%\" }}>\r\n            <Info\r\n              infoIcon={getInfoNoInternetAccess(lang)}\r\n              respondToPopUp={this.respondToPopUp}\r\n              ref={(Info) => (this.dlgLogin = Info)}\r\n            />\r\n          </div>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n\r\n        {\r\n          /* this.state.loading===false &&  */ <Collapsible\r\n            id={COLLAPSIBLE_RESULTS}\r\n            title={TITLES[lang].results}\r\n            enabled={this.state.loading === false}\r\n            openParent={this.openParent}\r\n            openCollapsible={this.openCollapsible[COLLAPSIBLE_RESULTS]}\r\n            handleCollapsibleClick={this.handleCollapsibleClick}\r\n          >\r\n            <div style={{ width: \"100%\", float: \"left\", clear: \"left\" }}>\r\n              {versionDetails().allowAnalysis === true && !APPLET_INA ? (\r\n                <MultiButtons\r\n                  noButtons={4}\r\n                  buttonCaption={buttonCaption}\r\n                  selected={dataInput.Presentations[0].resultsOption}\r\n                  selectMultiButton={this.selectMultiButton}\r\n                />\r\n              ) : (\r\n                <MultiButtons\r\n                  noButtons={3}\r\n                  buttonCaption={buttonCaption3}\r\n                  selected={dataInput.Presentations[0].resultsOption}\r\n                  selectMultiButton={this.selectMultiButton}\r\n                />\r\n              )}\r\n            </div>\r\n\r\n            <div style={{ width: \"100%\", float: \"left\", clear: \"left\" }}>\r\n              {/* <MultiButtons\r\n              button1={ret}\r\n              button2={le}\r\n              buttonActive={this.toRetirement ? 1 : 2}\r\n              selectButton={this.setInsDuration}\r\n            /> */}\r\n              {this.INAOption === DISPLAY_INCOME &&\r\n                dataInput.Presentations[0].resultsOption !== DISPLAY_ANALYSIS &&\r\n                !singleFamily && (\r\n                  <MultiButtons\r\n                    noButtons={3}\r\n                    buttonCaption={buttonCaptionPeriod}\r\n                    selected={dataInput.Presentations[0].periodOption + 1}\r\n                    selectMultiButton={this.selectMultiButtonPeriod}\r\n                  />\r\n                )}\r\n\r\n              {periodOption !== DISPLAY_RETIREMENT &&\r\n                dataInput.Presentations[0].resultsOption !==\r\n                  DISPLAY_ANALYSIS && (\r\n                  <span style={{ fontSize: \"10px\", fontColor: \"grey\" }}>\r\n                    {/* <Info iconName=\"infoRed.png\" id=\"warning\" msg={msg1} /> */}\r\n                  </span>\r\n                )}\r\n            </div>\r\n            {dataOutput.dataCashFlowPersonal.length === 0 ? (\r\n              \"\"\r\n            ) : dataInput.Presentations[0].resultsOption === DISPLAY_GRAPHS ? (\r\n              APPLET_INA ? (\r\n                graphs\r\n              ) : (\r\n                graphsEP\r\n              )\r\n            ) : dataInput.Presentations[0].resultsOption ===\r\n              DISPLAY_SPREADSHEET ? (\r\n              //<div style={{ width: tableWidth }}>\r\n              <div>\r\n                {/* {APPLET_INA && this.state.dataOutput.aggregateGrid !== null && this.state.dataOutput.aggregateGrid !== undefined ? */}\r\n                {dataOutput.aggregateGrid !== null &&\r\n                  dataOutput.aggregateGrid !== undefined &&\r\n                  /* !showSinglePerson && */ (\r\n                    <AggregateGrid\r\n                      aggregateGrid={dataOutput.aggregateGrid}\r\n                      LE={\r\n                        APPLET_INA\r\n                          ? dataOutput.lifeExpectancy.spouse\r\n                          : dataOutput.lifeExpectancy.joint\r\n                      }\r\n                      lang={lang}\r\n                      insNeedLine={insNeedLine}\r\n                    />\r\n                  )}\r\n\r\n                {/* : APPLET_EP && <ExcelSpreadsheetEP input={this.state} noProjectYrs={noProjectYrs} />} */}\r\n              </div>\r\n            ) : dataInput.Presentations[0].resultsOption ===\r\n              DISPLAY_ANALYSIS ? (\r\n              analysis\r\n            ) : this.INAOption === DISPLAY_INCOME? (\r\n              <Suspense fallback={<div>loading...</div>}>\r\n              <OutputPresentation\r\n                insuranceNeed={insNeed}\r\n                insuranceNeedRet={insNeedRet}\r\n                insuranceNeedLE={insNeedLE}\r\n                insuranceNeedEAge={insNeedEAge}\r\n                projectEnd={projectEnd}\r\n                insNeedLine={insNeedLine}\r\n                LE={dataOutput.lifeExpectancy.spouse + survAge}\r\n                dataInput={dataInput}\r\n                INAOption={this.INAOption}\r\n                dataShortfall={dataShort}\r\n                imageRemove={this.imageRemove}\r\n                imageAdjust={this.imageAdjust}\r\n                encryptedInputLife1AndSpouse={\r\n                  dataOutput.encryptedInputLife1AndSpouse\r\n                }\r\n                encryptedInputLife1={dataOutput.encryptedInputLife1}\r\n                //periodOption={periodOption}\r\n                getSpouseINA={this.getSwitchClientsState}\r\n              /></Suspense>\r\n            ) :  (\r\n              <Suspense fallback={<div>loading...</div>}>\r\n              <OutputPresentationEP\r\n                //insuranceNeed={insNeed}\r\n                insuranceNeedRet={insNeedRet}\r\n                insuranceNeedLE={insNeedLE}\r\n                //insuranceNeedEAge={insNeedEAge}\r\n                //projectEnd={projectEnd}\r\n                LE={dataOutput.lifeExpectancy.joint} //client} //{dataOutput.lifeExpectancy.spouse + survAge}\r\n                dataInput={dataInput}\r\n                assetProjections={dataOutput.assetProjections}\r\n                aggregateGrid={dataOutput.aggregateGrid}\r\n                probate={dataOutput.probate}\r\n                INAOption={this.INAOption}\r\n                //dataEstateLiability={dataEstateLiability} //getDataFutureEstateLiability(this.dataTaxLiability.numericValues, totalLiabProjections)}\r\n                dataShortfall={dataShort}\r\n                imageRemove={this.imageRemove}\r\n                imageAdjust={this.imageAdjust}\r\n                //periodOption={periodOption}\r\n                encryptedInputLife1AndSpouse={\r\n                  dataOutput.encryptedInputLife1AndSpouse\r\n                }\r\n                encryptedInputLife1={dataOutput.encryptedInputLife1}\r\n                /></Suspense>\r\n         \r\n            )}\r\n          </Collapsible>\r\n        }\r\n        \r\n       {/*  {this.state.initialLoading === true && (\r\n          <div style={{ marginTop: \"20px\", marginLeft: \"90px\" }}>\r\n            <Loader type=\"TailSpin\" color=\"black\" height={30} width={30} />\r\n          </div>\r\n        )} */}\r\n\r\n        {this.state.SnapImport ? <PasteClients /> : \"\"}\r\n        <div id=\"copyDiv\" style={{ paddingBottom: \"40px\" }}></div>\r\n\r\n        \r\n        <br />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n}","import React, { Component } from \"react\";\r\n\r\nimport { DropDown } from \"./DropDown\";\r\n//import { InputField4 } from './inputField4';\r\nimport { InputField } from \"./inputField\";\r\nimport { AddRemove } from \"./AddRemove\";\r\nimport { cleanFormat } from \"../utils/helper\";\r\nimport {\r\n  getInfoIconClientsMember,\r\n  getInfoIconClientsElig,\r\n  getInfoIconClientsEligSinglePerson,\r\n  getInfoIconSpouseElig,\r\n  getInfoIconClientsTax,\r\n  getInfoIconClientsRetire,\r\n  getInfoIncome,\r\n} from \"../definitions/infoIconsDefinitions\";\r\nimport { appletMode } from \"../../package.json\";\r\n\r\nimport {\r\n  MESSAGES,\r\n  SEX,\r\n  SMOKING,\r\n  MEMBER,\r\n  CONTROLTITLE,\r\n  TITLES,\r\n  QUOTE_CLIENT,\r\n  QUOTE_SPOUSE,\r\n  APPLET_EP,\r\n  APPLET_INA,\r\n} from \"../definitions/generalDefinitions\";\r\nimport {\r\n  getListItemNameFromKey,\r\n  getDisableValues,\r\n  getListItemKeyFromName,\r\n} from \"../utils/helper\";\r\nimport { createDefaultClient } from \"../data/createDefaults\";\r\nexport class Client extends Component {\r\n  displayName = Client.name;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      name: this.props.clientCurr.Name,\r\n    };\r\n    var sexValues = [\r\n      {\r\n        label: SEX.MALE.value[this.props.language],\r\n        value: 1,\r\n      },\r\n      { label: SEX.FEMALE.value[this.props.language], value: 2 },\r\n    ];\r\n\r\n    var smokingValues = [\r\n      {\r\n        label: SMOKING.NON_SMOKER.value[this.props.language],\r\n        value: 1,\r\n      },\r\n      { label: SMOKING.SMOKER.value[this.props.language], value: 2 },\r\n    ];\r\n\r\n    var memberValues = [\r\n      {\r\n        label: MEMBER.CLIENT.value[this.props.language],\r\n        value: 1,\r\n      },\r\n      { label: MEMBER.SPOUSE.value[this.props.language], value: 2 },\r\n      { label: MEMBER.CHILD.value[this.props.language], value: 3 },\r\n      { label: MEMBER.DEPENDENT_ADULT.value[this.props.language], value: 4 },\r\n    ];\r\n\r\n    if (APPLET_EP) {\r\n      memberValues = [\r\n        {\r\n          label: MEMBER.CLIENT.value[this.props.language],\r\n          value: 1,\r\n        },\r\n        { label: MEMBER.SPOUSE.value[this.props.language], value: 2 },\r\n      ];\r\n    }\r\n\r\n    const bilingual = CONTROLTITLE[this.props.language];\r\n    this.dataValues = {\r\n      DD: [\r\n        {\r\n          id: 1,\r\n          Title: bilingual.sex,\r\n          defValue: getListItemNameFromKey(\r\n            SEX,\r\n            this.props.clientCurr.sexKey,\r\n            this.props.language\r\n          ),\r\n          disableOptionValue: getDisableValues(SEX),\r\n          Values: sexValues,\r\n        },\r\n        {\r\n          id: 2,\r\n          Title: bilingual.smoking,\r\n          defValue: getListItemNameFromKey(\r\n            SMOKING,\r\n            this.props.clientCurr.smokerKey,\r\n            this.props.language\r\n          ),\r\n          disableOptionValue: getDisableValues(SMOKING),\r\n          Values: smokingValues,\r\n        },\r\n        {\r\n          id: 3,\r\n          Title: bilingual.member,\r\n          defValue: getListItemNameFromKey(\r\n            MEMBER,\r\n            this.props.clientCurr.memberKey,\r\n            this.props.language\r\n          ),\r\n          disableOptionValue: getDisableValues(MEMBER),\r\n          Values: memberValues,\r\n        },\r\n      ],\r\n    };\r\n    this.infoRetireRed = false;\r\n  \r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    // console.log(getListItemNameFromKey(SEX,nextProps.clientCurr.sexKey,this.props.language),nextProps.clientCurr.memberKey,this.props.language)\r\n    if (\r\n      nextProps.clientCurr !== this.props.clientCurr ||\r\n      nextProps.id !== this.props.id ||\r\n      // || nextProps.hasSurivor !== this.props.hasSurivor\r\n      nextProps.clientsNo !== this.props.clientsNo\r\n    ) {\r\n      // console.log(nextProps, this.props,this.dataValues)\r\n      this.dataValues.DD[0].defValue = getListItemNameFromKey(\r\n        SEX,\r\n        nextProps.clientCurr.sexKey,\r\n        this.props.language\r\n      );\r\n      this.dataValues.DD[1].defValue = getListItemNameFromKey(\r\n        SMOKING,\r\n        nextProps.clientCurr.smokerKey,\r\n        this.props.language\r\n      );\r\n      this.dataValues.DD[2].defValue = getListItemNameFromKey(\r\n        MEMBER,\r\n        nextProps.clientCurr.memberKey,\r\n        this.props.language\r\n      );\r\n      // console.log(nextProps, this.props,this.dataValues)\r\n\r\n      this.setState({ name: nextProps.clientCurr.Name });\r\n    }\r\n    //  if (nextProps.clientCurr.retirementAge == this.props.clientCurr.retirementAge)\r\n    //  this.infoRetireRed= false;\r\n  }\r\n\r\n  handleDoRemove = (id) => {\r\n    if (this.props.disableAddRemove === false) {\r\n      this.props.handleRemoveClient(id);\r\n    }\r\n  };\r\n\r\n  handleDoAdd = () => {\r\n    if (this.props.disableAddRemove === false) {\r\n      let newCliet;\r\n      if (this.props.clientsNo === 1) newCliet = createDefaultClient(2);\r\n      else {\r\n        newCliet = createDefaultClient(this.props.clientsNo + 1); //add spouse\r\n        newCliet.Age =\r\n          18 - 2 * (this.props.clientsNo > 6 ? 4 : this.props.clientsNo + 1);\r\n        newCliet.sexKey =\r\n          this.props.clientsNo % 2 ? SEX.MALE.Key : SEX.FEMALE.Key;\r\n        newCliet.retirementAge = 25;\r\n      }\r\n      this.props.handleAddClient(newCliet);\r\n    }\r\n  };\r\n\r\n  doSwitch = () => {\r\n    this.props.switchClients();\r\n  };\r\n  handleUpdateInput = (id, value) => {\r\n    let client = this.getCurrClient();\r\n    /*    let client = {\r\n      id: this.props.id,\r\n      Age: this.props.clientCurr.Age,\r\n      sexKey: this.props.clientCurr.sexKey,\r\n      smokerKey: this.props.clientCurr.smokerKey,\r\n      Income: this.props.clientCurr.Income,\r\n      avgTaxRate: this.props.clientCurr.avgTaxRate,\r\n      memberKey: this.props.clientCurr.memberKey,\r\n      retirementAge: this.props.clientCurr.retirementAge,\r\n      Eligibility: this.props.clientCurr.Eligibility,\r\n      Name:this.props.clientCurr.Name\r\n    };\r\n */\r\n    const lang = this.props.language;\r\n    const valueClean = cleanFormat(value, lang);\r\n    const valueCleanInt = parseInt(valueClean);\r\n\r\n    let changed = false;\r\n    //this.infoRetireRed= false;\r\n    if (id === 0) {\r\n      changed = client.Age !== parseInt(value) ? true : false;\r\n      client.Age = parseInt(value);\r\n    } else if (id === 1) {\r\n      changed = client.Income !== valueCleanInt ? true : false;\r\n      client.Income = valueCleanInt;\r\n    } else if (id === 2) {\r\n      changed =\r\n        client.avgTaxRate !==\r\n        parseInt(100 * valueClean) / 100\r\n          ? true\r\n          : false;\r\n      client.avgTaxRate =\r\n        parseInt(100 * valueClean) / 100;\r\n    } else if (id === 3) {\r\n      changed = client.retirementAge !== parseInt(value) ? true : false;\r\n      if (changed) {\r\n        this.infoRetireRed = true;\r\n        setTimeout(() => {\r\n          this.infoRetireRed = false;\r\n        }, 4000);\r\n      }\r\n      client.retirementAge = parseInt(value);\r\n    } else if (id === 4) {\r\n      changed =\r\n        client.Eligibility !==\r\n        parseInt(100 * valueClean) / 100\r\n          ? true\r\n          : false;\r\n      client.Eligibility =\r\n        parseInt(100 * valueClean) / 100;\r\n    }\r\n\r\n    if (changed) {\r\n      this.props.handleUpdate(client);\r\n      this.setState({ loading: this.props.disableAddRemove });\r\n    }\r\n  };\r\n\r\n  updateDDown = (id, selection) => {\r\n    let client = this.getCurrClient();\r\n    /*  {\r\n      id: this.props.id,\r\n      Age: this.props.clientCurr.Age,\r\n      sexKey: this.props.clientCurr.sexKey,\r\n      smokerKey: this.props.clientCurr.smokerKey,\r\n      Income: this.props.clientCurr.Income,\r\n      avgTaxRate: this.props.clientCurr.avgTaxRate,\r\n      memberKey: this.props.clientCurr.memberKey,\r\n      retirementAge: this.props.clientCurr.retirementAge,\r\n      Eligibility: this.props.clientCurr.Eligibility,\r\n      Name:this.props.clientCurr.Name\r\n    }; */\r\n    if (id === 1) client.sexKey = getListItemKeyFromName(SEX, selection);\r\n    else if (id === 2)\r\n      client.smokerKey = getListItemKeyFromName(SMOKING, selection);\r\n    else if (id === 3)\r\n      client.memberKey = getListItemKeyFromName(MEMBER, selection);\r\n    else if (id === 5) client.Name = selection;\r\n\r\n    if (\r\n      client.memberKey === MEMBER.CHILD.Key &&\r\n      this.props.clientCurr.memberKey !== MEMBER.CHILD.Key\r\n    ) {\r\n      client.Income = 0;\r\n      client.avgTaxRate = 0;\r\n      client.Age = 16;\r\n      client.retirementAge = 25;\r\n    } else if (\r\n      client.memberKey === MEMBER.DEPENDENT_ADULT.Key &&\r\n      this.props.clientCurr.memberKey !== MEMBER.DEPENDENT_ADULT.Key\r\n    ) {\r\n      client.Income = 0;\r\n      client.avgTaxRate = 0;\r\n      client.Age = 25;\r\n      client.retirementAge = 65;\r\n    } else if (\r\n      client.memberKey === MEMBER.SPOUSE.Key &&\r\n      this.props.clientCurr.memberKey !== MEMBER.SPOUSE.Key\r\n    ) {\r\n      client.Income = 60000;\r\n      client.avgTaxRate = 25;\r\n      client.Age = 40;\r\n      client.retirementAge = 65;\r\n    }\r\n    this.props.handleUpdate(client);\r\n  };\r\n\r\n  writeBack = (name) => {\r\n    let client = this.getCurrClient();\r\n    client.Name = name;\r\n    this.props.handleUpdate(client);\r\n  };\r\n\r\n  updateName = (evt) => {\r\n    this.setState({ name: evt.target.value }, this.writeBack(evt.target.value));\r\n  };\r\n\r\n  getCurrClient = () => {\r\n    let client = {\r\n      id: this.props.id,\r\n      Age: this.props.clientCurr.Age,\r\n      sexKey: this.props.clientCurr.sexKey,\r\n      smokerKey: this.props.clientCurr.smokerKey,\r\n      Income: this.props.clientCurr.Income,\r\n      avgTaxRate: this.props.clientCurr.avgTaxRate,\r\n      memberKey: this.props.clientCurr.memberKey,\r\n      retirementAge: this.props.clientCurr.retirementAge,\r\n      Eligibility: this.props.clientCurr.Eligibility,\r\n      Name: this.props.clientCurr.Name,\r\n    };\r\n    return client;\r\n  };\r\n\r\n  handleFocus = (event) => {\r\n    event.target.select();\r\n  };\r\n\r\n  render() {\r\n    const nonSpouse =\r\n      this.props.clientCurr.memberKey === MEMBER.CHILD.Key ||\r\n      this.props.clientCurr.memberKey === MEMBER.DEPENDENT_ADULT.Key;\r\n    const nonSpouseIsTheSurvivor = nonSpouse && this.props.isTheSurvivor;\r\n    const nonSpouseHasIncome =\r\n      this.props.clientCurr.Income > 0 &&\r\n      (this.props.clientCurr.memberKey === MEMBER.CHILD.Key ||\r\n        this.props.clientCurr.memberKey === MEMBER.DEPENDENT_ADULT.Key);\r\n    const bilingual = CONTROLTITLE[this.props.language];\r\n    const singlePerson = this.props.clientsNo === 1 ? true : false;\r\n    let clientMember =\r\n      this.props.clientCurr.memberKey === MEMBER.CLIENT.Key &&\r\n      this.props.id === 1;\r\n    let disableMember = clientMember; // || (this.props.clientCurr.memberKey === MEMBER.SPOUSE.Key &&\r\n    //     this.props.id === 2);\r\n    // console.log(CONTROLTITLE[this.props.language].member, this.props.language,this.dataValues.DD[2])\r\n    // disable Client\r\n    this.dataValues.DD[2].disableOptionValue[QUOTE_CLIENT] = true;\r\n    this.dataValues.DD[2].disableOptionValue[\r\n      QUOTE_SPOUSE\r\n    ] = nonSpouseIsTheSurvivor ? this.props.clientCurr.id !== 2 : true;\r\n    let desc =\r\n      this.props.clientCurr.id === 1\r\n        ? TITLES[this.props.language].insured\r\n        : this.props.clientCurr.id === 2\r\n        ? TITLES[this.props.language].benef\r\n        : \"\";\r\n    if (APPLET_EP)\r\n      desc =\r\n        this.props.clientCurr.id === 1\r\n          ? singlePerson\r\n            ? TITLES[this.props.language].insured\r\n            : TITLES[this.props.language].insuredJLTD\r\n          : this.props.clientCurr.id === 2\r\n          ? TITLES[this.props.language].insuredJLTD\r\n          : \"\";\r\n    const greyedName = desc;\r\n    const nameHolder = this.state.name === \"\" ? desc : this.state.name;\r\n\r\n    const textColourStyle =\r\n      this.state.name === \"\" || this.state.name === greyedName\r\n        ? { color: \"#99A4be\" }\r\n        : { color: \"black\" };\r\n    if (this.state.loading === true && this.props.disableAddRemove === true) {\r\n      return \"\";\r\n    } else {\r\n      return (\r\n        <div className=\"inputRow\">\r\n          <div className=\"dropDown inputDiv\">\r\n            <div className=\"controlTitle\">\r\n              {CONTROLTITLE[this.props.language].name}\r\n            </div>\r\n            <input\r\n              key={5}\r\n              id={5}\r\n              className=\"inputField  textareaAssetName\"\r\n              /*                 style={textColourStyle} */\r\n              placeholder={greyedName}\r\n              value={this.state.name}\r\n              onClick={(e) => this.handleFocus(e)}\r\n              onFocus={(e) => this.handleFocus(e)}\r\n              type=\"text\"\r\n              onBlur={(evt) => this.updateName(evt)}\r\n              onChange={(evt) => this.setState({ name: evt.target.value })}\r\n\r\n              //onBlur={(evt) => this.updateName(evt)}\r\n            />\r\n\r\n            {/* \r\n              <input\r\n                id={12}\r\n                type=\"text\"\r\n                className=\"inputField  textareaAssetName\"\r\n                onChange={this.updateDesc}\r\n                value={assetCurr.description}\r\n              /> */}\r\n          </div>\r\n          <InputField\r\n            id={0}\r\n            inputName={bilingual.age}\r\n            format={1}\r\n            Count={this.props.clientsNo}\r\n            language={this.props.language}\r\n            inputValue={this.props.clientCurr.Age}\r\n            handleUpdateInput={this.handleUpdateInput}\r\n          />\r\n          {this.dataValues.DD.map((dd) => {\r\n            return (nonSpouse && dd.Title === bilingual.smoking) ||\r\n              dd.Title === bilingual.age ? (\r\n              \"\"\r\n            ) : (\r\n              <DropDown\r\n                key={dd.id}\r\n                id={dd.id}\r\n                Count={this.props.clientsNo}\r\n                Title={dd.Title}\r\n                defValue={dd.defValue}\r\n                disable={dd.Title === bilingual.member ? disableMember : false}\r\n                infoIcon={\r\n                  dd.Title === bilingual.member &&\r\n                  dd.defValue ===\r\n                    getListItemNameFromKey(\r\n                      MEMBER,\r\n                      MEMBER.CLIENT.Key,\r\n                      this.props.language\r\n                    )\r\n                    ? getInfoIconClientsMember(this.props.language)\r\n                    : undefined\r\n                }\r\n                // hasSurivor={this.props.hasSurivor}\r\n                Values={dd.Values}\r\n                language={this.props.language}\r\n                disableOption={dd.disableOptionValue}\r\n                updateDDown={this.updateDDown}\r\n              />\r\n            );\r\n          })}\r\n\r\n          {\r\n            /* nonSpouse && !nonSpouseHasIncome   && !nonSpouseIsTheSurvivor ? (\r\n          \"\"\r\n        ) :  */ <InputField\r\n              id={1}\r\n              inputName={bilingual.income}\r\n              format={2}\r\n              Count={this.props.clientsNo}\r\n              infoIcon={\r\n                this.props.id === 1\r\n                  ? getInfoIncome(this.props.language)\r\n                  : undefined\r\n              }\r\n              language={this.props.language}\r\n              inputValue={this.props.clientCurr.Income}\r\n              handleUpdateInput={this.handleUpdateInput}\r\n            />\r\n          }\r\n          {\r\n            /* nonSpouse && !nonSpouseHasIncome  && !nonSpouseIsTheSurvivor ? (\r\n          \"\"\r\n        ) : */ <InputField\r\n              id={2}\r\n              inputName={bilingual.avgTax}\r\n              format={3}\r\n              Count={this.props.clientsNo}\r\n              //info={MESSAGES[this.props.language].infoAvgTax}\r\n              infoIcon={\r\n                this.props.id === 1 && !singlePerson\r\n                  ? getInfoIconClientsTax(this.props.language)\r\n                  : undefined\r\n              }\r\n              showInfo={!disableMember} //infoOnlyForRowID={2}\r\n              language={this.props.language}\r\n              inputValue={\r\n                Math.round(10000 * this.props.clientCurr.avgTaxRate) / 10000\r\n              }\r\n              handleUpdateInput={this.handleUpdateInput}\r\n            />\r\n          }\r\n          {singlePerson || (nonSpouse && !nonSpouseIsTheSurvivor) ? (\r\n            \"\"\r\n          ) : (\r\n            <InputField\r\n              id={3}\r\n              inputName={\r\n                nonSpouseIsTheSurvivor || singlePerson\r\n                  ? bilingual.protectToAge\r\n                  : bilingual.retAge\r\n              }\r\n              format={1}\r\n              Count={this.props.clientsNo}\r\n              language={this.props.language}\r\n              inputValue={this.props.clientCurr.retirementAge}\r\n              infoIcon={\r\n                this.props.id !== 1\r\n                  ? getInfoIconClientsRetire(\r\n                      this.props.language,\r\n                      this.infoRetireRed\r\n                    )\r\n                  : undefined\r\n              }\r\n              titleColour= {nonSpouseIsTheSurvivor || singlePerson?\"red\":\"\"}\r\n              handleUpdateInput={this.handleUpdateInput}\r\n            />\r\n          )}\r\n          {nonSpouse ? (\r\n            \"\"\r\n          ) : (\r\n            <InputField\r\n              id={4}\r\n              inputName={this.props.isQC?bilingual.qppElig:bilingual.cppElig}\r\n              format={3}\r\n              Count={this.props.clientsNo}\r\n              //info={MESSAGES[this.props.language].infoElig}\r\n              infoIcon={\r\n                this.props.id === 1\r\n                  ? (singlePerson?getInfoIconClientsEligSinglePerson(this.props.language):getInfoIconClientsElig(this.props.language))\r\n                  : getInfoIconSpouseElig(this.props.language)\r\n              }\r\n              showInfo={disableMember}\r\n              language={this.props.language}\r\n              inputValue={\r\n                Math.round(10000 * this.props.clientCurr.Eligibility) / 10000\r\n              }\r\n              handleUpdateInput={this.handleUpdateInput}\r\n            />\r\n          )}\r\n          {/* {isVersion2019() === false && disableMember ? ( */}\r\n          {clientMember === true &&\r\n            this.props.clientsNo > 1 &&\r\n            !this.props.singleFamily &&\r\n            APPLET_INA && (\r\n              <button\r\n                className=\"switchClient\"\r\n                style={{\r\n                  width: this.props.language === \"en\" ? \"115px\" : \"125px\",\r\n                }}\r\n                onClick={this.doSwitch}\r\n              >\r\n                {/* <font size=\"-4\">&#8645;</font> */}\r\n                {bilingual.switch}\r\n                {/* Switch Client */}\r\n              </button>\r\n            )}\r\n          <AddRemove\r\n            currentID={this.props.id}\r\n            numberComps={this.props.clientsNo}\r\n            fixedFirstRow={true}\r\n            minComps={1} //{appletMode===\"INA\"?2:1}\r\n            disabled={this.props.disableAddRemove}\r\n            maxRows={APPLET_INA ? 100 : 2}\r\n            handleDoAdd={this.handleDoAdd}\r\n            handleDoRemove={this.handleDoRemove}\r\n           />\r\n          {/* {isMobileDevice() && this.props.id < this.props.clientsNo ? (\r\n          <hr className=\"ppi2\" />\r\n        ) : (\r\n          \"\"\r\n        )} */}\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { DropDown } from \"./DropDown\";\r\nimport { InputField } from \"./inputField\";\r\nimport { Info } from \"./Info\";\r\n\r\nimport {\r\n  getInfoIconProbate,\r\n  getInfoIconLiabDesc,\r\n} from \"../definitions/infoIconsDefinitions\";\r\n\r\nimport { AddRemove } from \"./AddRemove\";\r\nimport {\r\n  getListToShowByOrder,\r\n  getProjectedLiability,\r\n  cleanFormat,\r\n  getListItemNameFromKey,\r\n  getListItemKeyFromName,\r\n  arrayFormatMoney,\r\n} from \"../utils/helper\";\r\n\r\nimport {\r\n  LIABILITIES,\r\n  ASSETS,\r\n  OWNERSHIP,\r\n  CONTROLTITLE,\r\n  GROWTHDIR,\r\n  UNLISTED,\r\n  ASSET_TaxCredit,\r\n  APPLET_INA,\r\n  APPLET_EP,\r\n  ASSET_YEAR_TODAY,\r\n  CONTROLTITLELIABS  \r\n} from \"../definitions/generalDefinitions\";\r\nimport { isMobileDevice } from \"../utils/helper\";\r\nimport DataTable from \"./GridExcelComponent/DataTable\";\r\nimport { fetchAssetProjection } from \"../utils/FetchAPIs\";\r\nimport {\r\n  LIABILITY_API_OUTPUT_Year,\r\n  LIABILITY_API_OUTPUT_Age,\r\n  LIABILITY_API_OUTPUT_ProjectedValue,\r\n  LIABILITY_API_OUTPUT_TaxCredit,\r\n  DROPDOWN_WIDE,\r\n} from \"../definitions/generalDefinitions\";\r\n\r\nexport class Liability extends Component {\r\n  displayName = Liability.name;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      description: \"\",\r\n      displaySreadsheet: false,\r\n      loading: false,\r\n      dataProjection:[]\r\n    };\r\n    var i;\r\n    var typeValues = [];\r\n    this.desc = this.props.liabilityCurr.description;\r\n    const listLiabsToShow = getListToShowByOrder(LIABILITIES);\r\n    for (i = 0; i < listLiabsToShow.length; ++i) {\r\n      typeValues.push({\r\n        label: listLiabsToShow[i].value[this.props.language],\r\n        value: i + 1,\r\n      });\r\n    }\r\n    var ownerValues = [\r\n      { label: OWNERSHIP.CLIENT.value[this.props.language], value: 1 },\r\n      { label: OWNERSHIP.SPOUSE.value[this.props.language], value: 2 },\r\n      { label: OWNERSHIP.JOINT.value[this.props.language], value: 3 },\r\n    ];\r\n\r\n    var growthDirValues = [\r\n      //{ label: GROWTHDIR[this.props.language].Values[0], value: 1 },\r\n      //{ label: GROWTHDIR[this.props.language].Values[1], value: 2 },\r\n      { label: GROWTHDIR.GROWS.value[this.props.language], value: 1 },\r\n      { label: GROWTHDIR.REDUCES.value[this.props.language], value: 2 },\r\n    ];\r\n\r\n    this.dataValues = {\r\n      DD: [\r\n        {\r\n          id: 1,\r\n          Title: CONTROLTITLE[this.props.language].type,\r\n          defValue: getListItemNameFromKey(\r\n            LIABILITIES,\r\n            this.props.liabilityCurr.liabTypeKey,\r\n            this.props.language\r\n          ),\r\n          Values: typeValues,\r\n        },\r\n        {\r\n          id: 2,\r\n          Title: CONTROLTITLE[this.props.language].owner,\r\n          defValue: getListItemNameFromKey(\r\n            OWNERSHIP,\r\n            this.props.liabilityCurr.ownerKey,\r\n            this.props.language\r\n          ),\r\n          Values: ownerValues,\r\n        },\r\n        {\r\n          id: 3,\r\n          Title: CONTROLTITLE[this.props.language].growthDir,\r\n          defValue: //this.props.liabilityCurr.growthDir,\r\n          getListItemNameFromKey(\r\n            GROWTHDIR,\r\n            this.props.liabilityCurr.growthDirKey,\r\n            this.props.language\r\n          ),\r\n          Values: growthDirValues,\r\n        },\r\n      ],\r\n    };\r\n    //this.dataProjection = [];\r\n    this.dataColTitles = [];\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (\r\n      nextProps.liabilityCurr !== this.props.liabilityCurr ||\r\n      nextProps.id !== this.props.id ||\r\n      nextProps.liabilitysNo !== this.props.liabilitysNo\r\n    ) {\r\n      // console.log(nextProps.liabilityCurr.liabTypeKey)\r\n      this.dataValues.DD[0].defValue = getListItemNameFromKey(\r\n        LIABILITIES,\r\n        nextProps.liabilityCurr.liabTypeKey,\r\n        this.props.language\r\n      );\r\n      this.dataValues.DD[1].defValue = getListItemNameFromKey(\r\n        OWNERSHIP,\r\n        nextProps.liabilityCurr.ownerKey,\r\n        this.props.language\r\n      );\r\n      this.dataValues.DD[2].defValue = // nextProps.liabilityCurr.growthDir;\r\n      getListItemNameFromKey(\r\n        GROWTHDIR,\r\n        nextProps.liabilityCurr.growthDirKey,\r\n        this.props.language\r\n      );\r\n      \r\n      this.setState({ description: nextProps.liabilityCurr.description });\r\n\r\n    }\r\n    if (nextProps.probate !== this.props.probate)\r\n    {\r\n      this.setLiabData(nextProps.liabilityCurr,nextProps.probate)\r\n    }\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    this.setState({ description: this.props.liabilityCurr.description });\r\n  };\r\n\r\n  handleDoRemove = (id) => {\r\n    this.props.handleRemoveLiability(id);\r\n  };\r\n\r\n  handleDoAdd = () => {\r\n    var liabNo =\r\n      this.props.liabilitysNo > this.dataValues.DD[0].Values.length - 1\r\n        ? this.dataValues.DD[0].Values.length - 1\r\n        : this.props.liabilitysNo;\r\n\r\n    var liabNext = this.dataValues.DD[0].Values[liabNo].label;\r\n    const liabTypeKey = getListItemKeyFromName(LIABILITIES, liabNext);\r\n\r\n    let liability = {\r\n      id: this.props.liabilitysNo + 1,\r\n      //Type: liabNext,\r\n      liabTypeKey: liabTypeKey,\r\n      description : \"\",\r\n      ownerKey: OWNERSHIP.CLIENT.Key,\r\n      currValue: 0,\r\n      //growthDir: GROWTHDIR[this.props.language].Values[0],\r\n      growthDirKey: GROWTHDIR.GROWS.Key,\r\n      growth: 0,\r\n      repay: 0,\r\n      exposureDur: 99,\r\n      assetTaxLiabID: 0,\r\n      assetTaxLiabProj: [],\r\n    };\r\n\r\n    liability = this.setLiabilityValuesToDefault(liability);\r\n\r\n    this.props.handleAddLiability(liability); //liabNext);\r\n  };\r\n\r\n  updateDDown = (id, selection) => {\r\n    let liability = {\r\n      id: this.props.liabilityCurr.id,\r\n      //Type: this.props.liabilityCurr.Type,\r\n      liabTypeKey: this.props.liabilityCurr.liabTypeKey,\r\n      ownerKey: this.props.liabilityCurr.ownerKey,\r\n      currValue: this.props.liabilityCurr.currValue,\r\n      growth: this.props.liabilityCurr.growth,\r\n      //growthDir: this.props.liabilityCurr.growthDir,\r\n      growthDirKey: this.props.liabilityCurr.growthDirKey,\r\n      exposureDur: this.props.liabilityCurr.exposureDur,\r\n      repay: this.props.liabilityCurr.repay,\r\n    };\r\n    if (id === 1) {\r\n      //liability.Type = selection;\r\n      liability.liabTypeKey = getListItemKeyFromName(LIABILITIES, selection);\r\n    } else if (id === 2) {\r\n      liability.ownerKey = getListItemKeyFromName(OWNERSHIP, selection);\r\n    } else if (id === 3) {\r\n      //liability.growthDir = selection;\r\n      liability.growthDirKey = getListItemKeyFromName(GROWTHDIR, selection);;\r\n    }\r\n\r\n    liability = this.setLiabilityValuesToDefault(liability);\r\n\r\n    this.props.handleUpdate(liability);\r\n    if(this.state.displaySreadsheet) this.setLiabData(liability);// this.handleClick()\r\n  };\r\n\r\n  updateDesc = (evt) => {\r\n    //console.log(evt.target.value);\r\n    let liab =  JSON.parse(JSON.stringify(this.props.liabilityCurr)); \r\n    liab.description = evt.target.value;\r\n    this.props.handleUpdate(liab);\r\n  };\r\n\r\n  handleUpdateInput = (id, value) => {\r\n    let liability = {\r\n      id: this.props.liabilityCurr.id,\r\n      //Type: this.props.liabilityCurr.Type,\r\n      liabTypeKey: this.props.liabilityCurr.liabTypeKey,\r\n      ownerKey: this.props.liabilityCurr.ownerKey,\r\n      currValue: this.props.liabilityCurr.currValue,\r\n      growth: this.props.liabilityCurr.growth,\r\n      exposureDur: this.props.liabilityCurr.exposureDur,\r\n      repay: this.props.liabilityCurr.repay,\r\n      //growthDir: this.props.liabilityCurr.growthDir,\r\n      growthDirKey: this.props.liabilityCurr.growthDirKey,\r\n    };\r\n\r\n    let changed = false;\r\n    const lang = this.props.language;\r\n    const valueClean = cleanFormat(value,lang);\r\n    const valueCleanInt = parseInt(valueClean);\r\n   \r\n    if (id === 1) {\r\n      changed =\r\n        liability.currValue !== valueCleanInt ? true : false;\r\n      liability.currValue = valueCleanInt;\r\n    } else if (id === 2) {\r\n      changed =\r\n        liability.growth !==\r\n        parseInt(100 * valueClean) / 100\r\n          ? true\r\n          : false;\r\n      liability.growth =\r\n        parseInt(100 * valueClean) / 100;\r\n    } else if (id === 3) {\r\n      changed = liability.exposureDur !== parseInt(value) ? true : false;\r\n      liability.exposureDur = parseInt(value);\r\n    } else if (id === 5) {\r\n      changed = liability.description !== value ? true : false;\r\n      liability.description = value;\r\n    }\r\n    if (id === 4) {\r\n      changed = liability.repay !== valueCleanInt ? true : false;\r\n      liability.repay = valueCleanInt;\r\n    }\r\n\r\n    if (changed){\r\n      \r\n      this.props.handleUpdate(liability);\r\n      if(this.state.displaySreadsheet) this.setLiabData(liability);//  this.handleClick()\r\n      \r\n  }\r\n   // if(!this.state.displaySreadsheet)  this.setState({ loading: this.props.disableAddRemove });\r\n    \r\n  };\r\n\r\n\r\n  setLiabData=(liability,probate)=>{\r\n    this.setState({ loading: true});\r\n    let dataProjection=[]\r\n  const lang=this.props.language  \r\n  const loan =\r\n  liability.liabTypeKey ===\r\n      LIABILITIES.OUTSTANDING_LOANS.Key ||\r\n      liability.liabTypeKey ===\r\n      LIABILITIES.MORTGAGE_REDEMPTION.Key;\r\n\r\n  if (loan)\r\n    this.dataColTitles = [\r\n      CONTROLTITLELIABS[lang].year,\r\n      CONTROLTITLELIABS[lang].repay,\r\n      CONTROLTITLELIABS[lang].projValue,\r\n      //   \"Tax Credit\"\r\n    ];\r\n  else\r\n    this.dataColTitles = [\r\n      CONTROLTITLELIABS[lang].year,\r\n      CONTROLTITLELIABS[lang].projValue,\r\n      //   \"Tax Credit\"\r\n    ];\r\n\r\n  //console.log(this.props.probate)\r\n  let liabs = getProjectedLiability(liability,probate);\r\n\r\n  let years = [];\r\n  let repays = [];\r\n  let i;\r\n  let repay;\r\n  let year;\r\n  for (i = 0; i < liability.exposureDur + 1; ++i) {\r\n    repay=i>0?liability.repay:0;\r\n    year=i>0?i: ASSET_YEAR_TODAY[lang].today;;\r\n    years.push(year);\r\n    repays.push(repay);\r\n  }\r\n\r\n  let taxCredits = [];\r\n  dataProjection[0] = years;\r\n  if (loan) {\r\n    dataProjection[1] = arrayFormatMoney(repays, lang, 0);\r\n    dataProjection[2] = arrayFormatMoney(liabs, lang, 0);\r\n  } else dataProjection[1] = arrayFormatMoney(liabs, lang, 0);\r\n\r\n  this.setState({dataProjection:dataProjection, loading: false});\r\n    \r\n}\r\n\r\n\r\n  handleClick = () => {\r\n    if(!this.props.disableAddRemove)\r\n    {\r\n    this.setState({ loading: true });\r\n    \r\n    this.setLiabData(this.props.liabilityCurr, this.props.probate)\r\n    /* const loan =\r\n      this.props.liabilityCurr.liabTypeKey ===\r\n        LIABILITIES.OUTSTANDING_LOANS.Key ||\r\n      this.props.liabilityCurr.liabTypeKey ===\r\n        LIABILITIES.MORTGAGE_REDEMPTION.Key;\r\n\r\n    if (loan)\r\n      this.dataColTitles = [\r\n        \"Year\",\r\n        \"Repayment\",\r\n        \"Projected Value\",\r\n        //   \"Tax Credit\"\r\n      ];\r\n    else\r\n      this.dataColTitles = [\r\n        \"Year\",\r\n        \"Projected Value\",\r\n        //   \"Tax Credit\"\r\n      ];\r\n\r\n    const lang = this.props.language;\r\n    let liabs = getProjectedLiability(this.props.liabilityCurr, lang);\r\n\r\n    let years = [];\r\n    let repays = [];\r\n    let i;\r\n    let repay;\r\n    let year;\r\n    for (i = 0; i < this.props.liabilityCurr.exposureDur + 1; ++i) {\r\n      repay=i>0?this.props.liabilityCurr.repay:0;\r\n      year=i>0?i:\"today\";\r\n      years.push(year);\r\n      repays.push(repay);\r\n    }\r\n\r\n    let taxCredits = [];\r\n    this.dataProjection[0] = years;\r\n    if (loan) {\r\n      this.dataProjection[1] = arrayFormatMoney(repays, lang, 0);\r\n      this.dataProjection[2] = arrayFormatMoney(liabs, lang, 0);\r\n    } else this.dataProjection[1] = arrayFormatMoney(liabs, lang, 0);\r\n */\r\n    //this.dataProjection[3] = taxCredits;\r\n\r\n    // console.log(this.dataProjection);\r\n\r\n    this.setState((prevState) => {\r\n      let display = prevState.displaySreadsheet;\r\n      return { displaySreadsheet: !display, loading: this.props.disableAddRemove };\r\n      \r\n    });\r\n  }\r\n  };\r\n  //});\r\n  //}\r\n\r\n  \r\n  setLiabilityValuesToDefault = (liability) => {\r\n    if (liability.liabTypeKey === LIABILITIES.OUTSTANDING_LOANS.Key) {\r\n      liability.exposureDur = 10;\r\n    } else if (liability.liabTypeKey === LIABILITIES.MORTGAGE_REDEMPTION.Key) {\r\n      liability.exposureDur = 25;\r\n    }\r\n\r\n    return liability;\r\n  };\r\n\r\n  render() {\r\n\r\n    //const growthSel = GROWTHDIR[this.props.language].Values.indexOf(\r\n    //  this.props.liabilityCurr.growthDir );\r\n      const growthSel = this.props.liabilityCurr.growthDirKey===GROWTHDIR.GROWS.Key?GROWTHDIR.GROWS.ID:GROWTHDIR.REDUCES.ID; \r\n   \r\n\r\n    const loanOrTax =\r\n      this.props.liabilityCurr.liabTypeKey ===\r\n        LIABILITIES.OUTSTANDING_LOANS.Key ||\r\n      this.props.liabilityCurr.liabTypeKey ===\r\n        LIABILITIES.MORTGAGE_REDEMPTION.Key ||\r\n      this.props.liabilityCurr.liabTypeKey ===\r\n        LIABILITIES.CLIENT_TAX_LIABILITY.Key;\r\n\r\n    const probate=     this.props.liabilityCurr.liabTypeKey ===   LIABILITIES.PROBATE.Key\r\n    \r\n    const showGrowth =\r\n    !APPLET_INA &&\r\n      !loanOrTax && !probate && \r\n      this.dataValues.DD.map((dd) => dd.id === 3);\r\n    const showRepay =\r\n    !APPLET_INA &&\r\n      (this.props.liabilityCurr.liabTypeKey ===\r\n        LIABILITIES.MORTGAGE_REDEMPTION.Key ||\r\n        this.props.liabilityCurr.liabTypeKey ===\r\n          LIABILITIES.OUTSTANDING_LOANS.Key);\r\n\r\n    const showExposure =\r\n    !APPLET_INA && !probate && \r\n      !(\r\n        this.props.liabilityCurr.liabTypeKey ===\r\n        LIABILITIES.CLIENT_TAX_LIABILITY.Key\r\n      );\r\n\r\n    // console.log(this.props.liabilityCurr.id,this.props.liabilityCurr.liabTypeKey,this.props.liabilitysNo)\r\n\r\n\r\n    if (this.state.loading === true && this.props.disableAddRemove=== true) {\r\n      return (\r\n       \"\"\r\n      );\r\n    } else {\r\n    return (\r\n      <div className=\"inputRow\">\r\n        {this.dataValues.DD.map(\r\n          (\r\n            dd // don't show ownership dosen't matter \r\n          ) =>\r\n            dd.id < 3 &&\r\n             !(dd.id === 2) &&  ( \r\n              <DropDown\r\n                key={dd.id}\r\n                id={dd.id}\r\n                Count={this.props.liabilitysNo}\r\n                Title={dd.Title}\r\n                infoIcon={\r\n                  dd.Title === CONTROLTITLE[this.props.language].type && this.props.liabilityCurr.liabTypeKey===LIABILITIES.PROBATE.Key\r\n                    ? getInfoIconProbate(this.props.language)\r\n                    : undefined\r\n                }\r\n                width={DROPDOWN_WIDE}\r\n                defValue={dd.defValue}\r\n                Values={dd.Values}\r\n                updateDDown={this.updateDDown}\r\n              />\r\n            )\r\n        )}\r\n         <div className=\"dropDown inputDiv\">\r\n                <div className=\"controlTitle\">\r\n                  {CONTROLTITLE[this.props.language].desc}\r\n                  {this.props.language===\"en\"?<Info infoIcon={getInfoIconLiabDesc(this.props.language)} />:undefined}{\" \"}\r\n    \r\n                </div>\r\n                <input\r\n                  key={\"desc\"}\r\n                  id={5}\r\n                  \r\n                  className=\"inputField  textareaAssetName\"\r\n                  value={this.state.description}\r\n                  onClick={this.select}\r\n                  type=\"text\"\r\n                  onChange={(evt) =>\r\n                    this.setState({ description: evt.target.value })\r\n                  }\r\n                  onBlur={(evt) => this.updateDesc(evt)}\r\n                />\r\n                \r\n              </div>\r\n\r\n        <InputField\r\n          inputName={CONTROLTITLE[this.props.language].amount}\r\n          id={1}\r\n          format={2}\r\n          Count={this.props.liabilitysNo}\r\n          language={this.props.language}\r\n          readOnly={probate}\r\n          inputValue={this.props.liabilityCurr.currValue}\r\n          handleUpdateInput={this.handleUpdateInput}\r\n        />\r\n\r\n        {showRepay && (\r\n          <InputField\r\n            inputName={CONTROLTITLE[this.props.language].repay}\r\n            id={4}\r\n            format={2}\r\n            Count={this.props.liabilitysNo}\r\n            language={this.props.language}\r\n            inputValue={this.props.liabilityCurr.repay}\r\n            handleUpdateInput={this.handleUpdateInput}\r\n          />\r\n        )}\r\n\r\n        {!APPLET_INA  &&\r\n          !loanOrTax && !probate && \r\n          this.dataValues.DD.map(\r\n            (dd) =>\r\n              dd.id === 3 && (\r\n                <DropDown\r\n                  key={dd.id}\r\n                  id={dd.id}\r\n                  Count={this.props.liabilitysNo}\r\n                  Title={dd.Title}\r\n                  defValue={dd.defValue}\r\n                  Values={dd.Values}\r\n                  updateDDown={this.updateDDown}\r\n                />\r\n              )\r\n          )}\r\n        {!APPLET_INA  && !loanOrTax && !probate &&  (\r\n          <InputField\r\n            inputName={\r\n              growthSel === 0\r\n                ? CONTROLTITLE[this.props.language].growth\r\n                : CONTROLTITLE[this.props.language].changeRate\r\n            }\r\n            id={2}\r\n            format={3}\r\n            Count={this.props.liabilitysNo}\r\n            language={this.props.language}\r\n            inputValue={Math.round(10000*this.props.liabilityCurr.growth)/10000}\r\n            handleUpdateInput={this.handleUpdateInput}\r\n          />\r\n        )}\r\n\r\n        {showExposure && (\r\n          <InputField\r\n            inputName={CONTROLTITLE[this.props.language].exposureDur}\r\n            id={3}\r\n            format={1}\r\n            Count={this.props.liabilitysNo}\r\n            language={this.props.language}\r\n            inputValue={this.props.liabilityCurr.exposureDur}\r\n            handleUpdateInput={this.handleUpdateInput}\r\n          />\r\n        )}\r\n\r\n        {!APPLET_INA  && (\r\n          <img\r\n            className=\"iconMore\"\r\n            onClick={this.handleClick}\r\n            id=\"gridOn\"\r\n            alt=\"ll\"\r\n            src={\r\n              this.state.displaySreadsheet === true\r\n                ? require(\"../images/gridOff.png\")\r\n                : require(\"../images/gridOn.png\")\r\n            }\r\n          />\r\n        )}\r\n\r\n        <AddRemove\r\n          currentID={this.props.liabilityCurr.id}\r\n          minComps={0}\r\n          id={this.props.liabilityCurr.liabTypeKey}\r\n          numberComps={this.props.liabilitysNo}\r\n          handleDoAdd={this.handleDoAdd}\r\n          handleDoRemove={this.handleDoRemove}\r\n          disabled={this.props.disableAddRemove}\r\n        />\r\n        {/*isMobileDevice() &&\r\n        this.props.liabilityCurr.id < this.props.liabilitysNo ? (\r\n          <hr className=\"ppi2\" />\r\n        ) : (\r\n          \"\"\r\n        )*/}\r\n        {this.state.displaySreadsheet === true && (\r\n          <div style={{ clear: \"both\", float: \"left\", width: \"60%\" }}>\r\n            <DataTable\r\n              dataColTitles={this.dataColTitles}\r\n              dataProjection={this.state.dataProjection}\r\n              gridTitle={\r\n                getListItemNameFromKey(\r\n                  LIABILITIES,\r\n                  this.props.liabilityCurr.liabTypeKey,\r\n                  this.props.language\r\n                ) + \" Projection\"\r\n              }\r\n              language={this.props.language}\r\n            />\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { DropDown } from \"./DropDown\";\r\nimport { AddRemove } from \"./AddRemove\";\r\nimport { cleanFormat, getListToShowByOrder, getDisableValues } from \"../utils/helper\";\r\n\r\nimport { copyFromAnotherObject }  from \"../data/createDefaults\";\r\nimport {\r\n  CONTROLTITLE,\r\n  INCOMESOURCES,\r\n  DEFAULT_DIVIDEND_TAX_RATE,\r\n} from \"../definitions/generalDefinitions\";\r\n//import { InputField4 } from './inputField4';\r\nimport { InputField } from \"./inputField\";\r\nimport {\r\n  isMobileDevice,\r\n  getListItemNameFromKey,\r\n  getListItemKeyFromName,\r\n} from \"../utils/helper\";\r\nimport { DROPDOWN_WIDE } from \"../definitions/generalDefinitions\";\r\nimport {\r\n  getInfoIconSourcesGov,\r\n  getInfoIconAssetsYr0,\r\n  getInfoIconInflationGrowth\r\n} from \"../definitions/infoIconsDefinitions\";\r\n\r\nexport class Source extends Component {\r\n  displayName = Source.name;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    let i;\r\n    let typeValues = [];\r\n    const listSourcesToShow = getListToShowByOrder(INCOMESOURCES);\r\n    for (i = 0; i < listSourcesToShow.length; ++i) {\r\n      {\r\n        typeValues.push({\r\n          label: listSourcesToShow[i].value[this.props.language],\r\n          value: i + 1,\r\n        });\r\n      }\r\n    }\r\n\r\n    /* \r\n    for (i = 0; i <= 5; ++i) {\r\n      typeValues.push({\r\n        label: INCOMESOURCES[this.props.language].Values[i],\r\n        value: i + 1\r\n      });\r\n    }\r\n */\r\n    // console.log(this.props.sourceCurr)\r\n    this.state = {};\r\n    this.dataValues = {\r\n      DD: [\r\n        {\r\n          id: 1,\r\n          Title: CONTROLTITLE[this.props.language].type,\r\n          defValue: getListItemNameFromKey(\r\n            INCOMESOURCES,\r\n            this.props.sourceCurr.sourceTypeKey,\r\n            this.props.language\r\n          ),\r\n          disableOptionValue: getDisableValues(INCOMESOURCES),\r\n          Values: typeValues,\r\n        },\r\n      ],\r\n    };\r\n    this.dataValues.DD[0].disableOptionValue[INCOMESOURCES.GOV_DEATH_BENEFIT.ID]=true;\r\n    this.dataValues.DD[0].disableOptionValue[INCOMESOURCES.GOV_SURVIVORS_PENSION.ID]=true;\r\n    this.dataValues.DD[0].disableOptionValue[INCOMESOURCES.GOV_ORPHANS_BENEFIT.ID]=true;\r\n\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (\r\n      nextProps.sourceCurr !== this.props.sourceCurr ||\r\n      nextProps.id !== this.props.id ||\r\n      nextProps.sourcesNo !== this.props.sourcesNo\r\n    ) {\r\n      // console.log(nextProps.sourceCurr.sourceTypeKey)\r\n      this.dataValues.DD[0].defValue = getListItemNameFromKey(\r\n        INCOMESOURCES,\r\n        nextProps.sourceCurr.sourceTypeKey,\r\n        this.props.language\r\n      );\r\n    }\r\n  }\r\n\r\n  handleDoRemove = (id) => {\r\n    if (this.props.disableAddRemove === false) {\r\n      this.props.handleRemoveSource(id);\r\n    }  \r\n  };\r\n\r\n  isSourceGovNonOrphanBenefit = (key) => {\r\n    if (\r\n      key === INCOMESOURCES.GOV_SURVIVORS_PENSION.Key ||\r\n      key === INCOMESOURCES.GOV_DEATH_BENEFIT.Key\r\n    )\r\n      return true;\r\n    else return false;\r\n  };\r\n\r\n  isDividendIncome = (key) => {\r\n    if (key === INCOMESOURCES.DIVIDEND_INCOME.Key) return true;\r\n    else return false;\r\n  };\r\n  isSourceGovOrphansBenefit = (key) => {\r\n    if (key === INCOMESOURCES.GOV_ORPHANS_BENEFIT.Key) return true;\r\n    else return false;\r\n  };\r\n\r\n  handleDoAdd = () => {\r\n    // no gov stuff\r\n    if (this.props.disableAddRemove === false) {\r\n    \r\n    var sourceNo =\r\n      this.props.sourcesNo > this.dataValues.DD[0].Values.length - 1\r\n        ? this.dataValues.DD[0].Values.length - 1\r\n        : this.props.sourcesNo;\r\n    //if(this.props.includeGovOrphanBenefit===false)\r\n    //  sourceNo +=1;\r\n    if (sourceNo > this.dataValues.DD[0].Values.length - 1) sourceNo -= 1;\r\n\r\n    let sourceNextKey = getListItemKeyFromName(\r\n      INCOMESOURCES,\r\n      this.dataValues.DD[0].Values[sourceNo].label\r\n    );\r\n\r\n    // dont add gov stuff unless has child && orphanben\r\n    while (\r\n      sourceNextKey === INCOMESOURCES.GOV_DEATH_BENEFIT.Key ||\r\n      sourceNextKey === INCOMESOURCES.GOV_SURVIVORS_PENSION.Key ||\r\n      (sourceNextKey === INCOMESOURCES.GOV_ORPHANS_BENEFIT.Key &&\r\n        this.props.includeGovOrphanBenefit === false)\r\n    ) {\r\n      sourceNo += 1;\r\n      sourceNextKey = getListItemKeyFromName(\r\n        INCOMESOURCES,\r\n        this.dataValues.DD[0].Values[sourceNo].label\r\n      );\r\n    }\r\n\r\n    // dont repeat\r\n    while (\r\n      sourceNextKey === this.props.sourceCurr.sourceTypeKey &&\r\n      this.props.sourceCurr.sourceTypeKey !== INCOMESOURCES.OTHER.Key\r\n    ) {\r\n      sourceNo += 1;\r\n      sourceNextKey = getListItemKeyFromName(\r\n        INCOMESOURCES,\r\n        this.dataValues.DD[0].Values[sourceNo].label\r\n      );\r\n    }\r\n\r\n    const source = {\r\n      id: this.props.sourcesNo + 1,\r\n      sourceTypeKey: sourceNextKey,\r\n      amount: 0,\r\n      startYear: 0,\r\n      // set others based on INA other values tax infl\r\n      // duration, growthRate,ownerID,taxRate depends on clients\r\n\r\n    };\r\n    if (sourceNextKey === INCOMESOURCES.DIVIDEND_INCOME.Key)\r\n      source.taxRate = DEFAULT_DIVIDEND_TAX_RATE;\r\n    // console.log(source)\r\n    this.props.handleAddSource(source);\r\n  }\r\n  };\r\n\r\n  updateDDown = (id, selection) => {\r\n    let source = {\r\n      id: this.props.sourceCurr.id,\r\n      //Type: this.props.Type,\r\n      sourceTypeKey: this.props.sourceCurr.sourceTypeKey,\r\n      amount: this.props.sourceCurr.amount,\r\n      startYear: this.props.sourceCurr.startYear,\r\n      duration: this.props.sourceCurr.duration,\r\n      taxRate: this.props.sourceCurr.taxRate,\r\n      annualGrowth: this.props.sourceCurr.annualGrowth,\r\n    };\r\n\r\n    if (id === 1)\r\n      source.sourceTypeKey = getListItemKeyFromName(INCOMESOURCES, selection);\r\n    else if (id === 2) source.ownerID = selection;\r\n    this.props.handleUpdate(source);\r\n  };\r\n\r\n  handleUpdateInput = (id, value) => {\r\n    let  s1 = {\r\n      id: this.props.sourceCurr.id,\r\n      //Type: this.props.Type,\r\n      sourceTypeKey: this.props.sourceCurr.sourceTypeKey,\r\n      amount: this.props.sourceCurr.amount,\r\n      startYear: this.props.sourceCurr.startYear,\r\n      duration: this.props.sourceCurr.duration,\r\n      ownerID: this.props.sourceCurr.ownerID,\r\n      taxRate: this.props.sourceCurr.taxRate,\r\n      annualGrowth: this.props.sourceCurr.annualGrowth,\r\n    };\r\n\r\n//    s1 =copyFromAnotherObject(this.props.sourceCurr)\r\n\r\n    let changed = false;\r\n    const lang = this.props.language;\r\n    const valueClean = cleanFormat(value,lang);\r\n    const valueCleanInt = parseInt(valueClean);\r\n\r\n    if (id === 1) {\r\n      changed = s1.amount !== valueCleanInt ? true : false;\r\n      s1.amount = valueCleanInt;\r\n    } else if (id === 2) {\r\n      changed = s1.startYear !== value ? true : false;\r\n      s1.startYear = value;\r\n    } else if (id === 3) {\r\n      changed = s1.duration !== value ? true : false;\r\n      s1.duration = value;\r\n    } else if (id === 4) {\r\n      changed =\r\n        s1.taxRate !==\r\n        parseInt(100 * valueClean) / 100\r\n          ? true\r\n          : false;\r\n      s1.taxRate =\r\n        parseInt(100 * valueClean) / 100;\r\n    } else if (id === 5) {\r\n      changed =\r\n        s1.annualGrowth !==\r\n        parseInt(100 * valueClean) / 100\r\n          ? true\r\n          : false;\r\n      s1.annualGrowth =\r\n        parseInt(100 * valueClean) / 100;\r\n    }\r\n    if (changed){\r\n       this.props.handleUpdate(s1);\r\n       this.setState({ loading: this.props.disableAddRemove });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const gov = this.isSourceGovNonOrphanBenefit(\r\n      this.props.sourceCurr.sourceTypeKey\r\n    );\r\n    const govOrphan = this.isSourceGovOrphansBenefit(\r\n      this.props.sourceCurr.sourceTypeKey\r\n    );\r\n    const dividend = this.isDividendIncome(this.props.sourceCurr.sourceTypeKey);\r\n    const RRIF = this.props.sourceCurr.sourceTypeKey === INCOMESOURCES.RRIF.Key;\r\n    // console.log(this.props.sourceCurr,govOrphan,this.props.sourceCurr.maxOrphan)\r\n    \r\n    \r\n    let unlistedGreyedOption;\r\n    if (RRIF) {\r\n      unlistedGreyedOption = [];\r\n      unlistedGreyedOption.push({\r\n        label: INCOMESOURCES.RRIF.value[this.props.language],\r\n        value: 1,\r\n      });\r\n    }\r\n\r\n    if (this.state.loading === true && this.props.disableAddRemove=== true) {\r\n      return (\r\n       \"\"\r\n      );\r\n    } else {\r\n      return (\r\n      <div className=\"inputRow\">\r\n        {this.dataValues.DD.map((dd) => (\r\n          <DropDown\r\n            key={dd.id}\r\n            id={dd.id}\r\n            Count={this.props.sourcesNo}\r\n            Title={dd.Title}\r\n            // infoIcon={gov && !govOrphan ? getInfoIconSourcesGov(this.props.language): undefined}\r\n            width={DROPDOWN_WIDE}\r\n            language={this.props.language}\r\n            defValue={dd.defValue}\r\n            Values={dd.Values}\r\n            disableOption={dd.disableOptionValue}\r\n            unlistedGreyedOption={unlistedGreyedOption}\r\n            updateDDown={this.updateDDown}\r\n          />\r\n        ))}\r\n        {!RRIF && (\r\n          <InputField\r\n            format={2}\r\n            id={1}\r\n            key=\"amt\"\r\n            inputName={CONTROLTITLE[this.props.language].amountGross}\r\n            readOnly={gov}\r\n            Count={this.props.sourcesNo}\r\n            language={this.props.language}\r\n            infoIcon={\r\n              gov || govOrphan// && !govOrphan\r\n                ? getInfoIconSourcesGov(this.props.language)\r\n                : undefined\r\n            }\r\n            maxValue={govOrphan ? this.props.sourceCurr.maxOrphan : undefined}\r\n            inputValue={this.props.sourceCurr.amount}\r\n            inputTitle={this.props.sourceCurr.id}\r\n            handleUpdateInput={this.handleUpdateInput}\r\n          />\r\n        )}\r\n\r\n        {gov || govOrphan ? (\r\n          \"\"\r\n        ) : (\r\n          <InputField\r\n            format={1}\r\n            id={2}\r\n            inputName={\r\n              RRIF\r\n                ? CONTROLTITLE[this.props.language].RRIFAge\r\n                : CONTROLTITLE[this.props.language].startYear\r\n            }\r\n            Count={this.props.sourcesNo}\r\n            language={this.props.language}\r\n            inputValue={this.props.sourceCurr.startYear}\r\n            infoIcon={getInfoIconAssetsYr0(this.props.language)}\r\n            //infoIcon={RRIF ? getInfoIconSourcesRRIF(this.props.language): undefined}\r\n            readOnly={RRIF}\r\n            inputTitle={this.props.sourceCurr.id}\r\n            handleUpdateInput={this.handleUpdateInput}\r\n          />\r\n        )}\r\n        {gov || RRIF ? (\r\n          \"\"\r\n        ) : (\r\n          <InputField\r\n            format={1}\r\n            id={3}\r\n            inputName={CONTROLTITLE[this.props.language].dur}\r\n            Count={this.props.sourcesNo}\r\n            language={this.props.language}\r\n            inputValue={this.props.sourceCurr.duration}\r\n            maxValue={\r\n              govOrphan ? this.props.sourceCurr.maxOrphanDur : undefined\r\n            }\r\n            inputTitle={this.props.sourceCurr.id}\r\n            handleUpdateInput={this.handleUpdateInput}\r\n          />\r\n        )}\r\n\r\n        {dividend && (\r\n          <InputField\r\n            id={4}\r\n            inputName={CONTROLTITLE[this.props.language].dividendTaxRate}\r\n            format={3}\r\n            Count={this.props.sourcesNo}\r\n            language={this.props.language}\r\n            //   infoIcon={getInfoIconDividend(this.props.language)}\r\n            inputValue={this.props.sourceCurr.taxRate}\r\n            inputTitle={this.props.sourceCurr.id}\r\n            handleUpdateInput={this.handleUpdateInput}\r\n          />\r\n        )}\r\n\r\n        <AddRemove\r\n          currentID={this.props.sourceCurr.id}\r\n          numberComps={this.props.sourcesNo}\r\n          handleDoAdd={this.handleDoAdd}\r\n          handleDoRemove={this.handleDoRemove}\r\n          disabled={this.props.disableAddRemove}\r\n          disabledRemove={gov || govOrphan}\r\n        />\r\n        {/* {isMobileDevice() && this.props.sourceCurr.id < this.props.sourcesNo ? (\r\n          <hr className=\"ppi2\" />\r\n        ) : (\r\n          \"\"\r\n        )} */}\r\n      </div>\r\n    );\r\n      }\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { DropDown } from \"./DropDown\";\r\nimport { AddRemove } from \"./AddRemove\";\r\nimport { cleanFormat, getListItemKeyFromName } from \"../utils/helper\";\r\nimport {\r\n  MESSAGES,\r\n  CONTROLTITLE,\r\n  INCOMENEEDS,\r\n  DROPDOWN_WIDE,\r\n} from \"../definitions/generalDefinitions\";\r\n//import { InputField4 } from './inputField4';\r\nimport { InputField } from \"./inputField\";\r\nimport {\r\n  isMobileDevice,\r\n  getListToShowByOrder,\r\n  getListItemNameFromKey,\r\n} from \"../utils/helper\";\r\nimport {\r\n  getInfoSalaryPercent,\r\n  getInfoIconAssetsYr0,\r\n} from \"../definitions/infoIconsDefinitions\";\r\n\r\nexport class Need extends Component {\r\n  displayName = Need.name;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    let i;\r\n    let typeValues = [];\r\n    const listNeedsToShow = getListToShowByOrder(INCOMENEEDS);\r\n    for (i = 0; i < listNeedsToShow.length; ++i) {\r\n      typeValues.push({\r\n        label: listNeedsToShow[i].value[this.props.language],\r\n        value: i + 1,\r\n      });\r\n    }\r\n    this.state = {\r\n      loading: false,\r\n    };\r\n    this.dataValues = {\r\n      DD: [\r\n        {\r\n          id: 1,\r\n          Title: CONTROLTITLE[this.props.language].type,\r\n          defValue: getListItemNameFromKey(\r\n            INCOMENEEDS,\r\n            this.props.needCurr.needTypeKey,\r\n            this.props.language\r\n          ),\r\n          Values: typeValues,\r\n        },\r\n      ],\r\n    };\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (\r\n      nextProps.needCurr !== this.props.needCurr ||\r\n      nextProps.id !== this.props.id ||\r\n      nextProps.needsNo !== this.props.needsNo\r\n    ) {\r\n      this.dataValues.DD[0].defValue = getListItemNameFromKey(\r\n        INCOMENEEDS,\r\n        nextProps.needCurr.needTypeKey,\r\n        this.props.language\r\n      );\r\n    }\r\n  }\r\n\r\n  handleDoRemove = (id) => {\r\n//    if (this.props.disableAddRemove === false) {\r\n      this.props.handleRemoveNeed(id);\r\n //   }\r\n  };\r\n\r\n  handleDoAdd = () => {\r\n //   if (this.props.disableAddRemove === false) {\r\n\r\n      let needNo =\r\n      this.props.needsNo > this.dataValues.DD[0].Values.length - 1\r\n        ? this.dataValues.DD[0].Values.length - 1\r\n        : this.props.needsNo-1; // e % of income by default start from there\r\n\r\n    if (needNo > this.dataValues.DD[0].Values.length - 1) needNo -= 1\r\n    let needNext = this.dataValues.DD[0].Values[needNo].label;\r\n\r\n    const startYear = 0; //this.props.startYear\r\n    const dur = 1; //this.props.duration;\r\n\r\n    this.props.handleAddNeed(\r\n      getListItemKeyFromName(INCOMENEEDS, needNext),\r\n      startYear,\r\n      dur\r\n    );\r\n//    }\r\n  };\r\n\r\n\r\n\r\n  updateDDown = (id, selection) => {\r\n    let need = {\r\n      id: this.props.id,\r\n      needTypeKey: this.props.needCurr.needTypeKey,\r\n\r\n      Percent: this.props.needCurr.Percent,\r\n      amount: this.props.needCurr.amount,\r\n      startYear: this.props.needCurr.startYear,\r\n      duration: this.props.needCurr.duration,\r\n    };\r\n\r\n    if (id === 1)\r\n      need.needTypeKey = getListItemKeyFromName(INCOMENEEDS, selection);\r\n    else if (id === 2) need.Owner = selection;\r\n    // console.log(need)\r\n    this.props.handleUpdate(need);\r\n  };\r\n\r\n  handleUpdateInput = (id, value) => {\r\n    \r\n    let need = {\r\n      id: this.props.id,\r\n      needTypeKey: this.props.needCurr.needTypeKey,\r\n      Percent: this.props.needCurr.Percent,\r\n      amount: this.props.needCurr.amount,\r\n      startYear: this.props.needCurr.startYear,\r\n      duration: this.props.needCurr.duration,\r\n    };\r\n\r\n    let changed = false;\r\n    const lang = this.props.language;\r\n    const valueClean = cleanFormat(value,lang);\r\n    const valueCleanInt = parseInt(valueClean);\r\n   \r\n    if (id === 1) {\r\n      changed = need.amount !== valueCleanInt ? true : false;\r\n      need.amount = valueCleanInt;\r\n      need.Percent = //100*need.amount/this.props.afterTaxTotalIncome\r\n        (parseInt(1000000*need.amount / this.props.afterTaxTotalIncome)/10000).toFixed(2);\r\n     } else if (id === 2) {\r\n      changed = need.startYear !== value ? true : false;\r\n      need.startYear = value;\r\n    } else if (id === 3) {\r\n      changed = need.duration !== value ? true : false;\r\n      need.duration = value;\r\n    } else if (id === 4) {\r\n      changed =\r\n        need.Percent !==\r\n        parseInt(100 * valueClean) / 100\r\n          ? true\r\n          : false;\r\n      need.Percent = parseFloat(valueClean);\r\n    }\r\n     if (changed) {\r\n       this.props.handleUpdate(need);\r\n       //this.setState({ loading: this.props.disableAddRemove });\r\n     }\r\n  };\r\n\r\n  render() {\r\n    let rOnly =\r\n      this.props.needCurr.needTypeKey === INCOMENEEDS.PERCET_OF_INCOME.Key;\r\n    rOnly = false;\r\n    const percentN =\r\n      this.props.needCurr.needTypeKey === INCOMENEEDS.PERCET_OF_INCOME.Key;\r\n    let divStyleClass = \"dropDown inputDiv\";\r\n    divStyleClass += this.props.language === \"fr\" ? \" inputDivFrench\" : \"\";\r\n\r\n     if (this.state.loading === true && this.props.disableAddRemove=== true) {\r\n      return (\r\n       \"\"\r\n      );\r\n    } else {\r\n    return (\r\n      <div className=\"inputRow\">\r\n        {this.dataValues.DD.map((dd) => (\r\n          <DropDown\r\n            key={dd.id}\r\n            id={dd.id}\r\n            Count={this.props.needsNo}\r\n            disable={this.props.needCurr.duration === 100}\r\n            Title={dd.Title}\r\n            defValue={dd.defValue}\r\n            width={DROPDOWN_WIDE}\r\n            Values={dd.Values}\r\n            updateDDown={this.updateDDown}\r\n          />\r\n        ))}\r\n        {percentN ? (\r\n          <InputField\r\n            inputName={CONTROLTITLE[this.props.language].percent}\r\n            format={3}\r\n            id={4}\r\n            Count={this.props.needsNo}\r\n            language={this.props.language}\r\n            inputValue={this.props.needCurr.Percent}\r\n            handleUpdateInput={this.handleUpdateInput}\r\n          />\r\n        ) : (\r\n          \"\"\r\n        )}\r\n        <InputField\r\n          inputName={CONTROLTITLE[this.props.language].afterTaxAmount}\r\n          format={2}\r\n          id={1}\r\n          key={\"am1\"}\r\n          readOnly={rOnly}\r\n          Count={this.props.needsNo}\r\n          language={this.props.language}\r\n          infoIcon={getInfoSalaryPercent(this.props.language)}\r\n          inputValue={this.props.needCurr.amount}\r\n          handleUpdateInput={this.handleUpdateInput}\r\n        />\r\n        <InputField\r\n          format={1}\r\n          id={2}\r\n          inputName={CONTROLTITLE[this.props.language].startYear}\r\n          Count={this.props.needsNo}\r\n          language={this.props.language}\r\n          infoIcon={getInfoIconAssetsYr0(this.props.language)}\r\n          inputValue={this.props.needCurr.startYear}\r\n          handleUpdateInput={this.handleUpdateInput}\r\n        />\r\n        {this.props.needCurr.duration === 100 ? (\r\n          <div className={divStyleClass}>\r\n            <div className=\"controlTitle\">\r\n              {CONTROLTITLE[this.props.language].dur}\r\n            </div>\r\n            <input\r\n              type=\"text\"\r\n              className=\"inputField inputFieldDisabled\"\r\n              isDisabled={true}\r\n              value={MESSAGES[this.props.language].ever}\r\n            />\r\n          </div>\r\n        ) : (\r\n          <InputField\r\n            format={1}\r\n            id={3}\r\n            inputName={CONTROLTITLE[this.props.language].dur}\r\n            Count={this.props.needsNo}\r\n            language={this.props.language}\r\n            inputValue={this.props.needCurr.duration}\r\n            handleUpdateInput={this.handleUpdateInput}\r\n          />\r\n        )}\r\n\r\n        <AddRemove\r\n          currentID={this.props.needCurr.id}\r\n          minComps={0}\r\n          id={this.props.needCurr.needTypeKey}\r\n          numberComps={this.props.needsNo}\r\n          handleDoAdd={this.handleDoAdd}\r\n          handleDoRemove={this.handleDoRemove}\r\n          disabled={this.props.disableAddRemove}\r\n        />\r\n        {/* {isMobileDevice() && this.props.id < this.props.needsNo ? (\r\n          <hr className=\"ppi2\" />\r\n        ) : (\r\n          \"\"\r\n        )} */}\r\n      </div>\r\n    );\r\n      }\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { DropDown } from \"./DropDown\";\r\n//import { InputField4 } from './inputField4';\r\nimport { InputField } from \"./inputField\";\r\nimport { cleanFormat, getListItemKeyFromName } from \"../utils/helper\";\r\nimport { CONTROLTITLE, PROVINCE } from \"../definitions/generalDefinitions\";\r\nimport { DROPDOWN_WIDE } from \"../definitions/generalDefinitions\";\r\nimport { getListItemNameFromKey, getListToShowByOrder } from \"../utils/helper\";\r\nimport { getInfoIconNotes } from \"../definitions/infoIconsDefinitions\";\r\nimport { Info } from \"./Info\";\r\n\r\nexport class Presentation extends Component {\r\n  displayName = Presentation.name;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    /*     this.state = {\r\n      image: this.props.presentationCurr.adviserLogo\r\n    };\r\n */\r\n\r\n    let i;\r\n    /* let typeValues = [];\r\n    for (i = 0; i <= 9; ++i) {\r\n      typeValues.push({\r\n        label: PROVINCE[this.props.language].Values[i],\r\n        value: i + 1\r\n      });\r\n    } */\r\n\r\n    let typeValues = [];\r\n    const listProvincesToShow = getListToShowByOrder(PROVINCE);\r\n    // console.log(listProvincesToShow)\r\n    for (i = 0; i < listProvincesToShow.length; ++i) {\r\n      typeValues.push({\r\n        label: listProvincesToShow[i].value[this.props.language],\r\n        value: i + 1,\r\n      });\r\n    }\r\n\r\n    this.state = {\r\n      designedFor: \"\",\r\n      designedBy: \"\",\r\n      notes: \"\",\r\n      showSaved:false\r\n    };\r\n    \r\n    this.dataValues = {\r\n      DD: [\r\n        {\r\n          id: 1,\r\n          Title: CONTROLTITLE[this.props.language].province,\r\n          defValue: getListItemNameFromKey(\r\n            PROVINCE,\r\n            this.props.presentationCurr.provinceKey,\r\n            this.props.language\r\n          ),\r\n          Values: typeValues,\r\n        },\r\n      ],\r\n    };\r\n  }\r\n  // unsafe use getDerivedStateFromProps TBD\r\n\r\n  componentDidMount = () => {\r\n    this.setState({\r\n      designedFor: this.props.presentationCurr.designedFor,\r\n      designedBy: this.props.presentationCurr.designedBy,\r\n      notes: this.props.presentationCurr.notes,\r\n    });\r\n  };\r\n  componentWillReceiveProps(nextProps) {\r\n    if (nextProps.presentationCurr !== this.props.presentationCurr) {\r\n      this.dataValues.DD[0].defValue = getListItemNameFromKey(\r\n        PROVINCE,\r\n        nextProps.presentationCurr.provinceKey,\r\n        this.props.language\r\n      );\r\n      //\t\tthis.dataValues.DD[0].Title = CONTROLTITLE[this.props.language].province;\r\n     }\r\n  }\r\n\r\n  /* static getDerivedStateFromProps(nextProps, prevState){\r\n    \r\n    if(nextProps.presentationCurr!==prevState.presentationCurr){\r\n      return {presentationCurr : nextProps.presentationCurr};\r\n    }\r\n    else return null;\r\n  }\r\n\r\n */\r\n\r\n  getNewPresentation = () => {\r\n    return {\r\n      id: this.props.id,\r\n      provinceKey: this.props.presentationCurr.provinceKey,\r\n      invRate: this.props.presentationCurr.invRate,\r\n      inflation: this.props.presentationCurr.inflation,\r\n      taxRate: this.props.presentationCurr.taxRate,\r\n      designedFor: this.props.presentationCurr.designedFor,\r\n      designedBy: this.props.presentationCurr.designedBy,\r\n      notes: this.props.presentationCurr.notes,\r\n      periodOption: this.props.presentationCurr.periodOption,\r\n      language: this.props.presentationCurr.language,\r\n      resultsOption: this.props.presentationCurr.resultsOption,\r\n      adviserLogo: this.props.presentationCurr.adviserLogo,\r\n      appletImage: this.props.presentationCurr.appletImage,\r\n    };\r\n  };\r\n\r\n  updateDDown = (id, selection) => {\r\n    let pres = this.getNewPresentation();\r\n    if (id === 1)\r\n      pres.provinceKey = getListItemKeyFromName(PROVINCE, selection);\r\n    this.props.handleUpdate(pres);\r\n  };\r\n\r\n  handleUpdateInput = (id, value) => {\r\n    let pres = this.getNewPresentation();\r\n    const lang=this.props.language;\r\n    let changed = false;\r\n    const valueClean = cleanFormat(value,lang);\r\n   \r\n    if (id === 1) {\r\n      changed =\r\n        pres.invRate !==\r\n        parseInt(10000 * valueClean) / 10000\r\n          ? true\r\n          : false;\r\n      pres.invRate =\r\n        parseInt(10000 * valueClean) / 10000;\r\n    } else if (id === 2) {\r\n      changed =\r\n        pres.inflation !==\r\n        parseInt(10000 * valueClean) / 10000\r\n          ? true\r\n          : false;\r\n\r\n      pres.inflation =\r\n        parseInt(10000 * valueClean) / 10000;\r\n    } else if (id === 3) {\r\n       changed =\r\n        pres.taxRate !==\r\n        parseInt(10000 * valueClean) / 10000\r\n          ? true\r\n          : false;\r\n\r\n      pres.taxRate =\r\n        parseInt(10000 * valueClean) / 10000;\r\n    }\r\n    //changed = pres.adviserLogo !== this.state.image ? true : false;\r\n \r\n    \r\n    if (changed) this.props.handleUpdate(pres);\r\n  };\r\n\r\n  updateInputValue(id, evt) {\r\n     let pres = this.getNewPresentation();\r\n    let changed = false;\r\n    if (id === 3) {\r\n      changed = pres.designedFor !== evt.target.value;\r\n      pres.designedFor = evt.target.value;\r\n    } else if (id === 4) {\r\n      changed = pres.designedBy !== evt.target.value;\r\n      pres.designedBy = evt.target.value;\r\n    } else if (id === 5) {\r\n      changed = pres.notes !== evt.target.value;\r\n      pres.notes = evt.target.value;\r\n    }\r\n    if (changed) this.props.handleUpdate(pres);\r\n  }\r\n\r\n \r\n\r\n  render() {\r\n     const infoIcon = getInfoIconNotes(this.props.language);\r\n    return (\r\n      <div className=\"inputRow\">\r\n        {this.dataValues.DD.map((dd) => (\r\n          <DropDown\r\n            key={dd.id}\r\n            id={dd.id}\r\n            Count={1}\r\n            Title={dd.Title}\r\n            width={DROPDOWN_WIDE}\r\n            defValue={dd.defValue}\r\n            Values={dd.Values}\r\n            updateDDown={this.updateDDown}\r\n          />\r\n        ))}\r\n        <InputField\r\n          inputName={CONTROLTITLE[this.props.language].taxRate}\r\n          format={3}\r\n          id={3}\r\n          Count={1}\r\n          language={this.props.language}\r\n          inputValue={Math.round(10000*this.props.presentationCurr.taxRate)/10000}\r\n          inputTitle={this.props.id}\r\n          handleUpdateInput={this.handleUpdateInput}\r\n        />\r\n        <InputField\r\n          inputName={CONTROLTITLE[this.props.language].invRate}\r\n          format={3}\r\n          id={1}\r\n          Count={1}\r\n          language={this.props.language}\r\n          inputValue={Math.round(10000*this.props.presentationCurr.invRate)/10000}\r\n          inputTitle={this.props.id}\r\n          handleUpdateInput={this.handleUpdateInput}\r\n        />\r\n        <InputField\r\n          inputName={CONTROLTITLE[this.props.language].inflation}\r\n          format={3}\r\n          id={2}\r\n          Count={1}\r\n          language={this.props.language}\r\n          inputValue={Math.round(10000*this.props.presentationCurr.inflation)/10000}\r\n          inputTitle={this.props.id}\r\n          handleUpdateInput={this.handleUpdateInput}\r\n        />\r\n        <div className=\"dropDown inputText\">\r\n          <span className=\"controlTitle\">\r\n            {CONTROLTITLE[this.props.language].designedFor}\r\n          </span>\r\n          <input\r\n            id={3}\r\n            className=\"inputField Text\"\r\n            value={this.state.designedFor}\r\n            onFocus={this.handleFocus}\r\n            onClick={this.select}\r\n            type=\"text\"\r\n            onBlur={(evt) => this.updateInputValue(3, evt)}\r\n            onChange={(evt) => this.setState({ designedFor: evt.target.value })}\r\n          />\r\n        </div>\r\n        <div className=\"dropDown inputText\">\r\n          <span className=\"controlTitle\">\r\n            {CONTROLTITLE[this.props.language].designedBy}\r\n          </span>\r\n          <input\r\n            id={4}\r\n            className=\"inputField Text\"\r\n            onFocus={this.handleFocus}\r\n            onClick={this.select}\r\n            type=\"text\"\r\n            value={this.state.designedBy}\r\n            onBlur={(evt) => this.updateInputValue(4, evt)}\r\n            onChange={(evt) => this.setState({ designedBy: evt.target.value })}\r\n          />\r\n        </div>\r\n     \r\n        <div className=\"dropDown inputTextNotes\">\r\n          <span className=\"controlTitle\">\r\n            {CONTROLTITLE[this.props.language].notes}\r\n          </span>\r\n          <Info infoIcon={infoIcon} />{\" \"}\r\n          <textarea\r\n            id={5}\r\n            className=\"inputField textarea\"\r\n            onFocus={this.handleFocus}\r\n            onClick={this.select}\r\n            type=\"text\"\r\n            value={this.state.notes}\r\n            onBlur={(evt) => this.updateInputValue(5, evt)}\r\n            onChange={(evt) => this.setState({ notes: evt.target.value })}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\nimport { Dialog, Button, Card, CardContent, Typography } from '@material-ui/core'\r\nimport { DialogActions, DialogContent, DialogContentText, DialogTitle, TextField } from '@material-ui/core'\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport { Info } from \"./Info\";\r\nimport {\r\n  getInfoSave\r\n} from \"../definitions/infoIconsDefinitions.js\";\r\n\r\n\r\nconst MESSAGES = {\r\n  en: {\r\n  saveAs1: \"To save files in your desired location: \",\r\n  saveAs2: \" - Microsoft Edge: select 'SaveAs' when prompted \",\r\n  saveAs3: \" - Google Chrome: make a one time change: \",\r\n  saveAs4: \"go to Settings - Advanced - Downloads and turn on \",\r\n  saveAs5: \"'Ask where to save each file before downloading\"\r\n  \r\n  },\r\n  fr: {\r\n  saveAs1: \"To save files in your desired location: ^F\",\r\n  saveAs2: \" - Microsoft Edge: select 'SaveAs' when prompted  ^F\",\r\n  saveAs3: \" - Google Chrome: make a one time change:  ^F\",\r\n  saveAs4: \"go to Settings - Advanced - Downloads and turn on  ^F\",\r\n  saveAs5: \"'Ask where to save each file before downloading  ^F\"\r\n  \r\n  }\r\n};\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    '& > *': {\r\n      margin: theme.spacing(1),\r\n    },\r\n  },\r\n}));\r\n\r\n\r\nexport class PopupUserinputDialog extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      open: this.props.openDialog,\r\n      name: '',\r\n      showInfo: false\r\n    }\r\n  };\r\n\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (nextProps !== this.props) {\r\n\r\n      this.setState({\r\n        open: nextProps.openDialog\r\n      })\r\n    }\r\n  }\r\n\r\n  handleOK = () => {\r\n    this.props.respondToInput(this.state.name)\r\n    this.setState({\r\n      open: !this.state.open\r\n    })\r\n  }\r\n\r\n\r\n  handleCancel = () => {\r\n    this.props.respondToInput(\"\")\r\n    this.setState({\r\n      open: !this.state.open\r\n    })\r\n  }\r\n\r\n\r\n  handleInfo = () => {\r\n    this.setState({\r\n      showInfo: !this.state.showInfo\r\n    })\r\n  }\r\n\r\n\r\n\r\n  render() {\r\n\r\n    const handleChange = evt => {\r\n\r\n\r\n      this.setState({\r\n        name: evt.target.value\r\n      }\r\n\r\n      )\r\n\r\n\r\n    }\r\n    const infoIcon = getInfoSave(this.props.language);\r\n    var sourceEdge = require('../images/chooseButton.png');\r\n    var sourceChrome = require('../images/chooseButtonChrome.png');\r\n    var optionsEdge = require('../images/optionsEdge.png');\r\n    var optionsChrome = require('../images/optionsChrome.png');\r\n\r\n    const message=MESSAGES[this.props.language]\r\n\r\n    \r\n    return (\r\n\r\n      <div>\r\n\r\n       {/*  <Button/> */}\r\n        <Dialog\r\n          open={this.state.open}\r\n          onClose={this.handleToggle}\r\n          aria-labelledby=\"confirm-dialog\"\r\n\r\n        >\r\n          <DialogTitle id=\"confirm-dialog\"></DialogTitle>\r\n          <DialogContent >\r\n            <DialogContentText><span className=\"dialog\">Save to File</span>\r\n            </DialogContentText>\r\n\r\n            <form>\r\n              <TextField\r\n                id=\"1\"\r\n                label=\"file name\"\r\n                value={this.state.name}\r\n                onChange={handleChange}\r\n                margin=\"normal\">\r\n              </TextField>\r\n\r\n\r\n            </form>\r\n          </DialogContent>\r\n           \r\n          <DialogActions style={{ paddingRight: '12px', paddingBottom: '10px' }}>\r\n          <div  style={{ marginLeft: '10px'}}><Info  infoIcon={infoIcon}/>\r\n          {/* <Button onClick={this.handleInfo} variant=\"contained\"> <span className=\"dialog\"> Instructions </span></Button> */}\r\n          <Button onClick={this.handleCancel} variant=\"contained\"   style={{ marginLeft: '222px', marginRight: '8px'}} > <span className=\"dialog\"> Cancel </span></Button>\r\n            <Button onClick={this.handleOK} variant=\"contained\"> <span className=\"dialog\"> OK </span></Button></div>\r\n            \r\n          </DialogActions>\r\n          {this.state.showInfo &&\r\n            <Card> <CardContent>\r\n              <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n                <div>\r\n                To save files in your desired location:<ul><li>Microsofrft Edge:\r\n              <ul>\r\n                <li>Go to Options {this.state.showInfo && <img  alt=\"info\" src={optionsEdge}  />} </li>\r\n                <li>Click Downlods - Click Download settings</li>\r\n                <li>Turn on \"Ask where to save each file before downloading\" {this.state.showInfo && <img  alt=\"info\" src={sourceEdge}  />}\r\n              </li>\r\n               </ul>\r\n               </li><li>Google Chrome:\r\n               <ul>\r\n               <li>Go to Options {this.state.showInfo && <img  alt=\"info\" src={optionsChrome}  />} </li>\r\n                <li>Click Settings - Advanced - Downloads</li>\r\n                <li>Turn on \"Ask where to save each file before downloading\" {this.state.showInfo && <img  alt=\"info\" src={sourceChrome}  />}\r\n                </li>\r\n               </ul>\r\n              \r\n              </li></ul></div>\r\n             \r\n          </Typography>\r\n         \r\n        </CardContent></Card>}\r\n         \r\n        </Dialog>\r\n\r\n      </div >\r\n\r\n    )\r\n\r\n\r\n  }\r\n}","import React from 'react';\r\nimport { useEffect, useState } from 'react';\r\n\r\n// NOTE: USE FOR LOCAL DEVELOPMENT\r\n// const APP_SITE /*: string */ = \"https://test-tkdirectapi.ppi.ca\";\r\n\r\n// NOTE: USE FOR TESTING / PRODUCTION\r\nconst APP_SITE /*: string */ = \"\";\r\n\r\nconst NA_QS_URL /*: string */ = APP_SITE + \"/api/NA_QS\";\r\n\r\n\r\n// interface IClient {\r\n//   clientFileName: string;\r\n//   clientFileContent: string;\r\n//   clientJson: string;\r\n// }\r\n\r\n// interface IClients {\r\n//   id: string,\r\n//   clients: IClient[];\r\n// }\r\n\r\n// interface IClientProps {\r\n//   clientFileName: string;\r\n//   clientJson: string;\r\n//   clientIndex: number;\r\n//   setClientFileContent (index: number, fileContent: string): void;\r\n// }\r\n\r\nconst Client /*: React.FC<IClientProps> */ = (props) => {\r\n\r\n  const [encryptedJson, setEncryptedJson] = useState/*<string>*/(\"\");\r\n  const [jsonEncrypted, setJsonEncrypted] = useState/*<boolean>*/(false);\r\n  const [encryptedJsonAssigned, setEncryptedJsonAssigned] = useState/*<boolean>*/(false);\r\n\r\n  useEffect(\r\n    () => {\r\n\r\n      (async () => {\r\n\r\n        var myHeaders = new Headers();\r\n        myHeaders.append(\"Accept\", \"application/json\");\r\n        myHeaders.append(\"Content-Type\", \"application/json\");\r\n\r\n        let obj = JSON.parse(props.clientJson);\r\n        let raw = JSON.stringify(obj);\r\n\r\n\r\n        let data = await fetch(NA_QS_URL, {\r\n          method: 'POST',\r\n          headers: myHeaders,\r\n          body: raw,\r\n          redirect: 'follow'\r\n        })\r\n          .then(response => { return response.text(); })\r\n          .catch(error => { return error; });\r\n\r\n        if (typeof data === \"string\") {\r\n          setEncryptedJson(data);\r\n          setJsonEncrypted(true);\r\n\r\n        }\r\n\r\n      })();\r\n\r\n    },\r\n    [\r\n      jsonEncrypted,\r\n    ]\r\n  );\r\n\r\n  if (jsonEncrypted === true && encryptedJsonAssigned === false) {\r\n    setEncryptedJsonAssigned(true);\r\n    props.setClientFileContent(props.clientIndex, encryptedJson.substr(1, encryptedJson.length - 2));\r\n  }\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        marginTop: 16,\r\n        marginLeft: 16,\r\n        display: \"none\",\r\n      }}\r\n    >\r\n      <div>\r\n        {props.clientFileName}\r\n      </div>\r\n      <div>\r\n        {encryptedJson}\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n}\r\n\r\nfunction PasteClients() {  \r\n\r\n  const [clients, setClients] = useState/*<IClients>*/({ id: \"\", clients: [] });\r\n\r\n  const [note, setNote] = useState/*<string>*/(\"\");\r\n\r\n  const pasteClients = () => {\r\n\r\n    setNote(\"\");\r\n\r\n    navigator.clipboard.readText().then(\r\n      clipText => {\r\n\r\n        let parsedObject = null;\r\n\r\n        try {\r\n          parsedObject = JSON.parse(clipText);\r\n\r\n          if (parsedObject.id !== undefined) {\r\n            if (parsedObject.clients !== undefined) {\r\n              if (parsedObject.clientFileSpecs !== undefined) {\r\n\r\n                let id = parsedObject.id;\r\n\r\n                if (parsedObject.clients !== undefined) {\r\n                  if (parsedObject.clientFileSpecs !== undefined) {\r\n\r\n                    let pastedClients /*: IClient[] */ = [];\r\n\r\n                    if (Array.isArray(parsedObject.clients) === true) {\r\n                      if (Array.isArray(parsedObject.clientFileSpecs) === true) {\r\n\r\n                        for (let i = 0; i < parsedObject.clients.length; i++) {\r\n\r\n                          let clientJson = JSON.stringify(parsedObject.clients[i]);\r\n                          let clientFileName = parsedObject.clientFileSpecs[i].clientFileName;\r\n\r\n                          let client /*: IClient*/ = {\r\n                            clientFileName: clientFileName,\r\n                            clientJson: clientJson,\r\n                            clientFileContent: \"\",\r\n                          };\r\n\r\n                          pastedClients.push(client);\r\n                        }\r\n\r\n                      }\r\n                    }\r\n\r\n                    // Set new clients.\r\n                    setClients({ id: id, clients: pastedClients });\r\n\r\n                    // Clear clipboard if we have any clients.\r\n                    if (parsedObject.clients.length > 0) {\r\n\r\n                      navigator.clipboard.writeText(\"<empty clipboard>\").then(function () {\r\n                        /* clipboard successfully set */\r\n                      }, function () {\r\n                        /* clipboard write failed */\r\n                      });\r\n\r\n                      setNote(`${parsedObject.clients.length} files created.`);\r\n                      return;\r\n\r\n                    }\r\n                    else {\r\n                      setNote(\"No files created.\");\r\n                    }\r\n\r\n                  }\r\n                }\r\n\r\n              }\r\n            }\r\n          }\r\n\r\n\r\n        }\r\n        catch (e) {\r\n          setNote(\"No files created. Clipboard content not recognized.\");\r\n        }\r\n\r\n      }\r\n    );\r\n\r\n    setNote(\"No files created. Clipboard content not recognized.\");\r\n\r\n    setClients({id:\"\", clients:[]});\r\n\r\n  }\r\n\r\n  function setClientFileContent (index /*: number */, clientFileContent /*: string*/){\r\n\r\n    let newClients/*: IClient[]*/ = [];\r\n    let allClientFileContentsAssigned = true;\r\n\r\n    for (let i = 0; i < clients.clients.length; i++){\r\n      \r\n      let newClient /*: IClient*/ = {\r\n        clientFileName: clients.clients[i].clientFileName,\r\n        clientJson: clients.clients[i].clientJson,\r\n        clientFileContent: clients.clients[i].clientFileContent,\r\n      }\r\n\r\n      if (i === index){\r\n        newClient.clientFileContent = clientFileContent;\r\n      }\r\n\r\n      newClients.push(newClient);\r\n    }\r\n\r\n    for (let i = 0; i < clients.clients.length; i++){\r\n      \r\n      if (newClients[i].clientFileContent === null){\r\n        allClientFileContentsAssigned = false;\r\n        break;\r\n      }\r\n      else if (newClients[i].clientFileContent === \"\"){\r\n        allClientFileContentsAssigned = false;\r\n        break;\r\n      }\r\n\r\n    }\r\n\r\n    if (allClientFileContentsAssigned === true){\r\n\r\n      let clientFileSpecs = [];\r\n\r\n      for (let i = 0; i < clients.clients.length; i++){\r\n\r\n        let clientFileSpec = {\r\n          clientFileName: newClients[i].clientFileName,\r\n          clientFileContent: newClients[i].clientFileContent\r\n        };\r\n\r\n        clientFileSpecs.push(clientFileSpec);\r\n      }\r\n\r\n      let clientFileSpecsCollection = {id: clients.id, clientFileSpecs: clientFileSpecs};\r\n      let clientFileSpecsCollectionJson = JSON.stringify(clientFileSpecsCollection, null, 2);\r\n     \r\n      navigator.clipboard.writeText(clientFileSpecsCollectionJson).then(function () {\r\n        /* clipboard successfully set */\r\n      }, function () {\r\n        /* clipboard write failed */\r\n      });\r\n\r\n    }\r\n\r\n    setClients({id: clients.id, clients: newClients});\r\n\r\n  }\r\n\r\n  function clientComponents() /*: any*/ {\r\n\r\n    let clientComponents /*: any[]*/ = [];\r\n\r\n    for (let i = 0; i < clients.clients.length; i++) {\r\n      clientComponents.push(\r\n        <Client\r\n          key={i}\r\n          clientFileName={clients.clients[i].clientFileName}\r\n          clientJson={clients.clients[i].clientJson}\r\n          clientIndex={i}\r\n          setClientFileContent={setClientFileContent}\r\n        />\r\n      )\r\n    }\r\n\r\n    return (\r\n      <React.Fragment>\r\n        {clientComponents}\r\n      </React.Fragment>\r\n    );\r\n\r\n  }\r\n\r\n  return (\r\n    <div>\r\n\r\n      <div\r\n        style={{\r\n          marginTop: 16,\r\n        }}\r\n      >\r\n        <button\r\n          style={{\r\n            marginLeft: 16,\r\n          }}\r\n          onClick={pasteClients}\r\n          style={{backgroundColor:\"yellow\"}}\r\n        >\r\n          Create Exported Client Files\r\n        </button>\r\n\r\n      </div>\r\n\r\n      <div\r\n        style={{\r\n          marginTop: 16,\r\n          marginLeft: 16,\r\n        }}\r\n      >\r\n        {note}\r\n        </div>\r\n\r\n      <div\r\n        style={{\r\n          marginTop: 16,\r\n        }}\r\n      >\r\n        {clientComponents()}\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n\r\n}\r\n\r\nexport default PasteClients;\r\n","import React, { Component } from \"react\";\r\nimport DataTable from \"./GridExcelComponent/DataTable\";\r\nimport { getInfoINA } from \"../definitions/infoIconsDefinitions\";\r\nimport { Info } from \"./Info\";\r\nimport {\r\n  APPLET_INA,\r\n} from \"../definitions/generalDefinitions\";\r\n\r\nexport class AggregateGrid extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n  render() {\r\n    \r\n    return (\r\n      <div>\r\n        <h3 className=\"ppi1\">\r\n          {APPLET_INA ?this.props.insNeedLine:\"\"}\r\n          {APPLET_INA &&\r\n          <Info\r\n              infoIcon={getInfoINA(this.props.lang)}\r\n          />}\r\n        </h3>\r\n\r\n        <DataTable\r\n          gridTitle=\"\"// use same title as othr pages {this.props.aggregateGrid.gridTitle}\r\n          dataColTitles={this.props.aggregateGrid.dataColTitles}\r\n          dataProjection={this.props.aggregateGrid.dataProjection}\r\n          gridColumnsDataExcelInfoSection={\r\n            this.props.aggregateGrid.gridColumnsDataExcelInfoSection\r\n          }\r\n          gridColumnAligns={this.props.aggregateGrid.gridColumnAligns}\r\n          gridIcons={this.props.aggregateGrid.gridIcons}\r\n          specialRow={this.props.LE}\r\n          language={this.props.lang}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport { Chart, Bar, Pie } from \"react-chartjs-2\";\r\n//import ChartDataLabels from 'chartjs-plugin-datalabels';\r\n//import \"./Output.css\";\r\nimport \"./Output.css\";\r\nimport { setUIDataToAPI } from \"../data/dataExchange\";\r\nimport { getAssetLiabProjections } from \"../data/aggregateGridProjections\";\r\nimport {\r\n  getProjectedLiabilities,\r\n  getTaxLiabCategoryTotal,\r\n  getLeakageGraphs,\r\n  getAgesEP\r\n} from \"../utils/helper\";\r\nimport {\r\n  QUOTE_CLIENT,\r\n  QUOTE_SPOUSE,\r\n  ASSET_TAX,\r\n  ASSETS,\r\n  LIABILITIES,\r\n} from \"../definitions/generalDefinitions\";\r\nimport { OUTPUTTEXTEP } from \"../definitions/outputDefinitionsEP\";\r\nimport {\r\n  ASSET_TAX_TYPE_PRINCIPAL_RES,\r\n  ASSET_TAX_TYPE_REAL_ESTATE,\r\n  ASSET_TAX_TYPE_STOCKS,\r\n  ASSET_TAX_TYPE_SMALL_BUS,\r\n  ASSET_TAX_TYPE_RRSP,\r\n  ASSET_TAX_TYPE_INTEREST,\r\n  ASSET_TAX_TYPE_OTHER,\r\n  ASSET_TAX_TYPE_COUNT,\r\n} from \"../definitions/outputDefinitionsEP\";\r\n\r\n// props option\r\nconst DISPLAY_INCOME = 1;\r\n\r\n// for Estate\r\nconst DISPLAY_TAXLIAB_CLIENT = 1;\r\nconst DISPLAY_TAXLIAB_JLTD = 2;\r\n\r\nexport class OutputGraphsEP extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      loadingMCC: true,\r\n      estateLiab: [],\r\n      estateLiabLE: [],\r\n      taxL: 0,\r\n    };\r\n    this.dataAges = [];\r\n    this.dataPremiums = [];\r\n    this.dataDB = [];\r\n    this.dataSVEquiBuild = [];\r\n    this.dataSVManulife = [];\r\n    this.Prem = 0;\r\n    this.bestPremiumDur = 100;\r\n    this.bestMinMultiple = 0;\r\n    this.premiumDur = 10;\r\n    this.lifeExp = 0;\r\n    this.minMultiple = 0;\r\n    this.insMultiple = 0;\r\n    this.bestFitEquiBuild = false;\r\n    this.INAEstateOption = DISPLAY_TAXLIAB_CLIENT;\r\n\r\n    this.chartRef = React.createRef();\r\n    this.taxLiabChartRef = React.createRef();\r\n    //   Chart.plugins.unregister(ChartDataLabels)\r\n\r\n  }\r\n\r\n\r\n  render() {\r\n    // get data similar to presentation\r\n    const AssetLiabProjs = getAssetLiabProjections(this.props);\r\n    const lang = this.props.dataInput.Presentations[0].language;\r\n    const totalLiabProjections = getProjectedLiabilities(\r\n      this.props.dataInput,\r\n      this.props.projectEnd,\r\n      this.props.probate\r\n    );\r\n\r\n//console.log(this.props,totalLiabProjections)\r\n\r\n    let dtaAgesAll = [];\r\n    let k;\r\n    let lifeExp = this.props.lifeExp;\r\n    const clients = this.props.dataInput.Clients;\r\n    let age =\r\n      clients.length > 1\r\n        ? Math.min(clients[QUOTE_SPOUSE].Age, clients[QUOTE_CLIENT].Age)\r\n        : clients[QUOTE_CLIENT].Age;\r\n\r\n    //let age = this.props.dataInput.Clients[1].Age;\r\n\r\n    if (this.INAEstateOption === DISPLAY_TAXLIAB_CLIENT) {\r\n      lifeExp = this.props.lifeExp;//Client;\r\n      age = this.props.dataInput.Clients[QUOTE_CLIENT].Age;\r\n    } else if (this.INAEstateOption === DISPLAY_TAXLIAB_JLTD) {\r\n      lifeExp = this.props.lifeExp;//JLTD;\r\n      age =\r\n        clients.length > 1\r\n          ? Math.min(clients[QUOTE_SPOUSE].Age, clients[QUOTE_CLIENT].Age)\r\n          : clients[QUOTE_CLIENT].Age;\r\n    }\r\n\r\n    /* for (k = 0; k <= lifeExp + 3; ++k) {\r\n      dtaAgesAll.push(age + k);\r\n    } */\r\n\r\n    dtaAgesAll=getAgesEP(clients, lifeExp)\r\n\r\n    \r\n\r\n    //options\r\n\r\n    const leakageGraps = getLeakageGraphs(\r\n      this.props.dataInput.Assets,\r\n      this.props.assetProjections,\r\n      AssetLiabProjs,\r\n      totalLiabProjections,\r\n      lang,\r\n      lifeExp\r\n    );\r\n\r\n    const optionsPie = {\r\n      responsive: true,\r\n      maintainAspectRatio: false,\r\n      title: {\r\n        display: true,\r\n        position: \"top\",\r\n        text: \"\",\r\n        fontSize: 14, //8,\r\n        fontColor: \"#111\",\r\n      },\r\n      legend: {\r\n        display: true,\r\n        position: \"right\",\r\n        labels: {\r\n          fontColor: \"#333\",\r\n          fontSize: 12, //16\r\n        },\r\n      },\r\n      /*   plugins: {\r\n    // Change options for ALL labels of THIS CHART\r\n    display: false,\r\n    datalabels: {\r\n        color: 'white'\r\n    }\r\n} */\r\n    };\r\n\r\n    let optionsPieEstateLiab = JSON.parse(JSON.stringify(optionsPie));\r\n    optionsPieEstateLiab.title.text = OUTPUTTEXTEP[lang].graphsT2;\r\n\r\n    let optionsPieEstateLiabLE = JSON.parse(JSON.stringify(optionsPie));\r\n    optionsPieEstateLiabLE.title.text =\r\n      OUTPUTTEXTEP[\r\n        lang\r\n      ].graphsT3; \r\n    const taxLiabTotal_Index =\r\n      AssetLiabProjs.AssetnEstateLiabs.length - 1; //last row\r\n    let dataTaxLiabLifeExp = [];\r\n    let dataTaxLiab = [];\r\n    let dataLiabAtDeath=[];\r\n    let taxLiabs = AssetLiabProjs.AssetnEstateLiabs[taxLiabTotal_Index].values;\r\n    for (k = 0; k <= lifeExp + 3; ++k) {\r\n      dataTaxLiabLifeExp.push(0);\r\n      dataTaxLiab.push(taxLiabs[k]);\r\n      dataLiabAtDeath.push(totalLiabProjections[k]);\r\n    }\r\n    dataTaxLiabLifeExp[lifeExp] = taxLiabs[lifeExp];\r\n    dataTaxLiab[lifeExp]=0;\r\n    // bar chart\r\n    const dataTaxLiability = {\r\n      labels: dtaAgesAll,\r\n      datasets: [\r\n        {\r\n          label: OUTPUTTEXTEP[lang].graphs2L2,\r\n          //type: \"line\",\r\n          data: dataTaxLiabLifeExp,\r\n          fill: true, // Don't fill area under the line\r\n          borderColor: \"#6AAd8b\",\r\n          backgroundColor: \"rgb(106,173,139,.5)\", // \"rgba(96, 125, 139, .7)\"\r\n        },\r\n        {\r\n          label: OUTPUTTEXTEP[lang].graphsLeakage2,\r\n          //type: \"line\",\r\n          data: dataTaxLiab,\r\n\r\n          fill: true, // Don't fill area under the line\r\n          borderColor: \"darkGrey\", // Line color\r\n          backgroundColor: \"#607d8b\",\r\n        },\r\n        {\r\n          label:  OUTPUTTEXTEP[lang].graphsLeakage3,\r\n          //type: \"line\",\r\n          data: dataLiabAtDeath,\r\n\r\n          fill: true, // Don't fill area under the line\r\n          borderColor: \"white\", // Line color\r\n          backgroundColor: \"#910d48\",\r\n        },\r\n      ],\r\n    };\r\n    // bar chart\r\n    const optionsTaxLiab = {\r\n      responsive: true,\r\n      maintainAspectRatio: false,\r\n      scales: {\r\n        xAxes: [\r\n          {\r\n            stacked: true,\r\n            ticks: {\r\n              beginAtZero: true,\r\n            },\r\n          },\r\n        ],\r\n        yAxes: [\r\n          {\r\n            stacked: true,\r\n            ticks: {\r\n              beginAtZero: true,\r\n              callback: function (value, index, values) {\r\n                let result =\r\n                  value < 1000\r\n                    ? value\r\n                    : lang === \"en\"\r\n                    ? Intl.NumberFormat().format(value / 1000) + \"K\"\r\n                    : (Intl.NumberFormat().format(value / 1000) + \"K\").replace(\r\n                        \",\",\r\n                        \" \"\r\n                      );\r\n                return result;\r\n              },\r\n\r\n              steps: 10,\r\n              stepValue: 5,\r\n            },\r\n          },\r\n        ],\r\n      },\r\n    };\r\n\r\n    /*   let optionsPieTax = JSON.parse(JSON.stringify(optionsPie));\r\n    optionsPieTax.title.text = \"Tax Treatment of Assets\";\r\n\r\n    let optionsPieLiabsAtDeath = JSON.parse(JSON.stringify(optionsPie));\r\n    optionsPieLiabsAtDeath.title.text = \"Liabilities At Death\";\r\n\r\n    let optionsPieLiabs = JSON.parse(JSON.stringify(optionsPie));\r\n    optionsPieLiabs.title.text = \"Liabilities Breakdown\";\r\n */\r\n    let estateLiab = [];\r\n    const totalLiabProjectionsNow = parseInt(totalLiabProjections[0]);\r\n    const totalLiabProjectionsLE3 = parseInt(totalLiabProjections[lifeExp + 3]);\r\n    estateLiab.push(totalLiabProjectionsNow);\r\n    estateLiab.push(\r\n      AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_REAL_ESTATE]\r\n    );\r\n    estateLiab.push(AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_STOCKS]);\r\n    estateLiab.push(AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_SMALL_BUS]);\r\n    estateLiab.push(AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_RRSP]);\r\n    estateLiab.push(AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_INTEREST]);\r\n    estateLiab.push(AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_OTHER]);\r\n\r\n    const dataPieEstateLiabNow = {\r\n      labels: [\r\n        //OUTPUTTEXTEP[lang].graphsL1,OUTPUTTEXTEP[lang].graphsL2,OUTPUTTEXTEP[lang].graphsL3,OUTPUTTEXTEP[lang].graphsL4,OUTPUTTEXTEP[lang].graphsL5,\r\n        OUTPUTTEXTEP[lang].graphsL1,\r\n        OUTPUTTEXTEP[lang].graphsTaxes + OUTPUTTEXTEP[lang].pg3Tab3R2C1,\r\n        OUTPUTTEXTEP[lang].graphsTaxes + OUTPUTTEXTEP[lang].pg3Tab3R3C1,\r\n        OUTPUTTEXTEP[lang].graphsTaxes + OUTPUTTEXTEP[lang].pg3Tab3R4C1,\r\n        OUTPUTTEXTEP[lang].graphsTaxes + OUTPUTTEXTEP[lang].pg3Tab3R5C1,\r\n        OUTPUTTEXTEP[lang].graphsTaxes + OUTPUTTEXTEP[lang].pg3Tab3R6C1,\r\n        OUTPUTTEXTEP[lang].graphsTaxes + OUTPUTTEXTEP[lang].pg3Tab3R7C1,\r\n      ],\r\n      datasets: [\r\n        {\r\n          //data: this.state.estateLiab,\r\n          data: estateLiab,\r\n          //backgroundColor: [\"#F7464A\", \"#46BFBD\", \"#FDB45C\", \"#949FB1\", \"#4D5360\"]\r\n          backgroundColor: [\r\n            \"#872651\",\r\n            ASSETS.REAL_ESTATE.colour,\r\n            ASSETS.STOCKS_BONDS.colour,\r\n            ASSETS.SMALL_BUSINESS_SHARES.colour,\r\n            ASSETS.RRSP_RRIF.colour,\r\n            ASSETS.INTEREST_BEARING.colour,\r\n            ASSETS.OTHER_ASSETS.colour,\r\n          ],\r\n        },\r\n      ],\r\n    };\r\n\r\n    let estateLiabLE3 = [];\r\n    estateLiabLE3.push(totalLiabProjectionsNow);\r\n    estateLiabLE3.push(\r\n      AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_REAL_ESTATE]\r\n    );\r\n    estateLiabLE3.push(\r\n      AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_STOCKS]\r\n    );\r\n    estateLiabLE3.push(\r\n      AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_SMALL_BUS]\r\n    );\r\n    estateLiabLE3.push(\r\n      AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_RRSP]\r\n    );\r\n    estateLiabLE3.push(\r\n      AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_INTEREST]\r\n    );\r\n    estateLiabLE3.push(\r\n      AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_OTHER]\r\n    );\r\n\r\n    const dataPieEstateLiabLE = {\r\n      labels: [\r\n        // OUTPUTTEXTEP[lang].graphsL1,OUTPUTTEXTEP[lang].graphsL2,OUTPUTTEXTEP[lang].graphsL3,OUTPUTTEXTEP[lang].graphsL4,OUTPUTTEXTEP[lang].graphsL5,\r\n        OUTPUTTEXTEP[lang].graphsL1,\r\n        OUTPUTTEXTEP[lang].graphsTaxes + OUTPUTTEXTEP[lang].pg3Tab3R2C1,\r\n        OUTPUTTEXTEP[lang].graphsTaxes + OUTPUTTEXTEP[lang].pg3Tab3R3C1,\r\n        OUTPUTTEXTEP[lang].graphsTaxes + OUTPUTTEXTEP[lang].pg3Tab3R4C1,\r\n        OUTPUTTEXTEP[lang].graphsTaxes + OUTPUTTEXTEP[lang].pg3Tab3R5C1,\r\n        OUTPUTTEXTEP[lang].graphsTaxes + OUTPUTTEXTEP[lang].pg3Tab3R6C1,\r\n        OUTPUTTEXTEP[lang].graphsTaxes + OUTPUTTEXTEP[lang].pg3Tab3R7C1,\r\n      ],\r\n      datasets: [\r\n        {\r\n          //data: this.state.estateLiabLE,\r\n          data: estateLiabLE3,\r\n          //backgroundColor: [\"#F7464A\", \"#46BFBD\", \"#FDB45C\", \"#949FB1\", \"#4D5360\"]\r\n          backgroundColor: [\r\n            \"#872651\",\r\n            ASSETS.REAL_ESTATE.colour,\r\n            ASSETS.STOCKS_BONDS.colour,\r\n            ASSETS.SMALL_BUSINESS_SHARES.colour,\r\n            ASSETS.RRSP_RRIF.colour,\r\n            ASSETS.INTEREST_BEARING.colour,\r\n            ASSETS.OTHER_ASSETS.colour,\r\n          ],\r\n        },\r\n      ],\r\n    };\r\n\r\n    \r\n    let optionsLiab= JSON.parse(JSON.stringify(leakageGraps.optionsPieEstateLeakage));\r\n    let optionsLiabLE= JSON.parse(JSON.stringify(leakageGraps.optionsPieEstateLeakageLE));\r\n    \r\n    optionsLiab.title.text=OUTPUTTEXTEP[lang].graphsT2;\r\n    optionsLiabLE.title.text=OUTPUTTEXTEP[lang].graphsT3;\r\n\r\n    return (\r\n      <div style={{ width: \"90%\" }}>\r\n        <div style={{ width: \"50%\" }}>\r\n        <br />\r\n          <h3 className=\"ppi1\">\r\n            <div>\r\n              {OUTPUTTEXTEP[lang].graphsT1} <br />\r\n            </div>\r\n          </h3>\r\n\r\n         {/* </div> <div style={{ width: \"100%\" }}> */}\r\n          {/* <div style={{ width: \"100%\", marginLeft: \"31px\" }}>\r\n            <article\r\n               className=\"canvas-containerLeakage\"\r\n                style={{ position: \"relative\"}}  \r\n            >\r\n              <div className=\"EPGraphDiv\">\r\n                <Pie\r\n                  data={dataPieEstateLiabNow}\r\n                  options={leakageGraps.dataPieEstateLeakage}\r\n                />\r\n              </div>\r\n              <div className=\"EPGraphDiv\">\r\n                <Pie\r\n                  data={dataPieEstateLiabLE}\r\n                  options={leakageGraps.dataPieEstateLeakage}\r\n                />\r\n              </div>\r\n            </article>\r\n          </div>\r\n */}\r\n\r\n          <div style={{ width: \"100%\", marginLeft: \"31px\" }}>\r\n            <article\r\n              className=\"canvas-containerLiab\"\r\n              /* style={{ position: \"relative\", height: \"35vh\", width: \"80vw\" }} */\r\n            >\r\n              <div className=\"EPGraphDiv\">\r\n                <Pie\r\n                  data={dataPieEstateLiabNow}\r\n                  options={optionsLiab}\r\n                />\r\n              </div>\r\n              <div className=\"EPGraphDiv\">\r\n                <Pie\r\n                  data={dataPieEstateLiabLE}\r\n                  options={optionsLiabLE}\r\n                />\r\n              </div>\r\n            </article>\r\n          </div>\r\n\r\n          <br/>\r\n          <br />\r\n          <h3 className=\"ppi1\">\r\n            <div>\r\n              {OUTPUTTEXTEP[lang].graphsLeakageT1} <br />\r\n            </div>\r\n          </h3>\r\n          <div style={{ width: \"100%\", marginLeft: \"31px\" }}>\r\n            <article\r\n              className=\"canvas-containerLeakage\"\r\n              /* style={{ position: \"relative\", height: \"35vh\", width: \"80vw\" }} */\r\n            >\r\n              <div className=\"EPGraphDiv\">\r\n                <Pie\r\n                  data={leakageGraps.dataPieEstateLeakage}\r\n                  options={leakageGraps.optionsPieEstateLeakage}\r\n                />\r\n              </div>\r\n              <div className=\"EPGraphDiv\">\r\n                <Pie\r\n                  data={leakageGraps.dataPieEstateLeakageLE}\r\n                  options={leakageGraps.optionsPieEstateLeakageLE}\r\n                />\r\n              </div>\r\n            </article>\r\n          </div>\r\n          <h3 className=\"ppi1\">\r\n            <div>\r\n              {OUTPUTTEXTEP[lang].graphs2L1} <br />\r\n            </div>\r\n          </h3>\r\n          </div>\r\n          <div style={{ width: \"100%\" }}>\r\n            <article className=\"canvas-container\" style={{ height: \"200px\" }}>\r\n              <Bar data={dataTaxLiability} options={optionsTaxLiab} />\r\n            </article>\r\n          </div>\r\n\r\n          <br />\r\n          <hr />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport DataTable from \"./GridExcelComponent/DataTable\";\r\nimport Loader from 'react-loader-spinner'\r\nimport _ from 'lodash';\r\n\r\nexport class ProjectionGrid extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            loading: true,\r\n            projectionGrid: this.props.assetProjection,\r\n        }\r\n        this.dataAges = []\r\n    }\r\n\r\n    async componentWillReceiveProps(nextProps) {\r\n        if (!_.isEqual(nextProps.assetProjection, this.props.assetProjection)) {\r\n           this.setState({ loading: true });\r\n           this.setState({\r\n               projectionGrid: nextProps.assetProjection,\r\n               loading: false,\r\n           })\r\n       }\r\n   }\r\n   async componentDidMount() {\r\n    this.setState({ loading: true });\r\n    this.setState({\r\n        projectionGrid: this.props.assetProjection,\r\n        loading: false,\r\n    })\r\n}\r\n    render() {\r\n        \r\n        const projectionGrid=this.state.projectionGrid\r\n         if (this.state.loading) {// || this.state.projectionGrid===null || this.state.projectionGrid===undefined) {\r\n            return <div class=\"loader-container\"><div class=\"loader\"></div></div>\r\n       {/* <div><Loader type=\"TailSpin\" color=\"black\" height={30} width={30} /></div>; */}\r\n        }\r\n        return (\r\n            <div>\r\n                <DataTable\r\n                    gridTitle={projectionGrid.gridTitle}\r\n                    dataColTitles={projectionGrid.dataColTitles}\r\n                    dataProjection={projectionGrid.dataProjection}\r\n                    \r\n                    language={this.props.lang}\r\n                />\r\n            </div>);\r\n    }\r\n}\r\n\r\n","import React, { useState,useEffect } from \"react\";\r\nimport DataTable from \"./GridExcelComponent/DataTable\";\r\n\r\n\r\n\r\nexport default function ProjectionGrid1({assetProjection,lang}) {\r\n    const [projectionGrid, setProjectionGrid] = useState(assetProjection);\r\n\r\n  \r\n    useEffect(() => {\r\n        /* getGridData(input, assetCurr)\r\n            .then(response => response.json())\r\n            .then(data => setProjectionGrid(data)); */\r\n\r\n           setProjectionGrid(assetProjection)\r\n    }, [assetProjection])\r\n\r\n\r\n    //if(projectionGrid!==null && projectionGrid!==undefined){\r\n    return (\r\n        <div>\r\n         \r\n            { assetProjection ?\r\n            <DataTable\r\n                gridTitle={projectionGrid.gridTitle}\r\n                dataColTitles={  projectionGrid.dataColTitles}\r\n                dataProjection={projectionGrid.dataProjection}\r\n                \r\n                language={lang}\r\n            /> : null}\r\n        </div>);\r\n}\r\n\r\n","import React, { Component } from 'react';\r\n\r\nexport class GridButton extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.handleClick = this.handleClick.bind(this);\r\n    }\r\n    \r\n\thandleClick = () => {\r\n\t\tthis.props.handleClickGridButton();\r\n    }\r\n\r\n\trender() {\r\n\t\treturn (\r\n            <span>\r\n                    <img\r\n                    className={this.props.className}\r\n                    onClick={this.handleClick}\r\n                    id={this.props.id}\r\n                    alt={this.props.alt}\r\n                    src = {this.props.src}\r\n                    />  \r\n            </span>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { DropDown } from \"./DropDown\";\r\n//import { InputField4 } from './inputField4';\r\nimport { InputField } from \"./inputField\";\r\nimport { AddRemove } from \"./AddRemove\";\r\nimport { cleanFormat, getDisableValues } from \"../utils/helper\";\r\nimport {\r\n  getInfoIconAssetsIncomeRate,\r\n  getInfoIconAssetsYr0,\r\n  getInfoIconAssetsOwner,\r\n  getInfoIconSourcesRRIF,\r\n  getInfoTaxLiability,\r\n  getInfoIconTaxExempt,\r\n  getInfoIconAssetsIns,\r\n  getInfoIconTFSA,\r\n  getInfoIconDepositWithd,\r\n  getInfoIconTaxLiab,\r\n} from \"../definitions/infoIconsDefinitions\";\r\n\r\nimport {\r\n  createDefaultAsset,\r\n  copyFromAnotherAsset,\r\n} from \"../data/createDefaults\";\r\nimport {\r\n  MESSAGES,\r\n  ASSETS,\r\n  ASSET_TAX,\r\n  CONTROLTITLE,\r\n  OWNERSHIP,\r\n  ASSET_OWNERSHIP_ACTION,\r\n  //  ASSET_OWNERSHIP_ACTION2,\r\n  COLUMN_TITLES,\r\n} from \"../definitions/generalDefinitions\";\r\nimport {\r\n  getListItemNameFromKey,\r\n  getListItemKeyFromName,\r\n  isMobileDevice,\r\n  getListToShowByOrder,\r\n  arrayFormatMoney,\r\n} from \"../utils/helper\";\r\n\r\nimport { ProjectionGrid } from \"./ProjectionGrid.js\";\r\nimport ProjectionGrid1 from \"./ProjectionGrid1.js\";\r\nimport DataTable from \"./GridExcelComponent/DataTable\";\r\nimport {\r\n  fetchAssetProjection2,\r\n  fetchAssetProjectionAPI,\r\n} from \"../utils/FetchAPIs\";\r\nimport {\r\n  DEFAULT_RRIF_AGE,\r\n  DROPDOWN_WIDE,\r\n} from \"../definitions/generalDefinitions\";\r\nimport _ from \"lodash\";\r\n\r\nimport {\r\n  ASSET_API_OUTPUT_TaxPayable,\r\n  APPLET_INA,\r\n  APPLET_EP,\r\n} from \"../definitions/generalDefinitions\";\r\n\r\nimport { GridButton } from \"./GridButton\";\r\nimport { getAssetGridValues } from \"../data/assetGridProjections\";\r\nimport debounce from \"lodash.debounce\";\r\nimport { Language } from \"@material-ui/icons\";\r\n\r\nconst ASSET_DROPDOWN_TYPE = 0;\r\n// inserted desc here not a dropdown no need for indes\r\nconst ASSET_DROPDOWN_OWNER = 2;\r\nconst ASSET_DROPDOWN_TAXTYPE = 3;\r\n\r\nexport class Asset extends Component {\r\n  displayName = Asset.name;\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      description: \"\",\r\n      displaySreadsheet: false,\r\n      loading: false,\r\n    };\r\n    var i;\r\n    var typeValues = [];\r\n    const listAssetsToShow = getListToShowByOrder(ASSETS);\r\n    for (i = 0; i < listAssetsToShow.length; ++i) {\r\n      typeValues.push({\r\n        label: listAssetsToShow[i].value[this.props.language],\r\n        value: i + 1,\r\n      });\r\n    }\r\n    /* for (i = 0; i < ASSETS[this.props.language].Values.length; ++i) {\r\n      typeValues.push({\r\n        label: ASSETS[this.props.language].Values[i],\r\n        value: i + 1\r\n      });\r\n    } */\r\n\r\n    /* var ownerValues = [\r\n      {\r\n        label: OWNERSHIP[this.props.language].Values[0],\r\n        value: 1\r\n      },\r\n      { label: OWNERSHIP[this.props.language].Values[1], value: 2 },\r\n      { label: OWNERSHIP[this.props.language].Values[2], value: 3 },\r\n      { label: OWNERSHIP[this.props.language].Values[3], value: 4 }\r\n    ];\r\n */\r\n    var ownerActionValues = [\r\n      {\r\n        label:\r\n          ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.value[this.props.language],\r\n        value: 1,\r\n      },\r\n      {\r\n        label:\r\n          ASSET_OWNERSHIP_ACTION.CLIENT_ROLLOVER.value[this.props.language],\r\n        value: 2,\r\n      },\r\n      {\r\n        label: ASSET_OWNERSHIP_ACTION.SPOUSE.value[this.props.language],\r\n        value: 3,\r\n      },\r\n      {\r\n        label: ASSET_OWNERSHIP_ACTION.JOINT.value[this.props.language],\r\n        value: 4,\r\n      },\r\n    ];\r\n    if (APPLET_EP) {\r\n      ownerActionValues = [\r\n        {\r\n          label: ASSET_OWNERSHIP_ACTION.CLIENT.value[this.props.language],\r\n          value: 1,\r\n        },\r\n        {\r\n          label: ASSET_OWNERSHIP_ACTION.SPOUSE.value[this.props.language],\r\n          value: 2,\r\n        },\r\n      ];\r\n    }\r\n\r\n    /* var ownerActionValues2 = [\r\n          {\r\n            label:\r\n              ASSET_OWNERSHIP_ACTION2.properties[this.props.language].Values[\r\n                OWNER_ACTION_CLIENTLIQUIDATE\r\n              ],\r\n            value: 1\r\n          },\r\n          {\r\n            label:\r\n              ASSET_OWNERSHIP_ACTION[this.props.language].Values[\r\n                OWNER_ACTION_CLIENTROLLOVER\r\n              ],\r\n            value: 2\r\n          },\r\n          {\r\n            label:\r\n              ASSET_OWNERSHIP_ACTION[this.props.language].Values[\r\n                OWNER_ACTION_Spouse\r\n              ],\r\n            value: 3\r\n          },\r\n          {\r\n            label:\r\n              ASSET_OWNERSHIP_ACTION[this.props.language].Values[\r\n                OWNER_ACTION_Joint\r\n              ],\r\n            value: 4\r\n          }\r\n        ];\r\n    \r\n     */\r\n    this.taxValues = [];\r\n    this.desc = this.props.assetCurr.description;\r\n    const listAssetTaxesToShow = getListToShowByOrder(ASSET_TAX);\r\n    // console.log(listAssetTaxesToShow)\r\n    for (i = 0; i < listAssetTaxesToShow.length; ++i) {\r\n      this.taxValues.push({\r\n        label: listAssetTaxesToShow[i].value[this.props.language],\r\n        value: i + 1,\r\n      });\r\n    }\r\n    // console.log(this.props.assetCurr)\r\n    /*     for (i = 0; i < ASSET_TAX[this.props.language].Values.length; ++i) {\r\n          this.taxValues.push({\r\n            label: ASSET_TAX[this.props.language].Values[i],\r\n            value: i + 1\r\n          });\r\n        }\r\n     */\r\n\r\n    // console.log(this.props.assetCurr.ownerKey)\r\n    this.dataValues = {\r\n      DD: [\r\n        // asset types\r\n        {\r\n          //ASSET_DROPDOWN_TYPE index =0\r\n          id: 1,\r\n          Title: CONTROLTITLE[this.props.language].type,\r\n          defValue: getListItemNameFromKey(\r\n            ASSETS,\r\n            this.props.assetCurr.assetTypeKey,\r\n            this.props.language\r\n          ),\r\n          Values: typeValues,\r\n          disableOptionValue: getDisableValues(ASSETS),\r\n        },\r\n        {\r\n          id: 12,\r\n          Title: \"Description\",\r\n        },\r\n        {\r\n          //ASSET_DROPDOWN_OWNER index =2\r\n          id: 2,\r\n          Title: CONTROLTITLE[this.props.language].owner,\r\n          /* defValue: this.props.assetCurr.ownerKey,\r\n          Values: ownerValues \r\n          Title: ASSET_OWNERSHIP.Title.value[this.props.language],//CONTROLTITLE[this.props.language].ownershipAction,           */\r\n          defValue: getListItemNameFromKey(\r\n            ASSET_OWNERSHIP_ACTION,\r\n            this.props.assetCurr.ownerKey,\r\n            this.props.language\r\n          ),\r\n          Values: ownerActionValues,\r\n          disableOptionValue: getDisableValues(ASSET_OWNERSHIP_ACTION),\r\n        },\r\n        {\r\n          id: 3, //ASSET_DROPDOWN_TAXTYPE index =3\r\n          Title: CONTROLTITLE[this.props.language].tax,\r\n          defValue: getListItemNameFromKey(\r\n            ASSET_TAX,\r\n            this.props.assetCurr.assetTaxTypeKey,\r\n            this.props.language\r\n          ), // this.props.assetCurr.Tax,\r\n          disableOptionValue: getDisableValues(ASSET_TAX),\r\n          Values: this.taxValues,\r\n        },\r\n      ],\r\n    };\r\n\r\n    this.DDTax = {\r\n      disableOptionValue: getDisableValues(ASSET_TAX),\r\n    };\r\n    for (let i = 3; i < this.DDTax.disableOptionValue.length; i++)\r\n      this.DDTax.disableOptionValue[i] = true;\r\n\r\n    this.dataColTitles = [];\r\n    this.taxLiabOfClient = [];\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    //console.log(nextProps.assetCurr, this.props.assetCurr);\r\n    if (\r\n      !_.isEqual(nextProps.assetCurr, this.props.assetCurr) ||\r\n      nextProps.id !== this.props.id ||\r\n      nextProps.assetsNo !== this.props.assetsNo ||\r\n      nextProps.clientsNo !== this.props.clientsNo ||\r\n      !_.isEqual(nextProps.projection, this.props.projection)\r\n    ) {\r\n      if (\r\n        this.props.assetCurr.assetTypeKey ===\r\n          ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.Key ||\r\n        nextProps.assetCurr.assetTypeKey ===\r\n          ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.Key\r\n      ) {\r\n        // console.log(this.dataValues.DD[0].Values);\r\n        //console.log(nextProps.projection, this.props.projection);\r\n\r\n        this.dataValues.DD[ASSET_DROPDOWN_TYPE].Values.push({\r\n          label: ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.value[this.props.language],\r\n          value: this.dataValues.DD[ASSET_DROPDOWN_TYPE].Values.length + 1,\r\n        });\r\n        // console.log(this.dataValues.DD[0].Values);\r\n      }\r\n\r\n      this.dataValues.DD[ASSET_DROPDOWN_TYPE].defValue = getListItemNameFromKey(\r\n        ASSETS,\r\n        nextProps.assetCurr.assetTypeKey,\r\n        this.props.language\r\n      );\r\n      this.dataValues.DD[ASSET_DROPDOWN_OWNER].defValue =\r\n        getListItemNameFromKey(\r\n          ASSET_OWNERSHIP_ACTION,\r\n          nextProps.assetCurr.ownerKey,\r\n          this.props.language\r\n        );\r\n      this.dataValues.DD[ASSET_DROPDOWN_TAXTYPE].defValue =\r\n        getListItemNameFromKey(\r\n          ASSET_TAX,\r\n          nextProps.assetCurr.assetTaxTypeKey,\r\n          this.props.language\r\n        ); //nextProps.assetCurr.Tax;\r\n\r\n      this.dataValues.DD[2].disableOptionValue[1] =\r\n        (APPLET_EP && nextProps.clientsNo === 1) ||\r\n        nextProps.assetCurr.assetTypeKey === ASSETS.LIFE_INSURANCE.Key;\r\n      //APPLET_EP && nextProps.clientsNo === 1;\r\n      if (APPLET_INA && nextProps.clientsNo === 1) {\r\n        nextProps.assetCurr.ownerKey =\r\n          ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key;\r\n        this.dataValues.DD[2].disableOptionValue[1] = true;\r\n        this.dataValues.DD[2].disableOptionValue[2] = true;\r\n        this.dataValues.DD[2].disableOptionValue[3] = true;\r\n      }\r\n\r\n      this.setState({ description: nextProps.assetCurr.description });\r\n      //this.dataValues.DD[3].defValue = nextProps.assetCurr.ownerKey;\r\n\r\n      /* \r\nlet i;\r\n      this.typeValues = [];\r\n       if(this.props.Type===ASSETS[this.props.language].Values[4])\t//\t\t'Registered')  \r\n      {\r\n        this.dataValues.DD[2].defValue =ASSET_TAX[this.props.language].Values[TAX_RRSP] \r\n\r\n      this.typeValues.push({\r\n        label: ASSETS[this.props.language].Values[2],\r\n       });\r\n     }\r\n      else{\r\n      for (i = 0; i <= ASSETS[this.props.language].Values.length; ++i) {\r\n        this.typeValues.push({\r\n        label: ASSETS[this.props.language].Values[i],\r\n        value: i + 1\r\n      });\r\n      }} */\r\n    }\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    this.setState({ description: this.props.assetCurr.description });\r\n  };\r\n\r\n  handleDoRemove = (id) => {\r\n    if (this.props.disableAddRemove === false) {\r\n      this.props.handleRemoveAsset(id);\r\n    }\r\n  };\r\n\r\n  handleDoAdd = () => {\r\n    if (this.props.disableAddRemove === false) {\r\n      var assNo =\r\n        this.props.assetsNo >\r\n        this.dataValues.DD[ASSET_DROPDOWN_TYPE].Values.length - 1\r\n          ? this.dataValues.DD[ASSET_DROPDOWN_TYPE].Values.length - 2\r\n          : this.props.assetsNo;\r\n      var assNext = this.dataValues.DD[ASSET_DROPDOWN_TYPE].Values[assNo].label;\r\n      if (assNo === 4 || assNo === 5) assNo = 0;\r\n      else\r\n        assNo =\r\n          this.props.assetsNo >\r\n          this.dataValues.DD[ASSET_DROPDOWN_TAXTYPE].Values.length - 1\r\n            ? this.dataValues.DD[ASSET_DROPDOWN_TAXTYPE].Values.length - 1\r\n            : this.props.assetsNo;\r\n      var assTax =\r\n        this.dataValues.DD[ASSET_DROPDOWN_TAXTYPE].Values[assNo].label;\r\n      const assTaxTypeKey = getListItemKeyFromName(\r\n        ASSET_TAX,\r\n        this.dataValues.DD[ASSET_DROPDOWN_TAXTYPE].Values[assNo].label\r\n      );\r\n      // console.log(assTaxTypeKey,assTax )\r\n      let asset = createDefaultAsset(this.props.assetsNo + 1);\r\n      asset.assetTypeKey = getListItemKeyFromName(ASSETS, assNext);\r\n      asset.description = \"\";\r\n      /* asset.ownerKey = APPLET_INA\r\n        ? (this.props.clientsNo === 1?ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key:ASSET_OWNERSHIP_ACTION.CLIENT_ROLLOVER.Key)\r\n        : ASSET_OWNERSHIP_ACTION.CLIENT.Key; // in EP RRSP owner client or spouse */\r\n      if (APPLET_INA) {\r\n        if (this.props.clientsNo === 1)\r\n          asset.ownerKey = ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key;\r\n      } else asset.ownerKey = ASSET_OWNERSHIP_ACTION.CLIENT.Key; // in EP RRSP owner client or spouse\r\n\r\n      if (asset.assetTypeKey === ASSETS.LIFE_INSURANCE.Key)\r\n        asset.ownerKey = ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key;\r\n      asset.assetTaxTypeKey = assTaxTypeKey;\r\n\r\n      asset = this.setAssetValuesToDefault(asset);\r\n\r\n      this.dataValues.DD[ASSET_DROPDOWN_TAXTYPE].Values = this.taxValues;\r\n\r\n      this.props.handleAddAsset(asset);\r\n    }\r\n  };\r\n\r\n  updateDDown = (id, selection) => {\r\n    const { id: propId, assetCurr } = this.props;\r\n\r\n    let asset = copyFromAnotherAsset(assetCurr);\r\n    asset.id = propId;\r\n    if (id === 1) {\r\n      asset = createDefaultAsset(propId);\r\n      asset.assetTypeKey = getListItemKeyFromName(ASSETS, selection);\r\n      asset = this.setAssetValuesToDefault(asset);\r\n     \r\n    } else if (id === 2) {\r\n      asset.ownerKey = getListItemKeyFromName(\r\n        ASSET_OWNERSHIP_ACTION,\r\n        selection\r\n      );\r\n      asset = this.setAssetValuesToDefault(asset);\r\n    } else if (id === 3)\r\n      //asset.Tax = selection;\r\n      asset.assetTaxTypeKey = getListItemKeyFromName(ASSET_TAX, selection);\r\n\r\n    /* asset = this.setAssetValuesToDefault(asset);  */\r\n\r\n    this.props.handleUpdate(asset);\r\n    //if (this.state.displaySreadsheet === true)\r\n    //this.handleUpdateGrid();\r\n  };\r\n  /*  debounceHandleUpdataDesc = debounce(\r\n    (asset) => this.props.handleUpdate(asset),\r\n    500\r\n  ); */\r\n\r\n  updateDesc = (evt) => {\r\n    //console.log(evt.target.value);\r\n    let asset = copyFromAnotherAsset(this.props.assetCurr);\r\n    asset.description = evt.target.value;\r\n    this.props.handleUpdate(asset);\r\n  };\r\n\r\n  handleUpdateInput = (id, value) => {\r\n    //this.setState({ loading: true });\r\n    let asset = copyFromAnotherAsset(this.props.assetCurr);\r\n    asset.id = this.props.id;\r\n    //console.log(value);\r\n    /* let asset = {\r\n      id: this.props.id,\r\n      //Type: this.props.assetCurr.Type,\r\n      assetTypeKey: this.props.assetCurr.assetTypeKey,\r\n      ownerKey: this.props.assetCurr.ownerKey,\r\n      //OwnerID: this.props.assetCurr.OwnerID,\r\n      currValue: this.props.assetCurr.currValue,\r\n      //Tax: this.props.assetCurr.Tax,\r\n      assetTaxTypeKey: this.props.assetCurr.assetTaxTypeKey,\r\n      //TaxID: this.props.assetCurr.TaxID,\r\n      growth: this.props.assetCurr.growth,\r\n      DisposeYr: this.props.assetCurr.DisposeYr,\r\n      DisposeDur: this.props.assetCurr.DisposeDur,\r\n      ACB: this.props.assetCurr.ACB,\r\n      smallBusinessCapGainExemption: this.props.assetCurr\r\n        .smallBusinessCapGainExemption,\r\n      contributionAmt: this.props.assetCurr.contributionAmt,\r\n      contributionStartYr: this.props.assetCurr.contributionStartYr,\r\n      contributionDur: this.props.assetCurr.contributionDur,\r\n      incomeRate: this.props.assetCurr.incomeRate,\r\n      RRIFStartAge: this.props.assetCurr.RRIFStartAge\r\n    };\r\n */\r\n    let changed = false;\r\n    const lang = this.props.language;\r\n    const valueClean = cleanFormat(value, lang);\r\n    const valueCleanInt = parseInt(valueClean);\r\n\r\n    if (id === 2) {\r\n      changed = asset.DisposeYr !== parseInt(value) ? true : false;\r\n      asset.DisposeYr = parseInt(value);\r\n    } else if (id === 3) {\r\n      changed = asset.DisposeDur !== parseInt(value) ? true : false;\r\n      asset.DisposeDur = parseInt(value);\r\n    } else if (id === 4) {\r\n      changed = asset.ACB !== valueCleanInt ? true : false;\r\n      asset.ACB = valueCleanInt;\r\n    } else if (id === 10) {\r\n      changed =\r\n        asset.smallBusinessCapGainExemption !== valueCleanInt ? true : false;\r\n      asset.smallBusinessCapGainExemption = valueCleanInt;\r\n    } else if (id === 1) {\r\n      changed = asset.currValue !== valueCleanInt ? true : false;\r\n      asset.currValue = valueCleanInt;\r\n    } else if (id === 5) {\r\n      changed =\r\n        asset.growth !== parseInt(10000 * valueClean) / 10000 ? true : false;\r\n      asset.growth = parseInt(10000 * valueClean) / 10000;\r\n    } else if (id === 6) {\r\n      changed = asset.contributionAmt !== valueCleanInt ? true : false;\r\n      asset.contributionAmt = valueCleanInt;\r\n    } else if (id === 7) {\r\n      changed = asset.contributionStartYr !== parseInt(value) ? true : false;\r\n      asset.contributionStartYr = parseInt(value);\r\n    } else if (id === 8) {\r\n      changed = asset.contributionDur !== parseInt(value) ? true : false;\r\n      asset.contributionDur = parseInt(value);\r\n    } else if (id === 13) {\r\n      changed = asset.withdrawalAmt !== valueCleanInt ? true : false;\r\n      asset.withdrawalAmt = valueCleanInt;\r\n    } else if (id === 14) {\r\n      changed = asset.withdrawalStartYr !== parseInt(value) ? true : false;\r\n      asset.withdrawalStartYr = parseInt(value);\r\n    } else if (id === 15) {\r\n      changed = asset.withdrawalDur !== parseInt(value) ? true : false;\r\n      asset.withdrawalDur = parseInt(value);\r\n    } else if (id === 9) {\r\n      changed =\r\n        asset.incomeRate !== parseInt(10000 * valueClean) / 10000\r\n          ? true\r\n          : false;\r\n      asset.incomeRate = parseInt(10000 * valueClean) / 10000;\r\n    } else if (id === 11) {\r\n      changed = asset.RRIFStartAge !== parseInt(value) ? true : false;\r\n      asset.RRIFStartAge = parseInt(value);\r\n    } else if (id === 12) {\r\n      changed = asset.description !== value ? true : false;\r\n      asset.description = value;\r\n    }\r\n    if (changed) {\r\n      this.props.handleUpdate(asset);\r\n      this.setState({ loading: this.props.disableAddRemove });\r\n\r\n      //this.setState({ loading: false });\r\n      // this.handleUpdateGrid();\r\n    }\r\n  };\r\n\r\n  updateClientTaxLiability = async () => {\r\n    let dataNA = this.props.getAssetProjection();\r\n    //let appSiteAPI = \"http://localhost:8082\";\r\n    let data = await fetchAssetProjection2(dataNA, this.props.id);\r\n    if (data !== undefined) {\r\n      // console.log(data[ASSET_API_OUTPUT_TaxPayable].numericValues[0]);\r\n\r\n      return data[ASSET_API_OUTPUT_TaxPayable].numericValues;\r\n    }\r\n  };\r\n\r\n  getData = async (dataNA, id) => {\r\n    let data = await fetchAssetProjectionAPI(dataNA, id);\r\n\r\n    return data;\r\n  };\r\n\r\n  handleClickGridButton = () => {\r\n    this.setState({ loading: true });\r\n    const display = this.state.displaySreadsheet;\r\n\r\n    this.props.adjustVisibleOutputSection(display === false ? 1 : -1);\r\n    this.setState({ displaySreadsheet: !display, loading: false });\r\n\r\n    /* if (this.state.displaySreadsheet === true) {\r\n      this.setState(prevState => {\r\n        let display = prevState.displaySreadsheet;\r\n        return { displaySreadsheet: !display,  loading:false };\r\n      });\r\n    }\r\n    else {\r\n      //await this.handleUpdateGrid()\r\n      this.setState(prevState => {\r\n        let display = prevState.displaySreadsheet;\r\n        return { displaySreadsheet: !display,  loading:false };\r\n      });\r\n      } */\r\n  };\r\n\r\n  setAssetValuesToDefault = (asset) => {\r\n    this.dataValues.DD[ASSET_DROPDOWN_TAXTYPE].Values = this.taxValues;\r\n\r\n    if (asset.assetTypeKey === ASSETS.RRSP_RRIF.Key) {\r\n      //value[this.props.language]) {\r\n      //asset.Tax = ASSET_TAX.REGISTERED.value[this.props.language];\r\n      asset.assetTaxTypeKey = ASSET_TAX.REGISTERED.Key;\r\n      if (\r\n        APPLET_INA &&\r\n        this.props.clientsNo > 1 &&\r\n        asset.ownerKey === ASSET_OWNERSHIP_ACTION.JOINT.Key\r\n      ) {\r\n        asset.ownerKey = ASSET_OWNERSHIP_ACTION.CLIENT_ROLLOVER.Key;\r\n      }\r\n    } else if (\r\n      asset.assetTypeKey === ASSETS.PERSONAL_RESIDENCE.Key ||\r\n      asset.assetTypeKey === ASSETS.TFSA.Key //value[this.props.language]\r\n    ) {\r\n      //asset.Tax = ASSET_TAX.NON_TAXABLE.value[this.props.language];\r\n      asset.assetTaxTypeKey = ASSET_TAX.NON_TAXABLE.Key;\r\n      asset.ACB = 0;\r\n      asset.DisposeYr = 99;\r\n      asset.DisposeDur = 1;\r\n      if (asset.assetTypeKey === ASSETS.TFSA.Key && asset.ownerKey === ASSET_OWNERSHIP_ACTION.JOINT.Key)\r\n        asset.ownerKey = ASSET_OWNERSHIP_ACTION.CLIENT_ROLLOVER.Key;\r\n    } else if (asset.assetTypeKey === ASSETS.CASH.Key) {\r\n      //value[this.props.language]) {\r\n      //asset.Tax = ASSET_TAX.NON_TAXABLE.value[this.props.language];\r\n      asset.assetTaxTypeKey = ASSET_TAX.NON_TAXABLE.Key;\r\n\r\n      asset.ACB = 0;\r\n    } else if (\r\n      asset.assetTypeKey === ASSETS.LIFE_INSURANCE.Key //value[this.props.language]\r\n    ) {\r\n      //asset.Tax = ASSET_TAX.NON_TAXABLE.value[this.props.language];\r\n      asset.assetTaxTypeKey = ASSET_TAX.NON_TAXABLE.Key;\r\n\r\n      asset.DisposeYr = APPLET_INA ? 0 : 99;\r\n      asset.DisposeDur = 1;\r\n      asset.ACB = 0;\r\n\r\n      //  asset.ownerKey = APPLET_INA?ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key:ASSET_OWNERSHIP_ACTION.CLIENT_ROLLOVER.Key;  allow spouse ins\r\n    } else if (\r\n      asset.assetTypeKey === ASSETS.STOCKS_BONDS.Key || //value[this.props.language] ||\r\n      asset.assetTypeKey === ASSETS.REAL_ESTATE.Key //value[this.props.language]\r\n    ) {\r\n      //asset.Tax = ASSET_TAX.CAPITAL_GAINS_DEFERRED.value[this.props.language];\r\n      asset.assetTaxTypeKey = ASSET_TAX.CAPITAL_GAINS_DEFERRED.Key;\r\n\r\n      /* this.dataValues.DD[ASSET_DROPDOWN_TAXTYPE].Values = [];\r\n      this.dataValues.DD[ASSET_DROPDOWN_TAXTYPE].Values.push({\r\n        label: ASSET_TAX.CAPITAL_GAINS_DEFERRED.value[this.props.language],\r\n        value: 1,\r\n      });\r\n      this.dataValues.DD[ASSET_DROPDOWN_TAXTYPE].Values.push({\r\n        label: ASSET_TAX.CAPITAL_GAINS_ANNUAL.value[this.props.language],\r\n        value: 2,\r\n      }); */\r\n    } else if (asset.assetTypeKey === ASSETS.SMALL_BUSINESS_SHARES.Key)\r\n      //value[this.props.language])\r\n      //asset.Tax = ASSET_TAX.CAPITAL_GAINS_DEFERRED.value[this.props.language];\r\n      asset.assetTaxTypeKey = ASSET_TAX.QUALIFYING_SMALL_BUSINESS.Key;\r\n    //.CAPITAL_GAINS_DEFERRED.Key;\r\n    else if (asset.assetTypeKey === ASSETS.INTEREST_BEARING.Key)\r\n      asset.assetTaxTypeKey = ASSET_TAX.INTEREST.Key;\r\n    //.FULLY_TAXABLE.Key;\r\n    //asset.assetTaxTypeKey= ASSET_TAX.INTEREST.Key;\r\n    else if (\r\n      asset.assetTypeKey === ASSETS.OTHER_ASSETS.Key //value[this.props.language] ||\r\n    )\r\n      //asset.Tax = ASSET_TAX.FULLY_TAXABLE.value[this.props.language];\r\n      asset.assetTaxTypeKey = ASSET_TAX.FULLY_TAXABLE.Key;\r\n    \r\n    if(APPLET_EP) \r\n      {\r\n        if(asset.assetTypeKey === ASSETS.RRSP_RRIF.Key || asset.assetTypeKey === ASSETS.TFSA.Key)\r\n        {   \r\n         if(asset.ownerKey !== ASSET_OWNERSHIP_ACTION.CLIENT.Key  && asset.ownerKey !== ASSET_OWNERSHIP_ACTION.SPOUSE.Key)\r\n            asset.ownerKey = ASSET_OWNERSHIP_ACTION.CLIENT.Key\r\n        } \r\n      } \r\n      \r\n\r\n\r\n    if (\r\n      asset.ownerKey === ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key //ASSET_OWNERSHIP.CLIENTLIQUIDATE.value[this.props.language]\r\n    ) {\r\n      asset.DisposeYr = 0;\r\n      asset.DisposeDur = 1;\r\n    }\r\n    // console.log(asset)\r\n\r\n    // single person\r\n    if (APPLET_INA && this.props.clientsNo === 1) {\r\n      asset.ownerKey = ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key;\r\n      asset.DisposeYr = 0;\r\n    }\r\n    return asset;\r\n  };\r\n\r\n  clone2 = () => {\r\n    let id = \"assetGrid\";\r\n    if (this.state.displaySreadsheet === true) {\r\n      // console.log(this.state.displaySreadsheet)\r\n\r\n      var itm = document.getElementById(id);\r\n      // console.log(itm)\r\n\r\n      var cln = itm.cloneNode(true);\r\n      cln.id = \"ll\";\r\n      //cln.style.position=\"relative\"\r\n      let cln2 = document.createElement(\"div\");\r\n      cln2.appendChild(cln);\r\n      cln2.id = \"lll\";\r\n      document.addEventListener(\"click\", function (e) {\r\n        if (e.target && e.target.id === \"lll\") {\r\n        }\r\n      });\r\n\r\n      document.getElementById(\"copyDiv\").appendChild(cln2);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      id,\r\n      assetCurr,\r\n      /* Type,\r\n      Owner,\r\n      index,\r\n      currValue,\r\n      Tax,\r\n      growth,\r\n      Dispos\r\n      eYr,\r\n      DisposeDur,\r\n      ACB,\r\n      smallBusinessCapGainExemption,\r\n      contributionAmt,\r\n      contributionStartYr,\r\n      contributionDur,\r\n      incomeRate, */\r\n      language,\r\n      themeColor,\r\n      assetsNo,\r\n    } = this.props;\r\n    const assetID = assetCurr.assetTypeKey; //ASSETS.INTEREST_BEARING.value[this.props.language]\r\n    //Object.values(ASSETS).filter(obj => obj.value[language]=== assetCurr.Type)[0].Key\r\n    let disableTaxMethods =\r\n      assetCurr.assetTypeKey === ASSETS.LIFE_INSURANCE.Key || //value[language] ||\r\n      assetCurr.assetTypeKey === ASSETS.CASH.Key || //value[language] ||\r\n      assetCurr.assetTypeKey === ASSETS.PERSONAL_RESIDENCE.Key || //value[language] ||\r\n      assetCurr.assetTypeKey === ASSETS.TFSA.Key || //value[language] ||\r\n      assetCurr.assetTypeKey === ASSETS.RRSP_RRIF.Key || //value[language] ||\r\n      assetCurr.assetTypeKey === ASSETS.INTEREST_BEARING.Key ||\r\n      assetCurr.assetTypeKey === ASSETS.SMALL_BUSINESS_SHARES.Key\r\n        ? true\r\n        : false;\r\n    const disableOwner = false; // allow ins for both\r\n    const insurance = assetCurr.assetTypeKey === ASSETS.LIFE_INSURANCE.Key;\r\n\r\n    const taxStocks = assetCurr.assetTypeKey === ASSETS.STOCKS_BONDS.Key;\r\n    const taxRS = assetCurr.assetTypeKey === ASSETS.REAL_ESTATE.Key;\r\n\r\n    // assetCurr.assetTypeKey === ASSETS.LIFE_INSURANCE.Key ? true : false;\r\n    let hideOwner = false;\r\n    if(APPLET_EP && this.props.assetCurr.assetTypeKey !== ASSETS.RRSP_RRIF.Key && this.props.assetCurr.assetTypeKey !== ASSETS.TFSA.Key)\r\n        hideOwner = true;\r\n\r\n    const taxT = CONTROLTITLE[language].tax;\r\n    const ownerT = CONTROLTITLE[language].owner;\r\n    const assetTypeIns =\r\n      CONTROLTITLE[language].type &&\r\n      assetCurr.assetTypeKey === ASSETS.LIFE_INSURANCE.Key;\r\n\r\n    let assetTax = MESSAGES[language].assetTax;\r\n\r\n    //const taxCredit=assetCurr.Type === UNLISTED[this.props.language].Assets.Values[ASSET_TaxCredit]\r\n    const taxCredit =\r\n      assetCurr.Type ===\r\n      ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.value[this.props.language];\r\n\r\n    const rrsp = assetCurr.assetTaxTypeKey === ASSET_TAX.REGISTERED.Key; //value[language];\r\n    const showACB = !(\r\n      //assetCurr.Tax === ASSET_TAX.NON_TAXABLE.value[language] ||\r\n      (\r\n        assetCurr.assetTaxTypeKey === ASSET_TAX.NON_TAXABLE.Key || //value[language] ||\r\n        rrsp ||\r\n        assetCurr.assetTypeKey === ASSETS.INTEREST_BEARING.Key || //value[language] ||\r\n        //assetCurr.Tax === ASSET_TAX.CAPITAL_GAINS_ANNUAL.value[language]\r\n        assetCurr.assetTaxTypeKey === ASSET_TAX.CAPITAL_GAINS_ANNUAL.Key\r\n      )\r\n    );\r\n    const showIncome =\r\n      APPLET_INA &&\r\n      assetCurr.assetTaxTypeKey === ASSET_TAX.CAPITAL_GAINS_DEFERRED.Key;\r\n    //assetCurr.Tax === ASSET_TAX.CAPITAL_GAINS_DEFERRED.value[language] ||\r\n    /* (APPLET_EP &&\r\n        (assetCurr.assetTaxTypeKey === ASSET_TAX.CAPITAL_GAINS_DEFERRED.Key ||\r\n        assetCurr.assetTypeKey === ASSETS.OTHER_ASSETS.Key || //value[language] ||\r\n          rrsp)) ||\r\n      (APPLET_INA &&\r\n        rrsp &&\r\n       assetCurr.ownerKey !== ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key); //ASSET_OWNERSHIP.CLIENTLIQUIDATE.value[this.props.language]\r\n     */\r\n\r\n    const showDur = !(\r\n      rrsp ||\r\n      assetCurr.assetTypeKey === ASSETS.PERSONAL_RESIDENCE.Key || //value[language] ||\r\n      assetCurr.assetTypeKey === ASSETS.REAL_ESTATE.Key || //value[language] ||\r\n      taxCredit ||\r\n      ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key\r\n    );\r\n    const showGrowth = !(\r\n      (\r\n        assetCurr.assetTypeKey === ASSETS.LIFE_INSURANCE.Key ||\r\n        assetCurr.assetTypeKey === ASSETS.CASH.Key || //value[language] ||\r\n        taxCredit ||\r\n        assetCurr.ownerKey === ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key\r\n      ) //ASSET_OWNERSHIP.CLIENTLIQUIDATE.value[this.props.language]\r\n    );\r\n\r\n    const showDispose = !(\r\n      rrsp ||\r\n      (APPLET_INA && assetCurr.assetTypeKey === ASSETS.LIFE_INSURANCE.Key) || //value[language] ||\r\n      assetCurr.ownerKey === ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key || //ASSET_OWNERSHIP.CLIENTLIQUIDATE.value[this.props.language]\r\n      taxCredit\r\n    );\r\n\r\n    let showContribution = //APPLET_EP &&\r\n      (APPLET_EP || (APPLET_INA && assetCurr.ownerKey !== ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key)) && //ASSET_OWNERSHIP.CLIENTLIQUIDATE.value[this.props.language]\r\n      (rrsp ||\r\n        assetCurr.assetTypeKey === ASSETS.INTEREST_BEARING.Key || //value[language] ||\r\n        assetCurr.assetTypeKey === ASSETS.STOCKS_BONDS.Key ||\r\n        assetCurr.assetTypeKey === ASSETS.TFSA.Key); //value[language];\r\n    let showWithdrawal =\r\n      (APPLET_EP ||\r\n        (APPLET_INA && assetCurr.withdrawalAmt > 0) ||\r\n        APPLET_INA) &&\r\n      assetCurr.ownerKey !== ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key && //ASSET_OWNERSHIP.CLIENTLIQUIDATE.value[this.props.language]\r\n      (assetCurr.assetTypeKey === ASSETS.INTEREST_BEARING.Key || //value[language] ||\r\n        assetCurr.assetTypeKey === ASSETS.STOCKS_BONDS.Key ||\r\n        rrsp ||\r\n        assetCurr.assetTypeKey === ASSETS.TFSA.Key); //value[language];\r\n\r\n     // if client rollover dont contribute to rrsp ortfsa\r\n    if (\r\n      APPLET_INA &&\r\n      assetCurr.ownerKey === ASSET_OWNERSHIP_ACTION.CLIENT_ROLLOVER.Key &&\r\n      (rrsp || assetCurr.assetTypeKey === ASSETS.TFSA.Key)\r\n    ) {\r\n      showContribution = false;\r\n      showWithdrawal = false;\r\n    }\r\n    \r\n    const showCGE = assetCurr.assetTypeKey === ASSETS.SMALL_BUSINESS_SHARES.Key; //value[language]\r\n    // console.log(this.dataValues);\r\n\r\n    let gridIcons = new Array(this.dataColTitles.length);\r\n    this.dataColTitles.forEach((item) => {\r\n      if (item === COLUMN_TITLES[this.props.language].TaxLiability)\r\n        gridIcons[this.dataColTitles.length - 1] =\r\n          getInfoTaxLiability(language);\r\n    });\r\n\r\n    //const disableDD=(dd.Title === CONTROLTITLE[language].owner && disableOwner)  || (dd.Title === taxT && disableTaxMethods) || (taxCredit && (dd.Title === taxT || dd.Title ===CONTROLTITLE[this.props.language].ownerAction))\r\n    let disableAll = false;\r\n    if (\r\n      this.props.assetCurr.assetTypeKey ===\r\n      ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.Key\r\n    ) {\r\n      disableAll = true;\r\n      this.dataValues.DD[ASSET_DROPDOWN_TYPE].Values.push({\r\n        label: ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.value[this.props.language],\r\n        value: this.dataValues.DD[ASSET_DROPDOWN_TYPE].Values.length + 1,\r\n      });\r\n    }\r\n\r\n    const p =\r\n      this.props.projection[this.props.assetCurr.id - 1] === undefined\r\n        ? null\r\n        : this.props.projection[this.props.assetCurr.id - 1].grid;\r\n\r\n    this.dataValues.DD[0].disableOptionValue[ASSETS.PERSONAL_RESIDENCE.ID] =\r\n      this.props.hasPersonalResidenceAlready; // disable more\r\n\r\n    this.dataValues.DD[2].disableOptionValue[1] =\r\n      (APPLET_EP && this.props.clientsNo === 1) ||\r\n      assetCurr.assetTypeKey === ASSETS.LIFE_INSURANCE.Key;\r\n\r\n    this.dataValues.DD[2].disableOptionValue[3] =\r\n      this.props.assetCurr.assetTypeKey === ASSETS.TFSA.Key ||\r\n      this.props.assetCurr.assetTypeKey === ASSETS.RRSP_RRIF.Key;\r\n\r\n    // single person\r\n    if (APPLET_INA && this.props.clientsNo === 1) {\r\n      this.dataValues.DD[2].disableOptionValue[1] = true;\r\n      this.dataValues.DD[2].disableOptionValue[2] = true;\r\n      this.dataValues.DD[2].disableOptionValue[3] = true;\r\n    }\r\n\r\n    //console.log(this.props.assetCurr.projection, this.props.projection[0].grid);\r\n    if (this.state.loading === true && this.props.disableAddRemove === true) {\r\n      return \"\";\r\n    } else {\r\n      return (\r\n        <div className=\"inputRow\">\r\n          {this.dataValues.DD.map((dd) =>\r\n            dd.id < 4 ? (\r\n              !(hideOwner === true && dd.id === 2) && (\r\n                <DropDown\r\n                  key={dd.id.toString()}\r\n                  id={dd.id}\r\n                  Count={assetsNo}\r\n                  Title={dd.Title}\r\n                  disable={\r\n                    disableAll === true ||\r\n                    (dd.Title === CONTROLTITLE[language].owner &&\r\n                      disableOwner) ||\r\n                    (dd.Title === taxT && disableTaxMethods) ||\r\n                    (taxCredit &&\r\n                      (dd.Title === taxT ||\r\n                        dd.Title ===\r\n                          CONTROLTITLE[this.props.language].ownerAction))\r\n                  }\r\n                  defValue={dd.defValue}\r\n                  unlistedValue={\r\n                    taxCredit\r\n                      ? ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.value[\r\n                          this.props.language\r\n                        ]\r\n                      : \"\"\r\n                  } // TODO ideally find in list of values\r\n                  Values={dd.Values}\r\n                  //info={dd.Title === \"Type\" && id === 1 ? assetTax : \"\"}\r\n                  infoIcon={\r\n                    (dd.Title === ownerT && assetCurr.id === 1\r\n                      ? getInfoIconAssetsOwner(this.props.language)\r\n                      : assetTypeIns\r\n                      ? getInfoIconAssetsIns(this.props.language)\r\n                      : undefined) ||\r\n                    (dd.Title === CONTROLTITLE[language].type &&\r\n                    (this.props.assetCurr.assetTypeKey === ASSETS.TFSA.Key ||\r\n                      this.props.assetCurr.assetTypeKey ===\r\n                        ASSETS.RRSP_RRIF.Key)\r\n                      ? getInfoIconTFSA(this.props.language)\r\n                      : undefined) ||\r\n                    (dd.Title === CONTROLTITLE[language].tax &&\r\n                    this.props.assetCurr.id === 1 &&\r\n                    APPLET_INA\r\n                      ? getInfoIconTaxLiab(this.props.language)\r\n                      : undefined)\r\n                  }\r\n                  language={language}\r\n                  //   disableOption={dd.disableOptionValue}\r\n                  disableOption={\r\n                    dd.id !== 3\r\n                      ? dd.disableOptionValue\r\n                      : taxStocks || taxRS\r\n                      ? this.DDTax.disableOptionValue\r\n                      : dd.disableOptionValue\r\n                  }\r\n                  width={DROPDOWN_WIDE}\r\n                  updateDDown={this.updateDDown}\r\n                />\r\n              )\r\n            ) : (\r\n              <div className=\"dropDown inputDiv\">\r\n                <div className=\"controlTitle\">\r\n                  {CONTROLTITLE[this.props.language].desc}\r\n                </div>\r\n                <input\r\n                  key={dd.id.toString()}\r\n                  id={12}\r\n                  className=\"inputField  textareaAssetName\"\r\n                  value={this.state.description}\r\n                  onClick={this.select}\r\n                  type=\"text\"\r\n                  onChange={(evt) =>\r\n                    this.setState({ description: evt.target.value })\r\n                  }\r\n                  onBlur={(evt) => this.updateDesc(evt)}\r\n                />\r\n\r\n                {/* \r\n              <input\r\n                id={12}\r\n                type=\"text\"\r\n                className=\"inputField  textareaAssetName\"\r\n                onChange={this.updateDesc}\r\n                value={assetCurr.description}\r\n              /> */}\r\n              </div>\r\n            )\r\n          )}\r\n          <InputField\r\n            inputName={\r\n              insurance\r\n                ? CONTROLTITLE[language].FA\r\n                : CONTROLTITLE[language].amount\r\n            }\r\n            id={1}\r\n            format={2}\r\n            Count={assetsNo}\r\n            language={language}\r\n            inputValue={assetCurr.currValue}\r\n            handleUpdateInput={this.handleUpdateInput}\r\n          />\r\n\r\n          {showGrowth && (\r\n            <InputField\r\n              inputName={CONTROLTITLE[language].growth}\r\n              format={3}\r\n              id={5}\r\n              Count={assetsNo}\r\n              language={language}\r\n              inputValue={Math.round(10000 * assetCurr.growth) / 10000}\r\n              inputTitle={id}\r\n              handleUpdateInput={this.handleUpdateInput}\r\n            />\r\n          )}\r\n\r\n          {showDispose && (\r\n            <InputField\r\n              inputName={\r\n                APPLET_INA\r\n                  ? CONTROLTITLE[language].disposeYr\r\n                  : CONTROLTITLE[language].disposeYr\r\n              } //CONTROLTITLE[language].dur}\r\n              id={2}\r\n              //info={MESSAGES[language].infoYr0}\r\n              infoIcon={getInfoIconAssetsYr0(this.props.language)}\r\n              format={1}\r\n              Count={assetsNo}\r\n              language={language}\r\n              inputValue={assetCurr.DisposeYr}\r\n              handleUpdateInput={this.handleUpdateInput}\r\n            />\r\n          )}\r\n          {showDur && (\r\n            <InputField\r\n              inputName={CONTROLTITLE[language].disposeDur}\r\n              id={3}\r\n              format={1}\r\n              Count={assetsNo}\r\n              language={language}\r\n              inputValue={assetCurr.DisposeDur}\r\n              handleUpdateInput={this.handleUpdateInput}\r\n            />\r\n          )}\r\n          {(rrsp) &&  //|| this.props.assetCurr.assetTypeKey === ASSETS.TFSA.Key) &&\r\n            assetCurr.ownerKey !== //ASSET_OWNERSHIP.CLIENTLIQUIDATE.value[this.props.language]\r\n              ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key && (\r\n              <InputField\r\n                inputName={CONTROLTITLE[language].RRIFAge}\r\n                format={1}\r\n                id={11}\r\n                Count={assetsNo}\r\n                infoIcon={getInfoIconSourcesRRIF(this.props.language)}\r\n                language={language}\r\n                inputValue={assetCurr.RRIFStartAge}\r\n                handleUpdateInput={this.handleUpdateInput}\r\n              />\r\n            )}\r\n          {showIncome && (\r\n            <InputField\r\n              inputName={\r\n                rrsp\r\n                  ? CONTROLTITLE[language].RRIFRate\r\n                  : CONTROLTITLE[language].incomeRate\r\n              }\r\n              format={3}\r\n              id={9}\r\n              Count={assetsNo}\r\n              infoIcon={getInfoIconAssetsIncomeRate(this.props.language)}\r\n              language={language}\r\n              inputValue={Math.round(10000 * assetCurr.incomeRate) / 10000}\r\n              handleUpdateInput={this.handleUpdateInput}\r\n            />\r\n          )}\r\n\r\n          {showCGE && (\r\n            <InputField\r\n              inputName={CONTROLTITLE[language].smallBusinessCapGainExemption}\r\n              format={2}\r\n              id={10}\r\n              Count={assetsNo}\r\n              language={language}\r\n              infoIcon={getInfoIconTaxExempt(this.props.language)}\r\n              inputValue={assetCurr.smallBusinessCapGainExemption}\r\n              handleUpdateInput={this.handleUpdateInput}\r\n            />\r\n          )}\r\n          {showACB && (\r\n            <InputField\r\n              inputName={CONTROLTITLE[language].ACB}\r\n              format={2}\r\n              id={4}\r\n              Count={assetsNo}\r\n              language={language}\r\n              inputValue={assetCurr.ACB}\r\n              //{/*readOnly={disableTaxMethods}*/}\r\n\r\n              handleUpdateInput={this.handleUpdateInput}\r\n            />\r\n          )}\r\n\r\n          {showContribution && (\r\n            <div>\r\n              <InputField\r\n                inputName={CONTROLTITLE[language].contributionAmt}\r\n                id={6}\r\n                format={2}\r\n                Count={assetsNo}\r\n                language={language}\r\n                inputValue={assetCurr.contributionAmt}\r\n                infoIcon={getInfoIconDepositWithd(this.props.language)}\r\n                colorDiv={\"green\"}\r\n                handleUpdateInput={this.handleUpdateInput}\r\n              />\r\n              {/* <InputField\r\n              inputName={CONTROLTITLE[language].contributionStartYr}\r\n              id={7}\r\n              format={1}\r\n              //info={MESSAGES[language].infoYr0}\r\n              Count={assetsNo}\r\n              language={language}\r\n              inputValue={assetCurr.contributionStartYr}\r\n              handleUpdateInput={this.handleUpdateInput}\r\n            />  */}\r\n              <InputField\r\n                inputName={CONTROLTITLE[language].contributionDur}\r\n                id={8}\r\n                format={1}\r\n                Count={assetsNo}\r\n                language={language}\r\n                inputValue={assetCurr.contributionDur}\r\n                colorDiv={\"green\"}\r\n                handleUpdateInput={this.handleUpdateInput}\r\n              />\r\n            </div>\r\n          )}\r\n\r\n          {showWithdrawal && (\r\n            <div>\r\n              <InputField\r\n                inputName={CONTROLTITLE[language].withdrawalAmt}\r\n                id={13}\r\n                format={2}\r\n                Count={assetsNo}\r\n                language={language}\r\n                inputValue={assetCurr.withdrawalAmt}\r\n                colorDiv={\"red\"}\r\n                handleUpdateInput={this.handleUpdateInput}\r\n              />\r\n              <InputField\r\n                inputName={CONTROLTITLE[language].withdrawalStartYr}\r\n                id={14}\r\n                format={1}\r\n                //info={MESSAGES[language].infoYr0}\r\n                Count={assetsNo}\r\n                language={language}\r\n                inputValue={assetCurr.withdrawalStartYr}\r\n                minValue={1}\r\n                colorDiv={\"red\"}\r\n                handleUpdateInput={this.handleUpdateInput}\r\n              />\r\n              <InputField\r\n                inputName={CONTROLTITLE[language].withdrawalDur}\r\n                id={15}\r\n                format={1}\r\n                Count={assetsNo}\r\n                language={language}\r\n                inputValue={assetCurr.withdrawalDur}\r\n                colorDiv={\"red\"}\r\n                handleUpdateInput={this.handleUpdateInput}\r\n              />\r\n            </div>\r\n          )}\r\n          {/*  <svg\r\n          className=\"iconMore\"\r\n          onClick={this.handleClickGridButton}\r\n          style={{ top: \"140px\" }}\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          width=\"24\"s\r\n          height=\"24\"\r\n          viewBox=\"0 0 24 24\"\r\n        >\r\n          <path d=\"M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z\" />\r\n        </svg> */}\r\n          {!taxCredit && !disableAll && (\r\n            <GridButton\r\n              className=\"iconMore\"\r\n              handleClickGridButton={this.handleClickGridButton}\r\n              id=\"gridOn\"\r\n              alt=\"ll\"\r\n              src={\r\n                this.state.displaySreadsheet === true\r\n                  ? require(\"../images/gridOff.png\")\r\n                  : require(\"../images/gridOn.png\")\r\n              }\r\n            />\r\n          )}\r\n\r\n          <AddRemove\r\n            currentID={id}\r\n            minComps={0}\r\n            //currentIndex={index}\r\n            id={assetID}\r\n            numberComps={assetsNo}\r\n            disabled={this.props.disableAddRemove}\r\n            handleDoAdd={this.handleDoAdd}\r\n            handleDoRemove={this.handleDoRemove}\r\n          />\r\n          {/* {isMobileDevice() && id < assetsNo ? <hr className=\"ppi2\" /> : \"\"} */}\r\n\r\n          {this.state.displaySreadsheet === true && (\r\n            <div\r\n              id=\"assetGrid\"\r\n              style={{\r\n                clear: \"both\",\r\n                float: \"left\",\r\n              }} /*    onClick={this.clone2}  */\r\n            >\r\n              {p !== null && (\r\n                <ProjectionGrid1 assetProjection={p} lang={language} />\r\n              )}{\" \"}\r\n            </div>\r\n          )}\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n}\r\n","import {\r\n    TITLES,\r\n    ASSETS,\r\n    IMAGE_LOGO,\r\n    IMAGE_LOGO_OTHERPAGES,\r\n    IMAGE_APPLET_EP,\r\n  } from \"../definitions/generalDefinitions\";\r\n  import { OUTPUTTEXT} from \"../definitions/outputDefinitions\";\r\n  import { OUTPUTTEXTEP  } from \"../definitions/outputDefinitionsEP\";\r\n  import { formatMoney, formatMoney2, cleanFormat } from \"../utils/helper\";\r\n  import { getOutputValues } from \"../data/dataExchange\";\r\n  //import {insertGrid} from \"./OutputPDFEP\"\r\n\r\n  import {\r\n    PDF,\r\n    InToPt,\r\n    PxToPt,\r\n    HELVETICA,\r\n    TIMES,\r\n    NORMAL,\r\n    BOLD,\r\n    HEADER_RECT_IN_W,\r\n  } from \"./PDF\";\r\n  import {\r\n    ASSET_TAX_TYPE_PRINCIPAL_RES,\r\n    ASSET_TAX_TYPE_REAL_ESTATE,\r\n    ASSET_TAX_TYPE_STOCKS,\r\n    ASSET_TAX_TYPE_SMALL_BUS,\r\n    ASSET_TAX_TYPE_RRSP,\r\n    ASSET_TAX_TYPE_INTEREST,\r\n    ASSET_TAX_TYPE_OTHER,\r\n    ASSET_TAX_TYPE_COUNT,\r\n  } from \"../definitions/outputDefinitionsEP\";\r\n  \r\n  const DISPLAY_INCOME = 1;\r\n  \r\n  const BULLET_FONT_SIZE = 24;\r\n  const NUMBER_BULLET_FONT_SIZE = 11;\r\n  const GRID_AGGREGATE = 0;\r\n  const GRID_INDIVIDUAL = 1;\r\n  \r\n  const LINES_PER_PAGE_LANDSCAPE = 27;\r\n  const LINES_PER_PAGE_PORTRAIT = 37;\r\n  \r\n\r\n\r\nexport async function doSavePdfINAAppendixAction(props) {\r\n  //  try \r\n  {\r\n        let pdf = new PDF();\r\n        pdf.Create();\r\n    \r\n       // var paragraph;\r\n        let height = 0.2;\r\n        let Widths = [1.2, 0.6, 1.8, 1.4];\r\n        let values;\r\n        const paraWidth = 6;\r\n        const paraLeft = 1.2;\r\n        const lineHeight = 0.196;\r\n        const indent = 0.15;\r\n        let paraY = 1;// 2.2 * lineHeight;\r\n    \r\n        // pdf output shared with presentation\r\n      //  let output = getOutputValues(props);\r\n    \r\n        const lang = props.dataInput.Presentations[0].language;\r\n        const pg1TitleY = 4.2;\r\n    \r\n    //  pdf.Header(OUTPUTTEXT[lang].pg1T);\r\n\r\n// Appendix title\r\n      setFontForTitle(pdf, lang, 16);\r\n      let paragraph = OUTPUTTEXT[lang].pgAppendix + \": \" + OUTPUTTEXT[lang].pgAppendixT;\r\n      insertPara(pdf, paragraph, paraLeft-.4, paraY, paraWidth);\r\n    \r\n      setFontForParas(pdf);\r\n      paragraph = OUTPUTTEXT[lang].pgAppendixP1;\r\n      paraY = paraY + 4 *lineHeight;\r\n    insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n     \r\n    paraY = paraY + 1.5* lineHeight;\r\n     \r\n      const graphWidth=paraWidth+1\r\n      let h= document.getElementById(\"barNeeds\").clientHeight\r\n      let w= document.getElementById(\"barNeeds\").clientWidth\r\n      const maxH=2;\r\n      const maxH2=2.5\r\n      let hFinal=graphWidth*h/w>maxH?maxH:graphWidth*h/w\r\n      let wFinal=graphWidth*h/w>maxH?maxH*w/h:graphWidth\r\n      \r\n      pdf.AddChart(\r\n        \"barNeeds\",\r\n        InToPt(paraLeft-.5),\r\n        InToPt(paraY),\r\n        InToPt(wFinal),\r\n        InToPt(hFinal)\r\n        //InToPt(graphWidth),\r\n        //InToPt(graphWidth*h/w)\r\n      );\r\n      // paraY = paraY + 5*lineHeight;\r\n      \r\n      paraY = paraY + 12* lineHeight;\r\n      paragraph = OUTPUTTEXT[lang].pgAppendixP2;\r\n      insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n      paraY = paraY + 1.5* lineHeight;\r\n     \r\n      h= document.getElementById(\"barShortfall\").clientHeight\r\n      w= document.getElementById(\"barShortfall\").clientWidth\r\n      hFinal=graphWidth*h/w>maxH?maxH:graphWidth*h/w\r\n      wFinal=graphWidth*h/w>maxH?maxH*w/h:graphWidth\r\n      pdf.AddChart(\r\n        \"barShortfall\",\r\n        InToPt(paraLeft-.5),\r\n        InToPt(paraY),\r\n        InToPt(wFinal),\r\n        InToPt(hFinal)\r\n      );\r\n      \r\n      h= document.getElementById(\"pieAssets\").clientHeight\r\n      w= document.getElementById(\"pieAssets\").clientWidth\r\n      hFinal=graphWidth*h/w>maxH2?maxH2:graphWidth*h/w\r\n      wFinal=graphWidth*h/w>maxH2?2*maxH2*w/h:graphWidth/2\r\n      \r\n      paraY = paraY + 13 * lineHeight;\r\n      paragraph = OUTPUTTEXT[lang].pgAppendixP3;\r\n      insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n      paraY = paraY + 1.5* lineHeight;\r\n      pdf.AddChart(\r\n        \"pieAssets\",\r\n        InToPt(paraLeft-1),\r\n        InToPt(paraY),\r\n        /* InToPt(wFinal),\r\n        InToPt(.8*hFinal) */\r\n        InToPt(graphWidth/2),\r\n        InToPt(graphWidth*h/w)\r\n      );\r\n     // paraY = paraY + 10 * lineHeight;\r\n     h= document.getElementById(\"pieLiabs\").clientHeight\r\n     w= document.getElementById(\"pieLiabs\").clientWidth\r\n     hFinal=graphWidth*h/w>maxH2?maxH2:graphWidth*h/w\r\n     wFinal=graphWidth*h/w>maxH2?2*maxH2*w/h:graphWidth/2\r\n      pdf.AddChart(\r\n        \"pieLiabs\",\r\n        InToPt(paraLeft+graphWidth/2-.5),\r\n        InToPt(paraY),\r\n        /* InToPt(wFinal),\r\n        InToPt(.8*hFinal) */\r\n        InToPt(graphWidth/2),\r\n        InToPt(graphWidth*h/w)\r\n      );\r\n\r\n      pdf.Footer(OUTPUTTEXT[lang].pgFooter);\r\n\r\n      const LE = props.LE; //- props.assetProjections[0].grid.dataProjection[1][0];\r\n      const lastRow=props.aggregateGrid.dataProjection[0].length\r\n      paragraph = OUTPUTTEXT[lang].pgAppendix + \": \" + OUTPUTTEXT[lang].pgAppendixT;\r\n    /* \r\n      insertGrid2(\r\n        pdf,\r\n        props.aggregateGrid,\r\n        LE,\r\n        paraLeft - 0.2,\r\n        1.65 * paraWidth,\r\n        lang,\r\n        true,\r\n        \"landscape\",\r\n        0,\r\n        GRID_AGGREGATE,\r\n        lastRow\r\n      ); */\r\n      insertGrid(\r\n        pdf,\r\n        props.aggregateGrid,\r\n        LE,\r\n        paraLeft - 0.2,\r\n        1.65 * paraWidth,\r\n        lang,\r\n        true,\r\n        \"landscape\",\r\n        0,\r\n        lastRow,        \r\n        GRID_AGGREGATE,\r\n        .65,\r\n        paragraph, \"\", \"\", \"\", OUTPUTTEXT[lang].pgFooter\r\n      )  \r\n\r\n      // if too long add another page\r\n      if (\r\n        lastRow > LINES_PER_PAGE_LANDSCAPE &&\r\n        lastRow < 2 * LINES_PER_PAGE_LANDSCAPE\r\n      )\r\n        insertGrid(\r\n          pdf,\r\n          props.aggregateGrid,\r\n          LE,\r\n          paraLeft - 0.2,\r\n          1.65 * paraWidth,\r\n          lang,\r\n          true,\r\n          \"landscape\",\r\n          LINES_PER_PAGE_LANDSCAPE,\r\n          lastRow,\r\n          GRID_AGGREGATE,.65,\r\n          paragraph, \"\", \"\", \"\", OUTPUTTEXT[lang].pgFooter\r\n          );\r\n      else if (lastRow > 2 * LINES_PER_PAGE_LANDSCAPE) {\r\n        insertGrid(\r\n          pdf,\r\n          props.aggregateGrid,\r\n          LE,\r\n          paraLeft - 0.2,\r\n          1.65 * paraWidth,\r\n          lang,\r\n          true,\r\n          \"landscape\",\r\n          LINES_PER_PAGE_LANDSCAPE,\r\n          lastRow,  \r\n          GRID_AGGREGATE,.65,\r\n          paragraph, \"\", \"\", \"\", OUTPUTTEXT[lang].pgFooter\r\n        );\r\n        insertGrid(\r\n          pdf,\r\n          props.aggregateGrid,\r\n          LE,\r\n          paraLeft - 0.2,\r\n          1.65 * paraWidth,\r\n          lang,\r\n          true,\r\n          \"landscape\",\r\n          2 * LINES_PER_PAGE_LANDSCAPE,\r\n          lastRow,  \r\n          GRID_AGGREGATE,.65,\r\n          paragraph, \"\", \"\", \"\", OUTPUTTEXT[lang].pgFooter\r\n        );\r\n      }\r\n\r\n      pdf.Footer(OUTPUTTEXT[lang].pgFooter);\r\n    \r\n          /*/*-Appendix\t\tgrids // Page 8*/\r\n    \r\n          // add a landscape page for aggregate grid\r\n    \r\n/*           const LE = props.LE; //- props.assetProjections[0].grid.dataProjection[1][0];\r\n          insertGrid2(\r\n            pdf,\r\n            props.aggregateGrid,\r\n            LE,\r\n            paraLeft - 0.2,\r\n            1.65 * paraWidth,\r\n            lang,\r\n            true,\r\n            \"landscape\",\r\n            0,\r\n            GRID_AGGREGATE\r\n          );\r\n          // if too long add another page\r\n          if (\r\n            LE + 3 > LINES_PER_PAGE_LANDSCAPE &&\r\n            LE + 3 < 2 * LINES_PER_PAGE_LANDSCAPE\r\n          )\r\n            insertGrid2(\r\n              pdf,\r\n              props.aggregateGrid,\r\n              LE,\r\n              paraLeft - 0.2,\r\n              1.65 * paraWidth,\r\n              lang,\r\n              true,\r\n              \"landscape\",\r\n              LINES_PER_PAGE_LANDSCAPE,\r\n              GRID_AGGREGATE\r\n            );\r\n          else if (LE + 3 > 2 * LINES_PER_PAGE_LANDSCAPE) {\r\n            insertGrid2(\r\n              pdf,\r\n              props.aggregateGrid,\r\n              LE,\r\n              paraLeft - 0.2,\r\n              1.65 * paraWidth,\r\n              lang,\r\n              true,\r\n              \"landscape\",\r\n              LINES_PER_PAGE_LANDSCAPE,\r\n              GRID_AGGREGATE\r\n            );\r\n            insertGrid2(\r\n              pdf,\r\n              props.aggregateGrid,\r\n              LE,\r\n              paraLeft - 0.2,\r\n              1.65 * paraWidth,\r\n              lang,\r\n              true,\r\n              \"landscape\",\r\n              2 * LINES_PER_PAGE_LANDSCAPE,\r\n              GRID_AGGREGATE\r\n            );\r\n          }\r\n          for (let j = 0; j < props.assetProjections.length; ++j)\r\n            insertGrid2(\r\n              pdf,\r\n              props.assetProjections[j].grid,\r\n              LE,\r\n              paraLeft,\r\n              paraWidth,\r\n              lang,\r\n              true,\r\n              \"portrait\",\r\n              0,\r\n              GRID_INDIVIDUAL\r\n            );\r\n    \r\n          //end ofPage 8\r\n          pdf.addFooterAndHeader(headerOffset, footerText, headerText);\r\n    \r\n          //-Using Life Insurance to Preserve Your Estate\t\t// Page 6\r\n          // logo if asked for\r\n          //    pdf.addCustomImage(\"EPOtherPagesLogo\", pg1TitleY, image);\r\n          result =\r\n            result &&\r\n            pdf.addCustomImage(IMAGE_LOGO_OTHERPAGES, pg1TitleY, image, false, top);\r\n    \r\n          paraY = 8 * lineHeight;\r\n          setFontForTitle(pdf, lang);\r\n          pdf.Text(OUTPUTTEXTEP[lang].pg9T, InToPt(paraLeft), InToPt(paraY));\r\n          setFontForParas(pdf);\r\n    \r\n          paraY = paraY + 2 * lineHeight;\r\n          insertPara(pdf, OUTPUTTEXTEP[lang].pg9P1, paraLeft, paraY, paraWidth);\r\n          paraY = paraY + (lang === \"fr\" ? 7 : 6) * lineHeight;\r\n          insertPara(pdf, OUTPUTTEXTEP[lang].pg9P2, paraLeft, paraY, paraWidth);\r\n    \r\n          //pdf.Footer(OUTPUTTEXTEP[lang].pgFooter);\r\n          // pdf.showOnPage();\r\n*/\r\n          var data = pdf.showOnPage();\r\n    \r\n//        // Done\r\n          pdf.Save(\"INA_Appendix_PDF.pdf\");\r\n          return data;\r\n        }\r\n    \r\n  \r\n}\r\n\r\n    function setFontForTitle(pdf, lang, size) {\r\n      pdf.SetFont(HELVETICA, NORMAL);\r\n      if (size === undefined) {\r\n        if (lang === \"en\") pdf.SetFontSize(PxToPt(25));\r\n        else pdf.SetFontSize(PxToPt(20));\r\n      } else {\r\n        pdf.SetFont(HELVETICA, BOLD);\r\n        if (lang === \"en\") pdf.SetFontSize(PxToPt(size));\r\n        else pdf.SetFontSize(PxToPt(size - 1));\r\n      }\r\n    \r\n      pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    }\r\n    \r\n    function addNote(pdf, para, left, paraY, paraWidth) {\r\n      setFontForParas(pdf);\r\n      pdf.SetTextColor(150, 150, 150);\r\n      pdf.SetFontSize(PxToPt(12));\r\n      insertPara(pdf, para, left, paraY, paraWidth);\r\n      setFontForParas(pdf);\r\n    }\r\n    \r\n    function setFontForParas(pdf) {\r\n      pdf.SetFont(TIMES, NORMAL);\r\n      pdf.SetFontSize(PxToPt(16));\r\n      pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    }\r\n    \r\n    function insertBullet(pdf, bullet, left, y, size) {\r\n      pdf.SetTextColor(115, 153, 198);\r\n      pdf.SetFontSize(PxToPt(size));\r\n      pdf.SetFont(TIMES, BOLD);\r\n      pdf.Text(\r\n        bullet,\r\n        InToPt(left + (size === BULLET_FONT_SIZE ? 0.02 : 0)),\r\n        InToPt(y - (size === BULLET_FONT_SIZE ? 0.03 : 0))\r\n      );\r\n      pdf.SetFont(TIMES, NORMAL);\r\n      pdf.SetFontSize(PxToPt(16));\r\n      pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    }\r\n    \r\n    function insertPara(pdf, para, left, paraY, paraWidth) {\r\n      pdf.MultilineText(para, InToPt(left), InToPt(paraY), InToPt(paraWidth));\r\n    }\r\n    \r\n    function insertTableTitle(\r\n      pdf,\r\n      paraLeft,\r\n      paraY,\r\n      values,\r\n      height,\r\n      paraWidths,\r\n      fillColor\r\n    ) {\r\n      pdf.SetFontSize(PxToPt(12));\r\n      const fill = fillColor === undefined ? [115, 153, 198] : fillColor;\r\n      const textColor = [255, 255, 255];\r\n      pdf.SetFont(TIMES, BOLD);\r\n      const h = pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        paraLeft,\r\n        paraY,\r\n        values,\r\n        height,\r\n        paraWidths,\r\n        false,\r\n        false,\r\n        true\r\n      );\r\n      return h;\r\n    }\r\n    \r\n    function insertTableRow(\r\n      pdf,\r\n      paraLeft,\r\n      paraY,\r\n      values,\r\n      height,\r\n      paraWidths,\r\n      bold,\r\n      fillColor,\r\n      align\r\n    ) {\r\n      pdf.SetTextColor(0x45, 0x55, 0x60);\r\n      const fill = fillColor === undefined ? [249, 249, 249] : fillColor;\r\n      const textColor = [0x45, 0x55, 0x60];\r\n      pdf.SetFont(TIMES, bold ? BOLD : NORMAL);\r\n      pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        paraLeft,\r\n        paraY,\r\n        values,\r\n        height,\r\n        paraWidths,\r\n        true,\r\n        align\r\n      );\r\n    }\r\n    /* function insertTableRowBold(pdf, paraLeft, paraY, values, height, paraWidths,align) {\r\n      pdf.SetTextColor(0x45, 0x55, 0x60);\r\n      const fill = [235, 235, 235];\r\n      const textColor = [0x45, 0x55, 0x60];\r\n      pdf.SetFont(TIMES, BOLD);\r\n      pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        paraLeft,\r\n        paraY,\r\n        values,\r\n        height,\r\n        paraWidths,\r\n        true,\r\n        align\r\n      );\r\n    }\r\n     */\r\n    \r\n    /* function pdf.addCustomImage( id,pg1TitleY,image,firstPage){\r\n     \r\n    pdf.AddImageFitWidthOnly(\r\n      id,\r\n      InToPt(pg1TitleY - 3 + image.left*HEADER_RECT_IN_W/100), //1.51),\r\n      InToPt(firstPage?1.06:.29),\r\n      InToPt(6.04*image.size/100),\r\n      InToPt(firstPage?2.76:.38) // max height\r\n    );\r\n    } */\r\n\r\n\r\n    \r\n\r\nexport function insertGrid (\r\n  pdf,\r\n  grid,\r\n  LE,\r\n  paraLeft,\r\n  paraWidth,\r\n  lang,\r\n  wrappedTitleBar,\r\n  orientation,\r\n  startYr,\r\n  lastRow,\r\n  mode,\r\n  titleY,\r\n  title1,title2,para1,para2,pgFooter\r\n){\r\n  let i;\r\n  let j;\r\n  let cols = grid.dataColTitles.length;\r\n  const height = 0.2;\r\n  let paraY =titleY;// 2.2 * height;\r\n  let max =\r\n    orientation === \"landscape\"\r\n      ? startYr === 0\r\n        ? LINES_PER_PAGE_LANDSCAPE\r\n        : 2 * LINES_PER_PAGE_LANDSCAPE\r\n      : LINES_PER_PAGE_PORTRAIT;\r\n  const decimalChar = lang === \"en\" ? \".\" : \",\";\r\n  const thousands = lang === \"en\" ? \",\" : \" \";\r\n // const formatFr = lang === \"fr\" ? true : false;\r\n  let Widths = [];\r\n\r\n  pdf.AddPage(orientation);\r\n\r\n  // Appendix title\r\n  setFontForTitle(pdf, lang, 16);\r\n  let paragraph = title1 + \": \" + para1;\r\n  insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n  // Appendix para\r\n  setFontForParas(pdf);\r\n  paraY = paraY + 1.6 * height;\r\n  paragraph =\r\n    (mode === GRID_AGGREGATE\r\n      ? title2\r\n      : para2) +\r\n    (mode === GRID_AGGREGATE ? (startYr === 0 ? \"\" : \"\") : \"\");\r\n  insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n  paraY = paraY + 0.5 * height;\r\n\r\n  // grid name and title\r\n  // grid col widths\r\n  Widths.push(paraWidth / (cols + 5)); // year\r\n  Widths.push(paraWidth / (cols + 5)); // age\r\n  for (i = 2; i < cols; ++i) {\r\n    Widths.push((paraWidth - (2 * paraWidth) / (cols + 4)) / (cols - 2));\r\n  }\r\n\r\n  // max of 8 columns in portrait\r\n  let totalGridWidth = paraWidth;\r\n  if (mode === GRID_INDIVIDUAL) totalGridWidth = (cols * paraWidth) / 8;\r\n\r\n  let values = grid.dataColTitles;\r\n  let goodWidth = [];\r\n  let totalGoodWidth = 0;\r\n  for (i = 0; i < cols; ++i) {\r\n    goodWidth.push(pdf.textWidth(values[i]));\r\n    totalGoodWidth += goodWidth[i];\r\n  }\r\n  // aportion grid title\r\n  for (i = 0; i < cols; ++i) {\r\n    Widths[i] = goodWidth[i] + 0.15;\r\n  }\r\n  let widthTotal = 0;\r\n  for (i = 2; i < cols; ++i) widthTotal += Widths[i];\r\n\r\n  // now check multilines\r\n  let goodWidthMultiLine = [];\r\n  let totalGoodWidthMultiLine = 0;\r\n\r\n  let addMore =\r\n    (totalGridWidth - widthTotal - Widths[0] - Widths[1]) / (cols - 2);\r\n  if (mode === GRID_INDIVIDUAL) {\r\n    for (i = 2; i < cols; ++i) Widths[i] += addMore;\r\n  } else if (mode === GRID_AGGREGATE) {\r\n    addMore =\r\n      (totalGridWidth - widthTotal - Widths[0] - Widths[1]) / (cols - 3);\r\n    for (i = 2; i < cols; ++i) if (i !== 4) Widths[i] += addMore;\r\n  }\r\n\r\n  for (i = 0; i < cols; ++i) {\r\n    goodWidthMultiLine.push(pdf.textWidthMultiLine(values[i], Widths[i]));\r\n    totalGoodWidthMultiLine += goodWidthMultiLine[i];\r\n  }\r\n  // aportion grid title\r\n\r\n  /*  for (i = 0; i < cols; ++i)\r\n  if(Widths[i]<.9*goodWidthMultiLine[i])\r\n      Widths[i]=goodWidthMultiLine[i]/.9\r\n*/\r\n  //for (i = 0; i < cols; ++i)\r\n  //console.log(values[i],goodWidth[i],goodWidthMultiLine[i],Widths[i])\r\n  // for (i = 0; i < cols; ++i)\r\n  //  Widths[i]=goodWidthMultiLine[i]/.9*totalGridWidth/totalGoodWidthMultiLine\r\n\r\n  // if(mode===GRID_AGGREGATE)\r\n  {\r\n    paraY = paraY + 0.8 * height;\r\n    paragraph = grid.gridTitle;\r\n    pdf.SetFontSize(PxToPt(12));\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n    paraY = paraY + 0.4 * height;\r\n  }\r\n\r\n  // headers\r\n  //console.log(values)\r\n  const height2 = insertTableTitle(\r\n    pdf,\r\n    paraLeft,\r\n    paraY,\r\n    values,\r\n    height,\r\n    Widths,\r\n    [51, 77, 124]\r\n  );\r\n\r\n  // grid rows\r\n  let rows = startYr;\r\n  let fillColor;\r\n  if (wrappedTitleBar) paraY = paraY + height2;\r\n  // 40 rows per page\r\n  while (rows < lastRow) {\r\n    //grid.dataProjection[0].length) {\r\n\r\n    if (\r\n      rows === max &&\r\n      ((startYr === 0 && lastRow - rows > 6) ||\r\n        (startYr === LINES_PER_PAGE_LANDSCAPE &&\r\n          lastRow + LINES_PER_PAGE_LANDSCAPE - rows > 6))\r\n    ) {\r\n      if (mode === GRID_AGGREGATE) {\r\n        insertPara(\r\n          pdf,\r\n          \"\",\r\n          paraLeft,\r\n          paraY + (3 * height) / 2 + 0.1,\r\n          paraWidth\r\n        );\r\n        pdf.FooterLandscape(pgFooter);\r\n        return rows;\r\n      }\r\n\r\n      rows = lastRow - 6;\r\n      paraY = paraY + height;\r\n      pdf.SetFont(TIMES, BOLD);\r\n      insertPara(pdf, \"......\", paraLeft, paraY + height / 2, paraWidth);\r\n      pdf.SetFont(TIMES, NORMAL);\r\n    }\r\n    values = [];\r\n\r\n    let align = [];\r\n    for (i = 0; i < cols; ++i) {\r\n      //if(i===0) console.log(grid.dataProjection[i][rows])\r\n      values.push(\r\n        (i === 0 && rows === 0) || i === 1\r\n          ? String(grid.dataProjection[i][rows])\r\n          :(i === 11?\r\n          parseFloat(grid.dataProjection[i][rows], lang).toString()\r\n          : formatMoney(\r\n              parseFloat(cleanFormat(grid.dataProjection[i][rows], lang)),\r\n              0,\r\n              decimalChar,\r\n              thousands\r\n            ).toString())\r\n      );\r\n      align.push(2);\r\n    }\r\n    paraY = paraY + height;\r\n    fillColor = rows % 2 ? [249, 249, 249] : [228, 229, 230];\r\n    if (rows == LE) {\r\n      fillColor = [208, 215, 230];\r\n      insertPara(\r\n        pdf,\r\n        lang === \"en\" ? \"LE\" : \"EV\",\r\n        paraLeft + totalGridWidth + 0.15,\r\n        paraY + height / 2 + 0.01,\r\n        paraWidth\r\n      );\r\n    }\r\n    //console.log(values)\r\n    insertTableRow(\r\n      pdf,\r\n      paraLeft,\r\n      paraY,\r\n      values,\r\n      height,\r\n      Widths,\r\n      false,\r\n      fillColor,\r\n      align\r\n    );\r\n\r\n    rows++;\r\n  }\r\n\r\n  if (orientation === \"landscape\")\r\n    pdf.FooterLandscape(pgFooter);\r\n  else pdf.Footer(pgFooter);\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Pie, Bar, Line } from \"react-chartjs-2\";\r\n//import \"./Output.css\";\r\nimport \"./Output.css\";\r\nimport {\r\n  getAssetsCategoryTotal,\r\n  getLiabsCategoryTotal,\r\n  cleanFormat, formatMoney,\r\n  familyProjectionYears,\r\n  getInsNeedLine,\r\n  isSingleFamily,\r\n} from \"../utils/helper\";\r\nimport {\r\n  ASSETS,\r\n  LIABILITIES,\r\n  CONTROLTITLE,\r\n  DISPLAY_RETIREMENT,\r\nDISPLAY_LIFEEXP,\r\nDISPLAY_ENDAGE,\r\nDISPLAY_LIFEEXP_PLUS_3\r\n} from \"../definitions/generalDefinitions\";\r\nimport {GRAPHS_LABLES \r\n} from \"../definitions/outputDefinitions\";\r\nimport {\r\n  getInfoINA,\r\n} from \"../definitions/infoIconsDefinitions\";\r\nimport { Info } from \"./Info\";\r\nimport { doSavePdfINAAppendixAction } from \"./OutputPDFINAAppendix\";\r\nimport { versionDetails } from \"../utils/helper\";\r\n\r\nexport class OutputGraphs extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n\r\n\r\n  doPDF = () => {\r\n    doSavePdfINAAppendixAction(this.props);\r\n  };\r\n  \r\n\r\n  render() {\r\n    //if (this.props.dataCashFlowGov !== undefined)\r\n    const lang=this.props.dataInput.Presentations[0].language\r\n    const negNeed = this.props.dataCashFlowNeeds.map(x => -x);\r\n\r\n  const mobile=  ( window.innerWidth <= 840 ) && ( window.innerHeight <= 840 );\r\n // console.log(window.innerWidth, window.innerHeight)\r\n    const maxYScale =\r\n      10000 *\r\n      Math.ceil(\r\n        1 +\r\n          Math.max(\r\n            Math.max(...this.props.dataCashFlowGov),\r\n            Math.max(...this.props.dataCashFlowNeeds),\r\n            Math.max(...this.props.dataShortfall),\r\n            Math.max(...this.props.dataCashFlowPersonal)\r\n          ) /\r\n            10000\r\n      );\r\n    //\tconst negNeedMax = negNeed.map(x => -maxYScale*1.05);\r\n    //\tnegNeedMax.push(- maxYScale * 1.05);\r\n    //\tnegNeedMax.push(- maxYScale * 1.05)\r\n \r\n    const options = {\r\n      responsive: true,\r\n      maintainAspectRatio: false,\r\n      legend: {\r\n        display: true,\r\n        labels: {\r\n          fontColor: \"#333\",\r\n          fontSize: mobile?10:14//16\r\n        }\r\n      },\r\n      scales: {\r\n        xAxes: [\r\n          {\r\n            stacked: true,\r\n            ticks: {\r\n              fontSize:  mobile?10:14,\r\n              beginAtZero: true\r\n            }\r\n          }\r\n        ],\r\n        yAxes: [\r\n          {\r\n            stacked: true,\r\n            ticks: {\r\n              fontSize:  mobile?10:14,\r\n              beginAtZero: true,\r\n                beginAtZero: true,\r\n                steps: 10,\r\n                stepValue: 5,\r\n                max: maxYScale,\r\n    callback: function (value, index, values) {\r\n                  let result =\r\n                    value < 1000 && value > -1000\r\n                      ? value\r\n                      : lang === \"en\"\r\n                      ? Intl.NumberFormat().format(value / 1000) + \"K\"\r\n                      : (Intl.NumberFormat().format(value / 1000) + \"K\").replace(\r\n                          \",\",\r\n                          \" \"\r\n                        );\r\n                  return result;\r\n                },\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    };\r\n    const labelsBilingual=GRAPHS_LABLES[lang]\r\n    const decimalChar = lang === \"en\" ? \".\" : \",\"\r\n    const thousands = lang === \"en\" ? \",\" : \" \"\r\n    const formatFr=lang===\"fr\"? true:false\r\n    \r\n    const clients=this.props.dataInput.Clients\r\n    const singleFamily = isSingleFamily(clients);\r\n    const PDFTopMargin=singleFamily?0:-37  \r\n\r\n    const data = {\r\n      labels: this.props.dataNAAges,\r\n      datasets: [\r\n        {\r\n          label: labelsBilingual.persCF,\r\n          data: this.props.dataCashFlowPersonal,\r\n          fill: false,\r\n          borderColor: \"LightSteelBlue\", // Line color\r\n          backgroundColor: \"LightSteelBlue\"\r\n        },\r\n        {\r\n          label:\r\n          labelsBilingual.govCF,\r\n          data: this.props.dataCashFlowGov,\r\n          fill: false, // Don't fill area under the line\r\n          borderColor: \"#FAD7A0\", // Line color\r\n          backgroundColor: \"#FAD7A0\"\r\n        },\r\n        {\r\n          label:\r\n          labelsBilingual.incomeNeeds,\r\n          data: negNeed,\r\n          fill: false, // Don't fill area under the line\r\n          borderColor: \"#2B3856\", // Line color\r\n          backgroundColor: \"#2B3856\"\r\n        }\r\n        \r\n      ]\r\n    };\r\n\r\n    var dataFutureINA = [];\r\n    let i;\r\n    let j;\r\n    var pv;\r\n    var totalLiab = 0;\r\n    for (i = 0; i < this.props.dataInput.Liabilitys.length; i++) {\r\n      totalLiab += this.props.dataInput.Liabilitys[i].currValue;\r\n    }\r\n\r\n    let shortfallNeg=[]\r\n     \r\n    for (i = 0; i < this.props.dataShortfall.length; ++i) {\r\n      shortfallNeg.push(-this.props.dataShortfall[i])\r\n      pv = 0;\r\n      for (j = i; j < this.props.dataShortfall.length; ++j)\r\n        pv += this.props.dataShortfall[j] / Math.pow(1.03, j - i);\r\n\r\n      if (i > 0 && i < 20) pv += totalLiab * Math.pow(1.02, i);\r\n      dataFutureINA.push(pv);\r\n    }\r\n    // console.log(totalLiab, dataFutureINA);\r\n\r\n/*     let dataPositiveShortfall = [];\r\n    for (j = 0; j < this.props.dataShortfall.length; ++j)\r\n        dataPositiveShortfall[j]= this.props.dataShortfall[j]>0?this.props.dataShortfall[j]:0;\r\n     \r\n\r\n\r\n\r\n */   \r\n      \r\n      const dataShortfall = {\r\n      labels: this.props.dataNAAges, // [39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84],\r\n      datasets: [\r\n        {\r\n          label: labelsBilingual.shortfall,\r\n          data: shortfallNeg,//this.props.dataShortfall,\r\n          //[10964, 13734, 14008, 14288, 14574, 14866, 15163, 15466, 15776, 16091, 16413, 16741, 17076, 17417, 17766, 18121, 18484, 18853, 19230, 19615, 20007, 20407, 20815, 21232, 21656, 22090, 27632, 28184, 28748, 29323, 29910, 30508, 31118, 31740, 32375, 33023, 33683, 34357, 35044, 35745, 36460, 37189, 37933, 38691, 39465, 40254],\r\n          fill: false, // Don't fill area under the line\r\n          borderColor: \"darkred\", // Line color\r\n          backgroundColor: \"darkred\"\r\n        }\r\n      ]\r\n    };\r\n\r\n    var optionsPie = {\r\n      responsive: true,\r\n      title: {\r\n        display: true,\r\n        position: \"top\",\r\n        text: labelsBilingual.assetsBrk,//\"Assets Breakdown Today\",\r\n        fontSize:  mobile?10:14,//8,\r\n        fontColor: \"#111\"\r\n      },\r\n      legend: {\r\n        display: true,\r\n        position: \"right\",\r\n        labels: {\r\n          fontColor: \"#333\",\r\n          fontSize: mobile?10:12//16\r\n        }\r\n      }\r\n    };\r\n     \r\n    let optionsPieLiabs = JSON.parse(JSON.stringify(optionsPie));\r\n\r\n    \r\n    optionsPieLiabs.title.text= labelsBilingual.liabsBrk//\"Liabilities Breakdown\" \r\n     \r\n    const dataPieAssets = {\r\n      labels: [\r\n        labelsBilingual.cashLike,labelsBilingual.RRSP,labelsBilingual.shares,labelsBilingual.realEstate,labelsBilingual.otherAssets\r\n      ],\r\n      datasets: [\r\n        {\r\n             data: [\r\n            getAssetsCategoryTotal(this.props.dataInput,ASSETS.CASH.Key)+\r\n            getAssetsCategoryTotal(this.props.dataInput,ASSETS.LIFE_INSURANCE.Key)+\r\n            getAssetsCategoryTotal(this.props.dataInput,ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.Key)\r\n            +getAssetsCategoryTotal(this.props.dataInput,ASSETS.TFSA.Key)\r\n            , \r\n            getAssetsCategoryTotal(this.props.dataInput,ASSETS.RRSP_RRIF.Key), \r\n            getAssetsCategoryTotal(this.props.dataInput,ASSETS.SMALL_BUSINESS_SHARES.Key)+\r\n            getAssetsCategoryTotal(this.props.dataInput,ASSETS.STOCKS_BONDS.Key),\r\n            getAssetsCategoryTotal(this.props.dataInput,ASSETS.REAL_ESTATE.Key)+\r\n            getAssetsCategoryTotal(this.props.dataInput,ASSETS.PERSONAL_RESIDENCE.Key),\r\n            getAssetsCategoryTotal(this.props.dataInput,ASSETS.OTHER_ASSETS.Key)\r\n          ],\r\n          backgroundColor: [\"#F7464A\", \"#46BFBD\", \"#FDB45C\", \"#949FB1\", \"#4D5360\"]\r\n        }\r\n      ]\r\n    }\r\n\r\n    const dataPieLiabs = {\r\n      labels: [\r\n        labelsBilingual.loans, labelsBilingual.taxes, labelsBilingual.emergency, labelsBilingual.otherLiabs,labelsBilingual.atDeath\r\n        \r\n      ],\r\n      datasets: [\r\n        {\r\n             data: [\r\n            getLiabsCategoryTotal(this.props.dataInput,LIABILITIES.OUTSTANDING_LOANS.Key)+\r\n            getLiabsCategoryTotal(this.props.dataInput,LIABILITIES.MORTGAGE_REDEMPTION.Key)+\r\n            getLiabsCategoryTotal(this.props.dataInput,LIABILITIES.CREDIT_CARDS.Key)+\r\n            getLiabsCategoryTotal(this.props.dataInput,LIABILITIES.CLIENT_TAX_LIABILITY.Key)\r\n            , \r\n            getLiabsCategoryTotal(this.props.dataInput,LIABILITIES.INCOME_TAXES.Key), \r\n            getLiabsCategoryTotal(this.props.dataInput,LIABILITIES.EMERGENCY_FUND.Key),\r\n            getLiabsCategoryTotal(this.props.dataInput,LIABILITIES.OTHER.Key)+\r\n            getLiabsCategoryTotal(this.props.dataInput,LIABILITIES.CHILD_HOME_CARE.Key),\r\n            getLiabsCategoryTotal(this.props.dataInput,LIABILITIES.LAST_EXPENSES.Key)+\r\n        getLiabsCategoryTotal(this.props.dataInput,LIABILITIES.LEGAL_AND_EXECUTOR_FEES.Key)+\r\n        getLiabsCategoryTotal(this.props.dataInput,LIABILITIES.LEGACY_FOR_CHILDREN.Key)+\r\n        getLiabsCategoryTotal(this.props.dataInput,LIABILITIES.CHARITABLE_GIFTS.Key)+\r\n        getLiabsCategoryTotal(this.props.dataInput,LIABILITIES.PROBATE.Key)\r\n          ],\r\n          backgroundColor: [\"#F7464A\", \"#46BFBD\", \"#FDB45C\", \"#949FB1\", \"#4D5360\"]\r\n        }\r\n      ]\r\n    }\r\n/* \r\n    let needToE =\r\n      this.props.periodOption === 0 ? labels.insNeedsRet: labels.insNeedsRetLE\r\n      /*   ? \"Insurance Needs to retirement (age \"\r\n        : \"Insurance Needs to life expectancy (age \";\r\n    let needToF =\r\n      this.props.periodOption === 0\r\n        ? \"Besoins en assurance jusqu' la retraite(ge \"\r\n        : \"Besoins en assurance jusqu' l'esprance de vie (ge \"; \r\n    let needTo = lang === \"en\" ? needToE : needToF;\r\n */\r\n    /* let needTo =\r\n      this.props.periodOption ===DISPLAY_RETIREMENT ? labelsBilingual.insNeedsRet: (this.props.periodOption === DISPLAY_ENDAGE?labelsBilingual.insNeeds100:labelsBilingual.insNeedsRetLE)\r\n    if(this.props.periodOption !== DISPLAY_ENDAGE)\r\n      needTo += +this.props.projectEnd + \")\";\r\n */\r\n/* \r\n      const clients=this.props.dataInput.Clients\r\n      const projYears = familyProjectionYears(\r\n        clients,\r\n        this.props.dataInput.Presentations[0].periodOption,\r\n        this.props.LE,\r\n        this.props.LE\r\n      );\r\n      //const projectEnd = projYears.projectionEnd;\r\n      const protectionPeriod = projYears.noProjectionYrs;\r\n     // const minAge = projYears.survivorAge;\r\n      const singleFamily = isSingleFamily(clients);\r\n      const noSurvivor = clients.length===1;  \r\n      const insNeedLine= getInsNeedLine(this.props.dataInput.Presentations[0], this.props.projectEnd, lang,noSurvivor,singleFamily,protectionPeriod)\r\n     */const needTo=this.props.insNeedLine\r\n\r\n    \r\n/*     const assetsPie= this.props.dataInput.Assets.length>0 &&\r\n    <article className=\"canvas-container\" style={{height: \"450px\" }}>\r\n     <div style={{overflow:'hidden', float: 'left', width: '50%',height: \"400px\" }}><Pie data={dataPieAssets} options={optionsPie} /></div>\r\n    </article>\r\n */\r\n\r\nconst assetsPie= this.props.dataInput.Assets.length>0 &&\r\n    <article id=\"pieAssets\" \r\n\r\n/* style={{ position: \"relative\", left: \"20px\", height: \"400px\"}} */\r\n>\r\n\r\n<div className=\"INAPie\">\r\n<Pie  data={dataPieAssets} options={optionsPie}  />\r\n</div>\r\n</article>\r\n\r\n\r\n/* \r\nconst liabsPie= this.props.dataInput.Liabilitys.length>0 &&\r\n   <article className=\"canvas-container\" style={{height: \"450px\" }}>\r\n   <div style={{overflow:'hidden', float: 'left', width: '50%',height: \"400px\" }}><Pie data={dataPieLiabs} options={optionsPieLiabs} /></div>\r\n </article>\r\n */\r\nconst liabsPie= this.props.dataInput.Liabilitys.length>0 &&\r\n    <article   id=\"pieLiabs\" \r\n/* style={{ position: \"relative\", height: \"400px\"}} */\r\n>\r\n\r\n<div className=\"INAPie\">\r\n<Pie data={dataPieLiabs} options={optionsPieLiabs} />\r\n</div>\r\n</article>\r\n\r\nconst singlePerson = this.props.dataInput.Clients.length === 1 ? true : false;\r\nconst noSurvivor = singlePerson && versionDetails().versionNumeric<=10014\r\n\r\nif (noSurvivor) {\r\n  return (\r\n    <div>\r\n      <h3 className=\"ppi1\">{needTo}</h3>\r\n    </div>\r\n  );\r\n}else {\r\n    return (\r\n      <div>\r\n        \r\n        <div style={{ width: \"100%\", float: \"left\", clear: \"left\" }}>\r\n            \r\n            <input\r\n              className=\"roundedCornerCmd\"\r\n              style={{\r\n             //   width: \"80px\",\r\n                marginTop: PDFTopMargin +\"px\",\r\n                marginRight: \"0px\",\r\n                paddingRight: \"8px\",\r\n                float: \"right\",\r\n              }}\r\n              onClick={this.doPDF}\r\n              type=\"button\"\r\n              value={CONTROLTITLE[lang].pdfINAAppendix}\r\n            />\r\n          </div>\r\n        <h3 className=\"ppi1\">\r\n          {needTo}{/* : ${formatMoney(cleanFormat(this.props.insuranceNeed,formatFr), 0, decimalChar, thousands)} */} \r\n          <Info\r\n              infoIcon={getInfoINA(lang)}\r\n          />\r\n        </h3>\r\n\r\n        <br />\r\n        <div style={{ width: \"90%\" }}>\r\n          <div style={{ width: \"100%\" }}>\r\n          <article  id=\"barNeeds\" className=\"canvas-containerINAGraphs\">\r\n              <Bar data={data} options={options} />\r\n            </article>\r\n            <article  id=\"barShortfall\" className=\"canvas-containerINAGraphs\">\r\n              <Bar  data={dataShortfall} options={options} />\r\n            </article>\r\n            <br />\r\n            <h3 className=\"ppi1\">\r\n                {labelsBilingual.currFins}\r\n                \r\n            </h3>\r\n            {\r\n               <div>\r\n                 {assetsPie}<br/><br/>{liabsPie}\r\n              </div> \r\n            }\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Bar, Line, Chart,Pie } from \"react-chartjs-2\";\r\n//import \"./Output.css\";\r\nimport \"./Output.css\";\r\nimport { readMCCData } from \"../data/dataExchangeMCC\";\r\nimport { fetchMCCData } from \"../utils/FetchAPIs\";\r\nimport { setUIDataToAPI} from \"../data/dataExchange\";\r\nimport {\r\n  getProjectedLiabilities,\r\n  cleanFormat,\r\n  numFormat,\r\n  getAssetsTaxCategoryTotal,\r\n  getAssetsCategoryTotal,\r\n  getTaxLiabCategoryTotal,\r\n  getLiabsCategoryTotal\r\n} from \"../utils/helper\";\r\nimport {\r\n  GROWTHDIR,\r\n  QUOTE_CLIENT,\r\n  QUOTE_SPOUSE,\r\n  QUOTE_JOINT,\r\n  ASSET_TAX,\r\n  ASSETS,\r\n  LIABILITIES\r\n} from \"../definitions/generalDefinitions\";\r\nimport MCCGraph from \"./MCCGraph\";\r\nimport { MultiButtons } from \"./MultiButtons\";\r\nimport { InputField } from \"./inputField\";\r\nimport DataTable from \"./GridExcelComponent/DataTable\";\r\n\r\n// props option\r\nconst DISPLAY_INCOME = 1;\r\n\r\n// for Estate\r\nconst DISPLAY_TAXLIAB_CLIENT = 1;\r\nconst DISPLAY_TAXLIAB_JLTD = 2;\r\n\r\nexport class AnalysisGraphs extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      loadingMCC: true,\r\n      estateLiab: [],\r\n      estateLiabLE: [],\r\n      taxL:0\r\n    };\r\n    this.dataAges = [];\r\n    this.dataPremiums = [];\r\n    this.dataDB = [];\r\n    this.dataSVEquiBuild = [];\r\n    this.dataSVManulife = [];\r\n    this.Prem = 0;\r\n    this.bestPremiumDur = 100;\r\n    this.bestMinMultiple = 0;\r\n    this.premiumDur = 10;\r\n    this.lifeExp = 0;\r\n    this.minMultiple = 0;\r\n    this.insMultiple = 0;\r\n    this.bestFitEquiBuild = false;\r\n    this.INAEstateOption = DISPLAY_TAXLIAB_CLIENT;\r\n    this.insuranceAmtInitial = this.props.INAOption === DISPLAY_INCOME\r\n        ? this.props.insuranceNeed\r\n        : this.props.dataEstateLiability[0];\r\nthis.chartRef = React.createRef();\r\n  this.taxLiabChartRef = React.createRef();\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getEstateLiabPieCharts()\r\n\r\n  }\r\n\r\n\r\n  shouldComponentUpdate(nextProps, nextState, prevState) {\r\n    if (\r\n      this.props.projectEnd !== nextProps.projectEnd ||\r\n      this.state.loadingMCC !== prevState.loadingMCC || this.props.INAOption !== nextProps.INAOption\r\n    ) {\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  getMCCQuoteOutput = () => {\r\n    return Promise.all([this.getMCCQuoteOutput1(), this.getMCCQuoteOutput4()]);\r\n  };\r\n\r\n  getMCCQuoteOutput1 = () => {\r\n    let quotePlanID = 48;\r\n    let quoteClient =\r\n      this.INAEstateOption === DISPLAY_TAXLIAB_JLTD\r\n        ? QUOTE_JOINT\r\n        : QUOTE_CLIENT;\r\n    let FA=this.props.INAOption === DISPLAY_INCOME\r\n        ? this.props.insuranceNeed\r\n        : this.props.dataEstateLiability[0];\r\n        const FAClean=parseFloat(cleanFormat(FA))\r\n    let dataMCC = readMCCData(\r\n      this.props.input,\r\n      quotePlanID,\r\n      quoteClient,\r\n      FAClean\r\n    );\r\n\r\n    // console.log(this.props.dataAPISite, dataMCC, FA);\r\n    if(FA>0)\r\n    {\r\n    fetchMCCData(\r\n      this.props.dataAPISite,\r\n      dataMCC,\r\n      FAClean\r\n    )\r\n      .then(data => {\r\n        // console.log(data[0]);\r\n        if (data[0] !== undefined) {\r\n          //  console.log(\"POST: MCC_OutputArrays success\");\r\n          this.minPrem = parseInt(cleanFormat(data[0][2].Values[0]));\r\n          //this.dataDB = data[0][3].Values.map(x=>parseInt(cleanFormat(x)));\r\n          this.lifeExp = this.props.lifeExp; // Math.round(parseInt(data[0][4].Values[0]));\r\n\r\n          //console.log(this.lifeExp,data[0][4].Values)\r\n          // make render\r\n        }\r\n      })\r\n      .then(data => {\r\n        this.getMCCQuoteOutput4();\r\n      });\r\n    }\r\n  };\r\n\r\n \r\n  getMCCQuoteOutput4 = async () => {\r\n    let quotePlanID = 48;\r\n    let quoteClient =\r\n      this.INAEstateOption === DISPLAY_TAXLIAB_JLTD\r\n        ? QUOTE_JOINT\r\n        : QUOTE_CLIENT;\r\n    let FA= this.props.INAOption === DISPLAY_INCOME\r\n        ? this.props.insuranceNeed\r\n        : this.props.dataEstateLiability[0];    \r\n    const FAClean=parseFloat(cleanFormat(FA))\r\n    let dataMCC = readMCCData(\r\n      this.props.input,\r\n      quotePlanID,\r\n      quoteClient,\r\n      FAClean\r\n    );\r\n    let age = dataMCC.insured.lives[0].age;\r\n    if (dataMCC.insured.lifeStatus > 0 && age > dataMCC.insured.lives[1].age)\r\n      age = dataMCC.insured.lives[1].age;\r\n    let years = this.props.projectEnd;\r\n    dataMCC.policy.objPremium.PremSet = true;\r\n    if (this.bestFitEquiBuild === true) {\r\n      dataMCC.policy.faceAmount =\r\n        FAClean / 2;\r\n      dataMCC.policy.objRider.ICO20 = true;\r\n      dataMCC.policy.objRider.T20Amt =\r\n        FAClean / 2;\r\n      dataMCC.policy.objCustomDB.solveForPremium_On = true;\r\n      dataMCC.policy.objCustomDB.customDB =\r\n        this.props.INAOption === DISPLAY_INCOME\r\n          ? this.getDataFutureINA()\r\n          : this.props.dataEstateLiability;\r\n    } else {\r\n      dataMCC.policy.objCustomDB.customDB = [];\r\n      dataMCC.policy.objCustomDB.solveForPremium_On = false;\r\n      dataMCC.policy.objPremium.PremSetAmt = this.Prem;\r\n      dataMCC.policy.objPremium.PremSetDur = parseInt(this.premiumDur);\r\n    }\r\n    dataMCC.policy.objPremium.PremSolve = false;\r\n    fetchMCCData(\r\n      this.props.dataAPISite,\r\n      dataMCC,\r\n      FAClean\r\n    ).then(data => {\r\n       if (data[0][1] !== undefined) {\r\n        console.log(\"POST: MCC_OutputArrays success\");\r\n        this.dataAges = data[0][1].Values.slice(0, years).map(x =>\r\n          parseInt(cleanFormat(x))\r\n        );\r\n        this.dataPremiums = data[0][2].Values.map(x =>\r\n          parseInt(cleanFormat(x))\r\n        );\r\n        this.dataDB = data[0][3].Values.slice(0, years).map(x =>\r\n          parseInt(cleanFormat(x))\r\n        );\r\n        this.dataSVEquiBuild = data[0][4].Values.slice(0, years).map(x =>\r\n          parseInt(cleanFormat(x))\r\n        );\r\n        this.dataDB.unshift(FAClean);\r\n        let i;\r\n\r\n        for (\r\n          i = 0;\r\n          i < this.dataDB.length + age - this.props.projectEnd + 3;\r\n          ++i\r\n        ) {\r\n          this.dataAges.pop();\r\n          this.dataDB.pop();\r\n          this.dataPremiums.pop();\r\n          this.dataSVEquiBuild.pop();\r\n        }\r\n        //console.log(this.dataDB);\r\n        /* let l = this.state.loadingMCC;\r\n        l = false;\r\n        this.setState({ l }); */\r\n      }\r\n    });\r\n  };\r\n\r\n  getMCCQuoteOutputManu = async () => {\r\n    let quotePlanID = 47; //MANU_UL_CLIENT_INVSEL = 47\r\n    let quoteClient =\r\n      this.INAEstateOption === DISPLAY_TAXLIAB_JLTD\r\n        ? QUOTE_JOINT\r\n        : QUOTE_CLIENT;\r\n        let FA = this.props.INAOption === DISPLAY_INCOME\r\n        ? this.props.insuranceNeed\r\n        : this.props.dataEstateLiability[0];\r\n        const FAClean=parseFloat(cleanFormat(FA))\r\n    let dataMCC = readMCCData(\r\n      this.props.input,\r\n      quotePlanID,\r\n      quoteClient,\r\n      FAClean\r\n    );\r\n    //console.log(dataMCC);\r\n    let age = dataMCC.insured.lives[0].age;\r\n    if (dataMCC.insured.lifeStatus > 0 && age > dataMCC.insured.lives[1].age)\r\n      age = dataMCC.insured.lives[1].age;\r\n    let years = this.props.projectEnd;\r\n    dataMCC.policy.objPremium.PremSet = false;\r\n    dataMCC.policy.objPremium.PremSolve = true;\r\n    dataMCC.policy.objPremium.PremSolveDur = 99; //years-age;\r\n    dataMCC.policy.objCustomDB.customDB = [];\r\n    dataMCC.policy.objCustomDB.solveForPremium_On = false;\r\n    dataMCC.policy.intRate = 0.035;\r\n    dataMCC.policy.province = \"AB\"; // data.dataInput.Presentations[0].Province,\r\n    fetchMCCData(\r\n      this.props.dataAPISite,\r\n      dataMCC,\r\n      FAClean\r\n    ).then(data => {\r\n       if (data[0][1] !== undefined) {\r\n        console.log(\"POST: MCC_OutputArrays success\");\r\n        this.dataAges = data[0][1].Values.slice(0, years).map(x =>\r\n          parseInt(cleanFormat(x))\r\n        );\r\n        this.dataPremiums = data[0][2].Values.map(x =>\r\n          parseInt(cleanFormat(x))\r\n        );\r\n        this.dataDB = data[0][3].Values.slice(0, years).map(x =>\r\n          parseInt(cleanFormat(x))\r\n        );\r\n        this.dataSVManulife = data[0][4].Values.slice(0, years).map(x =>\r\n          parseInt(cleanFormat(x))\r\n        );\r\n\r\n        this.dataDB.unshift(FAClean);\r\n        let i;\r\n\r\n        for (\r\n          i = 0;\r\n          i < this.dataDB.length + age - this.props.projectEnd + 8;\r\n          ++i\r\n        ) {\r\n          this.dataAges.pop();\r\n          this.dataDB.pop();\r\n          this.dataPremiums.pop();\r\n          this.dataSVManulife.pop();\r\n        }\r\n        //console.log(this.dataDB);\r\n        /* let l = this.state.loadingMCC;\r\n        l = false;\r\n        this.setState({ l }); */\r\n      }\r\n    });\r\n  };\r\n\r\n  selectMultiButton = (id, value) => {\r\n    if (value !== undefined) {\r\n      if (id === 1) this.premiumDur = value;\r\n      else if (id === 2) this.minMultiple = value;\r\n      else if (id === 3) this.insMultiple = value;\r\n      else if (id === 4) this.insuranceAmtInitial = value;\r\n    }\r\n    this.getMCCQuoteOutput();\r\n    //console.log(value);\r\n\r\n    let b = !this.state.loadingMCC;\r\n    this.setState({ loadingMCC: b });\r\n    this.minPrem = 1;\r\n  };\r\n\r\n  solveForOptimumQuote = async () => {\r\n    let min = 0;\r\n    this.bestPremiumDur = 100;\r\n    let k;\r\n    let ratio;\r\n    let dataFutureINA = this.getDataFutureINA();\r\n    //let dataFutureEstateLiab = this.getDataFutureEstateLiability();\r\n    this.bestFitEquiBuild = false;\r\n\r\n    if (false) {\r\n      let gotHereInInnerLoop = false;\r\n      for (ratio = 0; ratio <= 40; ratio++) {\r\n        for (k = 5; k < this.lifeExp + 1; k++) {\r\n          this.premiumDur = k;\r\n          this.Prem = (1 + ratio / 20) * this.minPrem;\r\n\r\n          let dataFVofPrems = this.getDataFVofPrems(\r\n            (this.props.INAOption = DISPLAY_INCOME\r\n              ? dataFutureINA\r\n              : this.props.dataEstateLiability)\r\n          );\r\n\r\n          await this.getMCCQuoteOutput4();\r\n          let SumOfSquresDiff = 0;\r\n          let i;\r\n          for (i = 0; i < this.lifeExp; ++i) {\r\n            let insVal = DISPLAY_INCOME\r\n              ? dataFutureINA[i]\r\n              : this.props.dataEstateLiability[i];\r\n            //console.log(SumOfSquresDiff,dataFVofPrems,insVal)\r\n            SumOfSquresDiff += Math.pow(dataFVofPrems[i] - insVal, 2);\r\n          }\r\n          SumOfSquresDiff = Math.round(\r\n            SumOfSquresDiff / (1000000 * this.lifeExp)\r\n          );\r\n\r\n          if (min === 0) min = SumOfSquresDiff;\r\n          else if (min > SumOfSquresDiff) {\r\n            //console.log(\"k, min, SumOfSquresDiff\");\r\n            min = SumOfSquresDiff;\r\n            this.bestPremiumDur = k;\r\n            this.bestMinMultiple = 5 * ratio;\r\n            gotHereInInnerLoop = true;\r\n          } else if (gotHereInInnerLoop === true) k = this.lifeExp + 1; //get out\r\n          //console.log(k, min, SumOfSquresDiff, ratio);\r\n          //let b = !this.state.loadingMCC;\r\n          //await this.setState({ loadingMCC: b });\r\n        }\r\n        gotHereInInnerLoop = false;\r\n      }\r\n      this.premiumDur = this.bestPremiumDur;\r\n      this.minMultiple = this.bestMinMultiple;\r\n      //await this.getMCCQuoteOutput();\r\n    } else {\r\n      //this.premiumDur = this.bestPremiumDur;\r\n      //this.minMultiple =  this.bestMinMultiple;\r\n      //this.premiumDur = k;\r\n      this.Prem = (1 + this.bestMinMultiple) * this.minPrem;\r\n\r\n      await this.getMCCQuoteOutput();\r\n    }\r\n    let b = !this.state.loadingMCC;\r\n    await this.setState({ loadingMCC: b });\r\n  };\r\n\r\n  solveForOptimumEquiBuild = async e => {\r\n    if (e === 1) {\r\n      this.bestPremiumDur = 100;\r\n      let dataFutureINA = this.getDataFutureINA();\r\n      //let dataFutureEstateLiab = this.getDataFutureEstateLiability();\r\n\r\n      this.bestFitEquiBuild = true;\r\n      await this.getMCCQuoteOutput4();\r\n\r\n      let dataFVofPrems = this.getDataFVofPrems(dataFutureINA);\r\n      let SumOfSquresDiff = 0;\r\n      let i;\r\n      for (i = 0; i < this.lifeExp; ++i) {\r\n        let insVal = DISPLAY_INCOME\r\n          ? dataFutureINA[i]\r\n          : this.props.dataEstateLiability[i];\r\n        //console.log(SumOfSquresDiff,dataFVofPrems,insVal)\r\n        SumOfSquresDiff += Math.pow(dataFVofPrems[i] - insVal, 2);\r\n      }\r\n      SumOfSquresDiff = Math.round(SumOfSquresDiff / (1000000 * this.lifeExp));\r\n      //console.log(SumOfSquresDiff)\r\n    } else if (e === 2) {\r\n      this.bestPremiumDur = 100;\r\n      let dataFutureINA = this.getDataFutureINA();\r\n\r\n      this.bestFitEquiBuild = true;\r\n      await this.getMCCQuoteOutputManu();\r\n\r\n      let dataFVofPrems = this.getDataFVofPrems(dataFutureINA);\r\n    }\r\n    // await this.getMCCQuoteOutput();\r\n\r\n    let b = !this.state.loadingMCC;\r\n    await this.setState({ loadingMCC: b });\r\n  };\r\n\r\n  selectMultiButtonINAorTax = (e) => {\r\n    if (e === DISPLAY_TAXLIAB_CLIENT) {\r\n      this.INAEstateOption = DISPLAY_TAXLIAB_CLIENT;\r\n    } else if (e === DISPLAY_TAXLIAB_JLTD) {\r\n      this.INAEstateOption = DISPLAY_TAXLIAB_JLTD;\r\n    }\r\n\r\n    //let dataFutureEstateLiab = this.getDataFutureEstateLiability();\r\n    this.insuranceAmtInitial =\r\n      this.props.INAOption === DISPLAY_INCOME\r\n        ? this.props.insuranceNeed\r\n        : this.props.dataEstateLiability[0];\r\n    //this.insuranceAmtInitial =parseInt(cleanFormat(this.insuranceAmtInitial))*(1 + this.insMultiple / 100);\r\n    this.getMCCQuoteOutput();\r\n\r\n    \r\n\r\n    let b = !this.state.loadingMCC;\r\n    this.setState({ loadingMCC: b });\r\n    this.minPrem = 1;\r\n    //this.setState({ loading: false });\r\n  };\r\n\r\n\r\n\r\ngetEstateLiabPieCharts= async () => {\r\n     \r\n    const totalLiabProjections = getProjectedLiabilities(\r\n      this.props.input.dataInput,\r\n      this.props.projectEnd,\r\n      this.props.language\r\n    );\r\n\r\n\r\n\r\n    // console.log(this.state.estateLiab,this.state.estateLiabLE)\r\n\r\n    let dataNA = setUIDataToAPI(this.props.input, 0);\r\n\r\n    let estateLiab2=[]\r\n    estateLiab2.push(totalLiabProjections[0])\r\n    const l1= await getTaxLiabCategoryTotal(this.props.input.dataInput,ASSET_TAX.REGISTERED.Key,dataNA, 0);\r\n    this.setState({taxL: l1})\r\n    estateLiab2.push(l1)\r\n    const l2=await getTaxLiabCategoryTotal(this.props.input.dataInput,ASSET_TAX.CAPITAL_GAINS_ANNUAL.Key,dataNA, 0)\r\n    const l3=await getTaxLiabCategoryTotal(this.props.input.dataInput,ASSET_TAX.CAPITAL_GAINS_DEFERRED.Key,dataNA, 0)\r\n    estateLiab2.push(l2+l3)\r\n    estateLiab2.push(await getTaxLiabCategoryTotal(this.props.input.dataInput,ASSET_TAX.FULLY_TAXABLE.Key,dataNA, 0))\r\n    estateLiab2.push(await getTaxLiabCategoryTotal(this.props.input.dataInput,ASSET_TAX.DIVIDEND.Key,dataNA, 0));\r\n\r\n\r\n    this.setState({estateLiab: estateLiab2});\r\n\r\n    let estateLiab3=[]\r\n    estateLiab3.push(totalLiabProjections[this.lifeExp])\r\n    estateLiab3.push(await getTaxLiabCategoryTotal(this.props.input.dataInput,ASSET_TAX.REGISTERED.Key,dataNA, this.lifeExp))\r\n    const l2LE=await getTaxLiabCategoryTotal(this.props.input.dataInput,ASSET_TAX.CAPITAL_GAINS_ANNUAL.Key,dataNA, this.lifeExp)\r\n    const l3LE=await getTaxLiabCategoryTotal(this.props.input.dataInput,ASSET_TAX.CAPITAL_GAINS_DEFERRED.Key,dataNA, this.lifeExp)\r\n    estateLiab3.push(l2LE+l3LE)\r\n    estateLiab3.push(await getTaxLiabCategoryTotal(this.props.input.dataInput,ASSET_TAX.FULLY_TAXABLE.Key,dataNA, this.lifeExp))\r\n    estateLiab3.push(await getTaxLiabCategoryTotal(this.props.input.dataInput,ASSET_TAX.DIVIDEND.Key,dataNA, this.lifeExp));\r\n    this.setState({estateLiabLE: estateLiab3});\r\n\r\n    // console.log(this.state.estateLiab,this.state.estateLiabLE)\r\n// console.log(estateLiab2,estateLiab3)\r\n}\r\n\r\n\r\n\r\n\r\n\r\n  getDataFutureINA = () => {\r\n    let dataFutureINA = [];\r\n    let i;\r\n    let j;\r\n    var pv;\r\n    var totalLiab = 0;\r\n    var totalLiabProjections = [];\r\n    // project liabs\r\n\r\n    totalLiabProjections = getProjectedLiabilities(\r\n      this.props.input.dataInput,\r\n      this.props.projectEnd,\r\n      this.props.language\r\n    );\r\n\r\n    \r\n\r\n    const currINA = parseFloat(cleanFormat(this.props.insuranceNeed));\r\n    const intRate = parseFloat(\r\n      this.props.input.dataInput.Presentations[0].invRate / 100\r\n    );\r\n    const inflation = parseFloat(\r\n      this.props.input.dataInput.Presentations[0].inflation / 100\r\n    );\r\n    dataFutureINA.push(currINA);\r\n    //console.log(this.props.insuranceNeed)\r\n    for (i = 1; i < this.props.projectEnd; ++i) {\r\n      pv =\r\n        (dataFutureINA[i - 1] - this.props.dataShortfall[i - 1]) *\r\n        (1 + intRate);\r\n      //   console.log(pv)\r\n      dataFutureINA.push(Math.round(Math.max(0, pv)));\r\n    }\r\n    // add liab\r\n    for (i = 1; i < this.props.projectEnd; ++i) {\r\n      dataFutureINA[i] += totalLiabProjections[i];\r\n    }\r\n    return dataFutureINA;\r\n  };\r\n\r\n  /* getDataFutureEstateLiability = () => {\r\n    let i;\r\n    var totalLiabProjections = [];\r\n    \r\n    // project liabs\r\n    totalLiabProjections=getProjectedLiabilities(this.props.input.dataInput, this.props.projectEnd, this.props.language) \r\n\r\n    const currEstateLiability=parseFloat(cleanFormat(this.props.insuranceNeed));\r\n    const intRate=parseFloat(this.props.input.dataInput.Presentations[0].invRate/100);            \r\n    const inflation=parseFloat(this.props.input.dataInput.Presentations[0].inflation/100);\r\n    let dataFutureEstateLiability=[]\r\n    \r\n    for (i = 1; i < this.props.projectEnd; ++i) {\r\n        dataFutureEstateLiability.push(this.props.dataTaxLiability[i]);\r\n    }\r\n    // add liab\r\n    for (i = 1; i < this.props.projectEnd; ++i) {\r\n        dataFutureEstateLiability[i]+=totalLiabProjections[i];\r\n    }\r\n    return dataFutureEstateLiability;\r\n  };\r\n */\r\n\r\nhandleFocus = (event) => {\r\n  event.target.select();\r\n};\r\n\r\n  getDataFVofPrems = dataFuture => {\r\n    let dataFVofPrems = [];\r\n    let i;\r\n    let fv = 0;\r\n\r\n    for (i = 0; i < this.dataPremiums.length; ++i) {\r\n      let shortfall = dataFuture[i] - this.dataDB[i];\r\n      fv = (fv + this.dataPremiums[i]) * 1.0375;\r\n      dataFVofPrems.push(fv + shortfall);\r\n    }\r\n    for (i = this.dataPremiums.length; i < this.props.projectEnd; ++i) {\r\n      let shortfall = dataFuture[i] - this.dataDB[i];\r\n      fv = fv * 1.0375;\r\n      dataFVofPrems.push(fv + shortfall);\r\n    }\r\n\r\n    return dataFVofPrems;\r\n  };\r\n\r\n  render() {\r\n    let dtaAgesAll = [];\r\n    let k;\r\n    let lifeExp = this.props.lifeExp;\r\n    let age = this.props.input.dataInput.Clients[1].Age;\r\n\r\n    if (this.INAEstateOption === DISPLAY_TAXLIAB_CLIENT) {\r\n      lifeExp = this.props.lifeExpClient;\r\n      age = this.props.input.dataInput.Clients[0].Age;\r\n    } else if (this.INAEstateOption === DISPLAY_TAXLIAB_JLTD) {\r\n      lifeExp = this.props.lifeExpJLTD;\r\n      if (age > this.props.input.dataInput.Clients[1].Age)\r\n        age = this.props.input.dataInput.Clients[1].Age;\r\n    }\r\n\r\n    for (k = 0; k < lifeExp + 3; ++k) {\r\n      dtaAgesAll.push(age + k);\r\n    }\r\n\r\n    //if (this.props.INAOption !== DISPLAY_INCOME) {\r\n    var dataFutureINA = this.getDataFutureINA();\r\n    const dataShortfallFV = {\r\n      labels: dtaAgesAll, // this.dataAges,\r\n      datasets: [\r\n        {\r\n          label:\r\n            this.props.language === \"en\"\r\n              ? \"Future insurance needs\"\r\n              : \"Besoins dassurance futurs\", //Income Shortfall',\r\n          data: dataFutureINA,\r\n\r\n          fill: true, // Don't fill area under the line\r\n          borderColor: \"darkred\", // Line color\r\n          backgroundColor: \"rgba(244, 144, 128, 0.8)\"\r\n        }\r\n      ]\r\n    };\r\n    //} else {\r\n    let dataTaxLiabLifeExp = [];\r\n    let dataTaxLiab = []; // this.props.dataEstateLiability;\r\n\r\n    for (k = 0; k < lifeExp + 3; ++k) {\r\n      dataTaxLiabLifeExp.push(0);\r\n      dataTaxLiab.push(this.props.dataEstateLiability[k]);\r\n    }\r\n    dataTaxLiabLifeExp[lifeExp] = dataTaxLiab[lifeExp];\r\n    dataTaxLiab[lifeExp] = 0;\r\n\r\n    // console.log(this.INAEstateOption, age, dtaAgesAll, lifeExp);\r\n    const dataTaxLiability = {\r\n      labels: dtaAgesAll,\r\n      datasets: [\r\n        {\r\n          label:\r\n            this.props.language === \"en\"\r\n              ? \"Future insurance Needs\"\r\n              : \"Future insurance Needs ^F\", //Income Shortfall',\r\n          //type: \"line\",\r\n          data: dataTaxLiab,\r\n\r\n          fill: true, // Don't fill area under the line\r\n          borderColor: \"darkGrey\", // Line color\r\n          backgroundColor: \"#607d8b\"\r\n        },\r\n        {\r\n          label:\r\n            this.props.language === \"en\"\r\n              ? \"Life Expectancy \"\r\n              : \"Esprance de vie\", //Income Shortfall',\r\n          //type: \"line\",\r\n          data: dataTaxLiabLifeExp,\r\n          fill: true, // Don't fill area under the line\r\n          borderColor: \"#6AAd8b\",\r\n          backgroundColor: \"rgb(106,173,139,.5)\"// \"rgba(96, 125, 139, .7)\"\r\n        }\r\n      ]\r\n    };\r\n\r\n  const dataPieAssets = {\r\n  labels: [\r\n    \"Cash/TFSA/Insurance\", \"RRSP/RRIF\", \"Public/Private shares\", \"Real Estate\", \"Other\"\r\n  ],\r\n  datasets: [\r\n    {\r\n         data: [\r\n        getAssetsCategoryTotal(this.props.input.dataInput,ASSETS.CASH.Key)+\r\n        getAssetsCategoryTotal(this.props.input.dataInput,ASSETS.LIFE_INSURANCE.Key)+\r\n        getAssetsCategoryTotal(this.props.input.dataInput,ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.Key)\r\n        , \r\n        getAssetsCategoryTotal(this.props.input.dataInput,ASSETS.RRSP_RRIF.Key), \r\n        getAssetsCategoryTotal(this.props.input.dataInput,ASSETS.SMALL_BUSINESS_SHARES.Key)+\r\n        getAssetsCategoryTotal(this.props.input.dataInput,ASSETS.STOCKS_BONDS.Key),\r\n        getAssetsCategoryTotal(this.props.input.dataInput,ASSETS.REAL_ESTATE.Key)+\r\n        getAssetsCategoryTotal(this.props.input.dataInput,ASSETS.PERSONAL_RESIDENCE.Key),\r\n        getAssetsCategoryTotal(this.props.input.dataInput,ASSETS.OTHER_ASSETS.Key)\r\n      ],\r\n      backgroundColor: [\"#F7464A\", \"#46BFBD\", \"#FDB45C\", \"#949FB1\", \"#4D5360\"]\r\n    }\r\n  ]\r\n}\r\nconst dataPieTax = {\r\n  labels: [\r\n    \"Non-Taxable\", \"RRSP/RRIF\", \"Capital Gains\", \"Taxed As Income\", \"Dividend\"\r\n  ],\r\n  datasets: [\r\n    {\r\n         data: [\r\n        getAssetsTaxCategoryTotal(this.props.input.dataInput,ASSET_TAX.NON_TAXABLE.Key), \r\n        getAssetsTaxCategoryTotal(this.props.input.dataInput,ASSET_TAX.REGISTERED.Key), \r\n        getAssetsTaxCategoryTotal(this.props.input.dataInput,ASSET_TAX.CAPITAL_GAINS_ANNUAL.Key)+\r\n        getAssetsTaxCategoryTotal(this.props.input.dataInput,ASSET_TAX.CAPITAL_GAINS_DEFERRED.Key),\r\n        getAssetsTaxCategoryTotal(this.props.input.dataInput,ASSET_TAX.FULLY_TAXABLE.Key), \r\n        getAssetsTaxCategoryTotal(this.props.input.dataInput,ASSET_TAX.DIVIDEND.Key)\r\n      ],\r\n      backgroundColor: [\"#F7464A\", \"#46BFBD\", \"#FDB45C\", \"#949FB1\", \"#4D5360\"]\r\n    }\r\n  ]\r\n}\r\n\r\nconst dataPieLiabs = {\r\n  labels: [\r\n    \"Loans\", \"Taxes\", \"Emergency Fund\", \"Other\"\r\n  ],\r\n  datasets: [\r\n    {\r\n         data: [\r\n        getLiabsCategoryTotal(this.props.input.dataInput,LIABILITIES.OUTSTANDING_LOANS.Key)+\r\n        getLiabsCategoryTotal(this.props.input.dataInput,LIABILITIES.MORTGAGE_REDEMPTION.Key)+\r\n        getLiabsCategoryTotal(this.props.input.dataInput,LIABILITIES.CREDIT_CARDS.Key)+\r\n        getLiabsCategoryTotal(this.props.input.dataInput,LIABILITIES.CLIENT_TAX_LIABILITY.Key)\r\n        , \r\n        getLiabsCategoryTotal(this.props.input.dataInput,LIABILITIES.INCOME_TAXES.Key), \r\n        getLiabsCategoryTotal(this.props.input.dataInput,LIABILITIES.EMERGENCY_FUND.Key),\r\n        getLiabsCategoryTotal(this.props.input.dataInput,LIABILITIES.OTHER.Key)+\r\n        getLiabsCategoryTotal(this.props.input.dataInput,LIABILITIES.CHILD_HOME_CARE.Key)\r\n      ],\r\n      backgroundColor: [\"#F7464A\", \"#46BFBD\", \"#FDB45C\", \"#949FB1\"]\r\n    }\r\n  ]\r\n}\r\nconst dataPieLiabsAtDeath = {\r\n  labels: [\r\n    \"Last Expenses\", \"LegalandExecutorFees\", \"Future Commitments\"\r\n  ],\r\n  datasets: [\r\n    {\r\n         data: [\r\n           getLiabsCategoryTotal(this.props.input.dataInput,LIABILITIES.LAST_EXPENSES.Key),\r\n        getLiabsCategoryTotal(this.props.input.dataInput,LIABILITIES.LEGAL_AND_EXECUTOR_FEES.Key), \r\n        getLiabsCategoryTotal(this.props.input.dataInput,LIABILITIES.LEGACY_FOR_CHILDREN.Key)+\r\n        getLiabsCategoryTotal(this.props.input.dataInput,LIABILITIES.CHARITABLE_GIFTS.Key)\r\n      ],\r\n      backgroundColor: [\"#F7464A\", \"#46BFBD\", \"#FDB45C\"]\r\n    }\r\n  ]\r\n}\r\n\r\n\r\n\r\n\r\n//options\r\n  var optionsPie = {\r\n    responsive: true,\r\n    title: {\r\n      display: true,\r\n      position: \"top\",\r\n      text: \"Assets Breakdown Today\",\r\n      fontSize: 14,//8,\r\n      fontColor: \"#111\"\r\n    },\r\n    legend: {\r\n      display: true,\r\n      position: \"right\",\r\n      labels: {\r\n        fontColor: \"#333\",\r\n        fontSize: 12//16\r\n      }\r\n    }\r\n  };\r\n   \r\n   \r\n   let optionsPieTax = JSON.parse(JSON.stringify(optionsPie));\r\n   optionsPieTax.title.text=\"Tax Treatment of Assets\"\r\n\r\nlet optionsPieLiabsAtDeath = JSON.parse(JSON.stringify(optionsPie));\r\n   optionsPieLiabsAtDeath.title.text=\"Liabilities At Death\"\r\n\r\nlet optionsPieLiabs = JSON.parse(JSON.stringify(optionsPie));\r\n   optionsPieLiabs.title.text=\"Liabilities Breakdown\"\r\n\r\n\r\n\r\n\r\nconst dataPieEstateLiabNow = {\r\n  labels: [\r\n    \"Liabilities\", \"Taxes: RRSP/RRIF\", \"Taxes: Capital Gains\", \"Taxes: As Income\", \"Taxes: Dividend\"\r\n  ],\r\n  datasets: [\r\n    {\r\n         data: this.state.estateLiab,\r\n      backgroundColor: [\"#F7464A\", \"#46BFBD\", \"#FDB45C\", \"#949FB1\", \"#4D5360\"]\r\n    }\r\n  ]\r\n}\r\nconst dataPieEstateLiabLE = {\r\n  labels: [\r\n    \"Liabilities\", \"Taxes: RRSP/RRIF\", \"Taxes: Capital Gains\", \"Taxes: As Income\", \"Taxes: Dividend\"\r\n  ],\r\n  datasets: [\r\n    {\r\n         data: this.state.estateLiabLE,\r\n      backgroundColor: [\"#F7464A\", \"#46BFBD\", \"#FDB45C\", \"#949FB1\", \"#4D5360\"]\r\n    }\r\n  ]\r\n}\r\n let optionsPieEstateLiab= JSON.parse(JSON.stringify(optionsPie));\r\n   optionsPieEstateLiab.title.text=\"Estate Liability Today\"\r\n\r\nlet optionsPieEstateLiabLE= JSON.parse(JSON.stringify(optionsPie));\r\n   optionsPieEstateLiabLE.title.text=\"Estate Liability at Life Expectancy +3\"\r\n\r\n\r\n\r\n\r\n\r\n    /* var ctx = document.getElementById('myChart3');\r\n\r\n    var myChart3=new Chart(ctx, {\r\n      type: \"bar\", // override the default type\r\n\r\n      data: {\r\n        labels: dtaAgesAll,\r\n        datasets: [\r\n          {\r\n            label:\r\n              this.props.language === \"en\"\r\n                ? \"Life Expectancy\"\r\n                : \"Life Expectancy ^F\", //Income Shortfall',\r\n            data: dataTaxLiabLifeExp,\r\n            borderColor: \"#6AAd8b\",\r\n            backgroundColor: \"rgb(106,173,139,.5)\"\r\n          },\r\n          {\r\n            type: \"line\", // set the default type\r\n            label:\r\n              this.props.language === \"en\"\r\n                ? \"Future insurance Needs\"\r\n                : \"Future insurance Needs ^F\", //Income Shortfall',\r\n            //type: \"line\",\r\n            data: this.props.dataEstateLiability,\r\n            fill: true, // Don't fill area under the line\r\n            borderColor: \"darkGrey\", // Line color\r\n            backgroundColor: \"#607d8b\"\r\n          }\r\n        ]\r\n      },\r\n      options: {\r\n        //Customize chart options\r\n      }\r\n    });\r\n */\r\n    \r\n    //this.taxLiabChartRef = this.chartRef.current.getContext(\"2d\");\r\n    /* new Chart(this.taxLiabChartRef, {\r\n      type: \"bar\", // override the default type\r\n\r\n      data: {\r\n        labels: dtaAgesAll,\r\n        datasets: [\r\n          {\r\n            label:\r\n              this.props.language === \"en\"\r\n                ? \"Life Expectancy\"\r\n                : \"Life Expectancy ^F\", //Income Shortfall',\r\n            data: dataTaxLiabLifeExp,\r\n            borderColor: \"#6AAd8b\",\r\n            backgroundColor: \"rgb(106,173,139,.5)\"\r\n          },\r\n          {\r\n            type: \"line\", // set the default type\r\n            label:\r\n              this.props.language === \"en\"\r\n                ? \"Future insurance Needs\"\r\n                : \"Future insurance Needs ^F\", //Income Shortfall',\r\n            //type: \"line\",\r\n            data: this.props.dataEstateLiability,\r\n            fill: true, // Don't fill area under the line\r\n            borderColor: \"darkGrey\", // Line color\r\n            backgroundColor: \"#607d8b\"\r\n          }\r\n        ]\r\n      },\r\n      options: {\r\n        //Customize chart options\r\n      }\r\n    }); */\r\n\r\n    // FV of prems\r\n    let dataFVofPrems = this.getDataFVofPrems(dataFutureINA);\r\n\r\n    // console.log(this.props.dataEstateLiability);\r\n\r\n    const dataMCCpremFV = {\r\n      labels: dtaAgesAll, // this.dataAges,\r\n      datasets: [\r\n        {\r\n          label:\r\n            this.props.language === \"en\"\r\n              ? \"Future Value of premiums paid      vs \"\r\n              : \"EquiBuild quote ^F\", //Income Shortfall',\r\n          data: dataFVofPrems,\r\n          fill: true,\r\n          borderColor: \"darkgreen\", // Line color\r\n          backgroundColor: \"rgba(144, 244, 88, .2)\"\r\n        },\r\n        {\r\n          label:\r\n            this.props.language === \"en\"\r\n              ? \"Raise cash to pay for shortfall \"\r\n              : \"Future insurance needs ^F\", //Income Shortfall',\r\n          data:\r\n            this.props.INAOption === DISPLAY_INCOME\r\n              ? dataFutureINA\r\n              : this.props.dataEstateLiability,\r\n          //[10964, 13734, 14008, 14288, 14574, 14866, 15163, 15466, 15776, 16091, 16413, 16741, 17076, 17417, 17766, 18121, 18484, 18853, 19230, 19615, 20007, 20407, 20815, 21232, 21656, 22090, 27632, 28184, 28748, 29323, 29910, 30508, 31118, 31740, 32375, 33023, 33683, 34357, 35044, 35745, 36460, 37189, 37933, 38691, 39465, 40254],\r\n          fill: true, // Don't fill area under the line\r\n          borderColor:\r\n            this.props.INAOption === DISPLAY_INCOME ? \"darkred\" : \"darkGrey\",\r\n          backgroundColor:\r\n            this.props.INAOption === DISPLAY_INCOME\r\n              ? \"rgba(244, 144, 128, 0.9)\"\r\n              : \"#607D8B\"\r\n        }\r\n      ]\r\n    };\r\n\r\n    let SumOfSquresDiff = 0;\r\n    let i;\r\n    for (i = 0; i < this.lifeExp; ++i) {\r\n      let insVal = DISPLAY_INCOME\r\n        ? dataFutureINA[i]\r\n        : this.props.dataEstateLiability[i];\r\n      //console.log(SumOfSquresDiff,dataFVofPrems,insVal)\r\n      SumOfSquresDiff += Math.pow(dataFVofPrems[i] - insVal, 2);\r\n    }\r\n    SumOfSquresDiff = numFormat(\r\n      Math.round(SumOfSquresDiff / (1000000 * this.lifeExp)),\r\n      false,\r\n      5,\r\n      \",\"\r\n    );\r\n\r\n    const dataMCCQuoteDB = {\r\n      labels: dtaAgesAll, // this.dataAges,\r\n      datasets: [\r\n        {\r\n          label:\r\n            this.props.language === \"en\"\r\n              ? \"EquiBuild quote\"\r\n              : \"EquiBuild quote ^F\", //Income Shortfall',\r\n          data: this.dataDB,\r\n          fill: true,\r\n          borderColor: \"darkblue\", // Line color\r\n          backgroundColor: \"rgba(144, 144, 188, .3)\"\r\n        },\r\n        {\r\n          label:\r\n            this.props.language === \"en\"\r\n              ? \"Future insurance needs\"\r\n              : \"Future insurance needs ^F\", //Income Shortfall',\r\n          data:\r\n            this.props.INAOption === DISPLAY_INCOME\r\n              ? dataFutureINA\r\n              : this.props.dataEstateLiability,\r\n          //[10964, 13734, 14008, 14288, 14574, 14866, 15163, 15466, 15776, 16091, 16413, 16741, 17076, 17417, 17766, 18121, 18484, 18853, 19230, 19615, 20007, 20407, 20815, 21232, 21656, 22090, 27632, 28184, 28748, 29323, 29910, 30508, 31118, 31740, 32375, 33023, 33683, 34357, 35044, 35745, 36460, 37189, 37933, 38691, 39465, 40254],\r\n          fill: true, // Don't fill area under the line\r\n          borderColor:\r\n            this.props.INAOption === DISPLAY_INCOME ? \"darkred\" : \"darkGrey\",\r\n          backgroundColor:\r\n            this.props.INAOption === DISPLAY_INCOME\r\n              ? \"rgba(244, 144, 128, 0.9)\"\r\n              : \"#607D8B\"\r\n        }\r\n      ]\r\n    };\r\n\r\n    const optionsFV = {\r\n      responsive: true,\r\n      maintainAspectRatio: false,\r\n      scales: {\r\n        xAxes: [\r\n          {\r\n            stacked: true,\r\n            ticks: {\r\n              beginAtZero: true\r\n            }\r\n          }\r\n        ],\r\n        yAxes: [\r\n          {\r\n            stacked: false,\r\n            ticks: {\r\n              beginAtZero: true,\r\n              steps: 10,\r\n              stepValue: 5\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    };\r\n\r\n    //let colHeaders=[\"Year\", \"Survivor's Age\", \"Insurance Need\", \"Propsed Plan Death Benefit\", \"Future Value of Premiums\", \"Net Advantage of Insurance\" ];\r\n    let colHeaders = [\r\n      \"Survivor's Age\",\r\n      \"Insurance Need\",\r\n      \"Premiums\",\r\n      \"Propsed Plan Death Benefit\",\r\n      \"Future Value of Premiums\"\r\n    ];\r\n    let dataProjection = [];\r\n    dataProjection.push(this.dataAges);\r\n    dataProjection.push(\r\n      this.props.INAOption === DISPLAY_INCOME\r\n        ? dataFutureINA\r\n        : this.props.dataEstateLiability\r\n    );\r\n    dataProjection.push(this.dataPremiums);\r\n    dataProjection.push(this.dataDB);\r\n    dataProjection.push(dataFVofPrems);\r\n\r\n    let dataProjectionCV = [];\r\n    dataProjectionCV.push(this.dataAges);\r\n    dataProjectionCV.push(this.dataSVEquiBuild);\r\n    dataProjectionCV.push(this.dataSVManulife);\r\n\r\n    let needToE =\r\n      \"Insurance Needs Projections from today to life expectancy plus 3 years (\" +\r\n      lifeExp +\r\n      \" + 3)\";\r\n    let needToF =\r\n      \"Insurance Needs to life expectancy (\" +\r\n      lifeExp +\r\n      \" years) plus 3 years^F\";\r\n    let needTo = this.props.language === \"en\" ? needToE : needToF;\r\n    // needTo += +this.props.projectEnd + \")\";\r\n\r\n    //console.log(this.state.loadingMCC);\r\n    return (\r\n      <div style={{ color: \"darkBlue\", marginTop: \"15px\" }}>\r\n        {this.props.INAOption !== DISPLAY_INCOME && (\r\n          <MultiButtons\r\n            noButtons={2}\r\n            buttonCaption={[\"Estate of Client\", \"Estate of Couple\"]}\r\n            selectMultiButton={this.selectMultiButtonINAorTax}\r\n          />\r\n        )}\r\n        \r\n        <div style={{ width: \"90%\" }}>\r\n        <div style={{ width: \"100%\" }}> \r\n        \r\n           <h3 className=\"ppi1\">\r\n          {this.props.INAOption === DISPLAY_INCOME\r\n            ? \"Your current financial situation is summerized below:\" //this.props.insuranceNeed\r\n            : <div><br/><br/>Estate Liability breakdown Today and at Life Expectancy plus 3 years: <br/></div>\r\n            }\r\n          {/*numFormat(this.props.dataTaxLiability[0], false, 2, \",\")}*/}\r\n        </h3>\r\n\r\n \r\n          <div style={{ width: \"100%\" }}>\r\n            {this.props.INAOption === DISPLAY_INCOME ? (\r\n               <div><article className=\"canvas-container\" style={{height: \"450px\" }}>\r\n                <div style={{overflow:'hidden', float: 'left', width: '50%',height: \"400px\" }}><Pie data={dataPieAssets} options={optionsPie} /></div>\r\n                <div style={{float: 'left',width: '50%',height: \"400px\"}}><Pie data={dataPieTax} options={optionsPieTax} /></div>\r\n              </article>\r\n              <article className=\"canvas-container\" style={{height: \"450px\" }}>\r\n                <div style={{overflow:'hidden', float: 'left', width: '50%',height: \"400px\" }}><Pie data={dataPieLiabs} options={optionsPieLiabs} /></div>\r\n                <div style={{float: 'left',width: '50%',height: \"400px\"}}><Pie data={dataPieLiabsAtDeath} options={optionsPieLiabsAtDeath} /></div>\r\n              </article></div>\r\n         ) : (\r\n           \r\n            <article className=\"canvas-container\" style={{height: \"450px\" }}>\r\n                <div style={{overflow:'hidden', float: 'left', width: '50%',height: \"400px\" }}><Pie data={dataPieEstateLiabNow} options={optionsPieEstateLiab} /></div >\r\n                <div style={{float: 'left',width: '50%',height: \"400px\"}}><Pie data={dataPieEstateLiabLE} options={optionsPieEstateLiabLE} /></div>\r\n              </article>)}\r\n          </div>\r\n\r\n<br/>\r\n           <h3 className=\"ppi1\">\r\n          {this.props.INAOption === DISPLAY_INCOME\r\n            ? <div>\"Net Worth Today:\"<br/> \"Assets:\"<br/> \"Liabilities:\"</div> //this.props.insuranceNeed\r\n            : <br/>\r\n            }\r\n          {/*numFormat(this.props.dataTaxLiability[0], false, 2, \",\")}*/}\r\n        </h3>\r\n\r\n\r\n\r\n        <h3 className=\"ppi1\">\r\n          {needTo} {/*:{\" \"}*/}\r\n          {this.props.INAOption === DISPLAY_INCOME\r\n            ? \"\" //this.props.insuranceNeed\r\n            : \"\"}\r\n          {/*numFormat(this.props.dataTaxLiability[0], false, 2, \",\")}*/}\r\n        </h3>\r\n\r\n             {this.props.INAOption === DISPLAY_INCOME ? (\r\n              <article className=\"canvas-container\" style={{ height: \"200px\" }}>\r\n                <Line data={dataShortfallFV} options={optionsFV} />\r\n              </article>\r\n            ) : (\r\n              <article className=\"canvas-container\" style={{ height: \"200px\" }}>\r\n                <Bar data={dataTaxLiability} options={optionsFV} />\r\n              </article>\r\n            )}\r\n\r\n            {/*  {this.props.INAOption !== DISPLAY_INCOME &&\r\n             <div>\r\n              <canvas id=\"myChart\" ref={this.chartRef} />\r\n            </div>}\r\n             */}\r\n          \r\n            <br /> <br /> <br /> <br />\r\n            <hr />\r\n            <h2>Insurance Quote:</h2>\r\n            <div style={{ width: \"100%\", float: \"left\", clear: \"left\" }}>\r\n              <MultiButtons\r\n                noButtons={1}\r\n                buttonCaption={[\"Optimize\"]}\r\n                selectMultiButton={this.solveForOptimumQuote}\r\n              />\r\n            </div>\r\n            <div style={{ width: \"100%\", float: \"left\", clear: \"left\" }}>\r\n              <MultiButtons\r\n                noButtons={2}\r\n                buttonCaption={[\"Best EquiBuild fit\", \"Manulife UL fit\"]}\r\n                selectMultiButton={this.solveForOptimumEquiBuild}\r\n              />\r\n            </div>\r\n            <InputField\r\n              inputName=\"Insurance Amtount\"\r\n              id={4}\r\n              format={2}\r\n              Count={1}\r\n              language={this.props.language}\r\n              inputValue={this.props.INAOption === DISPLAY_INCOME\r\n        ? this.props.insuranceNeed\r\n        : this.props.dataEstateLiability[0]}\r\n              maxValue={1000}\r\n              handleUpdateInput={this.selectMultiButton}\r\n            />\r\n            <InputField\r\n              inputName=\"No. of deposits\"\r\n              id={1}\r\n              format={1}\r\n              Count={1}\r\n              language={this.props.language}\r\n              inputValue={this.premiumDur}\r\n              handleUpdateInput={this.selectMultiButton}\r\n            />\r\n            <InputField\r\n              inputName=\"Over min. deposit\"\r\n              id={2}\r\n              format={3}\r\n              Count={1}\r\n              maxValue={300}\r\n              language={this.props.language}\r\n              inputValue={this.minMultiple}\r\n              handleUpdateInput={this.selectMultiButton}\r\n            />\r\n            <h3 style={{ marginTop: \"20px\", marginLeft: \"20px\" }}>\r\n              Minimize this measure of goodness of fit: {SumOfSquresDiff}{\" \"}\r\n              <span style={{ leftPadding: \"20px\" }}>\r\n                {\" \"}\r\n                Premium duration: {this.bestPremiumDur}\r\n              </span>{\" \"}\r\n            </h3>\r\n            <article className=\"canvas-container\" style={{ height: \"200px\" }}>\r\n              <Line data={dataMCCQuoteDB} options={optionsFV} />\r\n            </article>\r\n            <br /> <br /> <br /> <br />\r\n            <br /> <br /> <br /> <br />\r\n            <hr />\r\n            <h2>Compare Options</h2>\r\n            <article className=\"canvas-container\" style={{ height: \"200px\" }}>\r\n              <Line data={dataMCCpremFV} options={optionsFV} />\r\n            </article>\r\n            <p />\r\n            <br />\r\n            <p />\r\n            <br />\r\n            <hr />\r\n           \r\n            <div style={{ width: \"60%\" }}>\r\n              <DataTable\r\n                dataColTitles={colHeaders}\r\n                dataProjection={dataProjection}\r\n                gridTitle={\"Compare Options\"}\r\n                language={this.props.language}\r\n              />\r\n            </div>\r\n            <br />\r\n            {this.dataSVManulife.length > 0 && this.dataSVEquiBuild.length > 0 && (\r\n              <div style={{ width: \"60%\" }}>\r\n                <DataTable\r\n                  dataColTitles={[\r\n                    \"Age\",\r\n                    \"EquiBuild Surrnder Value\",\r\n                    \"ManuLife UL Surrnder Value\"\r\n                  ]}\r\n                  dataProjection={dataProjectionCV}\r\n                  gridTitle={\"Compare Surrender Values: EquiBuild vs Manulife UL\"}\r\n                  language={this.props.language}\r\n                />\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAhdEVYdENyZWF0aW9uIFRpbWUAMjAxOTowODozMSAwOTowOTo1NrtZ+qQAAAR6SURBVHhe7ZyLjVNBDEUXuqIhGoAytgEoCMoCTTazmrzkfWb8t++RVkRCSM++Z+zJE9ovP379+fcGylJCgPfv3+6f5vj5++/9U15SCbAa9CyZxAgtgFbgZ0QWIpwAXkLfI5oMIQTwHvoeEWRwK0DU0PfwKoM7AbIFv8WbCG4EyB78Fi8ifL3/aUq18ButZg91mwrgpQmWWNdvsgKqh76HxVpQF8Aq/JXmWjyrtgSqAmg1VLKJGWoYURFAumkWo7MjWZtGXeICRG/QDBK1StcoKkDEhnDAXbdkzWICRGqCFJw9kKpfRIAIhWvC1Q+JXrAL4LlYazz2hvVNIMI/xmNdbAIg/Gu0+qg1cvW6wSIAxwNxNCYSXiQgC8AVfkU8SEASAOHTsZZgWQCEz4elBGyXwFkQ/iNWEiwJQDGuFYrwX2PRm2kBOEY/kGElmykBqOHj5F+D0qfZjNTuAAh/Dq1+XRaAuvfBPKt9m8lKfAIgfBrSElwSgLr7gV9OBcDot0dyCoitAM/ht8Zsf7wj1c9DASI0ZoajsKOIMMtZTSITwOPpvxquZwkk+rorwGojIoffySbBUT1idwAQA1YBMpz+TrYpsMdLATwXD9bYy5RtAng8/Znh6jfuAIV4NQWeBMg2/ldPSpWJxjIBMP5t4Oh7iRUw26jMQm8n/IMAmW//V0ONFj71eckTIFLD2rPuPe/R32WmxArY0sMef6pSUoDqjKv+U4DM+z87lAlGmgCVR2cWsAKKAwGKAwGKAwGK0i/9t98StvININoFEDU+0+rDBChOCQFW33Gs/rtIYAIUBwIUBwIUBwIUBwIUBwIUBwIUBwIUBwIUBwIUZ1mACq9JI7Gax00A/NeuumAFFKUfeghQHAhQHJIAuAjGBxMgAZSD+CkAvgnUBBOgIONhJwuAe0BsMAGCQz2ADwLgHlAPlgmANWDDSt+3hxwroDhPAmAN1IJtAmAN6MIx/htYAcV5KcDqGsAU0IHr9DcwAYrDLgCmgCzc/d0VgPJtABL44ihLrIBASBysQwEwBfyw2s+zDEUnACTwz6kAlCnghdUavNQudfob4ncATAEa0v27/Zq4++dDqA+SYZJoQ+n51X5fngDUADEJ5tAIvyG+AkYgwTU0+zQlAMa4f2Yzmp4AHKsAk2AfrdHfUV0BI5DgEauDsSQA1yqABB9w9GE1k+UJAAl4sAy/QVoBkICGdfgN8h0AEqzhIfzG5TeBZ3AGyCWVR7j6xNUjtm8BnKFlnQYe62ITgJvWrCwicNfCedjYVsCIRHAR10KEPogI0JA6vRFEiHQAxARoSEnQ8ChCROlFBWhIStCxlEG6PunaxAVoaEgwIt00rXo0xFYRoKEtwZaVZlo+s9ZUUxOgYy2Cd7SC76i/B9AuMBIWvVGfACOYBh9YHgrTN4Gt8OoTwbp+F6+CK0rgRX7TFfCK7GvBm+zuBOhkE8HrlHMrwEhUGSKsthACdKKIECH4TigBRrzJECn0kbACbNEWImrgW9IIsAdVjCxB75FeAHDE29t/eyk/hYljv2IAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,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\"","var map = {\n\t\"./ar\": 366,\n\t\"./ar.js\": 366,\n\t\"./az\": 367,\n\t\"./az.js\": 367,\n\t\"./be\": 368,\n\t\"./be.js\": 368,\n\t\"./bg\": 369,\n\t\"./bg.js\": 369,\n\t\"./bs\": 370,\n\t\"./bs.js\": 370,\n\t\"./ca\": 371,\n\t\"./ca.js\": 371,\n\t\"./cs\": 372,\n\t\"./cs.js\": 372,\n\t\"./cy\": 373,\n\t\"./cy.js\": 373,\n\t\"./da\": 374,\n\t\"./da.js\": 374,\n\t\"./de\": 375,\n\t\"./de.js\": 375,\n\t\"./el\": 376,\n\t\"./el.js\": 376,\n\t\"./en\": 237,\n\t\"./en.js\": 237,\n\t\"./es\": 377,\n\t\"./es.js\": 377,\n\t\"./et\": 378,\n\t\"./et.js\": 378,\n\t\"./eu\": 379,\n\t\"./eu.js\": 379,\n\t\"./fa\": 380,\n\t\"./fa.js\": 380,\n\t\"./fi\": 381,\n\t\"./fi.js\": 381,\n\t\"./fr\": 382,\n\t\"./fr.js\": 382,\n\t\"./hr\": 383,\n\t\"./hr.js\": 383,\n\t\"./hu\": 384,\n\t\"./hu.js\": 384,\n\t\"./id\": 385,\n\t\"./id.js\": 385,\n\t\"./it\": 386,\n\t\"./it.js\": 386,\n\t\"./ja\": 387,\n\t\"./ja.js\": 387,\n\t\"./ka\": 388,\n\t\"./ka.js\": 388,\n\t\"./ko\": 389,\n\t\"./ko.js\": 389,\n\t\"./lt\": 390,\n\t\"./lt.js\": 390,\n\t\"./lv\": 391,\n\t\"./lv.js\": 391,\n\t\"./mk\": 392,\n\t\"./mk.js\": 392,\n\t\"./mn\": 393,\n\t\"./mn.js\": 393,\n\t\"./ms\": 394,\n\t\"./ms.js\": 394,\n\t\"./nb_NO\": 395,\n\t\"./nb_NO.js\": 395,\n\t\"./nl\": 396,\n\t\"./nl.js\": 396,\n\t\"./pl\": 397,\n\t\"./pl.js\": 397,\n\t\"./pt\": 398,\n\t\"./pt.js\": 398,\n\t\"./pt_BR\": 399,\n\t\"./pt_BR.js\": 399,\n\t\"./ro\": 400,\n\t\"./ro.js\": 400,\n\t\"./ru\": 401,\n\t\"./ru.js\": 401,\n\t\"./se\": 402,\n\t\"./se.js\": 402,\n\t\"./sl\": 403,\n\t\"./sl.js\": 403,\n\t\"./sq\": 404,\n\t\"./sq.js\": 404,\n\t\"./sr\": 405,\n\t\"./sr.js\": 405,\n\t\"./sv\": 406,\n\t\"./sv.js\": 406,\n\t\"./tr\": 407,\n\t\"./tr.js\": 407,\n\t\"./ua\": 408,\n\t\"./ua.js\": 408,\n\t\"./uk\": 409,\n\t\"./uk.js\": 409,\n\t\"./vi\": 410,\n\t\"./vi.js\": 410,\n\t\"./zh\": 411,\n\t\"./zh.js\": 411,\n\t\"./zh_TW\": 412,\n\t\"./zh_TW.js\": 412\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 585;","import React, { Component } from \"react\";\r\n\r\nexport class AddRemove extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.doAdd = this.doAdd.bind(this);\r\n    this.doRemove = this.doRemove.bind(this);\r\n  }\r\n\r\n  doRemove = (id) => {\r\n    if (!this.props.disabled && !this.props.disabledRemove )\r\n      this.props.handleDoRemove(id);\r\n  };\r\n\r\n  doAdd = () => {\r\n    if (!this.props.disabled)\r\n      this.props.handleDoAdd();\r\n  };\r\n\r\n  render() {\r\n    const noRow = 0; //this.props.minComps === 2 ? 2 : 0;\r\n    let className=\"addRemove\";\r\n    let classNameRemove=\"addRemove\";\r\n    if(this.props.disabled)\r\n    {\r\n      className=\"addRemove addRemoveDisabled\";\r\n      classNameRemove=\"addRemove addRemoveDisabled\";\r\n    }  \r\n    if(this.props.disabledRemove)\r\n      classNameRemove=\"addRemove addRemoveDisabledRemove\";\r\n    \r\n\tlet minRows = this.props.minComps;\r\n    const maxRows=this.props.maxRows === undefined?100:this.props.maxRows;\r\n    \r\n    if (minRows === undefined) minRows = 1;\r\n    var returnAR = \"\";\r\n\r\n    \r\n    if (\r\n      (this.props.currentID >= this.props.numberComps ||\r\n      this.props.numberComps === 0) && this.props.currentID < maxRows\r\n    ) {\r\n      returnAR = (\r\n        <span>\r\n          <button className={className} onClick={this.doAdd}>\r\n            +\r\n          </button>\r\n        </span>\r\n      );\r\n      if (\r\n        (minRows > 1 && this.props.currentID > minRows) ||\r\n        this.props.currentID > minRows\r\n      )\r\n        returnAR = (\r\n          <span>\r\n            <button className={className} onClick={this.doAdd}>\r\n              +\r\n            </button>\r\n            <button\r\n              className={classNameRemove}\r\n              onClick={() => {\r\n                this.doRemove(this.props.currentID);\r\n              }}\r\n            >\r\n              -\r\n            </button>\r\n          </span>\r\n        );\r\n    } else if (\r\n      !(this.props.fixedFirstRow === true && this.props.currentID === 1) &&\r\n      (this.props.currentID > minRows || minRows <= 1)\r\n    )\r\n      returnAR = (\r\n        <span>\r\n          <button\r\n            className={classNameRemove}\r\n            onClick={() => {\r\n              this.doRemove(this.props.currentID);\r\n            }}\r\n          >\r\n            -\r\n          </button>\r\n        </span>\r\n      );\r\n    return returnAR;\r\n  }\r\n}\r\n","import { name, version } from \"../../package.json\";\r\nimport {\r\n  GROWTHDIR,\r\n  MONTHS,\r\n  ASSETS,\r\n  ASSET_OWNERSHIP_ACTION,\r\n  ASSET_TAX,\r\n  INCOMESOURCES,\r\n  OWNERSHIP,\r\n  SEX,\r\n  SMOKING,\r\n  MEMBER,\r\n  LIABILITIES,\r\n  INCOMENEEDS,\r\n  PROVINCE,\r\n  QUOTE_SPOUSE,\r\n  QUOTE_CLIENT,\r\n  DEFAULT_QUOTE,\r\n  OUTPUT_WIDTH_PCT,\r\n  APPLET_EP,\r\n  MAX_ORPHAN_DUR_QC,\r\n  MAX_ORPHAN_DUR_NON_QC,\r\n} from \"../definitions/generalDefinitions\";\r\nimport {\r\n  cleanFormat,\r\n  formatMoney,\r\n  getListItemNameFromKey,\r\n  isSingleFamily,\r\n  getDefaultImages,\r\n  getListItemKeyFromName,\r\n} from \"../utils/helper\";\r\n\r\nimport { versionDetails, getAfterTaxTotalIncome } from \"../utils/helper\";\r\nimport { appletMode } from \"../../package.json\";\r\nimport { element } from \"prop-types\";\r\n\r\nexport function setUIDataToAPI(dataInput, outputInsuranceNeed) {\r\n// console.log(dataInput)\r\n  let age = dataInput.Clients[0].Age;\r\n  const taxRate =\r\n    dataInput.length > 1\r\n      ? dataInput.Clients[QUOTE_SPOUSE].avgTaxRate / 100\r\n      : dataInput.Clients[QUOTE_CLIENT].avgTaxRate / 100;\r\n  if (dataInput.length > 1 && dataInput.Clients[QUOTE_SPOUSE].Age < age)\r\n    age = dataInput.Clients[QUOTE_SPOUSE].Age;\r\n  let dataLives = setLives(dataInput);\r\n  let dataAssets = setAssets(dataInput);\r\n  let dataLiabs = setLiabs(dataInput);\r\n  let dataSources = setSources(dataInput, taxRate);\r\n  let dataEstateContings = setEstateContings();\r\n  let dataIncomeNeeds = setIncomeNeeds(dataInput);\r\n  let dataRates = setRates(dataInput);\r\n  let dataProjSettings = setProjSettings(age, dataInput, parseFloat(cleanFormat(outputInsuranceNeed, dataInput.Presentations[0].language)));\r\n  let dataNA = {\r\n    lives: dataLives,\r\n    assets: dataAssets,\r\n    liabilities: dataLiabs,\r\n    personalIncomeSources: dataSources,\r\n    estateContingiencies: dataEstateContings,\r\n    incomeNeeds: dataIncomeNeeds,\r\n    ratesPack: dataRates,\r\n    projectionSettings: dataProjSettings,\r\n    //liabilities: null,\r\n    //personalIncomeSources: null,\r\n    //estateContingiencies:  null,\r\n    //incomeNeeds:  null\r\n    //ratesPack:  null,\r\n    //projectionSettings:  null\r\n  };\r\n // console.log(dataNA)\r\n  return dataNA;\r\n}\r\n\r\nfunction setLives(dataInput) {\r\n  let dataE = [];\r\n  let i;\r\n  // for calc purposes\r\n  for (i = 0; i < dataInput.Clients.length; i++) {\r\n    dataE.push({\r\n      Age: dataInput.Clients[i].Age,\r\n      Sex: dataInput.Clients[i].sexKey, // === SEX.FEMALE.Key ? SEX.FEMALE : SEX.MALE,\r\n      Smk:\r\n        dataInput.Clients[i].smokerKey === SMOKING.SMOKER.Key\r\n          ? \"S_STD\"\r\n          : \"NS_STD\", // 2 and 5 : this MCC stuff with 5 leveles elite ...\r\n      Rating: 100,\r\n      //\t\tmember: (i===1 && dataInput.Clients[i].memberKey===MEMBER.DEPENDENT_ADULT.Key)? MEMBER.SPOUSE.Key: //MEMBER[\"en\"].Values[MEMBER[lang].Values.indexOf(dataInput.Clients[i].member)],\r\n      //\t\t\t\t\tdataInput.Clients[i].memberKey,//Object.values(MEMBER).filter(obj => obj.Key=== dataInput.Clients[i].memberKey)[0],//.value.en,\r\n      member: dataInput.Clients[i].memberKey,\r\n      salary: dataInput.Clients[i].Income,\r\n      CPPeligibility: dataInput.Clients[i].Eligibility / 100,\r\n      retirementAge: dataInput.Clients[i].retirementAge,\r\n      avgTaxRate: dataInput.Clients[i].avgTaxRate / 100,\r\n      isQC: dataInput.Presentations[0].provinceKey === \"QC\" ? true : false,\r\n      Name: dataInput.Clients[i].Name,\r\n    });\r\n  }\r\n  return dataE;\r\n}\r\n\r\nfunction setTaxAPIMethod(TaxKey, assetKey) {\r\n  // based on API enum\r\n  /* public enum taxTreatments\r\n        {\r\n            NonTaxable=0,\r\n            CapitalGainIncome, 1\r\n            CapitalGainAnnual, 2\r\n            Registered, 3\r\n            FullyTaxable, 4\r\n            CapitalGainDividend,  5\r\n            Dividend, 6\r\n            RRIF, 7\r\n            LifeInsurance, 8\r\n            Cash, 9\r\n            InterestIncome, 10\r\n            CapitalGainQSmallBusiness, 11\r\n        } */\r\n  // from\r\n  /* 'Non-taxable',\t\r\n\t\t\t\"Capital Gains Deferred\",\r\n\t\t\t\"Capital Gains Annual\",\r\n\t\t\t'Registered',\t\r\n\t\t\t'Fully Taxable',\t\r\n\t\t\t'Dividend'\t */\r\n  //console.log(Tax,Type,)\r\n\r\n  let taxMethodIndex = 0;\r\n\r\n  if (TaxKey === ASSET_TAX.NON_TAXABLE.Key) taxMethodIndex = 0;\r\n  //NonTaxable\r\n  else if (TaxKey === ASSET_TAX.CAPITAL_GAINS_DEFERRED.Key) {\r\n    if (assetKey === ASSETS.SMALL_BUSINESS_SHARES.Key)\r\n      //value[lang])\r\n      taxMethodIndex = 11;\r\n    // CapitalGainQSmallBusiness, 11\r\n    else taxMethodIndex = 1; // CapitalGainIncome, 1\r\n  } else if (TaxKey === ASSET_TAX.CAPITAL_GAINS_ANNUAL.Key) taxMethodIndex = 2;\r\n  //  CapitalGainAnnual\r\n  else if (TaxKey === ASSET_TAX.FULLY_TAXABLE.Key) {\r\n    if (assetKey === ASSETS.INTEREST_BEARING.Key)\r\n      //value[lang])\r\n      taxMethodIndex = 10;\r\n    //InterestIncome, 10\r\n    else taxMethodIndex = 4; // FullyTaxable, 4\r\n  } else if (TaxKey === ASSET_TAX.REGISTERED.Key) taxMethodIndex = 3;\r\n  //Registered, 3\r\n  else if (TaxKey === ASSET_TAX.DIVIDEND.Key) taxMethodIndex = 6; //  Dividend, 6\r\n\r\n  // console.log(taxMethodIndex)\r\n  return taxMethodIndex;\r\n}\r\n\r\nfunction setAssets(dataInput) {\r\n  let dataE = [];\r\n  let i;\r\n  for (i = 0; i < dataInput.Assets.length; i++) {\r\n    const asset = dataInput.Assets[i];\r\n    const assetDesc = asset.description;\r\n    const assetTypeKey =\r\n      asset.assetTypeKey; /*\r\n      dataInput,\r\n      asset.assetTypeKey,\r\n      asset.assetTaxTypeKey\r\n    ); */ // don't add survivor's insurance do in API // const nonClientInsurance=!(asset.assetTypeKey===ASSETS.LIFE_INSURANCE.Key && (asset.ownerKey===ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key || element.ownerKey===ASSET_OWNERSHIP_ACTION.CLIENT_ROLLOVER.Key))\r\n    /*    console.log(asset) */ dataE.push({\r\n      name: Object.values(ASSETS).filter((obj) => obj.Key === assetTypeKey)[0]\r\n        .value.en,\r\n      desc: assetDesc,\r\n      ID: Object.values(ASSETS).filter((obj) => obj.Key === assetTypeKey)[0].ID,\r\n      //taxMethod: setTaxAPIMethod( asset.assetTaxTypeKey,asset.assetTypeKey),\r\n      taxMethod: asset.assetTaxTypeKey,\r\n      //Object.values(ASSET_TAX).filter(obj => obj.Key=== asset.assetTaxTypeKey)[0].value.en,\r\n      owner: Object.values(ASSET_OWNERSHIP_ACTION).filter(\r\n        (obj) => obj.Key === asset.ownerKey\r\n      )[0].ID, // enums in API is same 0-4\r\n      ACB: asset.ACB,\r\n      smallBusinessCapGainExemption: asset.smallBusinessCapGainExemption,\r\n      dispositionYr:\r\n        asset.assetTaxTypeKey === ASSET_TAX.REGISTERED.Key &&\r\n        asset.ownerKey !== ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key\r\n          ? 99\r\n          : asset.DisposeYr,\r\n      dispositionDur: asset.DisposeDur === 0 ? 1 : asset.DisposeDur,\r\n      dispositionYrUlt: 100,\r\n      currValue: asset.currValue,\r\n      annualGrowth: asset.growth / 100,\r\n      incomeRate: asset.incomeRate / 100,\r\n      contributionAmt: asset.contributionAmt,\r\n      contributionStartYr: asset.contributionStartYr,\r\n      contributionDur: asset.contributionDur,\r\n      withdrawalAmt: asset.withdrawalAmt,\r\n      withdrawalStartYr: asset.withdrawalStartYr,\r\n      withdrawalDur: asset.withdrawalDur,\r\n      RRIFStartAge: asset.RRIFStartAge - 1, // changed from 70 to 71 so adjust here API uses 70\r\n    });\r\n  }\r\n  return dataE;\r\n}\r\n\r\nfunction setLiabs(dataInput) {\r\n  let dataE = [];\r\n  let i;\r\n  for (i = 0; i < dataInput.Liabilitys.length; i++) {\r\n    const growth =\r\n      /*  GROWTHDIR[dataInput.Presentations[0].language].Values.indexOf(\r\n        dataInput.Liabilitys[i].growthDir\r\n      ) */\r\n\r\n      dataInput.Liabilitys[i].growthDirKey === GROWTHDIR.GROWS.Key\r\n        ? dataInput.Liabilitys[i].growth / 100\r\n        : -dataInput.Liabilitys[i].growth / 100;\r\n    const liabTypeKey = dataInput.Liabilitys[i].liabTypeKey;\r\n    const liabDesc = dataInput.Liabilitys[i].description;\r\n  \r\n    dataE.push({\r\n      name: Object.values(LIABILITIES).filter(\r\n        (obj) => obj.Key === liabTypeKey\r\n      )[0].value.en,\r\n      ID: Object.values(LIABILITIES).filter((obj) => obj.Key === liabTypeKey)[0]\r\n        .ID,\r\n      owner: dataInput.Liabilitys[i].ownerKey, // OWNERSHIP[\"en\"].Values[OWNERSHIP[lang].Values.indexOf(dataInput.Liabilitys[i].Owner)],\r\n      desc: liabDesc,\r\n      currValue: dataInput.Liabilitys[i].currValue,\r\n      annualGrowth: growth,\r\n      exposureDur: dataInput.Liabilitys[i].exposureDur,\r\n      annualRepay: dataInput.Liabilitys[i].repay,\r\n    });\r\n  }\r\n  return dataE;\r\n}\r\n\r\nfunction setSources(dataInput, avgTaxRate) {\r\n  let dataE = [];\r\n  let i;\r\n  for (i = 0; i < dataInput.Sources.length; i++) {\r\n    // find source owner avgtaxrate\r\n    let avgTaxRate;\r\n    let salaryOwner = dataInput.Clients.filter((item) => {\r\n      return item.id === dataInput.Sources[i].ownerID;\r\n    });\r\n    if (salaryOwner !== undefined && salaryOwner.length > 0)\r\n      avgTaxRate = salaryOwner[0].avgTaxRate / 100;\r\n\r\n    const sourceTypeKey = dataInput.Sources[i].sourceTypeKey;\r\n    // gov is taken care of in API only needs elig %\r\n    //if (dataInput.Sources[i].Type !== INCOMESOURCES[lang].Values[1] && dataInput.Sources[i].Type !== INCOMESOURCES[lang].Values[2] && dataInput.Sources[i].Type !== INCOMESOURCES[lang].Values[3]) {\r\n    if (\r\n      !(\r\n        dataInput.Sources[i].sourceTypeKey ===\r\n          INCOMESOURCES.GOV_SURVIVORS_PENSION.Key ||\r\n        dataInput.Sources[i].sourceTypeKey ===\r\n          INCOMESOURCES.GOV_ORPHANS_BENEFIT.Key ||\r\n        dataInput.Sources[i].sourceTypeKey ===\r\n          INCOMESOURCES.GOV_DEATH_BENEFIT.Key\r\n      )\r\n    ) {\r\n      dataE.push({\r\n        ID: Object.values(INCOMESOURCES).filter(\r\n          (obj) => obj.Key === sourceTypeKey\r\n        )[0].ID,\r\n        name: Object.values(INCOMESOURCES).filter(\r\n          (obj) => obj.Key === sourceTypeKey\r\n        )[0].value.en,\r\n        amount: dataInput.Sources[i].amount,\r\n        startYear: dataInput.Sources[i].startYear,\r\n        duration: dataInput.Sources[i].duration,\r\n        annualGrowth: dataInput.Presentations[0].inflation / 100,\r\n        taxRate:\r\n          sourceTypeKey === INCOMESOURCES.DIVIDEND_INCOME.Key\r\n            ? dataInput.Sources[i].taxRate / 100\r\n            : avgTaxRate,\r\n        ownerID: dataInput.Sources[i].ownerID,\r\n      });\r\n    }\r\n  }\r\n  return dataE;\r\n}\r\n\r\nfunction setEstateContings() {\r\n  let dataE = [];\r\n  return dataE;\r\n}\r\n\r\nfunction setIncomeNeeds(dataInput) {\r\n  let dataItems = [];\r\n  let i;\r\n  for (i = 0; i < dataInput.Needs.length; i++) {\r\n    const needTypeKey = dataInput.Needs[i].needTypeKey;\r\n    dataItems.push({\r\n      ID: Object.values(INCOMENEEDS).filter((obj) => obj.Key === needTypeKey)[0]\r\n        .ID,\r\n      name: Object.values(INCOMENEEDS).filter(\r\n        (obj) => obj.Key === needTypeKey\r\n      )[0].value.en,\r\n\r\n      amount: dataInput.Needs[i].amount,\r\n      incomePercent: dataInput.Needs[i].Percent / 100,\r\n      startYear: dataInput.Needs[i].startYear,\r\n      duration: dataInput.Needs[i].duration,\r\n      annualGrowth: dataInput.Presentations[0].inflation / 100,\r\n    });\r\n  }\r\n  let dataE = {\r\n    incomePercentAfterDeath: 0.6,\r\n    incomeNeedItems: dataItems,\r\n    upToChildrenOutYrs: 0,\r\n    childrenOutToRetirementYrs: 0,\r\n    retirementToEndYrs: 0,\r\n  };\r\n\r\n  return dataE;\r\n}\r\n\r\nfunction setProjSettings(age, dataInput, outputInsuranceNeed) {\r\n  var tempDate = new Date();\r\n  var date =\r\n    tempDate.getFullYear() +\r\n    \"-\" +\r\n    (tempDate.getMonth() + 1) +\r\n    \"-\" +\r\n    tempDate.getDate();\r\n\r\n  let dataE = {\r\n    deathYear: 0,\r\n    deathOf: 0,\r\n    startYear: 1,\r\n    endYear: 100 - age + 1,\r\n    province: dataInput.Presentations[0].provinceKey,\r\n    language: dataInput.Presentations[0].language === \"en\" ? 0 : 1,\r\n    returnType: 4,\r\n    projectEndOption: dataInput.Presentations[0].periodOption, //toRetirement ? 0 : 1,\r\n    clientsName1: dataInput.Presentations[0].designedFor,\r\n    agentName: dataInput.Presentations[0].designedBy,\r\n    valuationDate: date,\r\n    notes: dataInput.Presentations[0].notes,\r\n    version: versionDetails().version,\r\n    caller: appletMode,\r\n    insuranceAmt: outputInsuranceNeed,\r\n    /*   imageLogo: dataInput.Presentations[0].adviserLogo.image,\r\n    imageLogoSize:dataInput.Presentations[0].adviserLogo.size,\r\n    imageLogoLeft:dataInput.Presentations[0].adviserLogo.left,\r\n    imageLogoAllPages: dataInput.Presentations[0].adviserLogo.allPages,\r\n    imageApplet: dataInput.Presentations[0].adviserLogo.imageApplet */\r\n  };\r\n  return dataE;\r\n}\r\n\r\nfunction setRates(dataInput) {\r\n  // console.log(dataInput.Presentations[0].taxRate / 100)\r\n  let dataE = {\r\n    investmentRate: dataInput.Presentations[0].invRate / 100,\r\n    taxRate: dataInput.Presentations[0].taxRate / 100,\r\n    dividendTaxRate: 0.33,\r\n    capitalGainsInclusion: 0.5,\r\n    inflationRate: dataInput.Presentations[0].inflation / 100,\r\n  };\r\n\r\n  return dataE;\r\n}\r\n\r\nexport function loadSavedDataToUI(savedJSon, dataInput) {\r\n  //console.log(savedJSon)\r\n  dataInput.Presentations[0].language =\r\n    savedJSon.projectionSettings.language === 0 ? \"en\" : \"fr\";\r\n  let i;\r\n  dataInput.Clients = [];\r\n  dataInput.clientsNo = savedJSon.lives.length;\r\n  //console.log(dataInput.Clients)\r\n\r\n  let smk;\r\n  for (i = 0; i < savedJSon.lives.length; i++) {\r\n    smk = savedJSon.lives[i].Smk <= 2 ? \"NS_STD\" : \"S_STD\";\r\n    const memberKey = Object.values(MEMBER).filter(\r\n      (obj) => obj.ID === savedJSon.lives[i].member\r\n    )[0].Key;\r\n    let addLife = true;\r\n\r\n    if (\r\n      APPLET_EP &&\r\n      !(memberKey === MEMBER.CLIENT.Key || memberKey === MEMBER.SPOUSE.Key)\r\n    )\r\n      addLife = false;\r\n\r\n    if (addLife) {\r\n      dataInput.Clients.push({\r\n        id: i + 1,\r\n        Age: savedJSon.lives[i].Age,\r\n        //savedJSon.lives[i].Sex===0? SEX.MALE.Key : SEX.FEMALE.Key,\r\n        sexKey: Object.values(SEX).filter(\r\n          (obj) => obj.ID === savedJSon.lives[i].Sex\r\n        )[0].Key,\r\n        smokerKey:\r\n          smk === \"NS_STD\" ? SMOKING.NON_SMOKER.Key : SMOKING.SMOKER.Key,\r\n        Income: savedJSon.lives[i].salary,\r\n        avgTaxRate: 100 * savedJSon.lives[i].avgTaxRate,\r\n        //member: MEMBER[data.lang].Values[savedJSon.lives[i].member],\r\n        //MEMBER.[savedJSon.lives[i].member].value[data.lang],\r\n        memberKey: memberKey,\r\n        retirementAge: savedJSon.lives[i].retirementAge,\r\n        Eligibility: 100 * savedJSon.lives[i].CPPeligibility,\r\n        Name: savedJSon.lives[i].Name,\r\n      });\r\n    }\r\n  }\r\n\r\n  //console.log(dataInput.Clients)\r\n\r\n  dataInput.Assets = [];\r\n  dataInput.assetsNo = savedJSon.assets.length;\r\n\r\n  for (i = 0; i < savedJSon.assets.length; i++) {\r\n    // console.log((savedJSon.assets[i].owner),Object.values(ASSET_OWNERSHIP_ACTION).filter(obj => obj.ID=== savedJSon.assets[i].owner)[0].Key)\r\n    // console.log(Object.values(ASSET_OWNERSHIP_ACTION).filter(obj => obj.ID=== savedJSon.assets[i].owner)[0].Key, Object.values(ASSET_TAX).filter(obj => obj.ID=== savedJSon.assets[i].taxMethod)[0].Key)\r\n    // as of ver 1.0.7 personal residence became principal residence\r\n\r\n    if (savedJSon.assets[i].name === ASSETS.PERSONAL_RESIDENCE.value.oldName)\r\n      savedJSon.assets[i].name = ASSETS.PERSONAL_RESIDENCE.value.en;\r\n\r\n    let ownerKey = Object.values(ASSET_OWNERSHIP_ACTION).filter(\r\n      (obj) => obj.ID === savedJSon.assets[i].owner\r\n    )[0].Key;\r\n\r\n    if (APPLET_EP && savedJSon.assets[i].name === ASSETS.RRSP_RRIF.value.en) {\r\n      if (savedJSon.lives.length === 1)\r\n        ownerKey = ASSET_OWNERSHIP_ACTION.CLIENT.Key;\r\n      else {\r\n        if (ownerKey !== ASSET_OWNERSHIP_ACTION.CLIENT.Key)\r\n          ownerKey = ASSET_OWNERSHIP_ACTION.SPOUSE.Key;\r\n      }\r\n    }\r\n\r\n    dataInput.Assets.push({\r\n      id: i + 1,\r\n      //assetTypeKey: Object.values(ASSETS).filter(obj => obj.ID=== savedJSon.assets[i].ID)[0].Key,\r\n      assetTypeKey: findMatchingKey(\r\n        Object.values(ASSETS),\r\n        savedJSon.assets[i].name\r\n      ),\r\n      description: savedJSon.assets[i].desc,\r\n      ownerKey: ownerKey,\r\n      assetTaxTypeKey: Object.values(ASSET_TAX).filter(\r\n        (obj) => obj.ID === savedJSon.assets[i].taxMethod\r\n      )[0].Key,\r\n      currValue: savedJSon.assets[i].currValue,\r\n      growth: savedJSon.assets[i].annualGrowth * 100,\r\n      DisposeYr: savedJSon.assets[i].dispositionYr,\r\n      DisposeDur: savedJSon.assets[i].dispositionDur,\r\n      ACB: savedJSon.assets[i].ACB,\r\n      smallBusinessCapGainExemption:\r\n        savedJSon.assets[i].smallBusinessCapGainExemption,\r\n      contributionAmt: savedJSon.assets[i].contributionAmt,\r\n      contributionStartYr: savedJSon.assets[i].contributionStartYr,\r\n      contributionDur: savedJSon.assets[i].contributionDur,\r\n      withdrawalAmt: savedJSon.assets[i].withdrawalAmt,\r\n      withdrawalStartYr: savedJSon.assets[i].withdrawalStartYr,\r\n      withdrawalDur: savedJSon.assets[i].withdrawalDur,\r\n      incomeRate: savedJSon.assets[i].incomeRate * 100,\r\n      RRIFStartAge: savedJSon.assets[i].RRIFStartAge + 1 ,  // changed from 70 to 71 so adjust here API uses 70\r\n    });\r\n  }\r\n\r\n  dataInput.Liabilitys = [];\r\n  dataInput.liabilitysNo = savedJSon.liabilities.length;\r\n\r\n  for (i = 0; i < savedJSon.liabilities.length; i++) {\r\n    // console.log(savedJSon.liabilities[i])\r\n    // console.log(findMatchingKey(Object.values(LIABILITIES),savedJSon.liabilities[i].name))\r\n    dataInput.Liabilitys.push({\r\n      id: i + 1,\r\n      //liabTypeKey: Object.values(LIABILITIES).filter(obj => obj.ID=== savedJSon.liabilities[i].ID)[0].Key,\r\n      liabTypeKey: findMatchingKey(\r\n        Object.values(LIABILITIES),\r\n        savedJSon.liabilities[i].name\r\n      ),\r\n      description: savedJSon.liabilities[i].desc,\r\n   \r\n      ownerKey: OWNERSHIP.CLIENT.Key,\r\n      currValue: savedJSon.liabilities[i].currValue,\r\n      /* growthDir:\r\n        savedJSon.liabilities[i].annualGrowth >= 0\r\n          ? GROWTHDIR[dataInput.Presentations[0].language].Values[0]\r\n          : GROWTHDIR[dataInput.Presentations[0].language].Values[1], */\r\n      growthDirKey:\r\n        savedJSon.liabilities[i].annualGrowth >= 0\r\n          ? GROWTHDIR.GROWS.Key\r\n          : GROWTHDIR.REDUCES.Key,\r\n      growth: Math.abs(savedJSon.liabilities[i].annualGrowth * 100),\r\n      exposureDur: savedJSon.liabilities[i].exposureDur,\r\n      assetTaxLiabID: 0,\r\n      repay: savedJSon.liabilities[i].annualRepay,\r\n    });\r\n  }\r\n\r\n  dataInput.Sources = [];\r\n\r\n  dataInput.sourcesNo = savedJSon.personalIncomeSources.length;\r\n\r\n  for (i = 0; i < savedJSon.personalIncomeSources.length; i++) {\r\n    dataInput.Sources.push({\r\n      id: i + 1,\r\n      //sourceTypeKey: Object.values(INCOMESOURCES).filter(obj => obj.ID=== savedJSon.personalIncomeSources[i].ID)[0].Key,\r\n      //sourceTypeKey: Object.values(INCOMESOURCES).filter(obj => obj.value.en=== savedJSon.personalIncomeSources[i].Name)[0].Key,\r\n      sourceTypeKey: findMatchingKey(\r\n        Object.values(INCOMESOURCES),\r\n        savedJSon.personalIncomeSources[i].Name\r\n      ),\r\n\r\n      amount: savedJSon.personalIncomeSources[i].amount,\r\n      startYear: savedJSon.personalIncomeSources[i].startYear,\r\n      duration: savedJSon.personalIncomeSources[i].duration,\r\n      taxRate: savedJSon.personalIncomeSources[i].taxRate * 100,\r\n      ownerID:\r\n        savedJSon.personalIncomeSources[i].ownerID === undefined ||\r\n        savedJSon.personalIncomeSources[i].ownerID === 0\r\n          ? dataInput.Clients.length > 1\r\n            ? 2\r\n            : 1\r\n          : savedJSon.personalIncomeSources[i].ownerID, // spouse or 1st child\r\n    });\r\n  }\r\n\r\n  dataInput.Needs = [];\r\n\r\n  //console.log(savedJSon.incomeNeeds.incomeNeedItems.length)\r\n\r\n  dataInput.needsNo = savedJSon.incomeNeeds.incomeNeedItems.length;\r\n\r\n  for (i = 0; i < savedJSon.incomeNeeds.incomeNeedItems.length; i++) {\r\n    //console.log(i,savedJSon.incomeNeeds.incomeNeedItems[i].amount, Object.values(INCOMENEEDS).filter(obj => obj.ID=== savedJSon.incomeNeeds.incomeNeedItems[i].ID)[0].Key)\r\n    const needKey = findMatchingKey(\r\n      Object.values(INCOMENEEDS),\r\n      savedJSon.incomeNeeds.incomeNeedItems[i].name\r\n    );\r\n    let amt = savedJSon.incomeNeeds.incomeNeedItems[i].amount;\r\n    if (\r\n      needKey === INCOMENEEDS.PERCET_OF_INCOME.Key &&\r\n      dataInput.Clients.length > 1\r\n    )\r\n      // ie not single or EP\r\n      amt = parseInt(\r\n        savedJSon.incomeNeeds.incomeNeedItems[i].incomePercent *\r\n          getAfterTaxTotalIncome(dataInput.Clients, 1)\r\n      );\r\n    dataInput.Needs.push({\r\n      id: i + 1,\r\n      //needTypeKey: Object.values(INCOMENEEDS).filter(obj => obj.ID=== savedJSon.incomeNeeds.incomeNeedItems[i].ID)[0].Key,\r\n      //needTypeKey: Object.values(INCOMENEEDS).filter(obj => obj.value.en=== savedJSon.incomeNeeds.incomeNeedItems[i].name)[0].Key,\r\n      needTypeKey: needKey,\r\n\r\n      Percent: savedJSon.incomeNeeds.incomeNeedItems[i].incomePercent * 100,\r\n      amount: amt,\r\n      startYear: savedJSon.incomeNeeds.incomeNeedItems[i].startYear,\r\n      duration: savedJSon.incomeNeeds.incomeNeedItems[i].duration,\r\n    });\r\n  }\r\n\r\n  dataInput.Presentations = [];\r\n  dataInput.presentationsNo = 1;\r\n\r\n  //for (i = 0; i < savedJSon.liabilities.length; i++) {\r\n\r\n  const dataInputDefImages = loadDefaultCase();\r\n  let logo;\r\n  let appletImage;\r\n  /* console.log(dataInputDefImages) */\r\n  if (dataInputDefImages !== undefined && dataInputDefImages !== null) {\r\n    logo = dataInputDefImages.Presentations[0].adviserLogo;\r\n    appletImage = dataInputDefImages.Presentations[0].appletImage;\r\n  } else {\r\n    /* logo={image:null, left: 0,size: 90, allPages: false}\r\n    appletImage={image:null, left: 0,size: 90, allPages: false} */\r\n    const images = getDefaultImages();\r\n    logo = images.adviserLogo; //  {image:null, left: 0,size: OUTPUT_WIDTH_PCT, allPages: false, top:true, showDetails:false}\r\n    appletImage = images.appletImage; //{image:APPLET_INA? require(\"../images/INA.png\"):require(\"../images/estate.protection.applet.cover.graphic.png\"), left: 0,size: OUTPUT_WIDTH_PCT, allPages: false, top:true, showDetails:false}\r\n  }\r\n\r\n  dataInput.Presentations.push({\r\n    id: 1,\r\n    provinceKey: Object.values(PROVINCE).filter(\r\n      (obj) => obj.ID === savedJSon.projectionSettings.province\r\n    )[0].Key,\r\n    invRate: savedJSon.ratesPack.investmentRate * 100,\r\n    inflation: savedJSon.ratesPack.inflationRate * 100,\r\n    taxRate: savedJSon.ratesPack.taxRate * 100,\r\n    designedFor: savedJSon.projectionSettings.clientsName1,\r\n    designedBy: savedJSon.projectionSettings.agentName,\r\n    valuationDate: savedJSon.projectionSettings.valuationDate,\r\n    notes: savedJSon.projectionSettings.notes,\r\n    // version: savedJSon.projectionSettings.version, keep curr app version as opposed to saved ver\r\n    language: savedJSon.projectionSettings.language === 0 ? \"en\" : \"fr\",\r\n    periodOption: savedJSon.projectionSettings.projectEndOption, //=== DISPLAY_RETIREMENT add this for saved files\r\n\r\n    adviserLogo: logo,\r\n    appletImage: appletImage,\r\n    //imageApplet:savedJSon.projectionSettings.imageApplet,\r\n  });\r\n\r\n  return dataInput;\r\n}\r\n\r\nexport function loadDefaultCase() {\r\n  let storageKey = DEFAULT_QUOTE;\r\n\r\n  const objJSONData = JSON.parse(localStorage.getItem(storageKey));\r\n  // make sure details dont show\r\n  //objJSONData.Presentations[0].adviserLogo.showDetails=false\r\n  return objJSONData;\r\n}\r\n\r\nexport function getOutputValues(data) {\r\n  let output = {\r\n    designedFor: \"\",\r\n    designedBy: \"\",\r\n    dateApplet: \"\",\r\n    province: \"\",\r\n    clients: [],\r\n    assets: [],\r\n    liabilities: [],\r\n    source: [],\r\n    totalLiab: 0,\r\n    Income: 0,\r\n    Income2: 0,\r\n    survivorATaxIncome: 0,\r\n    percentNeed1: 0,\r\n    percentNeed2: [],\r\n    govDB: 0,\r\n    totalAsset: 0,\r\n    totalDisposeAsset: 0,\r\n    totalLiab: 0,\r\n    totalSource: 0,\r\n    totalSource2: 0,\r\n    percentNeed1: 0,\r\n    totalSource: 0,\r\n    totalSourceATax: 0,\r\n    totalSource2ATax: 0,\r\n    infRate: 0,\r\n    invRate: 0,\r\n    insNeedLE: 0,\r\n    insNeedRet: 0,\r\n    insNeedYgChild25: 0,\r\n    insNeedYgChild18: 0,\r\n    ygChild: 100,\r\n    hasChild: false,\r\n  };\r\n\r\n  let dateObj = new Date();\r\n  let month = dateObj.getUTCMonth() + 1; //months from 1-12\r\n  let day = dateObj.getUTCDate();\r\n  let year = dateObj.getUTCFullYear();\r\n  const input = data.dataInput;\r\n  const singleFamily = isSingleFamily(input.Clients);\r\n\r\n  output.language = input.Presentations[0].language;\r\n  output.dateApplet =\r\n    output.language === \"en\"\r\n      ? MONTHS[output.language][month - 1] + \" \" + day + \", \" + year\r\n      : day + \" \" + MONTHS[output.language][month - 1] + \" \" + year;\r\n  //output.language === \"en\"\r\n  //\t? months[month - 1] + \" \" + day + \", \" + year\r\n  //\t: day + \" \" + monthsFr[month - 1] + \" \" + year;\r\n  output.designedFor = input.Presentations[0].designedFor;\r\n  output.designedBy = input.Presentations[0].designedBy;\r\n  output.province = getListItemNameFromKey(\r\n    //input.Presentations[0].Province\r\n    PROVINCE,\r\n    input.Presentations[0].provinceKey,\r\n    output.language\r\n  );\r\n\r\n  //const retAge = input.Clients[0].retirementAge;\r\n  //const retAge2 = input.Clients[1].retirementAge;\r\n  output.Income = input.Clients[QUOTE_CLIENT].Income;\r\n  output.Income2 =\r\n    input.Clients.length > 1 ? input.Clients[QUOTE_SPOUSE].Income : 0;\r\n\r\n  output.invRate = input.Presentations[0].invRate;\r\n  output.infRate = input.Presentations[0].inflation;\r\n \r\n  output.insNeedRet = parseFloat(cleanFormat(data.insuranceNeedRet, output.language));\r\n  output.insNeedLE = parseFloat(cleanFormat(data.insuranceNeedLE, output.language));\r\n\r\n  output.ygChild = 100;\r\n  output.hasChild = false;\r\n  const childMember = MEMBER.CHILD.Key;\r\n  let Children = input.Clients.filter(function (item) {\r\n    return item.memberKey === childMember;\r\n  });\r\n  if (Children.length > 0) {\r\n    output.hasChild = true;\r\n    Children.forEach((element) => {\r\n      if (element.Age <= output.ygChild) output.ygChild = element.Age;\r\n    });\r\n  }\r\n\r\n  const provinceKey = getListItemKeyFromName(PROVINCE, output.province);\r\n  const maxDur =\r\n    provinceKey === \"QC\" ? MAX_ORPHAN_DUR_QC : MAX_ORPHAN_DUR_NON_QC;\r\n  output.youngestChildEndAge = maxDur;\r\n  if (output.hasChild)\r\n    output.youngestChildEndAge = Math.min(\r\n      maxDur,\r\n      input.Clients.filter((item) => {\r\n        return item.Age === output.ygChild;\r\n      })[0].retirementAge\r\n    );\r\n\r\n  //console.log(data);\r\n  output.insNeedYgChild25 = 0;\r\n  output.insNeedYgChild18 = 0;\r\n  for (\r\n    let i = 0;\r\n    i < output.youngestChildEndAge - output.ygChild;\r\n    output.insNeedYgChild25 +=\r\n      data.dataShortfall[i++] / Math.pow(1 + output.invRate / 100, i - 1)\r\n  );\r\n\r\n  for (\r\n    let i = 0;\r\n    i < 18 - output.ygChild;\r\n    output.insNeedYgChild18 +=\r\n      data.dataShortfall[i++] / Math.pow(1 + output.invRate / 100, i - 1)\r\n  );\r\n\r\n  output.insNeedYgChild25 =\r\n    output.insNeedYgChild25 < 0 ? 0 : output.insNeedYgChild25;\r\n  output.insNeedYgChild18 =\r\n    output.insNeedYgChild18 < 0 ? 0 : output.insNeedYgChild18;\r\n\r\n  /* let insNeedYgChild18=cleanFormat(insNeedRet)*((Math.pow(1+invRate/100,18-ygChild))/(Math.pow(1+invRate/100,retAge2-input.Clients[1].Age)));\r\n\t\t\t let insNeedYgChild25=cleanFormat(insNeedRet)*((Math.pow(1+invRate/100,25-ygChild))/(Math.pow(1+invRate/100,retAge2-input.Clients[1].Age)));*/\r\n\r\n  output.liabilities = [];\r\n\r\n  Object.values(LIABILITIES).forEach((element) => {\r\n    if (element.order > 0)\r\n      output.liabilities.push({\r\n        name: element.value[output.language],\r\n        value: 0,\r\n      });\r\n  });\r\n\r\n  /* LIABILITIES[output.language].Values.forEach(function(element) {\r\n\t\t  liabilities.push({ name: element, value: 0 });\r\n\t\t}); */\r\n  /* \t\toutput.incomeNeeds = [];\r\n\t\tINCOMENEEDS[output.language].Values.forEach(function(element) {\r\n\t\t  output.incomeNeeds.push({ name: element, value: 0 });\r\n\t\t});\r\n */\r\n\r\n  output.incomeNeeds = [];\r\n  Object.values(INCOMENEEDS).forEach((element) => {\r\n    output.incomeNeeds.push({ name: element.value[output.language], value: 0 });\r\n  });\r\n\r\n  // populate with what was assigned'\r\n  output.totalLiab = 0;\r\n  output.totalLiabExcludeDeathRelated = 0;\r\n  input.Liabilitys.forEach((element) => {\r\n    //let pos = liabilities.findIndex(i => i.name === element.Type);\r\n    /* let pos = liabilities.indexOf(\r\n\t\t\tliabilities.filter(i => i.name === element.Type)[0]\r\n\t\t  ); */\r\n    let pos = output.liabilities.indexOf(\r\n      output.liabilities.filter(\r\n        (i) =>\r\n          i.name ===\r\n          getListItemNameFromKey(\r\n            LIABILITIES,\r\n            element.liabTypeKey,\r\n            output.language\r\n          )\r\n      )[0]\r\n    );\r\n    output.totalLiab += element.currValue;\r\n\r\n    output.totalLiabExcludeDeathRelated +=\r\n      element.liabTypeKey === LIABILITIES.LAST_EXPENSES.Key ||\r\n      element.liabTypeKey === LIABILITIES.LEGAL_AND_EXECUTOR_FEES.Key ||\r\n      element.liabTypeKey === LIABILITIES.PROBATE.Key\r\n        ? 0\r\n        : element.currValue;\r\n    if (pos !== undefined) output.liabilities[pos].value += element.currValue;\r\n  });\r\n\r\n  output.clients = [];\r\n  let grossIncome = 0;\r\n  input.Clients.forEach(function (element) {\r\n    //let income = \"$\" + formatMoney(element.Income, 0, \",\", \",\");\r\n    grossIncome += element.Income;\r\n    output.clients.push({\r\n      id: element.id,\r\n      memberKey: element.memberKey,\r\n      age: element.Age,\r\n      name: element.Name,\r\n      income: element.Income, //income,//element.memberKey === childMember ? \" - \" : income,\r\n      ret:\r\n        element.memberKey === childMember && !singleFamily\r\n          ? \" - \"\r\n          : element.retirementAge,\r\n    });\r\n  });\r\n\r\n  output.assets = [];\r\n  Object.values(ASSETS).forEach((element) => {\r\n    // console.log(element)\r\n    if (\r\n      !(\r\n        appletMode === \"EP\" &&\r\n        element.Key === ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.Key\r\n      )\r\n    )\r\n      output.assets.push({\r\n        name: element.value[output.language],\r\n        value: 0,\r\n        disposeValue: 0,\r\n      });\r\n  });\r\n\r\n  /*     ASSETS[output.language].Values.forEach(function(element) {\r\n\t\t  assets.push({ name: element, value: 0 });\r\n\t\t}); */\r\n  /*  UNLISTED[output.language].Assets.Values.forEach(function(element) {\r\n\t\t  assets.push({ name: element, value: 0 });\r\n\t\t}); */\r\n  output.totalAsset = 0;\r\n  output.totalAssetExcludeInsurance = 0;\r\n  output.totalAssetInsurance = 0;\r\n  output.totalAssetInsuranceIfSpouse = 0;\r\n  input.Assets.forEach((element) => {\r\n    // console.log(element)\r\n    //let pos = assets.findIndex(i => i.name === element.Type);\r\n    let pos = output.assets.indexOf(\r\n      output.assets.filter(\r\n        (i) =>\r\n          i.name ===\r\n          getListItemNameFromKey(ASSETS, element.assetTypeKey, output.language)\r\n      )[0]\r\n    );\r\n    let showAsDisposed =\r\n      pos !== undefined && pos >= 0 && element.DisposeYr === 0;\r\n    if (\r\n      element.assetTypeKey === ASSETS.LIFE_INSURANCE.Key &&\r\n      !(\r\n        element.ownerKey === ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key ||\r\n        element.ownerKey === ASSET_OWNERSHIP_ACTION.CLIENT_ROLLOVER.Key\r\n      )\r\n    )\r\n      showAsDisposed = false;\r\n    output.totalAsset += element.currValue;\r\n    output.totalAssetExcludeInsurance +=\r\n      element.assetTypeKey === ASSETS.LIFE_INSURANCE.Key\r\n        ? 0\r\n        : element.currValue;\r\n    output.totalAssetInsurance +=\r\n      element.assetTypeKey === ASSETS.LIFE_INSURANCE.Key &&\r\n      !(\r\n        element.ownerKey === ASSET_OWNERSHIP_ACTION.SPOUSE.Key ||\r\n        element.ownerKey === ASSET_OWNERSHIP_ACTION.JOINT.Key\r\n      )\r\n        ? element.currValue\r\n        : 0;\r\n    output.totalAssetInsuranceIfSpouse +=\r\n      element.assetTypeKey === ASSETS.LIFE_INSURANCE.Key &&\r\n      element.ownerKey !== ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key &&\r\n      element.ownerKey !== ASSET_OWNERSHIP_ACTION.CLIENT_ROLLOVER.Key\r\n        ? element.currValue\r\n        : 0;\r\n    output.totalDisposeAsset += showAsDisposed ? element.currValue : 0;\r\n\r\n    if (pos !== undefined && pos >= 0)\r\n      output.assets[pos].value += element.currValue;\r\n    if (showAsDisposed) output.assets[pos].disposeValue += element.currValue;\r\n  });\r\n\r\n  let otherAssetsList = \"\";\r\n  input.Assets.forEach((element) => {\r\n    if (\r\n      element.assetTypeKey === ASSETS.OTHER_ASSETS.Key &&\r\n      element.currValue > 0\r\n    )\r\n      otherAssetsList +=\r\n        \" \" +\r\n        (element.description === \"\" ? \"...\" : element.description) +\r\n        \" - \";\r\n  });\r\n  if (otherAssetsList !== \"\")\r\n    output.otherAssetsList =\r\n      \"* \" +\r\n      ASSETS.OTHER_ASSETS.value[output.language] +\r\n      \":\" +\r\n      otherAssetsList.substring(0, otherAssetsList.length - 3);\r\n  else output.otherAssetsList = \"\";\r\n  /* output.sources = [];\r\n\t\toutput.govDB = 0;\r\n\t\tconst srcDB =INCOMESOURCES.GOV_DEATH_BENEFIT.value[output.language];\r\n\t\tINCOMESOURCES[output.language].Values.forEach(function(element) {\r\n\t\t  output.sources.push({ name: element, value: 0 });\r\n\t\t}); */\r\n\r\n  output.sources = [];\r\n  output.govDB = 0;\r\n  const srcDB = INCOMESOURCES.GOV_DEATH_BENEFIT.Key; //value[output.language];\r\n  Object.values(INCOMESOURCES).forEach((element) => {\r\n    output.sources.push({\r\n      name: element.value[output.language],\r\n      value: 0,\r\n      valueAtDeath: 0,\r\n    });\r\n  });\r\n\r\n  // populate with what was assigned'\r\n  output.totalSource = 0;\r\n  output.totalSource2 = 0;\r\n  output.totalSourceATax = 0;\r\n  output.totalSource2ATax = 0;\r\n  output.totalSourceAtDeath = 0;\r\n  output.totalSource2AtDeath = 0;\r\n  output.totalSourceATaxAtDeath = 0;\r\n  output.totalSource2ATaxAtDeath = 0;\r\n  output.totalDesiredGrossIncome = 0;\r\n  output.totalDesiredGrossIncome2 = 0;\r\n  // NOTE \"this\" is not available inside inline functions, hence:\r\n  // or just use arrow functions\r\n  let srcOrphan = INCOMESOURCES.GOV_ORPHANS_BENEFIT.Key; //value[output.language];\r\n // console.log(input.Sources);\r\n  input.Sources.forEach(function (element) {\r\n    /*  let pos = output.sources.indexOf(\r\n\t\t\toutput.sources.filter(i => i.name === element.Type)[0]\r\n\t\t  );\r\n\t\t   */\r\n    let pos = output.sources.indexOf(\r\n      output.sources.filter(\r\n        (i) =>\r\n          i.name ===\r\n          getListItemNameFromKey(\r\n            INCOMESOURCES,\r\n            element.sourceTypeKey,\r\n            output.language\r\n          )\r\n      )[0]\r\n    );\r\n\r\n    if (element.sourceTypeKey === srcDB) {\r\n      // add gov DB\r\n      output.govDB = element.amount;\r\n      output.totalAsset += output.govDB;\r\n      output.totalDisposeAsset += output.govDB;\r\n    } else {\r\n      output.totalSource += element.amount;\r\n      if (element.startYear === 0) output.totalSourceAtDeath += element.amount;\r\n      // no orphans\r\n      output.totalSource2 +=\r\n        element.sourceTypeKey !== srcOrphan ? element.amount : 0;\r\n      if (element.startYear === 0)\r\n        output.totalSource2AtDeath +=\r\n          element.sourceTypeKey !== srcOrphan ? element.amount : 0;\r\n    }\r\n    if (pos !== undefined) {\r\n      output.sources[pos].value += element.amount;\r\n      if (element.startYear === 0)\r\n        output.sources[pos].valueAtDeath += element.amount;\r\n    }\r\n  });\r\n  // remove gov db from sources\r\n  output.sources = output.sources.filter(\r\n    (i) =>\r\n      i.name !== getListItemNameFromKey(INCOMESOURCES, srcDB, output.language)\r\n  ); //output.srcDB);\r\n  // after tax\r\n  output.totalSourceATax =\r\n    input.Clients.length > 1\r\n      ? output.totalSource * (1 - input.Clients[QUOTE_SPOUSE].avgTaxRate / 100)\r\n      : output.totalSource * (1 - input.Clients[QUOTE_CLIENT].avgTaxRate / 100);\r\n  output.totalSource2ATax =\r\n    input.Clients.length > 1\r\n      ? output.totalSource2 * (1 - input.Clients[QUOTE_SPOUSE].avgTaxRate / 100)\r\n      : output.totalSource2 *\r\n        (1 - input.Clients[QUOTE_CLIENT].avgTaxRate / 100);\r\n\r\n  output.totalSourceATaxAtDeath =\r\n    input.Clients.length > 1\r\n      ? output.totalSourceAtDeath *\r\n        (1 - input.Clients[QUOTE_SPOUSE].avgTaxRate / 100)\r\n      : output.totalSourceAtDeath *\r\n        (1 - input.Clients[QUOTE_CLIENT].avgTaxRate / 100);\r\n  output.totalSource2ATaxAtDeath =\r\n    input.Clients.length > 1\r\n      ? output.totalSource2AtDeath *\r\n        (1 - input.Clients[QUOTE_SPOUSE].avgTaxRate / 100)\r\n      : output.totalSource2AtDeath *\r\n        (1 - input.Clients[QUOTE_CLIENT].avgTaxRate / 100);\r\n\r\n  output.percentNeed1 = 0;\r\n  output.percentNeed2 = [];\r\n  output.percent1 = 0;\r\n  output.percent2 = [];\r\n  var totalNeed = 0;\r\n  const needPercent = INCOMENEEDS.PERCET_OF_INCOME.Key;\r\n  /* output.needs = [];\r\n\t\tINCOMENEEDS[output.language].Values.forEach(function(element) {\r\n\t\t  output.needs.push({ name: element, value: 0 });\r\n\t\t});\r\n */\r\n  output.needs = [];\r\n  Object.values(INCOMENEEDS).forEach((element) => {\r\n    output.needs.push({ name: element.value[output.language], value: 0 });\r\n  });\r\n\r\n  output.totalNeed = 0;\r\n  input.Needs.forEach(function (element) {\r\n    //let pos = needs.findIndex(i => i.name === element.Type);\r\n    //let pos = output.needs.indexOf(output.needs.filter(i => i.name === element.Type)[0]);\r\n    let pos = output.needs.indexOf(\r\n      output.needs.filter(\r\n        (i) =>\r\n          i.name ===\r\n          getListItemNameFromKey(\r\n            INCOMENEEDS,\r\n            element.needTypeKey,\r\n            output.language\r\n          )\r\n      )[0]\r\n    );\r\n\r\n    output.totalNeed += element.amount;\r\n    if (element.needTypeKey === needPercent) {\r\n      if (output.percent1 === 0) {\r\n        output.percent1 = element.Percent;\r\n        output.percentNeed1 = element.amount;\r\n        output.totalDesiredGrossIncome = (grossIncome * element.Percent) / 100;\r\n      } else {\r\n        output.percent2.push(element.Percent);\r\n        output.percentNeed2.push(element.amount);\r\n        output.totalDesiredGrossIncome2 +=\r\n          (grossIncome * element.Percent) / 100;\r\n      }\r\n    }\r\n    if (pos !== undefined) output.needs[pos].value += element.amount;\r\n  });\r\n\r\n  //\t\tif (data.dataCashFlowGov !== undefined)\r\n  //\t\t\tvar maxYScale = 10000 * Math.ceil(1 + Math.max(Math.max(...data.dataCashFlowGov), Math.max(...data.dataCashFlowNeeds), Math.max(...data.dataShortfall), Math.max(...data.dataCashFlowPersonal)) / 10000);\r\n // console.log(output);\r\n\r\n  return output;\r\n}\r\n\r\nfunction findMatchingKey(objValues, nameFromFile) {\r\n  return objValues.filter(\r\n    (obj) =>\r\n      obj.value.en\r\n        .replace(/ /g, \"\")\r\n        .replace(\r\n          /[\\u00A0\\u1680\\u180e\\u2000-\\u2009\\u200a\\u200b\\u202f\\u205f\\u3000]/g,\r\n          \"\"\r\n        ) ==\r\n        nameFromFile\r\n          .replace(/ /g, \"\")\r\n          .replace(\r\n            /[\\u00A0\\u1680\\u180e\\u2000-\\u2009\\u200a\\u200b\\u202f\\u205f\\u3000]/g,\r\n            \"\"\r\n          ) ||\r\n      obj.value.fr\r\n        .replace(/ /g, \"\")\r\n        .replace(\r\n          /[\\u00A0\\u1680\\u180e\\u2000-\\u2009\\u200a\\u200b\\u202f\\u205f\\u3000]/g,\r\n          \"\"\r\n        ) ==\r\n        nameFromFile\r\n          .replace(/ /g, \"\")\r\n          .replace(\r\n            /[\\u00A0\\u1680\\u180e\\u2000-\\u2009\\u200a\\u200b\\u202f\\u205f\\u3000]/g,\r\n            \"\"\r\n          )\r\n  )[0].Key;\r\n}\r\n","import React, { Component } from \"react\";\r\nimport Select from \"react-select\";\r\nimport { MESSAGES } from \"../definitions/generalDefinitions\";\r\nimport { Info } from \"./Info\";\r\nimport { DROPDOWN_WIDE } from \"../definitions/generalDefinitions\";\r\n\r\nexport class DropDown extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      //\tid: this.props.Count,\r\n      //Title: this.props.Title,\r\n      selection: \"?\",\r\n      valueSelected: this.props.defValue,\r\n    };\r\n    this.update = false;\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (nextProps !== this.props && nextProps.defValue !== undefined) {\r\n      this.setState({ valueSelected: nextProps.defValue });\r\n    }\r\n  }\r\n\r\n  handleChange = (event) => {\r\n    this.setState(\r\n      {\r\n        selection: event.label.valueOf(),\r\n        valueSelected: event.label.valueOf(),\r\n      },\r\n      () => this.afterStateUpdate()\r\n    );\r\n    this.update = true;\r\n  };\r\n\r\n  afterStateUpdate() {\r\n    this.props.updateDDown(this.props.id, this.state.selection);\r\n  }\r\n\r\n  getDefault() {\r\n    try {\r\n      return this.props.Values[\r\n        this.props.Values.find((x) => x.label === this.props.defValue).value - 1\r\n      ];\r\n    } catch (error) {\r\n      return this.props.defValue;\r\n    }\r\n  }\r\n\r\n  disableOption = (option) => {\r\n    let disable=this.props.disableOption===undefined?false:(this.props.disableOption[option.value-1])\r\n    return  disable;\r\n    //(\r\n\r\n    //  this.props.disableOption[option.value-1]===true\r\n      /* (this.props.Title === \"Member\" || this.props.Title === \"Membre\") &&\r\n      (option.label === \"Client\" ||\r\n        (this.props.hasSurivor &&\r\n          (option.label === \"Spouse\" || option.label === \"Conjoint\"))) */\r\n    //);\r\n  };\r\n\r\n  render() {\r\n    let styleDD = \"dropDown\";\r\n    if (this.props.width === DROPDOWN_WIDE) styleDD = \"dropDown dropDown2\";\r\n    const title = this.props.Title; // this.state.Title;\r\n    // console.log(this.props.Title)\r\n    const customStyles = {\r\n      control: (base) => ({\r\n        ...base,\r\n        height: 35,\r\n        minHeight: 35,\r\n        backgroundColor: \"#e9eef1\",\r\n        \"&:hover\": {\r\n          backgroundColor: \"#d6e5ee\",\r\n        },\r\n      }),\r\n    };\r\n\r\n    const taxCredit =\r\n      this.getDefault() === this.props.unlistedValue ? true : false;\r\n    var charOp = [];\r\n    charOp.push({\r\n      label: this.props.unlistedValue,\r\n      value: 1,\r\n    });\r\n\r\n    let selectComponent = (\r\n      <Select\r\n        isSearchable={true}\r\n        onfocus={this.oc}\r\n        styles={customStyles}\r\n        key={this.props.defValue}\r\n        isDisabled={this.props.disable}\r\n        value={this.getDefault()}\r\n        id={this.props.id}\r\n        onChange={this.handleChange}\r\n        options={this.props.Values}\r\n        isOptionDisabled={(option) => this.disableOption(option)}\r\n      />\r\n    );\r\n\r\n    if (taxCredit === true)\r\n      selectComponent = (\r\n        <Select\r\n          isSearchable={true}\r\n          styles={customStyles}\r\n          key={this.props.defValue}\r\n          isDisabled={false}\r\n          value={charOp[0]}\r\n          id={this.props.id}\r\n          options={charOp}\r\n        />\r\n      );\r\n\r\n    if (this.props.unlistedGreyedOption !== undefined)\r\n      selectComponent = (\r\n        <Select\r\n          isSearchable={true}\r\n          styles={customStyles}\r\n          key={this.props.defValue}\r\n          isDisabled={true}\r\n          value={this.props.unlistedGreyedOption[0]}\r\n          id={this.props.id}\r\n          options={this.props.unlistedGreyedOption}\r\n        />\r\n      );\r\n\r\n    // console.log(this.props.infoIcon)\r\n    return (\r\n      <div>\r\n        <div className={styleDD} key={this.props.defValue}>\r\n          <div className=\"controlTitle\">\r\n            {title}\r\n            {/* {checkInfo===true?<Info iconName={gov!==-1 || idM===\"infoOther\"?\"infoRed.png\":\"info.png\"}  id={idM} msg={msg} popupRight={idM===\"infoOther\"||idM===\"infogov\"?true:false}/>:''} */}\r\n            {this.props.infoIcon !== undefined ? (\r\n              <Info infoIcon={this.props.infoIcon} zIndex={999} /> //id={this.props.infoIcon.infoID} msg={this.props.infoIcon.infoText}  popupRight={this.props.infoIcon.popupRight}  iconName={this.props.infoIcon.infoAlert? \"infoRed.png\":\"info.png\"} />\r\n            ) : (\r\n              \"\"\r\n            )}\r\n          </div>\r\n\r\n          {selectComponent}\r\n          {/* <Select  isSearchable={false} onfocus={this.oc} styles={customStyles} key={this.state.valueSelected} isDisabled={this.props.disable} value={this.getDefault()} id={this.props.id} onChange={this.handleChange} options={this.props.Values} isOptionDisabled={(option)=>this.disableOption(option)} />\r\n\t\t\t\t\t{taxCredit===true&&<Select  isSearchable={false} onfocus={this.oc} styles={customStyles} key={this.state.valueSelected} isDisabled={true} value={charOp[0]} id={this.props.id} onChange={this.handleChange} options={charOp}  />} */}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport ReactExport from \"react-data-export\";\r\nimport { cleanFormat } from \"../../utils/helper\";\r\nimport { APPLET_INA,\r\n  APPLET_EP\r\n} from \"../../definitions/generalDefinitions\";\r\n\r\n\r\nconst ExcelFile = ReactExport.ExcelFile;\r\nconst ExcelSheet = ReactExport.ExcelFile.ExcelSheet;\r\n\r\nexport default class DownloadExcel extends React.Component {\r\n  render() {\r\n    // see https://github.com/securedeveloper/react-data-export for formatting\r\n    const styleCell = { alignment: { horizontal: \"right\" } ,font: {name: \"Trebuchet MS\"} , numFmt: \"##,##0\" };\r\n    const styleCellCol1 = { alignment: { horizontal: \"right\" } ,font: {name: \"Trebuchet MS\"} , numFmt: \"0\" };\r\n    const styleCellAlt = { alignment: { horizontal: \"right\" } ,font: {name: \"Trebuchet MS\"}, fill: { patternType: \"solid\", fgColor: { rgb: \"E9EAEB\" }}, numFmt: \"##,##0\" };\r\n    const styleCellAltCol1 = { alignment: { horizontal: \"right\" } ,font: {name: \"Trebuchet MS\"}, fill: { patternType: \"solid\", fgColor: { rgb: \"E9EAEB\" }}, numFmt: \"0\" };\r\n    const styleTitleRowInfo = {\r\n      font: {name: \"Trebuchet MS\", color: { rgb: \"FFFFFF\" }, bold: true},\r\n      alignment: { wrapText: true,horizontal: \"center\" },\r\n      border: {\r\n        top: { style: \"thin\", color: { rgb: \"C0C0C0\" } },\r\n        bottom: { style: \"thin\", color: { rgb: \"C0C0C0\" } },\r\n        right: { style: \"thin\", color: { rgb: \"C0C0C0\" } },\r\n        left: { style: \"thin\", color: { rgb: \"C0C0C0\" } }\r\n      },\r\n      fill: { patternType: \"solid\", fgColor: { rgb: \"7399c6\" } }\r\n    };\r\n    const styleCellLeftAllign = { alignment: { horizontal: \"left\" },font: {name: \"Trebuchet MS\"}};\r\n    const styleTitleRow = {\r\n      font: {name: \"Trebuchet MS\", color: { rgb: \"FFFFFF\" }, bold: true},\r\n      alignment: {wrapText: true , horizontal: \"center\" },\r\n      border: {\r\n        top: { style: \"thin\", color: { rgb: \"C0C0C0\" } },\r\n        bottom: { style: \"thin\", color: { rgb: \"C0C0C0\" } },\r\n        right: { style: \"thin\", color: { rgb: \"C0C0C0\" } },\r\n        left: { style: \"thin\", color: { rgb: \"C0C0C0\" } }\r\n      },\r\n      fill: { patternType: \"solid\", fgColor: { rgb: \"334D7C\" } }\r\n     \r\n    };\r\n\r\n    let excelColumnsDataInfoSection = [];\r\n    let title = [];\r\n    let dataBodyTitles = []\r\n    let dataBody = [];\r\n    let dataRow = [];\r\n    let j;\r\n    let i;\r\n    let dataCell;\r\n\r\n    // console.log(this.props.excelColumnsDataInfoSection);\r\n\r\n    // section 1 title and header data\r\n    dataRow = [];\r\n    const lang = this.props.language;\r\n    \r\n    // always name and its value: length 2\r\n\r\n    if (this.props.excelColumnsDataInfoSection !== undefined) {\r\n      for (j = 0; j < this.props.excelColumnsDataInfoSection.length; ++j) {\r\n        for (i = 0; i < this.props.excelColumnsDataInfoSection[0].length; ++i) {\r\n           dataCell =\r\n            this.props.excelColumnsDataInfoSection[j][i] === undefined\r\n              ? \"\"\r\n              : (this.props.excelColumnsDataInfoSection[j][i].toString().indexOf(\"%\")>=0 || isNaN(this.props.excelColumnsDataInfoSection[j][i].toString())===true  || this.props.excelColumnsDataInfoSection[j][i].toString()===\"\" ?\r\n              this.props.excelColumnsDataInfoSection[j][i].toString():\r\n                parseFloat(cleanFormat(this.props.excelColumnsDataInfoSection[j][i]),lang));\r\n          dataRow.push({\r\n            value: dataCell,\r\n            style: j === 0 ? styleTitleRowInfo : styleCell\r\n          });\r\n        }\r\n        excelColumnsDataInfoSection.push(dataRow);\r\n        dataRow = [];\r\n      }\r\n    }\r\n\r\n    // section 2 column headers and data\r\n    // add column titles as first data row to be able to style with another stupid libaray\r\n    // empty titles\r\n\r\n    if (this.props.excelColumnsHeaders !== undefined) {\r\n\r\n      title.push([{ value: this.props.title, style: {font: {sz: \"14\", name: \"Trebuchet MS\", bold: true}}}]);\r\n      \r\n      for (j = 0; j < this.props.excelColumnsHeaders.length; ++j) {\r\n        dataBodyTitles.push({ title: \"\", width: { wpx: this.props.width }, font: {name: \"Trebuchet MS\", bold: true}} );\r\n      }\r\n\r\n      for (j = 0; j < this.props.excelColumnsHeaders.length; ++j) {\r\n        \r\n        dataRow.push({ value: this.props.excelColumnsHeaders[j], style: styleTitleRow });\r\n      }\r\n      dataBody.push(dataRow);\r\n    }\r\n\r\n    dataRow = [];\r\n    if (this.props.excelColumnsDataMain !== undefined) {\r\n      for (i = 0; i < this.props.excelColumnsDataMain[0].length; ++i) {\r\n        for (j = 0; j < this.props.excelColumnsHeaders.length; ++j) {\r\n          dataCell =\r\n            this.props.excelColumnsDataMain[j][i] === undefined\r\n              ? \"\"\r\n              :(this.props.excelColumnsDataMain[j][i].toString().indexOf(\"%\")>=0 || isNaN(this.props.excelColumnsDataMain[j][i].toString())===true  || this.props.excelColumnsDataMain[j][i].toString()===\"\" ?\r\n              this.props.excelColumnsDataMain[j][i].toString():\r\n                parseFloat(cleanFormat(this.props.excelColumnsDataMain[j][i]),lang));\r\n\r\n          dataRow.push({\r\n            value: dataCell,\r\n            style: isNaN(parseFloat(cleanFormat(dataCell,lang)))\r\n              ? styleCellLeftAllign\r\n              : (i%2?(j===0?styleCellAltCol1:styleCellAlt):(j===0?styleCellCol1:styleCell))\r\n          });\r\n        }\r\n        dataBody.push(dataRow);\r\n        dataRow = [];\r\n      }\r\n    }\r\n    const multiDataSet = [\r\n      // section 1 title\r\n      {\r\n        columns: [],\r\n        data: title\r\n      },\r\n      // section 1 key values\r\n      {\r\n        columns: [],\r\n        data: excelColumnsDataInfoSection\r\n      },\r\n\r\n      // section 2\r\n      {\r\n        xSteps: 0,\r\n        ySteps: 1,\r\n        columns: dataBodyTitles,\r\n        data: dataBody\r\n      }\r\n    ];\r\n    var tempDate = new Date();\r\n    var date = tempDate.getDate()+ tempDate.toLocaleString('en-us', { month: 'short' })  + tempDate.getFullYear()\r\n\r\n    if (this.props.downloadNow === 0) return \"\";\r\n    else\r\n      return (\r\n        <ExcelFile hideElement={true} filename= {(APPLET_INA?\"INA\":\"PYE\") + \"_Data_\" + date}>\r\n          <ExcelSheet dataSet={multiDataSet} name={APPLET_INA?\"INAd\":\"PYE\" }/>\r\n        </ExcelFile>\r\n      );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport AddIcon from \"@material-ui/icons/Add\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\n//import { ReactComponent as Icon} from './icon.svg';\r\nimport \"./ExcelToolbar.css\";\r\n\r\nconst defaultToolbarStyles = {\r\n    iconButton: {\r\n    },\r\n};\r\n\r\nexport default class ExcelToolbar extends React.Component {\r\n\r\n    handleClick = () => {\r\n        this.props.setExcel();\r\n    };\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n        // console.log(\"classes\", classes)\r\n        const title=<span  style={{fontSize: '12px', marginBottom: '0px', margin: '0px', padding: '0px' }}  >{this.props.excelToolbarText}</span>\r\n        return (\r\n            <React.Fragment>\r\n                <Tooltip placement='left-end' style={{fontSize: '12px', margin: '0px', padding: '0px' }}   title={title}>\r\n                    <IconButton  onClick={this.handleClick}>\r\n                        <svg className=\"icon\" xmlns=\"http://www.w3.org/2000/svg\"   padding= '0px' width=\"30\" height=\"30\"  viewBox=\"0 0 24 24\"><path d=\"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM17 13l-5 5-5-5h3V9h4v4h3z\"/></svg>\r\n                    </IconButton>\r\n                </Tooltip>\r\n            </React.Fragment>\r\n        );\r\n    }\r\n\r\n}\r\n","import React from \"react\";\r\nimport MUIDataTable from \"mui-datatables\";\r\nimport {\r\n  Typography,\r\n  TableRow,\r\n  TableCell,\r\n  Card,\r\n  CardContent\r\n} from \"@material-ui/core\";\r\nimport { createMuiTheme, MuiThemeProvider } from \"@material-ui/core/styles\";\r\nimport {GRID_INTERNAL_CAPTIONS} from '../../definitions/generalDefinitions';\r\n//import DownloadExcel from './DownloadExcel'\r\nimport DownloadExcel from \"./DownloadExcel\";\r\nimport ExcelToolbar from \"./ExcelToolbar\";\r\n//import PrintToolbar from \"./printToolbar\";\r\nimport {\r\n  getInfoIconNotes\r\n} from \"../../definitions/infoIconsDefinitions.js\";\r\nimport { Info } from \"../Info\";\r\n\r\n\r\nexport default class Datatable extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      downloadExcelNow: 0\r\n    };\r\n  }\r\n\r\n\r\n\r\n  getMuiTheme = () =>\r\n    createMuiTheme({\r\n      typography: {\r\n        fontFamily: '\"Trebuchet MS\"',\r\n        fontSize: 11,\r\n        fontWeight: \"100\"\r\n      },\r\n      overrides: {\r\n        MUIDataTable: {\r\n          tableRoot: {\r\n            margin: 0,\r\n            \r\n          },\r\n          paper: {\r\n            boxShadow: \"none\",\r\n            borderBottom:\"1px solid rgb(150, 150, 150)\",\r\n            borderRight:\"1px solid rgb(200, 200, 200)\",\r\n          }\r\n        },\r\n        MuiTableRow: {\r\n          root: {\r\n            //for the body\r\n            height: \"100%\"\r\n          },\r\n          head: {\r\n            //for the head\r\n            height: \"100%\"\r\n          },\r\n          footer: {\r\n            display: \"none\"\r\n          }\r\n        },\r\n        MuiTableCell: {\r\n          head: {\r\n            fontSize: \".8rem\"\r\n          },\r\n          \r\n          sizeSmall: {\r\n            padding: \"8px 3px 8px 3px\"\r\n          }\r\n\r\n        },\r\n        MUIDataTableToolbar: {\r\n          root: {\r\n            paddingLeft: \"0px\"\r\n          },\r\n          titleRoot: {\r\n            fontSize: 24,\r\n            fontWeight: 'bold'\r\n          },\r\n          icon: {\r\n            fontSize: 24\r\n          }\r\n        },\r\n        MUIDataTableBodyCell: {\r\n          root: {\r\n            backgroundColor: \"#FF0000\"\r\n           }\r\n        },\r\n        MUITypography: {\r\n          root: {\r\n            backgroundColor: \"blue\"\r\n           },\r\n           \r\n            body2: {\r\n              color: 'blue',\r\n            },\r\n        },\r\n        MUITablePagination: {\r\n          caption: {\r\n              value: 'blue',\r\n            },\r\n        }\r\n      }\r\n    });\r\n\r\n  setExcel = () => {\r\n    let downloadNow = this.state.downloadExcelNow === 1 ? 0 : 1;\r\n    this.setState({ downloadExcelNow: downloadNow });\r\n  };\r\n\r\n  render() {\r\n    let data = [];\r\n    let dataRow = [];\r\n    let j;\r\n    let i;\r\n\r\n\r\n    \r\n    let unit=65\r\n    let factor=1.3\r\n    if(this.props.dataColTitles.length<4) // for liabs\r\n      unit=95\r\n   \r\n      let divStyle={ width: factor*unit*(this.props.dataColTitles.length),  marginBottom:\"10px\"  }   \r\n    if(factor*unit*this.props.dataColTitles.length>(1/factor)* window.innerWidth)\r\n    {\r\n      unit=((1/factor)*window.innerWidth/(factor*this.props.dataColTitles.length))\r\n      divStyle={ width: factor*unit*(this.props.dataColTitles.length) }   \r\n    \r\n    } \r\n     if(unit<60)\r\n    {\r\n      unit=60 \r\n      divStyle={ width: \"100%\" } \r\n    } \r\n    \r\n    \r\n    let columns = [];\r\n\r\n    if (this.props.dataProjection !== undefined) {\r\n    \r\n      for (i = 0; i < this.props.dataProjection[0].length; ++i) {\r\n        for (j = 0; j < this.props.dataColTitles.length; ++j) {\r\n          if(j<1)\r\n          dataRow.push(this.props.dataProjection[j][i]);\r\n          else\r\n          dataRow.push(this.props.dataProjection[j][i]);\r\n        }\r\n        data.push(dataRow);\r\n        dataRow = [];\r\n      }\r\n\r\n      // build and style header and columns\r\n      let widthCustom =unit;// Math.max(80,6 * this.props.dataColTitles.length); //+'%';\r\n      let styleHeader = {\r\n        backgroundColor: \"#334d7c\",\r\n        color: \"#FFFFFF\",\r\n        textAlign: \"center\",\r\n        width: widthCustom,\r\n        fontWeight: \"bold\",\r\n        position: \"sticky\",\r\n        top: 0,\r\n        zIndex: 0,\r\n      };\r\n\r\n      let customHeader = ({ index, ...column }) => {\r\n        return (\r\n          \r\n          <TableCell key={index} style={styleHeader}>\r\n            {this.props.gridIcons !== undefined && \r\n            this.props.gridIcons[index] !== undefined && <div><Info infoIcon={this.props.gridIcons[index]}/><br/></div>} \r\n          {/* {index===this.props.headerIndex && <div><Info infoIcon={getInfoIconNotes(this.props.language)}/><br/></div>}  */}\r\n           {column.name}\r\n           </TableCell>\r\n        );\r\n      };\r\n\r\n      for (i = 0; i < this.props.dataColTitles.length; ++i) {\r\n        columns.push({\r\n          name: this.props.dataColTitles[i],\r\n          options: {\r\n            filter: false,\r\n            customHeadRender: customHeader\r\n          }\r\n        });\r\n      }\r\n    }\r\n    const captions= GRID_INTERNAL_CAPTIONS[this.props.language]\r\n    const title=<span style={{fontSize: '14px'}}  >{captions.excel}</span>\r\n            \r\n              \r\n    const excelToolbarText=captions.excel \r\n     const options = {\r\n      filter: false,\r\n      filterType: \"dropdown\",\r\n      selectableRows: \"none\",\r\n      responsive: \"scrollMaxHeight\", //this removes horiz\r\n      resizableColumns: true,\r\n      selectableRowsHeader: false,\r\n      viewColumns: false,\r\n      search: false,\r\n      download: false,\r\n      print:false,\r\n      textLabels:{\r\n        pagination: {\r\n          rowsPerPage: captions.rows,\r\n          displayRows: captions.of\r\n        },\r\n        \r\n      },\r\n      \r\n      rowsPerPage: 100,\r\n      setTableProps: () => {\r\n        return {\r\n          padding: \"default\",\r\n          size: \"small\",\r\n          margin: \"0px\"\r\n        };\r\n      },\r\n      downloadOptions: {\r\n        filename: \"INAtableDownload.csv\",\r\n        separator: \",\"\r\n      },\r\n      onDownload: (buildHead, buildBody, columns, data) => {\r\n        //handleCSVDownload2(data, columns);\r\n        this.setExcel();\r\n        //return \"\\uFEFF\" + \"dfof\\n \" + \"go to hell\\n\" + buildHead(headerNames) + buildBody(data);\r\n        return false;\r\n      },\r\n      customRowRender: (data, dataIndex, rowIndex) => {\r\n        let style = {textAlign: \"right\"};\r\n        if (data[0] === \"wwwwwww\") {\r\n          style.backgroundColor = \"green\";\r\n          style.fontSize = \"36px\";\r\n        }\r\n        var rows = [];\r\n\r\n        let i;\r\n        for (i = 0; i < this.props.dataColTitles.length; ++i) {\r\n          let dataI = data[i];\r\n          rows.push(\r\n            <TableCell key={i} style={style}>\r\n              <Typography>{\r\n /* this.formatMoney(\r\n  dataI,\r\n    this.props.gridColumnAligns[i],\r\n    \".\",\r\n    \",\"\r\n  ) } */dataI}</Typography>\r\n            </TableCell>\r\n          );\r\n        }\r\n        // console.log(rows)\r\n        return (\r\n          <TableRow key={rowIndex} style={{ backgroundColor: this.props.specialRow===undefined ? (rowIndex%2?\"#f9f9f9\":\"#e4e5e6\"):(rowIndex===this.props.specialRow?\"#d0d7e6\":(rowIndex%2?\"#f9f9f9\":\"#e4e5e6\")) }}>\r\n            {rows}\r\n          </TableRow>\r\n        );\r\n      },\r\n      customToolbar: () => <ExcelToolbar excelToolbarText={excelToolbarText} setExcel={this.setExcel} />\r\n    };\r\n\r\n   \r\n\r\n    return (\r\n        <div style={divStyle} >\r\n          \r\n        <MuiThemeProvider theme={this.getMuiTheme()}>\r\n          <MUIDataTable\r\n            title={this.props.gridTitle}\r\n            data={data}\r\n            columns={columns}\r\n            options={options}\r\n          />\r\n        </MuiThemeProvider>\r\n        {this.state.downloadExcelNow ===1 && <DownloadExcel\r\n          excelColumnsDataMain={this.props.dataProjection}\r\n          width={\"90\"}\r\n          excelColumnsHeaders={this.props.dataColTitles}\r\n          title={this.props.gridTitle}\r\n          excelColumnsDataInfoSection={this.props.gridColumnsDataExcelInfoSection}\r\n          downloadNow={this.state.downloadExcelNow}\r\n          hideElement={true}\r\n          language={this.props.language}\r\n        />}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAWCAIAAAANYFjGAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAFVSURBVEhLY/z//z/D4ANMUHqQASqH1o8fPyAMDg4OCIM8MEhDaxBHIjzkaQTIiNDRSCQFoEdi7d63yy5+efHlzz+iMygTI4MED0uUPk+zszBUCBWQEYkIZ917/9t1/rNnn/9AJMgAUrwsuxOllARZoXwYoChtUegmIABqBxoC5VAGoM4Cxh2pbprqL/mpQfN/uzaQBLIhgkBDgEZB2JQAqLOA6QnCIBIA3ZFlIcTLDtIOJIFsuMtINQorgDoLmMYhDCJBrKEAlAUDcBFSjcIKoM4iPt9BACSckAFchFSjsAKoWcBMThL4/PMflAUDcBFSjcIKoM4CFjwQBpFg8fkPUBYMwEVINQorgDoLWBhCGESC7I3Pp514BwkhIAlkA0UgUqQahRUgilPlvocUlltAACxR7xbJQzkwQFFxCiyggYZCOWQBSCkP5VAGBnGdCGUOHsDAAAC1IZnmPH6jBwAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAZCAIAAAD8NuoTAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAKjSURBVEhLzZbPahNBHMc3+6dJdpvQkEojvSRYKCJolYrgVYSiFyV49jXEB5AefQMfQIp4EArqA5SKYsFKD6VFqaS0mnbTbDY7s1m/uzPEdt3sziY55HOYzP42M/nkN38znudJk4fMPyeMCdUa2yCyfs73lslk+mVaxqCFHhi9AFQQhI0cgAqDfVmQUbWYDaV0c6+79tnZ2O8dnPgdzs9k7lTl+q2p27WsqqrMjzURYSQtCLmuSwh5/qb9+kuPRy/y5Kb84rGhaZqiKJDj0SQGan3aJzsNenzWc6N/LsiTSylx3m7Rn6cKj0Zxtya9empks37aBHMWoXViee+27ENzgE4AWsGKku6Hbef7kcqjg6nfkFbrBZgJjmZEVhOdAvxUHfwWcgJrX6WN3Q6m4P9ZiCSshbFLdApS5WEAtxuJ9v/AgsAsZG15aDBhLcwnXovFX34u/WXGTakQmz8kZAvt+HMsYS3McV6LA3/Y1zojKbQaLZlpDZMtUQIvlPxRANhgNxFxAmGt2ekUoobm8poAlUKKiRiWWKwIrSwcLrKsVHSbPwqwdJlgRxXct8Jay1VtrpiYMHQOK3Wh7PCAAA+uuuKnUITBw+u5RDP/HFbU+RnlSuGUh2JZWWgvV6eYFg/FMuThExw8xLEty/yzvmsc2tP8RRRLc9bLR7RcLhuGfziKmA15VKMVlnq32221Ws1mc/Wj8n6vyN9d5H7NfHbPLZVKhUKKw2f4GwQaYh+CWbvdNk0TF5v1He3bsX5kaXh7SSfXZq2VRYKLTbFYRJ5GParF6V9sbBvDaXU6HVgigldYdPDI5/O6rudyubFdbARho4m0QQ4l6GshNwBCKAXHrs+oWgA9MOAHUEEw2EJ8UGGwLwsyBi0G6+d8b0wlrZCPJP0F2oqhNNA6qd4AAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAZCAIAAAD8NuoTAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAACFSURBVEhL7dcxDoAgDAVQ6sSN4P6nYhKRdtA42B8YOvy3WBvT/AjRIL33FM9h12AYCxE01mvLt9as2i3nbJUPFxHBWAjGQvzHKqXUWu1m8nQWud7W93fu6azg5xTBWAjGQjAWImisDQeyMUGd0yhGU0SOaRRKH3badk7UOc9pGgUNdEvpAg55Of2PHimJAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAZCAIAAAD8NuoTAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAACBSURBVEhL7dRBCoAgEAVQ9XoRXaFFm04XUl0vmxyRcNUHQYP/FpNFDH/xy4YQTH9cunaGsRA/ibX5Y15Wmem+kTKW3888GypjTeOQZ0P8byFYeQQrj2DlEaw8gpVHMBai01gVKi8b1BXJQR5aa10kB6Uvf1TtS9Q9720aBQ30MOYGI+VMGsZJ3L0AAAAASUVORK5CYII=\"","\r\n// Imports\r\nimport React from 'react';\r\nimport packageJson from '../package.json';\r\n\r\nglobal.appVersion = packageJson.version;\r\n\r\nconst APP_VERSION = global.appVersion;\r\n\r\n// version from response - first param, local version second param\r\nconst semverGreaterThan = (versionA, versionB) => {\r\n  const versionsA = versionA.split(/\\./g);\r\n\r\n  const versionsB = versionB.split(/\\./g);\r\n  while (versionsA.length || versionsB.length) {\r\n    const a = Number(versionsA.shift());\r\n\r\n    const b = Number(versionsB.shift());\r\n    // eslint-disable-next-line no-continue\r\n    if (a === b) continue;\r\n    // eslint-disable-next-line no-restricted-globals\r\n    return a > b || isNaN(b);\r\n  }\r\n  return false;\r\n};\r\n\r\nclass CacheBuster extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      loading: true,\r\n      isLatestVersion: false,\r\n      refreshCacheAndReload: () => {\r\n        console.log('Clearing cache and hard reloading...')\r\n        if (caches) {\r\n          // Service worker cache should be cleared with caches.delete()\r\n          caches.keys().then(function(names) {\r\n            for (let name of names) caches.delete(name);\r\n          });\r\n        }\r\n\r\n        // delete browser cache and hard reload\r\n        window.location.reload(true);\r\n      }\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    fetch('/meta.json')\r\n      .then((response) => response.json())\r\n      .then((meta) => {\r\n        const latestVersion = meta.version;\r\n        const currentVersion = global.appVersion;\r\n\r\n        const shouldForceRefresh = semverGreaterThan(latestVersion, currentVersion);\r\n        if (shouldForceRefresh) {\r\n          console.log(`We have a new version - ${latestVersion}. Should force refresh`);\r\n          this.setState({ loading: false, isLatestVersion: false });\r\n        } else {\r\n          console.log(`You already have the latest version - ${latestVersion}. No cache refresh needed.`);\r\n          this.setState({ loading: false, isLatestVersion: true });\r\n        }\r\n      });\r\n  }\r\n  render() {\r\n    const { loading, isLatestVersion, refreshCacheAndReload } = this.state;\r\n    return this.props.children({ loading, isLatestVersion, refreshCacheAndReload });\r\n  }\r\n}\r\n\r\nexport {CacheBuster, APP_VERSION};","import React, { Component } from 'react';\r\nimport { NA } from './components/NA';\r\nimport './App.css';\r\nimport {CacheBuster} from \"./CacheBuster\"\r\n\r\nexport default class App extends Component {\r\n\tdisplayName = \"PPI Toolkit Direct\";\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = { language: \"en\", loading:true };\r\n\t\tthis.langText = \"English\";\r\n\t}\r\n\r\n\tchangeLang = () => {\r\n\t\tvar data2 = this.state;\r\n\t\tvar oldLang = this.state.language;\r\n\t\tdata2.language = this.state.language === \"en\" ? \"fr\" : \"en\";\r\n\t\tthis.langText = this.state.language === \"en\" ? \"Franais\" : \"English\";\r\n\t\tthis.setState({ data2, loading: false });// () => this.updateDataLang(oldLang));\r\n\t}\r\n\t\r\n\trender() {\r\n\t\r\n\t\treturn (\r\n\t\t\t<div> \r\n\t\t\t\t<NA />\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\t\t);\r\n\t  /* return (\r\n      {/* <CacheBuster>\r\n        {({ loading, isLatestVersion, refreshCacheAndReload }) => {\r\n          if (loading) return null;\r\n          if (!loading && !isLatestVersion) {\r\n            // You can decide how and when you want to force reload\r\n            refreshCacheAndReload();\r\n          } \r\n\r\n          return (*/}\r\n\t\t/* \t\t\t<NA />\r\n\t\t  \t\r\n          );\r\n\t\t */\r\n     /*     }}\r\n      </CacheBuster>\r\n    ); \r\n \r\n\r\n\t}*/\r\n}\r\n","\r\nimport './index.css';\r\nimport './components/NA.css';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport App from './App';\r\n//import registerServiceWorker from './registerServiceWorker';\r\n\r\nconst baseUrl = document.getElementsByTagName('base')[0].getAttribute('href');\r\nconst rootElement = document.getElementById('root');\r\n\r\nReactDOM.render(\r\n  \r\n  <BrowserRouter basename={baseUrl}>\r\n    <App />\r\n  </BrowserRouter>,\r\n  rootElement);\r\n\r\n//registerServiceWorker();\r\n"],"sourceRoot":""}