{"version":3,"sources":["definitions/generalDefinitions.js","definitions/outputDefinitions.js","components/AdjustibleImage.js","images/INA.png","images/estate.protection.applet.cover.graphic.png","utils/helper.js","utils/FetchAPIs.js","components/PDF.js","components/MultiButtons.js","images/gridOff.png","images/gridOn.png","images/info.png","images/infoLightBlue.png","images/infoWhite.png","images/infoRed.png","../node_modules/validatorjs/src/lang sync /^/.*$","definitions/outputDefinitionsEP.js","images/chooseButton.png","images/chooseButtonChrome.png","images/optionsEdge.png","images/optionsChrome.png","CacheBuster.js","definitions/infoIconsDefinitions.js","components/PopupInfo.js","components/Info.js","components/DropDown.js","components/inputField.js","components/AddRemove.js","data/dataExchange.js","data/createDefaults.js","components/Client.js","components/GridExcelComponent/DownloadExcel.js","components/GridExcelComponent/ExcelToolbar.js","components/GridExcelComponent/DataTable.js","components/ProjectionGrid.js","components/ProjectionGrid1.js","components/GridButton.js","data/assetGridProjections.js","components/Asset.js","components/Liability.js","components/Source.js","components/Need.js","components/Header.js","components/Presentation.js","components/PopupUserInput.js","components/Collapsible.js","components/PasteClients.js","data/aggregateGridProjections.js","components/AggregateGrid.js","components/OutputPDF.js","components/outputPresentation.js","components/OutputPDFEP.js","components/OutputGraphsEPLeakage.js","components/OutputGraphStacked.js","components/outputPresentationEP.js","components/OutputPDFINAAppendix.js","components/OutputGraphs.js","components/OutputGraphsEP.js","components/AnalysisGraph.js","components/NA.js","App.js","index.js","data/dataExchangeMCC.js"],"names":["APPLET_INA","appletMode","APPLET_EP","DISPLAY_NAME","DEFAULT_QUOTE","QUOTE_CLIENT","QUOTE_SPOUSE","QUOTE_JOINT","FIRST_BENEFICIARY_ID","OUTPUT_WIDTH_PCT","IMAGE_APPLET_EP","IMAGE_APPLET_INA","IMAGE_LOGO","IMAGE_LOGO_OTHERPAGES","ASSET_API_OUTPUT_Year","ASSET_API_OUTPUT_Age","ASSET_API_OUTPUT_FMV","ASSET_API_OUTPUT_EOYBalance","ASSET_API_OUTPUT_ACB","ASSET_API_OUTPUT_CapitalGain","ASSET_API_OUTPUT_TaxPayable","ASSET_API_OUTPUT_CapGainsExemption","ASSET_API_OUTPUT_Deposits","ASSET_API_OUTPUT_Withdrawals","ASSET_API_OUTPUT_RRIF","ASSET_API_OUTPUT_TaxPayableonIncome","ASSET_API_OUTPUT_DispositionAmount","DROPDOWN_WIDE","DEFAULT_DIVIDEND_TAX_RATE","DEFAULT_AVG_TAX_RATE","DEFAULT_CLIENT_AGE","DEFAULT_SPOUSE_AGE","DEFAULT_SPOUSE_SALARY","DEFAULT_CLIENT_SALARY","DEFAULT_SPOUSE_CPP","DEFAULT_CLIENT_CPP","DEFAULT_SPOUSE_RETIREMENT","DEFAULT_CLIENT_RETIREMENT","DEFAULT_INFLATION","DEFAULT_INVESTMENT","DEFAULT_NEED_PERCENT1","DEFAULT_NEED_PERCENT2","DEFAULT_RRIF_AGE","DISPLAY_RETIREMENT","DISPLAY_LIFEEXP","DISPLAY_ENDAGE","DISPLAY_LIFEEXP_PLUS_3","ORPHAN_AGE_QC","ORPHAN_AGE_NON_QC","MAX_ORPHAN_DUR_QC","MAX_ORPHAN_DUR_NON_QC","UNIVERSITY_START_AGE","UNIVERSITY_END_AGE","DISPLAY_PRESENTATION","DISPLAY_GRAPHS","DISPLAY_SPREADSHEET","DISPLAY_ANALYSIS","appSiteAPI","buildMode","ASSET_YEAR_TODAY","en","today","fr","CONTROLTITLE","age","sex","smoking","name","member","type","owner","growthDir","exposureDur","changeRate","repay","amount","FA","amountGross","afterTaxAmount","percent","tax","desc","disposeYr","disposeDur","startYear","dur","ACB","smallBusinessCapGainExemption","growth","income","avgTax","retAge","protectToAge","cppElig","qppElig","invRate","inflation","taxRate","dividendTaxRate","province","designedBy","designedFor","contributionAmt","contributionStartYr","contributionDur","withdrawalAmt","withdrawalStartYr","withdrawalDur","incomeRate","RRIFRate","RRIFAge","ownershipAction","pdf","pdfINAAppendix","print","lifo","wl","ep","compulife","save","load","rec","notes","switch","TITLES","appletINA","appletEP","clients","assets","liabilities","sources","needs","settings","presentations","results","presBut","graphsBut","retBut","protectButton","leBut","age100But","spreadsheetBut","analysisBut","benef","insuredJLTD","insured","default","defaultClear","OUTPUTTITLE","Values","MESSAGES","insNeed","graphLine2","graphT1","graphT2","graphT3","graphT4","ever","taxMsg","fetch","infoYr0","infoRetDur","infoAvgTax","infoAdjust","clientOnly","infoElig","ie","govB","assetTax","COLUMN_TITLES","INA_SHEET_HEADERS","Full","EP_SHEET_HEADERS","intRate","infRate","surplusCapital","blank","additionalCapitalReq","survivorLE","survivor65","survivorProtection","Year","Age","FMV","EOYBalance","AnnualContribution","MinRRIFIncome","Withdrawal","SaleProceeds","RentalIncome","TaxLiability","Taxonincome","TaxLiabilityatDeath","CapitalGain","CapitalGainsExemption","GRID_INTERNAL_CAPTIONS","excel","rows","of","TOTALS","ESTATE_LIAB","value","Key","order","colour","TAX_LIAB","EMAIL","body","LIABILITIES","LAST_EXPENSES","ID","LEGAL_AND_EXECUTOR_FEES","OUTSTANDING_LOANS","MORTGAGE_REDEMPTION","EMERGENCY_FUND","CHARITABLE_GIFTS","LEGACY_FOR_CHILDREN","CHILD_HOME_CARE","CREDIT_CARDS","INCOME_TAXES","OTHER","CLIENT_TAX_LIABILITY","PROBATE","ASSETS","PERSONAL_RESIDENCE","oldName","REAL_ESTATE","STOCKS_BONDS","SMALL_BUSINESS_SHARES","RRSP_RRIF","INTEREST_BEARING","CASH","OTHER_ASSETS","LIFE_INSURANCE","CHARITABLE_GIFTS_TAX_CREDIT","TFSA","OWNERSHIP","CLIENT","SPOUSE","JOINT","ASSET_OWNERSHIP_ACTION","CLIENT_LIQUIDATE","CLIENT_ROLLOVER","ASSET_TAX","NON_TAXABLE","CAPITAL_GAINS_DEFERRED","CAPITAL_GAINS_ANNUAL","REGISTERED","FULLY_TAXABLE","DIVIDEND","INTEREST","QUALIFYING_SMALL_BUSINESS","INCOMESOURCES","SURVIVORS_INCOME","GOV_SURVIVORS_PENSION","GOV_DEATH_BENEFIT","GOV_ORPHANS_BENEFIT","RENTAL_INCOME","DIVIDEND_INCOME","RETIREMENT_INCOME","RRIF","INCOMENEEDS","PERCET_OF_INCOME","EDUCATION_FUND","TEMPORARY_INCOME","PROVINCE","AB","BC","ON","QC","MB","NS","NB","NF","SK","PE","YU","NU","NT","MEMBER","CHILD","DEPENDENT_ADULT","SEX","MALE","FEMALE","GROWTHDIR","GROWS","REDUCES","SMOKING","NON_SMOKER","SMOKER","MONTHS","OUTPUTTEXT","insNeeds100","insNeedsRet","insNeedsRetLE","insNeedsSingleFamily","years","addSurvivor","pg1T","pg1P1","pg1P2","pg1P3","pg1P4","pg2TabT1","pg2TabT2","pg2TabT3","pg2TabT4","pg2TabT4Alt","pg2TabT5","pg2TabT6","pg2T2","pg2Tab2","pg2Tab3","pg2T3","pg2P5","pg2P6","pg2P7","pg2P8","pg2P9","pg2P10","pg2P12","pg2P11","pg3T","pg3P1","pg3TabT","pg3TabRTot","pg4T","pg4P1","pg4TabT","pg4TabRow1","pg4TabRow2","pg4TabRow5","pgTabRowMoreIncome","pgTabRowThereAfter","pg5T","pg5TabT","pg5TabT2","pg5TabT3","pg5TabRow1","pg5TabRow3","pg5TabRow4","pg5TabRow5","pg6T","pg6TabT","pg6TabRow1","pg5TabRow7","pg6TabRow4","pg6Net","pg7T","pg7TabT","pg7TabRow1","pg7TabRow4","pg7TabRow5","pg7TabRow6","pg7TabRow7","pg7TabRow8","pg7TabRow9","pg7TabRow10","pg8T","pg8TabT","pg8TabRow1","pg8TabRow2","pg8TabRow3","pg8TabRow4","pg8TabRow5","pg8TabRow6","pg8TabRow4Alt","pg9T","pg9P1","pgFooter","pg10T","pg10P1","pg10TabRow1","pg10TabRow11","pg10TabRow2","pg10TabRow3","pgAppendix","pgAppendixT","pgAppendixP1","pgAppendixP2","pgAppendixP3","GRAPHS_LABLES","graphMsg","persCF","govCF","incomeNeeds","shortfall","assetsBrk","liabsBrk","cashLike","RRSP","shares","realEstate","otherAssets","loans","taxes","emergency","otherLiabs","atDeath","currFins","AdjustibleImage","props","componentDidMount","setState","showDetails","updateImage","image","state","left","imageLeft","size","imageSize","allPages","top","imageTop","imageAdjust","imageBigger","prevState","parseFloat","imageSmaller","imageRight","imagePosition","e","imagePages","imageRemove","undoImage","undefined","undo","imageDone","loadImage","file","target","files","reader","FileReader","readAsDataURL","onload","imageObj","result","styleImage","float","width","display","marginTop","marginBottom","marginLeft","this","lang","language","cmdWidth","buttonText","length","id","style","paddingLeft","className","required","accept","onChange","onClick","event","noButtons","buttonCaption","selected","selectMultiButton","src","React","Component","module","exports","cleanFormat","amt","nSeperator","toString","search","s1","substring","parseInt","EngToFrConversion","replace","isMobileDevice","window","orientation","navigator","userAgent","indexOf","numFormat","v","bInput","mode","seperator","decimalChar","v1","v2","v3","formatted","toFixed","get1000","test","Math","round","includes","isNaN","num","formatMoney","decimalCount","decimal","thousands","abs","negativeSign","i","Number","j","substr","slice","formatMoney2","dollarSign","arrayFormatMoney","array","noOfDecimals","arrayFormatted","versionDetails","ver","version","verNo","inS","verS","inS2","versionNumeric","allowEmail","saveEncrypt","allowAnalysis","n","getProjectedLiabilities","dataInput","probate","totalLiabProjections","push","Liabilitys","liabTypeKey","liabProj","getProjectedLiability","min","numericValues","liability","totalLiab","currValue","rate","dU","dL","pow","getLoanBalance","assetTaxLiabProj","change","growthDirKey","getINA_LifeExp_Plus_yrs","INALifeExp","dataShortfall","lifeExp","yrs","INA","getDataFutureEstateLiability","dataTaxLiability","projectEnd","dataFutureEstateLiability","getListToShowByOrder","fullListOfItems","Object","values","filter","obj","sort","a","b","getListItemNameFromKey","list","found","find","getListItemKeyFromName","split","join","getAssetsTaxCategoryTotal","key","totalAsset","Assets","forEach","element","assetTaxTypeKey","getDisableValues","val","getAssetsCategoryTotal","dataList","total","assetTypeKey","getLiabsCategoryTotal","getAgesEP","LE","age1","dataAges","age2","getTaxLiabCategoryTotal","dataNA","yr","dataAss","getAssetTL","data","fetchAssetProjection2","getDefaultImages","adviserLogo","appletImage","require","getAfterTaxTotalIncome","index","Income","avgTaxRate","isSingleFamily","spouseKey","survivors","x","memberKey","singleFamilyProjectionYears","minAge","maxRet","noYrs","clientKey","reduce","prev","curr","retirementAge","noYrsDiff","projectionEnd","noProjectionYrs","survivorAge","familyProjectionYears","periodOption","insuranceNeeds","presentation","insNeedRet","insNeedLE","insNeedLE3","insNeedEAge","Value","joint","singleFamilyvalues","insuranceNeed","insuranceNeedToRet","insuranceNeedToLE","insuranceNeedToLE3","insuranceNeedToEnd","survAge","noProjectYrs","client","spouse","getInsNeedLine","projEnd","noSurvivor","singleFamily","protectionPeriod","labelsBilingual","dollarEn","dollarFr","needTo","getName","getLeakageGraphs","assetProjections","AssetLiabProjs","optionsPie","responsive","maintainAspectRatio","title","position","text","fontSize","fontColor","legend","labels","space","optionsPieEstateLeakage","JSON","parse","stringify","OUTPUTTEXTEP","graphsLeakageT2","optionsPieEstateLeakageLE","graphsLeakageT3","assetsTotalNow","assetsTotalLE3","grid","dataProjection","totalLiabProjectionsNow","totalLiabProjectionsLE3","assetPercent","EstateLiabsByTypeTotal","taxPercent","dataEstateLeakage","dataEstateLeakageLE","EstateLiabsByTypeLE3Total","assetPercentLE3","taxPercentLE3","dataPieEstateLeakage","graphsLeakage1","graphsLeakage2","datasets","backgroundColor","dataPieEstateLeakageLE","getLogoAndAppletImage","Presentations","logoSize","max","MAX_LOGO_HEIGHT","PAGE_HEIGHT","logoLeft","logo","logoTop","logoBottom","logo1stPage","applet","global","langFr","languages","userLanguage","fetchTimerAPICheck","fails","localStorage","getItem","then","response","json","console","log","catch","error","setItem","fetchMCCData","Promise","all","fetchMCC","url","method","headers","Accept","ok","Error","statusText","getTaxRate","fetchInsuranceNeedsData","provincekey","projectionSettings","lives","isQC","insuranceNeedsData","ages","personalCF","cpp","cppDB","orphan","lifeExpClient","lifeExpJLTD","provinceMargTax","encryptedInput","assetID","dataAsset","asset","ratesPack","dataProj","asyncAPICall","fetchAssetProjectionAPI","dataColTitles","dataValues","fetchAssetAllGridColumns","handleFetchInsuranceNeedsNew","dataINA","dataDetails","dataInsuranceNeeds","dataNAAges","dataCashFlowGov","dataCashFlowPersonal","dataCashFlowNeeds","handleFetchINADataFromQueryString","savedINA","savedData","handleFetchQueryString","fetchData","handleFetchPDF","Html","Css","HELVETICA","TIMES","NORMAL","BOLD","InToPt","in_","PxToPt","px","PDF","AddImage","imageID","y","w","h","imgData","document","getElementById","imgProps","getImageProperties","pdfHeight","height","addImage","AddImageFitWidthOnly","maxHeight","addCustomImage","pg1TitleY","firstPage","FOOTER_TEXT_IN_Y","AddChart","containerID","containerElement","canvasElement","getElementsByClassName","dataUrl","toDataURL","AddCanvas","canvasID","AddPage","addPage","Create","jsPDF","unit","format","ShowGrids","showGrids","Grid","setFontSize","setFont","setTextColor","textRed","textGreen","textBlue","fontName","fontStyle","MultilineText","textLines","splitTextToSize","DrawLine","line","Reset","SetFont","SetFontSize","Save","fileName","SetTextColor","red","green","blue","SetFillColor","setFillColor","fillRed","fillGreen","fillBlue","showOnPage","output","Rectangle","roundedRect","textWidth","arrayText","minWidth","getTextWidth","textWidthMultiLine","adjustTextWidth","tableRow","fill","textColor","Widths","box","align","rightAlign","cols","textY","textOut","xi","setDrawColor","rect","RightText","Text","CenterText","tw","Header","textH","headerOffset","addFooterAndHeader","footerText","headerText","Footer","textF","FooterLandscape","addFooter","footer","addHeaderNoFooter","tableRowSingle","values2","coloured","paraLeft","paraY","paraWidth","color","MultiButtons","setupButtons","buttonsDefault","selectButton","buttons","nextProps","stylePosition","stylePositionLast","marginRight","map","item","webpackContext","req","webpackContextResolve","__webpack_require__","o","code","keys","resolve","ASSET_TAX_TYPE_PRINCIPAL_RES","ASSET_TAX_TYPE_REAL_ESTATE","ASSET_TAX_TYPE_STOCKS","ASSET_TAX_TYPE_SMALL_BUS","ASSET_TAX_TYPE_RRSP","ASSET_TAX_TYPE_INTEREST","ASSET_TAX_TYPE_OTHER","ASSET_TAX_TYPE_COUNT","pg2T","pg2Paragraphs","pg3Tab2T","pg3Tab2RTot","pg3Tab2NW","pg3T2","pg3P2","pg3P3","pg3Tab3R1C1","pg3Tab3R1C2","pg3Tab3R1C3","pg3Tab3R1C4","pg3Tab3R2C1","pg3Tab3R2C2","pg3Tab3R2C3","pg3Tab3R2C4","pg3Tab3R3C1","pg3Tab3R3C2","pg3Tab3R3C3","pg3Tab3R3C4","pg3Tab3R4C1","pg3Tab3R4C2","pg3Tab3R4C3","pg3Tab3R4C4","pg3Tab3R5C1","pg3Tab3R5C2","pg3Tab3R5C3","pg3Tab3R5C4","pg3Tab3R6C1","pg3Tab3R6C2","pg3Tab3R6C3","pg3Tab3R6C4","pg3Tab3R7C1","pg3Tab3R7C2","pg3Tab3R7C3","pg3Tab3R7C4","pg3Tab3R8C1","pg3Tab3R8C2","pg3Tab3R8C3","pg3Tab3R8C4","pg3P4","pg3P5","pg4GT","pg4P2","pg4P3","pg5Paragraphs","pg5Plast","pg6Paragraphs1","pg6Paragraphs2","pg7P1","pg8P1","pg8P2","pg8O1","pg8O2","pg9P2","graphsT1","graphsT2","graphsT3","graphsL1","graphsL2","graphsL3","graphsL4","graphsL5","graphs2L1","graphs2L2","graphsTaxes","graphsLeakageT1","graphsLeakage3","appVersion","packageJson","infoHighlightStyle","fontWeight","infoIconRetire","infoSpouseElig","internet","rollOver","insurance","rental","note","gridCapFund","salary","salaryPercent","afterTax","taxExempt","infoINA","infoBOYEOY","infoPDF","DepositWithd","inflationGrowth","PYE_JLTD","needGrowth","exportINA","taxLiab","getInfoIconTaxExempt","infoID","infoText","iconMode","popupOpenByProps","popupBorderColor","DEFAULT_WIDTH","getInfoIconSourcesGov","DEFAULT_MARGIN_LEFT","getInfoNoInternetAccess","DEFAULT_MARGIN_TOP","getInfoIconAssetsIncomeRate","getInfoIconPYE_JLTD","getInfoIconNeedGrowth","getInfoINA","getInfoPDF","getInfoExportINA","getInfoIconTFSA","getInfoIconDepositWithd","getInfoIconInflationGrowth","getInfoIconAssetsIns","getInfoIconAssetsYr0","getInfoIconClientsElig","getInfoIconSpouseElig","getInfoIconClientsTax","getInfoIconClientsRetire","flagRed","getInfoIconTaxLiab","getInfoBOYEOY","PopupInfoDialog","open","infoIcon","showInfo","theme","createMuiTheme","typography","fontFamily","Box","border","borderColor","borderRadius","Card","CardContent","ThemeProvider","Typography","component","Info","showPopup","respondToPopUp","popupInfo","classList","toggle","chkClose","source","classP","zIndx","zIndex","onMouseEnter","onMouseLeave","alt","DropDown","handleChange","selection","label","valueOf","valueSelected","afterStateUpdate","update","disableOption","option","defValue","updateDDown","styleDD","Title","customStyles","control","base","minHeight","taxCredit","getDefault","unlistedValue","charOp","selectComponent","isSearchable","onfocus","oc","styles","isDisabled","disable","options","isOptionDisabled","unlistedGreyedOption","InputField","getInut","evt","input","chkNum","maxValue","minValue","handleFocus","match","select","selectField","setSelectionRange","onMouseUpSelect","MSStream","handleFocusIOS","toggleEditing","toFormat","inputValue","isEditing","getValue","dec","selectText","s","refs","InputTxt","setTimeout","getRidOfZerosAfterDecimal","displayValue","decimalPos","handleUpdateInput","number","Intl","NumberFormat","inputName","readOnly","styleClass","styleClass2","divStyleClass","inputColorStyle","colorDiv","info","perc","french","paddingTop","inputMode","disabled","autoFocus","onFocus","onMouseUp","updateInputValue","onBlur","bind","AddRemove","doRemove","handleDoRemove","doAdd","handleDoAdd","minRows","minComps","maxRows","returnAR","currentID","numberComps","fixedFirstRow","setUIDataToAPI","outputInsuranceNeed","Clients","dataE","Sex","sexKey","Smk","smokerKey","Rating","CPPeligibility","Eligibility","provinceKey","Name","setLives","assetDesc","description","taxMethod","ownerKey","dispositionYr","DisposeYr","dispositionDur","DisposeDur","dispositionYrUlt","annualGrowth","RRIFStartAge","setAssets","annualRepay","setLiabs","personalIncomeSources","salaryOwner","Sources","ownerID","sourceTypeKey","duration","setSources","estateContingiencies","dataItems","needTypeKey","Needs","incomePercent","Percent","incomePercentAfterDeath","incomeNeedItems","upToChildrenOutYrs","childrenOutToRetirementYrs","retirementToEndYrs","setIncomeNeeds","investmentRate","capitalGainsInclusion","inflationRate","setRates","tempDate","Date","date","getFullYear","getMonth","getDate","deathYear","deathOf","endYear","returnType","projectEndOption","clientsName1","agentName","valuationDate","caller","insuranceAmt","setProjSettings","loadSavedDataToUI","savedJSon","smk","clientsNo","addLife","assetsNo","findMatchingKey","liabilitysNo","assetTaxLiabID","sourcesNo","needsNo","needKey","presentationsNo","dataInputDefImages","loadDefaultCase","images","storageKey","getOutputValues","dateApplet","Income2","survivorATaxIncome","percentNeed1","percentNeed2","govDB","totalDisposeAsset","dateObj","month","getUTCMonth","day","getUTCDate","year","getUTCFullYear","insuranceNeedRet","insuranceNeedLE","ygChild","hasChild","childMember","Children","maxDur","youngestChildEndAge","insNeedYgChild25","insNeedYgChild18","totalLiabExcludeDeathRelated","pos","grossIncome","ret","disposeValue","totalAssetExcludeInsurance","totalAssetInsurance","totalAssetInsuranceIfSpouse","showAsDisposed","otherAssetsList","srcDB","valueAtDeath","totalSource","totalSource2","totalSourceATax","totalSource2ATax","totalSourceAtDeath","totalSource2AtDeath","totalSourceATaxAtDeath","totalSource2ATaxAtDeath","totalDesiredGrossIncome","totalDesiredGrossIncome2","srcOrphan","percent1","percent2","needPercent","totalNeed","objValues","nameFromFile","createDefaultAsset","projection","copyFromAnotherAsset","anotherAsset","createDefaultClient","defaultClient1","defaultClient2","child","createDefaultSource","growthRate","createDefaultLiab","createDefaultNeed","defaultNeed1","defaultNeed2","createDefaultPres","presentationDate","resultsOption","getDefaultData","getDefaultCase","defaultClients","defaultAssets","defaultSources","defaultLiab","defaultNeeds","Client","displayName","disableAddRemove","handleRemoveClient","newCliet","handleAddClient","doSwitch","switchClients","getCurrClient","valueClean","valueCleanInt","changed","infoRetireRed","handleUpdate","loading","clientCurr","writeBack","updateName","sexValues","smokingValues","memberValues","bilingual","DD","disableOptionValue","nonSpouse","nonSpouseIsTheSurvivor","isTheSurvivor","clientMember","disableMember","greyedName","placeholder","Count","dd","ExcelFile","ReactExport","ExcelSheet","DownloadExcel","dataCell","styleCell","alignment","horizontal","font","numFmt","styleCellCol1","styleCellAlt","patternType","fgColor","rgb","styleCellAltCol1","styleTitleRowInfo","bold","wrapText","bottom","right","styleCellLeftAllign","styleTitleRow","excelColumnsDataInfoSection","dataBodyTitles","dataBody","dataRow","excelColumnsHeaders","sz","wpx","excelColumnsDataMain","multiDataSet","columns","xSteps","ySteps","toLocaleString","downloadNow","hideElement","filename","dataSet","ExcelToolbar","handleClick","setExcel","classes","margin","padding","excelToolbarText","Fragment","Tooltip","placement","IconButton","xmlns","viewBox","d","Datatable","getMuiTheme","overrides","MUIDataTable","tableRoot","paper","boxShadow","borderBottom","borderRight","MuiTableRow","root","head","MuiTableCell","sizeSmall","MUIDataTableToolbar","titleRoot","icon","MUIDataTableBodyCell","MUITypography","body2","MUITablePagination","caption","downloadExcelNow","divStyle","innerWidth","styleHeader","textAlign","customHeader","column","TableCell","gridIcons","customHeadRender","captions","filterType","selectableRows","resizableColumns","selectableRowsHeader","viewColumns","download","textLabels","pagination","rowsPerPage","displayRows","setTableProps","downloadOptions","separator","onDownload","buildHead","buildBody","customRowRender","dataIndex","rowIndex","dataI","TableRow","specialRow","customToolbar","gridTitle","gridColumnsDataExcelInfoSection","ProjectionGrid1","assetProjection","useState","projectionGrid","setProjectionGrid","useEffect","GridButton","handleClickGridButton","getAssetGridValues","assetCurr","aggregate","taxOnDisposition","arrYear","arrAge","arrAdjAge","arrDeposits","arrFMV","arrRRIF","arrEOYBalance","arrWithdrawals","arrTaxPayableonIncome","arrTaxPayable","arrDispositionAmount","arrACB","arrCapitalGain","arrCapGainsExemption","gridTitleSection","Asset","componentDidUpdate","prevProps","handleRemoveAsset","assNo","assNext","assTaxTypeKey","setAssetValuesToDefault","taxValues","handleAddAsset","propId","debounceHandleUpdataDesc","debounce","updateDesc","updateClientTaxLiability","getAssetProjection","getData","displaySreadsheet","adjustVisibleOutputSection","clone2","cln","cloneNode","cln2","createElement","appendChild","addEventListener","typeValues","listAssetsToShow","ownerActionValues","listAssetTaxesToShow","DDTax","taxLiabOfClient","_","isEqual","themeColor","disableTaxMethods","taxStocks","taxRS","hideOwner","taxT","ownerT","assetTypeIns","Type","rrsp","showACB","showIncome","showDur","showGrowth","showDispose","showCotribution","showWithdrawal","showCGE","Array","disableAll","p","hasPersonalResidenceAlready","ownerAction","inputTitle","clear","Liability","handleRemoveLiability","liabNo","liabNext","setLiabilityValuesToDefault","handleAddLiability","liabilityCurr","setLiabData","loan","liabs","repays","listLiabsToShow","ownerValues","growthDirValues","growthSel","loanOrTax","showRepay","showExposure","Source","handleRemoveSource","isSourceGovNonOrphanBenefit","isDividendIncome","isSourceGovOrphansBenefit","sourceNo","sourceNextKey","includeGovOrphanBenefit","sourceCurr","handleAddSource","listSourcesToShow","gov","govOrphan","dividend","maxOrphan","maxOrphanDur","Need","handleRemoveNeed","needNo","needNext","handleAddNeed","need","needCurr","Owner","afterTaxTotalIncome","listNeedsToShow","percentN","hideRecover","ref","last","current","saveDefault","saveAsDefaultCase","defaultCommand","storageName","set","changeLanguage","defaultButton","createRef","emailAllowed","iOS","class1","styleVersion","changeLang","maxWidth","saveToFile","loadFromFile","EmailINA","loadStorage","Presentation","presentationCurr","getNewPresentation","pres","listProvincesToShow","showSaved","PopupUserinputDialog","makeStyles","spacing","handleOK","respondToInput","handleCancel","handleInfo","openDialog","DEFAULT_HEIGHT","sourceEdge","sourceChrome","optionsEdge","optionsChrome","Dialog","onClose","handleToggle","aria-labelledby","DialogTitle","DialogContent","DialogContentText","TextField","DialogActions","paddingRight","paddingBottom","Button","variant","Collapsible","togglePanel","enabled","handleCollapsibleClick","openCollapsible","arr","children","encryptedJson","setEncryptedJson","jsonEncrypted","setJsonEncrypted","encryptedJsonAssigned","setEncryptedJsonAssigned","myHeaders","Headers","append","clientJson","raw","APP_SITE","redirect","setClientFileContent","clientIndex","clientFileName","PasteClients","setClients","setNote","clientFileContent","newClients","allClientFileContentsAssigned","newClient","clientFileSpecs","clientFileSpec","clientFileSpecsCollection","clientFileSpecsCollectionJson","clipboard","writeText","readText","clipText","parsedObject","pastedClients","isArray","clientComponents","INAFullSpreadsheetData","dataPCV","dataNeed","dataGov","dataShort","afterTaxCPP_DB","colNo","dataColumns","dataColumn","dataColumnCapFund","survivorsIncome","surivorsSalaryProjection","totalIncome","getSurivorsSalaryProjection","survivorsNonGovNonAssetLiabIncomeProjection","getSurvivorsNonGovNonAssetLiabIncomeProjections","capFundBase","beneficiaryAge","otherIncome","getINAGridData","Survivors","gridColumnAligns","dataTitle","dataColHeaders","INAFullSpreadsheetHeaders","getInfoExcelAllAfterTax","EPFullSpreadsheetData","assetsLength","col","getEPGridData","EPFullSpreadsheetHeaders","getAssetLiabProjections","startAge","LE3","EstateLiabsByType","EstateLiabsByTypeLE3","proj","dataEstateLiability","tmpGrids","taxLiabCol","FMVCol","EstateLiabsByTypeGrowth","EstateLiabsByTypeInitialAmt","fmv","addAssetToProjections","rateRS","rateS","rateSB","rateRR","rateI","rateO","AssetnEstateLiabs","projectionsGrids","assetName","alreadyThere","AggregateGrid","insNeedLine","aggregateGrid","getSpouseINA","spouseInsRet","dataOutput","spouseInsLE","LESpouse","lifeExpectancy","formattedMoneyString","orphAge","twoNeedPercents","INAOption","topToTitle_Y","titleToPara_Y","HEADER_RECT_IN_Y","incY","incColourdRowsY","incTableY","len","spouseSwitched","paragraph","yOffset","alert","OutputPresentation","doPDF","doSavePdfAction","doLIFO","parent","postMessage","encryptedInputLife1","doWL","doEP","encryptedInputLife1AndSpouse","doCompuLife","birthYr","birthMth","birthDay","provinceCode","innerHeight","externalWindow","containerEl","projYears","scales","xAxes","stacked","yAxes","ticks","beginAtZero","callback","dataLabels","dColor","dataValues2","dataInsurance2","PDFTopMargin","overflowX","overflowY","pg4TabRow3","pg4TabRow4","colSpan","pg6TabRow2","setFontForTitle","addNote","para","setFontForParas","insertPara","insertBullet","bullet","insertTableTitle","paraWidths","fillColor","insertTableRow","insertGrid2","wrappedTitleBar","startYr","totalGridWidth","goodWidth","widthTotal","goodWidthMultiLine","addMore","height2","String","insertGrid","lastRow","titleY","title1","title2","para1","para2","OutputGraphsEPLeakage","k","dtaAgesAll","INAEstateOption","leakageGraps","boxWidth","OutputGraphStacked","optionsEstate","elements","point","radius","dataAssetnEstateLiabProj","taxLiabLine","shadeColor","R","G","B","dataEstate","overflow","OutputPresentationEP","doINA","clickMultiButton","parag","tableWidthAss","totalAssets","tmpY","tableWidth","totalLiabs","tableLeft","drawRect","doSavePdfActionEP","doPrint","mywindow","write","innerHTML","close","focus","imageAlign","styleWithLogo","loaded","p2","p5","p6","whiteSpace","showLeakageOnly","clientHeight","clientWidth","hFinal","wFinal","graphWidth","OutputGraphs","doSavePdfINAAppendixAction","pv","negNeed","mobile","maxYScale","ceil","dataFutureINA","shortfallNeg","optionsPieLiabs","dataPieAssets","dataPieLiabs","assetsPie","liabsPie","OutputGraphsEP","loadingMCC","estateLiab","estateLiabLE","taxL","dataPremiums","dataDB","dataSVEquiBuild","dataSVManulife","Prem","bestPremiumDur","bestMinMultiple","premiumDur","minMultiple","insMultiple","bestFitEquiBuild","chartRef","taxLiabChartRef","taxLiabTotal_Index","dataTaxLiabLifeExp","dataTaxLiab","dataLiabAtDeath","taxLiabs","optionsTaxLiab","steps","stepValue","dataPieEstateLiabNow","estateLiabLE3","dataPieEstateLiabLE","optionsLiab","optionsLiabLE","AnalysisGraphs","getMCCQuoteOutput","getMCCQuoteOutput1","getMCCQuoteOutput4","quoteClient","FAClean","dataMCC","readMCCData","dataAPISite","minPrem","lifeStatus","policy","objPremium","PremSet","faceAmount","objRider","ICO20","T20Amt","objCustomDB","solveForPremium_On","customDB","getDataFutureINA","PremSetAmt","PremSetDur","PremSolve","unshift","pop","getMCCQuoteOutputManu","PremSolveDur","insuranceAmtInitial","solveForOptimumQuote","ratio","dataFVofPrems","getDataFVofPrems","SumOfSquresDiff","insVal","gotHereInInnerLoop","solveForOptimumEquiBuild","selectMultiButtonINAorTax","getEstateLiabPieCharts","estateLiab2","l1","l2","l3","estateLiab3","l2LE","l3LE","currINA","dataFuture","fv","nextState","dataShortfallFV","dataPieTax","dataPieLiabsAtDeath","optionsPieTax","optionsPieLiabsAtDeath","optionsPieEstateLiab","optionsPieEstateLiabLE","dataMCCpremFV","dataMCCQuoteDB","optionsFV","dataProjectionCV","needToE","needToF","leftPadding","appSiteParent","defaults","NA","afterTwoSeconds","probateSync","qbProbate","hasProbate","govBenefitsSync","gov1","gov2","hasSpouseArray","hasSpouse","sourceGovSurv","govBenefits","cppSurvivor","sourceGovDB","govOrph","manageOrphanSync","intervalID","setInterval","loadData","OKToRemove","query","queryString","location","QS","handleInitilizeQuoteFromQueryString","handleIntitalFetch","recover","setHours","getHours","getMinutes","objJSONData","dataPresentations","snapimport","SnapImport","newDataInput","cloneDeep","newDataOutput","tr","reSync_reCalculate_reRender","newState","initialLoading","handleUpdateOutput","newStateCandidateInput","itemToUpdateGroup","itemToUpdateID","newStateCandidateOutput","populateOutput2","updateAssetProjectionOutput","newDataInputClient12","handleQueryString","newDataInputClient1","updateOutputData","dataOutputCandidate","cppOrphan","populateOutput","dataQS","showMsg","ft","encodeURIComponent","href","savedINA_QS","updateStateFromJSon","handleUpdateClient","redoAll","count","saveToStorage","syncPanelsValues2","debounceHandleUpdateOutput","debounceSaveToStorage","Survivor","survIdx","getSwitchClientsState","client1","handleUpdateAsset","manageRRIFBounds","addRRIFSource2","handleUpdateLiability","handleUpdateSource","failedRemove","handleUpdateNeed","handleUpdatePresentation","removeItem","handleUpdatePresentationChange","noRecalc","manageAddingClientWithIncome","manageAddingChild","manageEducation2","manageOrphan2","manageRemovingClientWithIncome","updateProjection","Liab","handleAddAssetTaxCredit","data2","exists","handleAddAssetTaxCredit2","nextKey","cl","manageRemoveOrphan","splice","removeRRIFSource","charit","liab","charitAsset","addRRIFSource","existingRRIF","sourceRRIF","copyPresentation","leading","trailing","areThereChildren","manageEducation","orphanBen","orphSources","setChildIDs","Set","add","has","childID","updateDataLang","oldLang","openParent","openForce","totalATaxIncome","setSurivorIndex","spKey","setSurivorIndex2","caseFromFile","showRecover","fileTarget","contentsFile","Smoker","Tax","Province","readAsText","respondToSaveRequest","blob","Blob","saveAs","saveToFile_OLD","failedAPI","urlReload","PARENT_SITE_PROD","shortid","generate","PARENT_SITE_TEST","callCalculateResultsAPI","resultIsOpen","visibleOutputSection","collapsible","setOutput","documentMode","graphs","selectMultiButtonPeriod","l","hideEstateRemoveMsg","dataOutput3","dataOutput7","tag","t","accessedAPI","langText","showInput","buttonCaption3","buttonCaptionPeriod","inputOutputIsValid","dataSurvivorSalaryIncome","graphsEP","analysis","govPopup","OrphanAges","dlgLogin","insuranceNeedEAge","App","baseUrl","getElementsByTagName","getAttribute","rootElement","ReactDOM","render","basename","planID","clientID","rating","planName","carrierName","carrierID","DepositMode","PremCustom","PremOffsetOn","PremOffsetYear","solveForPUA_On","solveRider_On","T10","T20","ICO10","T25","T30","T25Amt","T30Amt","T10Dur","T20Dur","T10Amt","objPUA","MaxPUA","MaxPUAAmt","BonusPUA","FundPUA","FundPUAAmt","FundPUADur","outputOptions","extCoverage","IRR_ERR","outputColumnIDs","generalInfo","formatNumericOutput"],"mappings":"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CRC,YAAa,mCACbC,QAAS,oCACTC,MAAO,+BACPC,SAAU,uBACVC,cAAe,uBACfC,QAAS,UACTC,QAAS,eACTC,UAAW,SACXC,OAAQ,aACRC,cAAe,oBACfC,MAAO,kBACPC,UAAW,UACXC,eAAgB,cAChBC,YAAa,WACbC,MAAO,iBACPC,YAAa,iBACbC,QAAS,mBAETC,QAAS,iBACTC,aAAc,iBAEhBrF,GAAI,CACF+D,UAAW,gDACXC,SAAU,iCACVC,QAAS,kBACTC,OAAQ,sBACRC,YAAa,wCACbC,QAAS,oCACTC,MAAO,8BACPC,SAAU,gCACVC,cAAe,uCACfC,QAAS,eACTC,QAAS,kBACTC,UAAW,YACXC,OAAQ,WACRC,cAAe,2BACfC,MAAO,sBACPC,UAAW,UACXC,eAAgB,oBAChBC,YAAa,UACbC,MAAO,wBACPE,QAAS,uBACTC,QAAS,2BACTC,aAAc,0BA8BLC,GAAc,CACzBxF,GAAI,CACFyF,OAAQ,CACN,2BACA,6BACA,+BACA,+BACA,iCACA,0BACA,yBAGJvF,GAAI,CACFuF,OAAQ,CACN,gDACA,wDACA,gDACA,wDACA,kDACA,sCACA,uBA8BOC,GAAW,CACtB1F,GAAI,CACF2F,QAAS,kBACTC,WAAY,uDACZC,QAAS,qBACTC,QAAS,uBACTC,QAAS,eACTC,QAAS,YASTC,KAAM,gBACNC,OAAQ,+DACRC,MAAO,mCAOTjG,GAAI,CACFyF,QAAS,sBACTC,WACE,qFACFC,QAAS,6BACTC,QAAS,yCACTC,QAAS,iBACTC,QAAS,qBACTI,QACE,kIACFC,WAAY,0DACZC,WACE,2MACFC,WACE,6HACFC,WACE,8FACFC,SACE,gGACFR,KAAM,qBACNC,OACE,wFACFC,MAAO,oCACPO,GACE,wHACFC,KACE,6GACFC,SACE,+HAIOC,GAAgB,CAC3BC,kBAAmB,CACjB9G,GAAI,CACF+G,KAAM,CACJ,gBACA,eACA,eACA,qBACA,oBACA,eACA,eACA,gCACA,8BACA,8BACA,iBAGJ7G,GAAI,CACF6G,KAAM,CACJ,sBACA,sBACA,iBACA,yBACA,wBACA,eACA,eACA,kDACA,8BACA,6BAC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iEACPC,MACE,gIAEFloB,KAAM,iCACNmoB,cAAe,CACb,gNACA,oGACA,oBACA,6DACA,sEACA,4DACA,yEACA,kUACA,oXACA,0MACA,8SAEFC,SACE,gIAEF5nB,KAAM,+CACN6nB,eAAgB,CACd,mRACA,mOACA,iBACA,aACA,cACA,qZACA,uSAEFC,eAAgB,CACd,gPACA,kDACA,wHACA,kDACA,kEACA,uOAGFxnB,KAAM,UACNynB,MACE,6QACF/mB,KAAM,WACNgnB,MACE,8DACFC,MAAO,mEACPC,MAAO,OACPC,MAAO,OAEPxmB,SAAU,4DAEVF,KAAM,uBACNC,MACE,8aACF0mB,MACE,uPAEAC,SAAS,wEACTC,SAAS,yBACTC,SAAS,yCACTC,SAAS,cACTC,SAAS,mBACTC,SAAS,uBACTC,SAAS,mBACTC,SAAS,kBACTC,UAAU,yBACVC,UAAU,kBACVC,YAAY,UACZC,gBAAiB,4DACjB5T,gBAAiB,uBACjBE,gBAAiB,uCACjBgB,eAAgB,mBAChBC,eAAgB,gBAChB0S,eAAgB,qBAGpB16B,GAAK,CACC6O,KAAM,iCACVC,MAAO,wBACPC,MAAO,uBACPC,MAAO,UACPC,MAAO,cAEPsnB,KAAM,eACNC,cAAe,CACb,kWACA,qdACA,oDACA,2CACA,6KACA,sCACA,uIACA,0LACA,gEACA,0BACA,8EAGFnmB,KAAM,gCACNC,MACE,oRACFC,QAAS,SACTC,WAAY,+BACZimB,SAAU,UACVC,YAAa,QACbC,UAAW,eAEXC,MAAO,2CACPC,MACE,kQACFC,MAAO,GACPC,YAAa,SACbC,YAAa,qBACbC,YAAa,8BACbC,YAAa,6DAEbC,YAAa,qCACbC,YAAa,GACbC,YAAa,GACbC,YAAa,GAEbC,YAAa,yBACbC,YAAa,GACbC,YAAa,GACbC,YAAa,GAEbC,YAAa,iCACbC,YAAa,GACbC,YAAa,GACbC,YAAa,GAEbC,YAAa,cACbC,YAAa,GACbC,YAAa,GACbC,YAAa,GAEbC,YAAa,mCACbC,YAAa,GACbC,YAAa,GACbC,YAAa,GAEbC,YAAa,SACbC,YAAa,GACbC,YAAa,GACbC,YAAa,GAGbC,YAAa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","file":"static/js/main.ff296d29.chunk.js","sourcesContent":["import { buildMode } from \"../../package.json\";\r\nimport { appletMode } from \"../../package.json\";\r\n\r\nexport const APPLET_INA = appletMode === \"INA\";\r\nexport const APPLET_EP = appletMode === \"EP\";\r\nexport const DISPLAY_NAME = appletMode;\r\nexport const DEFAULT_QUOTE = appletMode === \"INA\" ? \"INADefaultData\" : \"EPDefaultData\";\r\n\r\nexport const QUOTE_CLIENT = 0;\r\nexport const QUOTE_SPOUSE = 1;\r\nexport const QUOTE_JOINT = 2;\r\nexport const FIRST_BENEFICIARY_ID = 2; // index is 1 in Clients\r\n\r\nexport const ALIGN_LEFT = 1;\r\nexport const ALIGN_CENTRE = 2;\r\nexport const ALIGN_RIGHT = 3;\r\n\r\nexport const OUTPUT_WIDTH_PCT = 97.5;\r\nexport const OUTPUT_PADDING_LEFT = 2.5;\r\n\r\nexport const IMAGE_APPLET_EP = \"EPPage1\";\r\nexport const IMAGE_APPLET_INA = \"INAPage1\";\r\nexport const IMAGE_LOGO = \"AdvisorLogo\";\r\nexport const IMAGE_LOGO_OTHERPAGES = \"AdvisorLogoOtherPages\";\r\n\r\nexport const ASSET_PersonalResidence = 0;\r\nexport const ASSET_RealEstate = 1;\r\nexport const ASSET_Stocks = 2;\r\nexport const ASSET_company = 3;\r\nexport const ASSET_RRSP = 4;\r\nexport const ASSET_Bank = 5;\r\nexport const ASSET_Cash = 6;\r\nexport const ASSET_Other = 7;\r\nexport const ASSET_Insurance = 8;\r\nexport const ASSET_TaxCredit = 0;\r\n\r\nexport const TAX_NonTaxable = 0;\r\nexport const TAX_CapGains = 1;\r\nexport const TAX_CapGainsAnnual = 2;\r\nexport const TAX_RRSP = 3;\r\nexport const TAX_Taxable = 4;\r\nexport const TAX_Dividend = 5;\r\n\r\nexport const LIABILITY_LastExpenses = 0;\r\nexport const LIABILITY_LegalExecutorFees = 1;\r\nexport const LIABILITY_OutstandingLoans = 2;\r\nexport const LIABILITY_MortgageRedemption = 3;\r\nexport const LIABILITY_EmergencyFund = 4;\r\nexport const LIABILITY_CharitableGifts = 5;\r\nexport const LIABILITY_LegacyforChildren = 6;\r\nexport const LIABILITY_ChildHomeCare = 7;\r\nexport const LIABILITY_CreditCards = 8;\r\nexport const LIABILITY_IncomeTaxes = 9;\r\nexport const LIABILITY_ClientTaxliability = 10;\r\nexport const LIABILITY_Other = 11;\r\n\r\nexport const ASSET_API_OUTPUT_Year = 0;\r\nexport const ASSET_API_OUTPUT_Age = 1;\r\nexport const ASSET_API_OUTPUT_FMV = 2;\r\nexport const ASSET_API_OUTPUT_EOYBalance = 3;\r\nexport const ASSET_API_OUTPUT_ACB = 4;\r\nexport const ASSET_API_OUTPUT_UCC = 5;\r\nexport const ASSET_API_OUTPUT_CCA = 6;\r\nexport const ASSET_API_OUTPUT_CapitalGain = 7;\r\nexport const ASSET_API_OUTPUT_TaxabaleGain = 8;\r\nexport const ASSET_API_OUTPUT_Recapture = 9;\r\nexport const ASSET_API_OUTPUT_TaxPayable = 10;\r\nexport const ASSET_API_OUTPUT_CapGainsExemption = 11;\r\nexport const ASSET_API_OUTPUT_Deposits = 12;\r\nexport const ASSET_API_OUTPUT_Withdrawals = 13;\r\nexport const ASSET_API_OUTPUT_RRIF = 14;\r\nexport const ASSET_API_OUTPUT_TaxPayableonIncome = 15;\r\nexport const ASSET_API_OUTPUT_DispositionAmount = 16;\r\n\r\nexport const LIABILITY_API_OUTPUT_Year = 0;\r\nexport const LIABILITY_API_OUTPUT_Age = 1;\r\nexport const LIABILITY_API_OUTPUT_ProjectedValue = 2;\r\nexport const LIABILITY_API_OUTPUT_TaxCredit = 3;\r\n\r\nexport const DROPDOWN_WIDE = 1;\r\n\r\nexport const OWNER_ACTION_CLIENTLIQUIDATE = 0;\r\nexport const OWNER_ACTION_CLIENTROLLOVER = 1;\r\nexport const OWNER_ACTION_Spouse = 2;\r\nexport const OWNER_ACTION_Joint = 3;\r\n\r\nexport const DEFAULT_DIVIDEND_TAX_RATE = 30;\r\nexport const DEFAULT_AVG_TAX_RATE = 25;\r\nexport const DEFAULT_CLIENT_AGE = 45;\r\nexport const DEFAULT_SPOUSE_AGE = 40;\r\nexport const DEFAULT_SPOUSE_SALARY = 60000;\r\nexport const DEFAULT_CLIENT_SALARY = 60000;\r\nexport const DEFAULT_SPOUSE_CPP = 100;\r\nexport const DEFAULT_CLIENT_CPP = 50;\r\nexport const DEFAULT_SPOUSE_RETIREMENT = 65;\r\nexport const DEFAULT_CLIENT_RETIREMENT = 65;\r\nexport const DEFAULT_PROVINCE = \"BC\";\r\nexport const DEFAULT_INFLATION = 2;\r\nexport const DEFAULT_INVESTMENT = 3;\r\nexport const DEFAULT_NEED_PERCENT1 = 75;\r\nexport const DEFAULT_NEED_PERCENT2 = 60;\r\n\r\nexport const DEFAULT_RRIF_AGE = 70;\r\n\r\nexport const DISPLAY_RETIREMENT = 0;\r\nexport const DISPLAY_LIFEEXP = 1;\r\nexport const DISPLAY_ENDAGE = 2;\r\nexport const DISPLAY_LIFEEXP_PLUS_3 = 3;\r\n\r\nexport const ORPHAN_AGE_QC = 17;\r\nexport const ORPHAN_AGE_NON_QC = 18;\r\nexport const MAX_ORPHAN_DUR_QC = 18;\r\nexport const MAX_ORPHAN_DUR_NON_QC = 25;\r\nexport const UNIVERSITY_START_AGE = 18;\r\nexport const UNIVERSITY_END_AGE = 22;\r\n\r\nexport const DISPLAY_PRESENTATION = 1;\r\nexport const DISPLAY_GRAPHS = 2;\r\nexport const DISPLAY_SPREADSHEET = 3;\r\nexport const DISPLAY_ANALYSIS = 4;\r\n\r\nconst API_SITE_PROD = \"\"; //\"https://privateapi.ppi.ca/ToolkitDirect\"\r\nconst API_SITE_TEST = \"\"; //\"https://test-tkdirectapi.ppi.ca\";\r\nconst API_SITE_LOCAL = \"http://localhost:8082\"; // \"\"; turn this to \"\" and use proxy server on 3003, first turn on from toolkitDirectProxy Server projet by npm start\r\n\r\nexport const appSiteAPI =\r\n  buildMode === 0\r\n    ? API_SITE_LOCAL\r\n    : buildMode === 1\r\n    ? API_SITE_TEST\r\n    : API_SITE_PROD;\r\n\r\n\r\nexport const ASSET_YEAR_TODAY = {\r\n  en: {\r\n    today: \"today\",\r\n  },\r\n  fr: {\r\n    today: \"auj.\",\r\n  },\r\n};\r\n\r\nexport const TAXASSETS = {\r\n  en: {\r\n    header: \"Tax Treatment\",\r\n    Values: [\r\n      /* 'Non-taxable',\t\r\n\t\t\t'Capital Gains Income',\t\r\n\t\t\t'Registered',\t\r\n\t\t\t'Fully Taxable',\t\r\n\t\t\t'RRIF',\t\r\n\t\t\t'Life Insurance',\t\r\n\t\t\t'Dividend'\t */\r\n      \"Non-taxable\",\r\n      \"Capital Gains Deferred\",\r\n      \"Capital Gains Annual\",\r\n      \"Registered\",\r\n      \"Fully Taxable\",\r\n      \"Dividend\",\r\n    ],\r\n  },\r\n  fr: {\r\n    header: \"Traitement fiscal\",\r\n    Values: [\r\n      \"Non imposable\",\r\n      \"Gains en capital différés\",\r\n      \"Gains en capital annuels\",\r\n      \"Enregistré\",\r\n      \"Pleinement imposable\",\r\n      \"Dividende\",\r\n      /* 'Non imposable',\t\r\n\t\t\t'Revenus de gains en capital',\t\r\n\t\t\t'Enregistré',\t\r\n\t\t\t'Pleinement imposable',\t\r\n\t\t\t'FERR',\t\r\n\t\t\t'Assurance vie',\t\r\n\t\t\t'Dividendes/Participations'\t */\r\n    ],\r\n  },\r\n};\r\n\r\nexport const CONTROLTITLEASSETS = {\r\n  en: {\r\n    type: \"Type\",\r\n    owner: \"Owner\",\r\n    amount: \"Current Value\",\r\n    tax: \"Tax Method\",\r\n    disposeYr: \"Year to Dispose\",\r\n    disposeDur: \"Duration of Disposal\",\r\n    ACB: \"ACB\",\r\n    smallBusinessCapGainExemption: \"Exemption ...\",\r\n  },\r\n  fr: {\r\n    type: \"Type\",\r\n    owner: \"Propriétaire\",\r\n    amount: \"Valeur actuelle\",\r\n    tax: \"Moyen de taxation\",\r\n    disposeYr: \"Année d'élimination\",\r\n    disposeDur: \"Durée de la cession\",\r\n    ACB: \"PBR\",\r\n    smallBusinessCapGainExemption: \"Exonération ...\",\r\n  },\r\n};\r\n/* export const LIABILITIES = {\r\n  en: {\r\n    header: \"Cash Needs at Death\",\r\n    Values: [\r\n      \"Last Expenses\",\r\n      \"Legal and Executor Fees\",\r\n      \"Outstanding Loans\",\r\n      \"Mortgage Redemption\",\r\n      \"Emergency Fund\",\r\n      \"Charitable Gifts\",\r\n      \"Legacy for Children\",\r\n      \"Child/Home Care\",\r\n      \"Credit Cards\",\r\n      \"Income Taxes\",\r\n      \"Other\",\r\n      \"Client Tax liability\"\r\n    ]\r\n  },\r\n  fr: {\r\n    header: \"Liquidités requises au décès\",\r\n    Values: [\r\n      \"Derniers frais\",\r\n      \"Frais juridiques et successoraux\",\r\n      \"Emprunts à rembourser\",\r\n      \"Acquittement de l'hypothèque\",\r\n      \"Fonds d'urgence\",\r\n      \"Dons de bienfaisance\",\r\n      \"Héritage pour les enfants\",\r\n      \"Garde d'enfants/soins à domicile\",\r\n      \"Cartes de crédit\",\r\n      \"Impôt sur le revenu\",\r\n      \"Autre\",\r\n      \"Impôt à payer par le client\"\r\n    ]\r\n  }\r\n}; */\r\n\r\nexport const INCSOURCESATDEATH = {\r\n  en: {\r\n    options: {\r\n      header: \"Options\",\r\n      client: \"Client Retirement Age\",\r\n      spouse: \"Spouse Retirement Age\",\r\n    },\r\n    CPP: {\r\n      header: \"Canada Pension Plan\",\r\n      client: \"Client Participation\",\r\n      spouse: \"Spouse Participation\",\r\n    },\r\n    survivorRetInc: {\r\n      header: \"Estimated Survivor's Retirement Income (in today's dollars)\",\r\n      client: \"Client Annual Income\",\r\n      spouse: \"Spouse Annual Income\",\r\n    },\r\n  },\r\n  fr: {\r\n    options: {\r\n      header: \"Options\",\r\n      client: \"Âge de la retraite - client\",\r\n      spouse: \"Âge de la retraite - conjoint\",\r\n    },\r\n    CPP: {\r\n      header: \"Régime de pensions du Canada\",\r\n      client: \"Contribution du client\",\r\n      spouse: \"Contribution du conjoint\",\r\n    },\r\n    survivorRetInc: {\r\n      header:\r\n        \"Estimation du revenu de retraite du survivant (en dollars d'aujourd'hui)\",\r\n      client: \"Revenu annuel du client\",\r\n      spouse: \"Revenu annuel du conjoint\",\r\n    },\r\n  },\r\n};\r\n\r\nexport const PRESENTATION = {\r\n  en: {\r\n    illustrate: {\r\n      header: \"Illustrate Death Of\",\r\n      client: \"Client (New Client)\",\r\n      spouse: \"Spouse\",\r\n      combined: \"Combined\",\r\n    },\r\n    pres: {\r\n      header: \"Presentation\",\r\n      assump: {\r\n        header: \"Presentation Options\",\r\n        inf: \"Inflation Rate\",\r\n        inv: \"Investment Interest Rate\",\r\n      },\r\n      type: {\r\n        header: \"Presentation Type\",\r\n        power: \"PowerPoint\",\r\n        excel: \"Excel\",\r\n      },\r\n      lang: {\r\n        header: \"Presentation Language\",\r\n        en: \"English\",\r\n        fr: \"French\",\r\n      },\r\n      template: {\r\n        header: \"Presentation Templates - 1 available\",\r\n        file: \"File Name\",\r\n      },\r\n    },\r\n    insQuote: {\r\n      header: \"Life Insurance Quote\",\r\n      lifeExp: \"For survivor's normal life expectancy\",\r\n      65: \"Until survivor is age 65\",\r\n      25: \"Until youngest child is age 25\",\r\n      18: \"Until youngest child is age 18\",\r\n    },\r\n  },\r\n  fr: {\r\n    illustrate: {\r\n      header: \"Exemple présentant le décès...\",\r\n      client: \"Client (nouveau client)\",\r\n      spouse: \"Conjoint\",\r\n      combined: \"Combiné\",\r\n    },\r\n    pres: {\r\n      header: \"Présentation\",\r\n      assump: {\r\n        header: \"Options de la présentation\",\r\n        inf: \"Taux d'inflation\",\r\n        inv: \"Taux d'intérêt des placements\",\r\n      },\r\n      type: {\r\n        header: \"Type de présentation\",\r\n        power: \"PowerPoint\",\r\n        excel: \"Excel\",\r\n      },\r\n      lang: {\r\n        header: \"Langue de la présentation\",\r\n        en: \"Anglais\",\r\n        fr: \"Français\",\r\n      },\r\n      template: {\r\n        header: \"Modèles de présentation - 1 disponible\",\r\n        file: \"Nom du fichier\",\r\n      },\r\n    },\r\n    insQuote: {\r\n      header: \"Soumission d'assurance vie\",\r\n      lifeExp: \"Pour l'espérance de vie moyenne du survivant\",\r\n      65: \"Jusqu'au 65e anniversaire du survivant\",\r\n      25: \"Jusqu'au 25e anniversaire de l'enfant le plus jeune\",\r\n      18: \"Jusqu'au 18e anniversaire de l'enfant le plus jeune\",\r\n    },\r\n  },\r\n};\r\n\r\nexport const ASSUMPTIONS = {\r\n  en: {\r\n    client: {\r\n      header: \"Client\",\r\n      retAge: \"Retirement Age\",\r\n      margTax: \"Current Marginal Tax Rate\",\r\n      avTax: \"Average Tax Rate at Retirement\",\r\n    },\r\n    spouse: {\r\n      header: \"Spouse\",\r\n      retAge: \"Retirement Age\",\r\n      margTax: \"Current Marginal Tax Rate\",\r\n      avTax: \"Average Tax Rate at Retirement\",\r\n    },\r\n    incAndInf: {\r\n      header: \"Retirement Income and Inflation\",\r\n      aftTaxInc: \"Current After-Tax Income\",\r\n      avTax: \"Current Average Tax Rate\",\r\n      aftTaxRetInc: \"Desired After-Tax Retirement Income\",\r\n      infRate: \"Inflation Rate\",\r\n    },\r\n  },\r\n  fr: {\r\n    client: {\r\n      header: \"Client\",\r\n      retAge: \"Âge de la retraite\",\r\n      margTax: \"Taux d'imposition marginal actuel\",\r\n      avTax: \"Taux d'imposition moyen à la retraite\",\r\n    },\r\n    spouse: {\r\n      header: \"Conjoint\",\r\n      retAge: \"Âge de la retraite\",\r\n      margTax: \"Taux d'imposition marginal actuel\",\r\n      avTax: \"Taux d'imposition moyen à la retraite\",\r\n    },\r\n    incAndInf: {\r\n      header: \"Revenus de retraite et inflation\",\r\n      aftTaxInc: \"Revenus actuels après impôts\",\r\n      avTax: \"Taux d'imposition moyen actuel\",\r\n      aftTaxRetInc: \"Revenus de retraite souhaités après impôts\",\r\n      infRate: \"Taux d'inflation\",\r\n    },\r\n  },\r\n};\r\n\r\nexport const CURRENTSAVE = {\r\n  en: {\r\n    client: {\r\n      header: \"Client\",\r\n      regist: {\r\n        header: \"Registered\",\r\n        currVal: \"Current Value\",\r\n        annCont: \"Annual Contributions\",\r\n        RoR: \"Current Rate of Return\",\r\n        RoRAtRet: \"Assumed Rate of Return at Retirement\",\r\n      },\r\n      nonRegist: {\r\n        header: \"Non-Registered\",\r\n        currVal: \"Current Value\",\r\n        annCont: \"Annual Contributions\",\r\n        RoR: \"Current Rate of Return\",\r\n        RoRAtRet: \"Assumed Rate of Return at Retirement\",\r\n      },\r\n      TFSA: {\r\n        header: \"TFSA\",\r\n        currVal: \"Current Value\",\r\n        annCont: \"Annual Contributions\",\r\n        RoR: \"Current Rate of Return\",\r\n        RoRAtRet: \"Assumed Rate of Return at Retirement\",\r\n      },\r\n    },\r\n    spouse: {\r\n      header: \"Spouse\",\r\n      regist: {\r\n        header: \"Registered\",\r\n        currVal: \"Current Value\",\r\n        annCont: \"Annual Contributions\",\r\n        RoR: \"Current Rate of Return\",\r\n        RoRAtRet: \"Assumed Rate of Return at Retirement\",\r\n      },\r\n      nonRegist: {\r\n        header: \"Non-Registered\",\r\n        currVal: \"Current Value\",\r\n        annCont: \"Annual Contributions\",\r\n        RoR: \"Current Rate of Return\",\r\n        RoRAtRet: \"Assumed Rate of Return at Retirement\",\r\n      },\r\n      TFSA: {\r\n        header: \"TFSA\",\r\n        currVal: \"Current Value\",\r\n        annCont: \"Annual Contributions\",\r\n        RoR: \"Current Rate of Return\",\r\n        RoRAtRet: \"Assumed Rate of Return at Retirement\",\r\n      },\r\n    },\r\n  },\r\n  fr: {\r\n    client: {\r\n      header: \"Client\",\r\n      regist: {\r\n        header: \"Enregistrée\",\r\n        currVal: \"Valeur actuelle\",\r\n        annCont: \"Cotisations annuelles\",\r\n        RoR: \"Taux de rendement actuel\",\r\n        RoRAtRet: \"Taux de rendement hypothétique à la retraite\",\r\n      },\r\n      nonRegist: {\r\n        header: \"Non enregistrée\",\r\n        currVal: \"Valeur actuelle\",\r\n        annCont: \"Cotisations annuelles\",\r\n        RoR: \"Taux de rendement actuel\",\r\n        RoRAtRet: \"Taux de rendement hypothétique à la retraite\",\r\n      },\r\n      TFSA: {\r\n        header: \"CELI\",\r\n        currVal: \"Valeur actuelle\",\r\n        annCont: \"Cotisations annuelles\",\r\n        RoR: \"Taux de rendement actuel\",\r\n        RoRAtRet: \"Taux de rendement hypothétique à la retraite\",\r\n      },\r\n    },\r\n    spouse: {\r\n      header: \"Spouse\",\r\n      regist: {\r\n        header: \"Enregistrée\",\r\n        currVal: \"Valeur actuelle\",\r\n        annCont: \"Cotisations annuelles\",\r\n        RoR: \"Taux de rendement actuel\",\r\n        RoRAtRet: \"Taux de rendement hypothétique à la retraite\",\r\n      },\r\n      nonRegist: {\r\n        header: \"Non enregistrée\",\r\n        currVal: \"Valeur actuelle\",\r\n        annCont: \"Cotisations annuelles\",\r\n        RoR: \"Taux de rendement actuel\",\r\n        RoRAtRet: \"Taux de rendement hypothétique à la retraite\",\r\n      },\r\n      TFSA: {\r\n        header: \"CELI\",\r\n        currVal: \"Valeur actuelle\",\r\n        annCont: \"Cotisations annuelles\",\r\n        RoR: \"Taux de rendement actuel\",\r\n        RoRAtRet: \"Taux de rendement hypothétique à la retraite\",\r\n      },\r\n    },\r\n  },\r\n};\r\n\r\nexport const PROGGOUV = {\r\n  en: {\r\n    CPP: {\r\n      header: \"Canada Pension Plan\",\r\n      part: \"Client Participation\",\r\n      start: \"Client Start Age\",\r\n      spousePart: \"Spouse Participation\",\r\n      spouseStart: \"Spouse Start Age\",\r\n    },\r\n    oldAgeSec: {\r\n      header: \"Old Age Security\",\r\n      part: \"Client Participation\",\r\n      start: \"Client Start Age\",\r\n      spousePart: \"Spouse Participation\",\r\n      spouseStart: \"Spouse Start Age\",\r\n    },\r\n  },\r\n  fr: {\r\n    CPP: {\r\n      header: \"Régime de pensions du Canada\",\r\n      part: \"Contribution du client\",\r\n      start: \"Âge du client au départ\",\r\n      spousePart: \"Contribution du conjoint\",\r\n      spouseStart: \"Âge du conjoint au départ\",\r\n    },\r\n    oldAgeSec: {\r\n      header: \"Sécurité de la vieillesse\",\r\n      part: \"Contribution du client\",\r\n      start: \"Âge du client au départ\",\r\n      spousePart: \"Contribution du conjoint\",\r\n      spouseStart: \"Âge du conjoint au départ\",\r\n    },\r\n  },\r\n};\r\n\r\nexport const INCSOURCESATRET = {\r\n  en: {\r\n    client: {\r\n      header: \"Client\",\r\n      from: \"From Age\",\r\n      to: \"To Age\",\r\n      inc: \"Income Amount\",\r\n    },\r\n    spouse: {\r\n      header: \"Spouse\",\r\n      from: \"From Age\",\r\n      to: \"To Age\",\r\n      inc: \"Income Amount\",\r\n    },\r\n  },\r\n  fr: {\r\n    client: {\r\n      header: \"Client\",\r\n      from: \"de l'âge\",\r\n      to: \"à l'âge\",\r\n      inc: \"Montant des revenus\",\r\n    },\r\n    spouse: {\r\n      header: \"Spouse\",\r\n      from: \"de l'âge\",\r\n      to: \"à l'âge\",\r\n      inc: \"Montant des revenus\",\r\n    },\r\n  },\r\n};\r\n\r\nexport const CONTROLTITLE = {\r\n  en: {\r\n    age: \"Age\",\r\n    sex: \"Sex\",\r\n    smoking: \"Smoking Status\",\r\n    name: \"Name\",\r\n    member: \"Member\",\r\n    type: \"Type\",\r\n    owner: \"Owner\",\r\n    growthDir: \"Grows/Reduces\",\r\n    exposureDur: \"Exposure Duration\",\r\n    changeRate: \"Reduction Rate\",\r\n    repay: \"Annual Repayment\",\r\n    amount: \"Current Value\",\r\n    FA: \"Face Amount\",\r\n    amountGross: \"Gross Value\",\r\n    afterTaxAmount: \"After-tax Value\",\r\n    percent: \"Percent\",\r\n    tax: \"Tax Method\",\r\n    desc: \"Description\",\r\n    disposeYr: \"Year to Dispose\",\r\n    disposeDur: \"Dur. of Disposal\",\r\n    startYear: \"Start Year\",\r\n    dur: \"Duration\",\r\n    ACB: \"ACB\",\r\n    smallBusinessCapGainExemption: \"Exemption...\",\r\n    growth: \"Growth Rate\",\r\n    income: \"Gross Income\",\r\n    avgTax: \"Avg. Tax Rate\",\r\n    retAge: \"Retirement Age\",\r\n    protectToAge: \"Protect to Age\",\r\n    cppElig: \"CPP Eligibility\",\r\n    qppElig: \"QPP Eligibility\",\r\n    invRate: \"Investment Rate\",\r\n    inflation: \"Inflation Rate\",\r\n    taxRate: \"Marginal Tax Rate\",\r\n    dividendTaxRate: \"Dividend Tax Rate\",\r\n    province: \"Province\",\r\n    designedBy: \"Designed By\",\r\n    designedFor: \"Designed For\",\r\n    contributionAmt: \"Contribution\",\r\n    contributionStartYr: \"From Year\",\r\n    contributionDur: \"Duration\",\r\n    withdrawalAmt: \"Withdrawal\",\r\n    withdrawalStartYr: \"From Year\",\r\n    withdrawalDur: \"Duration\",\r\n    incomeRate: \"Income Rate\",\r\n    RRIFRate: \"RRIF Growth Rate\",\r\n    RRIFAge: \"RRIF Age\",\r\n    ownershipAction: \"Ownership\",\r\n    pdf: \"Export to PDF\",\r\n    pdfINAAppendix: \"Export to PDF Appendix\",\r\n    print: \"Printable Page\",\r\n    lifo: \"Life Insurance Funding Options\",\r\n    wl: \"Insurance for Your Whole Life\",\r\n    ep: \"Protecting Your Estate \",\r\n    compulife: \"Get a Quote ...\",\r\n    save: \"Save\",\r\n    load: \"Load\",\r\n    rec: \"Recover\",\r\n    notes: \"Notes\",\r\n    switch: \"Switch Client\"\r\n  },\r\n  fr: {\r\n    age: \"Âge\",\r\n    sex: \"Sexe\",\r\n    smoking: \"Fumeur / non-fumeur\",\r\n    name: \"Nom\",\r\n    member: \"Membre\",\r\n    type: \"Type\",\r\n    owner: \"Propriétaire\",\r\n    growthDir: \"Augmente/diminue\",\r\n    exposureDur: \"Durée de l'exposition\",\r\n    changeRate: \"Taux de réduction\",\r\n    repay: \"Remboursement annuel\",\r\n    amount: \"Valeur actuelle\",\r\n    FA: \"Capital assuré\",\r\n    amountGross: \"Valeur brute\",\r\n    afterTaxAmount: \"Valeur après impôt\",\r\n    percent: \"Pourcentage\",\r\n    tax: \"Méthode fiscale\",\r\n    desc: \"Description\",\r\n    disposeYr: \"Année à éliminer\",\r\n    disposeDur: \"Durée de l'élimination\",\r\n    startYear: \"Année de démarrage\",\r\n    dur: \"Durée\",\r\n    ACB: \"PBR\",\r\n    smallBusinessCapGainExemption: \"Exonération...\",\r\n    growth: \"Taux de croissance\",\r\n    income: \"Revenu brut\",\r\n    avgTax: \"% d'impôt moyen\",\r\n    retAge: \"Âge de la retraite\",\r\n    protectToAge: \"Protection à l'âge\",\r\n    cppElig: \"Admissibilité au RPC\",\r\n    qppElig: \"Admissibilité au RRQ\",\r\n    invRate: \"Taux de rendement\",\r\n    inflation: \"Taux d'inflation\",\r\n    taxRate: \"% d'impôt marginal\",\r\n    dividendTaxRate: \"Taux d'imposition\", // des dividendes\",\r\n    province: \"Province\",\r\n    designedBy: \"Par\",\r\n    designedFor: \"Conçu pour\",\r\n    contributionAmt: \"Contribution\",\r\n    contributionStartYr: \"From Year\",\r\n    contributionDur: \"Durée\",\r\n\r\n    withdrawalAmt: \"Retrait\",\r\n    withdrawalStartYr: \"De l'année\",\r\n    withdrawalDur: \"Durée\",\r\n\r\n    incomeRate: \"Revenu en %\",\r\n    RRIFRate: \"Taux de crois. FERR\",\r\n    RRIFAge: \"Âge – FERR\",\r\n    ownershipAction: \"Propriété\",\r\n    pdf: \"Exporter en format PDF\",\r\n    pdfINAAppendix: \"Exporter vers l'annexe PDF\",\r\n    print: \"Page imprimable\",\r\n    lifo: \"Modes de financement de l'assurance vie\",\r\n    wl: \"L'assurance pour votre vie entière\",\r\n    ep: \"Protection de votre patrimoine\",\r\n    compulife: \"Générer une cotation\",\r\n    save: \"Enregistrer\",\r\n    load: \"Charger\",\r\n    rec: \"Récupérer\",\r\n    notes: \"Notes\",\r\n    switch: \"Client d'échange\"\r\n  },\r\n};\r\n\r\nexport const TITLES = {\r\n  en: {\r\n    appletINA: \"Insurance Needs Analysis\",\r\n    appletEP: \"Protecting Your Estate\",\r\n    clients: \"Family Profile\",\r\n    assets: \"Assets, Sources of Cash\",\r\n    liabilities: \"Liabilities, Cash Needs at Death\",\r\n    sources: \"Sources of Income of the Survivor\",\r\n    needs: \"Income Needs of the Survivor\",\r\n    settings: \"Presentation Options\",\r\n    presentations: \"Presentation Details\",\r\n    results: \"Results\",\r\n    presBut: \"Presentation\",\r\n    graphsBut: \"Graphs\",\r\n    retBut: \"Retirement\",\r\n    protectButton: \"Protection Period\",\r\n    leBut: \"Life Expectancy\",\r\n    age100But: \"Age 100\",\r\n    spreadsheetBut: \"Spreadsheet\",\r\n    analysisBut: \"Analysis\",\r\n    benef: \"beneficiary...\",\r\n    insuredJLTD: \"insure as JLTD\",\r\n    insured: \"to be insured...\",\r\n\r\n    default: \"Set as Default\",\r\n    defaultClear: \"Clear Default\",\r\n  },\r\n  fr: {\r\n    appletINA: \"Analyse des besoins en matière d'assurance\",\r\n    appletEP: \"Protection de votre patrimoine\",\r\n    clients: \"Profil familial\",\r\n    assets: \"Sources de capitaux\",\r\n    liabilities: \"Liquidités requises au décès\",\r\n    sources: \"Sources de revenus au décès\",\r\n    needs: \"Revenus requis du survivant\",\r\n    settings: \"Options de la présentation\",\r\n    presentations: \"Précisions sur la présentation\",\r\n    results: \"Résultats\",\r\n    presBut: \"Présentation\",\r\n    graphsBut: \"Graphique\",\r\n    retBut: \"Retraite\",\r\n    protectButton: \"Période de protection\",\r\n    leBut: \"Espérance de vie\",\r\n    age100But: \"100 ans\",\r\n    spreadsheetBut: \"Feuille de calcul\",\r\n    analysisBut: \"Analyse\",\r\n    benef: \"bénéficiaire...\",\r\n    insured: \"être assuré...\",\r\n    default: \"Définir par défaut\",\r\n    defaultClear: \"Effacer Par défaut\",\r\n  },\r\n};\r\n\r\nexport const UNLISTED = {\r\n  en: {\r\n    Assets: {\r\n      Values: [\"Charit. Gifts Tax Credit\"],\r\n    },\r\n  },\r\n  fr: {\r\n    Assets: {\r\n      Values: [\"Crédit d'impôt pour don de bienfaisance\"],\r\n    },\r\n  },\r\n};\r\n\r\nexport const OUTPUTTEXT = {\r\n  en: {\r\n    Values: [\r\n      \"When you die, your family will face two important money needs, a need for Cash and a need for Income.  While some cash needs are temporary, others are required at all stages of life, so are identified as 'Permanent Cash Needs', When you die, your family will face two important money needs, a need for Cash and a need for Income,\tThe scenarios described in the preceding presentation outline some general financial strategies. Readers should seek independent legal, tax and accounting advice with regard to the views expressed in this document. Any numbers illustrated are provided as example and are to be used as estimates only.\",\r\n    ],\r\n  },\r\n  fr: {\r\n    Values: [\r\n      \"À votre décès, votre famille aura deux besoins financiers importants, un besoin de liquidités et un besoin de revenus.  Bien que certains besoins en liquidités soient temporaires, d'autres sont présents à chaque étape de la vie. On les désigne comme des « besoins permanents en liquidités »', À votre décès, votre famille aura deux besoins financiers importants, un besoin de liquidités et un besoin de revenus, Les scénarios décrits dans la présentation précédente illustrent des stratégies financières générales. Le lecteur devrait demander l'avis d'un conseiller juridique, fiscal ou comptable indépendant au sujet des opinions exprimées dans le présent document. Les chiffres illustrés ne sont donnés qu'à titre d'exemple et ne doivent être utilisés qu'à des fins d'estimation.\",\r\n    ],\r\n  },\r\n};\r\n\r\nexport const OUTPUTTITLE = {\r\n  en: {\r\n    Values: [\r\n      \"Insurance Needs Analysis\",\r\n      \"Family Cash Needs at Death\",\r\n      \"Family Income Needs at Death\",\r\n      \"Family Cash Sources at Death\",\r\n      \"Family Income Sources at Death\",\r\n      \"Life Insurance Analysis\",\r\n      \"Some Important Notes\",\r\n    ],\r\n  },\r\n  fr: {\r\n    Values: [\r\n      \"Analyse des besoins en matière d'assurance\",\r\n      \"Liquidités requises pour la famille au décès\",\r\n      \"Revenus requis pour la famille au décès\",\r\n      \"Sources de liquidités de la famille au décès\",\r\n      \"Sources de revenus de la famille au décès\",\r\n      \"Analyse des besoins d'assurance vie\",\r\n      \"Notes importantes\",\r\n    ],\r\n  },\r\n};\r\n\r\nexport const OUTPUTTITLE_EP = {\r\n  en: {\r\n    Values: [\r\n      \"Protecting your Estate\",\r\n      \"Family Cash Needs at Death\",\r\n      \"Family Income Needs at Death\",\r\n      \"Family Cash Sources at Death\",\r\n      \"Family Income Sources at Death\",\r\n      \"Life Insurance Analysis\",\r\n      \"Some Important Notes\",\r\n    ],\r\n  },\r\n  fr: {\r\n    Values: [\r\n      \"Protection de votre patrimoine\",\r\n      \"Liquidités requises pour la famille au décès\",\r\n      \"Revenus requis pour la famille au décès\",\r\n      \"Sources de liquidités de la famille au décès\",\r\n      \"Sources de revenus de la famille au décès\",\r\n      \"Analyse des besoins d'assurance vie\",\r\n      \"Notes importantes\",\r\n    ],\r\n  },\r\n};\r\n\r\nexport const MESSAGES = {\r\n  en: {\r\n    insNeed: \"Insurance Needs\",\r\n    graphLine2: \"To provide for the income shortfall until retirement\",\r\n    graphT1: \"Personal cash Flow\",\r\n    graphT2: \"Government cash Flow\",\r\n    graphT3: \"Income Needs\",\r\n    graphT4: \"Shortfall\",\r\n    /* infoYr0: \"Year 0 stands for “at death”\",\r\n    infoRetDur: \"Duration to retirement is … years\",\r\n    infoAvgTax: \"Survivor's tax rate is applied to annual income and interest and annual asset disposition. Marginal tax rate (under Presentation Details) is applied to planned or potential full disposition of an asset\",\r\n    infoAdjust:\r\n      \"Adjust Income Needs and Income Source durations to end age (99) or Life Expectancy of\",\r\n    clientOnly: \"Needs Analysis is always done for family member ‘Client'\",\r\n    infoElig:\r\n      \"Survivor's and orphan's benefits are based on Client's eligibility\", */\r\n    ever: \" ... for ever\",\r\n    taxMsg: \"Tax methods need to be discussed with your financial advisor\",\r\n    fetch: \"Failed to connect to the server\",\r\n    /*  ie: \"Please use Edge or Chrome browsers for graphs and full functionality\",\r\n    govB:\r\n      \"Do not delete government benefits. To adjust them change Client's eligibility\",\r\n    assetTax:\r\n      \"Please use after tax asset values until Tax Method becomes available\" */\r\n  },\r\n  fr: {\r\n    insNeed: \"Besoins d'assurance\",\r\n    graphLine2:\r\n      \"Pour couvrir le manque à gagner en matière de revenus jusqu'à la retraite\",\r\n    graphT1: \"Liquidités personnelles\",\r\n    graphT2: \"Liquidités versées par l'état\",\r\n    graphT3: \"Revenus requis\",\r\n    graphT4: \"Manque à gagner\",\r\n    infoYr0:\r\n      \"L'année 0 est l'année d                                                                                     u décès\",\r\n    infoRetDur: \"Le nombre d'années avant la retraite est de .... ans\",\r\n    infoAvgTax:\r\n      \"Survivor's tax rate is applied to annual income and interest and annual asset disposition. Marginal tax rate (under Presentaion Details) is applied to planned or potential full disposition of an asset\",\r\n    infoAdjust:\r\n      \"Ajuster les besoins de revenu et les durées de la source de revenu à dernier âge (99) or l'espérance de vie de\",\r\n    clientOnly:\r\n      \"L'analyse des besoins est toujours effectuée pour le «client» membre de la famille\",\r\n    infoElig:\r\n      \"Les prestations du survivant et de l'orphelin sont basées sur l'admissibilité du client\",\r\n    ever: \" ... pour toujours\",\r\n    taxMsg:\r\n      \"Les méthodes fiscales doivent être discutées avec votre conseiller financier\",\r\n    fetch: \"Défaut de connexion au serveur\",\r\n    ie:\r\n      \"s'il vous plaît utiliser les navigateurs Edge ou Chrome pour les graphiques et les fonctionnalités complètes\",\r\n    govB:\r\n      \"Ne supprimez pas les prestations gouvernementales. Pour les ajuster, modifier l'admissibilité du client\",\r\n    assetTax:\r\n      \"Veuillez utiliser les valeurs des actifs après impôt jusqu'à ce que la méthode d'imposition devienne disponibl\",\r\n  },\r\n};\r\n\r\nexport const COLUMN_TITLES = {\r\n  INA_SHEET_HEADERS: {\r\n    en: {\r\n      Full: [\r\n        \"Calendar Year\",\r\n        \"Survivor Age\",\r\n        \"Income Needs\",\r\n        \"Survivors' CPP/QPP\",\r\n        \"Survivors' Income\",\r\n        \"Other Income\",\r\n        \"Total Income\",\r\n        \"Assets, Liabilities Cash Flow\",\r\n        \"Additional Amounts Required\",\r\n        \"Additional Capital Required\",\r\n        \"Capital Fund\",\r\n      ],\r\n    },\r\n    fr: {\r\n      Full: [\r\n        \"Année calendaire\",\r\n        \"Âge du survivant\",\r\n        \"Revenus requis\",\r\n        \"RPC/RRQ des survivants\",\r\n        \"Revenu des survivants\",\r\n        \"Autre revenu\",\r\n        \"Revenu total\",\r\n        \"Flux de trésorerie des actifs et des passifs\",\r\n        \"Montants additionnel requis\",\r\n        \"Capital additionnel requis\",\r\n        \"Fonds de capitaux\",\r\n      ],\r\n    },\r\n  },\r\n  EP_SHEET_HEADERS: {\r\n    en: {\r\n      Full: [\r\n        \"Year\",\r\n        \"Age\",\r\n        \"BOY Balance\",\r\n        \"Fair Market Value\",\r\n        \"Contributions\",\r\n        \"Income, RRIF\",\r\n        \"Sale Proceeds\",\r\n        \"Tax on Income\",\r\n        \"Capital Gain\",\r\n        \"Capital Gains Exemption\",\r\n        \"EOY Balance\",\r\n        \"Average Growth\",\r\n        \"Tax Payable at Death\",\r\n      ],\r\n    },\r\n    fr: {\r\n      Full: [\r\n        \"Année\",\r\n        \"Âge\",\r\n        \"Valeur en début d'année\",\r\n        \"Juste valeur marchande\",\r\n        \"Contributions\",\r\n        \"Revenus, FEER\",\r\n        \"Produits de la vente\",\r\n        \"Impôt sur le revenu\",\r\n        \"Gain en capital\",\r\n        \"Exonération des gains en capital\",\r\n        \"Valeur en fin d'année\",\r\n        \"Croissance moyenne\",\r\n        \"Impôt payable au décès\",\r\n      ],\r\n    },\r\n  },\r\n\r\n  en: {\r\n    intRate: \"Interest Rate\",\r\n    infRate: \"Inflation Rate\",\r\n    surplusCapital: \"Surplus Capital\",\r\n    blank: \"\",\r\n    additionalCapitalReq: \"Additional Capital Required:\",\r\n    survivorLE: \"For survivor's normal life expectancy\",\r\n    survivor65: \"Until survivor is age 65\",\r\n    survivorProtection: \"Until the end of Protection Period\",\r\n    Year: \"Year\",\r\n    Age: \"Age\",\r\n    FMV: \"Fair Market Value\",\r\n    FA: \"Face Amount\",\r\n    EOYBalance: \"EOY Balance\",\r\n    ACB: \"ACB\",\r\n    AnnualContribution: \"Annual Contribution\",\r\n    MinRRIFIncome: \"Min. RRIF Income\",\r\n    Withdrawal: \"Income, Withdrawal\",\r\n    SaleProceeds: \"Sale Proceeds\",\r\n    RentalIncome: \"Rental Income\",\r\n    TaxLiability: \"Tax Liability\",\r\n    Taxonincome: \"Tax on income\",\r\n    TaxLiabilityatDeath: \"Tax Liability at Death\",\r\n    CapitalGain: \"Capital Gain\",\r\n    CapitalGainsExemption: \"Capital Gains Exemption\",\r\n  },\r\n  fr: {\r\n    intRate: \"Taux d'intérêt\",\r\n    infRate: \"Taux d'inflation\",\r\n    surplusCapital: \"Capital excédentaire\",\r\n    blank: \"\",\r\n    additionalCapitalReq: \"Capital additionnel requis: \",\r\n    survivorLE: \"Pour l'espérance de vie moyenne du survivant\",\r\n    survivor65: \"Jusqu'au 65e anniversaire du survivant\",\r\n    survivorProtection: \"Jusqu'à la fin de la période de protection\",\r\n    Year: \"Année\",\r\n    Age: \"Âge\",\r\n    FMV: \"Juste valeur marchande\",\r\n    FA: \"Capital assuré\",\r\n    EOYBalance: \"Valeur FDA\",\r\n    ACB: \"PBR\",\r\n    AnnualContribution: \"Cotisations annuelles\",\r\n    MinRRIFIncome: \"Revenu minimal d'un FERR\",\r\n    Withdrawal: \"Revenu, retrait\",\r\n    SaleProceeds: \"Produits de la vente\",\r\n    RentalIncome: \"Revenus locatifs\",\r\n    TaxLiability: \"Impôt à payer\",\r\n    Taxonincome: \"Impôt sur le revenu\",\r\n    TaxLiabilityatDeath: \"Impôt à payer au décès\",\r\n    CapitalGain: \"Gain en capital\",\r\n    CapitalGainsExemption: \"Exonération des gains en capital\",\r\n  },\r\n};\r\n\r\nexport const GRID_INTERNAL_CAPTIONS = {\r\n  en: {\r\n    excel: \"Download Excel\",\r\n    rows: \"Rows per page\",\r\n    of: \"of\",\r\n  },\r\n  fr: {\r\n    excel: \"Télécharger le fichier Excel\",\r\n    rows: \"Lignes par page\",\r\n    of: \"lignes 1-5 sur 10\",\r\n  },\r\n};\r\n\r\nexport const TOTALS = {\r\n  ESTATE_LIAB: {\r\n    value: { en: \"Estate Liability\", fr: \"Droits successoraux\" },\r\n    Key: \"ESTATE_LIAB\",\r\n    order: 1,\r\n    colour: \"#872651\",\r\n  },\r\n  TAX_LIAB: {\r\n    value: { en: \"Tax Liability\", fr: \"Impôt à payer\" },\r\n    Key: \"TAX_LIAB\",\r\n    order: 1,\r\n    colour: \"#872651\",\r\n  },\r\n};\r\n\r\nexport const EMAIL = {\r\n  en: {\r\n    body: \"The following link opens your quote in Toolkit Direct\", //. Once there, click on Insurance Needs Analysis to open up the attached quote.\",\r\n  },\r\n  fr: {\r\n    body:\r\n      \"Le lien suivant ouvre vos valeurs d'entrée dans Boîte à outils directe\",\r\n  },\r\n};\r\n\r\nexport const LIABILITIES = {\r\n  LAST_EXPENSES: {\r\n    value: { en: \"Last Expenses\", fr: \"Derniers frais\" },\r\n    Key: \"LAST_EXPENSES\",\r\n    order: 2,\r\n    ID: 0,\r\n  },\r\n  LEGAL_AND_EXECUTOR_FEES: {\r\n    value: {\r\n      en: \"Legal and Executor Fees\",\r\n      fr: \"Frais juridiques et successoraux\",\r\n    },\r\n    Key: \"LEGAL_AND_EXECUTOR_FEES\",\r\n    order: 3,\r\n    ID: 1,\r\n  },\r\n  OUTSTANDING_LOANS: {\r\n    value: { en: \"Outstanding Loans\", fr: \"Emprunts à rembourser\" },\r\n    Key: \"OUTSTANDING_LOANS\",\r\n    order: 4,\r\n    ID: 2,\r\n  },\r\n  MORTGAGE_REDEMPTION: {\r\n    value: { en: \"Mortgage Redemption\", fr: \"Acquittement de l'hypothèque\" },\r\n    Key: \"MORTGAGE_REDEMPTION\",\r\n    order: 5,\r\n    ID: 3,\r\n  },\r\n  EMERGENCY_FUND: {\r\n    value: { en: \"Emergency Fund\", fr: \"Fonds d'urgence\" },\r\n    Key: \"EMERGENCY_FUND\",\r\n    order: 6,\r\n    ID: 4,\r\n  },\r\n  CHARITABLE_GIFTS: {\r\n    value: { en: \"Charitable Gifts\", fr: \"Dons de bienfaisance\" },\r\n    Key: \"CHARITABLE_GIFTS\",\r\n    order: 7,\r\n    ID: 5,\r\n  },\r\n  LEGACY_FOR_CHILDREN: {\r\n    value: { en: \"Legacy for Children\", fr: \"Héritage pour les enfants\" },\r\n    Key: \"LEGACY_FOR_CHILDREN\",\r\n    order: 8,\r\n    ID: 6,\r\n  },\r\n  CHILD_HOME_CARE: {\r\n    value: { en: \"Child/Home Care\", fr: \"Garde d'enfants/soins à domicile\" },\r\n    Key: \"CHILD_HOME_CARE\",\r\n    order: 9,\r\n    ID: 7,\r\n  },\r\n  CREDIT_CARDS: {\r\n    value: { en: \"Credit Cards\", fr: \"Cartes de crédit\" },\r\n    Key: \"CREDIT_CARDS\",\r\n    order: 10,\r\n    ID: 8,\r\n  },\r\n  INCOME_TAXES: {\r\n    value: { en: \"Income Taxes\", fr: \"Impôt sur le revenu\" },\r\n    Key: \"INCOME_TAXES\",\r\n    order: 11,\r\n    ID: 9,\r\n  },\r\n  OTHER: { value: { en: \"Other\", fr: \"Autre\" }, Key: \"OTHER\", order: 10 },\r\n  CLIENT_TAX_LIABILITY: {\r\n    value: { en: \"Client Tax liability\", fr: \"Impôt à payer par le client\" },\r\n    Key: \"CLIENT_TAX_LIABILITY\",\r\n    order: 0, // no show\r\n    ID: 10,\r\n  },\r\n  PROBATE: {\r\n    value: { en: \"Probate\", fr: \"Frais d'homologation\" },\r\n    Key: \"PROBATE\",\r\n    order: 1,\r\n    ID: 11,\r\n  },\r\n  \r\n};\r\n\r\nexport const ASSETS = {\r\n  PERSONAL_RESIDENCE: {\r\n    value: {\r\n      en: \"Principal Residence\",\r\n      fr: \"Résidence principale\",\r\n      oldName: \"Personal Residence\",\r\n    },\r\n    Key: \"PERSONAL_RESIDENCE\",\r\n    order: 1,\r\n    ID: 0,\r\n    colour: \"#9B5BA5\",\r\n  },\r\n  REAL_ESTATE: {\r\n    value: { en: \"Real Estate\", fr: \"Immobilier\" },\r\n    Key: \"REAL_ESTATE\",\r\n    order: 2,\r\n    ID: 1,\r\n    colour: \"#0093b2\",\r\n  },\r\n  STOCKS_BONDS: {\r\n    value: { en: \"Stocks & Bonds\", fr: \"Actions et obligations\" },\r\n    Key: \"STOCKS_BONDS\",\r\n    order: 3,\r\n    ID: 2,\r\n    colour: \"#00215b\",\r\n  },\r\n  SMALL_BUSINESS_SHARES: {\r\n    value: {\r\n      en: \"Small Business Shares\",\r\n      fr: \"Actions de petites entreprises \",\r\n    },\r\n    Key: \"SMALL_BUSINESS_SHARES\",\r\n    order: 4,\r\n    ID: 3,\r\n    colour: \"#c4dfe0\",\r\n  },\r\n  RRSP_RRIF: {\r\n    value: { en: \"RRSP/RRIF\", fr: \"REER/FERR\" },\r\n    Key: \"RRSP_RRIF\",\r\n    order: 5,\r\n    ID: 4,\r\n    colour: \"#cf7f00\",\r\n  },\r\n  INTEREST_BEARING: {\r\n    value: { en: \"Interest Bearing\", fr: \"Placement à intérêt\" },\r\n    Key: \"INTEREST_BEARING\",\r\n    order: 7,\r\n    ID: 5,\r\n    colour: \"#dfd666\",\r\n  },\r\n  CASH: {\r\n    value: { en: \"Cash\", fr: \"Liquidités\" },\r\n    Key: \"CASH\",\r\n    order: 8,\r\n    ID: 6,\r\n    colour: \"darkred\",\r\n  },\r\n  OTHER_ASSETS: {\r\n    value: { en: \"Other Assets\", fr: \"Autres actifs\" },\r\n    Key: \"OTHER_ASSETS\",\r\n    order: 9,\r\n    ID: 7,\r\n    colour: \"#949a9e\",\r\n  },\r\n  LIFE_INSURANCE: {\r\n    value: { en: \"Life Insurance\", fr: \"Assurance vie\" },\r\n    Key: \"LIFE_INSURANCE\",\r\n    order: 10,\r\n    ID: 8,\r\n    colour: \"872651\",\r\n  },\r\n  CHARITABLE_GIFTS_TAX_CREDIT: {\r\n    value: {\r\n      en: \"Charit. Gifts Tax Credit\",\r\n      fr: \"Crédit d'impôt pour don de bienfaisance\",\r\n    },\r\n    Key: \"CHARITABLE_GIFTS_TAX_CREDIT\",\r\n    order: 0, // no show,\r\n    ID: 9,\r\n    colour: \"872651\",\r\n  },\r\n  TFSA: {\r\n    value: {\r\n      en: \"TFSA\",\r\n      fr: \"CELI\",\r\n    },\r\n    Key: \"TFSA\",\r\n    order: 6,\r\n    ID: 10,\r\n    colour: \"872651\",\r\n  },\r\n};\r\n\r\nexport const OWNERSHIP = {\r\n  CLIENT: {\r\n    value: { en: \"Client\", fr: \"Client\" },\r\n    Key: \"CLIENT\",\r\n    order: 0,\r\n    ID: 0,\r\n  },\r\n  SPOUSE: {\r\n    value: { en: \"Spouse\", fr: \"Conjoint\" },\r\n    Key: \"SPOUSE\",\r\n    order: 3,\r\n    ID: 1,\r\n  },\r\n  JOINT: {\r\n    value: { en: \"Joint\", fr: \"Conjoint\" },\r\n    Key: \"JOINT\",\r\n    order: 4,\r\n    ID: 2,\r\n  },\r\n};\r\n\r\nexport const ASSET_OWNERSHIP_ACTION = {\r\n  CLIENT: {\r\n    value: { en: \"Client\", fr: \"Client\" },\r\n    Key: \"CLIENT\",\r\n    order: 0,\r\n    ID: 0,\r\n  },\r\n  SPOUSE: {\r\n    value: { en: \"Spouse\", fr: \"Conjoint\" },\r\n    Key: \"SPOUSE\",\r\n    order: 3,\r\n    ID: 1,\r\n  },\r\n  JOINT: {\r\n    value: { en: \"Joint\", fr: \"Conjoint\" },\r\n    Key: \"JOINT\",\r\n    order: 4,\r\n    ID: 2,\r\n  },\r\n  CLIENT_LIQUIDATE: {\r\n    value: { en: \"Client: Liquidate\", fr: \"Client : Liquider\" },\r\n    Key: \"CLIENT_LIQUIDATE\",\r\n    order: 1,\r\n    ID: 3,\r\n  },\r\n  CLIENT_ROLLOVER: {\r\n    value: { en: \"Client: Roll-over\", fr: \"Client : Report\" },\r\n    Key: \"CLIENT_ROLLOVER\",\r\n    order: 2,\r\n    ID: 4,\r\n  },\r\n};\r\n\r\nexport const ASSET_TAX = {\r\n  NON_TAXABLE: {\r\n    value: { en: \"Non-taxable\", fr: \"Non imposable\" },\r\n    Key: \"NON_TAXABLE\",\r\n    order: 1,\r\n    ID: 0,\r\n  },\r\n  CAPITAL_GAINS_DEFERRED: {\r\n    value: { en: \"Capital Gains Deferred\", fr: \"Gains en capital différés\" },\r\n    Key: \"CAPITAL_GAINS_DEFERRED\",\r\n    order: 2,\r\n    ID: 1,\r\n  },\r\n  CAPITAL_GAINS_ANNUAL: {\r\n    value: { en: \"Capital Gains Annual\", fr: \"Gains en capital annuels\" },\r\n    Key: \"CAPITAL_GAINS_ANNUAL\",\r\n    order: 3,\r\n    ID: 2,\r\n  },\r\n  REGISTERED: {\r\n    value: { en: \"Registered\", fr: \"Enregistré\" },\r\n    Key: \"REGISTERED\",\r\n    order: 4,\r\n    ID: 3,\r\n  },\r\n  FULLY_TAXABLE: {\r\n    value: { en: \"Fully Taxable\", fr: \"Pleinement imposable\" },\r\n    Key: \"FULLY_TAXABLE\",\r\n    order: 5,\r\n    ID: 4,\r\n  },\r\n  DIVIDEND: {\r\n    value: { en: \"Dividend\", fr: \"Dividende\" },\r\n    Key: \"DIVIDEND\",\r\n    order: 0,\r\n    ID: 5,\r\n  },\r\n  INTEREST: {\r\n    value: { en: \"Interest\", fr: \"Intérêts\" },\r\n    Key: \"INTEREST\",\r\n    order: 6,\r\n    ID: 6,\r\n  },\r\n  QUALIFYING_SMALL_BUSINESS: {\r\n    value: { en: \"Qualif. Small Business\", fr: \"petites entreprises\" },\r\n    Key: \"QUALIFYING_SMALL_BUSINESS\",\r\n    order: 7,\r\n    ID: 7,\r\n  },\r\n};\r\n\r\nexport const INCOMESOURCES = {\r\n  SURVIVORS_INCOME: {\r\n    value: { en: \"Survivor's Income\", fr: \"Revenus du survivant\" },\r\n    Key: \"SURVIVORS_INCOME\",\r\n    order: 1,\r\n    ID: 0,\r\n  },\r\n  GOV_SURVIVORS_PENSION: {\r\n    value: {\r\n      en: \"Gov. Survivor's Pension\",\r\n      fr: \"Pension de survivant du gouv.\",\r\n    },\r\n    Key: \"GOV_SURVIVORS_PENSION\",\r\n    order: 2,\r\n    ID: 1,\r\n  },\r\n  GOV_DEATH_BENEFIT: {\r\n    value: { en: \"Gov. Death Benefit\", fr: \"Prestation de décès du gouv.\" },\r\n    Key: \"GOV_DEATH_BENEFIT\",\r\n    order: 3,\r\n    ID: 2,\r\n  },\r\n  GOV_ORPHANS_BENEFIT: {\r\n    value: {\r\n      en: \"Gov. Orphan's Benefit\",\r\n      fr: \"Prestation d'orphelin du gouv.\",\r\n    },\r\n    Key: \"GOV_ORPHANS_BENEFIT\",\r\n    order: 4,\r\n    ID: 3,\r\n  },\r\n  RENTAL_INCOME: {\r\n    value: { en: \"Rental Income\", fr: \"Revenus locatifs\" },\r\n    Key: \"RENTAL_INCOME\",\r\n    order: 5,\r\n    ID: 4,\r\n  },\r\n  DIVIDEND_INCOME: {\r\n    value: { en: \"Dividend Income\", fr: \"Revenu de dividendes\" },\r\n    Key: \"DIVIDEND_INCOME\",\r\n    order: 6,\r\n    ID: 5,\r\n  },\r\n\r\n  RETIREMENT_INCOME: {\r\n    value: { en: \"Retirement Income\", fr: \"Revenus de retraite\" },\r\n    Key: \"RETIREMENT_INCOME\",\r\n    order: 7,\r\n    ID: 6,\r\n  },\r\n  OTHER: {\r\n    value: { en: \"Other\", fr: \"Autre\" },\r\n    Key: \"OTHER\",\r\n    order: 8,\r\n    ID: 7,\r\n  },\r\n  RRIF: {\r\n    value: { en: \"RRIF\", fr: \"FERR\" },\r\n    Key: \"RRIF\",\r\n    order: 0,\r\n    ID: 8,\r\n  },\r\n};\r\n\r\nexport const INCOMENEEDS = {\r\n  PERCET_OF_INCOME: {\r\n    value: { en: \"% of Total Income\", fr: \"% du revenu total\" },\r\n    Key: \"PERCET_OF_INCOME\",\r\n    order: 1,\r\n    ID: 0,\r\n  },\r\n\r\n  EDUCATION_FUND: {\r\n    value: { en: \"Education Fund\", fr: \"Fonds d'études\" },\r\n    Key: \"EDUCATION_FUND\",\r\n    order: 2,\r\n    ID: 1,\r\n  },\r\n\r\n  TEMPORARY_INCOME: {\r\n    value: { en: \"Temporary Income\", fr: \"Revenus temporaires\" },\r\n    Key: \"TEMPORARY_INCOME\",\r\n    order: 3,\r\n    ID: 2,\r\n  },\r\n\r\n  OTHER: {\r\n    value: { en: \"Other\", fr: \"Autre\" },\r\n    Key: \"OTHER\",\r\n    order: 4,\r\n    ID: 3,\r\n  },\r\n};\r\n\r\nexport const PROVINCE = {\r\n  // \r\n  // {AB, BC, ON, QC, MB, NS, NB, NF, SK, PE, NT, NU,YU,YT}\r\n  AB: {\r\n    value: { en: \"Alberta\", fr: \"Alberta\" },\r\n    Key: \"AB\",\r\n    order: 1,\r\n    ID: 0,\r\n  },\r\n  BC: {\r\n    value: { en: \"British Columbia\", fr: \"Colombie-Britannique\" },\r\n    Key: \"BC\",\r\n    order: 2,\r\n    ID: 1,\r\n  },\r\n  ON: {\r\n    value: { en: \"Ontario\", fr: \"Ontario\" },\r\n    Key: \"ON\",\r\n    order: 8,\r\n    ID: 2,\r\n  },\r\n  QC: {\r\n    value: { en: \"Quebec\", fr: \"Québec\" },\r\n    Key: \"QC\",\r\n    order: 10,\r\n    ID: 3,\r\n  },\r\n  MB: {\r\n    value: { en: \"Manitoba\", fr: \"Manitoba\" },\r\n    Key: \"MB\",\r\n    order: 3,\r\n    ID: 4,\r\n  },\r\n  NS: {\r\n    value: { en: \"Nova Scotia\", fr: \"Nouvelle-Écosse\" },\r\n    Key: \"NS\",\r\n    order: 6,\r\n    ID: 5,\r\n  },\r\n  NB: {\r\n    value: { en: \"New Brunswick\", fr: \"Nouveau-Brunswick\" },\r\n    Key: \"NB\",\r\n    order: 4,\r\n    ID: 6,\r\n  },\r\n  NF: {\r\n    value: { en: \"Newfoundland and Labrador\", fr: \"Terre-Neuve-et-Labrador\" },\r\n    Key: \"NF\",\r\n    order: 3,\r\n    ID: 7,\r\n  },\r\n  SK: {\r\n    value: { en: \"Saskatchewan\", fr: \"Saskatchewan\" },\r\n    Key: \"SK\",\r\n    order: 11,\r\n    ID: 8,\r\n  },\r\n  PE: {\r\n    value: { en: \"Prince Edward Island\", fr: \"Île-du-Prince-Édouard\" },\r\n    Key: \"PE\",\r\n    order: 9,\r\n    ID: 9,\r\n  },\r\n  YU: {\r\n    value: { en: \"Yukon\", fr: \"Yukon\" },\r\n    Key: \"YU\",\r\n    order: 12,\r\n    ID: 12,\r\n  },\r\n  NU: {\r\n    value: { en: \"Nunavut\", fr: \"Nunavut\" },\r\n    Key: \"NU\",\r\n    order: 7,\r\n    ID: 11,\r\n  },\r\n  NT: {\r\n    value: { en: \"Northwest Territories\", fr: \"Territoires du Nord-Ouest\" },\r\n    Key: \"NT\",\r\n    order: 5,\r\n    ID: 10,\r\n  },\r\n};\r\n\r\nexport const MEMBER = {\r\n  CLIENT: {\r\n    value: { en: \"Client\", fr: \"Client\" },\r\n    Key: \"CLIENT\",\r\n    order: 1,\r\n    ID: 0,\r\n  },\r\n  SPOUSE: {\r\n    value: { en: \"Spouse\", fr: \"Conjoint\" },\r\n    Key: \"SPOUSE\",\r\n    order: 2,\r\n    ID: 1,\r\n  },\r\n  CHILD: {\r\n    value: { en: \"Child\", fr: \"Enfant\" },\r\n    Key: \"CHILD\",\r\n    order: 3,\r\n    ID: 2,\r\n  },\r\n  DEPENDENT_ADULT: {\r\n    value: { en: \"Dependent Adult\", fr: \"Adulte à charge\" },\r\n    Key: \"DEPENDENT_ADULT\",\r\n    order: 4,\r\n    ID: 3,\r\n  },\r\n};\r\n\r\nexport const SEX = {\r\n  MALE: {\r\n    value: { en: \"Male\", fr: \"Homme\" },\r\n    Key: \"MALE\",\r\n    order: 1,\r\n    ID: 0,\r\n  },\r\n  FEMALE: {\r\n    value: { en: \"Female\", fr: \"Femme\" },\r\n    Key: \"FEMALE\",\r\n    order: 2,\r\n    ID: 1,\r\n  },\r\n};\r\n\r\nexport const GROWTHDIR = {\r\n  GROWS: {\r\n    value: { en: \"Grows\", fr: \"Augmente\" },\r\n    Key: \"GROWS\",\r\n    order: 1,\r\n    ID: 0,\r\n  },\r\n  REDUCES: {\r\n    value: { en: \"Reduces\", fr: \"Diminue\" },\r\n    Key: \"REDUCES\",\r\n    order: 2,\r\n    ID: 1,\r\n  },\r\n  /* en: {\r\n    Values: [\"Grows\", \"Reduces\"],\r\n  },\r\n  fr: {\r\n    Values: [\"Augmente\", \"Diminue\"],\r\n  }, */\r\n};\r\n\r\nexport const SMOKING = {\r\n  NON_SMOKER: {\r\n    value: { en: \"Non-Smoker\", fr: \"Non-fumeur\" },\r\n    Key: \"NON_SMOKER\",\r\n    order: 1,\r\n    ID: 0,\r\n  },\r\n  SMOKER: {\r\n    value: { en: \"Smoker\", fr: \"Fumeur\" },\r\n    Key: \"SMOKER\",\r\n    order: 2,\r\n    ID: 1,\r\n  },\r\n};\r\n\r\nexport const MONTHS = {\r\n  en: [\r\n    \"January\",\r\n    \"February\",\r\n    \"March\",\r\n    \"April\",\r\n    \"May\",\r\n    \"June\",\r\n    \"July\",\r\n    \"August\",\r\n    \"September\",\r\n    \"October\",\r\n    \"November\",\r\n    \"December\",\r\n  ],\r\n  fr: [\r\n    \"janvier\",\r\n    \"février\",\r\n    \"mars\",\r\n    \"avril\",\r\n    \"mai\",\r\n    \"juin\",\r\n    \"juillet\",\r\n    \"août\",\r\n    \"septembre\",\r\n    \"octobre\",\r\n    \"novembre\",\r\n    \"décembre\",\r\n  ],\r\n};\r\n","export const OUTPUTTEXT = {\r\n  en: {\r\n    insNeeds100: \"Insurance Needs to age 100\",\r\n    insNeedsRet: \"Insurance Needs to retirement (age \",\r\n    insNeedsRetLE: \"Insurance Needs to life expectancy (age \",\r\n    insNeedsSingleFamily: \"Insurance Needs for a Single Parent with Protection Period of \",\r\n    years: \" years\",\r\n    addSurvivor: \"Survivors need to be added under Family Profile\",\r\n    pg1T: \"Insurance Needs Analysis - Estate\",\r\n    pg1P1: \"Designed for: \",\r\n    pg1P2: \"Designed by: \",\r\n    pg1P3: \"Date: \",\r\n    pg1P4: \"Province: \",\r\n    pg2TabT1: \"Family Profile\",\r\n    pg2TabT2: \"Age\",\r\n    pg2TabT3: \"Annual Income\",\r\n    pg2TabT4: \"Retirement Age\",\r\n    pg2TabT4Alt: \"Protection Period\",\r\n    pg2TabT5: \"Avg. Tax Rate\",\r\n    pg2TabT6: \"Marginal Tax Rate\",\r\n    pg2T2: \"Assumptions\",\r\n    /* pg3T: \"Family Cash Needs at Death\", */\r\n    pg2Tab2: \"Needs Analysis is always done for the family member 'Client'\",\r\n    pg2Tab3: \"Using these factors the total capital required to generate an inflation indexed income thus depleting all capital at the end of the desired insurance time period is calculated. This amount is based on the present value of shortfalls, discounted at the after tax investment rate. It is adjusted, if necessary to make sure early shortfalls are provided for\",\r\n    pg2T3: \"Financial Summary\",\r\n    pg2P5:\"Total Assets (excluding insurance)\",\r\n    pg2P6: \"Total Liabilities (excluding death related)\",//OUTPUTTEXT[lang].pg7TabRow4,\r\n    pg2P7: \"Net Worth\",//OUTPUTTEXT[lang].pg7TabRow4,\r\n    pg2P8: \"Total insurance available at death\",//OUTPUTTEXT[lang].pg7TabRow4, //  + output.govDB already part of totalassets\r\n    pg2P9: \"Total death related liabilities\",\r\n    pg2P10: \"Additional Life Insurance for Client\",\r\n    pg2P12: \"This is a good opportunity to consider life insurance for Spouse as well (survivor now changes)\",\r\n    pg2P11: \"Life Insurance for Spouse NAME in addition to:\",\r\n    \r\n    pg3T: \"Family Cash and Income Needs\",\r\n    pg3P1:\r\n      /* \"When you die, your family will face two important money needs, a need for Cash and a need for Income. While some cash needs are temporary, others are required at all stages of life, so are identified as 'Permanent Cash Needs'.\", */\r\n      \"When you die, your family will face two important money needs, a need for Cash and a need for Income. While some cash needs are temporary, others are required at all stages of life.\",\r\n    pg3TabT: \"Cash Needs\",\r\n    pg3TabRTot: \"Total\",\r\n    /* pg4T: \"Family Income Needs\", */\r\n    pg4T: \"\",\r\n    /* pg4P1: \"When you die, your family will face two important money needs, a need for Cash and a need for Income.\", */\r\n    pg4P1: \"Continued ...\",\r\n    pg4TabT: \"Income Needs\",\r\n    pg4TabRow1: \"Current Total Annual Family Income\",\r\n    pg4TabRow2:\r\n      \"Percentage of this income you want your family to have to maintain your present standard of living for these time periods is:\",\r\n    //pg4TabRow3: \"While more income is required\",\r\n    //pg4TabRow4: \"For survivor thereafter\",\r\n    pg4TabRow5: \"Therefore your desired after-tax income is:\",\r\n    pgTabRowMoreIncome: \"While more income is required\",\r\n    pgTabRowThereAfter: \"For the survivor thereafter\",\r\n    //pgTabRowThereAfter: \"For the survivor thereafter\",\r\n    pg5T: \"Family Cash Sources\",// at Death\",\r\n    pg5TabT: \"Cash Sources\",\r\n    pg5TabT2: \"All\", \r\n    pg5TabT3: \"At Death\",\r\n    pg5TabRow1: \"CPP/QPP Lump Sum Death Benefit\",\r\n    pg5TabRow3: \"Total Cash Available\",\r\n    pg5TabRow4: \"Less Family Cash needs at Death\",\r\n    pg5TabRow5:\r\n      \"Surplus Cash available to produce income for surviving members of the family\",\r\n    pg6T: \"Family Income Sources\",// at Death\",\r\n    pg6TabT: \"Income Sources\",\r\n    pg6TabRow1:\r\n      \"Therefore the total annual income available for this time period is:\",\r\n    //pg6TabRow2: \"While more income is required\",\r\n    //pg6TabRow3: \"For survivor thereafter\",\r\n    pg5TabRow7:\r\n    \"For surviving members of the family\",\r\n    pg6TabRow4:\r\n      \"The additional after tax income required (desired income less income available) for this time period is:\",\r\n    //pg6TabRow5: \"While more income is required\",\r\n    //pg6TabRow6: \"For survivor thereafter\",\r\n    pg6Net: \"net \",\r\n    pg7T: \"Life Insurance Analysis\",\r\n    pg7TabT: \"Your Family Income Position at Death\",\r\n    pg7TabRow1:\r\n      \"The additional  after tax income required (desired income less income available) for this time period is:\",\r\n    //pg7TabRow2: \"While more income is required\",\r\n    //pg7TabRow3: \"For survivor thereafter\",\r\n    pg7TabRow4: \"Rate of inflation you think will continue\",\r\n    pg7TabRow5:\r\n      \"Rate of interest the survivor could earn on investments in future years\",\r\n    pg7TabRow6:\r\n      \"Using these factors the total capital required to generate an inflation indexed income thus depleting all capital at the end of this time period is:\",\r\n    pg7TabRow7: \"A. For survivor's normal life expectancy (age \",\r\n    pg7TabRow8: \"B. Until survivor retirement\",\r\n    pg7TabRow9: \"C. Until youngest child is age 25\",\r\n    pg7TabRow10: \"D. Until youngest child is age 18\",\r\n    pg8T: \"Life Insurance Analysis\",\r\n    pg8TabT: \"Your Family Financial Position at Death\",\r\n    pg8TabRow1:\r\n      \"Present surplus capital available for investment after covering cash needs is:\",\r\n    pg8TabRow2:\r\n      \"Therefore the additional  income-producing capital (i.e. Life Insurance) needed to solve the income requirement for these time periods is:\",\r\n    pg8TabRow3: \"A. For survivor's normal life expectancy (age \",\r\n    pg8TabRow4: \"B. Until survivor retirement\",\r\n    pg8TabRow5: \"C. Until youngest child is age 25\",\r\n    pg8TabRow6: \"D. Until youngest child is age 18\",\r\n    pg8TabRow4Alt: \"A. Until end of Protection Period\",\r\n    pg9T: \"Some Important Notes\",\r\n    pg9P1:\r\n      \"This presentation is for general information purposes. The information contained in this presentation must not be taken or relied upon by the reader as legal, accounting, taxation or actuarial advice. For these matters readers should seek independent professional advice. Please refer to insurance company illustrations, policy contracts and information folders regarding any insurance matters referred to in this presentation, as those documents will govern in all cases.\",\r\n    //pgFooter: \"See Some Important Notes at the end of this presentation.\",\r\n    pgFooter: \"See Some Important Notes at the end of this presentation.\",\r\n    pg10T: \"Acknowledgments\",\r\n    pg10P1:\r\n      \"I, ____________________________ acknowledge receipt of this Presentation and any quotes related to the information therein, and confirm my understanding of it as a summary and general overview of the illustrated benefits and values. I understand that the aforementioned illustrated benefits and values are neither estimates nor guarantees of future performance; and that actual results may vary based on timing, market performance, health and insurability. These values are subject to change and may differ from those illustrated.\",\r\n    pg10TabRow1: \"Signature of Client(s): ____________________\",\r\n    pg10TabRow11: \"Date: ___________\",\r\n    pg10TabRow2: \"Signature of Client(s): ____________________\",\r\n    pg10TabRow3: \"Signature of Advisor: ____________________\",\r\n    pgAppendix: \"Appendix\",\r\n    pgAppendixT:\r\n      \"INA Graphs and Spreadsheet\",\r\n      pgAppendixP1: \"Incoming cash flows (+) vs outgoing income needs (-)\",\r\n      pgAppendixP2: \"Shortfall (-) is incoming - outgoing cash flows and is funded by insurance\",\r\n      pgAppendixP3 : \"Current financial situation\"\r\n  },\r\n  fr: {\r\n    insNeeds100: \"Besoins en assurance jusqu'à l'âge de 100 ans\",\r\n    insNeedsRet: \"Besoins en assurance jusqu'à la retraite(âge \",\r\n    insNeedsRetLE: \"Besoins en assurance jusqu'à l'espérance de vie (âge \",\r\n    insNeedsSingleFamily: \"L'analyse des besoins est toujours faite pour le membre de la famille \",\r\n    years: \" années\",\r\n    addSurvivor: \"Les survivants doivent être ajoutés dans le profil familial\",\r\n    pg1T: \"Analyse des besoins en matière d'assurance - successorale\",\r\n    pg1P1: \"Conçu pour : \",\r\n    pg1P2: \"Par: \",\r\n    pg1P3: \"Date: \",\r\n    pg1P4: \"Province: \",\r\n    pg2TabT1: \"Profil familial\",\r\n    pg2TabT2: \"Àge\",\r\n    pg2TabT3: \"Revenu annuel\",\r\n    pg2TabT4: \"Àge de la retraite\",\r\n    pg2TabT4Alt: \"Période de protection\",\r\n    pg2T2: \"Hypothèses\",\r\n    pg2Tab2: \"L'analyse des besoins est toujours faite pour le membre de la famille 'Client'\",\r\n    pg2Tab3: \"Ces facteurs permettent de calculer le capital total nécessaire pour générer un revenu indexé à l'inflation, le capital étant donc complètement épuisé à la fin de la période d'assurance souhaitée. Ce montant est basé sur la valeur actuelle des manques à gagner, actualisée au taux de rendement après impôt. Il est rajusté au besoin, afin que l'on puisse s'assurer que les manques à gagner initiaux sont prévus pour.\",\r\n    \r\n    pg2TabT5: \"Taux d'imposition moyen\",\r\n    pg2TabT6: \"Taux marginal d'imposition\",\r\n   /*  pg3T: \"Besoin de liquidités pour la famille au décès\", */\r\n    pg2T3: \"Résumé financier \",\r\n    pg2P5:\"Total des actifs (hors assurance)\",\r\n    pg2P6: \"Total des passifs (non liés au décès)\",//OUTPUTTEXT[lang].pg7TabRow4,\r\n    pg2P7: \"Valeur nette\",//OUTPUTTEXT[lang].pg7TabRow4,\r\n    pg2P8: \"Assurance totale disponible au décès\",//OUTPUTTEXT[lang].pg7TabRow4, //  + output.govDB already part of totalassets\r\n    pg2P9: \"Total des passifs liés au décès\",\r\n    pg2P10: \"Client d'assurance vie supplémentaire\",\r\n    pg2P12: \"C'est aussi une bonne occasion d'envisager une assurance-vie pour le conjoint également (le survivant change maintenant)\",\r\n    pg2P11: \"Assurance vie pour NOM du conjoint en plus de : \",\r\n    \r\n    pg3T: \"Besoins familiaux en matière de liquidités et de revenus\",\r\n   \r\n    pg3P1:\r\n      /* \"À votre décès, votre famille fera face à deux importants besoins financiers, soient d'obtenir des liquidités ainsi que des revenus. Bien que certains besoins de liquidités soient temporaires, d'autres sont nécessaires lors de toutes les étapes de la vie, ils sont donc identifiés comme 'Besoins de liquidités permanents'..\", */\r\n      \"À votre décès, votre famille fera face à deux importants besoins financiers, soient d'obtenir des liquidités ainsi que des revenus. Bien que certains besoins de liquidités soient temporaires, d'autres sont nécessaires lors de toutes les étapes de la vie.\",\r\n    pg3TabT: \"Besoins de liquidités\",\r\n    pg3TabRTot: \"Total\",\r\n    /* pg4T: \"Besoin de revenus pour la famille au décès\", */\r\n    pg4T: \"\",\r\n    /* pg4P1:\r\n      \"À votre décès, votre famille fera face à deux importants besoins financiers, soient d'obtenir des liquidités ainsi que des revenus.\",\r\n    */\r\n   pg4P1: \"Suite ... \", \r\n    pg4TabT: \"Besoins de revenus\",\r\n    pg4TabRow1: \"Montant actuel du revenu familial annuel\",\r\n    pg4TabRow2:\r\n      \"Pourcentage du revenu souhaité pour maintenir le niveau de vie actuel de votre famille pendant la période :\",\r\n    //pg4TabRow3: \"While more income is required\",\r\n    //pg4TabRow3: \"Un revenu plus élevé est requis\",\r\n   \r\n    //pg4TabRow4: \"Pour le survivant par la suite\",\r\n    pg4TabRow5: \"Le revenu souhaité s'élève donc à :\",\r\n    pgTabRowMoreIncome: \"Un revenu plus élevé est requis\",\r\n    pgTabRowThereAfter: \"Pour le survivant par la suite\",\r\n    pg5T: \"Sources de liquidité pour la famille\",// au décès\",\r\n    pg5TabT: \"Sources de liquidité\",\r\n    pg5TabT2: \"Tous\",\r\n    pg5TabT3: \"Au décès\",\r\n  \r\n    pg5TabRow1:\r\n      \"Prestation de décès forfaitaire du RPC/RRQ\",\r\n    pg5TabRow3: \"Total des liquidités disponibles\",\r\n    pg5TabRow4: \"Moins les liquidités nécessaires au décès de l'assuré\",\r\n    pg5TabRow5:\r\n      \"Excédent sur les liquidités disponibles pouvant assurer un revenu à la famille\",\r\n    pg6T: \"Sources de revenu pour la famille\",// au décès\",\r\n    pg6TabT: \"Revenus du survivant\",\r\n    pg6TabRow1:\r\n      \"Le revenu annuel total disponible pour cette période s'élève donc à :\",\r\n    //pg6TabRow2: \"Un revenu plus élevé est requis\",\r\n    //pg6TabRow3: \"Pour le survivant par la suite\",\r\n    pg5TabRow7:\r\n    \"Pour les membres survivants de la famille\",\r\n    pg6TabRow4:\r\n    \"Le revenu supplémentaire après impôt requis (revenu souhaité moins revenu disponible) pour cette période est :\",      \r\n    //pg6TabRow5: \"Un revenu plus élevé est requis\",\r\n    //pg6TabRow6: \"Pour le survivant par la suite\",\r\n    pg6Net: \"net\",\r\n    \r\n    pg7T: \"Besoins d'assurance\",\r\n    pg7TabT: \"État des revenus de la famille au décès\",\r\n    pg7TabRow1:\r\n    \"Le revenu supplémentaire après impôt requis (revenu souhaité moins revenu disponible) pour cette période est :\",\r\n    //pg7TabRow2: \"Un revenu plus élevé est requis\",\r\n    //pg7TabRow3: \"Pour le survivant par la suite\",\r\n    pg7TabRow4: \"Taux d'inflation prévu\",\r\n    pg7TabRow5: \"Taux d'intérêt potentiel des placements futurs du survivant\",\r\n    pg7TabRow6:\r\n      \"Basé sur ces facteurs financiers, le capital total requis pour générer des revenus indexés à l'inflation et qui sera épuisé à la fin de la période est :\",\r\n    pg7TabRow7: \"A. Pour la durée de vie présumée du survivant (âge \",\r\n    pg7TabRow8: \"B. Jusqu'à la retraite du survivant\",\r\n    pg7TabRow9: \"C. Jusqu'au 25e anniv. du benjamin\",\r\n    pg7TabRow10: \"D. Jusqu'au 18e anniv. du benjamin\",\r\n    pg8T: \"Besoins d'assurance\",\r\n    pg8TabT: \"État des revenus de la famille au décès\",\r\n    pg8TabRow1:\r\n      \"Capitaux excédentaires actuellement disponibles pour investissement après couverture des besoins financiers :\",\r\n    pg8TabRow2:\r\n      \"Manque à gagner en capitaux productifs de revenu(ex. assurance) pour les périodes ci-dessous :\",\r\n    pg8TabRow3: \"A. Pour la durée de vie présumée du survivant (âge \",\r\n    pg8TabRow4: \"B. Jusqu'à la retraite du survivant\",\r\n    pg8TabRow5: \"C. Jusqu'au 25e anniv. du benjamin\",\r\n    pg8TabRow6: \"D. Jusqu'au 18e anniv. du benjamin\",\r\n    pg8TabRow4Alt: \"A. Jusqu'à la fin de la période de protection\",\r\n    pg9T: \"Notes importantes\",\r\n    pg9P1:\r\n      \"Le présent exposé ne comporte que des renseignements généraux. L'information qui s'y trouve ne doit pas être considérée par le lecteur comme des conseils juridiques, comptables, fiscaux ou actuariels. Pour ces questions, le lecteur devrait consulter un professionnel indépendant. Veuillez-vous reporter aux illustrations d'assurance, aux libellés des contrats et aux documents d'information des sociétés d'assurance pour obtenir des précisions sur les questions d'assurance mentionnées dans le présent exposé, puisque dans tous les cas, ce sont ces documents qui prévalent.\",\r\n    pgFooter: \"Voir les Notes importantes à la fin du présent exposé.\",\r\n      pg10T: \"Accusé de réception\",\r\n    pg10P1:\r\n      \"Je soussigné, _______________________ accuse réception du présent document et des soumissions connexes, et considère toute l'information sur les prestations et les valeurs comme un résumé seulement. Je comprends que les prestations et les valeurs susmentionnées ne sont ni estimatives ni garantes du rendement futur. Je comprends aussi que les résultats réels peuvent fluctuer en fonction du temps et du rendement du marché, ainsi que de l'état de santé et de l'assurabilité de la personne. Ces résultats peuvent faire l'objet de modifications et différer des valeurs présentées dans l'exposé.\",\r\n    pg10TabRow1: \"Signature du client: ____________________\",\r\n    pg10TabRow11: \"jour, mois, année: ___________\",\r\n    pg10TabRow2: \"Signature du client: ____________________\",\r\n    pg10TabRow3: \"Signature du conseiller en assurance: ____________________\",\r\n    pgAppendix:  \"Annexe\",\r\n    pgAppendixT:\r\n      \"Graphiques et feuilles de calcul de l'analyse des besoins en matière d'assurance\",\r\n      pgAppendixP1: \"Flux de trésorerie entrants (+) et sortants (-)\",\r\n      pgAppendixP2: \"Le manque à gagner (-) correspond aux flux de trésorerie entrants - sortants et est financé par l'assurance\",\r\n      pgAppendixP3 : \"Situation financière actuelle\"\r\n\r\n  }\r\n};\r\n\r\nexport const GRAPHS_LABLES = {\r\n  en: {\r\n    insNeed: \"Insurance Needs\",\r\n    graphMsg: \"To provide for the income shortfall until retirement\",\r\n    persCF: \"Personal cash Flow\",\r\n    govCF: \"Government cash Flow\",\r\n    incomeNeeds: \"Income Needs\",\r\n    shortfall: \"Shortfall\",\r\n    assetsBrk: \"Assets Breakdown Today\",\r\n    liabsBrk: \"Liabilities Breakdown\" ,\r\n    cashLike:        \"Cash/TFSA/Insurance\", \r\n    RRSP: \"RRSP/RRIF\", \r\n    shares: \"Public/Private shares\", \r\n    realEstate: \"Real Estate\", \r\n    otherAssets:\"Other\",\r\n    loans: \"Loans\", \r\n    taxes:\"Taxes\", \r\n    emergency:\"Emergency Fund\", \r\n    otherLiabs:\"Other\",\r\n    atDeath: \"At Death and Future Amts.\",\r\n    insNeeds100: \"Insurance Needs to age 100\",\r\n    insNeedsRet: \"Insurance Needs to retirement (age \",\r\n    insNeedsRetLE: \"Insurance Needs to life expectancy (age \",\r\n    \r\n    currFins: \"Your current financial situation is summarized below: \"\r\n  },\r\n  fr: {\r\n    insNeed: \"Besoins d'assurance\",\r\n    graphMsg:\r\n      \"Pour couvrir le manque à gagner en matière de revenus jusqu'à la retraite\",\r\n      persCF: \"Liquidités personnelles\",\r\n      govCF: \"Liquidités versées par l'état\",\r\n      incomeNeeds: \"Revenus requis\",\r\n      shortfall: \"Manque à gagner\",\r\n      \r\n    assetsBrk: \"Ventilation des actifs (aujourd'hui)\",\r\n    liabsBrk: \"Ventilation des passifs\",\r\n    cashLike:        \"Liquidités/CELI/Assurance\",\r\n    RRSP: \"REER/FERR\",\r\n    shares: \"Titres publics/privés\",\r\n    realEstate: \"Immobilier\",\r\n    otherAssets:\"Autre\",\r\n    loans: \"Prêts\",\r\n    taxes:\"Charges fiscales\",\r\n    emergency:\"Fonds d'urgence\",\r\n    otherLiabs:\"Autre\",\r\n    atDeath: \"Au décès et engagements futurs\",\r\n    insNeeds100: \"Besoins en assurance jusqu'à l'âge de 100 ans\",\r\n    insNeedsRet: \"Besoins en assurance jusqu'à la retraite(âge \",\r\n    insNeedsRetLE: \"Besoins en assurance jusqu'à l'espérance de vie (âge \",\r\n    \r\n    currFins: \"YLe sommaire de votre situation financière actuelle se trouve ci-dessous: \"\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport { MultiButtons } from \"./MultiButtons\";\r\n\r\nimport { OUTPUT_WIDTH_PCT } from \"../definitions/generalDefinitions\";\r\n\r\nexport class AdjustibleImage extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      imageSize: this.props.size,\r\n      imageLeft: this.props.imageLeft,\r\n      allPages: this.props.allPages,\r\n      imageTop: this.props.top,\r\n      showDetails: false,\r\n      image: this.props.image,\r\n      undo: false,\r\n    };\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    this.setState({ showDetails: false });\r\n  };\r\n\r\n  updateImage = () => {\r\n    const image = {\r\n      image: this.state.image,\r\n      left: this.state.imageLeft,\r\n      size: this.state.imageSize,\r\n      allPages: this.state.allPages,\r\n      top: this.state.imageTop,\r\n      showDetails: this.state.showDetails,\r\n    };\r\n    this.props.imageAdjust(image, this.props.ID);\r\n  };\r\n\r\n  imageBigger = () => {\r\n    this.setState(\r\n      (prevState) => ({\r\n        imageSize: parseFloat(prevState.imageSize * 1.1),\r\n      }),\r\n      this.updateImage\r\n    );\r\n  };\r\n\r\n  imageSmaller = () => {\r\n    this.setState(\r\n      (prevState) => ({\r\n        imageSize: parseFloat(prevState.imageSize * 0.9),\r\n      }),\r\n      this.updateImage\r\n    );\r\n  };\r\n\r\n  imageLeft = () => {\r\n    this.setState(\r\n      (prevState) => ({\r\n        imageLeft: parseFloat(prevState.imageLeft - 2),\r\n      }),\r\n      this.updateImage\r\n    );\r\n  };\r\n\r\n  imageRight = () => {\r\n    this.setState(\r\n      (prevState) => ({\r\n        imageLeft: parseFloat(prevState.imageLeft + 2),\r\n      }),\r\n      this.updateImage\r\n    );\r\n  };\r\n\r\n  imagePosition = (e) => {\r\n    let top = e === 1 ? true : false;\r\n    this.setState(\r\n      { imageTop: top },\r\n\r\n      this.updateImage\r\n    );\r\n  };\r\n\r\n  imagePages = (e) => {\r\n    let allPages = e === 1 ? false : true;\r\n    this.setState(\r\n      { allPages: allPages },\r\n\r\n      this.updateImage\r\n    );\r\n  };\r\n\r\n  imageRemove = () => {\r\n    this.setState(\r\n      {\r\n        image: null,\r\n        showDetails: false,\r\n      },\r\n      this.updateImage\r\n    );\r\n  };\r\n\r\n  showDetails = () => {\r\n    const image = {\r\n      image: this.state.image,\r\n      left: this.state.imageLeft,\r\n      size: this.state.imageSize,\r\n      allPages: this.state.allPages,\r\n      imageTop: this.state.imageTop,\r\n      showDetails: !this.state.showDetails,\r\n    };\r\n    this.props.imageAdjust(image, this.props.ID);\r\n  };\r\n\r\n  undoImage = () => {\r\n    const image = {\r\n      image: this.state.image,\r\n      left: this.state.imageLeft,\r\n      size: this.state.imageSize,\r\n      allPages: this.state.allPages,\r\n      imageTop: this.state.imageTop,\r\n      showDetails: false,\r\n    };\r\n    \r\n    if(this.props.undoImage!==undefined)\r\n      image.image=this.props.undoImage\r\n      this.setState(\r\n      {\r\n        image: image,\r\n        undo: true\r\n      },\r\n    );\r\n\r\n  };\r\n\r\n  imageDone = () => {\r\n    this.setState({\r\n      showDetails: false,\r\n    });\r\n  };\r\n\r\n  loadImage = (e) => {\r\n    let file = e.target.files[0];\r\n\r\n    let reader = new FileReader();\r\n    reader.readAsDataURL(file);\r\n\r\n    let image;\r\n    reader.onload = () => {\r\n      image = reader.result;\r\n\r\n      const imageObj = {\r\n        image: image,\r\n        left: this.state.imageLeft,\r\n        size: this.state.imageSize,\r\n        allPages: false,\r\n        imageTop: this.state.imageTop,\r\n        showDetails: this.props.showDetails,\r\n      };\r\n      this.setState(\r\n        () => ({\r\n          image: image,\r\n          showDetails: this.props.showDetails,\r\n          allPages: this.props.allPages,\r\n          undo: false\r\n        }),\r\n        this.props.imageAdjust(imageObj, this.props.ID)\r\n      );\r\n    };\r\n  };\r\n\r\n  render() {\r\n    const styleImage = {\r\n      float: \"left\",\r\n      width: OUTPUT_WIDTH_PCT + \"%\",\r\n      display: \"table-cell\",\r\n      marginTop: \"-3px\",\r\n      marginBottom: \"15px\",\r\n      marginLeft: this.state.imageLeft + \"%\",\r\n    };\r\n    //console.log(this.state.image)\r\n    const lang = this.props.language !== undefined ? this.props.language : \"en\";\r\n    const cmdWidth =\r\n      this.props.buttonText !== undefined\r\n        ? this.props.buttonText.length * (lang === \"en\" ? 10 : 14)\r\n        : 0;\r\n\r\n    return (\r\n      <div\r\n        id=\"image\"\r\n        style={{\r\n          float: \"left\",\r\n          marginTop: \"12px\",\r\n          marginBottom: \"12px\",\r\n          width: OUTPUT_WIDTH_PCT + \"%\",\r\n        }}\r\n      >\r\n        <div style={{ paddingLeft: \"2.5%\" }}>\r\n          {this.state.showDetails === false && cmdWidth > 0 && (\r\n            <label className=\"roundedCornerCmd\">\r\n              <input\r\n                type=\"file\"\r\n                required\r\n                style={{ display: \"none\" }}\r\n                accept=\".jpg, .png, .jpeg, .gif, .bmp, .tif, .ico, .tiff, .svg,|image/*\"\r\n                onChange={this.loadImage}\r\n                onClick={(event) => {\r\n                  event.target.value = null;\r\n                }}\r\n              />\r\n              <span style={{ marginTop: \"10px\", width: \"40px\" }}>\r\n                {this.props.buttonText}\r\n              </span>\r\n              \r\n            </label>\r\n          )}\r\n          {this.props.undoImage!==undefined && <input\r\n             className=\"roundedCornerCmd\"\r\n              style={{marginLeft:\"10px\"}}\r\n              onClick={this.undoImage}\r\n              type=\"button\"\r\n              value={lang === \"en\" ? \"Undo\":\"Annuler\"}\r\n            />}\r\n        </div>\r\n        <br /> <br />\r\n        <hr className=\"ppi1\" />\r\n        {this.state.showDetails && (\r\n          <>\r\n            <div style={{ marginLeft: \"20px\" }}>\r\n              <MultiButtons\r\n                width={\"80px\"}\r\n                noButtons={2}\r\n                buttonCaption={[\r\n                  lang === \"en\" ? \"Top\" : \"Haut\",\r\n                  lang === \"en\" ? \"Bottom\" : \"Bas\",\r\n                ]}\r\n                selected={this.state.imageTop ? 1 : 2}\r\n                selectMultiButton={this.imagePosition}\r\n              />\r\n\r\n              <MultiButtons\r\n                width={\"40px\"}\r\n                noButtons={1}\r\n                buttonCaption={[\"+\"]}\r\n                selected={1}\r\n                selectMultiButton={this.imageBigger}\r\n              />\r\n              <MultiButtons\r\n                width={\"40px\"}\r\n                noButtons={1}\r\n                buttonCaption={[\"-\"]}\r\n                selected={1}\r\n                selectMultiButton={this.imageSmaller}\r\n              />\r\n\r\n              <MultiButtons\r\n                width={\"50px\"}\r\n                noButtons={1}\r\n                buttonCaption={[<text>&#8592;</text>]}\r\n                selected={1}\r\n                selectMultiButton={this.imageLeft}\r\n              />\r\n              <MultiButtons\r\n                width={\"50px\"}\r\n                noButtons={1}\r\n                buttonCaption={[<text>&#8594;</text>]}\r\n                selected={1}\r\n                selectMultiButton={this.imageRight}\r\n              />\r\n\r\n              <MultiButtons\r\n                width={lang === \"en\" ?\"80px\":\"120px\"}\r\n                noButtons={2}\r\n                buttonCaption={[\r\n                  lang === \"en\" ? \"1st page\" : \"1re page\",\r\n                  lang === \"en\" ? \"All pages\" : \"toutes les pages\",\r\n                ]}\r\n                selected={this.state.allPages ? 2 : 1}\r\n                selectMultiButton={this.imagePages}\r\n              />\r\n              <MultiButtons\r\n                width={\"40px\"}\r\n                noButtons={1}\r\n                buttonCaption={[\"x\"]}\r\n                selected={1}\r\n                selectMultiButton={this.imageRemove}\r\n              />\r\n              <MultiButtons\r\n                style={{ marginLeft: \"20px\" }}\r\n                width={\"80px\"}\r\n                noButtons={1}\r\n                buttonCaption={[lang === \"en\" ? \"done\" : \"terminé\"]}\r\n                selected={1}\r\n                selectMultiButton={this.imageDone}\r\n              />\r\n            </div>\r\n          </>\r\n        )}\r\n        <p />\r\n        <div style={styleImage}>\r\n          {this.state.image === null ? (\r\n            \"\"\r\n          ) : (\r\n            <img\r\n              className=\"ppi1\"\r\n              id={this.props.ID}\r\n              src={this.state.undo?this.state.image.image: this.state.image}\r\n              width={this.state.imageSize + \"%\"}\r\n            />\r\n          )}\r\n        </div>\r\n        <br />\r\n        <br />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","module.exports = __webpack_public_path__ + \"static/media/INA.07a8e16f.png\";","module.exports = __webpack_public_path__ + \"static/media/estate.protection.applet.cover.graphic.d3f3dbc3.png\";","import { version } from \"../../package.json\";\r\nimport {\r\n  GROWTHDIR,\r\n  MEMBER,\r\n  LIABILITIES,\r\n  APPLET_EP,\r\n  APPLET_INA,\r\n} from \"../definitions/generalDefinitions\";\r\nimport XLSX from \"xlsx\";\r\nimport React from \"react\";\r\nimport { fetchMCCData, fetchAssetProjection2 } from \"../utils/FetchAPIs\";\r\nimport { readMCCData } from \"../data/dataExchangeMCC\";\r\nimport {\r\n  ASSET_API_OUTPUT_TaxPayable,\r\n  QUOTE_CLIENT,QUOTE_SPOUSE\r\n} from \"../definitions/generalDefinitions\";\r\nimport { OUTPUTTEXT } from \"../definitions/outputDefinitions\";\r\nimport { OUTPUTTEXTEP } from \"../definitions/outputDefinitionsEP\";\r\nimport {\r\n  DISPLAY_RETIREMENT,\r\n  DISPLAY_LIFEEXP,\r\n  DISPLAY_ENDAGE,\r\n  DISPLAY_LIFEEXP_PLUS_3,\r\n  DISPLAY_ANALYSIS,\r\n  OUTPUT_WIDTH_PCT,\r\n  IMAGE_LOGO_OTHERPAGES,\r\n  IMAGE_LOGO,\r\n  IMAGE_APPLET_INA,\r\n  IMAGE_APPLET_EP,\r\n  TITLES\r\n} from \"../definitions/generalDefinitions\";\r\nimport { AdjustibleImage } from \"../components/AdjustibleImage\";\r\nimport { MAX_LOGO_HEIGHT, PAGE_HEIGHT } from \"../components/PDF\";\r\nimport { getMessages } from \"validatorjs\";\r\n\r\nglobal.langFr =\r\n  (\r\n    (navigator.languages && navigator.languages[0]) ||\r\n    navigator.language ||\r\n    navigator.userLanguage\r\n  )\r\n    .toString()\r\n    .indexOf(\"fr\") >= 0;\r\n\r\nexport function cleanFormat(value, lang) {\r\n  if (value !== null) {\r\n    if (value !== undefined) {\r\n      if(lang===undefined) lang=\"en\"\r\n      if (!EngToFrConversion(value) && lang===\"fr\")\r\n        return value\r\n          .toString()\r\n          .replace(\",\", \".\")\r\n          .replace(\"$\", \"\")\r\n          .replace(\"%\", \"\")\r\n          .replace(/ /g, \"\")\r\n          .replace(\" \", \"\")\r\n          .replace(\r\n            /[\\u00A0\\u1680​\\u180e\\u2000-\\u2009\\u200a​\\u200b​\\u202f\\u205f​\\u3000]/g,\r\n            \"\"\r\n          );\r\n      else\r\n        return value\r\n          .toString()\r\n          .replace(/,/g, \"\")\r\n          .replace(\"$\", \"\")\r\n          .replace(\"%\", \"\")\r\n          .replace(/ /g, \"\")\r\n          .replace(\" \", \"\")\r\n          .replace(\r\n            /[\\u00A0\\u1680​\\u180e\\u2000-\\u2009\\u200a​\\u200b​\\u202f\\u205f​\\u3000]/g,\r\n            \"\"\r\n          );\r\n    }\r\n  }\r\n}\r\n\r\nfunction EngToFrConversion(amt){\r\n  let nSeperator=amt.toString().search(\",\");\r\n  if( nSeperator <0)\r\n    return false\r\n  else\r\n  {\r\n    let s1= amt;   \r\n    while (nSeperator >=0)\r\n    {\r\n      s1= s1.toString().substring(nSeperator+1, parseInt(s1.length));\r\n      nSeperator=s1.toString().search(\",\");\r\n      \r\n    }\r\n    if (s1.length>=3) \r\n      return true\r\n    else\r\n      return false\r\n  \r\n}\r\n}\r\n\r\nexport function isMobileDevice() {\r\n  return (\r\n    typeof window.orientation !== \"undefined\" ||\r\n    navigator.userAgent.indexOf(\"IEMobile\") !== -1\r\n  );\r\n}\r\n\r\nexport function numFormat(v, bInput, mode, seperator,decimalChar) {\r\n   var v1;\r\n  var v2;\r\n  var v3;\r\n\r\n  \r\n  var formatted;\r\n  const lang=decimalChar===\".\" || decimalChar=== undefined ? \"en\":\"fr\";\r\n  //const seperator = this.props.language === \"en\" ? \",\" : \" \";\r\n  //console.log(v);\r\n  if (typeof v !== \"undefined\") {\r\n    //console.log(v);\r\n    v = cleanFormat(v, lang);\r\n    if (mode !== 3) v = parseInt(v).toFixed(0);\r\n\r\n    if (mode === 3 && bInput) {\r\n      if (v[v.length - 1] === \".\") v = v.substring(0, v.length - 1);\r\n      else {\r\n        if (v.length > 1) v = (v * 10).toFixed(2);\r\n        if (v > 100) v = (v / 10).toFixed(2);\r\n      }\r\n    }\r\n\r\n    //console.log(v);\r\n    v1 = get1000(v);\r\n    v2 = get1000((v - v1) / 1000);\r\n    v3 = parseInt((v - v1 - 1000 * v2) / 1000000);\r\n\r\n    if (v2 > 0 || v3 > 0) {\r\n      v = v2 + seperator + (v1 > 99 ? v1 : v1 > 10 ? \"0\" + v1 : \"00\" + v1);\r\n      if (v3 > 0)\r\n        v =\r\n          v3 +\r\n          seperator +\r\n          (v2 > 99 ? v2 : v2 > 10 ? \"0\" + v2 : \"00\" + v2) +\r\n          seperator +\r\n          (v1 > 99 ? v1 : v1 > 10 ? \"0\" + v1 : \"00\" + v1);\r\n    }\r\n    \r\n    if (mode === 3) {\r\n      if (\r\n        /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\r\n          navigator.userAgent\r\n        )\r\n      )\r\n        formatted = parseFloat(Math.round(v * 100) / 100).toFixed(2);\r\n      else {\r\n        formatted = parseFloat(\r\n          Math.round(100 * v) / 100 / (v.length === 1 && bInput ? 100 : 1)\r\n        ); // + '%';\r\n        formatted = formatted > 100 ? 100 : formatted;\r\n        formatted = formatted.toFixed(2) + \"%\";\r\n        if(decimalChar!==undefined){\r\n          if(formatted.includes(\".\"))formatted=formatted.replace(\".\",decimalChar)\r\n        }\r\n      }\r\n    } else if (mode === 4) {\r\n      formatted =\r\n        25 * parseInt(parseFloat(Math.round(v * 100) / 100).toFixed(0) / 25);\r\n      if (formatted < 100) formatted = 100;\r\n      if (formatted > 400) formatted = 400;\r\n      if (\r\n        /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\r\n          navigator.userAgent\r\n        )\r\n      )\r\n        formatted = formatted;\r\n      else formatted = formatted + \"%\";\r\n    } else if (mode === 2) formatted = \"$\" + v;\r\n    else formatted = v;\r\n  }\r\n  if (isNaN(cleanFormat(formatted, lang))) formatted = 0;\r\n  return formatted;\r\n}\r\n\r\n//valueChanged = (num, mode) => {\r\n//\tlet seperator = this.props.language === \"en\" ? \",\" : \" \";\r\n//\tvar v = num.value.replace('$', '').replace('%', '').replace(seperator, '');\r\n//\tnum.value = this.numFormat(v);\r\n//}\r\n\r\n\r\nfunction get1000(num) {\r\n  return parseFloat(num) - 1000 * parseInt(num / 1000);\r\n}\r\n\r\n\r\nexport function formatMoney(amount, decimalCount, decimal, thousands) {\r\n  try {\r\n    const lang=decimal===\".\" || decimal=== undefined ? \"en\":\"fr\";\r\n\r\n    cleanFormat(amount, lang);\r\n    decimalCount = Math.abs(decimalCount);\r\n    decimalCount = isNaN(decimalCount) ? 2 : decimalCount;\r\n\r\n    const negativeSign = amount < 0 ? \"-\" : \"\";\r\n\r\n    let i = parseFloat(\r\n      (amount = Math.abs(Number(amount) || 0).toFixed(decimalCount))\r\n    ).toString();\r\n\r\n    let j = i.length > 3 ? i.length % 3 : 0;\r\n\r\n    return (\r\n      negativeSign +\r\n      (j ? i.substr(0, j) + thousands : \"\") +\r\n      i.substr(j).replace(/(\\d{3})(?=\\d)/g, \"$1\" + thousands) +\r\n      (decimalCount\r\n        ? decimal +\r\n          Math.abs(amount - i)\r\n            .toFixed(decimalCount)\r\n            .slice(2)\r\n        : \"\")\r\n    );\r\n  } catch (e) {\r\n    //\tconsole.log(e);\r\n  }\r\n}\r\n\r\nexport function formatMoney2(amount, decimalCount, lang, dollarSign) {\r\n  const decimalChar = lang === \"en\" ? \".\" : \",\";\r\n  const thousands = lang === \"en\" ? \",\" : \" \";\r\n // const formatFr = lang === \"fr\" ? true : false;\r\n\r\n  try {\r\n    cleanFormat(amount, lang);\r\n    decimalCount = Math.abs(decimalCount);\r\n    decimalCount = isNaN(decimalCount) ? 2 : decimalCount;\r\n\r\n    const negativeSign = amount < 0 ? \"-\" : \"\";\r\n\r\n    let i = parseFloat(\r\n      (amount = Math.abs(Number(amount) || 0).toFixed(decimalCount))\r\n    ).toString();\r\n\r\n    let j = i.length > 3 ? i.length % 3 : 0;\r\n\r\n    const returnValue = (\r\n      negativeSign +\r\n      (lang === \"en\" && dollarSign ? \"$\" : \"\") +\r\n      (j ? i.substr(0, j) + thousands : \"\") +\r\n      i.substr(j).replace(/(\\d{3})(?=\\d)/g, \"$1\" + thousands) +\r\n      (decimalCount\r\n        ? decimalChar +\r\n          Math.abs(amount - i)\r\n            .toFixed(decimalCount)\r\n            .slice(2)\r\n        : \"\") +\r\n      (lang === \"fr\" && dollarSign ? \" $\" : \"\")\r\n    ).toString();\r\n\r\n    return returnValue;\r\n  } catch (e) {\r\n    //\tconsole.log(e);\r\n  }\r\n}\r\n\r\nexport function arrayFormatMoney(array, language, noOfDecimals) {\r\n  let arrayFormatted = [];\r\n\r\n  for (let i = 0; i < array.length; i++) {\r\n    arrayFormatted[i] = formatMoney2(\r\n      array[i],\r\n      noOfDecimals,\r\n      language,\r\n      false\r\n      /* decimalChar,\r\n      thousands */\r\n    );\r\n  }\r\n  // console.log(arrayFormatted,array)\r\n  return arrayFormatted;\r\n}\r\n\r\nexport function clearListCookies() {\r\n  // console.log(document.cookie);\r\n  var cookies = document.cookie.split(\";\");\r\n  for (var i = 0; i < cookies.length; i++) {\r\n    var spcook = cookies[i].split(\"=\");\r\n    deleteCookie(spcook[0]);\r\n  }\r\n  function deleteCookie(cookiename) {\r\n    var d = new Date();\r\n    d.setDate(d.getDate() - 1);\r\n    var expires = \";expires=\" + d;\r\n    var name = cookiename;\r\n    var value = \"\";\r\n    document.cookie = name + \"=\" + value + \"; \" + expires + \"; path=/acc/html\";\r\n  }\r\n  localStorage.clear();\r\n  //window .location = \"\"; // TO REFRESH THE PAGE\r\n}\r\n\r\nexport function isVersion2019() {\r\n  const ver = version;\r\n  let verNo = 0;\r\n  let inS = ver.indexOf(\".\");\r\n  verNo = ver.substring(0, inS);\r\n  let verS = num(Number(verNo));\r\n  let inS2 = ver.indexOf(\".\", inS + 1);\r\n  verNo = ver.substring(inS + 1, inS2);\r\n  verS += num(Number(verNo));\r\n  verNo = ver.substring(inS2 + 1, ver.length);\r\n  verS += num(Number(verNo));\r\n  \r\n  return Number(verS) <= 10002;\r\n}\r\n\r\nexport function versionDetails() {\r\n  const ver = version;\r\n  let verNo = 0;\r\n  let inS = ver.indexOf(\".\");\r\n  verNo = ver.substring(0, inS);\r\n  let verS = num(Number(verNo));\r\n  let inS2 = ver.indexOf(\".\", inS + 1);\r\n  verNo = ver.substring(inS + 1, inS2);\r\n  verS += num(Number(verNo));\r\n  verNo = ver.substring(inS2 + 1, ver.length);\r\n  verS += num(Number(verNo));\r\n  let versionNumeric = Number(verS);\r\n\r\n  // 1.0.4\r\n  let allowEmail = false;\r\n  let saveEncrypt = versionNumeric >= 10003 ? true : false;\r\n  let allowAnalysis = versionNumeric > 10004 ? true : false;\r\n  // 1.0.5\r\n  allowEmail = true;\r\n  saveEncrypt = true;\r\n  allowAnalysis = true;\r\n  let verDetails = {\r\n    version: ver,\r\n    versionNumeric: versionNumeric,\r\n    allowEmail: allowEmail,\r\n    saveEncrypt: saveEncrypt,\r\n    allowAnalysis: allowAnalysis,\r\n  };\r\n  // 1.0.6\r\n  allowEmail = true;\r\n  saveEncrypt = true;\r\n  allowAnalysis = false;\r\n  verDetails = {\r\n    version: ver,\r\n    versionNumeric: versionNumeric,\r\n    allowEmail: allowEmail,\r\n    saveEncrypt: saveEncrypt,\r\n    allowAnalysis: allowAnalysis,\r\n  };\r\n  return verDetails;\r\n}\r\n\r\nfunction num(n) {\r\n  return n > 9 ? \"\" + n : \"0\" + n;\r\n}\r\n\r\n/* 16\r\n */\r\n/* \r\nexport function INAAssetSpreadsheetData(asset, taxRate, Spouse, inflation,language) {\r\n  let dataColumns = [];\r\n  let dataColumn = [];\r\n  let noYrs = 100 - Spouse.Age;\r\n\r\n  let i;\r\n  let j;\r\n\r\n  for (i = 0; i < 4; i++) {\r\n    dataColumn = [];\r\n    for (j = 0; j < noYrs; j++) {\r\n      if (i === 0) dataColumn.push(1 + j);\r\n      else if (i === 1) dataColumn.push(Spouse.Age + j);\r\n      else if (i === 2)\r\n        dataColumn.push(numFormat(asset.currValue * 1.03,   language===\"en\"?false:true, 2, language===\"en\"?\",\":\" \"));\r\n      else if (i === 3)\r\n        dataColumn.push(\r\n          numFormat(\r\n            (asset.currValue * 1.03 - asset.ACB) * taxRate,\r\n            language===\"en\"?false:true, 2, language===\"en\"?\",\":\" \"\r\n          )\r\n        );\r\n    }\r\n    dataColumns.push(dataColumn);\r\n    dataColumn = [];\r\n  }\r\n\r\n  //console.log(dataColumns);\r\n  return dataColumns;\r\n}\r\n */\r\nexport function handleCSVDownload2() {\r\n  var de = document.getElementById(\"DExcel\");\r\n  de.setAttribute(\"downloadNow\", \"1\");\r\n}\r\n\r\nexport function handleCSVDownload(data, columns) {\r\n  const CSVHead =\r\n    columns\r\n      .reduce((soFar, column) => soFar + '\"' + column.name + '\",', \"\")\r\n      .slice(0, -1) + \"\\r\\n\";\r\n  const CSVBody = data\r\n    .reduce((soFar, row) => soFar + '\"' + row.data.join('\",\"') + '\"\\r\\n', [])\r\n    .trim();\r\n\r\n  /* taken from react-csv */\r\n  const csv = `${CSVHead}${CSVBody}`;\r\n  const blob = new Blob([csv], { type: \"text/csv\" });\r\n  const dataURI = `data:text/csv;charset=utf-8,${csv}`;\r\n\r\n  const URL = window.URL || window.webkitURL;\r\n  const downloadURI =\r\n    typeof URL.createObjectURL === \"undefined\"\r\n      ? dataURI\r\n      : URL.createObjectURL(blob);\r\n\r\n  let link = document.createElement(\"a\");\r\n  link.setAttribute(\"href\", downloadURI);\r\n  link.setAttribute(\"download\", \"tableDownload.csv\");\r\n  /* document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link); */\r\n  const workbook = XLSX.utils.book_new();\r\n  workbook.SheetNames.push(\"T1\");\r\n  var d = [[\"hey\", \"goh\"]];\r\n  var v = XLSX.utils.aoa_to_sheet(d);\r\n  workbook.Sheets[\"T1\"] = v;\r\n  const worksheet = XLSX.utils.aoa_to_sheet(\r\n    [columns.map((r) => r.name)].concat(data.map((r) => r.data))\r\n  );\r\n\r\n  //\tworksheet.cells(10,10).value=3333333\r\n  XLSX.utils.book_append_sheet(workbook, worksheet, \"Tabela Exportada\");\r\n  XLSX.writeFile(workbook, \"TabelaExportada.xls\", { compression: true });\r\n}\r\n\r\nexport function INAMCCQuote() {\r\n  let MCC = async function (input, insuranceNeed) {\r\n    const minPrem = await getMCCQuoteOutput1(input, insuranceNeed);\r\n    const MCCData = await getMCCQuoteOutput2(input, insuranceNeed, minPrem);\r\n    // console.log(minPrem);\r\n    return MCCData;\r\n  };\r\n\r\n  // console.log(MCC);\r\n  return MCC;\r\n}\r\n\r\n\r\n/* function getMCCQuoteOutput(){\r\n  \t\treturn Promise.all([getMCCQuoteOutput1(),getMCCQuoteOutput2()])\r\n\t} */\r\n\r\nfunction getMCCQuoteOutput1(input, insuranceNeed) {\r\n  let quotePlanID = 48;\r\n  let quoteClient = 1; //\r\n  let dataMCC = readMCCData(input, quotePlanID, quoteClient, insuranceNeed);\r\n\r\n  //let dataAPISite = \"http://localhost:8082\";\r\n  fetchMCCData(dataMCC, insuranceNeed).then((data) => {\r\n    // console.log(data[0]);\r\n    if (data[0][1] !== undefined) {\r\n      console.log(\"POST: MCC_OutputArrays success\");\r\n      return data[0];\r\n    }\r\n  });\r\n}\r\n\r\nfunction getMCCQuoteOutput2(input, insuranceNeed, minPrem) {\r\n  let dataDB = [];\r\n  let quotePlanID = 48;\r\n  let quoteClient = 1; //\r\n  //let dataAPISite = \"http://localhost:8082\";\r\n  let dataMCC = readMCCData(input, quotePlanID, quoteClient, insuranceNeed);\r\n\r\n  dataMCC.policy.objPremium.PremSet = true;\r\n  dataMCC.policy.objPremium.PremSetAmt = minPrem;\r\n  dataMCC.policy.objPremium.PremSetDur = 19;\r\n  dataMCC.policy.objPremium.PremSolve = false;\r\n  fetchMCCData(dataMCC, insuranceNeed).then((data) => {\r\n    //console.log(data[0]);\r\n    if (data[0][1] !== undefined) {\r\n      //console.log(\"POST: MCC_OutputArrays success\");\r\n      dataDB = data[0][3].Values.map((x) => parseInt(cleanFormat(x)));\r\n      dataDB.unshift(parseInt(cleanFormat(insuranceNeed)));\r\n      return dataDB;\r\n    }\r\n  });\r\n}\r\n\r\nexport function getProjectedLiabilities(dataInput, years, probate) {\r\n  let i;\r\n  let j;\r\n  var totalLiabProjections = [];\r\n  for (i = 0; i < years; ++i) totalLiabProjections.push(0);\r\n  // add probate seperately\r\n  for (j = 0; j < dataInput.Liabilitys.length; j++) {\r\n    if (dataInput.Liabilitys[j].liabTypeKey!==LIABILITIES.PROBATE.Key)\r\n    {\r\n      const liabProj = getProjectedLiability(dataInput.Liabilitys[j]);\r\n      for (i = 0; i < Math.min(years, liabProj.length); ++i)\r\n        totalLiabProjections[i] += liabProj[i];\r\n    }\r\n  }\r\n  //console.log(probate.numericValues,years, probate.length)\r\n  // add probate\r\n  if(probate!==undefined)\r\n  {\r\n    for (i = 0; i < Math.min(years, probate.numericValues.length); ++i)\r\n    totalLiabProjections[i] += probate.numericValues[i];\r\n   // console.log(probate.numericValues[i],totalLiabProjections[i])\r\n  }\r\n\r\n  return totalLiabProjections;\r\n}\r\n\r\nexport function getProjectedLiability(liability,probate) {\r\n  let i;\r\n  var totalLiab = 0;\r\n  var totalLiabProjections = [];\r\n\r\n  if (\r\n    liability.liabTypeKey === LIABILITIES.OUTSTANDING_LOANS.Key ||\r\n    liability.liabTypeKey === LIABILITIES.MORTGAGE_REDEMPTION.Key\r\n  ) {\r\n    let amt = liability.currValue;\r\n    totalLiabProjections.push(Math.round(amt));\r\n    liability.growth = getLoanBalance(\r\n      liability.currValue,\r\n      liability.exposureDur,\r\n      liability.repay\r\n    );\r\n    //console.log(liability.growth);\r\n    for (i = 0; i < liability.exposureDur; ++i) {\r\n      amt = (amt - liability.repay) * (1 + liability.growth);\r\n      totalLiabProjections.push(Math.round(amt));\r\n    }\r\n  } else if (liability.liabTypeKey === LIABILITIES.CLIENT_TAX_LIABILITY.Key) {\r\n    //console.log(liability.assetTaxLiabProj)\r\n    let amt = liability.currValue;\r\n    totalLiabProjections.push(Math.round(amt));\r\n    for (i = 1; i < liability.exposureDur; ++i) {\r\n      amt = liability.assetTaxLiabProj[i];\r\n      totalLiabProjections.push(Math.round(amt));\r\n    }\r\n  } else if (liability.liabTypeKey === LIABILITIES.PROBATE.Key) {\r\n    if (probate ===undefined){\r\n      for (i = 0; i < liability.exposureDur; ++i) {\r\n        const amt = i < liability.exposureDur ? liability.currValue : 0;\r\n        totalLiab = amt;\r\n        totalLiabProjections.push(totalLiab);\r\n      }  \r\n    }\r\n    else\r\n      {\r\n        for (i = 0; i < liability.exposureDur; ++i) {\r\n        totalLiab = probate.numericValues[i];\r\n        totalLiabProjections.push(totalLiab);\r\n      }\r\n    }\r\n  } else {\r\n    for (i = 0; i < liability.exposureDur; ++i) {\r\n      const amt = i < liability.exposureDur ? liability.currValue : 0;\r\n      const change =\r\n        //liability.growthDir === GROWTHDIR[lang].Values[0]\r\n        liability.growthDirKey === GROWTHDIR.GROWS.Key\r\n          ? liability.growth / 100\r\n          : -liability.growth / 100;\r\n      totalLiab = amt * Math.pow(1 + change, i);\r\n      totalLiabProjections.push(totalLiab);\r\n    }\r\n  }\r\n\r\n  return totalLiabProjections;\r\n}\r\n\r\nfunction getLoanBalance(currValue, exposureDur, repay) {\r\n  //console.log(currValue,exposureDur,repay)\r\n  let rate = 0.1;\r\n  let dU = 0.2;\r\n  let dL = 0; //-.1111111;\r\n  let dBal = 1;\r\n\r\n  while (dU - dL > 0.0000001) {\r\n    dBal =\r\n      (currValue - repay) * Math.pow(1 + rate, exposureDur) -\r\n      (repay * (1 + rate) * (1 - Math.pow(1 + rate, exposureDur - 1))) / -rate;\r\n\r\n    if (dBal > 0) dU = rate;\r\n    else dL = rate;\r\n\r\n    rate = (dL + dU) / 2;\r\n  }\r\n\r\n  return rate;\r\n}\r\n\r\nexport function getINA_LifeExp_Plus_yrs(\r\n  INALifeExp,\r\n  dataShortfall,\r\n  invRate,\r\n  lifeExp,\r\n  yrs\r\n) {\r\n  let i;\r\n  let INA = INALifeExp;\r\n  \r\n  for (i = 0; i < yrs; ++i) {\r\n    INA =parseInt(INA)+parseInt(\r\n      dataShortfall[lifeExp + i] *\r\n      Math.pow(1 / (1 + invRate / 100), lifeExp + i));\r\n  \r\n  }\r\n\r\n  //console.log(INA)\r\n  return numFormat(INA, false, 2, \",\");\r\n}\r\n\r\nexport function getDataFutureEstateLiability(\r\n  dataTaxLiability,\r\n  totalLiabProjections\r\n) {\r\n  let i;\r\n  let projectEnd = Math.min(\r\n    totalLiabProjections.length,\r\n    dataTaxLiability.length\r\n  );\r\n  let dataFutureEstateLiability = [];\r\n\r\n  for (i = 0; i < projectEnd; ++i) {\r\n    dataFutureEstateLiability.push(dataTaxLiability[i]);\r\n  }\r\n  // add liab\r\n  for (i = 0; i < projectEnd; ++i) {\r\n    dataFutureEstateLiability[i] += totalLiabProjections[i];\r\n  }\r\n  return dataFutureEstateLiability;\r\n}\r\n\r\nexport function getListToShowByOrder(fullListOfItems) {\r\n  const showableList = Object.values(fullListOfItems)\r\n    .filter((obj) => obj.order > 0)\r\n    .slice(0);\r\n\r\n  return showableList.sort(function (a, b) {\r\n    return a.order - b.order;\r\n  });\r\n}\r\n\r\nexport function getListItemNameFromKey(list, Key, lang) {\r\n  let found = Object.values(list).find((obj) => obj.Key === Key);\r\n  if (found === undefined) found = \"\";\r\n  else found = found.value[lang];\r\n  return found;\r\n}\r\n\r\nexport function getListItemKeyFromName(list, name) {\r\n  // console.log(name,list)\r\n  name = name.split(\" \").join(\"\").split(\" \").join(\"\");\r\n  /*  Object.values(list).forEach(\r\n    obj => console.log(obj.value.en.split(\" \").join(\"\").split(\" \").join(\"\"),name,obj.value.en==name))\r\n   */\r\n\r\n  let found = Object.values(list).find(\r\n    (obj) =>\r\n      obj.value.en.split(\" \").join(\"\").split(\" \").join(\"\") == name ||\r\n      obj.value.fr.split(\" \").join(\"\").split(\" \").join(\"\") == name\r\n  );\r\n  if (found === undefined) found = 0;\r\n  else found = found.Key;\r\n  return found;\r\n}\r\n\r\nexport function getAssetsTaxCategoryTotal(dataInput, key) {\r\n  var totalAsset = 0;\r\n  dataInput.Assets.forEach((element) => {\r\n    if (element.assetTaxTypeKey === key) totalAsset += element.currValue;\r\n  });\r\n\r\n  return totalAsset;\r\n}\r\n\r\nexport function getDisableValues(list) {\r\n  let val = [];\r\n  Object.values(list).forEach(() => {\r\n    val.push(false);\r\n  });\r\n  return val;\r\n}\r\n\r\nexport function getAssetsCategoryTotal(dataList, key) {\r\n  var total = 0;\r\n  dataList.Assets.forEach((element) => {\r\n    if (element.assetTypeKey === key) total += element.currValue;\r\n  });\r\n  // // console.log(total,dataList,key)\r\n  return total;\r\n}\r\n\r\nexport function getLiabsCategoryTotal(dataList, key) {\r\n  var total = 0;\r\n  dataList.Liabilitys.forEach((element) => {\r\n    if (element.liabTypeKey === key) total += element.currValue;\r\n  });\r\n  // console.log(total,dataList,key)\r\n  return total;\r\n}\r\n\r\nexport function getAgesEP(clients,LE)\r\n{\r\n  const age1= clients[QUOTE_CLIENT].Age\r\n        \r\n  let dataAges=[]\r\n    //for (let i = startAge; i < parseFloat(startAge + LE + 4); i++)\r\n      if(clients.length > 1)\r\n      {\r\n        const age2= clients[QUOTE_SPOUSE].Age\r\n        for (let i = 0; i < parseFloat(LE + 4); i++)\r\n          dataAges.push(parseInt(age1+i) + \"/\" + parseInt(age2+i));\r\n      }\r\n      else\r\n      {\r\n        for (let i = 0; i < parseFloat(LE + 4); i++)\r\n          dataAges.push(parseInt(age1+i));\r\n      } \r\n\r\n      return dataAges\r\n}\r\n\r\n\r\nexport async function getTaxLiabCategoryTotal(dataInput, key, dataNA, yr) {\r\n  //let appSiteAPI = \"http://localhost:8082\";\r\n\r\n  var totalAsset = 0;\r\n\r\n  let dataAss = dataInput.Assets.filter(\r\n    (obj) => obj.assetTaxTypeKey === key\r\n  ).slice(0);\r\n\r\n  //await dataInput.Assets.forEach(async (element) => {\r\n  // if(element.assetTaxTypeKey === key)\r\n  //{\r\n  for (var i = 0; i < dataAss.length; ++i) {\r\n    let data = await getAssetTL(dataNA, dataAss[i].id, yr);\r\n    if (data !== undefined) {\r\n      totalAsset += data;\r\n    }\r\n  }\r\n  return totalAsset;\r\n}\r\n\r\nasync function getAssetTL(dataNA, id, yr) {\r\n  let data = await fetchAssetProjection2(dataNA, id);\r\n  if (data !== undefined) {\r\n    if (data[ASSET_API_OUTPUT_TaxPayable] !== undefined) {\r\n      return data[ASSET_API_OUTPUT_TaxPayable].numericValues[yr];\r\n    }\r\n   }\r\n}\r\n\r\n\r\n\r\n  export function getDefaultImages()\r\n  {\r\n    return{\r\n      adviserLogo:{image:null, left: 0,size: OUTPUT_WIDTH_PCT, allPages: false, top:true, showDetails:false},\r\n      appletImage:{image:APPLET_INA? require(\"../images/INA.png\"):require(\"../images/estate.protection.applet.cover.graphic.png\"), left: 0,size: OUTPUT_WIDTH_PCT, allPages: false, top:true, showDetails:false}\r\n    }\r\n  }\r\n  \r\n  \r\n\r\nexport function getAfterTaxTotalIncome(clients, index) {\r\n  return (\r\n    clients[QUOTE_CLIENT].Income *\r\n      (1 - clients[QUOTE_CLIENT].avgTaxRate / 100) +\r\n    clients[index].Income * (1 - clients[index].avgTaxRate / 100)\r\n  ); //* Math.pow(1+this.state.dataInput.Presentations[0].inflation / 100,data2.Needs[i].startYear)\r\n}\r\n\r\nexport function isSingleFamily(clients) {\r\n  const spouseKey = MEMBER.SPOUSE.Key;\r\n  let survivors = clients.filter((x) => x.memberKey === spouseKey);\r\n  if (APPLET_INA) return survivors === undefined || survivors.length === 0;\r\n  else if (APPLET_INA) return false;\r\n}\r\n\r\nexport function singleFamilyProjectionYears(clients) {\r\n  let minAge = 0;\r\n  let maxRet = 0;\r\n  let noYrs = 0;\r\n  const clientKey = MEMBER.CLIENT.Key;\r\n  let survivors = clients.filter((x) => x.memberKey !== clientKey);\r\n  if (survivors !== undefined && survivors.length > 0) {\r\n    minAge = survivors.reduce(function (prev, curr) {\r\n      return prev.Age < curr.Age ? prev : curr;\r\n    }).Age;\r\n\r\n    maxRet = survivors.reduce(function (prev, curr) {\r\n      return prev.retirementAge > curr.retirementAge ? prev : curr;\r\n    }).retirementAge;\r\n    \r\n    let noYrsDiff = survivors.reduce(function (prev, curr) {\r\n      return prev.Age - prev.retirementAge < curr.Age - curr.retirementAge ? prev : curr;\r\n    });\r\n    noYrs=noYrsDiff.retirementAge-noYrsDiff.Age\r\n  \r\n  }\r\n  return {\r\n    projectionEnd: maxRet,\r\n    noProjectionYrs: noYrs,//maxRet - minAge,\r\n    survivorAge: minAge,\r\n  };\r\n}\r\n\r\nexport function familyProjectionYears(\r\n  clients,\r\n  periodOption,\r\n  LE,\r\n  insuranceNeeds,\r\n  dataShortfall,\r\n  presentation\r\n) {\r\n  let insNeed = 0;\r\n  let insNeedRet = 0;\r\n  let insNeedLE = 0;\r\n  let insNeedLE3 = 0;\r\n  let insNeedEAge = 0;\r\n\r\n  if (insuranceNeeds.length > 0) {\r\n    insNeedRet = cleanFormat(insuranceNeeds[DISPLAY_RETIREMENT].Value, presentation.language);\r\n    insNeedLE =  cleanFormat(insuranceNeeds[DISPLAY_LIFEEXP].Value, presentation.language);\r\n    insNeedEAge =  cleanFormat(insuranceNeeds[DISPLAY_ENDAGE].Value, presentation.language);\r\n    const lifeExp=parseFloat(cleanFormat(LE.joint, presentation.language)) // this is either client or jltd if two lives\r\n\r\n    insNeed =\r\n      periodOption === DISPLAY_RETIREMENT\r\n        ? insNeedRet\r\n        : periodOption === DISPLAY_LIFEEXP\r\n        ? insNeedLE\r\n        : periodOption === DISPLAY_LIFEEXP_PLUS_3\r\n        ? getINA_LifeExp_Plus_yrs(\r\n          insNeedLE,\r\n            dataShortfall,\r\n            presentation.invRate,\r\n            //LE.spouse,\r\n            lifeExp, // this is either client or jltd if two lives\r\n            3\r\n          )\r\n        : insNeedEAge;\r\n    \r\n    insNeedLE3 =\r\n      dataShortfall !== undefined\r\n        ? getINA_LifeExp_Plus_yrs(\r\n          insNeedLE ,\r\n            dataShortfall,\r\n            presentation.invRate,\r\n            lifeExp,\r\n            3\r\n          )\r\n        : insNeed;\r\n  }\r\n\r\n  // if single family survivor Index could be more than on child, otherwise it is always 1 for spouse\r\n  if (isSingleFamily(clients) && !APPLET_EP) {\r\n    let singleFamilyvalues = singleFamilyProjectionYears(clients);\r\n    singleFamilyvalues.insuranceNeed = insNeedRet;\r\n    singleFamilyvalues.insuranceNeedToRet = insNeedRet;\r\n    singleFamilyvalues.insuranceNeedToLE = insNeedRet;\r\n    singleFamilyvalues.insuranceNeedToLE3 = insNeedRet;\r\n    singleFamilyvalues.insuranceNeedToEnd = insNeedRet;\r\n    return singleFamilyvalues;\r\n  } else {\r\n    let projectEnd = 65;\r\n    let noProjectYrs = 0;\r\n    let survAge;\r\n    const survIdx = 1; // spouse\r\n\r\n    if (APPLET_EP) {\r\n      // survivorExists or EP\r\n      if(clients.length===1){\r\n      projectEnd = LE.client + clients[QUOTE_CLIENT].Age + 3;\r\n      noProjectYrs = projectEnd - clients[QUOTE_CLIENT].Age;\r\n      survAge = clients[QUOTE_CLIENT].Age;\r\n      }\r\n      else // jltd\r\n      {\r\n        const minAge=Math.min(clients[QUOTE_CLIENT].Age, clients[QUOTE_SPOUSE].Age)\r\n        projectEnd = LE.joint + minAge + 3;\r\n        noProjectYrs = projectEnd - minAge;\r\n        survAge = minAge;\r\n      \r\n      }\r\n    } else if (clients.length > 1) {\r\n      // survivorExists or EP\r\n      projectEnd =\r\n        periodOption === DISPLAY_RETIREMENT\r\n          ? clients[survIdx].retirementAge\r\n          : periodOption === DISPLAY_LIFEEXP\r\n          ? LE.spouse + clients[survIdx].Age\r\n          : periodOption === DISPLAY_ANALYSIS\r\n          ? LE.joint + clients[survIdx].Age + 3\r\n          : 100;\r\n      noProjectYrs = projectEnd - clients[survIdx].Age;\r\n      survAge = clients[survIdx].Age;\r\n    } else {\r\n      survAge = clients[QUOTE_CLIENT].Age;\r\n      noProjectYrs = 0;\r\n    }\r\n    return {\r\n      projectionEnd: projectEnd,\r\n      noProjectionYrs: noProjectYrs,\r\n      survivorAge: survAge,\r\n      insuranceNeed: insNeed,\r\n      insuranceNeedToRet: insNeedRet,\r\n      insuranceNeedToLE: insNeedLE,\r\n      insuranceNeedToLE3: insNeedLE3,\r\n      insuranceNeedToEnd: insNeedEAge,\r\n    };\r\n  }\r\n}\r\n\r\nexport function getInsNeedLine(\r\n  presentation,\r\n  projEnd,\r\n  lang,\r\n  noSurvivor,\r\n  singleFamily,\r\n  protectionPeriod,\r\n  insuranceNeed,\r\n  name\r\n) {\r\n  const labelsBilingual = OUTPUTTEXT[lang];\r\n  const decimalChar = lang === \"en\" ? \".\" : \",\";\r\n  const thousands = lang === \"en\" ? \",\" : \" \";\r\n // const formatFr = lang === \"fr\" ? true : false;\r\n  const dollarEn= lang === \"fr\" ? \"\" : \"$\";\r\n  const dollarFr= lang === \"fr\" ? \"$\" : \"\";\r\n\r\n  let needTo =\r\n    presentation.periodOption === DISPLAY_RETIREMENT\r\n      ? singleFamily\r\n        ? labelsBilingual.insNeedsSingleFamily\r\n        : labelsBilingual.insNeedsRet\r\n      : presentation.periodOption === DISPLAY_ENDAGE\r\n      ? labelsBilingual.insNeeds100\r\n      : labelsBilingual.insNeedsRetLE;\r\n\r\n  if (noSurvivor) needTo = labelsBilingual.addSurvivor;\r\n  else if (singleFamily)\r\n    needTo +=\r\n      +protectionPeriod +\r\n      labelsBilingual.years +\r\n      \": \" + dollarEn +\r\n      formatMoney(\r\n        cleanFormat(insuranceNeed, lang),\r\n        0,\r\n        decimalChar,\r\n        thousands\r\n      )+dollarFr;\r\n  else if (presentation.periodOption !== DISPLAY_ENDAGE)\r\n    needTo +=\r\n      +projEnd +\r\n      \"): \" + dollarEn +\r\n      formatMoney(\r\n        cleanFormat(insuranceNeed, lang),\r\n        0,\r\n        decimalChar,\r\n        thousands\r\n      ) +dollarFr;\r\n  else\r\n    needTo +=\r\n      \": \" + dollarEn +\r\n      formatMoney(\r\n        cleanFormat(insuranceNeed, lang),\r\n        0,\r\n        decimalChar,\r\n        thousands\r\n      ) +dollarFr;\r\n  if (name !== \"\" && name !== undefined && name !== TITLES[lang].insured) needTo += \"  (\" + name + \")\";\r\n  return needTo;\r\n}\r\n\r\nexport function getName(name,lang) {\r\n  if (!(name === \"\" || name === undefined || name === TITLES[lang].insured  || name === TITLES[lang].benef)) return \" (\" + name + \")\";\r\n  else return \"\";\r\n}\r\n\r\nexport function formatted(value,lang){\r\n  const decimalChar = lang === \"en\" ? \".\" : \",\";\r\n  const thousands = lang === \"en\" ? \",\" : \" \";\r\n  \r\n  const formattedValue= (lang === \"en\" ? \"$\" : \"\" )+\r\n  formatMoney(\r\n    value,\r\n    0,\r\n    decimalChar,\r\n    thousands\r\n  )+(lang === \"en\" ? \"\" : \"$\" )\r\n\r\n  return formattedValue\r\n }\r\n \r\n\r\n\r\nexport function getLeakageGraphs(\r\n  assets,\r\n  assetProjections,\r\n  AssetLiabProjs,\r\n  totalLiabProjections,\r\n  lang,\r\n  lifeExp\r\n) {\r\n  const optionsPie = {\r\n    responsive: true,\r\n    maintainAspectRatio: true,\r\n    title: {\r\n      display: true,\r\n      position: \"top\",\r\n      text: \"\",\r\n      fontSize: 14, //8,\r\n      fontColor: \"#111\",\r\n    },\r\n    legend: {\r\n      display: true,\r\n      position: \"right\",\r\n      labels: {\r\n        fontColor: \"#333\",\r\n        fontSize: 12, //16\r\n      },\r\n    },\r\n    /*  plugins: {\r\n      // Change options for ALL labels of THIS CHART\r\n      display: true,\r\n      datalabels: {\r\n        color: \"white\",\r\n      },\r\n    },  */\r\n  };\r\n\r\n  const space = \"                                       \";\r\n  let optionsPieEstateLeakage = JSON.parse(JSON.stringify(optionsPie));\r\n  optionsPieEstateLeakage.title.text =\r\n    OUTPUTTEXTEP[lang].graphsLeakageT2 + space;\r\n  //optionsPieEstateLeakage.legend.labels.boxWidth = 20;\r\n  //optionsPieEstateLeakage.plugins.display = true;\r\n\r\n  let optionsPieEstateLeakageLE = JSON.parse(JSON.stringify(optionsPie));\r\n  optionsPieEstateLeakageLE.title.text =\r\n    OUTPUTTEXTEP[lang].graphsLeakageT3 + space; // needTo += +this.props.projectEnd + \")\";\r\n  // optionsPieEstateLeakageLE.legend.labels.boxWidth = 20;\r\n  //optionsPieEstateLeakageLE.plugins.display = true;\r\n \r\n  // asset info\r\n  let assetsTotalNow = 0;\r\n  let assetsTotalLE3 = 0;\r\n // const formatFr = lang === \"fr\" ? true : false;\r\n  const FMVCol = 2;\r\n  for (let i = 0; i < assets.length; ++i) {\r\n    assetsTotalNow += assets[i].currValue;\r\n    assetsTotalLE3 += parseFloat(\r\n      cleanFormat(\r\n        assetProjections[i].grid.dataProjection[FMVCol][lifeExp + 3],\r\n        lang\r\n      )\r\n    );\r\n  }\r\n\r\n  // liab info\r\n  const totalLiabProjectionsNow = parseInt(totalLiabProjections[0]);\r\n  const totalLiabProjectionsLE3 = parseInt(totalLiabProjections[lifeExp + 3]);\r\n\r\n  // leakage data\r\n  // use net worth as full circle in pie chart\r\n  const assetPercent =\r\n    assetsTotalNow - totalLiabProjectionsNow === 0\r\n      ? 0\r\n      : parseInt(\r\n          (100 *\r\n            (assetsTotalNow -\r\n              totalLiabProjectionsNow -\r\n              AssetLiabProjs.EstateLiabsByTypeTotal)) /\r\n            (assetsTotalNow - totalLiabProjectionsNow) +\r\n            0.5\r\n        );\r\n  const taxPercent =\r\n    AssetLiabProjs.EstateLiabsByTypeTotal === 0 ? 0 : 100 - assetPercent;\r\n\r\n  let dataEstateLeakage = [];\r\n  let dataEstateLeakageLE = [];\r\n  dataEstateLeakage.push(\r\n    assetsTotalNow -\r\n      totalLiabProjectionsNow -\r\n      AssetLiabProjs.EstateLiabsByTypeTotal >=\r\n      0\r\n      ? assetsTotalNow -\r\n          totalLiabProjectionsNow -\r\n          AssetLiabProjs.EstateLiabsByTypeTotal\r\n      : 0\r\n  );\r\n  dataEstateLeakage.push(AssetLiabProjs.EstateLiabsByTypeTotal);\r\n  dataEstateLeakageLE.push(\r\n    assetsTotalLE3 -\r\n      totalLiabProjectionsLE3 -\r\n      AssetLiabProjs.EstateLiabsByTypeLE3Total >=\r\n      0\r\n      ? assetsTotalLE3 -\r\n          totalLiabProjectionsLE3 -\r\n          AssetLiabProjs.EstateLiabsByTypeLE3Total\r\n      : 0\r\n  );\r\n  dataEstateLeakageLE.push(AssetLiabProjs.EstateLiabsByTypeLE3Total);\r\n\r\n  const assetPercentLE3 =\r\n    assetsTotalLE3 - totalLiabProjectionsLE3 === 0\r\n      ? 0\r\n      : parseInt(\r\n          (100 *\r\n            (assetsTotalLE3 -\r\n              totalLiabProjectionsLE3 -\r\n              AssetLiabProjs.EstateLiabsByTypeLE3Total)) /\r\n            (assetsTotalLE3 - totalLiabProjectionsLE3) +\r\n            0.5\r\n        );\r\n  const taxPercentLE3 =\r\n    AssetLiabProjs.EstateLiabsByTypeLE3Total +\r\n      assetsTotalLE3 -\r\n      totalLiabProjectionsLE3 ===\r\n    0\r\n      ? 0\r\n      : 100 - assetPercentLE3;\r\n\r\n  //var ctx = document.getElementById('pieEstateLeakage').getContext('2d');\r\n  var dataPieEstateLeakage = {\r\n    labels: [\r\n      // OUTPUTTEXT[lang].graphsL1,OUTPUTTEXT[lang].graphsL2,OUTPUTTEXT[lang].graphsL3,OUTPUTTEXT[lang].graphsL4,OUTPUTTEXT[lang].graphsL5,\r\n      OUTPUTTEXTEP[lang].graphsLeakage1 + \" (\" + assetPercent + \"%)\" + space,\r\n      OUTPUTTEXTEP[lang].graphsLeakage2 + \" (\" + taxPercent + \"%)\" + space,\r\n    ],\r\n    datasets: [\r\n      {\r\n        //data: this.state.estateLiabLE,\r\n        data: dataEstateLeakage,\r\n        //backgroundColor: [\"#F7464A\", \"#46BFBD\", \"#FDB45C\", \"#949FB1\", \"#4D5360\"]\r\n        backgroundColor: [\"#4D7966\", \"#872651\"],\r\n      },\r\n    ],\r\n  };\r\n  const dataPieEstateLeakageLE = {\r\n    labels: [\r\n      // OUTPUTTEXT[lang].graphsL1,OUTPUTTEXT[lang].graphsL2,OUTPUTTEXT[lang].graphsL3,OUTPUTTEXT[lang].graphsL4,OUTPUTTEXT[lang].graphsL5,\r\n      OUTPUTTEXTEP[lang].graphsLeakage1 + \" (\" + assetPercentLE3 + \"%)\" + space,\r\n      OUTPUTTEXTEP[lang].graphsLeakage2 + \" (\" + taxPercentLE3 + \"%)\" + space,\r\n    ],\r\n    datasets: [\r\n      {\r\n        //data: this.state.estateLiabLE,\r\n        data: dataEstateLeakageLE,\r\n        //backgroundColor: [\"#F7464A\", \"#46BFBD\", \"#FDB45C\", \"#949FB1\", \"#4D5360\"]\r\n        backgroundColor: [\"#4D7966\", \"#872651\"],\r\n      },\r\n    ],\r\n  };\r\n  return {\r\n    dataPieEstateLeakage: dataPieEstateLeakage,\r\n    dataPieEstateLeakageLE: dataPieEstateLeakageLE,\r\n    optionsPieEstateLeakage: optionsPieEstateLeakage,\r\n    optionsPieEstateLeakageLE: optionsPieEstateLeakageLE,\r\n  };\r\n}\r\n\r\nexport function getLogoAndAppletImage(dataInput, imageRemove, imageAdjust) {\r\n  const lang = dataInput.Presentations[0].language;\r\n  const allPages =\r\n      dataInput.Presentations[0].adviserLogo.image !== null &&\r\n      dataInput.Presentations[0].adviserLogo.allPages;\r\n  const appletImage =\r\n    dataInput.Presentations[0].appletImage === undefined\r\n      ? APPLET_INA\r\n        ? require(\"../images/INA.png\")\r\n        : require(\"../images/estate.protection.applet.cover.graphic.png\")\r\n      : dataInput.Presentations[0].appletImage.image;\r\n  const logoSize = Math.max(\r\n    500 * (MAX_LOGO_HEIGHT / PAGE_HEIGHT),\r\n    Math.min(\r\n      500 * (MAX_LOGO_HEIGHT / PAGE_HEIGHT),\r\n      (100 *\r\n        (MAX_LOGO_HEIGHT / PAGE_HEIGHT) *\r\n        dataInput.Presentations[0].adviserLogo.size) /\r\n        OUTPUT_WIDTH_PCT\r\n    )\r\n  );\r\n  const logoLeft =\r\n    dataInput.Presentations[0].adviserLogo.size / 2 +\r\n    dataInput.Presentations[0].adviserLogo.left -\r\n    logoSize / 2;\r\n  const logo = (allPages && \r\n    <AdjustibleImage\r\n      image={dataInput.Presentations[0].adviserLogo.image}\r\n      showDetails={false}\r\n      size={logoSize}\r\n      imageLeft={logoLeft}\r\n      ID={IMAGE_LOGO_OTHERPAGES}\r\n    />\r\n  );\r\n  const top=dataInput.Presentations[0].adviserLogo.top \r\n  /* const logoTop = dataInput.Presentations[0].adviserLogo.top && logo\r\n  const logoBottom = !dataInput.Presentations[0].adviserLogo.top && logo\r\n   */\r\n  const logo1stPage = dataInput.Presentations[0].adviserLogo.image !==\r\n    undefined && ( // from older files not null but undefined\r\n    <AdjustibleImage\r\n      image={dataInput.Presentations[0].adviserLogo.image}\r\n      showDetails={true}\r\n      size={dataInput.Presentations[0].adviserLogo.size}\r\n      imageLeft={dataInput.Presentations[0].adviserLogo.left}\r\n      allPages={dataInput.Presentations[0].adviserLogo.allPages}\r\n      top={dataInput.Presentations[0].adviserLogo.top}\r\n      imageRemove={imageRemove}\r\n      imageAdjust={imageAdjust}\r\n      buttonText={lang === \"en\" ? \"Add/Edit logo\" : \"Ajouter/modifier le logo\"}\r\n      ID={IMAGE_LOGO}\r\n      language={lang}\r\n    />\r\n  );\r\n  const applet = (\r\n    <div>\r\n    <AdjustibleImage\r\n      image={appletImage}\r\n      showDetails={false}\r\n      size={OUTPUT_WIDTH_PCT}\r\n      imageLeft={0}\r\n      imageAdjust={imageAdjust}\r\n      //newImagethis.props.loadImage\r\n      buttonText={lang === \"en\" ? \"Replace Applet image\" : \"Remplacer l’image de l’applet\"}\r\n      language={lang}\r\n      top={true}\r\n      ID={APPLET_INA ? IMAGE_APPLET_INA : IMAGE_APPLET_EP}\r\n      undoImage={APPLET_INA\r\n      ? require(\"../images/INA.png\")\r\n      : require(\"../images/estate.protection.applet.cover.graphic.png\")}\r\n    />\r\n    \r\n    </div>\r\n  );\r\n  return {\r\n    //appletImage: appletImage,\r\n    logoSize: logoSize,\r\n    logoLeft: logoLeft,\r\n    logoTop: top?logo:\"\",\r\n    logoBottom: !top?logo:\"\",\r\n    logo1stPage: logo1stPage,\r\n    applet:applet\r\n  };\r\n}\r\n","import { readMCCData } from \"../data/dataExchangeMCC\";\r\nimport {\r\n  PROVINCE,\r\n  ASSET_API_OUTPUT_Year,\r\n  ASSET_API_OUTPUT_Age,\r\n  ASSET_API_OUTPUT_FMV,\r\n  ASSET_API_OUTPUT_EOYBalance,\r\n  ASSET_API_OUTPUT_ACB,\r\n  ASSET_API_OUTPUT_UCC,\r\n  ASSET_API_OUTPUT_CCA,\r\n  ASSET_API_OUTPUT_CapitalGain,\r\n  ASSET_API_OUTPUT_TaxabaleGain,\r\n  ASSET_API_OUTPUT_Recapture,\r\n  ASSET_API_OUTPUT_TaxPayable,\r\n  ASSET_API_OUTPUT_CapGainsExemption,\r\n  ASSET_API_OUTPUT_Deposits,\r\n  ASSET_API_OUTPUT_Withdrawals,\r\n  ASSET_API_OUTPUT_RRIF,\r\n  ASSET_API_OUTPUT_TaxPayableonIncome,\r\n  ASSET_API_OUTPUT_DispositionAmount,\r\n  appSiteAPI,\r\n  ASSETS,\r\n  ASSET_TAX,\r\n} from \"../definitions/generalDefinitions\";\r\n\r\nexport function fetchTimerAPICheck() {\r\n  let fails = parseInt(localStorage.getItem(\"INAAPIFails\"));\r\n  fetch(appSiteAPI + \"/api/MCC_Carriers?id=1\")\r\n    .then((response) => {\r\n      //console.log(response);\r\n      response.json();\r\n    })\r\n    .then((data) => console.log(\"timer API check\"))\r\n    .catch((error) => {\r\n      if (!fails) fails = 0;\r\n      fails++;\r\n      localStorage.setItem(\"INAAPIFails\", parseInt(fails));\r\n      //console.log(error);\r\n    });\r\n\r\n  return fails;\r\n}\r\n\r\nexport function fetchAssetProjection(dataNA, assetID) {\r\n  return Promise.all([fetchAP(dataNA, assetID)]);\r\n}\r\n\r\nfunction fetchAP(dataNA, assetID) {\r\n  let url = appSiteAPI + \"/api/NA_AssetProjection/\";\r\n  let dataAsset = {};\r\n\r\n  if (assetID === undefined) assetID = 0;\r\n  dataAsset.lives = dataNA.lives;\r\n  dataAsset.asset = dataNA.assets[assetID - 1];\r\n  dataAsset.projectionSettings = dataNA.projectionSettings;\r\n  dataAsset.ratesPack = dataNA.ratesPack;\r\n  /* \r\n dataAsset.asset.incomeRate= 0.0;\r\n            dataAsset.asset.contributionAmt= 1000;\r\n            dataAsset.asset.contributionStartYr= 1;\r\n            dataAsset.asset.contributionDur= 20;  */\r\n\r\n   return fetch(url, {\r\n    method: \"POST\",\r\n    //\t\t\tredirect: 'follow',\r\n    //\t\t\tcredentials: 'same-origin',\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(dataAsset),\r\n  })\r\n    .then((response) => {\r\n      if (response.ok === false) {\r\n        throw Error(response.statusText);\r\n      }\r\n      return response;\r\n    })\r\n    .then((response) => response.json())\r\n    .then((data) => {\r\n      return data;\r\n    })\r\n    .catch((error) => {\r\n      console.log(\"handleAssetProjection failed: \" + error);\r\n      // this.setState({failedAPI: true});\r\n    });\r\n}\r\n\r\nexport function fetchMCCData(dataNA, insNeed) {\r\n  return Promise.all([fetchMCC(dataNA, insNeed)]);\r\n}\r\n\r\nfunction fetchMCC(dataNA, insNeed) {\r\n  // let dataMCC=readMCCData(dataNA, 48,insNeed);\r\n\r\n  let url = appSiteAPI + \"/api/MCC_OutputArrays/\";\r\n  // console.log(url, dataNA);\r\n\r\n  return fetch(url, {\r\n    method: \"POST\",\r\n    //\t\t\tredirect: 'follow',\r\n    //\t\t\tcredentials: 'same-origin',\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(dataNA),\r\n  })\r\n    .then((response) => {\r\n      if (response.ok === false) {\r\n        throw Error(response.statusText);\r\n      }\r\n      return response;\r\n    })\r\n    .then((response) => response.json())\r\n    .then((data) => {\r\n      // console.log(data);\r\n      return data;\r\n    })\r\n    .catch((error) => {\r\n      console.log(\"handleFetchMCCData failed: \" + error);\r\n      // this.setState({failedAPI: true});\r\n    });\r\n}\r\n\r\n\r\n//async function fetchTaxRate1(appSiteAPI, type, province) {\r\nexport async function getTaxRate(type, province) {\r\n  try {\r\n    let taxRate = await fetch(\r\n      appSiteAPI + \"/api/RATES?type=\" + type + \"&province=\" + province\r\n    );\r\n    let data = await taxRate.json();\r\n    // console.log(data)\r\n\r\n    return (Math.round(parseFloat(data) * 10000) / 10000).toFixed(4);\r\n  } catch (error) {\r\n    console.log(\"error, rates API failed\", error);\r\n  }\r\n}\r\n\r\nexport async function fetchGovBenefits(dataNA, provincekey) {\r\n  try {\r\n    if (provincekey !== undefined) {\r\n      dataNA.projectionSettings.province = provincekey;\r\n      dataNA.lives[1].isQC = provincekey === \"QC\" ? true : false;\r\n    }\r\n    let url = appSiteAPI + \"/api/NA_GovBenefits/\";\r\n    let govBenefits = await fetch(url, {\r\n      method: \"POST\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(dataNA),\r\n    });\r\n    let data = await govBenefits.json();\r\n    // console.log(data)\r\n\r\n    return {\r\n      cpp: data[0].Values[0],\r\n      cppDB: Math.round(data[1].Values[0]),\r\n      orphan: Math.round(data[2].Values[0]),\r\n    };\r\n  } catch (error) {\r\n    console.log(\"error, InsuranceNeedsData API failed\", error);\r\n  }\r\n}\r\n\r\nexport async function fetchInsuranceNeedsData(dataNA, provincekey) {\r\n  try {\r\n    if (provincekey !== undefined) {\r\n      dataNA.projectionSettings.province = provincekey;\r\n      dataNA.lives[1].isQC = provincekey === \"QC\" ? true : false;\r\n    }\r\n    let url = appSiteAPI + \"/api/NA_OutputAll/\";\r\n    let insuranceNeedsData = await fetch(url, {\r\n      method: \"POST\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(dataNA),\r\n    });\r\n    let data = await insuranceNeedsData.json();\r\n    console.log(dataNA, data)\r\n\r\n    return {\r\n      ages: data[1],\r\n      govCF: data[3],\r\n      personalCF: data[4],\r\n      needs: data[5],\r\n      shortfall: data[6],\r\n      cpp: data[7].Values[0],\r\n      cppDB: Math.round(data[8].Values[0]),\r\n      orphan: Math.round(data[9].Values[0]),\r\n      lifeExp: Math.round(data[12].Values[0]),\r\n      lifeExpClient: Math.round(data[13].Values[0]),\r\n      lifeExpJLTD: Math.round(data[14].Values[0]),\r\n      provinceMargTax: data[15].Values[0],\r\n      dataTaxLiability: data[16],\r\n      encryptedInput: data[17].Values[0],\r\n      probate: data[18],\r\n    };\r\n  } catch (error) {\r\n    console.log(\"error, InsuranceNeedsData API failed\", error);\r\n  }\r\n}\r\n\r\nexport async function handleFetchInsuranceNeeds(dataNA, dataP) {\r\n  try {\r\n    console.log(\"Data sent to POST:\");\r\n    // console.log(dataNA);\r\n\r\n    let url = appSiteAPI + \"/api/NA_InsuranceNeeds/\";\r\n    let insuranceNeeds = await fetch(url, {\r\n      method: \"POST\",\r\n      //\t\t\tredirect: 'follow',\r\n      //\t\t\tcredentials: 'same-origin',\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(dataNA),\r\n    });\r\n\r\n    let data = await insuranceNeeds.json();\r\n   \r\n    return data;\r\n  } catch (error) {\r\n    console.log(\"handleFetchInsuranceNeeds failed: \", error);\r\n  }\r\n}\r\n\r\n/* export async function fetchTaxRate(appSiteAPI, type, province) {\r\n  await fetch(\r\n    appSiteAPI +\r\n      \"/api/RATES?type=\" +\r\n      type +\r\n      \"&province=\" +\r\n      province\r\n  )\r\n    .then(response => response.json())\r\n    .then(data => {\r\n      console.log(data);\r\n      return data;\r\n    })\r\n    .catch(error => {\r\n      console.log(\"error, rates API failed\", error);\r\n    });\r\n}\r\n\r\n */\r\n\r\n// BEGIN TEMPALTE\r\n// THIS IS THE WAY TO MAKE SURE DATA HAS COME BACK FROM API\r\n// IN THE CALLING MODULE\r\n/* updateClientTaxLiability = async () => {\r\n    let dataNA = this.props.getAssetProjection();\r\n    let appSiteAPI = \"http://localhost:8082\";\r\n    let data = await fetchAssetProjection2(appSiteAPI, dataNA, this.props.id);\r\n    console.log(data);\r\n    if (data !== undefined) {\r\n      console.log(data[ASSET_API_OUTPUT_TaxPayable].numericValues[0]);\r\n\r\n      return data[ASSET_API_OUTPUT_TaxPayable].numericValues;\r\n    }\r\n  }; */\r\n\r\n// USE componentDidUpdate IF NEED TO UPDATE SOMETHING BASED ON THE LATEST VALUE OF ANOTHER AFTER setState or changed props\r\n// componentDidUpdate= async (prevProps, prevState) => {\r\n\r\n// FETCH\r\nexport async function fetchAssetProjection2(dataNA, assetID) {\r\n  try {\r\n    let url = appSiteAPI + \"/api/NA_AssetProjection/\";\r\n    let dataAsset = {};\r\n\r\n    if (assetID === undefined) assetID = 0;\r\n    dataAsset.lives = dataNA.lives;\r\n    dataAsset.asset = dataNA.assets[assetID - 1];\r\n    dataAsset.projectionSettings = dataNA.projectionSettings;\r\n    dataAsset.ratesPack = dataNA.ratesPack;\r\n    //   console.log(dataAsset);\r\n\r\n    let dataProj = await fetch(url, {\r\n      method: \"POST\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(dataAsset),\r\n    });\r\n\r\n    let data = await dataProj.json();\r\n    //      console.log(data);\r\n    return data;\r\n  } catch (error) {\r\n    console.log(\"error, Asset proj API failed\", error);\r\n  }\r\n}\r\n// END TEMPALTE\r\n\r\nasync function asyncAPICall(dataNA, assetID) {\r\n  let data = await fetchAssetProjection2(dataNA, assetID);\r\n  // console.log(data);\r\n  if (data !== undefined) {\r\n    //   console.log(data);\r\n\r\n    return data; //[ASSET_API_OUTPUT_TaxPayable].numericValues;\r\n  }\r\n}\r\n\r\n/* async function fetchAssetProjectionAPI2 (appSiteAPI,dataNA, assetID){\r\n  let data = await asyncAPICall(appSiteAPI, dataNA, assetID);\r\n\r\n  return data\r\n}\r\n */\r\nexport async function fetchAssetProjectionAPI(dataNA, assetID) {\r\n   let dataProjection = {\r\n    dataColTitles: [],\r\n    dataValues: [],\r\n  };\r\n  // console.log(appSiteAPI,dataNA, assetID);\r\n\r\n  //let data =await fetchAssetProjectionAPI2(appSiteAPI, dataNA, assetID);\r\n  let data = await asyncAPICall(dataNA, assetID);\r\n\r\n  return data;\r\n\r\n}\r\n\r\nexport async function fetchAssetFMVandTaxLiab(dataNA, assetID) {\r\n  let dataProjection = {\r\n    FMV: [],\r\n    TaxLiab: [],\r\n  };\r\n  let data = await asyncAPICall(dataNA, assetID);\r\n  if (data[0] !== undefined) {\r\n    dataProjection.FMV = data[ASSET_API_OUTPUT_FMV].numericValues;\r\n    dataProjection.TaxLiab = data[ASSET_API_OUTPUT_TaxPayable].numericValues;\r\n  }\r\n  //console.log(dataProjection);\r\n  return dataProjection;\r\n}\r\n\r\nexport async function fetchAssetAllGridColumns(dataNA, assetID) {\r\n  let data = await asyncAPICall(dataNA, assetID);\r\n  //console.log(data);\r\n  return data;\r\n}\r\n\r\nexport async function handleFetchInsuranceNeedsNew(dataNA, dataInput) {\r\n  try {\r\n    let url = appSiteAPI + \"/api/NA_InsuranceNeeds/\";\r\n\r\n    let data = await fetch(url, {\r\n      method: \"POST\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(dataNA),\r\n    });\r\n\r\n    let dataINA = await data.json();\r\n    // console.log(data)\r\n\r\n    let dataDetails = await fetchInsuranceNeedsData(\r\n      dataNA,\r\n      dataInput.Presentations[0].provincekey\r\n    );\r\n\r\n    if (dataINA !== undefined && dataDetails !== undefined) {\r\n       console.log(\"POST: NA_OutputAll success\");\r\n       return {\r\n        dataInsuranceNeeds: dataINA,\r\n        dataNAAges: dataDetails.ages,\r\n        dataCashFlowGov: dataDetails.govCF,\r\n        dataCashFlowPersonal: dataDetails.personalCF,\r\n        dataCashFlowNeeds: dataDetails.needs,\r\n        dataShortfall: dataDetails.shortfall,\r\n        cpp: dataDetails.cpp,\r\n        cppDB: dataDetails.cppDB,\r\n        orphan: dataDetails.orphan,\r\n        probate: dataDetails.probate,\r\n        lifeExp: dataDetails.lifeExp,\r\n        lifeExpClient: dataDetails.lifeExpClient,\r\n        lifeExpJLTD: dataDetails.lifeExpJLTD,\r\n        provinceMargTax: dataDetails.provinceMargTax,\r\n        dataTaxLiability: dataDetails.dataTaxLiability,\r\n        encryptedInput: dataDetails.encryptedInput,\r\n      };\r\n    }\r\n  } catch (error) {\r\n    console.log(\"error, rates API failed\", error);\r\n  }\r\n}\r\n\r\nexport async function handleFetchQueryStringSave(dataNA) {\r\n  //console.log(dataNA);\r\n\r\n  let url = appSiteAPI + \"/api/NA_QS/\";\r\n\r\n  fetch(url, {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(dataNA),\r\n  })\r\n    .then((response) => {\r\n      if (response.ok === false) {\r\n        throw Error(response.statusText);\r\n      }\r\n      return response;\r\n    })\r\n    .then((response) => response.json())\r\n    .then((data) => {\r\n      if (data !== undefined) {\r\n        //console.log(data);\r\n\r\n        return data;\r\n      }\r\n    })\r\n    .catch((error) => {\r\n      console.log(\"handleFetchQueryString failed: \" + error);\r\n      // this.setState({failedAPI: true});\r\n    });\r\n}\r\n\r\nexport async function handleFetchLoadFromQueryString(contentsFile) {\r\n\r\n  fetch(appSiteAPI + \"/api/NA_QS?QS=\" + contentsFile)\r\n    .then((response) => {\r\n      if (response.ok === false) {\r\n        throw Error(response.statusText);\r\n      }\r\n      return response;\r\n    })\r\n    .then((response) => response.json())\r\n    .then(async (data) => {\r\n    \r\n      return data;\r\n    })\r\n    .catch((error) => {\r\n      console.log(\"handleFetchLoadFromQueryString failed: \" + error);\r\n    });\r\n}\r\n\r\nexport async function handleFetchINADataFromQueryString(savedINA) {\r\n  try {\r\n    let url = appSiteAPI + \"/api/NA_QS?QS=\" + savedINA;\r\n    \r\n    try {\r\n      let savedData = await fetch(url);\r\n      let data = await savedData.json();\r\n      \r\n      return data;\r\n    } catch (error) {\r\n      console.log(\"error, handleFetchINADataFromQueryString failed\", error);\r\n    }\r\n  } catch (error) {\r\n    console.log(\"error, handleFetchINADataFromQueryString\", error);\r\n  }\r\n}\r\n\r\n\r\nexport async function handleFetchQueryString2(dataNA){\r\n\r\n  //const lang=this.state.dataInput.Presentations[0].language\r\n  /* console.log(\r\n    this.state.dataOutput.dataInsuranceNeeds[\r\n      this.state.dataInput.Presentations[0].periodOption\r\n    ].Value\r\n  ); */\r\n  /* const insuranceNeed = this.state.dataOutput.dataInsuranceNeeds[\r\n    this.state.dataInput.Presentations[0].periodOption\r\n  ].Value;\r\n  let dataNA = setUIDataToAPI(this.state.dataInput, insuranceNeed); */\r\n  //console.log(dataNA);\r\n\r\n  let url = appSiteAPI + \"/api/NA_QS/\";\r\n\r\n  //this.setState({ ...this.state });\r\n  await fetch(url, {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(dataNA),\r\n  })\r\n    .then((response) => {\r\n      if (response.ok === false) {\r\n        throw Error(response.statusText);\r\n      }\r\n      return response;\r\n    })\r\n    .then((response) => response.json())\r\n    .then((data) => {\r\n      if (data !== undefined) {\r\n        return data;\r\n\r\n        /* this.dataQS = data;\r\n        if (mode === MODE_SAVE) this.setState({ showMsg: true });\r\n        else if (mode === MODE_EMAIL){\r\n       let url=\"mailto: ?subject= \" +  (appletMode===\"INA\"?TITLES[lang].appletINA:TITLES[lang].appletEP) + \" &body= \" + (EMAIL[lang].body+ \".%0D%0A\"  + appSiteParent + \"?applet=EP\\&QS=\" + this.dataQS);\r\n       /* const s1 =\"?applet=EP\"\r\n       const s2=\"&QS=\" + this.dataQS\r\n        url=\"mailto: ?subject= Needs Analysis Quote &body=The following link takes you to the landing page of Toolkit Direct. Once there, click on Insurance Needs Analysis to open up the attached quote.%0D%0A\" +\r\n        + appSiteParent + [\"applet=EP\",\"QS=\" + this.dataQS].join('&')\r\n*/\r\n\r\n      //  const ft=appSiteParent + \"/?\" + [\"applet=\"+appletMode , \"QS=\"+this.dataQS].join('&')\r\n        /* url=\"mailto: ?subject= Needs Analysis Quote &body= The following link takes you to the landing page of Toolkit Direct. Once there, click on Insurance Needs Analysis to open up the attached quote.%0D%0A\" +\r\n        encodeURIComponent(ft) */\r\n       // url=\"mailto: ?subject= \" +  (appletMode===\"INA\"?TITLES[lang].appletINA:TITLES[lang].appletEP) + \" &body= \" + EMAIL[lang].body+ \".%0D%0A\"  + encodeURIComponent(ft)\r\n\r\n        //return url;\r\n       // console.log(url)\r\n        //  window.location.href = url; */\r\n        }\r\n      }\r\n    )\r\n    .catch((error) => {\r\n      console.log(\"handleFetchQueryString failed: \" + error);\r\n      // this.setState({failedAPI: true});\r\n      return \"\";\r\n    });\r\n};\r\n\r\nexport async function handleFetchQueryString(dataNA){\r\n\r\n  try {\r\n    const url = appSiteAPI + \"/api/NA_QS/\";\r\n  let fetchData = await fetch(url, {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(dataNA),\r\n  })\r\n  let data = await fetchData.json();\r\n  if (data !== undefined)\r\n        return data;\r\n } catch (error) {\r\n    console.log(\"handleFetchQueryString\", error);\r\n  }\r\n}\r\n\r\nexport async function handleFetchPDF(){\r\n\r\n  try {\r\n    const dataNA={\r\n      Html:\"<span>goh</span>\",\r\n      Css:\".canvas-containerWeb {Height: 20vh;}\"\r\n      \r\n      }\r\n\r\n      console.log( JSON.stringify(dataNA))\r\n    const url = appSiteAPI + \"/api/TKD_PDFGenerator/\";\r\n  let fetchData = await fetch(url, {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(dataNA),\r\n  })\r\n  let data = await fetchData.json();\r\n  if (data !== undefined){\r\n        console.log(data)\r\n        return data;}\r\n } catch (error) {\r\n    console.log(\"handleFetchQueryString\", error);\r\n  }\r\n}\r\n","// Imports\r\nimport React, { Component } from \"react\";\r\nimport jsPDF from \"jspdf\";\r\n\r\n// Constants\r\nconst PORTRAIT = \"portrait\";\r\nconst PT = \"pt\";\r\nconst LETTER = \"letter\";\r\n\r\nconst PNG = \"png\";\r\n\r\nexport const HELVETICA = \"Helvetica\";\r\nexport const TIMES = \"Times\";\r\n\r\nexport const NORMAL = \"normal\";\r\nexport const BOLD = \"bold\";\r\nexport const ITALIC = \"italic\";\r\n\r\nexport const HEADER_RECT_IN_X: number = 1;\r\nexport const HEADER_RECT_IN_Y: number = 0.48;\r\nexport const HEADER_RECT_IN_W: number = 6.4;\r\nexport const HEADER_RECT_IN_H: number = 0.45;\r\nexport const HEADER_RECT_R: number = 148;\r\nexport const HEADER_RECT_G: number = 148;\r\nexport const HEADER_RECT_B: number = 148;\r\n\r\nexport const HEADER_TEXT_PT_SIZE: number = 10;\r\nexport const HEADER_TEXT_IN_X: number = 1;\r\nexport const HEADER_TEXT_IN_Y: number = 0.75;\r\nexport const HEADER_TEXT_IN_W: number = 6;\r\nexport const HEADER_TEXT_R: number = 0xff;\r\nexport const HEADER_TEXT_G: number = 0xff;\r\nexport const HEADER_TEXT_B: number = 0xff;\r\n\r\nexport const FOOTER_TEXT_PT_SIZE: number = 8;\r\nexport const FOOTER_TEXT_IN_X: number = 1.5;\r\nexport const FOOTER_TEXT_IN_Y: number = 11 - 3 * 0.125;\r\nexport const FOOTER_TEXT_IN_Y_L: number = 8 - 3 * 0.125;\r\n\r\nexport const TEXT_R: number = 0x45;\r\nexport const TEXT_G: number = 0x55;\r\nexport const TEXT_B: number = 0x60;\r\n\r\nexport const MAX_LOGO_HEIGHT = 0.38;\r\n// Functions\r\nexport const InToPt = (in_) => {\r\n  return in_ * 25;\r\n};\r\n\r\nexport const PxToPt = (px) => {\r\n  return (px / 96) * 72;\r\n};\r\n\r\nconst fontName = HELVETICA;\r\nconst fontStyle = NORMAL;\r\nconst fontSize = 16;\r\n\r\nconst textRed = 0x00;\r\nconst textGreen = 0x00;\r\nconst textBlue = 0x00;\r\n\r\nconst fillRed = 0xff;\r\nconst fillGreen = 0xff;\r\nconst fillBlue = 0xff;\r\n\r\nconst showGrids = true;\r\n\r\nconst PAGE_WIDTH = 8.4;\r\nexport const PAGE_HEIGHT = 11;\r\nconst PAGE_USED_AREA_LEFT = 1.2;\r\nconst PAGE_USED_AREA_RIGHT = 7.24;\r\n\r\n// Classes\r\nexport class PDF extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {};\r\n    this.pdf = new jsPDF();\r\n  }\r\n\r\n  AddImage = (imageID, x, y, w, h) => {\r\n    if (this.pdf === null) return;\r\n    const imgData = document.getElementById(imageID);\r\n    const imgProps = this.pdf.getImageProperties(imgData);\r\n    const pdfHeight = (imgProps.height * w) / imgProps.width;\r\n    if (pdfHeight > h) {\r\n      w = (imgProps.width * h) / imgProps.height;\r\n    } else h = pdfHeight;\r\n    this.pdf.addImage(document.getElementById(imageID), PNG, x, y, w, h);\r\n  };\r\n\r\n  AddImageFitWidthOnly = (imageID, x, y, w, maxHeight) => {\r\n    if (this.pdf === null) return;\r\n    let imgData = document.getElementById(imageID);\r\n\r\n    if (imgData !== null) {\r\n      try {\r\n        const imgProps = this.pdf.getImageProperties(imgData);\r\n\r\n        //const pdfWidth = this.pdf.internal.pageSize.getWidth();\r\n        let pdfHeight = (imgProps.height * w) / imgProps.width;\r\n\r\n        if (pdfHeight > maxHeight) {\r\n          if (x + w > (3 * InToPt(PAGE_WIDTH)) / 4)\r\n            x += w - (w * maxHeight) / pdfHeight;\r\n          else if (x + (w * maxHeight) / pdfHeight / 2 > InToPt(PAGE_WIDTH) / 4)\r\n            x += w / 2 - (w * maxHeight) / pdfHeight / 2;\r\n\r\n          /*  else if(x+w/2>InToPt(PAGE_WIDTH/4))\r\n          x-=(w-w*maxHeight / pdfHeight)/2 */\r\n\r\n          w *= maxHeight / pdfHeight;\r\n          pdfHeight = maxHeight;\r\n        }\r\n        this.pdf.addImage(imgData, PNG, x, y, w, pdfHeight);\r\n        return true;\r\n      } catch (error) {\r\n        return false;\r\n      }\r\n    }\r\n  };\r\n\r\n  addCustomImage = (id, pg1TitleY, image, firstPage, top) => {\r\n     const left =\r\n      image === null || image === undefined\r\n        ? 0\r\n        : (image.left * HEADER_RECT_IN_W) / 100;\r\n    const result = this.AddImageFitWidthOnly(\r\n      id,\r\n      InToPt(pg1TitleY - 3 + left), //1.51),\r\n      InToPt(\r\n        firstPage\r\n          ? top\r\n            ? 1.06\r\n            : FOOTER_TEXT_IN_Y + 0.25\r\n          : top\r\n          ? 0.29\r\n          : FOOTER_TEXT_IN_Y + 0.25\r\n      ),\r\n      InToPt((6.04 * image.size) / 100),\r\n      InToPt(firstPage ? (top ? 2.76 : MAX_LOGO_HEIGHT) : MAX_LOGO_HEIGHT) // max height\r\n    );\r\n    return result;\r\n  };\r\n\r\n  AddChart = (containerID, x, y, w, h) => {\r\n    if (this.pdf === null) return;\r\n\r\n    const CANVAS_CLASS_NAME = \"chartjs-render-monitor\";\r\n\r\n    let containerElement = document.getElementById(containerID);\r\n    let canvasElement = null;\r\n\r\n    if (containerElement !== null)\r\n      if (\r\n        containerElement.getElementsByClassName(CANVAS_CLASS_NAME).length === 1\r\n      )\r\n        canvasElement = containerElement.getElementsByClassName(\r\n          CANVAS_CLASS_NAME\r\n        )[0];\r\n\r\n    let dataUrl = canvasElement.toDataURL();\r\n\r\n    if (dataUrl !== null) this.pdf.addImage(dataUrl, \"JPEG\", x, y, w, h);\r\n  };\r\n\r\n  AddCanvas = (canvasID, x, y, w, h) => {\r\n    if (this.pdf === null) return;\r\n\r\n    let canvasElement = null;\r\n    let dataUrl = null;\r\n\r\n    canvasElement = document.getElementById(canvasID);\r\n\r\n    if (canvasElement !== null) dataUrl = canvasElement.toDataURL();\r\n\r\n    if (dataUrl !== null) this.pdf.addImage(dataUrl, \"JPEG\", x, y, w, h);\r\n  };\r\n\r\n  AddPage = (mode) => {\r\n    if (this.pdf === null) return;\r\n\r\n    this.pdf.addPage(\"\", mode);\r\n  };\r\n\r\n  Create = () => {\r\n    if (this.pdf !== null) return;\r\n\r\n    this.pdf = new jsPDF({\r\n      orientation: PORTRAIT,\r\n      unit: PT,\r\n      format: LETTER,\r\n    });\r\n  };\r\n\r\n  ShowGrids = () => {\r\n    return this.showGrids;\r\n  };\r\n\r\n  ShowGrids = (showGrids) => {\r\n    this.showGrids = showGrids;\r\n  };\r\n\r\n  Grid = () => {\r\n    if (this.pdf === null) return;\r\n\r\n    if (this.showGrids === false) return;\r\n\r\n    const FONT_SIZE = 12;\r\n    const LARGE_FONT_SIZE = 16;\r\n\r\n    this.pdf.setFontSize(12);\r\n    this.pdf.setFont(HELVETICA, NORMAL);\r\n    this.pdf.setTextColor(0x00, 0x88, 0x00);\r\n\r\n    let x;\r\n    let y;\r\n\r\n    this.pdf.text(\"0\", 0, FONT_SIZE);\r\n\r\n    for (x = 1; x <= 8; x++) this.pdf.text(\"\" + x, InToPt(x), FONT_SIZE);\r\n\r\n    for (y = 1; y <= 11; y++) this.pdf.text(\"\" + y, 0, InToPt(y));\r\n\r\n    for (x = 0.25; x <= 8.5; x += 0.25)\r\n      for (y = 0.25; y <= 11; y += 0.25)\r\n        this.pdf.text(\".\", InToPt(x), InToPt(y));\r\n\r\n    this.pdf.setFont(HELVETICA, BOLD);\r\n    this.pdf.setFontSize(LARGE_FONT_SIZE);\r\n    for (x = 1; x <= 8; x += 1)\r\n      for (y = 1; y <= 11; y += 1) this.pdf.text(\".\", InToPt(x), InToPt(y));\r\n\r\n    if (this.fontSize !== null) this.pdf.setFontSize(this.fontSize);\r\n\r\n    if (\r\n      this.textRed !== null &&\r\n      this.textGreen !== null &&\r\n      this.textBlue !== null\r\n    )\r\n      this.pdf.setTextColor(this.textRed, this.textGreen, this.textBlue);\r\n\r\n    if (this.fontName !== null && this.fontStyle !== null)\r\n      this.pdf.setFont(this.fontName, this.fontStyle);\r\n  };\r\n\r\n  MultilineText = (text, x, y, w) => {\r\n    if (this.pdf === null) return;\r\n\r\n    let textLines = [];\r\n\r\n    textLines = this.pdf.splitTextToSize(text, w, {\r\n      fontName: this.fontName,\r\n      fontSize: this.fontSize,\r\n    });\r\n\r\n    this.pdf.text(textLines, x, y);\r\n  };\r\n\r\n  DrawLine = (x, y, w) => {\r\n    this.pdf.line(x, y, x + w, y);\r\n  };\r\n\r\n  Reset = () => {\r\n    this.pdf = null;\r\n  };\r\n\r\n  SetFont = (fontName, fontStyle) => {\r\n    if (this.pdf === null) return;\r\n\r\n    this.pdf.setFont(fontName, fontStyle);\r\n\r\n    this.fontName = fontName;\r\n    this.fontStyle = fontStyle;\r\n  };\r\n\r\n  SetFontSize = (fontSize) => {\r\n    if (this.pdf === null) return;\r\n\r\n    this.pdf.setFontSize(fontSize);\r\n\r\n    this.fontSize = fontSize;\r\n  };\r\n\r\n  Save = (fileName) => {\r\n    if (this.pdf === null) return;\r\n\r\n    this.pdf.save(fileName);\r\n  };\r\n\r\n  SetTextColor = (red, green, blue) => {\r\n    if (this.pdf === null) return;\r\n\r\n    this.pdf.setTextColor(red, green, blue);\r\n\r\n    this.textRed = red;\r\n    this.textGreen = green;\r\n    this.textBlue = blue;\r\n  };\r\n\r\n  SetFillColor = (red, green, blue) => {\r\n    if (this.pdf === null) return;\r\n\r\n    this.pdf.setFillColor(red, green, blue);\r\n\r\n    this.fillRed = red;\r\n    this.fillGreen = green;\r\n    this.fillBlue = blue;\r\n  };\r\n\r\n  showOnPage = () => {\r\n    //this.pdf.output('datauri');\r\n    //window.open(this.pdf.output('bloburl'))\r\n    //this.pdf.output('dataurlnewwindow');\r\n    //return this.pdf.output('datauri')\r\n    var blob = this.pdf.output(\"bloburl\");\r\n    return blob;\r\n  };\r\n  Rectangle = (x, y, w, h) => {\r\n    if (this.pdf === null) return;\r\n\r\n    this.pdf.roundedRect(x, y, w, h, 0, 0, \"F\");\r\n  };\r\n\r\n  textWidth = (text) => {\r\n    var arrayText = text.split(\" \");\r\n    let minWidth = 0;\r\n    //console.log(arrayText)\r\n    for (let i = 0; i < arrayText.length; i++) {\r\n      minWidth = Math.max(minWidth, this.pdf.getTextWidth(arrayText[i]));\r\n    }\r\n    return minWidth / 25; // pt to int\r\n  };\r\n  textWidthMultiLine = (text, width) => {\r\n    let arrayText = this.pdf.splitTextToSize(text, InToPt(width));\r\n    let minWidth = 0;\r\n    for (let i = 0; i < arrayText.length; i++) {\r\n      minWidth = Math.max(minWidth, this.pdf.getTextWidth(arrayText[i]));\r\n    }\r\n    return minWidth / 25; // pt to int\r\n  };\r\n\r\n  adjustTextWidth = (arrayText) => {\r\n    let minWidth = 0;\r\n    for (let i = 0; i < arrayText.length; i++) {\r\n      minWidth = Math.max(minWidth, this.pdf.getTextWidth(arrayText[i]));\r\n    }\r\n    return minWidth / 25; // pt to int\r\n  };\r\n\r\n  tableRow = (\r\n    fill,\r\n    textColor,\r\n    x,\r\n    y,\r\n    values,\r\n    height,\r\n    Widths,\r\n    box,\r\n    align,\r\n    title\r\n  ) => {\r\n    const lines2Fac = 1.75;\r\n    const lines3Fac = 2.7;\r\n    const cols = values.length;\r\n    let textY = y + height / 2 + 0.05;\r\n    // wrap if needed\r\n    let h = height;\r\n    for (i = 1; i <= cols; i++) {\r\n      if (\r\n        this.pdf.getTextWidth(values[i - 1]) > 2 * InToPt(Widths[i - 1]) &&\r\n        h < parseFloat(lines3Fac * height)\r\n      ) {\r\n        //console.log(values[i - 1],this.pdf.getTextWidth(values[i - 1]),.8*InToPt(Widths[i - 1]))\r\n        h = lines3Fac * height;\r\n        textY = y + height / 2 + 0.07;\r\n      } else if (\r\n        this.pdf.getTextWidth(values[i - 1]) > InToPt(Widths[i - 1]) &&\r\n        h < parseFloat(lines2Fac * height)\r\n      ) {\r\n        //console.log(values[i - 1],this.pdf.getTextWidth(values[i - 1]),.8*InToPt(Widths[i - 1]))\r\n        h = lines2Fac * height;\r\n        textY = y + height / 2 + 0.07;\r\n      }\r\n      let textOut;\r\n      if (h > height) {\r\n        textOut = this.pdf.splitTextToSize(\r\n          values[i - 1],\r\n          InToPt(Widths[i - 1] - 0.1)\r\n        );\r\n        // adjust width if necessary\r\n        //console.log(textOut,h,height)\r\n        if (title === true) {\r\n          if (textOut.length > 2 && h < parseFloat(lines3Fac * height))\r\n            h = lines3Fac * height;\r\n          else if (textOut.length > 1 && h < parseFloat(lines2Fac * height))\r\n            h = lines2Fac * height;\r\n          textY = y + height / 2 + 0.07;\r\n          // console.log(textOut,h,height)\r\n        }\r\n      }\r\n    }\r\n    this.SetTextColor(textColor[0], textColor[1], textColor[2]);\r\n    //this.SetFontSize(12);\r\n    var i;\r\n    let rightAlign;\r\n    let xi = x;\r\n    for (i = 1; i <= cols; i++) {\r\n      // wrap if needed\r\n      let textOut;\r\n      if (h > height) {\r\n        textOut = this.pdf.splitTextToSize(\r\n          values[i - 1],\r\n          InToPt(Widths[i - 1] - 0.1)\r\n        );\r\n      } else {\r\n        textOut = values[i - 1];\r\n        if (align !== undefined) {\r\n          if (align[i - 1] !== undefined) {\r\n            if (align[i - 1] === 2) rightAlign = true;\r\n          }\r\n        }\r\n      }\r\n      this.SetFillColor(fill[0], fill[1], fill[2]);\r\n      this.Rectangle(\r\n        InToPt(xi),\r\n        InToPt(y),\r\n        InToPt(Widths[i - 1] + 0.1),\r\n        InToPt(h)\r\n      );\r\n      if (box) {\r\n        this.pdf.setDrawColor(155, 155, 155);\r\n        this.pdf.rect(\r\n          InToPt(xi),\r\n          InToPt(y),\r\n          InToPt(Widths[i - 1] + 0.1),\r\n          InToPt(h)\r\n        );\r\n      }\r\n      if (rightAlign)\r\n        this.RightText(\r\n          values[i - 1],\r\n          InToPt(xi - 0.05),\r\n          InToPt(textY),\r\n          InToPt(Widths[i - 1])\r\n        );\r\n      else this.pdf.text(textOut, InToPt(xi + 0.1), InToPt(textY));\r\n\r\n      //  this.MultilineText(values[i - 1], InToPt(xi + .1), InToPt(y + .25), InToPt(3));\r\n      xi += Widths[i - 1];\r\n    }\r\n    //pdf.SetFillColor(fill[0], fill[1], fill[2]);\r\n    //pdf.Rectangle(InToPt(x), InToPt(y), InToPt(w), InToPt(height));\r\n    //pdf.Text(\"Family Profile\", InToPt(x[0] + .1), InToPt(y + .25));\r\n    //pdf.SetFillColor(115, 153, 198);\r\n    //pdf.Rectangle(InToPt(x[1]), InToPt(y), InToPt(w), InToPt(0.4));\r\n    //pdf.Text(\"Income\", InToPt(x[1] + .1), InToPt(y + .25));\r\n    //pdf.SetFillColor(115, 153, 198);\r\n    //pdf.Rectangle(InToPt(x[2]), InToPt(y), InToPt(w), InToPt(0.4));\r\n    //pdf.Text(\"Retirement Age\", InToPt(x[2] + .1), InToPt(y + .25));\r\n\r\n    return h - height; // excess height from here\r\n  };\r\n\r\n  Text = (text, x, y) => {\r\n    if (this.pdf === null) return;\r\n\r\n    this.pdf.text(text, x, y);\r\n  };\r\n\r\n  CenterText = (text, x, y, w) => {\r\n    if (this.pdf === null) return;\r\n\r\n    let tw = this.pdf.getTextWidth(text);\r\n\r\n    this.pdf.text(text, x + (w - tw) / 2, y);\r\n  };\r\n\r\n  RightText = (text, x, y, w) => {\r\n    if (this.pdf === null) return;\r\n\r\n    let tw = this.pdf.getTextWidth(text);\r\n\r\n    this.pdf.text(text, x + (w - tw) + 0.1, y);\r\n  };\r\n\r\n  Header = (textH, headerOffset) => {\r\n    if (headerOffset === undefined) headerOffset = 0;\r\n    this.SetFillColor(HEADER_RECT_R, HEADER_RECT_G, HEADER_RECT_B);\r\n\r\n    this.Rectangle(\r\n      InToPt(HEADER_RECT_IN_X),\r\n      InToPt(HEADER_RECT_IN_Y + headerOffset),\r\n      InToPt(HEADER_RECT_IN_W),\r\n      InToPt(HEADER_RECT_IN_H)\r\n    );\r\n\r\n    this.SetTextColor(HEADER_TEXT_R, HEADER_TEXT_G, HEADER_TEXT_B);\r\n    this.SetFont(HELVETICA, NORMAL);\r\n    this.SetFontSize(HEADER_TEXT_PT_SIZE);\r\n    this.CenterText(\r\n      textH,\r\n      InToPt(HEADER_TEXT_IN_X),\r\n      InToPt(HEADER_TEXT_IN_Y + headerOffset),\r\n      InToPt(HEADER_TEXT_IN_W)\r\n    );\r\n  };\r\n\r\n  addFooterAndHeader = (headerOffset, footerText, headerText) => {\r\n    this.Footer(footerText);\r\n    this.AddPage();\r\n    this.Header(headerText, headerOffset);\r\n  };\r\n\r\n  Footer = (textF) => {\r\n    this.SetTextColor(TEXT_R, TEXT_G, TEXT_B);\r\n    this.SetFont(TIMES, NORMAL);\r\n    this.SetFontSize(FOOTER_TEXT_PT_SIZE);\r\n    this.Text(textF, InToPt(FOOTER_TEXT_IN_X), InToPt(FOOTER_TEXT_IN_Y));\r\n  };\r\n\r\n  FooterLandscape = (textF) => {\r\n    this.SetTextColor(TEXT_R, TEXT_G, TEXT_B);\r\n    this.SetFont(TIMES, NORMAL);\r\n    this.SetFontSize(FOOTER_TEXT_PT_SIZE);\r\n    this.Text(textF, InToPt(FOOTER_TEXT_IN_X), InToPt(FOOTER_TEXT_IN_Y_L));\r\n  };\r\n\r\n  drawRect(paraLeft, paraY, paraWidth, height, color) {\r\n    this.SetFillColor(color[0], color[1], color[2]);\r\n    this.pdf.rect(\r\n      InToPt(paraLeft),\r\n      InToPt(paraY),\r\n      InToPt(paraWidth),\r\n      InToPt(height),\r\n      \"F\"\r\n    );\r\n  }\r\n\r\n  addFooter = (footer, title) => {\r\n    this.Footer(footer);\r\n    this.AddPage();\r\n    this.Header(title);\r\n  };\r\n\r\n  addHeaderNoFooter = (headerOffset, headerText) => {\r\n    this.AddPage();\r\n    this.Header(headerText, headerOffset);\r\n  };\r\n\r\n  tableRowSingle = (\r\n    fill,\r\n    textColor,\r\n    x,\r\n    y,\r\n    values2,\r\n    height,\r\n    Widths,\r\n    coloured\r\n  ) => {\r\n    const values = [values2];\r\n\r\n    if (coloured)\r\n      // has colour\r\n      this.tableRow(fill, textColor, x, y + 0.1, values, height - 0.1, [1.2]);\r\n    else this.tableRow(fill, textColor, x, y, values, height, Widths);\r\n  };\r\n\r\n}","import React, { Component } from \"react\";\r\n\r\nexport class MultiButtons extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const buttonsDefault = this.setupButtons(\r\n      this.props.selected,\r\n      this.props.noButtons,\r\n      this.props.buttonCaption\r\n    );\r\n    this.state = {\r\n      buttons: buttonsDefault,\r\n    };\r\n  }\r\n\r\n /*  getDerivedStateFromProps(){\r\n\r\n  } */\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    const buttonsDefault = this.setupButtons(\r\n      nextProps.selected,\r\n      nextProps.noButtons,\r\n      nextProps.buttonCaption\r\n    );\r\n    this.setState({ buttons: buttonsDefault });\r\n  }\r\n\r\n  setupButtons = (selected, noButtons, buttonCaption) => {\r\n    selected = selected === undefined ? 0 : selected - 1;\r\n    let buttonsDefault = [];\r\n    let i;\r\n    for (i = 0; i < noButtons; ++i) {\r\n      if (i === selected)\r\n        buttonsDefault.push({\r\n          id: selected,\r\n          name: buttonCaption[selected],\r\n          style:\r\n            noButtons === 1\r\n              ? \"roundedCornerCmd\"\r\n              : \"multiButtons multiButtonsAct\",\r\n        });\r\n      else\r\n        buttonsDefault.push({\r\n          id: i,\r\n          name: buttonCaption[i],\r\n          style: \"multiButtons\",\r\n        });\r\n    }\r\n    return buttonsDefault;\r\n  };\r\n\r\n  selectButton = (index) => {\r\n    let buttonsDefault = this.state.buttons;\r\n    let i;\r\n    for (i = 0; i < this.props.noButtons; ++i) {\r\n      buttonsDefault[i].style =\r\n        buttonsDefault[i].id === index\r\n          ? \"multiButtons multiButtonsAct\"\r\n          : \"multiButtons\";\r\n    }\r\n    this.setState({ buttons: buttonsDefault });\r\n    this.props.selectMultiButton(index + 1);\r\n  };\r\n\r\n  render() {\r\n    const stylePosition =\r\n      this.props.width !== undefined ? { width: this.props.width } : {};\r\n    const stylePositionLast =\r\n      this.props.width !== undefined\r\n        ? { width: this.props.width, marginRight: \"5px\" }\r\n        : { marginRight: \"5px\" };\r\n\r\n    return (\r\n      <div style={{ marginRight: \"10px\" }}>\r\n        {this.state.buttons.map((item) => (\r\n          <button\r\n            key={item.id}\r\n            className={item.style}\r\n            style={\r\n              item.id === this.props.noButtons - 1\r\n                ? stylePositionLast\r\n                : stylePosition\r\n            }\r\n            onClick={() => this.selectButton(item.id)}\r\n          >\r\n            {item.name}\r\n          </button>\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAAAhdEVYdENyZWF0aW9uIFRpbWUAMjAxOTowODozMSAwOTowOTo1NrtZ+qQAAAJgSURBVEhL7ZVLaBNRFIb/ySRNTCaPJjUqIii4sG4tahRxJ924qkUQoaCCO6HV2oi616JSqFtFdFGVboRu4kJQrOAiuvCxEgSpVfsgSTPJZJJ5eO7t1DyamSYt3fnN3MWcO3P+c+8954xgEiB6ztzGr4UleNwimGnZ2iYC4BIEaLqBsOTDh4kkuMDU60/ov/oQ8aiE2fkcOjxueDvcaE9FgGEakIsq+QkhXyxh7Eof82GaqekvppQYMgOJQfa4YY6du2cGDg+aT6bemxSmBS3PS5E/S6Uh+b0I+n0UUesroJ1BSdWgqBUsZApwucjAbqb48t1X9A0/QDTkR04uwTCMDZ1BKOCDrKgYT/bDZU1xBJqMBLcgGg4gFlk9omE/RFFAkBw0m4/Rd50UpChW3dYJOMFWNTOXxfPR89jRFeKH2QotCWi6jp+UXZ8nr+NEohvpiRHs270N2bxivWHPmgLlisbPZe7VLXTv2W5ZgbePhnD8wF4sZguWpTmOAhVN5zWRn77L97eRF2MXMXDyIDJLRcuyGlsBSi7oVJEfnyZ58el0Bo3M/Mni/rXT6D26H2pZs6z12AqwjGLVvKv3BnYeuYwfvzPWTJVDZ0fh6bmEN+lvy5XfBMctYiJdEQm+aBDumtRbgaVmnObsnDMcBWrhlbkOWhJgztnVCLOwFuEEbxUpahWnqFU0y5QV5jMyKpSytcRjbOtE66menKxgfKSmVRSUMs8Eu8H6S4zOo3boutn0XTaK5I/9F/79cAZuPsb32UV4bCJqB+Z4a6eEyTsXqgKbRctZtF7+C6zJJgsAfwFSJkjpY7Y95gAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAAAhdEVYdENyZWF0aW9uIFRpbWUAMjAxOTowODozMSAwOTowOTo1NrtZ+qQAAAMVSURBVEhLpZVLTBNRFIb/PqcPKoXyKoqvsFFZ4GPloqJBowkLHxDApSy6MCExxkeKG2OMcYHEsEDcqEsDNRHi0hWiGBegYmIMwZAYCaIgUNppO9N6zm2bTgEHCl9z03bm3vnvOf85dwxJ4sOXKdT7u+F22WEwGLBV6JFYCMl4fv8ShMDVzhd4OjiCAruE5UgMiUQCyfTkfDEZjXDYrYjGFDT4alICge4B9Pa/gWQ1o+3sUXjcTvE7LxUKXFFUzM6H8GRgRAg0nTyYFejpG6IUOfD91e30is1zqOUepqbn0XL6cFbgcXBY7JrSh3KPi9JlRSKPCIwUwbIcw6+5EFQ1QWuTaKyvzRUocEiIxRXEKdREPk9PwwViMZtgtZggU4pWCdgoApvNgqryItglS3rZxlFpU9OzC5j5s8hquQJscjQeR+htV3r65mlo78Hw2CQunjmiEaAIzCYDzp+oRYm7AC6nJPK4UTg9shzH4rKM4OsxhKncm05pqohT5CRjI9G4yH8+D8/ALWokt+0S9QF5ySkypm5licXVlNH0ne9IrVVFJ2egbkqRpE8oEkXvrRZxZPAutBPXhbbPkS+EIgh0D1K5LqUuZ1KUMlkhkx+IG1vB19aF8YlptK5sNPbgJ5WZ2WSE3ZYbATePNh4jmcr5zsAmc2rlqIKyYheVbGK1Bzxpe5lbTOCDz+WwieEgsZ0VxdjtLcYuGnsqPfCWbBPXM3N4vqfQiR3lbtFoGVaZzLAQ7y4zfv8NYTzYgc/9HRin8akvgJddfpFv7Txet5I1BdaCT0ct80vh9C991hUI0wEWE++I3IpSyBN+d8jUN3roCvDDLzf74G8+JozXUkEetLfWoZHOfD0RXQHO6+jXH3hEvWHRGMdUV5Xi4fVGvPs4CdMKcS26AjarBUOjE9h37k76ShY2uMh3TZQ1H9H/Q1eA4RKcWwyj9PhNUefMt6kZeOpuwEllKtEm9BAC3ER68LuBd1lRH8CzgfeouXAXleSBWWfnDBeCEDhQ7RV/9ODm4dfolc4gvKWF5I9+8IqqYv9eL/4BgXeca9Es3FcAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAhdEVYdENyZWF0aW9uIFRpbWUAMjAxOTowODozMSAwOTowOTo1NrtZ+qQAAAR6SURBVHhe7ZyLjVNBDEUXuqIhGoAytgEoCMoCTTazmrzkfWb8t++RVkRCSM++Z+zJE9ovP379+fcGylJCgPfv3+6f5vj5++/9U15SCbAa9CyZxAgtgFbgZ0QWIpwAXkLfI5oMIQTwHvoeEWRwK0DU0PfwKoM7AbIFv8WbCG4EyB78Fi8ifL3/aUq18ButZg91mwrgpQmWWNdvsgKqh76HxVpQF8Aq/JXmWjyrtgSqAmg1VLKJGWoYURFAumkWo7MjWZtGXeICRG/QDBK1StcoKkDEhnDAXbdkzWICRGqCFJw9kKpfRIAIhWvC1Q+JXrAL4LlYazz2hvVNIMI/xmNdbAIg/Gu0+qg1cvW6wSIAxwNxNCYSXiQgC8AVfkU8SEASAOHTsZZgWQCEz4elBGyXwFkQ/iNWEiwJQDGuFYrwX2PRm2kBOEY/kGElmykBqOHj5F+D0qfZjNTuAAh/Dq1+XRaAuvfBPKt9m8lKfAIgfBrSElwSgLr7gV9OBcDot0dyCoitAM/ht8Zsf7wj1c9DASI0ZoajsKOIMMtZTSITwOPpvxquZwkk+rorwGojIoffySbBUT1idwAQA1YBMpz+TrYpsMdLATwXD9bYy5RtAng8/Znh6jfuAIV4NQWeBMg2/ldPSpWJxjIBMP5t4Oh7iRUw26jMQm8n/IMAmW//V0ONFj71eckTIFLD2rPuPe/R32WmxArY0sMef6pSUoDqjKv+U4DM+z87lAlGmgCVR2cWsAKKAwGKAwGKAwGK0i/9t98StvININoFEDU+0+rDBChOCQFW33Gs/rtIYAIUBwIUBwIUBwIUBwIUBwIUBwIUBwIUBwIUBwIUZ1mACq9JI7Gax00A/NeuumAFFKUfeghQHAhQHJIAuAjGBxMgAZSD+CkAvgnUBBOgIONhJwuAe0BsMAGCQz2ADwLgHlAPlgmANWDDSt+3hxwroDhPAmAN1IJtAmAN6MIx/htYAcV5KcDqGsAU0IHr9DcwAYrDLgCmgCzc/d0VgPJtABL44ihLrIBASBysQwEwBfyw2s+zDEUnACTwz6kAlCnghdUavNQudfob4ncATAEa0v27/Zq4++dDqA+SYZJoQ+n51X5fngDUADEJ5tAIvyG+AkYgwTU0+zQlAMa4f2Yzmp4AHKsAk2AfrdHfUV0BI5DgEauDsSQA1yqABB9w9GE1k+UJAAl4sAy/QVoBkICGdfgN8h0AEqzhIfzG5TeBZ3AGyCWVR7j6xNUjtm8BnKFlnQYe62ITgJvWrCwicNfCedjYVsCIRHAR10KEPogI0JA6vRFEiHQAxARoSEnQ8ChCROlFBWhIStCxlEG6PunaxAVoaEgwIt00rXo0xFYRoKEtwZaVZlo+s9ZUUxOgYy2Cd7SC76i/B9AuMBIWvVGfACOYBh9YHgrTN4Gt8OoTwbp+F6+CK0rgRX7TFfCK7GvBm+zuBOhkE8HrlHMrwEhUGSKsthACdKKIECH4TigBRrzJECn0kbACbNEWImrgW9IIsAdVjCxB75FeAHDE29t/eyk/hYljv2IAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAiTSURBVHhe5ZtbbBRlFMc7MzszbaOJBqgtBaQtRUpbjHjB4BU16oMx+mSMiKjxFvXFJx5MKom3B6MxGEAevKBGY2I0xhCvKF5JvFR7AaG0YGm3hSLBC+3OzM6M/7Oc1m5nvtmZ3dm2qz+y2XO+0u58Z87t++ZbqazIjCxofMXUy5dCrFNs+wzZsTW85FM/zcaVZNdWFMuRlb9dSUqqltlV1b/vVv5xUSiKAY6cveyddEJdjQlUiSYbHqnM1PQ/Ifw0v69rzamx+IjVAIMNK/aqltGISSs8FDuGXjGsWcbOef37b+OhgojFAJj4b7oxuojVacHUyk+oaXNHoYYoyACDDa0/6sbYSlZnBEOvPFzb25G38fOKz7a3u7ThxcvHZnryBDxv4cjCpc5QXfPHPBSJyB6QrG/5SjNTl7IaGWR4Gy8LWd7Gp7v4B1xFcl1Fdhy88s8f8IZ+eMPZrIYikgEGl6zo0VOjS1gNBaqBYSfUfiTH9qrf9t3Cw4GMLGzcjhhvgUEa8Xun8XAoLFX/u+Zg9+ms5iS0ARDvSbh8DauB4O66pl7Rq6XGvpk30LOeh/MGn/19Im2dq9hplYcCgdGtLXfsKd+4UXJ4SEgoA+AChjH5s1gVkpm4Vt5e29t5Pg/FCsU5vOJKxbZyGsJWEunN6/fquYyQ0wCY/AAmX8uqENTnQUx8AatFhTwC13QBq0JsRbU2rw/2hMAqQI1NrsnTXUfcfTRdkyfwWRduevY93VK1MR7yhTzl/u3Nf7Hqi9ADhuqbP1NN4ypWfaEEh1irDBNrxQI3qZ9KIau+wDuHYLT5rGbhawCq8w8/cpPBqi/UiaE3P5PVvBhe3PQ+PCiBBHds3uGedTwcGRihC0ZoZtUXXO8XfmsJXwMg2ZxE+alk1UOhk8cF/4oLPofVDEha1pOPbal6/s41J3goEsgLnQjXFlZ9kMo23b1fmeqtHgPgD+3GH1rFqgdy++pDe8tZjQz+/iD+vq87Ek+0bZ/z3D2rj7MaCfQph9CnCBshhMJRhEJWNfMkQXR5wslTwttyx+ZIjclk0D5/EDR5YsPjdx1hMTK1BzoWUyPEqgd8dhUt1VnNkGUA6vTQkrLmJZ3QPt24cU2a1cg4sryaRSFodhJHF53zJquR2bruhcDQRBt+LYsZsgwQ1OaS+6DFzPrlqCi2Hcp7EGZ5l1S6QchRX7PqgVrryV4wYQDE5o8s+rJtbUeoNjgIhJDNYiDwwsD6ngsk6MvgrSlWPSDhTpT3CQOgFLWy6AGrrH1x1Hp8cJLFQHCXBlgsAPcTFjwgz53B4ikDjCxa+kbQQgNLzGUsFsS2tb80sigEoXZk7sCBu1jNG1SqG9EpCr0AHv8zvWcMYKrlwsxPF8RiwZAXPb3hDWEoUQZHmapmtXAk6VuWPOCGZ25qxgDomYWtpJo2d7EYC888tGqY+nhKqrRiow0Silfo7VHW8WGo6eu+mko3q1kg5HV6zzRCxxYs8f1PdHFV/fsSrJYkcPUR1P+5rGYBj/tEntoYTAYxdJTFkkV2HGF1ww1ukuF+y1n3gF/uYrFkQVhdz6IH2UnPlZINrcc0Y2wOj03l5Tgy8mQQbi+x6Evcn0fAyy3KNKxOgM7UkWh7O5E2PYsbJI8yLFGF+wX5gFZ7P7rNnKUQRoj1c5P1zX9qpuGbYGXZtX3rPwwQ/yaH+2/jNa1IssmSB1lyXMFF+ZePUgQTCdoTdP3dLVYnnHGCDHDq2cz/FXFM/rfMIpyn7KIUsDyV/0wQYCJiAziS7LvDI7mO2DtKDdfRWPIgox08yXIWtDWWq2kpFRTbrmAxC2qEKAR+Z90DFguBG5ilgl8XSGA1ashK2upm3QMsJNwlKhWG6pbvYNGDIyd+l6sP7b2ZdQ9q2sz5RHi2gxAXPqmWHbs7k+joeXpmZAqybSuFbFHPBjQzNY9FD7RSzBjAVtTDmREfLFW7gsWSY6i++VMkc99yTk+46D1jAM1K7aZ3P/SQp0JmJa4rfBCDBNhD7xkD0Fk7OkxAsh90ToDFkmF4cdO7qmX6lj9CM1KZnaKJZiedSLSz6EE3Rpe1tYlWjbMTLOevY9GDqel/jZ9dmphUbW/nKtEOKnHv6ysGWZz1JOtbdgXdfdlxv2Qxu0c2tYo9LHpALqgeqmv+kNVZC3mqZhqXs+qBtuCrD+25gdVsA9T2drQEeUEibV7b1vb5rN4mv++1lhPBS1k36yZ64trSyr9j0QOVlAdefTDw0NFMgmTdK9r7Iwy94tjUxs9jgPm9nZdgDTDKqgfaQEWM5XWC45kNWy8y9Mpfg16PP/rKhfzfI4HJ/4JkXc+qL9vWdng6W98mIeQhqePz+7pE2+nTCk9+Bau+0JkBemzO6gTCTY9kQ+s3mjEWeKKDzultXdd9WhyPzvMl17kgwtArhlHlfBu6wF0fWPYALNvAqi+UNJFZPw56AlMMKBnfv/2hP4JOsxH0iLzm4B5hSQw0ADHY0DpEJZBVIYjfAVSRwAOLcYFrCjzJNg49fc51XjinAYigJ6yTIW9ArBXzsPSHkuusSaQt4RbXOJi8jclrucIzlAEIGCHUiXGCvv5m6uUHtNTYtzEdl9+t2OmVmHio4/Jh7vw4oQ1AICf0ISfUsRoK6rxwQQex4mwP+wUn/q5hE+52U1Bd9wMxP4rEfHrYxBzJAETY+BNBdwceghc9rZnoOnEdroxGS6H9O9EaPhfI9pGP7Of1QW0v/lD5wFO3Hx8/ZjLTZCqRqu2s6eu+hodCk5cBxoE3/ARvOI/VGSGfuz4ZTyscBXzwyk139yh0ETw0bdCJdUdW3ipk8kRBHjAZWobe+/q5+1UrVSc7xXuqBGMf0Szjs1n11dmp0BchkOwuRpc2Jw5j0A4OLrUdvXzsG7RFMcBkxksaxEW5vz4vuTAcfX3+JCpFEgbsLO7X58vK/gEVbbN64CGAoQAAAABJRU5ErkJggg==\"","var map = {\n\t\"./ar\": 351,\n\t\"./ar.js\": 351,\n\t\"./az\": 352,\n\t\"./az.js\": 352,\n\t\"./be\": 353,\n\t\"./be.js\": 353,\n\t\"./bg\": 354,\n\t\"./bg.js\": 354,\n\t\"./bs\": 355,\n\t\"./bs.js\": 355,\n\t\"./ca\": 356,\n\t\"./ca.js\": 356,\n\t\"./cs\": 357,\n\t\"./cs.js\": 357,\n\t\"./cy\": 358,\n\t\"./cy.js\": 358,\n\t\"./da\": 359,\n\t\"./da.js\": 359,\n\t\"./de\": 360,\n\t\"./de.js\": 360,\n\t\"./el\": 361,\n\t\"./el.js\": 361,\n\t\"./en\": 226,\n\t\"./en.js\": 226,\n\t\"./es\": 362,\n\t\"./es.js\": 362,\n\t\"./et\": 363,\n\t\"./et.js\": 363,\n\t\"./eu\": 364,\n\t\"./eu.js\": 364,\n\t\"./fa\": 365,\n\t\"./fa.js\": 365,\n\t\"./fi\": 366,\n\t\"./fi.js\": 366,\n\t\"./fr\": 367,\n\t\"./fr.js\": 367,\n\t\"./hr\": 368,\n\t\"./hr.js\": 368,\n\t\"./hu\": 369,\n\t\"./hu.js\": 369,\n\t\"./id\": 370,\n\t\"./id.js\": 370,\n\t\"./it\": 371,\n\t\"./it.js\": 371,\n\t\"./ja\": 372,\n\t\"./ja.js\": 372,\n\t\"./ka\": 373,\n\t\"./ka.js\": 373,\n\t\"./ko\": 374,\n\t\"./ko.js\": 374,\n\t\"./lt\": 375,\n\t\"./lt.js\": 375,\n\t\"./lv\": 376,\n\t\"./lv.js\": 376,\n\t\"./mk\": 377,\n\t\"./mk.js\": 377,\n\t\"./mn\": 378,\n\t\"./mn.js\": 378,\n\t\"./ms\": 379,\n\t\"./ms.js\": 379,\n\t\"./nb_NO\": 380,\n\t\"./nb_NO.js\": 380,\n\t\"./nl\": 381,\n\t\"./nl.js\": 381,\n\t\"./pl\": 382,\n\t\"./pl.js\": 382,\n\t\"./pt\": 383,\n\t\"./pt.js\": 383,\n\t\"./pt_BR\": 384,\n\t\"./pt_BR.js\": 384,\n\t\"./ro\": 385,\n\t\"./ro.js\": 385,\n\t\"./ru\": 386,\n\t\"./ru.js\": 386,\n\t\"./se\": 387,\n\t\"./se.js\": 387,\n\t\"./sl\": 388,\n\t\"./sl.js\": 388,\n\t\"./sq\": 389,\n\t\"./sq.js\": 389,\n\t\"./sr\": 390,\n\t\"./sr.js\": 390,\n\t\"./sv\": 391,\n\t\"./sv.js\": 391,\n\t\"./tr\": 392,\n\t\"./tr.js\": 392,\n\t\"./ua\": 393,\n\t\"./ua.js\": 393,\n\t\"./uk\": 394,\n\t\"./uk.js\": 394,\n\t\"./vi\": 395,\n\t\"./vi.js\": 395,\n\t\"./zh\": 396,\n\t\"./zh.js\": 396,\n\t\"./zh_TW\": 397,\n\t\"./zh_TW.js\": 397\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 562;","export const ASSET_TAX_TYPE_PRINCIPAL_RES = 0;\r\nexport const ASSET_TAX_TYPE_REAL_ESTATE = 1;\r\nexport const ASSET_TAX_TYPE_STOCKS = 2;\r\nexport const ASSET_TAX_TYPE_SMALL_BUS = 3;\r\nexport const ASSET_TAX_TYPE_RRSP = 4;\r\nexport const ASSET_TAX_TYPE_INTEREST = 5;\r\nexport const ASSET_TAX_TYPE_OTHER = 6;\r\n\r\n\r\nexport const ASSET_TAX_TYPE_COUNT = 7;\r\n\r\n\r\nexport const OUTPUTTEXTEP = {\r\n  en: {\r\n    pg1T: \"Protecting Your Estate\",\r\n    pg1P1: \"Designed for: \",\r\n    pg1P2: \"Designed by: \",\r\n    pg1P3: \"Date: \",\r\n    pg1P4: \"Province: \",\r\n\r\n    pg2T: \"Introduction\",\r\n    pg2Paragraphs: [\r\n      \"Throughout your lifetime, your success has allowed you to accumulate assets beyond those that you will need to provide for an enjoyable retirement. The ownership of some of these assets will result in a tax liability upon your death (or the death of your spouse). These assets can be divided into three groups: \",\r\n      \"First, assets of a capital nature. The current Canadian tax law provides for the deemed disposition of your capital assets on your death at fair market value, and any increase in value over the cost (the tax term is Adjusted Cost Base) is taxed as a capital gain. The most common assets in this category are:\",\r\n      \"Shares in private or public companies\",\r\n      \"Second home or vacation properties\",\r\n      \"Second, assets that generally produce income on your death. The most common assets in this category are:\",\r\n      \"Registered assets, RRSPs or RRIFs\",\r\n      \"Assets that are taxed as income such as interest bearing assets, GICs or money market funds\",\r\n      \"Third, are assets that are either fully tax paid or do not attract tax on death. The most common of these are:\",\r\n      \"Non-taxable assets such as cash and TFSAs\",\r\n      \"Principal residence\",\r\n      \"The tax free proceeds from a life insurance policy\",\r\n    ],\r\n\r\n    pg3T: \"Your Financial Situation\",\r\n    pg3P1:\r\n      \"Your current balance sheet and estimated net worth are summarized below. In order to calculate your future tax liability it is necessary to project the growth in the value of your assets going forward. (See Appendix for details.)\",\r\n    pg3TabT: \"Assets\",\r\n    pg3TabRTot: \"Total Assets Available\",\r\n    pg3Tab2T: \"Liabilities\",\r\n    pg3Tab2RTot: \"Total\",\r\n    pg3Tab2NW: \"Net Worth\",\r\n\r\n    pg3T2: \"Your Growing Tax Liability\",\r\n    pg3P2:\r\n      \"As the value of your assets grow so does the tax liability that your estate will incur upon death. To project this liability, we have assumed the following asset growth rates:\",\r\n    pg3P3: \"\",\r\n    pg3Tab3R1C1: \"Assets\",\r\n    pg3Tab3R1C2: \"Growth Rate\",\r\n    pg3Tab3R1C3: \"Tax Liability Today\",\r\n    pg3Tab3R1C4: \"Tax Liability Life Exp. + 3*\",\r\n\r\n    pg3Tab3R2C1: \"Real Estate (Non-Principal)\",\r\n    pg3Tab3R2C2: \"\",\r\n    pg3Tab3R2C3: \"\",\r\n    pg3Tab3R2C4: \"\",\r\n\r\n    pg3Tab3R3C1: \"Stocks & Bonds\",\r\n    pg3Tab3R3C2: \"\",\r\n    pg3Tab3R3C3: \"\",\r\n    pg3Tab3R3C4: \"\",\r\n\r\n    pg3Tab3R4C1: \"Small Business Shares\",\r\n    pg3Tab3R4C2: \"\",\r\n    pg3Tab3R4C3: \"\",\r\n    pg3Tab3R4C4: \"\",\r\n\r\n    pg3Tab3R5C1: \"RRSP/RRIF\",\r\n    pg3Tab3R5C2: \"\",\r\n    pg3Tab3R5C3: \"\",\r\n    pg3Tab3R5C4: \"\",\r\n\r\n    pg3Tab3R6C1: \"Interest Bearing\",\r\n    pg3Tab3R6C2: \"\",\r\n    pg3Tab3R6C3: \"\",\r\n    pg3Tab3R6C4: \"\",\r\n\r\n    pg3Tab3R7C1: \"Other\",\r\n    pg3Tab3R7C2: \"\",\r\n    pg3Tab3R7C3: \"\",\r\n    pg3Tab3R7C4: \"\",\r\n\r\n    pg3Tab3R8C1: \"Total\",\r\n    pg3Tab3R8C2: \"\",\r\n    pg3Tab3R8C3: \"\",\r\n    pg3Tab3R8C4: \"\",\r\n    pg3P4:\" * Tax liability is estimated based on today's  personal income tax rate and current income tax legislation\",\r\n    pg3P5:\" ** Please see assumptions in Appendix for withdrawals of amounts from RRIF as they factor into this calculation\",\r\n    pg4T: \"Future Value of Your Estate\",\r\n    pg4P1:\r\n      \"Using the growth rate and income tax assumptions, this chart shows the total value of your estate in the future and the corresponding tax liability on death that would need to be funded for each year going forward.\",\r\n    pg4GT:\"Estate Value & Tax Liability\",\r\n    pg4P2: \" * Life Expectancy is slightly shaded in the bar graph (year: \",\r\n    pg4P3:\r\n      \"Your future tax liability grows from $X1 today to $X2 at life expectancy plus 3 years, and will need to be funded upon death.\",\r\n\r\n    pg5T: \"Estate Protection Alternatives\",\r\n    pg5Paragraphs: [\r\n      \"Many people want to keep their estate intact to pass on to their heirs.  But what is the best method to fund this tax liability upon your death so that your assets can be passed to your heirs unencumbered?\",\r\n      \"Typically, there are four options to provide the liquidity to pay taxes that come due upon death:\",\r\n      \"Liquidate assets \",\r\n      \"Borrow funds, which usually means using assets as security\",\r\n      \"Create a cash reserve by systematically saving during your lifetime\",\r\n      \"Transfer the risk by purchasing life insurance in advance\",\r\n      \"Some of the advantages and disadvantages to each of these methods are:\",\r\n      \"Liquidate assets -  Business cycles and the state of the markets are critical in the value of an asset. You have no way of knowing what this will be at your death. Further, the sale of assets by an estate often signals to a purchaser that there is a degree of urgency, which does not help the seller realize full value.\",\r\n      \"Borrow Funds -  In estate situations, the main objective is usually to distribute the assets to the beneficiaries.  Borrowing against the assets, which will likely require pledging them as security, makes this more difficult. Further, it is not possible to predict the market conditions at the time of death. Financial institutions go through cycles, as do loan rates. \",\r\n      \"Create a cash reserve - In the context of an estate situation a cash reserve is not a practical option as you do not know when death will occur and whether there will be ample cash flow at that time.\",\r\n      \"Transfer the risk by purchasing life insurance -  Life insurance, purchased in advance, removes many of the risks associated with funding the tax liability upon death. The death benefit provides liquidity at exactly the time it is needed, and in Canada it is paid tax-free to the named beneficiary.\",\r\n    ],\r\n    pg5Plast:\r\n      \"The most practical, and cost effective, method to transfer the risk of funding a tax liability is to purchase life insurance.\",\r\n\r\n    pg6T: \"Using Life Insurance to Preserve Your Estate\",\r\n    pg6Paragraphs1: [\r\n      \"A permanent life insurance policy can be a good way to provide for this future tax liability. Life insurance removes many of the financial risks associated with a premature death. It provides the financial assistance when it is needed, upon the death of the life insured. \",\r\n      \"The type of life insurance that is most appropriate for this need is permanent insurance, because coverage stays in place until death, no matter the age. There are three types of permanent cash value life insurance coverage:\",\r\n      \"Universal Life\",\r\n      \"Whole Life\",\r\n      \"Hybrid Life\",\r\n      \"Cash values are made up of accumulated capital within the policy's tax deferred accumulation fund including any guaranteed cash surrender values that are offered to the policyowner by the insurance company upon cancellation of the contract. Depending on the type of policy the total cash value, including the guaranteed portion, may be accessed by the policyowner through a number of different methods.\",\r\n      \"One of the challenges facing the purchase of insurance is that the tax liability changes over time. Insurance policies can be custom designed to meet your unique situation by matching the death benefit as closely as possible to the need for cash to pay tax liabilities at the time of death. \",\r\n    ],\r\n    pg6Paragraphs2: [\r\n      \"This is a hybrid product that is customized to address your growing estate liability insurance needs. A hybrid life insurance policy offers a unique combination of the best elements of traditional whole life and universal life insurance:\",\r\n      \"Cost of insurance is guaranteed not to increase\",\r\n      \"Death benefit is a combination of the base insurance amount, additional paid up coverage and the value of investments\",\r\n      \"Policy has contractually guaranteed cash values\",\r\n      \"Additional funds, above the cost of insurance, may be deposited\",\r\n      \"The funds are invested at the discretion of the policy owner (not the insurance company) and include these options: fixed income, stock market index accounts, mutual fund mirrored accounts and smoothed return investment account\",\r\n    ],\r\n\r\n    pg7T: \"Summary\",\r\n    pg7P1:\r\n      \"The best method of covering a future tax liability upon death is to purchase life insurance, which effectively transfers the risk away from the estate. Not only does it give you peace of mind, it also outperforms other alternative methods in terms of financial cost.\",\r\n    pg8T: \"Appendix\",\r\n    pg8P1:\r\n      \"Detailed tax liability projections for all asset categories\",\r\n    pg8P2: \"Detailed tax liability projections by individual asset category:\",\r\n    pg8O1: \"Hide\",\r\n    pg8O2: \"Show\",\r\n\r\n    pgFooter: \"See Some Important Notes at the end of this presentation.\",\r\n\r\n    pg9T: \"Some Important Notes\",\r\n    pg9P1:\r\n      \"This presentation is for general information purposes. The information contained in this presentation must not be taken or relied upon by the reader as legal, accounting, taxation or actuarial advice. For these matters readers should seek independent professional advice. Please refer to insurance company illustrations, policy contracts and information folders regarding any insurance matters referred to in this presentation.\",\r\n    pg9P2:\r\n      \"Any tax calculations are provided as examples only and are based on the personal income tax rates and income tax legislation in effect on the date of the presentation. It is assumed that the taxpayer is a Canadian resident and not a US citizen.\",\r\n\r\n      graphsT1:\"Estate Liability breakdown Today and at Life Expectancy plus 3 years:\",\r\n      graphsT2:\"Estate Liability Today\",\r\n      graphsT3:\"Estate Liability at Life Expectancy +3\",\r\n      graphsL1:\"Liabilities\",\r\n      graphsL2:\"Taxes: RRSP/RRIF\",\r\n      graphsL3:\"Taxes: Capital Gains\",\r\n      graphsL4:\"Taxes: As Income\",\r\n      graphsL5:\"Taxes: Dividend\",\r\n      graphs2L1:\"Future Insurance Needs\",\r\n      graphs2L2:\"Life Expectancy\",\r\n      graphsTaxes:\"Taxes: \",\r\n      graphsLeakageT1: \"Estate Leakage Today and at Life Expectancy plus 3 years:\",\r\n      graphsLeakageT2: \"Estate Leakage Today\",\r\n      graphsLeakageT3: \"Estate Leakage at Life Expectancy +3\",\r\n      graphsLeakage1: \"Net Estate Value\",\r\n      graphsLeakage2: \"Tax Liability\",\r\n      graphsLeakage3: \"Other Liabilities\",\r\n      \r\n  },\r\n  fr:  {\r\n        pg1T: \"Protection de votre patrimoine\",\r\n    pg1P1: \"Préparé pour : \",\r\n    pg1P2: \"Préparé par : \",\r\n    pg1P3: \"Date : \",\r\n    pg1P4: \"Province : \",\r\n\r\n    pg2T: \"Introduction\",\r\n    pg2Paragraphs: [\r\n      \"Tout au long de votre vie, votre réussite vous a permis d'accumuler plus d'actifs que ce dont vous aurez besoin pour vous assurer une retraite agréable. La propriété de certains de ces actifs entraînera une obligation fiscale à votre décès (ou au décès de votre conjoint). Ces actifs se divisent en trois catégories : \",\r\n      \"Premièrement, les immobilisations. La Loi de l'impôt sur le revenu du Canada prévoit actuellement une disposition présumée de vos biens en immobilisation à la juste valeur marchande à votre décès, et toute augmentation de la valeur par rapport au coût d'acquisition (le terme fiscal est « prix de base rajusté ») sera imposée comme un gain en capital. Les actifs les plus courants dans cette catégorie sont les suivants :\",\r\n      \"Actions de sociétés publiques ou fermées\",\r\n      \"Résidences secondaires ou de vacances\",\r\n      \"Deuxièmement, les actifs qui produisent généralement des revenus à votre décès. Les actifs les plus courants dans cette catégorie sont les suivants :\",\r\n      \"Actifs enregistrés, REER ou FERR\",\r\n      \"Actifs imposés en tant que revenus, tels que les actifs porteurs d'intérêts, les CPG ou les fonds du marché monétaire\",\r\n      \"Troisièmement, les actifs totalement libérés d'impôt ou qui ne sont pas imposables au décès. Les actifs les plus courants dans cette catégorie sont les suivants :\",\r\n      \"Actifs non imposables, tels que les liquidités et les CELI\",\r\n      \"Résidence principale\",\r\n      \"Capital décès libre d'impôt au titre d'une police d'assurance vie\",\r\n    ],\r\n\r\n    pg3T: \"Votre situation financière\",\r\n    pg3P1:\r\n      \"Votre bilan actuel et la valeur nette approximative de vos actifs sont résumés ci-dessous. Afin de calculer l'impôt que vous aurez à payer, il est nécessaire de prévoir la croissance future de vos actifs. (Voir les projections détaillées en annexe.)\",\r\n    pg3TabT: \"Actifs\",\r\n    pg3TabRTot: \"Total des actifs disponibles\",\r\n    pg3Tab2T: \"Passifs\",\r\n    pg3Tab2RTot: \"Total\",\r\n    pg3Tab2NW: \"Valeur nette\",\r\n\r\n    pg3T2: \"Augmentation de votre obligation fiscale\",\r\n    pg3P2:\r\n      \"L'obligation fiscale à laquelle sera assujetti votre patrimoine à votre décès augmente proportionnellement à la valeur de vos biens. Pour prévoir cette obligation, nous avons utilisé les hypothèses de taux de croissance suivantes :\",\r\n    pg3P3: \"\",\r\n    pg3Tab3R1C1: \"Actifs\",\r\n    pg3Tab3R1C2: \"Taux de croissance\",\r\n    pg3Tab3R1C3: \"Obligation fiscale actuelle\",\r\n    pg3Tab3R1C4: \"Obligation fiscale à l'espérance de vie, plus 3 ans*\",\r\n\r\n    pg3Tab3R2C1: \"Biens immobiliers (non principaux)\",\r\n    pg3Tab3R2C2: \"\",\r\n    pg3Tab3R2C3: \"\",\r\n    pg3Tab3R2C4: \"\",\r\n\r\n    pg3Tab3R3C1: \"Actions et obligations\",\r\n    pg3Tab3R3C2: \"\",\r\n    pg3Tab3R3C3: \"\",\r\n    pg3Tab3R3C4: \"\",\r\n\r\n    pg3Tab3R4C1: \"Actions de petites entreprises\",\r\n    pg3Tab3R4C2: \"\",\r\n    pg3Tab3R4C3: \"\",\r\n    pg3Tab3R4C4: \"\",\r\n\r\n    pg3Tab3R5C1: \"REER/FERR**\",\r\n    pg3Tab3R5C2: \"\",\r\n    pg3Tab3R5C3: \"\",\r\n    pg3Tab3R5C4: \"\",\r\n\r\n    pg3Tab3R6C1: \"Actifs porteurs d'intérêts\",\r\n    pg3Tab3R6C2: \"\",\r\n    pg3Tab3R6C3: \"\",\r\n    pg3Tab3R6C4: \"\",\r\n\r\n    pg3Tab3R7C1: \"Autres\",\r\n    pg3Tab3R7C2: \"\",\r\n    pg3Tab3R7C3: \"\",\r\n    pg3Tab3R7C4: \"\",\r\n\r\n    \r\n    pg3Tab3R8C1: \"Total\",\r\n    pg3Tab3R8C2: \"\",\r\n    pg3Tab3R8C3: \"\",\r\n    pg3Tab3R8C4: \"\",\r\n\r\n    pg3P4:\r\n      \" * L'obligation fiscale est projetée en utilisant votre taux d'imposition personnel actuel et la loi de l'impôt sur le revenu courante\",\r\n    pg3P5:\r\n      \" ** Veuillez consulter en annexe les hypothèses relatives aux retraits de montants du FERR, puisqu'ils sont pris en compte dans ce calcul\",\r\n\r\n    pg4T: \"Valeur future de votre patrimoine\",\r\n    pg4P1:\r\n          \"Selon les taux de croissance et d'imposition présumés, le tableau ci-dessous présente la valeur totale future de votre patrimoine et l'obligation fiscale au décès qu'il faudrait financer pour chaque année à venir.\",\r\n    pg4GT:\"Valeur du patrimoine et obligation fiscale\",\r\n    pg4P2: \" * L'espérance de vie est légèrement ombragée dans le graphique à barres (année: \",\r\n    pg4P3:\r\n      \"Votre obligation fiscale future passe de X1 $ aujourd'hui à X2 $ à l'espérance de vie plus 3 ans, et devra être financée au décès.\",\r\n\r\n    pg5T: \"Options de protection du patrimoine\",\r\n    pg5Paragraphs: [\r\n      \"Beaucoup de gens veulent garder leur patrimoine intact pour le transmettre à leurs héritiers.  Mais quel est le meilleur moyen de financer l'obligation fiscale qui en découle à au décès afin que leurs actifs puissent être transmis sans encombre à leurs héritiers?\",\r\n      \"En règle générale, il y a quatre moyens d'obtenir les liquidités nécessaires pour payer les impôts exigibles au décès :\",\r\n      \"Liquider les actifs\",\r\n      \"Emprunter de l'argent, ce qui signifie généralement utiliser des actifs en garantie\",\r\n      \"Créer une réserve de liquidités en épargnant de façon systématique tout au long de sa vie\",\r\n      \"Transférer le risque en souscrivant une assurance vie à l'avance\",\r\n      \"Voici certains des avantages et inconvénients de chacune de ces options :\",\r\n      \"Liquider les actifs - Les cycles économiques et l'état des marchés sont déterminants pour la valeur d'un actif. Vous n'avez aucun moyen de savoir ce qu'elle sera à votre décès. En outre, la vente d'actifs par les ayants droit indique souvent à un acheteur qu'il y a une certaine urgence, ce qui n'aide pas le vendeur à en obtenir la pleine valeur.\",\r\n      \"Emprunter de l'argent -  En planification successorale, l'objectif principal est généralement de distribuer les actifs aux bénéficiaires. Emprunter de l'argent en cédant des actifs en garantie rend la tâche plus difficile. En outre, il n'est pas possible de prévoir les conditions du marché au moment du décès. Les institutions financières connaissent des cycles, tout comme les taux d'intérêt sur les prêts. \",\r\n\"Créer une réserve de liquidités - en planification successorale, une réserve de liquidités n'est pas une option pratique, puisque vous ne savez pas quand le décès surviendra et si, à ce moment-là, il y aura assez de liquidités.\",\r\n      \"Transférer le risque en souscrivant une assurance vie -  la souscription à l'avance d'une assurance vie permet d'éliminer une grande partie des risques associés au financement de l'obligation fiscale au décès. Le capital décès procure des liquidités au moment même où on en a besoin. Au Canada, il est versé au bénéficiaire en franchise d'impôt.\",\r\n    ],\r\n    pg5Plast:\r\n      \"La souscription d'une assurance vie est la méthode la plus pratique et la plus rentable pour transférer le risque associé au financement de l'obligation fiscale.\",\r\n\r\n    pg6T: \"Utiliser l'assurance vie pour protéger votre patrimoine\",\r\n    pg6Paragraphs1: [\r\n      \"Une police d'assurance vie permanente peut être un bon moyen de sécuriser cette future obligation fiscale. L'assurance vie élimine une grande partie des risques financiers associés à un décès prématuré. Elle fournit l'aide financière nécessaire moment du décès de l'assuré. \",\r\n      \"À cette fin, l'assurance permanente est le type d'assurance vie le plus approprié, car la protection reste en vigueur jusqu'au décès, peu importe l'âge. Il y a trois formules d'assurance vie permanente avec valeur de rachat :\",\r\n      \"Vie universelle\",\r\n      \"Vie entière\",\r\n      \"Vie hybride\",\r\n      \"Les valeurs de rachat comprennent le capital accumulé dans le fonds d'accumulation à impôt différé de la police, y compris toute valeur de rachat garantie offerte au titulaire de police par la compagnie d'assurance à la résiliation du contrat. Selon le type de police, le titulaire peut avoir accès à la valeur de rachat totale, y compris la partie garantie, grâce à un certain nombre de méthodes différentes.\",\r\n      \"L'une des difficultés que pose l'achat d'une assurance est que l'obligation fiscale change au fil du temps. Les polices d'assurance peuvent être conçues sur mesure pour répondre à votre situation particulière. Pour ce faire, on s'assure que le capital décès correspond le plus possible aux liquidités nécessaires pour payer l'obligation fiscale au moment du décès. \",\r\n    ],\r\n    pg6Paragraphs2: [\r\n      \"Il s'agit d'un produit hybride conçu sur mesure pour répondre à vos besoins d'assurance visant à prévoir les obligations croissantes liées à votre patrimoine. Une police d'assurance vie hybride combine de façon unique les meilleurs éléments de l'assurance vie entière traditionnelle et de l'assurance vie universelle :\",\r\n      \"Le coût de l'assurance n'augmentera pas\",\r\n      \"Le capital décès est constitué du montant d'assurance de base, d'une assurance supplémentaire libérée et de la valeur des placements\",\r\n      \"La police comprend des valeurs de rachat garanties par le contrat\",\r\n      \"Des fonds supplémentaires, en sus du coût de l'assurance, peuvent être déposés\",\r\n      \"Les fonds sont investis à la discrétion du titulaire de la police (et non de la compagnie d'assurance) et comprennent les options suivantes : revenu fixe, comptes indiciels d'actions, fonds distincts qui calquent des fonds communs et compte de placement à rendement stabilité\",\r\n    ],\r\n\r\n    pg7T: \"Résumé\",\r\n    pg7P1:\r\n      \"La souscription d'une assurance vie constitue le meilleur moyen de prévoir l'obligation fiscale au décès. Elle dégage efficacement les ayants droit du risque financier. Non seulement elle vous apporte la tranquillité d'esprit, mais elle surpasse également les autres méthodes alternatives en terme de coût financier..\",\r\n    pg8T: \"Annexe\",\r\n    pg8P1:\r\n      \"Projections détaillées de l'obligation fiscale pour toutes les catégories d'actifs combinées\",\r\n    pg8P2: \"Projections détaillées de l'obligation fiscale par catégorie d'actifs :\",\r\n    pg8O1: \"Cacher\",\r\n    pg8O2: \"Montrer\",\r\n\r\n\r\n    pgFooter: \"Voir les notes importantes à la fin du document.\",\r\n\r\n    pg9T: \"Notes importantes\",\r\n    pg9P1:\r\n      \"Le présent exposé ne comporte que des renseignements généraux. L'information qui s'y trouve ne doit pas être considérée par le lecteur comme des conseils juridiques, comptables, fiscaux ou actuariels. Pour ces questions, le lecteur devrait consulter un professionnel indépendant. Veuillez vous reporter aux exposés de vente, au libellé des contrats et à la documentation des compagnies d'assurance pour obtenir des précisions sur les questions d'assurance mentionnées dans le présent document.\",\r\n    pg9P2:\r\n      \"Tous les calculs fiscaux sont fournis à titre d'exemple seulement et sont basés sur les taux d'impôt et la Loi de l'impôt sur le revenu en vigueur en date de la présentation. Nous présumons qu'il s'agit d'un résident canadien et non pas d'un citoyen américain.\",\r\n      graphsT1:\"Obligation fiscale aujourd'hui et à l'espérance de vie, plus 3 ans\",\r\n      graphsT2:\"Obligation fiscale aujourd'hui\",\r\n      graphsT3:\"Obligation fiscale à l'espérance de vie, plus 3 ans\",\r\n      graphsL1:\"Passifs\",\r\n      graphsL2:\"Impôt: REER/FERR\",\r\n      graphsL3:\"Impôt: Gain en capital\",\r\n      graphsL4:\"Impôt: sur le revenu\",\r\n      graphsL5:\"Impôt: sur dividende\",\r\n      graphs2L1:\"Besoins d'assurance futurs \",\r\n      graphs2L2:\"à l'espérance de vie\",\r\n      graphsTaxes:\"Impôt: \",\r\n      graphsLeakageT1: \"Réduction du patrimoine aujourd'hui et à l'espérance de vie, plus 3 ans\",\r\n      graphsLeakageT2: \"Réduction du patrimoine aujourd'hui\",\r\n      graphsLeakageT3: \"Réduction du patrimoine à l'espérance de vie, plus 3 ans\",\r\n      graphsLeakage1: \"Valeur successorale nette\",\r\n      graphsLeakage2: \"Obligation fiscale\",\r\n      graphsLeakage3: \"Autres éléments de passif\",\r\n  },\r\n\r\n};\r\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAWCAIAAAANYFjGAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAFVSURBVEhLY/z//z/D4ANMUHqQASqH1o8fPyAMDg4OCIM8MEhDaxBHIjzkaQTIiNDRSCQFoEdi7d63yy5+efHlzz+iMygTI4MED0uUPk+zszBUCBWQEYkIZ917/9t1/rNnn/9AJMgAUrwsuxOllARZoXwYoChtUegmIABqBxoC5VAGoM4Cxh2pbprqL/mpQfN/uzaQBLIhgkBDgEZB2JQAqLOA6QnCIBIA3ZFlIcTLDtIOJIFsuMtINQorgDoLmMYhDCJBrKEAlAUDcBFSjcIKoM4iPt9BACSckAFchFSjsAKoWcBMThL4/PMflAUDcBFSjcIKoM4CFjwQBpFg8fkPUBYMwEVINQorgDoLWBhCGESC7I3Pp514BwkhIAlkA0UgUqQahRUgilPlvocUlltAACxR7xbJQzkwQFFxCiyggYZCOWQBSCkP5VAGBnGdCGUOHsDAAAC1IZnmPH6jBwAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAZCAIAAAD8NuoTAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAKjSURBVEhLzZbPahNBHMc3+6dJdpvQkEojvSRYKCJolYrgVYSiFyV49jXEB5AefQMfQIp4EArqA5SKYsFKD6VFqaS0mnbTbDY7s1m/uzPEdt3sziY55HOYzP42M/nkN38znudJk4fMPyeMCdUa2yCyfs73lslk+mVaxqCFHhi9AFQQhI0cgAqDfVmQUbWYDaV0c6+79tnZ2O8dnPgdzs9k7lTl+q2p27WsqqrMjzURYSQtCLmuSwh5/qb9+kuPRy/y5Kb84rGhaZqiKJDj0SQGan3aJzsNenzWc6N/LsiTSylx3m7Rn6cKj0Zxtya9empks37aBHMWoXViee+27ENzgE4AWsGKku6Hbef7kcqjg6nfkFbrBZgJjmZEVhOdAvxUHfwWcgJrX6WN3Q6m4P9ZiCSshbFLdApS5WEAtxuJ9v/AgsAsZG15aDBhLcwnXovFX34u/WXGTakQmz8kZAvt+HMsYS3McV6LA3/Y1zojKbQaLZlpDZMtUQIvlPxRANhgNxFxAmGt2ekUoobm8poAlUKKiRiWWKwIrSwcLrKsVHSbPwqwdJlgRxXct8Jay1VtrpiYMHQOK3Wh7PCAAA+uuuKnUITBw+u5RDP/HFbU+RnlSuGUh2JZWWgvV6eYFg/FMuThExw8xLEty/yzvmsc2tP8RRRLc9bLR7RcLhuGfziKmA15VKMVlnq32221Ws1mc/Wj8n6vyN9d5H7NfHbPLZVKhUKKw2f4GwQaYh+CWbvdNk0TF5v1He3bsX5kaXh7SSfXZq2VRYKLTbFYRJ5GParF6V9sbBvDaXU6HVgigldYdPDI5/O6rudyubFdbARho4m0QQ4l6GshNwBCKAXHrs+oWgA9MOAHUEEw2EJ8UGGwLwsyBi0G6+d8b0wlrZCPJP0F2oqhNNA6qd4AAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAZCAIAAAD8NuoTAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAACFSURBVEhL7dcxDoAgDAVQ6sSN4P6nYhKRdtA42B8YOvy3WBvT/AjRIL33FM9h12AYCxE01mvLt9as2i3nbJUPFxHBWAjGQvzHKqXUWu1m8nQWud7W93fu6azg5xTBWAjGQjAWImisDQeyMUGd0yhGU0SOaRRKH3badk7UOc9pGgUNdEvpAg55Of2PHimJAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAZCAIAAAD8NuoTAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAACBSURBVEhL7dRBCoAgEAVQ9XoRXaFFm04XUl0vmxyRcNUHQYP/FpNFDH/xy4YQTH9cunaGsRA/ibX5Y15Wmem+kTKW3888GypjTeOQZ0P8byFYeQQrj2DlEaw8gpVHMBai01gVKi8b1BXJQR5aa10kB6Uvf1TtS9Q9720aBQ30MOYGI+VMGsZJ3L0AAAAASUVORK5CYII=\"","\r\n// Imports\r\nimport React from 'react';\r\nimport packageJson from '../package.json';\r\n\r\nglobal.appVersion = packageJson.version;\r\n\r\nconst APP_VERSION = global.appVersion;\r\n\r\n// version from response - first param, local version second param\r\nconst semverGreaterThan = (versionA, versionB) => {\r\n  const versionsA = versionA.split(/\\./g);\r\n\r\n  const versionsB = versionB.split(/\\./g);\r\n  while (versionsA.length || versionsB.length) {\r\n    const a = Number(versionsA.shift());\r\n\r\n    const b = Number(versionsB.shift());\r\n    // eslint-disable-next-line no-continue\r\n    if (a === b) continue;\r\n    // eslint-disable-next-line no-restricted-globals\r\n    return a > b || isNaN(b);\r\n  }\r\n  return false;\r\n};\r\n\r\nclass CacheBuster extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      loading: true,\r\n      isLatestVersion: false,\r\n      refreshCacheAndReload: () => {\r\n        console.log('Clearing cache and hard reloading...')\r\n        if (caches) {\r\n          // Service worker cache should be cleared with caches.delete()\r\n          caches.keys().then(function(names) {\r\n            for (let name of names) caches.delete(name);\r\n          });\r\n        }\r\n\r\n        // delete browser cache and hard reload\r\n        window.location.reload(true);\r\n      }\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    fetch('/meta.json')\r\n      .then((response) => response.json())\r\n      .then((meta) => {\r\n        const latestVersion = meta.version;\r\n        const currentVersion = global.appVersion;\r\n\r\n        const shouldForceRefresh = semverGreaterThan(latestVersion, currentVersion);\r\n        if (shouldForceRefresh) {\r\n          console.log(`We have a new version - ${latestVersion}. Should force refresh`);\r\n          this.setState({ loading: false, isLatestVersion: false });\r\n        } else {\r\n          console.log(`You already have the latest version - ${latestVersion}. No cache refresh needed.`);\r\n          this.setState({ loading: false, isLatestVersion: true });\r\n        }\r\n      });\r\n  }\r\n  render() {\r\n    const { loading, isLatestVersion, refreshCacheAndReload } = this.state;\r\n    return this.props.children({ loading, isLatestVersion, refreshCacheAndReload });\r\n  }\r\n}\r\n\r\nexport {CacheBuster, APP_VERSION};","import React, { Component } from \"react\";\r\nimport { appletMode } from \"../../package.json\";\r\nimport { INCOMENEEDS } from \"./generalDefinitions\";\r\n\r\nconst DEFAULT_MARGIN_LEFT = -67;\r\nconst DEFAULT_MARGIN_TOP = 0;\r\nconst DEFAULT_WIDTH = 140;\r\nconst DEFAULT_HEIGHT = 100;\r\n\r\nconst POPUP_BORDER_INFO = \"#7399C6\";\r\nconst POPUP_BORDER_ALERT = \"red\";\r\nconst POPUP_BORDER_MESSAGE = \"#7399C6\";\r\n\r\nexport const SHOW_AUTOMATIC_RED = 0;\r\nexport const SHOW_STANDARD = 1;\r\nexport const SHOW_STANDARD_RED = 2;\r\nexport const SHOW_NONE = 3;\r\nexport const SHOW_STANDARD_LIGHT_BLUE = 4;\r\nexport const SHOW_STANDARD_WHITE = 5;\r\n\r\nconst infoHighlightStyle = { color: \"#6f2852\", fontWeight: \"bold\" };\r\n\r\nconst MESSAGES = {\r\n  en: {\r\n    infoYr0: appletMode===\"INA\"?\"Year 0 stands for 'at death': today\":\"Year 0 stands for 'today'\",\r\n    infoRetDur: \"Duration to retirement is … years\",\r\n    infoAvgTax: (\r\n      <div>\r\n        {\" \"}\r\n        {/* style={{color:\"#54585a\"}}> */}\r\n        Survivor's <span style={infoHighlightStyle}>Avg. Tax Rate</span> is\r\n        applied to annual income, interest and annual asset disposition. <br />\r\n        <span style={infoHighlightStyle}>Marginal Tax Rate </span>(under\r\n        Presentation Details) is applied to planned or potential full\r\n        disposition of an asset\r\n      </div>\r\n    ),\r\n    infoIconRetire: (\r\n      <div>\r\n        {\" \"}\r\n        {/* style={{color:\"#54585a\"}}> */}\r\n        <span style={infoHighlightStyle}>Income Source</span> and <span style={infoHighlightStyle}>Income Needs</span> durations are usually based on this value.\r\n        <br />They will be adjusted automatically, <br />please recheck.\r\n      </div>\r\n    ),\r\n    infoAdjust:\r\n      \"Adjust Income Needs and Income Source durations to end age (99) or Life Expectancy of\",\r\n    clientOnly: \"Needs Analysis is always done for family member 'Client'\",\r\n    infoElig: (\r\n      <div>\r\n        {\" \"}\r\n        Survivor's and orphan's benefits are based on Client's eligibility\r\n        <br />\r\n        Set <span style={infoHighlightStyle}>Province</span> under \"Presentation\r\n        Details\" for CPP or QPP\r\n      </div>\r\n    ),\r\n    infoSpouseElig:\r\n      \"100% means the Survivor is assumed to be fully eligible for government benefits by the age of 65\",\r\n    ever: \" ... for ever\",\r\n    taxMsg: \"Tax methods need to be discussed with your financial advisor\",\r\n    fetch: \"Failed to connect to the server\",\r\n    ie: \"Please use Edge or Chrome browsers for graphs and full functionality\",\r\n    govB: (\r\n      <div>\r\n        Do not delete government benefits. <br />\r\n        To adjust them, change{\" \"}\r\n        <span style={infoHighlightStyle}>Client's \"CPP/QPP Eligibility\"</span>\r\n      </div>\r\n    ),\r\n    assetTax:\r\n      \"Please use after tax asset values until Tax Method becomes available\",\r\n    internet:\r\n      \"You need to login to the PPI site again.\" +\r\n      \"You can save your data before clicking on this message or use \" +\r\n      \"'Recover' in INA to reload your input data.\" +\r\n      \"Please click to refresh.\",\r\n\r\n    RRIF:\r\n      \"RRIF is reflected in survivor's income based on their own or rolled-over RRSP. Maximum withdrawal age is 71\",\r\n    rollOver:\r\n      \"Client's assets can usually be rolled-over to their spouse to avoid liquidation\",\r\n    insurance:\r\n      \"Client's insurance is available to the survivor while Spouse or Joint (JLTD) insurance is not.\",\r\n    rental:\r\n      \"This is rental income for Real Estate and Dividend income for Stocks. Both as a % of Current Value. Alternatively they can be entered under 'Sources of Income ...'. Such income (after tax) impacts survivors' cash flows and therefore 'Insurance Needs' of the Client\",\r\n    note:\r\n      \"Pull down on lower bottom to enlarge. A few small paragraphs can be saved (up to 5000 characters)\",\r\n    save: (\r\n      <div>\r\n        To save files to your desired location:\r\n        <br />\r\n        <span style={infoHighlightStyle}>Microsoft Edge:</span>\r\n        <li>Go to menu ..., Downloads, Download Settings</li>\r\n        <span style={infoHighlightStyle}>Google Chrome:</span>\r\n        <li>Go to menu ..., Settings, Advanced, Downloads</li>\r\n        <span style={infoHighlightStyle}>then in either browser:</span>\r\n        <li>Turn on \"Ask where to save each file before downloading\"</li>\r\n      </div>\r\n    ),\r\n    gridCapFund:\r\n      \"Capital Fund consists of Additional Capital required (Insurance Needs) less Additional Income Required, accruing at after-tax 'Investment Rate'\",\r\n    salary:\r\n      \"Gross income, government benefits and other annual income types are assumed to grow at inflation rate\",\r\n    salaryPercent:\r\n      \"The After-tax value is shown in today's dollars. It will grow at inflation rate\",\r\n    afterTax: \"All amounts are after tax\",\r\n    taxExempt: (\r\n      <div>\r\n        Small Business{\" \"}\r\n        <span style={infoHighlightStyle}>Capital Gains Tax Exemption</span> is\r\n        assumed to grow at inflation rate\r\n      </div>\r\n    ),\r\n    infoINA:\r\n      \"This amount is based on the present value of shortfalls, discounted at the after tax investment rate. It is adjusted if necessary, to make sure early shortfalls are provided for\",\r\n      infoBOYEOY: \"BOY stands for Beginning of Year and EOY for End of Year\",\r\n      infoPDF:\r\n      \"INA Graphs and Spreadsheet can be exported to PDF under 'Graphs' tab\",  \r\n      probate:\r\n      appletMode===\"INA\"?\"Probate is based on Client's assets at time of death and does not include Joint assets or assets that belong to, or can be rolled-over to Spouse\":\r\n      \"Probate is based on Client's assets at time of death. If a Spouse is added, hence JLTD coverage, it will also include Joint assets or assets that belong to, or can be rolled-over to Spouse\",  \r\n      TFSA:\r\n      \"RRSP and TFSA contributions and withdrawals are subject to limitations set by CRA\",  \r\n      DepositWithd:\r\n      \"Contributions and Withdrawals affect asset's fair market value and also cash flows. Survivors' cash flows from all sources directly impact 'Insurance Needs' of the Client\",  \r\n      inflationGrowth:\r\n      \"Gross income, government benefits and other annual income types are assumed to grow at your selected inflation rate\",  \r\n      PYE_JLTD:\r\n      \"When a Spouse is added, the Estate liability needs to be insured with a JLTD coverage. As such, it includes tax and other liabilities of both at the last death\",  \r\n      needGrowth:\r\n      \"Survivors' Income Needs are assumed to grow at your selected inflation rate\",\r\n      exportINA:\r\n      \"Data can be exported to Insurance Needs Analysis, where insurance needs to support survivor(s) life style can be calculated\",\r\n      taxLiab:\r\n      \"Asset projections take Tax Liability into account. You don't need to enter a separate liability related to taxes such as capital gains\",\r\n  },\r\n  fr: {\r\n    infoYr0:\r\n    appletMode===\"INA\"?\"L'année 0 est l'année du décès: aujourd'hui\":\"L'année 0 représente aujourd'hui\",\r\n    infoRetDur: \"Le nombre d'années avant la retraite est de .... ans\",\r\n    infoAvgTax: (\r\n      <div>\r\n        Le taux d'imposition marginal (sous la rubrique « Précisions sur la\r\n        présentation ») s'applique à la disposition planifiée ou potentielle\r\n        complète d'un actif.{\" \"}\r\n        <span style={infoHighlightStyle}>Le taux d'imposition moyen</span> du\r\n        survivant s'applique au revenu annuel, aux intérêts et à la disposition\r\n        annuelle des actifs.\r\n        <br />\r\n        <span style={infoHighlightStyle}>\r\n          Le taux d'imposition marginal{\" \"}\r\n        </span>{\" \"}\r\n        (sous la rubrique « Précisions sur la présentation ») s'applique à la\r\n        disposition planifiée ou potentielle complète d'un actif.\r\n      </div>\r\n    ),\r\n    infoIconRetire: <div>\r\n    {\" \"}\r\n    {/* style={{color:\"#54585a\"}}> */}\r\n    Les durées de la <span style={infoHighlightStyle}>source de revenus</span> et des <span style={infoHighlightStyle}>besoins en matière de revenus</span> sont généralement basées sur cette valeur.\r\n        <br />Elles seront rajustées automatiquement, veuillez les vérifier de nouveau.\r\n  </div>,\r\n    \r\n    infoAdjust:\r\n      \"Ajuster les besoins de revenu et les durées de la source de revenu à âge à l'échéance (99) or l'espérance de vie de\",\r\n    clientOnly:\r\n      \"L'analyse des besoins est toujours effectuée pour le «client» membre de la famille\",\r\n    infoElig: (\r\n      <div>\r\n        Les prestations du survivant et de l'orphelin sont basées sur\r\n        l'admissibilité du client\r\n        <br />\r\n        Définir{\" \"}\r\n        <span style={infoHighlightStyle}>la province</span> (RPC ou RRQ) à la\r\n        rubrique 'Précisions sur la présentation'\r\n      </div>\r\n    ),\r\n    infoSpouseElig:\r\n      \"100 % signifie que le survivant est supposé être pleinement admissible aux prestations gouvernementales avant l'âge de 65 ans\",\r\n    ever: \" ... pour toujours\",\r\n    taxMsg:\r\n      \"Les méthodes fiscales doivent être discutées avec votre conseiller financier\",\r\n    fetch: \"Défaut de connexion au serveur\",\r\n    ie:\r\n      \"s'il vous plaît utiliser les navigateurs Edge ou Chrome pour les graphiques et les fonctionnalités complètes\",\r\n    govB: (\r\n      <div>\r\n        Ne supprimez pas les prestations gouvernementales. <br />\r\n        Pour les ajuster, modifier{\" \"}\r\n        <span style={infoHighlightStyle}>l'admissibilité du client</span>\r\n      </div>\r\n    ),\r\n    assetTax:\r\n      \"Veuillez utiliser les valeurs des actifs après impôt jusqu'à ce que la méthode d'imposition devienne disponibl\",\r\n    internet:\r\n      \"  Vous devez vous connecter à nouveau au site PPI.\" +\r\n      \"Vous pouvez enregistrer vos données avant de cliquer sur ce message\" +\r\n      \"pour recharger vos données d'entrée.\" +\r\n      \"S'il vous plaît cliquez pour rafraîchir.\",\r\n    RRIF:\r\n      \"Le FERR est pris en compte dans le revenu du survivant sur la base de son propre REER ou d'un REER transféré. L'âge maximal pour retirer des fonds est de 71 ans.\",\r\n    rollOver:\r\n      \"Les actifs du client peuvent habituellement être transférés au conjoint pour éviter une liquidation.\",\r\n    insurance:\r\n      \"L'assurance du client est offerte au survivant, alors que l'assurance du conjoint ou l'assurance conjointe (sur deux têtes) ne le sont pas.\",\r\n    rental:\r\n      \"Il s'agit du revenu de location lié aux biens immobiliers et du revenu de dividende lié aux actions. Il s'agit dans les deux cas d'un pourcentage de la valeur actuelle. Ils peuvent également être saisis dans la rubrique « Sources de revenus… ». Un tel revenu (après impôt) aura un impact sur les flux monétaires des survivants et par conséquent, sur les « besoins en assurance » du client.\",\r\n    note:\r\n      \"Abaissez le bord inférieur pour agrandir. Quelques petits paragraphes peuvent être enregistrés (jusqu'à 5 000 caractères).\",\r\n    save: (\r\n      <div>\r\n        Pour enregistrer les fichiers à l'emplacement voulu :<br />\r\n        <span style={infoHighlightStyle}>Microsoft Edge:</span>\r\n        <li>Aller au menu..., Téléchargements, Paramètres de téléchargement</li>\r\n        <span style={infoHighlightStyle}>Google Chrome:</span>\r\n        <li>\r\n          Aller au menu..., Paramètres, Paramètres avancés, Téléchargements\r\n        </li>\r\n        <span style={infoHighlightStyle}>\r\n          puis dans l'un ou l'autre des navigateurs :\r\n        </span>\r\n        <li>\r\n          Activer la fonction « Me demander quoi faire avec chaque\r\n          téléchargement » ou « Toujours demander où enregistrer les fichiers ».\r\n        </li>\r\n      </div>\r\n    ),\r\n    gridCapFund:\r\n      \"Le fonds de capitaux est constitué du capital additionnel requis (besoins d'assurance), diminué du revenu additionnel requis et accru du taux de rendement après impôt.\",\r\n    salary:\r\n      \"Le revenu brut, les prestations de l'État et les autres types de revenus annuels sont présumés croître au taux d'inflation\",\r\n    salaryPercent:\r\n      \"La valeur après impôt est indiquée en dollars d'aujourd'hui. Il augmentera au taux d'inflation\",\r\n    afterTax: \"Tous les montants sont après impôt\",\r\n    taxExempt: (\r\n      <div>\r\n        {\" \"}\r\n        <span style={infoHighlightStyle}>\r\n          Exonération des gains en capital\r\n        </span>{\" \"}\r\n        pour les petites entreprises est présumée croître au taux d'inflation\r\n      </div>\r\n    ),\r\n    infoINA:\r\n      \"Ce montant est basé sur la valeur actualisée des manques à gagner en matière de revenus, actualisée au taux de rendement après impôt. Il est ajusté, si nécessaire, pour s'assurer que des manque à gagner précoces sont prévus\",\r\n      infoBOYEOY: \"DDA signifie Début d'année et FDA, Fin d'année\",\r\n      infoPDF:\r\n      \"Les graphiques et la feuille de calcul de l'analyse des besoins en matière d'assurance peuvent être exportés en format PDF sous l'onglet 'Graphique'\",      \r\n      probate:\r\n      appletMode===\"INA\"?\"L'homologation est basée sur les actifs du client au moment du décès et n'inclut pas les actifs communs ou les actifs qui appartiennent au conjoint ou qui peuvent être transférés à celui-ci\":\r\n      \"L'homologation est basée sur les actifs du client au moment du décès. Si un conjoint est ajouté, donc la couverture CDD (conjointe au dernier décès), elle comprendra également les actifs communs ou les actifs qui appartiennent au conjoint ou qui peuvent lui être transférés\",  \r\n   TFSA:\r\n      \"Les cotisations et les retraits REER et CELI sont assujettis aux limites établies par l'ARC\",  \r\n      DepositWithd:\r\n      \"Les cotisations et les retraits affectent la juste valeur marchande des actifs et les flux monétaires. Les flux monétaires des survivants, quelle que soit leur origine, ont un impact direct sur les 'besoins en assurance' du client\",  \r\n      inflationGrowth:\r\n      \"Le revenu brut, les prestations gouvernementales et les autres types de revenus annuels sont supposés croître au taux d'inflation que vous avez sélectionné\",  \r\n      PYE_JLTD:\r\n      \"Lorsqu'un conjoint est ajouté, la responsabilité de la succession doit être assurée avec une couverture CDD. En tant que telle, elle comprend les obligations fiscales et les autres dettes des deux conjoints au dernier décès\",  \r\n      needGrowth:\r\n      \"Les besoins en revenu des survivants sont supposés croître au taux d'inflation que vous avez choisi\",\r\n      exportINA:\r\n      \"Les données peuvent être exportées vers l'analyse des besoins en assurance, qui permet de calculer les besoins en assurance pour soutenir le style de vie du ou des survivant(s)\",\r\n      taxLiab:\r\n      \"Les projections d'actifs prennent en compte le passif fiscal. Vous n'avez pas besoin d'entrer un passif séparé lié aux impôts tel que les gains en capital\",\r\n  },\r\n};\r\n\r\nexport function getGenericMessage(lang) {\r\n  return {\r\n    infoID: \"infoGenericMsg\",\r\n    infoText: \"\",\r\n    iconMode: SHOW_NONE,\r\n    popupOpenByProps: true,\r\n    popupBorderColor: POPUP_BORDER_ALERT,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT,\r\n      marginTop: DEFAULT_MARGIN_TOP + 5,\r\n      width: DEFAULT_WIDTH + 30,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconTaxExempt(lang) {\r\n  return {\r\n    infoID: \"infoExempt\",\r\n    infoText: MESSAGES[lang].taxExempt,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH + 20,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconSourcesGov(lang) {\r\n  return {\r\n    infoID: \"infogov\",\r\n    infoText: MESSAGES[lang].govB,\r\n    iconMode: SHOW_STANDARD_RED,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_ALERT,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 12,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoNoInternetAccess(lang) {\r\n  return {\r\n    infoID: \"infoNoInternetAccess\",\r\n    infoText: MESSAGES[lang].internet,\r\n    iconMode: SHOW_NONE,\r\n    popupOpenByProps: true,\r\n    popupBorderColor: POPUP_BORDER_ALERT,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT,\r\n      marginTop: DEFAULT_MARGIN_TOP + 5,\r\n      width: DEFAULT_WIDTH + 80,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconSourcesRRIF(lang) {\r\n  return {\r\n    infoID: \"RRIF\",\r\n    infoText: MESSAGES[lang].RRIF,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconClientsMember(lang) {\r\n  return {\r\n    infoID: \"infoMember\",\r\n    infoText: MESSAGES[lang].clientOnly,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 12,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIncome(lang) {\r\n  return {\r\n    infoID: \"infosalary\",\r\n    infoText: MESSAGES[lang].salary,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 12,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoSalaryPercent(lang) {\r\n  return {\r\n    infoID: \"infoSalaryPercent\",\r\n    infoText: MESSAGES[lang].salaryPercent,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconAssetsIncomeRate(lang) {\r\n  return {\r\n    infoID: \"infoIconIncomeRate\",\r\n    infoText: MESSAGES[lang].rental,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH +100,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconPYE_JLTD(lang) {\r\n  return {\r\n    infoID: \"infoIconPYE_JLTD\",\r\n    infoText: MESSAGES[lang].PYE_JLTD,\r\n    iconMode: SHOW_STANDARD_WHITE,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH +100,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\n\r\nexport function getInfoIconNeedGrowth(lang) {\r\n  return {\r\n    infoID: \"infoIconNeedGrowth\",\r\n    infoText: MESSAGES[lang].needGrowth,\r\n    iconMode: SHOW_STANDARD_WHITE,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH +100,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\n\r\nexport function getInfoINA(lang) {\r\n  return {\r\n    infoID: \"infoINA\",\r\n    infoText: MESSAGES[lang].infoINA,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH + 50,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoPDF(lang) {\r\n  return {\r\n    infoID: \"infoPDF\",\r\n    infoText: MESSAGES[lang].infoPDF,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH + 30,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\n\r\n\r\nexport function getInfoExportINA(lang) {\r\n  return {\r\n    infoID: \"exportINA\",\r\n    infoText: MESSAGES[lang].exportINA,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH + 30,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconAssetsOwner(lang) {\r\n  return {\r\n    infoID: \"infoIconOwner\",\r\n    infoText: MESSAGES[lang].rollOver,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 12,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconTFSA(lang) {\r\n  return {\r\n    infoID: \"infoIconTFSA\",\r\n    infoText: MESSAGES[lang].TFSA,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 20,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconProbate(lang) {\r\n  return {\r\n    infoID: \"infoIconProbate\",\r\n    infoText: MESSAGES[lang].probate,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 20,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH +30,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconDepositWithd(lang) {\r\n  return {\r\n    infoID: \"infoIconDepositWithd\",\r\n    infoText: MESSAGES[lang].DepositWithd,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 20,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH +50,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\n\r\nexport function getInfoIconInflationGrowth(lang) {\r\n  return {\r\n    infoID: \"infoIconInflationGrowth\",\r\n    infoText: MESSAGES[lang].inflationGrowth,\r\n    iconMode: SHOW_STANDARD_WHITE,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 20,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH +50,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconAssetsIns(lang) {\r\n  return {\r\n    infoID: \"insurance\",\r\n    infoText: MESSAGES[lang].insurance,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 30,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconAssetsYr0(lang) {\r\n  return {\r\n    infoID: \"infoIconYr0\",\r\n    infoText: MESSAGES[lang].infoYr0,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 12,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconClientsElig(lang) {\r\n  return {\r\n    infoID: \"infoIconElig\",\r\n    infoText: MESSAGES[lang].infoElig,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 6,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH + 25,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconSpouseElig(lang) {\r\n  return {\r\n    infoID: \"infoIconSpouseElig\",\r\n    infoText: MESSAGES[lang].infoSpouseElig,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 6,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH + 25,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconClientsTax(lang) {\r\n  return {\r\n    infoID: \"infoIconAvgTax\",\r\n    infoText: MESSAGES[lang].infoAvgTax,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT - 20,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH + 70,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\n\r\n\r\nexport function getInfoIconClientsRetire(lang,flagRed) {\r\n  return {\r\n    infoID: \"infoIconRetire\",\r\n    infoText: MESSAGES[lang].infoIconRetire,\r\n    iconMode: flagRed?SHOW_STANDARD_RED:SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT - 20,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH + 45,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoTaxLiability(lang) {\r\n  return {\r\n    infoID: \"infoIconAvgTax\",\r\n    infoText: MESSAGES[lang].infoAvgTax,\r\n    iconMode: SHOW_STANDARD_LIGHT_BLUE,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT - 88,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH + 70,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconTaxLiab(lang) {\r\n  return {\r\n    infoID: \"infoIcontaxLiab\",\r\n    infoText: MESSAGES[lang].taxLiab,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT - 20,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH + 70,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\nexport function getInfoBOYEOY(lang) {\r\n  return {\r\n    infoID: \"infoBOYEOY\",\r\n    infoText: MESSAGES[lang].infoBOYEOY,\r\n    iconMode: SHOW_STANDARD_LIGHT_BLUE,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT - 70,\r\n      marginTop: DEFAULT_MARGIN_TOP+45,\r\n      width: DEFAULT_WIDTH + 35,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconNotes(lang) {\r\n  return {\r\n    infoID: \"InfoIconNotes\",\r\n    infoText: MESSAGES[lang].note,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 20,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH + 70,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoSave(lang) {\r\n  return {\r\n    infoID: \"InfoSave\",\r\n    infoText: MESSAGES[lang].save,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 68,\r\n      marginTop: DEFAULT_MARGIN_TOP - 172,\r\n      width: DEFAULT_WIDTH + 238,\r\n      height: DEFAULT_HEIGHT - 250,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoExcelcapFund(lang) {\r\n  return {\r\n    infoID: \"InfoSave\",\r\n    infoText: MESSAGES[lang].gridCapFund,\r\n    iconMode: SHOW_STANDARD_LIGHT_BLUE,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT - 88,\r\n      marginTop: DEFAULT_MARGIN_TOP+35,\r\n      width: DEFAULT_WIDTH + 70,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoExcelAllAfterTax(lang) {\r\n  return {\r\n    infoID: \"InfoATax\",\r\n    infoText: MESSAGES[lang].afterTax,\r\n    iconMode: SHOW_STANDARD_LIGHT_BLUE,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 30,\r\n      marginTop: DEFAULT_MARGIN_TOP+45,\r\n      width: DEFAULT_WIDTH + 20,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n","import React, { Component } from 'react';\r\nimport { Box, Card, CardContent, Typography } from '@material-ui/core'\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { createMuiTheme, ThemeProvider } from \"@material-ui/core/styles\";\r\n\r\nimport {\r\n  getInfoSave\r\n} from \"../definitions/infoIconsDefinitions.js\";\r\n\r\n\r\n\r\nexport class PopupInfoDialog extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      open: this.props.infoIcon.popupOpenByProps,\r\n      name: '',\r\n      showInfo: false\r\n    }\r\n  };\r\n\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (nextProps !== this.props) {\r\n\r\n      this.setState({\r\n        open: nextProps.infoIcon.popupOpenByProps\r\n      })\r\n    }\r\n  }\r\n\r\n  render() {\r\n\r\n    const theme = createMuiTheme({\r\n      typography: {\r\n        fontFamily: '\"Trebuchet MS\"',\r\n        fontSize: 12,\r\n        color: 'red',      \r\n      },\r\n    })  \r\n\r\n    return (\r\n\r\n    \r\n\r\n<Box width=\"100%\" border={2} borderColor={ this.props.infoIcon.popupBorderColor} borderRadius={5}>\r\n        <Card> <CardContent >\r\n        <ThemeProvider theme={theme}>\r\n          <Typography color=\"textPrimary\" component=\"p\" >\r\n                {this.props.infoIcon.infoText}\r\n             \r\n               {/*  <div>\r\n                To save files in your desired location:<ul><li>Microsofrft Edge:\r\n              <ul>\r\n                <li>Go to Options {this.state.showInfo && <img  alt=\"info\" src={optionsEdge}  />} </li>\r\n                <li>Click Downlods - Click Download settings</li>\r\n                <li>Turn on \"Ask where to save each file before downloading\" {this.state.showInfo && <img  alt=\"info\" src={sourceEdge}  />}\r\n              </li>\r\n               </ul>\r\n               </li><li>Google Chrome:\r\n               <ul>\r\n               <li>Go to Options {this.state.showInfo && <img  alt=\"info\" src={optionsChrome}  />} </li>\r\n                <li>Click Settings - Advanced - Downloads</li>\r\n                <li>Turn on \"Ask where to save each file before downloading\" {this.state.showInfo && <img  alt=\"info\" src={sourceChrome}  />}\r\n                </li>\r\n               </ul>\r\n              \r\n              </li></ul></div> */}\r\n             \r\n          </Typography>\r\n          </ThemeProvider>\r\n         \r\n        </CardContent></Card>\r\n        </Box>\r\n \r\n    )\r\n\r\n\r\n  }\r\n}","import React, { Component } from 'react';\r\nimport './info.css';\r\nimport {\r\n\tSHOW_AUTOMATIC_RED,\r\n\tSHOW_STANDARD,\r\n\tSHOW_STANDARD_RED,\r\n\tSHOW_STANDARD_LIGHT_BLUE,\r\n\tSHOW_NONE,\r\n\tSHOW_STANDARD_WHITE,\r\n}\r\n\tfrom \"../definitions/infoIconsDefinitions.js\";\r\nimport { PopupInfoDialog } from \"./PopupInfo\";\r\n\r\nexport class Info extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\topen: this.props.infoIcon.popupOpenByProps\r\n\t\t};\r\n\t\tthis.chkClose = false;\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tif (this.props.iconMode === SHOW_AUTOMATIC_RED) {\r\n\t\t\t//\t  console.log('in info');\r\n\r\n\t\t\tthis.popupInfo(0);\r\n\t\t\tthis.chkClose = true;\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tthis.setState({ open:  this.props.infoIcon.popupOpenByProps })\r\n\t}\r\n\r\n\tshowPopup = () => {\r\n\t\tthis.setState({ open: !this.state.open })\r\n\t\tif (this.props.respondToPopUp!==undefined)this.props.respondToPopUp();\r\n\t}\r\n\r\n\tpopupInfo = () => {\r\n\t\tvar popup = document.getElementById(this.props.infoIcon.infoID);\r\n\t\tpopup.classList.toggle(\"show\");\r\n\t//\tif (this.props.infoIcon.iconMode === SHOW_AUTOMATIC_RED && this.chkClose === true) {\r\n\t\t\tthis.props.respondToPopUp();\r\n\t\t\tthis.chkClose = false;\r\n\t//\t}\r\n\t}\r\n\r\n\r\n\trender() {\r\n\t\tconst position = this.props.infoIcon.position\r\n\t\t// console.log(position)\r\n\r\n\t\t//var icon=this.props.icon===undefined?'../images/info.png':this.props.icon;\r\n\r\n\t\t//var style1=this.props.popupRightMiddle? {paddingLeft:\"14px\", marginLeft: '75px',marginTop: '-135px', width:'196px' }:(this.props.popupRight===true?{marginLeft: '50px'}:{});\r\n\r\n\t\tvar stylePosition = position !== undefined ?\r\n\t\t\t({ marginLeft: position.marginLeft + 'px', marginTop: position.marginTop + 'px', width: position.width + 'px' }) : {};\r\n\t//var style={paddingLeft: this.props.popupRightMiddle?'25px':'8px', height: this.props.sizeIcon===undefined?'14px':this.props.sizeIcon, };\r\n\t\tconst style = { paddingLeft: '8px', height: '14px'};\r\n\t\t//var sour=this.props.iconName===undefined || this.props.iconName==='info.png'?require('../images/info.png'):require('../images/'+this.props.iconName);\r\n\t\tconst source = this.props.infoIcon.iconMode === SHOW_STANDARD ? require('../images/info.png') : (this.props.infoIcon.iconMode === SHOW_NONE ? \"\": (this.props.infoIcon.iconMode === SHOW_STANDARD_LIGHT_BLUE ?require('../images/infoLightBlue.png'): (this.props.infoIcon.iconMode === SHOW_STANDARD_WHITE ?require('../images/infoWhite.png'): require('../images/infoRed.png'))));\r\n\r\n\t\tconst classP = this.state.open === true ? \"popup2\" : \"popup\"\r\n\t\t\r\n\t\t//const width=this.props.infoIcon.infoText.length>120?'600%': (this.props.infoIcon.infoText.length>90?'420%':'350%');\r\n\t\t\r\n\t\tconst marginLeft=position.marginLeft//this.props.infoIcon.infoText.length>120?'-275%':'-125%';\r\n\t\tconst marginTop=position.marginTop\r\n\t\tconst width=position.width\r\n\t\tconst height=position.height\r\n\r\n\t\tconst zIndx=this.props.zIndex===undefined?1:this.props.zIndex\r\n\t\t\r\n\t\tlet borderColor\r\n\r\n\t\treturn (\r\n\t\t\t<div  className={classP} style={{ float: 'right', width: '40px', height: '40px'   }}><div>\r\n\t\t\t\t{this.props.iconMode !== SHOW_AUTOMATIC_RED && this.props.infoIcon.iconMode !== SHOW_NONE && <img onMouseEnter={this.showPopup} onMouseLeave={this.showPopup} onClick={this.showPopup} id={\"info\"} alt=\"info\" src={source} style={style} />}\r\n\t\t\t\t{/* <div className=\"popup\"  onMouseEnter={this.popupInfo} onMouseLeave={this.popupInfo}   onClick={this.popupInfo}>{this.props.showMode!==SHOW_AUTOMATIC_RED && <img  id={\"info\"} alt=\"info\" src={source} style={style} />} */}\r\n\t\t\t\t{/* <span className=\"popuptextBottom\"   style={stylePosition} id={this.props.infoIcon.infoID}>{this.props.infoIcon.infoText}</span> */}\r\n\t\t\t</div>\r\n\t\t\t <div style={{position:'absolute', marginTop: '2px',marginTop:marginTop,  marginLeft: marginLeft, width: width, zIndex: zIndx}}>\t\t\t<span onMouseEnter={this.showPopup} onMouseLeave={this.showPopup}  onClick={this.showPopup} >{this.state.open === true && <PopupInfoDialog  infoIcon={this.props.infoIcon} />}</span>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\r\n}\r\n","import React, { Component } from \"react\";\r\nimport Select from \"react-select\";\r\nimport { MESSAGES } from \"../definitions/generalDefinitions\";\r\nimport { Info } from \"./Info\";\r\nimport { DROPDOWN_WIDE } from \"../definitions/generalDefinitions\";\r\n\r\nexport class DropDown extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      //\tid: this.props.Count,\r\n      //Title: this.props.Title,\r\n      selection: \"?\",\r\n      valueSelected: this.props.defValue,\r\n    };\r\n    this.update = false;\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (nextProps !== this.props && nextProps.defValue !== undefined) {\r\n      this.setState({ valueSelected: nextProps.defValue });\r\n    }\r\n  }\r\n\r\n  handleChange = (event) => {\r\n    this.setState(\r\n      {\r\n        selection: event.label.valueOf(),\r\n        valueSelected: event.label.valueOf(),\r\n      },\r\n      () => this.afterStateUpdate()\r\n    );\r\n    this.update = true;\r\n  };\r\n\r\n  afterStateUpdate() {\r\n    this.props.updateDDown(this.props.id, this.state.selection);\r\n  }\r\n\r\n  getDefault() {\r\n    try {\r\n      return this.props.Values[\r\n        this.props.Values.find((x) => x.label === this.props.defValue).value - 1\r\n      ];\r\n    } catch (error) {\r\n      return this.props.defValue;\r\n    }\r\n  }\r\n\r\n  disableOption = (option) => {\r\n    let disable=this.props.disableOption===undefined?false:(this.props.disableOption[option.value-1])\r\n    return  disable;\r\n    //(\r\n\r\n    //  this.props.disableOption[option.value-1]===true\r\n      /* (this.props.Title === \"Member\" || this.props.Title === \"Membre\") &&\r\n      (option.label === \"Client\" ||\r\n        (this.props.hasSurivor &&\r\n          (option.label === \"Spouse\" || option.label === \"Conjoint\"))) */\r\n    //);\r\n  };\r\n\r\n  render() {\r\n    let styleDD = \"dropDown\";\r\n    if (this.props.width === DROPDOWN_WIDE) styleDD = \"dropDown dropDown2\";\r\n    const title = this.props.Title; // this.state.Title;\r\n    // console.log(this.props.Title)\r\n    const customStyles = {\r\n      control: (base) => ({\r\n        ...base,\r\n        height: 35,\r\n        minHeight: 35,\r\n        backgroundColor: \"#e9eef1\",\r\n        \"&:hover\": {\r\n          backgroundColor: \"#d6e5ee\",\r\n        },\r\n      }),\r\n    };\r\n\r\n    const taxCredit =\r\n      this.getDefault() === this.props.unlistedValue ? true : false;\r\n    var charOp = [];\r\n    charOp.push({\r\n      label: this.props.unlistedValue,\r\n      value: 1,\r\n    });\r\n\r\n    let selectComponent = (\r\n      <Select\r\n        isSearchable={true}\r\n        onfocus={this.oc}\r\n        styles={customStyles}\r\n        key={this.props.defValue}\r\n        isDisabled={this.props.disable}\r\n        value={this.getDefault()}\r\n        id={this.props.id}\r\n        onChange={this.handleChange}\r\n        options={this.props.Values}\r\n        isOptionDisabled={(option) => this.disableOption(option)}\r\n      />\r\n    );\r\n\r\n    if (taxCredit === true)\r\n      selectComponent = (\r\n        <Select\r\n          isSearchable={true}\r\n          styles={customStyles}\r\n          key={this.props.defValue}\r\n          isDisabled={false}\r\n          value={charOp[0]}\r\n          id={this.props.id}\r\n          options={charOp}\r\n        />\r\n      );\r\n\r\n    if (this.props.unlistedGreyedOption !== undefined)\r\n      selectComponent = (\r\n        <Select\r\n          isSearchable={true}\r\n          styles={customStyles}\r\n          key={this.props.defValue}\r\n          isDisabled={true}\r\n          value={this.props.unlistedGreyedOption[0]}\r\n          id={this.props.id}\r\n          options={this.props.unlistedGreyedOption}\r\n        />\r\n      );\r\n\r\n    // console.log(this.props.infoIcon)\r\n    return (\r\n      <div>\r\n        <div className={styleDD} key={this.props.defValue}>\r\n          <div className=\"controlTitle\">\r\n            {title}\r\n            {/* {checkInfo===true?<Info iconName={gov!==-1 || idM===\"infoOther\"?\"infoRed.png\":\"info.png\"}  id={idM} msg={msg} popupRight={idM===\"infoOther\"||idM===\"infogov\"?true:false}/>:''} */}\r\n            {this.props.infoIcon !== undefined ? (\r\n              <Info infoIcon={this.props.infoIcon} zIndex={999} /> //id={this.props.infoIcon.infoID} msg={this.props.infoIcon.infoText}  popupRight={this.props.infoIcon.popupRight}  iconName={this.props.infoIcon.infoAlert? \"infoRed.png\":\"info.png\"} />\r\n            ) : (\r\n              \"\"\r\n            )}\r\n          </div>\r\n\r\n          {selectComponent}\r\n          {/* <Select  isSearchable={false} onfocus={this.oc} styles={customStyles} key={this.state.valueSelected} isDisabled={this.props.disable} value={this.getDefault()} id={this.props.id} onChange={this.handleChange} options={this.props.Values} isOptionDisabled={(option)=>this.disableOption(option)} />\r\n\t\t\t\t\t{taxCredit===true&&<Select  isSearchable={false} onfocus={this.oc} styles={customStyles} key={this.state.valueSelected} isDisabled={true} value={charOp[0]} id={this.props.id} onChange={this.handleChange} options={charOp}  />} */}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { cleanFormat } from \"../utils/helper\";\r\nimport { Info } from \"./Info\";\r\n\r\nexport class InputField extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      inputValue: this.toFormat(this.props.inputValue),\r\n      isEditing: false,\r\n    };\r\n    \r\n    /* this.infoIcon= this.props.infoIcon === undefined? \r\n\t\t{\r\n\t\t\tmsg: \"\",\r\n\t\t\ticonAlert: false,\r\n      checkInfo: false,\r\n      popupRight:false,\r\n\t\t\tidM: 0\r\n\t\t} : {\r\n\t\t\tmsg: this.props.infoIcon.infoText,\r\n\t\t\ticonAlert: this.props.infoIcon.infoAlert,\r\n      checkInfo: this.props.infoIcon.showInfoIcon,\r\n      popupRight: this.props.infoIcon.popupRight,\r\n\t\t\tidM: this.props.infoIcon.infoID\r\n\t\t} */\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (nextProps.inputValue !== this.props.inputValue) {\r\n      this.setState({ inputValue: this.toFormat(nextProps.inputValue) });\r\n    }\r\n  }\r\n\r\n  updateInputValue(evt) {\r\n    //  const input = this.getInut(evt);\r\n    this.setState({ inputValue: evt.target.value }); // input });\r\n  }\r\n\r\n  getInut = (evt) => {\r\n    var input;\r\n    let chkNum;\r\n    const value = evt.target.value;\r\n    \r\n    /* if (\r\n      this.props.language === \"fr\" &&\r\n      this.props.format === 3 \r\n    )\r\n      chkNum = cleanFormat(value, true, lang);\r\n    else */ \r\n    chkNum = cleanFormat(value, this.props.language);\r\n\r\n    if (\r\n      (isNaN(chkNum.replace(\",\", \".\")) || value === \"\") &&\r\n      !(\r\n        value.toString()[value.toString().length - 1] === \".\" ||\r\n        value.toString()[value.toString().length - 1] === \",\"\r\n      )\r\n    )\r\n      input = value.substring(0, value.length - 1);\r\n    else input = chkNum;\r\n\r\n    const max =\r\n      this.props.format === 2\r\n        ? this.props.maxValue === undefined\r\n          ? 1000000000\r\n          : this.props.maxValue\r\n        : this.props.maxValue === undefined\r\n        ? 100\r\n        : this.props.maxValue;\r\n\r\n    if (input > max) input = max;\r\n    const min = this.props.minValue === undefined ? 0 : this.props.minValue;\r\n\r\n    if (input < min) input = min;\r\n  \r\n    return input;\r\n  };\r\n\r\n  afterStateUpdate() {\r\n    //this.props.handleUpdateInput(this.props.inputName, this.state.inputValue);\r\n    this.props.handleUpdateInput(this.props.id, this.state.inputValue);\r\n  }\r\n\r\n  handleFocus = (event) => {\r\n    if (navigator.userAgent.match(/Edge\\/(13|14|15|16|17)/)) {\r\n      //\treturn setTimeout( event.target.select.bind( event.target ), 1)\r\n    } else event.target.select();\r\n  };\r\n\r\n  selectField = (event) => {\r\n    if (navigator.userAgent.match(/Edge\\/(13|14|15|16|17)/)) {\r\n      event.target.setSelectionRange(0, event.target.value.length);\r\n    }\r\n  };\r\n  onMouseUpSelect = (event) => {\r\n    if (/iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream) {\r\n      event.target.select();\r\n    }\r\n  };\r\n\r\n  handleFocusIOS = (event) => {\r\n    event.target.value = cleanFormat(event.target.value, this.props.language);\r\n  };\r\n\r\n  toFormat(number) {\r\n    let formatter;\r\n    const lang = this.props.language;\r\n    /* if ((lang === \"fr\" || global.langFr) && this.props.format === 3)\r\n      number = cleanFormat(number, true); \r\n    else */\r\n    number = cleanFormat(number, lang);\r\n\r\n    if (isNaN(number) || number === \"\") number = 0;\r\n    if (this.props.format === 2) {\r\n      formatter =\r\n        (lang === \"fr\" ? \"\" : \"$\") +\r\n        new Intl.NumberFormat(lang).format(parseInt(number));\r\n    } else if (this.props.format === 3) {\r\n      if (lang === \"fr\") {\r\n        formatter =\r\n          number.toString()[number.toString().length - 1] === \".\"\r\n            ? parseFloat(number) + \",\"\r\n            : parseFloat(number);\r\n        formatter = formatter.toString().replace(\".\", \",\");\r\n      } else\r\n        formatter =\r\n          number.toString()[number.toString().length - 1] === \".\"\r\n            ? parseFloat(number) + \".\"\r\n            : parseFloat(number);\r\n    } else formatter = parseInt(number);\r\n    return formatter;\r\n  }\r\n\r\n  toggleEditing = (e) => {\r\n    /* e.target.value=this.toFormat(e.target.value);\t\t\r\n\t\t\t\tif(this.props.format === 3)e.target.value+=\"%\"; */\r\n    let input = this.getInut(e);\r\n    input = this.toFormat(input);\r\n    this.setState({ inputValue: input, isEditing: !this.state.isEditing }, () =>\r\n      this.afterStateUpdate()\r\n    );\r\n    //\tthis.props.handleUpdateInput(this.props.id, this.state.inputValue);\r\n  };\r\n\r\n  getValue = (value) => {\r\n    const dec = value.toString().indexOf(\".\");\r\n    const first = value.toString()[0];\r\n\r\n    if (first === 0 && dec === -1)\r\n      return (\r\n        parseFloat(100 * value.toString().slice(1, value.toString().length)) /\r\n        100\r\n      );\r\n    else return parseFloat(100 * value) / 100;\r\n  };\r\n\r\n  selectText = () => {\r\n    var s = this.refs.InputTxt.value;\r\n    if (s.length) {\r\n      window.setTimeout(function () {\r\n        this.refs.InputTxt.setSelectionRange(s.length - 1, s.length);\r\n      }, 0);\r\n    }\r\n  };\r\n\r\n  getRidOfZerosAfterDecimal = (displayValue) => {\r\n    const decimalPos = displayValue.indexOf(\".\");\r\n    if (decimalPos >= 0) {\r\n      if (displayValue.length >= decimalPos + 3)\r\n        // 2 decimals max\r\n        displayValue = displayValue.substring(0, decimalPos + 3);\r\n      // get rid of zeros\r\n      while (\r\n        displayValue.slice(-1) === \"0\" &&\r\n        displayValue.length > decimalPos + 3\r\n      ) {\r\n        displayValue = displayValue.substring(0, displayValue.length - 1);\r\n      }\r\n    }\r\n\r\n    return displayValue;\r\n  };\r\n\r\n  render() {\r\n    let displayValue =\r\n      this.state.inputValue !== undefined\r\n        ? this.state.inputValue.toString()\r\n        : \"\";\r\n    if (displayValue.indexOf(\".\") >= 0)\r\n      displayValue = this.getRidOfZerosAfterDecimal(displayValue);\r\n    //  displayValue=parseFloat(displayValue).toFixed(2);\r\n\r\n    const title = this.props.inputName; //  this.props.Count === 1 ? this.state.inputName : this.state.inputName;\r\n    const disable = this.props.readOnly ? true : false;\r\n    let styleClass = disable ? \"inputField inputFieldDisabled\" : \"inputField\";\r\n    styleClass += this.props.language === \"fr\" ? \" inputFieldFrench\" : \"\";\r\n    const styleClass2 =\r\n      styleClass +\r\n      (this.props.format === 3 ||\r\n      (this.props.format === 2 && this.props.language === \"fr\")\r\n        ? \" percentField\"\r\n        : \"\");\r\n\r\n    let divStyleClass = \"dropDown inputDiv\";\r\n    divStyleClass += this.props.language === \"fr\" ? \" inputDivFrench\" : \"\";\r\n\r\n    let inputColorStyle =\r\n      this.props.colorDiv === undefined\r\n        ? {}\r\n        : { border: \"1px solid \" + this.props.colorDiv };\r\n\r\n    //iOS=false;\r\n    var iOS2 = false;\r\n\r\n    if (\r\n      this.props.info !== undefined &&\r\n      (this.props.showInfo === true || this.props.showInfo === undefined)\r\n    ) {\r\n    }\r\n    //\tlet st1=this.props.format===3?\"styleClass st1percentField\":\"\";\r\n    let perc = this.props.format === 3;\r\n\r\n    if (this.props.language === \"fr\" && this.props.format === 2) {\r\n      return (\r\n        <div\r\n          className={divStyleClass}\r\n          french={this.props.language === \"en\" ? \"true\" : \"false\"}\r\n        >\r\n          <div className=\"controlTitle\">\r\n            {title}\r\n            {/*  {checkInfo === true ? (\r\n              <Info id={idM} msg={msg} infoPosition={this.props.infoPosition} />\r\n            ) : (\r\n              \"\"\r\n            )} */}\r\n            {this.props.infoIcon !== undefined ? (\r\n              <Info infoIcon={this.props.infoIcon} /> //id={this.props.infoIcon.infoID} msg={this.props.infoIcon.infoText}  popupRight={this.props.infoIcon.popupRight}  iconName={this.props.infoIcon.infoAlert? \"infoRed.png\":\"info.png\"} />\r\n            ) : (\r\n              \"\"\r\n            )}\r\n          </div>\r\n          {/*{iOS ? <input type=\"number\" inputmode=\"numeric\" pattern=\"\\d*\"  min=\"0\" max={max} step={step} className={styleClass} isDisabled={disable} onFocus={this.handleFocus} onClick={this.select} value={this.getValue(displayValue)} onChange={evt => this.updateInputValue(evt)} onBlur={this.toggleEditing.bind(this)} />*/}\r\n          {iOS2 ? (\r\n            \"\" //<input type=\"text\" inputmode=\"decimal\" min=\"0.0\" max={max} step={step} className={styleClass} isDisabled={disable} onFocus={this.handleFocus} onClick={this.select} value={displayValue} onChange={evt => this.updateInputValue(evt)}  />\r\n          ) : (\r\n            <div className={styleClass}>\r\n              <span>\r\n                <input\r\n                  type=\"text\"\r\n                  className={styleClass2}\r\n                  style={{ paddingTop: \"0px\", width: \"86%\" }}\r\n                  inputMode=\"decimal\"\r\n                  disabled={disable}\r\n                  value={displayValue}\r\n                  autoFocus\r\n                  onFocus={(e) => this.handleFocus(e)}\r\n                  onMouseUp={this.onMouseUpSelect}\r\n                  onClick={this.selectField}\r\n                  onChange={(evt) => this.updateInputValue(evt)}\r\n                  onBlur={this.toggleEditing.bind(this)}\r\n                />\r\n                <label\r\n                  style={{\r\n                    display: \"inline-block\",\r\n                    float: \"left\",\r\n                    width: \"3%\",\r\n                  }}\r\n                >\r\n                  $\r\n                </label>\r\n              </span>\r\n            </div>\r\n          )}\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div\r\n          className={divStyleClass}\r\n          french={this.props.language === \"en\" ? \"true\" : \"false\"}\r\n        >\r\n          <div className=\"controlTitle\">\r\n            {title}\r\n            {/*  {checkInfo === true && (\r\n              <Info id={idM} msg={msg} infoPosition={this.props.infoPosition}/>\r\n            )} */}\r\n            {this.props.infoIcon !== undefined ? (\r\n              <Info infoIcon={this.props.infoIcon} /> // id={this.props.infoIcon.infoID} msg={this.props.infoIcon.infoText} popupRight={this.props.infoIcon.popupRight} iconName={this.props.infoIcon.infoAlert? \"infoRed.png\":\"info.png\"} />\r\n            ) : (\r\n              \"\"\r\n            )}\r\n          </div>\r\n          {/*{iOS ? <input type=\"number\" inputmode=\"numeric\" pattern=\"\\d*\"  min=\"0\" max={max} step={step} className={styleClass} isDisabled={disable} onFocus={this.handleFocus} onClick={this.select} value={this.getValue(displayValue)} onChange={evt => this.updateInputValue(evt)} onBlur={this.toggleEditing.bind(this)} />*/}\r\n          {iOS2 ? (\r\n            \"\" //<input type=\"text\" inputmode=\"decimal\" min=\"0.0\" max={max} step={step} className={styleClass} isDisabled={disable} onFocus={this.handleFocus} onClick={this.select} value={displayValue} onChange={evt => this.updateInputValue(evt)}  />\r\n          ) : (\r\n            <div>\r\n              {perc === false ? (\r\n                <div>\r\n                  <input\r\n                    style={inputColorStyle}\r\n                    type=\"text\"\r\n                    key=\"if\"\r\n                    className={styleClass}\r\n                    inputMode=\"decimal\"\r\n                    disabled={disable}\r\n                    value={displayValue}\r\n                    onFocus={(e) => this.handleFocus(e)}\r\n                    onClick={this.selectField}\r\n                    onMouseUp={this.onMouseUpSelect}\r\n                    onChange={(evt) => this.updateInputValue(evt)}\r\n                    onBlur={this.toggleEditing.bind(this)}\r\n                  />\r\n                </div>\r\n              ) : (\r\n                <div className={styleClass}>\r\n                  {/* <div className=\"percentDiv\"> */}\r\n                  <span>\r\n                    <input\r\n                      type=\"text\"\r\n                      key=\"if1\"\r\n                      className={styleClass2}\r\n                      style={{ paddingTop: \"0px\", width: \"86%\" }}\r\n                      inputMode=\"decimal\"\r\n                      disabled={disable}\r\n                      value={displayValue}\r\n                      onFocus={(e) => this.handleFocus(e)}\r\n                      onMouseUp={this.onMouseUpSelect}\r\n                      onClick={this.selectField}\r\n                      onChange={(evt) => this.updateInputValue(evt)}\r\n                      onBlur={this.toggleEditing.bind(this)}\r\n                    />\r\n                    <label\r\n                      style={{\r\n                        display: \"inline-block\",\r\n                        float: \"left\",\r\n                        width: \"3%\",\r\n                      }}\r\n                    >\r\n                      %\r\n                    </label>\r\n                  </span>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport class AddRemove extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.doAdd = this.doAdd.bind(this);\r\n    this.doRemove = this.doRemove.bind(this);\r\n  }\r\n\r\n  doRemove = (id) => {\r\n    if (!this.props.disabled)\r\n      this.props.handleDoRemove(id);\r\n  };\r\n\r\n  doAdd = () => {\r\n    if (!this.props.disabled)\r\n      this.props.handleDoAdd();\r\n  };\r\n\r\n  render() {\r\n    const noRow = 0; //this.props.minComps === 2 ? 2 : 0;\r\n    let className=\"addRemove\";\r\n    if(this.props.disabled)\r\n      className=\"addRemove addRemoveDisabled\";\r\n    \r\n\tlet minRows = this.props.minComps;\r\n    const maxRows=this.props.maxRows === undefined?100:this.props.maxRows;\r\n    \r\n    if (minRows === undefined) minRows = 1;\r\n    var returnAR = \"\";\r\n\r\n    \r\n    if (\r\n      (this.props.currentID >= this.props.numberComps ||\r\n      this.props.numberComps === 0) && this.props.currentID < maxRows\r\n    ) {\r\n      returnAR = (\r\n        <span>\r\n          <button className={className} onClick={this.doAdd}>\r\n            +\r\n          </button>\r\n        </span>\r\n      );\r\n      if (\r\n        (minRows > 1 && this.props.currentID > minRows) ||\r\n        this.props.currentID > minRows\r\n      )\r\n        returnAR = (\r\n          <span>\r\n            <button className={className} onClick={this.doAdd}>\r\n              +\r\n            </button>\r\n            <button\r\n              className={className}\r\n              onClick={() => {\r\n                this.doRemove(this.props.currentID);\r\n              }}\r\n            >\r\n              -\r\n            </button>\r\n          </span>\r\n        );\r\n    } else if (\r\n      !(this.props.fixedFirstRow === true && this.props.currentID === 1) &&\r\n      (this.props.currentID > minRows || minRows <= 1)\r\n    )\r\n      returnAR = (\r\n        <span>\r\n          <button\r\n            className={className}\r\n            onClick={() => {\r\n              this.doRemove(this.props.currentID);\r\n            }}\r\n          >\r\n            -\r\n          </button>\r\n        </span>\r\n      );\r\n    return returnAR;\r\n  }\r\n}\r\n","import { name, version } from \"../../package.json\";\r\nimport {\r\n  GROWTHDIR,\r\n  MONTHS,\r\n  ASSETS,\r\n  ASSET_OWNERSHIP_ACTION,\r\n  ASSET_TAX,\r\n  INCOMESOURCES,\r\n  OWNERSHIP,\r\n  SEX,\r\n  SMOKING,\r\n  MEMBER,\r\n  LIABILITIES,\r\n  INCOMENEEDS,\r\n  PROVINCE,\r\n  QUOTE_SPOUSE,\r\n  QUOTE_CLIENT,\r\n  DEFAULT_QUOTE,\r\n  OUTPUT_WIDTH_PCT,\r\n  APPLET_EP,\r\n  MAX_ORPHAN_DUR_QC,\r\n  MAX_ORPHAN_DUR_NON_QC,\r\n} from \"../definitions/generalDefinitions\";\r\nimport {\r\n  cleanFormat,\r\n  formatMoney,\r\n  getListItemNameFromKey,\r\n  isSingleFamily,\r\n  getDefaultImages,\r\n  getListItemKeyFromName,\r\n} from \"../utils/helper\";\r\n\r\nimport { versionDetails, getAfterTaxTotalIncome } from \"../utils/helper\";\r\nimport { appletMode } from \"../../package.json\";\r\nimport { element } from \"prop-types\";\r\n\r\nexport function setUIDataToAPI(dataInput, outputInsuranceNeed) {\r\n \r\n  let age = dataInput.Clients[0].Age;\r\n  const taxRate =\r\n    dataInput.length > 1\r\n      ? dataInput.Clients[QUOTE_SPOUSE].avgTaxRate / 100\r\n      : dataInput.Clients[QUOTE_CLIENT].avgTaxRate / 100;\r\n  if (dataInput.length > 1 && dataInput.Clients[QUOTE_SPOUSE].Age < age)\r\n    age = dataInput.Clients[QUOTE_SPOUSE].Age;\r\n  let dataLives = setLives(dataInput);\r\n  let dataAssets = setAssets(dataInput);\r\n  let dataLiabs = setLiabs(dataInput);\r\n  let dataSources = setSources(dataInput, taxRate);\r\n  let dataEstateContings = setEstateContings();\r\n  let dataIncomeNeeds = setIncomeNeeds(dataInput);\r\n  let dataRates = setRates(dataInput);\r\n  let dataProjSettings = setProjSettings(age, dataInput, parseFloat(cleanFormat(outputInsuranceNeed, dataInput.Presentations[0].language)));\r\n  let dataNA = {\r\n    lives: dataLives,\r\n    assets: dataAssets,\r\n    liabilities: dataLiabs,\r\n    personalIncomeSources: dataSources,\r\n    estateContingiencies: dataEstateContings,\r\n    incomeNeeds: dataIncomeNeeds,\r\n    ratesPack: dataRates,\r\n    projectionSettings: dataProjSettings,\r\n    //liabilities: null,\r\n    //personalIncomeSources: null,\r\n    //estateContingiencies:  null,\r\n    //incomeNeeds:  null\r\n    //ratesPack:  null,\r\n    //projectionSettings:  null\r\n  };\r\n  return dataNA;\r\n}\r\n\r\nfunction setLives(dataInput) {\r\n  let dataE = [];\r\n  let i;\r\n  // for calc purposes\r\n  for (i = 0; i < dataInput.Clients.length; i++) {\r\n    dataE.push({\r\n      Age: dataInput.Clients[i].Age,\r\n      Sex: dataInput.Clients[i].sexKey, // === SEX.FEMALE.Key ? SEX.FEMALE : SEX.MALE,\r\n      Smk:\r\n        dataInput.Clients[i].smokerKey === SMOKING.SMOKER.Key\r\n          ? \"S_STD\"\r\n          : \"NS_STD\", // 2 and 5 : this MCC stuff with 5 leveles elite ...\r\n      Rating: 100,\r\n      //\t\tmember: (i===1 && dataInput.Clients[i].memberKey===MEMBER.DEPENDENT_ADULT.Key)? MEMBER.SPOUSE.Key: //MEMBER[\"en\"].Values[MEMBER[lang].Values.indexOf(dataInput.Clients[i].member)],\r\n      //\t\t\t\t\tdataInput.Clients[i].memberKey,//Object.values(MEMBER).filter(obj => obj.Key=== dataInput.Clients[i].memberKey)[0],//.value.en,\r\n      member: dataInput.Clients[i].memberKey,\r\n      salary: dataInput.Clients[i].Income,\r\n      CPPeligibility: dataInput.Clients[i].Eligibility / 100,\r\n      retirementAge: dataInput.Clients[i].retirementAge,\r\n      avgTaxRate: dataInput.Clients[i].avgTaxRate / 100,\r\n      isQC: dataInput.Presentations[0].provinceKey === \"QC\" ? true : false,\r\n      Name: dataInput.Clients[i].Name,\r\n    });\r\n  }\r\n  return dataE;\r\n}\r\n\r\nfunction setTaxAPIMethod(TaxKey, assetKey) {\r\n  // based on API enum\r\n  /* public enum taxTreatments\r\n        {\r\n            NonTaxable=0,\r\n            CapitalGainIncome, 1\r\n            CapitalGainAnnual, 2\r\n            Registered, 3\r\n            FullyTaxable, 4\r\n            CapitalGainDividend,  5\r\n            Dividend, 6\r\n            RRIF, 7\r\n            LifeInsurance, 8\r\n            Cash, 9\r\n            InterestIncome, 10\r\n            CapitalGainQSmallBusiness, 11\r\n        } */\r\n  // from\r\n  /* 'Non-taxable',\t\r\n\t\t\t\"Capital Gains Deferred\",\r\n\t\t\t\"Capital Gains Annual\",\r\n\t\t\t'Registered',\t\r\n\t\t\t'Fully Taxable',\t\r\n\t\t\t'Dividend'\t */\r\n  //console.log(Tax,Type,)\r\n\r\n  let taxMethodIndex = 0;\r\n\r\n  if (TaxKey === ASSET_TAX.NON_TAXABLE.Key) taxMethodIndex = 0;\r\n  //NonTaxable\r\n  else if (TaxKey === ASSET_TAX.CAPITAL_GAINS_DEFERRED.Key) {\r\n    if (assetKey === ASSETS.SMALL_BUSINESS_SHARES.Key)\r\n      //value[lang])\r\n      taxMethodIndex = 11;\r\n    // CapitalGainQSmallBusiness, 11\r\n    else taxMethodIndex = 1; // CapitalGainIncome, 1\r\n  } else if (TaxKey === ASSET_TAX.CAPITAL_GAINS_ANNUAL.Key) taxMethodIndex = 2;\r\n  //  CapitalGainAnnual\r\n  else if (TaxKey === ASSET_TAX.FULLY_TAXABLE.Key) {\r\n    if (assetKey === ASSETS.INTEREST_BEARING.Key)\r\n      //value[lang])\r\n      taxMethodIndex = 10;\r\n    //InterestIncome, 10\r\n    else taxMethodIndex = 4; // FullyTaxable, 4\r\n  } else if (TaxKey === ASSET_TAX.REGISTERED.Key) taxMethodIndex = 3;\r\n  //Registered, 3\r\n  else if (TaxKey === ASSET_TAX.DIVIDEND.Key) taxMethodIndex = 6; //  Dividend, 6\r\n\r\n  // console.log(taxMethodIndex)\r\n  return taxMethodIndex;\r\n}\r\n\r\nfunction setAssets(dataInput) {\r\n  let dataE = [];\r\n  let i;\r\n  for (i = 0; i < dataInput.Assets.length; i++) {\r\n    const asset = dataInput.Assets[i];\r\n    const assetDesc = asset.description;\r\n    const assetTypeKey =\r\n      asset.assetTypeKey; /*\r\n      dataInput,\r\n      asset.assetTypeKey,\r\n      asset.assetTaxTypeKey\r\n    ); */ // don't add survivor's insurance do in API // const nonClientInsurance=!(asset.assetTypeKey===ASSETS.LIFE_INSURANCE.Key && (asset.ownerKey===ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key || element.ownerKey===ASSET_OWNERSHIP_ACTION.CLIENT_ROLLOVER.Key))\r\n    /*    console.log(asset) */ dataE.push({\r\n      name: Object.values(ASSETS).filter((obj) => obj.Key === assetTypeKey)[0]\r\n        .value.en,\r\n      desc: assetDesc,\r\n      ID: Object.values(ASSETS).filter((obj) => obj.Key === assetTypeKey)[0].ID,\r\n      //taxMethod: setTaxAPIMethod( asset.assetTaxTypeKey,asset.assetTypeKey),\r\n      taxMethod: asset.assetTaxTypeKey,\r\n      //Object.values(ASSET_TAX).filter(obj => obj.Key=== asset.assetTaxTypeKey)[0].value.en,\r\n      owner: Object.values(ASSET_OWNERSHIP_ACTION).filter(\r\n        (obj) => obj.Key === asset.ownerKey\r\n      )[0].ID, // enums in API is same 0-4\r\n      ACB: asset.ACB,\r\n      smallBusinessCapGainExemption: asset.smallBusinessCapGainExemption,\r\n      dispositionYr:\r\n        asset.assetTaxTypeKey === ASSET_TAX.REGISTERED.Key &&\r\n        asset.ownerKey !== ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key\r\n          ? 99\r\n          : asset.DisposeYr,\r\n      dispositionDur: asset.DisposeDur === 0 ? 1 : asset.DisposeDur,\r\n      dispositionYrUlt: 100,\r\n      currValue: asset.currValue,\r\n      annualGrowth: asset.growth / 100,\r\n      incomeRate: asset.incomeRate / 100,\r\n      contributionAmt: asset.contributionAmt,\r\n      contributionStartYr: asset.contributionStartYr,\r\n      contributionDur: asset.contributionDur,\r\n      withdrawalAmt: asset.withdrawalAmt,\r\n      withdrawalStartYr: asset.withdrawalStartYr,\r\n      withdrawalDur: asset.withdrawalDur,\r\n      RRIFStartAge: asset.RRIFStartAge,\r\n    });\r\n  }\r\n  return dataE;\r\n}\r\n\r\nfunction setLiabs(dataInput) {\r\n  let dataE = [];\r\n  let i;\r\n  for (i = 0; i < dataInput.Liabilitys.length; i++) {\r\n    const growth =\r\n      /*  GROWTHDIR[dataInput.Presentations[0].language].Values.indexOf(\r\n        dataInput.Liabilitys[i].growthDir\r\n      ) */\r\n\r\n      dataInput.Liabilitys[i].growthDirKey === GROWTHDIR.GROWS.Key\r\n        ? dataInput.Liabilitys[i].growth / 100\r\n        : -dataInput.Liabilitys[i].growth / 100;\r\n    const liabTypeKey = dataInput.Liabilitys[i].liabTypeKey;\r\n    dataE.push({\r\n      name: Object.values(LIABILITIES).filter(\r\n        (obj) => obj.Key === liabTypeKey\r\n      )[0].value.en,\r\n      ID: Object.values(LIABILITIES).filter((obj) => obj.Key === liabTypeKey)[0]\r\n        .ID,\r\n      owner: dataInput.Liabilitys[i].ownerKey, // OWNERSHIP[\"en\"].Values[OWNERSHIP[lang].Values.indexOf(dataInput.Liabilitys[i].Owner)],\r\n      currValue: dataInput.Liabilitys[i].currValue,\r\n      annualGrowth: growth,\r\n      exposureDur: dataInput.Liabilitys[i].exposureDur,\r\n      annualRepay: dataInput.Liabilitys[i].repay,\r\n    });\r\n  }\r\n  return dataE;\r\n}\r\n\r\nfunction setSources(dataInput, avgTaxRate) {\r\n  let dataE = [];\r\n  let i;\r\n  for (i = 0; i < dataInput.Sources.length; i++) {\r\n    // find source owner avgtaxrate\r\n    let avgTaxRate;\r\n    let salaryOwner = dataInput.Clients.filter((item) => {\r\n      return item.id === dataInput.Sources[i].ownerID;\r\n    });\r\n    if (salaryOwner !== undefined && salaryOwner.length > 0)\r\n      avgTaxRate = salaryOwner[0].avgTaxRate / 100;\r\n\r\n    const sourceTypeKey = dataInput.Sources[i].sourceTypeKey;\r\n    // gov is taken care of in API only needs elig %\r\n    //if (dataInput.Sources[i].Type !== INCOMESOURCES[lang].Values[1] && dataInput.Sources[i].Type !== INCOMESOURCES[lang].Values[2] && dataInput.Sources[i].Type !== INCOMESOURCES[lang].Values[3]) {\r\n    if (\r\n      !(\r\n        dataInput.Sources[i].sourceTypeKey ===\r\n          INCOMESOURCES.GOV_SURVIVORS_PENSION.Key ||\r\n        dataInput.Sources[i].sourceTypeKey ===\r\n          INCOMESOURCES.GOV_ORPHANS_BENEFIT.Key ||\r\n        dataInput.Sources[i].sourceTypeKey ===\r\n          INCOMESOURCES.GOV_DEATH_BENEFIT.Key\r\n      )\r\n    ) {\r\n      dataE.push({\r\n        ID: Object.values(INCOMESOURCES).filter(\r\n          (obj) => obj.Key === sourceTypeKey\r\n        )[0].ID,\r\n        name: Object.values(INCOMESOURCES).filter(\r\n          (obj) => obj.Key === sourceTypeKey\r\n        )[0].value.en,\r\n        amount: dataInput.Sources[i].amount,\r\n        startYear: dataInput.Sources[i].startYear,\r\n        duration: dataInput.Sources[i].duration,\r\n        annualGrowth: dataInput.Presentations[0].inflation / 100,\r\n        taxRate:\r\n          sourceTypeKey === INCOMESOURCES.DIVIDEND_INCOME.Key\r\n            ? dataInput.Sources[i].taxRate / 100\r\n            : avgTaxRate,\r\n        ownerID: dataInput.Sources[i].ownerID,\r\n      });\r\n    }\r\n  }\r\n  return dataE;\r\n}\r\n\r\nfunction setEstateContings() {\r\n  let dataE = [];\r\n  return dataE;\r\n}\r\n\r\nfunction setIncomeNeeds(dataInput) {\r\n  let dataItems = [];\r\n  let i;\r\n  for (i = 0; i < dataInput.Needs.length; i++) {\r\n    const needTypeKey = dataInput.Needs[i].needTypeKey;\r\n    dataItems.push({\r\n      ID: Object.values(INCOMENEEDS).filter((obj) => obj.Key === needTypeKey)[0]\r\n        .ID,\r\n      name: Object.values(INCOMENEEDS).filter(\r\n        (obj) => obj.Key === needTypeKey\r\n      )[0].value.en,\r\n\r\n      amount: dataInput.Needs[i].amount,\r\n      incomePercent: dataInput.Needs[i].Percent / 100,\r\n      startYear: dataInput.Needs[i].startYear,\r\n      duration: dataInput.Needs[i].duration,\r\n      annualGrowth: dataInput.Presentations[0].inflation / 100,\r\n    });\r\n  }\r\n  let dataE = {\r\n    incomePercentAfterDeath: 0.6,\r\n    incomeNeedItems: dataItems,\r\n    upToChildrenOutYrs: 0,\r\n    childrenOutToRetirementYrs: 0,\r\n    retirementToEndYrs: 0,\r\n  };\r\n\r\n  return dataE;\r\n}\r\n\r\nfunction setProjSettings(age, dataInput, outputInsuranceNeed) {\r\n  var tempDate = new Date();\r\n  var date =\r\n    tempDate.getFullYear() +\r\n    \"-\" +\r\n    (tempDate.getMonth() + 1) +\r\n    \"-\" +\r\n    tempDate.getDate();\r\n\r\n  let dataE = {\r\n    deathYear: 0,\r\n    deathOf: 0,\r\n    startYear: 1,\r\n    endYear: 100 - age + 1,\r\n    province: dataInput.Presentations[0].provinceKey,\r\n    language: dataInput.Presentations[0].language === \"en\" ? 0 : 1,\r\n    returnType: 4,\r\n    projectEndOption: dataInput.Presentations[0].periodOption, //toRetirement ? 0 : 1,\r\n    clientsName1: dataInput.Presentations[0].designedFor,\r\n    agentName: dataInput.Presentations[0].designedBy,\r\n    valuationDate: date,\r\n    notes: dataInput.Presentations[0].notes,\r\n    version: versionDetails().version,\r\n    caller: appletMode,\r\n    insuranceAmt: outputInsuranceNeed,\r\n    /*   imageLogo: dataInput.Presentations[0].adviserLogo.image,\r\n    imageLogoSize:dataInput.Presentations[0].adviserLogo.size,\r\n    imageLogoLeft:dataInput.Presentations[0].adviserLogo.left,\r\n    imageLogoAllPages: dataInput.Presentations[0].adviserLogo.allPages,\r\n    imageApplet: dataInput.Presentations[0].adviserLogo.imageApplet */\r\n  };\r\n  return dataE;\r\n}\r\n\r\nfunction setRates(dataInput) {\r\n  // console.log(dataInput.Presentations[0].taxRate / 100)\r\n  let dataE = {\r\n    investmentRate: dataInput.Presentations[0].invRate / 100,\r\n    taxRate: dataInput.Presentations[0].taxRate / 100,\r\n    dividendTaxRate: 0.33,\r\n    capitalGainsInclusion: 0.5,\r\n    inflationRate: dataInput.Presentations[0].inflation / 100,\r\n  };\r\n\r\n  return dataE;\r\n}\r\n\r\nexport function loadSavedDataToUI(savedJSon, dataInput) {\r\n  //console.log(savedJSon)\r\n  dataInput.Presentations[0].language =\r\n    savedJSon.projectionSettings.language === 0 ? \"en\" : \"fr\";\r\n  let i;\r\n  dataInput.Clients = [];\r\n  dataInput.clientsNo = savedJSon.lives.length;\r\n  //console.log(dataInput.Clients)\r\n\r\n  let smk;\r\n  for (i = 0; i < savedJSon.lives.length; i++) {\r\n    smk = savedJSon.lives[i].Smk <= 2 ? \"NS_STD\" : \"S_STD\";\r\n    const memberKey = Object.values(MEMBER).filter(\r\n      (obj) => obj.ID === savedJSon.lives[i].member\r\n    )[0].Key;\r\n    let addLife = true;\r\n\r\n    if (\r\n      APPLET_EP &&\r\n      !(memberKey === MEMBER.CLIENT.Key || memberKey === MEMBER.SPOUSE.Key)\r\n    )\r\n      addLife = false;\r\n\r\n    if (addLife) {\r\n      dataInput.Clients.push({\r\n        id: i + 1,\r\n        Age: savedJSon.lives[i].Age,\r\n        //savedJSon.lives[i].Sex===0? SEX.MALE.Key : SEX.FEMALE.Key,\r\n        sexKey: Object.values(SEX).filter(\r\n          (obj) => obj.ID === savedJSon.lives[i].Sex\r\n        )[0].Key,\r\n        smokerKey:\r\n          smk === \"NS_STD\" ? SMOKING.NON_SMOKER.Key : SMOKING.SMOKER.Key,\r\n        Income: savedJSon.lives[i].salary,\r\n        avgTaxRate: 100 * savedJSon.lives[i].avgTaxRate,\r\n        //member: MEMBER[data.lang].Values[savedJSon.lives[i].member],\r\n        //MEMBER.[savedJSon.lives[i].member].value[data.lang],\r\n        memberKey: memberKey,\r\n        retirementAge: savedJSon.lives[i].retirementAge,\r\n        Eligibility: 100 * savedJSon.lives[i].CPPeligibility,\r\n        Name: savedJSon.lives[i].Name,\r\n      });\r\n    }\r\n  }\r\n\r\n  //console.log(dataInput.Clients)\r\n\r\n  dataInput.Assets = [];\r\n  dataInput.assetsNo = savedJSon.assets.length;\r\n\r\n  for (i = 0; i < savedJSon.assets.length; i++) {\r\n    // console.log((savedJSon.assets[i].owner),Object.values(ASSET_OWNERSHIP_ACTION).filter(obj => obj.ID=== savedJSon.assets[i].owner)[0].Key)\r\n    // console.log(Object.values(ASSET_OWNERSHIP_ACTION).filter(obj => obj.ID=== savedJSon.assets[i].owner)[0].Key, Object.values(ASSET_TAX).filter(obj => obj.ID=== savedJSon.assets[i].taxMethod)[0].Key)\r\n    // as of ver 1.0.7 personal residence became principal residence\r\n\r\n    if (savedJSon.assets[i].name === ASSETS.PERSONAL_RESIDENCE.value.oldName)\r\n      savedJSon.assets[i].name = ASSETS.PERSONAL_RESIDENCE.value.en;\r\n\r\n    let ownerKey = Object.values(ASSET_OWNERSHIP_ACTION).filter(\r\n      (obj) => obj.ID === savedJSon.assets[i].owner\r\n    )[0].Key;\r\n\r\n    if (APPLET_EP && savedJSon.assets[i].name === ASSETS.RRSP_RRIF.value.en) {\r\n      if (savedJSon.lives.length === 1)\r\n        ownerKey = ASSET_OWNERSHIP_ACTION.CLIENT.Key;\r\n      else {\r\n        if (ownerKey !== ASSET_OWNERSHIP_ACTION.CLIENT.Key)\r\n          ownerKey = ASSET_OWNERSHIP_ACTION.SPOUSE.Key;\r\n      }\r\n    }\r\n\r\n    dataInput.Assets.push({\r\n      id: i + 1,\r\n      //assetTypeKey: Object.values(ASSETS).filter(obj => obj.ID=== savedJSon.assets[i].ID)[0].Key,\r\n      assetTypeKey: findMatchingKey(\r\n        Object.values(ASSETS),\r\n        savedJSon.assets[i].name\r\n      ),\r\n      description: savedJSon.assets[i].desc,\r\n      ownerKey: ownerKey,\r\n      assetTaxTypeKey: Object.values(ASSET_TAX).filter(\r\n        (obj) => obj.ID === savedJSon.assets[i].taxMethod\r\n      )[0].Key,\r\n      currValue: savedJSon.assets[i].currValue,\r\n      growth: savedJSon.assets[i].annualGrowth * 100,\r\n      DisposeYr: savedJSon.assets[i].dispositionYr,\r\n      DisposeDur: savedJSon.assets[i].dispositionDur,\r\n      ACB: savedJSon.assets[i].ACB,\r\n      smallBusinessCapGainExemption:\r\n        savedJSon.assets[i].smallBusinessCapGainExemption,\r\n      contributionAmt: savedJSon.assets[i].contributionAmt,\r\n      contributionStartYr: savedJSon.assets[i].contributionStartYr,\r\n      contributionDur: savedJSon.assets[i].contributionDur,\r\n      withdrawalAmt: savedJSon.assets[i].withdrawalAmt,\r\n      withdrawalStartYr: savedJSon.assets[i].withdrawalStartYr,\r\n      withdrawalDur: savedJSon.assets[i].withdrawalDur,\r\n      incomeRate: savedJSon.assets[i].incomeRate * 100,\r\n      RRIFStartAge: savedJSon.assets[i].RRIFStartAge,\r\n    });\r\n  }\r\n\r\n  dataInput.Liabilitys = [];\r\n  dataInput.liabilitysNo = savedJSon.liabilities.length;\r\n\r\n  for (i = 0; i < savedJSon.liabilities.length; i++) {\r\n    // console.log(savedJSon.liabilities[i])\r\n    // console.log(findMatchingKey(Object.values(LIABILITIES),savedJSon.liabilities[i].name))\r\n    dataInput.Liabilitys.push({\r\n      id: i + 1,\r\n      //liabTypeKey: Object.values(LIABILITIES).filter(obj => obj.ID=== savedJSon.liabilities[i].ID)[0].Key,\r\n      liabTypeKey: findMatchingKey(\r\n        Object.values(LIABILITIES),\r\n        savedJSon.liabilities[i].name\r\n      ),\r\n      ownerKey: OWNERSHIP.CLIENT.Key,\r\n      currValue: savedJSon.liabilities[i].currValue,\r\n      /* growthDir:\r\n        savedJSon.liabilities[i].annualGrowth >= 0\r\n          ? GROWTHDIR[dataInput.Presentations[0].language].Values[0]\r\n          : GROWTHDIR[dataInput.Presentations[0].language].Values[1], */\r\n      growthDirKey:\r\n        savedJSon.liabilities[i].annualGrowth >= 0\r\n          ? GROWTHDIR.GROWS.Key\r\n          : GROWTHDIR.REDUCES.Key,\r\n      growth: Math.abs(savedJSon.liabilities[i].annualGrowth * 100),\r\n      exposureDur: savedJSon.liabilities[i].exposureDur,\r\n      assetTaxLiabID: 0,\r\n      repay: savedJSon.liabilities[i].annualRepay,\r\n    });\r\n  }\r\n\r\n  dataInput.Sources = [];\r\n\r\n  dataInput.sourcesNo = savedJSon.personalIncomeSources.length;\r\n\r\n  for (i = 0; i < savedJSon.personalIncomeSources.length; i++) {\r\n    dataInput.Sources.push({\r\n      id: i + 1,\r\n      //sourceTypeKey: Object.values(INCOMESOURCES).filter(obj => obj.ID=== savedJSon.personalIncomeSources[i].ID)[0].Key,\r\n      //sourceTypeKey: Object.values(INCOMESOURCES).filter(obj => obj.value.en=== savedJSon.personalIncomeSources[i].Name)[0].Key,\r\n      sourceTypeKey: findMatchingKey(\r\n        Object.values(INCOMESOURCES),\r\n        savedJSon.personalIncomeSources[i].Name\r\n      ),\r\n\r\n      amount: savedJSon.personalIncomeSources[i].amount,\r\n      startYear: savedJSon.personalIncomeSources[i].startYear,\r\n      duration: savedJSon.personalIncomeSources[i].duration,\r\n      taxRate: savedJSon.personalIncomeSources[i].taxRate * 100,\r\n      ownerID:\r\n        savedJSon.personalIncomeSources[i].ownerID === undefined ||\r\n        savedJSon.personalIncomeSources[i].ownerID === 0\r\n          ? dataInput.Clients.length > 1\r\n            ? 2\r\n            : 1\r\n          : savedJSon.personalIncomeSources[i].ownerID, // spouse or 1st child\r\n    });\r\n  }\r\n\r\n  dataInput.Needs = [];\r\n\r\n  //console.log(savedJSon.incomeNeeds.incomeNeedItems.length)\r\n\r\n  dataInput.needsNo = savedJSon.incomeNeeds.incomeNeedItems.length;\r\n\r\n  for (i = 0; i < savedJSon.incomeNeeds.incomeNeedItems.length; i++) {\r\n    //console.log(i,savedJSon.incomeNeeds.incomeNeedItems[i].amount, Object.values(INCOMENEEDS).filter(obj => obj.ID=== savedJSon.incomeNeeds.incomeNeedItems[i].ID)[0].Key)\r\n    const needKey = findMatchingKey(\r\n      Object.values(INCOMENEEDS),\r\n      savedJSon.incomeNeeds.incomeNeedItems[i].name\r\n    );\r\n    let amt = savedJSon.incomeNeeds.incomeNeedItems[i].amount;\r\n    if (\r\n      needKey === INCOMENEEDS.PERCET_OF_INCOME.Key &&\r\n      dataInput.Clients.length > 1\r\n    )\r\n      // ie not single or EP\r\n      amt = parseInt(\r\n        savedJSon.incomeNeeds.incomeNeedItems[i].incomePercent *\r\n          getAfterTaxTotalIncome(dataInput.Clients, 1)\r\n      );\r\n    dataInput.Needs.push({\r\n      id: i + 1,\r\n      //needTypeKey: Object.values(INCOMENEEDS).filter(obj => obj.ID=== savedJSon.incomeNeeds.incomeNeedItems[i].ID)[0].Key,\r\n      //needTypeKey: Object.values(INCOMENEEDS).filter(obj => obj.value.en=== savedJSon.incomeNeeds.incomeNeedItems[i].name)[0].Key,\r\n      needTypeKey: needKey,\r\n\r\n      Percent: savedJSon.incomeNeeds.incomeNeedItems[i].incomePercent * 100,\r\n      amount: amt,\r\n      startYear: savedJSon.incomeNeeds.incomeNeedItems[i].startYear,\r\n      duration: savedJSon.incomeNeeds.incomeNeedItems[i].duration,\r\n    });\r\n  }\r\n\r\n  dataInput.Presentations = [];\r\n  dataInput.presentationsNo = 1;\r\n\r\n  //for (i = 0; i < savedJSon.liabilities.length; i++) {\r\n\r\n  const dataInputDefImages = loadDefaultCase();\r\n  let logo;\r\n  let appletImage;\r\n  /* console.log(dataInputDefImages) */\r\n  if (dataInputDefImages !== undefined && dataInputDefImages !== null) {\r\n    logo = dataInputDefImages.Presentations[0].adviserLogo;\r\n    appletImage = dataInputDefImages.Presentations[0].appletImage;\r\n  } else {\r\n    /* logo={image:null, left: 0,size: 90, allPages: false}\r\n    appletImage={image:null, left: 0,size: 90, allPages: false} */\r\n    const images = getDefaultImages();\r\n    logo = images.adviserLogo; //  {image:null, left: 0,size: OUTPUT_WIDTH_PCT, allPages: false, top:true, showDetails:false}\r\n    appletImage = images.appletImage; //{image:APPLET_INA? require(\"../images/INA.png\"):require(\"../images/estate.protection.applet.cover.graphic.png\"), left: 0,size: OUTPUT_WIDTH_PCT, allPages: false, top:true, showDetails:false}\r\n  }\r\n\r\n  dataInput.Presentations.push({\r\n    id: 1,\r\n    provinceKey: Object.values(PROVINCE).filter(\r\n      (obj) => obj.ID === savedJSon.projectionSettings.province\r\n    )[0].Key,\r\n    invRate: savedJSon.ratesPack.investmentRate * 100,\r\n    inflation: savedJSon.ratesPack.inflationRate * 100,\r\n    taxRate: savedJSon.ratesPack.taxRate * 100,\r\n    designedFor: savedJSon.projectionSettings.clientsName1,\r\n    designedBy: savedJSon.projectionSettings.agentName,\r\n    valuationDate: savedJSon.projectionSettings.valuationDate,\r\n    notes: savedJSon.projectionSettings.notes,\r\n    // version: savedJSon.projectionSettings.version, keep curr app version as opposed to saved ver\r\n    language: savedJSon.projectionSettings.language === 0 ? \"en\" : \"fr\",\r\n    periodOption: savedJSon.projectionSettings.projectEndOption, //=== DISPLAY_RETIREMENT add this for saved files\r\n\r\n    adviserLogo: logo,\r\n    appletImage: appletImage,\r\n    //imageApplet:savedJSon.projectionSettings.imageApplet,\r\n  });\r\n\r\n  return dataInput;\r\n}\r\n\r\nexport function loadDefaultCase() {\r\n  let storageKey = DEFAULT_QUOTE;\r\n\r\n  const objJSONData = JSON.parse(localStorage.getItem(storageKey));\r\n  // make sure details dont show\r\n  //objJSONData.Presentations[0].adviserLogo.showDetails=false\r\n  return objJSONData;\r\n}\r\n\r\nexport function getOutputValues(data) {\r\n  let output = {\r\n    designedFor: \"\",\r\n    designedBy: \"\",\r\n    dateApplet: \"\",\r\n    province: \"\",\r\n    clients: [],\r\n    assets: [],\r\n    liabilities: [],\r\n    source: [],\r\n    totalLiab: 0,\r\n    Income: 0,\r\n    Income2: 0,\r\n    survivorATaxIncome: 0,\r\n    percentNeed1: 0,\r\n    percentNeed2: [],\r\n    govDB: 0,\r\n    totalAsset: 0,\r\n    totalDisposeAsset: 0,\r\n    totalLiab: 0,\r\n    totalSource: 0,\r\n    totalSource2: 0,\r\n    percentNeed1: 0,\r\n    totalSource: 0,\r\n    totalSourceATax: 0,\r\n    totalSource2ATax: 0,\r\n    infRate: 0,\r\n    invRate: 0,\r\n    insNeedLE: 0,\r\n    insNeedRet: 0,\r\n    insNeedYgChild25: 0,\r\n    insNeedYgChild18: 0,\r\n    ygChild: 100,\r\n    hasChild: false,\r\n  };\r\n\r\n  let dateObj = new Date();\r\n  let month = dateObj.getUTCMonth() + 1; //months from 1-12\r\n  let day = dateObj.getUTCDate();\r\n  let year = dateObj.getUTCFullYear();\r\n  const input = data.dataInput;\r\n  const singleFamily = isSingleFamily(input.Clients);\r\n\r\n  output.language = input.Presentations[0].language;\r\n  output.dateApplet =\r\n    output.language === \"en\"\r\n      ? MONTHS[output.language][month - 1] + \" \" + day + \", \" + year\r\n      : day + \" \" + MONTHS[output.language][month - 1] + \" \" + year;\r\n  //output.language === \"en\"\r\n  //\t? months[month - 1] + \" \" + day + \", \" + year\r\n  //\t: day + \" \" + monthsFr[month - 1] + \" \" + year;\r\n  output.designedFor = input.Presentations[0].designedFor;\r\n  output.designedBy = input.Presentations[0].designedBy;\r\n  output.province = getListItemNameFromKey(\r\n    //input.Presentations[0].Province\r\n    PROVINCE,\r\n    input.Presentations[0].provinceKey,\r\n    output.language\r\n  );\r\n\r\n  //const retAge = input.Clients[0].retirementAge;\r\n  //const retAge2 = input.Clients[1].retirementAge;\r\n  output.Income = input.Clients[QUOTE_CLIENT].Income;\r\n  output.Income2 =\r\n    input.Clients.length > 1 ? input.Clients[QUOTE_SPOUSE].Income : 0;\r\n\r\n  output.invRate = input.Presentations[0].invRate;\r\n  output.infRate = input.Presentations[0].inflation;\r\n \r\n  output.insNeedRet = parseFloat(cleanFormat(data.insuranceNeedRet, output.language));\r\n  output.insNeedLE = parseFloat(cleanFormat(data.insuranceNeedLE, output.language));\r\n\r\n  output.ygChild = 100;\r\n  output.hasChild = false;\r\n  const childMember = MEMBER.CHILD.Key;\r\n  let Children = input.Clients.filter(function (item) {\r\n    return item.memberKey === childMember;\r\n  });\r\n  if (Children.length > 0) {\r\n    output.hasChild = true;\r\n    Children.forEach((element) => {\r\n      if (element.Age <= output.ygChild) output.ygChild = element.Age;\r\n    });\r\n  }\r\n\r\n  const provinceKey = getListItemKeyFromName(PROVINCE, output.province);\r\n  const maxDur =\r\n    provinceKey === \"QC\" ? MAX_ORPHAN_DUR_QC : MAX_ORPHAN_DUR_NON_QC;\r\n  output.youngestChildEndAge = maxDur;\r\n  if (output.hasChild)\r\n    output.youngestChildEndAge = Math.min(\r\n      maxDur,\r\n      input.Clients.filter((item) => {\r\n        return item.Age === output.ygChild;\r\n      })[0].retirementAge\r\n    );\r\n\r\n  //console.log(data);\r\n  output.insNeedYgChild25 = 0;\r\n  output.insNeedYgChild18 = 0;\r\n  for (\r\n    let i = 0;\r\n    i < output.youngestChildEndAge - output.ygChild;\r\n    output.insNeedYgChild25 +=\r\n      data.dataShortfall[i++] / Math.pow(1 + output.invRate / 100, i - 1)\r\n  );\r\n\r\n  for (\r\n    let i = 0;\r\n    i < 18 - output.ygChild;\r\n    output.insNeedYgChild18 +=\r\n      data.dataShortfall[i++] / Math.pow(1 + output.invRate / 100, i - 1)\r\n  );\r\n\r\n  output.insNeedYgChild25 =\r\n    output.insNeedYgChild25 < 0 ? 0 : output.insNeedYgChild25;\r\n  output.insNeedYgChild18 =\r\n    output.insNeedYgChild18 < 0 ? 0 : output.insNeedYgChild18;\r\n\r\n  /* let insNeedYgChild18=cleanFormat(insNeedRet)*((Math.pow(1+invRate/100,18-ygChild))/(Math.pow(1+invRate/100,retAge2-input.Clients[1].Age)));\r\n\t\t\t let insNeedYgChild25=cleanFormat(insNeedRet)*((Math.pow(1+invRate/100,25-ygChild))/(Math.pow(1+invRate/100,retAge2-input.Clients[1].Age)));*/\r\n\r\n  output.liabilities = [];\r\n\r\n  Object.values(LIABILITIES).forEach((element) => {\r\n    if (element.order > 0)\r\n      output.liabilities.push({\r\n        name: element.value[output.language],\r\n        value: 0,\r\n      });\r\n  });\r\n\r\n  /* LIABILITIES[output.language].Values.forEach(function(element) {\r\n\t\t  liabilities.push({ name: element, value: 0 });\r\n\t\t}); */\r\n  /* \t\toutput.incomeNeeds = [];\r\n\t\tINCOMENEEDS[output.language].Values.forEach(function(element) {\r\n\t\t  output.incomeNeeds.push({ name: element, value: 0 });\r\n\t\t});\r\n */\r\n\r\n  output.incomeNeeds = [];\r\n  Object.values(INCOMENEEDS).forEach((element) => {\r\n    output.incomeNeeds.push({ name: element.value[output.language], value: 0 });\r\n  });\r\n\r\n  // populate with what was assigned'\r\n  output.totalLiab = 0;\r\n  output.totalLiabExcludeDeathRelated = 0;\r\n  input.Liabilitys.forEach((element) => {\r\n    //let pos = liabilities.findIndex(i => i.name === element.Type);\r\n    /* let pos = liabilities.indexOf(\r\n\t\t\tliabilities.filter(i => i.name === element.Type)[0]\r\n\t\t  ); */\r\n    let pos = output.liabilities.indexOf(\r\n      output.liabilities.filter(\r\n        (i) =>\r\n          i.name ===\r\n          getListItemNameFromKey(\r\n            LIABILITIES,\r\n            element.liabTypeKey,\r\n            output.language\r\n          )\r\n      )[0]\r\n    );\r\n    output.totalLiab += element.currValue;\r\n\r\n    output.totalLiabExcludeDeathRelated +=\r\n      element.liabTypeKey === LIABILITIES.LAST_EXPENSES.Key ||\r\n      element.liabTypeKey === LIABILITIES.LEGAL_AND_EXECUTOR_FEES.Key ||\r\n      element.liabTypeKey === LIABILITIES.PROBATE.Key\r\n        ? 0\r\n        : element.currValue;\r\n    if (pos !== undefined) output.liabilities[pos].value += element.currValue;\r\n  });\r\n\r\n  output.clients = [];\r\n  let grossIncome = 0;\r\n  input.Clients.forEach(function (element) {\r\n    //let income = \"$\" + formatMoney(element.Income, 0, \",\", \",\");\r\n    grossIncome += element.Income;\r\n    output.clients.push({\r\n      id: element.id,\r\n      memberKey: element.memberKey,\r\n      age: element.Age,\r\n      name: element.Name,\r\n      income: element.Income, //income,//element.memberKey === childMember ? \" - \" : income,\r\n      ret:\r\n        element.memberKey === childMember && !singleFamily\r\n          ? \" - \"\r\n          : element.retirementAge,\r\n    });\r\n  });\r\n\r\n  output.assets = [];\r\n  Object.values(ASSETS).forEach((element) => {\r\n    // console.log(element)\r\n    if (\r\n      !(\r\n        appletMode === \"EP\" &&\r\n        element.Key === ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.Key\r\n      )\r\n    )\r\n      output.assets.push({\r\n        name: element.value[output.language],\r\n        value: 0,\r\n        disposeValue: 0,\r\n      });\r\n  });\r\n\r\n  /*     ASSETS[output.language].Values.forEach(function(element) {\r\n\t\t  assets.push({ name: element, value: 0 });\r\n\t\t}); */\r\n  /*  UNLISTED[output.language].Assets.Values.forEach(function(element) {\r\n\t\t  assets.push({ name: element, value: 0 });\r\n\t\t}); */\r\n  output.totalAsset = 0;\r\n  output.totalAssetExcludeInsurance = 0;\r\n  output.totalAssetInsurance = 0;\r\n  output.totalAssetInsuranceIfSpouse = 0;\r\n  input.Assets.forEach((element) => {\r\n    // console.log(element)\r\n    //let pos = assets.findIndex(i => i.name === element.Type);\r\n    let pos = output.assets.indexOf(\r\n      output.assets.filter(\r\n        (i) =>\r\n          i.name ===\r\n          getListItemNameFromKey(ASSETS, element.assetTypeKey, output.language)\r\n      )[0]\r\n    );\r\n    let showAsDisposed =\r\n      pos !== undefined && pos >= 0 && element.DisposeYr === 0;\r\n    if (\r\n      element.assetTypeKey === ASSETS.LIFE_INSURANCE.Key &&\r\n      !(\r\n        element.ownerKey === ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key ||\r\n        element.ownerKey === ASSET_OWNERSHIP_ACTION.CLIENT_ROLLOVER.Key\r\n      )\r\n    )\r\n      showAsDisposed = false;\r\n    output.totalAsset += element.currValue;\r\n    output.totalAssetExcludeInsurance +=\r\n      element.assetTypeKey === ASSETS.LIFE_INSURANCE.Key\r\n        ? 0\r\n        : element.currValue;\r\n    output.totalAssetInsurance +=\r\n      element.assetTypeKey === ASSETS.LIFE_INSURANCE.Key &&\r\n      !(\r\n        element.ownerKey === ASSET_OWNERSHIP_ACTION.SPOUSE.Key ||\r\n        element.ownerKey === ASSET_OWNERSHIP_ACTION.JOINT.Key\r\n      )\r\n        ? element.currValue\r\n        : 0;\r\n    output.totalAssetInsuranceIfSpouse +=\r\n      element.assetTypeKey === ASSETS.LIFE_INSURANCE.Key &&\r\n      element.ownerKey !== ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key &&\r\n      element.ownerKey !== ASSET_OWNERSHIP_ACTION.CLIENT_ROLLOVER.Key\r\n        ? element.currValue\r\n        : 0;\r\n    output.totalDisposeAsset += showAsDisposed ? element.currValue : 0;\r\n\r\n    if (pos !== undefined && pos >= 0)\r\n      output.assets[pos].value += element.currValue;\r\n    if (showAsDisposed) output.assets[pos].disposeValue += element.currValue;\r\n  });\r\n\r\n  let otherAssetsList = \"\";\r\n  input.Assets.forEach((element) => {\r\n    if (\r\n      element.assetTypeKey === ASSETS.OTHER_ASSETS.Key &&\r\n      element.currValue > 0\r\n    )\r\n      otherAssetsList +=\r\n        \" \" +\r\n        (element.description === \"\" ? \"...\" : element.description) +\r\n        \" - \";\r\n  });\r\n  if (otherAssetsList !== \"\")\r\n    output.otherAssetsList =\r\n      \"* \" +\r\n      ASSETS.OTHER_ASSETS.value[output.language] +\r\n      \":\" +\r\n      otherAssetsList.substring(0, otherAssetsList.length - 3);\r\n  else output.otherAssetsList = \"\";\r\n  /* output.sources = [];\r\n\t\toutput.govDB = 0;\r\n\t\tconst srcDB =INCOMESOURCES.GOV_DEATH_BENEFIT.value[output.language];\r\n\t\tINCOMESOURCES[output.language].Values.forEach(function(element) {\r\n\t\t  output.sources.push({ name: element, value: 0 });\r\n\t\t}); */\r\n\r\n  output.sources = [];\r\n  output.govDB = 0;\r\n  const srcDB = INCOMESOURCES.GOV_DEATH_BENEFIT.Key; //value[output.language];\r\n  Object.values(INCOMESOURCES).forEach((element) => {\r\n    output.sources.push({\r\n      name: element.value[output.language],\r\n      value: 0,\r\n      valueAtDeath: 0,\r\n    });\r\n  });\r\n\r\n  // populate with what was assigned'\r\n  output.totalSource = 0;\r\n  output.totalSource2 = 0;\r\n  output.totalSourceATax = 0;\r\n  output.totalSource2ATax = 0;\r\n  output.totalSourceAtDeath = 0;\r\n  output.totalSource2AtDeath = 0;\r\n  output.totalSourceATaxAtDeath = 0;\r\n  output.totalSource2ATaxAtDeath = 0;\r\n  output.totalDesiredGrossIncome = 0;\r\n  output.totalDesiredGrossIncome2 = 0;\r\n  // NOTE \"this\" is not available inside inline functions, hence:\r\n  // or just use arrow functions\r\n  let srcOrphan = INCOMESOURCES.GOV_ORPHANS_BENEFIT.Key; //value[output.language];\r\n // console.log(input.Sources);\r\n  input.Sources.forEach(function (element) {\r\n    /*  let pos = output.sources.indexOf(\r\n\t\t\toutput.sources.filter(i => i.name === element.Type)[0]\r\n\t\t  );\r\n\t\t   */\r\n    let pos = output.sources.indexOf(\r\n      output.sources.filter(\r\n        (i) =>\r\n          i.name ===\r\n          getListItemNameFromKey(\r\n            INCOMESOURCES,\r\n            element.sourceTypeKey,\r\n            output.language\r\n          )\r\n      )[0]\r\n    );\r\n\r\n    if (element.sourceTypeKey === srcDB) {\r\n      // add gov DB\r\n      output.govDB = element.amount;\r\n      output.totalAsset += output.govDB;\r\n      output.totalDisposeAsset += output.govDB;\r\n    } else {\r\n      output.totalSource += element.amount;\r\n      if (element.startYear === 0) output.totalSourceAtDeath += element.amount;\r\n      // no orphans\r\n      output.totalSource2 +=\r\n        element.sourceTypeKey !== srcOrphan ? element.amount : 0;\r\n      if (element.startYear === 0)\r\n        output.totalSource2AtDeath +=\r\n          element.sourceTypeKey !== srcOrphan ? element.amount : 0;\r\n    }\r\n    if (pos !== undefined) {\r\n      output.sources[pos].value += element.amount;\r\n      if (element.startYear === 0)\r\n        output.sources[pos].valueAtDeath += element.amount;\r\n    }\r\n  });\r\n  // remove gov db from sources\r\n  output.sources = output.sources.filter(\r\n    (i) =>\r\n      i.name !== getListItemNameFromKey(INCOMESOURCES, srcDB, output.language)\r\n  ); //output.srcDB);\r\n  // after tax\r\n  output.totalSourceATax =\r\n    input.Clients.length > 1\r\n      ? output.totalSource * (1 - input.Clients[QUOTE_SPOUSE].avgTaxRate / 100)\r\n      : output.totalSource * (1 - input.Clients[QUOTE_CLIENT].avgTaxRate / 100);\r\n  output.totalSource2ATax =\r\n    input.Clients.length > 1\r\n      ? output.totalSource2 * (1 - input.Clients[QUOTE_SPOUSE].avgTaxRate / 100)\r\n      : output.totalSource2 *\r\n        (1 - input.Clients[QUOTE_CLIENT].avgTaxRate / 100);\r\n\r\n  output.totalSourceATaxAtDeath =\r\n    input.Clients.length > 1\r\n      ? output.totalSourceAtDeath *\r\n        (1 - input.Clients[QUOTE_SPOUSE].avgTaxRate / 100)\r\n      : output.totalSourceAtDeath *\r\n        (1 - input.Clients[QUOTE_CLIENT].avgTaxRate / 100);\r\n  output.totalSource2ATaxAtDeath =\r\n    input.Clients.length > 1\r\n      ? output.totalSource2AtDeath *\r\n        (1 - input.Clients[QUOTE_SPOUSE].avgTaxRate / 100)\r\n      : output.totalSource2AtDeath *\r\n        (1 - input.Clients[QUOTE_CLIENT].avgTaxRate / 100);\r\n\r\n  output.percentNeed1 = 0;\r\n  output.percentNeed2 = [];\r\n  output.percent1 = 0;\r\n  output.percent2 = [];\r\n  var totalNeed = 0;\r\n  const needPercent = INCOMENEEDS.PERCET_OF_INCOME.Key;\r\n  /* output.needs = [];\r\n\t\tINCOMENEEDS[output.language].Values.forEach(function(element) {\r\n\t\t  output.needs.push({ name: element, value: 0 });\r\n\t\t});\r\n */\r\n  output.needs = [];\r\n  Object.values(INCOMENEEDS).forEach((element) => {\r\n    output.needs.push({ name: element.value[output.language], value: 0 });\r\n  });\r\n\r\n  output.totalNeed = 0;\r\n  input.Needs.forEach(function (element) {\r\n    //let pos = needs.findIndex(i => i.name === element.Type);\r\n    //let pos = output.needs.indexOf(output.needs.filter(i => i.name === element.Type)[0]);\r\n    let pos = output.needs.indexOf(\r\n      output.needs.filter(\r\n        (i) =>\r\n          i.name ===\r\n          getListItemNameFromKey(\r\n            INCOMENEEDS,\r\n            element.needTypeKey,\r\n            output.language\r\n          )\r\n      )[0]\r\n    );\r\n\r\n    output.totalNeed += element.amount;\r\n    if (element.needTypeKey === needPercent) {\r\n      if (output.percent1 === 0) {\r\n        output.percent1 = element.Percent;\r\n        output.percentNeed1 = element.amount;\r\n        output.totalDesiredGrossIncome = (grossIncome * element.Percent) / 100;\r\n      } else {\r\n        output.percent2.push(element.Percent);\r\n        output.percentNeed2.push(element.amount);\r\n        output.totalDesiredGrossIncome2 +=\r\n          (grossIncome * element.Percent) / 100;\r\n      }\r\n    }\r\n    if (pos !== undefined) output.needs[pos].value += element.amount;\r\n  });\r\n\r\n  //\t\tif (data.dataCashFlowGov !== undefined)\r\n  //\t\t\tvar maxYScale = 10000 * Math.ceil(1 + Math.max(Math.max(...data.dataCashFlowGov), Math.max(...data.dataCashFlowNeeds), Math.max(...data.dataShortfall), Math.max(...data.dataCashFlowPersonal)) / 10000);\r\n // console.log(output);\r\n\r\n  return output;\r\n}\r\n\r\nfunction findMatchingKey(objValues, nameFromFile) {\r\n  return objValues.filter(\r\n    (obj) =>\r\n      obj.value.en\r\n        .replace(/ /g, \"\")\r\n        .replace(\r\n          /[\\u00A0\\u1680​\\u180e\\u2000-\\u2009\\u200a​\\u200b​\\u202f\\u205f​\\u3000]/g,\r\n          \"\"\r\n        ) ==\r\n        nameFromFile\r\n          .replace(/ /g, \"\")\r\n          .replace(\r\n            /[\\u00A0\\u1680​\\u180e\\u2000-\\u2009\\u200a​\\u200b​\\u202f\\u205f​\\u3000]/g,\r\n            \"\"\r\n          ) ||\r\n      obj.value.fr\r\n        .replace(/ /g, \"\")\r\n        .replace(\r\n          /[\\u00A0\\u1680​\\u180e\\u2000-\\u2009\\u200a​\\u200b​\\u202f\\u205f​\\u3000]/g,\r\n          \"\"\r\n        ) ==\r\n        nameFromFile\r\n          .replace(/ /g, \"\")\r\n          .replace(\r\n            /[\\u00A0\\u1680​\\u180e\\u2000-\\u2009\\u200a​\\u200b​\\u202f\\u205f​\\u3000]/g,\r\n            \"\"\r\n          )\r\n  )[0].Key;\r\n}\r\n","import { appletMode } from \"../../package.json\";\r\nimport {\r\n  ASSETS,\r\n  ASSET_TAX,\r\n  ASSET_OWNERSHIP_ACTION,\r\n  INCOMESOURCES,\r\n  LIABILITIES,\r\n  OWNERSHIP,\r\n  GROWTHDIR,\r\n  INCOMENEEDS,\r\n  PROVINCE,\r\n  APPLET_INA,\r\n  OUTPUT_WIDTH_PCT,\r\n  DEFAULT_QUOTE\r\n} from \"../definitions/generalDefinitions\";\r\n\r\nimport {\r\n  SEX,\r\n  SMOKING,\r\n  MEMBER,\r\n  DEFAULT_DIVIDEND_TAX_RATE,\r\n  DEFAULT_AVG_TAX_RATE,\r\n  DEFAULT_CLIENT_AGE,\r\n  DEFAULT_SPOUSE_AGE,\r\n  DEFAULT_SPOUSE_SALARY,\r\n  DEFAULT_CLIENT_SALARY,\r\n  DEFAULT_SPOUSE_CPP,\r\n  DEFAULT_CLIENT_CPP,\r\n  DEFAULT_SPOUSE_RETIREMENT,\r\n  DEFAULT_CLIENT_RETIREMENT,\r\n  DEFAULT_PROVINCE,\r\n  DEFAULT_INFLATION,\r\n  DEFAULT_INVESTMENT,\r\n  DEFAULT_NEED_PERCENT1,\r\n  DEFAULT_NEED_PERCENT2,\r\n  QUOTE_CLIENT,\r\n  QUOTE_SPOUSE,\r\n  DEFAULT_RRIF_AGE,\r\n  appSiteAPI,\r\n  DISPLAY_RETIREMENT,\r\n  DISPLAY_LIFEEXP,\r\n  DISPLAY_ENDAGE,\r\n  DISPLAY_LIFEEXP_PLUS_3,\r\n  ORPHAN_AGE_QC,\r\n  ORPHAN_AGE_NON_QC,\r\n  MAX_ORPHAN_DUR_QC,\r\n  MAX_ORPHAN_DUR_NON_QC,\r\n  UNIVERSITY_START_AGE,\r\n  UNIVERSITY_END_AGE,\r\n  DISPLAY_PRESENTATION,\r\n} from \"../definitions/generalDefinitions\";\r\nimport { versionDetails, getDefaultImages } from \"../utils/helper\";\r\nimport {loadDefaultCase} from \"../data/dataExchange\";\r\n\r\n\r\nexport function createDefaultAsset(id) {\r\n  let asset = {\r\n    id: id,\r\n    assetTypeKey: ASSETS.PERSONAL_RESIDENCE.Key,\r\n    description: \"\",\r\n    ownerKey: appletMode===\"EP\" ?ASSET_OWNERSHIP_ACTION.CLIENT_ROLLOVER.Key:ASSET_OWNERSHIP_ACTION.JOINT.Key,\r\n    currValue: 0,\r\n    assetTaxTypeKey: ASSET_TAX.NON_TAXABLE.Key,\r\n    growth: 0,\r\n    DisposeYr: 99,\r\n    DisposeDur: 1,\r\n    ACB: 0,\r\n    smallBusinessCapGainExemption: 0,\r\n    contributionAmt: 0,\r\n    contributionStartYr: 0,\r\n    contributionDur: 0,\r\n    withdrawalAmt: 0,\r\n    withdrawalStartYr: 1,\r\n    withdrawalDur: 0,\r\n    incomeRate: 0,\r\n    RRIFStartAge: DEFAULT_RRIF_AGE,\r\n    projection: null,\r\n  };\r\n  return asset;\r\n}\r\n\r\nexport function copyFromAnotherAsset(anotherAsset) {\r\n  return JSON.parse(JSON.stringify(anotherAsset));\r\n}\r\n\r\nexport function copyFromAnotherObject(sourceObject) {\r\n  return JSON.parse(JSON.stringify(sourceObject));\r\n}\r\nexport function createDefaultClient(id) {\r\n  const defaultClient1 = {\r\n    id: 1,\r\n    Age: DEFAULT_CLIENT_AGE,\r\n    sexKey: SEX.MALE.Key, //[\"en\"].Values[0],\r\n    smokerKey: SMOKING.NON_SMOKER.Key,\r\n    Income: DEFAULT_CLIENT_SALARY,\r\n    avgTaxRate: DEFAULT_AVG_TAX_RATE,\r\n    //  member: MEMBER.CLIENT.value[\"en\"],\r\n    memberKey: MEMBER.CLIENT.Key,\r\n    retirementAge: DEFAULT_CLIENT_RETIREMENT,\r\n    Eligibility: DEFAULT_CLIENT_CPP,\r\n    Name: \"\",\r\n  };\r\n  const defaultClient2 = {\r\n    id: 2,\r\n    Age: DEFAULT_SPOUSE_AGE,\r\n    //Sex: SEX[\"en\"].Values[1],\r\n    sexKey: SEX.FEMALE.Key, //[\"en\"].Values[0],\r\n    smokerKey: SMOKING.NON_SMOKER.Key,\r\n    Income: DEFAULT_SPOUSE_SALARY,\r\n    avgTaxRate: DEFAULT_AVG_TAX_RATE,\r\n    //member: MEMBER.SPOUSE.value[\"en\"],\r\n    memberKey: MEMBER.SPOUSE.Key,\r\n    retirementAge: DEFAULT_SPOUSE_RETIREMENT,\r\n    Eligibility: DEFAULT_SPOUSE_CPP,\r\n    Name: \"\",\r\n  };\r\n  const child = {\r\n    id: id, //this.state.dataInput.clientsNo,\r\n    Age: 1,\r\n    sexKey: SEX.MALE.Key,\r\n    smokerKey: SMOKING.NON_SMOKER.Key,\r\n    Income: 0,\r\n    avgTaxRate: 0.0,\r\n    memberKey: MEMBER.CHILD.Key,\r\n    retirementAge: 65,\r\n    Eligibility: 0,\r\n    Name: \"\",\r\n  };\r\n  if (id === 1) return defaultClient1;\r\n  else if (id === 2) return defaultClient2;\r\n  else return child;\r\n}\r\n\r\nexport function createDefaultSource(id) {\r\n  const defaultSource = {\r\n    id: id,\r\n    //Type: INCOMESOURCES.SURVIVORS_INCOME.value[\"en\"],\r\n    sourceTypeKey: INCOMESOURCES.SURVIVORS_INCOME.Key,\r\n    amount: DEFAULT_SPOUSE_SALARY,\r\n    startYear: 0,\r\n    duration: DEFAULT_SPOUSE_RETIREMENT - DEFAULT_SPOUSE_AGE,\r\n    ownerID: 2,\r\n    taxRate: DEFAULT_AVG_TAX_RATE,\r\n    growthRate: DEFAULT_INFLATION,\r\n  };\r\n  return defaultSource;\r\n}\r\n\r\nexport function createDefaultLiab(id) {\r\n  const defaultLiab = {\r\n    id: id,\r\n    //Type: LIABILITIES.LAST_EXPENSES.value[\"en\"],\r\n    liabTypeKey: LIABILITIES.PROBATE.Key,//.LAST_EXPENSES.Key,\r\n    ownerKey: OWNERSHIP.CLIENT.Key,\r\n    currValue: 0,\r\n    //growthDir: GROWTHDIR[\"en\"].Values[0], //increases\r\n    growthDirKey: GROWTHDIR.GROWS.Key, //increases\r\n    growth: 0,\r\n    repay: 0,\r\n    exposureDur: 99,\r\n    assetTaxLiabID: 0,\r\n    assetTaxLiabProj: [],\r\n  };\r\n  return defaultLiab;\r\n}\r\n\r\nexport function createDefaultNeed(id) {\r\n  const defaultNeed1 = {\r\n    id: 1,\r\n    needTypeKey: INCOMENEEDS.PERCET_OF_INCOME.Key,\r\n    Percent: DEFAULT_NEED_PERCENT1,\r\n    amount:\r\n      (DEFAULT_NEED_PERCENT1 *\r\n        (DEFAULT_SPOUSE_SALARY + DEFAULT_CLIENT_SALARY) *\r\n        (1 - DEFAULT_AVG_TAX_RATE / 100)) /\r\n      100,\r\n    startYear: 0,\r\n    duration: DEFAULT_SPOUSE_RETIREMENT - DEFAULT_SPOUSE_AGE,\r\n  };\r\n  const defaultNeed2 = {\r\n    id: id,\r\n    needTypeKey: INCOMENEEDS.PERCET_OF_INCOME.Key,\r\n    Percent: DEFAULT_NEED_PERCENT2,\r\n    amount:\r\n      (DEFAULT_NEED_PERCENT2 *\r\n        (DEFAULT_SPOUSE_SALARY + DEFAULT_CLIENT_SALARY) *\r\n        (1 - DEFAULT_AVG_TAX_RATE / 100)) /\r\n      100,\r\n    startYear: DEFAULT_SPOUSE_RETIREMENT - DEFAULT_SPOUSE_AGE,\r\n    duration: 100,\r\n  };\r\n  if (id === 1) return defaultNeed1;\r\n  else return defaultNeed2;\r\n}\r\n\r\nexport function createDefaultPres(id, tax) {\r\n  const images=getDefaultImages()\r\n  const defaultPres = {\r\n    id: id,\r\n    provinceKey: PROVINCE.BC.Key,\r\n    invRate: DEFAULT_INVESTMENT,\r\n    inflation: DEFAULT_INFLATION,\r\n    taxRate: tax,\r\n    designedFor: \"\",\r\n    designedBy: \"\",\r\n    valuationDate: new Date(),\r\n    presentationDate: new Date(),\r\n    notes: \"\",\r\n    version: versionDetails().version,\r\n    periodOption: APPLET_INA ? DISPLAY_RETIREMENT : DISPLAY_ENDAGE,\r\n    language: \"en\",\r\n    resultsOption: DISPLAY_PRESENTATION,\r\n    adviserLogo: images.adviserLogo,// {image:null, left: 0,size: OUTPUT_WIDTH_PCT, allPages: false, top:true, showDetails:false},\r\n    appletImage:images.appletImage ,//{image:APPLET_INA? require(\"../images/INA.png\"):require(\"../images/estate.protection.applet.cover.graphic.png\"), left: 0,size: OUTPUT_WIDTH_PCT, allPages: false, top:true, showDetails:false},\r\n  };\r\n  return defaultPres;\r\n}\r\n\r\n\r\nexport function getDefaultData(){\r\n  let dataInput;\r\n \r\n  if(localStorage.getItem(DEFAULT_QUOTE)===null)\r\n  {\r\n    dataInput= getDefaultCase()\r\n\r\n    }\r\n    else\r\n{\r\n  try {\r\n    dataInput=loadDefaultCase()  \r\n  } catch (error) {\r\n    dataInput= getDefaultCase()\r\n  }  \r\n  \r\n}\r\nreturn dataInput;\r\n}\r\n\r\nfunction getDefaultCase()\r\n{\r\n  let dataInput;\r\n  let defaultClients = [];\r\ndefaultClients.push(createDefaultClient(1));\r\nif (APPLET_INA) defaultClients.push(createDefaultClient(2));\r\nlet defaultAssets = [];\r\ndefaultAssets.push(createDefaultAsset(1));\r\nlet defaultSources =[]\r\nif (APPLET_INA) defaultSources.push(createDefaultSource(1));\r\n \r\nconst defaultLiab = [createDefaultLiab(1)];\r\nlet defaultNeeds = [];\r\ndefaultNeeds.push(createDefaultNeed(1));\r\ndefaultNeeds.push(createDefaultNeed(2));\r\nconst defaultPresentation = [createDefaultPres(1, 0)];\r\n\r\n// build state with defaults\r\ndataInput={      \r\n    Clients: defaultClients, //, clientsNo: defaultClients.length },\r\n    Assets: defaultAssets, //, assetsNo: defaultAsset.length },\r\n    Liabilitys: defaultLiab, //, liabilitysNo: 1 },\r\n    Sources: defaultSources, //, sourcesNo: 1 },\r\n    Needs: defaultNeeds, //,  needsNo: 2},\r\n    Presentations: defaultPresentation, //, presentationsNo: 1 },\r\n  }\r\n  return dataInput;\r\n}","import React, { Component } from \"react\";\r\n\r\nimport { DropDown } from \"./DropDown\";\r\n//import { InputField4 } from './inputField4';\r\nimport { InputField } from \"./inputField\";\r\nimport { AddRemove } from \"./AddRemove\";\r\nimport { cleanFormat } from \"../utils/helper\";\r\nimport {\r\n  getInfoIconClientsMember,\r\n  getInfoIconClientsElig,\r\n  getInfoIconSpouseElig,\r\n  getInfoIconClientsTax,\r\n  getInfoIconClientsRetire,\r\n  getInfoIncome,\r\n} from \"../definitions/infoIconsDefinitions\";\r\nimport { appletMode } from \"../../package.json\";\r\n\r\nimport {\r\n  MESSAGES,\r\n  SEX,\r\n  SMOKING,\r\n  MEMBER,\r\n  CONTROLTITLE,\r\n  TITLES,\r\n  QUOTE_CLIENT,\r\n  QUOTE_SPOUSE,\r\n  APPLET_EP,\r\n  APPLET_INA,\r\n} from \"../definitions/generalDefinitions\";\r\nimport {\r\n  getListItemNameFromKey,\r\n  getDisableValues,\r\n  getListItemKeyFromName,\r\n} from \"../utils/helper\";\r\nimport { createDefaultClient } from \"../data/createDefaults\";\r\nexport class Client extends Component {\r\n  displayName = Client.name;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      name: this.props.clientCurr.Name,\r\n    };\r\n    var sexValues = [\r\n      {\r\n        label: SEX.MALE.value[this.props.language],\r\n        value: 1,\r\n      },\r\n      { label: SEX.FEMALE.value[this.props.language], value: 2 },\r\n    ];\r\n\r\n    var smokingValues = [\r\n      {\r\n        label: SMOKING.NON_SMOKER.value[this.props.language],\r\n        value: 1,\r\n      },\r\n      { label: SMOKING.SMOKER.value[this.props.language], value: 2 },\r\n    ];\r\n\r\n    var memberValues = [\r\n      {\r\n        label: MEMBER.CLIENT.value[this.props.language],\r\n        value: 1,\r\n      },\r\n      { label: MEMBER.SPOUSE.value[this.props.language], value: 2 },\r\n      { label: MEMBER.CHILD.value[this.props.language], value: 3 },\r\n      { label: MEMBER.DEPENDENT_ADULT.value[this.props.language], value: 4 },\r\n    ];\r\n\r\n    if (APPLET_EP) {\r\n      memberValues = [\r\n        {\r\n          label: MEMBER.CLIENT.value[this.props.language],\r\n          value: 1,\r\n        },\r\n        { label: MEMBER.SPOUSE.value[this.props.language], value: 2 },\r\n      ];\r\n    }\r\n\r\n    const bilingual = CONTROLTITLE[this.props.language];\r\n    this.dataValues = {\r\n      DD: [\r\n        {\r\n          id: 1,\r\n          Title: bilingual.sex,\r\n          defValue: getListItemNameFromKey(\r\n            SEX,\r\n            this.props.clientCurr.sexKey,\r\n            this.props.language\r\n          ),\r\n          disableOptionValue: getDisableValues(SEX),\r\n          Values: sexValues,\r\n        },\r\n        {\r\n          id: 2,\r\n          Title: bilingual.smoking,\r\n          defValue: getListItemNameFromKey(\r\n            SMOKING,\r\n            this.props.clientCurr.smokerKey,\r\n            this.props.language\r\n          ),\r\n          disableOptionValue: getDisableValues(SMOKING),\r\n          Values: smokingValues,\r\n        },\r\n        {\r\n          id: 3,\r\n          Title: bilingual.member,\r\n          defValue: getListItemNameFromKey(\r\n            MEMBER,\r\n            this.props.clientCurr.memberKey,\r\n            this.props.language\r\n          ),\r\n          disableOptionValue: getDisableValues(MEMBER),\r\n          Values: memberValues,\r\n        },\r\n      ],\r\n    };\r\n    this.infoRetireRed = false;\r\n  \r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    // console.log(getListItemNameFromKey(SEX,nextProps.clientCurr.sexKey,this.props.language),nextProps.clientCurr.memberKey,this.props.language)\r\n    if (\r\n      nextProps.clientCurr !== this.props.clientCurr ||\r\n      nextProps.id !== this.props.id ||\r\n      // || nextProps.hasSurivor !== this.props.hasSurivor\r\n      nextProps.clientsNo !== this.props.clientsNo\r\n    ) {\r\n      // console.log(nextProps, this.props,this.dataValues)\r\n      this.dataValues.DD[0].defValue = getListItemNameFromKey(\r\n        SEX,\r\n        nextProps.clientCurr.sexKey,\r\n        this.props.language\r\n      );\r\n      this.dataValues.DD[1].defValue = getListItemNameFromKey(\r\n        SMOKING,\r\n        nextProps.clientCurr.smokerKey,\r\n        this.props.language\r\n      );\r\n      this.dataValues.DD[2].defValue = getListItemNameFromKey(\r\n        MEMBER,\r\n        nextProps.clientCurr.memberKey,\r\n        this.props.language\r\n      );\r\n      // console.log(nextProps, this.props,this.dataValues)\r\n\r\n      this.setState({ name: nextProps.clientCurr.Name });\r\n    }\r\n    //  if (nextProps.clientCurr.retirementAge == this.props.clientCurr.retirementAge)\r\n    //  this.infoRetireRed= false;\r\n  }\r\n\r\n  handleDoRemove = (id) => {\r\n    if (this.props.disableAddRemove === false) {\r\n      this.props.handleRemoveClient(id);\r\n    }\r\n  };\r\n\r\n  handleDoAdd = () => {\r\n    if (this.props.disableAddRemove === false) {\r\n      let newCliet;\r\n      if (this.props.clientsNo === 1) newCliet = createDefaultClient(2);\r\n      else {\r\n        newCliet = createDefaultClient(this.props.clientsNo + 1); //add spouse\r\n        newCliet.Age =\r\n          18 - 2 * (this.props.clientsNo > 6 ? 4 : this.props.clientsNo + 1);\r\n        newCliet.sexKey =\r\n          this.props.clientsNo % 2 ? SEX.MALE.Key : SEX.FEMALE.Key;\r\n        newCliet.retirementAge = 25;\r\n      }\r\n      this.props.handleAddClient(newCliet);\r\n    }\r\n  };\r\n\r\n  doSwitch = () => {\r\n    this.props.switchClients();\r\n  };\r\n  handleUpdateInput = (id, value) => {\r\n    let client = this.getCurrClient();\r\n    /*    let client = {\r\n      id: this.props.id,\r\n      Age: this.props.clientCurr.Age,\r\n      sexKey: this.props.clientCurr.sexKey,\r\n      smokerKey: this.props.clientCurr.smokerKey,\r\n      Income: this.props.clientCurr.Income,\r\n      avgTaxRate: this.props.clientCurr.avgTaxRate,\r\n      memberKey: this.props.clientCurr.memberKey,\r\n      retirementAge: this.props.clientCurr.retirementAge,\r\n      Eligibility: this.props.clientCurr.Eligibility,\r\n      Name:this.props.clientCurr.Name\r\n    };\r\n */\r\n    const lang = this.props.language;\r\n    const valueClean = cleanFormat(value, lang);\r\n    const valueCleanInt = parseInt(valueClean);\r\n\r\n    let changed = false;\r\n    //this.infoRetireRed= false;\r\n    if (id === 0) {\r\n      changed = client.Age !== parseInt(value) ? true : false;\r\n      client.Age = parseInt(value);\r\n    } else if (id === 1) {\r\n      changed = client.Income !== valueCleanInt ? true : false;\r\n      client.Income = valueCleanInt;\r\n    } else if (id === 2) {\r\n      changed =\r\n        client.avgTaxRate !==\r\n        parseInt(100 * valueClean) / 100\r\n          ? true\r\n          : false;\r\n      client.avgTaxRate =\r\n        parseInt(100 * valueClean) / 100;\r\n    } else if (id === 3) {\r\n      changed = client.retirementAge !== parseInt(value) ? true : false;\r\n      if (changed) {\r\n        this.infoRetireRed = true;\r\n        setTimeout(() => {\r\n          this.infoRetireRed = false;\r\n        }, 4000);\r\n      }\r\n      client.retirementAge = parseInt(value);\r\n    } else if (id === 4) {\r\n      changed =\r\n        client.Eligibility !==\r\n        parseInt(100 * valueClean) / 100\r\n          ? true\r\n          : false;\r\n      client.Eligibility =\r\n        parseInt(100 * valueClean) / 100;\r\n    }\r\n\r\n    if (changed) {\r\n      this.props.handleUpdate(client);\r\n      this.setState({ loading: this.props.disableAddRemove });\r\n    }\r\n  };\r\n\r\n  updateDDown = (id, selection) => {\r\n    let client = this.getCurrClient();\r\n    /*  {\r\n      id: this.props.id,\r\n      Age: this.props.clientCurr.Age,\r\n      sexKey: this.props.clientCurr.sexKey,\r\n      smokerKey: this.props.clientCurr.smokerKey,\r\n      Income: this.props.clientCurr.Income,\r\n      avgTaxRate: this.props.clientCurr.avgTaxRate,\r\n      memberKey: this.props.clientCurr.memberKey,\r\n      retirementAge: this.props.clientCurr.retirementAge,\r\n      Eligibility: this.props.clientCurr.Eligibility,\r\n      Name:this.props.clientCurr.Name\r\n    }; */\r\n    if (id === 1) client.sexKey = getListItemKeyFromName(SEX, selection);\r\n    else if (id === 2)\r\n      client.smokerKey = getListItemKeyFromName(SMOKING, selection);\r\n    else if (id === 3)\r\n      client.memberKey = getListItemKeyFromName(MEMBER, selection);\r\n    else if (id === 5) client.Name = selection;\r\n\r\n    if (\r\n      client.memberKey === MEMBER.CHILD.Key &&\r\n      this.props.clientCurr.memberKey !== MEMBER.CHILD.Key\r\n    ) {\r\n      client.Income = 0;\r\n      client.avgTaxRate = 0;\r\n      client.Age = 16;\r\n      client.retirementAge = 25;\r\n    } else if (\r\n      client.memberKey === MEMBER.DEPENDENT_ADULT.Key &&\r\n      this.props.clientCurr.memberKey !== MEMBER.DEPENDENT_ADULT.Key\r\n    ) {\r\n      client.Income = 0;\r\n      client.avgTaxRate = 0;\r\n      client.Age = 25;\r\n      client.retirementAge = 65;\r\n    } else if (\r\n      client.memberKey === MEMBER.SPOUSE.Key &&\r\n      this.props.clientCurr.memberKey !== MEMBER.SPOUSE.Key\r\n    ) {\r\n      client.Income = 60000;\r\n      client.avgTaxRate = 25;\r\n      client.Age = 40;\r\n      client.retirementAge = 65;\r\n    }\r\n    this.props.handleUpdate(client);\r\n  };\r\n\r\n  writeBack = (name) => {\r\n    let client = this.getCurrClient();\r\n    client.Name = name;\r\n    this.props.handleUpdate(client);\r\n  };\r\n\r\n  updateName = (evt) => {\r\n    this.setState({ name: evt.target.value }, this.writeBack(evt.target.value));\r\n  };\r\n\r\n  getCurrClient = () => {\r\n    let client = {\r\n      id: this.props.id,\r\n      Age: this.props.clientCurr.Age,\r\n      sexKey: this.props.clientCurr.sexKey,\r\n      smokerKey: this.props.clientCurr.smokerKey,\r\n      Income: this.props.clientCurr.Income,\r\n      avgTaxRate: this.props.clientCurr.avgTaxRate,\r\n      memberKey: this.props.clientCurr.memberKey,\r\n      retirementAge: this.props.clientCurr.retirementAge,\r\n      Eligibility: this.props.clientCurr.Eligibility,\r\n      Name: this.props.clientCurr.Name,\r\n    };\r\n    return client;\r\n  };\r\n\r\n  handleFocus = (event) => {\r\n    event.target.select();\r\n  };\r\n\r\n  render() {\r\n    const nonSpouse =\r\n      this.props.clientCurr.memberKey === MEMBER.CHILD.Key ||\r\n      this.props.clientCurr.memberKey === MEMBER.DEPENDENT_ADULT.Key;\r\n    const nonSpouseIsTheSurvivor = nonSpouse && this.props.isTheSurvivor;\r\n    const nonSpouseHasIncome =\r\n      this.props.clientCurr.Income > 0 &&\r\n      (this.props.clientCurr.memberKey === MEMBER.CHILD.Key ||\r\n        this.props.clientCurr.memberKey === MEMBER.DEPENDENT_ADULT.Key);\r\n    const bilingual = CONTROLTITLE[this.props.language];\r\n\r\n    let clientMember =\r\n      this.props.clientCurr.memberKey === MEMBER.CLIENT.Key &&\r\n      this.props.id === 1;\r\n    let disableMember = clientMember; // || (this.props.clientCurr.memberKey === MEMBER.SPOUSE.Key &&\r\n    //     this.props.id === 2);\r\n    // console.log(CONTROLTITLE[this.props.language].member, this.props.language,this.dataValues.DD[2])\r\n    // disable Client\r\n    this.dataValues.DD[2].disableOptionValue[QUOTE_CLIENT] = true;\r\n    this.dataValues.DD[2].disableOptionValue[\r\n      QUOTE_SPOUSE\r\n    ] = nonSpouseIsTheSurvivor ? this.props.clientCurr.id !== 2 : true;\r\n    let desc =\r\n      this.props.clientCurr.id === 1\r\n        ? TITLES[this.props.language].insured\r\n        : this.props.clientCurr.id === 2\r\n        ? TITLES[this.props.language].benef\r\n        : \"\";\r\n    if (APPLET_EP)\r\n      desc =\r\n        this.props.clientCurr.id === 1\r\n          ? this.props.clientsNo === 1\r\n            ? TITLES[this.props.language].insured\r\n            : TITLES[this.props.language].insuredJLTD\r\n          : this.props.clientCurr.id === 2\r\n          ? TITLES[this.props.language].insuredJLTD\r\n          : \"\";\r\n    const greyedName = desc;\r\n    const nameHolder = this.state.name === \"\" ? desc : this.state.name;\r\n\r\n    const textColourStyle =\r\n      this.state.name === \"\" || this.state.name === greyedName\r\n        ? { color: \"#99A4be\" }\r\n        : { color: \"black\" };\r\n    if (this.state.loading === true && this.props.disableAddRemove === true) {\r\n      return \"\";\r\n    } else {\r\n      return (\r\n        <div className=\"inputRow\">\r\n          <div className=\"dropDown inputDiv\">\r\n            <div className=\"controlTitle\">\r\n              {CONTROLTITLE[this.props.language].name}\r\n            </div>\r\n            <input\r\n              key={5}\r\n              id={5}\r\n              className=\"inputField  textareaAssetName\"\r\n              /*                 style={textColourStyle} */\r\n              placeholder={greyedName}\r\n              value={this.state.name}\r\n              onClick={(e) => this.handleFocus(e)}\r\n              onFocus={(e) => this.handleFocus(e)}\r\n              type=\"text\"\r\n              onBlur={(evt) => this.updateName(evt)}\r\n              onChange={(evt) => this.setState({ name: evt.target.value })}\r\n\r\n              //onBlur={(evt) => this.updateName(evt)}\r\n            />\r\n\r\n            {/* \r\n              <input\r\n                id={12}\r\n                type=\"text\"\r\n                className=\"inputField  textareaAssetName\"\r\n                onChange={this.updateDesc}\r\n                value={assetCurr.description}\r\n              /> */}\r\n          </div>\r\n          <InputField\r\n            id={0}\r\n            inputName={bilingual.age}\r\n            format={1}\r\n            Count={this.props.clientsNo}\r\n            language={this.props.language}\r\n            inputValue={this.props.clientCurr.Age}\r\n            handleUpdateInput={this.handleUpdateInput}\r\n          />\r\n          {this.dataValues.DD.map((dd) => {\r\n            return (nonSpouse && dd.Title === bilingual.smoking) ||\r\n              dd.Title === bilingual.age ? (\r\n              \"\"\r\n            ) : (\r\n              <DropDown\r\n                key={dd.id}\r\n                id={dd.id}\r\n                Count={this.props.clientsNo}\r\n                Title={dd.Title}\r\n                defValue={dd.defValue}\r\n                disable={dd.Title === bilingual.member ? disableMember : false}\r\n                infoIcon={\r\n                  dd.Title === bilingual.member &&\r\n                  dd.defValue ===\r\n                    getListItemNameFromKey(\r\n                      MEMBER,\r\n                      MEMBER.CLIENT.Key,\r\n                      this.props.language\r\n                    )\r\n                    ? getInfoIconClientsMember(this.props.language)\r\n                    : undefined\r\n                }\r\n                // hasSurivor={this.props.hasSurivor}\r\n                Values={dd.Values}\r\n                language={this.props.language}\r\n                disableOption={dd.disableOptionValue}\r\n                updateDDown={this.updateDDown}\r\n              />\r\n            );\r\n          })}\r\n\r\n          {\r\n            /* nonSpouse && !nonSpouseHasIncome   && !nonSpouseIsTheSurvivor ? (\r\n          \"\"\r\n        ) :  */ <InputField\r\n              id={1}\r\n              inputName={bilingual.income}\r\n              format={2}\r\n              Count={this.props.clientsNo}\r\n              infoIcon={\r\n                this.props.id === 1\r\n                  ? getInfoIncome(this.props.language)\r\n                  : undefined\r\n              }\r\n              language={this.props.language}\r\n              inputValue={this.props.clientCurr.Income}\r\n              handleUpdateInput={this.handleUpdateInput}\r\n            />\r\n          }\r\n          {\r\n            /* nonSpouse && !nonSpouseHasIncome  && !nonSpouseIsTheSurvivor ? (\r\n          \"\"\r\n        ) : */ <InputField\r\n              id={2}\r\n              inputName={bilingual.avgTax}\r\n              format={3}\r\n              Count={this.props.clientsNo}\r\n              //info={MESSAGES[this.props.language].infoAvgTax}\r\n              infoIcon={\r\n                this.props.id === 1\r\n                  ? getInfoIconClientsTax(this.props.language)\r\n                  : undefined\r\n              }\r\n              showInfo={!disableMember} //infoOnlyForRowID={2}\r\n              language={this.props.language}\r\n              inputValue={\r\n                Math.round(10000 * this.props.clientCurr.avgTaxRate) / 10000\r\n              }\r\n              handleUpdateInput={this.handleUpdateInput}\r\n            />\r\n          }\r\n          {nonSpouse && !nonSpouseIsTheSurvivor ? (\r\n            \"\"\r\n          ) : (\r\n            <InputField\r\n              id={3}\r\n              inputName={\r\n                nonSpouseIsTheSurvivor\r\n                  ? bilingual.protectToAge\r\n                  : bilingual.retAge\r\n              }\r\n              format={1}\r\n              Count={this.props.clientsNo}\r\n              language={this.props.language}\r\n              inputValue={this.props.clientCurr.retirementAge}\r\n              infoIcon={\r\n                this.props.id !== 1\r\n                  ? getInfoIconClientsRetire(\r\n                      this.props.language,\r\n                      this.infoRetireRed\r\n                    )\r\n                  : undefined\r\n              }\r\n              handleUpdateInput={this.handleUpdateInput}\r\n            />\r\n          )}\r\n          {nonSpouse ? (\r\n            \"\"\r\n          ) : (\r\n            <InputField\r\n              id={4}\r\n              inputName={this.props.isQC?bilingual.qppElig:bilingual.cppElig}\r\n              format={3}\r\n              Count={this.props.clientsNo}\r\n              //info={MESSAGES[this.props.language].infoElig}\r\n              infoIcon={\r\n                this.props.id === 1\r\n                  ? getInfoIconClientsElig(this.props.language)\r\n                  : getInfoIconSpouseElig(this.props.language)\r\n              }\r\n              showInfo={disableMember}\r\n              language={this.props.language}\r\n              inputValue={\r\n                Math.round(10000 * this.props.clientCurr.Eligibility) / 10000\r\n              }\r\n              handleUpdateInput={this.handleUpdateInput}\r\n            />\r\n          )}\r\n          {/* {isVersion2019() === false && disableMember ? ( */}\r\n          {clientMember === true &&\r\n            this.props.clientsNo > 1 &&\r\n            !this.props.singleFamily &&\r\n            APPLET_INA && (\r\n              <button\r\n                className=\"switchClient\"\r\n                style={{\r\n                  width: this.props.language === \"en\" ? \"115px\" : \"125px\",\r\n                }}\r\n                onClick={this.doSwitch}\r\n              >\r\n                {/* <font size=\"-4\">&#8645;</font> */}\r\n                {bilingual.switch}\r\n                {/* Switch Client */}\r\n              </button>\r\n            )}\r\n          <AddRemove\r\n            currentID={this.props.id}\r\n            numberComps={this.props.clientsNo}\r\n            fixedFirstRow={true}\r\n            minComps={1} //{appletMode===\"INA\"?2:1}\r\n            disabled={this.props.disableAddRemove}\r\n            maxRows={APPLET_INA ? 100 : 2}\r\n            handleDoAdd={this.handleDoAdd}\r\n            handleDoRemove={this.handleDoRemove}\r\n           />\r\n          {/* {isMobileDevice() && this.props.id < this.props.clientsNo ? (\r\n          <hr className=\"ppi2\" />\r\n        ) : (\r\n          \"\"\r\n        )} */}\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport ReactExport from \"react-data-export\";\r\nimport { cleanFormat } from \"../../utils/helper\";\r\nimport { APPLET_INA,\r\n  APPLET_EP\r\n} from \"../../definitions/generalDefinitions\";\r\n\r\n\r\nconst ExcelFile = ReactExport.ExcelFile;\r\nconst ExcelSheet = ReactExport.ExcelFile.ExcelSheet;\r\n\r\nexport default class DownloadExcel extends React.Component {\r\n  render() {\r\n    // see https://github.com/securedeveloper/react-data-export for formatting\r\n    const styleCell = { alignment: { horizontal: \"right\" } ,font: {name: \"Trebuchet MS\"} , numFmt: \"##,##0\" };\r\n    const styleCellCol1 = { alignment: { horizontal: \"right\" } ,font: {name: \"Trebuchet MS\"} , numFmt: \"0\" };\r\n    const styleCellAlt = { alignment: { horizontal: \"right\" } ,font: {name: \"Trebuchet MS\"}, fill: { patternType: \"solid\", fgColor: { rgb: \"E9EAEB\" }}, numFmt: \"##,##0\" };\r\n    const styleCellAltCol1 = { alignment: { horizontal: \"right\" } ,font: {name: \"Trebuchet MS\"}, fill: { patternType: \"solid\", fgColor: { rgb: \"E9EAEB\" }}, numFmt: \"0\" };\r\n    const styleTitleRowInfo = {\r\n      font: {name: \"Trebuchet MS\", color: { rgb: \"FFFFFF\" }, bold: true},\r\n      alignment: { wrapText: true,horizontal: \"center\" },\r\n      border: {\r\n        top: { style: \"thin\", color: { rgb: \"C0C0C0\" } },\r\n        bottom: { style: \"thin\", color: { rgb: \"C0C0C0\" } },\r\n        right: { style: \"thin\", color: { rgb: \"C0C0C0\" } },\r\n        left: { style: \"thin\", color: { rgb: \"C0C0C0\" } }\r\n      },\r\n      fill: { patternType: \"solid\", fgColor: { rgb: \"7399c6\" } }\r\n    };\r\n    const styleCellLeftAllign = { alignment: { horizontal: \"left\" },font: {name: \"Trebuchet MS\"}};\r\n    const styleTitleRow = {\r\n      font: {name: \"Trebuchet MS\", color: { rgb: \"FFFFFF\" }, bold: true},\r\n      alignment: {wrapText: true , horizontal: \"center\" },\r\n      border: {\r\n        top: { style: \"thin\", color: { rgb: \"C0C0C0\" } },\r\n        bottom: { style: \"thin\", color: { rgb: \"C0C0C0\" } },\r\n        right: { style: \"thin\", color: { rgb: \"C0C0C0\" } },\r\n        left: { style: \"thin\", color: { rgb: \"C0C0C0\" } }\r\n      },\r\n      fill: { patternType: \"solid\", fgColor: { rgb: \"334D7C\" } }\r\n     \r\n    };\r\n\r\n    let excelColumnsDataInfoSection = [];\r\n    let title = [];\r\n    let dataBodyTitles = []\r\n    let dataBody = [];\r\n    let dataRow = [];\r\n    let j;\r\n    let i;\r\n    let dataCell;\r\n\r\n    // console.log(this.props.excelColumnsDataInfoSection);\r\n\r\n    // section 1 title and header data\r\n    dataRow = [];\r\n    const lang = this.props.language;\r\n    \r\n    // always name and its value: length 2\r\n\r\n    if (this.props.excelColumnsDataInfoSection !== undefined) {\r\n      for (j = 0; j < this.props.excelColumnsDataInfoSection.length; ++j) {\r\n        for (i = 0; i < this.props.excelColumnsDataInfoSection[0].length; ++i) {\r\n           dataCell =\r\n            this.props.excelColumnsDataInfoSection[j][i] === undefined\r\n              ? \"\"\r\n              : (this.props.excelColumnsDataInfoSection[j][i].toString().indexOf(\"%\")>=0 || isNaN(this.props.excelColumnsDataInfoSection[j][i].toString())===true  || this.props.excelColumnsDataInfoSection[j][i].toString()===\"\" ?\r\n              this.props.excelColumnsDataInfoSection[j][i].toString():\r\n                parseFloat(cleanFormat(this.props.excelColumnsDataInfoSection[j][i]),lang));\r\n          dataRow.push({\r\n            value: dataCell,\r\n            style: j === 0 ? styleTitleRowInfo : styleCell\r\n          });\r\n        }\r\n        excelColumnsDataInfoSection.push(dataRow);\r\n        dataRow = [];\r\n      }\r\n    }\r\n\r\n    // section 2 column headers and data\r\n    // add column titles as first data row to be able to style with another stupid libaray\r\n    // empty titles\r\n\r\n    if (this.props.excelColumnsHeaders !== undefined) {\r\n\r\n      title.push([{ value: this.props.title, style: {font: {sz: \"14\", name: \"Trebuchet MS\", bold: true}}}]);\r\n      \r\n      for (j = 0; j < this.props.excelColumnsHeaders.length; ++j) {\r\n        dataBodyTitles.push({ title: \"\", width: { wpx: this.props.width }, font: {name: \"Trebuchet MS\", bold: true}} );\r\n      }\r\n\r\n      for (j = 0; j < this.props.excelColumnsHeaders.length; ++j) {\r\n        \r\n        dataRow.push({ value: this.props.excelColumnsHeaders[j], style: styleTitleRow });\r\n      }\r\n      dataBody.push(dataRow);\r\n    }\r\n\r\n    dataRow = [];\r\n    if (this.props.excelColumnsDataMain !== undefined) {\r\n      for (i = 0; i < this.props.excelColumnsDataMain[0].length; ++i) {\r\n        for (j = 0; j < this.props.excelColumnsHeaders.length; ++j) {\r\n          dataCell =\r\n            this.props.excelColumnsDataMain[j][i] === undefined\r\n              ? \"\"\r\n              :(this.props.excelColumnsDataMain[j][i].toString().indexOf(\"%\")>=0 || isNaN(this.props.excelColumnsDataMain[j][i].toString())===true  || this.props.excelColumnsDataMain[j][i].toString()===\"\" ?\r\n              this.props.excelColumnsDataMain[j][i].toString():\r\n                parseFloat(cleanFormat(this.props.excelColumnsDataMain[j][i]),lang));\r\n\r\n          dataRow.push({\r\n            value: dataCell,\r\n            style: isNaN(parseFloat(cleanFormat(dataCell,lang)))\r\n              ? styleCellLeftAllign\r\n              : (i%2?(j===0?styleCellAltCol1:styleCellAlt):(j===0?styleCellCol1:styleCell))\r\n          });\r\n        }\r\n        dataBody.push(dataRow);\r\n        dataRow = [];\r\n      }\r\n    }\r\n    const multiDataSet = [\r\n      // section 1 title\r\n      {\r\n        columns: [],\r\n        data: title\r\n      },\r\n      // section 1 key values\r\n      {\r\n        columns: [],\r\n        data: excelColumnsDataInfoSection\r\n      },\r\n\r\n      // section 2\r\n      {\r\n        xSteps: 0,\r\n        ySteps: 1,\r\n        columns: dataBodyTitles,\r\n        data: dataBody\r\n      }\r\n    ];\r\n    var tempDate = new Date();\r\n    var date = tempDate.getDate()+ tempDate.toLocaleString('en-us', { month: 'short' })  + tempDate.getFullYear()\r\n\r\n    if (this.props.downloadNow === 0) return \"\";\r\n    else\r\n      return (\r\n        <ExcelFile hideElement={true} filename= {(APPLET_INA?\"INA\":\"PYE\") + \"_Data_\" + date}>\r\n          <ExcelSheet dataSet={multiDataSet} name={APPLET_INA?\"INAd\":\"PYE\" }/>\r\n        </ExcelFile>\r\n      );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport AddIcon from \"@material-ui/icons/Add\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\n//import { ReactComponent as Icon} from './icon.svg';\r\nimport \"./ExcelToolbar.css\";\r\n\r\nconst defaultToolbarStyles = {\r\n    iconButton: {\r\n    },\r\n};\r\n\r\nexport default class ExcelToolbar extends React.Component {\r\n\r\n    handleClick = () => {\r\n        this.props.setExcel();\r\n    };\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n        // console.log(\"classes\", classes)\r\n        const title=<span  style={{fontSize: '12px', marginBottom: '0px', margin: '0px', padding: '0px' }}  >{this.props.excelToolbarText}</span>\r\n        return (\r\n            <React.Fragment>\r\n                <Tooltip placement='left-end' style={{fontSize: '12px', margin: '0px', padding: '0px' }}   title={title}>\r\n                    <IconButton  onClick={this.handleClick}>\r\n                        <svg className=\"icon\" xmlns=\"http://www.w3.org/2000/svg\"   padding= '0px' width=\"30\" height=\"30\"  viewBox=\"0 0 24 24\"><path d=\"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM17 13l-5 5-5-5h3V9h4v4h3z\"/></svg>\r\n                    </IconButton>\r\n                </Tooltip>\r\n            </React.Fragment>\r\n        );\r\n    }\r\n\r\n}\r\n","import React from \"react\";\r\nimport MUIDataTable from \"mui-datatables\";\r\nimport {\r\n  Typography,\r\n  TableRow,\r\n  TableCell,\r\n  Card,\r\n  CardContent\r\n} from \"@material-ui/core\";\r\nimport { createMuiTheme, MuiThemeProvider } from \"@material-ui/core/styles\";\r\nimport {GRID_INTERNAL_CAPTIONS} from '../../definitions/generalDefinitions';\r\n//import DownloadExcel from './DownloadExcel'\r\nimport DownloadExcel from \"./DownloadExcel\";\r\nimport ExcelToolbar from \"./ExcelToolbar\";\r\n//import PrintToolbar from \"./printToolbar\";\r\nimport {\r\n  getInfoIconNotes\r\n} from \"../../definitions/infoIconsDefinitions.js\";\r\nimport { Info } from \"../Info\";\r\n\r\n\r\nexport default class Datatable extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      downloadExcelNow: 0\r\n    };\r\n  }\r\n\r\n\r\n\r\n  getMuiTheme = () =>\r\n    createMuiTheme({\r\n      typography: {\r\n        fontFamily: '\"Trebuchet MS\"',\r\n        fontSize: 11,\r\n        fontWeight: \"100\"\r\n      },\r\n      overrides: {\r\n        MUIDataTable: {\r\n          tableRoot: {\r\n            margin: 0,\r\n            \r\n          },\r\n          paper: {\r\n            boxShadow: \"none\",\r\n            borderBottom:\"1px solid rgb(150, 150, 150)\",\r\n            borderRight:\"1px solid rgb(200, 200, 200)\",\r\n          }\r\n        },\r\n        MuiTableRow: {\r\n          root: {\r\n            //for the body\r\n            height: \"100%\"\r\n          },\r\n          head: {\r\n            //for the head\r\n            height: \"100%\"\r\n          },\r\n          footer: {\r\n            display: \"none\"\r\n          }\r\n        },\r\n        MuiTableCell: {\r\n          head: {\r\n            fontSize: \".8rem\"\r\n          },\r\n          \r\n          sizeSmall: {\r\n            padding: \"8px 3px 8px 3px\"\r\n          }\r\n\r\n        },\r\n        MUIDataTableToolbar: {\r\n          root: {\r\n            paddingLeft: \"0px\"\r\n          },\r\n          titleRoot: {\r\n            fontSize: 24,\r\n            fontWeight: 'bold'\r\n          },\r\n          icon: {\r\n            fontSize: 24\r\n          }\r\n        },\r\n        MUIDataTableBodyCell: {\r\n          root: {\r\n            backgroundColor: \"#FF0000\"\r\n           }\r\n        },\r\n        MUITypography: {\r\n          root: {\r\n            backgroundColor: \"blue\"\r\n           },\r\n           \r\n            body2: {\r\n              color: 'blue',\r\n            },\r\n        },\r\n        MUITablePagination: {\r\n          caption: {\r\n              value: 'blue',\r\n            },\r\n        }\r\n      }\r\n    });\r\n\r\n  setExcel = () => {\r\n    let downloadNow = this.state.downloadExcelNow === 1 ? 0 : 1;\r\n    this.setState({ downloadExcelNow: downloadNow });\r\n  };\r\n\r\n  render() {\r\n    let data = [];\r\n    let dataRow = [];\r\n    let j;\r\n    let i;\r\n\r\n\r\n    \r\n    let unit=65\r\n    let factor=1.3\r\n    if(this.props.dataColTitles.length<4) // for liabs\r\n      unit=95\r\n   \r\n      let divStyle={ width: factor*unit*(this.props.dataColTitles.length),  marginBottom:\"10px\"  }   \r\n    if(factor*unit*this.props.dataColTitles.length>(1/factor)* window.innerWidth)\r\n    {\r\n      unit=((1/factor)*window.innerWidth/(factor*this.props.dataColTitles.length))\r\n      divStyle={ width: factor*unit*(this.props.dataColTitles.length) }   \r\n    \r\n    } \r\n     if(unit<60)\r\n    {\r\n      unit=60 \r\n      divStyle={ width: \"100%\" } \r\n    } \r\n    \r\n    \r\n    let columns = [];\r\n\r\n    if (this.props.dataProjection !== undefined) {\r\n    \r\n      for (i = 0; i < this.props.dataProjection[0].length; ++i) {\r\n        for (j = 0; j < this.props.dataColTitles.length; ++j) {\r\n          if(j<1)\r\n          dataRow.push(this.props.dataProjection[j][i]);\r\n          else\r\n          dataRow.push(this.props.dataProjection[j][i]);\r\n        }\r\n        data.push(dataRow);\r\n        dataRow = [];\r\n      }\r\n\r\n      // build and style header and columns\r\n      let widthCustom =unit;// Math.max(80,6 * this.props.dataColTitles.length); //+'%';\r\n      let styleHeader = {\r\n        backgroundColor: \"#334d7c\",\r\n        color: \"#FFFFFF\",\r\n        textAlign: \"center\",\r\n        width: widthCustom,\r\n        fontWeight: \"bold\",\r\n        position: \"sticky\",\r\n        top: 0,\r\n        zIndex: 0,\r\n      };\r\n\r\n      let customHeader = ({ index, ...column }) => {\r\n        return (\r\n          \r\n          <TableCell key={index} style={styleHeader}>\r\n            {this.props.gridIcons !== undefined && \r\n            this.props.gridIcons[index] !== undefined && <div><Info infoIcon={this.props.gridIcons[index]}/><br/></div>} \r\n          {/* {index===this.props.headerIndex && <div><Info infoIcon={getInfoIconNotes(this.props.language)}/><br/></div>}  */}\r\n           {column.name}\r\n           </TableCell>\r\n        );\r\n      };\r\n\r\n      for (i = 0; i < this.props.dataColTitles.length; ++i) {\r\n        columns.push({\r\n          name: this.props.dataColTitles[i],\r\n          options: {\r\n            filter: false,\r\n            customHeadRender: customHeader\r\n          }\r\n        });\r\n      }\r\n    }\r\n    const captions= GRID_INTERNAL_CAPTIONS[this.props.language]\r\n    const title=<span style={{fontSize: '14px'}}  >{captions.excel}</span>\r\n            \r\n              \r\n    const excelToolbarText=captions.excel \r\n     const options = {\r\n      filter: false,\r\n      filterType: \"dropdown\",\r\n      selectableRows: \"none\",\r\n      responsive: \"scrollMaxHeight\", //this removes horiz\r\n      resizableColumns: true,\r\n      selectableRowsHeader: false,\r\n      viewColumns: false,\r\n      search: false,\r\n      download: false,\r\n      print:false,\r\n      textLabels:{\r\n        pagination: {\r\n          rowsPerPage: captions.rows,\r\n          displayRows: captions.of\r\n        },\r\n        \r\n      },\r\n      \r\n      rowsPerPage: 100,\r\n      setTableProps: () => {\r\n        return {\r\n          padding: \"default\",\r\n          size: \"small\",\r\n          margin: \"0px\"\r\n        };\r\n      },\r\n      downloadOptions: {\r\n        filename: \"INAtableDownload.csv\",\r\n        separator: \",\"\r\n      },\r\n      onDownload: (buildHead, buildBody, columns, data) => {\r\n        //handleCSVDownload2(data, columns);\r\n        this.setExcel();\r\n        //return \"\\uFEFF\" + \"dfof\\n \" + \"go to hell\\n\" + buildHead(headerNames) + buildBody(data);\r\n        return false;\r\n      },\r\n      customRowRender: (data, dataIndex, rowIndex) => {\r\n        let style = {textAlign: \"right\"};\r\n        if (data[0] === \"wwwwwww\") {\r\n          style.backgroundColor = \"green\";\r\n          style.fontSize = \"36px\";\r\n        }\r\n        var rows = [];\r\n\r\n        let i;\r\n        for (i = 0; i < this.props.dataColTitles.length; ++i) {\r\n          let dataI = data[i];\r\n          rows.push(\r\n            <TableCell key={i} style={style}>\r\n              <Typography>{\r\n /* this.formatMoney(\r\n  dataI,\r\n    this.props.gridColumnAligns[i],\r\n    \".\",\r\n    \",\"\r\n  ) } */dataI}</Typography>\r\n            </TableCell>\r\n          );\r\n        }\r\n        // console.log(rows)\r\n        return (\r\n          <TableRow key={rowIndex} style={{ backgroundColor: this.props.specialRow===undefined ? (rowIndex%2?\"#f9f9f9\":\"#e4e5e6\"):(rowIndex===this.props.specialRow?\"#d0d7e6\":(rowIndex%2?\"#f9f9f9\":\"#e4e5e6\")) }}>\r\n            {rows}\r\n          </TableRow>\r\n        );\r\n      },\r\n      customToolbar: () => <ExcelToolbar excelToolbarText={excelToolbarText} setExcel={this.setExcel} />\r\n    };\r\n\r\n   \r\n\r\n    return (\r\n        <div style={divStyle} >\r\n          \r\n        <MuiThemeProvider theme={this.getMuiTheme()}>\r\n          <MUIDataTable\r\n            title={this.props.gridTitle}\r\n            data={data}\r\n            columns={columns}\r\n            options={options}\r\n          />\r\n        </MuiThemeProvider>\r\n        {this.state.downloadExcelNow ===1 && <DownloadExcel\r\n          excelColumnsDataMain={this.props.dataProjection}\r\n          width={\"90\"}\r\n          excelColumnsHeaders={this.props.dataColTitles}\r\n          title={this.props.gridTitle}\r\n          excelColumnsDataInfoSection={this.props.gridColumnsDataExcelInfoSection}\r\n          downloadNow={this.state.downloadExcelNow}\r\n          hideElement={true}\r\n          language={this.props.language}\r\n        />}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport DataTable from \"./GridExcelComponent/DataTable\";\r\nimport Loader from 'react-loader-spinner'\r\nimport _ from 'lodash';\r\n\r\nexport class ProjectionGrid extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            loading: true,\r\n            projectionGrid: this.props.assetProjection,\r\n        }\r\n        this.dataAges = []\r\n    }\r\n\r\n    async componentWillReceiveProps(nextProps) {\r\n        if (!_.isEqual(nextProps.assetProjection, this.props.assetProjection)) {\r\n           this.setState({ loading: true });\r\n           this.setState({\r\n               projectionGrid: nextProps.assetProjection,\r\n               loading: false,\r\n           })\r\n       }\r\n   }\r\n   async componentDidMount() {\r\n    this.setState({ loading: true });\r\n    this.setState({\r\n        projectionGrid: this.props.assetProjection,\r\n        loading: false,\r\n    })\r\n}\r\n    render() {\r\n        \r\n        const projectionGrid=this.state.projectionGrid\r\n         if (this.state.loading) {// || this.state.projectionGrid===null || this.state.projectionGrid===undefined) {\r\n            return   <div><Loader type=\"TailSpin\" color=\"black\" height={30} width={30} /></div>;\r\n        }\r\n        return (\r\n            <div>\r\n                <DataTable\r\n                    gridTitle={projectionGrid.gridTitle}\r\n                    dataColTitles={projectionGrid.dataColTitles}\r\n                    dataProjection={projectionGrid.dataProjection}\r\n                    \r\n                    language={this.props.lang}\r\n                />\r\n            </div>);\r\n    }\r\n}\r\n\r\n","import React, { useState,useEffect } from \"react\";\r\nimport DataTable from \"./GridExcelComponent/DataTable\";\r\n\r\n\r\n\r\nexport default function ProjectionGrid1({assetProjection,lang}) {\r\n    const [projectionGrid, setProjectionGrid] = useState(assetProjection);\r\n\r\n  \r\n    useEffect(() => {\r\n        /* getGridData(input, assetCurr)\r\n            .then(response => response.json())\r\n            .then(data => setProjectionGrid(data)); */\r\n\r\n           setProjectionGrid(assetProjection)\r\n    }, [assetProjection])\r\n\r\n\r\n    //if(projectionGrid!==null && projectionGrid!==undefined){\r\n    return (\r\n        <div>\r\n         \r\n            { assetProjection ?\r\n            <DataTable\r\n                gridTitle={projectionGrid.gridTitle}\r\n                dataColTitles={  projectionGrid.dataColTitles}\r\n                dataProjection={projectionGrid.dataProjection}\r\n                \r\n                language={lang}\r\n            /> : null}\r\n        </div>);\r\n}\r\n\r\n","import React, { Component } from 'react';\r\n\r\nexport class GridButton extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.handleClick = this.handleClick.bind(this);\r\n    }\r\n    \r\n\thandleClick = () => {\r\n\t\tthis.props.handleClickGridButton();\r\n    }\r\n\r\n\trender() {\r\n\t\treturn (\r\n            <span>\r\n                    <img\r\n                    className={this.props.className}\r\n                    onClick={this.handleClick}\r\n                    id={this.props.id}\r\n                    alt={this.props.alt}\r\n                    src = {this.props.src}\r\n                    />  \r\n            </span>\r\n        )\r\n    }\r\n}\r\n","import {\r\n  ASSETS,\r\n  ASSET_TAX,\r\n  ASSET_OWNERSHIP_ACTION,\r\n  COLUMN_TITLES,\r\n} from \"../definitions/generalDefinitions\";\r\nimport { getListItemNameFromKey, arrayFormatMoney } from \"../utils/helper\";\r\n\r\nimport { fetchAssetAllGridColumns } from \"../utils/FetchAPIs\";\r\n\r\nimport {\r\n  ASSET_API_OUTPUT_Year,\r\n  ASSET_API_OUTPUT_Age,\r\n  ASSET_API_OUTPUT_FMV,\r\n  ASSET_API_OUTPUT_EOYBalance,\r\n  ASSET_API_OUTPUT_ACB,\r\n  ASSET_API_OUTPUT_CapitalGain,\r\n  ASSET_API_OUTPUT_TaxPayable,\r\n  ASSET_API_OUTPUT_CapGainsExemption,\r\n  ASSET_API_OUTPUT_Deposits,\r\n  ASSET_API_OUTPUT_Withdrawals,\r\n  ASSET_API_OUTPUT_RRIF,\r\n  ASSET_API_OUTPUT_TaxPayableonIncome,\r\n  ASSET_API_OUTPUT_DispositionAmount,\r\n  ASSET_YEAR_TODAY,\r\n  APPLET_INA,\r\n  APPLET_EP,\r\n} from \"../definitions/generalDefinitions\";\r\nimport { appletMode } from \"../../package.json\";\r\n\r\nexport async function getAssetGridValues(dataNA, assetCurr, lang, aggregate) {\r\n  const title = COLUMN_TITLES[lang];\r\n\r\n  let data = await fetchAssetAllGridColumns(dataNA, assetCurr.id);\r\n  if (data !== undefined && data !== undefined) {\r\n    console.log(\"POST: NA_AssetProj success\");\r\n\r\n    let taxOnDisposition = [];\r\n    let yr;\r\n    for (\r\n      yr = 0;\r\n      yr < data[ASSET_API_OUTPUT_TaxPayable].numericValues.length;\r\n      ++yr\r\n    ) {\r\n      taxOnDisposition[yr] =\r\n        data[ASSET_API_OUTPUT_DispositionAmount].numericValues[yr] > 0\r\n          ? data[ASSET_API_OUTPUT_TaxPayable].numericValues[yr]\r\n          : 0;\r\n    }\r\n    taxOnDisposition = arrayFormatMoney(taxOnDisposition, lang, 0);\r\n\r\n    let arrYear = data[ASSET_API_OUTPUT_Year].numericValues;\r\n    \r\n    // year 0 is today, change it\r\n    arrYear[0] = ASSET_YEAR_TODAY[lang].today;\r\n    const arrAge = data[ASSET_API_OUTPUT_Age].numericValues;\r\n    let arrAdjAge = [];// to be used for all and JLTD\r\n    if(appletMode === \"EP\" && dataNA.lives.length>1) // JLTD\r\n    {\r\n      const age1=dataNA.lives[0].Age // missing age is clients if 2 lives surviver is picked up in API\r\n      const age2=dataNA.lives[1].Age // missing age is clients if 2 lives surviver is picked up in API\r\n      \r\n      for (\r\n          let i = 0;\r\n          i < arrYear.length;\r\n          ++i\r\n        ) {\r\n          arrAdjAge.push(parseInt(age1+i) + \"/\" + parseInt(age2+i));\r\n      }\r\n    }\r\n    else\r\n      arrAdjAge =arrAge\r\n    \r\n    const arrDeposits = arrayFormatMoney(\r\n      data[ASSET_API_OUTPUT_Deposits].numericValues,\r\n      lang,\r\n      0\r\n    );\r\n    const arrFMV = arrayFormatMoney(\r\n      data[ASSET_API_OUTPUT_FMV].numericValues,\r\n      lang,\r\n      0\r\n    );\r\n    \r\n    const arrRRIF = arrayFormatMoney(\r\n      data[ASSET_API_OUTPUT_RRIF].numericValues,\r\n      lang,\r\n      0\r\n    );\r\n    const arrEOYBalance = arrayFormatMoney(\r\n      data[ASSET_API_OUTPUT_EOYBalance].numericValues,\r\n      lang,\r\n      0\r\n    );\r\n    const arrWithdrawals = arrayFormatMoney(\r\n      data[ASSET_API_OUTPUT_Withdrawals].numericValues,\r\n      lang,\r\n      0\r\n    );\r\n    const arrTaxPayableonIncome = arrayFormatMoney(\r\n      data[ASSET_API_OUTPUT_TaxPayableonIncome].numericValues,\r\n      lang,\r\n      0\r\n    );\r\n    const arrTaxPayable = arrayFormatMoney(\r\n      data[ASSET_API_OUTPUT_TaxPayable].numericValues,\r\n      lang,\r\n      0\r\n    );\r\n    const arrDispositionAmount = arrayFormatMoney(\r\n      data[ASSET_API_OUTPUT_DispositionAmount].numericValues,\r\n      lang,\r\n      0\r\n    );\r\n    const arrACB = arrayFormatMoney(\r\n      data[ASSET_API_OUTPUT_ACB].numericValues,\r\n      lang,\r\n      0\r\n    );\r\n\r\n\r\n\r\n    const arrCapitalGain = arrayFormatMoney(\r\n      data[ASSET_API_OUTPUT_CapitalGain].numericValues,\r\n      lang,\r\n      0\r\n    );\r\n    const arrCapGainsExemption = arrayFormatMoney(\r\n      data[ASSET_API_OUTPUT_CapGainsExemption].numericValues,\r\n      lang,\r\n      0\r\n    );\r\n    const gridTitleSection =\r\n      appletMode === \"INA\"\r\n        ? \" (\" +\r\n          getListItemNameFromKey(\r\n            ASSET_OWNERSHIP_ACTION,\r\n            assetCurr.ownerKey,\r\n            lang\r\n          ) +\r\n          \")\"\r\n        : \"\" +\r\n          (assetCurr.description !== \"\"\r\n            ? \" (\" + assetCurr.description + \")\"\r\n            : \"\");\r\n    const gridTitle =\r\n      getListItemNameFromKey(ASSETS, assetCurr.assetTypeKey, lang) +\r\n      gridTitleSection +\r\n      \" Projection\";\r\n\r\n    let dataColTitles = [];\r\n    let dataProjection = [];\r\n\r\n   // console.log(arrCapitalGain)\r\n    // aggregate table\r\n    if (aggregate === true) {\r\n      for (\r\n        let i = 0;\r\n        i < COLUMN_TITLES.EP_SHEET_HEADERS[lang].Full.length;\r\n        ++i\r\n      ) {\r\n        dataColTitles.push(COLUMN_TITLES.EP_SHEET_HEADERS[lang].Full[i]);\r\n      }\r\n\r\n      dataProjection[0] = arrYear;\r\n      dataProjection[1] = arrAdjAge;\r\n      dataProjection[2] = arrFMV;\r\n      dataProjection[3] = arrFMV;\r\n      dataProjection[4] = arrDeposits;\r\n      dataProjection[5] = arrRRIF; //+ arrWithdrawals;\r\n      dataProjection[6] = arrDispositionAmount;\r\n      dataProjection[7] = arrTaxPayableonIncome;\r\n      dataProjection[8] = arrCapitalGain;\r\n      dataProjection[9] = arrCapGainsExemption;\r\n      dataProjection[10] = arrEOYBalance;\r\n      dataProjection[11] = arrFMV;\r\n      dataProjection[12] = arrTaxPayable;\r\n    }\r\n\r\n    // individual tables\r\n    else {\r\n      if (assetCurr.assetTaxTypeKey === ASSET_TAX.REGISTERED.Key) {\r\n        //\t\t'Registered')\r\n        if (APPLET_INA) {\r\n          dataColTitles = [\r\n            title.Year,\r\n            title.Age,\r\n            title.FMV,\r\n            title.AnnualContribution,\r\n            title.MinRRIFIncome,\r\n            title.Withdrawal,\r\n            //title.Taxonincome,\r\n            title.EOYBalance,\r\n          ];\r\n\r\n          // F^\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] = arrFMV;\r\n          dataProjection[3] = arrDeposits;\r\n          dataProjection[4] = arrRRIF;\r\n          dataProjection[5] = arrWithdrawals;\r\n          //dataProjection[6] = arrTaxPayableonIncome;\r\n          dataProjection[6] = arrEOYBalance;\r\n        } else {\r\n          dataColTitles = [\r\n            title.Year,\r\n            title.Age,\r\n            title.FMV,\r\n            title.AnnualContribution,\r\n            title.MinRRIFIncome,\r\n            title.Withdrawal,\r\n            //title.Taxonincome,\r\n            title.EOYBalance,\r\n            //title.TaxLiabilityatDeath,\r\n            title.TaxLiability,\r\n          ];\r\n\r\n          // F^\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] = arrFMV;\r\n          dataProjection[3] = arrDeposits;\r\n          dataProjection[4] = arrRRIF;\r\n          dataProjection[5] = arrWithdrawals;\r\n          //dataProjection[6] = arrTaxPayableonIncome;\r\n          dataProjection[6] = arrEOYBalance;\r\n          dataProjection[7] = arrTaxPayable;\r\n        }\r\n      } else if (assetCurr.assetTypeKey === ASSETS.PERSONAL_RESIDENCE.Key) {\r\n        if (APPLET_INA) {\r\n          dataColTitles = [\r\n            title.Year,\r\n            title.Age,\r\n            title.FMV,\r\n            title.SaleProceeds,\r\n          ];\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] =\r\n            //arrEOYBalance;\r\n            arrFMV;\r\n          dataProjection[3] = arrDispositionAmount;\r\n        } else {\r\n          dataColTitles = [\r\n            title.Year,\r\n            title.Age,\r\n            title.FMV,\r\n            title.SaleProceeds,\r\n            title.TaxLiability,\r\n          ];\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] =\r\n            //arrEOYBalance;\r\n            arrFMV;\r\n          dataProjection[3] = arrDispositionAmount;\r\n          dataProjection[4] = arrTaxPayable;\r\n        }\r\n\r\n      } else if (assetCurr.assetTypeKey === ASSETS.LIFE_INSURANCE.Key) {\r\n        if (APPLET_INA) {\r\n          dataColTitles = [title.Year, title.Age, title.FA];\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] =\r\n            //arrEOYBalance;\r\n            arrFMV;\r\n        } else {\r\n          dataColTitles = [title.Year, title.Age, title.FA];\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] =\r\n            //arrEOYBalance;\r\n            arrFMV;\r\n        }\r\n\r\n      } else if (assetCurr.assetTypeKey === ASSETS.REAL_ESTATE.Key) {\r\n        if (APPLET_INA) {\r\n          dataColTitles = [\r\n            title.Year,\r\n            title.Age,\r\n            title.FMV,\r\n            title.ACB,\r\n            title.RentalIncome,\r\n            title.SaleProceeds,\r\n          ];\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] =\r\n            //arrEOYBalance;\r\n            arrFMV;\r\n          dataProjection[3] = arrACB;\r\n          dataProjection[4] = arrWithdrawals;\r\n          dataProjection[5] = arrDispositionAmount;\r\n          dataProjection[6] = taxOnDisposition;\r\n        } else {\r\n          dataColTitles = [\r\n            title.Year,\r\n            title.Age,\r\n            title.FMV,\r\n            title.ACB,\r\n          //  title.RentalIncome,\r\n          //  title.Taxonincome,\r\n            title.SaleProceeds,\r\n            title.CapitalGain,\r\n            title.TaxLiability,\r\n          ];\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] =\r\n            //arrEOYBalance;\r\n            arrFMV;\r\n          dataProjection[3] = arrACB;\r\n       //   dataProjection[4] = arrWithdrawals;\r\n       //   dataProjection[5] = arrTaxPayableonIncome;\r\n          dataProjection[4] = arrDispositionAmount;\r\n          dataProjection[5] = arrCapitalGain;\r\n          dataProjection[6] = arrTaxPayable;\r\n        }\r\n      } else if (assetCurr.assetTypeKey === ASSETS.SMALL_BUSINESS_SHARES.Key) {\r\n        if (APPLET_INA) {\r\n          dataColTitles = [\r\n            title.Year,\r\n            title.Age,\r\n            title.FMV,\r\n            title.ACB,\r\n            title.SaleProceeds,\r\n            title.TaxLiability,\r\n          ];\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] =\r\n            //arrEOYBalance;\r\n\r\n            arrFMV;\r\n          dataProjection[3] = arrACB;\r\n          dataProjection[4] = arrDispositionAmount;\r\n          dataProjection[5] = taxOnDisposition;\r\n        } else {\r\n          dataColTitles = [\r\n            title.Year,\r\n            title.Age,\r\n            title.FMV,\r\n            title.ACB,\r\n            title.SaleProceeds,\r\n            title.CapitalGainsExemption,\r\n            title.CapitalGain,\r\n            title.TaxLiability,\r\n          ];\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] =\r\n            //arrEOYBalance;\r\n\r\n            arrFMV;\r\n          dataProjection[3] = arrACB;\r\n          dataProjection[4] = arrDispositionAmount;\r\n          dataProjection[5] = arrCapGainsExemption;\r\n          dataProjection[6] = arrCapitalGain;\r\n          dataProjection[7] = arrTaxPayable;\r\n        }\r\n      } else if (\r\n        assetCurr.assetTypeKey === ASSETS.INTEREST_BEARING.Key ||\r\n        assetCurr.assetTypeKey === ASSETS.STOCKS_BONDS.Key ||\r\n        assetCurr.assetTypeKey === ASSETS.TFSA.Key\r\n      ) {\r\n        if (APPLET_INA) {\r\n          dataColTitles = [\r\n            title.Year,\r\n            title.Age,\r\n            title.FMV,\r\n            title.AnnualContribution,\r\n            title.Withdrawal,\r\n            title.EOYBalance,\r\n          ];\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] = arrFMV;\r\n          dataProjection[3] = arrDeposits;\r\n          dataProjection[4] = arrWithdrawals;\r\n          dataProjection[5] = arrEOYBalance;\r\n        } else {\r\n          dataColTitles = [\r\n            title.Year,\r\n            title.Age,\r\n            title.FMV,\r\n            title.AnnualContribution,\r\n            title.Withdrawal,\r\n            title.EOYBalance,\r\n            title.TaxLiability,\r\n          ];\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] = arrFMV;\r\n          dataProjection[3] = arrDeposits;\r\n          dataProjection[4] = arrWithdrawals;\r\n          dataProjection[5] = arrEOYBalance;\r\n          dataProjection[6] = arrTaxPayable;\r\n          if (assetCurr.assetTypeKey === ASSETS.STOCKS_BONDS.Key) {\r\n            dataColTitles = [\r\n              title.Year,\r\n              title.Age,\r\n              title.FMV,\r\n              title.ACB,\r\n              title.AnnualContribution,\r\n              title.Withdrawal,\r\n              title.SaleProceeds,\r\n              title.CapitalGain,\r\n              title.EOYBalance,\r\n              title.TaxLiability,\r\n            ];\r\n            dataProjection[0] = arrYear;\r\n            dataProjection[1] = arrAdjAge;\r\n            dataProjection[2] = arrFMV;\r\n            dataProjection[3] = arrACB;\r\n            dataProjection[4] = arrDeposits;\r\n            dataProjection[5] = arrWithdrawals;\r\n            dataProjection[6] = arrDispositionAmount;\r\n            dataProjection[7] = arrCapitalGain;\r\n            dataProjection[8] = arrEOYBalance;\r\n            dataProjection[9] = arrTaxPayable;\r\n          }\r\n        }\r\n\r\n        //  arrTaxPayable;\r\n      } else {\r\n        if (APPLET_INA) {\r\n          dataColTitles = [title.Year, title.Age, title.FMV, title.EOYBalance];\r\n\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] = arrFMV;\r\n          dataProjection[3] = arrEOYBalance;\r\n        } else {\r\n          dataColTitles = [\r\n            title.Year,\r\n            title.Age,\r\n            title.FMV,\r\n            title.EOYBalance,\r\n            title.Withdrawal,\r\n            title.TaxLiability,\r\n          ];\r\n\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] = arrFMV;\r\n          dataProjection[3] = arrEOYBalance;\r\n          dataProjection[4] = arrWithdrawals;\r\n          dataProjection[5] = arrTaxPayable;\r\n        }\r\n      }\r\n    }\r\n    return { dataColTitles, dataProjection, gridTitle };\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { DropDown } from \"./DropDown\";\r\n//import { InputField4 } from './inputField4';\r\nimport { InputField } from \"./inputField\";\r\nimport { AddRemove } from \"./AddRemove\";\r\nimport { cleanFormat, getDisableValues } from \"../utils/helper\";\r\nimport {\r\n  getInfoIconAssetsIncomeRate,\r\n  getInfoIconAssetsYr0,\r\n  getInfoIconAssetsOwner,\r\n  getInfoIconSourcesRRIF,\r\n  getInfoTaxLiability,\r\n  getInfoIconTaxExempt,\r\n  getInfoIconAssetsIns,\r\n  getInfoIconTFSA,\r\n  getInfoIconDepositWithd,\r\n  getInfoIconTaxLiab,\r\n} from \"../definitions/infoIconsDefinitions\";\r\n\r\nimport {\r\n  createDefaultAsset,\r\n  copyFromAnotherAsset,\r\n} from \"../data/createDefaults\";\r\nimport {\r\n  MESSAGES,\r\n  ASSETS,\r\n  ASSET_TAX,\r\n  CONTROLTITLE,\r\n  OWNERSHIP,\r\n  ASSET_OWNERSHIP_ACTION,\r\n  //  ASSET_OWNERSHIP_ACTION2,\r\n  COLUMN_TITLES,\r\n} from \"../definitions/generalDefinitions\";\r\nimport {\r\n  getListItemNameFromKey,\r\n  getListItemKeyFromName,\r\n  isMobileDevice,\r\n  getListToShowByOrder,\r\n  arrayFormatMoney,\r\n} from \"../utils/helper\";\r\n\r\nimport { ProjectionGrid } from \"./ProjectionGrid.js\";\r\nimport ProjectionGrid1 from \"./ProjectionGrid1.js\";\r\nimport DataTable from \"./GridExcelComponent/DataTable\";\r\nimport {\r\n  fetchAssetProjection2,\r\n  fetchAssetProjectionAPI,\r\n} from \"../utils/FetchAPIs\";\r\nimport {\r\n  DEFAULT_RRIF_AGE,\r\n  DROPDOWN_WIDE,\r\n} from \"../definitions/generalDefinitions\";\r\nimport _ from \"lodash\";\r\n\r\nimport {\r\n  ASSET_API_OUTPUT_TaxPayable,\r\n  APPLET_INA,\r\n  APPLET_EP,\r\n} from \"../definitions/generalDefinitions\";\r\n\r\nimport { GridButton } from \"./GridButton\";\r\nimport { getAssetGridValues } from \"../data/assetGridProjections\";\r\nimport debounce from \"lodash.debounce\";\r\nimport { Language } from \"@material-ui/icons\";\r\n\r\nconst ASSET_DROPDOWN_TYPE = 0;\r\n// inserted desc here not a dropdown no need for indes\r\nconst ASSET_DROPDOWN_OWNER = 2;\r\nconst ASSET_DROPDOWN_TAXTYPE = 3;\r\n\r\nexport class Asset extends Component {\r\n  displayName = Asset.name;\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      description: \"\",\r\n      displaySreadsheet: false,\r\n      loading: false,\r\n    };\r\n    var i;\r\n    var typeValues = [];\r\n    const listAssetsToShow = getListToShowByOrder(ASSETS);\r\n    for (i = 0; i < listAssetsToShow.length; ++i) {\r\n      typeValues.push({\r\n        label: listAssetsToShow[i].value[this.props.language],\r\n        value: i + 1,\r\n      });\r\n    }\r\n    /* for (i = 0; i < ASSETS[this.props.language].Values.length; ++i) {\r\n      typeValues.push({\r\n        label: ASSETS[this.props.language].Values[i],\r\n        value: i + 1\r\n      });\r\n    } */\r\n\r\n    /* var ownerValues = [\r\n      {\r\n        label: OWNERSHIP[this.props.language].Values[0],\r\n        value: 1\r\n      },\r\n      { label: OWNERSHIP[this.props.language].Values[1], value: 2 },\r\n      { label: OWNERSHIP[this.props.language].Values[2], value: 3 },\r\n      { label: OWNERSHIP[this.props.language].Values[3], value: 4 }\r\n    ];\r\n */\r\n    var ownerActionValues = [\r\n      {\r\n        label:\r\n          ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.value[this.props.language],\r\n        value: 1,\r\n      },\r\n      {\r\n        label:\r\n          ASSET_OWNERSHIP_ACTION.CLIENT_ROLLOVER.value[this.props.language],\r\n        value: 2,\r\n      },\r\n      {\r\n        label: ASSET_OWNERSHIP_ACTION.SPOUSE.value[this.props.language],\r\n        value: 3,\r\n      },\r\n      {\r\n        label: ASSET_OWNERSHIP_ACTION.JOINT.value[this.props.language],\r\n        value: 4,\r\n      },\r\n    ];\r\n    if (APPLET_EP) {\r\n      ownerActionValues = [\r\n        {\r\n          label: ASSET_OWNERSHIP_ACTION.CLIENT.value[this.props.language],\r\n          value: 1,\r\n        },\r\n        {\r\n          label: ASSET_OWNERSHIP_ACTION.SPOUSE.value[this.props.language],\r\n          value: 2,\r\n        },\r\n      ];\r\n    }\r\n\r\n    /* var ownerActionValues2 = [\r\n          {\r\n            label:\r\n              ASSET_OWNERSHIP_ACTION2.properties[this.props.language].Values[\r\n                OWNER_ACTION_CLIENTLIQUIDATE\r\n              ],\r\n            value: 1\r\n          },\r\n          {\r\n            label:\r\n              ASSET_OWNERSHIP_ACTION[this.props.language].Values[\r\n                OWNER_ACTION_CLIENTROLLOVER\r\n              ],\r\n            value: 2\r\n          },\r\n          {\r\n            label:\r\n              ASSET_OWNERSHIP_ACTION[this.props.language].Values[\r\n                OWNER_ACTION_Spouse\r\n              ],\r\n            value: 3\r\n          },\r\n          {\r\n            label:\r\n              ASSET_OWNERSHIP_ACTION[this.props.language].Values[\r\n                OWNER_ACTION_Joint\r\n              ],\r\n            value: 4\r\n          }\r\n        ];\r\n    \r\n     */\r\n    this.taxValues = [];\r\n    this.desc = this.props.assetCurr.description;\r\n    const listAssetTaxesToShow = getListToShowByOrder(ASSET_TAX);\r\n    // console.log(listAssetTaxesToShow)\r\n    for (i = 0; i < listAssetTaxesToShow.length; ++i) {\r\n      this.taxValues.push({\r\n        label: listAssetTaxesToShow[i].value[this.props.language],\r\n        value: i + 1,\r\n      });\r\n    }\r\n    // console.log(this.props.assetCurr)\r\n    /*     for (i = 0; i < ASSET_TAX[this.props.language].Values.length; ++i) {\r\n          this.taxValues.push({\r\n            label: ASSET_TAX[this.props.language].Values[i],\r\n            value: i + 1\r\n          });\r\n        }\r\n     */\r\n\r\n    // console.log(this.props.assetCurr.ownerKey)\r\n    this.dataValues = {\r\n      DD: [ // asset types\r\n        {\r\n          //ASSET_DROPDOWN_TYPE index =0\r\n          id: 1,\r\n          Title: CONTROLTITLE[this.props.language].type,\r\n          defValue: getListItemNameFromKey(\r\n            ASSETS,\r\n            this.props.assetCurr.assetTypeKey,\r\n            this.props.language\r\n          ),\r\n          Values: typeValues,\r\n          disableOptionValue: getDisableValues(ASSETS),\r\n        },\r\n        {\r\n          id: 12,\r\n          Title: \"Description\",\r\n        },\r\n        {\r\n          //ASSET_DROPDOWN_OWNER index =2\r\n          id: 2, \r\n          Title: CONTROLTITLE[this.props.language].owner,\r\n          /* defValue: this.props.assetCurr.ownerKey,\r\n          Values: ownerValues \r\n          Title: ASSET_OWNERSHIP.Title.value[this.props.language],//CONTROLTITLE[this.props.language].ownershipAction,           */\r\n          defValue: getListItemNameFromKey(\r\n            ASSET_OWNERSHIP_ACTION,\r\n            this.props.assetCurr.ownerKey,\r\n            this.props.language\r\n          ),\r\n          Values: ownerActionValues,\r\n          disableOptionValue: getDisableValues(ASSET_OWNERSHIP_ACTION),\r\n        },\r\n        {\r\n          id: 3, //ASSET_DROPDOWN_TAXTYPE index =3\r\n          Title: CONTROLTITLE[this.props.language].tax,\r\n          defValue: getListItemNameFromKey(\r\n            ASSET_TAX,\r\n            this.props.assetCurr.assetTaxTypeKey,\r\n            this.props.language\r\n          ), // this.props.assetCurr.Tax,\r\n          disableOptionValue: getDisableValues(ASSET_TAX),\r\n          Values: this.taxValues,\r\n        },\r\n      ],\r\n    };\r\n\r\n    this.DDTax = {\r\n      disableOptionValue: getDisableValues(ASSET_TAX),\r\n    };\r\n    for (let i = 3; i < this.DDTax.disableOptionValue.length; i++)\r\n      this.DDTax.disableOptionValue[i] = true;\r\n\r\n    this.dataColTitles = [];\r\n    this.taxLiabOfClient = [];\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    //console.log(nextProps.assetCurr, this.props.assetCurr);\r\n    if (\r\n      !_.isEqual(nextProps.assetCurr, this.props.assetCurr) ||\r\n      nextProps.id !== this.props.id ||\r\n      nextProps.assetsNo !== this.props.assetsNo ||\r\n      nextProps.clientsNo !== this.props.clientsNo ||\r\n      !_.isEqual(nextProps.projection, this.props.projection)\r\n    ) {\r\n      if (\r\n        this.props.assetCurr.assetTypeKey ===\r\n          ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.Key ||\r\n        nextProps.assetCurr.assetTypeKey ===\r\n          ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.Key\r\n      ) {\r\n        // console.log(this.dataValues.DD[0].Values);\r\n        //console.log(nextProps.projection, this.props.projection);\r\n\r\n        this.dataValues.DD[ASSET_DROPDOWN_TYPE].Values.push({\r\n          label: ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.value[this.props.language],\r\n          value: this.dataValues.DD[ASSET_DROPDOWN_TYPE].Values.length + 1,\r\n        });\r\n        // console.log(this.dataValues.DD[0].Values);\r\n      }\r\n\r\n      this.dataValues.DD[ASSET_DROPDOWN_TYPE].defValue = getListItemNameFromKey(\r\n        ASSETS,\r\n        nextProps.assetCurr.assetTypeKey,\r\n        this.props.language\r\n      );\r\n      this.dataValues.DD[\r\n        ASSET_DROPDOWN_OWNER\r\n      ].defValue = getListItemNameFromKey(\r\n        ASSET_OWNERSHIP_ACTION,\r\n        nextProps.assetCurr.ownerKey,\r\n        this.props.language\r\n      );\r\n      this.dataValues.DD[\r\n        ASSET_DROPDOWN_TAXTYPE\r\n      ].defValue = getListItemNameFromKey(\r\n        ASSET_TAX,\r\n        nextProps.assetCurr.assetTaxTypeKey,\r\n        this.props.language\r\n      ); //nextProps.assetCurr.Tax;\r\n\r\n      this.dataValues.DD[2].disableOptionValue[1] =\r\n      (APPLET_EP && nextProps.clientsNo === 1) ||\r\n      (nextProps.assetCurr.assetTypeKey === ASSETS.LIFE_INSURANCE.Key);\r\n        //APPLET_EP && nextProps.clientsNo === 1;\r\n\r\n      this.setState({ description: nextProps.assetCurr.description });\r\n      //this.dataValues.DD[3].defValue = nextProps.assetCurr.ownerKey;\r\n\r\n      /* \r\nlet i;\r\n      this.typeValues = [];\r\n       if(this.props.Type===ASSETS[this.props.language].Values[4])\t//\t\t'Registered')  \r\n      {\r\n        this.dataValues.DD[2].defValue =ASSET_TAX[this.props.language].Values[TAX_RRSP] \r\n\r\n      this.typeValues.push({\r\n        label: ASSETS[this.props.language].Values[2],\r\n       });\r\n     }\r\n      else{\r\n      for (i = 0; i <= ASSETS[this.props.language].Values.length; ++i) {\r\n        this.typeValues.push({\r\n        label: ASSETS[this.props.language].Values[i],\r\n        value: i + 1\r\n      });\r\n      }} */\r\n    }\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    this.setState({ description: this.props.assetCurr.description });\r\n  };\r\n\r\n  componentDidUpdate = async (prevProps, prevState) => {\r\n    if (prevProps !== this.props) {\r\n      /*  console.log(\r\n         `this.state.clickCounts(♻️ componentDidUpdate)`,\r\n         this.props.assetCurr.currValue\r\n       );\r\n       */\r\n    }\r\n  };\r\n\r\n  handleDoRemove = (id) => {\r\n    if (this.props.disableAddRemove === false) {\r\n      this.props.handleRemoveAsset(id);\r\n    }\r\n  };\r\n\r\n  handleDoAdd = () => {\r\n    if (this.props.disableAddRemove === false) {\r\n      var assNo =\r\n        this.props.assetsNo >\r\n        this.dataValues.DD[ASSET_DROPDOWN_TYPE].Values.length - 1\r\n          ? this.dataValues.DD[ASSET_DROPDOWN_TYPE].Values.length - 2\r\n          : this.props.assetsNo;\r\n      var assNext = this.dataValues.DD[ASSET_DROPDOWN_TYPE].Values[assNo].label;\r\n      if (assNo === 4 || assNo === 5) assNo = 0;\r\n      else\r\n        assNo =\r\n          this.props.assetsNo >\r\n          this.dataValues.DD[ASSET_DROPDOWN_TAXTYPE].Values.length - 1\r\n            ? this.dataValues.DD[ASSET_DROPDOWN_TAXTYPE].Values.length - 1\r\n            : this.props.assetsNo;\r\n      var assTax = this.dataValues.DD[ASSET_DROPDOWN_TAXTYPE].Values[assNo]\r\n        .label;\r\n      const assTaxTypeKey = getListItemKeyFromName(\r\n        ASSET_TAX,\r\n        this.dataValues.DD[ASSET_DROPDOWN_TAXTYPE].Values[assNo].label\r\n      );\r\n      // console.log(assTaxTypeKey,assTax )\r\n      let asset = createDefaultAsset(this.props.assetsNo + 1);\r\n      asset.assetTypeKey = getListItemKeyFromName(ASSETS, assNext);\r\n      asset.description = \"\";\r\n      asset.ownerKey = APPLET_INA\r\n        ? ASSET_OWNERSHIP_ACTION.CLIENT_ROLLOVER.Key\r\n        : ASSET_OWNERSHIP_ACTION.CLIENT.Key; // in EP RRSP owner client or spouse\r\n      if (asset.assetTypeKey === ASSETS.LIFE_INSURANCE.Key)\r\n        asset.ownerKey = ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key;\r\n      asset.assetTaxTypeKey = assTaxTypeKey;\r\n\r\n      asset = this.setAssetValuesToDefault(asset);\r\n\r\n      this.dataValues.DD[ASSET_DROPDOWN_TAXTYPE].Values = this.taxValues;\r\n\r\n      this.props.handleAddAsset(asset);\r\n    }\r\n  };\r\n\r\n  updateDDown = (id, selection) => {\r\n    const { id: propId, assetCurr } = this.props;\r\n\r\n    let asset = copyFromAnotherAsset(assetCurr);\r\n    asset.id = propId;\r\n    if (id === 1) {\r\n      asset = createDefaultAsset(propId);\r\n      asset.assetTypeKey = getListItemKeyFromName(ASSETS, selection);\r\n      asset = this.setAssetValuesToDefault(asset);\r\n    } else if (id === 2) {\r\n      asset.ownerKey = getListItemKeyFromName(\r\n        ASSET_OWNERSHIP_ACTION,\r\n        selection\r\n      );\r\n      asset = this.setAssetValuesToDefault(asset);\r\n    } else if (id === 3)\r\n      //asset.Tax = selection;\r\n      asset.assetTaxTypeKey = getListItemKeyFromName(ASSET_TAX, selection);\r\n\r\n    /* asset = this.setAssetValuesToDefault(asset);  */\r\n    console.log(asset)\r\n    this.props.handleUpdate(asset);\r\n    //if (this.state.displaySreadsheet === true)\r\n    //this.handleUpdateGrid();\r\n  };\r\n  debounceHandleUpdataDesc = debounce(\r\n    (asset) => this.props.handleUpdate(asset),\r\n    500\r\n  );\r\n\r\n  updateDesc = (evt) => {\r\n    //console.log(evt.target.value);\r\n    let asset = copyFromAnotherAsset(this.props.assetCurr);\r\n    asset.description = evt.target.value;\r\n    this.props.handleUpdate(asset);\r\n  };\r\n\r\n  handleUpdateInput = (id, value) => {\r\n    //this.setState({ loading: true });\r\n    let asset = copyFromAnotherAsset(this.props.assetCurr);\r\n    asset.id = this.props.id;\r\n    //console.log(value);\r\n    /* let asset = {\r\n      id: this.props.id,\r\n      //Type: this.props.assetCurr.Type,\r\n      assetTypeKey: this.props.assetCurr.assetTypeKey,\r\n      ownerKey: this.props.assetCurr.ownerKey,\r\n      //OwnerID: this.props.assetCurr.OwnerID,\r\n      currValue: this.props.assetCurr.currValue,\r\n      //Tax: this.props.assetCurr.Tax,\r\n      assetTaxTypeKey: this.props.assetCurr.assetTaxTypeKey,\r\n      //TaxID: this.props.assetCurr.TaxID,\r\n      growth: this.props.assetCurr.growth,\r\n      DisposeYr: this.props.assetCurr.DisposeYr,\r\n      DisposeDur: this.props.assetCurr.DisposeDur,\r\n      ACB: this.props.assetCurr.ACB,\r\n      smallBusinessCapGainExemption: this.props.assetCurr\r\n        .smallBusinessCapGainExemption,\r\n      contributionAmt: this.props.assetCurr.contributionAmt,\r\n      contributionStartYr: this.props.assetCurr.contributionStartYr,\r\n      contributionDur: this.props.assetCurr.contributionDur,\r\n      incomeRate: this.props.assetCurr.incomeRate,\r\n      RRIFStartAge: this.props.assetCurr.RRIFStartAge\r\n    };\r\n */\r\n    let changed = false;\r\n    const lang = this.props.language;\r\n    const valueClean = cleanFormat(value,lang);\r\n    const valueCleanInt = parseInt(valueClean);\r\n    \r\n    if (id === 2) {\r\n      changed = asset.DisposeYr !== parseInt(value) ? true : false;\r\n      asset.DisposeYr = parseInt(value);\r\n    } else if (id === 3) {\r\n      changed = asset.DisposeDur !== parseInt(value) ? true : false;\r\n      asset.DisposeDur = parseInt(value);\r\n    } else if (id === 4) {\r\n      changed = asset.ACB !== valueCleanInt ? true : false;\r\n      asset.ACB = valueCleanInt;\r\n    } else if (id === 10) {\r\n      changed =\r\n        asset.smallBusinessCapGainExemption !== valueCleanInt\r\n          ? true\r\n          : false;\r\n      asset.smallBusinessCapGainExemption = valueCleanInt;\r\n    } else if (id === 1) {\r\n      changed = asset.currValue !== valueCleanInt ? true : false;\r\n      asset.currValue = valueCleanInt;\r\n    } else if (id === 5) {\r\n      changed =\r\n        asset.growth !==\r\n        parseInt(10000 * valueClean) / 10000\r\n          ? true\r\n          : false;\r\n      asset.growth =\r\n        parseInt(10000 * valueClean) / 10000;\r\n    } else if (id === 6) {\r\n      changed =\r\n        asset.contributionAmt !== valueCleanInt ? true : false;\r\n      asset.contributionAmt = valueCleanInt;\r\n    } else if (id === 7) {\r\n      changed = asset.contributionStartYr !== parseInt(value) ? true : false;\r\n      asset.contributionStartYr = parseInt(value);\r\n    } else if (id === 8) {\r\n      changed = asset.contributionDur !== parseInt(value) ? true : false;\r\n      asset.contributionDur = parseInt(value);\r\n    } else if (id === 13) {\r\n      changed =\r\n        asset.withdrawalAmt !== valueCleanInt ? true : false;\r\n      asset.withdrawalAmt = valueCleanInt;\r\n    } else if (id === 14) {\r\n      changed = asset.withdrawalStartYr !== parseInt(value) ? true : false;\r\n      asset.withdrawalStartYr = parseInt(value);\r\n    } else if (id === 15) {\r\n      changed = asset.withdrawalDur !== parseInt(value) ? true : false;\r\n      asset.withdrawalDur = parseInt(value);\r\n    } else if (id === 9) {\r\n      changed =\r\n        asset.incomeRate !==\r\n        parseInt(10000 * valueClean) / 10000\r\n          ? true\r\n          : false;\r\n      asset.incomeRate =\r\n        parseInt(10000 * valueClean) / 10000;\r\n    } else if (id === 11) {\r\n      changed = asset.RRIFStartAge !== parseInt(value) ? true : false;\r\n      asset.RRIFStartAge = parseInt(value);\r\n    } else if (id === 12) {\r\n      changed = asset.description !== value ? true : false;\r\n      asset.description = value;\r\n    }\r\n    if (changed) {\r\n      this.props.handleUpdate(asset);\r\n      this.setState({ loading: this.props.disableAddRemove });\r\n      \r\n      //this.setState({ loading: false });\r\n      // this.handleUpdateGrid();\r\n    }\r\n  };\r\n\r\n  updateClientTaxLiability = async () => {\r\n    let dataNA = this.props.getAssetProjection();\r\n    //let appSiteAPI = \"http://localhost:8082\";\r\n    let data = await fetchAssetProjection2(dataNA, this.props.id);\r\n    if (data !== undefined) {\r\n      // console.log(data[ASSET_API_OUTPUT_TaxPayable].numericValues[0]);\r\n\r\n      return data[ASSET_API_OUTPUT_TaxPayable].numericValues;\r\n    }\r\n  };\r\n\r\n  getData = async (dataNA, id) => {\r\n    let data = await fetchAssetProjectionAPI(dataNA, id);\r\n\r\n    return data;\r\n  };\r\n\r\n  handleClickGridButton = () => {\r\n    this.setState({ loading: true });\r\n    const display = this.state.displaySreadsheet;\r\n\r\n    this.props.adjustVisibleOutputSection(display === false ? 1 : -1);\r\n    this.setState({ displaySreadsheet: !display, loading: false });\r\n\r\n    /* if (this.state.displaySreadsheet === true) {\r\n      this.setState(prevState => {\r\n        let display = prevState.displaySreadsheet;\r\n        return { displaySreadsheet: !display,  loading:false };\r\n      });\r\n    }\r\n    else {\r\n      //await this.handleUpdateGrid()\r\n      this.setState(prevState => {\r\n        let display = prevState.displaySreadsheet;\r\n        return { displaySreadsheet: !display,  loading:false };\r\n      });\r\n      } */\r\n  };\r\n\r\n  setAssetValuesToDefault = (asset) => {\r\n    this.dataValues.DD[ASSET_DROPDOWN_TAXTYPE].Values = this.taxValues;\r\n\r\n    if (asset.assetTypeKey === ASSETS.RRSP_RRIF.Key) {\r\n      //value[this.props.language]) {\r\n      //asset.Tax = ASSET_TAX.REGISTERED.value[this.props.language];\r\n      asset.assetTaxTypeKey = ASSET_TAX.REGISTERED.Key;\r\n      //asset.ownerKey = APPLET_INA?ASSET_OWNERSHIP_ACTION.CLIENT_ROLLOVER.Key:asset.ownerKey;\r\n    } else if (\r\n      asset.assetTypeKey === ASSETS.PERSONAL_RESIDENCE.Key || asset.assetTypeKey === ASSETS.TFSA.Key//value[this.props.language]\r\n    ) {\r\n      //asset.Tax = ASSET_TAX.NON_TAXABLE.value[this.props.language];\r\n      asset.assetTaxTypeKey = ASSET_TAX.NON_TAXABLE.Key;\r\n      asset.ACB = 0;\r\n      asset.DisposeYr = 99;\r\n      asset.DisposeDur = 1;\r\n      if (asset.assetTypeKey === ASSETS.TFSA.Key) \r\n        asset.ownerKey =ASSET_OWNERSHIP_ACTION.CLIENT_ROLLOVER.Key;\r\n    } else if (asset.assetTypeKey === ASSETS.CASH.Key) {\r\n      //value[this.props.language]) {\r\n      //asset.Tax = ASSET_TAX.NON_TAXABLE.value[this.props.language];\r\n      asset.assetTaxTypeKey = ASSET_TAX.NON_TAXABLE.Key;\r\n\r\n      asset.ACB = 0;\r\n    } else if (\r\n      asset.assetTypeKey === ASSETS.LIFE_INSURANCE.Key //value[this.props.language]\r\n    ) {\r\n      //asset.Tax = ASSET_TAX.NON_TAXABLE.value[this.props.language];\r\n      asset.assetTaxTypeKey = ASSET_TAX.NON_TAXABLE.Key;\r\n\r\n      asset.DisposeYr = APPLET_INA ? 0 : 99;\r\n      asset.DisposeDur = 1;\r\n      asset.ACB = 0;\r\n\r\n      //  asset.ownerKey = APPLET_INA?ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key:ASSET_OWNERSHIP_ACTION.CLIENT_ROLLOVER.Key;  allow spouse ins\r\n    } else if (\r\n      asset.assetTypeKey === ASSETS.STOCKS_BONDS.Key || //value[this.props.language] ||\r\n      asset.assetTypeKey === ASSETS.REAL_ESTATE.Key //value[this.props.language]\r\n    ) {\r\n      //asset.Tax = ASSET_TAX.CAPITAL_GAINS_DEFERRED.value[this.props.language];\r\n      asset.assetTaxTypeKey = ASSET_TAX.CAPITAL_GAINS_DEFERRED.Key;\r\n\r\n      /* this.dataValues.DD[ASSET_DROPDOWN_TAXTYPE].Values = [];\r\n      this.dataValues.DD[ASSET_DROPDOWN_TAXTYPE].Values.push({\r\n        label: ASSET_TAX.CAPITAL_GAINS_DEFERRED.value[this.props.language],\r\n        value: 1,\r\n      });\r\n      this.dataValues.DD[ASSET_DROPDOWN_TAXTYPE].Values.push({\r\n        label: ASSET_TAX.CAPITAL_GAINS_ANNUAL.value[this.props.language],\r\n        value: 2,\r\n      }); */\r\n    } else if (asset.assetTypeKey === ASSETS.SMALL_BUSINESS_SHARES.Key)\r\n      //value[this.props.language])\r\n      //asset.Tax = ASSET_TAX.CAPITAL_GAINS_DEFERRED.value[this.props.language];\r\n      asset.assetTaxTypeKey = ASSET_TAX.QUALIFYING_SMALL_BUSINESS.Key;\r\n    //.CAPITAL_GAINS_DEFERRED.Key;\r\n    else if (asset.assetTypeKey === ASSETS.INTEREST_BEARING.Key)\r\n      asset.assetTaxTypeKey = ASSET_TAX.INTEREST.Key;\r\n    //.FULLY_TAXABLE.Key;\r\n    //asset.assetTaxTypeKey= ASSET_TAX.INTEREST.Key;\r\n    else if (\r\n      asset.assetTypeKey === ASSETS.OTHER_ASSETS.Key //value[this.props.language] ||\r\n    )\r\n      //asset.Tax = ASSET_TAX.FULLY_TAXABLE.value[this.props.language];\r\n      asset.assetTaxTypeKey = ASSET_TAX.FULLY_TAXABLE.Key;\r\n    \r\n    if (\r\n      asset.ownerKey === ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key //ASSET_OWNERSHIP.CLIENTLIQUIDATE.value[this.props.language]\r\n    ) {\r\n      asset.DisposeYr = 0;\r\n      asset.DisposeDur = 1;\r\n    }\r\n    // console.log(asset)\r\n\r\n    return asset;\r\n  };\r\n\r\n  clone2 = () => {\r\n    let id = \"assetGrid\";\r\n    if (this.state.displaySreadsheet === true) {\r\n      // console.log(this.state.displaySreadsheet)\r\n\r\n      var itm = document.getElementById(id);\r\n      // console.log(itm)\r\n\r\n      var cln = itm.cloneNode(true);\r\n      cln.id = \"ll\";\r\n      //cln.style.position=\"relative\"\r\n      let cln2 = document.createElement(\"div\");\r\n      cln2.appendChild(cln);\r\n      cln2.id = \"lll\";\r\n      document.addEventListener(\"click\", function (e) {\r\n        if (e.target && e.target.id === \"lll\") {\r\n        }\r\n      });\r\n\r\n      document.getElementById(\"copyDiv\").appendChild(cln2);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      id,\r\n      assetCurr,\r\n      /* Type,\r\n      Owner,\r\n      index,\r\n      currValue,\r\n      Tax,\r\n      growth,\r\n      Dispos\r\n      eYr,\r\n      DisposeDur,\r\n      ACB,\r\n      smallBusinessCapGainExemption,\r\n      contributionAmt,\r\n      contributionStartYr,\r\n      contributionDur,\r\n      incomeRate, */\r\n      language,\r\n      themeColor,\r\n      assetsNo,\r\n    } = this.props;\r\n    const assetID = assetCurr.assetTypeKey; //ASSETS.INTEREST_BEARING.value[this.props.language]\r\n    //Object.values(ASSETS).filter(obj => obj.value[language]=== assetCurr.Type)[0].Key\r\n    let disableTaxMethods =\r\n      assetCurr.assetTypeKey === ASSETS.LIFE_INSURANCE.Key || //value[language] ||\r\n      assetCurr.assetTypeKey === ASSETS.CASH.Key || //value[language] ||\r\n      assetCurr.assetTypeKey === ASSETS.PERSONAL_RESIDENCE.Key || //value[language] ||\r\n      assetCurr.assetTypeKey === ASSETS.TFSA.Key || //value[language] ||\r\n      assetCurr.assetTypeKey === ASSETS.RRSP_RRIF.Key || //value[language] ||\r\n      assetCurr.assetTypeKey === ASSETS.INTEREST_BEARING.Key ||\r\n      assetCurr.assetTypeKey === ASSETS.SMALL_BUSINESS_SHARES.Key\r\n        ? true\r\n        : false;\r\n    const disableOwner = false; // allow ins for both\r\n    const insurance = assetCurr.assetTypeKey === ASSETS.LIFE_INSURANCE.Key;\r\n\r\n    const taxStocks = assetCurr.assetTypeKey === ASSETS.STOCKS_BONDS.Key;\r\n    const taxRS = assetCurr.assetTypeKey === ASSETS.REAL_ESTATE.Key;\r\n\r\n    // assetCurr.assetTypeKey === ASSETS.LIFE_INSURANCE.Key ? true : false;\r\n    let hideOwner =\r\n      APPLET_EP && this.props.assetCurr.assetTypeKey !== ASSETS.RRSP_RRIF.Key\r\n        ? true\r\n        : false;\r\n\r\n    const taxT = CONTROLTITLE[language].tax;\r\n    const ownerT = CONTROLTITLE[language].owner;\r\n    const assetTypeIns =\r\n      CONTROLTITLE[language].type &&\r\n      assetCurr.assetTypeKey === ASSETS.LIFE_INSURANCE.Key;\r\n\r\n    let assetTax = MESSAGES[language].assetTax;\r\n\r\n    //const taxCredit=assetCurr.Type === UNLISTED[this.props.language].Assets.Values[ASSET_TaxCredit]\r\n    const taxCredit =\r\n      assetCurr.Type ===\r\n      ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.value[this.props.language];\r\n\r\n    const rrsp = assetCurr.assetTaxTypeKey === ASSET_TAX.REGISTERED.Key; //value[language];\r\n    const showACB = !(\r\n      //assetCurr.Tax === ASSET_TAX.NON_TAXABLE.value[language] ||\r\n      (\r\n        assetCurr.assetTaxTypeKey === ASSET_TAX.NON_TAXABLE.Key || //value[language] ||\r\n        rrsp ||\r\n        assetCurr.assetTypeKey === ASSETS.INTEREST_BEARING.Key || //value[language] ||\r\n        //assetCurr.Tax === ASSET_TAX.CAPITAL_GAINS_ANNUAL.value[language]\r\n        assetCurr.assetTaxTypeKey === ASSET_TAX.CAPITAL_GAINS_ANNUAL.Key\r\n      )\r\n    );\r\n    const showIncome =APPLET_INA &&\r\n    (assetCurr.assetTaxTypeKey === ASSET_TAX.CAPITAL_GAINS_DEFERRED.Key);\r\n      //assetCurr.Tax === ASSET_TAX.CAPITAL_GAINS_DEFERRED.value[language] ||\r\n      /* (APPLET_EP &&\r\n        (assetCurr.assetTaxTypeKey === ASSET_TAX.CAPITAL_GAINS_DEFERRED.Key ||\r\n        assetCurr.assetTypeKey === ASSETS.OTHER_ASSETS.Key || //value[language] ||\r\n          rrsp)) ||\r\n      (APPLET_INA &&\r\n        rrsp &&\r\n       assetCurr.ownerKey !== ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key); //ASSET_OWNERSHIP.CLIENTLIQUIDATE.value[this.props.language]\r\n     */\r\n    \r\n    const showDur = !(\r\n      rrsp ||\r\n      assetCurr.assetTypeKey === ASSETS.PERSONAL_RESIDENCE.Key || //value[language] ||\r\n      assetCurr.assetTypeKey === ASSETS.REAL_ESTATE.Key || //value[language] ||\r\n      taxCredit ||\r\n      ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key\r\n    );\r\n    const showGrowth = !(\r\n      (\r\n        assetCurr.assetTypeKey === ASSETS.LIFE_INSURANCE.Key ||\r\n        assetCurr.assetTypeKey === ASSETS.CASH.Key || //value[language] ||\r\n        taxCredit ||\r\n        assetCurr.ownerKey === ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key\r\n      ) //ASSET_OWNERSHIP.CLIENTLIQUIDATE.value[this.props.language]\r\n    );\r\n\r\n    const showDispose = !(\r\n      rrsp ||\r\n      (APPLET_INA && assetCurr.assetTypeKey === ASSETS.LIFE_INSURANCE.Key) || //value[language] ||\r\n      assetCurr.ownerKey === ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key || //ASSET_OWNERSHIP.CLIENTLIQUIDATE.value[this.props.language]\r\n      taxCredit\r\n    );\r\n\r\n    const showCotribution = //APPLET_EP &&\r\n      assetCurr.ownerKey !== ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key && //ASSET_OWNERSHIP.CLIENTLIQUIDATE.value[this.props.language]\r\n      (rrsp ||\r\n      assetCurr.assetTypeKey === ASSETS.INTEREST_BEARING.Key || //value[language] ||\r\n        assetCurr.assetTypeKey === ASSETS.STOCKS_BONDS.Key  || assetCurr.assetTypeKey === ASSETS.TFSA.Key); //value[language];\r\n    const showWithdrawal =\r\n      (APPLET_EP || (APPLET_INA && assetCurr.withdrawalAmt>0 )  || (APPLET_INA )) &&\r\n      assetCurr.ownerKey !== ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key && //ASSET_OWNERSHIP.CLIENTLIQUIDATE.value[this.props.language]\r\n      (assetCurr.assetTypeKey === ASSETS.INTEREST_BEARING.Key || //value[language] ||\r\n        assetCurr.assetTypeKey === ASSETS.STOCKS_BONDS.Key || rrsp || assetCurr.assetTypeKey === ASSETS.TFSA.Key); //value[language];\r\n\r\n    const showCGE = assetCurr.assetTypeKey === ASSETS.SMALL_BUSINESS_SHARES.Key; //value[language]\r\n    // console.log(this.dataValues);\r\n\r\n    let gridIcons = new Array(this.dataColTitles.length);\r\n    this.dataColTitles.forEach((item) => {\r\n      if (item === COLUMN_TITLES[this.props.language].TaxLiability)\r\n        gridIcons[this.dataColTitles.length - 1] = getInfoTaxLiability(\r\n          language\r\n        );\r\n    });\r\n\r\n    //const disableDD=(dd.Title === CONTROLTITLE[language].owner && disableOwner)  || (dd.Title === taxT && disableTaxMethods) || (taxCredit && (dd.Title === taxT || dd.Title ===CONTROLTITLE[this.props.language].ownerAction))\r\n    let disableAll = false;\r\n    if (\r\n      this.props.assetCurr.assetTypeKey ===\r\n      ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.Key\r\n    ) {\r\n      disableAll = true;\r\n      this.dataValues.DD[ASSET_DROPDOWN_TYPE].Values.push({\r\n        label: ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.value[this.props.language],\r\n        value: this.dataValues.DD[ASSET_DROPDOWN_TYPE].Values.length + 1,\r\n      });\r\n    }\r\n\r\n    const p =\r\n      this.props.projection[this.props.assetCurr.id - 1] === undefined\r\n        ? null\r\n        : this.props.projection[this.props.assetCurr.id - 1].grid;\r\n\r\n    this.dataValues.DD[0].disableOptionValue[\r\n      ASSETS.PERSONAL_RESIDENCE.ID\r\n    ] = this.props.hasPersonalResidenceAlready; // disable more\r\n\r\n    this.dataValues.DD[2].disableOptionValue[1] =\r\n      (APPLET_EP && this.props.clientsNo === 1) ||\r\n      (assetCurr.assetTypeKey === ASSETS.LIFE_INSURANCE.Key);\r\n    \r\n\r\n    this.dataValues.DD[2].disableOptionValue[3] =\r\n      (this.props.assetCurr.assetTypeKey===ASSETS.TFSA.Key || this.props.assetCurr.assetTypeKey===ASSETS.RRSP_RRIF.Key )\r\n    \r\n    //console.log(this.props.assetCurr.projection, this.props.projection[0].grid);\r\n    if (this.state.loading === true && this.props.disableAddRemove=== true) {\r\n      return (\r\n       \"\"\r\n      );\r\n    } else {\r\n      return (\r\n        <div className=\"inputRow\">\r\n          {this.dataValues.DD.map((dd) =>\r\n            dd.id < 4 ? (\r\n              !(hideOwner === true && dd.id === 2) && (\r\n                <DropDown\r\n                  key={dd.id.toString()}\r\n                  id={dd.id}\r\n                  Count={assetsNo}\r\n                  Title={dd.Title}\r\n                  disable={\r\n                    disableAll === true ||\r\n                    (dd.Title === CONTROLTITLE[language].owner &&\r\n                      disableOwner) ||\r\n                    (dd.Title === taxT && disableTaxMethods) ||\r\n                    (taxCredit &&\r\n                      (dd.Title === taxT ||\r\n                        dd.Title ===\r\n                          CONTROLTITLE[this.props.language].ownerAction))\r\n                  }\r\n                  defValue={dd.defValue}\r\n                  unlistedValue={\r\n                    taxCredit\r\n                      ? ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.value[\r\n                          this.props.language\r\n                        ]\r\n                      : \"\"\r\n                  } // TODO ideally find in list of values\r\n                  Values={dd.Values}\r\n                  //info={dd.Title === \"Type\" && id === 1 ? assetTax : \"\"}\r\n                  infoIcon={\r\n                    (dd.Title === ownerT && assetCurr.id === 1\r\n                      ? getInfoIconAssetsOwner(this.props.language)\r\n                      : assetTypeIns\r\n                      ? getInfoIconAssetsIns(this.props.language)\r\n                      : undefined) ||\r\n                      (dd.Title === CONTROLTITLE[language].type && (this.props.assetCurr.assetTypeKey===ASSETS.TFSA.Key || this.props.assetCurr.assetTypeKey===ASSETS.RRSP_RRIF.Key)\r\n                        ? getInfoIconTFSA(this.props.language)\r\n                        : undefined)||\r\n                        (dd.Title === CONTROLTITLE[language].tax && (this.props.assetCurr.id===1) && APPLET_INA\r\n                          ? getInfoIconTaxLiab(this.props.language)\r\n                          : undefined)\r\n  \r\n\r\n                        \r\n                        \r\n                  }\r\n                  language={language}\r\n                  //   disableOption={dd.disableOptionValue}\r\n                  disableOption={\r\n                    dd.id !== 3\r\n                      ? dd.disableOptionValue\r\n                      : taxStocks || taxRS\r\n                      ? this.DDTax.disableOptionValue\r\n                      : dd.disableOptionValue\r\n                  }\r\n                  width={DROPDOWN_WIDE}\r\n                  updateDDown={this.updateDDown}\r\n                />\r\n              )\r\n            ) : (\r\n              <div className=\"dropDown inputDiv\">\r\n                <div className=\"controlTitle\">\r\n                  {CONTROLTITLE[this.props.language].desc}\r\n                </div>\r\n                <input\r\n                  key={dd.id.toString()}\r\n                  id={12}\r\n                  className=\"inputField  textareaAssetName\"\r\n                  value={this.state.description}\r\n                  onClick={this.select}\r\n                  type=\"text\"\r\n                  onChange={(evt) =>\r\n                    this.setState({ description: evt.target.value })\r\n                  }\r\n                  onBlur={(evt) => this.updateDesc(evt)}\r\n                />\r\n\r\n                {/* \r\n              <input\r\n                id={12}\r\n                type=\"text\"\r\n                className=\"inputField  textareaAssetName\"\r\n                onChange={this.updateDesc}\r\n                value={assetCurr.description}\r\n              /> */}\r\n              </div>\r\n            )\r\n          )}\r\n          <InputField\r\n            inputName={\r\n              insurance\r\n                ? CONTROLTITLE[language].FA\r\n                : CONTROLTITLE[language].amount\r\n            }\r\n            id={1}\r\n            format={2}\r\n            Count={assetsNo}\r\n            language={language}\r\n            inputValue={assetCurr.currValue}\r\n            handleUpdateInput={this.handleUpdateInput}\r\n          />\r\n\r\n          {showGrowth && (\r\n            <InputField\r\n              inputName={CONTROLTITLE[language].growth}\r\n              format={3}\r\n              id={5}\r\n              Count={assetsNo}\r\n              language={language}\r\n              inputValue={Math.round(10000*assetCurr.growth)/10000}\r\n              inputTitle={id}\r\n              handleUpdateInput={this.handleUpdateInput}\r\n            />\r\n          )}\r\n\r\n          {showDispose && (\r\n            <InputField\r\n              inputName={\r\n                APPLET_INA\r\n                  ? CONTROLTITLE[language].disposeYr\r\n                  : CONTROLTITLE[language].disposeYr\r\n              } //CONTROLTITLE[language].dur}\r\n              id={2}\r\n              //info={MESSAGES[language].infoYr0}\r\n              infoIcon={getInfoIconAssetsYr0(this.props.language)}\r\n              format={1}\r\n              Count={assetsNo}\r\n              language={language}\r\n              inputValue={assetCurr.DisposeYr}\r\n              handleUpdateInput={this.handleUpdateInput}\r\n            />\r\n          )}\r\n          {showDur && (\r\n            <InputField\r\n              inputName={CONTROLTITLE[language].disposeDur}\r\n              id={3}\r\n              format={1}\r\n              Count={assetsNo}\r\n              language={language}\r\n              inputValue={assetCurr.DisposeDur}\r\n              handleUpdateInput={this.handleUpdateInput}\r\n            />\r\n          )}\r\n          {rrsp &&\r\n            assetCurr.ownerKey !== //ASSET_OWNERSHIP.CLIENTLIQUIDATE.value[this.props.language]\r\n              ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key && (\r\n              <InputField\r\n                inputName={CONTROLTITLE[language].RRIFAge}\r\n                format={1}\r\n                id={11}\r\n                Count={assetsNo}\r\n                infoIcon={getInfoIconSourcesRRIF(this.props.language)}\r\n                language={language}\r\n                inputValue={assetCurr.RRIFStartAge}\r\n                handleUpdateInput={this.handleUpdateInput}\r\n              />\r\n            )}\r\n          {showIncome && (\r\n            <InputField\r\n              inputName={\r\n                rrsp\r\n                  ? CONTROLTITLE[language].RRIFRate\r\n                  : CONTROLTITLE[language].incomeRate\r\n              }\r\n              format={3}\r\n              id={9}\r\n              Count={assetsNo}\r\n              infoIcon={getInfoIconAssetsIncomeRate(this.props.language)}\r\n              language={language}\r\n              inputValue={Math.round(10000*assetCurr.incomeRate)/10000}\r\n              handleUpdateInput={this.handleUpdateInput}\r\n            />\r\n          )}\r\n\r\n          {showCGE && (\r\n            <InputField\r\n              inputName={CONTROLTITLE[language].smallBusinessCapGainExemption}\r\n              format={2}\r\n              id={10}\r\n              Count={assetsNo}\r\n              language={language}\r\n              infoIcon={getInfoIconTaxExempt(this.props.language)}\r\n              inputValue={assetCurr.smallBusinessCapGainExemption}\r\n              handleUpdateInput={this.handleUpdateInput}\r\n            />\r\n          )}\r\n          {showACB && (\r\n            <InputField\r\n              inputName={CONTROLTITLE[language].ACB}\r\n              format={2}\r\n              id={4}\r\n              Count={assetsNo}\r\n              language={language}\r\n              inputValue={assetCurr.ACB}\r\n              //{/*readOnly={disableTaxMethods}*/}\r\n\r\n              handleUpdateInput={this.handleUpdateInput}\r\n            />\r\n          )}\r\n\r\n          {showCotribution && (\r\n            <div>\r\n              <InputField\r\n                inputName={CONTROLTITLE[language].contributionAmt}\r\n                id={6}\r\n                format={2}\r\n                Count={assetsNo}\r\n                language={language}\r\n                inputValue={assetCurr.contributionAmt}\r\n                infoIcon={getInfoIconDepositWithd(this.props.language)}\r\n                colorDiv={\"green\"}\r\n                handleUpdateInput={this.handleUpdateInput}\r\n              />\r\n              {/* <InputField\r\n              inputName={CONTROLTITLE[language].contributionStartYr}\r\n              id={7}\r\n              format={1}\r\n              //info={MESSAGES[language].infoYr0}\r\n              Count={assetsNo}\r\n              language={language}\r\n              inputValue={assetCurr.contributionStartYr}\r\n              handleUpdateInput={this.handleUpdateInput}\r\n            />  */}\r\n              <InputField\r\n                inputName={CONTROLTITLE[language].contributionDur}\r\n                id={8}\r\n                format={1}\r\n                Count={assetsNo}\r\n                language={language}\r\n                inputValue={assetCurr.contributionDur}\r\n                colorDiv={\"green\"}\r\n                handleUpdateInput={this.handleUpdateInput}\r\n              />\r\n            </div>\r\n          )}\r\n\r\n          {showWithdrawal && (\r\n            <div>\r\n              <InputField\r\n                inputName={CONTROLTITLE[language].withdrawalAmt}\r\n                id={13}\r\n                format={2}\r\n                Count={assetsNo}\r\n                language={language}\r\n                inputValue={assetCurr.withdrawalAmt}\r\n                colorDiv={\"red\"}\r\n                handleUpdateInput={this.handleUpdateInput}\r\n              />\r\n              <InputField\r\n                inputName={CONTROLTITLE[language].withdrawalStartYr}\r\n                id={14}\r\n                format={1}\r\n                //info={MESSAGES[language].infoYr0}\r\n                Count={assetsNo}\r\n                language={language}\r\n                inputValue={assetCurr.withdrawalStartYr}\r\n                minValue={1}\r\n                colorDiv={\"red\"}\r\n                handleUpdateInput={this.handleUpdateInput}\r\n              />\r\n              <InputField\r\n                inputName={CONTROLTITLE[language].withdrawalDur}\r\n                id={15}\r\n                format={1}\r\n                Count={assetsNo}\r\n                language={language}\r\n                inputValue={assetCurr.withdrawalDur}\r\n                colorDiv={\"red\"}\r\n                handleUpdateInput={this.handleUpdateInput}\r\n              />\r\n            </div>\r\n          )}\r\n          {/*  <svg\r\n          className=\"iconMore\"\r\n          onClick={this.handleClickGridButton}\r\n          style={{ top: \"140px\" }}\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          width=\"24\"s\r\n          height=\"24\"\r\n          viewBox=\"0 0 24 24\"\r\n        >\r\n          <path d=\"M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z\" />\r\n        </svg> */}\r\n          {!taxCredit && !disableAll && (\r\n            <GridButton\r\n              className=\"iconMore\"\r\n              handleClickGridButton={this.handleClickGridButton}\r\n              id=\"gridOn\"\r\n              alt=\"ll\"\r\n              src={\r\n                this.state.displaySreadsheet === true\r\n                  ? require(\"../images/gridOff.png\")\r\n                  : require(\"../images/gridOn.png\")\r\n              }\r\n            />\r\n          )}\r\n\r\n          <AddRemove\r\n            currentID={id}\r\n            minComps={0}\r\n            //currentIndex={index}\r\n            id={assetID}\r\n            numberComps={assetsNo}\r\n            disabled={this.props.disableAddRemove}\r\n            handleDoAdd={this.handleDoAdd}\r\n            handleDoRemove={this.handleDoRemove}\r\n          />\r\n          {/* {isMobileDevice() && id < assetsNo ? <hr className=\"ppi2\" /> : \"\"} */}\r\n\r\n          {this.state.displaySreadsheet === true && (\r\n            <div\r\n              id=\"assetGrid\"\r\n              style={{\r\n                clear: \"both\",\r\n                float: \"left\",\r\n              }} /*    onClick={this.clone2}  */\r\n            >\r\n              {p !== null && (\r\n                <ProjectionGrid1 assetProjection={p} lang={language} />\r\n              )}{\" \"}\r\n            </div>\r\n          )}\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { DropDown } from \"./DropDown\";\r\nimport { InputField } from \"./inputField\";\r\n\r\nimport {\r\n  getInfoIconProbate,\r\n} from \"../definitions/infoIconsDefinitions\";\r\n\r\nimport { AddRemove } from \"./AddRemove\";\r\nimport {\r\n  getListToShowByOrder,\r\n  getProjectedLiability,\r\n  cleanFormat,\r\n  getListItemNameFromKey,\r\n  getListItemKeyFromName,\r\n  arrayFormatMoney,\r\n} from \"../utils/helper\";\r\n\r\nimport {\r\n  LIABILITIES,\r\n  ASSETS,\r\n  OWNERSHIP,\r\n  CONTROLTITLE,\r\n  GROWTHDIR,\r\n  UNLISTED,\r\n  ASSET_TaxCredit,\r\n  APPLET_INA,\r\n  APPLET_EP  \r\n} from \"../definitions/generalDefinitions\";\r\nimport { isMobileDevice } from \"../utils/helper\";\r\nimport DataTable from \"./GridExcelComponent/DataTable\";\r\nimport { fetchAssetProjection } from \"../utils/FetchAPIs\";\r\nimport {\r\n  LIABILITY_API_OUTPUT_Year,\r\n  LIABILITY_API_OUTPUT_Age,\r\n  LIABILITY_API_OUTPUT_ProjectedValue,\r\n  LIABILITY_API_OUTPUT_TaxCredit,\r\n  DROPDOWN_WIDE,\r\n} from \"../definitions/generalDefinitions\";\r\n\r\nexport class Liability extends Component {\r\n  displayName = Liability.name;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      displaySreadsheet: false,\r\n      loading: false,\r\n      dataProjection:[]\r\n    };\r\n    var i;\r\n    var typeValues = [];\r\n    const listLiabsToShow = getListToShowByOrder(LIABILITIES);\r\n    for (i = 0; i < listLiabsToShow.length; ++i) {\r\n      typeValues.push({\r\n        label: listLiabsToShow[i].value[this.props.language],\r\n        value: i + 1,\r\n      });\r\n    }\r\n    var ownerValues = [\r\n      { label: OWNERSHIP.CLIENT.value[this.props.language], value: 1 },\r\n      { label: OWNERSHIP.SPOUSE.value[this.props.language], value: 2 },\r\n      { label: OWNERSHIP.JOINT.value[this.props.language], value: 3 },\r\n    ];\r\n\r\n    var growthDirValues = [\r\n      //{ label: GROWTHDIR[this.props.language].Values[0], value: 1 },\r\n      //{ label: GROWTHDIR[this.props.language].Values[1], value: 2 },\r\n      { label: GROWTHDIR.GROWS.value[this.props.language], value: 1 },\r\n      { label: GROWTHDIR.REDUCES.value[this.props.language], value: 2 },\r\n    ];\r\n\r\n    this.dataValues = {\r\n      DD: [\r\n        {\r\n          id: 1,\r\n          Title: CONTROLTITLE[this.props.language].type,\r\n          defValue: getListItemNameFromKey(\r\n            LIABILITIES,\r\n            this.props.liabilityCurr.liabTypeKey,\r\n            this.props.language\r\n          ),\r\n          Values: typeValues,\r\n        },\r\n        {\r\n          id: 2,\r\n          Title: CONTROLTITLE[this.props.language].owner,\r\n          defValue: getListItemNameFromKey(\r\n            OWNERSHIP,\r\n            this.props.liabilityCurr.ownerKey,\r\n            this.props.language\r\n          ),\r\n          Values: ownerValues,\r\n        },\r\n        {\r\n          id: 3,\r\n          Title: CONTROLTITLE[this.props.language].growthDir,\r\n          defValue: //this.props.liabilityCurr.growthDir,\r\n          getListItemNameFromKey(\r\n            GROWTHDIR,\r\n            this.props.liabilityCurr.growthDirKey,\r\n            this.props.language\r\n          ),\r\n          Values: growthDirValues,\r\n        },\r\n      ],\r\n    };\r\n    //this.dataProjection = [];\r\n    this.dataColTitles = [];\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (\r\n      nextProps.liabilityCurr !== this.props.liabilityCurr ||\r\n      nextProps.id !== this.props.id ||\r\n      nextProps.liabilitysNo !== this.props.liabilitysNo\r\n    ) {\r\n      // console.log(nextProps.liabilityCurr.liabTypeKey)\r\n      this.dataValues.DD[0].defValue = getListItemNameFromKey(\r\n        LIABILITIES,\r\n        nextProps.liabilityCurr.liabTypeKey,\r\n        this.props.language\r\n      );\r\n      this.dataValues.DD[1].defValue = getListItemNameFromKey(\r\n        OWNERSHIP,\r\n        nextProps.liabilityCurr.ownerKey,\r\n        this.props.language\r\n      );\r\n      this.dataValues.DD[2].defValue = // nextProps.liabilityCurr.growthDir;\r\n      getListItemNameFromKey(\r\n        GROWTHDIR,\r\n        nextProps.liabilityCurr.growthDirKey,\r\n        this.props.language\r\n      );\r\n\r\n    }\r\n    if (nextProps.probate !== this.props.probate)\r\n    {\r\n      this.setLiabData(nextProps.liabilityCurr,nextProps.probate)\r\n    }\r\n  }\r\n\r\n  handleDoRemove = (id) => {\r\n    this.props.handleRemoveLiability(id);\r\n  };\r\n\r\n  handleDoAdd = () => {\r\n    var liabNo =\r\n      this.props.liabilitysNo > this.dataValues.DD[0].Values.length - 1\r\n        ? this.dataValues.DD[0].Values.length - 1\r\n        : this.props.liabilitysNo;\r\n\r\n    var liabNext = this.dataValues.DD[0].Values[liabNo].label;\r\n    const liabTypeKey = getListItemKeyFromName(LIABILITIES, liabNext);\r\n\r\n    let liability = {\r\n      id: this.props.liabilitysNo + 1,\r\n      //Type: liabNext,\r\n      liabTypeKey: liabTypeKey,\r\n      ownerKey: OWNERSHIP.CLIENT.Key,\r\n      currValue: 0,\r\n      //growthDir: GROWTHDIR[this.props.language].Values[0],\r\n      growthDirKey: GROWTHDIR.GROWS.Key,\r\n      growth: 0,\r\n      repay: 0,\r\n      exposureDur: 99,\r\n      assetTaxLiabID: 0,\r\n      assetTaxLiabProj: [],\r\n    };\r\n\r\n    liability = this.setLiabilityValuesToDefault(liability);\r\n\r\n    this.props.handleAddLiability(liability); //liabNext);\r\n  };\r\n\r\n  updateDDown = (id, selection) => {\r\n    let liability = {\r\n      id: this.props.liabilityCurr.id,\r\n      //Type: this.props.liabilityCurr.Type,\r\n      liabTypeKey: this.props.liabilityCurr.liabTypeKey,\r\n      ownerKey: this.props.liabilityCurr.ownerKey,\r\n      currValue: this.props.liabilityCurr.currValue,\r\n      growth: this.props.liabilityCurr.growth,\r\n      //growthDir: this.props.liabilityCurr.growthDir,\r\n      growthDirKey: this.props.liabilityCurr.growthDirKey,\r\n      exposureDur: this.props.liabilityCurr.exposureDur,\r\n      repay: this.props.liabilityCurr.repay,\r\n    };\r\n    if (id === 1) {\r\n      //liability.Type = selection;\r\n      liability.liabTypeKey = getListItemKeyFromName(LIABILITIES, selection);\r\n    } else if (id === 2) {\r\n      liability.ownerKey = getListItemKeyFromName(OWNERSHIP, selection);\r\n    } else if (id === 3) {\r\n      //liability.growthDir = selection;\r\n      liability.growthDirKey = getListItemKeyFromName(GROWTHDIR, selection);;\r\n    }\r\n\r\n    liability = this.setLiabilityValuesToDefault(liability);\r\n\r\n    this.props.handleUpdate(liability);\r\n    if(this.state.displaySreadsheet) this.setLiabData(liability);// this.handleClick()\r\n  };\r\n\r\n  handleUpdateInput = (id, value) => {\r\n    let liability = {\r\n      id: this.props.liabilityCurr.id,\r\n      //Type: this.props.liabilityCurr.Type,\r\n      liabTypeKey: this.props.liabilityCurr.liabTypeKey,\r\n      ownerKey: this.props.liabilityCurr.ownerKey,\r\n      currValue: this.props.liabilityCurr.currValue,\r\n      growth: this.props.liabilityCurr.growth,\r\n      exposureDur: this.props.liabilityCurr.exposureDur,\r\n      repay: this.props.liabilityCurr.repay,\r\n      //growthDir: this.props.liabilityCurr.growthDir,\r\n      growthDirKey: this.props.liabilityCurr.growthDirKey,\r\n    };\r\n\r\n    let changed = false;\r\n    const lang = this.props.language;\r\n    const valueClean = cleanFormat(value,lang);\r\n    const valueCleanInt = parseInt(valueClean);\r\n   \r\n    if (id === 1) {\r\n      changed =\r\n        liability.currValue !== valueCleanInt ? true : false;\r\n      liability.currValue = valueCleanInt;\r\n    } else if (id === 2) {\r\n      changed =\r\n        liability.growth !==\r\n        parseInt(100 * valueClean) / 100\r\n          ? true\r\n          : false;\r\n      liability.growth =\r\n        parseInt(100 * valueClean) / 100;\r\n    } else if (id === 3) {\r\n      changed = liability.exposureDur !== parseInt(value) ? true : false;\r\n      liability.exposureDur = parseInt(value);\r\n    }\r\n    if (id === 4) {\r\n      changed = liability.repay !== valueCleanInt ? true : false;\r\n      liability.repay = valueCleanInt;\r\n    }\r\n\r\n    if (changed){\r\n      \r\n      this.props.handleUpdate(liability);\r\n      if(this.state.displaySreadsheet) this.setLiabData(liability);//  this.handleClick()\r\n      \r\n  }\r\n   // if(!this.state.displaySreadsheet)  this.setState({ loading: this.props.disableAddRemove });\r\n    \r\n  };\r\n\r\n\r\n  setLiabData=(liability,probate)=>{\r\n    this.setState({ loading: true});\r\n    let dataProjection=[]\r\n  const loan =\r\n  liability.liabTypeKey ===\r\n      LIABILITIES.OUTSTANDING_LOANS.Key ||\r\n      liability.liabTypeKey ===\r\n      LIABILITIES.MORTGAGE_REDEMPTION.Key;\r\n\r\n  if (loan)\r\n    this.dataColTitles = [\r\n      \"Year\",\r\n      \"Repayment\",\r\n      \"Projected Value\",\r\n      //   \"Tax Credit\"\r\n    ];\r\n  else\r\n    this.dataColTitles = [\r\n      \"Year\",\r\n      \"Projected Value\",\r\n      //   \"Tax Credit\"\r\n    ];\r\n\r\n  const lang = this.props.language;\r\n  //console.log(this.props.probate)\r\n  let liabs = getProjectedLiability(liability,probate);\r\n\r\n  let years = [];\r\n  let repays = [];\r\n  let i;\r\n  let repay;\r\n  let year;\r\n  for (i = 0; i < liability.exposureDur + 1; ++i) {\r\n    repay=i>0?liability.repay:0;\r\n    year=i>0?i:\"today\";\r\n    years.push(year);\r\n    repays.push(repay);\r\n  }\r\n\r\n  let taxCredits = [];\r\n  dataProjection[0] = years;\r\n  if (loan) {\r\n    dataProjection[1] = arrayFormatMoney(repays, lang, 0);\r\n    dataProjection[2] = arrayFormatMoney(liabs, lang, 0);\r\n  } else dataProjection[1] = arrayFormatMoney(liabs, lang, 0);\r\n\r\n  this.setState({dataProjection:dataProjection, loading: false});\r\n    \r\n}\r\n\r\n\r\n  handleClick = () => {\r\n    if(!this.props.disableAddRemove)\r\n    {\r\n    this.setState({ loading: true });\r\n    \r\n    this.setLiabData(this.props.liabilityCurr, this.props.probate)\r\n    /* const loan =\r\n      this.props.liabilityCurr.liabTypeKey ===\r\n        LIABILITIES.OUTSTANDING_LOANS.Key ||\r\n      this.props.liabilityCurr.liabTypeKey ===\r\n        LIABILITIES.MORTGAGE_REDEMPTION.Key;\r\n\r\n    if (loan)\r\n      this.dataColTitles = [\r\n        \"Year\",\r\n        \"Repayment\",\r\n        \"Projected Value\",\r\n        //   \"Tax Credit\"\r\n      ];\r\n    else\r\n      this.dataColTitles = [\r\n        \"Year\",\r\n        \"Projected Value\",\r\n        //   \"Tax Credit\"\r\n      ];\r\n\r\n    const lang = this.props.language;\r\n    let liabs = getProjectedLiability(this.props.liabilityCurr, lang);\r\n\r\n    let years = [];\r\n    let repays = [];\r\n    let i;\r\n    let repay;\r\n    let year;\r\n    for (i = 0; i < this.props.liabilityCurr.exposureDur + 1; ++i) {\r\n      repay=i>0?this.props.liabilityCurr.repay:0;\r\n      year=i>0?i:\"today\";\r\n      years.push(year);\r\n      repays.push(repay);\r\n    }\r\n\r\n    let taxCredits = [];\r\n    this.dataProjection[0] = years;\r\n    if (loan) {\r\n      this.dataProjection[1] = arrayFormatMoney(repays, lang, 0);\r\n      this.dataProjection[2] = arrayFormatMoney(liabs, lang, 0);\r\n    } else this.dataProjection[1] = arrayFormatMoney(liabs, lang, 0);\r\n */\r\n    //this.dataProjection[3] = taxCredits;\r\n\r\n    // console.log(this.dataProjection);\r\n\r\n    this.setState((prevState) => {\r\n      let display = prevState.displaySreadsheet;\r\n      return { displaySreadsheet: !display, loading: this.props.disableAddRemove };\r\n      \r\n    });\r\n  }\r\n  };\r\n  //});\r\n  //}\r\n\r\n  \r\n  setLiabilityValuesToDefault = (liability) => {\r\n    if (liability.liabTypeKey === LIABILITIES.OUTSTANDING_LOANS.Key) {\r\n      liability.exposureDur = 10;\r\n    } else if (liability.liabTypeKey === LIABILITIES.MORTGAGE_REDEMPTION.Key) {\r\n      liability.exposureDur = 25;\r\n    }\r\n\r\n    return liability;\r\n  };\r\n\r\n  render() {\r\n\r\n    //const growthSel = GROWTHDIR[this.props.language].Values.indexOf(\r\n    //  this.props.liabilityCurr.growthDir );\r\n      const growthSel = this.props.liabilityCurr.growthDirKey===GROWTHDIR.GROWS.Key?GROWTHDIR.GROWS.ID:GROWTHDIR.REDUCES.ID; \r\n   \r\n\r\n    const loanOrTax =\r\n      this.props.liabilityCurr.liabTypeKey ===\r\n        LIABILITIES.OUTSTANDING_LOANS.Key ||\r\n      this.props.liabilityCurr.liabTypeKey ===\r\n        LIABILITIES.MORTGAGE_REDEMPTION.Key ||\r\n      this.props.liabilityCurr.liabTypeKey ===\r\n        LIABILITIES.CLIENT_TAX_LIABILITY.Key;\r\n\r\n    const probate=     this.props.liabilityCurr.liabTypeKey ===   LIABILITIES.PROBATE.Key\r\n    \r\n    const showGrowth =\r\n    !APPLET_INA &&\r\n      !loanOrTax && !probate && \r\n      this.dataValues.DD.map((dd) => dd.id === 3);\r\n    const showRepay =\r\n    !APPLET_INA &&\r\n      (this.props.liabilityCurr.liabTypeKey ===\r\n        LIABILITIES.MORTGAGE_REDEMPTION.Key ||\r\n        this.props.liabilityCurr.liabTypeKey ===\r\n          LIABILITIES.OUTSTANDING_LOANS.Key);\r\n\r\n    const showExposure =\r\n    !APPLET_INA && !probate && \r\n      !(\r\n        this.props.liabilityCurr.liabTypeKey ===\r\n        LIABILITIES.CLIENT_TAX_LIABILITY.Key\r\n      );\r\n\r\n    // console.log(this.props.liabilityCurr.id,this.props.liabilityCurr.liabTypeKey,this.props.liabilitysNo)\r\n\r\n\r\n    if (this.state.loading === true && this.props.disableAddRemove=== true) {\r\n      return (\r\n       \"\"\r\n      );\r\n    } else {\r\n    return (\r\n      <div className=\"inputRow\">\r\n        {this.dataValues.DD.map(\r\n          (\r\n            dd // don't show ownership dosen't matter \r\n          ) =>\r\n            dd.id < 3 &&\r\n             !(dd.id === 2) &&  ( \r\n              <DropDown\r\n                key={dd.id}\r\n                id={dd.id}\r\n                Count={this.props.liabilitysNo}\r\n                Title={dd.Title}\r\n                infoIcon={\r\n                  dd.Title === CONTROLTITLE[this.props.language].type && this.props.liabilityCurr.liabTypeKey===LIABILITIES.PROBATE.Key\r\n                    ? getInfoIconProbate(this.props.language)\r\n                    : undefined\r\n                }\r\n                width={DROPDOWN_WIDE}\r\n                defValue={dd.defValue}\r\n                Values={dd.Values}\r\n                updateDDown={this.updateDDown}\r\n              />\r\n            )\r\n        )}\r\n        <InputField\r\n          inputName={CONTROLTITLE[this.props.language].amount}\r\n          id={1}\r\n          format={2}\r\n          Count={this.props.liabilitysNo}\r\n          language={this.props.language}\r\n          inputValue={this.props.liabilityCurr.currValue}\r\n          handleUpdateInput={this.handleUpdateInput}\r\n        />\r\n\r\n        {showRepay && (\r\n          <InputField\r\n            inputName={CONTROLTITLE[this.props.language].repay}\r\n            id={4}\r\n            format={2}\r\n            Count={this.props.liabilitysNo}\r\n            language={this.props.language}\r\n            inputValue={this.props.liabilityCurr.repay}\r\n            handleUpdateInput={this.handleUpdateInput}\r\n          />\r\n        )}\r\n\r\n        {!APPLET_INA  &&\r\n          !loanOrTax && !probate && \r\n          this.dataValues.DD.map(\r\n            (dd) =>\r\n              dd.id === 3 && (\r\n                <DropDown\r\n                  key={dd.id}\r\n                  id={dd.id}\r\n                  Count={this.props.liabilitysNo}\r\n                  Title={dd.Title}\r\n                  defValue={dd.defValue}\r\n                  Values={dd.Values}\r\n                  updateDDown={this.updateDDown}\r\n                />\r\n              )\r\n          )}\r\n        {!APPLET_INA  && !loanOrTax && !probate &&  (\r\n          <InputField\r\n            inputName={\r\n              growthSel === 0\r\n                ? CONTROLTITLE[this.props.language].growth\r\n                : CONTROLTITLE[this.props.language].changeRate\r\n            }\r\n            id={2}\r\n            format={3}\r\n            Count={this.props.liabilitysNo}\r\n            language={this.props.language}\r\n            inputValue={Math.round(10000*this.props.liabilityCurr.growth)/10000}\r\n            handleUpdateInput={this.handleUpdateInput}\r\n          />\r\n        )}\r\n\r\n        {showExposure && (\r\n          <InputField\r\n            inputName={CONTROLTITLE[this.props.language].exposureDur}\r\n            id={3}\r\n            format={1}\r\n            Count={this.props.liabilitysNo}\r\n            language={this.props.language}\r\n            inputValue={this.props.liabilityCurr.exposureDur}\r\n            handleUpdateInput={this.handleUpdateInput}\r\n          />\r\n        )}\r\n\r\n        {!APPLET_INA  && (\r\n          <img\r\n            className=\"iconMore\"\r\n            onClick={this.handleClick}\r\n            id=\"gridOn\"\r\n            alt=\"ll\"\r\n            src={\r\n              this.state.displaySreadsheet === true\r\n                ? require(\"../images/gridOff.png\")\r\n                : require(\"../images/gridOn.png\")\r\n            }\r\n          />\r\n        )}\r\n\r\n        <AddRemove\r\n          currentID={this.props.liabilityCurr.id}\r\n          minComps={0}\r\n          id={this.props.liabilityCurr.liabTypeKey}\r\n          numberComps={this.props.liabilitysNo}\r\n          handleDoAdd={this.handleDoAdd}\r\n          handleDoRemove={this.handleDoRemove}\r\n          disabled={this.props.disableAddRemove}\r\n        />\r\n        {/*isMobileDevice() &&\r\n        this.props.liabilityCurr.id < this.props.liabilitysNo ? (\r\n          <hr className=\"ppi2\" />\r\n        ) : (\r\n          \"\"\r\n        )*/}\r\n        {this.state.displaySreadsheet === true && (\r\n          <div style={{ clear: \"both\", float: \"left\", width: \"60%\" }}>\r\n            <DataTable\r\n              dataColTitles={this.dataColTitles}\r\n              dataProjection={this.state.dataProjection}\r\n              gridTitle={\r\n                getListItemNameFromKey(\r\n                  LIABILITIES,\r\n                  this.props.liabilityCurr.liabTypeKey,\r\n                  this.props.language\r\n                ) + \" Projection\"\r\n              }\r\n              language={this.props.language}\r\n            />\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { DropDown } from \"./DropDown\";\r\nimport { AddRemove } from \"./AddRemove\";\r\nimport { cleanFormat, getListToShowByOrder, getDisableValues } from \"../utils/helper\";\r\n\r\nimport { copyFromAnotherObject }  from \"../data/createDefaults\";\r\nimport {\r\n  CONTROLTITLE,\r\n  INCOMESOURCES,\r\n  DEFAULT_DIVIDEND_TAX_RATE,\r\n} from \"../definitions/generalDefinitions\";\r\n//import { InputField4 } from './inputField4';\r\nimport { InputField } from \"./inputField\";\r\nimport {\r\n  isMobileDevice,\r\n  getListItemNameFromKey,\r\n  getListItemKeyFromName,\r\n} from \"../utils/helper\";\r\nimport { DROPDOWN_WIDE } from \"../definitions/generalDefinitions\";\r\nimport {\r\n  getInfoIconSourcesGov,\r\n  getInfoIconAssetsYr0,\r\n  getInfoIconInflationGrowth\r\n} from \"../definitions/infoIconsDefinitions\";\r\n\r\nexport class Source extends Component {\r\n  displayName = Source.name;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    let i;\r\n    let typeValues = [];\r\n    const listSourcesToShow = getListToShowByOrder(INCOMESOURCES);\r\n    for (i = 0; i < listSourcesToShow.length; ++i) {\r\n      {\r\n        typeValues.push({\r\n          label: listSourcesToShow[i].value[this.props.language],\r\n          value: i + 1,\r\n        });\r\n      }\r\n    }\r\n\r\n    /* \r\n    for (i = 0; i <= 5; ++i) {\r\n      typeValues.push({\r\n        label: INCOMESOURCES[this.props.language].Values[i],\r\n        value: i + 1\r\n      });\r\n    }\r\n */\r\n    // console.log(this.props.sourceCurr)\r\n    this.state = {};\r\n    this.dataValues = {\r\n      DD: [\r\n        {\r\n          id: 1,\r\n          Title: CONTROLTITLE[this.props.language].type,\r\n          defValue: getListItemNameFromKey(\r\n            INCOMESOURCES,\r\n            this.props.sourceCurr.sourceTypeKey,\r\n            this.props.language\r\n          ),\r\n          disableOptionValue: getDisableValues(INCOMESOURCES),\r\n          Values: typeValues,\r\n        },\r\n      ],\r\n    };\r\n    this.dataValues.DD[0].disableOptionValue[INCOMESOURCES.GOV_DEATH_BENEFIT.ID]=true;\r\n    this.dataValues.DD[0].disableOptionValue[INCOMESOURCES.GOV_SURVIVORS_PENSION.ID]=true;\r\n    this.dataValues.DD[0].disableOptionValue[INCOMESOURCES.GOV_ORPHANS_BENEFIT.ID]=true;\r\n\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (\r\n      nextProps.sourceCurr !== this.props.sourceCurr ||\r\n      nextProps.id !== this.props.id ||\r\n      nextProps.sourcesNo !== this.props.sourcesNo\r\n    ) {\r\n      // console.log(nextProps.sourceCurr.sourceTypeKey)\r\n      this.dataValues.DD[0].defValue = getListItemNameFromKey(\r\n        INCOMESOURCES,\r\n        nextProps.sourceCurr.sourceTypeKey,\r\n        this.props.language\r\n      );\r\n    }\r\n  }\r\n\r\n  handleDoRemove = (id) => {\r\n    if (this.props.disableAddRemove === false) {\r\n      this.props.handleRemoveSource(id);\r\n    }  \r\n  };\r\n\r\n  isSourceGovNonOrphanBenefit = (key) => {\r\n    if (\r\n      key === INCOMESOURCES.GOV_SURVIVORS_PENSION.Key ||\r\n      key === INCOMESOURCES.GOV_DEATH_BENEFIT.Key\r\n    )\r\n      return true;\r\n    else return false;\r\n  };\r\n\r\n  isDividendIncome = (key) => {\r\n    if (key === INCOMESOURCES.DIVIDEND_INCOME.Key) return true;\r\n    else return false;\r\n  };\r\n  isSourceGovOrphansBenefit = (key) => {\r\n    if (key === INCOMESOURCES.GOV_ORPHANS_BENEFIT.Key) return true;\r\n    else return false;\r\n  };\r\n\r\n  handleDoAdd = () => {\r\n    // no gov stuff\r\n    if (this.props.disableAddRemove === false) {\r\n    \r\n    var sourceNo =\r\n      this.props.sourcesNo > this.dataValues.DD[0].Values.length - 1\r\n        ? this.dataValues.DD[0].Values.length - 1\r\n        : this.props.sourcesNo;\r\n    //if(this.props.includeGovOrphanBenefit===false)\r\n    //  sourceNo +=1;\r\n    if (sourceNo > this.dataValues.DD[0].Values.length - 1) sourceNo -= 1;\r\n\r\n    let sourceNextKey = getListItemKeyFromName(\r\n      INCOMESOURCES,\r\n      this.dataValues.DD[0].Values[sourceNo].label\r\n    );\r\n\r\n    // dont add gov stuff unless has child && orphanben\r\n    while (\r\n      sourceNextKey === INCOMESOURCES.GOV_DEATH_BENEFIT.Key ||\r\n      sourceNextKey === INCOMESOURCES.GOV_SURVIVORS_PENSION.Key ||\r\n      (sourceNextKey === INCOMESOURCES.GOV_ORPHANS_BENEFIT.Key &&\r\n        this.props.includeGovOrphanBenefit === false)\r\n    ) {\r\n      sourceNo += 1;\r\n      sourceNextKey = getListItemKeyFromName(\r\n        INCOMESOURCES,\r\n        this.dataValues.DD[0].Values[sourceNo].label\r\n      );\r\n    }\r\n\r\n    // dont repeat\r\n    while (\r\n      sourceNextKey === this.props.sourceCurr.sourceTypeKey &&\r\n      this.props.sourceCurr.sourceTypeKey !== INCOMESOURCES.OTHER.Key\r\n    ) {\r\n      sourceNo += 1;\r\n      sourceNextKey = getListItemKeyFromName(\r\n        INCOMESOURCES,\r\n        this.dataValues.DD[0].Values[sourceNo].label\r\n      );\r\n    }\r\n\r\n    const source = {\r\n      id: this.props.sourcesNo + 1,\r\n      sourceTypeKey: sourceNextKey,\r\n      amount: 0,\r\n      startYear: 0,\r\n      // set others based on INA other values tax infl\r\n      // duration, growthRate,ownerID,taxRate depends on clients\r\n\r\n    };\r\n    if (sourceNextKey === INCOMESOURCES.DIVIDEND_INCOME.Key)\r\n      source.taxRate = DEFAULT_DIVIDEND_TAX_RATE;\r\n    // console.log(source)\r\n    this.props.handleAddSource(source);\r\n  }\r\n  };\r\n\r\n  updateDDown = (id, selection) => {\r\n    let source = {\r\n      id: this.props.sourceCurr.id,\r\n      //Type: this.props.Type,\r\n      sourceTypeKey: this.props.sourceCurr.sourceTypeKey,\r\n      amount: this.props.sourceCurr.amount,\r\n      startYear: this.props.sourceCurr.startYear,\r\n      duration: this.props.sourceCurr.duration,\r\n      taxRate: this.props.sourceCurr.taxRate,\r\n      annualGrowth: this.props.sourceCurr.annualGrowth,\r\n    };\r\n\r\n    if (id === 1)\r\n      source.sourceTypeKey = getListItemKeyFromName(INCOMESOURCES, selection);\r\n    else if (id === 2) source.ownerID = selection;\r\n    this.props.handleUpdate(source);\r\n  };\r\n\r\n  handleUpdateInput = (id, value) => {\r\n    let  s1 = {\r\n      id: this.props.sourceCurr.id,\r\n      //Type: this.props.Type,\r\n      sourceTypeKey: this.props.sourceCurr.sourceTypeKey,\r\n      amount: this.props.sourceCurr.amount,\r\n      startYear: this.props.sourceCurr.startYear,\r\n      duration: this.props.sourceCurr.duration,\r\n      ownerID: this.props.sourceCurr.ownerID,\r\n      taxRate: this.props.sourceCurr.taxRate,\r\n      annualGrowth: this.props.sourceCurr.annualGrowth,\r\n    };\r\n\r\n//    s1 =copyFromAnotherObject(this.props.sourceCurr)\r\n\r\n    let changed = false;\r\n    const lang = this.props.language;\r\n    const valueClean = cleanFormat(value,lang);\r\n    const valueCleanInt = parseInt(valueClean);\r\n\r\n    if (id === 1) {\r\n      changed = s1.amount !== valueCleanInt ? true : false;\r\n      s1.amount = valueCleanInt;\r\n    } else if (id === 2) {\r\n      changed = s1.startYear !== value ? true : false;\r\n      s1.startYear = value;\r\n    } else if (id === 3) {\r\n      changed = s1.duration !== value ? true : false;\r\n      s1.duration = value;\r\n    } else if (id === 4) {\r\n      changed =\r\n        s1.taxRate !==\r\n        parseInt(100 * valueClean) / 100\r\n          ? true\r\n          : false;\r\n      s1.taxRate =\r\n        parseInt(100 * valueClean) / 100;\r\n    } else if (id === 5) {\r\n      changed =\r\n        s1.annualGrowth !==\r\n        parseInt(100 * valueClean) / 100\r\n          ? true\r\n          : false;\r\n      s1.annualGrowth =\r\n        parseInt(100 * valueClean) / 100;\r\n    }\r\n    if (changed){\r\n       this.props.handleUpdate(s1);\r\n       this.setState({ loading: this.props.disableAddRemove });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const gov = this.isSourceGovNonOrphanBenefit(\r\n      this.props.sourceCurr.sourceTypeKey\r\n    );\r\n    const govOrphan = this.isSourceGovOrphansBenefit(\r\n      this.props.sourceCurr.sourceTypeKey\r\n    );\r\n    const dividend = this.isDividendIncome(this.props.sourceCurr.sourceTypeKey);\r\n    const RRIF = this.props.sourceCurr.sourceTypeKey === INCOMESOURCES.RRIF.Key;\r\n    // console.log(this.props.sourceCurr,govOrphan,this.props.sourceCurr.maxOrphan)\r\n    \r\n    \r\n    let unlistedGreyedOption;\r\n    if (RRIF) {\r\n      unlistedGreyedOption = [];\r\n      unlistedGreyedOption.push({\r\n        label: INCOMESOURCES.RRIF.value[this.props.language],\r\n        value: 1,\r\n      });\r\n    }\r\n\r\n    if (this.state.loading === true && this.props.disableAddRemove=== true) {\r\n      return (\r\n       \"\"\r\n      );\r\n    } else {\r\n      return (\r\n      <div className=\"inputRow\">\r\n        {this.dataValues.DD.map((dd) => (\r\n          <DropDown\r\n            key={dd.id}\r\n            id={dd.id}\r\n            Count={this.props.sourcesNo}\r\n            Title={dd.Title}\r\n            // infoIcon={gov && !govOrphan ? getInfoIconSourcesGov(this.props.language): undefined}\r\n            width={DROPDOWN_WIDE}\r\n            language={this.props.language}\r\n            defValue={dd.defValue}\r\n            Values={dd.Values}\r\n            disableOption={dd.disableOptionValue}\r\n            unlistedGreyedOption={unlistedGreyedOption}\r\n            updateDDown={this.updateDDown}\r\n          />\r\n        ))}\r\n        {!RRIF && (\r\n          <InputField\r\n            format={2}\r\n            id={1}\r\n            key=\"amt\"\r\n            inputName={CONTROLTITLE[this.props.language].amountGross}\r\n            readOnly={gov}\r\n            Count={this.props.sourcesNo}\r\n            language={this.props.language}\r\n            infoIcon={\r\n              gov || govOrphan// && !govOrphan\r\n                ? getInfoIconSourcesGov(this.props.language)\r\n                : undefined\r\n            }\r\n            maxValue={govOrphan ? this.props.sourceCurr.maxOrphan : undefined}\r\n            inputValue={this.props.sourceCurr.amount}\r\n            inputTitle={this.props.sourceCurr.id}\r\n            handleUpdateInput={this.handleUpdateInput}\r\n          />\r\n        )}\r\n\r\n        {gov || govOrphan ? (\r\n          \"\"\r\n        ) : (\r\n          <InputField\r\n            format={1}\r\n            id={2}\r\n            inputName={\r\n              RRIF\r\n                ? CONTROLTITLE[this.props.language].RRIFAge\r\n                : CONTROLTITLE[this.props.language].startYear\r\n            }\r\n            Count={this.props.sourcesNo}\r\n            language={this.props.language}\r\n            inputValue={this.props.sourceCurr.startYear}\r\n            infoIcon={getInfoIconAssetsYr0(this.props.language)}\r\n            //infoIcon={RRIF ? getInfoIconSourcesRRIF(this.props.language): undefined}\r\n            readOnly={RRIF}\r\n            inputTitle={this.props.sourceCurr.id}\r\n            handleUpdateInput={this.handleUpdateInput}\r\n          />\r\n        )}\r\n        {gov || RRIF ? (\r\n          \"\"\r\n        ) : (\r\n          <InputField\r\n            format={1}\r\n            id={3}\r\n            inputName={CONTROLTITLE[this.props.language].dur}\r\n            Count={this.props.sourcesNo}\r\n            language={this.props.language}\r\n            inputValue={this.props.sourceCurr.duration}\r\n            maxValue={\r\n              govOrphan ? this.props.sourceCurr.maxOrphanDur : undefined\r\n            }\r\n            inputTitle={this.props.sourceCurr.id}\r\n            handleUpdateInput={this.handleUpdateInput}\r\n          />\r\n        )}\r\n\r\n        {dividend && (\r\n          <InputField\r\n            id={4}\r\n            inputName={CONTROLTITLE[this.props.language].dividendTaxRate}\r\n            format={3}\r\n            Count={this.props.sourcesNo}\r\n            language={this.props.language}\r\n            //   infoIcon={getInfoIconDividend(this.props.language)}\r\n            inputValue={this.props.sourceCurr.taxRate}\r\n            inputTitle={this.props.sourceCurr.id}\r\n            handleUpdateInput={this.handleUpdateInput}\r\n          />\r\n        )}\r\n\r\n        <AddRemove\r\n          currentID={this.props.sourceCurr.id}\r\n          numberComps={this.props.sourcesNo}\r\n          handleDoAdd={this.handleDoAdd}\r\n          handleDoRemove={this.handleDoRemove}\r\n          disabled={this.props.disableAddRemove}\r\n        />\r\n        {/* {isMobileDevice() && this.props.sourceCurr.id < this.props.sourcesNo ? (\r\n          <hr className=\"ppi2\" />\r\n        ) : (\r\n          \"\"\r\n        )} */}\r\n      </div>\r\n    );\r\n      }\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { DropDown } from \"./DropDown\";\r\nimport { AddRemove } from \"./AddRemove\";\r\nimport { cleanFormat, getListItemKeyFromName } from \"../utils/helper\";\r\nimport {\r\n  MESSAGES,\r\n  CONTROLTITLE,\r\n  INCOMENEEDS,\r\n  DROPDOWN_WIDE,\r\n} from \"../definitions/generalDefinitions\";\r\n//import { InputField4 } from './inputField4';\r\nimport { InputField } from \"./inputField\";\r\nimport {\r\n  isMobileDevice,\r\n  getListToShowByOrder,\r\n  getListItemNameFromKey,\r\n} from \"../utils/helper\";\r\nimport {\r\n  getInfoSalaryPercent,\r\n  getInfoIconAssetsYr0,\r\n} from \"../definitions/infoIconsDefinitions\";\r\n\r\nexport class Need extends Component {\r\n  displayName = Need.name;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    let i;\r\n    let typeValues = [];\r\n    const listNeedsToShow = getListToShowByOrder(INCOMENEEDS);\r\n    for (i = 0; i < listNeedsToShow.length; ++i) {\r\n      typeValues.push({\r\n        label: listNeedsToShow[i].value[this.props.language],\r\n        value: i + 1,\r\n      });\r\n    }\r\n    this.state = {};\r\n    this.dataValues = {\r\n      DD: [\r\n        {\r\n          id: 1,\r\n          Title: CONTROLTITLE[this.props.language].type,\r\n          defValue: getListItemNameFromKey(\r\n            INCOMENEEDS,\r\n            this.props.needCurr.needTypeKey,\r\n            this.props.language\r\n          ),\r\n          Values: typeValues,\r\n        },\r\n      ],\r\n    };\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (\r\n      nextProps.needCurr !== this.props.needCurr ||\r\n      nextProps.id !== this.props.id ||\r\n      nextProps.needsNo !== this.props.needsNo\r\n    ) {\r\n      this.dataValues.DD[0].defValue = getListItemNameFromKey(\r\n        INCOMENEEDS,\r\n        nextProps.needCurr.needTypeKey,\r\n        this.props.language\r\n      );\r\n    }\r\n  }\r\n\r\n  handleDoRemove = (id) => {\r\n    if (this.props.disableAddRemove === false) {\r\n      this.props.handleRemoveNeed(id);\r\n    }\r\n  };\r\n\r\n  handleDoAdd = () => {\r\n    if (this.props.disableAddRemove === false) {\r\n      let needNo =\r\n      this.props.needsNo > this.dataValues.DD[0].Values.length - 1\r\n        ? this.dataValues.DD[0].Values.length - 1\r\n        : this.props.needsNo-1; // e % of income by default start from there\r\n\r\n    if (needNo > this.dataValues.DD[0].Values.length - 1) needNo -= 1\r\n    let needNext = this.dataValues.DD[0].Values[needNo].label;\r\n\r\n    const startYear = 0; //this.props.startYear\r\n    const dur = 1; //this.props.duration;\r\n\r\n    this.props.handleAddNeed(\r\n      getListItemKeyFromName(INCOMENEEDS, needNext),\r\n      startYear,\r\n      dur\r\n    );\r\n    }\r\n  };\r\n\r\n\r\n\r\n  updateDDown = (id, selection) => {\r\n    let need = {\r\n      id: this.props.id,\r\n      needTypeKey: this.props.needCurr.needTypeKey,\r\n\r\n      Percent: this.props.needCurr.Percent,\r\n      amount: this.props.needCurr.amount,\r\n      startYear: this.props.needCurr.startYear,\r\n      duration: this.props.needCurr.duration,\r\n    };\r\n\r\n    if (id === 1)\r\n      need.needTypeKey = getListItemKeyFromName(INCOMENEEDS, selection);\r\n    else if (id === 2) need.Owner = selection;\r\n    // console.log(need)\r\n    this.props.handleUpdate(need);\r\n  };\r\n\r\n  handleUpdateInput = (id, value) => {\r\n    \r\n    let need = {\r\n      id: this.props.id,\r\n      needTypeKey: this.props.needCurr.needTypeKey,\r\n      Percent: this.props.needCurr.Percent,\r\n      amount: this.props.needCurr.amount,\r\n      startYear: this.props.needCurr.startYear,\r\n      duration: this.props.needCurr.duration,\r\n    };\r\n\r\n    let changed = false;\r\n    const lang = this.props.language;\r\n    const valueClean = cleanFormat(value,lang);\r\n    const valueCleanInt = parseInt(valueClean);\r\n   \r\n    if (id === 1) {\r\n      changed = need.amount !== valueCleanInt ? true : false;\r\n      need.amount = valueCleanInt;\r\n      need.Percent = //100*need.amount/this.props.afterTaxTotalIncome\r\n        (parseInt(1000000*need.amount / this.props.afterTaxTotalIncome)/10000).toFixed(2);\r\n     } else if (id === 2) {\r\n      changed = need.startYear !== value ? true : false;\r\n      need.startYear = value;\r\n    } else if (id === 3) {\r\n      changed = need.duration !== value ? true : false;\r\n      need.duration = value;\r\n    } else if (id === 4) {\r\n      changed =\r\n        need.Percent !==\r\n        parseInt(100 * valueClean) / 100\r\n          ? true\r\n          : false;\r\n      need.Percent = parseFloat(valueClean);\r\n    }\r\n     if (changed) {\r\n       this.props.handleUpdate(need);\r\n       this.setState({ loading: this.props.disableAddRemove });\r\n     }\r\n  };\r\n\r\n  render() {\r\n    let rOnly =\r\n      this.props.needCurr.needTypeKey === INCOMENEEDS.PERCET_OF_INCOME.Key;\r\n    rOnly = false;\r\n    const percentN =\r\n      this.props.needCurr.needTypeKey === INCOMENEEDS.PERCET_OF_INCOME.Key;\r\n    let divStyleClass = \"dropDown inputDiv\";\r\n    divStyleClass += this.props.language === \"fr\" ? \" inputDivFrench\" : \"\";\r\n\r\n    if (this.state.loading === true && this.props.disableAddRemove=== true) {\r\n      return (\r\n       \"\"\r\n      );\r\n    } else {\r\n    return (\r\n      <div className=\"inputRow\">\r\n        {this.dataValues.DD.map((dd) => (\r\n          <DropDown\r\n            key={dd.id}\r\n            id={dd.id}\r\n            Count={this.props.needsNo}\r\n            disable={this.props.needCurr.duration === 100}\r\n            Title={dd.Title}\r\n            defValue={dd.defValue}\r\n            width={DROPDOWN_WIDE}\r\n            Values={dd.Values}\r\n            updateDDown={this.updateDDown}\r\n          />\r\n        ))}\r\n        {percentN ? (\r\n          <InputField\r\n            inputName={CONTROLTITLE[this.props.language].percent}\r\n            format={3}\r\n            id={4}\r\n            Count={this.props.needsNo}\r\n            language={this.props.language}\r\n            inputValue={this.props.needCurr.Percent}\r\n            handleUpdateInput={this.handleUpdateInput}\r\n          />\r\n        ) : (\r\n          \"\"\r\n        )}\r\n        <InputField\r\n          inputName={CONTROLTITLE[this.props.language].afterTaxAmount}\r\n          format={2}\r\n          id={1}\r\n          key={\"am1\"}\r\n          readOnly={rOnly}\r\n          Count={this.props.needsNo}\r\n          language={this.props.language}\r\n          infoIcon={getInfoSalaryPercent(this.props.language)}\r\n          inputValue={this.props.needCurr.amount}\r\n          handleUpdateInput={this.handleUpdateInput}\r\n        />\r\n        <InputField\r\n          format={1}\r\n          id={2}\r\n          inputName={CONTROLTITLE[this.props.language].startYear}\r\n          Count={this.props.needsNo}\r\n          language={this.props.language}\r\n          infoIcon={getInfoIconAssetsYr0(this.props.language)}\r\n          inputValue={this.props.needCurr.startYear}\r\n          handleUpdateInput={this.handleUpdateInput}\r\n        />\r\n        {this.props.needCurr.duration === 100 ? (\r\n          <div className={divStyleClass}>\r\n            <div className=\"controlTitle\">\r\n              {CONTROLTITLE[this.props.language].dur}\r\n            </div>\r\n            <input\r\n              type=\"text\"\r\n              className=\"inputField inputFieldDisabled\"\r\n              isDisabled={true}\r\n              value={MESSAGES[this.props.language].ever}\r\n            />\r\n          </div>\r\n        ) : (\r\n          <InputField\r\n            format={1}\r\n            id={3}\r\n            inputName={CONTROLTITLE[this.props.language].dur}\r\n            Count={this.props.needsNo}\r\n            language={this.props.language}\r\n            inputValue={this.props.needCurr.duration}\r\n            handleUpdateInput={this.handleUpdateInput}\r\n          />\r\n        )}\r\n\r\n        <AddRemove\r\n          currentID={this.props.id}\r\n          numberComps={this.props.needsNo}\r\n          disabled={this.props.disableAddRemove}\r\n          handleDoAdd={this.handleDoAdd}\r\n          handleDoRemove={this.handleDoRemove}\r\n          disabled={this.props.disableAddRemove}\r\n        />\r\n        {/* {isMobileDevice() && this.props.id < this.props.needsNo ? (\r\n          <hr className=\"ppi2\" />\r\n        ) : (\r\n          \"\"\r\n        )} */}\r\n      </div>\r\n    );\r\n      }\r\n  }\r\n}\r\n","import { TITLES, APPLET_INA, DEFAULT_QUOTE  } from \"../definitions/generalDefinitions\";\r\nimport React, { Component } from \"react\";\r\nimport { Info } from \"./Info\";\r\n\r\n//import {convertToINA} from '../utils/helper'\r\nimport { versionDetails, isVersion2019, isMobileDevice } from \"../utils/helper\";\r\nimport { version } from \"../../package.json\";\r\n\r\nexport function hideRecover() {\r\n  document.getElementById(\"last\").style.display = \"none\";\r\n}\r\n\r\nexport class Header extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.last = React.createRef();\r\n    this.default = React.createRef();\r\n//    this.defaultButton=this.defaultCommand(this.props.language); \r\nconst language=this.props.language\r\n    const storageName=DEFAULT_QUOTE\r\n    const set= TITLES[language ].default \r\n    const clear=TITLES[language ].defaultClear \r\n    this.defaultButton= localStorage.getItem(storageName) === null?set:clear\r\n \r\n  }\r\n\r\n  hideRecover = () => {\r\n    const ref = this.last.current;\r\n    //const last = document.getElementById(\"last\");\r\n    if (ref !== undefined) ref.style.display = \"none\";\r\n  };\r\n\r\n  saveDefault = () => {\r\n    //const def = document.getElementById(\"default\");\r\n\r\n    const ref = this.default.current;\r\n    const val = ref.value;\r\n    //console.log(ref)\r\n    if (ref !== undefined) {\r\n     \r\n      if (ref.value===TITLES[this.props.language ].default)\r\n      {\r\n        this.props.saveAsDefaultCase(false);\r\n    \r\n    //  ref.style.backgroundColor = \"lightgrey\";\r\n     // ref.style.color = \"white\";\r\n      ref.value = TITLES[this.props.language ].defaultClear\r\n   //  setTimeout(() => {\r\n    //    ref.style.backgroundColor = \"white\";\r\n        //ref.style.color = \"#455560\";\r\n       // ref.value = val;\r\n    //  }, 1000);\r\n\r\n    }\r\n    else{\r\n      this.props.saveAsDefaultCase(true);\r\n    \r\n      ref.value = TITLES[this.props.language ].default\r\n    } \r\n    }\r\n  };\r\n\r\n  defaultCommand=(language)=>{\r\n    const storageName=DEFAULT_QUOTE;\r\n    const set= TITLES[language ].default \r\n    const clear=TITLES[language ].defaultClear \r\n    return localStorage.getItem(storageName) === null?set:clear\r\n  }\r\n\r\n  changeLanguage=()=>{\r\n    this.defaultButton=this.defaultCommand(this.props.language===\"en\"?\"en\":\"fr\")\r\n    //this.props.changeLang()\r\n  }\r\n\r\n  render() {\r\n    const vd = versionDetails();\r\n    const emailAllowed = vd.allowEmail;\r\n    let style1 =\r\n      this.props.language === \"en\" ? { right: \"45px\" } : { right: \"55px\" };\r\n    let style2 =\r\n      this.props.language === \"en\" ? { right: \"90px\" } : { right: \"152px\" };\r\n    let style3 =\r\n      this.props.language === \"en\"\r\n        ? { right: emailAllowed ? \"145px\" : \"97px\" }\r\n        : { right: emailAllowed ? \"210px\" : \"158px\" };\r\n    let style4 =\r\n      this.props.language === \"en\"\r\n        ? { right: emailAllowed ? \"255px\" : \"197px\" }\r\n        : { right: emailAllowed ? \"320px\" : \"256px\" };\r\n    //if(isVersion2019())\r\n    //\tstyle3= this.props.language===\"en\" ? {right: '90px'}:  {right: '152px'};\r\n    var iOS = isMobileDevice(); // /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\r\n    const class1 = iOS === true ? \"headerBarIOS\" : \"headerBar\";\r\n    const styleTitle =\r\n      iOS === true\r\n        ? { color: \"#282e31\", marginBottom: \"8px\", marginTop: \"-10px\" }\r\n        : { color: \"#282e31\", marginBottom: \"8px\" };\r\n    const styleVersion =\r\n      iOS === true\r\n        ? { fontSize: \"10px\" }\r\n        : { display: \"inline-block\", fontSize: \"10px\", paddingLeft: \"4px\" };\r\n    return (\r\n      <div className={class1}>\r\n        <input\r\n          className=\"language\"\r\n          style={{ marginTop: \"0px\", right: \"0px\" }}\r\n          onClick={this.changeLanguage(), this.props.changeLang} /* this.changeLanguage()} */ \r\n          type=\"button\"\r\n          value={this.props.language === \"en\" ? \"Français\" : \"English\"}\r\n        />\r\n        <span>\r\n          <div style={{ maxWidth: \"70%\" }}>\r\n            <div style={{ display: \"inline-block\" }}>\r\n              <h2 className=\"headerTitle\" /* style={styleTitle} */>{this.props.title}</h2>\r\n            </div>\r\n            <div style={styleVersion}>({version})</div>\r\n          </div>\r\n        </span>\r\n        <span className=\"topCommandLine\">\r\n          <input\r\n            className=\"titleButtons\"\r\n            onClick={this.props.saveToFile}\r\n           // style={style1}\r\n            type=\"button\"\r\n            value={this.props.language === \"en\" ? \"Save\" : \"Enregistrer\"}\r\n          />\r\n          <label className=\"titleButtons\" style={{ right: \"0px\" }}>\r\n            <input\r\n              type=\"file\"\r\n              required\r\n              style={{ display: \"none\" }}\r\n              accept=\".ppi_INA_TKD, .ppi_EP_TKD, .json\"\r\n              onChange={this.props.loadFromFile}\r\n              onClick={(event) => {\r\n                event.target.value = null;\r\n              }}\r\n            />\r\n            <span className=\"titleLoad\">\r\n              {this.props.language === \"en\" ? \"Load\" : \"Ouvrir\"}\r\n            </span>\r\n          </label>\r\n          {emailAllowed && (\r\n            <input\r\n              className=\"titleButtons\"\r\n            //  style={style2}\r\n              onClick={this.props.EmailINA}\r\n              type=\"button\"\r\n              value={this.props.language === \"en\" ? \"e-mail\" : \"e-mail\"}\r\n              id=\"email\"\r\n            />\r\n          )}\r\n          <input\r\n            className=\"titleButtons\"\r\n          //  style={style3}\r\n            onClick={(event) => {\r\n              this.saveDefault();\r\n            }}\r\n            type=\"button\"\r\n            ref={this.default}\r\n            value={\r\n              this.defaultButton\r\n            }\r\n            id=\"default\"\r\n          />\r\n          <input\r\n            className=\"titleButtons\"\r\n          //  style={style4}\r\n            onClick={(event) => {\r\n              this.props.loadStorage();\r\n              hideRecover();\r\n            }}\r\n            type=\"button\"\r\n            ref={this.last}\r\n            value={this.props.language === \"en\" ? \"Recover\" : \"Récupérer\"}\r\n            id=\"last\"\r\n          />\r\n\r\n          {/*<input className=\"titleButtons\" onClick={this.EmailINA} style={{right: '130px'}} type=\"button\" value={this.props.language=== \"en\"?\"Email\":\"Email\"} />*/}\r\n        </span>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { DropDown } from \"./DropDown\";\r\n//import { InputField4 } from './inputField4';\r\nimport { InputField } from \"./inputField\";\r\nimport { cleanFormat, getListItemKeyFromName } from \"../utils/helper\";\r\nimport { CONTROLTITLE, PROVINCE } from \"../definitions/generalDefinitions\";\r\nimport { DROPDOWN_WIDE } from \"../definitions/generalDefinitions\";\r\nimport { getListItemNameFromKey, getListToShowByOrder } from \"../utils/helper\";\r\nimport { getInfoIconNotes } from \"../definitions/infoIconsDefinitions\";\r\nimport { Info } from \"./Info\";\r\n\r\nexport class Presentation extends Component {\r\n  displayName = Presentation.name;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    /*     this.state = {\r\n      image: this.props.presentationCurr.adviserLogo\r\n    };\r\n */\r\n\r\n    let i;\r\n    /* let typeValues = [];\r\n    for (i = 0; i <= 9; ++i) {\r\n      typeValues.push({\r\n        label: PROVINCE[this.props.language].Values[i],\r\n        value: i + 1\r\n      });\r\n    } */\r\n\r\n    let typeValues = [];\r\n    const listProvincesToShow = getListToShowByOrder(PROVINCE);\r\n    // console.log(listProvincesToShow)\r\n    for (i = 0; i < listProvincesToShow.length; ++i) {\r\n      typeValues.push({\r\n        label: listProvincesToShow[i].value[this.props.language],\r\n        value: i + 1,\r\n      });\r\n    }\r\n\r\n    this.state = {\r\n      designedFor: \"\",\r\n      designedBy: \"\",\r\n      notes: \"\",\r\n      showSaved:false\r\n    };\r\n    \r\n    this.dataValues = {\r\n      DD: [\r\n        {\r\n          id: 1,\r\n          Title: CONTROLTITLE[this.props.language].province,\r\n          defValue: getListItemNameFromKey(\r\n            PROVINCE,\r\n            this.props.presentationCurr.provinceKey,\r\n            this.props.language\r\n          ),\r\n          Values: typeValues,\r\n        },\r\n      ],\r\n    };\r\n  }\r\n  // unsafe use getDerivedStateFromProps TBD\r\n\r\n  componentDidMount = () => {\r\n    this.setState({\r\n      designedFor: this.props.presentationCurr.designedFor,\r\n      designedBy: this.props.presentationCurr.designedBy,\r\n      notes: this.props.presentationCurr.notes,\r\n    });\r\n  };\r\n  componentWillReceiveProps(nextProps) {\r\n    if (nextProps.presentationCurr !== this.props.presentationCurr) {\r\n      this.dataValues.DD[0].defValue = getListItemNameFromKey(\r\n        PROVINCE,\r\n        nextProps.presentationCurr.provinceKey,\r\n        this.props.language\r\n      );\r\n      //\t\tthis.dataValues.DD[0].Title = CONTROLTITLE[this.props.language].province;\r\n     }\r\n  }\r\n\r\n  /* static getDerivedStateFromProps(nextProps, prevState){\r\n    \r\n    if(nextProps.presentationCurr!==prevState.presentationCurr){\r\n      return {presentationCurr : nextProps.presentationCurr};\r\n    }\r\n    else return null;\r\n  }\r\n\r\n */\r\n\r\n  getNewPresentation = () => {\r\n    return {\r\n      id: this.props.id,\r\n      provinceKey: this.props.presentationCurr.provinceKey,\r\n      invRate: this.props.presentationCurr.invRate,\r\n      inflation: this.props.presentationCurr.inflation,\r\n      taxRate: this.props.presentationCurr.taxRate,\r\n      designedFor: this.props.presentationCurr.designedFor,\r\n      designedBy: this.props.presentationCurr.designedBy,\r\n      notes: this.props.presentationCurr.notes,\r\n      periodOption: this.props.presentationCurr.periodOption,\r\n      language: this.props.presentationCurr.language,\r\n      resultsOption: this.props.presentationCurr.resultsOption,\r\n      adviserLogo: this.props.presentationCurr.adviserLogo,\r\n      appletImage: this.props.presentationCurr.appletImage,\r\n    };\r\n  };\r\n\r\n  updateDDown = (id, selection) => {\r\n    let pres = this.getNewPresentation();\r\n    if (id === 1)\r\n      pres.provinceKey = getListItemKeyFromName(PROVINCE, selection);\r\n    this.props.handleUpdate(pres);\r\n  };\r\n\r\n  handleUpdateInput = (id, value) => {\r\n    let pres = this.getNewPresentation();\r\n    const lang=this.props.language;\r\n    let changed = false;\r\n    const valueClean = cleanFormat(value,lang);\r\n   \r\n    if (id === 1) {\r\n      changed =\r\n        pres.invRate !==\r\n        parseInt(10000 * valueClean) / 10000\r\n          ? true\r\n          : false;\r\n      pres.invRate =\r\n        parseInt(10000 * valueClean) / 10000;\r\n    } else if (id === 2) {\r\n      changed =\r\n        pres.inflation !==\r\n        parseInt(10000 * valueClean) / 10000\r\n          ? true\r\n          : false;\r\n\r\n      pres.inflation =\r\n        parseInt(10000 * valueClean) / 10000;\r\n    } else if (id === 3) {\r\n       changed =\r\n        pres.taxRate !==\r\n        parseInt(10000 * valueClean) / 10000\r\n          ? true\r\n          : false;\r\n\r\n      pres.taxRate =\r\n        parseInt(10000 * valueClean) / 10000;\r\n    }\r\n    //changed = pres.adviserLogo !== this.state.image ? true : false;\r\n \r\n    \r\n    if (changed) this.props.handleUpdate(pres);\r\n  };\r\n\r\n  updateInputValue(id, evt) {\r\n     let pres = this.getNewPresentation();\r\n    let changed = false;\r\n    if (id === 3) {\r\n      changed = pres.designedFor !== evt.target.value;\r\n      pres.designedFor = evt.target.value;\r\n    } else if (id === 4) {\r\n      changed = pres.designedBy !== evt.target.value;\r\n      pres.designedBy = evt.target.value;\r\n    } else if (id === 5) {\r\n      changed = pres.notes !== evt.target.value;\r\n      pres.notes = evt.target.value;\r\n    }\r\n    if (changed) this.props.handleUpdate(pres);\r\n  }\r\n\r\n \r\n\r\n  render() {\r\n     const infoIcon = getInfoIconNotes(this.props.language);\r\n    return (\r\n      <div className=\"inputRow\">\r\n        {this.dataValues.DD.map((dd) => (\r\n          <DropDown\r\n            key={dd.id}\r\n            id={dd.id}\r\n            Count={1}\r\n            Title={dd.Title}\r\n            width={DROPDOWN_WIDE}\r\n            defValue={dd.defValue}\r\n            Values={dd.Values}\r\n            updateDDown={this.updateDDown}\r\n          />\r\n        ))}\r\n        <InputField\r\n          inputName={CONTROLTITLE[this.props.language].taxRate}\r\n          format={3}\r\n          id={3}\r\n          Count={1}\r\n          language={this.props.language}\r\n          inputValue={Math.round(10000*this.props.presentationCurr.taxRate)/10000}\r\n          inputTitle={this.props.id}\r\n          handleUpdateInput={this.handleUpdateInput}\r\n        />\r\n        <InputField\r\n          inputName={CONTROLTITLE[this.props.language].invRate}\r\n          format={3}\r\n          id={1}\r\n          Count={1}\r\n          language={this.props.language}\r\n          inputValue={Math.round(10000*this.props.presentationCurr.invRate)/10000}\r\n          inputTitle={this.props.id}\r\n          handleUpdateInput={this.handleUpdateInput}\r\n        />\r\n        <InputField\r\n          inputName={CONTROLTITLE[this.props.language].inflation}\r\n          format={3}\r\n          id={2}\r\n          Count={1}\r\n          language={this.props.language}\r\n          inputValue={Math.round(10000*this.props.presentationCurr.inflation)/10000}\r\n          inputTitle={this.props.id}\r\n          handleUpdateInput={this.handleUpdateInput}\r\n        />\r\n        <div className=\"dropDown inputText\">\r\n          <span className=\"controlTitle\">\r\n            {CONTROLTITLE[this.props.language].designedFor}\r\n          </span>\r\n          <input\r\n            id={3}\r\n            className=\"inputField Text\"\r\n            value={this.state.designedFor}\r\n            onFocus={this.handleFocus}\r\n            onClick={this.select}\r\n            type=\"text\"\r\n            onBlur={(evt) => this.updateInputValue(3, evt)}\r\n            onChange={(evt) => this.setState({ designedFor: evt.target.value })}\r\n          />\r\n        </div>\r\n        <div className=\"dropDown inputText\">\r\n          <span className=\"controlTitle\">\r\n            {CONTROLTITLE[this.props.language].designedBy}\r\n          </span>\r\n          <input\r\n            id={4}\r\n            className=\"inputField Text\"\r\n            onFocus={this.handleFocus}\r\n            onClick={this.select}\r\n            type=\"text\"\r\n            value={this.state.designedBy}\r\n            onBlur={(evt) => this.updateInputValue(4, evt)}\r\n            onChange={(evt) => this.setState({ designedBy: evt.target.value })}\r\n          />\r\n        </div>\r\n     \r\n        <div className=\"dropDown inputTextNotes\">\r\n          <span className=\"controlTitle\">\r\n            {CONTROLTITLE[this.props.language].notes}\r\n          </span>\r\n          <Info infoIcon={infoIcon} />{\" \"}\r\n          <textarea\r\n            id={5}\r\n            className=\"inputField textarea\"\r\n            onFocus={this.handleFocus}\r\n            onClick={this.select}\r\n            type=\"text\"\r\n            value={this.state.notes}\r\n            onBlur={(evt) => this.updateInputValue(5, evt)}\r\n            onChange={(evt) => this.setState({ notes: evt.target.value })}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\nimport { Dialog, Button, Card, CardContent, Typography } from '@material-ui/core'\r\nimport { DialogActions, DialogContent, DialogContentText, DialogTitle, TextField } from '@material-ui/core'\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport { Info } from \"./Info\";\r\nimport {\r\n  getInfoSave\r\n} from \"../definitions/infoIconsDefinitions.js\";\r\n\r\n\r\nconst MESSAGES = {\r\n  en: {\r\n  saveAs1: \"To save files in your desired location: \",\r\n  saveAs2: \" - Microsoft Edge: select 'SaveAs' when prompted \",\r\n  saveAs3: \" - Google Chrome: make a one time change: \",\r\n  saveAs4: \"go to Settings - Advanced - Downloads and turn on \",\r\n  saveAs5: \"'Ask where to save each file before downloading\"\r\n  \r\n  },\r\n  fr: {\r\n  saveAs1: \"To save files in your desired location: ^F\",\r\n  saveAs2: \" - Microsoft Edge: select 'SaveAs' when prompted  ^F\",\r\n  saveAs3: \" - Google Chrome: make a one time change:  ^F\",\r\n  saveAs4: \"go to Settings - Advanced - Downloads and turn on  ^F\",\r\n  saveAs5: \"'Ask where to save each file before downloading  ^F\"\r\n  \r\n  }\r\n};\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    '& > *': {\r\n      margin: theme.spacing(1),\r\n    },\r\n  },\r\n}));\r\n\r\n\r\nexport class PopupUserinputDialog extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      open: this.props.openDialog,\r\n      name: '',\r\n      showInfo: false\r\n    }\r\n  };\r\n\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (nextProps !== this.props) {\r\n\r\n      this.setState({\r\n        open: nextProps.openDialog\r\n      })\r\n    }\r\n  }\r\n\r\n  handleOK = () => {\r\n    this.props.respondToInput(this.state.name)\r\n    this.setState({\r\n      open: !this.state.open\r\n    })\r\n  }\r\n\r\n\r\n  handleCancel = () => {\r\n    this.props.respondToInput(\"\")\r\n    this.setState({\r\n      open: !this.state.open\r\n    })\r\n  }\r\n\r\n\r\n  handleInfo = () => {\r\n    this.setState({\r\n      showInfo: !this.state.showInfo\r\n    })\r\n  }\r\n\r\n\r\n\r\n  render() {\r\n\r\n    const handleChange = evt => {\r\n\r\n\r\n      this.setState({\r\n        name: evt.target.value\r\n      }\r\n\r\n      )\r\n\r\n\r\n    }\r\n    const infoIcon = getInfoSave(this.props.language);\r\n    var sourceEdge = require('../images/chooseButton.png');\r\n    var sourceChrome = require('../images/chooseButtonChrome.png');\r\n    var optionsEdge = require('../images/optionsEdge.png');\r\n    var optionsChrome = require('../images/optionsChrome.png');\r\n\r\n    const message=MESSAGES[this.props.language]\r\n\r\n    \r\n    return (\r\n\r\n      <div>\r\n\r\n       {/*  <Button/> */}\r\n        <Dialog\r\n          open={this.state.open}\r\n          onClose={this.handleToggle}\r\n          aria-labelledby=\"confirm-dialog\"\r\n\r\n        >\r\n          <DialogTitle id=\"confirm-dialog\"></DialogTitle>\r\n          <DialogContent >\r\n            <DialogContentText><span className=\"dialog\">Save to File</span>\r\n            </DialogContentText>\r\n\r\n            <form>\r\n              <TextField\r\n                id=\"1\"\r\n                label=\"file name\"\r\n                value={this.state.name}\r\n                onChange={handleChange}\r\n                margin=\"normal\">\r\n              </TextField>\r\n\r\n\r\n            </form>\r\n          </DialogContent>\r\n           \r\n          <DialogActions style={{ paddingRight: '12px', paddingBottom: '10px' }}>\r\n          <div  style={{ marginLeft: '12px'}}><Info  infoIcon={infoIcon}/>\r\n          {/* <Button onClick={this.handleInfo} variant=\"contained\"> <span className=\"dialog\"> Instructions </span></Button> */}\r\n          <Button onClick={this.handleCancel} variant=\"contained\"   style={{ marginLeft: '222px', marginRight: '8px'}} > <span className=\"dialog\"> Cancel </span></Button>\r\n            <Button onClick={this.handleOK} variant=\"contained\"> <span className=\"dialog\"> OK </span></Button></div>\r\n            \r\n          </DialogActions>\r\n          {this.state.showInfo &&\r\n            <Card> <CardContent>\r\n              <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n                <div>\r\n                To save files in your desired location:<ul><li>Microsofrft Edge:\r\n              <ul>\r\n                <li>Go to Options {this.state.showInfo && <img  alt=\"info\" src={optionsEdge}  />} </li>\r\n                <li>Click Downlods - Click Download settings</li>\r\n                <li>Turn on \"Ask where to save each file before downloading\" {this.state.showInfo && <img  alt=\"info\" src={sourceEdge}  />}\r\n              </li>\r\n               </ul>\r\n               </li><li>Google Chrome:\r\n               <ul>\r\n               <li>Go to Options {this.state.showInfo && <img  alt=\"info\" src={optionsChrome}  />} </li>\r\n                <li>Click Settings - Advanced - Downloads</li>\r\n                <li>Turn on \"Ask where to save each file before downloading\" {this.state.showInfo && <img  alt=\"info\" src={sourceChrome}  />}\r\n                </li>\r\n               </ul>\r\n              \r\n              </li></ul></div>\r\n             \r\n          </Typography>\r\n         \r\n        </CardContent></Card>}\r\n         \r\n        </Dialog>\r\n\r\n      </div >\r\n\r\n    )\r\n\r\n\r\n  }\r\n}","import React, { Component } from \"react\";\r\nimport { Info } from \"./Info\";\r\n\r\nexport class Collapsible extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      open: this.props.openCollapsible.open,\r\n      id: this.props.openCollapsible.id,\r\n    };\r\n    // console.log(this.state)\r\n  }\r\n  componentWillReceiveProps(nextProps) {\r\n    if (this.state.open !== nextProps.openCollapsible.open)\r\n      this.setState({\r\n        open: nextProps.openCollapsible.open,\r\n        id: nextProps.openCollapsible.id,\r\n      });\r\n  }\r\n\r\n  togglePanel = async (e) => {\r\n    if(this.props.enabled!==false)\r\n      {\r\n    await this.props.handleCollapsibleClick({\r\n      id: this.state.id,\r\n      open: this.state.open,\r\n    });\r\n    this.setState({ open: !this.state.open });\r\n  }\r\n  };\r\n  render() {\r\n    const arr = this.state.open ? (\r\n      <span style={{ fontSize: \"14px\", float: \"right\" }}>&#9650;</span>\r\n    ) : (\r\n      <span style={{ fontSize: \"14px\", float: \"right\" }}>&#9660;</span>\r\n    );\r\n    return (\r\n      <div >\r\n        <div onClick={this.togglePanel} className=\"header\">\r\n          {this.props.title}\r\n          {this.props.infoIcon !== undefined && <Info infoIcon={this.props.infoIcon} /> }\r\n             {arr}\r\n        </div>\r\n        {this.state.open ? (\r\n          <div className=\"content\">{this.props.children}</div>\r\n        ) : null}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\n// NOTE: USE FOR LOCAL DEVELOPMENT\r\nconst APP_SITE /*: string */ = \"https://test-tkdirectapi.ppi.ca\";\r\n\r\n// NOTE: USE FOR TESTING / PRODUCTION\r\n// const APP_SITE: string = \"\";\r\n\r\nconst NA_QS_URL /*: string */ = APP_SITE + \"/api/NA_QS\";\r\n\r\n// interface IClient {\r\n//   clientFileName: string;\r\n//   clientFileContent: string;\r\n//   clientJson: string;\r\n// }\r\n\r\n// interface IClients {\r\n//   id: string,\r\n//   clients: IClient[];\r\n// }\r\n\r\n// interface IClientProps {\r\n//   clientFileName: string;\r\n//   clientJson: string;\r\n//   clientIndex: number;\r\n//   setClientFileContent (index: number, fileContent: string): void;\r\n// }\r\n\r\nconst Client /*: React.FC<IClientProps> */ = (props) => {\r\n  const [encryptedJson, setEncryptedJson] = useState(/*<string>*/ \"\");\r\n  const [jsonEncrypted, setJsonEncrypted] = useState(/*<boolean>*/ false);\r\n  const [encryptedJsonAssigned, setEncryptedJsonAssigned] = useState(\r\n    /*<boolean>*/ false\r\n  );\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      var myHeaders = new Headers();\r\n      myHeaders.append(\"Accept\", \"application/json\");\r\n      myHeaders.append(\"Content-Type\", \"application/json\");\r\n\r\n      let obj = JSON.parse(props.clientJson);\r\n      let raw = JSON.stringify(obj);\r\n\r\n      let data = await fetch(NA_QS_URL, {\r\n        method: \"POST\",\r\n        headers: myHeaders,\r\n        body: raw,\r\n        redirect: \"follow\",\r\n      })\r\n        .then((response) => {\r\n          return response.text();\r\n        })\r\n        .catch((error) => {\r\n          return error;\r\n        });\r\n\r\n      if (typeof data === \"string\") {\r\n        setEncryptedJson(data);\r\n        setJsonEncrypted(true);\r\n      }\r\n    })();\r\n  }, [jsonEncrypted]);\r\n\r\n  if (jsonEncrypted === true && encryptedJsonAssigned === false) {\r\n    setEncryptedJsonAssigned(true);\r\n    props.setClientFileContent(\r\n      props.clientIndex,\r\n      encryptedJson.substr(1, encryptedJson.length - 2)\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        marginTop: 16,\r\n        marginLeft: 16,\r\n        display: \"none\",\r\n      }}\r\n    >\r\n      <div>{props.clientFileName}</div>\r\n      <div>{encryptedJson}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nfunction PasteClients() {\r\n  const [clients, setClients] = useState(\r\n    /*<IClients>*/ { id: \"\", clients: [] }\r\n  );\r\n\r\n  const [note, setNote] = useState(/*<string>*/ \"\");\r\n\r\n  const pasteClients = () => {\r\n    setNote(\"\");\r\n\r\n    navigator.clipboard.readText().then((clipText) => {\r\n      let parsedObject = null;\r\n\r\n      try {\r\n        parsedObject = JSON.parse(clipText);\r\n\r\n        if (parsedObject.id !== undefined) {\r\n          if (parsedObject.clients !== undefined) {\r\n            if (parsedObject.clientFileSpecs !== undefined) {\r\n              let id = parsedObject.id;\r\n\r\n              if (parsedObject.clients !== undefined) {\r\n                if (parsedObject.clientFileSpecs !== undefined) {\r\n                  let pastedClients /*: IClient[] */ = [];\r\n\r\n                  if (Array.isArray(parsedObject.clients) === true) {\r\n                    if (Array.isArray(parsedObject.clientFileSpecs) === true) {\r\n                      for (let i = 0; i < parsedObject.clients.length; i++) {\r\n                        let clientJson = JSON.stringify(\r\n                          parsedObject.clients[i]\r\n                        );\r\n                        let clientFileName =\r\n                          parsedObject.clientFileSpecs[i].clientFileName;\r\n\r\n                        let client /*: IClient*/ = {\r\n                          clientFileName: clientFileName,\r\n                          clientJson: clientJson,\r\n                          clientFileContent: \"\",\r\n                        };\r\n\r\n                        pastedClients.push(client);\r\n                      }\r\n                    }\r\n                  }\r\n\r\n                  // Set new clients.\r\n                  setClients({ id: id, clients: pastedClients });\r\n\r\n                  // Clear clipboard if we have any clients.\r\n                  if (parsedObject.clients.length > 0) {\r\n                    navigator.clipboard.writeText(\"<empty clipboard>\").then(\r\n                      function () {\r\n                        /* clipboard successfully set */\r\n                      },\r\n                      function () {\r\n                        /* clipboard write failed */\r\n                      }\r\n                    );\r\n\r\n                    setNote(`${parsedObject.clients.length} files created.`);\r\n                    return;\r\n                  } else {\r\n                    setNote(\"No files created.\");\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      } catch (e) {\r\n        setNote(\"No files created. Clipboard content not recognized.\");\r\n      }\r\n    });\r\n\r\n    setNote(\"No files created. Clipboard content not recognized.\");\r\n\r\n    setClients({ id: \"\", clients: [] });\r\n  };\r\n\r\n  function setClientFileContent(\r\n    index /*: number */,\r\n    clientFileContent /*: string*/\r\n  ) {\r\n    let newClients /*: IClient[]*/ = [];\r\n    let allClientFileContentsAssigned = true;\r\n\r\n    for (let i = 0; i < clients.clients.length; i++) {\r\n      let newClient /*: IClient*/ = {\r\n        clientFileName: clients.clients[i].clientFileName,\r\n        clientJson: clients.clients[i].clientJson,\r\n        clientFileContent: clients.clients[i].clientFileContent,\r\n      };\r\n\r\n      if (i === index) {\r\n        newClient.clientFileContent = clientFileContent;\r\n      }\r\n\r\n      if (newClient.clientFileContent === null) {\r\n        allClientFileContentsAssigned = false;\r\n      }\r\n\r\n      newClients.push(newClient);\r\n    }\r\n\r\n    if (allClientFileContentsAssigned === true) {\r\n      let clientFileSpecs = [];\r\n\r\n      for (let i = 0; i < clients.clients.length; i++) {\r\n        let clientFileSpec = {\r\n          clientFileName: newClients[i].clientFileName,\r\n          clientFileContent: newClients[i].clientFileContent,\r\n        };\r\n\r\n        clientFileSpecs.push(clientFileSpec);\r\n      }\r\n\r\n      let clientFileSpecsCollection = {\r\n        id: clients.id,\r\n        clientFileSpecs: clientFileSpecs,\r\n      };\r\n      let clientFileSpecsCollectionJson = JSON.stringify(\r\n        clientFileSpecsCollection,\r\n        null,\r\n        2\r\n      );\r\n\r\n      navigator.clipboard.writeText(clientFileSpecsCollectionJson).then(\r\n        function () {\r\n          /* clipboard successfully set */\r\n        },\r\n        function () {\r\n          /* clipboard write failed */\r\n        }\r\n      );\r\n    }\r\n\r\n    setClients({ id: clients.id, clients: newClients });\r\n  }\r\n\r\n  function clientComponents() /*: any*/ {\r\n    let clientComponents /*: any[]*/ = [];\r\n\r\n    for (let i = 0; i < clients.clients.length; i++) {\r\n      clientComponents.push(\r\n        <Client\r\n          key={i}\r\n          clientFileName={clients.clients[i].clientFileName}\r\n          clientJson={clients.clients[i].clientJson}\r\n          clientIndex={i}\r\n          setClientFileContent={setClientFileContent}\r\n        />\r\n      );\r\n    }\r\n\r\n    return <React.Fragment>{clientComponents}</React.Fragment>;\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div\r\n        style={{\r\n          marginTop: 16,\r\n        }}\r\n      >\r\n        <button\r\n          style={{\r\n            marginLeft: 16,\r\n          }}\r\n          onClick={pasteClients}\r\n        >\r\n          Create Exported Client Files\r\n        </button>\r\n      </div>\r\n\r\n      <div\r\n        style={{\r\n          marginTop: 16,\r\n          marginLeft: 16,\r\n        }}\r\n      >\r\n        {note}\r\n      </div>\r\n\r\n      <div\r\n        style={{\r\n          marginTop: 16,\r\n        }}\r\n      >\r\n        {clientComponents()}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PasteClients;\r\n","import { numFormat, cleanFormat, formatMoney2 } from \"../utils/helper\";\r\nimport { getAssetGridValues } from \"./assetGridProjections\";\r\nimport { setUIDataToAPI } from \"./dataExchange\";\r\nimport _ from \"lodash\";\r\n\r\nimport {\r\n  COLUMN_TITLES,\r\n  TITLES,\r\n  INCOMESOURCES,\r\n  MEMBER,\r\n} from \"../definitions/generalDefinitions\";\r\nimport {\r\n  getInfoExcelcapFund,\r\n  getInfoExcelAllAfterTax,\r\n  getInfoBOYEOY\r\n} from \"../definitions/infoIconsDefinitions\";\r\n\r\nimport {\r\n  ASSETS,\r\n  ASSET_TAX,\r\n  CONTROLTITLE,\r\n  TOTALS,\r\n  QUOTE_SPOUSE,\r\n  QUOTE_CLIENT,\r\n  ASSET_YEAR_TODAY,\r\n  FIRST_BENEFICIARY_ID\r\n} from \"../definitions/generalDefinitions\";\r\n\r\nimport {\r\n  ASSET_TAX_TYPE_PRINCIPAL_RES,\r\n  ASSET_TAX_TYPE_REAL_ESTATE,\r\n  ASSET_TAX_TYPE_STOCKS,\r\n  ASSET_TAX_TYPE_SMALL_BUS,\r\n  ASSET_TAX_TYPE_RRSP,\r\n  ASSET_TAX_TYPE_INTEREST,\r\n  ASSET_TAX_TYPE_OTHER,\r\n  ASSET_TAX_TYPE_COUNT,\r\n} from \"../definitions/outputDefinitionsEP\";\r\n\r\nconst COLUMN_YEAR = 0;\r\nconst COLUMN_AGE = 1;\r\nconst COLUMN_INCOME_NEED = 2;\r\nconst COLUMN_CPP = 3;\r\nconst COLUMN_SURVIVOR_INCOME = 4;\r\nconst COLUMN_OTHER_INCOME = 5;\r\nconst COLUMN_TOTAL_INCOME = 6;\r\nconst COLUMN_TOTAL_ASSET_LIAB = 7;\r\nconst COLUMN_SHORTFALL = 8;\r\nconst COLUMN_INSURANCE_NEED = 9;\r\nconst COLUMN_FUND = 10;\r\n\r\n// INA\r\n\r\nfunction INAFullSpreadsheetData(\r\n  cols,\r\n  insNeed,\r\n  dataInput,\r\n  dataPCV,\r\n  //Spouse,\r\n  survivors,\r\n  dataNeed,\r\n  dataGov,\r\n  dataShort,\r\n  inflation,\r\n  invRate,\r\n  afterTaxCPP_DB,\r\n  language\r\n) {\r\n\r\n\r\n  let dataColumns = [];\r\n  let dataColumn = [];\r\n  let noYrs = dataNeed.length;\r\n  const tempDate = new Date();\r\n  const year = tempDate.getFullYear();\r\n\r\n  let dataColumnCapFund = [];\r\n\r\n  let colNo;\r\n  let yr;\r\n  let survivorsIncome = 0;\r\n  let surivorsSalaryProjection = getSurivorsSalaryProjection(\r\n    dataInput,\r\n    noYrs,\r\n    survivors,\r\n    inflation\r\n  );\r\n  let surivorsCashFlowsFromAllSources=dataPCV;\r\n  let survivorsNonGovNonAssetLiabIncomeProjection = getSurvivorsNonGovNonAssetLiabIncomeProjections(\r\n    dataInput,\r\n    noYrs,\r\n    //Spouse.avgTaxRate,\r\n    survivors,\r\n    inflation\r\n  );\r\n  //const formatFr = language === \"fr\" ? true : false;\r\n  const decimalChar = language === \"en\" ? \".\" : \",\";\r\n  const thousands = language === \"en\" ? \",\" : \" \";\r\n  const capFundBase = cleanFormat(insNeed, language); //+parseFloat(CPP_DB)\r\n\r\n  //console.log(Spouse);\r\n\r\n  // console.log(surivorsSalaryProjection,survivorsNonGovNonAssetLiabIncomeProjection)\r\n  // for cap fund use first survivor tax rate   \r\n  let avgTaxRate=0;\r\n  let beneficiaryAge=0;\r\n  if(survivors.length>0)\r\n  {\r\n    avgTaxRate=survivors.filter((item)=> { return item.id===FIRST_BENEFICIARY_ID})[0].avgTaxRate;\r\n    beneficiaryAge=survivors.filter((item)=> { return item.id===FIRST_BENEFICIARY_ID})[0].Age;\r\n  }\r\n   for (colNo = 0; colNo < cols; colNo++) {\r\n    dataColumn = [];\r\n    for (yr = 0; yr < noYrs; yr++) {\r\n      if (yr === 0)\r\n        dataColumnCapFund[yr] = Math.max(\r\n          0,\r\n          (capFundBase -\r\n            cleanFormat(dataShort[yr] > 0 ? dataShort[yr] : 0, language)) *\r\n            Math.pow(1 + (invRate / 100) * (1 - avgTaxRate / 100), 1)\r\n        );\r\n      else\r\n        dataColumnCapFund[yr] = Math.max(\r\n          0,\r\n          (dataColumnCapFund[yr - 1] -\r\n            cleanFormat(dataShort[yr] > 0 ? dataShort[yr] : 0, language)) *\r\n            Math.pow(1 + (invRate / 100) * (1 - avgTaxRate / 100), 1)\r\n        );\r\n\r\n      if (colNo === COLUMN_YEAR) dataColumn.push(year + yr);\r\n      else if (colNo === COLUMN_AGE) dataColumn.push(beneficiaryAge + yr);\r\n      else if (colNo === COLUMN_INCOME_NEED)\r\n        dataColumn.push(formatMoney2(-dataNeed[yr], 0, language, false));\r\n      //numFormat(dataNeed[yr],  language===\"en\"?false:true, 2, language===\"en\"?\",\":\" \"));\r\n      else if (colNo === COLUMN_CPP)\r\n        dataColumn.push(formatMoney2(dataGov[yr], 0, language, false));\r\n      //numFormat(dataGov[yr],   language===\"en\"?false:true, 2,  language===\"en\"?\",\":\" \"));\r\n      else if (colNo === COLUMN_SURVIVOR_INCOME) {\r\n        survivorsIncome = surivorsSalaryProjection[yr];\r\n        dataColumn.push(formatMoney2(survivorsIncome, 0, language, false)); //numFormat(spouseIncome,   language===\"en\"?false:true, 2, language===\"en\"?\",\":\" \"));\r\n      } else if (colNo === COLUMN_OTHER_INCOME) {\r\n        let otherIncome = ( //Math.round((dataPCV[yr] - surivorsSalaryProjection[yr]) * 100) / 100\r\n          Math.round(\r\n            (parseFloat(survivorsNonGovNonAssetLiabIncomeProjection[yr]) -\r\n            parseFloat(surivorsSalaryProjection[yr])) *\r\n              100\r\n          ) / 100\r\n        ).toFixed(0);\r\n        if (Math.abs(otherIncome) <= 1) otherIncome = 0;\r\n        dataColumn.push(formatMoney2(otherIncome, 0, language, false)); //numFormat(otherIncome,   language===\"en\"?false:true, 2, language===\"en\"?\",\":\" \"));\r\n      } else if (colNo === COLUMN_TOTAL_INCOME)\r\n        dataColumn.push(\r\n          formatMoney2(\r\n            parseFloat(survivorsNonGovNonAssetLiabIncomeProjection[yr]) + parseFloat(dataGov[yr]),\r\n            0,\r\n            language,\r\n            false\r\n          )\r\n        );\r\n      //numFormat(dataPCV[yr] + dataGov[yr],   language===\"en\"?false:true, 2, language===\"en\"?\",\":\" \"));\r\n      else if (colNo === COLUMN_TOTAL_ASSET_LIAB)\r\n        dataColumn.push(\r\n          formatMoney2(\r\n            Math.abs(\r\n              dataPCV[yr] - (parseFloat(survivorsNonGovNonAssetLiabIncomeProjection[yr]))\r\n            ) > 1\r\n              ? dataPCV[yr] - (parseFloat(survivorsNonGovNonAssetLiabIncomeProjection[yr]))\r\n              : 0,\r\n            0,\r\n            language,\r\n            false\r\n          )\r\n        ); //numFormat(dataPCV[yr] + dataGov[yr],   language===\"en\"?false:true, 2, language===\"en\"?\",\":\" \"));\r\n      if (colNo === COLUMN_SHORTFALL)\r\n        dataColumn.push(\r\n          formatMoney2(\r\n            dataShort[yr] > 0 ? dataShort[yr] : 0,\r\n            0,\r\n            language,\r\n            false\r\n          )\r\n          // numFormat(dataShort[yr] > 0 ? dataShort[yr] : 0, false,   language===\"en\"?false:true, 2, language===\"en\"?\",\":\" \")\r\n        );\r\n      else if (colNo === COLUMN_INSURANCE_NEED)\r\n        dataColumn.push(\r\n          yr === 0 ? formatMoney2(capFundBase, 0, language, false) : 0\r\n        );\r\n      //numFormat(insNeed, false,   language===\"en\"?false:true, 2, language===\"en\"?\",\":\" \") : 0);\r\n      else if (colNo === COLUMN_FUND)\r\n        dataColumn.push(\r\n          formatMoney2(dataColumnCapFund[yr], 0, language, false)\r\n        ); //numFormat(0, false,   language===\"en\"?false:true, 2, language===\"en\"?\",\":\" \"));\r\n    }\r\n    \r\n    // add CPP DB to other from CPP do this above before formatting\r\n    /* if (colNo === COLUMN_CPP)\r\n      dataColumn[0] = formatMoney2(parseFloat(cleanformat(dataColumn[0])) - parseFloat(afterTaxCPP_DB));\r\n    \r\n    if (colNo === COLUMN_OTHER_INCOME)\r\n      dataColumn[0] = formatMoney2(parseFloat(cleanformat(ddataColumn[0])) - parseFloat(afterTaxCPP_DB)); */\r\n\r\n    dataColumns.push(dataColumn);\r\n\r\n    dataColumn = [];\r\n  }\r\n  return dataColumns;\r\n}\r\n\r\nfunction getSurivorsSalaryProjection(\r\n  sources,\r\n  noYrs,\r\n  survivors,\r\n  inflation\r\n) {\r\n  let totalIncome = Array(noYrs).fill(0);\r\n  let yr;\r\n  // console.log(sources)\r\n\r\n  let avgTaxRate=0;\r\n  sources.forEach((element) => {\r\n    if (element.sourceTypeKey === INCOMESOURCES.SURVIVORS_INCOME.Key) {\r\n      try {\r\n        avgTaxRate=survivors.filter((item)=> { return item.id===element.ownerID})[0].avgTaxRate\r\n      } catch (error) {\r\n        \r\n      }\r\n      /* console.log(element,survivors,avgTaxRate) */\r\n      for (yr = 0; yr < noYrs; yr++) {\r\n        totalIncome[yr] +=\r\n          yr >= element.startYear &&\r\n          yr < parseInt(element.startYear) + parseInt(element.duration)\r\n            ? parseFloat(element.amount) *\r\n              (1 - avgTaxRate / 100) *\r\n              Math.pow(1 + inflation / 100, yr)\r\n            : 0;\r\n      }\r\n    }\r\n  });\r\n  for (yr = 0; yr < noYrs; yr++)\r\n    totalIncome[yr] = (Math.round(totalIncome[yr] * 100) / 100).toFixed(0);\r\n\r\n  return totalIncome;\r\n}\r\n\r\nfunction getSurvivorsNonGovNonAssetLiabIncomeProjections(\r\n  sources,\r\n  noYrs,\r\n  //avgTaxRate,\r\n  survivors,\r\n  inflation\r\n) {\r\n  let totalIncome = Array(noYrs).fill(0);\r\n  let yr;\r\n  // console.log(sources)\r\n\r\n  let avgTaxRate=0;\r\n  sources.forEach((element) => {\r\n    if (\r\n      !(\r\n        element.sourceTypeKey === INCOMESOURCES.GOV_DEATH_BENEFIT.Key ||\r\n        element.sourceTypeKey === INCOMESOURCES.GOV_ORPHANS_BENEFIT.Key ||\r\n        element.sourceTypeKey === INCOMESOURCES.GOV_SURVIVORS_PENSION.Key\r\n      )\r\n    ) {\r\n      // console.log(element.sourceTypeKey)\r\n      try {\r\n        avgTaxRate=survivors.filter((item)=> { return item.id===element.ownerID})[0].avgTaxRate\r\n      } catch (error) {\r\n        \r\n      }\r\n      for (yr = 0; yr < noYrs; yr++) {\r\n        totalIncome[yr] +=\r\n          yr >= element.startYear &&\r\n          yr < parseInt(element.startYear) + parseInt(element.duration)\r\n            ? parseFloat(element.amount) *\r\n              (1 - avgTaxRate / 100) *\r\n              Math.pow(1 + inflation / 100, yr)\r\n            : 0;\r\n      }\r\n    }\r\n  });\r\n  for (yr = 0; yr < noYrs; yr++)\r\n    totalIncome[yr] = (Math.round(totalIncome[yr] * 100) / 100).toFixed(0);\r\n\r\n  return totalIncome;\r\n}\r\n\r\n// INA spreadsheet\r\nexport function getINAGridData(\r\n  insNeed,\r\n  insNeedRet,\r\n  insNeedLE,\r\n  dataPCV,\r\n // Spouse,\r\n  Survivors,\r\n  dataNeed,\r\n  dataGov,\r\n  dataShort,\r\n  inflation,\r\n  language,\r\n  invRate,\r\n  Sources,\r\n  afterTaxCPP_DB\r\n) {\r\n  let gridColumnAligns;\r\n  let dataTitle;\r\n  let dataColHeaders;\r\n  let dataColumns;\r\n  let excelDataInfoSection;\r\n  let gridIcons;\r\n\r\n  {\r\n    // spreadsheet\r\n    dataTitle = TITLES[language].appletINA;\r\n    dataColHeaders = INAFullSpreadsheetHeaders(language);\r\n    dataColumns = INAFullSpreadsheetData(\r\n      dataColHeaders.length,\r\n      insNeed,\r\n      Sources,\r\n      dataPCV,\r\n  //    Spouse,\r\n      Survivors,\r\n      dataNeed,\r\n      dataGov,\r\n      dataShort,\r\n      inflation,\r\n      invRate,\r\n      afterTaxCPP_DB,\r\n      language\r\n    );\r\n    gridColumnAligns = new Array(dataColHeaders.length).fill(2);\r\n\r\n    gridIcons = new Array(dataColHeaders.length);\r\n    gridIcons[COLUMN_FUND] = getInfoExcelcapFund(language);\r\n    gridIcons[COLUMN_YEAR] = getInfoExcelAllAfterTax(language);\r\n    \r\n    const singleFamily=Survivors.filter(client => client.memberKey ===MEMBER.SPOUSE.Key).length===0\r\n\r\n\r\n    const decimalChar = language === \"en\" ? \".\" : \",\";\r\n    const thousands = language === \"en\" ? \",\" : \" \";\r\n\r\n    if(singleFamily) \r\n    {\r\n\r\n      excelDataInfoSection = [\r\n        [\r\n          COLUMN_TITLES[language].intRate,\r\n          COLUMN_TITLES[language].infRate,\r\n          COLUMN_TITLES[language].surplusCapital,\r\n          COLUMN_TITLES[language].blank,\r\n          COLUMN_TITLES[language].additionalCapitalReq,\r\n          COLUMN_TITLES[language].survivorProtection,\r\n          \r\n        ],\r\n        [\r\n          invRate.toString() + \"%\",\r\n          inflation.toString() + \"%\",\r\n          parseFloat(afterTaxCPP_DB),\r\n          \"\",\r\n          \"\",\r\n          insNeedRet,\r\n        ],\r\n      ];\r\n\r\n    } else\r\n    {\r\n\r\n    excelDataInfoSection = [\r\n      [\r\n        COLUMN_TITLES[language].intRate,\r\n        COLUMN_TITLES[language].infRate,\r\n        COLUMN_TITLES[language].surplusCapital,\r\n        COLUMN_TITLES[language].blank,\r\n        COLUMN_TITLES[language].additionalCapitalReq,\r\n        COLUMN_TITLES[language].survivor65,\r\n        COLUMN_TITLES[language].survivorLE,\r\n      ],\r\n      [\r\n        invRate.toString() + \"%\",\r\n        inflation.toString() + \"%\",\r\n        parseFloat(afterTaxCPP_DB),\r\n        \"\",\r\n        \"\",\r\n        insNeedRet,\r\n        insNeedLE,\r\n      ],\r\n    ];\r\n  }\r\n  }\r\n  return {\r\n    gridTitle: dataTitle,\r\n    dataColTitles: dataColHeaders,\r\n    dataProjection: dataColumns,\r\n    gridColumnsDataExcelInfoSection: excelDataInfoSection,\r\n    gridColumnAligns: gridColumnAligns,\r\n    gridIcons: gridIcons,\r\n  };\r\n}\r\n\r\nfunction INAFullSpreadsheetHeaders(lang) {\r\n  let headers = [];\r\n  let i;\r\n\r\n  for (i = 0; i < COLUMN_TITLES.INA_SHEET_HEADERS[lang].Full.length; ++i) {\r\n    headers.push(COLUMN_TITLES.INA_SHEET_HEADERS[lang].Full[i]);\r\n  }\r\n\r\n  return headers;\r\n}\r\n\r\n// ESTATE PROTECTION\r\nasync function EPFullSpreadsheetData(\r\n  cols,\r\n  noProjectYrs, // + 1,\r\n  input\r\n) {\r\n  let noYrs = noProjectYrs;\r\n  const language = input.Presentations[0].language;\r\n // const formatFr = language === \"fr\" ? true : false;\r\n  const decimalChar = language === \"en\" ? \".\" : \",\";\r\n  const thousands = language === \"en\" ? \",\" : \" \";\r\n\r\n  let count = 0;\r\n  let dataColumns = new Array(cols).fill(0).map(() => new Array(noYrs).fill(0));\r\n\r\n  const dataNA = await setUIDataToAPI(input);\r\n\r\n  const assetsLength = input.Assets.length;\r\n\r\n  for (let i = 0; i < assetsLength; i++) {\r\n    const element = input.Assets[i];\r\n    const data = await getAssetGridValues(dataNA, element, language, true);\r\n    count += 1;\r\n    \r\n    for (let col = 0; col < 2; col++) {\r\n      for (let yr = 0; yr < noYrs; yr++) {\r\n        dataColumns[col][yr] = data.dataProjection[col][yr];\r\n        \r\n      }\r\n    }\r\n    // year 0 is today, change it\r\n    // dataColumns[0][0]=ASSET_YEAR_TODAY[language].today;\r\n    // dont add up year and age\r\n    for (let col = 2; col < Math.min(cols, data.dataProjection.length); col++) {\r\n      for (let yr = 0; yr < noYrs; yr++) {\r\n        dataColumns[col][yr] =\r\n          parseInt(cleanFormat(dataColumns[col][yr], language)) +\r\n          parseInt(cleanFormat(data.dataProjection[col][yr], language));\r\n      }\r\n    }\r\n  //  console.log(dataColumns)\r\n  }\r\n\r\n  \r\n  for (let col = 0; col < cols; col++) {\r\n    for (let yr = 0; yr < noYrs; yr++) {\r\n      if (yr === 0)\r\n        dataColumns[2][yr] =\r\n          parseInt(dataColumns[10][yr]) -\r\n          parseInt(dataColumns[4][yr]) -\r\n          parseInt(dataColumns[5][yr]) +\r\n          parseInt(dataColumns[6][yr]) +\r\n          parseInt(dataColumns[7][yr]);\r\n      else dataColumns[2][yr] = dataColumns[10][yr - 1];\r\n\r\n      \r\n      \r\n      dataColumns[11][yr] =\r\n        Math.round(\r\n          10000 *\r\n            (-1 +\r\n              (parseInt(dataColumns[10][yr]) + parseInt(dataColumns[6][yr])) /\r\n                parseInt(dataColumns[2][yr]))\r\n        ).toFixed(2) /\r\n          100 +\r\n        \" %\";\r\n    }\r\n  }\r\n  \r\n  for (let col = 0; col < cols; col++) {\r\n    if (col !== 11 && col !== 1) {\r\n      for (let yr = 0; yr < noYrs; yr++) {\r\n        dataColumns[col][yr] = formatMoney2(\r\n          dataColumns[col][yr],\r\n          0,\r\n          language,\r\n          false\r\n        );\r\n      }\r\n  \r\n    } else\r\n      for (let yr = 0; yr < noYrs; yr++) {\r\n        if (col !== 1 && isNaN(dataColumns[col][yr])) dataColumns[col][yr] = 0;\r\n      }\r\n  \r\n  }\r\n  // year 0 is today, change it\r\n  dataColumns[0][0] = ASSET_YEAR_TODAY[language].today;\r\n  return dataColumns;\r\n}\r\n\r\n// EP spreadsheet\r\nexport async function getEPGridData(noProjectYrs, input) {\r\n  let gridColumnAligns;\r\n  let dataTitle;\r\n  let dataColHeaders;\r\n  let dataColumns;\r\n  let excelDataInfoSection;\r\n  let gridIcons;\r\n\r\n  // spreadsheet\r\n  const language = input.Presentations[0].language;\r\n\r\n  dataTitle = TITLES[language].appletEP;\r\n  dataColHeaders = EPFullSpreadsheetHeaders(language);\r\n\r\n  dataColumns = await EPFullSpreadsheetData(\r\n    dataColHeaders.length,\r\n    noProjectYrs, // + 1,\r\n    input\r\n  );\r\n  gridColumnAligns = new Array(dataColHeaders.length).fill(2);\r\n  gridIcons = new Array(dataColHeaders.length);\r\n  dataColHeaders.forEach((item) => {\r\n    if (item === COLUMN_TITLES.[language].EOYBalance)\r\n      gridIcons[2] = getInfoBOYEOY(  // boy\r\n        language\r\n      );\r\n      gridIcons[dataColHeaders.length-3]=gridIcons[2] //eoy\r\n  });\r\n  const decimalChar = language === \"en\" ? \".\" : \",\";\r\n  const thousands = language === \"en\" ? \",\" : \" \";\r\n\r\n  return {\r\n    gridTitle: dataTitle,\r\n    dataColTitles: dataColHeaders,\r\n    dataProjection: dataColumns,\r\n    gridIcons: gridIcons,\r\n  };\r\n}\r\n\r\nfunction EPFullSpreadsheetHeaders(lang) {\r\n  let headers = [];\r\n  let i;\r\n\r\n  for (i = 0; i < COLUMN_TITLES.EP_SHEET_HEADERS[lang].Full.length; ++i) {\r\n    headers.push(COLUMN_TITLES.EP_SHEET_HEADERS[lang].Full[i]);\r\n  }\r\n\r\n  return headers;\r\n}\r\n\r\nexport function getAssetLiabProjections(props) {\r\n  // add liab and tax liab\r\n  const input = props.dataInput;\r\n  const assetProjections = props.assetProjections;\r\n  //console.log(assetProjections)\r\n  const lang = input.Presentations[0].language;\r\n // const formatFr = lang === \"fr\" ? true : false;\r\n  const clients = input.Clients;\r\n  const startAge =\r\n    clients.length > 1\r\n      ? Math.min(clients[QUOTE_SPOUSE].Age, clients[QUOTE_CLIENT].Age)\r\n      : clients[QUOTE_CLIENT].Age;\r\n\r\n  const LE3 = parseInt(props.LE) + 3;\r\n  let EstateLiabsByType = Array(ASSET_TAX_TYPE_COUNT).fill(0);\r\n  let EstateLiabsByTypeLE3 = Array(ASSET_TAX_TYPE_COUNT).fill(0);\r\n  let proj = [];\r\n  let dataEstateLiability = Array(100 - startAge + 1).fill(0);\r\n\r\n  //const dataNA = setUIDataToAPI(props.dataInput);\r\n\r\n  let tmpGrids = [];\r\n  let AssetProjectionsGrid = [];\r\n  let taxLiabCol = 0;\r\n  let FMVCol = 0;\r\n  let EstateLiabsByTypeTotal = 0;\r\n  let EstateLiabsByTypeLE3Total = 0;\r\n  let EstateLiabsByTypeGrowth = [];\r\n  let EstateLiabsByTypeInitialAmt = [];\r\n  EstateLiabsByTypeGrowth = Array(ASSET_TAX_TYPE_COUNT).fill(0);\r\n  EstateLiabsByTypeInitialAmt = Array(ASSET_TAX_TYPE_COUNT).fill(0);\r\n  // add all assets\r\n\r\n  if (input.Assets.length === 0) {\r\n    proj.values = Array(100).fill(0);\r\n    const grid = assetProjections[0].grid;\r\n    tmpGrids.push(grid);\r\n  } else {\r\n    input.Assets.forEach((element) => {\r\n      proj.values = Array(100).fill(0);\r\n      //console.log(assetProjections);\r\n      //console.log(assetProjections[element.id - 1]);\r\n\r\n      const grid = assetProjections[element.id - 1].grid;\r\n      tmpGrids.push(grid);\r\n      FMVCol = 2;\r\n      let fmv = [];\r\n      for (let i = 0; i < 100 - startAge; i++) {\r\n        fmv.push(parseFloat(cleanFormat(grid.dataProjection[FMVCol][i])));\r\n      }\r\n\r\n      if (element.assetTaxTypeKey !== ASSET_TAX.NON_TAXABLE.Key) {\r\n        if (element.assetTypeKey === ASSETS.PERSONAL_RESIDENCE.Key) {\r\n          taxLiabCol = grid.dataProjection.length - 1;\r\n          EstateLiabsByType[ASSET_TAX_TYPE_PRINCIPAL_RES] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][0], lang)\r\n          );\r\n          EstateLiabsByTypeLE3[ASSET_TAX_TYPE_PRINCIPAL_RES] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][LE3], lang)\r\n          );\r\n          addAssetToProjections(\r\n            proj,\r\n            fmv,\r\n            ASSETS.PERSONAL_RESIDENCE.value[lang],\r\n            ASSETS.PERSONAL_RESIDENCE.colour\r\n          );\r\n        } else if (element.assetTypeKey === ASSETS.REAL_ESTATE.Key) {\r\n          taxLiabCol = grid.dataProjection.length - 1;\r\n          FMVCol = 2;\r\n\r\n          EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_REAL_ESTATE] +=\r\n            (parseFloat(cleanFormat(element.currValue, lang)) *\r\n              element.growth) /\r\n            100;\r\n          EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_REAL_ESTATE] += parseFloat(\r\n            cleanFormat(element.currValue, lang)\r\n          );\r\n\r\n          EstateLiabsByType[ASSET_TAX_TYPE_REAL_ESTATE] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][0], lang)\r\n          );\r\n\r\n          EstateLiabsByTypeLE3[ASSET_TAX_TYPE_REAL_ESTATE] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][LE3], lang)\r\n          );\r\n          addAssetToProjections(\r\n            proj,\r\n            fmv,\r\n            ASSETS.REAL_ESTATE.value[lang],\r\n            ASSETS.REAL_ESTATE.colour\r\n          );\r\n        } else if (element.assetTypeKey === ASSETS.STOCKS_BONDS.Key) {\r\n          taxLiabCol = grid.dataProjection.length - 1;\r\n          FMVCol = 2;\r\n          EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_STOCKS] +=\r\n            (parseFloat(cleanFormat(element.currValue, lang)) *\r\n              element.growth) /\r\n            100;\r\n          EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_STOCKS] += parseFloat(\r\n            cleanFormat(element.currValue, lang)\r\n          );\r\n          EstateLiabsByType[ASSET_TAX_TYPE_STOCKS] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][0], lang)\r\n          );\r\n          EstateLiabsByTypeLE3[ASSET_TAX_TYPE_STOCKS] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][LE3], lang)\r\n          );\r\n          addAssetToProjections(\r\n            proj,\r\n            fmv,\r\n            ASSETS.STOCKS_BONDS.value[lang],\r\n            ASSETS.STOCKS_BONDS.colour\r\n          );\r\n        } else if (element.assetTypeKey === ASSETS.SMALL_BUSINESS_SHARES.Key) {\r\n          taxLiabCol = grid.dataProjection.length - 1;\r\n          FMVCol = 2;\r\n          EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_SMALL_BUS] +=\r\n            (parseFloat(cleanFormat(element.currValue, lang)) *\r\n              element.growth) /\r\n            100;\r\n          EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_SMALL_BUS] += parseFloat(\r\n            cleanFormat(element.currValue, lang)\r\n          );\r\n          EstateLiabsByType[ASSET_TAX_TYPE_SMALL_BUS] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][0], lang)\r\n          );\r\n          EstateLiabsByTypeLE3[ASSET_TAX_TYPE_SMALL_BUS] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][LE3], lang)\r\n          );\r\n          addAssetToProjections(\r\n            proj,\r\n            fmv,\r\n            ASSETS.SMALL_BUSINESS_SHARES.value[lang],\r\n            ASSETS.SMALL_BUSINESS_SHARES.colour\r\n          );\r\n        } else if (element.assetTypeKey === ASSETS.RRSP_RRIF.Key) {\r\n          taxLiabCol = grid.dataProjection.length - 1;\r\n          FMVCol = 2;\r\n          EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_RRSP] +=\r\n            (parseFloat(cleanFormat(element.currValue, lang)) *\r\n              element.growth) /\r\n            100;\r\n          EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_RRSP] += parseFloat(\r\n            cleanFormat(element.currValue, lang)\r\n          );\r\n          EstateLiabsByType[ASSET_TAX_TYPE_RRSP] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][0], lang)\r\n          );\r\n          EstateLiabsByTypeLE3[ASSET_TAX_TYPE_RRSP] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][LE3], lang)\r\n          );\r\n          addAssetToProjections(\r\n            proj,\r\n            fmv,\r\n            ASSETS.RRSP_RRIF.value[lang],\r\n            ASSETS.RRSP_RRIF.colour\r\n          );\r\n        } else if (element.assetTypeKey === ASSETS.INTEREST_BEARING.Key) {\r\n          taxLiabCol = grid.dataProjection.length - 1;\r\n          FMVCol = 2;\r\n\r\n          EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_INTEREST] +=\r\n            (parseFloat(cleanFormat(element.currValue, lang)) *\r\n              element.growth) /\r\n            100;\r\n          EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_INTEREST] += parseFloat(\r\n            cleanFormat(element.currValue, lang)\r\n          );\r\n          EstateLiabsByType[ASSET_TAX_TYPE_INTEREST] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][0], lang)\r\n          );\r\n          EstateLiabsByTypeLE3[ASSET_TAX_TYPE_INTEREST] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][LE3], lang)\r\n          );\r\n          addAssetToProjections(\r\n            proj,\r\n            fmv,\r\n            ASSETS.INTEREST_BEARING.value[lang],\r\n            ASSETS.INTEREST_BEARING.colour\r\n          );\r\n        }\r\n        // take other, bundle taxable together\r\n        else if (element.assetTypeKey === ASSETS.OTHER_ASSETS.Key) {\r\n          taxLiabCol = grid.dataProjection.length - 1;\r\n          FMVCol = 2;\r\n          EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_OTHER] +=\r\n            (parseFloat(cleanFormat(element.currValue, lang)) *\r\n              element.growth) /\r\n            100;\r\n          EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_OTHER] += parseFloat(\r\n            cleanFormat(element.currValue, lang)\r\n          );\r\n          EstateLiabsByType[ASSET_TAX_TYPE_OTHER] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][0], lang)\r\n          );\r\n          EstateLiabsByTypeLE3[ASSET_TAX_TYPE_OTHER] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][LE3], lang)\r\n          );\r\n          addAssetToProjections(\r\n            proj,\r\n            fmv,\r\n            ASSETS.OTHER_ASSETS.value[lang],\r\n            ASSETS.OTHER_ASSETS.colour\r\n          );\r\n        }\r\n        // bundle non-taxable together\r\n        /* else if (element.assetTypeKey === ASSETS.CASH.Key) {\r\n      FMVCol = 2;\r\n      addAssetToProjections(\r\n        proj,\r\n        fmv,\r\n        ASSET_TAX.NON_TAXABLE.value[lang],\r\n        ASSETS.CASH.colour\r\n      );\r\n    } else if (element.assetTypeKey === ASSETS.LIFE_INSURANCE.Key) {\r\n      FMVCol = 2;\r\n      addAssetToProjections(\r\n        proj,\r\n        fmv,\r\n        ASSET_TAX.NON_TAXABLE.value[lang],\r\n        ASSETS.LIFE_INSURANCE.colour\r\n      );\r\n    } else if (\r\n      element.assetTypeKey === ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.Key\r\n    ) {\r\n      FMVCol = 2;\r\n      addAssetToProjections(\r\n        proj,\r\n        fmv,\r\n        ASSET_TAX.NON_TAXABLE.value[lang],\r\n        ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.colour\r\n      );\r\n    } */\r\n        /* else {\r\n      taxLiabCol = grid.dataProjection.length - 1;\r\n      FMVCol = 2;\r\n     \r\n      EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_OTHER] +=  parseFloat(cleanFormat(element.currValue, lang))*element.growth/100;\r\n      EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_OTHER]+=parseFloat(cleanFormat(element.currValue, lang));\r\n      EstateLiabsByType[ASSET_TAX_TYPE_OTHER] += parseFloat(\r\n        cleanFormat(grid.dataProjection[taxLiabCol][0], lang)\r\n      );\r\n      EstateLiabsByTypeLE3[ASSET_TAX_TYPE_OTHER] += parseFloat(\r\n        cleanFormat(grid.dataProjection[taxLiabCol][LE3], lang)\r\n      );\r\n      addAssetToProjections(\r\n        proj,\r\n        fmv,\r\n        ASSETS.OTHER_BEARING.value[lang],\r\n        ASSETS.OTHER_BEARING.colour\r\n      );\r\n    }\r\n */\r\n        EstateLiabsByTypeTotal += parseFloat(\r\n          cleanFormat(grid.dataProjection[taxLiabCol][0], lang)\r\n        );\r\n        EstateLiabsByTypeLE3Total += parseFloat(\r\n          cleanFormat(grid.dataProjection[taxLiabCol][LE3], lang)\r\n        );\r\n        // sum all for total tax liab\r\n        if (proj.length > 0) {\r\n          for (let i = 0; i < grid.dataProjection[0].length - 1; i++) {\r\n            if (grid.dataProjection[taxLiabCol][i] !== undefined)\r\n              dataEstateLiability[i] += parseFloat(\r\n                cleanFormat(grid.dataProjection[taxLiabCol][i], lang)\r\n              );\r\n          }\r\n          dataEstateLiability[100 - startAge] =\r\n            dataEstateLiability[100 - startAge - 1];\r\n        }\r\n      }\r\n    });\r\n  }\r\n  proj.push({\r\n    name: TOTALS.TAX_LIAB.value[lang], // TOTALS.ESTATE_LIAB.value[lang],\r\n    colour: TOTALS.ESTATE_LIAB.colour,\r\n    values: dataEstateLiability,\r\n  });\r\n\r\n  const rateRS =\r\n    EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_REAL_ESTATE] === 0\r\n      ? 0\r\n      : (100 * EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_REAL_ESTATE]) /\r\n        EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_REAL_ESTATE];\r\n  const rateS =\r\n    EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_STOCKS] === 0\r\n      ? 0\r\n      : (100 * EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_STOCKS]) /\r\n        EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_STOCKS];\r\n  const rateSB =\r\n    EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_SMALL_BUS] === 0\r\n      ? 0\r\n      : (100 * EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_SMALL_BUS]) /\r\n        EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_SMALL_BUS];\r\n  const rateRR =\r\n    EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_RRSP] === 0\r\n      ? 0\r\n      : (100 * EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_RRSP]) /\r\n        EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_RRSP];\r\n  const rateI =\r\n    EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_INTEREST] === 0\r\n      ? 0\r\n      : (100 * EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_INTEREST]) /\r\n        EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_INTEREST];\r\n  const rateO =\r\n    EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_OTHER] === 0\r\n      ? 0\r\n      : (100 * EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_OTHER]) /\r\n        EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_OTHER];\r\n\r\n  EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_REAL_ESTATE] =\r\n    lang === \"en\"\r\n      ? numFormat(rateRS, false, 3)\r\n      : numFormat(rateRS, false, 3).replace(\".\", \",\");\r\n  EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_STOCKS] =\r\n    lang === \"en\"\r\n      ? numFormat(rateS, false, 3)\r\n      : numFormat(rateS, false, 3).replace(\".\", \",\");\r\n  EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_SMALL_BUS] =\r\n    lang === \"en\"\r\n      ? numFormat(rateSB, false, 3)\r\n      : numFormat(rateSB, false, 3).replace(\".\", \",\");\r\n  EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_RRSP] =\r\n    lang === \"en\"\r\n      ? numFormat(rateRR, false, 3)\r\n      : numFormat(rateRR, false, 3).replace(\".\", \",\");\r\n  EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_INTEREST] =\r\n    lang === \"en\"\r\n      ? numFormat(rateI, false, 3)\r\n      : numFormat(rateI, false, 3).replace(\".\", \",\");\r\n  EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_OTHER] =\r\n    lang === \"en\"\r\n      ? numFormat(rateO, false, 3)\r\n      : numFormat(rateO, false, 3).replace(\".\", \",\");\r\n\r\n  let projectionsGrids = tmpGrids;\r\n  //setState({ grids: tmpGrids, loading: false });\r\n\r\n  const AssetnEstateLiabs = proj;\r\n  \r\n\r\n  return {\r\n    EstateLiabsByType,\r\n    EstateLiabsByTypeTotal,\r\n    EstateLiabsByTypeLE3,\r\n    EstateLiabsByTypeLE3Total,\r\n    EstateLiabsByTypeGrowth,\r\n    AssetnEstateLiabs,\r\n    projectionsGrids,\r\n  };\r\n}\r\n\r\nfunction addAssetToProjections(proj, data, assetName, colour) {\r\n  let alreadyThere = false;\r\n  for (let i = 0; i < proj.length; i++) {\r\n    if (proj[i].colour === colour) {\r\n      alreadyThere = true;\r\n       for (let j = 0; j < 100; j++) proj[i].values[j] += data[j];\r\n    }\r\n  }\r\n  if (alreadyThere === false)\r\n    proj.push({ name: assetName, colour: colour, values: data });\r\n\r\n  //console.log(proj);\r\n  return proj;\r\n}\r\n","import React, { Component } from \"react\";\r\nimport DataTable from \"./GridExcelComponent/DataTable\";\r\nimport { getInfoINA } from \"../definitions/infoIconsDefinitions\";\r\nimport { Info } from \"./Info\";\r\nimport {\r\n  APPLET_INA,\r\n} from \"../definitions/generalDefinitions\";\r\n\r\nexport class AggregateGrid extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n  render() {\r\n    \r\n    return (\r\n      <div>\r\n        <h3 className=\"ppi1\">\r\n          {APPLET_INA ?this.props.insNeedLine:\"\"}\r\n          {APPLET_INA &&\r\n          <Info\r\n              infoIcon={getInfoINA(this.props.lang)}\r\n          />}\r\n        </h3>\r\n\r\n        <DataTable\r\n          gridTitle=\"\"// use same title as othr pages {this.props.aggregateGrid.gridTitle}\r\n          dataColTitles={this.props.aggregateGrid.dataColTitles}\r\n          dataProjection={this.props.aggregateGrid.dataProjection}\r\n          gridColumnsDataExcelInfoSection={\r\n            this.props.aggregateGrid.gridColumnsDataExcelInfoSection\r\n          }\r\n          gridColumnAligns={this.props.aggregateGrid.gridColumnAligns}\r\n          gridIcons={this.props.aggregateGrid.gridIcons}\r\n          specialRow={this.props.LE}\r\n          language={this.props.lang}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport {\r\n  OUTPUTTITLE,\r\n  TITLES,\r\n  MEMBER,\r\n  MAX_ORPHAN_DUR_QC,\r\n  MAX_ORPHAN_DUR_NON_QC,\r\n  ORPHAN_AGE_QC,\r\n  ORPHAN_AGE_NON_QC,\r\n  PROVINCE,\r\n  IMAGE_LOGO,\r\n  IMAGE_LOGO_OTHERPAGES,\r\n  IMAGE_APPLET_INA\r\n} from \"../definitions/generalDefinitions\";\r\nimport { OUTPUTTEXT } from \"../definitions/outputDefinitions\";\r\nimport {\r\n  getListItemNameFromKey,\r\n  formatMoney,\r\n  getListItemKeyFromName,\r\n  cleanFormat,\r\n  isSingleFamily,\r\n  getName,\r\n  formatted\r\n} from \"../utils/helper\";\r\nimport { getOutputValues } from \"../data/dataExchange\";\r\n\r\nimport {\r\n  PDF,\r\n  InToPt,\r\n  PxToPt,\r\n  HELVETICA,\r\n  TIMES,\r\n  NORMAL,\r\n  BOLD,\r\n  ITALIC,\r\n} from \"./PDF\";\r\n\r\nconst DISPLAY_INCOME = 1;\r\nconst DISPLAY_TAXLIAB = 2;\r\n\r\nconst LINE_CHART_DIV_ID = \"bar1\";\r\nconst LINE_CHART_DIV2_ID = \"lineChartDiv2\";\r\n\r\nconst LINE_CHART_DIV_STYLE = {\r\n  marginTop: \"65px\",\r\n  marginLeft: \"64px\",\r\n  marginBottom: \"64px\",\r\n  height: \"192px\",\r\n  width: \"384px\",\r\n};\r\n\r\nconst LINE_CHART_DIV2_STYLE = {\r\n  marginTop: \"65px\",\r\n  marginLeft: \"64px\",\r\n  marginBottom: \"64px\",\r\n  height: \"192px\",\r\n  width: \"384px\",\r\n};\r\n\r\nconst TOP_MARGIN = 0.48;\r\nconst PARA_WIDTH = 5.5;\r\n\r\n\r\nasync function getSpouseINA(props)\r\n{\r\n  let data;\r\n  data= await props.getSpouseINA();\r\n  const spouseInsRet=data.dataOutput.dataInsuranceNeeds[0].Value;\r\n  const spouseInsLE=data.dataOutput.dataInsuranceNeeds[1].Value;\r\n  const LESpouse=data.dataOutput.lifeExpectancy.spouse+data.dataInput.Clients[1].Age\r\n\r\n  return {spouseInsRet:spouseInsRet,spouseInsLE:spouseInsLE, LESpouse:LESpouse};\r\n}\r\n\r\nfunction formattedMoneyString(value,lang){\r\n  return formatted(value,lang).toString()\r\n}\r\n\r\n\r\n\r\nexport async function doSavePdfAction(props) {\r\n  let pdf = new PDF();\r\n  pdf.Create();\r\n\r\n  // pdf.ShowGrids = false;\r\n\r\n  var htmlElement;\r\n  var paragraph;\r\n\r\n  // pdf output shared with presentation\r\n  let output = getOutputValues(props);\r\n  const lang = props.dataInput.Presentations[0].language;\r\n  const provinceKey = getListItemKeyFromName(PROVINCE, output.province);\r\n  let maxDur = provinceKey === \"QC\" ? MAX_ORPHAN_DUR_QC : MAX_ORPHAN_DUR_NON_QC;\r\n  let orphAge = provinceKey === \"QC\" ? ORPHAN_AGE_QC : ORPHAN_AGE_NON_QC;\r\n  const clients = props.dataInput.Clients;\r\n  const assets = props.dataInput.Assets;\r\n  const singleFamily = isSingleFamily(clients);\r\n  const labelsBilingual = OUTPUTTEXT[lang];\r\n\r\n  const decimalChar = lang === \"en\" ? \".\" : \",\";\r\n  const thousands = lang === \"en\" ? \",\" : \" \";\r\n  const formatFr = lang === \"fr\" ? true : false;\r\n\r\n\r\n  // are there two need periods eg when children this or that\r\n  const twoNeedPercents = output.percent2.length > 0 ? true : false;\r\n  const pg1TitleY = 4.2;\r\n  // Page 1\r\n  pdf.SetFont(HELVETICA, NORMAL);\r\n  if (lang === \"en\") pdf.SetFontSize(PxToPt(36));\r\n  else pdf.SetFontSize(PxToPt(24));\r\n  pdf.SetTextColor(0x45, 0x55, 0x60);\r\n  pdf.Text(\r\n    props.INAOption === DISPLAY_INCOME\r\n      ? TITLES[lang].appletINA\r\n      : TITLES[lang].appletEP,\r\n    InToPt(1.5),\r\n    InToPt(pg1TitleY) //3.5)\r\n  );\r\n  /* \r\n  pdf.AddImageFitWidthOnly(\r\n    \"INAPage1Logo\",\r\n    InToPt(1.51), //1.51),\r\n    InToPt(1.06),\r\n    InToPt(5.54),\r\n    InToPt(2.76) // max height\r\n  ); */\r\n  const image = props.dataInput.Presentations[0].adviserLogo;\r\n  const top = props.dataInput.Presentations[0].adviserLogo.top;\r\n  const pg1ImageID=props.dataInput.Presentations[0].adviserLogo.ID;\r\n\r\n  const imageApp = props.dataInput.Presentations[0].appletImage;\r\n  \r\n  let result;\r\n  result=pdf.addCustomImage(IMAGE_LOGO, pg1TitleY, image, true,top);\r\n\r\n  //result=pdf.addCustomImage(IMAGE_APPLET_INA, InToPt(pg1TitleY + 0.5), imageApp, true,top);\r\n    pdf.AddImage(\r\n    IMAGE_APPLET_INA,\r\n    InToPt(1.51),\r\n    InToPt(pg1TitleY + 0.5), //4.06),\r\n    InToPt(5.54),\r\n    InToPt(2.75)\r\n  ); \r\n   //\tconsole.log(output.clients);\r\n  //\tconsole.log(OUTPUTTEXT[lang].pg1P1);\r\n\r\n  pdf.SetFont(HELVETICA, NORMAL);\r\n  pdf.SetFontSize(PxToPt(18));\r\n  pdf.SetTextColor(0x45, 0x55, 0x60);\r\n  pdf.Text(\r\n    OUTPUTTEXT[lang].pg1P1 + output.designedFor,\r\n    InToPt(1.52),\r\n    InToPt(pg1TitleY + 3.63) //7.13\r\n  );\r\n  pdf.Text(\r\n    OUTPUTTEXT[lang].pg1P2 + output.designedBy,\r\n    InToPt(1.52),\r\n    InToPt(pg1TitleY + 4.13) //7.63)\r\n  );\r\n  pdf.Text(\r\n    OUTPUTTEXT[lang].pg1P3 + output.dateApplet,\r\n    InToPt(1.52),\r\n    InToPt(pg1TitleY + 4.42) //7.92)\r\n  );\r\n  pdf.Text(\r\n    OUTPUTTEXT[lang].pg1P4 + output.province,\r\n    InToPt(1.52),\r\n    InToPt(pg1TitleY + 4.69) //8.19)\r\n  );\r\n\r\n  \r\n\r\n  const headerOffset = image.image === null ? 0 : 0.25;\r\n  const topToTitle_Y  =1.35\r\n  const titleToPara_Y  =1.6\r\n  \r\n  const topMargin = pdf.HEADER_RECT_IN_Y + headerOffset;\r\n  {\r\n    /*---}\t\t\t// Page 2*/\r\n    const footerText = OUTPUTTEXT[lang].pgFooter;\r\n    const headerText = OUTPUTTEXT[lang].pg1T;\r\n    \r\n    pdf.addFooterAndHeader(headerOffset, footerText, headerText);\r\n\r\n    result=result && pdf.addCustomImage(IMAGE_LOGO_OTHERPAGES, pg1TitleY, image,false,top);\r\n\r\n    pdf.SetFont(HELVETICA, NORMAL);\r\n    if (lang === \"en\") pdf.SetFontSize(PxToPt(25));\r\n    else pdf.SetFontSize(PxToPt(20));\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    pdf.Text(\r\n      OUTPUTTITLE[lang].Values[0],\r\n      InToPt(1.5),\r\n      InToPt(headerOffset + topToTitle_Y)\r\n    );\r\n\r\n    pdf.SetFont(TIMES, NORMAL);\r\n    pdf.SetFontSize(PxToPt(16));\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n\r\n    // profile table\r\n    let x = 1.5;\r\n    let y = headerOffset + titleToPara_Y;\r\n    let incY = 0.4;\r\n    let incTableY = 0.25;\r\n    const incColourdRowsY= incTableY + 0.08;\r\n    let height = 0.35;\r\n    const val = singleFamily\r\n      ? labelsBilingual.pg2TabT4Alt\r\n      : labelsBilingual.pg2TabT4;\r\n    let values = [\r\n      OUTPUTTEXT[lang].pg2TabT1,\r\n      OUTPUTTEXT[lang].pg2TabT2,\r\n      OUTPUTTEXT[lang].pg2TabT3,\r\n      val,\r\n      OUTPUTTEXT[lang].pg2TabT5,\r\n    ];\r\n    let fill = [115, 153, 198];\r\n    let textColor = [255, 255, 255];\r\n    let Widths = [2.3, 0.5, .9, .9,.8]; // add up to PARA_WIDTH=5.5\r\n    if(lang===\"fr\") Widths = [2.0, 0.4, .85, .75,1.4];\r\n    pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n\r\n    \r\n    y += incY+.2;\r\n    fill = [255, 255, 255];\r\n    textColor = [0x45, 0x55, 0x60];\r\n    output.clients.forEach(function (element) {\r\n      \r\n      const len=(getListItemNameFromKey(MEMBER, element.memberKey, lang) + getName(element.name,lang)).length\r\n      values = [\r\n        len>26?getListItemNameFromKey(MEMBER, element.memberKey, lang) :getListItemNameFromKey(MEMBER, element.memberKey, lang) + getName(element.name,lang),\r\n        element.age.toString(),\r\n        formattedMoneyString(element.income,lang)\r\n        /* \"$\" +\r\n          formatMoney(\r\n           element.income,\r\n            0,\r\n            decimalChar,\r\n            thousands\r\n          ) */,\r\n        (singleFamily\r\n          ? (element.memberKey === MEMBER.CLIENT.Key\r\n            ? \"-\"\r\n            : element.ret-element.age) //protectionPeriod\r\n          : element.ret).toString(),\r\n        (clients[element.id - 1].avgTaxRate + \"%\").toString(),\r\n      ];\r\n      pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n      y += incTableY;\r\n      if(len>26){\r\n        values= [\r\n          getName(element.name,lang),\r\n          \"\",\r\n          \"\",\r\n          \"\",\r\n          \"\",\r\n        ];\r\n        pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n        y += incTableY;\r\n    \r\n      }\r\n    });\r\n\r\n    // fin. summary table\r\n    pdf.SetFont(TIMES, NORMAL);\r\n    pdf.SetFontSize(PxToPt(16));\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n\r\n    y += incTableY-.05;\r\n    fill = [115, 153, 198];\r\n    textColor = [255, 255, 255];\r\n    Widths = [4.3, 1.2]; // add up to PARA_WIDTH=5.5\r\n    let values2 = [OUTPUTTEXT[lang].pg2T3, \"\"];\r\n\r\n    pdf.tableRow(fill, textColor, x, y, values2, height, Widths);\r\n\r\n    fill = [255, 255, 255];\r\n    textColor = [0x45, 0x55, 0x60];\r\n    values2 = [\r\n      OUTPUTTEXT[lang].pg2P5,\r\n      (\r\n        formattedMoneyString(output.totalAssetExcludeInsurance,lang)\r\n        /* \"$\" +\r\n        formatMoney(\r\n          output.totalAssetExcludeInsurance,\r\n          0,\r\n          decimalChar,\r\n          thousands\r\n        ) */\r\n      ),\r\n    ];\r\n    y += incY;\r\n    pdf.tableRow(fill, textColor, x, y, values2, height, Widths);\r\n    values2 = [\r\n      OUTPUTTEXT[lang].pg2P6,\r\n      (\r\n        formattedMoneyString(output.totalLiabExcludeDeathRelated,lang)\r\n        /* \r\n        \"$\" +\r\n        formatMoney(\r\n          output.totalLiabExcludeDeathRelated,\r\n          0,\r\n          decimalChar,\r\n          thousands\r\n        ) */\r\n      ),\r\n    ];\r\n    y += incTableY;\r\n    pdf.tableRow(fill, textColor, x, y, values2, height, Widths);\r\n    values2 = OUTPUTTEXT[lang].pg2P7;\r\n    y += incTableY;\r\n    pdf.tableRowSingle(fill, textColor, x+2.8, y, values2, height, Widths,false);\r\n    values2 =\r\n      (\r\n        formattedMoneyString(output.totalAssetExcludeInsurance -\r\n          output.totalLiabExcludeDeathRelated,lang)\r\n        \r\n        /* \"$\" +\r\n        formatMoney(\r\n          output.totalAssetExcludeInsurance -\r\n            output.totalLiabExcludeDeathRelated,\r\n          0,\r\n          decimalChar,\r\n          thousands\r\n        ) */\r\n      );\r\n    fill = [196, 223, 224];\r\n    pdf.tableRowSingle(fill, textColor, x+4.3, y, values2, height, Widths, true);\r\n    \r\n    //pdf.tableRow(fill, textColor, x+4.3, y+.065, values2, height-.10, [1.2]);\r\n    fill = [255, 255, 255];\r\n    \r\n    values2 = [\r\n      OUTPUTTEXT[lang].pg2P8, \r\n      (\r\n        formattedMoneyString(output.totalAssetInsurance+output.govDB,lang)\r\n        \r\n        /* \"$\" +\r\n        formatMoney(\r\n          output.totalAssetInsurance+output.govDB,\r\n          0,\r\n          decimalChar,\r\n          thousands\r\n        ) */\r\n      ),\r\n    ];\r\n    y += incColourdRowsY;\r\n    pdf.tableRow(fill, textColor, x, y, values2, height, Widths);\r\n\r\n    values2 = [\r\n      OUTPUTTEXT[lang].pg2P9,\r\n      (\r\n        formattedMoneyString(output.totalLiab - output.totalLiabExcludeDeathRelated,lang)\r\n        \r\n        /* \"$\" +\r\n        formatMoney(\r\n          output.totalLiab - output.totalLiabExcludeDeathRelated,\r\n          0,\r\n          decimalChar,\r\n          thousands\r\n        ) */\r\n      ),\r\n    ];\r\n    y += incTableY;\r\n    pdf.tableRow(fill, textColor, x, y, values2, height, Widths);\r\n    pdf.DrawLine(InToPt(1.5), InToPt(y + incY), InToPt(PARA_WIDTH));\r\n\r\n    // ins\r\n    y += 1.2*incY;\r\n    values2 =  OUTPUTTEXT[lang].pg2P10 + getName(clients[0].Name,lang) +\":\"\r\n    pdf.tableRowSingle(fill, textColor, x, y, values2, height, [PARA_WIDTH],false);\r\n    \r\n    if(!singleFamily)\r\n    {\r\n    values2 = [\r\n      OUTPUTTEXT[lang].pg8TabRow3 + props.LE + \")\",\r\n      \"\"\r\n    ];\r\n    y += incColourdRowsY;\r\n    pdf.tableRow(fill, textColor, x, y, values2, height, Widths);\r\n\r\n    values2 = (\r\n      formattedMoneyString(output.insNeedLE,lang)\r\n        \r\n      /* \"$\" + formatMoney(output.insNeedLE, 0, decimalChar, thousands) */)\r\n    fill = [196, 223, 224];\r\n    pdf.tableRowSingle(fill, textColor, x+4.3, y, values2, height, Widths, true);\r\n\r\n  }\r\n   \r\n  //pdf.tableRow(fill, textColor, x+4.3, y+.065, values2, height-.10, [1.2]);\r\n    fill = [255, 255, 255];\r\n    \r\n    values2 = [\r\n      singleFamily? OUTPUTTEXT[lang].pg8TabRow4Alt.replace(\"A. \",\"\"): OUTPUTTEXT[lang].pg8TabRow4\r\n      \r\n      ,\r\n      \"\",\r\n    ];\r\n    y += incColourdRowsY;\r\n    pdf.tableRow(fill, textColor, x, y, values2, height, Widths);\r\n    \r\n    values2 =(\r\n      formattedMoneyString(output.insNeedRet,lang)\r\n        /* \"$\" + formatMoney(output.insNeedRet, 0, decimalChar, thousands) */)\r\n    fill = [196, 223, 224];\r\n    pdf.tableRowSingle(fill, textColor, x+4.3, y, values2, height, Widths, true);\r\n    fill = [255, 255, 255];\r\n    \r\n    // spouse ins\r\n    if(!singleFamily)\r\n    {\r\n        const spouseSwitched= await getSpouseINA(props)\r\n        const spouseInsRet=cleanFormat(spouseSwitched.spouseInsRet, lang);\r\n        const spouseInsLE=cleanFormat(spouseSwitched.spouseInsLE, lang);\r\n        const LESpouse=spouseSwitched.LESpouse\r\n        pdf.DrawLine(InToPt(1.5), InToPt(y + incY), InToPt(PARA_WIDTH));\r\n    \r\n\r\n        y += 1.2*incY;\r\n        pdf.tableRow(fill, textColor, x, y, [OUTPUTTEXT[lang].pg2P12], height, Widths);\r\n   \r\n        y += 1.35*incY;\r\n        \r\n        values2 =  [OUTPUTTEXT[lang].pg2P11.replace(lang===\"en\"?\" NAME\":\" NOM\", getName(clients[1].Name,lang)) ,\r\n          (\r\n            formattedMoneyString(output.totalAssetInsuranceIfSpouse+output.govDB,lang)\r\n            /*  \"$\" +\r\n            formatMoney(\r\n              output.totalAssetInsuranceIfSpouse+output.govDB,              \r\n              0,\r\n              decimalChar,\r\n              thousands\r\n            ) */\r\n          )]\r\n\r\n          pdf.tableRow(fill, textColor, x, y, values2, height, Widths);\r\n        \r\n        values2 = [\r\n          OUTPUTTEXT[lang].pg8TabRow3 + LESpouse + \")\",\r\n          \"\"\r\n        ];\r\n        y += incColourdRowsY;\r\n        pdf.tableRow(fill, textColor, x, y, values2, height, Widths);\r\n    \r\n        values2 = (\r\n          formattedMoneyString(spouseInsLE,lang)\r\n        /* \"$\" + formatMoney( spouseInsLE, 0, decimalChar, thousands) */)\r\n        fill = [196, 223, 224];\r\n        pdf.tableRowSingle(fill, textColor, x+4.3, y, values2, height, Widths, true);\r\n    \r\n      \r\n      //pdf.tableRow(fill, textColor, x+4.3, y+.065, values2, height-.10, [1.2]);\r\n        fill = [255, 255, 255];\r\n        \r\n        values2 = [\r\n          OUTPUTTEXT[lang].pg8TabRow4\r\n          ,\r\n          \"\",\r\n        ];\r\n        y += incColourdRowsY;\r\n        pdf.tableRow(fill, textColor, x, y, values2, height, Widths);\r\n        \r\n        values2 =(\r\n          formattedMoneyString(spouseInsRet,lang)\r\n        /* \"$\" + formatMoney( spouseInsRet, 0, decimalChar, thousands) */)\r\n        fill = [196, 223, 224];\r\n        pdf.tableRowSingle(fill, textColor, x+4.3, y, values2, height, Widths, true);\r\n        fill = [255, 255, 255];\r\n      \r\n\r\n    }\r\n\r\n\r\n\r\n    // if more than 5 clients move\r\n    if(output.clients.length>lang===\"en\"?4:3){\r\n      pdf.addFooterAndHeader(headerOffset, footerText, headerText);\r\n      /* extra assump PAGE */\r\n      result=result && pdf.addCustomImage(IMAGE_LOGO_OTHERPAGES, pg1TitleY, image,false,top);\r\n      pdf.SetFont(HELVETICA, NORMAL);\r\n      if (lang === \"en\") pdf.SetFontSize(PxToPt(25));\r\n      else pdf.SetFontSize(PxToPt(20));\r\n      pdf.SetFont(TIMES, NORMAL);\r\n      pdf.SetFontSize(PxToPt(16));\r\n      x = 1.5;\r\n      y = headerOffset + titleToPara_Y-.3;\r\n      incY = 0.44;\r\n      height = 0.35;\r\n\r\n    }\r\n    else\r\n      y += 2*incTableY;\r\n    \r\n    // assump table\r\n    pdf.SetFont(TIMES, NORMAL);\r\n    pdf.SetFontSize(PxToPt(16));\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n\r\n    //  pdf.DrawLine(InToPt(1.5), InToPt(y - 0.13), InToPt(PARA_WIDTH));\r\n    // y += .3*incY;\r\n    fill = [115, 153, 198];\r\n    textColor = [255, 255, 255];\r\n    Widths = [4.9, 0.6]; // add up to PARA_WIDTH=5.5\r\n    values2 = [OUTPUTTEXT[lang].pg2T2, \"\"];\r\n\r\n    pdf.tableRow(fill, textColor, x, y, values2, height, Widths);\r\n\r\n    fill = [255, 255, 255];\r\n    textColor = [0x45, 0x55, 0x60];\r\n    values2 = [OUTPUTTEXT[lang].pg7TabRow4, (output.infRate + \"%\").toString()];\r\n    y += incY;\r\n    pdf.tableRow(fill, textColor, x, y, values2, height, Widths);\r\n    values2 = [OUTPUTTEXT[lang].pg7TabRow5, (output.invRate + \"%\").toString()];\r\n    y += incTableY;\r\n    pdf.tableRow(fill, textColor, x, y, values2, height, Widths);\r\n\r\n    values2 = [\r\n      OUTPUTTEXT[lang].pg2TabT6,\r\n      (\r\n        parseFloat(props.dataInput.Presentations[0].taxRate).toFixed(2) + \"%\"\r\n      ).toString(),\r\n    ];\r\n    y += incTableY;\r\n    pdf.tableRow(fill, textColor, x, y, values2, height, Widths);\r\n\r\n    pdf.SetFont(TIMES, NORMAL);\r\n    pdf.SetFontSize(PxToPt(16));\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n\r\n    y += 2 * incY-.07;\r\n    pdf.DrawLine(InToPt(1.5), InToPt(y - 0.35), InToPt(PARA_WIDTH));\r\n   // y += 0.7 * incY;\r\n\r\n    paragraph = OUTPUTTEXT[lang].pg2Tab2;\r\n    pdf.MultilineText(paragraph, InToPt(1.5), InToPt(y), InToPt(5.6));\r\n\r\n    y += incY -.05;\r\n    paragraph = OUTPUTTEXT[lang].pg2Tab3;\r\n    pdf.MultilineText(paragraph, InToPt(1.5), InToPt(y), InToPt(5.6));\r\n    \r\n    /* // notes\r\n    pdf.SetFont(TIMES, NORMAL);\r\n    pdf.SetFontSize(PxToPt(16));\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n\r\n    y += 2.8 * incY;\r\n    fill = [115, 153, 198];\r\n    textColor = [255, 255, 255];\r\n    Widths = [4.9, 0.6]; // add up to PARA_WIDTH=5.5\r\n    values2 = [OUTPUTTEXT[lang].pg9T, \"\"];\r\n\r\n    pdf.tableRow(fill, textColor, x, y, values2, height, Widths);\r\n\r\n    y += 1.6 * incY;\r\n    paragraph = OUTPUTTEXT[lang].pg9P1;\r\n    pdf.SetFont(TIMES, NORMAL);\r\n    pdf.SetFontSize(PxToPt(16));\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    pdf.MultilineText(paragraph, InToPt(1.5), InToPt(y), InToPt(PARA_WIDTH));\r\n */\r\n    /* \tvalues = [\"Client\", \"$70,000\", \"65\"];\r\n\t\t\ty += incY;\t\r\n\t\t\tpdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n\t\t\tvalues = [\"Spouse\", \"$50,000\", \"65\"];\r\n\t\t\ty +=incY;\r\n\t\t\tpdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n\t\t  */\r\n\r\n    //pdf.SetFillColor(255, 255, 255);\r\n    //pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    //pdf.Rectangle(InToPt(1.5), InToPt(2), InToPt(1.8), InToPt(0.4));\r\n    //pdf.Text(\"Client\", InToPt(1.61), InToPt(2.25));\r\n    //pdf.SetFillColor(255, 255, 255);\r\n    //pdf.Rectangle(InToPt(3.32), InToPt(2), InToPt(1.8), InToPt(0.4));\r\n    //pdf.Text(\"$70,000\", InToPt(3.43), InToPt(2.25));\r\n    //pdf.SetFillColor(255, 255, 255);\r\n    //pdf.Rectangle(InToPt(5.14), InToPt(2), InToPt(1.8), InToPt(0.4));\r\n    //pdf.Text(\"65\", InToPt(5.25), InToPt(2.25));\r\n\r\n    //pdf.SetFillColor(255, 255, 255);\r\n    //pdf.Rectangle(InToPt(1.5), InToPt(2.5), InToPt(1.8), InToPt(0.4));\r\n    //pdf.Text(\"Spouse\", InToPt(1.61), InToPt(2.75));\r\n    //pdf.SetFillColor(255, 255, 255);\r\n    //pdf.Rectangle(InToPt(3.32), InToPt(2.5), InToPt(1.8), InToPt(0.4));\r\n    //pdf.Text(\"$50,000\", InToPt(3.43), InToPt(2.75));\r\n    //pdf.SetFillColor(255, 255, 255);\r\n    //pdf.Rectangle(InToPt(5.14), InToPt(2.5), InToPt(1.8), InToPt(0.4));\r\n    //pdf.Text(\"65\", InToPt(5.25), InToPt(2.75));\r\n\r\n    //\t// Page 3\r\n//    pdf.AddPage();\r\n  //  pdf.Header(headerText, headerOffset);\r\n\r\n    pdf.addFooterAndHeader(headerOffset, footerText, headerText);\r\n\r\n    {\r\n      /* PAGE 3 Family Cash Needs at Death*/\r\n    }\r\n\r\n    // combine 2 and 3\r\n    // logo if asked for\r\n    result=result && pdf.addCustomImage(IMAGE_LOGO_OTHERPAGES, pg1TitleY, image,false,top);\r\n\r\n    pdf.SetFont(HELVETICA, NORMAL);\r\n    if (lang === \"en\") pdf.SetFontSize(PxToPt(25));\r\n    else pdf.SetFontSize(PxToPt(20));\r\n\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    pdf.Text(OUTPUTTEXT[lang].pg3T, InToPt(1.5), InToPt(headerOffset + topToTitle_Y\r\n  ));\r\n\r\n    paragraph = OUTPUTTEXT[lang].pg3P1;\r\n    pdf.SetFont(TIMES, NORMAL);\r\n    pdf.SetFontSize(PxToPt(16));\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    pdf.MultilineText(\r\n      paragraph,\r\n      InToPt(1.5),\r\n      InToPt(headerOffset + 1.8),\r\n      InToPt(PARA_WIDTH)\r\n    );\r\n\r\n    x = 1.5;\r\n    y = headerOffset + 2.5;\r\n    incY = 0.4;\r\n    height = 0.35;\r\n    Widths = [4.3, 1.2]; // add up to PARA_WIDTH=5.5\r\n\r\n    values = [OUTPUTTEXT[lang].pg3TabT];\r\n    fill = [115, 153, 198];\r\n    textColor = [255, 255, 255];\r\n    pdf.tableRow(fill, textColor, x, y, values, height, [PARA_WIDTH]);\r\n\r\n    fill = [255, 255, 255];\r\n    textColor = [0x45, 0x55, 0x60];\r\n\r\n    y += incY;\r\n    output.liabilities.forEach(function (element) {\r\n      values = [\r\n        element.name,\r\n        (\r\n          formattedMoneyString(element.value,lang)\r\n        /* \"$\" + formatMoney(element.value, 0, decimalChar, thousands) */\r\n        ),\r\n      ];\r\n      pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n      y += incTableY;\r\n    });\r\n    y -= incTableY;\r\n    values = [\r\n      OUTPUTTEXT[lang].pg3TabRTot,\r\n      (\r\n        formattedMoneyString(output.totalLiab,lang)\r\n        /* \"$\" + formatMoney(output.totalLiab, 0, decimalChar, thousands) */\r\n      ),\r\n    ];\r\n    y += incY;\r\n    pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n    pdf.DrawLine(InToPt(1.5), InToPt(y), InToPt(PARA_WIDTH));\r\n\r\n    // pdf.addFooterAndHeader(headerOffset,footerText, headerText);\r\n\r\n    {\r\n      /* PAGE 4 Family Income Needs at Death*/\r\n    }\r\n    // pdf.addCustomImageIMAGE_LOGO_OTHERPAGES, pg1TitleY, image);\r\n\r\n    // combined with page 3\r\n    /*    pdf.SetFont(HELVETICA, NORMAL);\r\n    if (lang === \"en\") pdf.SetFontSize(PxToPt(25));\r\n    else pdf.SetFontSize(PxToPt(20));\r\n\r\n     pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    pdf.Text(OUTPUTTEXT[lang].pg4T, InToPt(1.5), InToPt(topToTitle_Y\r\n  ));\r\n    \r\n    paragraph = OUTPUTTEXT[lang].pg4P1;\r\n    pdf.SetFont(TIMES, NORMAL);\r\n    pdf.SetFontSize(PxToPt(16));\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    pdf.MultilineText(paragraph, InToPt(1.5), InToPt(headerOffset+topToTitle_Y\r\n  ), InToPt(PARA_WIDTH));\r\n/ / this is already in pg 3 so no para here\r\n*/\r\n    x = 1.5;\r\n    //   y = headerOffset+1.65;//2.3; don't go down\r\n    y += incY;\r\n    //incY = 0.44;\r\n    height = 0.35;\r\n    //const Widths = 5;\r\n\r\n    values = [OUTPUTTEXT[lang].pg4TabT];\r\n    fill = [115, 153, 198];\r\n    textColor = [255, 255, 255];\r\n    pdf.tableRow(fill, textColor, x, y, values, height, [PARA_WIDTH]);\r\n\r\n    fill = [255, 255, 255];\r\n    textColor = [0x45, 0x55, 0x60];\r\n\r\n    values = [\r\n      OUTPUTTEXT[lang].pg4TabRow1,\r\n      (\r\n        formattedMoneyString(output.Income + output.Income2,lang)\r\n        /* \"$\" +\r\n        formatMoney(output.Income + output.Income2, 0, decimalChar, thousands) */\r\n      ),\r\n    ];\r\n    y += incY;\r\n    pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n\r\n    y += incY;\r\n    pdf.MultilineText(\r\n      OUTPUTTEXT[lang].pg4TabRow2,\r\n      InToPt(x + 0.1),\r\n      InToPt(y + incY),\r\n      InToPt(3)\r\n    );\r\n\r\n    //values = [OUTPUTTEXT[lang].pg4TabRow2,\"\"];\r\n    y += incY - 0.3;\r\n    pdf.DrawLine(InToPt(1.5), InToPt(y - 0.13), InToPt(PARA_WIDTH));\r\n\r\n    //pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n\r\n    if (twoNeedPercents) {\r\n      values = [\r\n        OUTPUTTEXT[lang].pgTabRowMoreIncome,\r\n        (output.percent1 + \"%\").toString(),\r\n      ];\r\n      y += 2.1 * incY;\r\n      pdf.DrawLine(InToPt(1.5), InToPt(y), InToPt(PARA_WIDTH));\r\n      pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n\r\n      values = [\r\n        OUTPUTTEXT[lang].pgTabRowThereAfter,\r\n        //(output.percent2 + \"%\").toString(),\r\n        (output.percent2.map((item) => item + \"% \")).toString(),\r\n      ];\r\n      y += incTableY;\r\n      pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n      //    pdf.DrawLine(InToPt(1.5), InToPt(y), InToPt(PARA_WIDTH));\r\n    } else {\r\n      values = [\r\n        OUTPUTTEXT[lang].pgTabRowThereAfter,\r\n        (output.percent1 + \"%\").toString(),\r\n      ];\r\n      y += 2.1 * incY;\r\n      pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n      //  pdf.DrawLine(InToPt(1.5), InToPt(y), InToPt(PARA_WIDTH));\r\n    }\r\n    values = [OUTPUTTEXT[lang].pg4TabRow5, \"\"];\r\n    y += 1.5 * incY;\r\n    pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n    //pdf.DrawLine(InToPt(1.5), InToPt(y), InToPt(PARA_WIDTH));\r\n\r\n    if (twoNeedPercents) {\r\n      values = [\r\n        OUTPUTTEXT[lang].pgTabRowMoreIncome,\r\n        (\r\n          formattedMoneyString(output.percentNeed1,lang)\r\n        /* \"$\" + formatMoney(output.percentNeed1, 0, decimalChar, thousands) */\r\n        ),\r\n      ];\r\n      y += incY;\r\n      pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n      pdf.DrawLine(InToPt(1.5), InToPt(y), InToPt(PARA_WIDTH));\r\n\r\n      values = [\r\n        OUTPUTTEXT[lang].pgTabRowThereAfter,\r\n        (\r\n          formattedMoneyString(output.percentNeed2.reduce((a, b) => a + b, 0),lang)\r\n        /* \"$\" + formatMoney(output.percentNeed2.reduce((a, b) => a + b, 0), 0, decimalChar, thousands) */\r\n        ),\r\n      ];\r\n    } else\r\n      values = [\r\n        OUTPUTTEXT[lang].pgTabRowThereAfter,\r\n        (\r\n          formattedMoneyString(output.percentNeed1,lang)\r\n        /* \"$\" + formatMoney(output.percentNeed1, 0, decimalChar, thousands) */\r\n        ),\r\n      ];\r\n\r\n    y += incTableY;\r\n    pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n    //pdf.DrawLine(InToPt(1.5), InToPt(y), InToPt(PARA_WIDTH));\r\n    //pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n    //y += incY;\r\n    //pdf.DrawLine(InToPt(1.5), InToPt(y), InToPt(PARA_WIDTH));\r\n\r\n    pdf.addFooterAndHeader(headerOffset, footerText, headerText);\r\n\r\n    {\r\n      /* PAGE 5 Family Cash Sources at Death*/\r\n    }\r\n    result=result && pdf.addCustomImage(IMAGE_LOGO_OTHERPAGES, pg1TitleY, image,false,top);\r\n\r\n    Widths =  lang === \"en\"?[3.35, 1.1, 1.1]:[3.65, .95, .95]; // add up to PARA_WIDTH=5.5\r\n    pdf.SetFont(HELVETICA, NORMAL);\r\n    if (lang === \"en\") pdf.SetFontSize(PxToPt(25));\r\n    else pdf.SetFontSize(PxToPt(20));\r\n\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    pdf.Text(OUTPUTTEXT[lang].pg5T, InToPt(1.5), InToPt(headerOffset + topToTitle_Y\r\n  ));\r\n\r\n    pdf.SetFont(TIMES, NORMAL);\r\n\r\n    pdf.SetFontSize(PxToPt(16));\r\n\r\n    x = 1.5;\r\n    y = headerOffset + titleToPara_Y;\r\n    incY = 0.44;\r\n    height = 0.35;\r\n    //const Widths = 5;\r\n    values = [\r\n      OUTPUTTEXT[lang].pg5TabT,\r\n      OUTPUTTEXT[lang].pg5TabT2,\r\n      OUTPUTTEXT[lang].pg5TabT3,\r\n    ];\r\n    fill = [115, 153, 198];\r\n    textColor = [255, 255, 255];\r\n    pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n\r\n    fill = [255, 255, 255];\r\n    textColor = [0x45, 0x55, 0x60];\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n\r\n    /* if (lang === \"fr\") {\r\n      y += incY;\r\n      y += 0.3;\r\n      pdf.MultilineText(\r\n        OUTPUTTEXT[lang].pg5TabRow1,\r\n        InToPt(x + 0.1),\r\n        InToPt(y),\r\n        InToPt(3)\r\n      );\r\n      pdf.Text(\r\n        \"$\" + formatMoney(output.govDB, 0, decimalChar, thousands),\r\n        InToPt(x + 3.35),\r\n        InToPt(y)\r\n      );\r\n      pdf.Text(\r\n        \"$\" + formatMoney(output.govDB, 0, decimalChar, thousands),\r\n        InToPt(x + 4.45),\r\n        InToPt(y)\r\n      );\r\n    } else */ {\r\n      values = [\r\n        OUTPUTTEXT[lang].pg5TabRow1,\r\n        (\r\n          formattedMoneyString(output.govDB,lang)\r\n        /* \"$\" + formatMoney(output.govDB, 0, decimalChar, thousands) */),\r\n        (\r\n          formattedMoneyString(output.govDB,lang)\r\n        /* \"$\" + formatMoney(output.govDB, 0, decimalChar, thousands) */),\r\n          \r\n      ];\r\n      y += incY;\r\n      pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n    }\r\n\r\n    y += incY;\r\n    output.assets.forEach(function (element) {\r\n      values = [\r\n        element.name,\r\n        (\r\n          formattedMoneyString(element.value,lang)\r\n        /* \"$\" + formatMoney(element.value, 0, decimalChar, thousands) */\r\n        ),\r\n        element.disposeValue > 0\r\n          ? (\r\n            formattedMoneyString(element.disposeValue,lang)\r\n            /* \"$\" + formatMoney(element.disposeValue, 0, decimalChar, thousands) */\r\n            )\r\n          : \"\",\r\n      ];\r\n      pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n      y += incTableY;\r\n    });\r\n\r\n    values = [\r\n      OUTPUTTEXT[lang].pg5TabRow3,\r\n      (\r\n        formattedMoneyString(output.totalAsset,lang)\r\n        /* \"$\" + formatMoney(output.totalAsset, 0, decimalChar, thousands) */\r\n      ),\r\n      (\r\n        formattedMoneyString(output.totalDisposeAsset,lang)\r\n        /* \"$\" + formatMoney(output.totalDisposeAsset, 0, decimalChar, thousands) */\r\n      ),\r\n    ];\r\n    y += incY;\r\n    pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n\r\n   /*  if (lang === \"fr\") {\r\n      y += 0.73 * incY;\r\n      pdf.MultilineText(\r\n        OUTPUTTEXT[lang].pg5TabRow4,\r\n        InToPt(x + 0.1),\r\n        InToPt(y + 0.4),\r\n        InToPt(3)\r\n      );\r\n      pdf.Text(\r\n        \"$\" +\r\n          formatMoney(output.totalLiab, 0, decimalChar, thousands),\r\n        InToPt(x + 4.45),\r\n        InToPt(y + 0.41)\r\n      );\r\n      y += 0.73 * incY;\r\n    } else */ {\r\n      values = [\r\n        OUTPUTTEXT[lang].pg5TabRow4,\r\n        \"\",\r\n        (\r\n          formattedMoneyString(output.totalLiab,lang)\r\n        /* \"$\" + formatMoney(output.totalLiab, 0, decimalChar, thousands) */\r\n        ),\r\n      ];\r\n      y += incY;\r\n      pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n    }\r\n\r\n    y += incY;\r\n    /* pdf.MultilineText(\r\n      OUTPUTTEXT[lang].pg5TabRow5,\r\n      InToPt(x + 0.1),\r\n      InToPt(y + 0.4),\r\n      InToPt(3)\r\n    ); */\r\n    values = [\r\n      OUTPUTTEXT[lang].pg5TabRow5,\r\n      \"\",\r\n      (\r\n        formattedMoneyString(output.totalDisposeAsset - output.totalLiab,lang)\r\n        /* \"$\" + formatMoney(output.totalDisposeAsset - output.totalLiab, 0, decimalChar, thousands) */\r\n      ),\r\n    ];\r\n    //y += incY;\r\n    pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n    \r\n    /* pdf.Text(\r\n      \"$\" +\r\n        formatMoney(\r\n          output.totalDisposeAsset - output.totalLiab,\r\n          0,\r\n          decimalChar,\r\n          thousands\r\n        ),\r\n      InToPt(x + 4.45),\r\n      InToPt(y + 0.41)\r\n    ); */\r\n\r\n    y += incY;\r\n    pdf.DrawLine(InToPt(1.5), InToPt(y - 0.43), InToPt(PARA_WIDTH));\r\n\r\n    pdf.addFooterAndHeader(headerOffset, footerText, headerText);\r\n\r\n   \r\n   \r\n   \r\n   \r\n    {\r\n      /* PAGE 6 Family Income Sources at Death*/\r\n    }\r\n    result=result && pdf.addCustomImage(IMAGE_LOGO_OTHERPAGES, pg1TitleY, image,false,top);\r\n    Widths = [4.4, 1.1]; // add up to PARA_WIDTH=5.5\r\n    Widths = [3.0,1.6, .9]; // add up to PARA_WIDTH=5.5\r\n    pdf.SetFont(HELVETICA, NORMAL);\r\n    if (lang === \"en\") pdf.SetFontSize(PxToPt(25));\r\n    else pdf.SetFontSize(PxToPt(20));\r\n\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    pdf.Text(OUTPUTTEXT[lang].pg6T, InToPt(1.5), InToPt(headerOffset + topToTitle_Y\r\n  ));\r\n\r\n    pdf.SetFont(TIMES, NORMAL);\r\n\r\n    pdf.SetFontSize(PxToPt(16));\r\n\r\n    x = 1.5;\r\n    y = headerOffset + titleToPara_Y;\r\n    incY = 0.44;\r\n    height = 0.35;\r\n    //const Widths = 5;\r\n    /* values = [OUTPUTTEXT[lang].pg6TabT];\r\n    fill = [115, 153, 198];\r\n    textColor = [255, 255, 255];\r\n    pdf.tableRow(fill, textColor, x, y, values, height, [PARA_WIDTH]); */\r\n\r\n    values = [\r\n      OUTPUTTEXT[lang].pg6TabT,\r\n      OUTPUTTEXT[lang].pg5TabT2,\r\n      OUTPUTTEXT[lang].pg5TabT3,\r\n    ];\r\n    fill = [115, 153, 198];\r\n    textColor = [255, 255, 255];\r\n    pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n\r\n\r\n\r\n    fill = [255, 255, 255];\r\n    textColor = [0x45, 0x55, 0x60];\r\n\r\n    y += incY;\r\n    output.sources.forEach(function (element) {\r\n      values = [\r\n        element.name,\r\n        (\r\n          formattedMoneyString(element.value,lang)\r\n        /* \"$\" + formatMoney(element.value, 0, decimalChar, thousands) */\r\n        ),\r\n        formattedMoneyString(element.valueAtDeath,lang),\r\n      ];\r\n      pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n      y += incTableY;\r\n    });\r\n    y += incY;\r\n    pdf.MultilineText(\r\n      OUTPUTTEXT[lang].pg6TabRow1,\r\n      InToPt(x + 0.1),\r\n      InToPt(y + 0.35),\r\n      InToPt(3)\r\n    );\r\n    y += incY + 0.3;\r\n    pdf.DrawLine(InToPt(1.5), InToPt(y - 0.04), InToPt(PARA_WIDTH));\r\n    //y += incY+.1;\r\n\r\n    // Widths = [3.1, 1.2, 1.2]; // add up to PARA_WIDTH=5.5\r\n    Widths = [4.8, .8]; // add up to PARA_WIDTH=5.5\r\n  \r\n    if (twoNeedPercents) {\r\n      y += incY - 0.27;\r\n\r\n      pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        x,\r\n        y,\r\n        [OUTPUTTEXT[lang].pgTabRowMoreIncome],\r\n        height,\r\n        Widths\r\n      );\r\n\r\n      pdf.SetFontSize(PxToPt(12));\r\n      pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        x + 3.6,\r\n        y,\r\n        [\r\n          \"(\" +\r\n            labelsBilingual.pg6Net +\r\n            (\r\n              formattedMoneyString(output.totalSourceATaxAtDeath,lang)\r\n        /* \"  $\" +\r\n              formatMoney(output.totalSourceATax, 0, decimalChar, thousands) */\r\n            ).toString() +\r\n            \")\",\r\n        ],\r\n        height,\r\n        Widths\r\n      );\r\n      pdf.SetFontSize(PxToPt(16));\r\n      pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        x + 4.6,\r\n        y,\r\n        [\r\n          (\r\n            formattedMoneyString(output.totalSourceAtDeath,lang)\r\n        /* \"$\" + formatMoney(output.totalSource, 0, decimalChar, thousands) */\r\n          ),\r\n        ],\r\n        height,\r\n        Widths\r\n      );\r\n\r\n      // y += incY;\r\n      y += incColourdRowsY;\r\n\r\n      pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        x,\r\n        y,\r\n        [!singleFamily?OUTPUTTEXT[lang].pgTabRowThereAfter: OUTPUTTEXT[lang].pg5TabRow7],\r\n        height,\r\n        Widths\r\n      );\r\n\r\n      pdf.SetFontSize(PxToPt(12));\r\n      pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        x + 3.6,\r\n        y,\r\n        [\r\n          \"(\" +\r\n            labelsBilingual.pg6Net +\r\n            (\r\n              formattedMoneyString(output.totalSource2ATaxAtDeath,lang)\r\n        /* \"  $\" +\r\n              formatMoney(output.totalSource2ATax, 0, decimalChar, thousands) */\r\n            ).toString() +\r\n            \")\",\r\n        ],\r\n        height,\r\n        Widths\r\n      );\r\n      pdf.SetFontSize(PxToPt(16));\r\n      pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        x + 4.6,\r\n        y,\r\n        [\r\n          (\r\n            formattedMoneyString(output.totalSource2AtDeath,lang)\r\n        /* \"$\" + formatMoney(output.totalSource2, 0, decimalChar, thousands) */\r\n          ),\r\n        ],\r\n        height,\r\n        Widths\r\n      );\r\n\r\n      /* values = [\r\n        OUTPUTTEXT[lang].pgTabRowMoreIncome,\r\n        (\r\n          \"$\" + formatMoney(output.totalSource, 0, decimalChar, thousands)\r\n        ),\r\n      ];\r\n      y += incY - 0.27;\r\n      pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n */\r\n      /*     values = [\r\n        OUTPUTTEXT[lang].pgTabRowThereAfter,\r\n        (\r\n          \"$\" + formatMoney(output.totalSource2, 0, decimalChar, thousands)\r\n        ),\r\n      ];\r\n      y += incY;\r\n      pdf.SetFontSize(PxToPt(16));\r\n      pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n\r\n      values = [\r\n        \"(\" + (\"$\" + formatMoney(output.totalSourceATax, 0, decimalChar, thousands)\r\n      ) + \" \" + labelsBilingual.pg6Net + \")\",\r\n    ];\r\n    pdf.SetFontSize(PxToPt(12));\r\n    pdf.tableRow(fill, textColor, x+3, y, values, height, Widths); */\r\n      pdf.SetFontSize(PxToPt(16));\r\n    } else {\r\n      /*    values = [\r\n        OUTPUTTEXT[lang].pgTabRowThereAfter,\r\n        (\r\n          \"$\" + formatMoney(output.totalSource1, 0, decimalChar, thousands)\r\n        )\r\n        +\r\n        \"          (\" + (\"$\" + formatMoney(output.totalSource2ATax, 0, decimalChar, thousands)\r\n      ) + \" \" + labelsBilingual.pg6Net + \")\",\r\n      ]; */\r\n      y += incY;\r\n      pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        x,\r\n        y,\r\n        [!singleFamily?OUTPUTTEXT[lang].pgTabRowThereAfter: OUTPUTTEXT[lang].pg5TabRow7],\r\n        height,\r\n        Widths\r\n      );\r\n\r\n      pdf.SetFontSize(PxToPt(12));\r\n      pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        x + 3.6,\r\n        y,\r\n        [\r\n          \"(\" +\r\n            labelsBilingual.pg6Net +\r\n            (\r\n              formattedMoneyString(output.totalSourceATaxAtDeath,lang)\r\n        /* \"  $\" +\r\n              formatMoney(output.totalSourceATax, 0, decimalChar, thousands) */\r\n            ) +\r\n            \")\",\r\n        ],\r\n        height+.1,\r\n        Widths\r\n      );\r\n      pdf.SetFontSize(PxToPt(16));\r\n      pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        x + 4.6,\r\n        y,\r\n        [\r\n          (\r\n            formattedMoneyString(output.totalSourceAtDeath,lang)\r\n        /* \"$\" + formatMoney(output.totalSource, 0, decimalChar, thousands) */\r\n          ),\r\n        ],\r\n        height+.1,\r\n        Widths\r\n      );\r\n\r\n      /*      pdf.tableRow(fill, textColor, x, y, values, height, Widths); */\r\n    }\r\n    y += incY + 0.5;\r\n    pdf.MultilineText(\r\n      OUTPUTTEXT[lang].pgTabRowMoreIncome,\r\n      InToPt(x + 0.1),\r\n      InToPt(y),\r\n      InToPt(3)\r\n    );\r\n    y += incY - 0.13;\r\n    pdf.DrawLine(InToPt(1.5), InToPt(y + 0.26), InToPt(PARA_WIDTH));\r\n\r\n    //values = [OUTPUTTEXT[lang].pgTabRowMoreIncome, (\"$\"+ formatMoney(output.percentNeed1-output.totalSource, 0,decimalChar,thousands))];\r\n    //y += incY;\r\n    //pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n\r\n    //\tvalues = [OUTPUTTEXT[lang].pgTabRowThereAfter, (\"$\"+ formatMoney(output.percentNeed2-output.totalSource2, 0,decimalChar,thousands))];\r\n    //\ty += incY;\r\n    //pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n    //#7399C6\r\n    //pdf.Text(OUTPUTTEXT[lang].pgTabRowThereAfter,  x, y);\r\n    //pdf.tableRow(fill, textColor, x, y, OUTPUTTEXT[lang].pgTabRowThereAfter, [1]);\r\n\r\n    values = [OUTPUTTEXT[lang].pgTabRowMoreIncome];\r\n    y += incY;\r\n    //Widths = [3.1,1.2, 1.2]; // add up to PARA_WIDTH=5.5\r\n    pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n\r\n    if (twoNeedPercents) {\r\n      pdf.SetFontSize(PxToPt(12));\r\n      pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        x + 3.6,\r\n        y,\r\n        [\r\n          \"(\" +\r\n            (\r\n              formatMoney(output.percentNeed1, 0, decimalChar, thousands)\r\n            ).toString() +\r\n            \"-\" +\r\n            (\r\n              \r\n              formatMoney(output.totalSourceATaxAtDeath, 0, decimalChar, thousands)\r\n            ).toString() +\r\n            \")\",\r\n        ],\r\n        height+.1,\r\n        [1.2]\r\n      );\r\n\r\n      pdf.SetFontSize(PxToPt(16));\r\n      fill = [196, 223, 224];\r\n      \r\n      values2=(\r\n        formattedMoneyString(Math.max(0, output.percentNeed1 - output.totalSourceATaxAtDeath),lang)\r\n        /* \"$\" +\r\n        formatMoney(\r\n          Math.max(0, output.percentNeed1 - output.totalSourceATax),\r\n          0,\r\n          decimalChar,\r\n          thousands\r\n        ) */\r\n      )\r\n      pdf.tableRowSingle(fill, textColor, x+4.6, y, values2, height, Widths, true);\r\n      /* pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        x + 4.4,\r\n        y,\r\n        [\r\n          (\r\n            \"$\" +\r\n            formatMoney(\r\n              Math.max(0, output.percentNeed1 - output.totalSourceATax),\r\n              0,\r\n              decimalChar,\r\n              thousands\r\n            )\r\n          ),\r\n        ],\r\n        height,\r\n        [1]\r\n      );\r\n */\r\n      fill = [255, 255, 255];\r\n      values = [!singleFamily?OUTPUTTEXT[lang].pgTabRowThereAfter:OUTPUTTEXT[lang].pg5TabRow7];\r\n      //y += incY;\r\n      y += incColourdRowsY;\r\n      pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n\r\n      pdf.SetFontSize(PxToPt(12));\r\n      pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        x + 3.6,\r\n        y,\r\n        [\r\n          \"(\" +\r\n            (\r\n              formatMoney(output.percentNeed2.reduce((a, b) => a + b, 0), 0, decimalChar, thousands)\r\n            ).toString() +\r\n            \"-\" +\r\n            (\r\n              formatMoney(output.totalSource2ATaxAtDeath, 0, decimalChar, thousands)\r\n            ).toString() +\r\n            \")\",\r\n        ],\r\n        height+.1,\r\n        [1.2]\r\n      );\r\n\r\n      pdf.SetFontSize(PxToPt(16));\r\n      fill = [196, 223, 224];\r\n      values2=(\r\n        formattedMoneyString(Math.max(0, output.percentNeed2.reduce((a, b) => a + b, 0) - output.totalSource2ATaxAtDeath),lang)\r\n        /* \"$\" +\r\n        formatMoney(\r\n          Math.max(0, output.percentNeed2.reduce((a, b) => a + b, 0) - output.totalSource2ATax),          \r\n          0,\r\n          decimalChar,\r\n          thousands\r\n        ) */\r\n      )\r\n      pdf.tableRowSingle(fill, textColor, x+4.6, y, values2, height, Widths, true);\r\n/* \r\n      pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        x + 4.4,\r\n        y,\r\n        [\r\n          (\r\n            \"$\" +\r\n            formatMoney(\r\n              Math.max(0, output.percentNeed2 - output.totalSource2ATax),\r\n              0,\r\n              decimalChar,\r\n              thousands\r\n            )\r\n          ),\r\n        ],\r\n        height,\r\n        [1]\r\n      ); */\r\n    } else {\r\n      fill = [255, 255, 255];\r\n      pdf.SetFontSize(PxToPt(12));\r\n      pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        x + 3.6,\r\n        y,\r\n        [\r\n          \"(\" +\r\n            (\r\n              formatMoney(output.percentNeed1, 0, decimalChar, thousands)\r\n            ).toString() +\r\n            \"-\" +\r\n            (\r\n              \r\n              formatMoney(output.totalSourceATaxAtDeath, 0, decimalChar, thousands)\r\n            ).toString() +\r\n            \")\",\r\n        ],\r\n        height+.1,\r\n        [1.2]\r\n      );\r\n      pdf.SetFontSize(PxToPt(16));\r\n      fill = [196, 223, 224];\r\n      \r\n      values2=(\r\n        formattedMoneyString(Math.max(0, output.percentNeed1 - output.totalSourceATaxAtDeath),lang)\r\n        /* \"$\" +\r\n        formatMoney(\r\n          Math.max(0, output.percentNeed1 - output.totalSourceATax),\r\n          0,\r\n          decimalChar,\r\n          thousands\r\n        ) */\r\n      )\r\n      pdf.tableRowSingle(fill, textColor, x+4.6, y, values2, height, Widths, true);\r\n      \r\n    }\r\n\r\n    pdf.SetFontSize(PxToPt(16));\r\n    /*       fill = [196, 223, 224];\r\n\r\n\r\n    pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        x + 4.4,\r\n        y,\r\n        [\r\n          (\r\n            \"$\" +\r\n            formatMoney(\r\n              Math.max(0, output.percentNeed1 - output.totalSource),\r\n              0,\r\n              decimalChar,\r\n              thousands\r\n            )\r\n          ),\r\n        ],\r\n        height,\r\n        [1]\r\n      ); */\r\n\r\n    pdf.addFooterAndHeader(headerOffset, footerText, headerText);\r\n\r\n   \r\n   \r\n   \r\n   \r\n   \r\n   \r\n   \r\n   \r\n   \r\n    {\r\n      // remove this page\r\n      /* PAGE 7 Life info anal*/\r\n    } /* \r\n    pdf.addCustomImage(IMAGE_LOGO_OTHERPAGES, pg1TitleY, image);\r\n\r\n    Widths = [4.3, 1.2];\r\n    pdf.SetFont(HELVETICA, NORMAL);\r\n    if (lang === \"en\") pdf.SetFontSize(PxToPt(25));\r\n    else pdf.SetFontSize(PxToPt(20));\r\n\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    pdf.Text(OUTPUTTEXT[lang].pg7T, InToPt(1.5), InToPt(headerOffset+topToTitle_Y\r\n  ));\r\n\r\n    pdf.SetFont(TIMES, NORMAL);\r\n\r\n    pdf.SetFontSize(PxToPt(16));\r\n\r\n    x = 1.5;\r\n    y = headerOffset+titleToPara_Y;\r\n    incY = 0.42;\r\n    height = 0.35;\r\n    //const Widths = 5;\r\n    values = [OUTPUTTEXT[lang].pg7TabT];\r\n    fill = [115, 153, 198];\r\n    textColor = [255, 255, 255];\r\n    pdf.tableRow(fill, textColor, x, y, values, height, [PARA_WIDTH]);\r\n\r\n    fill = [255, 255, 255];\r\n    textColor = [0x45, 0x55, 0x60];\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n\r\n    y += incY + 0.2;\r\n    pdf.MultilineText(\r\n      OUTPUTTEXT[lang].pg7TabRow1,\r\n      InToPt(x + 0.1),\r\n      InToPt(y),\r\n      InToPt(3)\r\n    );\r\n    y += incY / 2;\r\n\r\n    //if (output.hasChild) {\r\n    //\tif (output.ygChild < 18) {\r\n    if (twoNeedPercents) {\r\n      values = [\r\n        OUTPUTTEXT[lang].pg7TabRow2,\r\n        (\r\n          \"$\" +\r\n          formatMoney(\r\n            Math.max(0, output.percentNeed1 - output.totalSource),\r\n            0,\r\n            decimalChar,\r\n            thousands\r\n          )\r\n        ),\r\n      ];\r\n      y += incY;\r\n      pdf.tableRow(fill, textColor, x + 0.1, y, values, height, Widths);\r\n\r\n      values = [\r\n        OUTPUTTEXT[lang].pgTabRowThereAfter,\r\n        (\r\n          \"$\" +\r\n          formatMoney(\r\n            Math.max(0, output.percentNeed2 - output.totalSource2),\r\n            0,\r\n            decimalChar,\r\n            thousands\r\n          )\r\n        ),\r\n      ];\r\n    } else\r\n      values = [\r\n        OUTPUTTEXT[lang].pgTabRowThereAfter,\r\n        (\r\n          \"$\" +\r\n          formatMoney(\r\n            Math.max(0, output.percentNeed1 - output.totalSource),\r\n            0,\r\n            decimalChar,\r\n            thousands\r\n          )\r\n        ),\r\n      ];\r\n\r\n    y += incY;\r\n    pdf.tableRow(fill, textColor, x + 0.1, y, values, height, Widths);\r\n\r\n    values = [OUTPUTTEXT[lang].pg7TabRow4, (output.infRate + \"%\")];\r\n    y += incY;\r\n    pdf.tableRow(fill, textColor, x + 0.1, y, values, height, Widths);\r\n\r\n    y += incY + 0.22;\r\n    pdf.MultilineText(\r\n      OUTPUTTEXT[lang].pg7TabRow5,\r\n      InToPt(x + 0.2),\r\n      InToPt(y),\r\n      InToPt(3)\r\n    );\r\n    pdf.Text(\r\n      (output.invRate + \"%\"),\r\n      InToPt(x + 4.25),\r\n      InToPt(y + 0.21)\r\n    );\r\n\r\n    y += incY + 0.3;\r\n    pdf.DrawLine(InToPt(1.5), InToPt(y - 0.23), InToPt(PARA_WIDTH));\r\n    y += incY - 0.2;\r\n    pdf.MultilineText(\r\n      OUTPUTTEXT[lang].pg7TabRow6,\r\n      InToPt(x + 0.2),\r\n      InToPt(y),\r\n      InToPt(3)\r\n    );\r\n    y += incY - 0.2;\r\n    values = [\r\n      OUTPUTTEXT[lang].pg7TabRow7 + props.LE + \")\",\r\n      (\r\n        \"$\" +\r\n        formatMoney(\r\n          Math.max(0, output.insNeedLE + output.totalAsset - output.totalLiab),\r\n          0,\r\n          decimalChar,\r\n          thousands\r\n        )\r\n      ),\r\n    ];\r\n    y += incY + 0.1;\r\n    pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n\r\n    values = [\r\n      OUTPUTTEXT[lang].pg7TabRow8,\r\n      (\r\n        \"$\" +\r\n        formatMoney(\r\n          Math.max(0, output.insNeedRet + output.totalAsset - output.totalLiab),\r\n          0,\r\n          decimalChar,\r\n          thousands\r\n        )\r\n      ),\r\n    ];\r\n    y += incY;\r\n    pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n\r\n    if (output.hasChild) {\r\n      if (output.ygChild < maxDur) {\r\n        values = [\r\n          OUTPUTTEXT[lang].pg7TabRow9,\r\n          (\r\n            \"$\" +\r\n            formatMoney(\r\n              Math.max(\r\n                0,\r\n                output.insNeedYgChild25 + output.totalAsset - output.totalLiab\r\n              ),\r\n              0,\r\n              decimalChar,\r\n              thousands\r\n            )\r\n          ),\r\n        ];\r\n        y += incY;\r\n        pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n      }\r\n\r\n      if (output.ygChild < orphAge) {\r\n        values = [\r\n          OUTPUTTEXT[lang].pg7TabRow10,\r\n          (\r\n            \"$\" +\r\n            formatMoney(\r\n              Math.max(\r\n                0,\r\n                output.insNeedYgChild18 + output.totalAsset - output.totalLiab\r\n              ),\r\n              0,\r\n              decimalChar,\r\n              thousands\r\n            )\r\n          ),\r\n        ];\r\n        y += incY;\r\n        pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n      }\r\n    }\r\n    //  pdf.AddChart(\"bar1\", InToPt(1.5), InToPt(y + 0.7), InToPt(4), InToPt(2));\r\n\r\n    pdf.addFooterAndHeader(headerOffset,footerText, headerText);\r\n */\r\n    {\r\n      /* PAGE 8 Life info anal 2 */\r\n    }\r\n    result=result && pdf.addCustomImage(IMAGE_LOGO_OTHERPAGES, pg1TitleY, image,false,top);\r\n\r\n    Widths = [4.3, 1.2];\r\n    pdf.SetFont(HELVETICA, NORMAL);\r\n    if (lang === \"en\") pdf.SetFontSize(PxToPt(25));\r\n    else pdf.SetFontSize(PxToPt(20));\r\n\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    pdf.Text(OUTPUTTEXT[lang].pg8T, InToPt(1.5), InToPt(headerOffset + topToTitle_Y\r\n  ));\r\n\r\n    pdf.SetFont(TIMES, NORMAL);\r\n\r\n    pdf.SetFontSize(PxToPt(16));\r\n\r\n    x = 1.5;\r\n    y = headerOffset + titleToPara_Y;\r\n    incY = 0.42;\r\n    height = 0.35;\r\n    //const Widths = 5;\r\n    values = [OUTPUTTEXT[lang].pg8TabT];\r\n    fill = [115, 153, 198];\r\n    textColor = [255, 255, 255];\r\n    pdf.tableRow(fill, textColor, x, y, values, height, [PARA_WIDTH]);\r\n\r\n    fill = [255, 255, 255];\r\n    textColor = [0x45, 0x55, 0x60];\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n\r\n    /* values = [OUTPUTTEXT[lang].pg8TabRow1, (\"$\"+ formatMoney(totalAsset-output.totalLiab, 0,decimalChar,thousands))];\r\n\t  y += incY;\t\r\n\t  pdf.tableRow(fill, textColor, x, y, values, height, Widths); */\r\n\r\n    y += incY + 0.2;\r\n    pdf.MultilineText(\r\n      OUTPUTTEXT[lang].pg8TabRow1,\r\n      InToPt(x),\r\n      InToPt(y),\r\n      InToPt(3)\r\n    );\r\n    pdf.Text(\r\n      (\r\n        formattedMoneyString(output.totalDisposeAsset - output.totalLiab,lang)\r\n        /* \"$\" +\r\n        formatMoney(\r\n          output.totalDisposeAsset - output.totalLiab,\r\n          0,\r\n          decimalChar,\r\n          thousands\r\n        ) */\r\n      ),\r\n      InToPt(x + 4.42),\r\n      InToPt(y + 0.21)\r\n    );\r\n\r\n    y += incY + 0.3;\r\n    pdf.MultilineText(\r\n      OUTPUTTEXT[lang].pg8TabRow2,\r\n      InToPt(x),\r\n      InToPt(y),\r\n      InToPt(3)\r\n    );\r\n    y += incY - 0.1;\r\n\r\n    if(!singleFamily)\r\n    {\r\n    values = [\r\n      OUTPUTTEXT[lang].pg8TabRow3 + props.LE + \")\",\r\n      (\r\n        formattedMoneyString(output.insNeedLE,lang)\r\n        /* \"$\" + formatMoney(output.insNeedLE, 0, decimalChar, thousands) */\r\n      ),\r\n    ];\r\n    y += incY + 0.1;\r\n    pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n  }\r\n\r\n    values = [\r\n      singleFamily? OUTPUTTEXT[lang].pg8TabRow4Alt.replace(\"A. \",\"\"): OUTPUTTEXT[lang].pg8TabRow4,\r\n      (\r\n        formattedMoneyString(output.insNeedRet,lang)\r\n        /* \"$\" + formatMoney(output.insNeedRet, 0, decimalChar, thousands) */\r\n      ),\r\n    ];\r\n    y += incY;\r\n    pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n\r\n    if (output.hasChild) {\r\n      if (output.ygChild < maxDur) {\r\n        values = [\r\n          singleFamily?OUTPUTTEXT[lang].pg8TabRow5.replace(\"C.\",\"B.\").replace(\"25\",output.youngestChildEndAge): OUTPUTTEXT[lang].pg8TabRow5.replace(\"25\",output.youngestChildEndAge),\r\n          (\r\n            formattedMoneyString(output.insNeedYgChild25,lang)\r\n        /* \"$\" +\r\n            formatMoney(output.insNeedYgChild25, 0, decimalChar, thousands) */\r\n          ),\r\n        ];\r\n        y += incY;\r\n        pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n      }\r\n\r\n      if (output.ygChild < orphAge) {\r\n        values = [\r\n          singleFamily?OUTPUTTEXT[lang].pg8TabRow6.replace(\"D.\",\"C.\"): OUTPUTTEXT[lang].pg8TabRow6,\r\n          (\r\n            formattedMoneyString(output.insNeedYgChild18,lang)\r\n        /* \"$\" +\r\n            formatMoney(output.insNeedYgChild18, 0, decimalChar, thousands) */\r\n          ),\r\n        ];\r\n        y += incY;\r\n        pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n      }\r\n    }\r\n    pdf.AddChart(\"bar2\", InToPt(1.5), InToPt(y + 0.7), InToPt(4), InToPt(2));\r\n\r\n    pdf.addFooterAndHeader(headerOffset, footerText, headerText);\r\n\r\n    {\r\n      /* Nptes*/\r\n    }\r\n    result=result && pdf.addCustomImage(IMAGE_LOGO_OTHERPAGES, pg1TitleY, image,false,top);\r\n\r\n    pdf.SetFont(HELVETICA, NORMAL);\r\n    if (lang === \"en\") pdf.SetFontSize(PxToPt(25));\r\n    else pdf.SetFontSize(PxToPt(20));\r\n\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    pdf.Text(OUTPUTTEXT[lang].pg9T, InToPt(1.5), InToPt(headerOffset+topToTitle_Y\r\n  ));\r\n\r\n    paragraph = OUTPUTTEXT[lang].pg9P1;\r\n    pdf.SetFont(TIMES, NORMAL);\r\n    pdf.SetFontSize(PxToPt(16));\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    pdf.MultilineText(paragraph, InToPt(1.5), InToPt(headerOffset+1.8), InToPt(PARA_WIDTH));\r\n\r\n    //pdf.addFooterAndHeader(headerOffset,footerText, headerText);\r\n    pdf.addHeaderNoFooter(headerOffset,headerText);\r\n    {\r\n      /* Acknow*/\r\n    }\r\n    result=result && pdf.addCustomImage(IMAGE_LOGO_OTHERPAGES, pg1TitleY, image,false,top);\r\n\r\n    pdf.SetFont(HELVETICA, NORMAL);\r\n    if (lang === \"en\") pdf.SetFontSize(PxToPt(25));\r\n    else pdf.SetFontSize(PxToPt(20));\r\n\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    pdf.Text(OUTPUTTEXT[lang].pg10T, InToPt(1.5), InToPt(headerOffset + topToTitle_Y\r\n  ));\r\n\r\n    paragraph = OUTPUTTEXT[lang].pg10P1;\r\n    pdf.SetFont(TIMES, NORMAL);\r\n    pdf.SetFontSize(PxToPt(16));\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    pdf.MultilineText(\r\n      paragraph,\r\n      InToPt(1.5),\r\n      InToPt(headerOffset + 1.8),\r\n      InToPt(PARA_WIDTH)\r\n    );\r\n\r\n    pdf.SetFont(TIMES, NORMAL);\r\n\r\n    pdf.SetFontSize(PxToPt(16));\r\n\r\n    x = 1.5;\r\n    y = headerOffset + 3.6;\r\n    incY = 0.42;\r\n    height = 0.35;\r\n    //const Widths = 5;\r\n    fill = [255, 255, 255];\r\n    textColor = [0x45, 0x55, 0x60];\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n\r\n    let yOffset = props.lang === \"fr\" ? 3 : 4;\r\n    y += incY + 0.2;\r\n    pdf.MultilineText(\r\n      OUTPUTTEXT[lang].pg10TabRow1,\r\n      InToPt(x),\r\n      InToPt(y),\r\n      InToPt(4)\r\n    );\r\n    pdf.Text(OUTPUTTEXT[lang].pg10TabRow11, InToPt(x + yOffset), InToPt(y));\r\n\r\n    y += incY;\r\n    pdf.MultilineText(\r\n      OUTPUTTEXT[lang].pg10TabRow2,\r\n      InToPt(x),\r\n      InToPt(y),\r\n      InToPt(4)\r\n    );\r\n    pdf.Text(OUTPUTTEXT[lang].pg10TabRow11, InToPt(x + yOffset), InToPt(y));\r\n\r\n    y += incY;\r\n    pdf.MultilineText(\r\n      OUTPUTTEXT[lang].pg10TabRow3,\r\n      InToPt(x),\r\n      InToPt(y),\r\n      InToPt(4)\r\n    );\r\n    pdf.Text(OUTPUTTEXT[lang].pg10TabRow11, InToPt(x + yOffset), InToPt(y));\r\n\r\n    pdf.Footer(OUTPUTTEXT[lang].pgFooter);\r\n\r\n    if(result===false)\r\n      alert(lang===\"en\"? \"PDF image error, SVG extension is not supported\":\"Erreur d’image PDF, l’extension SVG n’est pas prise en charge\")  \r\n\r\n    // Done\r\n    pdf.Save(\"INA_PDF.pdf\");\r\n  }\r\n}\r\n\r\n","import React, { Component } from \"react\";\r\nimport \"./Output.css\";\r\nimport { Table } from \"react-bootstrap\";\r\nimport {\r\n  CONTROLTITLE,\r\n  DISPLAY_RETIREMENT,\r\n  DISPLAY_LIFEEXP,\r\n  DISPLAY_ENDAGE,\r\n  MAX_ORPHAN_DUR_QC,\r\n  MAX_ORPHAN_DUR_NON_QC,\r\n  ORPHAN_AGE_QC,\r\n  ORPHAN_AGE_NON_QC,\r\n  PROVINCE,\r\n  SEX,\r\n  SMOKING,\r\n  MEMBER,\r\n  QUOTE_CLIENT,\r\n  QUOTE_SPOUSE,\r\n  OUTPUT_WIDTH_PCT,\r\n  IMAGE_APPLET_INA,\r\n  IMAGE_LOGO,\r\n  IMAGE_LOGO_OTHERPAGES,\r\n  APPLET_INA,\r\n} from \"../definitions/generalDefinitions\";\r\nimport { MAX_LOGO_HEIGHT, PAGE_HEIGHT } from \"./PDF\";\r\nimport { getName, getLogoAndAppletImage,formatted,isMobileDevice } from \"../utils/helper\";\r\nimport { setUIDataToAPI } from \"../data/dataExchange\";\r\nimport { handleFetchQueryStringSave } from \"../utils/FetchAPIs\";\r\nimport { OUTPUTTEXT } from \"../definitions/outputDefinitions\";\r\nimport { Bar } from \"react-chartjs-2\";\r\nimport { doSavePdfAction } from \"./OutputPDF\";\r\n//import { AdjustibleImage } from \"./AdjustibleImage\";\r\n//import jsPDF from 'jspdf';\r\n//import * as jsPDF from 'jspdf';\r\nimport {\r\n  cleanFormat,\r\n  formatMoney,\r\n  getListItemKeyFromName,\r\n  numFormat,\r\n  familyProjectionYears,\r\n  isSingleFamily,\r\n  \r\n} from \"../utils/helper\";\r\nimport { getOutputValues } from \"../data/dataExchange\";\r\nimport { getInfoINA, getInfoPDF  } from \"../definitions/infoIconsDefinitions\";\r\nimport { Info } from \"./Info\";\r\n\r\nexport class OutputPresentation extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      image: this.props.dataInput.Presentations[0].adviserLogo,\r\n    };\r\n    this.dateApplet = \"\";\r\n  }\r\n\r\n  doPDF = () => {\r\n    doSavePdfAction(this.props);\r\n  };\r\n\r\n  doLIFO = async () => {\r\n    //window.top.location.href = 'localhost:8086';\r\n    //window.parent.changeLogo();\r\n\r\n    await window.parent.postMessage(\r\n      \"LIFO_\" +\r\n        this.props.dataInput.Presentations[0].language +\r\n        \"_\" +\r\n        this.props.encryptedInputLife1,\r\n      \"*\"\r\n    );\r\n  };\r\n  doWL = async () => {\r\n    //window.top.location.href = 'localhost:8086';\r\n    //window.parent.changeLogo();\r\n    await window.parent.postMessage(\r\n      \"WL_\" +\r\n        this.props.dataInput.Presentations[0].language +\r\n        \"_\" +\r\n        this.props.encryptedInputLife1,\r\n      \"*\"\r\n    );\r\n  };\r\n  doEP = async () => {\r\n    \r\n\r\n    await window.parent.postMessage(\r\n      \"EP_\" +\r\n        this.props.dataInput.Presentations[0].language +\r\n        \"_\" +\r\n        this.props.encryptedInputLife1AndSpouse,\r\n      \"*\"\r\n    );\r\n  };\r\n\r\n  doCompuLife = () => {\r\n    const lang = this.props.dataInput.Presentations[0].language;\r\n   // const formatFr = lang === \"fr\" ? true : false;\r\n    const FA = parseFloat(cleanFormat(this.props.insuranceNeed, lang));\r\n    const province = this.props.dataInput.Presentations[0].provinceKey;\r\n    var today = new Date();\r\n    const birthYr = today.getFullYear() - this.props.dataInput.Clients[0].Age;\r\n    const birthMth = today.getMonth() + 1;\r\n    const birthDay = today.getDate();\r\n    let provinceCode = 2;\r\n    let url = \"http://quotes.ppi.ca/canmain.html?comp=so\";\r\n\r\n    //console.log(url);\r\n    url =\r\n      url +\r\n      \"&lang=\" +\r\n      lang +\r\n      \"&ID=\" +\r\n      \"TKD\" +\r\n      \"&ORIGIN=\" +\r\n      \"TKD\" +\r\n      \"&face=\" +\r\n      parseInt(FA) +\r\n      \"&prepby=\" +\r\n      this.props.dataInput.Presentations[0].designedBy +\r\n      \"&prov=\";\r\n\r\n    if (province === PROVINCE.AB) provinceCode = \"1\";\r\n    else if (province === PROVINCE.BC) provinceCode = \"2\";\r\n    else if (province === PROVINCE.MB) provinceCode = \"3\";\r\n    else if (province === PROVINCE.NB) provinceCode = \"4\";\r\n    else if (province === PROVINCE.NF) provinceCode = \"5\";\r\n    else if (province === PROVINCE.NS) provinceCode = \"6\";\r\n    else if (province === PROVINCE.NT) provinceCode = \"7\";\r\n    else if (province === PROVINCE.NU) provinceCode = \"8\";\r\n    else if (province === PROVINCE.ON) provinceCode = \"9\";\r\n    else if (province === PROVINCE.PE) provinceCode = \"10\";\r\n    else if (province === PROVINCE.QC) provinceCode = \"11\";\r\n    else if (province === PROVINCE.SK) provinceCode = \"12\";\r\n    else if (province === PROVINCE.YU) provinceCode = \"13\";\r\n\r\n    url = url + provinceCode;\r\n   \r\n    {\r\n      url =\r\n        url + \"&prepfor=\" + this.props.dataInput.Presentations[0].designedFor;\r\n      url =\r\n        url + \"&byear=\" + birthYr + \"&bmonth=\" + birthMth + \"&bday=\" + birthDay;\r\n\r\n      url =\r\n        url +\r\n        \"&sex=\" +\r\n        (this.props.dataInput.Clients[0].sexKey === SEX.MALE.Key ? \"M\" : \"F\");\r\n      url =\r\n        url +\r\n        \"&smoker=\" +\r\n        (this.props.dataInput.Clients[0].smokerKey === SMOKING.NON_SMOKER.Key\r\n          ? \"N\"\r\n          : \"Y\");\r\n    }\r\n    //console.log(url);\r\n    const height = Math.min(window.innerHeight - 130 - 20, 800);\r\n    this.externalWindow = window.open(\r\n      url,\r\n      \"_blank\",\r\n      \"width=950,height=\" + height + \",left=25,top=130\"\r\n    );\r\n    this.containerEl = this.externalWindow.document.createElement(\"div\");\r\n    this.externalWindow.document.body.appendChild(this.containerEl);\r\n\r\n    /* try {\r\n      window.open(url, \"_blank\");\r\n    } catch (e) {} */\r\n  };\r\n\r\n  /* onImageChange = (event) => {\r\n    if (event.target.files && event.target.files[0]) {\r\n      this.setState({\r\n        image: URL.createObjectURL(event.target.files[0])\r\n      });\r\n    }\r\n   }\r\n */\r\n\r\n   \r\n\r\n  render() {\r\n    // presentation output shared with pdf\r\n    \r\n    let output = getOutputValues(this.props);\r\n    const lang = this.props.dataInput.Presentations[0].language;\r\n    const labelsBilingual = OUTPUTTEXT[lang];\r\n    const decimalChar = lang === \"en\" ? \".\" : \",\";\r\n    const thousands = lang === \"en\" ? \",\" : \" \";\r\n    const formatFr = lang === \"fr\" ? true : false;\r\n    const dollarEn= lang === \"fr\" ? \"\" : \"$\";\r\n    const dollarFr= lang === \"fr\" ? \"$\" : \"\";\r\n\r\n    const clients = this.props.dataInput.Clients;\r\n    const projYears = familyProjectionYears(\r\n      clients,\r\n      this.props.dataInput.Presentations[0].periodOption,\r\n      this.props.LE,\r\n      this.props.LE\r\n    );\r\n    const projectEnd = projYears.projectionEnd;\r\n    const protectionPeriod = projYears.noProjectionYrs;\r\n    const minAge = projYears.survivorAge;\r\n    const singleFamily = isSingleFamily(clients);\r\n    const noSurvivor = clients.length === 1;\r\n\r\n    \r\n    \r\n\r\n    //const insNeedLine= getInsNeedLine(this.props.dataInput.Presentations[0], this.props.projectEnd, lang,noSurvivor,singleFamily,protectionPeriod)\r\n\r\n    /* const protectionPeriod=this.props.projectEnd-minAge  */\r\n\r\n    const provinceKey = getListItemKeyFromName(PROVINCE, output.province);\r\n    let maxDur =\r\n      provinceKey === \"QC\" ? MAX_ORPHAN_DUR_QC : MAX_ORPHAN_DUR_NON_QC;\r\n    let orphAge = provinceKey === \"QC\" ? ORPHAN_AGE_QC : ORPHAN_AGE_NON_QC;\r\n\r\n    // graph details\r\n    const options = {\r\n      legend: {\r\n        display: false,\r\n      },\r\n      responsive: true,\r\n      maintainAspectRatio: false,\r\n      scales: {\r\n        xAxes: [{ stacked: true }],\r\n        yAxes: [\r\n          {\r\n            stacked: true,\r\n            /* ticks: {\r\n              beginAtZero: true,\r\n              steps: 10,\r\n              stepValue: 5,\r\n            }, */\r\n            ticks: {\r\n              beginAtZero: true,\r\n              callback: function (value, index, values) {\r\n                let result =\r\n                  value < 1000\r\n                    ? value\r\n                    : Intl.NumberFormat(lang).format(value / 1000) + \"K\"\r\n                return result;\r\n              },\r\n            },\r\n\r\n\r\n          },\r\n        ],\r\n      },\r\n    };\r\n\r\n    // //console.log(output)\r\n\r\n    var dataLabels = [\"A\", \"B\"];\r\n    /* var dataValues = [\r\n      output.insNeedLE + output.totalAsset - output.totalLiab,\r\n      output.insNeedRet + output.totalAsset - output.totalLiab,\r\n    ]; */\r\n    var dColor = [\"#7399c6\", \"#d9d3a4\"];\r\n    const under25 =\r\n      output.ygChild < maxDur\r\n        ? output.insNeedYgChild25 + output.totalAsset - output.totalLiab\r\n        : 0;\r\n    const under18 =\r\n      output.ygChild < orphAge\r\n        ? output.insNeedYgChild18 + output.totalAsset - output.totalLiab\r\n        : 0;\r\n\r\n    let youngestChildEndAge=maxDur \r\n    if (output.hasChild)\r\n      {\r\n        youngestChildEndAge=Math.min(maxDur , this.props.dataInput.Clients.filter((item)=> { return item.Age===output.ygChild})[0].retirementAge)\r\n    \r\n        \r\n      }\r\n    \r\n    \r\n    if (output.hasChild) {\r\n      dataLabels = [\"A\", \"B\", \"C\", \"D\"];\r\n      /* dataValues = [\r\n        output.insNeedLE + output.totalAsset - output.totalLiab,\r\n        output.insNeedRet + output.totalAsset - output.totalLiab,\r\n        under25,\r\n        under18,\r\n      ]; */\r\n      dColor = [\"#7399c6\", \"#d9d3a4\", \"#949ca1\", \"#847a18\"];\r\n    }\r\n\r\n    /* console.log(output.clients) */\r\n    var dataValues2 = [output.insNeedLE, output.insNeedRet];\r\n    if (output.hasChild) {\r\n      if(singleFamily)\r\n      {\r\n        dataLabels = [\"A\", \"B\", \"C\"];\r\n        dataValues2 = [\r\n          output.insNeedRet,\r\n          output.insNeedYgChild25,\r\n          output.insNeedYgChild18,\r\n        ];\r\n        dColor = [\"#d9d3a4\", \"#949ca1\", \"#847a18\"];\r\n      }\r\n      else{\r\n      dataLabels = [\"A\", \"B\", \"C\", \"D\"];\r\n      dataValues2 = [\r\n        output.insNeedLE,\r\n        output.insNeedRet,\r\n        output.insNeedYgChild25,\r\n        output.insNeedYgChild18,\r\n      ];\r\n      dColor = [\"#7399c6\", \"#d9d3a4\", \"#949ca1\", \"#847a18\"];\r\n    }\r\n    }\r\n\r\n    /* const dataInsurance = {\r\n      labels: dataLabels,\r\n      datasets: [\r\n        {\r\n          label: \"\", //Income Shortfall',\r\n          data: dataValues,\r\n          fill: false, // Don't fill area under the line\r\n          borderColor: \"#2B3856\", // Line color\r\n          backgroundColor: dColor,\r\n        },\r\n      ],\r\n    };\r\n */\r\n    const dataInsurance2 = {\r\n      labels: dataLabels,\r\n      datasets: [\r\n        {\r\n          label: \"\", //Income Shortfall',\r\n          data: dataValues2,\r\n          fill: false, // Don't fill area under the line\r\n          borderColor: \"#2B3856\", // Line color\r\n          backgroundColor: dColor,\r\n        },\r\n      ],\r\n    };\r\n\r\n    const needTo = this.props.insNeedLine;\r\n    const images = getLogoAndAppletImage(\r\n      this.props.dataInput,\r\n      this.props.imageRemove,\r\n      this.props.imageAdjust\r\n    );\r\n\r\n    const logoTop = images.logoTop;\r\n    const logoBottom = images.logoBottom;\r\n\r\n    const PDFTopMargin=singleFamily?0:-37  \r\n\r\n    if (noSurvivor) {\r\n      return (\r\n        <div>\r\n          <h3 className=\"ppi1\">{needTo}</h3>\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          <div className=\"exportArea\"/*  style={{ width: \"20%\", float: \"right\", clear: \"left\" }} */>\r\n          \r\n          <div style={{ width: \"100%\", float: \"left\", clear: \"left\" }}>\r\n          \r\n            <input\r\n              className=\"roundedCornerCmd\"\r\n              style={{\r\n             //   width: \"80px\",\r\n                marginTop: PDFTopMargin-35 +\"px\",\r\n                marginRight: \"0px\",\r\n                paddingRight: \"8px\",\r\n                float: \"right\",\r\n              }}\r\n              onClick={this.doPDF}\r\n              type=\"button\"\r\n              value={CONTROLTITLE[lang].pdf}\r\n            /> {<div style={{\r\n              //   width: \"80px\",\r\n                 marginTop: PDFTopMargin-26 +\"px\",\r\n                 marginRight: lang===\"en\"? \"122px\":\"180px\",\r\n                 paddingRight: \"8px\",\r\n                 float: \"right\",\r\n               }}><Info infoIcon={getInfoPDF(lang)}/></div>} \r\n           \r\n          </div>\r\n          <div style={{ width: \"100%\", float: \"left\", clear: \"left\" }}>\r\n            {/* <input type=\"file\" onChange={this.onImageChange} id=\"logo\"/> */}\r\n\r\n            <input\r\n              className=\"roundedCornerCmd\"\r\n              style={{\r\n               // width: \"180px\",\r\n                marginTop: PDFTopMargin + \"px\",\r\n                paddingRight: \"8px\",\r\n                float: \"right\",\r\n              }}\r\n              onClick={this.doCompuLife}\r\n              type=\"button\"\r\n              value={CONTROLTITLE[lang].compulife}\r\n            />\r\n          </div>\r\n          <div style={{ width: \"100%\", float: \"left\", clear: \"left\" }}>\r\n            <input\r\n              className=\"roundedCornerCmd\"\r\n              style={{\r\n           //     width: \"180px\",\r\n                marginTop: \"10px\",\r\n                marginRight: \"0px\",\r\n                paddingRight: \"8px\",\r\n                float: \"right\",\r\n              }}\r\n              onClick={this.doEP}\r\n              type=\"button\"\r\n              value={CONTROLTITLE[lang].ep}\r\n            />\r\n          </div>\r\n          <div style={{ width: \"100%\", float: \"left\", clear: \"left\" }}>\r\n            <input\r\n              className=\"roundedCornerCmd\"\r\n              style={{\r\n            //    width: \"80px\",\r\n                marginTop: \"0px\",\r\n                marginRight: \"0px\",\r\n                paddingRight: \"8px\",\r\n                float: \"right\",\r\n              }}\r\n              onClick={this.doLIFO}\r\n              type=\"button\"\r\n              value={CONTROLTITLE[lang].lifo}\r\n            />\r\n          </div>\r\n          <div style={{ width: \"100%\", float: \"left\", clear: \"left\" }}>\r\n            <input\r\n              className=\"roundedCornerCmd\"\r\n              style={{\r\n            //    width: \"80px\",\r\n                marginTop: \"0px\",\r\n                marginRight: \"0px\",\r\n                paddingRight: \"8px\",\r\n                float: \"right\",\r\n              }}\r\n              onClick={this.doWL}\r\n              type=\"button\"\r\n              value={CONTROLTITLE[lang].wl}\r\n            />\r\n          </div>\r\n          </div>\r\n          <div className=\"contentPres\">\r\n            <h3 className=\"ppi1\">\r\n              {needTo}\r\n              {/* : {dollarEn}\r\n          {formatMoney(\r\n            cleanFormat(this.props.insuranceNeed, formatFr),\r\n            0,\r\n            decimalChar,\r\n            thousands\r\n          ) */}\r\n              <Info infoIcon={getInfoINA(lang)} />\r\n            </h3>\r\n\r\n             \r\n              {/* add logo */}\r\n              {images.logo1stPage}\r\n              {/* add image */}\r\n              {images.applet}\r\n\r\n            \r\n              <h1 className=\"ppi1\">{labelsBilingual.pg1T}</h1>\r\n              <h5 className=\"ppi2\">\r\n                {labelsBilingual.pg1P1} {output.designedFor}\r\n                <br />\r\n                {labelsBilingual.pg1P2} {output.designedBy}\r\n                <br />\r\n                {labelsBilingual.pg1P3} {output.dateApplet}\r\n                <br />\r\n                {labelsBilingual.pg1P4} {output.province}\r\n                <br />\r\n              </h5>\r\n              {logoBottom}\r\n              {/* PAGE 2 profile*/}\r\n              <hr className=\"ppi1\" />\r\n              {logoTop}\r\n              <h2 className=\"ppi1\">{labelsBilingual.pg1T}</h2>\r\n              <div\r\n                style={{\r\n                  overflowX: \"auto\",\r\n                  overflowY: \"hidden\",\r\n                  width: \"100%\",\r\n                }}\r\n              >\r\n                <table className=\"blueTable\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th style={{ width: \"30%\", marginLeft: \"0px\" }}>\r\n                        {labelsBilingual.pg2TabT1}\r\n                      </th>\r\n                      <th style={{ width: \"10%\" }}>\r\n                        {labelsBilingual.pg2TabT2}\r\n                      </th>\r\n                      <th style={{ width: \"18%\" }}>\r\n                        {labelsBilingual.pg2TabT3}\r\n                      </th>\r\n                      <th style={{ width: \"19%\" }}>\r\n                        {singleFamily\r\n                          ? labelsBilingual.pg2TabT4Alt\r\n                          : labelsBilingual.pg2TabT4}\r\n                      </th>\r\n                      <th style={{ width: \"19%\" }}>\r\n                        {labelsBilingual.pg2TabT5}\r\n                      </th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {output.clients.map((item) => (\r\n                      <tr key={item.id}>\r\n                        <td>\r\n                          {item.memberKey === MEMBER.CLIENT.Key\r\n                            ? MEMBER.CLIENT.value[lang] + getName(item.name,lang)\r\n                            : item.memberKey === MEMBER.SPOUSE.Key\r\n                            ? MEMBER.SPOUSE.value[lang] + getName(item.name,lang)\r\n                            : (item.memberKey === MEMBER.CHILD.Key? MEMBER.CHILD.value[lang] + getName(item.name,lang):MEMBER.DEPENDENT_ADULT.value[lang] + getName(item.name,lang))}\r\n                        </td>\r\n                        <td className=\"textalignright\">{item.age}</td>\r\n                        <td className=\"textalignright\">\r\n                        {formatted(item.income,lang)}\r\n                        {/* {dollarFr}\r\n                          {formatMoney(\r\n                            item.income,\r\n                            0,\r\n                            decimalChar,\r\n                            thousands\r\n                          )} */}\r\n                        </td>\r\n                        <td className=\"textalignright\">\r\n                          {singleFamily\r\n                            ? item.memberKey === MEMBER.CLIENT.Key\r\n                              ? \"-\"\r\n                              : item.ret-item.age //protectionPeriod\r\n                            : item.ret}\r\n                        </td>\r\n                        <td className=\"textalignright\">\r\n                          {item.memberKey === MEMBER.CLIENT.Key\r\n                            ? numFormat(\r\n                                clients[QUOTE_CLIENT].avgTaxRate,\r\n                                false,\r\n                                3, thousands,\r\n                                decimalChar\r\n                              )\r\n                            : item.memberKey === MEMBER.SPOUSE.Key\r\n                            ? numFormat(\r\n                                clients[QUOTE_SPOUSE].avgTaxRate,\r\n                                false,\r\n                                3,thousands,\r\n                                decimalChar\r\n                              )\r\n                            : numFormat(\r\n                                clients[item.id - 1].avgTaxRate,\r\n                                false,\r\n                                3,thousands,\r\n                                decimalChar\r\n                              )}\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                    {/*}\t\t\t<tr>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<td>Client</td><td className=\"textalignrightwidth110\">{dollarEn}{formatMoney(Income, 0,decimalChar,thousands)}</td><td className=\"textalignright\">{retAge}</td><td className=\"textalignright\">{retAge}</td></tr>\r\n\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<td>Spouse</td><td className=\"textalignrightwidth110\">{dollarEn}{formatMoney(Income2, 0,decimalChar,thousands)}</td><td className=\"textalignright\">{retAge2}</td><td className=\"textalignright\">{retAge}</td></tr>\r\n\t\t\t\t\t\t*/}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n              {/* financial summary\r\n               */}\r\n              <h4 className=\"ppi1\"></h4>\r\n              <div className=\"tableTitle\">{labelsBilingual.pg2T3}</div>\r\n              <table className=\"incomePosition\">\r\n                <tbody>\r\n                  <tr>\r\n                    <td className=\"paddingleft25\">{labelsBilingual.pg2P5}</td>\r\n                    <td className=\"textalignright\">\r\n                      {formatted(output.totalAssetExcludeInsurance,lang)}\r\n                      {/* {dollarEn}\r\n                      {formatMoney(\r\n                        output.totalAssetExcludeInsurance,\r\n                        0,\r\n                        decimalChar,\r\n                        thousands\r\n                      )} */}\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td className=\"paddingleft25\">{labelsBilingual.pg2P6}</td>\r\n                    <td className=\"textalignright\">\r\n                    {formatted(output.totalLiabExcludeDeathRelated,lang)}\r\n                      {/* {dollarEn}\r\n                      {formatMoney(\r\n                        output.totalLiabExcludeDeathRelated,\r\n                        0,\r\n                        decimalChar,\r\n                        thousands\r\n                      )} */}\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td\r\n                      className=\"paddingleft25\"\r\n                      style={{ textAlign: \"right\" }}\r\n                    >\r\n                      {labelsBilingual.pg2P7}\r\n                    </td>\r\n                    <td className=\"textalignright\">\r\n                    {formatted(output.totalAssetExcludeInsurance -\r\n                          output.totalLiabExcludeDeathRelated,lang)}\r\n                    \r\n                    {/*   {dollarEn}\r\n                      {formatMoney(\r\n                        output.totalAssetExcludeInsurance -\r\n                          output.totalLiabExcludeDeathRelated,\r\n                        0,\r\n                        decimalChar,\r\n                        thousands\r\n                      )} */}\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td className=\"paddingleft25\">{labelsBilingual.pg2P8}</td>\r\n                    <td className=\"textalignright\">\r\n                    {formatted(output.totalAssetInsurance + output.govDB,lang)}\r\n                    \r\n                    {/*   {dollarEn}\r\n                      {formatMoney(\r\n                        output.totalAssetInsurance + output.govDB,\r\n                        0,\r\n                        decimalChar,\r\n                        thousands\r\n                      )} */}\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td className=\"paddingleft25\">{labelsBilingual.pg2P9}</td>\r\n                    <td className=\"textalignright\">\r\n                    {formatted(output.totalLiab - output.totalLiabExcludeDeathRelated,lang)}\r\n                    {/* \r\n                      {dollarEn}\r\n                      {formatMoney(\r\n                        output.totalLiab - output.totalLiabExcludeDeathRelated,\r\n                        0,\r\n                        decimalChar,\r\n                        thousands\r\n                      )} */}\r\n                    </td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n              {/* assumptions <h2 className=\"ppi1\">{labelsBilingual.pg2T2}</h2> */}\r\n              <h4 className=\"ppi1\"></h4>\r\n              <div className=\"tableTitle\">{labelsBilingual.pg2T2}</div>\r\n              <table className=\"incomePosition\">\r\n                <tbody>\r\n                  <tr>\r\n                    <td className=\"paddingleft25\">\r\n                      {labelsBilingual.pg7TabRow4}\r\n                    </td>\r\n                    <td className=\"textalignright\">\r\n                      {numFormat(output.infRate, false, 3,thousands, decimalChar)}\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td className=\"paddingleft25\">\r\n                      {labelsBilingual.pg7TabRow5}\r\n                    </td>\r\n                    <td className=\"textalignright\">\r\n                      {numFormat(output.invRate, false, 3,thousands, decimalChar)}\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td className=\"paddingleft25\">\r\n                      {labelsBilingual.pg2TabT6}\r\n                    </td>\r\n                    <td className=\"textalignright\">\r\n                      {numFormat(\r\n                        this.props.dataInput.Presentations[0].taxRate,\r\n                        false,\r\n                        3,thousands,\r\n                        decimalChar\r\n                      )}\r\n                    </td>\r\n                  </tr>\r\n                  <tr></tr>\r\n                  <tr></tr>\r\n                  <tr></tr>\r\n                  {/* <tr >\r\n                  <td className=\"backgroundcolorFFFFFF\" colSpan=\"2\" >\r\n                    {labelsBilingual.pg2Tab3}\r\n                  </td> \r\n                </tr>*/}\r\n                </tbody>\r\n              </table>\r\n              <p className=\"ppi1\" style={{ width: \"90%\" }}>\r\n                {labelsBilingual.pg2Tab2}\r\n              </p>\r\n              <p className=\"ppi1\" style={{ width: \"90%\" }}>\r\n                {labelsBilingual.pg2Tab3}\r\n              </p>\r\n              {/* Notes */}\r\n              {/* <h4 className=\"ppi1\"></h4>\r\n              <div className=\"tableTitle\">{labelsBilingual.pg9T}</div>\r\n              <p className=\"ppi1\">{labelsBilingual.pg9P1}</p>\r\n              <p />\r\n */}              {logoBottom}\r\n              {/* PAGE 3 Family Cash Needs at Death Combine with Income needs*/}\r\n              <hr className=\"ppi1\" />\r\n              {logoTop}\r\n              <br />\r\n              <h2 className=\"ppi1\">{labelsBilingual.pg3T}</h2>\r\n              <p className=\"ppi1\">{labelsBilingual.pg3P1}</p>\r\n              <div\r\n                style={{\r\n                  overflowX: \"auto\",\r\n                  overflowY: \"hidden\",\r\n                  width: \"100%\",\r\n                }}\r\n              >\r\n                <div className=\"tableTitle\">{labelsBilingual.pg3TabT}</div>\r\n                <table className=\"cashNeeds\">\r\n                  <thead></thead>\r\n                  <tbody>\r\n                    {output.liabilities.map((item) => (\r\n                      <tr key={item.name}>\r\n                        <td style={{ width: \"50%\" }}>{item.name}</td>\r\n                        <td className=\"textalignright\">\r\n                        {formatted(item.value,lang)}\r\n                    \r\n                    {/*       {dollarEn}{formatMoney(item.value, 0, decimalChar, thousands)} */}\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                    <tr className=\"backgroundcolorDCE5F0\">\r\n                      <td>\r\n                        <strong>{labelsBilingual.pg3TabRTot}</strong>\r\n                      </td>\r\n                      <td className=\"textalignrightpaddingright20\">\r\n                        <strong>\r\n                        {formatted(output.totalLiab,lang)}\r\n                    \r\n                    {/*       {dollarEn}\r\n                          {formatMoney(\r\n                            output.totalLiab,\r\n                            0,\r\n                            decimalChar,\r\n                            thousands\r\n                          )} */}\r\n                        </strong>\r\n                      </td>\r\n                    </tr>\r\n                    {/*\t<tr className=\"backgroundcolorDCE5F0\">\r\n\t\t\t\t\t\t\t\t<td><strong>Permanent Cash Needs <sup>p</sup></strong></td>\r\n\t\t\t\t\t\t\t\t\t\t<td className=\"textalignright\"><strong>{dollarEn}200 <sup>p</sup></strong></td>\r\n\t\t\t\t\t\t\t\t\t</tr>*/}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n              {/* combined with pg 3 PAGE 4 Family Income Needs at Death*/}\r\n              {/* <br />\r\n          <hr className=\"ppi1\" />\r\n          <h2 className=\"ppi1\">{labelsBilingual.pg4T}</h2>\r\n          <p className=\"ppi1\">{labelsBilingual.pg4P1}</p>*/}\r\n              <h4 className=\"ppi1\"></h4>\r\n              <div\r\n                style={{\r\n                  overflowX: \"auto\",\r\n                  overflowY: \"hidden\",\r\n                  width: \"100%\",\r\n                }}\r\n              >\r\n                <div className=\"tableTitle\">{labelsBilingual.pg4TabT}</div>\r\n                <table className=\"incomeNeeds\">\r\n                  <thead></thead>\r\n                  <tbody>\r\n                    <tr>\r\n                      <td className=\"paddingleft25\" style={{ width: \"70%\" }}>\r\n                        {labelsBilingual.pg4TabRow1}\r\n                      </td>\r\n                      <td className=\"textalignright\">\r\n                      {formatted( output.Income + output.Income2,lang)}\r\n                    \r\n                    {/*     {dollarEn}\r\n                        {formatMoney(\r\n                          output.Income + output.Income2,\r\n                          0,\r\n                          decimalChar,\r\n                          thousands\r\n                        )} */}\r\n                      </td>\r\n                    </tr>\r\n                    <tr className=\"backgroundcolorFFFFFF\">\r\n                      <td>\r\n                        <br />\r\n                        {labelsBilingual.pg4TabRow2}\r\n                      </td>\r\n                      <td></td>\r\n                    </tr>\r\n\r\n                    {output.percent2.length > 0 && (\r\n                      <tr>\r\n                        <td className=\"paddingleft25\">\r\n                          {labelsBilingual.pg4TabRow3}\r\n                        </td>\r\n                        <td className=\"textalignright\">{output.percent1}%</td>\r\n                      </tr>\r\n                    )}\r\n                    {output.percent2.length > 0 && (\r\n                      <tr>\r\n                        <td className=\"paddingleft25\">\r\n                          {labelsBilingual.pg4TabRow4}\r\n                        </td>\r\n                        <td className=\"textalignright\">{output.percent2.map((item) => <span>{item}% </span>)}</td>\r\n                      </tr>\r\n                    )}\r\n                    {output.percent2.length === 0 && (\r\n                      <tr>\r\n                        <td className=\"paddingleft25\">\r\n                          {labelsBilingual.pg4TabRow4}\r\n                        </td>\r\n                        <td className=\"textalignright\">{output.percent1}%</td>\r\n                      </tr>\r\n                    )}\r\n\r\n                    <tr className=\"backgroundcolorFFFFFF\">\r\n                      <td></td>\r\n                      <td></td>\r\n                    </tr>\r\n                    <tr className=\"backgroundcolorFFFFFF\">\r\n                      <td>{labelsBilingual.pg4TabRow5}</td>\r\n                      <td></td>\r\n                    </tr>\r\n                    {output.percent2.length > 0 && (\r\n                      <tr>\r\n                        <td className=\"paddingleft25\">\r\n                          {labelsBilingual.pgTabRowMoreIncome}\r\n                        </td>\r\n                        <td className=\"textalignright\">\r\n                        {formatted(output.percentNeed1,lang)}\r\n                    \r\n                    {/*       {dollarEn}\r\n                          {formatMoney(\r\n                            output.percentNeed1,\r\n                            0,\r\n                            decimalChar,\r\n                            thousands\r\n                          )} */}\r\n                        </td>\r\n                      </tr>\r\n                    )}\r\n                    {output.percent2.length > 0 && (\r\n                      <tr>\r\n                        <td className=\"paddingleft25\">\r\n                          {labelsBilingual.pgTabRowThereAfter}\r\n                        </td>\r\n                        <td className=\"textalignright\">\r\n                        {formatted(output.percentNeed2.reduce((a, b) => a + b, 0),lang)}\r\n                    \r\n                    {/*       {dollarEn}\r\n                          {formatMoney(\r\n                            output.percentNeed2.reduce((a, b) => a + b, 0),\r\n                            0,\r\n                            decimalChar,\r\n                            thousands\r\n                          )} */}\r\n                        </td>\r\n                      </tr>\r\n                    )}\r\n                    {output.percent2.length === 0 && (\r\n                      <tr>\r\n                        <td className=\"paddingleft25\">\r\n                          {labelsBilingual.pgTabRowThereAfter}\r\n                        </td>\r\n                        <td className=\"textalignright\">\r\n                        {formatted(output.percentNeed1,lang)}\r\n                    \r\n                          {/* {dollarEn}\r\n                          {formatMoney(\r\n                            output.percentNeed1,\r\n                            0,\r\n                            decimalChar,\r\n                            thousands\r\n                          )} */}\r\n                        </td>\r\n                      </tr>\r\n                    )}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n              <br />\r\n              <hr className=\"ppi1\" />\r\n              {logoBottom}\r\n              {/* PAGE 5 Family Cash Sourcess at Death*/}\r\n              {logoTop}\r\n              <h2 className=\"ppi1\">{labelsBilingual.pg5T}</h2>\r\n              <div\r\n                style={{\r\n                  overflowX: \"auto\",\r\n                  overflowY: \"hidden\",\r\n                  width: \"100%\",\r\n                }}\r\n              >\r\n                <table className=\"tableTitle\" style={{ width: \"90%\"}}>\r\n                <tr >  <td  style={{ width: \"50%\",border:\"none\" }}>{labelsBilingual.pg5TabT}</td>\r\n                  <td style={{ width: \"25%\",border:\"none\" }}>\r\n                    {labelsBilingual.pg5TabT2}\r\n                  </td>\r\n                  <td style={{ width: \"25%\",border:\"none\" }}>\r\n                    {labelsBilingual.pg5TabT3}\r\n                  </td>    </tr>\r\n                 </table>\r\n                \r\n               <table className=\"cashSources\">\r\n                  <tbody>\r\n                    {/* add gov db*/}\r\n                    <tr>\r\n                      <td style={{ height: \"1px\", width: \"50%\" }}>\r\n                        {labelsBilingual.pg5TabRow1}\r\n                      </td>\r\n                      <td\r\n                        className=\"textalignright\"\r\n                        style={{ height: \"1px\", width: \"25%\" }}\r\n                      >\r\n                        {formatted(output.govDB,lang)}\r\n                    \r\n                    {/*     {dollarEn}{formatMoney(output.govDB, 0, decimalChar, thousands)} */}\r\n                      </td>\r\n                      <td\r\n                        className=\"textalignright\"\r\n                        style={{ height: \"1px\", width: \"25%\" }}\r\n                      >\r\n                        {formatted(output.govDB,lang)}\r\n                    \r\n                    {/*     {dollarEn}{formatMoney(output.govDB, 0, decimalChar, thousands)} */}\r\n                      </td>\r\n                    </tr>\r\n                    {output.assets.map((item) => (\r\n                      <tr key={item.name}>\r\n                        <td style={{ height: \"1px\", width: \"50%\" }}>\r\n                          {item.name}\r\n                        </td>\r\n                        <td\r\n                          className=\"textalignright\"\r\n                          style={{ height: \"1px\", width: \"25%\" }}\r\n                        >\r\n                          {formatted(item.value,lang)}\r\n                    \r\n                    {/*       {dollarEn}{formatMoney(item.value, 0, decimalChar, thousands)} */}\r\n                        </td>\r\n                        <td\r\n                          className=\"textalignright\"\r\n                          style={{ height: \"1px\", width: \"25%\" }}\r\n                        >\r\n                          {item.disposeValue > 0\r\n                            ? \r\n                            formatted(item.disposeValue,lang)\r\n                              /* {dollarEn} +\r\n                              formatMoney(\r\n                                item.disposeValue,\r\n                                0,\r\n                                decimalChar,\r\n                                thousands\r\n                              ) */\r\n                            : \"\"}\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                    <tr className=\"backgroundcolorDCE5F0\">\r\n                      <td>{labelsBilingual.pg5TabRow3}</td>\r\n                      {/* <td className=\"textalignright\">\r\n                    {dollarEn}{formatMoney(output.totalAsset, 0, decimalChar, thousands)}\r\n                  </td> */}\r\n                      <td className=\"textalignright\">\r\n                      {formatted(output.totalAsset,lang)}\r\n                    {/* \r\n                        {dollarEn}\r\n                        {formatMoney(\r\n                          output.totalAsset,\r\n                          0,\r\n                          decimalChar,\r\n                          thousands\r\n                        )} */}\r\n                      </td>\r\n                      <td className=\"textalignright\">\r\n                      {formatted(output.totalDisposeAsset,lang)}\r\n                    \r\n                    {/*     {dollarEn}\r\n                        {formatMoney(\r\n                          output.totalDisposeAsset,\r\n                          0,\r\n                          decimalChar,\r\n                          thousands\r\n                        )} */}\r\n                      </td>\r\n                    </tr>\r\n                    <tr className=\"backgroundcolorDCE5F0\">\r\n                      <td>{labelsBilingual.pg5TabRow4}</td>\r\n                      <td> </td>\r\n                      <td\r\n                        className=\"textalignright\"\r\n                        style={{ height: \"1px\", width: \"25%\" }}\r\n                      >\r\n                        {formatted(output.totalLiab,lang)}\r\n                    {/* \r\n                        {dollarEn}\r\n                        {formatMoney(\r\n                          output.totalLiab,\r\n                          0,\r\n                          decimalChar,\r\n                          thousands\r\n                        )} */}\r\n                      </td>\r\n                    </tr>\r\n                    <tr>\r\n                      <td>{labelsBilingual.pg5TabRow5}</td>\r\n                      <td> </td>\r\n                      <td className=\"textalignright\">\r\n                      {formatted(output.totalDisposeAsset - output.totalLiab,lang)}\r\n                    \r\n                    {/*     {dollarEn}\r\n                        {formatMoney(\r\n                          output.totalDisposeAsset - output.totalLiab,\r\n                          0,\r\n                          decimalChar,\r\n                          thousands\r\n                        )} */}\r\n                      </td>\r\n                    </tr>\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n              <hr className=\"ppi1\" />\r\n              {logoBottom}\r\n              {/* PAGE 6 Family Income Sources at Death*/}\r\n              {logoTop}\r\n              <br />\r\n              <h2 className=\"ppi1\">{labelsBilingual.pg6T}</h2>\r\n              <div\r\n                style={{\r\n                  overflowX: \"auto\",\r\n                  overflowY: \"hidden\",\r\n                  width: \"100%\",\r\n                }}\r\n              >\r\n                {/* <div className=\"tableTitle\">{labelsBilingual.pg6TabT}</div> */}\r\n                <table className=\"tableTitle\" style={{ width: \"90%\"}}>\r\n                <tr >  <td  style={{ width: \"51%\",border:\"none\" }}>{labelsBilingual.pg6TabT}</td>\r\n                  <td style={{ width: \"14%\",border:\"none\" }}>\r\n                    {labelsBilingual.pg5TabT2}\r\n                  </td>\r\n                  <td style={{ width: \"25%\",border:\"none\" }}>\r\n                    {labelsBilingual.pg5TabT3}\r\n                  </td>    </tr>\r\n                 </table>\r\n                \r\n           \r\n\r\n\r\n                <table className=\"incomeSources\">\r\n                  <tbody>\r\n                    {output.sources.map((item) => (\r\n                      <tr key={item.name}>\r\n                        <td style={{ width: \"51%\" }}>{item.name}</td>\r\n                        <td className=\"textalignright\"  style={{ width: \"14%\" }}>\r\n                        {formatted(item.value,lang)}\r\n                          </td>\r\n                        <td className=\"textalignright\"  style={{ width: \"25%\" }}>\r\n                        {formatted(item.valueAtDeath,lang)}\r\n                          </td>\r\n                      </tr>\r\n                    ))}\r\n                    <tr className=\"backgroundcolorFFFFFF\">\r\n                      <td colSpan =\"2\"></td>\r\n                      <td colSpan =\"2\"></td>\r\n                    </tr>\r\n                    <tr className=\"backgroundcolorFFFFFF\">\r\n                    <td colSpan =\"2\">{labelsBilingual.pg6TabRow1}</td>\r\n                    <td colSpan =\"2\"></td>\r\n                    </tr>\r\n                    {output.percent2.length > 0 && (\r\n                      <tr>\r\n                        <td colSpan =\"2\" className=\"paddingleft25\">\r\n                          {labelsBilingual.pg6TabRow2}\r\n                        </td>\r\n                        <td colSpan =\"2\" className=\"textalignright\">\r\n                          <span\r\n                            style={{ fontSize: \"10px\", marginRight: \"30px\" }}\r\n                          >\r\n                            ({labelsBilingual.pg6Net + \" \"}\r\n                            {formatMoney(\r\n                              //output.totalSourceATax,\r\n                              output.totalSourceATaxAtDeath,\r\n                              0,\r\n                              decimalChar,\r\n                              thousands\r\n                            )}\r\n                            )\r\n                          </span>\r\n                          {/* {formatted(output.totalSource,lang)} */}\r\n                          {formatted(output.totalSourceAtDeath,lang)}\r\n                    \r\n                    {/*       {dollarEn}\r\n                          {formatMoney(\r\n                            output.totalSource,\r\n                            0,\r\n                            decimalChar,\r\n                            thousands\r\n                          )} */}\r\n                        </td>\r\n                      </tr>\r\n                    )}\r\n                    {output.percent2.length > 0 && (\r\n                      <tr>\r\n                        <td colSpan =\"2\" className=\"paddingleft25\">\r\n                          {!singleFamily?labelsBilingual.pgTabRowThereAfter: labelsBilingual.pg5TabRow7}\r\n                        </td>\r\n                        <td colSpan =\"2\" className=\"textalignright\">\r\n                          <span\r\n                            style={{ fontSize: \"10px\", marginRight: \"30px\" }}\r\n                          >\r\n                            ({labelsBilingual.pg6Net + \" \"}\r\n                            {formatMoney(\r\n                              //output.totalSource2ATax,\r\n                              output.totalSource2ATaxAtDeath,\r\n                              0,\r\n                              decimalChar,\r\n                              thousands\r\n                            )}\r\n                            )\r\n                          </span>\r\n                          {/* {formatted(output.totalSource2,lang)} */}\r\n                          {formatted(output.totalSource2AtDeath,lang)}\r\n                    \r\n                    {/*       {dollarEn}\r\n                          {formatMoney(\r\n                            output.totalSource2,\r\n                            0,\r\n                            decimalChar,\r\n                            thousands\r\n                          )} */}\r\n                        </td>\r\n                      </tr>\r\n                    )}\r\n                    {output.percent2.length === 0 && (\r\n                      <tr>\r\n                        <td colSpan =\"2\" className=\"paddingleft25\">\r\n                          {!singleFamily?labelsBilingual.pgTabRowThereAfter: labelsBilingual.pg5TabRow7}\r\n                        </td>\r\n                        <td colSpan =\"2\" className=\"textalignright\">\r\n                        {/* {formatted(output.totalSource,lang)} */}\r\n                        {formatted(output.totalSourceAtDeath,lang)}\r\n                    \r\n                    {/*       {dollarEn}\r\n                          {formatMoney(\r\n                            output.totalSource,\r\n                            0,\r\n                            decimalChar,\r\n                            thousands\r\n                          )} */}\r\n                        </td>\r\n                      </tr>\r\n                    )}\r\n                    <tr className=\"backgroundcolorFFFFFF\">\r\n                    <td colSpan =\"2\"></td>\r\n                    <td colSpan =\"2\"></td>\r\n                    </tr>\r\n                    <tr className=\"backgroundcolorFFFFFF\">\r\n                    <td colSpan =\"2\">{labelsBilingual.pg6TabRow4}</td>\r\n                    <td colSpan =\"2\"></td>\r\n                    </tr>\r\n                    {output.percent2.length > 0 && (\r\n                      <tr>\r\n                        <td colSpan =\"2\" className=\"paddingleft25\">\r\n                          {labelsBilingual.pgTabRowMoreIncome}\r\n                        </td>\r\n\r\n\r\n                        <td colSpan =\"2\" className=\"textalignright\">\r\n                          <span\r\n                            style={{ fontSize: \"10px\", marginRight: \"20px\" }}\r\n                          >\r\n              \r\n\r\n                            ({\r\n              formatMoney(output.percentNeed1, 0, decimalChar, thousands)\r\n            } \r\n            - \r\n            {             \r\n              /* formatMoney(output.totalSourceATax, 0, decimalChar, thousands) */\r\n              formatMoney(output.totalSourceATaxAtDeath, 0, decimalChar, thousands)\r\n            })\r\n\r\n\r\n\r\n                          </span>\r\n                         {/*  {formatted(output.totalSource2,lang)} */}\r\n                    \r\n                    {/*       {dollarEn}\r\n                          {formatMoney(\r\n                            output.totalSource2,\r\n                            0,\r\n                            decimalChar,\r\n                            thousands\r\n                          )} */}\r\n                      {/*   </td>\r\n\r\n\r\n\r\n\r\n                        <td className=\"textalignrightbackgroundcolorDCE5F0\"> */}\r\n                          <strong>\r\n                          {/* {formatted(Math.max(0, output.percentNeed1 - output.totalSourceATax),lang)} */}\r\n                          {formatted(Math.max(0, output.percentNeed1 - output.totalSourceATaxAtDeath),lang)}\r\n                    \r\n                    {/*         {dollarEn}\r\n                            {formatMoney(\r\n                              Math.max(\r\n                                0,\r\n                                //output.percentNeed1 - output.totalSourceATax\r\n                                output.totalDesiredGrossIncome1- output.totalSource1\r\n                              ),\r\n                              0,\r\n                              decimalChar,\r\n                              thousands\r\n                            )} */}\r\n                          </strong>\r\n                        </td>\r\n                      </tr>\r\n                    )}\r\n                    {output.percent2.length > 0 && (\r\n                      <tr>\r\n                        <td colSpan =\"2\" className=\"paddingleft25\">\r\n                        {!singleFamily?labelsBilingual.pgTabRowThereAfter: labelsBilingual.pg5TabRow7}\r\n                        </td>\r\n                        <td colSpan =\"2\" className=\"textalignrightbackgroundcolorDCE5F0\">\r\n  <span\r\n                            style={{ fontSize: \"10px\", marginRight: \"30px\" }}\r\n                          >\r\n              \r\n\r\n                            ({\r\n              formatMoney(output.percentNeed2.reduce((a, b) => a + b, 0), 0, decimalChar, thousands)\r\n            } \r\n            - \r\n            {             \r\n              /* formatMoney(output.totalSource2ATax, 0, decimalChar, thousands) */\r\n              formatMoney(output.totalSource2ATaxAtDeath, 0, decimalChar, thousands)\r\n            })\r\n\r\n</span>\r\n                          <strong>\r\n                          {/* {formatted(Math.max(0, output.percentNeed2.reduce((a, b) => a + b, 0) - output.totalSource2ATax),lang)} */}\r\n                          {formatted(Math.max(0, output.percentNeed2.reduce((a, b) => a + b, 0) - output.totalSource2ATaxAtDeath),lang)}\r\n                    \r\n                    {/*         {dollarEn}\r\n                            {formatMoney(\r\n                              Math.max(\r\n                                0,\r\n                                //output.percentNeed2.reduce((a, b) => a + b, 0) - output.totalSource2ATax\r\n                                output.totalDesiredGrossIncome2- output.totalSource2\r\n                              ),\r\n                              0,\r\n                              decimalChar,\r\n                              thousands\r\n                            )} */}\r\n                          </strong>\r\n                        </td>\r\n                      </tr>\r\n                    )}\r\n                    {output.percent2.length === 0 && (\r\n                      <tr>\r\n                        <td colSpan =\"2\" className=\"paddingleft25\">\r\n                          {!singleFamily?labelsBilingual.pgTabRowThereAfter: labelsBilingual.pg5TabRow7}\r\n                        </td>\r\n                        <td colSpan =\"2\" className=\"textalignrightbackgroundcolorDCE5F0\">\r\n\r\n\r\n                       {/*  <td className=\"textalignright\"> */}\r\n                          <span\r\n                            style={{ fontSize: \"10px\", marginRight: \"30px\" }}\r\n                          >\r\n              \r\n\r\n                            ({\r\n              formatMoney(output.percentNeed1, 0, decimalChar, thousands)\r\n            } \r\n            - \r\n            {             \r\n              /* formatMoney(output.totalSourceATax, 0, decimalChar, thousands) */\r\n              formatMoney(output.totalSourceATaxAtDeath, 0, decimalChar, thousands)\r\n            })\r\n\r\n\r\n\r\n                          </span>\r\n                         \r\n\r\n                          <strong>\r\n                          {/* {formatted(Math.max(0, output.percentNeed1 - output.totalSourceATax),lang)}{/* output.totalDesiredGrossIncome - output.totalSource,lang)} */} */}\r\n                          {formatted(Math.max(0, output.percentNeed1 - output.totalSourceATaxAtDeath),lang)}{/* output.totalDesiredGrossIncome - output.totalSource,lang)} */}\r\n                    \r\n                    {/*         {dollarEn}\r\n                            {formatMoney(\r\n                              Math.max(\r\n                                0,\r\n                                //output.percentNeed1 - output.totalSource\r\n                                output.totalDesiredGrossIncome - output.totalSource\r\n                              ),\r\n                              0,\r\n                              decimalChar,\r\n                              thousands\r\n                            )} */}\r\n                          </strong>\r\n                        </td>\r\n                      </tr>\r\n                    )}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n              {/* PAGE 7 life i anal*/}\r\n              {/* <br />\r\n          <hr className=\"ppi1\" />\r\n          <h2 className=\"ppi1\">{labelsBilingual.pg7T}</h2>\r\n          <div\r\n            style={{ overflowX: \"auto\", overflowY: \"hidden\", width: \"100%\" }}\r\n          >\r\n            <div className=\"tableTitle\">{labelsBilingual.pg7TabT}</div>\r\n\r\n            <table className=\"incomePosition\">\r\n              <tbody>\r\n                <tr className=\"backgroundcolorFFFFFF\">\r\n                  <td style={{ width: \"70%\" }}> </td>\r\n                  <td> </td>\r\n                </tr>\r\n                <tr>\r\n                  <td className=\"backgroundcolorFFFFFF\">\r\n                    {labelsBilingual.pg7TabRow1}\r\n                  </td>\r\n                  <td className=\"backgroundcolorFFFFFF\"></td>\r\n                </tr>\r\n                {output.percent2 > 0 && (\r\n                  <tr>\r\n                    <td className=\"paddingleft25\">\r\n                      {labelsBilingual.pg7TabRow2}\r\n                    </td>\r\n                    <td className=\"textalignright\">\r\n                      {dollarEn}\r\n                      {formatMoney(\r\n                        Math.max(0, output.percentNeed1 - output.totalSource),\r\n                        0,\r\n                        decimalChar,\r\n                        thousands\r\n                      )}\r\n                    </td>\r\n                  </tr>\r\n                )}\r\n                {output.percent2 > 0 && (\r\n                  <tr>\r\n                    <td className=\"paddingleft25\">\r\n                      {labelsBilingual.pgTabRowThereAfter}\r\n                    </td>\r\n                    <td className=\"textalignright\">\r\n                      {dollarEn}\r\n                      {formatMoney(\r\n                        Math.max(0, output.percentNeed2 - output.totalSource2),\r\n                        0,\r\n                        decimalChar,\r\n                        thousands\r\n                      )}\r\n                    </td>\r\n                  </tr>\r\n                )}\r\n                {output.percent2 === 0 && (\r\n                  <tr>\r\n                    <td className=\"paddingleft25\">\r\n                      {labelsBilingual.pgTabRowThereAfter}\r\n                    </td>\r\n                    <td className=\"textalignright\">\r\n                      {dollarEn}\r\n                      {formatMoney(\r\n                        Math.max(0, output.percentNeed1 - output.totalSource),\r\n                        0,\r\n                        decimalChar,\r\n                        thousands\r\n                      )}\r\n                    </td>\r\n                  </tr>\r\n                )}\r\n\r\n                <tr>\r\n                  <td className=\"paddingleft25\">\r\n                    {labelsBilingual.pg7TabRow4}\r\n                  </td>\r\n                  <td className=\"textalignright\">{output.infRate}%</td>\r\n                </tr>\r\n                <tr>\r\n                  <td className=\"paddingleft25\">\r\n                    {labelsBilingual.pg7TabRow5}\r\n                  </td>\r\n                  <td className=\"textalignright\">{output.invRate}%</td>\r\n                </tr>\r\n                <tr className=\"backgroundcolorFFFFFF\">\r\n                  <td> </td>\r\n                  <td> </td>\r\n                </tr>\r\n                <tr>\r\n                  <td className=\"backgroundcolorFFFFFF\">\r\n                    {labelsBilingual.pg7TabRow6}\r\n                  </td>\r\n                  <td className=\"backgroundcolorFFFFFF\"> </td>\r\n                </tr>\r\n                <tr>\r\n                  <td>\r\n                    <strong></strong>\r\n                    {labelsBilingual.pg7TabRow7} {this.props.LE})\r\n                  </td>\r\n                  <td className=\"textalignright\">\r\n                    {dollarEn}\r\n                    {formatMoney(\r\n                      Math.max(\r\n                        0,\r\n                        output.insNeedLE + output.totalAsset - output.totalLiab\r\n                      ),\r\n                      0,\r\n                      decimalChar,\r\n                      thousands\r\n                    )}\r\n                  </td>\r\n                </tr>\r\n                <tr>\r\n                  <td>\r\n                    <strong></strong>\r\n                    {labelsBilingual.pg7TabRow8}\r\n                  </td>\r\n                  <td className=\"textalignright\">\r\n                    {dollarEn}\r\n                    {formatMoney(\r\n                      Math.max(\r\n                        0,\r\n                        output.insNeedRet + output.totalAsset - output.totalLiab\r\n                      ),\r\n                      0,\r\n                      decimalChar,\r\n                      thousands\r\n                    )}\r\n                  </td>\r\n                </tr>\r\n                {output.hasChild && output.ygChild < maxDur && (\r\n                  <tr>\r\n                    <td>\r\n                      <strong></strong>\r\n                      {labelsBilingual.pg7TabRow9}\r\n                    </td>\r\n                    <td className=\"textalignright\">\r\n                      {dollarEn}\r\n                      {formatMoney(\r\n                        Math.max(\r\n                          0,\r\n                          output.insNeedYgChild25 +\r\n                            output.totalAsset -\r\n                            output.totalLiab\r\n                        ),\r\n                        0,\r\n                        decimalChar,\r\n                        thousands\r\n                      )}\r\n                    </td>\r\n                  </tr>\r\n                )}\r\n                {output.hasChild && output.ygChild < orphAge && (\r\n                  <tr>\r\n                    <td>\r\n                      <strong></strong>\r\n                      {labelsBilingual.pg7TabRow10}\r\n                    </td>\r\n                    <td className=\"textalignright\">\r\n                      {dollarEn}\r\n                      {formatMoney(\r\n                        Math.max(\r\n                          0,\r\n                          output.insNeedYgChild18 +\r\n                            output.totalAsset -\r\n                            output.totalLiab\r\n                        ),\r\n                        0,\r\n                        decimalChar,\r\n                        thousands\r\n                      )}\r\n                    </td>\r\n                  </tr>\r\n                )}\r\n              </tbody>\r\n            </table>\r\n          </div> */}\r\n              {/* PAGE 7 chart*/}\r\n              {/* <div style={{ color: \"darkBlue\", marginTop: \"55px\" }}>\r\n            <br />\r\n            <div style={{ marginLeft: \"20px\", width: \"90%\" }}>\r\n              <div style={{ width: \"75%\" }}>\r\n                <article\r\n                  id=\"bar1\"\r\n                  className=\"canvas-container\"\r\n                  style={{ height: \"200px\" }}\r\n                >\r\n                  <Bar data={dataInsurance} options={options} />\r\n                </article>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <br />\r\n          <br /> */}\r\n              <hr className=\"ppi1\" />\r\n              {logoBottom}\r\n              {/* PAGE 8 life i anal 2*/}\r\n              {logoTop}\r\n              <br />\r\n              <h2 className=\"ppi1\"> {labelsBilingual.pg8T}</h2>\r\n              <div className=\"tableTitle\">{labelsBilingual.pg8TabT}</div>\r\n              <div\r\n                style={{\r\n                  overflowX: \"auto\",\r\n                  overflowY: \"hidden\",\r\n                  width: \"100%\",\r\n                }}\r\n              >\r\n                <table className=\"incomePosition\">\r\n                  <tbody>\r\n                    <tr>\r\n                      <td width=\"70%\">{labelsBilingual.pg8TabRow1}</td>\r\n                      <td className=\"textalignright\" width=\"30%\">\r\n                      {formatted(output.totalDisposeAsset - output.totalLiab,lang)}\r\n                    \r\n                    {/*     {dollarEn}\r\n                        {formatMoney(\r\n                          output.totalDisposeAsset - output.totalLiab,\r\n                          0,\r\n                          decimalChar,\r\n                          thousands\r\n                        )} */}\r\n                      </td>\r\n                    </tr>\r\n                    <tr>\r\n                      <td className=\"backgroundcolorFFFFFF\">\r\n                        <br />\r\n                        {labelsBilingual.pg8TabRow2}\r\n                      </td>\r\n                      <td className=\"backgroundcolorFFFFFF\"></td>\r\n                    </tr>\r\n                    {!singleFamily &&\r\n      \r\n                      <tr>\r\n                      <td>\r\n                        <strong></strong>\r\n                        {labelsBilingual.pg8TabRow3}\r\n                        {this.props.LE})\r\n                      </td>\r\n                      <td className=\"textalignright\">\r\n                        {/* {dollarEn+this.props.insuranceNeedLE+dollarFr} */}\r\n                        {formatted(this.props.insuranceNeedLE,lang)}\r\n                      </td>\r\n                    </tr>}\r\n                    <tr>\r\n                      <td>\r\n                        <strong></strong>\r\n                        {singleFamily? labelsBilingual.pg8TabRow4Alt.replace(\"B.\",\"A.\"): labelsBilingual.pg8TabRow4}\r\n                      </td>\r\n                      <td className=\"textalignright\">\r\n                        {/* {dollarEn+this.props.insuranceNeedRet+dollarFr} */}\r\n                        {formatted(this.props.insuranceNeedRet,lang)}\r\n                      </td>\r\n                    </tr>\r\n                    {output.hasChild && output.ygChild < maxDur && (\r\n                      <tr>\r\n                        <td>\r\n                          <strong></strong>\r\n                          {singleFamily? labelsBilingual.pg8TabRow5.replace(\"C.\",\"B.\").replace(\"25\",output.youngestChildEndAge):labelsBilingual.pg8TabRow5.replace(\"25\",output.youngestChildEndAge)}\r\n                        </td>\r\n                        <td className=\"textalignright\">\r\n                        {formatted(output.insNeedYgChild25,lang)}\r\n                    \r\n                    {/*       {dollarEn}\r\n                          {formatMoney(\r\n                            output.insNeedYgChild25,\r\n                            0,\r\n                            decimalChar,\r\n                            thousands\r\n                          )} */}\r\n                        </td>\r\n                      </tr>\r\n                    )}\r\n                    {output.hasChild && output.ygChild < orphAge && (\r\n                      <tr>\r\n                        <td>\r\n                          <strong></strong>\r\n                          {singleFamily? labelsBilingual.pg8TabRow6.replace(\"D.\",\"C.\"):labelsBilingual.pg8TabRow6}\r\n                        </td>\r\n                        <td className=\"textalignright\">\r\n                        {formatted(output.insNeedYgChild18,lang)}\r\n                    \r\n                    {/*       {dollarEn}\r\n                          {formatMoney(\r\n                            output.insNeedYgChild18,\r\n                            0,\r\n                            decimalChar,\r\n                            thousands\r\n                          )} */}\r\n                        </td>\r\n                      </tr>\r\n                    )}\r\n                    <tr></tr>\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n              {/* PAGE 8 chart*/}\r\n              <div style={{ color: \"darkBlue\", marginTop: \"55px\" }}>\r\n                <br />\r\n                <div style={{ marginLeft: \"20px\", width: \"90%\" }}>\r\n                  <div style={{ width: \"75%\" }}>\r\n                    <article\r\n                      id=\"bar2\"\r\n                      className=\"canvas-container\"\r\n                      style={{ height: \"200px\" }}\r\n                    >\r\n                      <Bar data={dataInsurance2} options={options} />\r\n                    </article>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <br />\r\n              <br />\r\n              {/* PAGE 9 notes*/}\r\n              {/*  <hr className=\"ppi1\" />\r\n             {allPages && (\r\n              <AdjustibleImage\r\n                image={this.props.dataInput.Presentations[0].adviserLogo.image}\r\n                showDetails={false}\r\n                size={this.props.dataInput.Presentations[0].adviserLogo.size}\r\n                imageLeft={\r\n                  this.props.dataInput.Presentations[0].adviserLogo.left\r\n                }\r\n                allPages={\r\n                  this.props.dataInput.Presentations[0].adviserLogo.allPages\r\n                }\r\n                imageRemove={this.props.imageRemove}\r\n                imageAdjust={this.props.imageAdjust}\r\n                \r\n              />\r\n            )}\r\n            <br />\r\n            <img className=\"ppi2\" src=\"img/desktop/picture1.png\" width=\"400\" alt=\"Capital Requirements Chart\" />\r\n            <br /> <br /> \r\n            {logoTop}\r\n              <br />\r\n              <br /> <br />\r\n            <h2 className=\"ppi1\">{labelsBilingual.pg9T}</h2>\r\n            <p className=\"ppi1\">{labelsBilingual.pg9P1}</p>\r\n            <br /> */}\r\n\r\n\r\n              {logoBottom}\r\n              {/* PAGE 9 Notes*/}\r\n              {logoTop}\r\n              <br />\r\n              <br /> <br />\r\n              <h2 className=\"ppi1\">{labelsBilingual.pg9T}</h2>\r\n              <p className=\"ppi1\">{labelsBilingual.pg9P1}</p>\r\n              <br /> <br />\r\n              <br />\r\n              <br />\r\n              <br />\r\n\r\n\r\n              {logoBottom}\r\n              {/* PAGE 10 ackno*/}\r\n              {logoTop}\r\n              <br />\r\n              <br /> <br />\r\n              <h2 className=\"ppi1\">{labelsBilingual.pg10T}</h2>\r\n              <p className=\"ppi1\">{labelsBilingual.pg10P1}</p>\r\n              <br /> <br />\r\n              <br />\r\n              <br />\r\n              <br />\r\n              <p className=\"ppi1\">\r\n                {labelsBilingual.pg10TabRow1}\r\n                <br />\r\n                <span style={{ paddingLeft: \"118px\" }}>\r\n                  {labelsBilingual.pg10TabRow11}\r\n                </span>\r\n              </p>\r\n              <br />\r\n              <br />\r\n              <p className=\"ppi1\">\r\n                {labelsBilingual.pg10TabRow2}\r\n                <br />\r\n                <span style={{ paddingLeft: \"118px\" }}>\r\n                  {labelsBilingual.pg10TabRow11}\r\n                </span>\r\n              </p>\r\n              <br />\r\n              <br />\r\n              <p className=\"ppi1\">\r\n                {labelsBilingual.pg10TabRow3}\r\n                <br />\r\n                <span style={{ paddingLeft: \"110px\" }}>\r\n                  {labelsBilingual.pg10TabRow11}\r\n                </span>\r\n              </p>\r\n              <br />\r\n              <hr className=\"ppi1\" />\r\n              {logoBottom}\r\n            </div>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n}\r\n","import {\r\n  TITLES,\r\n  ASSETS,\r\n  IMAGE_LOGO,\r\n  IMAGE_LOGO_OTHERPAGES,\r\n  IMAGE_APPLET_EP,\r\n} from \"../definitions/generalDefinitions\";\r\nimport { OUTPUTTEXTEP } from \"../definitions/outputDefinitionsEP\";\r\nimport { formatMoney, formatMoney2, cleanFormat } from \"../utils/helper\";\r\nimport { getOutputValues } from \"../data/dataExchange\";\r\n\r\nimport {\r\n  PDF,\r\n  InToPt,\r\n  PxToPt,\r\n  HELVETICA,\r\n  TIMES,\r\n  NORMAL,\r\n  BOLD,\r\n  HEADER_RECT_IN_W,\r\n} from \"./PDF\";\r\nimport {\r\n  ASSET_TAX_TYPE_PRINCIPAL_RES,\r\n  ASSET_TAX_TYPE_REAL_ESTATE,\r\n  ASSET_TAX_TYPE_STOCKS,\r\n  ASSET_TAX_TYPE_SMALL_BUS,\r\n  ASSET_TAX_TYPE_RRSP,\r\n  ASSET_TAX_TYPE_INTEREST,\r\n  ASSET_TAX_TYPE_OTHER,\r\n  ASSET_TAX_TYPE_COUNT,\r\n} from \"../definitions/outputDefinitionsEP\";\r\n\r\nconst DISPLAY_INCOME = 1;\r\n\r\nconst BULLET_FONT_SIZE = 24;\r\nconst NUMBER_BULLET_FONT_SIZE = 11;\r\nconst GRID_AGGREGATE = 0;\r\nconst GRID_INDIVIDUAL = 1;\r\n\r\nconst LINES_PER_PAGE_LANDSCAPE = 27;\r\nconst LINES_PER_PAGE_PORTRAIT = 37;\r\n\r\nexport function doSavePdfActionEP(props, AssetLiabProjs) {\r\n  try {\r\n    let pdf = new PDF();\r\n    pdf.Create();\r\n\r\n    var paragraph;\r\n    let height = 0.2;\r\n    let Widths = [1.2, 0.6, 1.8, 1.4];\r\n    let values;\r\n    const paraWidth = 6;\r\n    const paraLeft = 1.2;\r\n    const lineHeight = 0.196;\r\n    const indent = 0.15;\r\n    let paraY = 8 * lineHeight;\r\n\r\n    // pdf output shared with presentation\r\n    let output = getOutputValues(props);\r\n\r\n    const lang = props.dataInput.Presentations[0].language;\r\n    const pg1TitleY = 4.2;\r\n\r\n   \r\n    pdf.SetFont(HELVETICA, NORMAL);\r\n    if (lang === \"en\") pdf.SetFontSize(PxToPt(36));\r\n    else pdf.SetFontSize(PxToPt(36));\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    pdf.Text(\r\n      props.INAOption === DISPLAY_INCOME\r\n        ? TITLES[lang].appletINA\r\n        : TITLES[lang].appletEP,\r\n      InToPt(paraLeft),\r\n      InToPt(pg1TitleY)\r\n    );\r\n    /* page 1: Cover page */\r\n\r\n    //pdf.addCustomImage(\"AdvisorLogo\", pg1TitleY, image, true);\r\n    const image = props.dataInput.Presentations[0].adviserLogo;\r\n    const headerOffset = image.image === null ? 0 : 0.25;\r\n    const top = props.dataInput.Presentations[0].adviserLogo.top;\r\n\r\n    let result;\r\n    result = pdf.addCustomImage(IMAGE_LOGO, pg1TitleY, image, true, top);\r\n\r\n    pdf.AddImage(\r\n      IMAGE_APPLET_EP,\r\n      InToPt(paraLeft + 0.01),\r\n      InToPt(pg1TitleY + 0.5),\r\n      InToPt(6.04),\r\n      InToPt(2.76)\r\n    );\r\n\r\n    pdf.SetFontSize(PxToPt(18));\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    pdf.Text(\r\n      OUTPUTTEXTEP[lang].pg1P1 + output.designedFor,\r\n      InToPt(paraLeft + 0.02),\r\n      InToPt(pg1TitleY + 3.63)\r\n    );\r\n    pdf.Text(\r\n      OUTPUTTEXTEP[lang].pg1P2 + output.designedBy,\r\n      InToPt(paraLeft + 0.02),\r\n      InToPt(pg1TitleY + 4.13)\r\n    );\r\n    pdf.Text(\r\n      OUTPUTTEXTEP[lang].pg1P3 + output.dateApplet,\r\n      InToPt(paraLeft + 0.02),\r\n      InToPt(pg1TitleY + 4.42)\r\n    );\r\n    pdf.Text(\r\n      OUTPUTTEXTEP[lang].pg1P4 + output.province,\r\n      InToPt(paraLeft + 0.02),\r\n      InToPt(pg1TitleY + 4.69)\r\n    );\r\n\r\n    {\r\n      /*end ofPage 1*/\r\n      const footerText = OUTPUTTEXTEP[lang].pgFooter;\r\n      const headerText = OUTPUTTEXTEP[lang].pg1T;\r\n      pdf.addFooterAndHeader(headerOffset, footerText, headerText);\r\n\r\n      /*-Introduction\t\t// Page 2*/\r\n      // logo if asked for\r\n      //    pdf.addCustomImage(\"EPOtherPagesLogo\", pg1TitleY, image);\r\n      result =\r\n        result &&\r\n        pdf.addCustomImage(IMAGE_LOGO_OTHERPAGES, pg1TitleY, image, false, top);\r\n\r\n      setFontForTitle(pdf, lang);\r\n      pdf.Text(OUTPUTTEXTEP[lang].pg2T, InToPt(paraLeft), InToPt(paraY));\r\n      setFontForParas(pdf);\r\n\r\n      let parag = [];\r\n      OUTPUTTEXTEP[lang].pg2Paragraphs.map((item) => parag.push(item));\r\n\r\n      paraY = paraY + 2 * lineHeight;\r\n      insertPara(pdf, parag[0], paraLeft, paraY, paraWidth);\r\n\r\n      paraY = paraY + 5 * lineHeight;\r\n      insertPara(pdf, parag[1], paraLeft, paraY, paraWidth);\r\n\r\n      paraY = paraY + (lang === \"en\" ? 4.5 : 5.5) * lineHeight;\r\n      insertBullet(pdf, \".\", paraLeft + indent, paraY, BULLET_FONT_SIZE);\r\n      insertPara(pdf, parag[2], paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      paraY = paraY + 1.2 * lineHeight;\r\n      insertBullet(pdf, \".\", paraLeft + indent, paraY, BULLET_FONT_SIZE);\r\n      insertPara(pdf, parag[3], paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      paraY = paraY + 2 * lineHeight;\r\n      insertPara(pdf, parag[4], paraLeft, paraY, paraWidth);\r\n\r\n      paraY = paraY + 3 * lineHeight;\r\n      insertBullet(pdf, \".\", paraLeft + indent, paraY, BULLET_FONT_SIZE);\r\n      insertPara(pdf, parag[5], paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      paraY = paraY + 1.2 * lineHeight;\r\n      insertBullet(pdf, \".\", paraLeft + indent, paraY, BULLET_FONT_SIZE);\r\n      insertPara(pdf, parag[6], paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      paraY = paraY + 3 * lineHeight;\r\n      insertPara(pdf, parag[7], paraLeft, paraY, paraWidth);\r\n\r\n      paraY = paraY + 3 * lineHeight;\r\n      insertBullet(pdf, \".\", paraLeft + indent, paraY, BULLET_FONT_SIZE);\r\n      insertPara(pdf, parag[8], paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      paraY = paraY + 1.2 * lineHeight;\r\n      insertBullet(pdf, \".\", paraLeft + indent, paraY, BULLET_FONT_SIZE);\r\n      insertPara(pdf, parag[9], paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      paraY = paraY + 1.2 * lineHeight;\r\n      insertBullet(pdf, \".\", paraLeft + indent, paraY, BULLET_FONT_SIZE);\r\n      insertPara(pdf, parag[10], paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      /*end ofPage 2*/\r\n      pdf.addFooterAndHeader(headerOffset, footerText, headerText);\r\n\r\n      /*/*-Your FEPncial Situation\t\t// Page 3*/\r\n      // logo if asked for\r\n      //    pdf.addCustomImage(\"EPOtherPagesLogo\", pg1TitleY, image);\r\n      result =\r\n        result &&\r\n        pdf.addCustomImage(IMAGE_LOGO_OTHERPAGES, pg1TitleY, image, false, top);\r\n\r\n      paraY = 8 * lineHeight;\r\n      setFontForTitle(pdf, lang);\r\n      pdf.Text(OUTPUTTEXTEP[lang].pg3T, InToPt(paraLeft), InToPt(paraY));\r\n      setFontForParas(pdf);\r\n\r\n      paraY = paraY + 2 * lineHeight;\r\n      paragraph = OUTPUTTEXTEP[lang].pg3P1;\r\n      insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n      // assets table\r\n      let tableWidthAss =\r\n        lang === \"fr\" ? paraWidth / 2 + 0.3 : paraWidth / 2 - 0.2;\r\n      let totalAssets = 0;\r\n      height = 0.24;\r\n      Widths = [paraWidth / 4 + 0.4, paraWidth / 4 - 0.6];\r\n      if (lang === \"fr\")\r\n        Widths = [(3 * tableWidthAss) / 4 + 0.1, tableWidthAss / 4 - 0.1];\r\n\r\n      paraY = paraY + 3.2 * lineHeight;\r\n      const tmpY = paraY;\r\n      values = [OUTPUTTEXTEP[lang].pg3TabT];\r\n\r\n      let align = [];\r\n      insertTableTitle(pdf, paraLeft, paraY, values, height, [\r\n        tableWidthAss + 0.01,\r\n      ]);\r\n\r\n      output.assets.map((element) => {\r\n        values = [\r\n          element.name +\r\n            (element.name === ASSETS.OTHER_ASSETS.value[lang] &&\r\n            element.value > 0\r\n              ? \" *\"\r\n              : \"\"),\r\n          formatMoney2(element.value, 0, lang),\r\n        ];\r\n        //   console.log(values)\r\n        align.push(0);\r\n        align.push(2);\r\n        totalAssets += parseFloat(element.value);\r\n        paraY = paraY + height;\r\n        insertTableRow(\r\n          pdf,\r\n          paraLeft,\r\n          paraY,\r\n          values,\r\n          height,\r\n          Widths,\r\n          false,\r\n          [249, 249, 249],\r\n          align\r\n        );\r\n      });\r\n\r\n      align = [];\r\n      align.push(2);\r\n      align.push(2);\r\n      paraY = paraY + height;\r\n      insertTableRow(\r\n        pdf,\r\n        paraLeft,\r\n        paraY,\r\n        [OUTPUTTEXTEP[lang].pg3Tab2RTot, formatMoney2(totalAssets, 0, lang)],\r\n        height,\r\n        Widths,\r\n        true,\r\n        [235, 235, 235],\r\n        align\r\n      );\r\n      // other assets footnote\r\n\r\n      if (output.otherAssetsList !== \"\") {\r\n        paraY = paraY + 2.2 * lineHeight;\r\n        paragraph = output.otherAssetsList;\r\n        addNote(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n      }\r\n      setFontForParas(pdf);\r\n      //\r\n\r\n      // liabs table\r\n      let tableWidth =\r\n        lang === \"fr\" ? paraWidth / 2 - 0.05 : paraWidth / 2 - 0.2;\r\n      Widths = [paraWidth / 4 + 0.4, paraWidth / 4 - 0.6];\r\n      if (lang === \"fr\") Widths = [(3 * tableWidth) / 4, tableWidth / 4];\r\n\r\n      let totalLiabs = 0;\r\n      const tableLeft = paraLeft + tableWidthAss + 0.2;\r\n      paraY = tmpY;\r\n      values = [OUTPUTTEXTEP[lang].pg3Tab2T];\r\n      insertTableTitle(pdf, tableLeft, paraY, values, height, [\r\n        tableWidth + 0.01,\r\n      ]);\r\n\r\n      align = [];\r\n      output.liabilities.map((element) => {\r\n        values = [element.name, formatMoney2(element.value, 0, lang)];\r\n        align.push(0);\r\n        align.push(2);\r\n\r\n        totalLiabs += parseFloat(element.value);\r\n        paraY = paraY + height;\r\n        insertTableRow(\r\n          pdf,\r\n          tableLeft,\r\n          paraY,\r\n          values,\r\n          height,\r\n          Widths,\r\n          false,\r\n          [249, 249, 249],\r\n          align\r\n        );\r\n      });\r\n\r\n      align = [];\r\n      align.push(2);\r\n      align.push(2);\r\n\r\n      paraY = paraY + height;\r\n      insertTableRow(\r\n        pdf,\r\n        tableLeft,\r\n        paraY,\r\n        [OUTPUTTEXTEP[lang].pg3Tab2RTot, formatMoney2(totalLiabs, 0, lang)],\r\n        height,\r\n        Widths,\r\n        true,\r\n        [235, 235, 235],\r\n        align\r\n      );\r\n      paraY = paraY + height;\r\n      insertTableRow(\r\n        pdf,\r\n        tableLeft,\r\n        paraY,\r\n        [\r\n          OUTPUTTEXTEP[lang].pg3Tab2NW,\r\n          formatMoney2(totalAssets - totalLiabs, 0, lang),\r\n        ],\r\n        height,\r\n        Widths,\r\n        true,\r\n        [205, 205, 205],\r\n        align\r\n      );\r\n\r\n      //Your growing tax liab\r\n      paraY = paraY + 4.6 * lineHeight;\r\n      setFontForTitle(pdf, lang);\r\n      pdf.Text(OUTPUTTEXTEP[lang].pg3T2, InToPt(paraLeft), InToPt(paraY));\r\n      setFontForParas(pdf);\r\n      //\r\n      paraY = paraY + 2 * lineHeight;\r\n      paragraph = OUTPUTTEXTEP[lang].pg3P2;\r\n      insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n      tableWidth = paraWidth;\r\n      Widths = [\r\n        tableWidth / 4 + 0.4,\r\n        tableWidth / 4 - 0.5,\r\n        tableWidth / 4 - 0.1,\r\n        tableWidth / 4 + 0.12,\r\n      ];\r\n      if (lang === \"fr\")\r\n        Widths = [\r\n          tableWidth / 4 + 0.85,\r\n          tableWidth / 4 - 0.45,\r\n          tableWidth / 4 - 0.25,\r\n          tableWidth / 4 + 0.25,\r\n        ];\r\n\r\n      paraY = paraY + (lang === \"fr\" ? 3.2 : 2.8) * lineHeight;\r\n      values = [\r\n        OUTPUTTEXTEP[lang].pg3Tab3R1C1,\r\n        OUTPUTTEXTEP[lang].pg3Tab3R1C2,\r\n        OUTPUTTEXTEP[lang].pg3Tab3R1C3,\r\n        OUTPUTTEXTEP[lang].pg3Tab3R1C4,\r\n      ];\r\n      const height2 = insertTableTitle(\r\n        pdf,\r\n        paraLeft,\r\n        paraY,\r\n        values,\r\n        height,\r\n        Widths\r\n      );\r\n      paraY = paraY + height + height2;\r\n      //paraY = paraY + height;\r\n      insertTableRow(\r\n        pdf,\r\n        paraLeft,\r\n        paraY,\r\n        [\r\n          OUTPUTTEXTEP[lang].pg3Tab3R2C1,\r\n          AssetLiabProjs.EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_REAL_ESTATE],\r\n          formatMoney2(\r\n            AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_REAL_ESTATE],\r\n            0,\r\n            lang\r\n          ),\r\n          formatMoney2(\r\n            AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_REAL_ESTATE],\r\n            0,\r\n            lang\r\n          ),\r\n        ],\r\n        height,\r\n        Widths,\r\n        false,\r\n        [249, 249, 249],\r\n        align\r\n      );\r\n      paraY = paraY + height;\r\n      insertTableRow(\r\n        pdf,\r\n        paraLeft,\r\n        paraY,\r\n        [\r\n          OUTPUTTEXTEP[lang].pg3Tab3R3C1,\r\n          AssetLiabProjs.EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_STOCKS],\r\n          formatMoney2(\r\n            AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_STOCKS],\r\n            0,\r\n            lang\r\n          ),\r\n          formatMoney2(\r\n            AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_STOCKS],\r\n            0,\r\n            lang\r\n          ),\r\n        ],\r\n\r\n        height,\r\n        Widths,\r\n        false,\r\n        [249, 249, 249],\r\n        align\r\n      );\r\n      paraY = paraY + height;\r\n      insertTableRow(\r\n        pdf,\r\n        paraLeft,\r\n        paraY,\r\n        [\r\n          OUTPUTTEXTEP[lang].pg3Tab3R4C1,\r\n          AssetLiabProjs.EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_SMALL_BUS],\r\n          formatMoney2(\r\n            AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_SMALL_BUS],\r\n            0,\r\n            lang\r\n          ),\r\n          formatMoney2(\r\n            AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_SMALL_BUS],\r\n            0,\r\n            lang\r\n          ),\r\n        ],\r\n\r\n        height,\r\n        Widths,\r\n        false,\r\n        [249, 249, 249],\r\n        align\r\n      );\r\n      paraY = paraY + height;\r\n      insertTableRow(\r\n        pdf,\r\n        paraLeft,\r\n        paraY,\r\n        [\r\n          OUTPUTTEXTEP[lang].pg3Tab3R5C1,\r\n          AssetLiabProjs.EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_RRSP],\r\n          formatMoney2(\r\n            AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_RRSP],\r\n            0,\r\n            lang\r\n          ),\r\n          formatMoney2(\r\n            AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_RRSP],\r\n            0,\r\n            lang\r\n          ),\r\n        ],\r\n        height,\r\n        Widths,\r\n        false,\r\n        [249, 249, 249],\r\n        align\r\n      );\r\n      paraY = paraY + height;\r\n      insertTableRow(\r\n        pdf,\r\n        paraLeft,\r\n        paraY,\r\n        [\r\n          OUTPUTTEXTEP[lang].pg3Tab3R6C1,\r\n          AssetLiabProjs.EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_INTEREST],\r\n          formatMoney2(\r\n            AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_INTEREST],\r\n            0,\r\n            lang\r\n          ),\r\n          formatMoney2(\r\n            AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_INTEREST],\r\n            0,\r\n            lang\r\n          ),\r\n        ],\r\n        height,\r\n        Widths,\r\n        false,\r\n        [249, 249, 249],\r\n        align\r\n      );\r\n      paraY = paraY + height;\r\n      insertTableRow(\r\n        pdf,\r\n        paraLeft,\r\n        paraY,\r\n        [\r\n          OUTPUTTEXTEP[lang].pg3Tab3R7C1,\r\n          AssetLiabProjs.EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_OTHER],\r\n          formatMoney2(\r\n            AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_OTHER],\r\n            0,\r\n            lang\r\n          ),\r\n          formatMoney2(\r\n            AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_OTHER],\r\n            0,\r\n            lang\r\n          ),\r\n        ],\r\n        height,\r\n        Widths,\r\n        false,\r\n        [249, 249, 249],\r\n        align\r\n      );\r\n\r\n      Widths = [\r\n        tableWidth / 4 + (lang === \"fr\" ? 0.6 : 0.1) + tableWidth / 4 - 0.2,\r\n        tableWidth / 4 - (lang === \"fr\" ? 0.25 : 0.1),\r\n        tableWidth / 4 + (lang === \"fr\" ? 0.25 : 0.12),\r\n      ];\r\n      paraY = paraY + height;\r\n      insertTableRow(\r\n        pdf,\r\n        paraLeft,\r\n        paraY,\r\n        [\r\n          OUTPUTTEXTEP[lang].pg3Tab3R8C1,\r\n          formatMoney2(AssetLiabProjs.EstateLiabsByTypeTotal, 0, lang),\r\n          formatMoney2(AssetLiabProjs.EstateLiabsByTypeLE3Total, 0, lang),\r\n        ],\r\n        height,\r\n        Widths,\r\n        true,\r\n        [235, 235, 235],\r\n        align\r\n      );\r\n\r\n      paraY = paraY + 2.2 * lineHeight;\r\n      paragraph = OUTPUTTEXTEP[lang].pg3P4;\r\n      addNote(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n      paraY = paraY + (lang === \"fr\" ? 1.7 : 0.8) * lineHeight;\r\n      paragraph = OUTPUTTEXTEP[lang].pg3P5;\r\n      addNote(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n      /*end ofPage 3*/\r\n      pdf.addFooterAndHeader(headerOffset, footerText, headerText);\r\n      /*/*-Future value of estate\t\t// Page 4*/\r\n      // logo if asked for\r\n      //pdf.addCustomImage(\"EPOtherPagesLogo\", pg1TitleY, image);\r\n      result =\r\n        result &&\r\n        pdf.addCustomImage(IMAGE_LOGO_OTHERPAGES, pg1TitleY, image, false, top);\r\n\r\n      paraY = 8 * lineHeight;\r\n      setFontForTitle(pdf, lang);\r\n      pdf.Text(OUTPUTTEXTEP[lang].pg4T, InToPt(paraLeft), InToPt(paraY));\r\n      setFontForParas(pdf);\r\n\r\n      paraY = paraY + 2 * lineHeight;\r\n      paragraph = OUTPUTTEXTEP[lang].pg4P1;\r\n      insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n      paraY = paraY + 4.7 * lineHeight;\r\n      pdf.AddChart(\r\n        \"stackedChart\",\r\n        InToPt(paraLeft),\r\n        InToPt(paraY),\r\n        InToPt(paraWidth),\r\n        InToPt(20 * lineHeight)\r\n      );\r\n\r\n      paraY = paraY + 20.5 * lineHeight;\r\n      paragraph = OUTPUTTEXTEP[lang].pg4P2 + props.LE + \")\";\r\n      addNote(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n      paraY = paraY + 3.7 * lineHeight;\r\n      paragraph = OUTPUTTEXTEP[lang].pg4P3\r\n        .replace(\r\n          \"X1\",\r\n          formatMoney2(AssetLiabProjs.EstateLiabsByTypeTotal, 0, lang)\r\n        )\r\n        .replace(\r\n          \"X2\",\r\n          formatMoney2(AssetLiabProjs.EstateLiabsByTypeLE3Total, 0, lang)\r\n        );\r\n      pdf.drawRect(paraLeft, paraY - 0.3, paraWidth + 0.4, 3 * height, [\r\n        235,\r\n        235,\r\n        235,\r\n      ]);\r\n      insertPara(pdf, paragraph, paraLeft + 0.2, paraY, paraWidth);\r\n\r\n      paraY = paraY + 3 * lineHeight;\r\n      pdf.AddChart(\r\n        \"pieEstateLeakage\",\r\n        InToPt(paraLeft - 0.7),\r\n        InToPt(paraY),\r\n        InToPt(0.75 * paraWidth),\r\n        InToPt((43 * paraWidth) / 120)\r\n      );\r\n      // paraY = paraY + 5*lineHeight;\r\n      pdf.AddChart(\r\n        \"pieEstateLeakage2\",\r\n        InToPt(paraLeft + 0.48 * paraWidth),\r\n        InToPt(paraY),\r\n        InToPt(0.75 * paraWidth),\r\n        InToPt((43 * paraWidth) / 120)\r\n      );\r\n\r\n      /*end ofPage 4*/\r\n      pdf.addFooterAndHeader(headerOffset, footerText, headerText);\r\n\r\n      /*/*-Estate Protection Alternatives\t\t// Page 5*/\r\n      // logo if asked for\r\n      //    pdf.addCustomImage(\"EPOtherPagesLogo\", pg1TitleY, image);\r\n      result =\r\n        result &&\r\n        pdf.addCustomImage(IMAGE_LOGO_OTHERPAGES, pg1TitleY, image, false, top);\r\n\r\n      paraY = 8 * lineHeight;\r\n      setFontForTitle(pdf, lang);\r\n      pdf.Text(OUTPUTTEXTEP[lang].pg5T, InToPt(paraLeft), InToPt(paraY));\r\n      setFontForParas(pdf);\r\n\r\n      parag = [];\r\n      OUTPUTTEXTEP[lang].pg5Paragraphs.map((item) => parag.push(item));\r\n      //console.log(parag);\r\n\r\n      paraY = paraY + 2 * lineHeight;\r\n      paragraph = parag[0];\r\n      insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n      paraY = paraY + 4 * lineHeight;\r\n      paragraph = parag[1];\r\n      insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n      paraY = paraY + 2.5 * lineHeight;\r\n      paragraph = parag[2];\r\n      insertBullet(\r\n        pdf,\r\n        \"1.\",\r\n        paraLeft + indent,\r\n        paraY,\r\n        NUMBER_BULLET_FONT_SIZE\r\n      );\r\n      insertPara(pdf, paragraph, paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      paraY = paraY + 1.5 * lineHeight;\r\n      paragraph = parag[3];\r\n      insertBullet(\r\n        pdf,\r\n        \"2.\",\r\n        paraLeft + indent,\r\n        paraY,\r\n        NUMBER_BULLET_FONT_SIZE\r\n      );\r\n      insertPara(pdf, paragraph, paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      paraY = paraY + 1.5 * lineHeight;\r\n      paragraph = parag[4];\r\n      insertBullet(\r\n        pdf,\r\n        \"3.\",\r\n        paraLeft + indent,\r\n        paraY,\r\n        NUMBER_BULLET_FONT_SIZE\r\n      );\r\n      insertPara(pdf, paragraph, paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      paraY = paraY + (lang === \"fr\" ? 2.5 : 1.5) * lineHeight;\r\n      paragraph = parag[5];\r\n      insertBullet(\r\n        pdf,\r\n        \"4.\",\r\n        paraLeft + indent,\r\n        paraY,\r\n        NUMBER_BULLET_FONT_SIZE\r\n      );\r\n      insertPara(pdf, paragraph, paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      paraY = paraY + 2 * lineHeight;\r\n      paragraph = parag[6];\r\n      insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n      paraY = paraY + 1.5 * lineHeight;\r\n      paragraph = parag[7];\r\n      insertBullet(\r\n        pdf,\r\n        \"1.\",\r\n        paraLeft + indent,\r\n        paraY,\r\n        NUMBER_BULLET_FONT_SIZE\r\n      );\r\n      insertPara(pdf, paragraph, paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      paraY = paraY + 5 * lineHeight;\r\n      paragraph = parag[8];\r\n      insertBullet(\r\n        pdf,\r\n        \"2.\",\r\n        paraLeft + indent,\r\n        paraY,\r\n        NUMBER_BULLET_FONT_SIZE\r\n      );\r\n      insertPara(pdf, paragraph, paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      paraY = paraY + 6 * lineHeight;\r\n      paragraph = parag[9];\r\n      insertBullet(\r\n        pdf,\r\n        \"3.\",\r\n        paraLeft + indent,\r\n        paraY,\r\n        NUMBER_BULLET_FONT_SIZE\r\n      );\r\n      insertPara(pdf, paragraph, paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      paraY = paraY + 4 * lineHeight;\r\n      paragraph = parag[10];\r\n      insertBullet(\r\n        pdf,\r\n        \"4.\",\r\n        paraLeft + indent,\r\n        paraY,\r\n        NUMBER_BULLET_FONT_SIZE\r\n      );\r\n      insertPara(pdf, paragraph, paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      paraY = paraY + 6 * lineHeight;\r\n      paragraph = OUTPUTTEXTEP[lang].pg5Plast;\r\n\r\n      //this.setDrawColor(235, 235, 235);\r\n      pdf.drawRect(paraLeft, paraY - 0.3, paraWidth + 0.4, 3 * height, [\r\n        235,\r\n        235,\r\n        235,\r\n      ]);\r\n      insertPara(pdf, paragraph, paraLeft + 0.2, paraY, paraWidth);\r\n\r\n      /*end ofPage 5*/\r\n      pdf.addFooterAndHeader(headerOffset, footerText, headerText);\r\n\r\n      /*/*-Using Life Insurance to Preserve Your Estate\t\t// Page 6*/\r\n      // logo if asked for\r\n      //    pdf.addCustomImage(\"EPOtherPagesLogo\", pg1TitleY, image);\r\n      result =\r\n        result &&\r\n        pdf.addCustomImage(IMAGE_LOGO_OTHERPAGES, pg1TitleY, image, false, top);\r\n\r\n      paraY = 8 * lineHeight;\r\n      setFontForTitle(pdf, lang);\r\n      pdf.Text(OUTPUTTEXTEP[lang].pg6T, InToPt(paraLeft), InToPt(paraY));\r\n      setFontForParas(pdf);\r\n\r\n      parag = [];\r\n      OUTPUTTEXTEP[lang].pg6Paragraphs1.map((item) => parag.push(item));\r\n      //console.log(parag);\r\n\r\n      paraY = paraY + 2 * lineHeight;\r\n      paragraph = parag[0];\r\n      insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n      paraY = paraY + 5 * lineHeight;\r\n      paragraph = parag[1];\r\n      insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n      paraY = paraY + 3.5 * lineHeight;\r\n      paragraph = parag[2];\r\n      insertBullet(\r\n        pdf,\r\n        \"1.\",\r\n        paraLeft + indent,\r\n        paraY,\r\n        NUMBER_BULLET_FONT_SIZE\r\n      );\r\n      insertPara(pdf, paragraph, paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      paraY = paraY + 1.4 * lineHeight;\r\n      paragraph = parag[3];\r\n      insertBullet(\r\n        pdf,\r\n        \"2.\",\r\n        paraLeft + indent,\r\n        paraY,\r\n        NUMBER_BULLET_FONT_SIZE\r\n      );\r\n      insertPara(pdf, paragraph, paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      paraY = paraY + 1.4 * lineHeight;\r\n      paragraph = parag[4];\r\n      insertBullet(\r\n        pdf,\r\n        \"3.\",\r\n        paraLeft + indent,\r\n        paraY,\r\n        NUMBER_BULLET_FONT_SIZE\r\n      );\r\n      insertPara(pdf, paragraph, paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      paraY = paraY + 2 * lineHeight;\r\n      paragraph = parag[5];\r\n      insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n      paraY = paraY + 6 * lineHeight;\r\n      paragraph = parag[6];\r\n      insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n      // reduced after edit\r\n      /*   paraY = paraY + 4 * lineHeight;\r\n    paragraph = parag[7];\r\n    insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n    paraY = paraY + 4 * lineHeight;\r\n    paragraph = parag[8];\r\n    insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n    paraY = paraY + 3 * lineHeight;\r\n    paragraph = parag[9];\r\n    insertPara(pdf, paragraph, paraLeft, paraY, paraWidth); */\r\n\r\n      /*end ofPage 6*/\r\n      //    addFooterAndHeader(pdf, lang);\r\n\r\n      // combine summary page with last\r\n\r\n      /*/*-Summary\t\t// Page 7*/\r\n      // paraY = 8 * lineHeight;\r\n      // logo if asked for\r\n      //    pdf.addCustomImage(\"EPOtherPagesLogo\", pg1TitleY, image);\r\n      result =\r\n        result &&\r\n        pdf.addCustomImage(IMAGE_LOGO_OTHERPAGES, pg1TitleY, image, false, top);\r\n\r\n      paraY = paraY + 8 * lineHeight;\r\n      setFontForTitle(pdf, lang);\r\n      pdf.Text(OUTPUTTEXTEP[lang].pg7T, InToPt(paraLeft), InToPt(paraY));\r\n      setFontForParas(pdf);\r\n\r\n      paraY = paraY + 2 * lineHeight;\r\n      paragraph = OUTPUTTEXTEP[lang].pg7P1;\r\n      pdf.MultilineText(\r\n        paragraph,\r\n        InToPt(paraLeft),\r\n        InToPt(paraY),\r\n        InToPt(paraWidth)\r\n      );\r\n\r\n      /*end ofPage 7*/\r\n      pdf.Footer(OUTPUTTEXTEP[lang].pgFooter);\r\n\r\n      /*/*-Appendix\t\tgrids // Page 8*/\r\n\r\n      // add a landscape page for aggregate grid\r\n\r\n      const LE = props.LE; //- props.assetProjections[0].grid.dataProjection[1][0];\r\n      insertGrid2(\r\n        pdf,\r\n        props.aggregateGrid,\r\n        LE,\r\n        paraLeft - 0.2,\r\n        1.65 * paraWidth,\r\n        lang,\r\n        true,\r\n        \"landscape\",\r\n        0,\r\n        GRID_AGGREGATE\r\n      );\r\n      // if too long add another page\r\n      if (\r\n        LE + 3 > LINES_PER_PAGE_LANDSCAPE &&\r\n        LE + 3 < 2 * LINES_PER_PAGE_LANDSCAPE\r\n      )\r\n        insertGrid2(\r\n          pdf,\r\n          props.aggregateGrid,\r\n          LE,\r\n          paraLeft - 0.2,\r\n          1.65 * paraWidth,\r\n          lang,\r\n          true,\r\n          \"landscape\",\r\n          LINES_PER_PAGE_LANDSCAPE,\r\n          GRID_AGGREGATE\r\n        );\r\n      else if (LE + 3 > 2 * LINES_PER_PAGE_LANDSCAPE) {\r\n        insertGrid2(\r\n          pdf,\r\n          props.aggregateGrid,\r\n          LE,\r\n          paraLeft - 0.2,\r\n          1.65 * paraWidth,\r\n          lang,\r\n          true,\r\n          \"landscape\",\r\n          LINES_PER_PAGE_LANDSCAPE,\r\n          GRID_AGGREGATE\r\n        );\r\n        insertGrid2(\r\n          pdf,\r\n          props.aggregateGrid,\r\n          LE,\r\n          paraLeft - 0.2,\r\n          1.65 * paraWidth,\r\n          lang,\r\n          true,\r\n          \"landscape\",\r\n          2 * LINES_PER_PAGE_LANDSCAPE,\r\n          GRID_AGGREGATE\r\n        );\r\n      }\r\n      for (let j = 0; j < props.assetProjections.length; ++j)\r\n        insertGrid2(\r\n          pdf,\r\n          props.assetProjections[j].grid,\r\n          LE,\r\n          paraLeft,\r\n          paraWidth,\r\n          lang,\r\n          true,\r\n          \"portrait\",\r\n          0,\r\n          GRID_INDIVIDUAL\r\n        );\r\n\r\n      /*end ofPage 8*/\r\n      pdf.addFooterAndHeader(headerOffset, footerText, headerText);\r\n\r\n      /*/*-Using Life Insurance to Preserve Your Estate\t\t// Page 6*/\r\n      // logo if asked for\r\n      //    pdf.addCustomImage(\"EPOtherPagesLogo\", pg1TitleY, image);\r\n      result =\r\n        result &&\r\n        pdf.addCustomImage(IMAGE_LOGO_OTHERPAGES, pg1TitleY, image, false, top);\r\n\r\n      paraY = 8 * lineHeight;\r\n      setFontForTitle(pdf, lang);\r\n      pdf.Text(OUTPUTTEXTEP[lang].pg9T, InToPt(paraLeft), InToPt(paraY));\r\n      setFontForParas(pdf);\r\n\r\n      paraY = paraY + 2 * lineHeight;\r\n      insertPara(pdf, OUTPUTTEXTEP[lang].pg9P1, paraLeft, paraY, paraWidth);\r\n      paraY = paraY + (lang === \"fr\" ? 7 : 6) * lineHeight;\r\n      insertPara(pdf, OUTPUTTEXTEP[lang].pg9P2, paraLeft, paraY, paraWidth);\r\n\r\n      //pdf.Footer(OUTPUTTEXTEP[lang].pgFooter);\r\n      // pdf.showOnPage();\r\n      var data = pdf.showOnPage();\r\n\r\n      if (result === false) alert(lang===\"en\"?\"PDF image error\":\"Erreur d’image PDF\");\r\n\r\n      // Done\r\n      pdf.Save(\"PYE_PDF.pdf\");\r\n      return data;\r\n    }\r\n  } catch (error) {}\r\n}\r\n\r\nfunction setFontForTitle(pdf, lang, size) {\r\n  pdf.SetFont(HELVETICA, NORMAL);\r\n  if (size === undefined) {\r\n    if (lang === \"en\") pdf.SetFontSize(PxToPt(25));\r\n    else pdf.SetFontSize(PxToPt(20));\r\n  } else {\r\n    pdf.SetFont(HELVETICA, BOLD);\r\n    if (lang === \"en\") pdf.SetFontSize(PxToPt(size));\r\n    else pdf.SetFontSize(PxToPt(size - 1));\r\n  }\r\n\r\n  pdf.SetTextColor(0x45, 0x55, 0x60);\r\n}\r\n\r\nfunction addNote(pdf, para, left, paraY, paraWidth) {\r\n  setFontForParas(pdf);\r\n  pdf.SetTextColor(150, 150, 150);\r\n  pdf.SetFontSize(PxToPt(12));\r\n  insertPara(pdf, para, left, paraY, paraWidth);\r\n  setFontForParas(pdf);\r\n}\r\n\r\nfunction setFontForParas(pdf) {\r\n  pdf.SetFont(TIMES, NORMAL);\r\n  pdf.SetFontSize(PxToPt(16));\r\n  pdf.SetTextColor(0x45, 0x55, 0x60);\r\n}\r\n\r\nfunction insertBullet(pdf, bullet, left, y, size) {\r\n  pdf.SetTextColor(115, 153, 198);\r\n  pdf.SetFontSize(PxToPt(size));\r\n  pdf.SetFont(TIMES, BOLD);\r\n  pdf.Text(\r\n    bullet,\r\n    InToPt(left + (size === BULLET_FONT_SIZE ? 0.02 : 0)),\r\n    InToPt(y - (size === BULLET_FONT_SIZE ? 0.03 : 0))\r\n  );\r\n  pdf.SetFont(TIMES, NORMAL);\r\n  pdf.SetFontSize(PxToPt(16));\r\n  pdf.SetTextColor(0x45, 0x55, 0x60);\r\n}\r\n\r\nfunction insertPara(pdf, para, left, paraY, paraWidth) {\r\n  pdf.MultilineText(para, InToPt(left), InToPt(paraY), InToPt(paraWidth));\r\n}\r\n\r\nfunction insertTableTitle(\r\n  pdf,\r\n  paraLeft,\r\n  paraY,\r\n  values,\r\n  height,\r\n  paraWidths,\r\n  fillColor\r\n) {\r\n  pdf.SetFontSize(PxToPt(12));\r\n  const fill = fillColor === undefined ? [115, 153, 198] : fillColor;\r\n  const textColor = [255, 255, 255];\r\n  pdf.SetFont(TIMES, BOLD);\r\n  const h = pdf.tableRow(\r\n    fill,\r\n    textColor,\r\n    paraLeft,\r\n    paraY,\r\n    values,\r\n    height,\r\n    paraWidths,\r\n    false,\r\n    false,\r\n    true\r\n  );\r\n  return h;\r\n}\r\n\r\nfunction insertTableRow(\r\n  pdf,\r\n  paraLeft,\r\n  paraY,\r\n  values,\r\n  height,\r\n  paraWidths,\r\n  bold,\r\n  fillColor,\r\n  align\r\n) {\r\n  pdf.SetTextColor(0x45, 0x55, 0x60);\r\n  const fill = fillColor === undefined ? [249, 249, 249] : fillColor;\r\n  const textColor = [0x45, 0x55, 0x60];\r\n  pdf.SetFont(TIMES, bold ? BOLD : NORMAL);\r\n  pdf.tableRow(\r\n    fill,\r\n    textColor,\r\n    paraLeft,\r\n    paraY,\r\n    values,\r\n    height,\r\n    paraWidths,\r\n    true,\r\n    align\r\n  );\r\n}\r\n/* function insertTableRowBold(pdf, paraLeft, paraY, values, height, paraWidths,align) {\r\n  pdf.SetTextColor(0x45, 0x55, 0x60);\r\n  const fill = [235, 235, 235];\r\n  const textColor = [0x45, 0x55, 0x60];\r\n  pdf.SetFont(TIMES, BOLD);\r\n  pdf.tableRow(\r\n    fill,\r\n    textColor,\r\n    paraLeft,\r\n    paraY,\r\n    values,\r\n    height,\r\n    paraWidths,\r\n    true,\r\n    align\r\n  );\r\n}\r\n */\r\n\r\n/* function pdf.addCustomImage( id,pg1TitleY,image,firstPage){\r\n \r\npdf.AddImageFitWidthOnly(\r\n  id,\r\n  InToPt(pg1TitleY - 3 + image.left*HEADER_RECT_IN_W/100), //1.51),\r\n  InToPt(firstPage?1.06:.29),\r\n  InToPt(6.04*image.size/100),\r\n  InToPt(firstPage?2.76:.38) // max height\r\n);\r\n} */\r\n\r\nfunction insertGrid2(\r\n  pdf,\r\n  grid,\r\n  LE,\r\n  paraLeft,\r\n  paraWidth,\r\n  lang,\r\n  wrappedTitleBar,\r\n  orientation,\r\n  startYr,\r\n  mode\r\n) {\r\n  let i;\r\n  let j;\r\n  let cols = grid.dataColTitles.length;\r\n  const height = 0.2;\r\n  let paraY = 2.2 * height;\r\n  let max =\r\n    orientation === \"landscape\"\r\n      ? startYr === 0\r\n        ? LINES_PER_PAGE_LANDSCAPE\r\n        : 2 * LINES_PER_PAGE_LANDSCAPE\r\n      : LINES_PER_PAGE_PORTRAIT;\r\n  const decimalChar = lang === \"en\" ? \".\" : \",\";\r\n  const thousands = lang === \"en\" ? \",\" : \" \";\r\n  //const formatFr = lang === \"fr\" ? true : false;\r\n  let Widths = [];\r\n\r\n  pdf.AddPage(orientation);\r\n\r\n  // Appendix title\r\n  setFontForTitle(pdf, lang, 16);\r\n  let paragraph = OUTPUTTEXTEP[lang].pg8T + \": \" + OUTPUTTEXTEP[lang].pg3T;\r\n  insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n  // Appendix para\r\n  setFontForParas(pdf);\r\n  paraY = paraY + 1.6 * height;\r\n  paragraph =\r\n    (mode === GRID_AGGREGATE\r\n      ? OUTPUTTEXTEP[lang].pg8P1\r\n      : OUTPUTTEXTEP[lang].pg8P2) +\r\n    (mode === GRID_AGGREGATE ? (startYr === 0 ? \"\" : \"\") : \"\");\r\n  insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n  paraY = paraY + 0.5 * height;\r\n\r\n  // grid name and title\r\n  // grid col widths\r\n  Widths.push(paraWidth / (cols + 5)); // year\r\n  Widths.push(paraWidth / (cols + 5)); // age\r\n  for (i = 2; i < cols; ++i) {\r\n    Widths.push((paraWidth - (2 * paraWidth) / (cols + 4)) / (cols - 2));\r\n  }\r\n\r\n  // max of 8 columns in portrait\r\n  let totalGridWidth = paraWidth;\r\n  if (mode === GRID_INDIVIDUAL) totalGridWidth = (cols * paraWidth) / 8;\r\n\r\n  let values = grid.dataColTitles;\r\n  let goodWidth = [];\r\n  let totalGoodWidth = 0;\r\n  for (i = 0; i < cols; ++i) {\r\n    goodWidth.push(pdf.textWidth(values[i]));\r\n    totalGoodWidth += goodWidth[i];\r\n  }\r\n  // aportion grid title\r\n  for (i = 0; i < cols; ++i) {\r\n    Widths[i] = goodWidth[i] + 0.15;\r\n  }\r\n  let widthTotal = 0;\r\n  for (i = 2; i < cols; ++i) widthTotal += Widths[i];\r\n\r\n  // now check multilines\r\n  let goodWidthMultiLine = [];\r\n  let totalGoodWidthMultiLine = 0;\r\n\r\n  let addMore =\r\n    (totalGridWidth - widthTotal - Widths[0] - Widths[1]) / (cols - 2);\r\n  if (mode === GRID_INDIVIDUAL) {\r\n    for (i = 2; i < cols; ++i) Widths[i] += addMore;\r\n  } else if (mode === GRID_AGGREGATE) {\r\n    addMore =\r\n      (totalGridWidth - widthTotal - Widths[0] - Widths[1]) / (cols - 3);\r\n    for (i = 2; i < cols; ++i) if (i !== 4) Widths[i] += addMore;\r\n  }\r\n\r\n  for (i = 0; i < cols; ++i) {\r\n    goodWidthMultiLine.push(pdf.textWidthMultiLine(values[i], Widths[i]));\r\n    totalGoodWidthMultiLine += goodWidthMultiLine[i];\r\n  }\r\n  // aportion grid title\r\n\r\n  /*  for (i = 0; i < cols; ++i)\r\n    if(Widths[i]<.9*goodWidthMultiLine[i])\r\n        Widths[i]=goodWidthMultiLine[i]/.9\r\n */\r\n  //for (i = 0; i < cols; ++i)\r\n  //console.log(values[i],goodWidth[i],goodWidthMultiLine[i],Widths[i])\r\n  // for (i = 0; i < cols; ++i)\r\n  //  Widths[i]=goodWidthMultiLine[i]/.9*totalGridWidth/totalGoodWidthMultiLine\r\n\r\n  // if(mode===GRID_AGGREGATE)\r\n  {\r\n    paraY = paraY + 0.8 * height;\r\n    paragraph = grid.gridTitle;\r\n    pdf.SetFontSize(PxToPt(12));\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n    paraY = paraY + 0.4 * height;\r\n  }\r\n\r\n  // headers\r\n  //console.log(values)\r\n  const height2 = insertTableTitle(\r\n    pdf,\r\n    paraLeft,\r\n    paraY,\r\n    values,\r\n    height,\r\n    Widths,\r\n    [51, 77, 124]\r\n  );\r\n\r\n  // grid rows\r\n  let rows = startYr;\r\n  let fillColor;\r\n  if (wrappedTitleBar) paraY = paraY + height2;\r\n  // 40 rows per page\r\n  while (rows < LE + 3) {\r\n    //grid.dataProjection[0].length) {\r\n\r\n    if (\r\n      rows === max &&\r\n      ((startYr === 0 && LE + 3 - rows > 6) ||\r\n        (startYr === LINES_PER_PAGE_LANDSCAPE &&\r\n          LE + LINES_PER_PAGE_LANDSCAPE + 3 - rows > 6))\r\n    ) {\r\n      if (mode === GRID_AGGREGATE) {\r\n        insertPara(\r\n          pdf,\r\n          OUTPUTTEXTEP[lang].pg4P1,\r\n          paraLeft,\r\n          paraY + (3 * height) / 2 + 0.1,\r\n          paraWidth\r\n        );\r\n        pdf.FooterLandscape(OUTPUTTEXTEP[lang].pgFooter);\r\n        return rows;\r\n      }\r\n\r\n      rows = LE + 3 - 6;\r\n      paraY = paraY + height;\r\n      pdf.SetFont(TIMES, BOLD);\r\n      insertPara(pdf, \"......\", paraLeft, paraY + height / 2, paraWidth);\r\n      pdf.SetFont(TIMES, NORMAL);\r\n    }\r\n    values = [];\r\n\r\n    let align = [];\r\n    for (i = 0; i < cols; ++i) {\r\n      //if(i===0) console.log(grid.dataProjection[i][rows])\r\n      values.push(\r\n        (i === 0 && rows === 0) || i === 1\r\n          ? String(grid.dataProjection[i][rows])\r\n          : formatMoney(\r\n              parseFloat(cleanFormat(grid.dataProjection[i][rows], lang)),\r\n              0,\r\n              decimalChar,\r\n              thousands\r\n            ).toString()\r\n      );\r\n      align.push(2);\r\n    }\r\n    paraY = paraY + height;\r\n    fillColor = rows % 2 ? [249, 249, 249] : [228, 229, 230];\r\n    if (rows == LE) {\r\n      fillColor = [208, 215, 230];\r\n      insertPara(\r\n        pdf,\r\n        lang === \"en\" ? \"LE\" : \"EV\",\r\n        paraLeft + totalGridWidth + 0.15,\r\n        paraY + height / 2 + 0.01,\r\n        paraWidth\r\n      );\r\n    }\r\n    //console.log(values)\r\n    insertTableRow(\r\n      pdf,\r\n      paraLeft,\r\n      paraY,\r\n      values,\r\n      height,\r\n      Widths,\r\n      false,\r\n      fillColor,\r\n      align\r\n    );\r\n\r\n    rows++;\r\n  }\r\n\r\n  if (orientation === \"landscape\")\r\n    pdf.FooterLandscape(OUTPUTTEXTEP[lang].pgFooter);\r\n  else pdf.Footer(OUTPUTTEXTEP[lang].pgFooter);\r\n}\r\n\r\nexport function insertGrid (\r\n  pdf,\r\n  grid,\r\n  LE,\r\n  paraLeft,\r\n  paraWidth,\r\n  lang,\r\n  wrappedTitleBar,\r\n  orientation,\r\n  startYr,\r\n  lastRow,\r\n  mode,\r\n  titleY,\r\n  title1,title2,para1,para2,pgFooter\r\n){\r\n  let i;\r\n  let j;\r\n  let cols = grid.dataColTitles.length;\r\n  const height = 0.2;\r\n  let paraY =titleY;// 2.2 * height;\r\n  let max =\r\n    orientation === \"landscape\"\r\n      ? startYr === 0\r\n        ? LINES_PER_PAGE_LANDSCAPE\r\n        : 2 * LINES_PER_PAGE_LANDSCAPE\r\n      : LINES_PER_PAGE_PORTRAIT;\r\n  const decimalChar = lang === \"en\" ? \".\" : \",\";\r\n  const thousands = lang === \"en\" ? \",\" : \" \";\r\n // const formatFr = lang === \"fr\" ? true : false;\r\n  let Widths = [];\r\n\r\n  pdf.AddPage(orientation);\r\n\r\n  // Appendix title\r\n  setFontForTitle(pdf, lang, 16);\r\n  let paragraph = title1 + \": \" + para1;\r\n  insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n  // Appendix para\r\n  setFontForParas(pdf);\r\n  paraY = paraY + 1.6 * height;\r\n  paragraph =\r\n    (mode === GRID_AGGREGATE\r\n      ? title2\r\n      : para2) +\r\n    (mode === GRID_AGGREGATE ? (startYr === 0 ? \"\" : \"\") : \"\");\r\n  insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n  paraY = paraY + 0.5 * height;\r\n\r\n  // grid name and title\r\n  // grid col widths\r\n  Widths.push(paraWidth / (cols + 5)); // year\r\n  Widths.push(paraWidth / (cols + 5)); // age\r\n  for (i = 2; i < cols; ++i) {\r\n    Widths.push((paraWidth - (2 * paraWidth) / (cols + 4)) / (cols - 2));\r\n  }\r\n\r\n  // max of 8 columns in portrait\r\n  let totalGridWidth = paraWidth;\r\n  if (mode === GRID_INDIVIDUAL) totalGridWidth = (cols * paraWidth) / 8;\r\n\r\n  let values = grid.dataColTitles;\r\n  let goodWidth = [];\r\n  let totalGoodWidth = 0;\r\n  for (i = 0; i < cols; ++i) {\r\n    goodWidth.push(pdf.textWidth(values[i]));\r\n    totalGoodWidth += goodWidth[i];\r\n  }\r\n  // aportion grid title\r\n  for (i = 0; i < cols; ++i) {\r\n    Widths[i] = goodWidth[i] + 0.15;\r\n  }\r\n  let widthTotal = 0;\r\n  for (i = 2; i < cols; ++i) widthTotal += Widths[i];\r\n\r\n  // now check multilines\r\n  let goodWidthMultiLine = [];\r\n  let totalGoodWidthMultiLine = 0;\r\n\r\n  let addMore =\r\n    (totalGridWidth - widthTotal - Widths[0] - Widths[1]) / (cols - 2);\r\n  if (mode === GRID_INDIVIDUAL) {\r\n    for (i = 2; i < cols; ++i) Widths[i] += addMore;\r\n  } else if (mode === GRID_AGGREGATE) {\r\n    addMore =\r\n      (totalGridWidth - widthTotal - Widths[0] - Widths[1]) / (cols - 3);\r\n    for (i = 2; i < cols; ++i) if (i !== 4) Widths[i] += addMore;\r\n  }\r\n\r\n  for (i = 0; i < cols; ++i) {\r\n    goodWidthMultiLine.push(pdf.textWidthMultiLine(values[i], Widths[i]));\r\n    totalGoodWidthMultiLine += goodWidthMultiLine[i];\r\n  }\r\n  // aportion grid title\r\n\r\n  /*  for (i = 0; i < cols; ++i)\r\n  if(Widths[i]<.9*goodWidthMultiLine[i])\r\n      Widths[i]=goodWidthMultiLine[i]/.9\r\n*/\r\n  //for (i = 0; i < cols; ++i)\r\n  //console.log(values[i],goodWidth[i],goodWidthMultiLine[i],Widths[i])\r\n  // for (i = 0; i < cols; ++i)\r\n  //  Widths[i]=goodWidthMultiLine[i]/.9*totalGridWidth/totalGoodWidthMultiLine\r\n\r\n  // if(mode===GRID_AGGREGATE)\r\n  {\r\n    paraY = paraY + 0.8 * height;\r\n    paragraph = grid.gridTitle;\r\n    pdf.SetFontSize(PxToPt(12));\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n    paraY = paraY + 0.4 * height;\r\n  }\r\n\r\n  // headers\r\n  //console.log(values)\r\n  const height2 = insertTableTitle(\r\n    pdf,\r\n    paraLeft,\r\n    paraY,\r\n    values,\r\n    height,\r\n    Widths,\r\n    [51, 77, 124]\r\n  );\r\n\r\n  // grid rows\r\n  let rows = startYr;\r\n  let fillColor;\r\n  if (wrappedTitleBar) paraY = paraY + height2;\r\n  // 40 rows per page\r\n  while (rows < lastRow) {\r\n    //grid.dataProjection[0].length) {\r\n\r\n    if (\r\n      rows === max &&\r\n      ((startYr === 0 && lastRow - rows > 6) ||\r\n        (startYr === LINES_PER_PAGE_LANDSCAPE &&\r\n          lastRow + LINES_PER_PAGE_LANDSCAPE - rows > 6))\r\n    ) {\r\n      if (mode === GRID_AGGREGATE) {\r\n        insertPara(\r\n          pdf,\r\n          OUTPUTTEXTEP[lang].pg4P1,\r\n          paraLeft,\r\n          paraY + (3 * height) / 2 + 0.1,\r\n          paraWidth\r\n        );\r\n        pdf.FooterLandscape(pgFooter);\r\n        return rows;\r\n      }\r\n\r\n      rows = lastRow - 6;\r\n      paraY = paraY + height;\r\n      pdf.SetFont(TIMES, BOLD);\r\n      insertPara(pdf, \"......\", paraLeft, paraY + height / 2, paraWidth);\r\n      pdf.SetFont(TIMES, NORMAL);\r\n    }\r\n    values = [];\r\n\r\n    let align = [];\r\n    for (i = 0; i < cols; ++i) {\r\n      //if(i===0) console.log(grid.dataProjection[i][rows])\r\n      values.push(\r\n        (i === 0 && rows === 0) || i === 1\r\n          ? String(grid.dataProjection[i][rows])\r\n          : formatMoney(\r\n              parseFloat(cleanFormat(grid.dataProjection[i][rows], lang)),\r\n              0,\r\n              decimalChar,\r\n              thousands\r\n            ).toString()\r\n      );\r\n      align.push(2);\r\n    }\r\n    paraY = paraY + height;\r\n    fillColor = rows % 2 ? [249, 249, 249] : [228, 229, 230];\r\n    if (rows == LE) {\r\n      fillColor = [208, 215, 230];\r\n      insertPara(\r\n        pdf,\r\n        lang === \"en\" ? \"LE\" : \"EV\",\r\n        paraLeft + totalGridWidth + 0.15,\r\n        paraY + height / 2 + 0.01,\r\n        paraWidth\r\n      );\r\n    }\r\n    //console.log(values)\r\n    insertTableRow(\r\n      pdf,\r\n      paraLeft,\r\n      paraY,\r\n      values,\r\n      height,\r\n      Widths,\r\n      false,\r\n      fillColor,\r\n      align\r\n    );\r\n\r\n    rows++;\r\n  }\r\n\r\n  if (orientation === \"landscape\")\r\n    pdf.FooterLandscape(pgFooter);\r\n  else pdf.Footer(pgFooter);\r\n}\r\n","import React from \"react\";\r\nimport { Chart,Bar, Pie } from \"react-chartjs-2\";\r\n//import ChartDataLabels from 'chartjs-plugin-datalabels';\r\n//import \"./Output.css\";\r\nimport \"./Output.css\";\r\nimport { setUIDataToAPI } from \"../data/dataExchange\";\r\nimport { getAssetLiabProjections } from \"../data/aggregateGridProjections\";\r\nimport {\r\n  getProjectedLiabilities,\r\n  getLeakageGraphs\r\n} from \"../utils/helper\";\r\nimport {\r\n  QUOTE_CLIENT,\r\n  QUOTE_SPOUSE,\r\n} from \"../definitions/generalDefinitions\";\r\nimport { OUTPUTTEXTEP } from \"../definitions/outputDefinitionsEP\";\r\n\r\n// for Estate\r\nconst DISPLAY_TAXLIAB_CLIENT = 1;\r\nconst DISPLAY_TAXLIAB_JLTD = 2;\r\n\r\nexport class OutputGraphsEPLeakage extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n   // Chart.plugins.unregister(ChartDataLabels)\r\n  }\r\n  \r\n  render() {\r\n    // get data similar to presentation\r\n  \r\n    const AssetLiabProjs = getAssetLiabProjections(this.props);\r\n    const lang =this.props.dataInput.Presentations[0].language;\r\n    const totalLiabProjections = getProjectedLiabilities(\r\n      this.props.dataInput,\r\n      this.props.projectEnd,\r\n      this.props.probate\r\n    );\r\n\r\n    let dtaAgesAll = [];\r\n    let k;\r\n    let lifeExp = this.props.lifeExp;\r\n    const clients = this.props.dataInput.Clients;\r\n    let age =\r\n      clients.length > 1\r\n        ? Math.min(clients[QUOTE_SPOUSE].Age, clients[QUOTE_CLIENT].Age)\r\n        : clients[QUOTE_CLIENT].Age;\r\n\r\n    //let age = this.props.dataInput.Clients[1].Age;\r\n\r\n    if (this.INAEstateOption === DISPLAY_TAXLIAB_CLIENT) {\r\n      lifeExp = this.props.lifeExpClient;\r\n      age = this.props.dataInput.Clients[QUOTE_CLIENT].Age;\r\n    } else if (this.INAEstateOption === DISPLAY_TAXLIAB_JLTD) {\r\n      lifeExp = this.props.lifeExpJLTD;\r\n      age =\r\n        clients.length > 1\r\n          ? Math.min(clients[QUOTE_SPOUSE].Age, clients[QUOTE_CLIENT].Age)\r\n          : clients[QUOTE_CLIENT].Age;\r\n    }\r\n\r\n    for (k = 0; k <= lifeExp + 3; ++k) {\r\n      dtaAgesAll.push(age + k);\r\n    }\r\n\r\n  const leakageGraps=getLeakageGraphs(this.props.dataInput.Assets,this.props.assetProjections,AssetLiabProjs,totalLiabProjections,\r\n  lang,\r\n  lifeExp)\r\n\r\n\r\n\r\n // leakageGraps.dataPieEstateLeakage.plugins=[ChartDataLabels]\r\n // leakageGraps.dataPieEstateLeakageLE.plugins=[ChartDataLabels]\r\n\r\n leakageGraps.optionsPieEstateLeakage.legend.labels.boxWidth = 20;\r\n leakageGraps.optionsPieEstateLeakageLE.legend.labels.boxWidth = 20;\r\n //optionsPieEstateLeakageLE.legend.labels.position = \"left\";\r\n //leakageGraps.dataPieEstateLeakage.responsive=false\r\n //leakageGraps.dataPieEstateLeakage.maintainAspectRatio=false\r\n  //leakageGraps.optionsPieEstateLeakage.legend.position= \"bottom\"\r\n  //leakageGraps.optionsPieEstateLeakageLE.legend.position= \"bottom\"\r\n \r\nreturn (\r\n  <div style={{ width: \"90%\" }}>\r\n    <div style={{ width: \"100%\" }}>\r\n\r\n        <h3 className=\"ppi1\">\r\n        <div>\r\n          {OUTPUTTEXTEP[lang].graphsLeakageT1} <br />\r\n        </div>\r\n      </h3>\r\n        \r\n        <div style={{ width: \"90%\" }}>\r\n        <article  id=\"pieEstateLeakage\"\r\n            className=\"canvas-containerLeakage\">\r\n            <div className=\"EPGraphDiv\">\r\n            <Pie\r\n              data={leakageGraps.dataPieEstateLeakage}\r\n              options={leakageGraps.optionsPieEstateLeakage}\r\n            />\r\n          </div >\r\n          </article>\r\n        <article  id=\"pieEstateLeakage2\"\r\n            className=\"canvas-containerLeakage\" >\r\n            <div className=\"EPGraphDiv\">\r\n            <Pie\r\n              data={leakageGraps.dataPieEstateLeakageLE}\r\n              options={leakageGraps.optionsPieEstateLeakageLE}\r\n            />\r\n          </div>\r\n        </article>\r\n        </div>\r\n        \r\n\r\n      <br />\r\n      <hr />\r\n    </div>\r\n  </div>\r\n);\r\n\r\n}\r\n\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Pie, Bar, Line, Chart } from \"react-chartjs-2\";\r\nimport \"./Output.css\";\r\nimport { OUTPUTTEXTEP } from \"../definitions/outputDefinitionsEP\";\r\n\r\nimport { TOTALS } from \"../definitions/generalDefinitions\";\r\nexport class OutputGraphStacked extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  render() {\r\n    const lang = this.props.language;\r\n    var optionsEstate = {\r\n      /*  \"hover\": {\r\n        \"animationDuration\": 0\r\n      },\r\n      \"animation\": {\r\n        \"duration\": 1,\r\n        \"onComplete\": function() {\r\n          var chartInstance = this.chart,\r\n            ctx = chartInstance.ctx;\r\n  \r\n          ctx.font = Chart.helpers.fontString(Chart.defaults.global.defaultFontSize, Chart.defaults.global.defaultFontStyle, Chart.defaults.global.defaultFontFamily);\r\n          ctx.textAlign = 'center';\r\n          ctx.textBaseline = 'bottom';\r\n  \r\n          this.data.datasets.forEach(function(dataset, i) {\r\n            var meta = chartInstance.controller.getDatasetMeta(i);\r\n            meta.data.forEach(function(bar, index) {\r\n              var data = dataset.data[index];\r\n              ctx.fillText(data, bar._model.x, bar._model.y - 5);\r\n            });\r\n          });\r\n        }\r\n      }, */\r\n      elements: { point: { radius: 0 } },\r\n      responsive: true,\r\n      title: {\r\n        display: true,\r\n        position: \"top\",\r\n        text: OUTPUTTEXTEP[lang].pg4GT,\r\n        fontSize: 14, //8,\r\n        fontColor: \"#111\",\r\n      },\r\n      legend: {\r\n        display: true,\r\n        position: \"bottom\",\r\n        labels: {\r\n          fontColor: \"#333\",\r\n          fontSize: 12, //16\r\n        },\r\n      },\r\n      scales: {\r\n        yAxes: [\r\n          {\r\n            stacked: true,\r\n            ticks: {\r\n              beginAtZero: true,\r\n              callback: function (value, index, values) {\r\n                let result =\r\n                  value < 1000\r\n                    ? value\r\n                    : lang === \"en\"\r\n                    ? Intl.NumberFormat().format(value / 1000) + \"K\"\r\n                    : (Intl.NumberFormat().format(value / 1000) + \"K\").replace(\r\n                        \",\",\r\n                        \" \"\r\n                      );\r\n                return result;\r\n              },\r\n            },\r\n          },\r\n        ],\r\n        xAxes: [\r\n          {\r\n            stacked: true,\r\n            ticks: {\r\n              beginAtZero: true,\r\n            },\r\n          },\r\n        ],\r\n      },\r\n    };\r\n\r\n    let dataAssetnEstateLiabProj = [];\r\n\r\n    let type = [\"line\", \"bar\"];\r\n\r\n    let col = [];\r\n\r\n    // Estate Liability has to be first to stay on top!\r\n    let data = [];\r\n    const taxLiab = TOTALS.TAX_LIAB.value[this.props.language];\r\n    for (let i = 0; i < this.props.dataAssetnEstateLiabProj.length; ++i) {\r\n      if (this.props.dataAssetnEstateLiabProj[i].name === taxLiab)\r\n        data.push(this.props.dataAssetnEstateLiabProj[i]);\r\n    }\r\n    for (let i = 0; i < this.props.dataAssetnEstateLiabProj.length; ++i) {\r\n      if (this.props.dataAssetnEstateLiabProj[i].name !== taxLiab)\r\n        data.push(this.props.dataAssetnEstateLiabProj[i]);\r\n    }\r\n\r\n    for (let i = 0; i < data.length; ++i) {\r\n      col = [];\r\n      let taxLiabLine = data[i].name === taxLiab ? true : false;\r\n      for (let k = 0; k < this.props.dataAges.length; ++k) {\r\n        col.push(data[i].colour);\r\n      }\r\n      col[this.props.LE] = shadeColor(data[i].colour, -20);\r\n      dataAssetnEstateLiabProj.push({\r\n        type: type[taxLiabLine ? 0 : 1],\r\n        label: data[i].name,\r\n        data: data[i].values, //!== undefined?this.props.dataRE:[],\r\n        fill: taxLiabLine ? false : true,\r\n        borderColor: data[i].colour,\r\n        backgroundColor: col, //this.props.dataAssetnEstateLiabProj[i].colour\r\n      });\r\n    }\r\n\r\n    \r\n\r\n    function shadeColor(color, percent) {\r\n      var R = parseInt(color.substring(1, 3), 16);\r\n      var G = parseInt(color.substring(3, 5), 16);\r\n      var B = parseInt(color.substring(5, 7), 16);\r\n\r\n      R = parseInt((R * (100 + percent)) / 100);\r\n      G = parseInt((G * (100 + percent)) / 100);\r\n      B = parseInt((B * (100 + percent)) / 100);\r\n\r\n      R = R < 255 ? R : 255;\r\n      G = G < 255 ? G : 255;\r\n      B = B < 255 ? B : 255;\r\n\r\n      var RR =\r\n        R.toString(16).length == 1 ? \"0\" + R.toString(16) : R.toString(16);\r\n      var GG =\r\n        G.toString(16).length == 1 ? \"0\" + G.toString(16) : G.toString(16);\r\n      var BB =\r\n        B.toString(16).length == 1 ? \"0\" + B.toString(16) : B.toString(16);\r\n\r\n      return \"#\" + RR + GG + BB;\r\n    }\r\n\r\n    const dataEstate = {\r\n      labels: this.props.dataAges, // this.dataAges,\r\n      datasets: dataAssetnEstateLiabProj,\r\n    };\r\n\r\n    return (\r\n      <div style={{ width: \"90%\" }}>\r\n        <div>\r\n          <article\r\n            id=\"stackedChart\"\r\n            className=\"canvas-containerWeb\"\r\n            style={{ marginLeft: \"25px\", height: \"450px\" }}\r\n          >\r\n            <div\r\n              style={{\r\n                overflow: \"hidden\",\r\n                float: \"left\",\r\n                width: \"100%\",\r\n                height: \"400px\",\r\n              }}\r\n            >\r\n              <Bar data={dataEstate} options={optionsEstate} />\r\n            </div>\r\n          </article>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport \"./Output.css\";\r\nimport { Table } from \"react-bootstrap\";\r\nimport {\r\n  ASSETS,\r\n  ASSET_TAX,\r\n  CONTROLTITLE,\r\n  TOTALS,\r\n  TITLES,\r\n  QUOTE_SPOUSE,\r\n  QUOTE_CLIENT,\r\n  OUTPUT_WIDTH_PCT,\r\n} from \"../definitions/generalDefinitions\";\r\nimport { OUTPUTTEXTEP } from \"../definitions/outputDefinitionsEP\";\r\n//import { Bar } from \"react-chartjs-2\";\r\nimport { doSavePdfActionEP } from \"./OutputPDFEP\";\r\nimport { MultiButtons } from \"./MultiButtons\";\r\nimport { OutputGraphsEPLeakage } from \"./OutputGraphsEPLeakage\";\r\nimport {getLogoAndAppletImage,getAgesEP} from \"../utils/helper\";\r\nimport { getInfoExportINA  } from \"../definitions/infoIconsDefinitions\";\r\nimport { Info } from \"./Info\";\r\n\r\n//import { AdjustibleImage } from \"./AdjustibleImage\";\r\n//import jsPDF from 'jspdf';\r\n//import * as jsPDF from 'jspdf';\r\nimport {\r\n  formatMoney,\r\n  formatMoney2,\r\n  getListItemNameFromKey,\r\n  getProjectedLiabilities,\r\n} from \"../utils/helper\";\r\nimport { getOutputValues, setUIDataToAPI } from \"../data/dataExchange\";\r\nimport { getAssetLiabProjections } from \"../data/aggregateGridProjections\";\r\nimport { OutputGraphStacked } from \"./OutputGraphStacked\";\r\nimport {\r\n  fetchAssetProjectionAPI,\r\n  fetchAssetProjection,\r\n  fetchAssetFMVandTaxLiab,\r\n} from \"../utils/FetchAPIs\";\r\n\r\nimport { getAssetGridValues } from \"../data/assetGridProjections\";\r\nimport DataTable from \"./GridExcelComponent/DataTable\";\r\nimport { isEqual } from \"lodash\";\r\nimport Loader from \"react-loader-spinner\";\r\nimport { AddToHomeScreenOutlined } from \"@material-ui/icons\";\r\n\r\nimport {\r\n  ASSET_TAX_TYPE_PRINCIPAL_RES,\r\n  ASSET_TAX_TYPE_REAL_ESTATE,\r\n  ASSET_TAX_TYPE_STOCKS,\r\n  ASSET_TAX_TYPE_SMALL_BUS,\r\n  ASSET_TAX_TYPE_RRSP,\r\n  ASSET_TAX_TYPE_INTEREST,\r\n  ASSET_TAX_TYPE_OTHER,\r\n  ASSET_TAX_TYPE_COUNT,\r\n} from \"../definitions/outputDefinitionsEP\";\r\n\r\nexport class OutputPresentationEP extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      loading: true,\r\n      showGrids: false,\r\n      image: this.props.dataInput.Presentations[0].adviserLogo.image,\r\n      imageSize: 90,\r\n      imageAlign: 2,\r\n    };\r\n    this.AssetLiabProjs = null;\r\n  }\r\n\r\n\r\n  doINA = async () => {\r\n    //window.top.location.href = 'localhost:8086';\r\n    //window.parent.changeLogo();\r\n   // console.log(this.props);\r\n    /* console.log(\"INA_\" +\r\n    this.props.dataInput.Presentations[0].language +\r\n    \"_\" +\r\n    this.props.encryptedInput,\r\n  \"*\") */\r\n   await window.parent.postMessage(\r\n      \"INA_\" +\r\n        this.props.dataInput.Presentations[0].language +\r\n        \"_\" +\r\n        this.props.encryptedInputLife1AndSpouse,\r\n      \"*\"\r\n    );\r\n\r\n   \r\n  };\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    this.setState({ showGrids: false });\r\n  }\r\n\r\n  clickMultiButton = (e) => {\r\n    let showGrids = true;\r\n    if (e === 1) showGrids = false;\r\n\r\n    this.setState({ showGrids: showGrids });\r\n  };\r\n\r\n  doPDF = () => {\r\n    var data = doSavePdfActionEP(this.props, this.AssetLiabProjs); //, this.dateApplet);\r\n\r\n    // option to embed the pdf\r\n    /* {\r\n      setTimeout(function () {\r\n        document.getElementById(\"obj\").setAttribute(\"data\", data);\r\n        document.getElementById(\"obj\").setAttribute(\"height\", \"0px\");\r\n      }, 1000);\r\n    } */\r\n  };\r\n\r\n  doPrint = () => {\r\n    var mywindow = window.open(\"\", \"PRINT\");\r\n\r\n    mywindow.document.write(\r\n      \"<html><head><title>\" + document.title + \"</title>\"\r\n    );\r\n    mywindow.document.write(\"</head><body >\");\r\n    mywindow.document.write(\"<h1>\" + \"Protecting Your Estate\" + \"</h1>\");\r\n    mywindow.document.write(document.getElementById(\"presentation\").innerHTML);\r\n    mywindow.document.write(\"</body></html>\");\r\n\r\n    mywindow.document.close(); // necessary for IE >= 10\r\n    mywindow.focus(); // necessary for IE >= 10*/\r\n\r\n    mywindow.print();\r\n    mywindow.close();\r\n\r\n    return true;\r\n  };\r\n\r\n  /*  onImageChange = (event) => {\r\n    if (event.target.files && event.target.files[0]) {\r\n      this.setState({\r\n        image: URL.createObjectURL(event.target.files[0])\r\n      });\r\n    }\r\n   } */\r\n\r\n  render() {\r\n    this.AssetLiabProjs = getAssetLiabProjections(this.props);\r\n    this.output = getOutputValues(this.props);\r\n    const styleWithLogo = { overflow: \"hidden\", width: \"100%\", overflowX: \"auto\" };\r\n    const styleWithLogoGrids = {width: \"100%\" };\r\n    \r\n    const lang = this.props.dataInput.Presentations[0].language;\r\n    const LE = this.props.LE;\r\n    const clients = this.props.dataInput.Clients;\r\n\r\n    let loaded =\r\n      this.AssetLiabProjs.AssetnEstateLiabs.length > 0 ? true : false;\r\n\r\n    \r\n  \r\n    //let dataAges = [];\r\n\r\n    const startAge =\r\n      clients.length > 1\r\n        ? Math.min(clients[QUOTE_SPOUSE].Age, clients[QUOTE_CLIENT].Age)\r\n        : clients[QUOTE_CLIENT].Age;\r\n    // do to LE+3\r\n\r\n\r\n    let dataAges=getAgesEP (clients, LE)\r\n    \r\n\r\n    let p2 = 1;\r\n    let p5 = 1;\r\n    let p6 = 1;\r\n   \r\n    //const { grids, loading } = this.state;\r\n    let totalAssets = 0;\r\n    let totalLiabs = 0;\r\n    if (this.AssetLiabProjs.projectionsGrids[0] === undefined) {\r\n      return <Loader type=\"TailSpin\" color=\"black\" height={30} width={30} />;\r\n    }\r\n\r\n\r\n    const allPages =\r\n      this.props.dataInput.Presentations[0].adviserLogo.image !== null &&\r\n      this.props.dataInput.Presentations[0].adviserLogo.allPages;\r\n\r\n    let j = 0;\r\n\r\n    const images=getLogoAndAppletImage(this.props.dataInput, this.props.imageRemove,this.props.imageAdjust)\r\n    const logoTop=images.logoTop\r\n    const logoBottom=images.logoBottom\r\n   \r\n\r\n    return (\r\n      <div id=\"presentation\">\r\n        <input\r\n          className=\"roundedCornerCmd\"\r\n          style={{\r\n            //width: \"90px\",\r\n            marginTop: \"-32px\",\r\n                marginRight: \"0px\",\r\n                paddingRight: \"8px\",\r\n                float: \"right\",\r\n          }}\r\n          onClick={this.doPDF}\r\n          type=\"button\"\r\n          value={CONTROLTITLE[lang].pdf}\r\n        />\r\n        <div style={{ width: \"100%\", float: \"left\", clear: \"left\" }}>\r\n\r\n      \r\n\r\n            <input\r\n              className=\"roundedCornerCmd\"\r\n              style={{\r\n           //     width: \"180px\",\r\n                marginTop: \"25px\",\r\n                marginRight: \"0px\",\r\n                paddingRight: \"8px\",\r\n                float: \"right\",\r\n              }}\r\n              onClick={this.doINA}\r\n              type=\"button\"\r\n              value={TITLES[lang].appletINA}\r\n            />{<div style={{\r\n                 paddingTop: \"10px\",\r\n                 float: \"right\",\r\n               }}><Info infoIcon={getInfoExportINA(lang)}/></div>} \r\n          </div>\r\n        {/* <object id=\"obj\" type=\"application/pdf\" width=\"50%\" height=\"0px\">\r\n          <p>\r\n            It appears you don't have a PDF plugin for this browser. Please\r\n            download the PDF file.\r\n          </p>\r\n        </object> */}\r\n\r\n        {/* \r\n<iframe id='iframe' type=\"application/pdf\" style={{width:\"100%\", height:\"auto\", float:\"left\"}}></iframe>\r\n        <input\r\n          className=\"multiButtons multiButtonsAct\"\r\n          style={{\r\n            width: \"90px\",\r\n            marginTop: \"0px\",\r\n            paddingRight: \"8px\",\r\n            float: \"right\",\r\n          }}\r\n          onClick={this.doPDF2}\r\n          type=\"button\"\r\n          value={CONTROLTITLE[lang].pdf}\r\n        />\r\n */}\r\n        {/*  <input\r\n          className=\"multiButtons multiButtonsAct\"\r\n          style={{\r\n            width: \"130px\",\r\n            marginTop: \"0px\",\r\n            paddingRight: \"8px\",\r\n            float: \"right\",\r\n          }}\r\n          onClick={this.doPrint}\r\n          type=\"button\"\r\n          value={CONTROLTITLE[lang].print}\r\n        />\r\n */}\r\n        {/* <h3 className=\"ppi1\">\r\n          {needTo}: {this.props.insuranceNeed}\r\n        </h3>\r\n */}\r\n\r\n        <div className=\"contentPres\">\r\n          {/* PAGE 1 */}\r\n\r\n          <p />\r\n        {/* add logo */}\r\n          {images.logo1stPage}\r\n            {/* add image */}\r\n            {images.applet}\r\n\r\n{/*           {this.props.dataInput.Presentations[0].adviserLogo.image !== null && (\r\n            <AdjustibleImage\r\n              image={this.props.dataInput.Presentations[0].adviserLogo.image}\r\n              showDetails={\r\n                this.props.dataInput.Presentations[0].adviserLogo.showDetails\r\n              }\r\n              size={this.props.dataInput.Presentations[0].adviserLogo.size}\r\n              imageLeft={this.props.dataInput.Presentations[0].adviserLogo.left}\r\n              allPages={\r\n                this.props.dataInput.Presentations[0].adviserLogo.allPages\r\n              }\r\n              imageRemove={this.props.imageRemove}\r\n              imageAdjust={this.props.imageAdjust}\r\n              ID={\"AdvisorLogo\"}\r\n            />\r\n          )}\r\n          <AdjustibleImage\r\n            image={require(\"../images/estate.protection.applet.cover.graphic.png\")}\r\n            showDetails={false}\r\n            size={OUTPUT_WIDTH_PCT}\r\n            imageLeft={0}\r\n            ID={\"EPPage1\"}\r\n          />\r\n */}          {/*            <img\r\n            className=\"ppi1\"\r\n            id=\"EPPage1\"\r\n            src={require(\"../images/estate.protection.applet.cover.graphic.png\")}\r\n            width=\"90%\"\r\n          />  */}\r\n          <h1 className=\"ppi1\">{OUTPUTTEXTEP[lang].pg1T}</h1>\r\n          <h5 className=\"ppi2\">\r\n            {OUTPUTTEXTEP[lang].pg1P1} {this.output.designedFor}\r\n            <br />\r\n            {OUTPUTTEXTEP[lang].pg1P2} {this.output.designedBy}\r\n            <br />\r\n            {OUTPUTTEXTEP[lang].pg1P3} {this.output.dateApplet}\r\n            <br />\r\n            {OUTPUTTEXTEP[lang].pg1P4} {this.output.province}\r\n            <br />\r\n          </h5>\r\n          <hr className=\"ppi1\" />\r\n          \r\n          {logoBottom}\r\n          {/* PAGE 2 Intro*/}\r\n\r\n          <div style={styleWithLogo}>\r\n          {logoTop}\r\n            {/* {allPages && (\r\n              <AdjustibleImage\r\n                image={this.props.dataInput.Presentations[0].adviserLogo.image}\r\n                showDetails={false}\r\n                size={this.props.dataInput.Presentations[0].adviserLogo.size}\r\n                imageLeft={\r\n                  this.props.dataInput.Presentations[0].adviserLogo.left\r\n                }\r\n                allPages={\r\n                  this.props.dataInput.Presentations[0].adviserLogo.allPages\r\n                }\r\n                imageRemove={this.props.imageRemove}\r\n                imageAdjust={this.props.imageAdjust}\r\n                ID={\"EPOtherPagesLogo\"}\r\n              />\r\n            )} */}\r\n            <br />\r\n            <h2 className=\"ppi1\">{OUTPUTTEXTEP[lang].pg2T}</h2>\r\n            {/* number changed to bullets feek */}\r\n            {OUTPUTTEXTEP[lang].pg2Paragraphs.map((item) => (\r\n              <p className=\"ppi1\" key={p2++}>\r\n                {p2 >= 4 && p2 !== 6 && p2 !== 9 && p2 <= 12 && (\r\n                  <span\r\n                    style={{\r\n                      paddingLeft: \"15px\",\r\n                      paddingRight: \"5px\",\r\n                      color: \"#759AC7\",\r\n                      fontSize: \"18px\",\r\n                      whiteSpace: \"nowrap\",\r\n                    }}\r\n                  >\r\n                    {/*{p2 < 6 ? p2 - 3 : p2 < 9 ? p2 - 4 : p2 - 5}.{\" \"}*/}\r\n                    &#8226;\r\n                  </span>\r\n                )}{\" \"}\r\n                {item}\r\n                <br />\r\n              </p>\r\n            ))}\r\n          </div>\r\n\r\n          {/* PAGE 3 fin situation*/}\r\n          {logoBottom}\r\n          \r\n          <div style={styleWithLogo}>\r\n          {logoTop}\r\n            {/* {allPages && (\r\n              <AdjustibleImage\r\n                image={this.props.dataInput.Presentations[0].adviserLogo.image}\r\n                showDetails={false}\r\n                size={this.props.dataInput.Presentations[0].adviserLogo.size}\r\n                imageLeft={\r\n                  this.props.dataInput.Presentations[0].adviserLogo.left\r\n                }\r\n                allPages={\r\n                  this.props.dataInput.Presentations[0].adviserLogo.allPages\r\n                }\r\n                imageRemove={this.props.imageRemove}\r\n                imageAdjust={this.props.imageAdjust}\r\n              />\r\n            )} */}\r\n            <br />\r\n            <h2 className=\"ppi1\">{OUTPUTTEXTEP[lang].pg3T}</h2>\r\n            <p className=\"ppi1\">{OUTPUTTEXTEP[lang].pg3P1}</p>\r\n\r\n            <div style={{ fontSize: \"14px\" }}>\r\n              <div style={{ paddingLeft: \"20px\", width: \"35%\", float: \"left\" }}>\r\n                <div>\r\n                  <table\r\n                    className=\"tableEP\"\r\n                    style={{ paddingLeft: \"10px\", width: \"100%\" }}\r\n                  >\r\n                    <tbody>\r\n                      <tr>\r\n                        <th className=\"tableTitleEP\" colSpan=\"2\">\r\n                          {OUTPUTTEXTEP[lang].pg3TabT}\r\n                        </th>\r\n                      </tr>\r\n                      {/* add assets*/}\r\n                      {this.output.assets.map((item) => {\r\n                        totalAssets += item.value;\r\n                        return (\r\n                          <tr key={item.name}>\r\n                            <td style={{ height: \"1px\", width: \"65%\" }}>\r\n                              {item.name}\r\n                              {item.name === ASSETS.OTHER_ASSETS.value[lang] &&\r\n                              item.value > 0\r\n                                ? \" *\"\r\n                                : \"\"}\r\n                            </td>\r\n                            <td\r\n                              className=\"textalignright\"\r\n                              style={{ height: \"1px\" }}\r\n                            >\r\n                              {/* ${formatMoney(item.value, 0, \",\", \",\")} */}\r\n                              {formatMoney2(item.value, 0, lang)}\r\n                            </td>\r\n                          </tr>\r\n                        );\r\n                      })}\r\n                      <tr\r\n                        key={\"totalAssets\"}\r\n                        style={{\r\n                          height: \"1px\",\r\n                          width: \"65%\",\r\n                          backgroundColor: \"#f0f0f5\",\r\n                          textAlign: \"right\",\r\n                        }}\r\n                      >\r\n                        <td>{OUTPUTTEXTEP[lang].pg3Tab2RTot}</td>\r\n                        <td\r\n                          className=\"textalignright\"\r\n                          style={{ height: \"1px\" }}\r\n                        >\r\n                          {/* ${formatMoney(totalAssets, 0, \",\", \",\")} */}\r\n                          {formatMoney2(totalAssets, 0, lang)}\r\n                        </td>\r\n                      </tr>\r\n                    </tbody>\r\n                  </table>\r\n                  {this.output.otherAssetsList !== \"\" && (\r\n                    <p\r\n                      className=\"ppi1\"\r\n                      style={{\r\n                        color: \"darkgrey\",\r\n                        marginTop: \"3px\",\r\n                        marginLeft: \"-10px\",\r\n                        fontSize: \"12px\",\r\n                        float: \"left\",\r\n                      }}\r\n                    >\r\n                      {this.output.otherAssetsList}\r\n                    </p>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              <div style={{ paddingLeft: \"23px\", width: \"38%\", float: \"left\" }}>\r\n                <div>\r\n                  <table\r\n                    className=\"tableEP\"\r\n                    style={{ paddingLeft: \"10px\", width: \"100%\" }}\r\n                  >\r\n                    <tbody>\r\n                      <tr>\r\n                        <th className=\"tableTitleEP\" colSpan=\"2\">\r\n                          {OUTPUTTEXTEP[lang].pg3Tab2T}\r\n                        </th>\r\n                      </tr>\r\n                      {/* liabs*/}\r\n                      {this.output.liabilities.map((item) => {\r\n                        totalLiabs += item.value;\r\n                        return (\r\n                          <tr key={item.name}>\r\n                            <td style={{ width: \"60%\" }}>{item.name}</td>\r\n                            <td className=\"textalignright\">\r\n                              {/* ${formatMoney(item.value, 0, \",\", \",\")} */}\r\n                              {formatMoney2(item.value, 0, lang)}\r\n                            </td>\r\n                          </tr>\r\n                        );\r\n                      })}\r\n                      <tr\r\n                        key={\"totalLiabs\"}\r\n                        style={{\r\n                          height: \"1px\",\r\n                          width: \"65%\",\r\n                          backgroundColor: \"#f0f0f5\",\r\n                          textAlign: \"right\",\r\n                        }}\r\n                      >\r\n                        <td>{OUTPUTTEXTEP[lang].pg3Tab2RTot}</td>\r\n                        <td\r\n                          className=\"textalignright\"\r\n                          style={{ height: \"1px\" }}\r\n                        >\r\n                          {/* ${formatMoney(totalLiabs, 0, \",\", \",\")} */}\r\n                          {formatMoney2(totalLiabs, 0, lang)}\r\n                        </td>\r\n                      </tr>\r\n                      <tr\r\n                        key={\"netWorth\"}\r\n                        style={{\r\n                          height: \"1px\",\r\n                          width: \"65%\",\r\n                          backgroundColor: \"#d1d1e0\",\r\n                          textAlign: \"right\",\r\n                        }}\r\n                      >\r\n                        <td>{OUTPUTTEXTEP[lang].pg3Tab2NW}</td>\r\n                        <td\r\n                          className=\"textalignright\"\r\n                          style={{ height: \"1px\" }}\r\n                        >\r\n                          {/* ${formatMoney(totalAssets-totalLiabs, 0, \",\", \",\")} */}\r\n                          {formatMoney2(totalAssets - totalLiabs, 0, lang)}\r\n                        </td>\r\n                      </tr>\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <h2 className=\"ppi1\">{OUTPUTTEXTEP[lang].pg3T2}</h2>\r\n          <p className=\"ppi1\">{OUTPUTTEXTEP[lang].pg3P2}</p>\r\n          <p className=\"ppi1\">{OUTPUTTEXTEP[lang].pg3P3}</p>\r\n\r\n          <div\r\n            style={{\r\n              fontFamily: \"Georgia, 'Times New Roman', imes, serif\",\r\n              fontSize: \"14px\",\r\n            }}\r\n          >\r\n            <div style={{ paddingLeft: \"20px\", width: \"70%\", float: \"left\" }}>\r\n              <div>\r\n                <table\r\n                  className=\"tableEP\"\r\n                  style={{ paddingLeft: \"10px\", width: \"100%\" }}\r\n                >\r\n                  <tbody>\r\n                    <tr>\r\n                      <th className=\"tableTitleEP\" style={{ width: \"30%\" }}>\r\n                        {OUTPUTTEXTEP[lang].pg3Tab3R1C1}\r\n                      </th>\r\n                      <th className=\"tableTitleEP\" style={{ width: \"20%\" }}>\r\n                        {OUTPUTTEXTEP[lang].pg3Tab3R1C2}\r\n                      </th>\r\n                      <th className=\"tableTitleEP\" style={{ width: \"20%\" }}>\r\n                        {OUTPUTTEXTEP[lang].pg3Tab3R1C3}\r\n                      </th>\r\n                      <th className=\"tableTitleEP\" style={{ width: \"20%\" }}>\r\n                        {OUTPUTTEXTEP[lang].pg3Tab3R1C4}\r\n                      </th>\r\n                    </tr>\r\n                    <tr>\r\n                      <td>{OUTPUTTEXTEP[lang].pg3Tab3R2C1}</td>\r\n                      <td className=\"textalignright\">\r\n                        {\r\n                          this.AssetLiabProjs.EstateLiabsByTypeGrowth[\r\n                            ASSET_TAX_TYPE_REAL_ESTATE\r\n                          ]\r\n                        }\r\n                      </td>\r\n                      <td className=\"textalignright\">\r\n                        {/* $\r\n                        {formatMoney(\r\n                          this.AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_REAL_ESTATE],\r\n                          0,\r\n                          \",\",\r\n                          \",\"\r\n                        )} */}\r\n                        {formatMoney2(\r\n                          this.AssetLiabProjs.EstateLiabsByType[\r\n                            ASSET_TAX_TYPE_REAL_ESTATE\r\n                          ],\r\n                          0,\r\n                          lang\r\n                        )}\r\n                      </td>\r\n                      <td className=\"textalignright\">\r\n                        {/* $\r\n                        {formatMoney(\r\n                          this.AssetLiabProjs.EstateLiabsByTypeLE3[\r\n                            ASSET_TAX_TYPE_REAL_ESTATE\r\n                          ],\r\n                          0,\r\n                          \",\",\r\n                          \",\"\r\n                        )} */}\r\n                        {formatMoney2(\r\n                          this.AssetLiabProjs.EstateLiabsByTypeLE3[\r\n                            ASSET_TAX_TYPE_REAL_ESTATE\r\n                          ],\r\n                          0,\r\n                          lang\r\n                        )}\r\n                      </td>\r\n                    </tr>\r\n                    <tr>\r\n                      <td>{OUTPUTTEXTEP[lang].pg3Tab3R3C1}</td>\r\n                      <td className=\"textalignright\">\r\n                        {\r\n                          this.AssetLiabProjs.EstateLiabsByTypeGrowth[\r\n                            ASSET_TAX_TYPE_STOCKS\r\n                          ]\r\n                        }\r\n                      </td>\r\n                      <td className=\"textalignright\">\r\n                        {/* $\r\n                        {formatMoney(\r\n                          this.AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_STOCKS],\r\n                          0,\r\n                          \",\",\r\n                          \",\"\r\n                        )} */}\r\n                        {formatMoney2(\r\n                          this.AssetLiabProjs.EstateLiabsByType[\r\n                            ASSET_TAX_TYPE_STOCKS\r\n                          ],\r\n                          0,\r\n                          lang\r\n                        )}\r\n                      </td>\r\n                      <td className=\"textalignright\">\r\n                        {/* $\r\n                        {formatMoney(\r\n                          this.AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_STOCKS],\r\n                          0,\r\n                          \",\",\r\n                          \",\"\r\n                        )} */}\r\n                        {formatMoney2(\r\n                          this.AssetLiabProjs.EstateLiabsByTypeLE3[\r\n                            ASSET_TAX_TYPE_STOCKS\r\n                          ],\r\n                          0,\r\n                          lang\r\n                        )}\r\n                      </td>\r\n                    </tr>\r\n                    <tr>\r\n                      <td>{OUTPUTTEXTEP[lang].pg3Tab3R4C1}</td>\r\n                      <td className=\"textalignright\">\r\n                        {\r\n                          this.AssetLiabProjs.EstateLiabsByTypeGrowth[\r\n                            ASSET_TAX_TYPE_SMALL_BUS\r\n                          ]\r\n                        }\r\n                      </td>\r\n                      <td className=\"textalignright\">\r\n                        {/* $\r\n                        {formatMoney(\r\n                          this.AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_SMALL_BUS],\r\n                          0,\r\n                          \",\",\r\n                          \",\"\r\n                        )} */}\r\n                        {formatMoney2(\r\n                          this.AssetLiabProjs.EstateLiabsByType[\r\n                            ASSET_TAX_TYPE_SMALL_BUS\r\n                          ],\r\n                          0,\r\n                          lang\r\n                        )}\r\n                      </td>\r\n                      <td className=\"textalignright\">\r\n                        {/* $\r\n                        {formatMoney(\r\n                          this.AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_SMALL_BUS],\r\n                          0,\r\n                          \",\",\r\n                          \",\"\r\n                        )} */}\r\n                        {formatMoney2(\r\n                          this.AssetLiabProjs.EstateLiabsByTypeLE3[\r\n                            ASSET_TAX_TYPE_SMALL_BUS\r\n                          ],\r\n                          0,\r\n                          lang\r\n                        )}\r\n                      </td>\r\n                    </tr>\r\n                    <tr>\r\n                      <td>{OUTPUTTEXTEP[lang].pg3Tab3R5C1}</td>\r\n                      <td className=\"textalignright\">\r\n                        {\r\n                          this.AssetLiabProjs.EstateLiabsByTypeGrowth[\r\n                            ASSET_TAX_TYPE_RRSP\r\n                          ]\r\n                        }\r\n                      </td>\r\n                      <td className=\"textalignright\">\r\n                        {/* $\r\n                        {formatMoney(\r\n                          this.AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_RRSP],\r\n                          0,\r\n                          \",\",\r\n                          \",\"\r\n                        )} */}\r\n                        {formatMoney2(\r\n                          this.AssetLiabProjs.EstateLiabsByType[\r\n                            ASSET_TAX_TYPE_RRSP\r\n                          ],\r\n                          0,\r\n                          lang\r\n                        )}\r\n                      </td>\r\n                      <td className=\"textalignright\">\r\n                        {/* $\r\n                        {formatMoney(\r\n                          this.AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_RRSP],\r\n                          0,\r\n                          \",\",\r\n                          \",\"\r\n                        )} */}\r\n                        {formatMoney2(\r\n                          this.AssetLiabProjs.EstateLiabsByTypeLE3[\r\n                            ASSET_TAX_TYPE_RRSP\r\n                          ],\r\n                          0,\r\n                          lang\r\n                        )}\r\n                      </td>\r\n                    </tr>\r\n                    <tr>\r\n                      <td>{OUTPUTTEXTEP[lang].pg3Tab3R6C1}</td>\r\n                      <td className=\"textalignright\">\r\n                        {\r\n                          this.AssetLiabProjs.EstateLiabsByTypeGrowth[\r\n                            ASSET_TAX_TYPE_INTEREST\r\n                          ]\r\n                        }\r\n                      </td>\r\n                      <td className=\"textalignright\">\r\n                        {/* $\r\n                        {formatMoney(\r\n                          this.AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_INTEREST],\r\n                          0,\r\n                          \",\",\r\n                          \",\"\r\n                        )} */}\r\n                        {formatMoney2(\r\n                          this.AssetLiabProjs.EstateLiabsByType[\r\n                            ASSET_TAX_TYPE_INTEREST\r\n                          ],\r\n                          0,\r\n                          lang\r\n                        )}\r\n                      </td>\r\n                      <td className=\"textalignright\">\r\n                        {/* $\r\n                        {formatMoney(\r\n                          this.AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_INTEREST],\r\n                          0,\r\n                          \",\",\r\n                          \",\"\r\n                        )} */}\r\n                        {formatMoney2(\r\n                          this.AssetLiabProjs.EstateLiabsByTypeLE3[\r\n                            ASSET_TAX_TYPE_INTEREST\r\n                          ],\r\n                          0,\r\n                          lang\r\n                        )}\r\n                      </td>\r\n                    </tr>\r\n                    <tr>\r\n                      <td>{OUTPUTTEXTEP[lang].pg3Tab3R7C1}</td>\r\n                      <td className=\"textalignright\">\r\n                        {\r\n                          this.AssetLiabProjs.EstateLiabsByTypeGrowth[\r\n                            ASSET_TAX_TYPE_OTHER\r\n                          ]\r\n                        }\r\n                      </td>\r\n                      <td className=\"textalignright\">\r\n                        {/* $\r\n                        {formatMoney(\r\n                          this.AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_INTEREST],\r\n                          0,\r\n                          \",\",\r\n                          \",\"\r\n                        )} */}\r\n                        {formatMoney2(\r\n                          this.AssetLiabProjs.EstateLiabsByType[\r\n                            ASSET_TAX_TYPE_OTHER\r\n                          ],\r\n                          0,\r\n                          lang\r\n                        )}\r\n                      </td>\r\n                      <td className=\"textalignright\">\r\n                        {/* $\r\n                        {formatMoney(\r\n                          this.AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_INTEREST],\r\n                          0,\r\n                          \",\",\r\n                          \",\"\r\n                        )} */}\r\n                        {formatMoney2(\r\n                          this.AssetLiabProjs.EstateLiabsByTypeLE3[\r\n                            ASSET_TAX_TYPE_OTHER\r\n                          ],\r\n                          0,\r\n                          lang\r\n                        )}\r\n                      </td>\r\n                    </tr>\r\n                    <tr\r\n                      style={{ backgroundColor: \"#f0f0f5\", textAlign: \"right\" }}\r\n                    >\r\n                      <td colSpan=\"2\">{OUTPUTTEXTEP[lang].pg3Tab3R8C1}</td>\r\n                      <td className=\"textalignright\">\r\n                        {/* ${formatMoney(this.AssetLiabProjs.EstateLiabsByTypeTotal, 0, \",\", \",\")} */}\r\n                        {formatMoney2(\r\n                          this.AssetLiabProjs.EstateLiabsByTypeTotal,\r\n                          0,\r\n                          lang\r\n                        )}\r\n                      </td>\r\n                      <td className=\"textalignright\">\r\n                        {/* ${formatMoney(this.AssetLiabProjs.EstateLiabsByTypeLE3Total, 0, \",\", \",\")} */}\r\n                        {formatMoney2(\r\n                          this.AssetLiabProjs.EstateLiabsByTypeLE3Total,\r\n                          0,\r\n                          lang\r\n                        )}\r\n                      </td>\r\n                    </tr>\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </div>\r\n            <p\r\n              className=\"ppi1\"\r\n              style={{\r\n                color: \"darkgrey\",\r\n                marginTop: \"3px\",\r\n                fontSize: \"12px\",\r\n                float: \"left\",\r\n              }}\r\n            >\r\n              {OUTPUTTEXTEP[lang].pg3P4}\r\n              <br />\r\n              {OUTPUTTEXTEP[lang].pg3P5}\r\n            </p>\r\n          </div>\r\n\r\n          {logoBottom}\r\n          \r\n          {/* PAGE 4 fin situation*/}\r\n          <div style={styleWithLogo}>\r\n          {logoTop}\r\n            {/* {allPages && (\r\n              <AdjustibleImage\r\n                image={this.props.dataInput.Presentations[0].adviserLogo.image}\r\n                showDetails={false}\r\n                size={this.props.dataInput.Presentations[0].adviserLogo.size}\r\n                imageLeft={\r\n                  this.props.dataInput.Presentations[0].adviserLogo.left\r\n                }\r\n                allPages={\r\n                  this.props.dataInput.Presentations[0].adviserLogo.allPages\r\n                }\r\n                imageRemove={this.props.imageRemove}\r\n                imageAdjust={this.props.imageAdjust}\r\n              />\r\n            )} */}\r\n            <br />\r\n            <h2 className=\"ppi1\">{OUTPUTTEXTEP[lang].pg4T}</h2>\r\n            <p className=\"ppi1\">{OUTPUTTEXTEP[lang].pg4P1}</p>\r\n          </div>\r\n\r\n          {\r\n            (loaded === true && (\r\n              <OutputGraphStacked\r\n                language={lang}\r\n                dataAges={dataAges}\r\n                dataAssetnEstateLiabProj={this.AssetLiabProjs.AssetnEstateLiabs}\r\n                LE={LE} //\r\n              />\r\n            ))\r\n          }\r\n\r\n          <p\r\n            className=\"ppi1\"\r\n            style={{\r\n              color: \"darkgrey\",\r\n              marginTop: \"-30px\",\r\n              fontSize: \"12px\",\r\n              float: \"left\",\r\n            }}\r\n          >\r\n            {OUTPUTTEXTEP[lang].pg4P2 + LE + \")\"}\r\n          </p>\r\n\r\n          <p\r\n            className=\"ppi1\"\r\n            style={{\r\n              backgroundColor: \"lightgrey\",\r\n              width: \"84%\",\r\n              marginTop: \"30px\",\r\n              paddingTop: \"10px\",\r\n              paddingBottom: \"12px\",\r\n              marginLeft: \"30px\",\r\n            }}\r\n          >\r\n            {OUTPUTTEXTEP[lang].pg4P3\r\n              .replace(\r\n                \"X1\",\r\n                formatMoney2(\r\n                  this.AssetLiabProjs.EstateLiabsByTypeTotal,\r\n                  0,\r\n                  lang\r\n                )\r\n              )\r\n              .replace(\r\n                \"X2\",\r\n                formatMoney2(\r\n                  this.AssetLiabProjs.EstateLiabsByTypeLE3Total,\r\n                  0,\r\n                  lang\r\n                )\r\n              )}\r\n          </p>\r\n\r\n          <div>\r\n            <OutputGraphsEPLeakage\r\n              insuranceNeed={this.props.insuranceNeed}\r\n              projectEnd={startAge + LE + 3}\r\n              dataEstateLiability={this.props.dataEstateLiability}\r\n              dataInput={this.props.dataInput}\r\n              dataNAAges={dataAges}\r\n              probate={this.props.probate}\r\n              lifeExp={LE}\r\n              lifeExpJLTD={LE}\r\n              lifeExpClient={LE}\r\n              INAOption={this.INAOption}\r\n              //dataShortfall={dataShort}\r\n              //dataAPISite={appSiteAPI}\r\n              LE={this.props.LE}\r\n              assetProjections={this.props.assetProjections}\r\n              showLeakageOnly={true}\r\n              //language={lang}\r\n              //projectTo={this.toRetirement ? 0 : 1}\r\n              //periodOption={DISPLAY_LIFEEXP_PLUS_3}\r\n            />\r\n          </div>\r\n\r\n          {logoBottom}\r\n          \r\n          {/* PAGE 5 Estate Protection Alternatives*/}\r\n\r\n          <div style={styleWithLogo}>\r\n          {logoTop}\r\n            {/* {allPages && (\r\n              <AdjustibleImage\r\n                image={this.props.dataInput.Presentations[0].adviserLogo.image}\r\n                showDetails={false}\r\n                size={this.props.dataInput.Presentations[0].adviserLogo.size}\r\n                imageLeft={\r\n                  this.props.dataInput.Presentations[0].adviserLogo.left\r\n                }\r\n                allPages={\r\n                  this.props.dataInput.Presentations[0].adviserLogo.allPages\r\n                }\r\n                imageRemove={this.props.imageRemove}\r\n                imageAdjust={this.props.imageAdjust}\r\n              />\r\n            )} */}\r\n            <br />\r\n            <h2 className=\"ppi1\">{OUTPUTTEXTEP[lang].pg5T}</h2>\r\n\r\n            {OUTPUTTEXTEP[lang].pg5Paragraphs.map((item) => (\r\n              <p className=\"ppi1\" key={p5++}>\r\n                {p5 >= 4 && p5 !== 8 && p5 <= 12 && (\r\n                  <span style={{ paddingLeft: \"15px\", color: \"#759AC7\" }}>\r\n                    {p5 < 8 ? p5 - 3 : p5 - 8}.{\" \"}\r\n                  </span>\r\n                )}{\" \"}\r\n                {item}\r\n                <br />\r\n              </p>\r\n            ))}\r\n\r\n            <p\r\n              className=\"ppi1\"\r\n              style={{\r\n                backgroundColor: \"lightgrey\",\r\n                width: \"84%\",\r\n                marginTop: \"30px\",\r\n                paddingTop: \"10px\",\r\n                paddingBottom: \"12px\",\r\n                marginLeft: \"30px\",\r\n              }}\r\n            >\r\n              {OUTPUTTEXTEP[lang].pg5Plast}\r\n            </p>\r\n          </div>\r\n\r\n          {logoBottom}\r\n          \r\n          {/* PAGE 6 Using Life Insurance to Preserve Your Estate*/}\r\n\r\n          <div\r\n            style={{ overflowX: \"hidden\", overflowY: \"hidden\", width: \"100%\" }}\r\n          >\r\n            {logoTop}\r\n            {/* {allPages && (\r\n              <AdjustibleImage\r\n                image={this.props.dataInput.Presentations[0].adviserLogo.image}\r\n                showDetails={false}\r\n                size={this.props.dataInput.Presentations[0].adviserLogo.size}\r\n                imageLeft={\r\n                  this.props.dataInput.Presentations[0].adviserLogo.left\r\n                }\r\n                allPages={\r\n                  this.props.dataInput.Presentations[0].adviserLogo.allPages\r\n                }\r\n                imageRemove={this.props.imageRemove}\r\n                imageAdjust={this.props.imageAdjust}\r\n              />\r\n            )}\r\n */}\r\n            <br />\r\n            <h2 className=\"ppi1\">{OUTPUTTEXTEP[lang].pg6T}</h2>\r\n            {OUTPUTTEXTEP[lang].pg6Paragraphs1.map((item) => (\r\n              <p className=\"ppi1\" key={p6++}>\r\n                {p6 >= 4 && p6 <= 6 && (\r\n                  <span style={{ paddingLeft: \"15px\", color: \"#759AC7\" }}>\r\n                    {p6 < 8 ? p6 - 3 : p6 - 8}.{\" \"}\r\n                  </span>\r\n                )}{\" \"}\r\n                {item}\r\n                <br />\r\n              </p>\r\n            ))}\r\n            {/*} don't show for now*/}\r\n            {/* {OUTPUTTEXTEP[lang].pg6Paragraphs2.map(item =>\r\n              (<p className=\"ppi1\" key={p6++}>{p6 > 12 && <span style={{ paddingLeft: '15px', color: '#759AC7' }}>&#8226;  </span>} {item}<br /></p>)\r\n            )} */}\r\n          </div>\r\n\r\n          {logoBottom}\r\n          \r\n          {/* PAGE 7 Summary*/}\r\n\r\n          <div style={styleWithLogo}>\r\n          {logoTop}\r\n            {/* {allPages && (\r\n              <AdjustibleImage\r\n                image={this.props.dataInput.Presentations[0].adviserLogo.image}\r\n                showDetails={false}\r\n                size={this.props.dataInput.Presentations[0].adviserLogo.size}\r\n                imageLeft={\r\n                  this.props.dataInput.Presentations[0].adviserLogo.left\r\n                }\r\n                allPages={\r\n                  this.props.dataInput.Presentations[0].adviserLogo.allPages\r\n                }\r\n                imageRemove={this.props.imageRemove}\r\n                imageAdjust={this.props.imageAdjust}\r\n              />\r\n            )} */}\r\n            <br />\r\n            <h2 className=\"ppi1\">{OUTPUTTEXTEP[lang].pg7T}</h2>\r\n            <p className=\"ppi1\">{OUTPUTTEXTEP[lang].pg7P1}</p>\r\n          </div>\r\n\r\n          {/* PAGE 8 appendix ledgers*/}\r\n\r\n          <div style={styleWithLogoGrids}>\r\n            <br />\r\n            <h2 className=\"ppi1\">{OUTPUTTEXTEP[lang].pg8T}</h2>\r\n\r\n            <p className=\"ppi1\">{OUTPUTTEXTEP[lang].pg8P2}</p>\r\n\r\n            <div style={{ marginLeft: \"24px\" }}>\r\n              <MultiButtons\r\n                noButtons={2}\r\n                buttonCaption={[\r\n                  OUTPUTTEXTEP[lang].pg8O1,\r\n                  OUTPUTTEXTEP[lang].pg8O2,\r\n                ]}\r\n                selected={this.state.showGrids ? 2 : 1}\r\n                selectMultiButton={this.clickMultiButton}\r\n              />\r\n            </div>\r\n            <div\r\n              id=\"assetGrid\"\r\n              style={{\r\n                clear: \"both\",\r\n                float: \"left\",\r\n                marginLeft: \"25px\",\r\n              }} /*    onClick={this.clone2}  */\r\n            >\r\n              {this.state.showGrids &&\r\n                this.AssetLiabProjs.projectionsGrids.map((grid) => {\r\n                  //console.log(grid.dataColTitles)\r\n                  return (\r\n                    <DataTable\r\n                      key={j++}\r\n                      dataColTitles={grid.dataColTitles}\r\n                      dataProjection={grid.dataProjection}\r\n                      gridTitle={grid.gridTitle}\r\n                      gridIcons={[]}\r\n                      specialRow={LE - startAge}\r\n                      language={lang}\r\n                    />\r\n                  );\r\n                })}\r\n            </div>\r\n          </div>\r\n\r\n          {logoBottom}\r\n          \r\n          {/* PAGE 9 notes*/}\r\n\r\n          <div style={styleWithLogo}>\r\n          {logoTop}\r\n            {/* {allPages && (\r\n              <AdjustibleImage\r\n                image={this.props.dataInput.Presentations[0].adviserLogo.image}\r\n                showDetails={false}\r\n                size={this.props.dataInput.Presentations[0].adviserLogo.size}\r\n                imageLeft={\r\n                  this.props.dataInput.Presentations[0].adviserLogo.left\r\n                }\r\n                allPages={\r\n                  this.props.dataInput.Presentations[0].adviserLogo.allPages\r\n                }\r\n                imageRemove={this.props.imageRemove}\r\n                imageAdjust={this.props.imageAdjust}\r\n              />\r\n            )} */}\r\n            <br />\r\n            <h2 className=\"ppi1\">{OUTPUTTEXTEP[lang].pg9T}</h2>\r\n\r\n            <p className=\"ppi1\">{OUTPUTTEXTEP[lang].pg9P1}</p>\r\n            <p className=\"ppi1\">{OUTPUTTEXTEP[lang].pg9P2}</p>\r\n\r\n            {logoBottom}\r\n          \r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import {\r\n    TITLES,\r\n    ASSETS,\r\n    IMAGE_LOGO,\r\n    IMAGE_LOGO_OTHERPAGES,\r\n    IMAGE_APPLET_EP,\r\n  } from \"../definitions/generalDefinitions\";\r\n  import { OUTPUTTEXT} from \"../definitions/outputDefinitions\";\r\n  import { OUTPUTTEXTEP  } from \"../definitions/outputDefinitionsEP\";\r\n  import { formatMoney, formatMoney2, cleanFormat } from \"../utils/helper\";\r\n  import { getOutputValues } from \"../data/dataExchange\";\r\n  import {insertGrid} from \"./OutputPDFEP\"\r\n\r\n  import {\r\n    PDF,\r\n    InToPt,\r\n    PxToPt,\r\n    HELVETICA,\r\n    TIMES,\r\n    NORMAL,\r\n    BOLD,\r\n    HEADER_RECT_IN_W,\r\n  } from \"./PDF\";\r\n  import {\r\n    ASSET_TAX_TYPE_PRINCIPAL_RES,\r\n    ASSET_TAX_TYPE_REAL_ESTATE,\r\n    ASSET_TAX_TYPE_STOCKS,\r\n    ASSET_TAX_TYPE_SMALL_BUS,\r\n    ASSET_TAX_TYPE_RRSP,\r\n    ASSET_TAX_TYPE_INTEREST,\r\n    ASSET_TAX_TYPE_OTHER,\r\n    ASSET_TAX_TYPE_COUNT,\r\n  } from \"../definitions/outputDefinitionsEP\";\r\n  \r\n  const DISPLAY_INCOME = 1;\r\n  \r\n  const BULLET_FONT_SIZE = 24;\r\n  const NUMBER_BULLET_FONT_SIZE = 11;\r\n  const GRID_AGGREGATE = 0;\r\n  const GRID_INDIVIDUAL = 1;\r\n  \r\n  const LINES_PER_PAGE_LANDSCAPE = 27;\r\n  const LINES_PER_PAGE_PORTRAIT = 37;\r\n  \r\n\r\n\r\nexport async function doSavePdfINAAppendixAction(props) {\r\n  //  try \r\n  {\r\n        let pdf = new PDF();\r\n        pdf.Create();\r\n    \r\n       // var paragraph;\r\n        let height = 0.2;\r\n        let Widths = [1.2, 0.6, 1.8, 1.4];\r\n        let values;\r\n        const paraWidth = 6;\r\n        const paraLeft = 1.2;\r\n        const lineHeight = 0.196;\r\n        const indent = 0.15;\r\n        let paraY = 1;// 2.2 * lineHeight;\r\n    \r\n        // pdf output shared with presentation\r\n      //  let output = getOutputValues(props);\r\n    \r\n        const lang = props.dataInput.Presentations[0].language;\r\n        const pg1TitleY = 4.2;\r\n    \r\n    //  pdf.Header(OUTPUTTEXT[lang].pg1T);\r\n\r\n// Appendix title\r\n      setFontForTitle(pdf, lang, 16);\r\n      let paragraph = OUTPUTTEXT[lang].pgAppendix + \": \" + OUTPUTTEXT[lang].pgAppendixT;\r\n      insertPara(pdf, paragraph, paraLeft-.4, paraY, paraWidth);\r\n    \r\n      setFontForParas(pdf);\r\n      paragraph = OUTPUTTEXT[lang].pgAppendixP1;\r\n      paraY = paraY + 4 *lineHeight;\r\n    insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n     \r\n    paraY = paraY + 1.5* lineHeight;\r\n     \r\n      const graphWidth=paraWidth+1\r\n      let h= document.getElementById(\"barNeeds\").clientHeight\r\n      let w= document.getElementById(\"barNeeds\").clientWidth\r\n      const maxH=2;\r\n      const maxH2=2.5\r\n      let hFinal=graphWidth*h/w>maxH?maxH:graphWidth*h/w\r\n      let wFinal=graphWidth*h/w>maxH?maxH*w/h:graphWidth\r\n      \r\n      pdf.AddChart(\r\n        \"barNeeds\",\r\n        InToPt(paraLeft-.5),\r\n        InToPt(paraY),\r\n        InToPt(wFinal),\r\n        InToPt(hFinal)\r\n        //InToPt(graphWidth),\r\n        //InToPt(graphWidth*h/w)\r\n      );\r\n      // paraY = paraY + 5*lineHeight;\r\n      \r\n      paraY = paraY + 12* lineHeight;\r\n      paragraph = OUTPUTTEXT[lang].pgAppendixP2;\r\n      insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n      paraY = paraY + 1.5* lineHeight;\r\n     \r\n      h= document.getElementById(\"barShortfall\").clientHeight\r\n      w= document.getElementById(\"barShortfall\").clientWidth\r\n      hFinal=graphWidth*h/w>maxH?maxH:graphWidth*h/w\r\n      wFinal=graphWidth*h/w>maxH?maxH*w/h:graphWidth\r\n      pdf.AddChart(\r\n        \"barShortfall\",\r\n        InToPt(paraLeft-.5),\r\n        InToPt(paraY),\r\n        InToPt(wFinal),\r\n        InToPt(hFinal)\r\n      );\r\n      \r\n      h= document.getElementById(\"pieAssets\").clientHeight\r\n      w= document.getElementById(\"pieAssets\").clientWidth\r\n      hFinal=graphWidth*h/w>maxH2?maxH2:graphWidth*h/w\r\n      wFinal=graphWidth*h/w>maxH2?2*maxH2*w/h:graphWidth/2\r\n      \r\n      paraY = paraY + 13 * lineHeight;\r\n      paragraph = OUTPUTTEXT[lang].pgAppendixP3;\r\n      insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n      paraY = paraY + 1.5* lineHeight;\r\n      pdf.AddChart(\r\n        \"pieAssets\",\r\n        InToPt(paraLeft-1),\r\n        InToPt(paraY),\r\n        /* InToPt(wFinal),\r\n        InToPt(.8*hFinal) */\r\n        InToPt(graphWidth/2),\r\n        InToPt(graphWidth*h/w)\r\n      );\r\n     // paraY = paraY + 10 * lineHeight;\r\n     h= document.getElementById(\"pieLiabs\").clientHeight\r\n     w= document.getElementById(\"pieLiabs\").clientWidth\r\n     hFinal=graphWidth*h/w>maxH2?maxH2:graphWidth*h/w\r\n     wFinal=graphWidth*h/w>maxH2?2*maxH2*w/h:graphWidth/2\r\n      pdf.AddChart(\r\n        \"pieLiabs\",\r\n        InToPt(paraLeft+graphWidth/2-.5),\r\n        InToPt(paraY),\r\n        /* InToPt(wFinal),\r\n        InToPt(.8*hFinal) */\r\n        InToPt(graphWidth/2),\r\n        InToPt(graphWidth*h/w)\r\n      );\r\n\r\n      pdf.Footer(OUTPUTTEXT[lang].pgFooter);\r\n\r\n      const LE = props.LE; //- props.assetProjections[0].grid.dataProjection[1][0];\r\n      const lastRow=props.aggregateGrid.dataProjection[0].length\r\n      paragraph = OUTPUTTEXT[lang].pgAppendix + \": \" + OUTPUTTEXT[lang].pgAppendixT;\r\n    /* \r\n      insertGrid2(\r\n        pdf,\r\n        props.aggregateGrid,\r\n        LE,\r\n        paraLeft - 0.2,\r\n        1.65 * paraWidth,\r\n        lang,\r\n        true,\r\n        \"landscape\",\r\n        0,\r\n        GRID_AGGREGATE,\r\n        lastRow\r\n      ); */\r\n      insertGrid(\r\n        pdf,\r\n        props.aggregateGrid,\r\n        LE,\r\n        paraLeft - 0.2,\r\n        1.65 * paraWidth,\r\n        lang,\r\n        true,\r\n        \"landscape\",\r\n        0,\r\n        lastRow,        \r\n        GRID_AGGREGATE,\r\n        .65,\r\n        paragraph, \"\", \"\", \"\", OUTPUTTEXT[lang].pgFooter\r\n      )  \r\n\r\n      // if too long add another page\r\n      if (\r\n        lastRow > LINES_PER_PAGE_LANDSCAPE &&\r\n        lastRow < 2 * LINES_PER_PAGE_LANDSCAPE\r\n      )\r\n        insertGrid(\r\n          pdf,\r\n          props.aggregateGrid,\r\n          LE,\r\n          paraLeft - 0.2,\r\n          1.65 * paraWidth,\r\n          lang,\r\n          true,\r\n          \"landscape\",\r\n          LINES_PER_PAGE_LANDSCAPE,\r\n          lastRow,\r\n          GRID_AGGREGATE,.65,\r\n          paragraph, \"\", \"\", \"\", OUTPUTTEXT[lang].pgFooter\r\n          );\r\n      else if (lastRow > 2 * LINES_PER_PAGE_LANDSCAPE) {\r\n        insertGrid(\r\n          pdf,\r\n          props.aggregateGrid,\r\n          LE,\r\n          paraLeft - 0.2,\r\n          1.65 * paraWidth,\r\n          lang,\r\n          true,\r\n          \"landscape\",\r\n          LINES_PER_PAGE_LANDSCAPE,\r\n          lastRow,  \r\n          GRID_AGGREGATE,.65,\r\n          paragraph, \"\", \"\", \"\", OUTPUTTEXT[lang].pgFooter\r\n        );\r\n        insertGrid(\r\n          pdf,\r\n          props.aggregateGrid,\r\n          LE,\r\n          paraLeft - 0.2,\r\n          1.65 * paraWidth,\r\n          lang,\r\n          true,\r\n          \"landscape\",\r\n          2 * LINES_PER_PAGE_LANDSCAPE,\r\n          lastRow,  \r\n          GRID_AGGREGATE,.65,\r\n          paragraph, \"\", \"\", \"\", OUTPUTTEXT[lang].pgFooter\r\n        );\r\n      }\r\n\r\n      pdf.Footer(OUTPUTTEXT[lang].pgFooter);\r\n    \r\n          /*/*-Appendix\t\tgrids // Page 8*/\r\n    \r\n          // add a landscape page for aggregate grid\r\n    \r\n/*           const LE = props.LE; //- props.assetProjections[0].grid.dataProjection[1][0];\r\n          insertGrid2(\r\n            pdf,\r\n            props.aggregateGrid,\r\n            LE,\r\n            paraLeft - 0.2,\r\n            1.65 * paraWidth,\r\n            lang,\r\n            true,\r\n            \"landscape\",\r\n            0,\r\n            GRID_AGGREGATE\r\n          );\r\n          // if too long add another page\r\n          if (\r\n            LE + 3 > LINES_PER_PAGE_LANDSCAPE &&\r\n            LE + 3 < 2 * LINES_PER_PAGE_LANDSCAPE\r\n          )\r\n            insertGrid2(\r\n              pdf,\r\n              props.aggregateGrid,\r\n              LE,\r\n              paraLeft - 0.2,\r\n              1.65 * paraWidth,\r\n              lang,\r\n              true,\r\n              \"landscape\",\r\n              LINES_PER_PAGE_LANDSCAPE,\r\n              GRID_AGGREGATE\r\n            );\r\n          else if (LE + 3 > 2 * LINES_PER_PAGE_LANDSCAPE) {\r\n            insertGrid2(\r\n              pdf,\r\n              props.aggregateGrid,\r\n              LE,\r\n              paraLeft - 0.2,\r\n              1.65 * paraWidth,\r\n              lang,\r\n              true,\r\n              \"landscape\",\r\n              LINES_PER_PAGE_LANDSCAPE,\r\n              GRID_AGGREGATE\r\n            );\r\n            insertGrid2(\r\n              pdf,\r\n              props.aggregateGrid,\r\n              LE,\r\n              paraLeft - 0.2,\r\n              1.65 * paraWidth,\r\n              lang,\r\n              true,\r\n              \"landscape\",\r\n              2 * LINES_PER_PAGE_LANDSCAPE,\r\n              GRID_AGGREGATE\r\n            );\r\n          }\r\n          for (let j = 0; j < props.assetProjections.length; ++j)\r\n            insertGrid2(\r\n              pdf,\r\n              props.assetProjections[j].grid,\r\n              LE,\r\n              paraLeft,\r\n              paraWidth,\r\n              lang,\r\n              true,\r\n              \"portrait\",\r\n              0,\r\n              GRID_INDIVIDUAL\r\n            );\r\n    \r\n          //end ofPage 8\r\n          pdf.addFooterAndHeader(headerOffset, footerText, headerText);\r\n    \r\n          //-Using Life Insurance to Preserve Your Estate\t\t// Page 6\r\n          // logo if asked for\r\n          //    pdf.addCustomImage(\"EPOtherPagesLogo\", pg1TitleY, image);\r\n          result =\r\n            result &&\r\n            pdf.addCustomImage(IMAGE_LOGO_OTHERPAGES, pg1TitleY, image, false, top);\r\n    \r\n          paraY = 8 * lineHeight;\r\n          setFontForTitle(pdf, lang);\r\n          pdf.Text(OUTPUTTEXTEP[lang].pg9T, InToPt(paraLeft), InToPt(paraY));\r\n          setFontForParas(pdf);\r\n    \r\n          paraY = paraY + 2 * lineHeight;\r\n          insertPara(pdf, OUTPUTTEXTEP[lang].pg9P1, paraLeft, paraY, paraWidth);\r\n          paraY = paraY + (lang === \"fr\" ? 7 : 6) * lineHeight;\r\n          insertPara(pdf, OUTPUTTEXTEP[lang].pg9P2, paraLeft, paraY, paraWidth);\r\n    \r\n          //pdf.Footer(OUTPUTTEXTEP[lang].pgFooter);\r\n          // pdf.showOnPage();\r\n*/\r\n          var data = pdf.showOnPage();\r\n    \r\n//        // Done\r\n          pdf.Save(\"INA_Appendix_PDF.pdf\");\r\n          return data;\r\n        }\r\n    \r\n  \r\n}\r\n\r\n    function setFontForTitle(pdf, lang, size) {\r\n      pdf.SetFont(HELVETICA, NORMAL);\r\n      if (size === undefined) {\r\n        if (lang === \"en\") pdf.SetFontSize(PxToPt(25));\r\n        else pdf.SetFontSize(PxToPt(20));\r\n      } else {\r\n        pdf.SetFont(HELVETICA, BOLD);\r\n        if (lang === \"en\") pdf.SetFontSize(PxToPt(size));\r\n        else pdf.SetFontSize(PxToPt(size - 1));\r\n      }\r\n    \r\n      pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    }\r\n    \r\n    function addNote(pdf, para, left, paraY, paraWidth) {\r\n      setFontForParas(pdf);\r\n      pdf.SetTextColor(150, 150, 150);\r\n      pdf.SetFontSize(PxToPt(12));\r\n      insertPara(pdf, para, left, paraY, paraWidth);\r\n      setFontForParas(pdf);\r\n    }\r\n    \r\n    function setFontForParas(pdf) {\r\n      pdf.SetFont(TIMES, NORMAL);\r\n      pdf.SetFontSize(PxToPt(16));\r\n      pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    }\r\n    \r\n    function insertBullet(pdf, bullet, left, y, size) {\r\n      pdf.SetTextColor(115, 153, 198);\r\n      pdf.SetFontSize(PxToPt(size));\r\n      pdf.SetFont(TIMES, BOLD);\r\n      pdf.Text(\r\n        bullet,\r\n        InToPt(left + (size === BULLET_FONT_SIZE ? 0.02 : 0)),\r\n        InToPt(y - (size === BULLET_FONT_SIZE ? 0.03 : 0))\r\n      );\r\n      pdf.SetFont(TIMES, NORMAL);\r\n      pdf.SetFontSize(PxToPt(16));\r\n      pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    }\r\n    \r\n    function insertPara(pdf, para, left, paraY, paraWidth) {\r\n      pdf.MultilineText(para, InToPt(left), InToPt(paraY), InToPt(paraWidth));\r\n    }\r\n    \r\n    function insertTableTitle(\r\n      pdf,\r\n      paraLeft,\r\n      paraY,\r\n      values,\r\n      height,\r\n      paraWidths,\r\n      fillColor\r\n    ) {\r\n      pdf.SetFontSize(PxToPt(12));\r\n      const fill = fillColor === undefined ? [115, 153, 198] : fillColor;\r\n      const textColor = [255, 255, 255];\r\n      pdf.SetFont(TIMES, BOLD);\r\n      const h = pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        paraLeft,\r\n        paraY,\r\n        values,\r\n        height,\r\n        paraWidths,\r\n        false,\r\n        false,\r\n        true\r\n      );\r\n      return h;\r\n    }\r\n    \r\n    function insertTableRow(\r\n      pdf,\r\n      paraLeft,\r\n      paraY,\r\n      values,\r\n      height,\r\n      paraWidths,\r\n      bold,\r\n      fillColor,\r\n      align\r\n    ) {\r\n      pdf.SetTextColor(0x45, 0x55, 0x60);\r\n      const fill = fillColor === undefined ? [249, 249, 249] : fillColor;\r\n      const textColor = [0x45, 0x55, 0x60];\r\n      pdf.SetFont(TIMES, bold ? BOLD : NORMAL);\r\n      pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        paraLeft,\r\n        paraY,\r\n        values,\r\n        height,\r\n        paraWidths,\r\n        true,\r\n        align\r\n      );\r\n    }\r\n    /* function insertTableRowBold(pdf, paraLeft, paraY, values, height, paraWidths,align) {\r\n      pdf.SetTextColor(0x45, 0x55, 0x60);\r\n      const fill = [235, 235, 235];\r\n      const textColor = [0x45, 0x55, 0x60];\r\n      pdf.SetFont(TIMES, BOLD);\r\n      pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        paraLeft,\r\n        paraY,\r\n        values,\r\n        height,\r\n        paraWidths,\r\n        true,\r\n        align\r\n      );\r\n    }\r\n     */\r\n    \r\n    /* function pdf.addCustomImage( id,pg1TitleY,image,firstPage){\r\n     \r\n    pdf.AddImageFitWidthOnly(\r\n      id,\r\n      InToPt(pg1TitleY - 3 + image.left*HEADER_RECT_IN_W/100), //1.51),\r\n      InToPt(firstPage?1.06:.29),\r\n      InToPt(6.04*image.size/100),\r\n      InToPt(firstPage?2.76:.38) // max height\r\n    );\r\n    } */\r\n    \r\n    function insertGrid2(\r\n      pdf,\r\n      grid,\r\n      LE,\r\n      paraLeft,\r\n      paraWidth,\r\n      lang,\r\n      wrappedTitleBar,\r\n      orientation,\r\n      startYr,\r\n      mode,\r\n      lastRow\r\n    ) {\r\n      let i;\r\n      let j;\r\n      let cols = grid.dataColTitles.length;\r\n      const height = 0.2;\r\n      let paraY = 2.2 * height;\r\n      let max =\r\n        orientation === \"landscape\"\r\n          ? startYr === 0\r\n            ? LINES_PER_PAGE_LANDSCAPE\r\n            : 2 * LINES_PER_PAGE_LANDSCAPE\r\n          : LINES_PER_PAGE_PORTRAIT;\r\n      const decimalChar = lang === \"en\" ? \".\" : \",\";\r\n      const thousands = lang === \"en\" ? \",\" : \" \";\r\n      //const formatFr = lang === \"fr\" ? true : false;\r\n      let Widths = [];\r\n    \r\n      pdf.AddPage(orientation);\r\n    \r\n      // Appendix title\r\n      setFontForTitle(pdf, lang, 16);\r\n      let paragraph = OUTPUTTEXT[lang].pgAppendix + \": \" + OUTPUTTEXT[lang].pgAppendixT;\r\n      insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n    \r\n      // Appendix para\r\n      setFontForParas(pdf);\r\n      paraY = paraY + 1.6 * height;\r\n      paragraph =\r\n        (mode === GRID_AGGREGATE\r\n          ? OUTPUTTEXT[lang].pgAppendix\r\n          : OUTPUTTEXT[lang].pgAppendixT) +\r\n        (mode === GRID_AGGREGATE ? (startYr === 0 ? \"\" : \"\") : \"\");\r\n      insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n    \r\n      paraY = paraY + 0.5 * height;\r\n    \r\n      // grid name and title\r\n      // grid col widths\r\n      Widths.push(paraWidth / (cols + 5)); // year\r\n      Widths.push(paraWidth / (cols + 5)); // age\r\n      for (i = 2; i < cols; ++i) {\r\n        Widths.push((paraWidth - (2 * paraWidth) / (cols + 4)) / (cols - 2));\r\n      }\r\n    \r\n      // max of 8 columns in portrait\r\n      let totalGridWidth = paraWidth;\r\n      if (mode === GRID_INDIVIDUAL) totalGridWidth = (cols * paraWidth) / 8;\r\n    \r\n      let values = grid.dataColTitles;\r\n      let goodWidth = [];\r\n      let totalGoodWidth = 0;\r\n      for (i = 0; i < cols; ++i) {\r\n        goodWidth.push(pdf.textWidth(values[i]));\r\n        totalGoodWidth += goodWidth[i];\r\n      }\r\n      // aportion grid title\r\n      for (i = 0; i < cols; ++i) {\r\n        Widths[i] = goodWidth[i] + 0.15;\r\n      }\r\n      let widthTotal = 0;\r\n      for (i = 2; i < cols; ++i) widthTotal += Widths[i];\r\n    \r\n      // now check multilines\r\n      let goodWidthMultiLine = [];\r\n      let totalGoodWidthMultiLine = 0;\r\n    \r\n      let addMore =\r\n        (totalGridWidth - widthTotal - Widths[0] - Widths[1]) / (cols - 2);\r\n      if (mode === GRID_INDIVIDUAL) {\r\n        for (i = 2; i < cols; ++i) Widths[i] += addMore;\r\n      } else if (mode === GRID_AGGREGATE) {\r\n        addMore =\r\n          (totalGridWidth - widthTotal - Widths[0] - Widths[1]) / (cols - 3);\r\n        for (i = 2; i < cols; ++i) if (i !== 4) Widths[i] += addMore;\r\n      }\r\n    \r\n      for (i = 0; i < cols; ++i) {\r\n        goodWidthMultiLine.push(pdf.textWidthMultiLine(values[i], Widths[i]));\r\n        totalGoodWidthMultiLine += goodWidthMultiLine[i];\r\n      }\r\n      \r\n      {\r\n        paraY = paraY + 0.8 * height;\r\n        paragraph = grid.gridTitle;\r\n        pdf.SetFontSize(PxToPt(12));\r\n        pdf.SetTextColor(0x45, 0x55, 0x60);\r\n        insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n        paraY = paraY + 0.4 * height;\r\n      }\r\n    \r\n      // headers\r\n       const height2 = insertTableTitle(\r\n        pdf,\r\n        paraLeft,\r\n        paraY,\r\n        values,\r\n        height,\r\n        Widths,\r\n        [51, 77, 124]\r\n      );\r\n      // grid rows\r\n      let rows = startYr;\r\n      let fillColor;\r\n      if (wrappedTitleBar) paraY = paraY + height2;\r\n      // 40 rows per page\r\n      while (rows < LE + 3 && rows<lastRow) {\r\n        //grid.dataProjection[0].length) {\r\n    \r\n        if (\r\n          rows === max &&\r\n          ((startYr === 0 && LE + 3 - rows > 6) ||\r\n            (startYr === LINES_PER_PAGE_LANDSCAPE &&\r\n              LE + LINES_PER_PAGE_LANDSCAPE + 3 - rows > 6))\r\n        ) {\r\n          if (mode === GRID_AGGREGATE) {\r\n            insertPara(\r\n              pdf,\r\n              OUTPUTTEXTEP[lang].pg4P1,\r\n              paraLeft,\r\n              paraY + (3 * height) / 2 + 0.1,\r\n              paraWidth\r\n            );\r\n            pdf.FooterLandscape(OUTPUTTEXT[lang].pgFooter);\r\n            return rows;\r\n          }\r\n    \r\n          rows = LE + 3 - 6;\r\n          paraY = paraY + height;\r\n          pdf.SetFont(TIMES, BOLD);\r\n          insertPara(pdf, \"......\", paraLeft, paraY + height / 2, paraWidth);\r\n          pdf.SetFont(TIMES, NORMAL);\r\n        }\r\n        values = [];\r\n    \r\n        let align = [];\r\n        for (i = 0; i < cols; ++i) {\r\n          //if(i===0) console.log(grid.dataProjection[i][rows])\r\n          values.push(\r\n            (i === 0 && rows === 0) || i === 1\r\n              ? String(grid.dataProjection[i][rows])\r\n              : formatMoney(\r\n                  parseFloat(cleanFormat(grid.dataProjection[i][rows], lang)),\r\n                  0,\r\n                  decimalChar,\r\n                  thousands\r\n                ).toString()\r\n          );\r\n          align.push(2);\r\n        }\r\n        paraY = paraY + height;\r\n        fillColor = rows % 2 ? [249, 249, 249] : [228, 229, 230];\r\n        if (rows == LE) {\r\n          fillColor = [208, 215, 230];\r\n          insertPara(\r\n            pdf,\r\n            lang === \"en\" ? \"LE\" : \"EV\",\r\n            paraLeft + totalGridWidth + 0.15,\r\n            paraY + height / 2 + 0.01,\r\n            paraWidth\r\n          );\r\n        }\r\n        //console.log(values)\r\n        insertTableRow(\r\n          pdf,\r\n          paraLeft,\r\n          paraY,\r\n          values,\r\n          height,\r\n          Widths,\r\n          false,\r\n          fillColor,\r\n          align\r\n        );\r\n    \r\n        rows++;\r\n      }\r\n    \r\n      if (orientation === \"landscape\")\r\n        pdf.FooterLandscape(OUTPUTTEXT[lang].pgFooter);\r\n      else pdf.Footer(OUTPUTTEXT[lang].pgFooter);\r\n    }\r\n    ","import React, { Component } from \"react\";\r\nimport { Pie, Bar, Line } from \"react-chartjs-2\";\r\n//import \"./Output.css\";\r\nimport \"./Output.css\";\r\nimport {\r\n  getAssetsCategoryTotal,\r\n  getLiabsCategoryTotal,\r\n  cleanFormat, formatMoney,\r\n  familyProjectionYears,\r\n  getInsNeedLine,\r\n  isSingleFamily,\r\n} from \"../utils/helper\";\r\nimport {\r\n  ASSETS,\r\n  LIABILITIES,\r\n  CONTROLTITLE,\r\n  DISPLAY_RETIREMENT,\r\nDISPLAY_LIFEEXP,\r\nDISPLAY_ENDAGE,\r\nDISPLAY_LIFEEXP_PLUS_3\r\n} from \"../definitions/generalDefinitions\";\r\nimport {GRAPHS_LABLES \r\n} from \"../definitions/outputDefinitions\";\r\nimport {\r\n  getInfoINA,\r\n} from \"../definitions/infoIconsDefinitions\";\r\nimport { Info } from \"./Info\";\r\nimport { doSavePdfINAAppendixAction } from \"./OutputPDFINAAppendix\";\r\n\r\n\r\nexport class OutputGraphs extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n\r\n\r\n  doPDF = () => {\r\n    doSavePdfINAAppendixAction(this.props);\r\n  };\r\n  \r\n\r\n  render() {\r\n    //if (this.props.dataCashFlowGov !== undefined)\r\n    const lang=this.props.dataInput.Presentations[0].language\r\n    const negNeed = this.props.dataCashFlowNeeds.map(x => -x);\r\n\r\n  const mobile=  ( window.innerWidth <= 840 ) && ( window.innerHeight <= 840 );\r\n // console.log(window.innerWidth, window.innerHeight)\r\n    const maxYScale =\r\n      10000 *\r\n      Math.ceil(\r\n        1 +\r\n          Math.max(\r\n            Math.max(...this.props.dataCashFlowGov),\r\n            Math.max(...this.props.dataCashFlowNeeds),\r\n            Math.max(...this.props.dataShortfall),\r\n            Math.max(...this.props.dataCashFlowPersonal)\r\n          ) /\r\n            10000\r\n      );\r\n    //\tconst negNeedMax = negNeed.map(x => -maxYScale*1.05);\r\n    //\tnegNeedMax.push(- maxYScale * 1.05);\r\n    //\tnegNeedMax.push(- maxYScale * 1.05)\r\n \r\n    const options = {\r\n      responsive: true,\r\n      maintainAspectRatio: false,\r\n      legend: {\r\n        display: true,\r\n        labels: {\r\n          fontColor: \"#333\",\r\n          fontSize: mobile?10:14//16\r\n        }\r\n      },\r\n      scales: {\r\n        xAxes: [\r\n          {\r\n            stacked: true,\r\n            ticks: {\r\n              fontSize:  mobile?10:14,\r\n              beginAtZero: true\r\n            }\r\n          }\r\n        ],\r\n        yAxes: [\r\n          {\r\n            stacked: true,\r\n            ticks: {\r\n              fontSize:  mobile?10:14,\r\n              beginAtZero: true,\r\n                beginAtZero: true,\r\n                steps: 10,\r\n                stepValue: 5,\r\n                max: maxYScale,\r\n    callback: function (value, index, values) {\r\n                  let result =\r\n                    value < 1000 && value > -1000\r\n                      ? value\r\n                      : lang === \"en\"\r\n                      ? Intl.NumberFormat().format(value / 1000) + \"K\"\r\n                      : (Intl.NumberFormat().format(value / 1000) + \"K\").replace(\r\n                          \",\",\r\n                          \" \"\r\n                        );\r\n                  return result;\r\n                },\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    };\r\n    const labelsBilingual=GRAPHS_LABLES[lang]\r\n    const decimalChar = lang === \"en\" ? \".\" : \",\"\r\n    const thousands = lang === \"en\" ? \",\" : \" \"\r\n    const formatFr=lang===\"fr\"? true:false\r\n    \r\n    const clients=this.props.dataInput.Clients\r\n    const singleFamily = isSingleFamily(clients);\r\n    const PDFTopMargin=singleFamily?0:-37  \r\n\r\n    const data = {\r\n      labels: this.props.dataNAAges,\r\n      datasets: [\r\n        {\r\n          label: labelsBilingual.persCF,\r\n          data: this.props.dataCashFlowPersonal,\r\n          fill: false,\r\n          borderColor: \"LightSteelBlue\", // Line color\r\n          backgroundColor: \"LightSteelBlue\"\r\n        },\r\n        {\r\n          label:\r\n          labelsBilingual.govCF,\r\n          data: this.props.dataCashFlowGov,\r\n          fill: false, // Don't fill area under the line\r\n          borderColor: \"#FAD7A0\", // Line color\r\n          backgroundColor: \"#FAD7A0\"\r\n        },\r\n        {\r\n          label:\r\n          labelsBilingual.incomeNeeds,\r\n          data: negNeed,\r\n          fill: false, // Don't fill area under the line\r\n          borderColor: \"#2B3856\", // Line color\r\n          backgroundColor: \"#2B3856\"\r\n        }\r\n        \r\n      ]\r\n    };\r\n\r\n    var dataFutureINA = [];\r\n    let i;\r\n    let j;\r\n    var pv;\r\n    var totalLiab = 0;\r\n    for (i = 0; i < this.props.dataInput.Liabilitys.length; i++) {\r\n      totalLiab += this.props.dataInput.Liabilitys[i].currValue;\r\n    }\r\n\r\n    let shortfallNeg=[]\r\n     \r\n    for (i = 0; i < this.props.dataShortfall.length; ++i) {\r\n      shortfallNeg.push(-this.props.dataShortfall[i])\r\n      pv = 0;\r\n      for (j = i; j < this.props.dataShortfall.length; ++j)\r\n        pv += this.props.dataShortfall[j] / Math.pow(1.03, j - i);\r\n\r\n      if (i > 0 && i < 20) pv += totalLiab * Math.pow(1.02, i);\r\n      dataFutureINA.push(pv);\r\n    }\r\n    // console.log(totalLiab, dataFutureINA);\r\n\r\n/*     let dataPositiveShortfall = [];\r\n    for (j = 0; j < this.props.dataShortfall.length; ++j)\r\n        dataPositiveShortfall[j]= this.props.dataShortfall[j]>0?this.props.dataShortfall[j]:0;\r\n     \r\n\r\n\r\n\r\n */   \r\n      \r\n      const dataShortfall = {\r\n      labels: this.props.dataNAAges, // [39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84],\r\n      datasets: [\r\n        {\r\n          label: labelsBilingual.shortfall,\r\n          data: shortfallNeg,//this.props.dataShortfall,\r\n          //[10964, 13734, 14008, 14288, 14574, 14866, 15163, 15466, 15776, 16091, 16413, 16741, 17076, 17417, 17766, 18121, 18484, 18853, 19230, 19615, 20007, 20407, 20815, 21232, 21656, 22090, 27632, 28184, 28748, 29323, 29910, 30508, 31118, 31740, 32375, 33023, 33683, 34357, 35044, 35745, 36460, 37189, 37933, 38691, 39465, 40254],\r\n          fill: false, // Don't fill area under the line\r\n          borderColor: \"darkred\", // Line color\r\n          backgroundColor: \"darkred\"\r\n        }\r\n      ]\r\n    };\r\n\r\n    var optionsPie = {\r\n      responsive: true,\r\n      title: {\r\n        display: true,\r\n        position: \"top\",\r\n        text: labelsBilingual.assetsBrk,//\"Assets Breakdown Today\",\r\n        fontSize:  mobile?10:14,//8,\r\n        fontColor: \"#111\"\r\n      },\r\n      legend: {\r\n        display: true,\r\n        position: \"right\",\r\n        labels: {\r\n          fontColor: \"#333\",\r\n          fontSize: mobile?10:12//16\r\n        }\r\n      }\r\n    };\r\n     \r\n    let optionsPieLiabs = JSON.parse(JSON.stringify(optionsPie));\r\n\r\n    \r\n    optionsPieLiabs.title.text= labelsBilingual.liabsBrk//\"Liabilities Breakdown\" \r\n     \r\n    const dataPieAssets = {\r\n      labels: [\r\n        labelsBilingual.cashLike,labelsBilingual.RRSP,labelsBilingual.shares,labelsBilingual.realEstate,labelsBilingual.otherAssets\r\n      ],\r\n      datasets: [\r\n        {\r\n             data: [\r\n            getAssetsCategoryTotal(this.props.dataInput,ASSETS.CASH.Key)+\r\n            getAssetsCategoryTotal(this.props.dataInput,ASSETS.LIFE_INSURANCE.Key)+\r\n            getAssetsCategoryTotal(this.props.dataInput,ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.Key)\r\n            +getAssetsCategoryTotal(this.props.dataInput,ASSETS.TFSA.Key)\r\n            , \r\n            getAssetsCategoryTotal(this.props.dataInput,ASSETS.RRSP_RRIF.Key), \r\n            getAssetsCategoryTotal(this.props.dataInput,ASSETS.SMALL_BUSINESS_SHARES.Key)+\r\n            getAssetsCategoryTotal(this.props.dataInput,ASSETS.STOCKS_BONDS.Key),\r\n            getAssetsCategoryTotal(this.props.dataInput,ASSETS.REAL_ESTATE.Key)+\r\n            getAssetsCategoryTotal(this.props.dataInput,ASSETS.PERSONAL_RESIDENCE.Key),\r\n            getAssetsCategoryTotal(this.props.dataInput,ASSETS.OTHER_ASSETS.Key)\r\n          ],\r\n          backgroundColor: [\"#F7464A\", \"#46BFBD\", \"#FDB45C\", \"#949FB1\", \"#4D5360\"]\r\n        }\r\n      ]\r\n    }\r\n\r\n    const dataPieLiabs = {\r\n      labels: [\r\n        labelsBilingual.loans, labelsBilingual.taxes, labelsBilingual.emergency, labelsBilingual.otherLiabs,labelsBilingual.atDeath\r\n        \r\n      ],\r\n      datasets: [\r\n        {\r\n             data: [\r\n            getLiabsCategoryTotal(this.props.dataInput,LIABILITIES.OUTSTANDING_LOANS.Key)+\r\n            getLiabsCategoryTotal(this.props.dataInput,LIABILITIES.MORTGAGE_REDEMPTION.Key)+\r\n            getLiabsCategoryTotal(this.props.dataInput,LIABILITIES.CREDIT_CARDS.Key)+\r\n            getLiabsCategoryTotal(this.props.dataInput,LIABILITIES.CLIENT_TAX_LIABILITY.Key)\r\n            , \r\n            getLiabsCategoryTotal(this.props.dataInput,LIABILITIES.INCOME_TAXES.Key), \r\n            getLiabsCategoryTotal(this.props.dataInput,LIABILITIES.EMERGENCY_FUND.Key),\r\n            getLiabsCategoryTotal(this.props.dataInput,LIABILITIES.OTHER.Key)+\r\n            getLiabsCategoryTotal(this.props.dataInput,LIABILITIES.CHILD_HOME_CARE.Key),\r\n            getLiabsCategoryTotal(this.props.dataInput,LIABILITIES.LAST_EXPENSES.Key)+\r\n        getLiabsCategoryTotal(this.props.dataInput,LIABILITIES.LEGAL_AND_EXECUTOR_FEES.Key)+\r\n        getLiabsCategoryTotal(this.props.dataInput,LIABILITIES.LEGACY_FOR_CHILDREN.Key)+\r\n        getLiabsCategoryTotal(this.props.dataInput,LIABILITIES.CHARITABLE_GIFTS.Key)+\r\n        getLiabsCategoryTotal(this.props.dataInput,LIABILITIES.PROBATE.Key)\r\n          ],\r\n          backgroundColor: [\"#F7464A\", \"#46BFBD\", \"#FDB45C\", \"#949FB1\", \"#4D5360\"]\r\n        }\r\n      ]\r\n    }\r\n/* \r\n    let needToE =\r\n      this.props.periodOption === 0 ? labels.insNeedsRet: labels.insNeedsRetLE\r\n      /*   ? \"Insurance Needs to retirement (age \"\r\n        : \"Insurance Needs to life expectancy (age \";\r\n    let needToF =\r\n      this.props.periodOption === 0\r\n        ? \"Besoins en assurance jusqu'à la retraite(âge \"\r\n        : \"Besoins en assurance jusqu'à l'espérance de vie (âge \"; \r\n    let needTo = lang === \"en\" ? needToE : needToF;\r\n */\r\n    /* let needTo =\r\n      this.props.periodOption ===DISPLAY_RETIREMENT ? labelsBilingual.insNeedsRet: (this.props.periodOption === DISPLAY_ENDAGE?labelsBilingual.insNeeds100:labelsBilingual.insNeedsRetLE)\r\n    if(this.props.periodOption !== DISPLAY_ENDAGE)\r\n      needTo += +this.props.projectEnd + \")\";\r\n */\r\n/* \r\n      const clients=this.props.dataInput.Clients\r\n      const projYears = familyProjectionYears(\r\n        clients,\r\n        this.props.dataInput.Presentations[0].periodOption,\r\n        this.props.LE,\r\n        this.props.LE\r\n      );\r\n      //const projectEnd = projYears.projectionEnd;\r\n      const protectionPeriod = projYears.noProjectionYrs;\r\n     // const minAge = projYears.survivorAge;\r\n      const singleFamily = isSingleFamily(clients);\r\n      const noSurvivor = clients.length===1;  \r\n      const insNeedLine= getInsNeedLine(this.props.dataInput.Presentations[0], this.props.projectEnd, lang,noSurvivor,singleFamily,protectionPeriod)\r\n     */const needTo=this.props.insNeedLine\r\n\r\n    \r\n/*     const assetsPie= this.props.dataInput.Assets.length>0 &&\r\n    <article className=\"canvas-container\" style={{height: \"450px\" }}>\r\n     <div style={{overflow:'hidden', float: 'left', width: '50%',height: \"400px\" }}><Pie data={dataPieAssets} options={optionsPie} /></div>\r\n    </article>\r\n */\r\n\r\nconst assetsPie= this.props.dataInput.Assets.length>0 &&\r\n    <article id=\"pieAssets\" \r\n\r\n/* style={{ position: \"relative\", left: \"20px\", height: \"400px\"}} */\r\n>\r\n\r\n<div className=\"INAPie\">\r\n<Pie  data={dataPieAssets} options={optionsPie}  />\r\n</div>\r\n</article>\r\n\r\n\r\n/* \r\nconst liabsPie= this.props.dataInput.Liabilitys.length>0 &&\r\n   <article className=\"canvas-container\" style={{height: \"450px\" }}>\r\n   <div style={{overflow:'hidden', float: 'left', width: '50%',height: \"400px\" }}><Pie data={dataPieLiabs} options={optionsPieLiabs} /></div>\r\n </article>\r\n */\r\nconst liabsPie= this.props.dataInput.Liabilitys.length>0 &&\r\n    <article   id=\"pieLiabs\" \r\n/* style={{ position: \"relative\", height: \"400px\"}} */\r\n>\r\n\r\n<div className=\"INAPie\">\r\n<Pie data={dataPieLiabs} options={optionsPieLiabs} />\r\n</div>\r\n</article>\r\n\r\n\r\n\r\n\r\n    return (\r\n      <div>\r\n        \r\n        <div style={{ width: \"100%\", float: \"left\", clear: \"left\" }}>\r\n            \r\n            <input\r\n              className=\"roundedCornerCmd\"\r\n              style={{\r\n             //   width: \"80px\",\r\n                marginTop: PDFTopMargin +\"px\",\r\n                marginRight: \"0px\",\r\n                paddingRight: \"8px\",\r\n                float: \"right\",\r\n              }}\r\n              onClick={this.doPDF}\r\n              type=\"button\"\r\n              value={CONTROLTITLE[lang].pdfINAAppendix}\r\n            />\r\n          </div>\r\n        <h3 className=\"ppi1\">\r\n          {needTo}{/* : ${formatMoney(cleanFormat(this.props.insuranceNeed,formatFr), 0, decimalChar, thousands)} */} \r\n          <Info\r\n              infoIcon={getInfoINA(lang)}\r\n          />\r\n        </h3>\r\n\r\n        <br />\r\n        <div style={{ width: \"90%\" }}>\r\n          <div style={{ width: \"100%\" }}>\r\n          <article  id=\"barNeeds\" className=\"canvas-containerINAGraphs\">\r\n              <Bar data={data} options={options} />\r\n            </article>\r\n            <article  id=\"barShortfall\" className=\"canvas-containerINAGraphs\">\r\n              <Bar  data={dataShortfall} options={options} />\r\n            </article>\r\n            <br />\r\n            <h3 className=\"ppi1\">\r\n                {labelsBilingual.currFins}\r\n                \r\n            </h3>\r\n            {\r\n               <div>\r\n                 {assetsPie}<br/><br/>{liabsPie}\r\n              </div> \r\n            }\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport { Chart, Bar, Pie } from \"react-chartjs-2\";\r\n//import ChartDataLabels from 'chartjs-plugin-datalabels';\r\n//import \"./Output.css\";\r\nimport \"./Output.css\";\r\nimport { setUIDataToAPI } from \"../data/dataExchange\";\r\nimport { getAssetLiabProjections } from \"../data/aggregateGridProjections\";\r\nimport {\r\n  getProjectedLiabilities,\r\n  getTaxLiabCategoryTotal,\r\n  getLeakageGraphs,\r\n  getAgesEP\r\n} from \"../utils/helper\";\r\nimport {\r\n  QUOTE_CLIENT,\r\n  QUOTE_SPOUSE,\r\n  ASSET_TAX,\r\n  ASSETS,\r\n  LIABILITIES,\r\n} from \"../definitions/generalDefinitions\";\r\nimport { OUTPUTTEXTEP } from \"../definitions/outputDefinitionsEP\";\r\nimport {\r\n  ASSET_TAX_TYPE_PRINCIPAL_RES,\r\n  ASSET_TAX_TYPE_REAL_ESTATE,\r\n  ASSET_TAX_TYPE_STOCKS,\r\n  ASSET_TAX_TYPE_SMALL_BUS,\r\n  ASSET_TAX_TYPE_RRSP,\r\n  ASSET_TAX_TYPE_INTEREST,\r\n  ASSET_TAX_TYPE_OTHER,\r\n  ASSET_TAX_TYPE_COUNT,\r\n} from \"../definitions/outputDefinitionsEP\";\r\n\r\n// props option\r\nconst DISPLAY_INCOME = 1;\r\n\r\n// for Estate\r\nconst DISPLAY_TAXLIAB_CLIENT = 1;\r\nconst DISPLAY_TAXLIAB_JLTD = 2;\r\n\r\nexport class OutputGraphsEP extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      loadingMCC: true,\r\n      estateLiab: [],\r\n      estateLiabLE: [],\r\n      taxL: 0,\r\n    };\r\n    this.dataAges = [];\r\n    this.dataPremiums = [];\r\n    this.dataDB = [];\r\n    this.dataSVEquiBuild = [];\r\n    this.dataSVManulife = [];\r\n    this.Prem = 0;\r\n    this.bestPremiumDur = 100;\r\n    this.bestMinMultiple = 0;\r\n    this.premiumDur = 10;\r\n    this.lifeExp = 0;\r\n    this.minMultiple = 0;\r\n    this.insMultiple = 0;\r\n    this.bestFitEquiBuild = false;\r\n    this.INAEstateOption = DISPLAY_TAXLIAB_CLIENT;\r\n\r\n    this.chartRef = React.createRef();\r\n    this.taxLiabChartRef = React.createRef();\r\n    //   Chart.plugins.unregister(ChartDataLabels)\r\n\r\n  }\r\n\r\n\r\n  render() {\r\n    // get data similar to presentation\r\n    const AssetLiabProjs = getAssetLiabProjections(this.props);\r\n    const lang = this.props.dataInput.Presentations[0].language;\r\n    const totalLiabProjections = getProjectedLiabilities(\r\n      this.props.dataInput,\r\n      this.props.projectEnd,\r\n      this.props.probate\r\n    );\r\n\r\n//console.log(this.props,totalLiabProjections)\r\n\r\n    let dtaAgesAll = [];\r\n    let k;\r\n    let lifeExp = this.props.lifeExp;\r\n    const clients = this.props.dataInput.Clients;\r\n    let age =\r\n      clients.length > 1\r\n        ? Math.min(clients[QUOTE_SPOUSE].Age, clients[QUOTE_CLIENT].Age)\r\n        : clients[QUOTE_CLIENT].Age;\r\n\r\n    //let age = this.props.dataInput.Clients[1].Age;\r\n\r\n    if (this.INAEstateOption === DISPLAY_TAXLIAB_CLIENT) {\r\n      lifeExp = this.props.lifeExp;//Client;\r\n      age = this.props.dataInput.Clients[QUOTE_CLIENT].Age;\r\n    } else if (this.INAEstateOption === DISPLAY_TAXLIAB_JLTD) {\r\n      lifeExp = this.props.lifeExp;//JLTD;\r\n      age =\r\n        clients.length > 1\r\n          ? Math.min(clients[QUOTE_SPOUSE].Age, clients[QUOTE_CLIENT].Age)\r\n          : clients[QUOTE_CLIENT].Age;\r\n    }\r\n\r\n    /* for (k = 0; k <= lifeExp + 3; ++k) {\r\n      dtaAgesAll.push(age + k);\r\n    } */\r\n\r\n    dtaAgesAll=getAgesEP(clients, lifeExp)\r\n\r\n    \r\n\r\n    //options\r\n\r\n    const leakageGraps = getLeakageGraphs(\r\n      this.props.dataInput.Assets,\r\n      this.props.assetProjections,\r\n      AssetLiabProjs,\r\n      totalLiabProjections,\r\n      lang,\r\n      lifeExp\r\n    );\r\n\r\n    const optionsPie = {\r\n      responsive: true,\r\n      maintainAspectRatio: false,\r\n      title: {\r\n        display: true,\r\n        position: \"top\",\r\n        text: \"\",\r\n        fontSize: 14, //8,\r\n        fontColor: \"#111\",\r\n      },\r\n      legend: {\r\n        display: true,\r\n        position: \"right\",\r\n        labels: {\r\n          fontColor: \"#333\",\r\n          fontSize: 12, //16\r\n        },\r\n      },\r\n      /*   plugins: {\r\n    // Change options for ALL labels of THIS CHART\r\n    display: false,\r\n    datalabels: {\r\n        color: 'white'\r\n    }\r\n} */\r\n    };\r\n\r\n    let optionsPieEstateLiab = JSON.parse(JSON.stringify(optionsPie));\r\n    optionsPieEstateLiab.title.text = OUTPUTTEXTEP[lang].graphsT2;\r\n\r\n    let optionsPieEstateLiabLE = JSON.parse(JSON.stringify(optionsPie));\r\n    optionsPieEstateLiabLE.title.text =\r\n      OUTPUTTEXTEP[\r\n        lang\r\n      ].graphsT3; \r\n    const taxLiabTotal_Index =\r\n      AssetLiabProjs.AssetnEstateLiabs.length - 1; //last row\r\n    let dataTaxLiabLifeExp = [];\r\n    let dataTaxLiab = [];\r\n    let dataLiabAtDeath=[];\r\n    let taxLiabs = AssetLiabProjs.AssetnEstateLiabs[taxLiabTotal_Index].values;\r\n    for (k = 0; k <= lifeExp + 3; ++k) {\r\n      dataTaxLiabLifeExp.push(0);\r\n      dataTaxLiab.push(taxLiabs[k]);\r\n      dataLiabAtDeath.push(totalLiabProjections[k]);\r\n    }\r\n    dataTaxLiabLifeExp[lifeExp] = taxLiabs[lifeExp];\r\n    dataTaxLiab[lifeExp]=0;\r\n    // bar chart\r\n    const dataTaxLiability = {\r\n      labels: dtaAgesAll,\r\n      datasets: [\r\n        {\r\n          label: OUTPUTTEXTEP[lang].graphs2L2,\r\n          //type: \"line\",\r\n          data: dataTaxLiabLifeExp,\r\n          fill: true, // Don't fill area under the line\r\n          borderColor: \"#6AAd8b\",\r\n          backgroundColor: \"rgb(106,173,139,.5)\", // \"rgba(96, 125, 139, .7)\"\r\n        },\r\n        {\r\n          label: OUTPUTTEXTEP[lang].graphsLeakage2,\r\n          //type: \"line\",\r\n          data: dataTaxLiab,\r\n\r\n          fill: true, // Don't fill area under the line\r\n          borderColor: \"darkGrey\", // Line color\r\n          backgroundColor: \"#607d8b\",\r\n        },\r\n        {\r\n          label:  OUTPUTTEXTEP[lang].graphsLeakage3,\r\n          //type: \"line\",\r\n          data: dataLiabAtDeath,\r\n\r\n          fill: true, // Don't fill area under the line\r\n          borderColor: \"white\", // Line color\r\n          backgroundColor: \"#910d48\",\r\n        },\r\n      ],\r\n    };\r\n    // bar chart\r\n    const optionsTaxLiab = {\r\n      responsive: true,\r\n      maintainAspectRatio: false,\r\n      scales: {\r\n        xAxes: [\r\n          {\r\n            stacked: true,\r\n            ticks: {\r\n              beginAtZero: true,\r\n            },\r\n          },\r\n        ],\r\n        yAxes: [\r\n          {\r\n            stacked: true,\r\n            ticks: {\r\n              beginAtZero: true,\r\n              callback: function (value, index, values) {\r\n                let result =\r\n                  value < 1000\r\n                    ? value\r\n                    : lang === \"en\"\r\n                    ? Intl.NumberFormat().format(value / 1000) + \"K\"\r\n                    : (Intl.NumberFormat().format(value / 1000) + \"K\").replace(\r\n                        \",\",\r\n                        \" \"\r\n                      );\r\n                return result;\r\n              },\r\n\r\n              steps: 10,\r\n              stepValue: 5,\r\n            },\r\n          },\r\n        ],\r\n      },\r\n    };\r\n\r\n    /*   let optionsPieTax = JSON.parse(JSON.stringify(optionsPie));\r\n    optionsPieTax.title.text = \"Tax Treatment of Assets\";\r\n\r\n    let optionsPieLiabsAtDeath = JSON.parse(JSON.stringify(optionsPie));\r\n    optionsPieLiabsAtDeath.title.text = \"Liabilities At Death\";\r\n\r\n    let optionsPieLiabs = JSON.parse(JSON.stringify(optionsPie));\r\n    optionsPieLiabs.title.text = \"Liabilities Breakdown\";\r\n */\r\n    let estateLiab = [];\r\n    const totalLiabProjectionsNow = parseInt(totalLiabProjections[0]);\r\n    const totalLiabProjectionsLE3 = parseInt(totalLiabProjections[lifeExp + 3]);\r\n    estateLiab.push(totalLiabProjectionsNow);\r\n    estateLiab.push(\r\n      AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_REAL_ESTATE]\r\n    );\r\n    estateLiab.push(AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_STOCKS]);\r\n    estateLiab.push(AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_SMALL_BUS]);\r\n    estateLiab.push(AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_RRSP]);\r\n    estateLiab.push(AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_INTEREST]);\r\n    estateLiab.push(AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_OTHER]);\r\n\r\n    const dataPieEstateLiabNow = {\r\n      labels: [\r\n        //OUTPUTTEXTEP[lang].graphsL1,OUTPUTTEXTEP[lang].graphsL2,OUTPUTTEXTEP[lang].graphsL3,OUTPUTTEXTEP[lang].graphsL4,OUTPUTTEXTEP[lang].graphsL5,\r\n        OUTPUTTEXTEP[lang].graphsL1,\r\n        OUTPUTTEXTEP[lang].graphsTaxes + OUTPUTTEXTEP[lang].pg3Tab3R2C1,\r\n        OUTPUTTEXTEP[lang].graphsTaxes + OUTPUTTEXTEP[lang].pg3Tab3R3C1,\r\n        OUTPUTTEXTEP[lang].graphsTaxes + OUTPUTTEXTEP[lang].pg3Tab3R4C1,\r\n        OUTPUTTEXTEP[lang].graphsTaxes + OUTPUTTEXTEP[lang].pg3Tab3R5C1,\r\n        OUTPUTTEXTEP[lang].graphsTaxes + OUTPUTTEXTEP[lang].pg3Tab3R6C1,\r\n        OUTPUTTEXTEP[lang].graphsTaxes + OUTPUTTEXTEP[lang].pg3Tab3R7C1,\r\n      ],\r\n      datasets: [\r\n        {\r\n          //data: this.state.estateLiab,\r\n          data: estateLiab,\r\n          //backgroundColor: [\"#F7464A\", \"#46BFBD\", \"#FDB45C\", \"#949FB1\", \"#4D5360\"]\r\n          backgroundColor: [\r\n            \"#872651\",\r\n            ASSETS.REAL_ESTATE.colour,\r\n            ASSETS.STOCKS_BONDS.colour,\r\n            ASSETS.SMALL_BUSINESS_SHARES.colour,\r\n            ASSETS.RRSP_RRIF.colour,\r\n            ASSETS.INTEREST_BEARING.colour,\r\n            ASSETS.OTHER_ASSETS.colour,\r\n          ],\r\n        },\r\n      ],\r\n    };\r\n\r\n    let estateLiabLE3 = [];\r\n    estateLiabLE3.push(totalLiabProjectionsNow);\r\n    estateLiabLE3.push(\r\n      AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_REAL_ESTATE]\r\n    );\r\n    estateLiabLE3.push(\r\n      AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_STOCKS]\r\n    );\r\n    estateLiabLE3.push(\r\n      AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_SMALL_BUS]\r\n    );\r\n    estateLiabLE3.push(\r\n      AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_RRSP]\r\n    );\r\n    estateLiabLE3.push(\r\n      AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_INTEREST]\r\n    );\r\n    estateLiabLE3.push(\r\n      AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_OTHER]\r\n    );\r\n\r\n    const dataPieEstateLiabLE = {\r\n      labels: [\r\n        // OUTPUTTEXTEP[lang].graphsL1,OUTPUTTEXTEP[lang].graphsL2,OUTPUTTEXTEP[lang].graphsL3,OUTPUTTEXTEP[lang].graphsL4,OUTPUTTEXTEP[lang].graphsL5,\r\n        OUTPUTTEXTEP[lang].graphsL1,\r\n        OUTPUTTEXTEP[lang].graphsTaxes + OUTPUTTEXTEP[lang].pg3Tab3R2C1,\r\n        OUTPUTTEXTEP[lang].graphsTaxes + OUTPUTTEXTEP[lang].pg3Tab3R3C1,\r\n        OUTPUTTEXTEP[lang].graphsTaxes + OUTPUTTEXTEP[lang].pg3Tab3R4C1,\r\n        OUTPUTTEXTEP[lang].graphsTaxes + OUTPUTTEXTEP[lang].pg3Tab3R5C1,\r\n        OUTPUTTEXTEP[lang].graphsTaxes + OUTPUTTEXTEP[lang].pg3Tab3R6C1,\r\n        OUTPUTTEXTEP[lang].graphsTaxes + OUTPUTTEXTEP[lang].pg3Tab3R7C1,\r\n      ],\r\n      datasets: [\r\n        {\r\n          //data: this.state.estateLiabLE,\r\n          data: estateLiabLE3,\r\n          //backgroundColor: [\"#F7464A\", \"#46BFBD\", \"#FDB45C\", \"#949FB1\", \"#4D5360\"]\r\n          backgroundColor: [\r\n            \"#872651\",\r\n            ASSETS.REAL_ESTATE.colour,\r\n            ASSETS.STOCKS_BONDS.colour,\r\n            ASSETS.SMALL_BUSINESS_SHARES.colour,\r\n            ASSETS.RRSP_RRIF.colour,\r\n            ASSETS.INTEREST_BEARING.colour,\r\n            ASSETS.OTHER_ASSETS.colour,\r\n          ],\r\n        },\r\n      ],\r\n    };\r\n\r\n    \r\n    let optionsLiab= JSON.parse(JSON.stringify(leakageGraps.optionsPieEstateLeakage));\r\n    let optionsLiabLE= JSON.parse(JSON.stringify(leakageGraps.optionsPieEstateLeakageLE));\r\n    \r\n    optionsLiab.title.text=OUTPUTTEXTEP[lang].graphsT2;\r\n    optionsLiabLE.title.text=OUTPUTTEXTEP[lang].graphsT3;\r\n\r\n    return (\r\n      <div style={{ width: \"90%\" }}>\r\n        <div style={{ width: \"50%\" }}>\r\n        <br />\r\n          <h3 className=\"ppi1\">\r\n            <div>\r\n              {OUTPUTTEXTEP[lang].graphsT1} <br />\r\n            </div>\r\n          </h3>\r\n\r\n         {/* </div> <div style={{ width: \"100%\" }}> */}\r\n          {/* <div style={{ width: \"100%\", marginLeft: \"31px\" }}>\r\n            <article\r\n               className=\"canvas-containerLeakage\"\r\n                style={{ position: \"relative\"}}  \r\n            >\r\n              <div className=\"EPGraphDiv\">\r\n                <Pie\r\n                  data={dataPieEstateLiabNow}\r\n                  options={leakageGraps.dataPieEstateLeakage}\r\n                />\r\n              </div>\r\n              <div className=\"EPGraphDiv\">\r\n                <Pie\r\n                  data={dataPieEstateLiabLE}\r\n                  options={leakageGraps.dataPieEstateLeakage}\r\n                />\r\n              </div>\r\n            </article>\r\n          </div>\r\n */}\r\n\r\n          <div style={{ width: \"100%\", marginLeft: \"31px\" }}>\r\n            <article\r\n              className=\"canvas-containerLiab\"\r\n              /* style={{ position: \"relative\", height: \"35vh\", width: \"80vw\" }} */\r\n            >\r\n              <div className=\"EPGraphDiv\">\r\n                <Pie\r\n                  data={dataPieEstateLiabNow}\r\n                  options={optionsLiab}\r\n                />\r\n              </div>\r\n              <div className=\"EPGraphDiv\">\r\n                <Pie\r\n                  data={dataPieEstateLiabLE}\r\n                  options={optionsLiabLE}\r\n                />\r\n              </div>\r\n            </article>\r\n          </div>\r\n\r\n          <br/>\r\n          <br />\r\n          <h3 className=\"ppi1\">\r\n            <div>\r\n              {OUTPUTTEXTEP[lang].graphsLeakageT1} <br />\r\n            </div>\r\n          </h3>\r\n          <div style={{ width: \"100%\", marginLeft: \"31px\" }}>\r\n            <article\r\n              className=\"canvas-containerLeakage\"\r\n              /* style={{ position: \"relative\", height: \"35vh\", width: \"80vw\" }} */\r\n            >\r\n              <div className=\"EPGraphDiv\">\r\n                <Pie\r\n                  data={leakageGraps.dataPieEstateLeakage}\r\n                  options={leakageGraps.optionsPieEstateLeakage}\r\n                />\r\n              </div>\r\n              <div className=\"EPGraphDiv\">\r\n                <Pie\r\n                  data={leakageGraps.dataPieEstateLeakageLE}\r\n                  options={leakageGraps.optionsPieEstateLeakageLE}\r\n                />\r\n              </div>\r\n            </article>\r\n          </div>\r\n          <h3 className=\"ppi1\">\r\n            <div>\r\n              {OUTPUTTEXTEP[lang].graphs2L1} <br />\r\n            </div>\r\n          </h3>\r\n          </div>\r\n          <div style={{ width: \"100%\" }}>\r\n            <article className=\"canvas-container\" style={{ height: \"200px\" }}>\r\n              <Bar data={dataTaxLiability} options={optionsTaxLiab} />\r\n            </article>\r\n          </div>\r\n\r\n          <br />\r\n          <hr />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Bar, Line, Chart,Pie } from \"react-chartjs-2\";\r\n//import \"./Output.css\";\r\nimport \"./Output.css\";\r\nimport { readMCCData } from \"../data/dataExchangeMCC\";\r\nimport { fetchMCCData } from \"../utils/FetchAPIs\";\r\nimport { setUIDataToAPI} from \"../data/dataExchange\";\r\nimport {\r\n  getProjectedLiabilities,\r\n  cleanFormat,\r\n  numFormat,\r\n  getAssetsTaxCategoryTotal,\r\n  getAssetsCategoryTotal,\r\n  getTaxLiabCategoryTotal,\r\n  getLiabsCategoryTotal\r\n} from \"../utils/helper\";\r\nimport {\r\n  GROWTHDIR,\r\n  QUOTE_CLIENT,\r\n  QUOTE_SPOUSE,\r\n  QUOTE_JOINT,\r\n  ASSET_TAX,\r\n  ASSETS,\r\n  LIABILITIES\r\n} from \"../definitions/generalDefinitions\";\r\nimport MCCGraph from \"./MCCGraph\";\r\nimport { MultiButtons } from \"./MultiButtons\";\r\nimport { InputField } from \"./inputField\";\r\nimport DataTable from \"./GridExcelComponent/DataTable\";\r\n\r\n// props option\r\nconst DISPLAY_INCOME = 1;\r\n\r\n// for Estate\r\nconst DISPLAY_TAXLIAB_CLIENT = 1;\r\nconst DISPLAY_TAXLIAB_JLTD = 2;\r\n\r\nexport class AnalysisGraphs extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      loadingMCC: true,\r\n      estateLiab: [],\r\n      estateLiabLE: [],\r\n      taxL:0\r\n    };\r\n    this.dataAges = [];\r\n    this.dataPremiums = [];\r\n    this.dataDB = [];\r\n    this.dataSVEquiBuild = [];\r\n    this.dataSVManulife = [];\r\n    this.Prem = 0;\r\n    this.bestPremiumDur = 100;\r\n    this.bestMinMultiple = 0;\r\n    this.premiumDur = 10;\r\n    this.lifeExp = 0;\r\n    this.minMultiple = 0;\r\n    this.insMultiple = 0;\r\n    this.bestFitEquiBuild = false;\r\n    this.INAEstateOption = DISPLAY_TAXLIAB_CLIENT;\r\n    this.insuranceAmtInitial = this.props.INAOption === DISPLAY_INCOME\r\n        ? this.props.insuranceNeed\r\n        : this.props.dataEstateLiability[0];\r\nthis.chartRef = React.createRef();\r\n  this.taxLiabChartRef = React.createRef();\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getEstateLiabPieCharts()\r\n\r\n  }\r\n\r\n\r\n  shouldComponentUpdate(nextProps, nextState, prevState) {\r\n    if (\r\n      this.props.projectEnd !== nextProps.projectEnd ||\r\n      this.state.loadingMCC !== prevState.loadingMCC || this.props.INAOption !== nextProps.INAOption\r\n    ) {\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  getMCCQuoteOutput = () => {\r\n    return Promise.all([this.getMCCQuoteOutput1(), this.getMCCQuoteOutput4()]);\r\n  };\r\n\r\n  getMCCQuoteOutput1 = () => {\r\n    let quotePlanID = 48;\r\n    let quoteClient =\r\n      this.INAEstateOption === DISPLAY_TAXLIAB_JLTD\r\n        ? QUOTE_JOINT\r\n        : QUOTE_CLIENT;\r\n    let FA=this.props.INAOption === DISPLAY_INCOME\r\n        ? this.props.insuranceNeed\r\n        : this.props.dataEstateLiability[0];\r\n        const FAClean=parseFloat(cleanFormat(FA))\r\n    let dataMCC = readMCCData(\r\n      this.props.input,\r\n      quotePlanID,\r\n      quoteClient,\r\n      FAClean\r\n    );\r\n\r\n    // console.log(this.props.dataAPISite, dataMCC, FA);\r\n    if(FA>0)\r\n    {\r\n    fetchMCCData(\r\n      this.props.dataAPISite,\r\n      dataMCC,\r\n      FAClean\r\n    )\r\n      .then(data => {\r\n        // console.log(data[0]);\r\n        if (data[0] !== undefined) {\r\n          //  console.log(\"POST: MCC_OutputArrays success\");\r\n          this.minPrem = parseInt(cleanFormat(data[0][2].Values[0]));\r\n          //this.dataDB = data[0][3].Values.map(x=>parseInt(cleanFormat(x)));\r\n          this.lifeExp = this.props.lifeExp; // Math.round(parseInt(data[0][4].Values[0]));\r\n\r\n          //console.log(this.lifeExp,data[0][4].Values)\r\n          // make render\r\n        }\r\n      })\r\n      .then(data => {\r\n        this.getMCCQuoteOutput4();\r\n      });\r\n    }\r\n  };\r\n\r\n \r\n  getMCCQuoteOutput4 = async () => {\r\n    let quotePlanID = 48;\r\n    let quoteClient =\r\n      this.INAEstateOption === DISPLAY_TAXLIAB_JLTD\r\n        ? QUOTE_JOINT\r\n        : QUOTE_CLIENT;\r\n    let FA= this.props.INAOption === DISPLAY_INCOME\r\n        ? this.props.insuranceNeed\r\n        : this.props.dataEstateLiability[0];    \r\n    const FAClean=parseFloat(cleanFormat(FA))\r\n    let dataMCC = readMCCData(\r\n      this.props.input,\r\n      quotePlanID,\r\n      quoteClient,\r\n      FAClean\r\n    );\r\n    let age = dataMCC.insured.lives[0].age;\r\n    if (dataMCC.insured.lifeStatus > 0 && age > dataMCC.insured.lives[1].age)\r\n      age = dataMCC.insured.lives[1].age;\r\n    let years = this.props.projectEnd;\r\n    dataMCC.policy.objPremium.PremSet = true;\r\n    if (this.bestFitEquiBuild === true) {\r\n      dataMCC.policy.faceAmount =\r\n        FAClean / 2;\r\n      dataMCC.policy.objRider.ICO20 = true;\r\n      dataMCC.policy.objRider.T20Amt =\r\n        FAClean / 2;\r\n      dataMCC.policy.objCustomDB.solveForPremium_On = true;\r\n      dataMCC.policy.objCustomDB.customDB =\r\n        this.props.INAOption === DISPLAY_INCOME\r\n          ? this.getDataFutureINA()\r\n          : this.props.dataEstateLiability;\r\n    } else {\r\n      dataMCC.policy.objCustomDB.customDB = [];\r\n      dataMCC.policy.objCustomDB.solveForPremium_On = false;\r\n      dataMCC.policy.objPremium.PremSetAmt = this.Prem;\r\n      dataMCC.policy.objPremium.PremSetDur = parseInt(this.premiumDur);\r\n    }\r\n    dataMCC.policy.objPremium.PremSolve = false;\r\n    fetchMCCData(\r\n      this.props.dataAPISite,\r\n      dataMCC,\r\n      FAClean\r\n    ).then(data => {\r\n       if (data[0][1] !== undefined) {\r\n        console.log(\"POST: MCC_OutputArrays success\");\r\n        this.dataAges = data[0][1].Values.slice(0, years).map(x =>\r\n          parseInt(cleanFormat(x))\r\n        );\r\n        this.dataPremiums = data[0][2].Values.map(x =>\r\n          parseInt(cleanFormat(x))\r\n        );\r\n        this.dataDB = data[0][3].Values.slice(0, years).map(x =>\r\n          parseInt(cleanFormat(x))\r\n        );\r\n        this.dataSVEquiBuild = data[0][4].Values.slice(0, years).map(x =>\r\n          parseInt(cleanFormat(x))\r\n        );\r\n        this.dataDB.unshift(FAClean);\r\n        let i;\r\n\r\n        for (\r\n          i = 0;\r\n          i < this.dataDB.length + age - this.props.projectEnd + 3;\r\n          ++i\r\n        ) {\r\n          this.dataAges.pop();\r\n          this.dataDB.pop();\r\n          this.dataPremiums.pop();\r\n          this.dataSVEquiBuild.pop();\r\n        }\r\n        //console.log(this.dataDB);\r\n        /* let l = this.state.loadingMCC;\r\n        l = false;\r\n        this.setState({ l }); */\r\n      }\r\n    });\r\n  };\r\n\r\n  getMCCQuoteOutputManu = async () => {\r\n    let quotePlanID = 47; //MANU_UL_CLIENT_INVSEL = 47\r\n    let quoteClient =\r\n      this.INAEstateOption === DISPLAY_TAXLIAB_JLTD\r\n        ? QUOTE_JOINT\r\n        : QUOTE_CLIENT;\r\n        let FA = this.props.INAOption === DISPLAY_INCOME\r\n        ? this.props.insuranceNeed\r\n        : this.props.dataEstateLiability[0];\r\n        const FAClean=parseFloat(cleanFormat(FA))\r\n    let dataMCC = readMCCData(\r\n      this.props.input,\r\n      quotePlanID,\r\n      quoteClient,\r\n      FAClean\r\n    );\r\n    //console.log(dataMCC);\r\n    let age = dataMCC.insured.lives[0].age;\r\n    if (dataMCC.insured.lifeStatus > 0 && age > dataMCC.insured.lives[1].age)\r\n      age = dataMCC.insured.lives[1].age;\r\n    let years = this.props.projectEnd;\r\n    dataMCC.policy.objPremium.PremSet = false;\r\n    dataMCC.policy.objPremium.PremSolve = true;\r\n    dataMCC.policy.objPremium.PremSolveDur = 99; //years-age;\r\n    dataMCC.policy.objCustomDB.customDB = [];\r\n    dataMCC.policy.objCustomDB.solveForPremium_On = false;\r\n    dataMCC.policy.intRate = 0.035;\r\n    dataMCC.policy.province = \"AB\"; // data.dataInput.Presentations[0].Province,\r\n    fetchMCCData(\r\n      this.props.dataAPISite,\r\n      dataMCC,\r\n      FAClean\r\n    ).then(data => {\r\n       if (data[0][1] !== undefined) {\r\n        console.log(\"POST: MCC_OutputArrays success\");\r\n        this.dataAges = data[0][1].Values.slice(0, years).map(x =>\r\n          parseInt(cleanFormat(x))\r\n        );\r\n        this.dataPremiums = data[0][2].Values.map(x =>\r\n          parseInt(cleanFormat(x))\r\n        );\r\n        this.dataDB = data[0][3].Values.slice(0, years).map(x =>\r\n          parseInt(cleanFormat(x))\r\n        );\r\n        this.dataSVManulife = data[0][4].Values.slice(0, years).map(x =>\r\n          parseInt(cleanFormat(x))\r\n        );\r\n\r\n        this.dataDB.unshift(FAClean);\r\n        let i;\r\n\r\n        for (\r\n          i = 0;\r\n          i < this.dataDB.length + age - this.props.projectEnd + 8;\r\n          ++i\r\n        ) {\r\n          this.dataAges.pop();\r\n          this.dataDB.pop();\r\n          this.dataPremiums.pop();\r\n          this.dataSVManulife.pop();\r\n        }\r\n        //console.log(this.dataDB);\r\n        /* let l = this.state.loadingMCC;\r\n        l = false;\r\n        this.setState({ l }); */\r\n      }\r\n    });\r\n  };\r\n\r\n  selectMultiButton = (id, value) => {\r\n    if (value !== undefined) {\r\n      if (id === 1) this.premiumDur = value;\r\n      else if (id === 2) this.minMultiple = value;\r\n      else if (id === 3) this.insMultiple = value;\r\n      else if (id === 4) this.insuranceAmtInitial = value;\r\n    }\r\n    this.getMCCQuoteOutput();\r\n    //console.log(value);\r\n\r\n    let b = !this.state.loadingMCC;\r\n    this.setState({ loadingMCC: b });\r\n    this.minPrem = 1;\r\n  };\r\n\r\n  solveForOptimumQuote = async () => {\r\n    let min = 0;\r\n    this.bestPremiumDur = 100;\r\n    let k;\r\n    let ratio;\r\n    let dataFutureINA = this.getDataFutureINA();\r\n    //let dataFutureEstateLiab = this.getDataFutureEstateLiability();\r\n    this.bestFitEquiBuild = false;\r\n\r\n    if (false) {\r\n      let gotHereInInnerLoop = false;\r\n      for (ratio = 0; ratio <= 40; ratio++) {\r\n        for (k = 5; k < this.lifeExp + 1; k++) {\r\n          this.premiumDur = k;\r\n          this.Prem = (1 + ratio / 20) * this.minPrem;\r\n\r\n          let dataFVofPrems = this.getDataFVofPrems(\r\n            (this.props.INAOption = DISPLAY_INCOME\r\n              ? dataFutureINA\r\n              : this.props.dataEstateLiability)\r\n          );\r\n\r\n          await this.getMCCQuoteOutput4();\r\n          let SumOfSquresDiff = 0;\r\n          let i;\r\n          for (i = 0; i < this.lifeExp; ++i) {\r\n            let insVal = DISPLAY_INCOME\r\n              ? dataFutureINA[i]\r\n              : this.props.dataEstateLiability[i];\r\n            //console.log(SumOfSquresDiff,dataFVofPrems,insVal)\r\n            SumOfSquresDiff += Math.pow(dataFVofPrems[i] - insVal, 2);\r\n          }\r\n          SumOfSquresDiff = Math.round(\r\n            SumOfSquresDiff / (1000000 * this.lifeExp)\r\n          );\r\n\r\n          if (min === 0) min = SumOfSquresDiff;\r\n          else if (min > SumOfSquresDiff) {\r\n            //console.log(\"k, min, SumOfSquresDiff\");\r\n            min = SumOfSquresDiff;\r\n            this.bestPremiumDur = k;\r\n            this.bestMinMultiple = 5 * ratio;\r\n            gotHereInInnerLoop = true;\r\n          } else if (gotHereInInnerLoop === true) k = this.lifeExp + 1; //get out\r\n          //console.log(k, min, SumOfSquresDiff, ratio);\r\n          //let b = !this.state.loadingMCC;\r\n          //await this.setState({ loadingMCC: b });\r\n        }\r\n        gotHereInInnerLoop = false;\r\n      }\r\n      this.premiumDur = this.bestPremiumDur;\r\n      this.minMultiple = this.bestMinMultiple;\r\n      //await this.getMCCQuoteOutput();\r\n    } else {\r\n      //this.premiumDur = this.bestPremiumDur;\r\n      //this.minMultiple =  this.bestMinMultiple;\r\n      //this.premiumDur = k;\r\n      this.Prem = (1 + this.bestMinMultiple) * this.minPrem;\r\n\r\n      await this.getMCCQuoteOutput();\r\n    }\r\n    let b = !this.state.loadingMCC;\r\n    await this.setState({ loadingMCC: b });\r\n  };\r\n\r\n  solveForOptimumEquiBuild = async e => {\r\n    if (e === 1) {\r\n      this.bestPremiumDur = 100;\r\n      let dataFutureINA = this.getDataFutureINA();\r\n      //let dataFutureEstateLiab = this.getDataFutureEstateLiability();\r\n\r\n      this.bestFitEquiBuild = true;\r\n      await this.getMCCQuoteOutput4();\r\n\r\n      let dataFVofPrems = this.getDataFVofPrems(dataFutureINA);\r\n      let SumOfSquresDiff = 0;\r\n      let i;\r\n      for (i = 0; i < this.lifeExp; ++i) {\r\n        let insVal = DISPLAY_INCOME\r\n          ? dataFutureINA[i]\r\n          : this.props.dataEstateLiability[i];\r\n        //console.log(SumOfSquresDiff,dataFVofPrems,insVal)\r\n        SumOfSquresDiff += Math.pow(dataFVofPrems[i] - insVal, 2);\r\n      }\r\n      SumOfSquresDiff = Math.round(SumOfSquresDiff / (1000000 * this.lifeExp));\r\n      //console.log(SumOfSquresDiff)\r\n    } else if (e === 2) {\r\n      this.bestPremiumDur = 100;\r\n      let dataFutureINA = this.getDataFutureINA();\r\n\r\n      this.bestFitEquiBuild = true;\r\n      await this.getMCCQuoteOutputManu();\r\n\r\n      let dataFVofPrems = this.getDataFVofPrems(dataFutureINA);\r\n    }\r\n    // await this.getMCCQuoteOutput();\r\n\r\n    let b = !this.state.loadingMCC;\r\n    await this.setState({ loadingMCC: b });\r\n  };\r\n\r\n  selectMultiButtonINAorTax = (e) => {\r\n    if (e === DISPLAY_TAXLIAB_CLIENT) {\r\n      this.INAEstateOption = DISPLAY_TAXLIAB_CLIENT;\r\n    } else if (e === DISPLAY_TAXLIAB_JLTD) {\r\n      this.INAEstateOption = DISPLAY_TAXLIAB_JLTD;\r\n    }\r\n\r\n    //let dataFutureEstateLiab = this.getDataFutureEstateLiability();\r\n    this.insuranceAmtInitial =\r\n      this.props.INAOption === DISPLAY_INCOME\r\n        ? this.props.insuranceNeed\r\n        : this.props.dataEstateLiability[0];\r\n    //this.insuranceAmtInitial =parseInt(cleanFormat(this.insuranceAmtInitial))*(1 + this.insMultiple / 100);\r\n    this.getMCCQuoteOutput();\r\n\r\n    \r\n\r\n    let b = !this.state.loadingMCC;\r\n    this.setState({ loadingMCC: b });\r\n    this.minPrem = 1;\r\n    //this.setState({ loading: false });\r\n  };\r\n\r\n\r\n\r\ngetEstateLiabPieCharts= async () => {\r\n     \r\n    const totalLiabProjections = getProjectedLiabilities(\r\n      this.props.input.dataInput,\r\n      this.props.projectEnd,\r\n      this.props.language\r\n    );\r\n\r\n\r\n\r\n    // console.log(this.state.estateLiab,this.state.estateLiabLE)\r\n\r\n    let dataNA = setUIDataToAPI(this.props.input, 0);\r\n\r\n    let estateLiab2=[]\r\n    estateLiab2.push(totalLiabProjections[0])\r\n    const l1= await getTaxLiabCategoryTotal(this.props.input.dataInput,ASSET_TAX.REGISTERED.Key,dataNA, 0);\r\n    this.setState({taxL: l1})\r\n    estateLiab2.push(l1)\r\n    const l2=await getTaxLiabCategoryTotal(this.props.input.dataInput,ASSET_TAX.CAPITAL_GAINS_ANNUAL.Key,dataNA, 0)\r\n    const l3=await getTaxLiabCategoryTotal(this.props.input.dataInput,ASSET_TAX.CAPITAL_GAINS_DEFERRED.Key,dataNA, 0)\r\n    estateLiab2.push(l2+l3)\r\n    estateLiab2.push(await getTaxLiabCategoryTotal(this.props.input.dataInput,ASSET_TAX.FULLY_TAXABLE.Key,dataNA, 0))\r\n    estateLiab2.push(await getTaxLiabCategoryTotal(this.props.input.dataInput,ASSET_TAX.DIVIDEND.Key,dataNA, 0));\r\n\r\n\r\n    this.setState({estateLiab: estateLiab2});\r\n\r\n    let estateLiab3=[]\r\n    estateLiab3.push(totalLiabProjections[this.lifeExp])\r\n    estateLiab3.push(await getTaxLiabCategoryTotal(this.props.input.dataInput,ASSET_TAX.REGISTERED.Key,dataNA, this.lifeExp))\r\n    const l2LE=await getTaxLiabCategoryTotal(this.props.input.dataInput,ASSET_TAX.CAPITAL_GAINS_ANNUAL.Key,dataNA, this.lifeExp)\r\n    const l3LE=await getTaxLiabCategoryTotal(this.props.input.dataInput,ASSET_TAX.CAPITAL_GAINS_DEFERRED.Key,dataNA, this.lifeExp)\r\n    estateLiab3.push(l2LE+l3LE)\r\n    estateLiab3.push(await getTaxLiabCategoryTotal(this.props.input.dataInput,ASSET_TAX.FULLY_TAXABLE.Key,dataNA, this.lifeExp))\r\n    estateLiab3.push(await getTaxLiabCategoryTotal(this.props.input.dataInput,ASSET_TAX.DIVIDEND.Key,dataNA, this.lifeExp));\r\n    this.setState({estateLiabLE: estateLiab3});\r\n\r\n    // console.log(this.state.estateLiab,this.state.estateLiabLE)\r\n// console.log(estateLiab2,estateLiab3)\r\n}\r\n\r\n\r\n\r\n\r\n\r\n  getDataFutureINA = () => {\r\n    let dataFutureINA = [];\r\n    let i;\r\n    let j;\r\n    var pv;\r\n    var totalLiab = 0;\r\n    var totalLiabProjections = [];\r\n    // project liabs\r\n\r\n    totalLiabProjections = getProjectedLiabilities(\r\n      this.props.input.dataInput,\r\n      this.props.projectEnd,\r\n      this.props.language\r\n    );\r\n\r\n    \r\n\r\n    const currINA = parseFloat(cleanFormat(this.props.insuranceNeed));\r\n    const intRate = parseFloat(\r\n      this.props.input.dataInput.Presentations[0].invRate / 100\r\n    );\r\n    const inflation = parseFloat(\r\n      this.props.input.dataInput.Presentations[0].inflation / 100\r\n    );\r\n    dataFutureINA.push(currINA);\r\n    //console.log(this.props.insuranceNeed)\r\n    for (i = 1; i < this.props.projectEnd; ++i) {\r\n      pv =\r\n        (dataFutureINA[i - 1] - this.props.dataShortfall[i - 1]) *\r\n        (1 + intRate);\r\n      //   console.log(pv)\r\n      dataFutureINA.push(Math.round(Math.max(0, pv)));\r\n    }\r\n    // add liab\r\n    for (i = 1; i < this.props.projectEnd; ++i) {\r\n      dataFutureINA[i] += totalLiabProjections[i];\r\n    }\r\n    return dataFutureINA;\r\n  };\r\n\r\n  /* getDataFutureEstateLiability = () => {\r\n    let i;\r\n    var totalLiabProjections = [];\r\n    \r\n    // project liabs\r\n    totalLiabProjections=getProjectedLiabilities(this.props.input.dataInput, this.props.projectEnd, this.props.language) \r\n\r\n    const currEstateLiability=parseFloat(cleanFormat(this.props.insuranceNeed));\r\n    const intRate=parseFloat(this.props.input.dataInput.Presentations[0].invRate/100);            \r\n    const inflation=parseFloat(this.props.input.dataInput.Presentations[0].inflation/100);\r\n    let dataFutureEstateLiability=[]\r\n    \r\n    for (i = 1; i < this.props.projectEnd; ++i) {\r\n        dataFutureEstateLiability.push(this.props.dataTaxLiability[i]);\r\n    }\r\n    // add liab\r\n    for (i = 1; i < this.props.projectEnd; ++i) {\r\n        dataFutureEstateLiability[i]+=totalLiabProjections[i];\r\n    }\r\n    return dataFutureEstateLiability;\r\n  };\r\n */\r\n\r\nhandleFocus = (event) => {\r\n  event.target.select();\r\n};\r\n\r\n  getDataFVofPrems = dataFuture => {\r\n    let dataFVofPrems = [];\r\n    let i;\r\n    let fv = 0;\r\n\r\n    for (i = 0; i < this.dataPremiums.length; ++i) {\r\n      let shortfall = dataFuture[i] - this.dataDB[i];\r\n      fv = (fv + this.dataPremiums[i]) * 1.0375;\r\n      dataFVofPrems.push(fv + shortfall);\r\n    }\r\n    for (i = this.dataPremiums.length; i < this.props.projectEnd; ++i) {\r\n      let shortfall = dataFuture[i] - this.dataDB[i];\r\n      fv = fv * 1.0375;\r\n      dataFVofPrems.push(fv + shortfall);\r\n    }\r\n\r\n    return dataFVofPrems;\r\n  };\r\n\r\n  render() {\r\n    let dtaAgesAll = [];\r\n    let k;\r\n    let lifeExp = this.props.lifeExp;\r\n    let age = this.props.input.dataInput.Clients[1].Age;\r\n\r\n    if (this.INAEstateOption === DISPLAY_TAXLIAB_CLIENT) {\r\n      lifeExp = this.props.lifeExpClient;\r\n      age = this.props.input.dataInput.Clients[0].Age;\r\n    } else if (this.INAEstateOption === DISPLAY_TAXLIAB_JLTD) {\r\n      lifeExp = this.props.lifeExpJLTD;\r\n      if (age > this.props.input.dataInput.Clients[1].Age)\r\n        age = this.props.input.dataInput.Clients[1].Age;\r\n    }\r\n\r\n    for (k = 0; k < lifeExp + 3; ++k) {\r\n      dtaAgesAll.push(age + k);\r\n    }\r\n\r\n    //if (this.props.INAOption !== DISPLAY_INCOME) {\r\n    var dataFutureINA = this.getDataFutureINA();\r\n    const dataShortfallFV = {\r\n      labels: dtaAgesAll, // this.dataAges,\r\n      datasets: [\r\n        {\r\n          label:\r\n            this.props.language === \"en\"\r\n              ? \"Future insurance needs\"\r\n              : \"Besoins d’assurance futurs\", //Income Shortfall',\r\n          data: dataFutureINA,\r\n\r\n          fill: true, // Don't fill area under the line\r\n          borderColor: \"darkred\", // Line color\r\n          backgroundColor: \"rgba(244, 144, 128, 0.8)\"\r\n        }\r\n      ]\r\n    };\r\n    //} else {\r\n    let dataTaxLiabLifeExp = [];\r\n    let dataTaxLiab = []; // this.props.dataEstateLiability;\r\n\r\n    for (k = 0; k < lifeExp + 3; ++k) {\r\n      dataTaxLiabLifeExp.push(0);\r\n      dataTaxLiab.push(this.props.dataEstateLiability[k]);\r\n    }\r\n    dataTaxLiabLifeExp[lifeExp] = dataTaxLiab[lifeExp];\r\n    dataTaxLiab[lifeExp] = 0;\r\n\r\n    // console.log(this.INAEstateOption, age, dtaAgesAll, lifeExp);\r\n    const dataTaxLiability = {\r\n      labels: dtaAgesAll,\r\n      datasets: [\r\n        {\r\n          label:\r\n            this.props.language === \"en\"\r\n              ? \"Future insurance Needs\"\r\n              : \"Future insurance Needs ^F\", //Income Shortfall',\r\n          //type: \"line\",\r\n          data: dataTaxLiab,\r\n\r\n          fill: true, // Don't fill area under the line\r\n          borderColor: \"darkGrey\", // Line color\r\n          backgroundColor: \"#607d8b\"\r\n        },\r\n        {\r\n          label:\r\n            this.props.language === \"en\"\r\n              ? \"Life Expectancy \"\r\n              : \"Espérance de vie\", //Income Shortfall',\r\n          //type: \"line\",\r\n          data: dataTaxLiabLifeExp,\r\n          fill: true, // Don't fill area under the line\r\n          borderColor: \"#6AAd8b\",\r\n          backgroundColor: \"rgb(106,173,139,.5)\"// \"rgba(96, 125, 139, .7)\"\r\n        }\r\n      ]\r\n    };\r\n\r\n  const dataPieAssets = {\r\n  labels: [\r\n    \"Cash/TFSA/Insurance\", \"RRSP/RRIF\", \"Public/Private shares\", \"Real Estate\", \"Other\"\r\n  ],\r\n  datasets: [\r\n    {\r\n         data: [\r\n        getAssetsCategoryTotal(this.props.input.dataInput,ASSETS.CASH.Key)+\r\n        getAssetsCategoryTotal(this.props.input.dataInput,ASSETS.LIFE_INSURANCE.Key)+\r\n        getAssetsCategoryTotal(this.props.input.dataInput,ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.Key)\r\n        , \r\n        getAssetsCategoryTotal(this.props.input.dataInput,ASSETS.RRSP_RRIF.Key), \r\n        getAssetsCategoryTotal(this.props.input.dataInput,ASSETS.SMALL_BUSINESS_SHARES.Key)+\r\n        getAssetsCategoryTotal(this.props.input.dataInput,ASSETS.STOCKS_BONDS.Key),\r\n        getAssetsCategoryTotal(this.props.input.dataInput,ASSETS.REAL_ESTATE.Key)+\r\n        getAssetsCategoryTotal(this.props.input.dataInput,ASSETS.PERSONAL_RESIDENCE.Key),\r\n        getAssetsCategoryTotal(this.props.input.dataInput,ASSETS.OTHER_ASSETS.Key)\r\n      ],\r\n      backgroundColor: [\"#F7464A\", \"#46BFBD\", \"#FDB45C\", \"#949FB1\", \"#4D5360\"]\r\n    }\r\n  ]\r\n}\r\nconst dataPieTax = {\r\n  labels: [\r\n    \"Non-Taxable\", \"RRSP/RRIF\", \"Capital Gains\", \"Taxed As Income\", \"Dividend\"\r\n  ],\r\n  datasets: [\r\n    {\r\n         data: [\r\n        getAssetsTaxCategoryTotal(this.props.input.dataInput,ASSET_TAX.NON_TAXABLE.Key), \r\n        getAssetsTaxCategoryTotal(this.props.input.dataInput,ASSET_TAX.REGISTERED.Key), \r\n        getAssetsTaxCategoryTotal(this.props.input.dataInput,ASSET_TAX.CAPITAL_GAINS_ANNUAL.Key)+\r\n        getAssetsTaxCategoryTotal(this.props.input.dataInput,ASSET_TAX.CAPITAL_GAINS_DEFERRED.Key),\r\n        getAssetsTaxCategoryTotal(this.props.input.dataInput,ASSET_TAX.FULLY_TAXABLE.Key), \r\n        getAssetsTaxCategoryTotal(this.props.input.dataInput,ASSET_TAX.DIVIDEND.Key)\r\n      ],\r\n      backgroundColor: [\"#F7464A\", \"#46BFBD\", \"#FDB45C\", \"#949FB1\", \"#4D5360\"]\r\n    }\r\n  ]\r\n}\r\n\r\nconst dataPieLiabs = {\r\n  labels: [\r\n    \"Loans\", \"Taxes\", \"Emergency Fund\", \"Other\"\r\n  ],\r\n  datasets: [\r\n    {\r\n         data: [\r\n        getLiabsCategoryTotal(this.props.input.dataInput,LIABILITIES.OUTSTANDING_LOANS.Key)+\r\n        getLiabsCategoryTotal(this.props.input.dataInput,LIABILITIES.MORTGAGE_REDEMPTION.Key)+\r\n        getLiabsCategoryTotal(this.props.input.dataInput,LIABILITIES.CREDIT_CARDS.Key)+\r\n        getLiabsCategoryTotal(this.props.input.dataInput,LIABILITIES.CLIENT_TAX_LIABILITY.Key)\r\n        , \r\n        getLiabsCategoryTotal(this.props.input.dataInput,LIABILITIES.INCOME_TAXES.Key), \r\n        getLiabsCategoryTotal(this.props.input.dataInput,LIABILITIES.EMERGENCY_FUND.Key),\r\n        getLiabsCategoryTotal(this.props.input.dataInput,LIABILITIES.OTHER.Key)+\r\n        getLiabsCategoryTotal(this.props.input.dataInput,LIABILITIES.CHILD_HOME_CARE.Key)\r\n      ],\r\n      backgroundColor: [\"#F7464A\", \"#46BFBD\", \"#FDB45C\", \"#949FB1\"]\r\n    }\r\n  ]\r\n}\r\nconst dataPieLiabsAtDeath = {\r\n  labels: [\r\n    \"Last Expenses\", \"Legal and Executor Fees\", \"Future Commitments\"\r\n  ],\r\n  datasets: [\r\n    {\r\n         data: [\r\n           getLiabsCategoryTotal(this.props.input.dataInput,LIABILITIES.LAST_EXPENSES.Key),\r\n        getLiabsCategoryTotal(this.props.input.dataInput,LIABILITIES.LEGAL_AND_EXECUTOR_FEES.Key), \r\n        getLiabsCategoryTotal(this.props.input.dataInput,LIABILITIES.LEGACY_FOR_CHILDREN.Key)+\r\n        getLiabsCategoryTotal(this.props.input.dataInput,LIABILITIES.CHARITABLE_GIFTS.Key)\r\n      ],\r\n      backgroundColor: [\"#F7464A\", \"#46BFBD\", \"#FDB45C\"]\r\n    }\r\n  ]\r\n}\r\n\r\n\r\n\r\n\r\n//options\r\n  var optionsPie = {\r\n    responsive: true,\r\n    title: {\r\n      display: true,\r\n      position: \"top\",\r\n      text: \"Assets Breakdown Today\",\r\n      fontSize: 14,//8,\r\n      fontColor: \"#111\"\r\n    },\r\n    legend: {\r\n      display: true,\r\n      position: \"right\",\r\n      labels: {\r\n        fontColor: \"#333\",\r\n        fontSize: 12//16\r\n      }\r\n    }\r\n  };\r\n   \r\n   \r\n   let optionsPieTax = JSON.parse(JSON.stringify(optionsPie));\r\n   optionsPieTax.title.text=\"Tax Treatment of Assets\"\r\n\r\nlet optionsPieLiabsAtDeath = JSON.parse(JSON.stringify(optionsPie));\r\n   optionsPieLiabsAtDeath.title.text=\"Liabilities At Death\"\r\n\r\nlet optionsPieLiabs = JSON.parse(JSON.stringify(optionsPie));\r\n   optionsPieLiabs.title.text=\"Liabilities Breakdown\"\r\n\r\n\r\n\r\n\r\nconst dataPieEstateLiabNow = {\r\n  labels: [\r\n    \"Liabilities\", \"Taxes: RRSP/RRIF\", \"Taxes: Capital Gains\", \"Taxes: As Income\", \"Taxes: Dividend\"\r\n  ],\r\n  datasets: [\r\n    {\r\n         data: this.state.estateLiab,\r\n      backgroundColor: [\"#F7464A\", \"#46BFBD\", \"#FDB45C\", \"#949FB1\", \"#4D5360\"]\r\n    }\r\n  ]\r\n}\r\nconst dataPieEstateLiabLE = {\r\n  labels: [\r\n    \"Liabilities\", \"Taxes: RRSP/RRIF\", \"Taxes: Capital Gains\", \"Taxes: As Income\", \"Taxes: Dividend\"\r\n  ],\r\n  datasets: [\r\n    {\r\n         data: this.state.estateLiabLE,\r\n      backgroundColor: [\"#F7464A\", \"#46BFBD\", \"#FDB45C\", \"#949FB1\", \"#4D5360\"]\r\n    }\r\n  ]\r\n}\r\n let optionsPieEstateLiab= JSON.parse(JSON.stringify(optionsPie));\r\n   optionsPieEstateLiab.title.text=\"Estate Liability Today\"\r\n\r\nlet optionsPieEstateLiabLE= JSON.parse(JSON.stringify(optionsPie));\r\n   optionsPieEstateLiabLE.title.text=\"Estate Liability at Life Expectancy +3\"\r\n\r\n\r\n\r\n\r\n\r\n    /* var ctx = document.getElementById('myChart3');\r\n\r\n    var myChart3=new Chart(ctx, {\r\n      type: \"bar\", // override the default type\r\n\r\n      data: {\r\n        labels: dtaAgesAll,\r\n        datasets: [\r\n          {\r\n            label:\r\n              this.props.language === \"en\"\r\n                ? \"Life Expectancy\"\r\n                : \"Life Expectancy ^F\", //Income Shortfall',\r\n            data: dataTaxLiabLifeExp,\r\n            borderColor: \"#6AAd8b\",\r\n            backgroundColor: \"rgb(106,173,139,.5)\"\r\n          },\r\n          {\r\n            type: \"line\", // set the default type\r\n            label:\r\n              this.props.language === \"en\"\r\n                ? \"Future insurance Needs\"\r\n                : \"Future insurance Needs ^F\", //Income Shortfall',\r\n            //type: \"line\",\r\n            data: this.props.dataEstateLiability,\r\n            fill: true, // Don't fill area under the line\r\n            borderColor: \"darkGrey\", // Line color\r\n            backgroundColor: \"#607d8b\"\r\n          }\r\n        ]\r\n      },\r\n      options: {\r\n        //Customize chart options\r\n      }\r\n    });\r\n */\r\n    \r\n    //this.taxLiabChartRef = this.chartRef.current.getContext(\"2d\");\r\n    /* new Chart(this.taxLiabChartRef, {\r\n      type: \"bar\", // override the default type\r\n\r\n      data: {\r\n        labels: dtaAgesAll,\r\n        datasets: [\r\n          {\r\n            label:\r\n              this.props.language === \"en\"\r\n                ? \"Life Expectancy\"\r\n                : \"Life Expectancy ^F\", //Income Shortfall',\r\n            data: dataTaxLiabLifeExp,\r\n            borderColor: \"#6AAd8b\",\r\n            backgroundColor: \"rgb(106,173,139,.5)\"\r\n          },\r\n          {\r\n            type: \"line\", // set the default type\r\n            label:\r\n              this.props.language === \"en\"\r\n                ? \"Future insurance Needs\"\r\n                : \"Future insurance Needs ^F\", //Income Shortfall',\r\n            //type: \"line\",\r\n            data: this.props.dataEstateLiability,\r\n            fill: true, // Don't fill area under the line\r\n            borderColor: \"darkGrey\", // Line color\r\n            backgroundColor: \"#607d8b\"\r\n          }\r\n        ]\r\n      },\r\n      options: {\r\n        //Customize chart options\r\n      }\r\n    }); */\r\n\r\n    // FV of prems\r\n    let dataFVofPrems = this.getDataFVofPrems(dataFutureINA);\r\n\r\n    // console.log(this.props.dataEstateLiability);\r\n\r\n    const dataMCCpremFV = {\r\n      labels: dtaAgesAll, // this.dataAges,\r\n      datasets: [\r\n        {\r\n          label:\r\n            this.props.language === \"en\"\r\n              ? \"Future Value of premiums paid      vs \"\r\n              : \"EquiBuild quote ^F\", //Income Shortfall',\r\n          data: dataFVofPrems,\r\n          fill: true,\r\n          borderColor: \"darkgreen\", // Line color\r\n          backgroundColor: \"rgba(144, 244, 88, .2)\"\r\n        },\r\n        {\r\n          label:\r\n            this.props.language === \"en\"\r\n              ? \"Raise cash to pay for shortfall \"\r\n              : \"Future insurance needs ^F\", //Income Shortfall',\r\n          data:\r\n            this.props.INAOption === DISPLAY_INCOME\r\n              ? dataFutureINA\r\n              : this.props.dataEstateLiability,\r\n          //[10964, 13734, 14008, 14288, 14574, 14866, 15163, 15466, 15776, 16091, 16413, 16741, 17076, 17417, 17766, 18121, 18484, 18853, 19230, 19615, 20007, 20407, 20815, 21232, 21656, 22090, 27632, 28184, 28748, 29323, 29910, 30508, 31118, 31740, 32375, 33023, 33683, 34357, 35044, 35745, 36460, 37189, 37933, 38691, 39465, 40254],\r\n          fill: true, // Don't fill area under the line\r\n          borderColor:\r\n            this.props.INAOption === DISPLAY_INCOME ? \"darkred\" : \"darkGrey\",\r\n          backgroundColor:\r\n            this.props.INAOption === DISPLAY_INCOME\r\n              ? \"rgba(244, 144, 128, 0.9)\"\r\n              : \"#607D8B\"\r\n        }\r\n      ]\r\n    };\r\n\r\n    let SumOfSquresDiff = 0;\r\n    let i;\r\n    for (i = 0; i < this.lifeExp; ++i) {\r\n      let insVal = DISPLAY_INCOME\r\n        ? dataFutureINA[i]\r\n        : this.props.dataEstateLiability[i];\r\n      //console.log(SumOfSquresDiff,dataFVofPrems,insVal)\r\n      SumOfSquresDiff += Math.pow(dataFVofPrems[i] - insVal, 2);\r\n    }\r\n    SumOfSquresDiff = numFormat(\r\n      Math.round(SumOfSquresDiff / (1000000 * this.lifeExp)),\r\n      false,\r\n      5,\r\n      \",\"\r\n    );\r\n\r\n    const dataMCCQuoteDB = {\r\n      labels: dtaAgesAll, // this.dataAges,\r\n      datasets: [\r\n        {\r\n          label:\r\n            this.props.language === \"en\"\r\n              ? \"EquiBuild quote\"\r\n              : \"EquiBuild quote ^F\", //Income Shortfall',\r\n          data: this.dataDB,\r\n          fill: true,\r\n          borderColor: \"darkblue\", // Line color\r\n          backgroundColor: \"rgba(144, 144, 188, .3)\"\r\n        },\r\n        {\r\n          label:\r\n            this.props.language === \"en\"\r\n              ? \"Future insurance needs\"\r\n              : \"Future insurance needs ^F\", //Income Shortfall',\r\n          data:\r\n            this.props.INAOption === DISPLAY_INCOME\r\n              ? dataFutureINA\r\n              : this.props.dataEstateLiability,\r\n          //[10964, 13734, 14008, 14288, 14574, 14866, 15163, 15466, 15776, 16091, 16413, 16741, 17076, 17417, 17766, 18121, 18484, 18853, 19230, 19615, 20007, 20407, 20815, 21232, 21656, 22090, 27632, 28184, 28748, 29323, 29910, 30508, 31118, 31740, 32375, 33023, 33683, 34357, 35044, 35745, 36460, 37189, 37933, 38691, 39465, 40254],\r\n          fill: true, // Don't fill area under the line\r\n          borderColor:\r\n            this.props.INAOption === DISPLAY_INCOME ? \"darkred\" : \"darkGrey\",\r\n          backgroundColor:\r\n            this.props.INAOption === DISPLAY_INCOME\r\n              ? \"rgba(244, 144, 128, 0.9)\"\r\n              : \"#607D8B\"\r\n        }\r\n      ]\r\n    };\r\n\r\n    const optionsFV = {\r\n      responsive: true,\r\n      maintainAspectRatio: false,\r\n      scales: {\r\n        xAxes: [\r\n          {\r\n            stacked: true,\r\n            ticks: {\r\n              beginAtZero: true\r\n            }\r\n          }\r\n        ],\r\n        yAxes: [\r\n          {\r\n            stacked: false,\r\n            ticks: {\r\n              beginAtZero: true,\r\n              steps: 10,\r\n              stepValue: 5\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    };\r\n\r\n    //let colHeaders=[\"Year\", \"Survivor's Age\", \"Insurance Need\", \"Propsed Plan Death Benefit\", \"Future Value of Premiums\", \"Net Advantage of Insurance\" ];\r\n    let colHeaders = [\r\n      \"Survivor's Age\",\r\n      \"Insurance Need\",\r\n      \"Premiums\",\r\n      \"Propsed Plan Death Benefit\",\r\n      \"Future Value of Premiums\"\r\n    ];\r\n    let dataProjection = [];\r\n    dataProjection.push(this.dataAges);\r\n    dataProjection.push(\r\n      this.props.INAOption === DISPLAY_INCOME\r\n        ? dataFutureINA\r\n        : this.props.dataEstateLiability\r\n    );\r\n    dataProjection.push(this.dataPremiums);\r\n    dataProjection.push(this.dataDB);\r\n    dataProjection.push(dataFVofPrems);\r\n\r\n    let dataProjectionCV = [];\r\n    dataProjectionCV.push(this.dataAges);\r\n    dataProjectionCV.push(this.dataSVEquiBuild);\r\n    dataProjectionCV.push(this.dataSVManulife);\r\n\r\n    let needToE =\r\n      \"Insurance Needs Projections from today to life expectancy plus 3 years (\" +\r\n      lifeExp +\r\n      \" + 3)\";\r\n    let needToF =\r\n      \"Insurance Needs to life expectancy (\" +\r\n      lifeExp +\r\n      \" years) plus 3 years^F\";\r\n    let needTo = this.props.language === \"en\" ? needToE : needToF;\r\n    // needTo += +this.props.projectEnd + \")\";\r\n\r\n    //console.log(this.state.loadingMCC);\r\n    return (\r\n      <div style={{ color: \"darkBlue\", marginTop: \"15px\" }}>\r\n        {this.props.INAOption !== DISPLAY_INCOME && (\r\n          <MultiButtons\r\n            noButtons={2}\r\n            buttonCaption={[\"Estate of Client\", \"Estate of Couple\"]}\r\n            selectMultiButton={this.selectMultiButtonINAorTax}\r\n          />\r\n        )}\r\n        \r\n        <div style={{ width: \"90%\" }}>\r\n        <div style={{ width: \"100%\" }}> \r\n        \r\n           <h3 className=\"ppi1\">\r\n          {this.props.INAOption === DISPLAY_INCOME\r\n            ? \"Your current financial situation is summerized below:\" //this.props.insuranceNeed\r\n            : <div><br/><br/>Estate Liability breakdown Today and at Life Expectancy plus 3 years: <br/></div>\r\n            }\r\n          {/*numFormat(this.props.dataTaxLiability[0], false, 2, \",\")}*/}\r\n        </h3>\r\n\r\n \r\n          <div style={{ width: \"100%\" }}>\r\n            {this.props.INAOption === DISPLAY_INCOME ? (\r\n               <div><article className=\"canvas-container\" style={{height: \"450px\" }}>\r\n                <div style={{overflow:'hidden', float: 'left', width: '50%',height: \"400px\" }}><Pie data={dataPieAssets} options={optionsPie} /></div>\r\n                <div style={{float: 'left',width: '50%',height: \"400px\"}}><Pie data={dataPieTax} options={optionsPieTax} /></div>\r\n              </article>\r\n              <article className=\"canvas-container\" style={{height: \"450px\" }}>\r\n                <div style={{overflow:'hidden', float: 'left', width: '50%',height: \"400px\" }}><Pie data={dataPieLiabs} options={optionsPieLiabs} /></div>\r\n                <div style={{float: 'left',width: '50%',height: \"400px\"}}><Pie data={dataPieLiabsAtDeath} options={optionsPieLiabsAtDeath} /></div>\r\n              </article></div>\r\n         ) : (\r\n           \r\n            <article className=\"canvas-container\" style={{height: \"450px\" }}>\r\n                <div style={{overflow:'hidden', float: 'left', width: '50%',height: \"400px\" }}><Pie data={dataPieEstateLiabNow} options={optionsPieEstateLiab} /></div >\r\n                <div style={{float: 'left',width: '50%',height: \"400px\"}}><Pie data={dataPieEstateLiabLE} options={optionsPieEstateLiabLE} /></div>\r\n              </article>)}\r\n          </div>\r\n\r\n<br/>\r\n           <h3 className=\"ppi1\">\r\n          {this.props.INAOption === DISPLAY_INCOME\r\n            ? <div>\"Net Worth Today:\"<br/> \"Assets:\"<br/> \"Liabilities:\"</div> //this.props.insuranceNeed\r\n            : <br/>\r\n            }\r\n          {/*numFormat(this.props.dataTaxLiability[0], false, 2, \",\")}*/}\r\n        </h3>\r\n\r\n\r\n\r\n        <h3 className=\"ppi1\">\r\n          {needTo} {/*:{\" \"}*/}\r\n          {this.props.INAOption === DISPLAY_INCOME\r\n            ? \"\" //this.props.insuranceNeed\r\n            : \"\"}\r\n          {/*numFormat(this.props.dataTaxLiability[0], false, 2, \",\")}*/}\r\n        </h3>\r\n\r\n             {this.props.INAOption === DISPLAY_INCOME ? (\r\n              <article className=\"canvas-container\" style={{ height: \"200px\" }}>\r\n                <Line data={dataShortfallFV} options={optionsFV} />\r\n              </article>\r\n            ) : (\r\n              <article className=\"canvas-container\" style={{ height: \"200px\" }}>\r\n                <Bar data={dataTaxLiability} options={optionsFV} />\r\n              </article>\r\n            )}\r\n\r\n            {/*  {this.props.INAOption !== DISPLAY_INCOME &&\r\n             <div>\r\n              <canvas id=\"myChart\" ref={this.chartRef} />\r\n            </div>}\r\n             */}\r\n          \r\n            <br /> <br /> <br /> <br />\r\n            <hr />\r\n            <h2>Insurance Quote:</h2>\r\n            <div style={{ width: \"100%\", float: \"left\", clear: \"left\" }}>\r\n              <MultiButtons\r\n                noButtons={1}\r\n                buttonCaption={[\"Optimize\"]}\r\n                selectMultiButton={this.solveForOptimumQuote}\r\n              />\r\n            </div>\r\n            <div style={{ width: \"100%\", float: \"left\", clear: \"left\" }}>\r\n              <MultiButtons\r\n                noButtons={2}\r\n                buttonCaption={[\"Best EquiBuild fit\", \"Manulife UL fit\"]}\r\n                selectMultiButton={this.solveForOptimumEquiBuild}\r\n              />\r\n            </div>\r\n            <InputField\r\n              inputName=\"Insurance Amtount\"\r\n              id={4}\r\n              format={2}\r\n              Count={1}\r\n              language={this.props.language}\r\n              inputValue={this.props.INAOption === DISPLAY_INCOME\r\n        ? this.props.insuranceNeed\r\n        : this.props.dataEstateLiability[0]}\r\n              maxValue={1000}\r\n              handleUpdateInput={this.selectMultiButton}\r\n            />\r\n            <InputField\r\n              inputName=\"No. of deposits\"\r\n              id={1}\r\n              format={1}\r\n              Count={1}\r\n              language={this.props.language}\r\n              inputValue={this.premiumDur}\r\n              handleUpdateInput={this.selectMultiButton}\r\n            />\r\n            <InputField\r\n              inputName=\"Over min. deposit\"\r\n              id={2}\r\n              format={3}\r\n              Count={1}\r\n              maxValue={300}\r\n              language={this.props.language}\r\n              inputValue={this.minMultiple}\r\n              handleUpdateInput={this.selectMultiButton}\r\n            />\r\n            <h3 style={{ marginTop: \"20px\", marginLeft: \"20px\" }}>\r\n              Minimize this measure of goodness of fit: {SumOfSquresDiff}{\" \"}\r\n              <span style={{ leftPadding: \"20px\" }}>\r\n                {\" \"}\r\n                Premium duration: {this.bestPremiumDur}\r\n              </span>{\" \"}\r\n            </h3>\r\n            <article className=\"canvas-container\" style={{ height: \"200px\" }}>\r\n              <Line data={dataMCCQuoteDB} options={optionsFV} />\r\n            </article>\r\n            <br /> <br /> <br /> <br />\r\n            <br /> <br /> <br /> <br />\r\n            <hr />\r\n            <h2>Compare Options</h2>\r\n            <article className=\"canvas-container\" style={{ height: \"200px\" }}>\r\n              <Line data={dataMCCpremFV} options={optionsFV} />\r\n            </article>\r\n            <p />\r\n            <br />\r\n            <p />\r\n            <br />\r\n            <hr />\r\n           \r\n            <div style={{ width: \"60%\" }}>\r\n              <DataTable\r\n                dataColTitles={colHeaders}\r\n                dataProjection={dataProjection}\r\n                gridTitle={\"Compare Options\"}\r\n                language={this.props.language}\r\n              />\r\n            </div>\r\n            <br />\r\n            {this.dataSVManulife.length > 0 && this.dataSVEquiBuild.length > 0 && (\r\n              <div style={{ width: \"60%\" }}>\r\n                <DataTable\r\n                  dataColTitles={[\r\n                    \"Age\",\r\n                    \"EquiBuild Surrnder Value\",\r\n                    \"ManuLife UL Surrnder Value\"\r\n                  ]}\r\n                  dataProjection={dataProjectionCV}\r\n                  gridTitle={\"Compare Surrender Values: EquiBuild vs Manulife UL\"}\r\n                  language={this.props.language}\r\n                />\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Client } from \"./Client\";\r\nimport { defaults } from \"react-chartjs-2\";\r\nimport { Asset } from \"./Asset\";\r\nimport { Liability } from \"./Liability\";\r\nimport { Source } from \"./Source\";\r\nimport { Need } from \"./Need\";\r\nimport { Header, hideRecover } from \"./Header\";\r\nimport { Presentation } from \"./Presentation\";\r\nimport { PopupUserinputDialog } from \"./PopupUserInput\";\r\nimport { Collapsible } from \"./Collapsible\";\r\nimport PasteClients from './PasteClients'\r\nimport {\r\n  getEPGridData,\r\n  getINAGridData,\r\n} from \"../data/aggregateGridProjections\";\r\nimport { AggregateGrid } from \"./AggregateGrid\";\r\nimport _ from \"lodash\";\r\nimport {\r\n  fetchTimerAPICheck,\r\n  getTaxRate,\r\n  handleFetchInsuranceNeedsNew,\r\n  handleFetchINADataFromQueryString,\r\n  handleFetchQueryString,\r\n  handleFetchPDF\r\n} from \"../utils/FetchAPIs\";\r\nimport debounce from \"lodash.debounce\";\r\nimport queryString from \"query-string\";\r\nimport { MultiButtons } from \"./MultiButtons\";\r\nimport { saveAs } from \"file-saver\";\r\nimport { OutputPresentation } from \"./outputPresentation\";\r\nimport { OutputPresentationEP } from \"./outputPresentationEP\";\r\nimport { OutputGraphs } from \"./OutputGraphs\";\r\nimport { OutputGraphsEP } from \"./OutputGraphsEP\";\r\nimport { AnalysisGraphs } from \"./AnalysisGraph\";\r\nimport { AddRemove } from \"./AddRemove\";\r\nimport { Info } from \"./Info\";\r\nimport {\r\n  isMobileDevice,\r\n  clearListCookies,\r\n  //isVersion2019,\r\n  versionDetails,\r\n  //INAFullSpreadsheetHeaders,\r\n  //INAFullSpreadsheetData,\r\n  getINA_LifeExp_Plus_yrs,\r\n  getDataFutureEstateLiability,\r\n  getProjectedLiabilities,\r\n  getListItemKeyFromName,\r\n  familyProjectionYears,\r\n  singleFamilyProjectionYears,\r\n  isSingleFamily,\r\n  getInsNeedLine,\r\n} from \"../utils/helper\";\r\nimport {\r\n  QUOTE_CLIENT,\r\n  QUOTE_SPOUSE,\r\n  appSiteAPI,\r\n  DISPLAY_RETIREMENT,\r\n  DISPLAY_LIFEEXP,\r\n  DISPLAY_ENDAGE,\r\n  DISPLAY_LIFEEXP_PLUS_3,\r\n  ORPHAN_AGE_QC,\r\n  ORPHAN_AGE_NON_QC,\r\n  MAX_ORPHAN_DUR_QC,\r\n  MAX_ORPHAN_DUR_NON_QC,\r\n  UNIVERSITY_START_AGE,\r\n  UNIVERSITY_END_AGE,\r\n  DISPLAY_PRESENTATION,\r\n  DISPLAY_GRAPHS,\r\n  DISPLAY_SPREADSHEET,\r\n  DISPLAY_ANALYSIS,\r\n  MESSAGES,\r\n  ASSETS,\r\n  PROVINCE,\r\n  ASSET_TAX,\r\n  INCOMESOURCES,\r\n  OWNERSHIP,\r\n  SEX,\r\n  SMOKING,\r\n  MEMBER,\r\n  LIABILITIES,\r\n  TITLES,\r\n  INCOMENEEDS,\r\n  GROWTHDIR,\r\n  EMAIL,\r\n  ASSET_OWNERSHIP_ACTION,\r\n  APPLET_INA,\r\n  APPLET_EP,\r\n  DISPLAY_NAME,\r\n  IMAGE_LOGO,\r\n  DEFAULT_QUOTE,\r\n  OWNER_ACTION_Spouse,\r\n  OWNER_ACTION_CLIENTLIQUIDATE\r\n} from \"../definitions/generalDefinitions\";\r\n\r\nimport \"isomorphic-fetch\";\r\nimport shortid from \"shortid\";\r\nimport { buildMode } from \"../../package.json\";\r\nimport { setUIDataToAPI, loadSavedDataToUI } from \"../data/dataExchange\";\r\nimport {\r\n  createDefaultAsset,\r\n  createDefaultPres,\r\n  createDefaultClient,\r\n  createDefaultSource,\r\n  createDefaultNeed,\r\n  createDefaultLiab,\r\n  getDefaultData,\r\n} from \"../data/createDefaults\";\r\nimport {\r\n  getInfoNoInternetAccess,\r\n  getInfoIconSourcesGov,\r\n  getGenericMessage,\r\n  getInfoIconInflationGrowth,\r\n  getInfoIconPYE_JLTD,\r\n  getInfoIconNeedGrowth\r\n} from \"../definitions/infoIconsDefinitions\";\r\n\r\nimport { getAssetGridValues } from \"../data/assetGridProjections\";\r\nimport Loader from \"react-loader-spinner\";\r\n\r\nconst COLLAPSIBLE_CLIENTS = 0;\r\nconst COLLAPSIBLE_ASSETS = 1;\r\nconst COLLAPSIBLE_LIABS = 2;\r\nconst COLLAPSIBLE_SOURCES = 3;\r\nconst COLLAPSIBLE_NEEDS = 4;\r\nconst COLLAPSIBLE_PRESENTATION = 5;\r\nconst COLLAPSIBLE_RESULTS = 6;\r\nconst COLLAPSIBLE_UPDATE_ALL = 7;\r\n\r\nconst COLLAPSIBLES_COUNT = 7;\r\nconst COLLAPSIBLES_CLOSED = false;\r\nconst COLLAPSIBLES_OPEN = true;\r\n\r\nconst DISPLAY_INCOME = 1;\r\nconst DISPLAY_TAXLIAB = 2;\r\nconst INA_FILE_TYPE = \".ppi_INA_TKD\";\r\nconst EP_FILE_TYPE = \".ppi_EP_TKD\";\r\nconst waitTime = 1800;\r\nconst RRIF_LAST_START_AGE = 70;\r\n\r\nconst SITE_TEST = \"https://test-tkdirect\";\r\n\r\n// to send it to Proxy make API site \"\"\r\n//const API_SITE=\"https://ppitoolkitapi.azurewebsites.net\"\r\nconst API_SITE_PROD = \"\"; //\"https://privateapi.ppi.ca/ToolkitDirect\"\r\nconst API_SITE_TEST = \"\"; //\"https://test-tkdirectapi.ppi.ca\";\r\nconst API_SITE_LOCAL = \"http://localhost:8082\"; // \"\"; turn this to \"\" and use proxy server on 3003, first turn on from toolkitDirectProxy Server projet by npm start\r\n//const API_SITE_LOCAL=\"http://www.toolkitdirectapi.com\";\r\n//const API_SITE=\"\";\r\n\r\nconst PARENT_SITE_LOCAL = \"http://localhost:8083\";\r\nconst PARENT_SITE_TEST = \"https://test-tkdirect.ppi.ca/\";\r\nconst PARENT_SITE_PROD = \"https://toolkitdirect.ppi.ca/\";\r\nconst MODE_SAVE = 0;\r\nconst MODE_EMAIL = 1;\r\nconst MODE_ONLY_GET_ENCRYPTED_QS = 2;\r\n\r\n//\"local\"=0 \"test-tkdirect\"=1 \"toolkitdirect\" =2}\r\n/* let appSiteAPI =\r\n  buildMode === 0\r\n    ? API_SITE_LOCAL\r\n    : buildMode === 1\r\n    ? API_SITE_TEST\r\n    : API_SITE_PROD; */\r\nlet appSiteParent =\r\n  buildMode === 0\r\n    ? PARENT_SITE_LOCAL\r\n    : buildMode === 1\r\n    ? PARENT_SITE_TEST\r\n    : PARENT_SITE_PROD;\r\n\r\ndefaults.global.maintainAspectRatio = false;\r\n\r\nexport class NA extends Component {\r\n  displayName = DISPLAY_NAME;\r\n  constructor(props) {\r\n    super(props);\r\n    this.excel = React.createRef();\r\n\r\n    // define default starting clients assets .etc. rows\r\n    let defaultClients = [];\r\n    defaultClients.push(createDefaultClient(1));\r\n    if (APPLET_INA) defaultClients.push(createDefaultClient(2));\r\n    let defaultAssets = [];\r\n    defaultAssets.push(createDefaultAsset(1));\r\n    const defaultSources = [createDefaultSource(1)];\r\n    const defaultLiab = [createDefaultLiab(1)];\r\n    let defaultNeeds = [];\r\n    defaultNeeds.push(createDefaultNeed(1));\r\n    defaultNeeds.push(createDefaultNeed(2));\r\n    const defaultPresentation = [createDefaultPres(1, this.provinceMargTax)];\r\n\r\n    // build state with defaults\r\n    this.state = {\r\n      /*  dataInput: {\r\n        Clients: defaultClients, //, clientsNo: defaultClients.length },\r\n        Assets: defaultAssets, //, assetsNo: defaultAsset.length },\r\n        Liabilitys: defaultLiab, //, liabilitysNo: 1 },\r\n        Sources: defaultSources, //, sourcesNo: 1 },\r\n        Needs: defaultNeeds, //,  needsNo: 2},\r\n        Presentations: defaultPresentation, //, presentationsNo: 1 },\r\n      }, */\r\n      dataInput: getDefaultData() /*  {\r\n        Clients: defaultClients, //, clientsNo: defaultClients.length },\r\n        Assets: defaultAssets, //, assetsNo: defaultAsset.length },\r\n        Liabilitys: defaultLiab, //, liabilitysNo: 1 },\r\n        Sources: defaultSources, //, sourcesNo: 1 },\r\n        Needs: defaultNeeds, //,  needsNo: 2},\r\n        Presentations: defaultPresentation, //, presentationsNo: 1 },\r\n      }, */,\r\n      /* dataInput: getDefaultData(), */ loading: true,\r\n      initialLoading: true,\r\n      failedAPI: false,\r\n      showMsg: false,\r\n      failedRemove:false,\r\n      SnapImport:false,\r\n\r\n      dataOutput: {\r\n        dataInsuranceNeeds: [],\r\n        dataCashFlowPersonal: [],\r\n        dataTaxLiability: [],\r\n        dataCashFlowGov: [],\r\n        dataCashFlowNeeds: [],\r\n        dataNAAges: [],\r\n        dataShortfall: [],\r\n        govBenefits: { cppSurvivor: null, cppDB: null, cppOrphan: null },\r\n        lifeExpectancy: { client: 0, spouse: 0, joint: 0 },\r\n        assetProjections: [],\r\n        aggregateGrid: null,\r\n        encryptedInputLife1AndSpouse: \"\",\r\n        encryptedInputLife1: \"\",\r\n      },\r\n    };\r\n    this.openCollapsible = [];\r\n    let i;\r\n    for (i = 0; i < COLLAPSIBLES_COUNT; ++i) {\r\n      this.openCollapsible.push({\r\n        open: COLLAPSIBLES_CLOSED,\r\n        id: i,\r\n      });\r\n    }\r\n    // open first bar\r\n    this.openCollapsible[COLLAPSIBLE_CLIENTS].open = COLLAPSIBLES_OPEN;\r\n\r\n    this.state.dataOutput3 = {};\r\n    this.state.dataOutput7 = {\r\n      dataInsuranceNeeds: [],\r\n    };\r\n\r\n    /* this.state.dataOutput = {\r\n      dataInsuranceNeeds: [],\r\n      dataCashFlowPersonal: [],\r\n      dataTaxLiability: [],\r\n      dataCashFlowGov: [],\r\n      dataCashFlowNeeds: [],\r\n      dataNAAges: [],\r\n      dataShortfall: [],\r\n      govBenefits: { cppSurvivor: null, cppDB: null, cppOrphan: null },\r\n      lifeExpectancy: { client: 0, spouse: 0, joint: 0 },\r\n      assetProjections: [],\r\n      aggregateGrid: null,\r\n    };\r\n */\r\n    this.tag = { t: 0, y: 0 };\r\n    this.showRecover = 1;\r\n    this.survIdx = APPLET_INA ? QUOTE_SPOUSE : QUOTE_CLIENT;\r\n    this.graphs = false;\r\n    this.caseFromFile=false;\r\n    //this.projectEndOption = DISPLAY_RETIREMENT;\r\n    this.OKToRemove = true;\r\n    //this.toRetirement = true;\r\n    //this.periodOption = APPLET_INA ? DISPLAY_RETIREMENT : DISPLAY_ENDAGE;\r\n    this.accessedAPI = false;\r\n    \r\n    //this.state.govBenefits.cpp = 0;\r\n    //this.state.govBenefits.cppDB = 0;\r\n    //this.lifeExp = 0;\r\n    //this.lifeExpJLTD = 0;\r\n    //this.lifeExpClient = 0;\r\n    //this.orphan = 0;\r\n    //this.orphan = 0;\r\n    this.openParent = true;\r\n    this.openForce = true;\r\n    this.resultIsOpen = false;\r\n    this.langText = \"Français\";\r\n    /*   this.dataInsuranceNeeds = [];\r\n      this.dataCashFlowPersonal = []; */\r\n    this.provinceMargTax = 0;\r\n    /* this.dataTaxLiability = [];\r\n    this.dataCashFlowGov = [];\r\n    this.dataCashFlowNeeds = [];\r\n    this.dataNAAges = [];\r\n    this.dataShortfall = []; */\r\n    this.visibleOutputSection = 0;\r\n    this.dataQS = \"\";\r\n    this.intervalID = 0;\r\n    this.INAOption = APPLET_INA ? DISPLAY_INCOME : DISPLAY_TAXLIAB;\r\n    //this.failedRemove = false;\r\n  }\r\n\r\n  afterTwoSeconds = (value) => {\r\n    return new Promise((resolve) => {\r\n      setTimeout(() => {\r\n        resolve(value);\r\n      }, 2000);\r\n    });\r\n  };\r\n\r\n  probateSync= async (dataInput, dataOutput) => {\r\n    // if not there add\r\n      let qbProbate=new Array(dataOutput.probate.numericValues.length).fill(0);\r\n      if(dataInput.Presentations[0].provinceKey === \"QC\")\r\n        dataOutput.probate.numericValues=qbProbate\r\n\r\n    //  console.log(dataOutput.probate.numericValues)  \r\n      let probate = LIABILITIES.PROBATE.Key;\r\n      let hasProbate = dataInput.Liabilitys.find((x) => x.liabTypeKey === probate);\r\n      if (hasProbate !== undefined) {\r\n        hasProbate.currValue=dataOutput.probate.numericValues[0];\r\n      };\r\n    //console.log(hasProbate,dataInput)\r\n     \r\n    return dataInput;\r\n  };\r\n\r\n\r\n  govBenefitsSync = async (dataInput, dataOutput) => {\r\n    // if not there add\r\n\r\n    if (APPLET_INA) {\r\n      //this.failedRemove=false\r\n      let gov1 = INCOMESOURCES.GOV_SURVIVORS_PENSION.Key; //value[this.state.dataInput.Presentations[0].language];\r\n      let gov = dataInput.Sources.find((x) => x.sourceTypeKey === gov1);\r\n\r\n      let gov2 = INCOMESOURCES.GOV_DEATH_BENEFIT.Key; //value[this.state.dataInput.Presentations[0].language];\r\n      let govDB = dataInput.Sources.find((x) => x.sourceTypeKey === gov2);\r\n\r\n      let hasSpouseArray = dataInput.Clients.find(\r\n        (x) => x.memberKey === MEMBER.SPOUSE.Key\r\n      );\r\n      const hasSpouse =\r\n        hasSpouseArray === undefined || hasSpouseArray.length === 0\r\n          ? false\r\n          : true;\r\n\r\n      /* let hasChildArray = dataInput.Clients.find(\r\n        (x) => x.memberKey === MEMBER.CHILD.Key\r\n      );\r\n      const hasChild =\r\n        hasChildArray === undefined || hasChildArray.length === 0\r\n          ? false\r\n          : true; */\r\n\r\n      const ownerID = dataInput.Clients.length > 1 ? 2 : 1;\r\n      \r\n      /* if (gov === undefined || govDB === undefined) {\r\n        const sourceGovSurv = {\r\n          id: dataInput.Sources.length + 1, //sourcesNo + 1,\r\n          sourceTypeKey: INCOMESOURCES.GOV_SURVIVORS_PENSION.Key,\r\n          amount: hasSpouse ? parseInt(dataOutput.govBenefits.cppSurvivor) : 0, // * this.state.dataInput.Clients[QUOTE_CLIENT].Eligibility) / 100,\r\n          startYear: 0,\r\n          duration: 100,\r\n          ownerID: ownerID,\r\n        };\r\n        const sourceGovDB = {\r\n          id: dataInput.Sources.length + 2,\r\n          sourceTypeKey: INCOMESOURCES.GOV_DEATH_BENEFIT.Key,\r\n          amount: parseInt(dataOutput.govBenefits.cppDB),\r\n          startYear: 0,\r\n          duration: 100,\r\n          ownerID: ownerID,\r\n        };\r\n        if (hasSpouse) dataInput.Sources.push(sourceGovSurv); // add at begi\r\n        dataInput.Sources.push(sourceGovDB);\r\n      } else {\r\n        gov.amount = hasSpouse\r\n          ? parseInt(dataOutput.govBenefits.cppSurvivor)\r\n          : 0;\r\n\r\n        govDB.amount = parseInt(dataOutput.govBenefits.cppDB);\r\n      }\r\n       */\r\n      if (gov === undefined) {\r\n        const sourceGovSurv = {\r\n          id: dataInput.Sources.length + 1, //sourcesNo + 1,\r\n          sourceTypeKey: INCOMESOURCES.GOV_SURVIVORS_PENSION.Key,\r\n          amount: hasSpouse ? parseInt(dataOutput.govBenefits.cppSurvivor) : 0, // * this.state.dataInput.Clients[QUOTE_CLIENT].Eligibility) / 100,\r\n          startYear: 0,\r\n          duration: 100,\r\n          ownerID: ownerID,\r\n        };\r\n        if (hasSpouse) dataInput.Sources.push(sourceGovSurv); // add at begi\r\n        \r\n      } else {\r\n        gov.amount = hasSpouse\r\n          ? parseInt(dataOutput.govBenefits.cppSurvivor)\r\n          : 0;\r\n      }\r\n      \r\n      if (govDB === undefined) {\r\n        const sourceGovDB = {\r\n          id: dataInput.Sources.length + 2,\r\n          sourceTypeKey: INCOMESOURCES.GOV_DEATH_BENEFIT.Key,\r\n          amount: parseInt(dataOutput.govBenefits.cppDB),\r\n          startYear: 0,\r\n          duration: 100,\r\n          ownerID: ownerID,\r\n        };\r\n        dataInput.Sources.push(sourceGovDB);\r\n      } else {\r\n        govDB.amount = parseInt(dataOutput.govBenefits.cppDB);\r\n      }\r\n            \r\n      \r\n      const govOrph = INCOMESOURCES.GOV_ORPHANS_BENEFIT.Key;\r\n\r\n      //let govOrphans = this.state.dataInput.Sources.find(x => x.sourceTypeKey=== \"GOV_ORPHANS_BENEFIT\");\r\n      let govOrphans = dataInput.Sources.filter(function (item) {\r\n        return item.sourceTypeKey === govOrph;\r\n      });\r\n\r\n      dataInput = await this.manageOrphanSync(dataInput, dataOutput); //}\r\n    }\r\n    return dataInput;\r\n  };\r\n\r\n  componentDidMount = async () => {\r\n    document.title = APPLET_INA ? \"INA\" : \"EP\";\r\n    this.intervalID = setInterval(this.loadData, 100000);\r\n    localStorage.setItem(\"INAAPIFails\", parseInt(0));\r\n    this.OKToRemove = true;\r\n    const query = queryString.parse(window.location.search);\r\n    if (query.lang === \"fr\") {\r\n      this.changeLang();\r\n      this.openCollapsible[COLLAPSIBLE_CLIENTS].open = COLLAPSIBLES_OPEN;\r\n    }\r\n     \r\n    if (query.QS !== undefined) {\r\n\r\n      await this.handleInitilizeQuoteFromQueryString(query.QS);\r\n    } else {\r\n      await this.handleIntitalFetch(query.lang === \"fr\" ? \"fr\" : \"en\");\r\n    }\r\n    if (query.recover !== undefined) {\r\n      if (query.recover === \"true\") {\r\n        let d = new Date();\r\n        d = d.setHours(d.getHours(), d.getMinutes() - 5, 0, 0);\r\n        const objJSONData = JSON.parse(\r\n          localStorage.getItem(APPLET_INA ? \"INAData\" : \"EP\")\r\n        );\r\n       \r\n        var dRecover = new Date(\r\n          objJSONData.dataPresentations.Presentations[0].valuationDate\r\n        );\r\n        dRecover = new Date(\r\n          objJSONData.dataPresentations.Presentations[0].presentationDate\r\n        );\r\n         if (dRecover > d) {\r\n          await this.loadStorage();\r\n          hideRecover();\r\n        }\r\n      }\r\n    }\r\n    console.log(query)\r\n    if (query.snapimport !== undefined) {\r\n      if (query.snapimport === \"1\") {\r\n        this.setState({SnapImport: true});\r\n      }\r\n    }\r\n   \r\n  };\r\n\r\n  handleIntitalFetch = async (lang) => {\r\n    //let presentation = this.state.dataInput.Presentations[0];\r\n    /* await this.handleUpdatePresentation(presentation, true);\r\n\r\n    await this.govBenefits(); */\r\n\r\n    this.setState({ loading: true });\r\n    let { dataInput, dataOutput } = this.state;\r\n    const newDataInput = _.cloneDeep(dataInput);\r\n    const newDataOutput = _.cloneDeep(dataOutput);\r\n\r\n    let presentation = newDataInput.Presentations[0];\r\n\r\n    // update tax rate\r\n    /* if (\r\n      init === true ||\r\n      newDataInput.Presentations[0].provinceKey !== presentation.provinceKey\r\n    ) */ {\r\n      const tr = await getTaxRate(\r\n        \"PERSONAL_INCOME\",\r\n        presentation.provinceKey\r\n        //convertProvince(presentation.provinceKey, this.state.dataInput.Presentations[0].language)\r\n      );\r\n      presentation.taxRate = (Math.round(tr * 10000) / 100).toFixed(4);\r\n    }\r\n\r\n    \r\n    // update gov bens\r\n    /* if (presentation.provinceKey === \"QC\" || this.state.dataInput.Presentations[0].provinceKey === \"QC\") {\r\n\r\n      await this.handleUpdateGovbenefits(presentation.provinceKey)\r\n      \r\n    } */\r\n\r\n    //await this.handleUpdateGovbenefits(presentation.provinceKey)\r\n    // set new lang if coming from lang change in landing page\r\n    presentation.language = lang;\r\n    newDataInput.Presentations[0] = presentation;\r\n\r\n    //this.AddInitialGovBenefits(newDataInput);\r\n\r\n    // first asset needs to be updated with grid etc\r\n    const newState = await this.reSync_reCalculate_reRender(\r\n      newDataInput,\r\n      newDataOutput,\r\n      //COLLAPSIBLE_ASSETS,\r\n      COLLAPSIBLE_UPDATE_ALL, // make sure initial from file, new default updates all\r\n      1,\r\n      0,\r\n      false // initial case is on set to 1, any change after this removes recover\r\n    );\r\n\r\n    // before eupdating state, resync, recalcuate, update state to re_render\r\n    this.setState({ ...newState, loading: false, initialLoading: false });\r\n\r\n    \r\n  };\r\n\r\n \r\n  handleUpdateOutput = async (\r\n    newStateCandidateInput,\r\n    dataOutput,\r\n    itemToUpdateGroup,\r\n    itemToUpdateID\r\n  ) => {\r\n\r\ntry {\r\n\r\n\r\n    //await this.handleFetchInsuranceNeeds();\r\n    const dataNA = await setUIDataToAPI(newStateCandidateInput);\r\n\r\n    // close results tab to avoid numerous recalcs\r\n    // this.openCollapsible[COLLAPSIBLE_RESULTS].open = false;\r\n\r\n    // main output data\r\n    const data = await handleFetchInsuranceNeedsNew(\r\n      dataNA,\r\n      newStateCandidateInput\r\n    );\r\n    let newStateCandidateOutput = this.populateOutput2(data, dataOutput);\r\n    // assets projs , do all assets if it is from a saved file we need all for RESULTS\r\n    if (\r\n      newStateCandidateOutput.assetProjections !== null &&\r\n      (itemToUpdateGroup === COLLAPSIBLE_ASSETS ||\r\n        itemToUpdateGroup === COLLAPSIBLE_RESULTS ||\r\n        itemToUpdateGroup === COLLAPSIBLE_UPDATE_ALL ||\r\n        newStateCandidateOutput.assetProjections.length <\r\n          newStateCandidateInput.Assets.length)\r\n    )\r\n      newStateCandidateOutput.assetProjections = await this.updateAssetProjectionOutput(\r\n        dataNA,\r\n        newStateCandidateInput,\r\n        newStateCandidateOutput,\r\n        itemToUpdateGroup,\r\n        itemToUpdateID\r\n      );\r\n\r\n    // set new encrpt file that now has calculated ins. Amt\r\n    // need to only pass client & spouse to EP and Client only to others\r\n    let newDataInputClient12 = _.cloneDeep(newStateCandidateInput);\r\n    // remove sources based on child\r\n    newDataInputClient12.Clients.forEach((element) => {\r\n      if(element.memberKey===MEMBER.CHILD.Key || element.memberKey===MEMBER.DEPENDENT_ADULT.Key)\r\n        newDataInputClient12.Sources=newDataInputClient12.Sources.filter((item)=>{return (item.ownerID!==element.id)} )\r\n    })\r\n    newDataInputClient12.Clients=newDataInputClient12.Clients.filter((item)=>{return (item.memberKey===MEMBER.CLIENT.Key || item.memberKey===MEMBER.SPOUSE.Key)}) \r\n \r\n    newStateCandidateOutput.encryptedInputLife1AndSpouse = await this.handleQueryString(\r\n      MODE_ONLY_GET_ENCRYPTED_QS,\r\n      newDataInputClient12,\r\n      newStateCandidateOutput\r\n    );\r\n    \r\n    // need to only pass client who is to be insured and not JLTD\r\n    let newDataInputClient1 = _.cloneDeep(newStateCandidateInput);\r\n    newDataInputClient1.Clients=newDataInputClient1.Clients.filter((item)=>{return item.memberKey===MEMBER.CLIENT.Key}) \r\n    \r\n    newStateCandidateOutput.encryptedInputLife1 = await this.handleQueryString(\r\n      MODE_ONLY_GET_ENCRYPTED_QS,\r\n      newDataInputClient1,\r\n      newStateCandidateOutput\r\n    ); // set this.dataQS\r\n    //newStateCandidateOutput.encryptedInput = this.dataQS;\r\n    // liabs projs\r\n    // aggregate grid proj\r\n    newStateCandidateOutput.aggregateGrid = await this.updateOutputData(\r\n      newStateCandidateInput,\r\n      newStateCandidateOutput\r\n    );\r\n    return newStateCandidateOutput;\r\n  \r\n  } catch (error) {\r\n    return null\r\n  }\r\n  };\r\n  /* end Region */\r\n\r\n  updateAssetProjectionOutput = async (\r\n    dataNA,\r\n    newStateCandidateInput,\r\n    newStateCandidateOutput,\r\n    itemToUpdateGroup,\r\n    itemToUpdateID\r\n  ) => {\r\n    for (let i = 0; i < newStateCandidateInput.Assets.length; i++) {\r\n      const element = newStateCandidateInput.Assets[i];\r\n      if (\r\n        element.id === itemToUpdateID ||\r\n        itemToUpdateGroup === COLLAPSIBLE_RESULTS || itemToUpdateGroup === COLLAPSIBLE_UPDATE_ALL\r\n      ) {\r\n        let projection = await getAssetGridValues(\r\n          dataNA,\r\n          element,\r\n          newStateCandidateInput.Presentations[0].language,\r\n          false\r\n        ); //    this.updateProjection2(element,dataNA)\r\n        let a = newStateCandidateOutput.assetProjections.find(\r\n          (e) => e.id === element.id\r\n        );\r\n        if (a !== undefined) {\r\n          a.grid = projection;\r\n        } else\r\n          newStateCandidateOutput.assetProjections.push({\r\n            id: element.id,\r\n            grid: projection,\r\n          });\r\n\r\n      }\r\n    }\r\n\r\n    return newStateCandidateOutput.assetProjections;\r\n  };\r\n\r\n  populateOutput2 = (dataOutputCandidate, dataOutput) => {\r\n    try {\r\n     // console.log( dataOutput)\r\n      dataOutput.dataInsuranceNeeds = dataOutputCandidate.dataInsuranceNeeds;\r\n      dataOutput.dataCashFlowPersonal =\r\n        dataOutputCandidate.dataCashFlowPersonal.numericValues;\r\n      dataOutput.dataTaxLiability =\r\n        dataOutputCandidate.dataTaxLiability.numericValues;\r\n      dataOutput.dataCashFlowGov =\r\n        dataOutputCandidate.dataCashFlowGov.numericValues;\r\n      dataOutput.dataCashFlowNeeds =\r\n        dataOutputCandidate.dataCashFlowNeeds.numericValues;\r\n      dataOutput.dataNAAges = dataOutputCandidate.dataNAAges.numericValues;\r\n      dataOutput.dataShortfall =\r\n        dataOutputCandidate.dataShortfall.numericValues;\r\n      dataOutput.govBenefits.cppSurvivor = dataOutputCandidate.cpp;\r\n      dataOutput.govBenefits.cppDB = dataOutputCandidate.cppDB;\r\n      dataOutput.govBenefits.cppOrphan = dataOutputCandidate.orphan;\r\n      dataOutput.probate = dataOutputCandidate.probate;\r\n      dataOutput.lifeExpectancy.client = dataOutputCandidate.lifeExpClient;\r\n      dataOutput.lifeExpectancy.spouse = dataOutputCandidate.lifeExp;\r\n      dataOutput.lifeExpectancy.joint = dataOutputCandidate.lifeExpJLTD;\r\n      dataOutput.encryptedInputLife1AndSpouse = dataOutputCandidate.encryptedInputLife1AndSpouse;\r\n      dataOutput.encryptedInputLife1=dataOutputCandidate.encryptedInputLife1;\r\n      return dataOutput;\r\n    } catch (error) {\r\n      alert(\"Could not connect to the calculation engine API\");\r\n      return dataOutput;\r\n    }\r\n  };\r\n\r\n  populateOutput = async (data) => {\r\n    let dataOutput = this.state.dataOutput;\r\n\r\n    dataOutput.dataInsuranceNeeds = data.dataInsuranceNeeds;\r\n    dataOutput.dataCashFlowPersonal = data.dataCashFlowPersonal.numericValues;\r\n    dataOutput.dataTaxLiability = data.dataTaxLiability.numericValues;\r\n    dataOutput.dataCashFlowGov = data.dataCashFlowGov.numericValues;\r\n    dataOutput.dataCashFlowNeeds = data.dataCashFlowNeeds.numericValues;\r\n    dataOutput.dataNAAges = data.dataNAAges.numericValues;\r\n    dataOutput.dataShortfall = data.dataShortfall.numericValues;\r\n    dataOutput.govBenefits.cppSurvivor = data.cpp;\r\n    dataOutput.govBenefits.cppDB = data.cppDB;\r\n    dataOutput.govBenefits.cppOrphan = data.orphan;\r\n    dataOutput.lifeExpectancy.client = data.lifeExpClient;\r\n    dataOutput.lifeExpectancy.spouse = data.lifeExp;\r\n    dataOutput.lifeExpectancy.joint = data.lifeExpJLTD;\r\n\r\n    this.setState({ dataOutput: dataOutput });\r\n  };\r\n\r\n  handleQueryString = async (mode, dataInput, dataOutput) => {\r\n    const lang = dataInput.Presentations[0].language;\r\n    const insuranceNeed =\r\n      dataOutput.dataInsuranceNeeds[\r\n        dataInput.Presentations[0].periodOption\r\n      ].Value;\r\n    let dataNA = await setUIDataToAPI(dataInput, insuranceNeed);\r\n    let data = await handleFetchQueryString(dataNA);\r\n    if (data !== undefined) {\r\n      this.dataQS = data;\r\n      if (mode === MODE_ONLY_GET_ENCRYPTED_QS) return data;\r\n      else if (mode === MODE_SAVE) this.setState({ showMsg: true });\r\n      else if (mode === MODE_EMAIL) {\r\n        let url =\r\n          \"mailto: ?subject= \" +\r\n          (APPLET_INA ? TITLES[lang].appletINA : TITLES[lang].appletEP) +\r\n          \" &body= \" +\r\n          (EMAIL[lang].body +\r\n            \".%0D%0A\" +\r\n            appSiteParent +\r\n            \"?applet=EP&QS=\" +\r\n            this.dataQS);\r\n\r\n        const ft =\r\n          appSiteParent +\r\n          \"/?\" +\r\n          [\"applet=\" + DISPLAY_NAME, \"QS=\" + this.dataQS].join(\"&\");\r\n        url =\r\n          \"mailto: ?subject= \" +\r\n          (APPLET_INA ? TITLES[lang].appletINA : TITLES[lang].appletEP) +\r\n          \" &body= \" +\r\n          EMAIL[lang].body +\r\n          \".%0D%0A\" +\r\n          encodeURIComponent(ft);\r\n\r\n        \r\n        window.location.href = url;\r\n      }\r\n    }\r\n  };\r\n\r\n  handleInitilizeQuoteFromQueryString = async (savedINA_QS) => {\r\n   // console.log(savedINA_QS)\r\n    const data = await handleFetchINADataFromQueryString(savedINA_QS);\r\n    let objJSONData = await loadSavedDataToUI(data, this.state.dataInput);\r\n   \r\n    // put loaded data to quote and show\r\n    this.updateStateFromJSon(objJSONData);\r\n  };\r\n\r\n  handleUpdateClient = async (client) => {\r\n    // keep render to just once until or if needed. this also avoids flshing page before final render\r\n\r\n    // replacing spouse with child\r\n    /* const replaceSpouseWithChild=client.memberKey === MEMBER.CHILD.Key && this.state.dataInput.Clients[client.id-1].memberKey === MEMBER.SPOUSE.Key \r\n    if (replaceSpouseWithChild)\r\n    {\r\n      client.id=client.id+1;\r\n      await this.handleAddClient(client);\r\n      //client.id=client.id-1;\r\n      this.handleRemoveClient(client.id-1);\r\n\r\n    }\r\n    else */\r\n    {\r\n      this.setState({ loading: true });\r\n\r\n      const { dataOutput, dataInput } = this.state;\r\n      let newDataInput = _.cloneDeep(dataInput);\r\n      const newDataOutput = _.cloneDeep(dataOutput);\r\n    \r\n      if (client.Age > client.retirementAge)\r\n        client.retirementAge = client.Age + 1;\r\n      const redoAll =\r\n        client.memberKey !== newDataInput.Clients[QUOTE_CLIENT].memberKey ||\r\n        client.Age !== newDataInput.Clients[QUOTE_CLIENT].Age ||\r\n        client.Eligibility !== newDataInput.Clients[QUOTE_CLIENT].Eligibility ||\r\n        client.avgTaxRate !== newDataInput.Clients[QUOTE_CLIENT].avgTaxRate ||\r\n        (newDataInput.Clients.count > 1 &&\r\n          (client.Age !== newDataInput.Clients[QUOTE_SPOUSE].Age ||\r\n            client.avgTaxRate !==\r\n              newDataInput.Clients[QUOTE_SPOUSE].avgTaxRate));\r\n      newDataInput.Clients[client.id - 1] = client;\r\n\r\n      const newState = await this.reSync_reCalculate_reRender(\r\n        newDataInput,\r\n        newDataOutput,\r\n        redoAll ? COLLAPSIBLE_UPDATE_ALL : COLLAPSIBLE_CLIENTS, // need to redo a\r\n        client.id\r\n      );\r\n      this.setState({ ...newState, loading: false });\r\n    }\r\n  };\r\n\r\n  reSync_reCalculate_reRender = async (\r\n    newStateCandidateInput,\r\n    dataOutput,\r\n    itemToUpdateGroup,\r\n    itemToUpdateID,\r\n    debounce,\r\n    saveToStorage\r\n  ) => {\r\n\r\ntry {\r\n  \r\n    // reSync\r\n    newStateCandidateInput = await this.syncPanelsValues2(\r\n      newStateCandidateInput,\r\n      itemToUpdateGroup\r\n    );\r\n\r\n    let newStateCandidateOutput;\r\n    \r\n    // reCalculate\r\n    if (debounce)\r\n      newStateCandidateOutput = await this.debounceHandleUpdateOutput(\r\n        newStateCandidateInput,\r\n        dataOutput,\r\n        itemToUpdateGroup,\r\n        itemToUpdateID\r\n      );\r\n    else\r\n      newStateCandidateOutput = await this.handleUpdateOutput(\r\n        newStateCandidateInput,\r\n        dataOutput,\r\n        itemToUpdateGroup,\r\n        itemToUpdateID\r\n      );\r\n\r\n    newStateCandidateInput = await this.govBenefitsSync(\r\n      newStateCandidateInput,\r\n      newStateCandidateOutput\r\n    );\r\n\r\n    newStateCandidateInput = await this.probateSync(\r\n      newStateCandidateInput,\r\n      newStateCandidateOutput\r\n    );\r\n\r\n\r\n    if (saveToStorage !== false) this.debounceSaveToStorage();\r\n    return {\r\n      dataInput: newStateCandidateInput,\r\n      dataOutput: newStateCandidateOutput,\r\n    };\r\n  } catch (error) {\r\n  \r\n  }\r\n };\r\n\r\n  updateOutputData = async (\r\n    newStateCandidateInput,\r\n    newStateCandidateOutput\r\n  ) => {\r\n    if (true) {\r\n      //APPLET_INA) {\r\n      /* let insNeed = 0;\r\n      let insNeedRet = 0;\r\n      let insNeedLE = 0;\r\n      let insNeedEAge = 0;\r\n      let insNeedLE3 = 0; */\r\n      let dataGov;\r\n      let dataAges;\r\n      let dataPCV;\r\n      let dataNeed;\r\n      let dataShort;\r\n\r\n      //    let hasSurivor = false;\r\n\r\n      let aggregateGrid;\r\n\r\n      /*       const spKey = APPLET_INA ? MEMBER.SPOUSE.Key : MEMBER.CLIENT.Key;\r\n            let Survivor = this.state.dataInput.Clients.find(x => x.memberKey === spKey);\r\n      \r\n            if (Survivor !== undefined) {\r\n              hasSurivor = true;\r\n            }\r\n       */\r\n      const Survivor = newStateCandidateInput.Clients[this.survIdx]; //.find(x => x.memberKey === spKey);\r\n      const Survivors = newStateCandidateInput.Clients.filter((item) => {\r\n        return item.id > 1;\r\n      });\r\n\r\n      /* if (Survivor !== undefined) {\r\n        hasSurivor = true;\r\n      }\r\n */\r\n      const insuranceNeeds = newStateCandidateOutput.dataInsuranceNeeds;\r\n      const periodOption = newStateCandidateInput.Presentations[0].periodOption;\r\n\r\n      const inputOutputIsValid =\r\n        insuranceNeeds.length > 0 &&\r\n        newStateCandidateOutput.dataNAAges !== undefined &&\r\n        Survivor !== undefined;\r\n\r\n      if (inputOutputIsValid) {\r\n        /* if (newStateCandidateOutput.dataInsuranceNeeds.length > 0) {\r\n          insNeed =\r\n            periodOption === DISPLAY_RETIREMENT\r\n              ? insuranceNeeds[DISPLAY_RETIREMENT].Value\r\n              : periodOption === DISPLAY_LIFEEXP\r\n              ? insuranceNeeds[DISPLAY_LIFEEXP].Value\r\n              : periodOption === DISPLAY_LIFEEXP_PLUS_3\r\n              ? getINA_LifeExp_Plus_yrs(\r\n                  insuranceNeeds[DISPLAY_LIFEEXP].Value,\r\n                  newStateCandidateOutput.dataShortfall,\r\n                  newStateCandidateInput.Presentations[0].invRate,\r\n                  newStateCandidateOutput.lifeExpectancy.spouse,\r\n                  3\r\n                )\r\n              : insuranceNeeds[DISPLAY_ENDAGE].Value;\r\n          insNeedRet = insuranceNeeds[DISPLAY_RETIREMENT].Value;\r\n          insNeedLE = insuranceNeeds[DISPLAY_LIFEEXP].Value;\r\n          insNeedEAge = insuranceNeeds[DISPLAY_ENDAGE].Value;\r\n          insNeedLE3 =\r\n            newStateCandidateOutput.dataShortfall !== undefined\r\n              ? getINA_LifeExp_Plus_yrs(\r\n                  insuranceNeeds[DISPLAY_LIFEEXP].Value,\r\n                  newStateCandidateOutput.dataShortfall,\r\n                  newStateCandidateInput.Presentations[0].invRate,\r\n                  newStateCandidateOutput.lifeExpectancy.joint,\r\n                  3\r\n                )\r\n              : insNeed;\r\n        } */\r\n\r\n        const projYears = familyProjectionYears(\r\n          newStateCandidateInput.Clients,\r\n          periodOption,\r\n          newStateCandidateOutput.lifeExpectancy,\r\n          insuranceNeeds,\r\n          newStateCandidateOutput.dataShortfall,\r\n          newStateCandidateInput.Presentations[0]\r\n        );\r\n        const insNeed = projYears.insuranceNeed;\r\n        const insNeedRet = projYears.insuranceNeedToRet;\r\n        const insNeedLE = projYears.insuranceNeedToLE;\r\n        const insNeedLE3 = projYears.insuranceNeedToLE3;\r\n        const insNeedEAge = projYears.insuranceNeedToEnd;\r\n        const singleFamily = isSingleFamily(newStateCandidateInput.Clients);\r\n        const projectEnd = projYears.projectionEnd;\r\n        const noProjectYrs = projYears.noProjectionYrs;\r\n        const survAge = projYears.survivorAge;\r\n        if (singleFamily) {\r\n          // use years\r\n          newStateCandidateOutput.dataNAAges = [];\r\n          for (let i = 0; i < noProjectYrs; i++)\r\n            newStateCandidateOutput.dataNAAges.push(i + 1);\r\n          \r\n        }\r\n        /*     let projectEnd = 65;\r\n        let noProjectYrs = 0;\r\n        let survAge;\r\n\r\n        if (this.survIdx !== -1 && this.survIdx !== undefined) {\r\n          projectEnd =\r\n            periodOption === DISPLAY_RETIREMENT\r\n              ? newStateCandidateInput.Clients[this.survIdx].retirementAge\r\n              : periodOption === DISPLAY_LIFEEXP\r\n              ? newStateCandidateOutput.lifeExpectancy.spouse +\r\n                newStateCandidateInput.Clients[this.survIdx].Age\r\n              : periodOption === DISPLAY_ANALYSIS\r\n              ? newStateCandidateOutput.lifeExpectancy.joint +\r\n                newStateCandidateInput.Clients[this.survIdx].Age +\r\n                3\r\n              : 99;\r\n          noProjectYrs =\r\n            projectEnd - newStateCandidateInput.Clients[this.survIdx].Age;\r\n          survAge = newStateCandidateInput.Clients[this.survIdx].Age;\r\n        } else survAge = newStateCandidateInput.Clients[QUOTE_CLIENT].Age;\r\n */\r\n        dataAges = newStateCandidateOutput.dataNAAges.slice(0, noProjectYrs);\r\n\r\n        dataGov = newStateCandidateOutput.dataCashFlowGov.slice(\r\n          0,\r\n          noProjectYrs\r\n        );\r\n        dataPCV = newStateCandidateOutput.dataCashFlowPersonal.slice(\r\n          0,\r\n          noProjectYrs\r\n        );\r\n        dataNeed = newStateCandidateOutput.dataCashFlowNeeds.slice(\r\n          0,\r\n          noProjectYrs\r\n        );\r\n        dataShort = newStateCandidateOutput.dataShortfall.slice(\r\n          0,\r\n          noProjectYrs\r\n        );\r\n\r\n        if (APPLET_INA) {\r\n          aggregateGrid = await getINAGridData(\r\n            insNeed,\r\n            insNeedRet,\r\n            insNeedLE,\r\n            dataPCV,\r\n            //  Survivor,\r\n            Survivors,\r\n            dataNeed,\r\n            dataGov,\r\n            dataShort,\r\n            newStateCandidateInput.Presentations[0].inflation,\r\n            newStateCandidateInput.Presentations[0].language,\r\n            newStateCandidateInput.Presentations[0].invRate,\r\n            newStateCandidateInput.Sources,\r\n            newStateCandidateOutput.govBenefits.cppDB *\r\n              (1 -\r\n                newStateCandidateInput.Clients[QUOTE_CLIENT].avgTaxRate / 100)\r\n          );\r\n        } else if (APPLET_EP) {\r\n          aggregateGrid = await getEPGridData(\r\n            noProjectYrs,\r\n            newStateCandidateInput\r\n          );\r\n        }\r\n      }\r\n      return aggregateGrid;\r\n    }\r\n  };\r\n\r\n  switchClients = async () => {\r\n    if (\r\n      this.state.dataInput.Clients.find(\r\n        (x) => x.memberKey === MEMBER.SPOUSE.Key\r\n      ) !== undefined\r\n    ) {\r\n      /*  let data2 = this.state.dataInput;\r\n      let client1 = data2.Clients[QUOTE_CLIENT];\r\n      data2.Clients[QUOTE_CLIENT] = data2.Clients[QUOTE_SPOUSE];\r\n      data2.Clients[QUOTE_SPOUSE] = client1;\r\n      // keep member\r\n      data2.Clients[QUOTE_CLIENT].memberKey = MEMBER.CLIENT.Key;\r\n      data2.Clients[QUOTE_SPOUSE].memberKey = MEMBER.SPOUSE.Key;\r\n */\r\n\r\n      this.setState({ loading: true });\r\n/* \r\n      const { dataOutput, dataInput } = this.state;\r\n      const newDataInput = _.cloneDeep(dataInput);\r\n      const newDataOutput = _.cloneDeep(dataOutput);\r\n      let client1 = newDataInput.Clients[QUOTE_CLIENT];\r\n      newDataInput.Clients[QUOTE_CLIENT] = newDataInput.Clients[QUOTE_SPOUSE];\r\n      newDataInput.Clients[QUOTE_SPOUSE] = client1;\r\n      newDataInput.Assets.forEach((element) => {\r\n        if (\r\n          element.ownerKey === ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key ||\r\n          element.ownerKey === ASSET_OWNERSHIP_ACTION.CLIENT_ROLLOVER.Key\r\n        ) {\r\n          element.ownerKey = ASSET_OWNERSHIP_ACTION.SPOUSE.Key;\r\n        } else if (element.ownerKey === ASSET_OWNERSHIP_ACTION.SPOUSE.Key) {\r\n          element.ownerKey =\r\n            element.assetTypeKey === ASSETS.LIFE_INSURANCE.Key\r\n              ? ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key\r\n              : ASSET_OWNERSHIP_ACTION.CLIENT_ROLLOVER.Key;\r\n        }\r\n      });\r\n      newDataInput.Liabilitys.forEach((element) => {\r\n        if (element.ownerID === 0) {\r\n          element.ownerID = QUOTE_SPOUSE + 1;\r\n        }\r\n      });\r\n\r\n      newDataInput.Liabilitys.forEach((element) => {\r\n        if (element.ownerID === QUOTE_CLIENT + 1) {\r\n          element.ownerID = 0;\r\n        }\r\n        if (element.ownerID === QUOTE_SPOUSE + 1) {\r\n          element.ownerID = QUOTE_CLIENT + 1;\r\n        }\r\n      });\r\n      newDataInput.Liabilitys.forEach((element) => {\r\n        if (element.ownerID === 0) {\r\n          element.ownerID = QUOTE_SPOUSE + 1;\r\n        }\r\n      });\r\n\r\n      // keep member\r\n      newDataInput.Clients[QUOTE_CLIENT].memberKey = MEMBER.CLIENT.Key;\r\n      newDataInput.Clients[QUOTE_SPOUSE].memberKey = MEMBER.SPOUSE.Key;\r\n\r\n      newDataInput.Clients[QUOTE_CLIENT].id = QUOTE_CLIENT + 1;\r\n      newDataInput.Clients[QUOTE_SPOUSE].id = QUOTE_SPOUSE + 1;\r\n\r\n      const newState = await this.reSync_reCalculate_reRender(\r\n        newDataInput,\r\n        newDataOutput,\r\n        COLLAPSIBLE_RESULTS, // to updateAll\r\n        0\r\n      ); */\r\n\r\n      const newState = await this.getSwitchClientsState();\r\n\r\n      this.setState({ ...newState, loading: false });\r\n\r\n      /* \r\n      data2 = this.syncPanelsValues2(data2);\r\n      this.setState({ dataInput: data2 }, () =>\r\n        this.waitForSetStateCallback(0)\r\n      ); */\r\n    }\r\n  };\r\n\r\n\r\n  getSwitchClientsState= async ()=>{\r\n  const { dataOutput, dataInput } = this.state;\r\n  const newDataInput = _.cloneDeep(dataInput);\r\n  const newDataOutput = _.cloneDeep(dataOutput);\r\n  let client1 = newDataInput.Clients[QUOTE_CLIENT];\r\n  newDataInput.Clients[QUOTE_CLIENT] = newDataInput.Clients[QUOTE_SPOUSE];\r\n  newDataInput.Clients[QUOTE_SPOUSE] = client1;\r\n  newDataInput.Assets.forEach((element) => {\r\n    if (\r\n      element.ownerKey === ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key ||\r\n      element.ownerKey === ASSET_OWNERSHIP_ACTION.CLIENT_ROLLOVER.Key\r\n    ) {\r\n      element.ownerKey = ASSET_OWNERSHIP_ACTION.SPOUSE.Key;\r\n    } else if (element.ownerKey === ASSET_OWNERSHIP_ACTION.SPOUSE.Key) {\r\n      element.ownerKey =\r\n        element.assetTypeKey === ASSETS.LIFE_INSURANCE.Key\r\n          ? ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key\r\n          : ASSET_OWNERSHIP_ACTION.CLIENT_ROLLOVER.Key;\r\n    }\r\n  });\r\n  newDataInput.Liabilitys.forEach((element) => {\r\n    if (element.ownerID === 0) {\r\n      element.ownerID = QUOTE_SPOUSE + 1;\r\n    }\r\n  });\r\n\r\n  newDataInput.Liabilitys.forEach((element) => {\r\n    if (element.ownerID === QUOTE_CLIENT + 1) {\r\n      element.ownerID = 0;\r\n    }\r\n    if (element.ownerID === QUOTE_SPOUSE + 1) {\r\n      element.ownerID = QUOTE_CLIENT + 1;\r\n    }\r\n  });\r\n  newDataInput.Liabilitys.forEach((element) => {\r\n    if (element.ownerID === 0) {\r\n      element.ownerID = QUOTE_SPOUSE + 1;\r\n    }\r\n  });\r\n\r\n  // keep member\r\n  newDataInput.Clients[QUOTE_CLIENT].memberKey = MEMBER.CLIENT.Key;\r\n  newDataInput.Clients[QUOTE_SPOUSE].memberKey = MEMBER.SPOUSE.Key;\r\n\r\n  newDataInput.Clients[QUOTE_CLIENT].id = QUOTE_CLIENT + 1;\r\n  newDataInput.Clients[QUOTE_SPOUSE].id = QUOTE_SPOUSE + 1;\r\n\r\n  const newState = await this.reSync_reCalculate_reRender(\r\n    newDataInput,\r\n    newDataOutput,\r\n    COLLAPSIBLE_UPDATE_ALL, // to updateAll\r\n    0\r\n  );\r\n\r\n  return newState;\r\n}\r\n\r\n\r\n  handleUpdateAsset = async (asset) => {\r\n\r\n    this.setState({ loading: true });\r\n    const { dataInput, dataOutput } = this.state;\r\n    let newDataInput = _.cloneDeep(dataInput);\r\n    const newDataOutput = _.cloneDeep(dataOutput);\r\n    if (asset.assetTypeKey === ASSETS.RRSP_RRIF.Key) {\r\n      if(APPLET_EP)\r\n      { \r\n        if(asset.ownerKey===ASSET_OWNERSHIP_ACTION.SPOUSE.Key && newDataInput.Clients.length===1 )\r\n          asset.ownerKey=ASSET_OWNERSHIP_ACTION.CLIENT.Key // if no spouse\r\n        if(asset.assetTypeKey===ASSETS.RRSP_RRIF.Key)\r\n        {\r\n          if(asset.ownerKey!==ASSET_OWNERSHIP_ACTION.SPOUSE.Key)\r\n            asset.ownerKey=ASSET_OWNERSHIP_ACTION.CLIENT.Key\r\n        }\r\n      }\r\n      asset = this.manageRRIFBounds(asset, newDataInput.Clients);\r\n      newDataInput = this.addRRIFSource2(newDataInput, asset);\r\n    }\r\n    newDataInput.Assets[asset.id - 1] = asset;\r\n\r\n    const newState = await this.reSync_reCalculate_reRender(\r\n      newDataInput,\r\n      newDataOutput,\r\n      COLLAPSIBLE_ASSETS,\r\n      asset.id\r\n    );\r\n    this.setState({ ...newState, loading: false });\r\n      \r\n    /* this.setState(\r\n      { dataInput: dataA, loading: true },\r\n      () => this.waitForSetStateCallback(0)\r\n    ); */\r\n    //await this.updateProjection(asset)\r\n  };\r\n\r\n  manageRRIFBounds = (asset, clients) => {\r\n    const age =\r\n      asset.ownerKey === ASSET_OWNERSHIP_ACTION.SPOUSE.Key\r\n        ? clients[QUOTE_SPOUSE].Age\r\n        : clients[QUOTE_CLIENT].Age;\r\n    if (asset.RRIFStartAge < age) asset.RRIFStartAge = age;\r\n    else if (asset.RRIFStartAge > RRIF_LAST_START_AGE)\r\n      asset.RRIFStartAge = RRIF_LAST_START_AGE;\r\n    return asset;\r\n  };\r\n \r\n  handleUpdateLiability = async (liability) => {\r\n    this.setState({ loading: true });\r\n    let { dataInput, dataOutput } = this.state;\r\n    const newDataInput = _.cloneDeep(dataInput);\r\n    const newDataOutput = _.cloneDeep(dataOutput);\r\n    newDataInput.Liabilitys[liability.id - 1] = liability;\r\n\r\n    const redoAll = liability.liabTypeKey === LIABILITIES.CHARITABLE_GIFTS.Key?true:false\r\n    // before updating state, resync, recalcuate, then update state to re_render\r\n    let newState = await this.reSync_reCalculate_reRender(\r\n      newDataInput,\r\n      newDataOutput,\r\n      redoAll ? COLLAPSIBLE_UPDATE_ALL : COLLAPSIBLE_LIABS, //updateAll if liab is charitable\r\n      liability.id\r\n    );\r\n   \r\n    this.setState({ ...newState, loading: false });\r\n\r\n    \r\n  };\r\n\r\n  \r\n  handleUpdateSource = async (source) => {\r\n    this.setState({ loading: true });\r\n    let { dataInput, dataOutput } = this.state;\r\n    const newDataInput = _.cloneDeep(dataInput);\r\n    const newDataOutput = _.cloneDeep(dataOutput);\r\n    newDataInput.Sources[source.id - 1] = source;\r\n\r\n    // before updating state, resync, recalcuate, then update state to re_render\r\n    const newState = await this.reSync_reCalculate_reRender(\r\n      newDataInput,\r\n      newDataOutput,\r\n      COLLAPSIBLE_SOURCES,\r\n      source.id\r\n    );\r\n    this.setState({ ...newState, loading: false, failedRemove: false });\r\n  };\r\n\r\n  handleUpdateNeed = async (need) => {\r\n    this.setState({ loading: true });\r\n    let { dataInput, dataOutput } = this.state;\r\n    const newDataInput = _.cloneDeep(dataInput);\r\n    const newDataOutput = _.cloneDeep(dataOutput);\r\n    newDataInput.Needs[need.id - 1] = need;\r\n\r\n    // before updating state, resync, recalcuate, then update state to re_render\r\n    const newState = await this.reSync_reCalculate_reRender(\r\n      newDataInput,\r\n      newDataOutput,\r\n      COLLAPSIBLE_NEEDS,\r\n      need.id\r\n    );\r\n    this.setState({ ...newState, loading: false });\r\n\r\n    //this.setState({ dataInput: data2 }, () => this.waitForSetStateCallback(0));\r\n  };\r\n\r\n  handleUpdatePresentation = async (presentation) => {\r\n    this.setState({ loading: true });\r\n    let { dataInput, dataOutput } = this.state;\r\n    let newDataInput = _.cloneDeep(dataInput);\r\n    const newDataOutput = _.cloneDeep(dataOutput);\r\n\r\n    // update tax rate\r\n    if (\r\n      //init === true ||\r\n      newDataInput.Presentations[0].provinceKey !== presentation.provinceKey\r\n    )  {\r\n      const tr = await getTaxRate(\r\n        \"PERSONAL_INCOME\",\r\n        presentation.provinceKey\r\n        //convertProvince(presentation.provinceKey, this.state.dataInput.Presentations[0].language)\r\n      );\r\n      presentation.taxRate = (Math.round(tr * 10000) / 100).toFixed(4);\r\n    }\r\n\r\n    const pdf = await handleFetchPDF();\r\n    //  console.log(pdf)\r\n\r\n    // update gov bens\r\n    /* if (presentation.provinceKey === \"QC\" || this.state.dataInput.Presentations[0].provinceKey === \"QC\") {\r\n\r\n      await this.handleUpdateGovbenefits(presentation.provinceKey)\r\n      \r\n    } */\r\n\r\n    // update probate\r\n    /* newDataInput = await this.probateSync(\r\n      newDataInput,\r\n      newDataOutput\r\n    ); */\r\n\r\n    const redoAll = true; //presentation.taxRate !== newDataInput.Presentations[0].taxRate || presentation.inflation !== newDataInput.Presentations[0].inflation\r\n\r\n    let debounce = false;\r\n    if (\r\n      newDataInput.Presentations[0].designedBy !== presentation.designedBy ||\r\n      newDataInput.Presentations[0].designedFor !== presentation.designedFor ||\r\n      newDataInput.Presentations[0].notes !== presentation.notes\r\n    )\r\n      debounce = true;\r\n\r\n    newDataInput.Presentations[presentation.id - 1] = presentation;\r\n    const newState = await this.reSync_reCalculate_reRender(\r\n      newDataInput,\r\n      newDataOutput,\r\n      redoAll ? COLLAPSIBLE_UPDATE_ALL : COLLAPSIBLE_PRESENTATION, //updateAll if tax rate or inf rate change\r\n      presentation.id\r\n    );\r\n\r\n    // before eupdating state, resync, recalcuate, update state to re_render\r\n    this.setState({ ...newState, loading: false });\r\n    // use debounce re Notes, des for and des by\r\n    //  data2 = this.syncPanelsValues2(data2);\r\n    //  this.setState({ dataInput: data2 }, () => this.waitForSetStateCallback(0, debounce));\r\n    //this.syncPanelsValues2(2);\r\n    // await this.govBenefits();\r\n  };\r\n\r\n  saveAsDefaultCase = (clear) => {\r\n    // save as default if needed\r\n    const storageName=DEFAULT_QUOTE;\r\n    if(clear)\r\n    {\r\n      localStorage.removeItem(storageName)\r\n     \r\n    }\r\n    else{\r\n    localStorage.setItem(storageName,\r\n      JSON.stringify(this.state.dataInput)\r\n    );\r\n      \r\n  }\r\n    \r\n  };\r\n\r\n  // this updates all and changes languge for all grids\r\n  handleUpdatePresentationChange = async (presentation, noRecalc) => {\r\n    if (noRecalc) {\r\n      this.setState((prevState) => ({\r\n        dataInput: {\r\n          ...prevState.dataInput,\r\n          Presentations: [\r\n            {\r\n              ...prevState.dataInput.Presentations[0],\r\n              resultsOption: presentation.resultsOption,\r\n              periodOption: presentation.periodOption,\r\n            },\r\n          ],\r\n        },\r\n      }));\r\n    } else {\r\n      this.setState({ loading: true });\r\n      let { dataInput, dataOutput } = this.state;\r\n      const newDataInput = _.cloneDeep(dataInput);\r\n      const newDataOutput = _.cloneDeep(dataOutput);\r\n\r\n      newDataInput.Presentations[0] = presentation;\r\n\r\n      const newState = await this.reSync_reCalculate_reRender(\r\n        newDataInput,\r\n        newDataOutput,\r\n        COLLAPSIBLE_RESULTS,\r\n        0,\r\n        false,\r\n        false\r\n      );\r\n\r\n      // before eupdating state, resync, recalcuate, update state to re_render\r\n      this.setState({ ...newState, loading: false });\r\n    }\r\n  };\r\n\r\n  handleAddClient = async (client) => {\r\n    this.setState({ loading: true });\r\n    const { dataInput, dataOutput } = this.state;\r\n    let newDataInput = _.cloneDeep(dataInput);\r\n    const newDataOutput = _.cloneDeep(dataOutput);\r\n    newDataInput.Clients.push(client);\r\n    //if (client.memberKey === MEMBER.CHILD.Key)\r\n    //newDataInput = this.manageAddingChild(newDataInput);\r\n    // resync, recalcuate, then update state to re_render\r\n    // if has salary, add source\r\n\r\n    newDataInput = await this.manageAddingClientWithIncome(\r\n      newDataInput,\r\n      client\r\n    );\r\n    \r\n    // adding a client to EP changes to JLTD and existing assets are affected\r\n    \r\n    const newState = await this.reSync_reCalculate_reRender(\r\n      newDataInput,\r\n      newDataOutput,\r\n      APPLET_EP? COLLAPSIBLE_UPDATE_ALL:COLLAPSIBLE_CLIENTS,\r\n      APPLET_EP? 0:client.id\r\n    );\r\n    this.setState({ ...newState, loading: false });\r\n    //this.setState({ dataInput: data2 }, () => this.manageAddingChild());\r\n    \r\n  };\r\n\r\n  manageAddingChild = (input) => {\r\n    input = this.manageEducation2(input);\r\n    input = this.manageOrphan2(input);\r\n    return input;\r\n  };\r\n\r\n  manageAddingClientWithIncome = async (newDataInput, client) => {\r\n    let source = createDefaultSource(newDataInput.Sources.length + 1);\r\n    source.amount = client.Income;\r\n    source.duration = client.retirementAge - client.Age;\r\n    source.ownerID = client.id;\r\n    source.taxRate = client.avgTaxRate;\r\n    newDataInput.Sources.push(source);\r\n\r\n    return newDataInput;\r\n  };\r\n\r\n  manageRemovingClientWithIncome = async (dataInput) => {\r\n    // remove all salaryPct sources and re-add\r\n    dataInput.Sources = dataInput.Sources.filter(\r\n      (item) => item.sourceTypeKey !== INCOMESOURCES.SURVIVORS_INCOME.Key\r\n    );\r\n    dataInput.Clients.forEach(async (element) => {\r\n      if (element.memberKey !== MEMBER.CLIENT.Key) {\r\n        dataInput = await this.manageAddingClientWithIncome(dataInput, element);\r\n      }\r\n    });\r\n\r\n    return dataInput;\r\n  };\r\n\r\n  /*  manageAddingChild = () => {\r\n    this.manageEducation();\r\n    this.manageOrphan();\r\n    this.waitForSetStateCallback(0);\r\n  }; */\r\n\r\n  handleAddAsset = async (asset) => {\r\n    this.setState({ loading: true });\r\n\r\n    const { dataInput, dataOutput } = this.state;\r\n    let newDataInput = _.cloneDeep(dataInput);\r\n    let newDataOutput = _.cloneDeep(dataOutput);\r\n    if (asset === undefined) {\r\n      asset = createDefaultAsset(1);\r\n    }\r\n\r\n    //  dataInput.assetsNo++;\r\n    newDataInput.Assets.push(asset);\r\n   \r\n\r\n    // resync, recalcuate, then update state to re_render\r\n    const newState = await this.reSync_reCalculate_reRender(\r\n      newDataInput,\r\n      newDataOutput,\r\n      COLLAPSIBLE_ASSETS,\r\n      asset.id\r\n    );\r\n    this.setState({ ...newState, loading: false });\r\n\r\n    /*     this.setState({ dataInput: dataInput, loading: true }, () =>\r\n      this.waitForSetStateCallback(0) // no need to save to storage when default is added\r\n    );\r\n */ //await this.updateProjection(asset)\r\n  };\r\n\r\n  updateProjection = async (asset) => {\r\n    /*  updateProjection = async (asset) => {\r\n         let dataOA = this.state.output\r\n      let dataNA = await setUIDataToAPI(this.state);\r\n      dataOA.assetProjection = await getAssetGridValues(dataNA, asset, this.state.dataInput.Presentations[0].language, false)\r\n      this.setState({ output: dataOA, loading: false }); */\r\n    let dataInput = this.state.dataInput;\r\n\r\n    const insuranceNeed = this.state.dataOutput.dataInsuranceNeeds[\r\n      dataInput.Presentations[0].periodOption\r\n    ].Value;\r\n    let dataNA = await setUIDataToAPI(this.state.dataInput, insuranceNeed);\r\n    dataInput.Assets[asset.id - 1].projection = await getAssetGridValues(\r\n      dataNA,\r\n      asset,\r\n      this.state.dataInput.Presentations[0].language,\r\n      false\r\n    );\r\n    \r\n    this.setState({ dataInput: dataInput, loading: false });\r\n  };\r\n\r\n  handleAddLiability = async (Liab) => {\r\n    this.setState({ loading: true });\r\n    const { dataInput, dataOutput } = this.state;\r\n    const newDataInput = _.cloneDeep(dataInput);\r\n    const newDataOutput = _.cloneDeep(dataOutput);\r\n    if (Liab === undefined) {\r\n      Liab = {\r\n        id: 1,\r\n        //Type: LIABILITIES.LAST_EXPENSES.value[\"en\"],\r\n        liabTypeKey: LIABILITIES.LAST_EXPENSES.Key,\r\n        ownerKey: OWNERSHIP.CLIENT.Key,\r\n        currValue: 0,\r\n        //growthDir: GROWTHDIR[\"en\"].Values[0], //increases\r\n        growthDirKey: GROWTHDIR.GROWS.Key, //increases\r\n        growth: 0,\r\n        repay: 0,\r\n        exposureDur: 99,\r\n        assetTaxLiabID: 0,\r\n        assetTaxLiabProj: [],\r\n      };\r\n    }\r\n\r\n    newDataInput.Liabilitys.push(Liab);\r\n\r\n    // resync, recalcuate, then update state to re_render\r\n\r\n    const newState = await this.reSync_reCalculate_reRender(\r\n      newDataInput,\r\n      newDataOutput,\r\n      COLLAPSIBLE_LIABS,\r\n      Liab.id\r\n    );\r\n    this.setState({ ...newState, loading: false });\r\n\r\n    /*     this.setState({ dataInput: data2 }, () =>\r\n      this.waitForSetStateCallback(0) // no need to save to storage when default is added\r\n    ); */\r\n  };\r\n\r\n  handleAddAssetTaxCredit = (type) => {\r\n    let data2 = this.state.dataInput;\r\n    // check if already there\r\n    let taxCredit = 0;\r\n    this.state.dataInput.Liabilitys.forEach((element) => {\r\n      if (element.liabTypeKey === LIABILITIES.CHARITABLE_GIFTS.Key) {\r\n        taxCredit += element.currValue;\r\n      }\r\n    });\r\n\r\n    taxCredit *= this.state.dataInput.Presentations[0].taxRate / 100;\r\n    let exists = false;\r\n    data2.Assets.forEach((element) => {\r\n      if (element.assetTypeKey === type) {\r\n        exists = true;\r\n        if (Math.abs(element.currValue - taxCredit) > 1) {\r\n          element.currValue = taxCredit;\r\n          this.handleUpdateAsset(element);\r\n        }\r\n      }\r\n    });\r\n    if (taxCredit > 0 && exists === false) {\r\n      const asset = createDefaultAsset(this.state.dataInput.Assets.length + 1); //assetsNo + 1)\r\n      asset.assetTypeKey = ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.Key;\r\n      asset.ownerKey = ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key;\r\n      asset.assetTaxTypeKey = ASSET_TAX.NON_TAXABLE.Key;\r\n      asset.currValue = taxCredit;\r\n      asset.DisposeYr = 0;\r\n\r\n      this.handleAddAsset(asset);\r\n      this.openCollapsible[COLLAPSIBLE_ASSETS].open = COLLAPSIBLES_OPEN;\r\n    }\r\n  };\r\n\r\n  handleAddAssetTaxCredit2 = (dataInput) => {\r\n    // check if already there\r\n    let taxCredit = 0;\r\n    dataInput.Liabilitys.forEach((element) => {\r\n      if (element.liabTypeKey === LIABILITIES.CHARITABLE_GIFTS.Key) {\r\n        taxCredit += element.currValue;\r\n      }\r\n    });\r\n\r\n    taxCredit *= dataInput.Presentations[0].taxRate / 100;\r\n    let exists = false;\r\n    dataInput.Assets.forEach((element) => {\r\n      if (element.assetTypeKey ===ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.Key) {\r\n        exists = true;\r\n        if (Math.abs(element.currValue - taxCredit) > 1) {\r\n          element.currValue = taxCredit;\r\n         // this.handleUpdateAsset(element);\r\n        }\r\n      }\r\n    });\r\n    if (taxCredit > 0 && exists === false) {\r\n      const asset = createDefaultAsset(dataInput.Assets.length + 1); //assetsNo + 1)\r\n      asset.assetTypeKey = ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.Key;\r\n      asset.ownerKey = ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key;\r\n      asset.assetTaxTypeKey = ASSET_TAX.NON_TAXABLE.Key;\r\n      asset.currValue = taxCredit;\r\n      asset.DisposeYr = 0;\r\n\r\n      dataInput.Assets.push(asset)\r\n      this.openCollapsible[COLLAPSIBLE_ASSETS].open = COLLAPSIBLES_OPEN;\r\n    }\r\n    return dataInput\r\n  };\r\n\r\n\r\n  handleAddSource = async (source) => {\r\n    this.setState({ loading: true });\r\n    const { dataInput, dataOutput } = this.state;\r\n    let newDataInput = _.cloneDeep(dataInput);\r\n    let newDataOutput = _.cloneDeep(dataOutput);\r\n    if (source === undefined) {\r\n      source = createDefaultSource();\r\n    }\r\n    // duration, growthRate,ownerID,taxRate depends on clients\r\n    source.ownerID = 2; // spouse or 1st child if single fsmily57\r\n    source.duration = newDataInput.Sources[0].duration;\r\n    source.growthRate = newDataInput.Presentations[0].inflation;\r\n    source.taxRate =\r\n      newDataInput.Clients.length > 1\r\n        ? newDataInput.Clients[1].avgTaxRate\r\n        : newDataInput.Clients[0].avgTaxRate; // first survivor\r\n    \r\n    newDataInput.Sources.push(source);\r\n    // resync, recalcuate, then update state to re_render\r\n    const newState = await this.reSync_reCalculate_reRender(\r\n      newDataInput,\r\n      newDataOutput,\r\n      COLLAPSIBLE_SOURCES,\r\n      source.id\r\n    );\r\n\r\n    this.setState({ ...newState, loading: false, failedRemove: false });\r\n\r\n    \r\n  };\r\n\r\n \r\n  handleAddNeed = async (nextKey, startYear, duration) => {\r\n    this.setState({ loading: true });\r\n    const { dataInput, dataOutput } = this.state;\r\n    const newDataInput = _.cloneDeep(dataInput);\r\n    const newDataOutput = _.cloneDeep(dataOutput);\r\n\r\n    const need = {\r\n      id: newDataInput.Needs.length + 1, //needsNo,\r\n      needTypeKey: nextKey,\r\n      amount: 0,\r\n      Percent: 0,\r\n      startYear: startYear,\r\n      duration: duration,\r\n    };\r\n    newDataInput.Needs.push(need);\r\n\r\n    // resync, recalcuate, then update state to re_render\r\n    const newState = await this.reSync_reCalculate_reRender(\r\n      newDataInput,\r\n      newDataOutput,\r\n      COLLAPSIBLE_NEEDS,\r\n      need.id\r\n    );\r\n    this.setState({ ...newState, loading: false });\r\n\r\n    //    this.setState({ dataInput: data2 }, () => this.waitForSetStateCallback());\r\n  };\r\n\r\n  \r\n  handleRemoveClient = async (id) => {\r\n    if (this.OKToRemove) {\r\n      this.setState({ loading: true });\r\n      const { dataInput, dataOutput } = this.state;\r\n      let newDataInput = _.cloneDeep(dataInput);\r\n      const newDataOutput = _.cloneDeep(dataOutput);\r\n      //   this.OKToRemove = false;\r\n\r\n      // first remove source if child\r\n      let cl = newDataInput.Clients.find((x) => x.id === id);\r\n\r\n      if (cl !== undefined && cl.memberKey === MEMBER.CHILD.Key)\r\n        newDataInput = await this.manageRemoveOrphan(newDataInput, cl.ownerID);\r\n\r\n      newDataInput.Clients.splice(id - 1, 1);\r\n      let i;\r\n      newDataInput.Sources=newDataInput.Sources.filter((item) => {if(item.ownerID >=id)item.ownerID-=1});\r\n     \r\n      for (i = 1; i <= newDataInput.Clients.length; ++i) {\r\n        newDataInput.Clients[i - 1].id = i;\r\n      }\r\n      newDataInput = await this.manageRemovingClientWithIncome(newDataInput);\r\n      //data2.clientsNo = data2.Clients.length;\r\n\r\n      // resync, recalcuate, then update state to re_render\r\n      const newState = await this.reSync_reCalculate_reRender(\r\n        newDataInput,\r\n        newDataOutput,\r\n        COLLAPSIBLE_CLIENTS,\r\n        id\r\n      );\r\n      this.setState({ ...newState, loading: false });\r\n\r\n\r\n    }\r\n  };\r\n\r\n  handleRemoveAsset = async (id) => {\r\n    if (this.OKToRemove) {\r\n      //  this.OKToRemove = false;\r\n\r\n      this.setState({ loading: true });\r\n      const { dataInput, dataOutput } = this.state;\r\n      let newDataInput = _.cloneDeep(dataInput);\r\n      const newDataOutput = _.cloneDeep(dataOutput);\r\n\r\n      // remove RRIF\r\n      if (newDataInput.Assets[id - 1].assetTypeKey === ASSETS.RRSP_RRIF.Key)\r\n        newDataInput = this.removeRRIFSource(newDataInput);\r\n\r\n      newDataInput.Assets.splice(id - 1, 1);\r\n      newDataOutput.assetProjections.splice(id - 1, 1);\r\n      let i;\r\n      for (i = 1; i <= newDataInput.Assets.length; ++i) {\r\n        newDataInput.Assets[i - 1].id = i;\r\n        newDataOutput.assetProjections[i - 1].id = i;\r\n      }\r\n\r\n      // resync, recalcuate, then update state to re_render\r\n      // removing asset redoes ids need to do all grids\r\n      const newState = await this.reSync_reCalculate_reRender(\r\n        newDataInput,\r\n        newDataOutput,\r\n        COLLAPSIBLE_UPDATE_ALL,\r\n        0\r\n        //COLLAPSIBLE_ASSETS,\r\n        //id\r\n      );\r\n      this.setState({ ...newState, loading: false });\r\n      \r\n    }\r\n  };\r\n\r\n  handleRemoveLiability = async (id) => {\r\n    if (this.OKToRemove) {\r\n      // this.OKToRemove = false;\r\n\r\n      \r\n\r\n      this.setState({ loading: true });\r\n      const { dataInput, dataOutput } = this.state;\r\n      const newDataInput = _.cloneDeep(dataInput);\r\n      const newDataOutput = _.cloneDeep(dataOutput);\r\n      // if charit remove corresp asset\r\n      const charit=newDataInput.Liabilitys.filter((liab)=>liab.liabTypeKey===LIABILITIES.CHARITABLE_GIFTS.Key && liab.id===id )\r\n      if(charit !== undefined && charit.length>0)\r\n      {\r\n        const charitAsset=newDataInput.Assets.filter((asset)=>asset.assetTypeKey===ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.Key)\r\n        if(charitAsset !== undefined && charitAsset.length>0)\r\n        {\r\n          newDataInput.Assets=newDataInput.Assets.filter((asset)=>asset.assetTypeKey!==ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.Key)\r\n        let i;\r\n        for (i = 1; i <= newDataInput.Assets.length; ++i) {\r\n          newDataInput.Assets[i - 1].id = i;\r\n          newDataOutput.assetProjections[i - 1].id = i;\r\n        }\r\n      }\r\n      }\r\n\r\n      newDataInput.Liabilitys.splice(id - 1, 1);\r\n      let i;\r\n      for (i = 1; i <= newDataInput.Liabilitys.length; ++i) {\r\n        newDataInput.Liabilitys[i - 1].id = i;\r\n      }\r\n      //data2.liabilitysNo = data2.Liabilitys.length;\r\n\r\n      // resync, recalcuate, then update state to re_render\r\n      const newState = await this.reSync_reCalculate_reRender(\r\n        newDataInput,\r\n        newDataOutput,\r\n        COLLAPSIBLE_LIABS,\r\n        id\r\n      );\r\n      this.setState({ ...newState, loading: false });\r\n\r\n      /* this.setState({ dataInput: data2 }, () =>\r\n        this.waitForSetStateCallback(1)//, 1, 1)\r\n      ); */\r\n    }\r\n  };\r\n\r\n  handleRemoveSource = async (id) => {\r\n    if (this.OKToRemove) {\r\n      //  this.OKToRemove = false;\r\n      \r\n      let failedRemove=false\r\n      this.setState({ loading: true });\r\n      const { dataInput, dataOutput } = this.state;\r\n      const newDataInput = _.cloneDeep(dataInput);\r\n      const newDataOutput = _.cloneDeep(dataOutput);\r\n      let i;\r\n      //this.failedRemove=false\r\n      for (i = 0; i < newDataInput.Sources.length; ++i) {\r\n        if (\r\n          newDataInput.Sources[i].id === id &&\r\n          (newDataInput.Sources[i].sourceTypeKey ===\r\n            INCOMESOURCES.GOV_SURVIVORS_PENSION.Key ||\r\n            newDataInput.Sources[i].sourceTypeKey ===\r\n              INCOMESOURCES.GOV_DEATH_BENEFIT.Key ||\r\n              newDataInput.Sources[i].sourceTypeKey ===\r\n                INCOMESOURCES.GOV_ORPHANS_BENEFIT.Key)\r\n        )\r\n          failedRemove=true;  \r\n          }\r\n      //this.setState({ failedRemove: failedRemove})\r\n\r\n      this.setState(prevState => ({\r\n        failedRemove: prevState.failedRemove===true?false:failedRemove\r\n      }));\r\n\r\n      if (failedRemove === false) {\r\n        newDataInput.Sources.splice(id - 1, 1);\r\n        for (i = 1; i <= newDataInput.Sources.length; ++i) {\r\n          newDataInput.Sources[i - 1].id = i;\r\n        }\r\n        //dataInput.sourcesNo = dataInput.Sources.length;\r\n      \r\n\r\n      // resync, recalcuate, then update state to re_render\r\n      const newState = await this.reSync_reCalculate_reRender(\r\n        newDataInput,\r\n        newDataOutput,\r\n        COLLAPSIBLE_SOURCES,\r\n        id\r\n      );\r\n      this.setState({ ...newState, loading: false });\r\n      }\r\n      /* this.setState({ dataInput: data2 }, () =>\r\n        this.waitForSetStateCallback(1)//, 1, 1)\r\n      ); */\r\n    }\r\n  };\r\n\r\n  handleRemoveNeed = async (id) => {\r\n    if (this.OKToRemove) {\r\n      // this.OKToRemove = false;\r\n\r\n      this.setState({ loading: true });\r\n      const { dataInput, dataOutput } = this.state;\r\n      const newDataInput = _.cloneDeep(dataInput);\r\n      const newDataOutput = _.cloneDeep(dataOutput);\r\n      newDataInput.Needs.splice(id - 1, 1);\r\n      let i;\r\n      for (i = 1; i <= newDataInput.Needs.length; ++i) {\r\n        newDataInput.Needs[i - 1].id = i;\r\n      }\r\n      //data2.needsNo = data2.Needs.length;\r\n\r\n      // resync, recalcuate, then update state to re_render\r\n      const newState = await this.reSync_reCalculate_reRender(\r\n        newDataInput,\r\n        newDataOutput,\r\n        COLLAPSIBLE_NEEDS,\r\n        id\r\n      );\r\n      this.setState({ ...newState, loading: false });\r\n\r\n      /* this.setState({ dataInput: data2 }, () =>\r\n        this.waitForSetStateCallback(1)//, 1, 1)\r\n      ); */\r\n    }\r\n  };\r\n\r\n  addRRIFSource = (asset) => {\r\n    const existingRRIF = this.state.dataInput.Sources.find(\r\n      (x) => x.sourceTypeKey === INCOMESOURCES.RRIF.Key\r\n    );\r\n    // this is done based on asset in API. this display only\r\n    \r\n    if (existingRRIF === undefined) {\r\n      const sourceRRIF = {\r\n        id: this.state.dataInput.Sources.length + 1,\r\n        sourceTypeKey: INCOMESOURCES.RRIF.Key,\r\n        amount: 0,\r\n        startYear: asset.RRIFStartAge,\r\n        duration: 99,\r\n        ownerID: 2,\r\n        taxRate: 0,\r\n        growthRate: 0,\r\n      };\r\n      \r\n      this.handleAddSource(sourceRRIF);\r\n    } else {\r\n      \r\n      existingRRIF.startYear = asset.RRIFStartAge;\r\n      this.handleUpdateSource(existingRRIF);\r\n    }\r\n  };\r\n\r\n  addRRIFSource2 = (dataInput, asset) => {\r\n    const existingRRIF = dataInput.Sources.find(\r\n      (x) => x.sourceTypeKey === INCOMESOURCES.RRIF.Key\r\n    );\r\n    // this is done based on asset in API. this display only\r\n    \r\n    if (existingRRIF === undefined) {\r\n      const sourceRRIF = {\r\n        id: this.state.dataInput.Sources.length + 1,\r\n        sourceTypeKey: INCOMESOURCES.RRIF.Key,\r\n        amount: 0,\r\n        startYear: asset.RRIFStartAge,\r\n        duration: 99,\r\n        ownerID: 2,\r\n        taxRate: 0,\r\n        growthRate: 0,\r\n      };\r\n      \r\n      // do it right here\r\n      dataInput.Sources.push(sourceRRIF);\r\n\r\n      //dataInput = this.handleAddSource(sourceRRIF);\r\n    } else {\r\n      \r\n      existingRRIF.startYear = asset.RRIFStartAge;\r\n      // do it right here\r\n      dataInput.Sources[existingRRIF.id - 1] = existingRRIF;\r\n      //dataInput = this.handleUpdateSource(existingRRIF, false);\r\n    }\r\n\r\n    return dataInput;\r\n  };\r\n\r\n  removeRRIFSource = (dataInput) => {\r\n    const existingRRIF = dataInput.Sources.find(\r\n      (x) => x.sourceTypeKey === INCOMESOURCES.RRIF.Key\r\n    );\r\n    // this is done based on asset in API. this display only\r\n    \r\n    if (existingRRIF !== undefined) {\r\n      const id = existingRRIF.id;\r\n      dataInput.Sources.splice(id - 1, 1);\r\n    }\r\n\r\n    return dataInput;\r\n  };\r\n\r\n  \r\n  copyPresentation = () => {\r\n    return JSON.parse(JSON.stringify(this.state.dataInput.Presentations[0]));\r\n  };\r\n\r\n  changeLang = () => {\r\n    let pres = this.copyPresentation();\r\n    pres.language = pres.language === \"en\" ? \"fr\" : \"en\";\r\n    const noRecalc = false;\r\n   \r\n    \r\n    this.handleUpdatePresentationChange(pres, noRecalc);\r\n    // close all\r\n    let i;\r\n    for (i = 0; i < COLLAPSIBLES_COUNT; ++i) {\r\n      this.openCollapsible[i].open = COLLAPSIBLES_CLOSED;\r\n    }\r\n  };\r\n\r\n  debounceSaveToStorage = debounce(\r\n    () => {\r\n      return this.saveToStorage();\r\n    },\r\n    waitTime,\r\n    { leading: false, trailing: true }\r\n  );\r\n\r\n  areThereChildren = () => {\r\n    let Children = this.state.dataInput.Clients.find(\r\n      (x) => x.memberKey === MEMBER.CHILD.Key\r\n    );\r\n    if (Children !== undefined) return true;\r\n    else return false;\r\n  };\r\n\r\n  manageEducation = () => {\r\n    let Children = this.state.dataInput.Clients.find(\r\n      (x) => x.memberKey === MEMBER.CHILD.Key\r\n    );\r\n    if (Children !== undefined) {\r\n      let eduFunds = this.state.dataInput.Needs.find(\r\n        (x) => x.needTypeKey === INCOMENEEDS.EDUCATION_FUND.Key\r\n      );\r\n      if (eduFunds === undefined)\r\n        this.handleAddNeed(\r\n          INCOMENEEDS.EDUCATION_FUND.Key,\r\n          Math.max(0, UNIVERSITY_START_AGE - Children.Age),\r\n          Math.min(4, Math.max(0, UNIVERSITY_END_AGE - Children.Age))\r\n        );\r\n    }\r\n  };\r\n\r\n  manageEducation2 = (input) => {\r\n    let Children = input.Clients.find((x) => x.memberKey === MEMBER.CHILD.Key);\r\n    if (Children !== undefined) {\r\n      let eduFunds = input.Needs.find(\r\n        (x) => x.needTypeKey === INCOMENEEDS.EDUCATION_FUND.Key\r\n      );\r\n      if (eduFunds === undefined)\r\n        input.Needs.push({\r\n          id: input.Needs.length + 1, //needsNo,\r\n          needTypeKey: INCOMENEEDS.EDUCATION_FUND.Key,\r\n          amount: 0,\r\n          Percent: 0,\r\n          startYear: Math.max(0, UNIVERSITY_START_AGE - Children.Age),\r\n          duration: Math.min(4, Math.max(0, UNIVERSITY_END_AGE - Children.Age)),\r\n        });\r\n    }\r\n    return input;\r\n  };\r\n\r\n  manageOrphan2 = (input) => {\r\n    const childMember = MEMBER.CHILD.Key;\r\n    //const orphanBen = INCOMESOURCES.GOV_ORPHANS_BENEFIT.value[this.state.dataInput.Presentations[0].language];\r\n    const orphanBen = INCOMESOURCES.GOV_ORPHANS_BENEFIT.Key;\r\n    let Children = input.Clients.filter(function (item) {\r\n      return item.memberKey === childMember;\r\n    });\r\n    let orphSources = input.Sources.filter(function (item) {\r\n      return item.sourceTypeKey === orphanBen;\r\n    });\r\n\r\n    let maxDur =\r\n      input.Presentations[0].provinceKey === \"QC\"\r\n        ? MAX_ORPHAN_DUR_QC\r\n        : MAX_ORPHAN_DUR_NON_QC;\r\n    let orphAge =\r\n      input.Presentations[0].provinceKey === \"QC\"\r\n        ? ORPHAN_AGE_QC\r\n        : ORPHAN_AGE_NON_QC;\r\n\r\n    if (Children.length > 0) {\r\n      Children.forEach((element) => {\r\n        if (\r\n          element.Age <= orphAge &&\r\n          orphSources.filter((item) => {\r\n            return item.ownerID === element.id;\r\n          }).length === 0\r\n        ) {\r\n          const source = {\r\n            id: input.Sources.length + 1, //sourcesNo + 1,\r\n            sourceTypeKey: orphanBen,\r\n            amount: this.state.dataOutput.govBenefits.cppOrphan,\r\n            startYear: 0,\r\n            duration: maxDur - element.Age,\r\n            ownerID: element.id,\r\n          };\r\n          // no elig jan 2019 this.handleAddSource(orphanBen,this.orphan * this.state.dataInput.Clients[QUOTE_CLIENT].Eligibility / 100,25-element.Age,element.id, 1);\r\n          input.Sources.push(source);\r\n\r\n          //this.handleAddSource(source);\r\n        }\r\n      });\r\n    } else orphSources = [];\r\n\r\n    return input;\r\n  };\r\n\r\n  /* manageOrphan = () => {\r\n    const childMember = MEMBER.CHILD.Key;\r\n    //const orphanBen = INCOMESOURCES.GOV_ORPHANS_BENEFIT.value[this.state.dataInput.Presentations[0].language];\r\n    const orphanBen = INCOMESOURCES.GOV_ORPHANS_BENEFIT.Key;\r\n    let Children = this.state.dataInput.Clients.filter(function (item) {\r\n      return item.memberKey === childMember;\r\n    });\r\n    let orphSources = this.state.dataInput.Sources.filter(function (item) {\r\n      return item.sourceTypeKey === orphanBen;\r\n    });\r\n\r\n    let maxDur =\r\n      this.state.dataInput.Presentations[0].provinceKey === \"QC\"\r\n        ? MAX_ORPHAN_DUR_QC\r\n        : MAX_ORPHAN_DUR_NON_QC;\r\n    let orphAge =\r\n      this.state.dataInput.Presentations[0].provinceKey === \"QC\"\r\n        ? ORPHAN_AGE_QC\r\n        : ORPHAN_AGE_NON_QC;\r\n\r\n    if (Children.length > 0) {\r\n      Children.forEach((element) => {\r\n        if (\r\n          element.Age <= orphAge &&\r\n          orphSources.filter((item) => {\r\n            return item.ownerID === element.id;\r\n          }).length === 0\r\n        ) {\r\n          const source = {\r\n            id: this.state.dataInput.Sources.length + 1, //sourcesNo + 1,\r\n            sourceTypeKey: orphanBen,\r\n            amount: this.state.dataOutput.govBenefits.cppOrphan,\r\n            startYear: 0,\r\n            duration: maxDur - element.Age,\r\n            ownerID: element.id,\r\n          };\r\n          // no elig jan 2019 this.handleAddSource(orphanBen,this.orphan * this.state.dataInput.Clients[QUOTE_CLIENT].Eligibility / 100,25-element.Age,element.id, 1);\r\n          this.handleAddSource(source);\r\n        }\r\n      });\r\n    }\r\n  };\r\n */\r\n  manageOrphanSync = async (dataInput, dataOutput) => {\r\n    const childMember = MEMBER.CHILD.Key;\r\n    //const orphanBen = INCOMESOURCES.GOV_ORPHANS_BENEFIT.value[this.state.dataInput.Presentations[0].language];\r\n    const orphanBen = INCOMESOURCES.GOV_ORPHANS_BENEFIT.Key;\r\n\r\n    // remove child bens and add\r\n    // dataInput.Sources=\r\n\r\n/*     let orphSourcesIDs = dataInput.Sources.filter(function (item) {\r\n      return item.id && item.sourceTypeKey === orphanBen;\r\n    });\r\n */\r\n    /* let sources = dataInput.Sources.filter((item) => {\r\n      return item.sourceTypeKey !== orphanBen;\r\n    });\r\n */\r\n\r\n    let sources = dataInput.Sources;\r\n\r\n    \r\n    let orphSources = sources.filter(function (item) {\r\n      return item.sourceTypeKey === orphanBen;\r\n    });\r\n\r\n    /* for (let i = 1; i <= sources.length; ++i) {\r\n      sources[i - 1].id = i;\r\n    } */\r\n\r\n    let Children = dataInput.Clients.filter(function (item) {\r\n      return item.memberKey === childMember;\r\n    });\r\n    \r\n    \r\n    let sourcesNo=sources.length\r\n    let maxDur =\r\n      dataInput.Presentations[0].provinceKey === \"QC\"\r\n        ? MAX_ORPHAN_DUR_QC\r\n        : MAX_ORPHAN_DUR_NON_QC;\r\n    let orphAge =\r\n      dataInput.Presentations[0].provinceKey === \"QC\"\r\n        ? ORPHAN_AGE_QC\r\n        : ORPHAN_AGE_NON_QC;\r\n\r\n    let setChildIDs = new Set();   \r\n    if (Children.length > 0) {\r\n      Children.forEach((element) => {\r\n        setChildIDs.add(element.id);\r\n        sourcesNo=sources.length\r\n        if (\r\n          element.Age <= orphAge &&\r\n          orphSources.filter((item) => {\r\n            return item.ownerID === element.id && item.sourceTypeKey === orphanBen;\r\n          }).length === 0\r\n        ) {\r\n          /* let childID=orphSourcesIDs.length>0?orphSourcesIDs[0]:sources.length + 1\r\n          if(orphSourcesIDs.length>0)orphSourcesIDs=orphSourcesIDs.shift(); */\r\n          const source = {\r\n            id: sourcesNo + 1,\r\n            sourceTypeKey: orphanBen,\r\n            amount: dataOutput.govBenefits.cppOrphan,\r\n            startYear: 0,\r\n            duration: maxDur - element.Age,\r\n            ownerID: element.id,\r\n          };\r\n          // no elig jan 2019 this.handleAddSource(orphanBen,this.orphan * this.state.dataInput.Clients[QUOTE_CLIENT].Eligibility / 100,25-element.Age,element.id, 1);\r\n          sources.push(source);\r\n          \r\n        }\r\n        else // exists but needs adj\r\n        {\r\n           sources.forEach((source) => {\r\n            if ( source.sourceTypeKey === orphanBen && source.ownerID === element.id)\r\n              source.amount= dataOutput.govBenefits.cppOrphan\r\n              \r\n            })\r\n            \r\n\r\n        }\r\n        \r\n      });\r\n     /*  for (let i = 1; i <= sources.length; ++i) {\r\n        sources[i - 1].id = i; \r\n      }*/\r\n    } else dataInput = await this.manageRemoveOrphan(dataInput);\r\n\r\n    sources=sources.filter((item) => {\r\n      return item.sourceTypeKey !== orphanBen || (setChildIDs.has(item.ownerID) && item.sourceTypeKey === orphanBen)})\r\n    \r\n    dataInput.Sources = sources;\r\n    return dataInput;\r\n  };\r\n\r\n  manageRemoveOrphan = async (input, childID) => {\r\n    const childMember = MEMBER.CHILD.Key;\r\n    //const orphanBen = INCOMESOURCES.GOV_ORPHANS_BENEFIT.value[this.state.dataInput.Presentations[0].language];\r\n    const orphanBen = INCOMESOURCES.GOV_ORPHANS_BENEFIT.Key;\r\n    input.Sources = input.Sources.filter(function (item) {\r\n      if (childID === undefined)\r\n        // remove all\r\n        return !(item.sourceTypeKey === orphanBen);\r\n      else\r\n        return !(item.ownerID === childID && item.sourceTypeKey === orphanBen);\r\n    });\r\n    let i;\r\n    \r\n    //input.Sources.splice(orphSource.id - 1, 1);\r\n    for (i = 1; i <= input.Sources.length; ++i) {\r\n      input.Sources[i - 1].id = i;\r\n    }\r\n    \r\n    return input;\r\n  };\r\n\r\n  updateDataLang = (oldLang) => {\r\n    this.openParent = false;\r\n    this.openForce = false;\r\n  };\r\n\r\n  getAfterTaxTotalIncome = (newStateCandidateInput) => {\r\n    let totalATaxIncome = 0;\r\n    for (let i = 0; i < newStateCandidateInput.Clients.length; i++)\r\n      totalATaxIncome +=\r\n        newStateCandidateInput.Clients[i].Income *\r\n        (1 - newStateCandidateInput.Clients[i].avgTaxRate / 100);\r\n\r\n    return totalATaxIncome;\r\n  };\r\n\r\n  setSurivorIndex = () => {\r\n    const spKey = APPLET_INA ? MEMBER.SPOUSE.Key : MEMBER.CLIENT.Key;\r\n    let Survivor = this.state.dataInput.Clients.find(\r\n      (x) => x.memberKey === spKey\r\n    );\r\n\r\n    if (Survivor === undefined && APPLET_INA) {\r\n      if (this.state.dataInput.Clients.length === 1)\r\n        Survivor = this.state.dataInput.Clients.find(\r\n          (x) => x.memberKey === MEMBER.CLIENT.Key\r\n        );\r\n      else {\r\n        Survivor = this.state.dataInput.Clients.find(\r\n          (x) => x.memberKey === MEMBER.DEPENDENT_ADULT.Key\r\n        );\r\n        if (Survivor === undefined)\r\n          Survivor = this.state.dataInput.Clients.find(\r\n            (x) => x.memberKey === MEMBER.CHILD.Key\r\n          );\r\n      }\r\n    }\r\n\r\n    return Survivor.id - 1; // id is 1-based\r\n  };\r\n\r\n  setSurivorIndex2 = (newStateCandidateInput) => {\r\n    const spKey = APPLET_INA ? MEMBER.SPOUSE.Key : MEMBER.CLIENT.Key;\r\n    let Survivor = newStateCandidateInput.Clients.find(\r\n      (x) => x.memberKey === spKey\r\n    );\r\n\r\n    if (Survivor === undefined && APPLET_INA) {\r\n      if (newStateCandidateInput.Clients.length === 1)\r\n        Survivor = newStateCandidateInput.Clients.find(\r\n          (x) => x.memberKey === MEMBER.CLIENT.Key\r\n        );\r\n      else {\r\n        Survivor = newStateCandidateInput.Clients.find(\r\n          (x) => x.memberKey === MEMBER.DEPENDENT_ADULT.Key\r\n        );\r\n        if (Survivor === undefined)\r\n          Survivor = newStateCandidateInput.Clients.find(\r\n            (x) => x.memberKey === MEMBER.CHILD.Key\r\n          );\r\n      }\r\n    }\r\n\r\n    return Survivor.id - 1; // id is 1-based\r\n  };\r\n\r\n  syncPanelsValues2 = (newStateCandidateInput, itemToUpdateGroup) => {\r\n    // EP dosent have needs and sources to sync\r\n\r\n    this.survIdx = this.setSurivorIndex2(newStateCandidateInput);\r\n    let protectionPeriod =\r\n      newStateCandidateInput.Clients[this.survIdx].retirementAge -\r\n      newStateCandidateInput.Clients[this.survIdx].Age;\r\n    const singleFamily = isSingleFamily(newStateCandidateInput.Clients);\r\n    if (singleFamily) {\r\n      const yrs = singleFamilyProjectionYears(newStateCandidateInput.Clients);\r\n      protectionPeriod = yrs.noProjectionYrs;\r\n    }\r\n\r\n    \r\n    newStateCandidateInput=this.handleAddAssetTaxCredit2(newStateCandidateInput)\r\n        \r\n    \r\n    if (APPLET_INA) {\r\n      if (this.survIdx !== -1) {\r\n        let i;\r\n        for (i = 0; i < newStateCandidateInput.Needs.length; i++) {\r\n          const needPercent = parseInt(\r\n            (newStateCandidateInput.Needs[i].Percent / 100) *\r\n              this.getAfterTaxTotalIncome(newStateCandidateInput)\r\n          );\r\n\r\n          const dur = protectionPeriod;\r\n          //const dur = 100 - newStateCandidateInput.Clients[this.survIdx].Age;\r\n          if (this.caseFromFile===false && itemToUpdateGroup !== COLLAPSIBLE_RESULTS && // dont change if clicking on results\r\n            newStateCandidateInput.Needs[i].needTypeKey ===\r\n            INCOMENEEDS.PERCET_OF_INCOME.Key\r\n          ) {\r\n            if (\r\n              needPercent !== newStateCandidateInput.Needs[i].amount &&\r\n              newStateCandidateInput.Needs[i].Percent >= 0\r\n            ) {\r\n              newStateCandidateInput.Needs[i].amount = needPercent;\r\n              \r\n            }\r\n\r\n            if (itemToUpdateGroup !== COLLAPSIBLE_NEEDS) {\r\n              // change duration of % of income\r\n              if (\r\n                (singleFamily &&\r\n                  newStateCandidateInput.Needs[i].startYear === 0) ||\r\n                (dur !== newStateCandidateInput.Needs[i].duration &&\r\n                  newStateCandidateInput.Needs[i].duration !== 100 &&\r\n                  dur > 0)\r\n              ) {\r\n                newStateCandidateInput.Needs[i].duration = dur;\r\n                \r\n              }\r\n              if (\r\n                newStateCandidateInput.Needs[i].duration === 100 &&\r\n                dur > 0 &&\r\n                newStateCandidateInput.Needs[i].startYear !== dur\r\n              ) {\r\n                newStateCandidateInput.Needs[i].startYear = dur;\r\n                \r\n              }\r\n            }\r\n          }\r\n\r\n          if (this.caseFromFile===false && \r\n            newStateCandidateInput.Needs[i].needTypeKey ===\r\n            INCOMENEEDS.EDUCATION_FUND.Key\r\n          ) {\r\n            let children = newStateCandidateInput.Clients.find(\r\n              (x) => x.memberKey === MEMBER.CHILD.Key\r\n            );\r\n            let indices = newStateCandidateInput.Clients.map((e) =>\r\n              e.memberKey === MEMBER.CHILD.Key ? e.id : \"\"\r\n            ).filter(String);\r\n            let idxCh = newStateCandidateInput.Needs.map((e) =>\r\n              e.needTypeKey === INCOMENEEDS.EDUCATION_FUND.Key ? e.id : \"\"\r\n            ).filter(String);\r\n            if (children !== undefined) {\r\n              if (\r\n                newStateCandidateInput.Needs[i].startYear !==\r\n                  Math.max(0, UNIVERSITY_START_AGE - children.Age) &&\r\n                children.length > 0\r\n              ) {\r\n                newStateCandidateInput.Needs[i].startYear = Math.max(\r\n                  0,\r\n                  UNIVERSITY_START_AGE - children.Age\r\n                );\r\n                newStateCandidateInput.Needs[i].duration = Math.max(\r\n                  0,\r\n                  Math.min(4, UNIVERSITY_END_AGE - children.Age)\r\n                );\r\n                \r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n    for (i = 0; i < newStateCandidateInput.Sources.length; i++) {\r\n          // all at income tax except divdend\r\n          if (\r\n            newStateCandidateInput.Sources[i].sourceTypeKey !==\r\n            INCOMESOURCES.DIVIDEND_INCOME.Key\r\n          )\r\n            newStateCandidateInput.Sources[i].taxRate =\r\n              newStateCandidateInput.Clients[this.survIdx].avgTaxRate; // spouse\r\n\r\n          // allow a different surv income dur if they input directly\r\n          if (itemToUpdateGroup !== COLLAPSIBLE_SOURCES  && itemToUpdateGroup !== COLLAPSIBLE_RESULTS) {\r\n            const dur = protectionPeriod;\r\n            if (\r\n              newStateCandidateInput.Sources[i].sourceTypeKey ===\r\n                INCOMESOURCES.SURVIVORS_INCOME.Key &&\r\n              newStateCandidateInput.Sources[i].startYear === 0 &&\r\n              dur !== newStateCandidateInput.Sources[i].duration &&\r\n              dur > 0\r\n            ) {\r\n              newStateCandidateInput.Sources[i].duration = dur;\r\n              \r\n            }\r\n          }\r\n\r\n          if (newStateCandidateInput.Sources[i].ownerID === undefined)\r\n            newStateCandidateInput.Sources[i].ownerID =\r\n              newStateCandidateInput.Clients.length === 1 ? 1 : 2; // first surv\r\n          // allow a different surv income if they input directly\r\n          if (newStateCandidateInput.Clients.length > 1) {\r\n            //!singleFamily){\r\n            if (\r\n              itemToUpdateGroup !== COLLAPSIBLE_SOURCES  && itemToUpdateGroup !== COLLAPSIBLE_RESULTS &&\r\n              newStateCandidateInput.Sources[i].ownerID - 1 > 0\r\n            ) {\r\n              if (\r\n                newStateCandidateInput.Sources[i].sourceTypeKey ===\r\n                  INCOMESOURCES.SURVIVORS_INCOME.Key &&\r\n                newStateCandidateInput.Sources[i].amount !==\r\n                  parseInt(\r\n                    newStateCandidateInput.Clients[\r\n                      newStateCandidateInput.Sources[i].ownerID - 1\r\n                    ].Income\r\n                  )\r\n              ) {\r\n                newStateCandidateInput.Sources[i].amount = parseInt(\r\n                  newStateCandidateInput.Clients[\r\n                    newStateCandidateInput.Sources[i].ownerID - 1\r\n                  ].Income\r\n                );\r\n                \r\n              }\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        \r\n        let i;\r\n        for (i = 0; i < newStateCandidateInput.Needs.length; i++) {\r\n          if (\r\n            newStateCandidateInput.Needs[i].needTypeKey ===\r\n            INCOMENEEDS.PERCET_OF_INCOME.Key\r\n          )\r\n            newStateCandidateInput.Needs[i].amount = 0;\r\n        }\r\n        //let newStateCandidateInput = newStateCandidateInput;\r\n        for (i = 0; i < newStateCandidateInput.Sources.length; i++) {\r\n          if (\r\n            newStateCandidateInput.Sources[i].sourceTypeKey ===\r\n            INCOMESOURCES.GOV_SURVIVORS_PENSION.Key\r\n          )\r\n            newStateCandidateInput.Sources[i].amount = 0;\r\n          else if (\r\n            newStateCandidateInput.Sources[i].sourceTypeKey ===\r\n            INCOMESOURCES.GOV_DEATH_BENEFIT.Key\r\n          )\r\n            newStateCandidateInput.Sources[i].amount = 0;\r\n          else if (\r\n            newStateCandidateInput.Sources[i].sourceTypeKey ===\r\n            INCOMESOURCES.GOV_ORPHANS_BENEFIT.Key\r\n          )\r\n            newStateCandidateInput.Sources[i].amount = 0;\r\n          else if (\r\n            newStateCandidateInput.Sources[i].sourceTypeKey ===\r\n            INCOMESOURCES.SURVIVORS_INCOME.Key\r\n          )\r\n            newStateCandidateInput.Sources[i].amount = 0;\r\n        }\r\n        /* this.setState({ dataInput: newStateCandidateInput }, () =>\r\n          this.waitForSetStateCallback(0) */\r\n        // );\r\n        this.OKToRemove = true;\r\n      }\r\n    }\r\n    \r\n\r\n    return newStateCandidateInput;\r\n  };\r\n\r\n  setRates = () => {\r\n    let dataE = {\r\n      investmentRate: this.state.dataInput.Presentations[0].invRate / 100,\r\n      taxRate: this.state.dataInput.Presentations[0].taxRate / 100,\r\n      dividendTaxRate: 0.33,\r\n      capitalGainsInclusion: 0.5,\r\n      inflationRate: this.state.dataInput.Presentations[0].inflation / 100,\r\n    };\r\n\r\n    return dataE;\r\n  };\r\n\r\n  loadStorage = async () => {\r\n    let storageKey = APPLET_INA ? \"INAData\" : \"EPData\";\r\n\r\n    const objJSONData = JSON.parse(localStorage.getItem(storageKey));\r\n    this.updateStateFromJSon(objJSONData);\r\n  };\r\n\r\n  updateStateFromJSon = async (objJSONData) => {\r\n    if (objJSONData !== null && objJSONData !== undefined) {\r\n      // put loaded data to quote and show\r\n      this.setState({ loading: true });\r\n    //  console.log(objJSONData)\r\n      this.caseFromFile=true;\r\n      const { dataOutput } = this.state;\r\n      const newDataOutput = _.cloneDeep(dataOutput);\r\n      const newState = await this.reSync_reCalculate_reRender(\r\n        objJSONData,\r\n        newDataOutput,\r\n        COLLAPSIBLE_UPDATE_ALL, // to updateAll\r\n        0\r\n      );\r\n      this.setState({ ...newState, loading: false, initialLoading: false });\r\n    } //this.updateStateInput(objJSONData, () => this.waitForSetStateCallback());\r\n    this.caseFromFile=false;\r\n  };\r\n\r\n  saveToStorage = () => {\r\n    // in case we need to clear all\r\n    // localStorage.clear();\r\n    localStorage.setItem(\r\n      APPLET_INA ? \"INAData\" : \"EPData\",\r\n      JSON.stringify(this.state.dataInput)\r\n    );\r\n\r\n    // no recovery anymore\r\n    this.showRecover = 0;\r\n    hideRecover();\r\n  };\r\n\r\n  loadFromFile = (e) => {\r\n    const fileTarget = e.target.files[0];\r\n    if (!fileTarget) {\r\n      return;\r\n    }\r\n    this.setState({loading:true});\r\n\r\n    // close all\r\n    let i;\r\n    for (i = 0; i < COLLAPSIBLES_COUNT; ++i) {\r\n      this.openCollapsible[i].open = COLLAPSIBLES_CLOSED;\r\n    }\r\n\r\n    const reader = new FileReader();\r\n    reader.onload = (e) => {\r\n  \r\n      let contentsFile = e.target.result;\r\n      var objJSONData;\r\n      // is this a non-encrypted file\r\n      const encrptedSave =\r\n        contentsFile.search(\"dataInput\") > 0 ||\r\n        versionDetails().saveEncrypt === false\r\n          ? false\r\n          : true;\r\n\r\n      if (encrptedSave === true) {\r\n        // file is saved a s querystring\r\n        this.handleInitilizeQuoteFromQueryString(contentsFile);\r\n      } else {\r\n        // name changes\r\n        contentsFile = contentsFile.split(\"Amount\").join(\"amount\");\r\n        contentsFile = contentsFile.split(\"StartYr\").join(\"startYear\");\r\n        contentsFile = contentsFile.split(\"Duration\").join(\"duration\");\r\n        contentsFile = contentsFile\r\n          .split(\"\" + \"Tax\" + \"\")\r\n          .join(\"\" + \"avgTaxRate\" + \"\");\r\n        contentsFile = contentsFile.split(\"retireAge\").join(\"retirementAge\");\r\n        \r\n        objJSONData = JSON.parse(contentsFile);\r\n        objJSONData.dataPresentations.Presentations[0].presentationDate = new Date();\r\n\r\n        // old files\r\n        objJSONData.dataInput.Clients.forEach(function (element) {\r\n          if (element.sexKey == undefined) {\r\n            element.sexKey = getListItemKeyFromName(SEX, element.Sex);\r\n            delete element.Sex;\r\n          }\r\n        });\r\n        // old files\r\n        objJSONData.dataInput.Clients.forEach(function (element) {\r\n          if (element.smokerKey == undefined) {\r\n            element.smokerKey = getListItemKeyFromName(SMOKING, element.Smoker);\r\n            delete element.Smoker;\r\n          }\r\n        });\r\n        // old files\r\n        objJSONData.dataInput.Clients.forEach(function (element) {\r\n          if (element.memberKey == undefined) {\r\n            element.memberKey = getListItemKeyFromName(MEMBER, element.member);\r\n            delete element.member;\r\n          }\r\n        });\r\n\r\n        // old files\r\n        objJSONData.dataInput.Assets.forEach(function (element) {\r\n          if (element.assetTypeKey == undefined) {\r\n            element.assetTypeKey = getListItemKeyFromName(ASSETS, element.Type);\r\n            delete element.Type;\r\n          }\r\n        });\r\n        // old files\r\n        objJSONData.dataInput.Assets.forEach(function (element) {\r\n          if (element.assetTaxTypeKey == undefined) {\r\n            element.assetTaxTypeKey = getListItemKeyFromName(\r\n              ASSET_TAX,\r\n              element.Tax\r\n            );\r\n            delete element.Tax;\r\n          }\r\n        });\r\n\r\n        // old files\r\n        objJSONData.dataInput.Assets.forEach(function (element) {\r\n          if (element.ownerKey == undefined) {\r\n            element.ownerKey = ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key;\r\n          }\r\n        });\r\n\r\n        \r\n        // old files note change in spelling\r\n        objJSONData.dataInput.Liabilitys.forEach(function (element) {\r\n          if (element.liabTypeKey == undefined) {\r\n            element.liabTypeKey = getListItemKeyFromName(\r\n              LIABILITIES,\r\n              element.Type\r\n            );\r\n            delete element.Type;\r\n          }\r\n        });\r\n        \r\n        // old files\r\n        objJSONData.dataInput.Sources.forEach(function (element) {\r\n          if (element.sourceTypeKey == undefined) {\r\n            element.sourceTypeKey = getListItemKeyFromName(\r\n              INCOMESOURCES,\r\n              element.Type\r\n            );\r\n            delete element.Type;\r\n          }\r\n        });\r\n        \r\n        // old files\r\n        objJSONData.dataInput.Needs.forEach(function (element) {\r\n          if (element.needTypeKey == undefined) {\r\n            element.needTypeKey = getListItemKeyFromName(\r\n              INCOMENEEDS,\r\n              element.Type\r\n            );\r\n            delete element.Type;\r\n          }\r\n        });\r\n\r\n        // old files\r\n        objJSONData.dataInput.Presentations.forEach(function (element) {\r\n          if (element.provinceKey == undefined) {\r\n            element.provinceKey = getListItemKeyFromName(\r\n              PROVINCE,\r\n              element.Province\r\n            );\r\n            delete element.Province;\r\n          }\r\n        });\r\n        this.updateStateFromJSon(objJSONData);\r\n      }\r\n    };\r\n    reader.readAsText(fileTarget);\r\n    this.setState({loading:false});\r\n  };\r\n\r\n  respondToSaveRequest = (fileName) => {\r\n    this.setState({ showMsg: false });\r\n    let blob;\r\n    if (versionDetails().saveEncrypt === false)\r\n      // regular text file\r\n      blob = new Blob([JSON.stringify(this.state.dataInput)], {\r\n        type: \"text/plain;charset=utf-8\",\r\n      });\r\n    else blob = new Blob([this.dataQS], { type: \"text/plain;charset=utf-8\" });\r\n\r\n    // iphone\r\n    var iOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\r\n    if (fileName !== \"\") {\r\n      if (iOS === false) {\r\n        // works on IE and Edge to save file, would also work on Chrome, Firedox for desktop\r\n        saveAs(\r\n          blob,\r\n          fileName === undefined\r\n            ? \"INASavedData.json\"\r\n            : fileName + (APPLET_INA ? INA_FILE_TYPE : EP_FILE_TYPE) //\".json\"\r\n        );\r\n        //saveAs(blob, fileName===undefined?\"INASavedData.json\":prompt('Please enter file name:'))\r\n      } else {\r\n        // Chrome, Firefox, and Chrome and Safari on iOS\r\n        //var dataUrl = JSON.stringify(this.state);\r\n        //var open = window.open(dataUrl);\r\n        //if (open === null || typeof (open) === 'undefined') {\r\n        blob = new Blob([JSON.stringify(this.state.dataInput)]);\r\n        saveAs(\r\n          blob,\r\n          fileName === undefined\r\n            ? \"INASavedData.json\"\r\n            : \"SignInINASavedData.json\"\r\n        );\r\n        //      var blobUrl = URL.createObjectURL(blob)\r\n        //      window.location.href = blobUrl;\r\n        //\t }\r\n      }\r\n    }\r\n  };\r\n\r\n  saveToFile_OLD = () => {\r\n    const blob = new Blob([JSON.stringify(this.state.dataInput)], {\r\n      type: \"text/plain;charset=utf-8\",\r\n    });\r\n    saveAs(blob, \"INASavedData.json\");\r\n  };\r\n\r\n  saveToFile = (fileName) => {\r\n    if (versionDetails().saveEncrypt === false)\r\n      // regular text file\r\n      this.respondToSaveRequest(\"fileINA\");\r\n    else {\r\n      this.handleQueryString(\r\n        MODE_SAVE,\r\n        this.state.dataInput,\r\n        this.state.dataOutput\r\n      );\r\n    }\r\n  };\r\n\r\n  loadData = () => {\r\n    let fails = fetchTimerAPICheck();\r\n    if (fails > 1) this.setState({ failedAPI: true });\r\n  };\r\n\r\n  respondToPopUp = () => {\r\n    this.saveToStorage();\r\n\r\n    let urlReload = PARENT_SITE_PROD + \"?ina=\" + shortid.generate();\r\n    const url2 = window.location.href;\r\n\r\n    if (url2.indexOf(SITE_TEST) !== -1)\r\n      urlReload = PARENT_SITE_TEST + \"?ina=\" + shortid.generate();\r\n\r\n    const urlLogoff = \"https://adfs.ppi.ca/adfs/ls/?wa=wsignout1.0\";\r\n    //\tif(fails>1){\r\n    //localStorage.setItem('INAAPIFails', parseInt(0));\r\n    window.parent.location.href = urlLogoff;\r\n    //\t}\r\n    //\telse\r\n    {\r\n      window.parent.location.href = urlReload;\r\n    }\r\n  };\r\n\r\n  EmailINA = () => {\r\n    // test\r\n\r\n    this.handleQueryString(\r\n      MODE_EMAIL,\r\n      this.state.dataInput,\r\n      this.state.dataOutput\r\n    );\r\n    //window.location.href ='mailto: msamiei@ppi.ca ?subject= Needs Analysis Quote &body=' + this.dataQS;\r\n  };\r\n  /* \tcallAPI2 = (e) => {\r\n\t\t\r\n\t\tif (!this.resultIsOpen){\r\n\t\t\tthis.handleFetchInsuranceNeeds();\r\n\t\t}\r\n\t\tif(this.accessedAPI){\r\n\t\t\tthis.resultIsOpen = !e;\r\n\t\t}\r\n\t\t\t\r\n\t}\r\n\tcallAPI = (e) => {\r\n\t\tthis.callAPI2(e);\r\n\t}\r\n */\r\n  callCalculateResultsAPI = (e) => {\r\n    \r\n    if (!this.resultIsOpen)\r\n      //this.handleUpdataData();\r\n      this.resultIsOpen = !e;\r\n  };\r\n\r\n  adjustVisibleOutputSection = (unit) => {\r\n    this.visibleOutputSection = this.visibleOutputSection + unit;\r\n    \r\n  };\r\n\r\n  hasPersonalResidenceAlready = () => {\r\n    let PR = this.state.dataInput.Assets.find(\r\n      (x) => x.assetTypeKey === ASSETS.PERSONAL_RESIDENCE.Key\r\n    );\r\n\r\n    return PR !== undefined;\r\n  };\r\n\r\n  handleCollapsibleClick = async (collapsible) => {\r\n    if (collapsible.id === COLLAPSIBLE_RESULTS) {\r\n      this.adjustVisibleOutputSection(\r\n        this.openCollapsible[COLLAPSIBLE_RESULTS].open ? -1 : 1\r\n      );\r\n\r\n      this.callCalculateResultsAPI(collapsible.open);\r\n    }\r\n    if (collapsible.id === COLLAPSIBLE_SOURCES) {\r\n      // recheck gov\r\n      // await this.govBenefits();\r\n    }\r\n   // this.setState({failedRemove : false});\r\n\r\n    this.openCollapsible[collapsible.id].open = !collapsible.open;\r\n     \r\n  };\r\n\r\n  setOutput = (e) => {\r\n    // Internet Explorer 6-11\r\n    let isIE = /*@cc_on!@*/ false || !!document.documentMode;\r\n\r\n    if (isIE)\r\n      alert(MESSAGES[this.state.dataInput.Presentations[0].language].ie);\r\n    else this.graphs = e === 2 ? true : false;\r\n    this.setState({ loading: false });\r\n  };\r\n\r\n  /* setInsduration = e => {\r\n    this.toRetirement = e === 1 ? true : false;\r\n    this.setState({ loading: false }, () =>\r\n      this.waitForSetStateCallback(0, 1)\r\n    );\r\n  }; */\r\n\r\n  selectMultiButtonPeriod = (e) => {\r\n    // selection is 1-based\r\n    let pres = this.copyPresentation();\r\n    if (e === DISPLAY_RETIREMENT + 1) {\r\n      pres.periodOption = DISPLAY_RETIREMENT;\r\n    } else if (e === DISPLAY_LIFEEXP + 1) {\r\n      pres.periodOption = DISPLAY_LIFEEXP;\r\n    } else if (e === DISPLAY_ENDAGE + 1) {\r\n      pres.periodOption = DISPLAY_ENDAGE;\r\n    } else if (e === DISPLAY_LIFEEXP_PLUS_3 + 1) {\r\n      pres.periodOption = DISPLAY_LIFEEXP_PLUS_3;\r\n    }\r\n    const noRecalc = false;\r\n    this.handleUpdatePresentationChange(pres, noRecalc);\r\n  };\r\n\r\n  selectMultiButton = (e) => {\r\n    //let pres = this.state.dataInput.Presentations;\r\n    let pres = this.copyPresentation();\r\n\r\n    if (e === DISPLAY_SPREADSHEET) {\r\n      pres.resultsOption = DISPLAY_SPREADSHEET;\r\n    } else if (e === DISPLAY_GRAPHS) {\r\n      pres.resultsOption = DISPLAY_GRAPHS;\r\n    } else if (e === DISPLAY_ANALYSIS) {\r\n      pres.resultsOption = DISPLAY_ANALYSIS;\r\n      pres.periodOption = DISPLAY_ENDAGE;\r\n      // try this now\r\n      pres.resultsOption = DISPLAY_LIFEEXP_PLUS_3;\r\n      pres.periodOption = DISPLAY_LIFEEXP_PLUS_3;\r\n    } else {\r\n      pres.resultsOption = DISPLAY_PRESENTATION;\r\n      //periodOption = DISPLAY_RETIREMENT;\r\n    }\r\n    // these don't require rescalc or resync\r\n    const noRecalc = true;\r\n    this.handleUpdatePresentationChange(pres, noRecalc);\r\n    //this.setState({ Presentations: pres });\r\n  };\r\n\r\n  selectMultiButtonINAorTax = (e) => {\r\n    if (e === DISPLAY_TAXLIAB) {\r\n      this.INAOption = DISPLAY_TAXLIAB;\r\n      // }else if (e === DISPLAY_TAXLIAB_JLTD) {\r\n      //  this.INAOption = DISPLAY_TAXLIAB_JLTD;\r\n    } else if (e === DISPLAY_INCOME) {\r\n      this.INAOption = DISPLAY_INCOME;\r\n    }\r\n    let l = this.state.loading;\r\n    l = !l;\r\n    this.setState({ loading: l });\r\n  };\r\n\r\n  hideEstateRemoveMsg =   () => {\r\n    this.setState({failedRemove : false});\r\n  };\r\n\r\n  imageRemove = () => {\r\n    this.setState((prevState) => ({\r\n      dataInput: {\r\n        ...prevState.dataInput,\r\n        Presentations: [\r\n          {\r\n            ...prevState.dataInput.Presentations[0],\r\n            adviserLogo: {\r\n              image: null,\r\n              left: 0,\r\n              size: 90,\r\n              allPages: false,\r\n              showDetails: false,\r\n            },\r\n          },\r\n        ],\r\n      },\r\n    }));\r\n  };\r\n\r\n  imageAdjust = (image, ID) => {\r\n    if (ID === IMAGE_LOGO)\r\n      this.setState((prevState) => ({\r\n        dataInput: {\r\n          ...prevState.dataInput,\r\n          Presentations: [\r\n            {\r\n              ...prevState.dataInput.Presentations[0],\r\n              adviserLogo: image,\r\n            },\r\n          ],\r\n        },\r\n      }));\r\n    else\r\n      this.setState((prevState) => ({\r\n        dataInput: {\r\n          ...prevState.dataInput,\r\n          Presentations: [\r\n            {\r\n              ...prevState.dataInput.Presentations[0],\r\n              appletImage: image,\r\n            },\r\n          ],\r\n        },\r\n      }));\r\n  };\r\n\r\n  render() {\r\n    /* if (this.state.initialLoading === true) {\r\n      return (\r\n        <div style={{ marginTop: \"60px\", marginLeft: \"90px\" }}>\r\n          <Loader type=\"TailSpin\" color=\"black\" height={30} width={30} />\r\n        </div>\r\n      );\r\n    } */\r\n  \r\n    let i = 1;\r\n    let j = 1;\r\n    let k = 1;\r\n    let l = 1;\r\n    let n = 1;\r\n    let v = 1;\r\n\r\n     const showInput = this.state.showMsg;\r\n\r\n    const dataInput = this.state.dataInput;\r\n    const lang = dataInput.Presentations[0].language;\r\n    const pres =\r\n    lang === \"en\"\r\n      ? \"Presentation\"\r\n      : \"Présentation\";\r\n  const gr =\r\n    lang === \"en\"\r\n      ? \"Graphs\"\r\n      : \"graphique\";\r\n  const ret =\r\n    lang === \"en\"\r\n      ? \"Retirement\"\r\n      : \"Retraite\";\r\n  const le =\r\n    lang === \"en\"\r\n      ? \"Life Expectancy\"\r\n      : \"Espérance de vie\";\r\n\r\n  \r\n    /*  if (this.dataInsuranceNeeds.length > 0) {\r\n      insNeed = this.toRetirement\r\n        ? this.dataInsuranceNeeds[0].Value\r\n        : this.dataInsuranceNeeds[1].Value;\r\n      insNeedRet = this.dataInsuranceNeeds[0].Value;\r\n      insNeedLE = this.dataInsuranceNeeds[1].Value;\r\n    }\r\n    */\r\n    const dataOutput = this.state.dataOutput;\r\n    const insuranceNeeds = this.state.dataOutput.dataInsuranceNeeds;\r\n    const periodOption = dataInput.Presentations[0].periodOption;\r\n\r\n    /* \r\n /* \r\n    /* \r\n /* \r\n    /* \r\n /* \r\n    /* \r\n /* \r\n    /* \r\n /* \r\n    /* \r\n /* \r\n    /* \r\n \r\n let insNeed = 0;\r\n    let insNeedRet = 0;\r\n    let insNeedLE = 0;\r\n    let insNeedLE3 = 0;\r\n    let insNeedEAge = 0;\r\n    if (insuranceNeeds.length > 0) {\r\n      insNeed =\r\n        periodOption === DISPLAY_RETIREMENT\r\n          ? insuranceNeeds[DISPLAY_RETIREMENT].Value\r\n          : periodOption === DISPLAY_LIFEEXP\r\n          ? insuranceNeeds[DISPLAY_LIFEEXP].Value\r\n          : periodOption === DISPLAY_LIFEEXP_PLUS_3\r\n          ? getINA_LifeExp_Plus_yrs(\r\n              insuranceNeeds[DISPLAY_LIFEEXP].Value,\r\n              dataOutput.dataShortfall,\r\n              dataInput.Presentations[0].invRate,\r\n              dataOutput.lifeExpectancy.spouse,\r\n              3\r\n            )\r\n          : insuranceNeeds[DISPLAY_ENDAGE].Value;\r\n      insNeedRet = insuranceNeeds[DISPLAY_RETIREMENT].Value;\r\n      insNeedLE = insuranceNeeds[DISPLAY_LIFEEXP].Value;\r\n      insNeedEAge = insuranceNeeds[DISPLAY_ENDAGE].Value;\r\n      insNeedLE3 =\r\n        dataOutput.dataShortfall !== undefined\r\n          ? getINA_LifeExp_Plus_yrs(\r\n              insuranceNeeds[DISPLAY_LIFEEXP].Value,\r\n              dataOutput.dataShortfall,\r\n              dataInput.Presentations[0].invRate,\r\n              dataOutput.lifeExpectancy.joint,\r\n              3\r\n            )\r\n          : insNeed;\r\n    } */\r\n\r\n    const projYears = familyProjectionYears(\r\n      dataInput.Clients,\r\n      periodOption,\r\n      dataOutput.lifeExpectancy,\r\n      insuranceNeeds,\r\n      dataOutput.dataShortfall,\r\n      dataInput.Presentations[0]\r\n    );\r\n    const insNeed = projYears.insuranceNeed;\r\n    const insNeedRet = projYears.insuranceNeedToRet;\r\n    const insNeedLE = projYears.insuranceNeedToLE;\r\n    const insNeedLE3 = projYears.insuranceNeedToLE3;\r\n    const insNeedEAge = projYears.insuranceNeedToEnd;\r\n\r\n    const projectEnd = projYears.projectionEnd;\r\n    const noProjectYrs = projYears.noProjectionYrs;\r\n    const survAge = projYears.survivorAge;\r\n\r\n    const singleFamily = isSingleFamily(dataInput.Clients);\r\n    if (singleFamily) { // this is protection period now\r\n      dataInput.Presentations[0].periodOption = DISPLAY_RETIREMENT\r\n    }\r\n    const noSurvivor = dataInput.Clients.length === 1;\r\n    const insNeedLine = getInsNeedLine(\r\n      dataInput.Presentations[0],\r\n      projectEnd,\r\n      lang,\r\n      noSurvivor,\r\n      singleFamily,\r\n      noProjectYrs,\r\n      insNeed,\r\n      dataInput.Clients[0].Name\r\n    );\r\n\r\n    // if  singleFamily show years instead of ages as no children may be >1\r\n    if (singleFamily) {\r\n      dataOutput.dataNAAges = [];\r\n      for (let i = 0; i < noProjectYrs; i++) dataOutput.dataNAAges.push(i + 1);\r\n\r\n    }\r\n    /* let projectEnd = 65;\r\n    let noProjectYrs = 0;\r\n    let survAge;\r\n    \r\n    if (this.survIdx >= dataInput.Clients.length) this.survIdx = undefined;\r\n    if (this.survivorExists(dataInput.Clients.length)) {\r\n      projectEnd =\r\n        periodOption === DISPLAY_RETIREMENT\r\n          ? dataInput.Clients[this.survIdx].retirementAge\r\n          : periodOption === DISPLAY_LIFEEXP\r\n          ? dataOutput.lifeExpectancy.spouse +\r\n            dataInput.Clients[this.survIdx].Age\r\n          : periodOption === DISPLAY_ANALYSIS\r\n          ? dataOutput.lifeExpectancy.joint +\r\n            dataInput.Clients[this.survIdx].Age +\r\n            3\r\n          : 100;\r\n      noProjectYrs = projectEnd - dataInput.Clients[this.survIdx].Age;\r\n      survAge = dataInput.Clients[this.survIdx].Age;\r\n    } else survAge = dataInput.Clients[QUOTE_CLIENT].Age;\r\n */\r\n\r\n    //  let hasSurivor = false;\r\n    /*     const spKey = APPLET_INA ? MEMBER.SPOUSE.Key : MEMBER.CLIENT.Key;\r\n        let Survivor = dataInput.Clients.find(x => x.memberKey === spKey);\r\n    \r\n        if (Survivor !== undefined && APPLET_INA) {\r\n          if (dataInput.Clients.length === 1)\r\n            Survivor = dataInput.Clients.find(x => x.memberKey === MEMBER.CLIENT.Key);\r\n          else {\r\n            Survivor = dataInput.Clients.find(x => x.memberKey === MEMBER.DEPENDENT_ADULT.Key);\r\n            if (Survivor !== undefined)\r\n              Survivor = dataInput.Clients.find(x => x.memberKey === MEMBER.CHILD.Key);\r\n    \r\n    \r\n          }\r\n    \r\n        }\r\n    \r\n        if (Survivor !== undefined || APPLET_EP) {\r\n          hasSurivor = true;\r\n        }\r\n     */\r\n    // if file is PYE\r\n    if (dataInput.Clients.length === 1) this.survIdx = 0;\r\n\r\n    const Survivor = this.state.dataInput.Clients[this.survIdx]; //.find(x => x.memberKey === spKey);\r\n    /* if (Survivor !== undefined) {\r\n      hasSurivor = true;\r\n    }\r\n\r\n    if (this.survIdx !== undefined) hasSurivor = true; */\r\n    const inputOutputIsValid =\r\n      insuranceNeeds.length > 0 &&\r\n      dataOutput.dataNAAges !== undefined &&\r\n      Survivor !== undefined;\r\n\r\n    //Survivor !== undefined\r\n\r\n    if (this.state.failedAPI) console.log(\"timer API call failed re ADSF\");\r\n\r\n    let dataAges;\r\n    let dataGov;\r\n    let dataPCV;\r\n    let dataNeed;\r\n    let dataShort;\r\n    let buttonCaption;\r\n    let buttonCaption3;\r\n    let buttonCaptionPeriod;\r\n    /* let gridColumnAligns;\r\n    let dataTitle;\r\n    let dataColHeaders;\r\n    let gridColumnNoofDecimals;\r\n    let dataColumns;\r\n    let excelDataInfoSection; */\r\n    let tableWidth;\r\n    let dataEstateLiability;\r\n    let aggregateGrid;\r\n\r\n    buttonCaption = [\r\n      TITLES[lang].presBut,\r\n      TITLES[lang].graphsBut,\r\n      TITLES[lang].spreadsheetBut,\r\n      TITLES[lang].analysisBut,\r\n    ];\r\n    buttonCaption3 = [\r\n      TITLES[lang].presBut,\r\n      TITLES[lang].graphsBut,\r\n      TITLES[lang].spreadsheetBut,\r\n    ];\r\n    buttonCaptionPeriod = [\r\n      TITLES[lang].retBut,\r\n      TITLES[lang].leBut,\r\n      TITLES[lang].age100But,\r\n    ];\r\n\r\n    if (\r\n      this.survIdx !== undefined &&\r\n      dataInput.Clients[this.survIdx].memberKey !== MEMBER.SPOUSE.Key &&\r\n      dataInput.Clients[this.survIdx].memberKey !== MEMBER.CLIENT.Key\r\n    )\r\n      buttonCaptionPeriod = [TITLES[lang].protectButton];\r\n    if (inputOutputIsValid) {\r\n      // project liabs\r\n      var totalLiabProjections = getProjectedLiabilities(\r\n        dataInput,\r\n        projectEnd,\r\n        dataOutput.probate\r\n      );\r\n\r\n      dataAges = dataOutput.dataNAAges.slice(0, noProjectYrs);\r\n      dataGov = dataOutput.dataCashFlowGov.slice(0, noProjectYrs);\r\n      dataPCV = dataOutput.dataCashFlowPersonal.slice(0, noProjectYrs);\r\n      // if(this.INAOption!==DISPLAY_INCOME)\r\n      dataEstateLiability = getDataFutureEstateLiability(\r\n        //getDataFutureEstateLiability(this.dataTaxLiability.numericValues, totalLiabProjections).slice(0, noProjectYrs);\r\n        dataOutput.dataTaxLiability,\r\n        totalLiabProjections\r\n      );\r\n      dataNeed = dataOutput.dataCashFlowNeeds.slice(0, noProjectYrs);\r\n      dataShort = dataOutput.dataShortfall.slice(0, noProjectYrs);\r\n\r\n      let dataSurvivorSalaryIncome = dataInput.Sources.find(\r\n        (x) => x.sourceTypeKey === INCOMESOURCES.SURVIVORS_INCOME\r\n      );\r\n      if (dataSurvivorSalaryIncome !== undefined) {\r\n        dataSurvivorSalaryIncome.reduce((a, b) => a + b, 0);\r\n      }\r\n      dataSurvivorSalaryIncome = dataOutput.dataShortfall.slice(\r\n        0,\r\n        noProjectYrs\r\n      );\r\n\r\n      \r\n  \r\n      if (dataOutput.aggregateGrid != undefined)\r\n        tableWidth =\r\n          Math.min(\r\n            100,\r\n            10 * this.state.dataOutput.aggregateGrid.dataColTitles.length\r\n          ) + \"%\";\r\n\r\n      // MCC quote\r\n      // dataMCC= INAMCCQuote(this.state,insNeed);\r\n    }\r\n\r\n    const altRow = \"#F8F8F8\";\r\n\r\n    const graphs = (\r\n      <OutputGraphs\r\n        insuranceNeed={insNeed}\r\n        projectEnd={projectEnd}\r\n        dataCashFlowPersonal={dataPCV}\r\n        dataInput={dataInput}\r\n        dataNAAges={dataAges}\r\n        dataCashFlowNeeds={dataNeed}\r\n        dataCashFlowGov={dataGov}\r\n        dataShortfall={dataShort}\r\n        insNeedLine={insNeedLine}\r\n        aggregateGrid={dataOutput.aggregateGrid}\r\n        LE={dataOutput.lifeExpectancy.spouse} // + survAge}\r\n        //language={lang}\r\n        //projectTo={this.toRetirement ? 0 : 1}\r\n\r\n        periodOption={periodOption}\r\n        /* projectTo={\r\n        periodOption === DISPLAY_RETIREMENT\r\n          ? DISPLAY_RETIREMENT\r\n          : periodOption === DISPLAY_LIFEEXP\r\n            ? DISPLAY_LIFEEXP\r\n            : DISPLAY_ENDAGE\r\n      } */\r\n      />\r\n    );\r\n    const graphsEP = (\r\n      <OutputGraphsEP\r\n        insuranceNeed={insNeedLE3}\r\n        projectEnd={projectEnd} // try this now // always to the end\r\n        dataEstateLiability={dataEstateLiability}\r\n        dataInput={dataInput}\r\n        dataNAAges={dataAges}\r\n        lifeExp={dataOutput.lifeExpectancy.joint} // client or if spouse JLTD\r\n        lifeExpJLTD={dataOutput.lifeExpectancy.joint}\r\n        lifeExpClient={dataOutput.lifeExpectancy.client}\r\n        probate={dataOutput.probate}\r\n        INAOption={this.INAOption}\r\n        //dataShortfall={dataShort}\r\n        //dataAPISite={appSiteAPI}\r\n        LE={dataOutput.lifeExpectancy.spouse} // + survAge}\r\n        assetProjections={dataOutput.assetProjections}\r\n        //language={lang}\r\n        //projectTo={this.toRetirement ? 0 : 1}\r\n        // periodOption={DISPLAY_LIFEEXP_PLUS_3}\r\n      />\r\n    );\r\n\r\n    const analysis = (\r\n      <div\r\n        style={{\r\n          marginTop: \"-4px\",\r\n          backgroundColor: \"lightgrey\",\r\n          paddingLeft: \"5px\",\r\n        }}\r\n      >\r\n        <AnalysisGraphs\r\n          insuranceNeed={insNeedLE3}\r\n          projectEnd={projectEnd} // try this now // always to the end\r\n          dataEstateLiability={dataEstateLiability}\r\n          dataInput={dataInput}\r\n          dataNAAges={dataAges}\r\n          lifeExp={dataOutput.lifeExpectancy.spouse}\r\n          lifeExpJLTD={dataOutput.lifeExpectancy.joint}\r\n          lifeExpClient={dataOutput.lifeExpectancy.client}\r\n          INAOption={this.INAOption}\r\n          dataShortfall={dataShort}\r\n          dataAPISite={appSiteAPI}\r\n          language={lang}\r\n          //projectTo={this.toRetirement ? 0 : 1}\r\n          periodOption={DISPLAY_LIFEEXP_PLUS_3}\r\n          //projectTo={this.lifeExp + 3} // always to the end\r\n          /* periodOption === DISPLAY_RETIREMENT\r\n          ? 0\r\n          : periodOption === DISPLAY_LIFEEXP\r\n          ? 1\r\n          : 2\r\n      } */\r\n        />\r\n      </div>\r\n    );\r\n\r\n    let infoIcon = getGenericMessage(lang);\r\n    infoIcon.infoText = getInfoIconSourcesGov(lang).infoText;\r\n    const govPopup = this.state.failedRemove && (\r\n      <div style={{ paddingLeft: \"45%\" }}>\r\n        {\" \"}\r\n        <Info infoIcon={infoIcon} respondToPopUp={this.hideEstateRemoveMsg} />\r\n      </div>\r\n    );\r\n\r\n    //const singleFamily = isSingleFamily(dataInput.Clients); //this.survivorExists(dataInput.Clients.length) &&\r\n    //dataInput.Clients[this.survIdx].memberKey !==\r\n    //  MEMBER.SPOUSE.Key;\r\n    const noSources = dataInput.Sources.length;\r\n\r\n     return (\r\n      <div id=\"main\" className={this.state.initialLoading === true? \"mainDivBlocked\":\"mainDiv\"}>\r\n        <style>{`@media print {display: none;}`}</style>\r\n        <Header\r\n          title={\r\n            this.INAOption === DISPLAY_INCOME\r\n              ? TITLES[lang].appletINA\r\n              : TITLES[lang].appletEP\r\n          }\r\n          saveToFile={this.saveToFile}\r\n          loadFromFile={this.loadFromFile}\r\n          loadStorage={this.loadStorage}\r\n          EmailINA={this.EmailINA}\r\n          changeLang={this.changeLang}\r\n          saveAsDefaultCase={this.saveAsDefaultCase}\r\n          language={lang}\r\n        />\r\n\r\n        {/* <div style={{marginTop:'15px'}} ><MultiButtons\r\n        \r\n          noButtons={2}\r\n          buttonCaption={[\"Income Protection\", \"Estate Protection\"]}\r\n          selectMultiButton={this.selectMultiButtonINAorTax}\r\n        /></div>\r\n         */}\r\n\r\n        <div className=\"topMargin\" />\r\n\r\n        <div style={{ height: \"0px\" }}>\r\n          <PopupUserinputDialog\r\n            openDialog={showInput === true}\r\n            language={lang}\r\n            respondToInput={this.respondToSaveRequest}\r\n          />\r\n        </div>\r\n        <Collapsible\r\n          id={COLLAPSIBLE_PRESENTATION}\r\n          title={TITLES[lang].presentations}\r\n          openParent={this.openParent}\r\n          openCollapsible={this.openCollapsible[COLLAPSIBLE_PRESENTATION]}\r\n          handleCollapsibleClick={this.handleCollapsibleClick}\r\n        >\r\n          {dataInput.Presentations.map((presentation) => (\r\n            <Presentation\r\n              key={presentation.id}\r\n              id={1}\r\n              provinceKey={presentation.provinceKey}\r\n              presentationCurr={presentation}\r\n              language={lang}\r\n              presentationsNo={1}\r\n              //saveAsDefaultCase={this.saveAsDefaultCase}\r\n              handleUpdate={this.handleUpdatePresentation}\r\n            />\r\n          ))}\r\n        </Collapsible>\r\n        <Collapsible\r\n          id={COLLAPSIBLE_CLIENTS}\r\n          title={TITLES[lang].clients}\r\n          openParent={this.openParent}\r\n          openForce={this.openForce}\r\n          handleCollapsibleClick={this.handleCollapsibleClick}\r\n          openCollapsible={this.openCollapsible[COLLAPSIBLE_CLIENTS]}\r\n          infoIcon={APPLET_EP?getInfoIconPYE_JLTD(lang):undefined}\r\n        >\r\n          {dataInput.Clients.map((client) => (\r\n            <Client\r\n              key={client.id}\r\n              id={i++}\r\n              clientCurr={client}\r\n              singleFamily={singleFamily}\r\n              isTheSurvivor={\r\n                (this.survIdx !== undefined &&\r\n                  dataInput.Clients[this.survIdx].memberKey ===\r\n                    client.memberKey) ||\r\n                (singleFamily && client.id > 1)\r\n                  ? true\r\n                  : false\r\n              }\r\n              themeColor={i % 2 && isMobileDevice() ? altRow : \"white\"}\r\n              language={lang}\r\n              isQC={dataInput.Presentations[0].provinceKey === \"QC\"}\r\n              clientsNo={dataInput.Clients.length} //clientsNo}\r\n              handleUpdate={this.handleUpdateClient}\r\n              handleAddClient={this.handleAddClient}\r\n              handleRemoveClient={this.handleRemoveClient}\r\n              switchClients={this.switchClients}\r\n              disableAddRemove={this.state.loading}\r\n            />\r\n          ))}\r\n        </Collapsible>\r\n\r\n        <Collapsible\r\n          id={COLLAPSIBLE_ASSETS}\r\n          title={TITLES[lang].assets}\r\n          openParent={this.openParent}\r\n          openCollapsible={this.openCollapsible[COLLAPSIBLE_ASSETS]}\r\n          handleCollapsibleClick={this.handleCollapsibleClick}\r\n        >\r\n          {dataInput.Assets.map((asset) => (\r\n            <Asset\r\n              key={asset.id}\r\n              assetCurr={asset}\r\n              id={j++}\r\n              language={lang}\r\n              themeColor={j % 2 && isMobileDevice() ? altRow : \"white\"}\r\n              assetsNo={dataInput.Assets.length} //.assetsNo}\r\n              clientsNo={dataInput.Clients.length} //.assetsNo}\r\n              handleUpdate={this.handleUpdateAsset}\r\n              handleAddAsset={this.handleAddAsset}\r\n              handleRemoveAsset={this.handleRemoveAsset}\r\n             // handleAddAssetTaxLiability={this.handleAddAssetTaxLiability}\r\n              adjustVisibleOutputSection={this.adjustVisibleOutputSection}\r\n              hasPersonalResidenceAlready={this.hasPersonalResidenceAlready()}\r\n              projection={dataOutput.assetProjections}\r\n              disableAddRemove={this.state.loading}\r\n            />\r\n          ))}\r\n          {/* allow zero rows */}\r\n          {dataInput.Assets.length === 0 ? ( //).assetsNo === 0 ? (\r\n            <AddRemove\r\n              currentID={0}\r\n              minComps={0}\r\n              numberComps={0}\r\n              handleDoAdd={this.handleAddAsset}\r\n              handleDoRemove={this.handleRemoveAsset}\r\n            />\r\n          ) : (\r\n            \"\"\r\n          )}\r\n        </Collapsible>\r\n        <Collapsible\r\n          id={COLLAPSIBLE_LIABS}\r\n          title={TITLES[lang].liabilities}\r\n          openParent={this.openParent}\r\n          openCollapsible={this.openCollapsible[COLLAPSIBLE_LIABS]}\r\n          handleCollapsibleClick={this.handleCollapsibleClick}\r\n        >\r\n          {dataInput.Liabilitys.map((liability) => (\r\n            <Liability\r\n              key={liability.id}\r\n              liabilityCurr={liability}\r\n              probate={dataOutput.probate}\r\n              language={lang}\r\n              liabilitysNo={dataInput.Liabilitys.length} //.liabilitysNo}\r\n              themeColor={k % 2 && isMobileDevice() ? altRow : \"white\"}\r\n              handleUpdate={this.handleUpdateLiability}\r\n              handleAddLiability={this.handleAddLiability}\r\n              handleRemoveLiability={this.handleRemoveLiability}\r\n             // handleAddAssetTaxCredit={this.handleAddAssetTaxCredit}\r\n              disableAddRemove={this.state.loading}\r\n            />\r\n          ))}\r\n          {/* allow zero rows */}\r\n          {dataInput.Liabilitys.length === 0 ? ( //).liabilitysNo === 0 ? (\r\n            <AddRemove\r\n              currentID={0}\r\n              minComps={0}\r\n              numberComps={0}\r\n              handleDoAdd={this.handleAddLiability}\r\n              handleDoRemove={this.handleRemoveLiability}\r\n            />\r\n          ) : (\r\n            \"\"\r\n          )}\r\n        </Collapsible>\r\n\r\n        {this.INAOption === DISPLAY_INCOME && (\r\n          <Collapsible\r\n            id={COLLAPSIBLE_SOURCES}\r\n            title={TITLES[lang].sources}\r\n            openParent={this.openParent}\r\n            openCollapsible={this.openCollapsible[COLLAPSIBLE_SOURCES]}\r\n            handleCollapsibleClick={this.handleCollapsibleClick}\r\n            infoIcon={getInfoIconInflationGrowth(lang)}\r\n          >\r\n            {govPopup}\r\n            {dataInput.Sources.map((source) => {\r\n                let OrphanAges;\r\n              let maxOrphanDur;\r\n              if (\r\n                source.sourceTypeKey === INCOMESOURCES.GOV_ORPHANS_BENEFIT.Key\r\n              ) {\r\n                OrphanAges = dataInput.Clients.filter(function (item) {\r\n                  return source.ownerID === item.id;\r\n                });\r\n                \r\n                if (OrphanAges.length > 0)\r\n                  maxOrphanDur =\r\n                    (dataInput.Presentations[0].provinceKey === \"QC\"\r\n                      ? MAX_ORPHAN_DUR_QC\r\n                      : MAX_ORPHAN_DUR_NON_QC) - OrphanAges[0].Age;\r\n              }\r\n              return (\r\n                /* !(source.amount === 0 && source.id < noSources && source.sourceTypeKey === INCOMESOURCES.SURVIVORS_INCOME.Key) && */ (\r\n                  <Source // notSurvivorWithZeroIncome and not new sources\r\n                    key={source.id}\r\n                    id={n++}\r\n                    sourceCurr={\r\n                      source.sourceTypeKey ===\r\n                      INCOMESOURCES.GOV_ORPHANS_BENEFIT.Key\r\n                        ? {\r\n                            ...source,\r\n                            maxOrphan: this.orphan,\r\n                            maxOrphanDur: maxOrphanDur,\r\n                          }\r\n                        : source\r\n                    }\r\n                    /* Type={source.Type}\r\n              amount={source.amount}\r\n              startYear={source.startYear}\r\n              duration={source.duration}\r\n              ownerID={source.ownerID} */\r\n                    includeGovOrphanBenefit={this.areThereChildren()}\r\n                    language={lang}\r\n                    sourcesNo={dataInput.Sources.length} //sourcesNo}\r\n                    themeColor={n % 2 && isMobileDevice() ? altRow : \"white\"}\r\n                    handleUpdate={this.handleUpdateSource}\r\n                    handleAddSource={this.handleAddSource}\r\n                    handleRemoveSource={this.handleRemoveSource}\r\n                    disableAddRemove={this.state.loading}\r\n                  />\r\n                )\r\n              );\r\n            })}\r\n          </Collapsible>\r\n        )}\r\n        {this.INAOption === DISPLAY_INCOME && (\r\n          <Collapsible\r\n            id={COLLAPSIBLE_NEEDS}\r\n            title={TITLES[lang].needs}\r\n            openParent={this.openParent}\r\n            openCollapsible={this.openCollapsible[COLLAPSIBLE_NEEDS]}\r\n            handleCollapsibleClick={this.handleCollapsibleClick}\r\n            infoIcon={getInfoIconNeedGrowth(lang)}\r\n            \r\n          >\r\n            {dataInput.Needs.map((need) => (\r\n              <Need\r\n                key={need.id}\r\n                id={l++}\r\n                needCurr={need}\r\n                language={lang}\r\n                needsNo={dataInput.Needs.length} //needsNo}\r\n                afterTaxTotalIncome={this.getAfterTaxTotalIncome(dataInput)}\r\n                themeColor={l % 2 && isMobileDevice() ? altRow : \"white\"}\r\n                handleUpdate={this.handleUpdateNeed}\r\n                handleAddNeed={this.handleAddNeed}\r\n                handleRemoveNeed={this.handleRemoveNeed}\r\n                disableAddRemove={this.state.loading}\r\n              />\r\n            ))}\r\n          </Collapsible>\r\n        )}\r\n        {/*<Collapsible id=\"8\" title={TITLES[lang].settings} openParent={this.openParent}  handleCollapsibleClick\r\n={this. handleCollapsibleClick\r\n}>\r\n\t\t\t\t\t<Setting key={this.state.dataSettings.Settings.id} index={1} Province={this.state.dataSettings.Settings.Province} invRate={this.state.dataSettings.Settings.invRate} inflation={this.state.dataSettings.Settings.inflation} taxRate={this.state.dataSettings.Settings.taxRate} language={lang}  handleUpdate={this.handleUpdateSetting} />\r\n\t\t\t\t\t\r\n\t\t\t\t</Collapsible>*/}\r\n\r\n        {this.state.failedAPI ? (\r\n          <div style={{ paddingLeft: \"40%\" }}>\r\n            <Info\r\n              infoIcon={getInfoNoInternetAccess(lang)}\r\n              respondToPopUp={this.respondToPopUp}\r\n              ref={(Info) => (this.dlgLogin = Info)}\r\n            />\r\n          </div>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n\r\n{/* this.state.loading===false &&  */<Collapsible\r\n          id={COLLAPSIBLE_RESULTS}\r\n          title={TITLES[lang].results}\r\n          enabled={this.state.loading===false}\r\n          openParent={this.openParent}\r\n          openCollapsible={this.openCollapsible[COLLAPSIBLE_RESULTS]}\r\n          handleCollapsibleClick={this.handleCollapsibleClick}\r\n        >\r\n          \r\n          <div style={{ width: \"100%\", float: \"left\", clear: \"left\" }}>\r\n            {versionDetails().allowAnalysis === true && !APPLET_INA ? (\r\n              <MultiButtons\r\n                noButtons={4}\r\n                buttonCaption={buttonCaption}\r\n                selected={dataInput.Presentations[0].resultsOption}\r\n                selectMultiButton={this.selectMultiButton}\r\n              />\r\n            ) : (\r\n              <MultiButtons\r\n                noButtons={3}\r\n                buttonCaption={buttonCaption3}\r\n                selected={dataInput.Presentations[0].resultsOption}\r\n                selectMultiButton={this.selectMultiButton}\r\n              />\r\n            )}\r\n          </div>\r\n\r\n          <div style={{ width: \"100%\", float: \"left\", clear: \"left\" }}>\r\n            {/* <MultiButtons\r\n              button1={ret}\r\n              button2={le}\r\n              buttonActive={this.toRetirement ? 1 : 2}\r\n              selectButton={this.setInsDuration}\r\n            /> */}\r\n            {this.INAOption === DISPLAY_INCOME &&\r\n              dataInput.Presentations[0].resultsOption !== DISPLAY_ANALYSIS &&\r\n              !singleFamily && (\r\n                <MultiButtons\r\n                  noButtons={3}\r\n                  buttonCaption={buttonCaptionPeriod}\r\n                  selected={dataInput.Presentations[0].periodOption + 1}\r\n                  selectMultiButton={this.selectMultiButtonPeriod}\r\n                />\r\n              )}\r\n\r\n            {periodOption !== DISPLAY_RETIREMENT &&\r\n              dataInput.Presentations[0].resultsOption !== DISPLAY_ANALYSIS && (\r\n                <span style={{ fontSize: \"10px\", fontColor: \"grey\" }}>\r\n                  {/* <Info iconName=\"infoRed.png\" id=\"warning\" msg={msg1} /> */}\r\n                </span>\r\n              )}\r\n          </div>\r\n          {dataOutput.dataCashFlowPersonal.length === 0 ? (\r\n            \"\"\r\n          ) : dataInput.Presentations[0].resultsOption === DISPLAY_GRAPHS ? (\r\n            APPLET_INA ? (\r\n              graphs\r\n            ) : (\r\n              graphsEP\r\n            )\r\n          ) : dataInput.Presentations[0].resultsOption ===\r\n            DISPLAY_SPREADSHEET ? (\r\n            //<div style={{ width: tableWidth }}>\r\n            <div>\r\n              {/* {APPLET_INA && this.state.dataOutput.aggregateGrid !== null && this.state.dataOutput.aggregateGrid !== undefined ? */}\r\n              {\r\n                dataOutput.aggregateGrid !== null &&\r\n                  dataOutput.aggregateGrid !== undefined && (\r\n                    <AggregateGrid\r\n                      aggregateGrid={dataOutput.aggregateGrid}\r\n                      LE={APPLET_INA?dataOutput.lifeExpectancy.spouse:dataOutput.lifeExpectancy.joint}\r\n                      lang={lang}\r\n                      insNeedLine={insNeedLine}\r\n                    />\r\n                  )\r\n                \r\n              }\r\n              {/* : APPLET_EP && <ExcelSpreadsheetEP input={this.state} noProjectYrs={noProjectYrs} />} */}\r\n            </div>\r\n          ) : dataInput.Presentations[0].resultsOption === DISPLAY_ANALYSIS ? (\r\n            analysis\r\n          ) : this.INAOption === DISPLAY_INCOME ? (\r\n            <OutputPresentation\r\n              insuranceNeed={insNeed}\r\n              insuranceNeedRet={insNeedRet}\r\n              insuranceNeedLE={insNeedLE}\r\n              insuranceNeedEAge={insNeedEAge}\r\n              projectEnd={projectEnd}\r\n              insNeedLine={insNeedLine}\r\n              LE={dataOutput.lifeExpectancy.spouse + survAge}\r\n              dataInput={dataInput}\r\n              INAOption={this.INAOption}\r\n              dataShortfall={dataShort}\r\n              imageRemove={this.imageRemove}\r\n              imageAdjust={this.imageAdjust}\r\n              encryptedInputLife1AndSpouse={dataOutput.encryptedInputLife1AndSpouse}\r\n              encryptedInputLife1={dataOutput.encryptedInputLife1}\r\n              //periodOption={periodOption}\r\n              getSpouseINA={this.getSwitchClientsState}\r\n            />\r\n          ) : (\r\n            <OutputPresentationEP\r\n              //insuranceNeed={insNeed}\r\n              insuranceNeedRet={insNeedRet}\r\n              insuranceNeedLE={insNeedLE}\r\n              //insuranceNeedEAge={insNeedEAge}\r\n              //projectEnd={projectEnd}\r\n              LE={dataOutput.lifeExpectancy.joint}//client} //{dataOutput.lifeExpectancy.spouse + survAge}\r\n              dataInput={dataInput}\r\n              assetProjections={dataOutput.assetProjections}\r\n              aggregateGrid={dataOutput.aggregateGrid}\r\n              probate={dataOutput.probate}\r\n              INAOption={this.INAOption}\r\n              //dataEstateLiability={dataEstateLiability} //getDataFutureEstateLiability(this.dataTaxLiability.numericValues, totalLiabProjections)}\r\n              dataShortfall={dataShort}\r\n              imageRemove={this.imageRemove}\r\n              imageAdjust={this.imageAdjust}\r\n              //periodOption={periodOption}\r\n              encryptedInputLife1AndSpouse={dataOutput.encryptedInputLife1AndSpouse}\r\n              encryptedInputLife1={dataOutput.encryptedInputLife1}\r\n            />\r\n          )}\r\n        </Collapsible>}\r\n        {this.state.initialLoading === true &&\r\n        <div style={{ marginTop: \"20px\", marginLeft: \"90px\" }}>\r\n          <Loader type=\"TailSpin\" color=\"black\" height={30} width={30} />\r\n        </div>\r\n      }\r\n      {this.state.SnapImport?<PasteClients/>:\"\"}\r\n        <div id=\"copyDiv\" style={{paddingBottom: \"40px\"}}></div>\r\n        \r\n\r\n        {/*\t\t\t\t<DownloadExcel ref={this.excel}  id=\"DExcel\" downloadNow={this.state.downloadExcelNow} hideElement={true}/>\t\t\t\t\t\t\r\n\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n <button onPress={() => Linking.openURL('mailto:support@example.com?subject=SendMail&body=Description') }\r\n      title=\"support@example.com\" /> */}\r\n        <br />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\nimport { NA } from './components/NA';\r\nimport './App.css';\r\nimport {CacheBuster} from \"./CacheBuster\"\r\n\r\nexport default class App extends Component {\r\n\tdisplayName = \"PPI Toolkit Direct\";\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = { language: \"en\", loading:true };\r\n\t\tthis.langText = \"English\";\r\n\t}\r\n\r\n\tchangeLang = () => {\r\n\t\tvar data2 = this.state;\r\n\t\tvar oldLang = this.state.language;\r\n\t\tdata2.language = this.state.language === \"en\" ? \"fr\" : \"en\";\r\n\t\tthis.langText = this.state.language === \"en\" ? \"Fran�ais\" : \"English\";\r\n\t\tthis.setState({ data2, loading: false });// () => this.updateDataLang(oldLang));\r\n\t}\r\n\t\r\n\trender() {\r\n\r\n\t\treturn (\r\n\t\t\t<div> \r\n\t\t\t\t<NA />\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\t\t);\r\n\t  /* return (\r\n      {/* <CacheBuster>\r\n        {({ loading, isLatestVersion, refreshCacheAndReload }) => {\r\n          if (loading) return null;\r\n          if (!loading && !isLatestVersion) {\r\n            // You can decide how and when you want to force reload\r\n            refreshCacheAndReload();\r\n          } \r\n\r\n          return (*/}\r\n\t\t/* \t\t\t<NA />\r\n\t\t  \t\r\n          );\r\n\t\t */\r\n     /*     }}\r\n      </CacheBuster>\r\n    ); \r\n \r\n\r\n\t}*/\r\n}\r\n","\r\nimport './index.css';\r\nimport './components/NA.css';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport App from './App';\r\n//import registerServiceWorker from './registerServiceWorker';\r\n\r\nconst baseUrl = document.getElementsByTagName('base')[0].getAttribute('href');\r\nconst rootElement = document.getElementById('root');\r\n\r\nReactDOM.render(\r\n  \r\n  <BrowserRouter basename={baseUrl}>\r\n    <App />\r\n  </BrowserRouter>,\r\n  rootElement);\r\n\r\n//registerServiceWorker();\r\n","import { name, version } from \"../../package.json\";\r\nimport { SEX, SMOKING } from \"../definitions/generalDefinitions\";\r\nimport { QUOTE_CLIENT, QUOTE_SPOUSE, QUOTE_JOINT } from \"../definitions/generalDefinitions\";\r\n\r\nexport function readMCCData(dataInput, planID, client, insNeed) {\r\n   let dataLives = setLives(\r\n    client,\r\n    dataInput\r\n  );\r\n  let dataMCC = {\r\n    insured: {\r\n      lives: dataLives,\r\n      lifeStatus: client===QUOTE_JOINT?1:0\r\n    },\r\n    policy: {\r\n      planName: \"EquiBuild\",\r\n      carrierName: \"Industrial Alliance\",\r\n      planID: planID,\r\n      carrierID:5,\r\n      faceAmount: insNeed,\r\n      intRate: 0.0375,\r\n      province: dataInput.Presentations[0].Province,\r\n      objPremium: {\r\n        DepositMode: 1, //annual\r\n        PremCustom: false,\r\n        PremSet: false,\r\n        PremSolve: true,\r\n        PremSetDur: 50,\r\n        PremSolveDur: 99,\r\n        PremOffsetOn: false,\r\n        PremOffsetYear: 0\r\n      },\r\n      objCustomDB: {\r\n        solveForPremium_On: false,\r\n        solveForPUA_On: false,\r\n        solveRider_On: false,\r\n        customDB: []\r\n      },\r\n      objRider: {\r\n      T10: false,\r\n      T20: false,\r\n      ICO10: false,\r\n      ICO20: false,\r\n      T25: false,\r\n      T30: false,\r\n      T25Amt: 0.0,\r\n      T30Amt: 0.0,\r\n      T10Dur: 10,\r\n      T20Dur: 20,\r\n      T10Amt: 0.0,\r\n      T20Amt: 0.0\r\n    }\r\n    },\r\n    objPUA: {\r\n      MaxPUA: false,\r\n      MaxPUAAmt: 90000000.0,\r\n      BonusPUA: true,\r\n      FundPUA: false,\r\n      FundPUAAmt: 0.0,\r\n      FundPUADur: 10.0\r\n    },\r\n    outputOptions: {\r\n      extCoverage: false,\r\n      IRR_ERR: false,\r\n      outputColumnIDs: [0, 1, 2, 105, 14, 25]\r\n    },\r\n    generalInfo: {\r\n      designedFor: \"\",\r\n      designedBy: \"\",\r\n      language: dataInput.lang === \"en\" ? 0 : 1,\r\n      formatNumericOutput: true\r\n    }\r\n  };\r\n  return dataMCC;\r\n}\r\n\r\nfunction setLives(clientID, dataInput) {\r\n  let dataE = [];\r\n  let i;\r\n  // for calc purposes\r\n  if (clientID === QUOTE_SPOUSE)\r\n    dataE.push({\r\n      age: dataInput.Clients[1].Age,\r\n      sex: dataInput.Clients[1].sexKey === SEX.FEMALE.Key ? 1 : 0,\r\n      smk:\r\n        dataInput.Clients[1].smokerKey === SMOKING.SMOKER.Key ? \"S_STD\" : \"NS_STD\", //Smoker === SMOKING[lang].Values[1]\r\n          //? \"S_STD\"\r\n          //: \"NS_STD\",\r\n      rating: 100 //dataInput.Clients[1].Rating\r\n    });\r\n  else if (clientID === QUOTE_CLIENT)\r\n    dataE.push({\r\n      age: dataInput.Clients[0].Age,\r\n      sex: dataInput.Clients[0].sexKey === SEX.FEMALE.Key ? 1 : 0,\r\n      smk:\r\n        dataInput.Clients[0].smokerKey === SMOKING.SMOKER.Key ? \"S_STD\" : \"NS_STD\", //Smoker === SMOKING[lang].Values[1]\r\n          //? \"S_STD\"\r\n          //: \"NS_STD\",\r\n      rating: 100 //dataInput.Clients[0].Rating\r\n    });\r\n  else {\r\n    for (i = 0; i < dataInput.Clients.length; i++) {\r\n      dataE.push({\r\n        age: dataInput.Clients[i].Age,\r\n        sex: dataInput.Clients[i].sexKey === SEX.FEMALE.Key ? 1 : 0,\r\n        smk:\r\n          dataInput.Clients[i].smokerKey === SMOKING.SMOKER.Key ? \"S_STD\" : \"NS_STD\", //Smoker === SMOKING[lang].Values[1]\r\n            //? \"S_STD\"\r\n            //: \"NS_STD\",\r\n        rating: 100\r\n      });\r\n    }\r\n  }\r\n  return dataE;\r\n}\r\n"],"sourceRoot":""}