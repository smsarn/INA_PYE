{"version":3,"sources":["definitions/generalDefinitions.js","data/dataExchangeMCC.js","components/Collapsible.js","definitions/outputDefinitions.js","data/assetGridProjections.js","components/OutputPDFEP.js","definitions/infoIconsDefinitions.js","components/AdjustibleImage.js","components/Header.js","images/INA.png","images/estate.protection.applet.cover.graphic.png","components/inputField.js","utils/helper.js","components/PopupInfo.js","components/Info.js","components/PDF.js","data/createDefaults.js","utils/FetchAPIs.js","data/dataExchange.js","images/gridOff.png","images/gridOn.png","components/MultiButtons.js","components/NA.js","components/Client.js","components/Liability.js","components/Source.js","components/Need.js","components/Presentation.js","components/PopupUserInput.js","components/PasteClients.js","components/AggregateGrid.js","components/OutputGraphsEP.js","components/ProjectionGrid.js","components/ProjectionGrid1.js","components/GridButton.js","components/Asset.js","components/OutputGraphsEPLeakage.js","components/OutputGraphStacked.js","components/outputPresentationEP.js","components/OutputPDF.js","components/outputPresentation.js","components/OutputPDFINAAppendix.js","components/OutputGraphs.js","components/AnalysisGraph.js","images/info.png","images/infoLightBlue.png","images/infoWhite.png","images/infoRed.png","../node_modules/validatorjs/src/lang sync /^/.*$","components/GridExcelComponent/DownloadExcel.js","components/GridExcelComponent/ExcelToolbar.js","components/GridExcelComponent/DataTable.js","components/DropDown.js","components/AddRemove.js","definitions/outputDefinitionsEP.js","images/chooseButton.png","images/chooseButtonChrome.png","images/optionsEdge.png","images/optionsChrome.png","CacheBuster.js","App.js","index.js","data/aggregateGridProjections.js"],"names":["APPLET_INA","appletMode","APPLET_EP","DISPLAY_NAME","DEFAULT_QUOTE","QUOTE_CLIENT","QUOTE_SPOUSE","QUOTE_JOINT","FIRST_BENEFICIARY_ID","OUTPUT_WIDTH_PCT","IMAGE_APPLET_EP","IMAGE_APPLET_INA","IMAGE_LOGO","IMAGE_LOGO_OTHERPAGES","ASSET_API_OUTPUT_Year","ASSET_API_OUTPUT_Age","ASSET_API_OUTPUT_FMV","ASSET_API_OUTPUT_EOYBalance","ASSET_API_OUTPUT_ACB","ASSET_API_OUTPUT_CapitalGain","ASSET_API_OUTPUT_TaxPayable","ASSET_API_OUTPUT_CapGainsExemption","ASSET_API_OUTPUT_Deposits","ASSET_API_OUTPUT_Withdrawals","ASSET_API_OUTPUT_RRIF","ASSET_API_OUTPUT_TaxPayableonIncome","ASSET_API_OUTPUT_DispositionAmount","DROPDOWN_WIDE","DEFAULT_DIVIDEND_TAX_RATE","DEFAULT_AVG_TAX_RATE","DEFAULT_CLIENT_AGE","DEFAULT_SPOUSE_AGE","DEFAULT_SPOUSE_SALARY","DEFAULT_CLIENT_SALARY","DEFAULT_SPOUSE_CPP","DEFAULT_CLIENT_CPP","DEFAULT_SPOUSE_RETIREMENT","DEFAULT_CLIENT_RETIREMENT","DEFAULT_INFLATION","DEFAULT_INVESTMENT","DEFAULT_NEED_PERCENT1","DEFAULT_NEED_PERCENT2","DEFAULT_RRIF_AGE","DISPLAY_RETIREMENT","DISPLAY_LIFEEXP","DISPLAY_ENDAGE","DISPLAY_LIFEEXP_PLUS_3","ORPHAN_AGE_QC","ORPHAN_AGE_NON_QC","MAX_ORPHAN_DUR_QC","MAX_ORPHAN_DUR_NON_QC","UNIVERSITY_START_AGE","UNIVERSITY_END_AGE","DISPLAY_PRESENTATION","DISPLAY_GRAPHS","DISPLAY_SPREADSHEET","DISPLAY_ANALYSIS","appSiteAPI","buildMode","ASSET_YEAR_TODAY","en","today","fr","CONTROLTITLE","age","sex","smoking","name","member","type","owner","growthDir","exposureDur","changeRate","repay","amount","FA","amountGross","afterTaxAmount","percent","tax","desc","disposeYr","disposeDur","startYear","dur","ACB","smallBusinessCapGainExemption","growth","income","avgTax","retAge","protectToAge","cppElig","qppElig","invRate","inflation","taxRate","dividendTaxRate","province","designedBy","designedFor","contributionAmt","contributionStartYr","contributionDur","withdrawalAmt","withdrawalStartYr","withdrawalDur","incomeRate","RRIFRate","RRIFAge","ownershipAction","pdf","pdfINAAppendix","print","lifo","wl","ep","compulife","save","load","rec","notes","switch","TITLES","appletINA","appletEP","clients","assets","liabilities","sources","needs","settings","presentations","results","presBut","graphsBut","retBut","protectButton","leBut","age100But","spreadsheetBut","analysisBut","benef","insuredJLTD","insured","default","defaultClear","OUTPUTTITLE","Values","MESSAGES","insNeed","graphLine2","graphT1","graphT2","graphT3","graphT4","ever","taxMsg","fetch","infoYr0","infoRetDur","infoAvgTax","infoAdjust","clientOnly","infoElig","ie","govB","assetTax","COLUMN_TITLES","INA_SHEET_HEADERS","Full","EP_SHEET_HEADERS","intRate","infRate","surplusCapital","blank","additionalCapitalReq","survivorLE","survivor65","survivorProtection","Year","Age","FMV","EOYBalance","AnnualContribution","MinRRIFIncome","Withdrawal","SaleProceeds","RentalIncome","TaxLiability","Taxonincome","TaxLiabilityatDeath","CapitalGain","CapitalGainsExemption","GRID_INTERNAL_CAPTIONS","excel","rows","of","TOTALS","ESTATE_LIAB","value","Key","order","colour","TAX_LIAB","EMAIL","body","LIABILITIES","LAST_EXPENSES","ID","LEGAL_AND_EXECUTOR_FEES","OUTSTANDING_LOANS","MORTGAGE_REDEMPTION","EMERGENCY_FUND","CHARITABLE_GIFTS","LEGACY_FOR_CHILDREN","CHILD_HOME_CARE","CREDIT_CARDS","INCOME_TAXES","OTHER","CLIENT_TAX_LIABILITY","PROBATE","ASSETS","PERSONAL_RESIDENCE","oldName","REAL_ESTATE","STOCKS_BONDS","SMALL_BUSINESS_SHARES","RRSP_RRIF","INTEREST_BEARING","CASH","OTHER_ASSETS","LIFE_INSURANCE","CHARITABLE_GIFTS_TAX_CREDIT","TFSA","OWNERSHIP","CLIENT","SPOUSE","JOINT","ASSET_OWNERSHIP_ACTION","CLIENT_LIQUIDATE","CLIENT_ROLLOVER","ASSET_TAX","NON_TAXABLE","CAPITAL_GAINS_DEFERRED","CAPITAL_GAINS_ANNUAL","REGISTERED","FULLY_TAXABLE","DIVIDEND","INTEREST","QUALIFYING_SMALL_BUSINESS","INCOMESOURCES","SURVIVORS_INCOME","GOV_SURVIVORS_PENSION","GOV_DEATH_BENEFIT","GOV_ORPHANS_BENEFIT","RENTAL_INCOME","DIVIDEND_INCOME","RETIREMENT_INCOME","RRIF","INCOMENEEDS","PERCET_OF_INCOME","EDUCATION_FUND","TEMPORARY_INCOME","PROVINCE","AB","BC","ON","QC","MB","NS","NB","NF","SK","PE","YU","NU","NT","MEMBER","CHILD","DEPENDENT_ADULT","SEX","MALE","FEMALE","GROWTHDIR","GROWS","REDUCES","SMOKING","NON_SMOKER","SMOKER","MONTHS","readMCCData","dataInput","planID","client","lives","clientID","i","dataE","push","Clients","sexKey","smk","smokerKey","rating","length","setLives","lifeStatus","policy","planName","carrierName","carrierID","faceAmount","Presentations","Province","objPremium","DepositMode","PremCustom","PremSet","PremSolve","PremSetDur","PremSolveDur","PremOffsetOn","PremOffsetYear","objCustomDB","solveForPremium_On","solveForPUA_On","solveRider_On","customDB","objRider","T10","T20","ICO10","ICO20","T25","T30","T25Amt","T30Amt","T10Dur","T20Dur","T10Amt","T20Amt","objPUA","MaxPUA","MaxPUAAmt","BonusPUA","FundPUA","FundPUAAmt","FundPUADur","outputOptions","extCoverage","IRR_ERR","outputColumnIDs","generalInfo","language","lang","formatNumericOutput","Collapsible","props","togglePanel","e","a","enabled","handleCollapsibleClick","id","state","open","setState","openCollapsible","nextProps","this","arr","style","fontSize","float","onClick","className","title","undefined","infoIcon","children","Component","OUTPUTTEXT","insNeeds100","insNeedsRet","insNeedsRetLE","insNeedsSingleFamily","years","addSurvivor","pg1T","pg1P1","pg1P2","pg1P3","pg1P4","pg2TabT1","pg2TabT2","pg2TabT3","pg2TabT4","pg2TabT4Alt","pg2TabT5","pg2TabT6","pg2T2","pg2Tab2","pg2Tab3","pg2T3","pg2P5","pg2P6","pg2P7","pg2P8","pg2P9","pg2P10","pg2P12","pg2P11","pg3T","pg3P1","pg3TabT","pg3TabRTot","pg4T","pg4P1","pg4TabT","pg4TabRow1","pg4TabRow2","pg4TabRow5","pgTabRowMoreIncome","pgTabRowThereAfter","pg5T","pg5TabT","pg5TabT2","pg5TabT3","pg5TabRow1","pg5TabRow3","pg5TabRow4","pg5TabRow5","pg6T","pg6TabT","pg6TabRow1","pg5TabRow7","pg6TabRow4","pg6Net","pg7T","pg7TabT","pg7TabRow1","pg7TabRow4","pg7TabRow5","pg7TabRow6","pg7TabRow7","pg7TabRow8","pg7TabRow9","pg7TabRow10","pg8T","pg8TabT","pg8TabRow1","pg8TabRow2","pg8TabRow3","pg8TabRow4","pg8TabRow5","pg8TabRow6","pg8TabRow4Alt","pg9T","pg9P1","pgFooter","pg10T","pg10P1","pg10TabRow1","pg10TabRow11","pg10TabRow2","pg10TabRow3","pgAppendix","pgAppendixT","pgAppendixP1","pgAppendixP2","pgAppendixP3","GRAPHS_LABLES","graphMsg","persCF","govCF","incomeNeeds","shortfall","assetsBrk","liabsBrk","cashLike","RRSP","shares","realEstate","otherAssets","loans","taxes","emergency","otherLiabs","atDeath","currFins","getAssetGridValues","dataNA","assetCurr","aggregate","fetchAssetAllGridColumns","data","console","log","taxOnDisposition","yr","numericValues","arrayFormatMoney","arrYear","arrAge","arrAdjAge","age1","age2","parseInt","arrDeposits","arrFMV","arrRRIF","arrEOYBalance","arrWithdrawals","arrTaxPayableonIncome","arrTaxPayable","arrDispositionAmount","arrACB","arrCapitalGain","arrCapGainsExemption","gridTitleSection","getListItemNameFromKey","ownerKey","description","gridTitle","assetTypeKey","dataColTitles","dataProjection","assetTaxTypeKey","doSavePdfActionEP","AssetLiabProjs","paragraph","PDF","Create","values","Widths","paraY","output","getOutputValues","SetFont","HELVETICA","NORMAL","SetFontSize","PxToPt","SetTextColor","Text","INAOption","InToPt","result","image","adviserLogo","headerOffset","top","addCustomImage","AddImage","paraLeft","pg1TitleY","OUTPUTTEXTEP","dateApplet","footerText","headerText","addFooterAndHeader","setFontForTitle","pg2T","setFontForParas","parag","pg2Paragraphs","map","item","insertPara","insertBullet","tableWidthAss","paraWidth","totalAssets","tmpY","align","insertTableTitle","element","formatMoney2","parseFloat","insertTableRow","pg3Tab2RTot","otherAssetsList","addNote","tableWidth","totalLiabs","tableLeft","pg3Tab2T","pg3Tab2NW","pg3T2","pg3P2","pg3Tab3R1C1","pg3Tab3R1C2","pg3Tab3R1C3","pg3Tab3R1C4","height2","pg3Tab3R2C1","EstateLiabsByTypeGrowth","ASSET_TAX_TYPE_REAL_ESTATE","EstateLiabsByType","EstateLiabsByTypeLE3","pg3Tab3R3C1","ASSET_TAX_TYPE_STOCKS","pg3Tab3R4C1","ASSET_TAX_TYPE_SMALL_BUS","pg3Tab3R5C1","ASSET_TAX_TYPE_RRSP","pg3Tab3R6C1","ASSET_TAX_TYPE_INTEREST","pg3Tab3R7C1","ASSET_TAX_TYPE_OTHER","pg3Tab3R8C1","EstateLiabsByTypeTotal","EstateLiabsByTypeLE3Total","pg3P4","pg3P5","AddChart","pg4P2","LE","pg4P3","replace","drawRect","pg5Paragraphs","pg5Plast","pg6Paragraphs1","pg7P1","MultilineText","Footer","insertGrid2","aggregateGrid","j","assetProjections","grid","pg9P2","showOnPage","alert","Save","error","size","BOLD","para","left","TIMES","bullet","y","height","paraWidths","fillColor","fill","tableRow","bold","wrappedTitleBar","orientation","startYr","mode","cols","max","decimalChar","thousands","AddPage","pg8P1","pg8P2","totalGridWidth","goodWidth","textWidth","widthTotal","goodWidthMultiLine","addMore","textWidthMultiLine","FooterLandscape","String","formatMoney","cleanFormat","toString","insertGrid","lastRow","titleY","title1","title2","para1","para2","SHOW_AUTOMATIC_RED","SHOW_STANDARD","SHOW_NONE","SHOW_STANDARD_LIGHT_BLUE","SHOW_STANDARD_WHITE","infoHighlightStyle","color","fontWeight","infoIconRetire","infoSpouseElig","internet","rollOver","insurance","rental","note","gridCapFund","salary","salaryPercent","afterTax","taxExempt","infoINA","infoBOYEOY","infoPDF","probate","DepositWithd","inflationGrowth","PYE_JLTD","needGrowth","exportINA","taxLiab","getGenericMessage","infoID","infoText","iconMode","popupOpenByProps","popupBorderColor","position","marginLeft","marginTop","DEFAULT_MARGIN_TOP","width","DEFAULT_WIDTH","getInfoIconTaxExempt","getInfoIconSourcesGov","DEFAULT_MARGIN_LEFT","getInfoNoInternetAccess","getInfoIconSourcesRRIF","getInfoIconClientsMember","getInfoIncome","getInfoSalaryPercent","getInfoIconAssetsIncomeRate","getInfoIconPYE_JLTD","getInfoIconNeedGrowth","getInfoINA","getInfoPDF","getInfoExportINA","getInfoIconAssetsOwner","getInfoIconTFSA","getInfoIconProbate","getInfoIconDepositWithd","getInfoIconInflationGrowth","getInfoIconAssetsIns","getInfoIconAssetsYr0","getInfoIconClientsElig","getInfoIconSpouseElig","getInfoIconClientsTax","getInfoIconClientsRetire","flagRed","getInfoTaxLiability","getInfoIconTaxLiab","getInfoBOYEOY","getInfoIconNotes","getInfoSave","DEFAULT_HEIGHT","getInfoExcelcapFund","getInfoExcelAllAfterTax","AdjustibleImage","componentDidMount","showDetails","updateImage","imageLeft","imageSize","allPages","imageTop","imageAdjust","imageBigger","prevState","imageSmaller","imageRight","imagePosition","imagePages","imageRemove","undoImage","undo","imageDone","loadImage","file","target","files","reader","FileReader","readAsDataURL","onload","imageObj","styleImage","display","marginBottom","cmdWidth","buttonText","paddingLeft","required","accept","onChange","event","noButtons","buttonCaption","selected","selectMultiButton","src","React","hideRecover","document","getElementById","Header","ref","last","current","saveDefault","saveAsDefaultCase","defaultCommand","storageName","set","clear","localStorage","getItem","changeLanguage","defaultButton","createRef","emailAllowed","versionDetails","allowEmail","iOS","isMobileDevice","class1","styleVersion","right","changeLang","maxWidth","version","saveToFile","loadFromFile","EmailINA","loadStorage","module","exports","InputField","getInut","evt","input","chkNum","isNaN","substring","format","maxValue","min","minValue","handleFocus","navigator","userAgent","match","select","selectField","setSelectionRange","onMouseUpSelect","test","window","MSStream","handleFocusIOS","toggleEditing","toFormat","inputValue","isEditing","afterStateUpdate","getValue","dec","indexOf","slice","selectText","s","refs","InputTxt","setTimeout","getRidOfZerosAfterDecimal","displayValue","decimalPos","handleUpdateInput","number","Intl","NumberFormat","inputName","disable","readOnly","styleClass","styleClass2","divStyleClass","inputColorStyle","colorDiv","border","info","showInfo","perc","french","paddingTop","inputMode","disabled","autoFocus","onFocus","onMouseUp","updateInputValue","onBlur","bind","key","amt","nSeperator","search","s1","EngToFrConversion","numFormat","v","bInput","seperator","v1","v2","v3","formatted","toFixed","get1000","Math","round","includes","num","decimalCount","decimal","abs","negativeSign","Number","substr","dollarSign","array","noOfDecimals","arrayFormatted","ver","verNo","inS","verS","inS2","versionNumeric","saveEncrypt","allowAnalysis","n","getProjectedLiabilities","totalLiabProjections","Liabilitys","liabTypeKey","liabProj","getProjectedLiability","liability","totalLiab","currValue","rate","dU","dL","pow","getLoanBalance","assetTaxLiabProj","change","growthDirKey","getINA_LifeExp_Plus_yrs","INALifeExp","dataShortfall","lifeExp","yrs","INA","getDataFutureEstateLiability","dataTaxLiability","projectEnd","dataFutureEstateLiability","getListToShowByOrder","fullListOfItems","Object","filter","obj","sort","b","list","found","find","getListItemKeyFromName","split","join","getAssetsTaxCategoryTotal","totalAsset","Assets","forEach","getDisableValues","val","getAssetsCategoryTotal","dataList","total","getLiabsCategoryTotal","getAgesEP","dataAges","getTaxLiabCategoryTotal","dataAss","getAssetTL","fetchAssetProjection2","getDefaultImages","appletImage","require","getAfterTaxTotalIncome","index","Income","avgTaxRate","isSingleFamily","spouseKey","survivors","x","memberKey","singleFamilyProjectionYears","minAge","maxRet","noYrs","clientKey","reduce","prev","curr","retirementAge","noYrsDiff","projectionEnd","noProjectionYrs","survivorAge","familyProjectionYears","periodOption","insuranceNeeds","presentation","insNeedRet","insNeedLE","insNeedLE3","insNeedEAge","Value","joint","singleFamilyvalues","insuranceNeed","insuranceNeedToRet","insuranceNeedToLE","insuranceNeedToLE3","insuranceNeedToEnd","survAge","noProjectYrs","spouse","getInsNeedLine","projEnd","noSurvivor","singleFamily","protectionPeriod","labelsBilingual","dollarEn","dollarFr","needTo","getName","getLeakageGraphs","optionsPie","responsive","maintainAspectRatio","text","fontColor","legend","labels","space","optionsPieEstateLeakage","JSON","parse","stringify","graphsLeakageT2","optionsPieEstateLeakageLE","graphsLeakageT3","assetsTotalNow","assetsTotalLE3","totalLiabProjectionsNow","totalLiabProjectionsLE3","assetPercent","taxPercent","dataEstateLeakage","dataEstateLeakageLE","assetPercentLE3","taxPercentLE3","dataPieEstateLeakage","graphsLeakage1","graphsLeakage2","datasets","backgroundColor","dataPieEstateLeakageLE","getLogoAndAppletImage","logoSize","MAX_LOGO_HEIGHT","PAGE_HEIGHT","logoLeft","logo","logoTop","logoBottom","logo1stPage","applet","global","langFr","languages","userLanguage","PopupInfoDialog","theme","createMuiTheme","typography","fontFamily","Box","borderColor","borderRadius","Card","CardContent","ThemeProvider","Typography","component","Info","showPopup","respondToPopUp","popupInfo","classList","toggle","chkClose","source","classP","zIndx","zIndex","onMouseEnter","onMouseLeave","alt","in_","px","imageID","w","h","imgData","imgProps","getImageProperties","pdfHeight","addImage","AddImageFitWidthOnly","maxHeight","firstPage","FOOTER_TEXT_IN_Y","containerID","containerElement","canvasElement","getElementsByClassName","dataUrl","toDataURL","AddCanvas","canvasID","addPage","jsPDF","unit","ShowGrids","showGrids","Grid","setFontSize","setFont","setTextColor","textRed","textGreen","textBlue","fontName","fontStyle","textLines","splitTextToSize","DrawLine","line","Reset","fileName","red","green","blue","SetFillColor","setFillColor","fillRed","fillGreen","fillBlue","Rectangle","roundedRect","arrayText","minWidth","getTextWidth","adjustTextWidth","textColor","box","rightAlign","textY","textOut","xi","setDrawColor","rect","RightText","CenterText","tw","textH","textF","addFooter","footer","addHeaderNoFooter","tableRowSingle","values2","coloured","createDefaultAsset","DisposeYr","DisposeDur","RRIFStartAge","projection","copyFromAnotherAsset","anotherAsset","createDefaultClient","defaultClient1","Eligibility","Name","defaultClient2","child","createDefaultSource","sourceTypeKey","duration","ownerID","growthRate","createDefaultLiab","assetTaxLiabID","createDefaultNeed","defaultNeed1","needTypeKey","Percent","defaultNeed2","createDefaultPres","images","provinceKey","valuationDate","Date","presentationDate","resultsOption","getDefaultData","getDefaultCase","loadDefaultCase","defaultClients","defaultAssets","defaultSources","defaultLiab","defaultNeeds","Sources","Needs","fetchTimerAPICheck","fails","then","response","json","catch","setItem","fetchMCCData","Promise","all","fetchMCC","url","method","headers","Accept","ok","Error","statusText","getTaxRate","fetchInsuranceNeedsData","provincekey","projectionSettings","isQC","insuranceNeedsData","ages","personalCF","cpp","cppDB","orphan","lifeExpClient","lifeExpJLTD","provinceMargTax","encryptedInput","assetID","dataAsset","asset","ratesPack","dataProj","asyncAPICall","fetchAssetProjectionAPI","dataValues","handleFetchInsuranceNeedsNew","dataINA","dataDetails","dataInsuranceNeeds","dataNAAges","dataCashFlowGov","dataCashFlowPersonal","dataCashFlowNeeds","handleFetchINADataFromQueryString","savedINA","savedData","handleFetchQueryString","fetchData","handleFetchPDF","Html","Css","setUIDataToAPI","outputInsuranceNeed","Sex","Smk","Rating","CPPeligibility","assetDesc","taxMethod","dispositionYr","dispositionDur","dispositionYrUlt","annualGrowth","setAssets","annualRepay","setLiabs","personalIncomeSources","salaryOwner","setSources","estateContingiencies","dataItems","incomePercent","incomePercentAfterDeath","incomeNeedItems","upToChildrenOutYrs","childrenOutToRetirementYrs","retirementToEndYrs","setIncomeNeeds","investmentRate","capitalGainsInclusion","inflationRate","setRates","tempDate","date","getFullYear","getMonth","getDate","deathYear","deathOf","endYear","returnType","projectEndOption","clientsName1","agentName","caller","insuranceAmt","setProjSettings","loadSavedDataToUI","savedJSon","clientsNo","addLife","assetsNo","findMatchingKey","liabilitysNo","sourcesNo","needsNo","needKey","presentationsNo","dataInputDefImages","storageKey","Income2","survivorATaxIncome","percentNeed1","percentNeed2","govDB","totalDisposeAsset","dateObj","month","getUTCMonth","day","getUTCDate","year","getUTCFullYear","insuranceNeedRet","insuranceNeedLE","ygChild","hasChild","childMember","Children","maxDur","youngestChildEndAge","insNeedYgChild25","insNeedYgChild18","totalLiabExcludeDeathRelated","pos","grossIncome","ret","disposeValue","totalAssetExcludeInsurance","totalAssetInsurance","totalAssetInsuranceIfSpouse","showAsDisposed","srcDB","valueAtDeath","totalSource","totalSource2","totalSourceATax","totalSource2ATax","totalSourceAtDeath","totalSource2AtDeath","totalSourceATaxAtDeath","totalSource2ATaxAtDeath","totalDesiredGrossIncome","totalDesiredGrossIncome2","srcOrphan","percent1","percent2","needPercent","totalNeed","objValues","nameFromFile","MultiButtons","setupButtons","buttonsDefault","selectButton","buttons","stylePosition","stylePositionLast","marginRight","appSiteParent","defaults","NA","displayName","afterTwoSeconds","resolve","probateSync","dataOutput","qbProbate","Array","hasProbate","govBenefitsSync","gov1","gov","gov2","hasSpouseArray","hasSpouse","sourceGovSurv","govBenefits","cppSurvivor","sourceGovDB","govOrph","manageOrphanSync","intervalID","setInterval","loadData","OKToRemove","query","queryString","location","QS","handleInitilizeQuoteFromQueryString","handleIntitalFetch","recover","d","setHours","getHours","getMinutes","objJSONData","dataPresentations","snapimport","SnapImport","loading","newDataInput","_","cloneDeep","newDataOutput","tr","reSync_reCalculate_reRender","newState","initialLoading","handleUpdateOutput","newStateCandidateInput","itemToUpdateGroup","itemToUpdateID","newStateCandidateOutput","populateOutput2","updateAssetProjectionOutput","newDataInputClient12","handleQueryString","encryptedInputLife1AndSpouse","newDataInputClient1","encryptedInputLife1","updateOutputData","dataOutputCandidate","cppOrphan","lifeExpectancy","populateOutput","dataQS","showMsg","ft","encodeURIComponent","href","savedINA_QS","updateStateFromJSon","handleUpdateClient","redoAll","count","debounce","saveToStorage","syncPanelsValues2","debounceHandleUpdateOutput","debounceSaveToStorage","Survivor","survIdx","Survivors","projYears","dataGov","dataPCV","dataNeed","dataShort","getINAGridData","getEPGridData","switchClients","getSwitchClientsState","client1","handleUpdateAsset","manageRRIFBounds","addRRIFSource2","handleUpdateLiability","handleUpdateSource","failedRemove","handleUpdateNeed","need","handleUpdatePresentation","removeItem","handleUpdatePresentationChange","noRecalc","handleAddClient","manageAddingClientWithIncome","manageAddingChild","manageEducation2","manageOrphan2","manageRemovingClientWithIncome","handleAddAsset","updateProjection","handleAddLiability","Liab","handleAddAssetTaxCredit","data2","taxCredit","exists","handleAddAssetTaxCredit2","handleAddSource","handleAddNeed","nextKey","handleRemoveClient","cl","manageRemoveOrphan","splice","handleRemoveAsset","removeRRIFSource","handleRemoveLiability","charit","liab","charitAsset","handleRemoveSource","handleRemoveNeed","addRRIFSource","existingRRIF","sourceRRIF","copyPresentation","pres","leading","trailing","areThereChildren","manageEducation","orphanBen","orphSources","orphAge","setChildIDs","Set","add","has","childID","updateDataLang","oldLang","openParent","openForce","totalATaxIncome","setSurivorIndex","spKey","setSurivorIndex2","caseFromFile","showRecover","fileTarget","contentsFile","Smoker","Type","Tax","readAsText","respondToSaveRequest","blob","Blob","saveAs","saveToFile_OLD","failedAPI","urlReload","PARENT_SITE_PROD","shortid","generate","PARENT_SITE_TEST","parent","callCalculateResultsAPI","resultIsOpen","adjustVisibleOutputSection","visibleOutputSection","hasPersonalResidenceAlready","collapsible","setOutput","documentMode","graphs","selectMultiButtonPeriod","selectMultiButtonINAorTax","l","hideEstateRemoveMsg","dataOutput3","dataOutput7","tag","t","accessedAPI","langText","showInput","insNeedLine","buttonCaption3","buttonCaptionPeriod","dataEstateLiability","inputOutputIsValid","dataSurvivorSalaryIncome","graphsEP","analysis","dataAPISite","govPopup","openDialog","respondToInput","presentationCurr","handleUpdate","clientCurr","isTheSurvivor","themeColor","disableAddRemove","currentID","minComps","numberComps","handleDoAdd","handleDoRemove","liabilityCurr","OrphanAges","maxOrphanDur","sourceCurr","maxOrphan","includeGovOrphanBenefit","needCurr","afterTaxTotalIncome","dlgLogin","insuranceNeedEAge","getSpouseINA","paddingBottom","Client","newCliet","doSwitch","getCurrClient","valueClean","valueCleanInt","changed","infoRetireRed","updateDDown","selection","writeBack","updateName","sexValues","label","smokingValues","memberValues","bilingual","DD","Title","defValue","disableOptionValue","nonSpouse","nonSpouseIsTheSurvivor","clientMember","disableMember","greyedName","placeholder","Count","dd","disableOption","fixedFirstRow","maxRows","Liability","liabNo","liabNext","setLiabilityValuesToDefault","displaySreadsheet","setLiabData","loan","liabs","repays","handleClick","typeValues","listLiabsToShow","ownerValues","growthDirValues","growthSel","loanOrTax","showRepay","showExposure","Source","isSourceGovNonOrphanBenefit","isDividendIncome","isSourceGovOrphansBenefit","sourceNo","sourceNextKey","listSourcesToShow","unlistedGreyedOption","govOrphan","dividend","inputTitle","Need","needNo","needNext","Owner","listNeedsToShow","percentN","isDisabled","Presentation","getNewPresentation","listProvincesToShow","showSaved","PopupUserinputDialog","makeStyles","root","margin","spacing","handleOK","handleCancel","handleInfo","sourceEdge","sourceChrome","optionsEdge","optionsChrome","onClose","handleToggle","aria-labelledby","paddingRight","variant","useState","encryptedJson","setEncryptedJson","jsonEncrypted","setJsonEncrypted","encryptedJsonAssigned","setEncryptedJsonAssigned","useEffect","myHeaders","Headers","append","clientJson","raw","APP_SITE","redirect","setClientFileContent","clientIndex","clientFileName","PasteClients","setClients","setNote","clientFileContent","newClients","allClientFileContentsAssigned","newClient","clientFileSpecs","clientFileSpec","clientFileSpecsCollection","clientFileSpecsCollectionJson","clipboard","writeText","readText","clipText","parsedObject","pastedClients","isArray","clientComponents","Fragment","AggregateGrid","gridColumnsDataExcelInfoSection","gridColumnAligns","gridIcons","specialRow","OutputGraphsEP","loadingMCC","estateLiab","estateLiabLE","taxL","dataPremiums","dataDB","dataSVEquiBuild","dataSVManulife","Prem","bestPremiumDur","bestMinMultiple","premiumDur","minMultiple","insMultiple","bestFitEquiBuild","INAEstateOption","chartRef","taxLiabChartRef","dtaAgesAll","k","getAssetLiabProjections","leakageGraps","graphsT2","graphsT3","taxLiabTotal_Index","AssetnEstateLiabs","dataTaxLiabLifeExp","dataTaxLiab","dataLiabAtDeath","taxLiabs","graphs2L2","graphsLeakage3","optionsTaxLiab","scales","xAxes","stacked","ticks","beginAtZero","yAxes","callback","steps","stepValue","dataPieEstateLiabNow","graphsL1","graphsTaxes","estateLiabLE3","dataPieEstateLiabLE","optionsLiab","optionsLiabLE","graphsT1","options","graphsLeakageT1","graphs2L1","ProjectionGrid1","assetProjection","projectionGrid","setProjectionGrid","DataTable","GridButton","handleClickGridButton","Asset","componentDidUpdate","prevProps","assNo","assNext","assTaxTypeKey","setAssetValuesToDefault","taxValues","propId","debounceHandleUpdataDesc","updateDesc","updateClientTaxLiability","getAssetProjection","getData","clone2","cln","cloneNode","cln2","createElement","appendChild","addEventListener","listAssetsToShow","ownerActionValues","listAssetTaxesToShow","DDTax","taxLiabOfClient","isEqual","disableTaxMethods","taxStocks","taxRS","hideOwner","taxT","ownerT","assetTypeIns","rrsp","showACB","showIncome","showDur","showGrowth","showDispose","showCotribution","showWithdrawal","showCGE","disableAll","p","DropDown","ownerAction","unlistedValue","AddRemove","OutputGraphsEPLeakage","boxWidth","OutputGraphStacked","optionsEstate","elements","point","radius","pg4GT","dataAssetnEstateLiabProj","col","taxLiabLine","shadeColor","R","G","B","dataEstate","overflow","OutputPresentationEP","doINA","postMessage","clickMultiButton","doPDF","doPrint","mywindow","write","innerHTML","close","focus","imageAlign","styleWithLogo","overflowX","loaded","startAge","p2","p5","p6","projectionsGrids","whiteSpace","colSpan","textAlign","pg3P3","showLeakageOnly","overflowY","pg8O1","pg8O2","spouseInsRet","spouseInsLE","LESpouse","formattedMoneyString","twoNeedPercents","topToTitle_Y","titleToPara_Y","HEADER_RECT_IN_Y","incY","incColourdRowsY","incTableY","len","spouseSwitched","yOffset","OutputPresentation","doSavePdfAction","doLIFO","doWL","doEP","doCompuLife","birthYr","birthMth","birthDay","provinceCode","innerHeight","externalWindow","containerEl","dataLabels","dColor","dataValues2","dataInsurance2","PDFTopMargin","pg4TabRow3","pg4TabRow4","pg6TabRow2","clientHeight","clientWidth","hFinal","wFinal","graphWidth","OutputGraphs","doSavePdfINAAppendixAction","pv","negNeed","mobile","innerWidth","maxYScale","ceil","dataFutureINA","shortfallNeg","optionsPieLiabs","dataPieAssets","dataPieLiabs","assetsPie","liabsPie","AnalysisGraphs","getMCCQuoteOutput","getMCCQuoteOutput1","getMCCQuoteOutput4","quoteClient","FAClean","dataMCC","minPrem","getDataFutureINA","PremSetAmt","unshift","pop","getMCCQuoteOutputManu","insuranceAmtInitial","solveForOptimumQuote","ratio","dataFVofPrems","getDataFVofPrems","SumOfSquresDiff","insVal","gotHereInInnerLoop","solveForOptimumEquiBuild","getEstateLiabPieCharts","estateLiab2","l1","l2","l3","estateLiab3","l2LE","l3LE","currINA","dataFuture","fv","nextState","dataShortfallFV","dataPieTax","dataPieLiabsAtDeath","optionsPieTax","optionsPieLiabsAtDeath","optionsPieEstateLiab","optionsPieEstateLiabLE","dataMCCpremFV","dataMCCQuoteDB","optionsFV","dataProjectionCV","needToE","needToF","leftPadding","webpackContext","req","webpackContextResolve","__webpack_require__","o","code","keys","ExcelFile","ReactExport","ExcelSheet","DownloadExcel","dataCell","styleCell","alignment","horizontal","font","numFmt","styleCellCol1","styleCellAlt","patternType","fgColor","rgb","styleCellAltCol1","styleTitleRowInfo","wrapText","bottom","styleCellLeftAllign","styleTitleRow","excelColumnsDataInfoSection","dataBodyTitles","dataBody","dataRow","excelColumnsHeaders","sz","wpx","excelColumnsDataMain","multiDataSet","columns","xSteps","ySteps","toLocaleString","downloadNow","hideElement","filename","dataSet","ExcelToolbar","setExcel","classes","padding","excelToolbarText","Tooltip","placement","IconButton","xmlns","viewBox","Datatable","getMuiTheme","overrides","MUIDataTable","tableRoot","paper","boxShadow","borderBottom","borderRight","MuiTableRow","head","MuiTableCell","sizeSmall","MUIDataTableToolbar","titleRoot","icon","MUIDataTableBodyCell","MUITypography","body2","MUITablePagination","caption","downloadExcelNow","divStyle","styleHeader","customHeader","column","TableCell","customHeadRender","captions","filterType","selectableRows","resizableColumns","selectableRowsHeader","viewColumns","download","textLabels","pagination","rowsPerPage","displayRows","setTableProps","downloadOptions","separator","onDownload","buildHead","buildBody","customRowRender","dataIndex","rowIndex","dataI","TableRow","customToolbar","handleChange","valueOf","valueSelected","update","option","styleDD","customStyles","control","base","minHeight","getDefault","charOp","selectComponent","isSearchable","onfocus","oc","styles","isOptionDisabled","doRemove","doAdd","minRows","returnAR","ASSET_TAX_TYPE_PRINCIPAL_RES","ASSET_TAX_TYPE_COUNT","pg3Tab3R2C2","pg3Tab3R2C3","pg3Tab3R2C4","pg3Tab3R3C2","pg3Tab3R3C3","pg3Tab3R3C4","pg3Tab3R4C2","pg3Tab3R4C3","pg3Tab3R4C4","pg3Tab3R5C2","pg3Tab3R5C3","pg3Tab3R5C4","pg3Tab3R6C2","pg3Tab3R6C3","pg3Tab3R6C4","pg3Tab3R7C2","pg3Tab3R7C3","pg3Tab3R7C4","pg3Tab3R8C2","pg3Tab3R8C3","pg3Tab3R8C4","pg6Paragraphs2","graphsL2","graphsL3","graphsL4","graphsL5","appVersion","packageJson","App","baseUrl","getElementsByTagName","getAttribute","rootElement","ReactDOM","render","basename","INAFullSpreadsheetData","afterTaxCPP_DB","colNo","dataColumns","dataColumn","dataColumnCapFund","survivorsIncome","surivorsSalaryProjection","totalIncome","getSurivorsSalaryProjection","survivorsNonGovNonAssetLiabIncomeProjection","getSurvivorsNonGovNonAssetLiabIncomeProjections","capFundBase","beneficiaryAge","otherIncome","dataTitle","dataColHeaders","INAFullSpreadsheetHeaders","EPFullSpreadsheetData","assetsLength","EPFullSpreadsheetHeaders","LE3","proj","tmpGrids","taxLiabCol","FMVCol","EstateLiabsByTypeInitialAmt","fmv","addAssetToProjections","rateRS","rateS","rateSB","rateRR","rateI","rateO","assetName","alreadyThere"],"mappings":"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CRC,YAAa,mCACbC,QAAS,oCACTC,MAAO,+BACPC,SAAU,uBACVC,cAAe,uBACfC,QAAS,UACTC,QAAS,eACTC,UAAW,SACXC,OAAQ,aACRC,cAAe,oBACfC,MAAO,kBACPC,UAAW,UACXC,eAAgB,cAChBC,YAAa,WACbC,MAAO,iBACPC,YAAa,iBACbC,QAAS,mBAETC,QAAS,iBACTC,aAAc,iBAEhBrF,GAAI,CACF+D,UAAW,gDACXC,SAAU,iCACVC,QAAS,kBACTC,OAAQ,sBACRC,YAAa,wCACbC,QAAS,oCACTC,MAAO,8BACPC,SAAU,gCACVC,cAAe,uCACfC,QAAS,eACTC,QAAS,kBACTC,UAAW,YACXC,OAAQ,WACRC,cAAe,2BACfC,MAAO,sBACPC,UAAW,UACXC,eAAgB,oBAChBC,YAAa,UACbC,MAAO,wBACPE,QAAS,uBACTC,QAAS,2BACTC,aAAc,0BA8BLC,GAAc,CACzBxF,GAAI,CACFyF,OAAQ,CACN,2BACA,6BACA,+BACA,+BACA,iCACA,0BACA,yBAGJvF,GAAI,CACFuF,OAAQ,CACN,gDACA,wDACA,gDACA,wDACA,kDACA,sCACA,uBA8BOC,GAAW,CACtB1F,GAAI,CACF2F,QAAS,kBACTC,WAAY,uDACZC,QAAS,qBACTC,QAAS,uBACTC,QAAS,eACTC,QAAS,YASTC,KAAM,gBACNC,OAAQ,+DACRC,MAAO,mCAOTjG,GAAI,CACFyF,QAAS,sBACTC,WACE,qFACFC,QAAS,6BACTC,QAAS,yCACTC,QAAS,iBACTC,QAAS,qBACTI,QACE,kIACFC,WAAY,0DACZC,WACE,2MACFC,WACE,6HACFC,WACE,8FACFC,SACE,gGACFR,KAAM,qBACNC,OACE,wFACFC,MAAO,oCACPO,GACE,wHACFC,KACE,6GACFC,SACE,+HAIOC,GAAgB,CAC3BC,kBAAmB,CACjB9G,GAAI,CACF+G,KAAM,CACJ,gBACA,eACA,eACA,qBACA,oBACA,eACA,eACA,gCACA,8BACA,8BACA,iBAGJ7G,GAAI,CACF6G,KAAM,CACJ,sBACA,sBACA,iBACA,yBACA,wBACA,eACA,eACA,kDACA,8BACA,6BAC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","file":"static/js/main.34484746.chunk.js","sourcesContent":["import { buildMode } from \"../../package.json\";\r\nimport { appletMode } from \"../../package.json\";\r\n\r\nexport const APPLET_INA = appletMode === \"INA\";\r\nexport const APPLET_EP = appletMode === \"EP\";\r\nexport const DISPLAY_NAME = appletMode;\r\nexport const DEFAULT_QUOTE = appletMode === \"INA\" ? \"INADefaultData\" : \"EPDefaultData\";\r\n\r\nexport const QUOTE_CLIENT = 0;\r\nexport const QUOTE_SPOUSE = 1;\r\nexport const QUOTE_JOINT = 2;\r\nexport const FIRST_BENEFICIARY_ID = 2; // index is 1 in Clients\r\n\r\nexport const ALIGN_LEFT = 1;\r\nexport const ALIGN_CENTRE = 2;\r\nexport const ALIGN_RIGHT = 3;\r\n\r\nexport const OUTPUT_WIDTH_PCT = 97.5;\r\nexport const OUTPUT_PADDING_LEFT = 2.5;\r\n\r\nexport const IMAGE_APPLET_EP = \"EPPage1\";\r\nexport const IMAGE_APPLET_INA = \"INAPage1\";\r\nexport const IMAGE_LOGO = \"AdvisorLogo\";\r\nexport const IMAGE_LOGO_OTHERPAGES = \"AdvisorLogoOtherPages\";\r\n\r\nexport const ASSET_PersonalResidence = 0;\r\nexport const ASSET_RealEstate = 1;\r\nexport const ASSET_Stocks = 2;\r\nexport const ASSET_company = 3;\r\nexport const ASSET_RRSP = 4;\r\nexport const ASSET_Bank = 5;\r\nexport const ASSET_Cash = 6;\r\nexport const ASSET_Other = 7;\r\nexport const ASSET_Insurance = 8;\r\nexport const ASSET_TaxCredit = 0;\r\n\r\nexport const TAX_NonTaxable = 0;\r\nexport const TAX_CapGains = 1;\r\nexport const TAX_CapGainsAnnual = 2;\r\nexport const TAX_RRSP = 3;\r\nexport const TAX_Taxable = 4;\r\nexport const TAX_Dividend = 5;\r\n\r\nexport const LIABILITY_LastExpenses = 0;\r\nexport const LIABILITY_LegalExecutorFees = 1;\r\nexport const LIABILITY_OutstandingLoans = 2;\r\nexport const LIABILITY_MortgageRedemption = 3;\r\nexport const LIABILITY_EmergencyFund = 4;\r\nexport const LIABILITY_CharitableGifts = 5;\r\nexport const LIABILITY_LegacyforChildren = 6;\r\nexport const LIABILITY_ChildHomeCare = 7;\r\nexport const LIABILITY_CreditCards = 8;\r\nexport const LIABILITY_IncomeTaxes = 9;\r\nexport const LIABILITY_ClientTaxliability = 10;\r\nexport const LIABILITY_Other = 11;\r\n\r\nexport const ASSET_API_OUTPUT_Year = 0;\r\nexport const ASSET_API_OUTPUT_Age = 1;\r\nexport const ASSET_API_OUTPUT_FMV = 2;\r\nexport const ASSET_API_OUTPUT_EOYBalance = 3;\r\nexport const ASSET_API_OUTPUT_ACB = 4;\r\nexport const ASSET_API_OUTPUT_UCC = 5;\r\nexport const ASSET_API_OUTPUT_CCA = 6;\r\nexport const ASSET_API_OUTPUT_CapitalGain = 7;\r\nexport const ASSET_API_OUTPUT_TaxabaleGain = 8;\r\nexport const ASSET_API_OUTPUT_Recapture = 9;\r\nexport const ASSET_API_OUTPUT_TaxPayable = 10;\r\nexport const ASSET_API_OUTPUT_CapGainsExemption = 11;\r\nexport const ASSET_API_OUTPUT_Deposits = 12;\r\nexport const ASSET_API_OUTPUT_Withdrawals = 13;\r\nexport const ASSET_API_OUTPUT_RRIF = 14;\r\nexport const ASSET_API_OUTPUT_TaxPayableonIncome = 15;\r\nexport const ASSET_API_OUTPUT_DispositionAmount = 16;\r\n\r\nexport const LIABILITY_API_OUTPUT_Year = 0;\r\nexport const LIABILITY_API_OUTPUT_Age = 1;\r\nexport const LIABILITY_API_OUTPUT_ProjectedValue = 2;\r\nexport const LIABILITY_API_OUTPUT_TaxCredit = 3;\r\n\r\nexport const DROPDOWN_WIDE = 1;\r\n\r\nexport const OWNER_ACTION_CLIENTLIQUIDATE = 0;\r\nexport const OWNER_ACTION_CLIENTROLLOVER = 1;\r\nexport const OWNER_ACTION_Spouse = 2;\r\nexport const OWNER_ACTION_Joint = 3;\r\n\r\nexport const DEFAULT_DIVIDEND_TAX_RATE = 30;\r\nexport const DEFAULT_AVG_TAX_RATE = 25;\r\nexport const DEFAULT_CLIENT_AGE = 45;\r\nexport const DEFAULT_SPOUSE_AGE = 40;\r\nexport const DEFAULT_SPOUSE_SALARY = 60000;\r\nexport const DEFAULT_CLIENT_SALARY = 60000;\r\nexport const DEFAULT_SPOUSE_CPP = 100;\r\nexport const DEFAULT_CLIENT_CPP = 50;\r\nexport const DEFAULT_SPOUSE_RETIREMENT = 65;\r\nexport const DEFAULT_CLIENT_RETIREMENT = 65;\r\nexport const DEFAULT_PROVINCE = \"BC\";\r\nexport const DEFAULT_INFLATION = 2;\r\nexport const DEFAULT_INVESTMENT = 3;\r\nexport const DEFAULT_NEED_PERCENT1 = 75;\r\nexport const DEFAULT_NEED_PERCENT2 = 60;\r\n\r\nexport const DEFAULT_RRIF_AGE = 70;\r\n\r\nexport const DISPLAY_RETIREMENT = 0;\r\nexport const DISPLAY_LIFEEXP = 1;\r\nexport const DISPLAY_ENDAGE = 2;\r\nexport const DISPLAY_LIFEEXP_PLUS_3 = 3;\r\n\r\nexport const ORPHAN_AGE_QC = 17;\r\nexport const ORPHAN_AGE_NON_QC = 18;\r\nexport const MAX_ORPHAN_DUR_QC = 18;\r\nexport const MAX_ORPHAN_DUR_NON_QC = 25;\r\nexport const UNIVERSITY_START_AGE = 18;\r\nexport const UNIVERSITY_END_AGE = 22;\r\n\r\nexport const DISPLAY_PRESENTATION = 1;\r\nexport const DISPLAY_GRAPHS = 2;\r\nexport const DISPLAY_SPREADSHEET = 3;\r\nexport const DISPLAY_ANALYSIS = 4;\r\n\r\nconst API_SITE_PROD = \"\"; //\"https://privateapi.ppi.ca/ToolkitDirect\"\r\nconst API_SITE_TEST = \"\"; //\"https://test-tkdirectapi.ppi.ca\";\r\nconst API_SITE_LOCAL = \"http://localhost:8082\"; // \"\"; turn this to \"\" and use proxy server on 3003, first turn on from toolkitDirectProxy Server projet by npm start\r\n\r\nexport const appSiteAPI =\r\n  buildMode === 0\r\n    ? API_SITE_LOCAL\r\n    : buildMode === 1\r\n    ? API_SITE_TEST\r\n    : API_SITE_PROD;\r\n\r\n\r\nexport const ASSET_YEAR_TODAY = {\r\n  en: {\r\n    today: \"today\",\r\n  },\r\n  fr: {\r\n    today: \"auj.\",\r\n  },\r\n};\r\n\r\nexport const TAXASSETS = {\r\n  en: {\r\n    header: \"Tax Treatment\",\r\n    Values: [\r\n      /* 'Non-taxable',\t\r\n\t\t\t'Capital Gains Income',\t\r\n\t\t\t'Registered',\t\r\n\t\t\t'Fully Taxable',\t\r\n\t\t\t'RRIF',\t\r\n\t\t\t'Life Insurance',\t\r\n\t\t\t'Dividend'\t */\r\n      \"Non-taxable\",\r\n      \"Capital Gains Deferred\",\r\n      \"Capital Gains Annual\",\r\n      \"Registered\",\r\n      \"Fully Taxable\",\r\n      \"Dividend\",\r\n    ],\r\n  },\r\n  fr: {\r\n    header: \"Traitement fiscal\",\r\n    Values: [\r\n      \"Non imposable\",\r\n      \"Gains en capital différés\",\r\n      \"Gains en capital annuels\",\r\n      \"Enregistré\",\r\n      \"Pleinement imposable\",\r\n      \"Dividende\",\r\n      /* 'Non imposable',\t\r\n\t\t\t'Revenus de gains en capital',\t\r\n\t\t\t'Enregistré',\t\r\n\t\t\t'Pleinement imposable',\t\r\n\t\t\t'FERR',\t\r\n\t\t\t'Assurance vie',\t\r\n\t\t\t'Dividendes/Participations'\t */\r\n    ],\r\n  },\r\n};\r\n\r\nexport const CONTROLTITLEASSETS = {\r\n  en: {\r\n    type: \"Type\",\r\n    owner: \"Owner\",\r\n    amount: \"Current Value\",\r\n    tax: \"Tax Method\",\r\n    disposeYr: \"Year to Dispose\",\r\n    disposeDur: \"Duration of Disposal\",\r\n    ACB: \"ACB\",\r\n    smallBusinessCapGainExemption: \"Exemption ...\",\r\n  },\r\n  fr: {\r\n    type: \"Type\",\r\n    owner: \"Propriétaire\",\r\n    amount: \"Valeur actuelle\",\r\n    tax: \"Moyen de taxation\",\r\n    disposeYr: \"Année d'élimination\",\r\n    disposeDur: \"Durée de la cession\",\r\n    ACB: \"PBR\",\r\n    smallBusinessCapGainExemption: \"Exonération ...\",\r\n  },\r\n};\r\n/* export const LIABILITIES = {\r\n  en: {\r\n    header: \"Cash Needs at Death\",\r\n    Values: [\r\n      \"Last Expenses\",\r\n      \"Legal and Executor Fees\",\r\n      \"Outstanding Loans\",\r\n      \"Mortgage Redemption\",\r\n      \"Emergency Fund\",\r\n      \"Charitable Gifts\",\r\n      \"Legacy for Children\",\r\n      \"Child/Home Care\",\r\n      \"Credit Cards\",\r\n      \"Income Taxes\",\r\n      \"Other\",\r\n      \"Client Tax liability\"\r\n    ]\r\n  },\r\n  fr: {\r\n    header: \"Liquidités requises au décès\",\r\n    Values: [\r\n      \"Derniers frais\",\r\n      \"Frais juridiques et successoraux\",\r\n      \"Emprunts à rembourser\",\r\n      \"Acquittement de l'hypothèque\",\r\n      \"Fonds d'urgence\",\r\n      \"Dons de bienfaisance\",\r\n      \"Héritage pour les enfants\",\r\n      \"Garde d'enfants/soins à domicile\",\r\n      \"Cartes de crédit\",\r\n      \"Impôt sur le revenu\",\r\n      \"Autre\",\r\n      \"Impôt à payer par le client\"\r\n    ]\r\n  }\r\n}; */\r\n\r\nexport const INCSOURCESATDEATH = {\r\n  en: {\r\n    options: {\r\n      header: \"Options\",\r\n      client: \"Client Retirement Age\",\r\n      spouse: \"Spouse Retirement Age\",\r\n    },\r\n    CPP: {\r\n      header: \"Canada Pension Plan\",\r\n      client: \"Client Participation\",\r\n      spouse: \"Spouse Participation\",\r\n    },\r\n    survivorRetInc: {\r\n      header: \"Estimated Survivor's Retirement Income (in today's dollars)\",\r\n      client: \"Client Annual Income\",\r\n      spouse: \"Spouse Annual Income\",\r\n    },\r\n  },\r\n  fr: {\r\n    options: {\r\n      header: \"Options\",\r\n      client: \"Âge de la retraite - client\",\r\n      spouse: \"Âge de la retraite - conjoint\",\r\n    },\r\n    CPP: {\r\n      header: \"Régime de pensions du Canada\",\r\n      client: \"Contribution du client\",\r\n      spouse: \"Contribution du conjoint\",\r\n    },\r\n    survivorRetInc: {\r\n      header:\r\n        \"Estimation du revenu de retraite du survivant (en dollars d'aujourd'hui)\",\r\n      client: \"Revenu annuel du client\",\r\n      spouse: \"Revenu annuel du conjoint\",\r\n    },\r\n  },\r\n};\r\n\r\nexport const PRESENTATION = {\r\n  en: {\r\n    illustrate: {\r\n      header: \"Illustrate Death Of\",\r\n      client: \"Client (New Client)\",\r\n      spouse: \"Spouse\",\r\n      combined: \"Combined\",\r\n    },\r\n    pres: {\r\n      header: \"Presentation\",\r\n      assump: {\r\n        header: \"Presentation Options\",\r\n        inf: \"Inflation Rate\",\r\n        inv: \"Investment Interest Rate\",\r\n      },\r\n      type: {\r\n        header: \"Presentation Type\",\r\n        power: \"PowerPoint\",\r\n        excel: \"Excel\",\r\n      },\r\n      lang: {\r\n        header: \"Presentation Language\",\r\n        en: \"English\",\r\n        fr: \"French\",\r\n      },\r\n      template: {\r\n        header: \"Presentation Templates - 1 available\",\r\n        file: \"File Name\",\r\n      },\r\n    },\r\n    insQuote: {\r\n      header: \"Life Insurance Quote\",\r\n      lifeExp: \"For survivor's normal life expectancy\",\r\n      65: \"Until survivor is age 65\",\r\n      25: \"Until youngest child is age 25\",\r\n      18: \"Until youngest child is age 18\",\r\n    },\r\n  },\r\n  fr: {\r\n    illustrate: {\r\n      header: \"Exemple présentant le décès...\",\r\n      client: \"Client (nouveau client)\",\r\n      spouse: \"Conjoint\",\r\n      combined: \"Combiné\",\r\n    },\r\n    pres: {\r\n      header: \"Présentation\",\r\n      assump: {\r\n        header: \"Options de la présentation\",\r\n        inf: \"Taux d'inflation\",\r\n        inv: \"Taux d'intérêt des placements\",\r\n      },\r\n      type: {\r\n        header: \"Type de présentation\",\r\n        power: \"PowerPoint\",\r\n        excel: \"Excel\",\r\n      },\r\n      lang: {\r\n        header: \"Langue de la présentation\",\r\n        en: \"Anglais\",\r\n        fr: \"Français\",\r\n      },\r\n      template: {\r\n        header: \"Modèles de présentation - 1 disponible\",\r\n        file: \"Nom du fichier\",\r\n      },\r\n    },\r\n    insQuote: {\r\n      header: \"Soumission d'assurance vie\",\r\n      lifeExp: \"Pour l'espérance de vie moyenne du survivant\",\r\n      65: \"Jusqu'au 65e anniversaire du survivant\",\r\n      25: \"Jusqu'au 25e anniversaire de l'enfant le plus jeune\",\r\n      18: \"Jusqu'au 18e anniversaire de l'enfant le plus jeune\",\r\n    },\r\n  },\r\n};\r\n\r\nexport const ASSUMPTIONS = {\r\n  en: {\r\n    client: {\r\n      header: \"Client\",\r\n      retAge: \"Retirement Age\",\r\n      margTax: \"Current Marginal Tax Rate\",\r\n      avTax: \"Average Tax Rate at Retirement\",\r\n    },\r\n    spouse: {\r\n      header: \"Spouse\",\r\n      retAge: \"Retirement Age\",\r\n      margTax: \"Current Marginal Tax Rate\",\r\n      avTax: \"Average Tax Rate at Retirement\",\r\n    },\r\n    incAndInf: {\r\n      header: \"Retirement Income and Inflation\",\r\n      aftTaxInc: \"Current After-Tax Income\",\r\n      avTax: \"Current Average Tax Rate\",\r\n      aftTaxRetInc: \"Desired After-Tax Retirement Income\",\r\n      infRate: \"Inflation Rate\",\r\n    },\r\n  },\r\n  fr: {\r\n    client: {\r\n      header: \"Client\",\r\n      retAge: \"Âge de la retraite\",\r\n      margTax: \"Taux d'imposition marginal actuel\",\r\n      avTax: \"Taux d'imposition moyen à la retraite\",\r\n    },\r\n    spouse: {\r\n      header: \"Conjoint\",\r\n      retAge: \"Âge de la retraite\",\r\n      margTax: \"Taux d'imposition marginal actuel\",\r\n      avTax: \"Taux d'imposition moyen à la retraite\",\r\n    },\r\n    incAndInf: {\r\n      header: \"Revenus de retraite et inflation\",\r\n      aftTaxInc: \"Revenus actuels après impôts\",\r\n      avTax: \"Taux d'imposition moyen actuel\",\r\n      aftTaxRetInc: \"Revenus de retraite souhaités après impôts\",\r\n      infRate: \"Taux d'inflation\",\r\n    },\r\n  },\r\n};\r\n\r\nexport const CURRENTSAVE = {\r\n  en: {\r\n    client: {\r\n      header: \"Client\",\r\n      regist: {\r\n        header: \"Registered\",\r\n        currVal: \"Current Value\",\r\n        annCont: \"Annual Contributions\",\r\n        RoR: \"Current Rate of Return\",\r\n        RoRAtRet: \"Assumed Rate of Return at Retirement\",\r\n      },\r\n      nonRegist: {\r\n        header: \"Non-Registered\",\r\n        currVal: \"Current Value\",\r\n        annCont: \"Annual Contributions\",\r\n        RoR: \"Current Rate of Return\",\r\n        RoRAtRet: \"Assumed Rate of Return at Retirement\",\r\n      },\r\n      TFSA: {\r\n        header: \"TFSA\",\r\n        currVal: \"Current Value\",\r\n        annCont: \"Annual Contributions\",\r\n        RoR: \"Current Rate of Return\",\r\n        RoRAtRet: \"Assumed Rate of Return at Retirement\",\r\n      },\r\n    },\r\n    spouse: {\r\n      header: \"Spouse\",\r\n      regist: {\r\n        header: \"Registered\",\r\n        currVal: \"Current Value\",\r\n        annCont: \"Annual Contributions\",\r\n        RoR: \"Current Rate of Return\",\r\n        RoRAtRet: \"Assumed Rate of Return at Retirement\",\r\n      },\r\n      nonRegist: {\r\n        header: \"Non-Registered\",\r\n        currVal: \"Current Value\",\r\n        annCont: \"Annual Contributions\",\r\n        RoR: \"Current Rate of Return\",\r\n        RoRAtRet: \"Assumed Rate of Return at Retirement\",\r\n      },\r\n      TFSA: {\r\n        header: \"TFSA\",\r\n        currVal: \"Current Value\",\r\n        annCont: \"Annual Contributions\",\r\n        RoR: \"Current Rate of Return\",\r\n        RoRAtRet: \"Assumed Rate of Return at Retirement\",\r\n      },\r\n    },\r\n  },\r\n  fr: {\r\n    client: {\r\n      header: \"Client\",\r\n      regist: {\r\n        header: \"Enregistrée\",\r\n        currVal: \"Valeur actuelle\",\r\n        annCont: \"Cotisations annuelles\",\r\n        RoR: \"Taux de rendement actuel\",\r\n        RoRAtRet: \"Taux de rendement hypothétique à la retraite\",\r\n      },\r\n      nonRegist: {\r\n        header: \"Non enregistrée\",\r\n        currVal: \"Valeur actuelle\",\r\n        annCont: \"Cotisations annuelles\",\r\n        RoR: \"Taux de rendement actuel\",\r\n        RoRAtRet: \"Taux de rendement hypothétique à la retraite\",\r\n      },\r\n      TFSA: {\r\n        header: \"CELI\",\r\n        currVal: \"Valeur actuelle\",\r\n        annCont: \"Cotisations annuelles\",\r\n        RoR: \"Taux de rendement actuel\",\r\n        RoRAtRet: \"Taux de rendement hypothétique à la retraite\",\r\n      },\r\n    },\r\n    spouse: {\r\n      header: \"Spouse\",\r\n      regist: {\r\n        header: \"Enregistrée\",\r\n        currVal: \"Valeur actuelle\",\r\n        annCont: \"Cotisations annuelles\",\r\n        RoR: \"Taux de rendement actuel\",\r\n        RoRAtRet: \"Taux de rendement hypothétique à la retraite\",\r\n      },\r\n      nonRegist: {\r\n        header: \"Non enregistrée\",\r\n        currVal: \"Valeur actuelle\",\r\n        annCont: \"Cotisations annuelles\",\r\n        RoR: \"Taux de rendement actuel\",\r\n        RoRAtRet: \"Taux de rendement hypothétique à la retraite\",\r\n      },\r\n      TFSA: {\r\n        header: \"CELI\",\r\n        currVal: \"Valeur actuelle\",\r\n        annCont: \"Cotisations annuelles\",\r\n        RoR: \"Taux de rendement actuel\",\r\n        RoRAtRet: \"Taux de rendement hypothétique à la retraite\",\r\n      },\r\n    },\r\n  },\r\n};\r\n\r\nexport const PROGGOUV = {\r\n  en: {\r\n    CPP: {\r\n      header: \"Canada Pension Plan\",\r\n      part: \"Client Participation\",\r\n      start: \"Client Start Age\",\r\n      spousePart: \"Spouse Participation\",\r\n      spouseStart: \"Spouse Start Age\",\r\n    },\r\n    oldAgeSec: {\r\n      header: \"Old Age Security\",\r\n      part: \"Client Participation\",\r\n      start: \"Client Start Age\",\r\n      spousePart: \"Spouse Participation\",\r\n      spouseStart: \"Spouse Start Age\",\r\n    },\r\n  },\r\n  fr: {\r\n    CPP: {\r\n      header: \"Régime de pensions du Canada\",\r\n      part: \"Contribution du client\",\r\n      start: \"Âge du client au départ\",\r\n      spousePart: \"Contribution du conjoint\",\r\n      spouseStart: \"Âge du conjoint au départ\",\r\n    },\r\n    oldAgeSec: {\r\n      header: \"Sécurité de la vieillesse\",\r\n      part: \"Contribution du client\",\r\n      start: \"Âge du client au départ\",\r\n      spousePart: \"Contribution du conjoint\",\r\n      spouseStart: \"Âge du conjoint au départ\",\r\n    },\r\n  },\r\n};\r\n\r\nexport const INCSOURCESATRET = {\r\n  en: {\r\n    client: {\r\n      header: \"Client\",\r\n      from: \"From Age\",\r\n      to: \"To Age\",\r\n      inc: \"Income Amount\",\r\n    },\r\n    spouse: {\r\n      header: \"Spouse\",\r\n      from: \"From Age\",\r\n      to: \"To Age\",\r\n      inc: \"Income Amount\",\r\n    },\r\n  },\r\n  fr: {\r\n    client: {\r\n      header: \"Client\",\r\n      from: \"de l'âge\",\r\n      to: \"à l'âge\",\r\n      inc: \"Montant des revenus\",\r\n    },\r\n    spouse: {\r\n      header: \"Spouse\",\r\n      from: \"de l'âge\",\r\n      to: \"à l'âge\",\r\n      inc: \"Montant des revenus\",\r\n    },\r\n  },\r\n};\r\n\r\nexport const CONTROLTITLE = {\r\n  en: {\r\n    age: \"Age\",\r\n    sex: \"Sex\",\r\n    smoking: \"Smoking Status\",\r\n    name: \"Name\",\r\n    member: \"Member\",\r\n    type: \"Type\",\r\n    owner: \"Owner\",\r\n    growthDir: \"Grows/Reduces\",\r\n    exposureDur: \"Exposure Duration\",\r\n    changeRate: \"Reduction Rate\",\r\n    repay: \"Annual Repayment\",\r\n    amount: \"Current Value\",\r\n    FA: \"Face Amount\",\r\n    amountGross: \"Gross Value\",\r\n    afterTaxAmount: \"After-tax Value\",\r\n    percent: \"Percent\",\r\n    tax: \"Tax Method\",\r\n    desc: \"Description\",\r\n    disposeYr: \"Year to Dispose\",\r\n    disposeDur: \"Dur. of Disposal\",\r\n    startYear: \"Start Year\",\r\n    dur: \"Duration\",\r\n    ACB: \"ACB\",\r\n    smallBusinessCapGainExemption: \"Exemption...\",\r\n    growth: \"Growth Rate\",\r\n    income: \"Gross Income\",\r\n    avgTax: \"Avg. Tax Rate\",\r\n    retAge: \"Retirement Age\",\r\n    protectToAge: \"Protect to Age\",\r\n    cppElig: \"CPP Eligibility\",\r\n    qppElig: \"QPP Eligibility\",\r\n    invRate: \"Investment Rate\",\r\n    inflation: \"Inflation Rate\",\r\n    taxRate: \"Marginal Tax Rate\",\r\n    dividendTaxRate: \"Dividend Tax Rate\",\r\n    province: \"Province\",\r\n    designedBy: \"Designed By\",\r\n    designedFor: \"Designed For\",\r\n    contributionAmt: \"Contribution\",\r\n    contributionStartYr: \"From Year\",\r\n    contributionDur: \"Duration\",\r\n    withdrawalAmt: \"Withdrawal\",\r\n    withdrawalStartYr: \"From Year\",\r\n    withdrawalDur: \"Duration\",\r\n    incomeRate: \"Income Rate\",\r\n    RRIFRate: \"RRIF Growth Rate\",\r\n    RRIFAge: \"RRIF Age\",\r\n    ownershipAction: \"Ownership\",\r\n    pdf: \"Export to PDF\",\r\n    pdfINAAppendix: \"Export to PDF Appendix\",\r\n    print: \"Printable Page\",\r\n    lifo: \"Life Insurance Funding Options\",\r\n    wl: \"Insurance for Your Whole Life\",\r\n    ep: \"Protecting Your Estate \",\r\n    compulife: \"Get a Quote ...\",\r\n    save: \"Save\",\r\n    load: \"Load\",\r\n    rec: \"Recover\",\r\n    notes: \"Notes\",\r\n    switch: \"Switch Client\"\r\n  },\r\n  fr: {\r\n    age: \"Âge\",\r\n    sex: \"Sexe\",\r\n    smoking: \"Fumeur / non-fumeur\",\r\n    name: \"Nom\",\r\n    member: \"Membre\",\r\n    type: \"Type\",\r\n    owner: \"Propriétaire\",\r\n    growthDir: \"Augmente/diminue\",\r\n    exposureDur: \"Durée de l'exposition\",\r\n    changeRate: \"Taux de réduction\",\r\n    repay: \"Remboursement annuel\",\r\n    amount: \"Valeur actuelle\",\r\n    FA: \"Capital assuré\",\r\n    amountGross: \"Valeur brute\",\r\n    afterTaxAmount: \"Valeur après impôt\",\r\n    percent: \"Pourcentage\",\r\n    tax: \"Méthode fiscale\",\r\n    desc: \"Description\",\r\n    disposeYr: \"Année à éliminer\",\r\n    disposeDur: \"Durée de l'élimination\",\r\n    startYear: \"Année de démarrage\",\r\n    dur: \"Durée\",\r\n    ACB: \"PBR\",\r\n    smallBusinessCapGainExemption: \"Exonération...\",\r\n    growth: \"Taux de croissance\",\r\n    income: \"Revenu brut\",\r\n    avgTax: \"% d'impôt moyen\",\r\n    retAge: \"Âge de la retraite\",\r\n    protectToAge: \"Protection à l'âge\",\r\n    cppElig: \"Admissibilité au RPC\",\r\n    qppElig: \"Admissibilité au RRQ\",\r\n    invRate: \"Taux de rendement\",\r\n    inflation: \"Taux d'inflation\",\r\n    taxRate: \"% d'impôt marginal\",\r\n    dividendTaxRate: \"Taux d'imposition\", // des dividendes\",\r\n    province: \"Province\",\r\n    designedBy: \"Par\",\r\n    designedFor: \"Conçu pour\",\r\n    contributionAmt: \"Contribution\",\r\n    contributionStartYr: \"From Year\",\r\n    contributionDur: \"Durée\",\r\n\r\n    withdrawalAmt: \"Retrait\",\r\n    withdrawalStartYr: \"De l'année\",\r\n    withdrawalDur: \"Durée\",\r\n\r\n    incomeRate: \"Revenu en %\",\r\n    RRIFRate: \"Taux de crois. FERR\",\r\n    RRIFAge: \"Âge – FERR\",\r\n    ownershipAction: \"Propriété\",\r\n    pdf: \"Exporter en format PDF\",\r\n    pdfINAAppendix: \"Exporter vers l'annexe PDF\",\r\n    print: \"Page imprimable\",\r\n    lifo: \"Modes de financement de l'assurance vie\",\r\n    wl: \"L'assurance pour votre vie entière\",\r\n    ep: \"Protection de votre patrimoine\",\r\n    compulife: \"Générer une cotation\",\r\n    save: \"Enregistrer\",\r\n    load: \"Charger\",\r\n    rec: \"Récupérer\",\r\n    notes: \"Notes\",\r\n    switch: \"Client d'échange\"\r\n  },\r\n};\r\n\r\nexport const TITLES = {\r\n  en: {\r\n    appletINA: \"Insurance Needs Analysis\",\r\n    appletEP: \"Protecting Your Estate\",\r\n    clients: \"Family Profile\",\r\n    assets: \"Assets, Sources of Cash\",\r\n    liabilities: \"Liabilities, Cash Needs at Death\",\r\n    sources: \"Sources of Income of the Survivor\",\r\n    needs: \"Income Needs of the Survivor\",\r\n    settings: \"Presentation Options\",\r\n    presentations: \"Presentation Details\",\r\n    results: \"Results\",\r\n    presBut: \"Presentation\",\r\n    graphsBut: \"Graphs\",\r\n    retBut: \"Retirement\",\r\n    protectButton: \"Protection Period\",\r\n    leBut: \"Life Expectancy\",\r\n    age100But: \"Age 100\",\r\n    spreadsheetBut: \"Spreadsheet\",\r\n    analysisBut: \"Analysis\",\r\n    benef: \"beneficiary...\",\r\n    insuredJLTD: \"insure as JLTD\",\r\n    insured: \"to be insured...\",\r\n\r\n    default: \"Set as Default\",\r\n    defaultClear: \"Clear Default\",\r\n  },\r\n  fr: {\r\n    appletINA: \"Analyse des besoins en matière d'assurance\",\r\n    appletEP: \"Protection de votre patrimoine\",\r\n    clients: \"Profil familial\",\r\n    assets: \"Sources de capitaux\",\r\n    liabilities: \"Liquidités requises au décès\",\r\n    sources: \"Sources de revenus au décès\",\r\n    needs: \"Revenus requis du survivant\",\r\n    settings: \"Options de la présentation\",\r\n    presentations: \"Précisions sur la présentation\",\r\n    results: \"Résultats\",\r\n    presBut: \"Présentation\",\r\n    graphsBut: \"Graphique\",\r\n    retBut: \"Retraite\",\r\n    protectButton: \"Période de protection\",\r\n    leBut: \"Espérance de vie\",\r\n    age100But: \"100 ans\",\r\n    spreadsheetBut: \"Feuille de calcul\",\r\n    analysisBut: \"Analyse\",\r\n    benef: \"bénéficiaire...\",\r\n    insured: \"être assuré...\",\r\n    default: \"Définir par défaut\",\r\n    defaultClear: \"Effacer Par défaut\",\r\n  },\r\n};\r\n\r\nexport const UNLISTED = {\r\n  en: {\r\n    Assets: {\r\n      Values: [\"Charit. Gifts Tax Credit\"],\r\n    },\r\n  },\r\n  fr: {\r\n    Assets: {\r\n      Values: [\"Crédit d'impôt pour don de bienfaisance\"],\r\n    },\r\n  },\r\n};\r\n\r\nexport const OUTPUTTEXT = {\r\n  en: {\r\n    Values: [\r\n      \"When you die, your family will face two important money needs, a need for Cash and a need for Income.  While some cash needs are temporary, others are required at all stages of life, so are identified as 'Permanent Cash Needs', When you die, your family will face two important money needs, a need for Cash and a need for Income,\tThe scenarios described in the preceding presentation outline some general financial strategies. Readers should seek independent legal, tax and accounting advice with regard to the views expressed in this document. Any numbers illustrated are provided as example and are to be used as estimates only.\",\r\n    ],\r\n  },\r\n  fr: {\r\n    Values: [\r\n      \"À votre décès, votre famille aura deux besoins financiers importants, un besoin de liquidités et un besoin de revenus.  Bien que certains besoins en liquidités soient temporaires, d'autres sont présents à chaque étape de la vie. On les désigne comme des « besoins permanents en liquidités »', À votre décès, votre famille aura deux besoins financiers importants, un besoin de liquidités et un besoin de revenus, Les scénarios décrits dans la présentation précédente illustrent des stratégies financières générales. Le lecteur devrait demander l'avis d'un conseiller juridique, fiscal ou comptable indépendant au sujet des opinions exprimées dans le présent document. Les chiffres illustrés ne sont donnés qu'à titre d'exemple et ne doivent être utilisés qu'à des fins d'estimation.\",\r\n    ],\r\n  },\r\n};\r\n\r\nexport const OUTPUTTITLE = {\r\n  en: {\r\n    Values: [\r\n      \"Insurance Needs Analysis\",\r\n      \"Family Cash Needs at Death\",\r\n      \"Family Income Needs at Death\",\r\n      \"Family Cash Sources at Death\",\r\n      \"Family Income Sources at Death\",\r\n      \"Life Insurance Analysis\",\r\n      \"Some Important Notes\",\r\n    ],\r\n  },\r\n  fr: {\r\n    Values: [\r\n      \"Analyse des besoins en matière d'assurance\",\r\n      \"Liquidités requises pour la famille au décès\",\r\n      \"Revenus requis pour la famille au décès\",\r\n      \"Sources de liquidités de la famille au décès\",\r\n      \"Sources de revenus de la famille au décès\",\r\n      \"Analyse des besoins d'assurance vie\",\r\n      \"Notes importantes\",\r\n    ],\r\n  },\r\n};\r\n\r\nexport const OUTPUTTITLE_EP = {\r\n  en: {\r\n    Values: [\r\n      \"Protecting your Estate\",\r\n      \"Family Cash Needs at Death\",\r\n      \"Family Income Needs at Death\",\r\n      \"Family Cash Sources at Death\",\r\n      \"Family Income Sources at Death\",\r\n      \"Life Insurance Analysis\",\r\n      \"Some Important Notes\",\r\n    ],\r\n  },\r\n  fr: {\r\n    Values: [\r\n      \"Protection de votre patrimoine\",\r\n      \"Liquidités requises pour la famille au décès\",\r\n      \"Revenus requis pour la famille au décès\",\r\n      \"Sources de liquidités de la famille au décès\",\r\n      \"Sources de revenus de la famille au décès\",\r\n      \"Analyse des besoins d'assurance vie\",\r\n      \"Notes importantes\",\r\n    ],\r\n  },\r\n};\r\n\r\nexport const MESSAGES = {\r\n  en: {\r\n    insNeed: \"Insurance Needs\",\r\n    graphLine2: \"To provide for the income shortfall until retirement\",\r\n    graphT1: \"Personal cash Flow\",\r\n    graphT2: \"Government cash Flow\",\r\n    graphT3: \"Income Needs\",\r\n    graphT4: \"Shortfall\",\r\n    /* infoYr0: \"Year 0 stands for “at death”\",\r\n    infoRetDur: \"Duration to retirement is … years\",\r\n    infoAvgTax: \"Survivor's tax rate is applied to annual income and interest and annual asset disposition. Marginal tax rate (under Presentation Details) is applied to planned or potential full disposition of an asset\",\r\n    infoAdjust:\r\n      \"Adjust Income Needs and Income Source durations to end age (99) or Life Expectancy of\",\r\n    clientOnly: \"Needs Analysis is always done for family member ‘Client'\",\r\n    infoElig:\r\n      \"Survivor's and orphan's benefits are based on Client's eligibility\", */\r\n    ever: \" ... for ever\",\r\n    taxMsg: \"Tax methods need to be discussed with your financial advisor\",\r\n    fetch: \"Failed to connect to the server\",\r\n    /*  ie: \"Please use Edge or Chrome browsers for graphs and full functionality\",\r\n    govB:\r\n      \"Do not delete government benefits. To adjust them change Client's eligibility\",\r\n    assetTax:\r\n      \"Please use after tax asset values until Tax Method becomes available\" */\r\n  },\r\n  fr: {\r\n    insNeed: \"Besoins d'assurance\",\r\n    graphLine2:\r\n      \"Pour couvrir le manque à gagner en matière de revenus jusqu'à la retraite\",\r\n    graphT1: \"Liquidités personnelles\",\r\n    graphT2: \"Liquidités versées par l'état\",\r\n    graphT3: \"Revenus requis\",\r\n    graphT4: \"Manque à gagner\",\r\n    infoYr0:\r\n      \"L'année 0 est l'année d                                                                                     u décès\",\r\n    infoRetDur: \"Le nombre d'années avant la retraite est de .... ans\",\r\n    infoAvgTax:\r\n      \"Survivor's tax rate is applied to annual income and interest and annual asset disposition. Marginal tax rate (under Presentaion Details) is applied to planned or potential full disposition of an asset\",\r\n    infoAdjust:\r\n      \"Ajuster les besoins de revenu et les durées de la source de revenu à dernier âge (99) or l'espérance de vie de\",\r\n    clientOnly:\r\n      \"L'analyse des besoins est toujours effectuée pour le «client» membre de la famille\",\r\n    infoElig:\r\n      \"Les prestations du survivant et de l'orphelin sont basées sur l'admissibilité du client\",\r\n    ever: \" ... pour toujours\",\r\n    taxMsg:\r\n      \"Les méthodes fiscales doivent être discutées avec votre conseiller financier\",\r\n    fetch: \"Défaut de connexion au serveur\",\r\n    ie:\r\n      \"s'il vous plaît utiliser les navigateurs Edge ou Chrome pour les graphiques et les fonctionnalités complètes\",\r\n    govB:\r\n      \"Ne supprimez pas les prestations gouvernementales. Pour les ajuster, modifier l'admissibilité du client\",\r\n    assetTax:\r\n      \"Veuillez utiliser les valeurs des actifs après impôt jusqu'à ce que la méthode d'imposition devienne disponibl\",\r\n  },\r\n};\r\n\r\nexport const COLUMN_TITLES = {\r\n  INA_SHEET_HEADERS: {\r\n    en: {\r\n      Full: [\r\n        \"Calendar Year\",\r\n        \"Survivor Age\",\r\n        \"Income Needs\",\r\n        \"Survivors' CPP/QPP\",\r\n        \"Survivors' Income\",\r\n        \"Other Income\",\r\n        \"Total Income\",\r\n        \"Assets, Liabilities Cash Flow\",\r\n        \"Additional Amounts Required\",\r\n        \"Additional Capital Required\",\r\n        \"Capital Fund\",\r\n      ],\r\n    },\r\n    fr: {\r\n      Full: [\r\n        \"Année calendaire\",\r\n        \"Âge du survivant\",\r\n        \"Revenus requis\",\r\n        \"RPC/RRQ des survivants\",\r\n        \"Revenu des survivants\",\r\n        \"Autre revenu\",\r\n        \"Revenu total\",\r\n        \"Flux de trésorerie des actifs et des passifs\",\r\n        \"Montants additionnel requis\",\r\n        \"Capital additionnel requis\",\r\n        \"Fonds de capitaux\",\r\n      ],\r\n    },\r\n  },\r\n  EP_SHEET_HEADERS: {\r\n    en: {\r\n      Full: [\r\n        \"Year\",\r\n        \"Age\",\r\n        \"BOY Balance\",\r\n        \"Fair Market Value\",\r\n        \"Contributions\",\r\n        \"Income, RRIF\",\r\n        \"Sale Proceeds\",\r\n        \"Tax on Income\",\r\n        \"Capital Gain\",\r\n        \"Capital Gains Exemption\",\r\n        \"EOY Balance\",\r\n        \"Average Growth\",\r\n        \"Tax Payable at Death\",\r\n      ],\r\n    },\r\n    fr: {\r\n      Full: [\r\n        \"Année\",\r\n        \"Âge\",\r\n        \"Valeur en début d'année\",\r\n        \"Juste valeur marchande\",\r\n        \"Contributions\",\r\n        \"Revenus, FEER\",\r\n        \"Produits de la vente\",\r\n        \"Impôt sur le revenu\",\r\n        \"Gain en capital\",\r\n        \"Exonération des gains en capital\",\r\n        \"Valeur en fin d'année\",\r\n        \"Croissance moyenne\",\r\n        \"Impôt payable au décès\",\r\n      ],\r\n    },\r\n  },\r\n\r\n  en: {\r\n    intRate: \"Interest Rate\",\r\n    infRate: \"Inflation Rate\",\r\n    surplusCapital: \"Surplus Capital\",\r\n    blank: \"\",\r\n    additionalCapitalReq: \"Additional Capital Required:\",\r\n    survivorLE: \"For survivor's normal life expectancy\",\r\n    survivor65: \"Until survivor is age 65\",\r\n    survivorProtection: \"Until the end of Protection Period\",\r\n    Year: \"Year\",\r\n    Age: \"Age\",\r\n    FMV: \"Fair Market Value\",\r\n    FA: \"Face Amount\",\r\n    EOYBalance: \"EOY Balance\",\r\n    ACB: \"ACB\",\r\n    AnnualContribution: \"Annual Contribution\",\r\n    MinRRIFIncome: \"Min. RRIF Income\",\r\n    Withdrawal: \"Income, Withdrawal\",\r\n    SaleProceeds: \"Sale Proceeds\",\r\n    RentalIncome: \"Rental Income\",\r\n    TaxLiability: \"Tax Liability\",\r\n    Taxonincome: \"Tax on income\",\r\n    TaxLiabilityatDeath: \"Tax Liability at Death\",\r\n    CapitalGain: \"Capital Gain\",\r\n    CapitalGainsExemption: \"Capital Gains Exemption\",\r\n  },\r\n  fr: {\r\n    intRate: \"Taux d'intérêt\",\r\n    infRate: \"Taux d'inflation\",\r\n    surplusCapital: \"Capital excédentaire\",\r\n    blank: \"\",\r\n    additionalCapitalReq: \"Capital additionnel requis: \",\r\n    survivorLE: \"Pour l'espérance de vie moyenne du survivant\",\r\n    survivor65: \"Jusqu'au 65e anniversaire du survivant\",\r\n    survivorProtection: \"Jusqu'à la fin de la période de protection\",\r\n    Year: \"Année\",\r\n    Age: \"Âge\",\r\n    FMV: \"Juste valeur marchande\",\r\n    FA: \"Capital assuré\",\r\n    EOYBalance: \"Valeur FDA\",\r\n    ACB: \"PBR\",\r\n    AnnualContribution: \"Cotisations annuelles\",\r\n    MinRRIFIncome: \"Revenu minimal d'un FERR\",\r\n    Withdrawal: \"Revenu, retrait\",\r\n    SaleProceeds: \"Produits de la vente\",\r\n    RentalIncome: \"Revenus locatifs\",\r\n    TaxLiability: \"Impôt à payer\",\r\n    Taxonincome: \"Impôt sur le revenu\",\r\n    TaxLiabilityatDeath: \"Impôt à payer au décès\",\r\n    CapitalGain: \"Gain en capital\",\r\n    CapitalGainsExemption: \"Exonération des gains en capital\",\r\n  },\r\n};\r\n\r\nexport const GRID_INTERNAL_CAPTIONS = {\r\n  en: {\r\n    excel: \"Download Excel\",\r\n    rows: \"Rows per page\",\r\n    of: \"of\",\r\n  },\r\n  fr: {\r\n    excel: \"Télécharger le fichier Excel\",\r\n    rows: \"Lignes par page\",\r\n    of: \"lignes 1-5 sur 10\",\r\n  },\r\n};\r\n\r\nexport const TOTALS = {\r\n  ESTATE_LIAB: {\r\n    value: { en: \"Estate Liability\", fr: \"Droits successoraux\" },\r\n    Key: \"ESTATE_LIAB\",\r\n    order: 1,\r\n    colour: \"#872651\",\r\n  },\r\n  TAX_LIAB: {\r\n    value: { en: \"Tax Liability\", fr: \"Impôt à payer\" },\r\n    Key: \"TAX_LIAB\",\r\n    order: 1,\r\n    colour: \"#872651\",\r\n  },\r\n};\r\n\r\nexport const EMAIL = {\r\n  en: {\r\n    body: \"The following link opens your quote in Toolkit Direct\", //. Once there, click on Insurance Needs Analysis to open up the attached quote.\",\r\n  },\r\n  fr: {\r\n    body:\r\n      \"Le lien suivant ouvre vos valeurs d'entrée dans Boîte à outils directe\",\r\n  },\r\n};\r\n\r\nexport const LIABILITIES = {\r\n  LAST_EXPENSES: {\r\n    value: { en: \"Last Expenses\", fr: \"Derniers frais\" },\r\n    Key: \"LAST_EXPENSES\",\r\n    order: 2,\r\n    ID: 0,\r\n  },\r\n  LEGAL_AND_EXECUTOR_FEES: {\r\n    value: {\r\n      en: \"Legal and Executor Fees\",\r\n      fr: \"Frais juridiques et successoraux\",\r\n    },\r\n    Key: \"LEGAL_AND_EXECUTOR_FEES\",\r\n    order: 3,\r\n    ID: 1,\r\n  },\r\n  OUTSTANDING_LOANS: {\r\n    value: { en: \"Outstanding Loans\", fr: \"Emprunts à rembourser\" },\r\n    Key: \"OUTSTANDING_LOANS\",\r\n    order: 4,\r\n    ID: 2,\r\n  },\r\n  MORTGAGE_REDEMPTION: {\r\n    value: { en: \"Mortgage Redemption\", fr: \"Acquittement de l'hypothèque\" },\r\n    Key: \"MORTGAGE_REDEMPTION\",\r\n    order: 5,\r\n    ID: 3,\r\n  },\r\n  EMERGENCY_FUND: {\r\n    value: { en: \"Emergency Fund\", fr: \"Fonds d'urgence\" },\r\n    Key: \"EMERGENCY_FUND\",\r\n    order: 6,\r\n    ID: 4,\r\n  },\r\n  CHARITABLE_GIFTS: {\r\n    value: { en: \"Charitable Gifts\", fr: \"Dons de bienfaisance\" },\r\n    Key: \"CHARITABLE_GIFTS\",\r\n    order: 7,\r\n    ID: 5,\r\n  },\r\n  LEGACY_FOR_CHILDREN: {\r\n    value: { en: \"Legacy for Children\", fr: \"Héritage pour les enfants\" },\r\n    Key: \"LEGACY_FOR_CHILDREN\",\r\n    order: 8,\r\n    ID: 6,\r\n  },\r\n  CHILD_HOME_CARE: {\r\n    value: { en: \"Child/Home Care\", fr: \"Garde d'enfants/soins à domicile\" },\r\n    Key: \"CHILD_HOME_CARE\",\r\n    order: 9,\r\n    ID: 7,\r\n  },\r\n  CREDIT_CARDS: {\r\n    value: { en: \"Credit Cards\", fr: \"Cartes de crédit\" },\r\n    Key: \"CREDIT_CARDS\",\r\n    order: 10,\r\n    ID: 8,\r\n  },\r\n  INCOME_TAXES: {\r\n    value: { en: \"Income Taxes\", fr: \"Impôt sur le revenu\" },\r\n    Key: \"INCOME_TAXES\",\r\n    order: 11,\r\n    ID: 9,\r\n  },\r\n  OTHER: { value: { en: \"Other\", fr: \"Autre\" }, Key: \"OTHER\", order: 10 },\r\n  CLIENT_TAX_LIABILITY: {\r\n    value: { en: \"Client Tax liability\", fr: \"Impôt à payer par le client\" },\r\n    Key: \"CLIENT_TAX_LIABILITY\",\r\n    order: 0, // no show\r\n    ID: 10,\r\n  },\r\n  PROBATE: {\r\n    value: { en: \"Probate\", fr: \"Frais d'homologation\" },\r\n    Key: \"PROBATE\",\r\n    order: 1,\r\n    ID: 11,\r\n  },\r\n  \r\n};\r\n\r\nexport const ASSETS = {\r\n  PERSONAL_RESIDENCE: {\r\n    value: {\r\n      en: \"Principal Residence\",\r\n      fr: \"Résidence principale\",\r\n      oldName: \"Personal Residence\",\r\n    },\r\n    Key: \"PERSONAL_RESIDENCE\",\r\n    order: 1,\r\n    ID: 0,\r\n    colour: \"#9B5BA5\",\r\n  },\r\n  REAL_ESTATE: {\r\n    value: { en: \"Real Estate\", fr: \"Immobilier\" },\r\n    Key: \"REAL_ESTATE\",\r\n    order: 2,\r\n    ID: 1,\r\n    colour: \"#0093b2\",\r\n  },\r\n  STOCKS_BONDS: {\r\n    value: { en: \"Stocks & Bonds\", fr: \"Actions et obligations\" },\r\n    Key: \"STOCKS_BONDS\",\r\n    order: 3,\r\n    ID: 2,\r\n    colour: \"#00215b\",\r\n  },\r\n  SMALL_BUSINESS_SHARES: {\r\n    value: {\r\n      en: \"Small Business Shares\",\r\n      fr: \"Actions de petites entreprises \",\r\n    },\r\n    Key: \"SMALL_BUSINESS_SHARES\",\r\n    order: 4,\r\n    ID: 3,\r\n    colour: \"#c4dfe0\",\r\n  },\r\n  RRSP_RRIF: {\r\n    value: { en: \"RRSP/RRIF\", fr: \"REER/FERR\" },\r\n    Key: \"RRSP_RRIF\",\r\n    order: 5,\r\n    ID: 4,\r\n    colour: \"#cf7f00\",\r\n  },\r\n  INTEREST_BEARING: {\r\n    value: { en: \"Interest Bearing\", fr: \"Placement à intérêt\" },\r\n    Key: \"INTEREST_BEARING\",\r\n    order: 7,\r\n    ID: 5,\r\n    colour: \"#dfd666\",\r\n  },\r\n  CASH: {\r\n    value: { en: \"Cash\", fr: \"Liquidités\" },\r\n    Key: \"CASH\",\r\n    order: 8,\r\n    ID: 6,\r\n    colour: \"darkred\",\r\n  },\r\n  OTHER_ASSETS: {\r\n    value: { en: \"Other Assets\", fr: \"Autres actifs\" },\r\n    Key: \"OTHER_ASSETS\",\r\n    order: 9,\r\n    ID: 7,\r\n    colour: \"#949a9e\",\r\n  },\r\n  LIFE_INSURANCE: {\r\n    value: { en: \"Life Insurance\", fr: \"Assurance vie\" },\r\n    Key: \"LIFE_INSURANCE\",\r\n    order: 10,\r\n    ID: 8,\r\n    colour: \"872651\",\r\n  },\r\n  CHARITABLE_GIFTS_TAX_CREDIT: {\r\n    value: {\r\n      en: \"Charit. Gifts Tax Credit\",\r\n      fr: \"Crédit d'impôt pour don de bienfaisance\",\r\n    },\r\n    Key: \"CHARITABLE_GIFTS_TAX_CREDIT\",\r\n    order: 0, // no show,\r\n    ID: 9,\r\n    colour: \"872651\",\r\n  },\r\n  TFSA: {\r\n    value: {\r\n      en: \"TFSA\",\r\n      fr: \"CELI\",\r\n    },\r\n    Key: \"TFSA\",\r\n    order: 6,\r\n    ID: 10,\r\n    colour: \"872651\",\r\n  },\r\n};\r\n\r\nexport const OWNERSHIP = {\r\n  CLIENT: {\r\n    value: { en: \"Client\", fr: \"Client\" },\r\n    Key: \"CLIENT\",\r\n    order: 0,\r\n    ID: 0,\r\n  },\r\n  SPOUSE: {\r\n    value: { en: \"Spouse\", fr: \"Conjoint\" },\r\n    Key: \"SPOUSE\",\r\n    order: 3,\r\n    ID: 1,\r\n  },\r\n  JOINT: {\r\n    value: { en: \"Joint\", fr: \"Conjoint\" },\r\n    Key: \"JOINT\",\r\n    order: 4,\r\n    ID: 2,\r\n  },\r\n};\r\n\r\nexport const ASSET_OWNERSHIP_ACTION = {\r\n  CLIENT: {\r\n    value: { en: \"Client\", fr: \"Client\" },\r\n    Key: \"CLIENT\",\r\n    order: 0,\r\n    ID: 0,\r\n  },\r\n  SPOUSE: {\r\n    value: { en: \"Spouse\", fr: \"Conjoint\" },\r\n    Key: \"SPOUSE\",\r\n    order: 3,\r\n    ID: 1,\r\n  },\r\n  JOINT: {\r\n    value: { en: \"Joint\", fr: \"Conjoint\" },\r\n    Key: \"JOINT\",\r\n    order: 4,\r\n    ID: 2,\r\n  },\r\n  CLIENT_LIQUIDATE: {\r\n    value: { en: \"Client: Liquidate\", fr: \"Client : Liquider\" },\r\n    Key: \"CLIENT_LIQUIDATE\",\r\n    order: 1,\r\n    ID: 3,\r\n  },\r\n  CLIENT_ROLLOVER: {\r\n    value: { en: \"Client: Roll-over\", fr: \"Client : Report\" },\r\n    Key: \"CLIENT_ROLLOVER\",\r\n    order: 2,\r\n    ID: 4,\r\n  },\r\n};\r\n\r\nexport const ASSET_TAX = {\r\n  NON_TAXABLE: {\r\n    value: { en: \"Non-taxable\", fr: \"Non imposable\" },\r\n    Key: \"NON_TAXABLE\",\r\n    order: 1,\r\n    ID: 0,\r\n  },\r\n  CAPITAL_GAINS_DEFERRED: {\r\n    value: { en: \"Capital Gains Deferred\", fr: \"Gains en capital différés\" },\r\n    Key: \"CAPITAL_GAINS_DEFERRED\",\r\n    order: 2,\r\n    ID: 1,\r\n  },\r\n  CAPITAL_GAINS_ANNUAL: {\r\n    value: { en: \"Capital Gains Annual\", fr: \"Gains en capital annuels\" },\r\n    Key: \"CAPITAL_GAINS_ANNUAL\",\r\n    order: 3,\r\n    ID: 2,\r\n  },\r\n  REGISTERED: {\r\n    value: { en: \"Registered\", fr: \"Enregistré\" },\r\n    Key: \"REGISTERED\",\r\n    order: 4,\r\n    ID: 3,\r\n  },\r\n  FULLY_TAXABLE: {\r\n    value: { en: \"Fully Taxable\", fr: \"Pleinement imposable\" },\r\n    Key: \"FULLY_TAXABLE\",\r\n    order: 5,\r\n    ID: 4,\r\n  },\r\n  DIVIDEND: {\r\n    value: { en: \"Dividend\", fr: \"Dividende\" },\r\n    Key: \"DIVIDEND\",\r\n    order: 0,\r\n    ID: 5,\r\n  },\r\n  INTEREST: {\r\n    value: { en: \"Interest\", fr: \"Intérêts\" },\r\n    Key: \"INTEREST\",\r\n    order: 6,\r\n    ID: 6,\r\n  },\r\n  QUALIFYING_SMALL_BUSINESS: {\r\n    value: { en: \"Qualif. Small Business\", fr: \"petites entreprises\" },\r\n    Key: \"QUALIFYING_SMALL_BUSINESS\",\r\n    order: 7,\r\n    ID: 7,\r\n  },\r\n};\r\n\r\nexport const INCOMESOURCES = {\r\n  SURVIVORS_INCOME: {\r\n    value: { en: \"Survivor's Income\", fr: \"Revenus du survivant\" },\r\n    Key: \"SURVIVORS_INCOME\",\r\n    order: 1,\r\n    ID: 0,\r\n  },\r\n  GOV_SURVIVORS_PENSION: {\r\n    value: {\r\n      en: \"Gov. Survivor's Pension\",\r\n      fr: \"Pension de survivant du gouv.\",\r\n    },\r\n    Key: \"GOV_SURVIVORS_PENSION\",\r\n    order: 2,\r\n    ID: 1,\r\n  },\r\n  GOV_DEATH_BENEFIT: {\r\n    value: { en: \"Gov. Death Benefit\", fr: \"Prestation de décès du gouv.\" },\r\n    Key: \"GOV_DEATH_BENEFIT\",\r\n    order: 3,\r\n    ID: 2,\r\n  },\r\n  GOV_ORPHANS_BENEFIT: {\r\n    value: {\r\n      en: \"Gov. Orphan's Benefit\",\r\n      fr: \"Prestation d'orphelin du gouv.\",\r\n    },\r\n    Key: \"GOV_ORPHANS_BENEFIT\",\r\n    order: 4,\r\n    ID: 3,\r\n  },\r\n  RENTAL_INCOME: {\r\n    value: { en: \"Rental Income\", fr: \"Revenus locatifs\" },\r\n    Key: \"RENTAL_INCOME\",\r\n    order: 5,\r\n    ID: 4,\r\n  },\r\n  DIVIDEND_INCOME: {\r\n    value: { en: \"Dividend Income\", fr: \"Revenu de dividendes\" },\r\n    Key: \"DIVIDEND_INCOME\",\r\n    order: 6,\r\n    ID: 5,\r\n  },\r\n\r\n  RETIREMENT_INCOME: {\r\n    value: { en: \"Retirement Income\", fr: \"Revenus de retraite\" },\r\n    Key: \"RETIREMENT_INCOME\",\r\n    order: 7,\r\n    ID: 6,\r\n  },\r\n  OTHER: {\r\n    value: { en: \"Other\", fr: \"Autre\" },\r\n    Key: \"OTHER\",\r\n    order: 8,\r\n    ID: 7,\r\n  },\r\n  RRIF: {\r\n    value: { en: \"RRIF\", fr: \"FERR\" },\r\n    Key: \"RRIF\",\r\n    order: 0,\r\n    ID: 8,\r\n  },\r\n};\r\n\r\nexport const INCOMENEEDS = {\r\n  PERCET_OF_INCOME: {\r\n    value: { en: \"% of Total Income\", fr: \"% du revenu total\" },\r\n    Key: \"PERCET_OF_INCOME\",\r\n    order: 1,\r\n    ID: 0,\r\n  },\r\n\r\n  EDUCATION_FUND: {\r\n    value: { en: \"Education Fund\", fr: \"Fonds d'études\" },\r\n    Key: \"EDUCATION_FUND\",\r\n    order: 2,\r\n    ID: 1,\r\n  },\r\n\r\n  TEMPORARY_INCOME: {\r\n    value: { en: \"Temporary Income\", fr: \"Revenus temporaires\" },\r\n    Key: \"TEMPORARY_INCOME\",\r\n    order: 3,\r\n    ID: 2,\r\n  },\r\n\r\n  OTHER: {\r\n    value: { en: \"Other\", fr: \"Autre\" },\r\n    Key: \"OTHER\",\r\n    order: 4,\r\n    ID: 3,\r\n  },\r\n};\r\n\r\nexport const PROVINCE = {\r\n  // \r\n  // {AB, BC, ON, QC, MB, NS, NB, NF, SK, PE, NT, NU,YU,YT}\r\n  AB: {\r\n    value: { en: \"Alberta\", fr: \"Alberta\" },\r\n    Key: \"AB\",\r\n    order: 1,\r\n    ID: 0,\r\n  },\r\n  BC: {\r\n    value: { en: \"British Columbia\", fr: \"Colombie-Britannique\" },\r\n    Key: \"BC\",\r\n    order: 2,\r\n    ID: 1,\r\n  },\r\n  ON: {\r\n    value: { en: \"Ontario\", fr: \"Ontario\" },\r\n    Key: \"ON\",\r\n    order: 8,\r\n    ID: 2,\r\n  },\r\n  QC: {\r\n    value: { en: \"Quebec\", fr: \"Québec\" },\r\n    Key: \"QC\",\r\n    order: 10,\r\n    ID: 3,\r\n  },\r\n  MB: {\r\n    value: { en: \"Manitoba\", fr: \"Manitoba\" },\r\n    Key: \"MB\",\r\n    order: 3,\r\n    ID: 4,\r\n  },\r\n  NS: {\r\n    value: { en: \"Nova Scotia\", fr: \"Nouvelle-Écosse\" },\r\n    Key: \"NS\",\r\n    order: 6,\r\n    ID: 5,\r\n  },\r\n  NB: {\r\n    value: { en: \"New Brunswick\", fr: \"Nouveau-Brunswick\" },\r\n    Key: \"NB\",\r\n    order: 4,\r\n    ID: 6,\r\n  },\r\n  NF: {\r\n    value: { en: \"Newfoundland and Labrador\", fr: \"Terre-Neuve-et-Labrador\" },\r\n    Key: \"NF\",\r\n    order: 3,\r\n    ID: 7,\r\n  },\r\n  SK: {\r\n    value: { en: \"Saskatchewan\", fr: \"Saskatchewan\" },\r\n    Key: \"SK\",\r\n    order: 11,\r\n    ID: 8,\r\n  },\r\n  PE: {\r\n    value: { en: \"Prince Edward Island\", fr: \"Île-du-Prince-Édouard\" },\r\n    Key: \"PE\",\r\n    order: 9,\r\n    ID: 9,\r\n  },\r\n  YU: {\r\n    value: { en: \"Yukon\", fr: \"Yukon\" },\r\n    Key: \"YU\",\r\n    order: 12,\r\n    ID: 12,\r\n  },\r\n  NU: {\r\n    value: { en: \"Nunavut\", fr: \"Nunavut\" },\r\n    Key: \"NU\",\r\n    order: 7,\r\n    ID: 11,\r\n  },\r\n  NT: {\r\n    value: { en: \"Northwest Territories\", fr: \"Territoires du Nord-Ouest\" },\r\n    Key: \"NT\",\r\n    order: 5,\r\n    ID: 10,\r\n  },\r\n};\r\n\r\nexport const MEMBER = {\r\n  CLIENT: {\r\n    value: { en: \"Client\", fr: \"Client\" },\r\n    Key: \"CLIENT\",\r\n    order: 1,\r\n    ID: 0,\r\n  },\r\n  SPOUSE: {\r\n    value: { en: \"Spouse\", fr: \"Conjoint\" },\r\n    Key: \"SPOUSE\",\r\n    order: 2,\r\n    ID: 1,\r\n  },\r\n  CHILD: {\r\n    value: { en: \"Child\", fr: \"Enfant\" },\r\n    Key: \"CHILD\",\r\n    order: 3,\r\n    ID: 2,\r\n  },\r\n  DEPENDENT_ADULT: {\r\n    value: { en: \"Dependent Adult\", fr: \"Adulte à charge\" },\r\n    Key: \"DEPENDENT_ADULT\",\r\n    order: 4,\r\n    ID: 3,\r\n  },\r\n};\r\n\r\nexport const SEX = {\r\n  MALE: {\r\n    value: { en: \"Male\", fr: \"Homme\" },\r\n    Key: \"MALE\",\r\n    order: 1,\r\n    ID: 0,\r\n  },\r\n  FEMALE: {\r\n    value: { en: \"Female\", fr: \"Femme\" },\r\n    Key: \"FEMALE\",\r\n    order: 2,\r\n    ID: 1,\r\n  },\r\n};\r\n\r\nexport const GROWTHDIR = {\r\n  GROWS: {\r\n    value: { en: \"Grows\", fr: \"Augmente\" },\r\n    Key: \"GROWS\",\r\n    order: 1,\r\n    ID: 0,\r\n  },\r\n  REDUCES: {\r\n    value: { en: \"Reduces\", fr: \"Diminue\" },\r\n    Key: \"REDUCES\",\r\n    order: 2,\r\n    ID: 1,\r\n  },\r\n  /* en: {\r\n    Values: [\"Grows\", \"Reduces\"],\r\n  },\r\n  fr: {\r\n    Values: [\"Augmente\", \"Diminue\"],\r\n  }, */\r\n};\r\n\r\nexport const SMOKING = {\r\n  NON_SMOKER: {\r\n    value: { en: \"Non-Smoker\", fr: \"Non-fumeur\" },\r\n    Key: \"NON_SMOKER\",\r\n    order: 1,\r\n    ID: 0,\r\n  },\r\n  SMOKER: {\r\n    value: { en: \"Smoker\", fr: \"Fumeur\" },\r\n    Key: \"SMOKER\",\r\n    order: 2,\r\n    ID: 1,\r\n  },\r\n};\r\n\r\nexport const MONTHS = {\r\n  en: [\r\n    \"January\",\r\n    \"February\",\r\n    \"March\",\r\n    \"April\",\r\n    \"May\",\r\n    \"June\",\r\n    \"July\",\r\n    \"August\",\r\n    \"September\",\r\n    \"October\",\r\n    \"November\",\r\n    \"December\",\r\n  ],\r\n  fr: [\r\n    \"janvier\",\r\n    \"février\",\r\n    \"mars\",\r\n    \"avril\",\r\n    \"mai\",\r\n    \"juin\",\r\n    \"juillet\",\r\n    \"août\",\r\n    \"septembre\",\r\n    \"octobre\",\r\n    \"novembre\",\r\n    \"décembre\",\r\n  ],\r\n};\r\n","import { name, version } from \"../../package.json\";\r\nimport { SEX, SMOKING } from \"../definitions/generalDefinitions\";\r\nimport { QUOTE_CLIENT, QUOTE_SPOUSE, QUOTE_JOINT } from \"../definitions/generalDefinitions\";\r\n\r\nexport function readMCCData(dataInput, planID, client, insNeed) {\r\n   let dataLives = setLives(\r\n    client,\r\n    dataInput\r\n  );\r\n  let dataMCC = {\r\n    insured: {\r\n      lives: dataLives,\r\n      lifeStatus: client===QUOTE_JOINT?1:0\r\n    },\r\n    policy: {\r\n      planName: \"EquiBuild\",\r\n      carrierName: \"Industrial Alliance\",\r\n      planID: planID,\r\n      carrierID:5,\r\n      faceAmount: insNeed,\r\n      intRate: 0.0375,\r\n      province: dataInput.Presentations[0].Province,\r\n      objPremium: {\r\n        DepositMode: 1, //annual\r\n        PremCustom: false,\r\n        PremSet: false,\r\n        PremSolve: true,\r\n        PremSetDur: 50,\r\n        PremSolveDur: 99,\r\n        PremOffsetOn: false,\r\n        PremOffsetYear: 0\r\n      },\r\n      objCustomDB: {\r\n        solveForPremium_On: false,\r\n        solveForPUA_On: false,\r\n        solveRider_On: false,\r\n        customDB: []\r\n      },\r\n      objRider: {\r\n      T10: false,\r\n      T20: false,\r\n      ICO10: false,\r\n      ICO20: false,\r\n      T25: false,\r\n      T30: false,\r\n      T25Amt: 0.0,\r\n      T30Amt: 0.0,\r\n      T10Dur: 10,\r\n      T20Dur: 20,\r\n      T10Amt: 0.0,\r\n      T20Amt: 0.0\r\n    }\r\n    },\r\n    objPUA: {\r\n      MaxPUA: false,\r\n      MaxPUAAmt: 90000000.0,\r\n      BonusPUA: true,\r\n      FundPUA: false,\r\n      FundPUAAmt: 0.0,\r\n      FundPUADur: 10.0\r\n    },\r\n    outputOptions: {\r\n      extCoverage: false,\r\n      IRR_ERR: false,\r\n      outputColumnIDs: [0, 1, 2, 105, 14, 25]\r\n    },\r\n    generalInfo: {\r\n      designedFor: \"\",\r\n      designedBy: \"\",\r\n      language: dataInput.lang === \"en\" ? 0 : 1,\r\n      formatNumericOutput: true\r\n    }\r\n  };\r\n  return dataMCC;\r\n}\r\n\r\nfunction setLives(clientID, dataInput) {\r\n  let dataE = [];\r\n  let i;\r\n  // for calc purposes\r\n  if (clientID === QUOTE_SPOUSE)\r\n    dataE.push({\r\n      age: dataInput.Clients[1].Age,\r\n      sex: dataInput.Clients[1].sexKey === SEX.FEMALE.Key ? 1 : 0,\r\n      smk:\r\n        dataInput.Clients[1].smokerKey === SMOKING.SMOKER.Key ? \"S_STD\" : \"NS_STD\", //Smoker === SMOKING[lang].Values[1]\r\n          //? \"S_STD\"\r\n          //: \"NS_STD\",\r\n      rating: 100 //dataInput.Clients[1].Rating\r\n    });\r\n  else if (clientID === QUOTE_CLIENT)\r\n    dataE.push({\r\n      age: dataInput.Clients[0].Age,\r\n      sex: dataInput.Clients[0].sexKey === SEX.FEMALE.Key ? 1 : 0,\r\n      smk:\r\n        dataInput.Clients[0].smokerKey === SMOKING.SMOKER.Key ? \"S_STD\" : \"NS_STD\", //Smoker === SMOKING[lang].Values[1]\r\n          //? \"S_STD\"\r\n          //: \"NS_STD\",\r\n      rating: 100 //dataInput.Clients[0].Rating\r\n    });\r\n  else {\r\n    for (i = 0; i < dataInput.Clients.length; i++) {\r\n      dataE.push({\r\n        age: dataInput.Clients[i].Age,\r\n        sex: dataInput.Clients[i].sexKey === SEX.FEMALE.Key ? 1 : 0,\r\n        smk:\r\n          dataInput.Clients[i].smokerKey === SMOKING.SMOKER.Key ? \"S_STD\" : \"NS_STD\", //Smoker === SMOKING[lang].Values[1]\r\n            //? \"S_STD\"\r\n            //: \"NS_STD\",\r\n        rating: 100\r\n      });\r\n    }\r\n  }\r\n  return dataE;\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Info } from \"./Info\";\r\n\r\nexport class Collapsible extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      open: this.props.openCollapsible.open,\r\n      id: this.props.openCollapsible.id,\r\n    };\r\n    // console.log(this.state)\r\n  }\r\n  componentWillReceiveProps(nextProps) {\r\n    if (this.state.open !== nextProps.openCollapsible.open)\r\n      this.setState({\r\n        open: nextProps.openCollapsible.open,\r\n        id: nextProps.openCollapsible.id,\r\n      });\r\n  }\r\n\r\n  togglePanel = async (e) => {\r\n    if(this.props.enabled!==false)\r\n      {\r\n    await this.props.handleCollapsibleClick({\r\n      id: this.state.id,\r\n      open: this.state.open,\r\n    });\r\n    this.setState({ open: !this.state.open });\r\n  }\r\n  };\r\n  render() {\r\n    const arr = this.state.open ? (\r\n      <span style={{ fontSize: \"14px\", float: \"right\" }}>&#9650;</span>\r\n    ) : (\r\n      <span style={{ fontSize: \"14px\", float: \"right\" }}>&#9660;</span>\r\n    );\r\n    return (\r\n      <div >\r\n        <div onClick={this.togglePanel} className=\"header\">\r\n          {this.props.title}\r\n          {this.props.infoIcon !== undefined && <Info infoIcon={this.props.infoIcon} /> }\r\n             {arr}\r\n        </div>\r\n        {this.state.open ? (\r\n          <div className=\"content\">{this.props.children}</div>\r\n        ) : null}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","export const OUTPUTTEXT = {\r\n  en: {\r\n    insNeeds100: \"Insurance Needs to age 100\",\r\n    insNeedsRet: \"Insurance Needs to retirement (age \",\r\n    insNeedsRetLE: \"Insurance Needs to life expectancy (age \",\r\n    insNeedsSingleFamily: \"Insurance Needs for a Single Parent with Protection Period of \",\r\n    years: \" years\",\r\n    addSurvivor: \"Survivors need to be added under Family Profile\",\r\n    pg1T: \"Insurance Needs Analysis - Estate\",\r\n    pg1P1: \"Designed for: \",\r\n    pg1P2: \"Designed by: \",\r\n    pg1P3: \"Date: \",\r\n    pg1P4: \"Province: \",\r\n    pg2TabT1: \"Family Profile\",\r\n    pg2TabT2: \"Age\",\r\n    pg2TabT3: \"Annual Income\",\r\n    pg2TabT4: \"Retirement Age\",\r\n    pg2TabT4Alt: \"Protection Period\",\r\n    pg2TabT5: \"Avg. Tax Rate\",\r\n    pg2TabT6: \"Marginal Tax Rate\",\r\n    pg2T2: \"Assumptions\",\r\n    /* pg3T: \"Family Cash Needs at Death\", */\r\n    pg2Tab2: \"Needs Analysis is always done for the family member 'Client'\",\r\n    pg2Tab3: \"Using these factors the total capital required to generate an inflation indexed income thus depleting all capital at the end of the desired insurance time period is calculated. This amount is based on the present value of shortfalls, discounted at the after tax investment rate. It is adjusted, if necessary to make sure early shortfalls are provided for\",\r\n    pg2T3: \"Financial Summary\",\r\n    pg2P5:\"Total Assets (excluding insurance)\",\r\n    pg2P6: \"Total Liabilities (excluding death related)\",//OUTPUTTEXT[lang].pg7TabRow4,\r\n    pg2P7: \"Net Worth\",//OUTPUTTEXT[lang].pg7TabRow4,\r\n    pg2P8: \"Total insurance available at death, yyy of which is taxable\",//OUTPUTTEXT[lang].pg7TabRow4, //  + output.govDB already part of totalassets\r\n    pg2P9: \"Total death related liabilities\",\r\n    pg2P10: \"Additional Life Insurance for Client\",\r\n    pg2P12: \"This is a good opportunity to consider life insurance for Spouse as well (survivor now changes)\",\r\n    pg2P11: \"Life Insurance for Spouse NAME in addition to:\",\r\n    \r\n    pg3T: \"Family Cash and Income Needs\",\r\n    pg3P1:\r\n      /* \"When you die, your family will face two important money needs, a need for Cash and a need for Income. While some cash needs are temporary, others are required at all stages of life, so are identified as 'Permanent Cash Needs'.\", */\r\n      \"When you die, your family will face two important money needs, a need for Cash and a need for Income. While some cash needs are temporary, others are required at all stages of life.\",\r\n    pg3TabT: \"Cash Needs\",\r\n    pg3TabRTot: \"Total\",\r\n    /* pg4T: \"Family Income Needs\", */\r\n    pg4T: \"\",\r\n    /* pg4P1: \"When you die, your family will face two important money needs, a need for Cash and a need for Income.\", */\r\n    pg4P1: \"Continued ...\",\r\n    pg4TabT: \"Income Needs\",\r\n    pg4TabRow1: \"Current Total Annual Family Income\",\r\n    pg4TabRow2:\r\n      \"Percentage of this income you want your family to have to maintain your present standard of living for these time periods is:\",\r\n    //pg4TabRow3: \"While more income is required\",\r\n    //pg4TabRow4: \"For survivor thereafter\",\r\n    pg4TabRow5: \"Therefore your desired after-tax income is:\",\r\n    pgTabRowMoreIncome: \"While more income is required\",\r\n    pgTabRowThereAfter: \"For the survivor thereafter\",\r\n    //pgTabRowThereAfter: \"For the survivor thereafter\",\r\n    pg5T: \"Family Cash Sources\",// at Death\",\r\n    pg5TabT: \"Cash Sources\",\r\n    pg5TabT2: \"All\", \r\n    pg5TabT3: \"At Death\",\r\n    pg5TabRow1: \"CPP/QPP Lump Sum Death Benefit\",\r\n    pg5TabRow3: \"Total Cash Available\",\r\n    pg5TabRow4: \"Less Family Cash needs at Death\",\r\n    pg5TabRow5:\r\n      \"Surplus Cash available to produce income for surviving members of the family\",\r\n    pg6T: \"Family Income Sources\",// at Death\",\r\n    pg6TabT: \"Income Sources\",\r\n    pg6TabRow1:\r\n      \"Therefore the total annual income available for this time period is:\",\r\n    //pg6TabRow2: \"While more income is required\",\r\n    //pg6TabRow3: \"For survivor thereafter\",\r\n    pg5TabRow7:\r\n    \"For surviving members of the family\",\r\n    pg6TabRow4:\r\n      \"The additional after tax income required (desired income less income available) for this time period is:\",\r\n    //pg6TabRow5: \"While more income is required\",\r\n    //pg6TabRow6: \"For survivor thereafter\",\r\n    pg6Net: \"net \",\r\n    pg7T: \"Life Insurance Analysis\",\r\n    pg7TabT: \"Your Family Income Position at Death\",\r\n    pg7TabRow1:\r\n      \"The additional  after tax income required (desired income less income available) for this time period is:\",\r\n    //pg7TabRow2: \"While more income is required\",\r\n    //pg7TabRow3: \"For survivor thereafter\",\r\n    pg7TabRow4: \"Rate of inflation you think will continue\",\r\n    pg7TabRow5:\r\n      \"Rate of interest the survivor could earn on investments in future years\",\r\n    pg7TabRow6:\r\n      \"Using these factors the total capital required to generate an inflation indexed income thus depleting all capital at the end of this time period is:\",\r\n    pg7TabRow7: \"A. For survivor's normal life expectancy (age \",\r\n    pg7TabRow8: \"B. Until survivor retirement\",\r\n    pg7TabRow9: \"C. Until youngest child is age 25\",\r\n    pg7TabRow10: \"D. Until youngest child is age 18\",\r\n    pg8T: \"Life Insurance Analysis\",\r\n    pg8TabT: \"Your Family Financial Position at Death\",\r\n    pg8TabRow1:\r\n      \"Present surplus capital available for investment after covering cash needs is:\",\r\n    pg8TabRow2:\r\n      \"Therefore the additional  income-producing capital (i.e. Life Insurance) needed to solve the income requirement for these time periods is:\",\r\n    pg8TabRow3: \"A. For survivor's normal life expectancy (age \",\r\n    pg8TabRow4: \"B. Until survivor retirement\",\r\n    pg8TabRow5: \"C. Until youngest child is age 25\",\r\n    pg8TabRow6: \"D. Until youngest child is age 18\",\r\n    pg8TabRow4Alt: \"A. Until end of Protection Period\",\r\n    pg9T: \"Some Important Notes\",\r\n    pg9P1:\r\n      \"This presentation is for general information purposes. The information contained in this presentation must not be taken or relied upon by the reader as legal, accounting, taxation or actuarial advice. For these matters readers should seek independent professional advice. Please refer to insurance company illustrations, policy contracts and information folders regarding any insurance matters referred to in this presentation, as those documents will govern in all cases.\",\r\n    //pgFooter: \"See Some Important Notes at the end of this presentation.\",\r\n    pgFooter: \"See Some Important Notes at the end of this presentation.\",\r\n    pg10T: \"Acknowledgments\",\r\n    pg10P1:\r\n      \"I, ____________________________ acknowledge receipt of this Presentation and any quotes related to the information therein, and confirm my understanding of it as a summary and general overview of the illustrated benefits and values. I understand that the aforementioned illustrated benefits and values are neither estimates nor guarantees of future performance; and that actual results may vary based on timing, market performance, health and insurability. These values are subject to change and may differ from those illustrated.\",\r\n    pg10TabRow1: \"Signature of Client(s): ____________________\",\r\n    pg10TabRow11: \"Date: ___________\",\r\n    pg10TabRow2: \"Signature of Client(s): ____________________\",\r\n    pg10TabRow3: \"Signature of Advisor: ____________________\",\r\n    pgAppendix: \"Appendix\",\r\n    pgAppendixT:\r\n      \"INA Graphs and Spreadsheet\",\r\n      pgAppendixP1: \"Incoming cash flows (+) vs outgoing income needs (-)\",\r\n      pgAppendixP2: \"Shortfall (-) is incoming - outgoing cash flows and is funded by insurance\",\r\n      pgAppendixP3 : \"Current financial situation\"\r\n  },\r\n  fr: {\r\n    insNeeds100: \"Besoins en assurance jusqu'à l'âge de 100 ans\",\r\n    insNeedsRet: \"Besoins en assurance jusqu'à la retraite(âge \",\r\n    insNeedsRetLE: \"Besoins en assurance jusqu'à l'espérance de vie (âge \",\r\n    insNeedsSingleFamily: \"L'analyse des besoins est toujours faite pour le membre de la famille \",\r\n    years: \" années\",\r\n    addSurvivor: \"Les survivants doivent être ajoutés dans le profil familial\",\r\n    pg1T: \"Analyse des besoins en matière d'assurance - successorale\",\r\n    pg1P1: \"Conçu pour : \",\r\n    pg1P2: \"Par: \",\r\n    pg1P3: \"Date: \",\r\n    pg1P4: \"Province: \",\r\n    pg2TabT1: \"Profil familial\",\r\n    pg2TabT2: \"Àge\",\r\n    pg2TabT3: \"Revenu annuel\",\r\n    pg2TabT4: \"Àge de la retraite\",\r\n    pg2TabT4Alt: \"Période de protection\",\r\n    pg2T2: \"Hypothèses\",\r\n    pg2Tab2: \"L'analyse des besoins est toujours faite pour le membre de la famille 'Client'\",\r\n    pg2Tab3: \"Ces facteurs permettent de calculer le capital total nécessaire pour générer un revenu indexé à l'inflation, le capital étant donc complètement épuisé à la fin de la période d'assurance souhaitée. Ce montant est basé sur la valeur actuelle des manques à gagner, actualisée au taux de rendement après impôt. Il est rajusté au besoin, afin que l'on puisse s'assurer que les manques à gagner initiaux sont prévus pour.\",\r\n    \r\n    pg2TabT5: \"Taux d'imposition moyen\",\r\n    pg2TabT6: \"Taux marginal d'imposition\",\r\n   /*  pg3T: \"Besoin de liquidités pour la famille au décès\", */\r\n    pg2T3: \"Résumé financier \",\r\n    pg2P5:\"Total des actifs (hors assurance)\",\r\n    pg2P6: \"Total des passifs (non liés au décès)\",//OUTPUTTEXT[lang].pg7TabRow4,\r\n    pg2P7: \"Valeur nette\",//OUTPUTTEXT[lang].pg7TabRow4,\r\n    pg2P8: \"Assurance totale disponible au décès, dont yyy imposables\",//OUTPUTTEXT[lang].pg7TabRow4, //  + output.govDB already part of totalassets\r\n    pg2P9: \"Total des passifs liés au décès\",\r\n    pg2P10: \"Client d'assurance vie supplémentaire\",\r\n    pg2P12: \"C'est aussi une bonne occasion d'envisager une assurance-vie pour le conjoint également (le survivant change maintenant)\",\r\n    pg2P11: \"Assurance vie pour NOM du conjoint en plus de : \",\r\n    \r\n    pg3T: \"Besoins familiaux en matière de liquidités et de revenus\",\r\n   \r\n    pg3P1:\r\n      /* \"À votre décès, votre famille fera face à deux importants besoins financiers, soient d'obtenir des liquidités ainsi que des revenus. Bien que certains besoins de liquidités soient temporaires, d'autres sont nécessaires lors de toutes les étapes de la vie, ils sont donc identifiés comme 'Besoins de liquidités permanents'..\", */\r\n      \"À votre décès, votre famille fera face à deux importants besoins financiers, soient d'obtenir des liquidités ainsi que des revenus. Bien que certains besoins de liquidités soient temporaires, d'autres sont nécessaires lors de toutes les étapes de la vie.\",\r\n    pg3TabT: \"Besoins de liquidités\",\r\n    pg3TabRTot: \"Total\",\r\n    /* pg4T: \"Besoin de revenus pour la famille au décès\", */\r\n    pg4T: \"\",\r\n    /* pg4P1:\r\n      \"À votre décès, votre famille fera face à deux importants besoins financiers, soient d'obtenir des liquidités ainsi que des revenus.\",\r\n    */\r\n   pg4P1: \"Suite ... \", \r\n    pg4TabT: \"Besoins de revenus\",\r\n    pg4TabRow1: \"Montant actuel du revenu familial annuel\",\r\n    pg4TabRow2:\r\n      \"Pourcentage du revenu souhaité pour maintenir le niveau de vie actuel de votre famille pendant la période :\",\r\n    //pg4TabRow3: \"While more income is required\",\r\n    //pg4TabRow3: \"Un revenu plus élevé est requis\",\r\n   \r\n    //pg4TabRow4: \"Pour le survivant par la suite\",\r\n    pg4TabRow5: \"Le revenu souhaité s'élève donc à :\",\r\n    pgTabRowMoreIncome: \"Un revenu plus élevé est requis\",\r\n    pgTabRowThereAfter: \"Pour le survivant par la suite\",\r\n    pg5T: \"Sources de liquidité pour la famille\",// au décès\",\r\n    pg5TabT: \"Sources de liquidité\",\r\n    pg5TabT2: \"Tous\",\r\n    pg5TabT3: \"Au décès\",\r\n  \r\n    pg5TabRow1:\r\n      \"Prestation de décès forfaitaire du RPC/RRQ\",\r\n    pg5TabRow3: \"Total des liquidités disponibles\",\r\n    pg5TabRow4: \"Moins les liquidités nécessaires au décès de l'assuré\",\r\n    pg5TabRow5:\r\n      \"Excédent sur les liquidités disponibles pouvant assurer un revenu à la famille\",\r\n    pg6T: \"Sources de revenu pour la famille\",// au décès\",\r\n    pg6TabT: \"Revenus du survivant\",\r\n    pg6TabRow1:\r\n      \"Le revenu annuel total disponible pour cette période s'élève donc à :\",\r\n    //pg6TabRow2: \"Un revenu plus élevé est requis\",\r\n    //pg6TabRow3: \"Pour le survivant par la suite\",\r\n    pg5TabRow7:\r\n    \"Pour les membres survivants de la famille\",\r\n    pg6TabRow4:\r\n    \"Le revenu supplémentaire après impôt requis (revenu souhaité moins revenu disponible) pour cette période est :\",      \r\n    //pg6TabRow5: \"Un revenu plus élevé est requis\",\r\n    //pg6TabRow6: \"Pour le survivant par la suite\",\r\n    pg6Net: \"net\",\r\n    \r\n    pg7T: \"Besoins d'assurance\",\r\n    pg7TabT: \"État des revenus de la famille au décès\",\r\n    pg7TabRow1:\r\n    \"Le revenu supplémentaire après impôt requis (revenu souhaité moins revenu disponible) pour cette période est :\",\r\n    //pg7TabRow2: \"Un revenu plus élevé est requis\",\r\n    //pg7TabRow3: \"Pour le survivant par la suite\",\r\n    pg7TabRow4: \"Taux d'inflation prévu\",\r\n    pg7TabRow5: \"Taux d'intérêt potentiel des placements futurs du survivant\",\r\n    pg7TabRow6:\r\n      \"Basé sur ces facteurs financiers, le capital total requis pour générer des revenus indexés à l'inflation et qui sera épuisé à la fin de la période est :\",\r\n    pg7TabRow7: \"A. Pour la durée de vie présumée du survivant (âge \",\r\n    pg7TabRow8: \"B. Jusqu'à la retraite du survivant\",\r\n    pg7TabRow9: \"C. Jusqu'au 25e anniv. du benjamin\",\r\n    pg7TabRow10: \"D. Jusqu'au 18e anniv. du benjamin\",\r\n    pg8T: \"Besoins d'assurance\",\r\n    pg8TabT: \"État des revenus de la famille au décès\",\r\n    pg8TabRow1:\r\n      \"Capitaux excédentaires actuellement disponibles pour investissement après couverture des besoins financiers :\",\r\n    pg8TabRow2:\r\n      \"Manque à gagner en capitaux productifs de revenu(ex. assurance) pour les périodes ci-dessous :\",\r\n    pg8TabRow3: \"A. Pour la durée de vie présumée du survivant (âge \",\r\n    pg8TabRow4: \"B. Jusqu'à la retraite du survivant\",\r\n    pg8TabRow5: \"C. Jusqu'au 25e anniv. du benjamin\",\r\n    pg8TabRow6: \"D. Jusqu'au 18e anniv. du benjamin\",\r\n    pg8TabRow4Alt: \"A. Jusqu'à la fin de la période de protection\",\r\n    pg9T: \"Notes importantes\",\r\n    pg9P1:\r\n      \"Le présent exposé ne comporte que des renseignements généraux. L'information qui s'y trouve ne doit pas être considérée par le lecteur comme des conseils juridiques, comptables, fiscaux ou actuariels. Pour ces questions, le lecteur devrait consulter un professionnel indépendant. Veuillez-vous reporter aux illustrations d'assurance, aux libellés des contrats et aux documents d'information des sociétés d'assurance pour obtenir des précisions sur les questions d'assurance mentionnées dans le présent exposé, puisque dans tous les cas, ce sont ces documents qui prévalent.\",\r\n    pgFooter: \"Voir les Notes importantes à la fin du présent exposé.\",\r\n      pg10T: \"Accusé de réception\",\r\n    pg10P1:\r\n      \"Je soussigné, _______________________ accuse réception du présent document et des soumissions connexes, et considère toute l'information sur les prestations et les valeurs comme un résumé seulement. Je comprends que les prestations et les valeurs susmentionnées ne sont ni estimatives ni garantes du rendement futur. Je comprends aussi que les résultats réels peuvent fluctuer en fonction du temps et du rendement du marché, ainsi que de l'état de santé et de l'assurabilité de la personne. Ces résultats peuvent faire l'objet de modifications et différer des valeurs présentées dans l'exposé.\",\r\n    pg10TabRow1: \"Signature du client: ____________________\",\r\n    pg10TabRow11: \"jour, mois, année: ___________\",\r\n    pg10TabRow2: \"Signature du client: ____________________\",\r\n    pg10TabRow3: \"Signature du conseiller en assurance: ____________________\",\r\n    pgAppendix:  \"Annexe\",\r\n    pgAppendixT:\r\n      \"Graphiques et feuilles de calcul de l'analyse des besoins en matière d'assurance\",\r\n      pgAppendixP1: \"Flux de trésorerie entrants (+) et sortants (-)\",\r\n      pgAppendixP2: \"Le manque à gagner (-) correspond aux flux de trésorerie entrants - sortants et est financé par l'assurance\",\r\n      pgAppendixP3 : \"Situation financière actuelle\"\r\n\r\n  }\r\n};\r\n\r\nexport const GRAPHS_LABLES = {\r\n  en: {\r\n    insNeed: \"Insurance Needs\",\r\n    graphMsg: \"To provide for the income shortfall until retirement\",\r\n    persCF: \"Personal cash Flow\",\r\n    govCF: \"Government cash Flow\",\r\n    incomeNeeds: \"Income Needs\",\r\n    shortfall: \"Shortfall\",\r\n    assetsBrk: \"Assets Breakdown Today\",\r\n    liabsBrk: \"Liabilities Breakdown\" ,\r\n    cashLike:        \"Cash/TFSA/Insurance\", \r\n    RRSP: \"RRSP/RRIF\", \r\n    shares: \"Public/Private shares\", \r\n    realEstate: \"Real Estate\", \r\n    otherAssets:\"Other\",\r\n    loans: \"Loans\", \r\n    taxes:\"Taxes\", \r\n    emergency:\"Emergency Fund\", \r\n    otherLiabs:\"Other\",\r\n    atDeath: \"At Death and Future Amts.\",\r\n    insNeeds100: \"Insurance Needs to age 100\",\r\n    insNeedsRet: \"Insurance Needs to retirement (age \",\r\n    insNeedsRetLE: \"Insurance Needs to life expectancy (age \",\r\n    \r\n    currFins: \"Your current financial situation is summarized below: \"\r\n  },\r\n  fr: {\r\n    insNeed: \"Besoins d'assurance\",\r\n    graphMsg:\r\n      \"Pour couvrir le manque à gagner en matière de revenus jusqu'à la retraite\",\r\n      persCF: \"Liquidités personnelles\",\r\n      govCF: \"Liquidités versées par l'état\",\r\n      incomeNeeds: \"Revenus requis\",\r\n      shortfall: \"Manque à gagner\",\r\n      \r\n    assetsBrk: \"Ventilation des actifs (aujourd'hui)\",\r\n    liabsBrk: \"Ventilation des passifs\",\r\n    cashLike:        \"Liquidités/CELI/Assurance\",\r\n    RRSP: \"REER/FERR\",\r\n    shares: \"Titres publics/privés\",\r\n    realEstate: \"Immobilier\",\r\n    otherAssets:\"Autre\",\r\n    loans: \"Prêts\",\r\n    taxes:\"Charges fiscales\",\r\n    emergency:\"Fonds d'urgence\",\r\n    otherLiabs:\"Autre\",\r\n    atDeath: \"Au décès et engagements futurs\",\r\n    insNeeds100: \"Besoins en assurance jusqu'à l'âge de 100 ans\",\r\n    insNeedsRet: \"Besoins en assurance jusqu'à la retraite(âge \",\r\n    insNeedsRetLE: \"Besoins en assurance jusqu'à l'espérance de vie (âge \",\r\n    \r\n    currFins: \"YLe sommaire de votre situation financière actuelle se trouve ci-dessous: \"\r\n  }\r\n}\r\n","import {\r\n  ASSETS,\r\n  ASSET_TAX,\r\n  ASSET_OWNERSHIP_ACTION,\r\n  COLUMN_TITLES,\r\n} from \"../definitions/generalDefinitions\";\r\nimport { getListItemNameFromKey, arrayFormatMoney } from \"../utils/helper\";\r\n\r\nimport { fetchAssetAllGridColumns } from \"../utils/FetchAPIs\";\r\n\r\nimport {\r\n  ASSET_API_OUTPUT_Year,\r\n  ASSET_API_OUTPUT_Age,\r\n  ASSET_API_OUTPUT_FMV,\r\n  ASSET_API_OUTPUT_EOYBalance,\r\n  ASSET_API_OUTPUT_ACB,\r\n  ASSET_API_OUTPUT_CapitalGain,\r\n  ASSET_API_OUTPUT_TaxPayable,\r\n  ASSET_API_OUTPUT_CapGainsExemption,\r\n  ASSET_API_OUTPUT_Deposits,\r\n  ASSET_API_OUTPUT_Withdrawals,\r\n  ASSET_API_OUTPUT_RRIF,\r\n  ASSET_API_OUTPUT_TaxPayableonIncome,\r\n  ASSET_API_OUTPUT_DispositionAmount,\r\n  ASSET_YEAR_TODAY,\r\n  APPLET_INA,\r\n  APPLET_EP,\r\n} from \"../definitions/generalDefinitions\";\r\nimport { appletMode } from \"../../package.json\";\r\n\r\nexport async function getAssetGridValues(dataNA, assetCurr, lang, aggregate) {\r\n  const title = COLUMN_TITLES[lang];\r\n\r\n  let data = await fetchAssetAllGridColumns(dataNA, assetCurr.id);\r\n  if (data !== undefined && data !== undefined) {\r\n    console.log(\"POST: NA_AssetProj success\");\r\n\r\n    let taxOnDisposition = [];\r\n    let yr;\r\n    for (\r\n      yr = 0;\r\n      yr < data[ASSET_API_OUTPUT_TaxPayable].numericValues.length;\r\n      ++yr\r\n    ) {\r\n      taxOnDisposition[yr] =\r\n        data[ASSET_API_OUTPUT_DispositionAmount].numericValues[yr] > 0\r\n          ? data[ASSET_API_OUTPUT_TaxPayable].numericValues[yr]\r\n          : 0;\r\n    }\r\n    taxOnDisposition = arrayFormatMoney(taxOnDisposition, lang, 0);\r\n\r\n    let arrYear = data[ASSET_API_OUTPUT_Year].numericValues;\r\n    \r\n    // year 0 is today, change it\r\n    arrYear[0] = ASSET_YEAR_TODAY[lang].today;\r\n    const arrAge = data[ASSET_API_OUTPUT_Age].numericValues;\r\n    let arrAdjAge = [];// to be used for all and JLTD\r\n    if(appletMode === \"EP\" && dataNA.lives.length>1) // JLTD\r\n    {\r\n      const age1=dataNA.lives[0].Age // missing age is clients if 2 lives surviver is picked up in API\r\n      const age2=dataNA.lives[1].Age // missing age is clients if 2 lives surviver is picked up in API\r\n      \r\n      for (\r\n          let i = 0;\r\n          i < arrYear.length;\r\n          ++i\r\n        ) {\r\n          arrAdjAge.push(parseInt(age1+i) + \"/\" + parseInt(age2+i));\r\n      }\r\n    }\r\n    else\r\n      arrAdjAge =arrAge\r\n    \r\n    const arrDeposits = arrayFormatMoney(\r\n      data[ASSET_API_OUTPUT_Deposits].numericValues,\r\n      lang,\r\n      0\r\n    );\r\n    const arrFMV = arrayFormatMoney(\r\n      data[ASSET_API_OUTPUT_FMV].numericValues,\r\n      lang,\r\n      0\r\n    );\r\n    \r\n    const arrRRIF = arrayFormatMoney(\r\n      data[ASSET_API_OUTPUT_RRIF].numericValues,\r\n      lang,\r\n      0\r\n    );\r\n    const arrEOYBalance = arrayFormatMoney(\r\n      data[ASSET_API_OUTPUT_EOYBalance].numericValues,\r\n      lang,\r\n      0\r\n    );\r\n    const arrWithdrawals = arrayFormatMoney(\r\n      data[ASSET_API_OUTPUT_Withdrawals].numericValues,\r\n      lang,\r\n      0\r\n    );\r\n    const arrTaxPayableonIncome = arrayFormatMoney(\r\n      data[ASSET_API_OUTPUT_TaxPayableonIncome].numericValues,\r\n      lang,\r\n      0\r\n    );\r\n    const arrTaxPayable = arrayFormatMoney(\r\n      data[ASSET_API_OUTPUT_TaxPayable].numericValues,\r\n      lang,\r\n      0\r\n    );\r\n    const arrDispositionAmount = arrayFormatMoney(\r\n      data[ASSET_API_OUTPUT_DispositionAmount].numericValues,\r\n      lang,\r\n      0\r\n    );\r\n    const arrACB = arrayFormatMoney(\r\n      data[ASSET_API_OUTPUT_ACB].numericValues,\r\n      lang,\r\n      0\r\n    );\r\n\r\n\r\n\r\n    const arrCapitalGain = arrayFormatMoney(\r\n      data[ASSET_API_OUTPUT_CapitalGain].numericValues,\r\n      lang,\r\n      0\r\n    );\r\n    const arrCapGainsExemption = arrayFormatMoney(\r\n      data[ASSET_API_OUTPUT_CapGainsExemption].numericValues,\r\n      lang,\r\n      0\r\n    );\r\n    const gridTitleSection =\r\n      appletMode === \"INA\"\r\n        ? \" (\" +\r\n          getListItemNameFromKey(\r\n            ASSET_OWNERSHIP_ACTION,\r\n            assetCurr.ownerKey,\r\n            lang\r\n          ) +\r\n          \")\"\r\n        : \"\" +\r\n          (assetCurr.description !== \"\"\r\n            ? \" (\" + assetCurr.description + \")\"\r\n            : \"\");\r\n    const gridTitle =\r\n      getListItemNameFromKey(ASSETS, assetCurr.assetTypeKey, lang) +\r\n      gridTitleSection +\r\n      \" Projection\";\r\n\r\n    let dataColTitles = [];\r\n    let dataProjection = [];\r\n\r\n   // console.log(arrCapitalGain)\r\n    // aggregate table\r\n    if (aggregate === true) {\r\n      for (\r\n        let i = 0;\r\n        i < COLUMN_TITLES.EP_SHEET_HEADERS[lang].Full.length;\r\n        ++i\r\n      ) {\r\n        dataColTitles.push(COLUMN_TITLES.EP_SHEET_HEADERS[lang].Full[i]);\r\n      }\r\n\r\n      dataProjection[0] = arrYear;\r\n      dataProjection[1] = arrAdjAge;\r\n      dataProjection[2] = arrFMV;\r\n      dataProjection[3] = arrFMV;\r\n      dataProjection[4] = arrDeposits;\r\n      dataProjection[5] = arrRRIF; //+ arrWithdrawals;\r\n      dataProjection[6] = arrDispositionAmount;\r\n      dataProjection[7] = arrTaxPayableonIncome;\r\n      dataProjection[8] = arrCapitalGain;\r\n      dataProjection[9] = arrCapGainsExemption;\r\n      dataProjection[10] = arrEOYBalance;\r\n      dataProjection[11] = arrFMV;\r\n      dataProjection[12] = arrTaxPayable;\r\n    }\r\n\r\n    // individual tables\r\n    else {\r\n      if (assetCurr.assetTaxTypeKey === ASSET_TAX.REGISTERED.Key) {\r\n        //\t\t'Registered')\r\n        if (APPLET_INA) {\r\n          dataColTitles = [\r\n            title.Year,\r\n            title.Age,\r\n            title.FMV,\r\n            title.AnnualContribution,\r\n            title.MinRRIFIncome,\r\n            title.Withdrawal,\r\n            //title.Taxonincome,\r\n            title.EOYBalance,\r\n          ];\r\n\r\n          // F^\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] = arrFMV;\r\n          dataProjection[3] = arrDeposits;\r\n          dataProjection[4] = arrRRIF;\r\n          dataProjection[5] = arrWithdrawals;\r\n          //dataProjection[6] = arrTaxPayableonIncome;\r\n          dataProjection[6] = arrEOYBalance;\r\n        } else {\r\n          dataColTitles = [\r\n            title.Year,\r\n            title.Age,\r\n            title.FMV,\r\n            title.AnnualContribution,\r\n            title.MinRRIFIncome,\r\n            title.Withdrawal,\r\n            //title.Taxonincome,\r\n            title.EOYBalance,\r\n            //title.TaxLiabilityatDeath,\r\n            title.TaxLiability,\r\n          ];\r\n\r\n          // F^\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] = arrFMV;\r\n          dataProjection[3] = arrDeposits;\r\n          dataProjection[4] = arrRRIF;\r\n          dataProjection[5] = arrWithdrawals;\r\n          //dataProjection[6] = arrTaxPayableonIncome;\r\n          dataProjection[6] = arrEOYBalance;\r\n          dataProjection[7] = arrTaxPayable;\r\n        }\r\n      } else if (assetCurr.assetTypeKey === ASSETS.PERSONAL_RESIDENCE.Key) {\r\n        if (APPLET_INA) {\r\n          dataColTitles = [\r\n            title.Year,\r\n            title.Age,\r\n            title.FMV,\r\n            title.SaleProceeds,\r\n          ];\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] =\r\n            //arrEOYBalance;\r\n            arrFMV;\r\n          dataProjection[3] = arrDispositionAmount;\r\n        } else {\r\n          dataColTitles = [\r\n            title.Year,\r\n            title.Age,\r\n            title.FMV,\r\n            title.SaleProceeds,\r\n            title.TaxLiability,\r\n          ];\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] =\r\n            //arrEOYBalance;\r\n            arrFMV;\r\n          dataProjection[3] = arrDispositionAmount;\r\n          dataProjection[4] = arrTaxPayable;\r\n        }\r\n\r\n      } else if (assetCurr.assetTypeKey === ASSETS.LIFE_INSURANCE.Key) {\r\n        if (APPLET_INA) {\r\n          dataColTitles = [title.Year, title.Age, title.FA];\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] =\r\n            //arrEOYBalance;\r\n            arrFMV;\r\n        } else {\r\n          dataColTitles = [title.Year, title.Age, title.FA];\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] =\r\n            //arrEOYBalance;\r\n            arrFMV;\r\n        }\r\n\r\n      } else if (assetCurr.assetTypeKey === ASSETS.REAL_ESTATE.Key) {\r\n        if (APPLET_INA) {\r\n          dataColTitles = [\r\n            title.Year,\r\n            title.Age,\r\n            title.FMV,\r\n            title.ACB,\r\n            title.RentalIncome,\r\n            title.SaleProceeds,\r\n          ];\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] =\r\n            //arrEOYBalance;\r\n            arrFMV;\r\n          dataProjection[3] = arrACB;\r\n          dataProjection[4] = arrWithdrawals;\r\n          dataProjection[5] = arrDispositionAmount;\r\n          dataProjection[6] = taxOnDisposition;\r\n        } else {\r\n          dataColTitles = [\r\n            title.Year,\r\n            title.Age,\r\n            title.FMV,\r\n            title.ACB,\r\n          //  title.RentalIncome,\r\n          //  title.Taxonincome,\r\n            title.SaleProceeds,\r\n            title.CapitalGain,\r\n            title.TaxLiability,\r\n          ];\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] =\r\n            //arrEOYBalance;\r\n            arrFMV;\r\n          dataProjection[3] = arrACB;\r\n       //   dataProjection[4] = arrWithdrawals;\r\n       //   dataProjection[5] = arrTaxPayableonIncome;\r\n          dataProjection[4] = arrDispositionAmount;\r\n          dataProjection[5] = arrCapitalGain;\r\n          dataProjection[6] = arrTaxPayable;\r\n        }\r\n      } else if (assetCurr.assetTypeKey === ASSETS.SMALL_BUSINESS_SHARES.Key) {\r\n        if (APPLET_INA) {\r\n          dataColTitles = [\r\n            title.Year,\r\n            title.Age,\r\n            title.FMV,\r\n            title.ACB,\r\n            title.SaleProceeds,\r\n            title.TaxLiability,\r\n          ];\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] =\r\n            //arrEOYBalance;\r\n\r\n            arrFMV;\r\n          dataProjection[3] = arrACB;\r\n          dataProjection[4] = arrDispositionAmount;\r\n          dataProjection[5] = taxOnDisposition;\r\n        } else {\r\n          dataColTitles = [\r\n            title.Year,\r\n            title.Age,\r\n            title.FMV,\r\n            title.ACB,\r\n            title.SaleProceeds,\r\n            title.CapitalGainsExemption,\r\n            title.CapitalGain,\r\n            title.TaxLiability,\r\n          ];\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] =\r\n            //arrEOYBalance;\r\n\r\n            arrFMV;\r\n          dataProjection[3] = arrACB;\r\n          dataProjection[4] = arrDispositionAmount;\r\n          dataProjection[5] = arrCapGainsExemption;\r\n          dataProjection[6] = arrCapitalGain;\r\n          dataProjection[7] = arrTaxPayable;\r\n        }\r\n      } else if (\r\n        assetCurr.assetTypeKey === ASSETS.INTEREST_BEARING.Key ||\r\n        assetCurr.assetTypeKey === ASSETS.STOCKS_BONDS.Key ||\r\n        assetCurr.assetTypeKey === ASSETS.TFSA.Key\r\n      ) {\r\n        if (APPLET_INA) {\r\n          dataColTitles = [\r\n            title.Year,\r\n            title.Age,\r\n            title.FMV,\r\n            title.AnnualContribution,\r\n            title.Withdrawal,\r\n            title.EOYBalance,\r\n          ];\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] = arrFMV;\r\n          dataProjection[3] = arrDeposits;\r\n          dataProjection[4] = arrWithdrawals;\r\n          dataProjection[5] = arrEOYBalance;\r\n        } else {\r\n          dataColTitles = [\r\n            title.Year,\r\n            title.Age,\r\n            title.FMV,\r\n            title.AnnualContribution,\r\n            title.Withdrawal,\r\n            title.EOYBalance,\r\n            title.TaxLiability,\r\n          ];\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] = arrFMV;\r\n          dataProjection[3] = arrDeposits;\r\n          dataProjection[4] = arrWithdrawals;\r\n          dataProjection[5] = arrEOYBalance;\r\n          dataProjection[6] = arrTaxPayable;\r\n          if (assetCurr.assetTypeKey === ASSETS.STOCKS_BONDS.Key) {\r\n            dataColTitles = [\r\n              title.Year,\r\n              title.Age,\r\n              title.FMV,\r\n              title.ACB,\r\n              title.AnnualContribution,\r\n              title.Withdrawal,\r\n              title.SaleProceeds,\r\n              title.CapitalGain,\r\n              title.EOYBalance,\r\n              title.TaxLiability,\r\n            ];\r\n            dataProjection[0] = arrYear;\r\n            dataProjection[1] = arrAdjAge;\r\n            dataProjection[2] = arrFMV;\r\n            dataProjection[3] = arrACB;\r\n            dataProjection[4] = arrDeposits;\r\n            dataProjection[5] = arrWithdrawals;\r\n            dataProjection[6] = arrDispositionAmount;\r\n            dataProjection[7] = arrCapitalGain;\r\n            dataProjection[8] = arrEOYBalance;\r\n            dataProjection[9] = arrTaxPayable;\r\n          }\r\n        }\r\n\r\n        //  arrTaxPayable;\r\n      } else {\r\n        if (APPLET_INA) {\r\n          dataColTitles = [title.Year, title.Age, title.FMV, title.EOYBalance];\r\n\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] = arrFMV;\r\n          dataProjection[3] = arrEOYBalance;\r\n        } else {\r\n          dataColTitles = [\r\n            title.Year,\r\n            title.Age,\r\n            title.FMV,\r\n            title.EOYBalance,\r\n            title.Withdrawal,\r\n            title.TaxLiability,\r\n          ];\r\n\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] = arrFMV;\r\n          dataProjection[3] = arrEOYBalance;\r\n          dataProjection[4] = arrWithdrawals;\r\n          dataProjection[5] = arrTaxPayable;\r\n        }\r\n      }\r\n    }\r\n    return { dataColTitles, dataProjection, gridTitle };\r\n  }\r\n}\r\n","import {\r\n  TITLES,\r\n  ASSETS,\r\n  IMAGE_LOGO,\r\n  IMAGE_LOGO_OTHERPAGES,\r\n  IMAGE_APPLET_EP,\r\n} from \"../definitions/generalDefinitions\";\r\nimport { OUTPUTTEXTEP } from \"../definitions/outputDefinitionsEP\";\r\nimport { formatMoney, formatMoney2, cleanFormat } from \"../utils/helper\";\r\nimport { getOutputValues } from \"../data/dataExchange\";\r\n\r\nimport {\r\n  PDF,\r\n  InToPt,\r\n  PxToPt,\r\n  HELVETICA,\r\n  TIMES,\r\n  NORMAL,\r\n  BOLD,\r\n  HEADER_RECT_IN_W,\r\n} from \"./PDF\";\r\nimport {\r\n  ASSET_TAX_TYPE_PRINCIPAL_RES,\r\n  ASSET_TAX_TYPE_REAL_ESTATE,\r\n  ASSET_TAX_TYPE_STOCKS,\r\n  ASSET_TAX_TYPE_SMALL_BUS,\r\n  ASSET_TAX_TYPE_RRSP,\r\n  ASSET_TAX_TYPE_INTEREST,\r\n  ASSET_TAX_TYPE_OTHER,\r\n  ASSET_TAX_TYPE_COUNT,\r\n} from \"../definitions/outputDefinitionsEP\";\r\n\r\nconst DISPLAY_INCOME = 1;\r\n\r\nconst BULLET_FONT_SIZE = 24;\r\nconst NUMBER_BULLET_FONT_SIZE = 11;\r\nconst GRID_AGGREGATE = 0;\r\nconst GRID_INDIVIDUAL = 1;\r\n\r\nconst LINES_PER_PAGE_LANDSCAPE = 27;\r\nconst LINES_PER_PAGE_PORTRAIT = 37;\r\n\r\nexport function doSavePdfActionEP(props, AssetLiabProjs) {\r\n  try {\r\n    let pdf = new PDF();\r\n    pdf.Create();\r\n\r\n    var paragraph;\r\n    let height = 0.2;\r\n    let Widths = [1.2, 0.6, 1.8, 1.4];\r\n    let values;\r\n    const paraWidth = 6;\r\n    const paraLeft = 1.2;\r\n    const lineHeight = 0.196;\r\n    const indent = 0.15;\r\n    let paraY = 8 * lineHeight;\r\n\r\n    // pdf output shared with presentation\r\n    let output = getOutputValues(props);\r\n\r\n    const lang = props.dataInput.Presentations[0].language;\r\n    const pg1TitleY = 4.2;\r\n\r\n   \r\n    pdf.SetFont(HELVETICA, NORMAL);\r\n    if (lang === \"en\") pdf.SetFontSize(PxToPt(36));\r\n    else pdf.SetFontSize(PxToPt(36));\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    pdf.Text(\r\n      props.INAOption === DISPLAY_INCOME\r\n        ? TITLES[lang].appletINA\r\n        : TITLES[lang].appletEP,\r\n      InToPt(paraLeft),\r\n      InToPt(pg1TitleY)\r\n    );\r\n    /* page 1: Cover page */\r\n\r\n    //pdf.addCustomImage(\"AdvisorLogo\", pg1TitleY, image, true);\r\n    const image = props.dataInput.Presentations[0].adviserLogo;\r\n    const headerOffset = image.image === null ? 0 : 0.25;\r\n    const top = props.dataInput.Presentations[0].adviserLogo.top;\r\n\r\n    let result;\r\n    result = pdf.addCustomImage(IMAGE_LOGO, pg1TitleY, image, true, top);\r\n\r\n    pdf.AddImage(\r\n      IMAGE_APPLET_EP,\r\n      InToPt(paraLeft + 0.01),\r\n      InToPt(pg1TitleY + 0.5),\r\n      InToPt(6.04),\r\n      InToPt(2.76)\r\n    );\r\n\r\n    pdf.SetFontSize(PxToPt(18));\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    pdf.Text(\r\n      OUTPUTTEXTEP[lang].pg1P1 + output.designedFor,\r\n      InToPt(paraLeft + 0.02),\r\n      InToPt(pg1TitleY + 3.63)\r\n    );\r\n    pdf.Text(\r\n      OUTPUTTEXTEP[lang].pg1P2 + output.designedBy,\r\n      InToPt(paraLeft + 0.02),\r\n      InToPt(pg1TitleY + 4.13)\r\n    );\r\n    pdf.Text(\r\n      OUTPUTTEXTEP[lang].pg1P3 + output.dateApplet,\r\n      InToPt(paraLeft + 0.02),\r\n      InToPt(pg1TitleY + 4.42)\r\n    );\r\n    pdf.Text(\r\n      OUTPUTTEXTEP[lang].pg1P4 + output.province,\r\n      InToPt(paraLeft + 0.02),\r\n      InToPt(pg1TitleY + 4.69)\r\n    );\r\n\r\n    {\r\n      /*end ofPage 1*/\r\n      const footerText = OUTPUTTEXTEP[lang].pgFooter;\r\n      const headerText = OUTPUTTEXTEP[lang].pg1T;\r\n      pdf.addFooterAndHeader(headerOffset, footerText, headerText);\r\n\r\n      /*-Introduction\t\t// Page 2*/\r\n      // logo if asked for\r\n      //    pdf.addCustomImage(\"EPOtherPagesLogo\", pg1TitleY, image);\r\n      result =\r\n        result &&\r\n        pdf.addCustomImage(IMAGE_LOGO_OTHERPAGES, pg1TitleY, image, false, top);\r\n\r\n      setFontForTitle(pdf, lang);\r\n      pdf.Text(OUTPUTTEXTEP[lang].pg2T, InToPt(paraLeft), InToPt(paraY));\r\n      setFontForParas(pdf);\r\n\r\n      let parag = [];\r\n      OUTPUTTEXTEP[lang].pg2Paragraphs.map((item) => parag.push(item));\r\n\r\n      paraY = paraY + 2 * lineHeight;\r\n      insertPara(pdf, parag[0], paraLeft, paraY, paraWidth);\r\n\r\n      paraY = paraY + 5 * lineHeight;\r\n      insertPara(pdf, parag[1], paraLeft, paraY, paraWidth);\r\n\r\n      paraY = paraY + (lang === \"en\" ? 4.5 : 5.5) * lineHeight;\r\n      insertBullet(pdf, \".\", paraLeft + indent, paraY, BULLET_FONT_SIZE);\r\n      insertPara(pdf, parag[2], paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      paraY = paraY + 1.2 * lineHeight;\r\n      insertBullet(pdf, \".\", paraLeft + indent, paraY, BULLET_FONT_SIZE);\r\n      insertPara(pdf, parag[3], paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      paraY = paraY + 2 * lineHeight;\r\n      insertPara(pdf, parag[4], paraLeft, paraY, paraWidth);\r\n\r\n      paraY = paraY + 3 * lineHeight;\r\n      insertBullet(pdf, \".\", paraLeft + indent, paraY, BULLET_FONT_SIZE);\r\n      insertPara(pdf, parag[5], paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      paraY = paraY + 1.2 * lineHeight;\r\n      insertBullet(pdf, \".\", paraLeft + indent, paraY, BULLET_FONT_SIZE);\r\n      insertPara(pdf, parag[6], paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      paraY = paraY + 3 * lineHeight;\r\n      insertPara(pdf, parag[7], paraLeft, paraY, paraWidth);\r\n\r\n      paraY = paraY + 3 * lineHeight;\r\n      insertBullet(pdf, \".\", paraLeft + indent, paraY, BULLET_FONT_SIZE);\r\n      insertPara(pdf, parag[8], paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      paraY = paraY + 1.2 * lineHeight;\r\n      insertBullet(pdf, \".\", paraLeft + indent, paraY, BULLET_FONT_SIZE);\r\n      insertPara(pdf, parag[9], paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      paraY = paraY + 1.2 * lineHeight;\r\n      insertBullet(pdf, \".\", paraLeft + indent, paraY, BULLET_FONT_SIZE);\r\n      insertPara(pdf, parag[10], paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      /*end ofPage 2*/\r\n      pdf.addFooterAndHeader(headerOffset, footerText, headerText);\r\n\r\n      /*/*-Your FEPncial Situation\t\t// Page 3*/\r\n      // logo if asked for\r\n      //    pdf.addCustomImage(\"EPOtherPagesLogo\", pg1TitleY, image);\r\n      result =\r\n        result &&\r\n        pdf.addCustomImage(IMAGE_LOGO_OTHERPAGES, pg1TitleY, image, false, top);\r\n\r\n      paraY = 8 * lineHeight;\r\n      setFontForTitle(pdf, lang);\r\n      pdf.Text(OUTPUTTEXTEP[lang].pg3T, InToPt(paraLeft), InToPt(paraY));\r\n      setFontForParas(pdf);\r\n\r\n      paraY = paraY + 2 * lineHeight;\r\n      paragraph = OUTPUTTEXTEP[lang].pg3P1;\r\n      insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n      // assets table\r\n      let tableWidthAss =\r\n        lang === \"fr\" ? paraWidth / 2 + 0.3 : paraWidth / 2 - 0.2;\r\n      let totalAssets = 0;\r\n      height = 0.24;\r\n      Widths = [paraWidth / 4 + 0.4, paraWidth / 4 - 0.6];\r\n      if (lang === \"fr\")\r\n        Widths = [(3 * tableWidthAss) / 4 + 0.1, tableWidthAss / 4 - 0.1];\r\n\r\n      paraY = paraY + 3.2 * lineHeight;\r\n      const tmpY = paraY;\r\n      values = [OUTPUTTEXTEP[lang].pg3TabT];\r\n\r\n      let align = [];\r\n      insertTableTitle(pdf, paraLeft, paraY, values, height, [\r\n        tableWidthAss + 0.01,\r\n      ]);\r\n\r\n      output.assets.map((element) => {\r\n        values = [\r\n          element.name +\r\n            (element.name === ASSETS.OTHER_ASSETS.value[lang] &&\r\n            element.value > 0\r\n              ? \" *\"\r\n              : \"\"),\r\n          formatMoney2(element.value, 0, lang),\r\n        ];\r\n        //   console.log(values)\r\n        align.push(0);\r\n        align.push(2);\r\n        totalAssets += parseFloat(element.value);\r\n        paraY = paraY + height;\r\n        insertTableRow(\r\n          pdf,\r\n          paraLeft,\r\n          paraY,\r\n          values,\r\n          height,\r\n          Widths,\r\n          false,\r\n          [249, 249, 249],\r\n          align\r\n        );\r\n      });\r\n\r\n      align = [];\r\n      align.push(2);\r\n      align.push(2);\r\n      paraY = paraY + height;\r\n      insertTableRow(\r\n        pdf,\r\n        paraLeft,\r\n        paraY,\r\n        [OUTPUTTEXTEP[lang].pg3Tab2RTot, formatMoney2(totalAssets, 0, lang)],\r\n        height,\r\n        Widths,\r\n        true,\r\n        [235, 235, 235],\r\n        align\r\n      );\r\n      // other assets footnote\r\n\r\n      if (output.otherAssetsList !== \"\") {\r\n        paraY = paraY + 2.2 * lineHeight;\r\n        paragraph = output.otherAssetsList;\r\n        addNote(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n      }\r\n      setFontForParas(pdf);\r\n      //\r\n\r\n      // liabs table\r\n      let tableWidth =\r\n        lang === \"fr\" ? paraWidth / 2 - 0.05 : paraWidth / 2 - 0.2;\r\n      Widths = [paraWidth / 4 + 0.4, paraWidth / 4 - 0.6];\r\n      if (lang === \"fr\") Widths = [(3 * tableWidth) / 4, tableWidth / 4];\r\n\r\n      let totalLiabs = 0;\r\n      const tableLeft = paraLeft + tableWidthAss + 0.2;\r\n      paraY = tmpY;\r\n      values = [OUTPUTTEXTEP[lang].pg3Tab2T];\r\n      insertTableTitle(pdf, tableLeft, paraY, values, height, [\r\n        tableWidth + 0.01,\r\n      ]);\r\n\r\n      align = [];\r\n      output.liabilities.map((element) => {\r\n        values = [element.name, formatMoney2(element.value, 0, lang)];\r\n        align.push(0);\r\n        align.push(2);\r\n\r\n        totalLiabs += parseFloat(element.value);\r\n        paraY = paraY + height;\r\n        insertTableRow(\r\n          pdf,\r\n          tableLeft,\r\n          paraY,\r\n          values,\r\n          height,\r\n          Widths,\r\n          false,\r\n          [249, 249, 249],\r\n          align\r\n        );\r\n      });\r\n\r\n      align = [];\r\n      align.push(2);\r\n      align.push(2);\r\n\r\n      paraY = paraY + height;\r\n      insertTableRow(\r\n        pdf,\r\n        tableLeft,\r\n        paraY,\r\n        [OUTPUTTEXTEP[lang].pg3Tab2RTot, formatMoney2(totalLiabs, 0, lang)],\r\n        height,\r\n        Widths,\r\n        true,\r\n        [235, 235, 235],\r\n        align\r\n      );\r\n      paraY = paraY + height;\r\n      insertTableRow(\r\n        pdf,\r\n        tableLeft,\r\n        paraY,\r\n        [\r\n          OUTPUTTEXTEP[lang].pg3Tab2NW,\r\n          formatMoney2(totalAssets - totalLiabs, 0, lang),\r\n        ],\r\n        height,\r\n        Widths,\r\n        true,\r\n        [205, 205, 205],\r\n        align\r\n      );\r\n\r\n      //Your growing tax liab\r\n      paraY = paraY + 4.6 * lineHeight;\r\n      setFontForTitle(pdf, lang);\r\n      pdf.Text(OUTPUTTEXTEP[lang].pg3T2, InToPt(paraLeft), InToPt(paraY));\r\n      setFontForParas(pdf);\r\n      //\r\n      paraY = paraY + 2 * lineHeight;\r\n      paragraph = OUTPUTTEXTEP[lang].pg3P2;\r\n      insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n      tableWidth = paraWidth;\r\n      Widths = [\r\n        tableWidth / 4 + 0.4,\r\n        tableWidth / 4 - 0.5,\r\n        tableWidth / 4 - 0.1,\r\n        tableWidth / 4 + 0.12,\r\n      ];\r\n      if (lang === \"fr\")\r\n        Widths = [\r\n          tableWidth / 4 + 0.85,\r\n          tableWidth / 4 - 0.45,\r\n          tableWidth / 4 - 0.25,\r\n          tableWidth / 4 + 0.25,\r\n        ];\r\n\r\n      paraY = paraY + (lang === \"fr\" ? 3.2 : 2.8) * lineHeight;\r\n      values = [\r\n        OUTPUTTEXTEP[lang].pg3Tab3R1C1,\r\n        OUTPUTTEXTEP[lang].pg3Tab3R1C2,\r\n        OUTPUTTEXTEP[lang].pg3Tab3R1C3,\r\n        OUTPUTTEXTEP[lang].pg3Tab3R1C4,\r\n      ];\r\n      const height2 = insertTableTitle(\r\n        pdf,\r\n        paraLeft,\r\n        paraY,\r\n        values,\r\n        height,\r\n        Widths\r\n      );\r\n      paraY = paraY + height + height2;\r\n      //paraY = paraY + height;\r\n      insertTableRow(\r\n        pdf,\r\n        paraLeft,\r\n        paraY,\r\n        [\r\n          OUTPUTTEXTEP[lang].pg3Tab3R2C1,\r\n          AssetLiabProjs.EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_REAL_ESTATE],\r\n          formatMoney2(\r\n            AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_REAL_ESTATE],\r\n            0,\r\n            lang\r\n          ),\r\n          formatMoney2(\r\n            AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_REAL_ESTATE],\r\n            0,\r\n            lang\r\n          ),\r\n        ],\r\n        height,\r\n        Widths,\r\n        false,\r\n        [249, 249, 249],\r\n        align\r\n      );\r\n      paraY = paraY + height;\r\n      insertTableRow(\r\n        pdf,\r\n        paraLeft,\r\n        paraY,\r\n        [\r\n          OUTPUTTEXTEP[lang].pg3Tab3R3C1,\r\n          AssetLiabProjs.EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_STOCKS],\r\n          formatMoney2(\r\n            AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_STOCKS],\r\n            0,\r\n            lang\r\n          ),\r\n          formatMoney2(\r\n            AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_STOCKS],\r\n            0,\r\n            lang\r\n          ),\r\n        ],\r\n\r\n        height,\r\n        Widths,\r\n        false,\r\n        [249, 249, 249],\r\n        align\r\n      );\r\n      paraY = paraY + height;\r\n      insertTableRow(\r\n        pdf,\r\n        paraLeft,\r\n        paraY,\r\n        [\r\n          OUTPUTTEXTEP[lang].pg3Tab3R4C1,\r\n          AssetLiabProjs.EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_SMALL_BUS],\r\n          formatMoney2(\r\n            AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_SMALL_BUS],\r\n            0,\r\n            lang\r\n          ),\r\n          formatMoney2(\r\n            AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_SMALL_BUS],\r\n            0,\r\n            lang\r\n          ),\r\n        ],\r\n\r\n        height,\r\n        Widths,\r\n        false,\r\n        [249, 249, 249],\r\n        align\r\n      );\r\n      paraY = paraY + height;\r\n      insertTableRow(\r\n        pdf,\r\n        paraLeft,\r\n        paraY,\r\n        [\r\n          OUTPUTTEXTEP[lang].pg3Tab3R5C1,\r\n          AssetLiabProjs.EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_RRSP],\r\n          formatMoney2(\r\n            AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_RRSP],\r\n            0,\r\n            lang\r\n          ),\r\n          formatMoney2(\r\n            AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_RRSP],\r\n            0,\r\n            lang\r\n          ),\r\n        ],\r\n        height,\r\n        Widths,\r\n        false,\r\n        [249, 249, 249],\r\n        align\r\n      );\r\n      paraY = paraY + height;\r\n      insertTableRow(\r\n        pdf,\r\n        paraLeft,\r\n        paraY,\r\n        [\r\n          OUTPUTTEXTEP[lang].pg3Tab3R6C1,\r\n          AssetLiabProjs.EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_INTEREST],\r\n          formatMoney2(\r\n            AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_INTEREST],\r\n            0,\r\n            lang\r\n          ),\r\n          formatMoney2(\r\n            AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_INTEREST],\r\n            0,\r\n            lang\r\n          ),\r\n        ],\r\n        height,\r\n        Widths,\r\n        false,\r\n        [249, 249, 249],\r\n        align\r\n      );\r\n      paraY = paraY + height;\r\n      insertTableRow(\r\n        pdf,\r\n        paraLeft,\r\n        paraY,\r\n        [\r\n          OUTPUTTEXTEP[lang].pg3Tab3R7C1,\r\n          AssetLiabProjs.EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_OTHER],\r\n          formatMoney2(\r\n            AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_OTHER],\r\n            0,\r\n            lang\r\n          ),\r\n          formatMoney2(\r\n            AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_OTHER],\r\n            0,\r\n            lang\r\n          ),\r\n        ],\r\n        height,\r\n        Widths,\r\n        false,\r\n        [249, 249, 249],\r\n        align\r\n      );\r\n\r\n      Widths = [\r\n        tableWidth / 4 + (lang === \"fr\" ? 0.6 : 0.1) + tableWidth / 4 - 0.2,\r\n        tableWidth / 4 - (lang === \"fr\" ? 0.25 : 0.1),\r\n        tableWidth / 4 + (lang === \"fr\" ? 0.25 : 0.12),\r\n      ];\r\n      paraY = paraY + height;\r\n      insertTableRow(\r\n        pdf,\r\n        paraLeft,\r\n        paraY,\r\n        [\r\n          OUTPUTTEXTEP[lang].pg3Tab3R8C1,\r\n          formatMoney2(AssetLiabProjs.EstateLiabsByTypeTotal, 0, lang),\r\n          formatMoney2(AssetLiabProjs.EstateLiabsByTypeLE3Total, 0, lang),\r\n        ],\r\n        height,\r\n        Widths,\r\n        true,\r\n        [235, 235, 235],\r\n        align\r\n      );\r\n\r\n      paraY = paraY + 2.2 * lineHeight;\r\n      paragraph = OUTPUTTEXTEP[lang].pg3P4;\r\n      addNote(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n      paraY = paraY + (lang === \"fr\" ? 1.7 : 0.8) * lineHeight;\r\n      paragraph = OUTPUTTEXTEP[lang].pg3P5;\r\n      addNote(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n      /*end ofPage 3*/\r\n      pdf.addFooterAndHeader(headerOffset, footerText, headerText);\r\n      /*/*-Future value of estate\t\t// Page 4*/\r\n      // logo if asked for\r\n      //pdf.addCustomImage(\"EPOtherPagesLogo\", pg1TitleY, image);\r\n      result =\r\n        result &&\r\n        pdf.addCustomImage(IMAGE_LOGO_OTHERPAGES, pg1TitleY, image, false, top);\r\n\r\n      paraY = 8 * lineHeight;\r\n      setFontForTitle(pdf, lang);\r\n      pdf.Text(OUTPUTTEXTEP[lang].pg4T, InToPt(paraLeft), InToPt(paraY));\r\n      setFontForParas(pdf);\r\n\r\n      paraY = paraY + 2 * lineHeight;\r\n      paragraph = OUTPUTTEXTEP[lang].pg4P1;\r\n      insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n      paraY = paraY + 4.7 * lineHeight;\r\n      pdf.AddChart(\r\n        \"stackedChart\",\r\n        InToPt(paraLeft),\r\n        InToPt(paraY),\r\n        InToPt(paraWidth),\r\n        InToPt(20 * lineHeight)\r\n      );\r\n\r\n      paraY = paraY + 20.5 * lineHeight;\r\n      paragraph = OUTPUTTEXTEP[lang].pg4P2 + props.LE + \")\";\r\n      addNote(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n      paraY = paraY + 3.7 * lineHeight;\r\n      paragraph = OUTPUTTEXTEP[lang].pg4P3\r\n        .replace(\r\n          \"X1\",\r\n          formatMoney2(AssetLiabProjs.EstateLiabsByTypeTotal, 0, lang)\r\n        )\r\n        .replace(\r\n          \"X2\",\r\n          formatMoney2(AssetLiabProjs.EstateLiabsByTypeLE3Total, 0, lang)\r\n        );\r\n      pdf.drawRect(paraLeft, paraY - 0.3, paraWidth + 0.4, 3 * height, [\r\n        235,\r\n        235,\r\n        235,\r\n      ]);\r\n      insertPara(pdf, paragraph, paraLeft + 0.2, paraY, paraWidth);\r\n\r\n      paraY = paraY + 3 * lineHeight;\r\n      pdf.AddChart(\r\n        \"pieEstateLeakage\",\r\n        InToPt(paraLeft - 0.7),\r\n        InToPt(paraY),\r\n        InToPt(0.75 * paraWidth),\r\n        InToPt((43 * paraWidth) / 120)\r\n      );\r\n      // paraY = paraY + 5*lineHeight;\r\n      pdf.AddChart(\r\n        \"pieEstateLeakage2\",\r\n        InToPt(paraLeft + 0.48 * paraWidth),\r\n        InToPt(paraY),\r\n        InToPt(0.75 * paraWidth),\r\n        InToPt((43 * paraWidth) / 120)\r\n      );\r\n\r\n      /*end ofPage 4*/\r\n      pdf.addFooterAndHeader(headerOffset, footerText, headerText);\r\n\r\n      /*/*-Estate Protection Alternatives\t\t// Page 5*/\r\n      // logo if asked for\r\n      //    pdf.addCustomImage(\"EPOtherPagesLogo\", pg1TitleY, image);\r\n      result =\r\n        result &&\r\n        pdf.addCustomImage(IMAGE_LOGO_OTHERPAGES, pg1TitleY, image, false, top);\r\n\r\n      paraY = 8 * lineHeight;\r\n      setFontForTitle(pdf, lang);\r\n      pdf.Text(OUTPUTTEXTEP[lang].pg5T, InToPt(paraLeft), InToPt(paraY));\r\n      setFontForParas(pdf);\r\n\r\n      parag = [];\r\n      OUTPUTTEXTEP[lang].pg5Paragraphs.map((item) => parag.push(item));\r\n      //console.log(parag);\r\n\r\n      paraY = paraY + 2 * lineHeight;\r\n      paragraph = parag[0];\r\n      insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n      paraY = paraY + 4 * lineHeight;\r\n      paragraph = parag[1];\r\n      insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n      paraY = paraY + 2.5 * lineHeight;\r\n      paragraph = parag[2];\r\n      insertBullet(\r\n        pdf,\r\n        \"1.\",\r\n        paraLeft + indent,\r\n        paraY,\r\n        NUMBER_BULLET_FONT_SIZE\r\n      );\r\n      insertPara(pdf, paragraph, paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      paraY = paraY + 1.5 * lineHeight;\r\n      paragraph = parag[3];\r\n      insertBullet(\r\n        pdf,\r\n        \"2.\",\r\n        paraLeft + indent,\r\n        paraY,\r\n        NUMBER_BULLET_FONT_SIZE\r\n      );\r\n      insertPara(pdf, paragraph, paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      paraY = paraY + 1.5 * lineHeight;\r\n      paragraph = parag[4];\r\n      insertBullet(\r\n        pdf,\r\n        \"3.\",\r\n        paraLeft + indent,\r\n        paraY,\r\n        NUMBER_BULLET_FONT_SIZE\r\n      );\r\n      insertPara(pdf, paragraph, paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      paraY = paraY + (lang === \"fr\" ? 2.5 : 1.5) * lineHeight;\r\n      paragraph = parag[5];\r\n      insertBullet(\r\n        pdf,\r\n        \"4.\",\r\n        paraLeft + indent,\r\n        paraY,\r\n        NUMBER_BULLET_FONT_SIZE\r\n      );\r\n      insertPara(pdf, paragraph, paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      paraY = paraY + 2 * lineHeight;\r\n      paragraph = parag[6];\r\n      insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n      paraY = paraY + 1.5 * lineHeight;\r\n      paragraph = parag[7];\r\n      insertBullet(\r\n        pdf,\r\n        \"1.\",\r\n        paraLeft + indent,\r\n        paraY,\r\n        NUMBER_BULLET_FONT_SIZE\r\n      );\r\n      insertPara(pdf, paragraph, paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      paraY = paraY + 5 * lineHeight;\r\n      paragraph = parag[8];\r\n      insertBullet(\r\n        pdf,\r\n        \"2.\",\r\n        paraLeft + indent,\r\n        paraY,\r\n        NUMBER_BULLET_FONT_SIZE\r\n      );\r\n      insertPara(pdf, paragraph, paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      paraY = paraY + 6 * lineHeight;\r\n      paragraph = parag[9];\r\n      insertBullet(\r\n        pdf,\r\n        \"3.\",\r\n        paraLeft + indent,\r\n        paraY,\r\n        NUMBER_BULLET_FONT_SIZE\r\n      );\r\n      insertPara(pdf, paragraph, paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      paraY = paraY + 4 * lineHeight;\r\n      paragraph = parag[10];\r\n      insertBullet(\r\n        pdf,\r\n        \"4.\",\r\n        paraLeft + indent,\r\n        paraY,\r\n        NUMBER_BULLET_FONT_SIZE\r\n      );\r\n      insertPara(pdf, paragraph, paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      paraY = paraY + 6 * lineHeight;\r\n      paragraph = OUTPUTTEXTEP[lang].pg5Plast;\r\n\r\n      //this.setDrawColor(235, 235, 235);\r\n      pdf.drawRect(paraLeft, paraY - 0.3, paraWidth + 0.4, 3 * height, [\r\n        235,\r\n        235,\r\n        235,\r\n      ]);\r\n      insertPara(pdf, paragraph, paraLeft + 0.2, paraY, paraWidth);\r\n\r\n      /*end ofPage 5*/\r\n      pdf.addFooterAndHeader(headerOffset, footerText, headerText);\r\n\r\n      /*/*-Using Life Insurance to Preserve Your Estate\t\t// Page 6*/\r\n      // logo if asked for\r\n      //    pdf.addCustomImage(\"EPOtherPagesLogo\", pg1TitleY, image);\r\n      result =\r\n        result &&\r\n        pdf.addCustomImage(IMAGE_LOGO_OTHERPAGES, pg1TitleY, image, false, top);\r\n\r\n      paraY = 8 * lineHeight;\r\n      setFontForTitle(pdf, lang);\r\n      pdf.Text(OUTPUTTEXTEP[lang].pg6T, InToPt(paraLeft), InToPt(paraY));\r\n      setFontForParas(pdf);\r\n\r\n      parag = [];\r\n      OUTPUTTEXTEP[lang].pg6Paragraphs1.map((item) => parag.push(item));\r\n      //console.log(parag);\r\n\r\n      paraY = paraY + 2 * lineHeight;\r\n      paragraph = parag[0];\r\n      insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n      paraY = paraY + 5 * lineHeight;\r\n      paragraph = parag[1];\r\n      insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n      paraY = paraY + 3.5 * lineHeight;\r\n      paragraph = parag[2];\r\n      insertBullet(\r\n        pdf,\r\n        \"1.\",\r\n        paraLeft + indent,\r\n        paraY,\r\n        NUMBER_BULLET_FONT_SIZE\r\n      );\r\n      insertPara(pdf, paragraph, paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      paraY = paraY + 1.4 * lineHeight;\r\n      paragraph = parag[3];\r\n      insertBullet(\r\n        pdf,\r\n        \"2.\",\r\n        paraLeft + indent,\r\n        paraY,\r\n        NUMBER_BULLET_FONT_SIZE\r\n      );\r\n      insertPara(pdf, paragraph, paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      paraY = paraY + 1.4 * lineHeight;\r\n      paragraph = parag[4];\r\n      insertBullet(\r\n        pdf,\r\n        \"3.\",\r\n        paraLeft + indent,\r\n        paraY,\r\n        NUMBER_BULLET_FONT_SIZE\r\n      );\r\n      insertPara(pdf, paragraph, paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      paraY = paraY + 2 * lineHeight;\r\n      paragraph = parag[5];\r\n      insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n      paraY = paraY + 6 * lineHeight;\r\n      paragraph = parag[6];\r\n      insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n      // reduced after edit\r\n      /*   paraY = paraY + 4 * lineHeight;\r\n    paragraph = parag[7];\r\n    insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n    paraY = paraY + 4 * lineHeight;\r\n    paragraph = parag[8];\r\n    insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n    paraY = paraY + 3 * lineHeight;\r\n    paragraph = parag[9];\r\n    insertPara(pdf, paragraph, paraLeft, paraY, paraWidth); */\r\n\r\n      /*end ofPage 6*/\r\n      //    addFooterAndHeader(pdf, lang);\r\n\r\n      // combine summary page with last\r\n\r\n      /*/*-Summary\t\t// Page 7*/\r\n      // paraY = 8 * lineHeight;\r\n      // logo if asked for\r\n      //    pdf.addCustomImage(\"EPOtherPagesLogo\", pg1TitleY, image);\r\n      result =\r\n        result &&\r\n        pdf.addCustomImage(IMAGE_LOGO_OTHERPAGES, pg1TitleY, image, false, top);\r\n\r\n      paraY = paraY + 8 * lineHeight;\r\n      setFontForTitle(pdf, lang);\r\n      pdf.Text(OUTPUTTEXTEP[lang].pg7T, InToPt(paraLeft), InToPt(paraY));\r\n      setFontForParas(pdf);\r\n\r\n      paraY = paraY + 2 * lineHeight;\r\n      paragraph = OUTPUTTEXTEP[lang].pg7P1;\r\n      pdf.MultilineText(\r\n        paragraph,\r\n        InToPt(paraLeft),\r\n        InToPt(paraY),\r\n        InToPt(paraWidth)\r\n      );\r\n\r\n      /*end ofPage 7*/\r\n      pdf.Footer(OUTPUTTEXTEP[lang].pgFooter);\r\n\r\n      /*/*-Appendix\t\tgrids // Page 8*/\r\n\r\n      // add a landscape page for aggregate grid\r\n\r\n      const LE = props.LE; //- props.assetProjections[0].grid.dataProjection[1][0];\r\n      insertGrid2(\r\n        pdf,\r\n        props.aggregateGrid,\r\n        LE,\r\n        paraLeft - 0.2,\r\n        1.65 * paraWidth,\r\n        lang,\r\n        true,\r\n        \"landscape\",\r\n        0,\r\n        GRID_AGGREGATE\r\n      );\r\n      // if too long add another page\r\n      if (\r\n        LE + 3 > LINES_PER_PAGE_LANDSCAPE &&\r\n        LE + 3 < 2 * LINES_PER_PAGE_LANDSCAPE\r\n      )\r\n        insertGrid2(\r\n          pdf,\r\n          props.aggregateGrid,\r\n          LE,\r\n          paraLeft - 0.2,\r\n          1.65 * paraWidth,\r\n          lang,\r\n          true,\r\n          \"landscape\",\r\n          LINES_PER_PAGE_LANDSCAPE,\r\n          GRID_AGGREGATE\r\n        );\r\n      else if (LE + 3 > 2 * LINES_PER_PAGE_LANDSCAPE) {\r\n        insertGrid2(\r\n          pdf,\r\n          props.aggregateGrid,\r\n          LE,\r\n          paraLeft - 0.2,\r\n          1.65 * paraWidth,\r\n          lang,\r\n          true,\r\n          \"landscape\",\r\n          LINES_PER_PAGE_LANDSCAPE,\r\n          GRID_AGGREGATE\r\n        );\r\n        insertGrid2(\r\n          pdf,\r\n          props.aggregateGrid,\r\n          LE,\r\n          paraLeft - 0.2,\r\n          1.65 * paraWidth,\r\n          lang,\r\n          true,\r\n          \"landscape\",\r\n          2 * LINES_PER_PAGE_LANDSCAPE,\r\n          GRID_AGGREGATE\r\n        );\r\n      }\r\n      for (let j = 0; j < props.assetProjections.length; ++j)\r\n        insertGrid2(\r\n          pdf,\r\n          props.assetProjections[j].grid,\r\n          LE,\r\n          paraLeft,\r\n          paraWidth,\r\n          lang,\r\n          true,\r\n          \"portrait\",\r\n          0,\r\n          GRID_INDIVIDUAL\r\n        );\r\n\r\n      /*end ofPage 8*/\r\n      pdf.addFooterAndHeader(headerOffset, footerText, headerText);\r\n\r\n      /*/*-Using Life Insurance to Preserve Your Estate\t\t// Page 6*/\r\n      // logo if asked for\r\n      //    pdf.addCustomImage(\"EPOtherPagesLogo\", pg1TitleY, image);\r\n      result =\r\n        result &&\r\n        pdf.addCustomImage(IMAGE_LOGO_OTHERPAGES, pg1TitleY, image, false, top);\r\n\r\n      paraY = 8 * lineHeight;\r\n      setFontForTitle(pdf, lang);\r\n      pdf.Text(OUTPUTTEXTEP[lang].pg9T, InToPt(paraLeft), InToPt(paraY));\r\n      setFontForParas(pdf);\r\n\r\n      paraY = paraY + 2 * lineHeight;\r\n      insertPara(pdf, OUTPUTTEXTEP[lang].pg9P1, paraLeft, paraY, paraWidth);\r\n      paraY = paraY + (lang === \"fr\" ? 7 : 6) * lineHeight;\r\n      insertPara(pdf, OUTPUTTEXTEP[lang].pg9P2, paraLeft, paraY, paraWidth);\r\n\r\n      //pdf.Footer(OUTPUTTEXTEP[lang].pgFooter);\r\n      // pdf.showOnPage();\r\n      var data = pdf.showOnPage();\r\n\r\n      if (result === false) alert(lang===\"en\"?\"PDF image error\":\"Erreur d’image PDF\");\r\n\r\n      // Done\r\n      pdf.Save(\"PYE_PDF.pdf\");\r\n      return data;\r\n    }\r\n  } catch (error) {}\r\n}\r\n\r\nfunction setFontForTitle(pdf, lang, size) {\r\n  pdf.SetFont(HELVETICA, NORMAL);\r\n  if (size === undefined) {\r\n    if (lang === \"en\") pdf.SetFontSize(PxToPt(25));\r\n    else pdf.SetFontSize(PxToPt(20));\r\n  } else {\r\n    pdf.SetFont(HELVETICA, BOLD);\r\n    if (lang === \"en\") pdf.SetFontSize(PxToPt(size));\r\n    else pdf.SetFontSize(PxToPt(size - 1));\r\n  }\r\n\r\n  pdf.SetTextColor(0x45, 0x55, 0x60);\r\n}\r\n\r\nfunction addNote(pdf, para, left, paraY, paraWidth) {\r\n  setFontForParas(pdf);\r\n  pdf.SetTextColor(150, 150, 150);\r\n  pdf.SetFontSize(PxToPt(12));\r\n  insertPara(pdf, para, left, paraY, paraWidth);\r\n  setFontForParas(pdf);\r\n}\r\n\r\nfunction setFontForParas(pdf) {\r\n  pdf.SetFont(TIMES, NORMAL);\r\n  pdf.SetFontSize(PxToPt(16));\r\n  pdf.SetTextColor(0x45, 0x55, 0x60);\r\n}\r\n\r\nfunction insertBullet(pdf, bullet, left, y, size) {\r\n  pdf.SetTextColor(115, 153, 198);\r\n  pdf.SetFontSize(PxToPt(size));\r\n  pdf.SetFont(TIMES, BOLD);\r\n  pdf.Text(\r\n    bullet,\r\n    InToPt(left + (size === BULLET_FONT_SIZE ? 0.02 : 0)),\r\n    InToPt(y - (size === BULLET_FONT_SIZE ? 0.03 : 0))\r\n  );\r\n  pdf.SetFont(TIMES, NORMAL);\r\n  pdf.SetFontSize(PxToPt(16));\r\n  pdf.SetTextColor(0x45, 0x55, 0x60);\r\n}\r\n\r\nfunction insertPara(pdf, para, left, paraY, paraWidth) {\r\n  pdf.MultilineText(para, InToPt(left), InToPt(paraY), InToPt(paraWidth));\r\n}\r\n\r\nfunction insertTableTitle(\r\n  pdf,\r\n  paraLeft,\r\n  paraY,\r\n  values,\r\n  height,\r\n  paraWidths,\r\n  fillColor\r\n) {\r\n  pdf.SetFontSize(PxToPt(12));\r\n  const fill = fillColor === undefined ? [115, 153, 198] : fillColor;\r\n  const textColor = [255, 255, 255];\r\n  pdf.SetFont(TIMES, BOLD);\r\n  const h = pdf.tableRow(\r\n    fill,\r\n    textColor,\r\n    paraLeft,\r\n    paraY,\r\n    values,\r\n    height,\r\n    paraWidths,\r\n    false,\r\n    false,\r\n    true\r\n  );\r\n  return h;\r\n}\r\n\r\nfunction insertTableRow(\r\n  pdf,\r\n  paraLeft,\r\n  paraY,\r\n  values,\r\n  height,\r\n  paraWidths,\r\n  bold,\r\n  fillColor,\r\n  align\r\n) {\r\n  pdf.SetTextColor(0x45, 0x55, 0x60);\r\n  const fill = fillColor === undefined ? [249, 249, 249] : fillColor;\r\n  const textColor = [0x45, 0x55, 0x60];\r\n  pdf.SetFont(TIMES, bold ? BOLD : NORMAL);\r\n  pdf.tableRow(\r\n    fill,\r\n    textColor,\r\n    paraLeft,\r\n    paraY,\r\n    values,\r\n    height,\r\n    paraWidths,\r\n    true,\r\n    align\r\n  );\r\n}\r\n/* function insertTableRowBold(pdf, paraLeft, paraY, values, height, paraWidths,align) {\r\n  pdf.SetTextColor(0x45, 0x55, 0x60);\r\n  const fill = [235, 235, 235];\r\n  const textColor = [0x45, 0x55, 0x60];\r\n  pdf.SetFont(TIMES, BOLD);\r\n  pdf.tableRow(\r\n    fill,\r\n    textColor,\r\n    paraLeft,\r\n    paraY,\r\n    values,\r\n    height,\r\n    paraWidths,\r\n    true,\r\n    align\r\n  );\r\n}\r\n */\r\n\r\n/* function pdf.addCustomImage( id,pg1TitleY,image,firstPage){\r\n \r\npdf.AddImageFitWidthOnly(\r\n  id,\r\n  InToPt(pg1TitleY - 3 + image.left*HEADER_RECT_IN_W/100), //1.51),\r\n  InToPt(firstPage?1.06:.29),\r\n  InToPt(6.04*image.size/100),\r\n  InToPt(firstPage?2.76:.38) // max height\r\n);\r\n} */\r\n\r\nfunction insertGrid2(\r\n  pdf,\r\n  grid,\r\n  LE,\r\n  paraLeft,\r\n  paraWidth,\r\n  lang,\r\n  wrappedTitleBar,\r\n  orientation,\r\n  startYr,\r\n  mode\r\n) {\r\n  let i;\r\n  let j;\r\n  let cols = grid.dataColTitles.length;\r\n  const height = 0.2;\r\n  let paraY = 2.2 * height;\r\n  let max =\r\n    orientation === \"landscape\"\r\n      ? startYr === 0\r\n        ? LINES_PER_PAGE_LANDSCAPE\r\n        : 2 * LINES_PER_PAGE_LANDSCAPE\r\n      : LINES_PER_PAGE_PORTRAIT;\r\n  const decimalChar = lang === \"en\" ? \".\" : \",\";\r\n  const thousands = lang === \"en\" ? \",\" : \" \";\r\n  //const formatFr = lang === \"fr\" ? true : false;\r\n  let Widths = [];\r\n\r\n  pdf.AddPage(orientation);\r\n\r\n  // Appendix title\r\n  setFontForTitle(pdf, lang, 16);\r\n  let paragraph = OUTPUTTEXTEP[lang].pg8T + \": \" + OUTPUTTEXTEP[lang].pg3T;\r\n  insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n  // Appendix para\r\n  setFontForParas(pdf);\r\n  paraY = paraY + 1.6 * height;\r\n  paragraph =\r\n    (mode === GRID_AGGREGATE\r\n      ? OUTPUTTEXTEP[lang].pg8P1\r\n      : OUTPUTTEXTEP[lang].pg8P2) +\r\n    (mode === GRID_AGGREGATE ? (startYr === 0 ? \"\" : \"\") : \"\");\r\n  insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n  paraY = paraY + 0.5 * height;\r\n\r\n  // grid name and title\r\n  // grid col widths\r\n  Widths.push(paraWidth / (cols + 5)); // year\r\n  Widths.push(paraWidth / (cols + 5)); // age\r\n  for (i = 2; i < cols; ++i) {\r\n    Widths.push((paraWidth - (2 * paraWidth) / (cols + 4)) / (cols - 2));\r\n  }\r\n\r\n  // max of 8 columns in portrait\r\n  let totalGridWidth = paraWidth;\r\n  if (mode === GRID_INDIVIDUAL) totalGridWidth = (cols * paraWidth) / 8;\r\n\r\n  let values = grid.dataColTitles;\r\n  let goodWidth = [];\r\n  let totalGoodWidth = 0;\r\n  for (i = 0; i < cols; ++i) {\r\n    goodWidth.push(pdf.textWidth(values[i]));\r\n    totalGoodWidth += goodWidth[i];\r\n  }\r\n  // aportion grid title\r\n  for (i = 0; i < cols; ++i) {\r\n    Widths[i] = goodWidth[i] + 0.15;\r\n  }\r\n  let widthTotal = 0;\r\n  for (i = 2; i < cols; ++i) widthTotal += Widths[i];\r\n\r\n  // now check multilines\r\n  let goodWidthMultiLine = [];\r\n  let totalGoodWidthMultiLine = 0;\r\n\r\n  let addMore =\r\n    (totalGridWidth - widthTotal - Widths[0] - Widths[1]) / (cols - 2);\r\n  if (mode === GRID_INDIVIDUAL) {\r\n    for (i = 2; i < cols; ++i) Widths[i] += addMore;\r\n  } else if (mode === GRID_AGGREGATE) {\r\n    addMore =\r\n      (totalGridWidth - widthTotal - Widths[0] - Widths[1]) / (cols - 3);\r\n    for (i = 2; i < cols; ++i) if (i !== 4) Widths[i] += addMore;\r\n  }\r\n\r\n  for (i = 0; i < cols; ++i) {\r\n    goodWidthMultiLine.push(pdf.textWidthMultiLine(values[i], Widths[i]));\r\n    totalGoodWidthMultiLine += goodWidthMultiLine[i];\r\n  }\r\n  // aportion grid title\r\n\r\n  /*  for (i = 0; i < cols; ++i)\r\n    if(Widths[i]<.9*goodWidthMultiLine[i])\r\n        Widths[i]=goodWidthMultiLine[i]/.9\r\n */\r\n  //for (i = 0; i < cols; ++i)\r\n  //console.log(values[i],goodWidth[i],goodWidthMultiLine[i],Widths[i])\r\n  // for (i = 0; i < cols; ++i)\r\n  //  Widths[i]=goodWidthMultiLine[i]/.9*totalGridWidth/totalGoodWidthMultiLine\r\n\r\n  // if(mode===GRID_AGGREGATE)\r\n  {\r\n    paraY = paraY + 0.8 * height;\r\n    paragraph = grid.gridTitle;\r\n    pdf.SetFontSize(PxToPt(12));\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n    paraY = paraY + 0.4 * height;\r\n  }\r\n\r\n  // headers\r\n  //console.log(values)\r\n  const height2 = insertTableTitle(\r\n    pdf,\r\n    paraLeft,\r\n    paraY,\r\n    values,\r\n    height,\r\n    Widths,\r\n    [51, 77, 124]\r\n  );\r\n\r\n  // grid rows\r\n  let rows = startYr;\r\n  let fillColor;\r\n  if (wrappedTitleBar) paraY = paraY + height2;\r\n  // 40 rows per page\r\n  while (rows < LE + 3) {\r\n    //grid.dataProjection[0].length) {\r\n\r\n    if (\r\n      rows === max &&\r\n      ((startYr === 0 && LE + 3 - rows > 6) ||\r\n        (startYr === LINES_PER_PAGE_LANDSCAPE &&\r\n          LE + LINES_PER_PAGE_LANDSCAPE + 3 - rows > 6))\r\n    ) {\r\n      if (mode === GRID_AGGREGATE) {\r\n        insertPara(\r\n          pdf,\r\n          OUTPUTTEXTEP[lang].pg4P1,\r\n          paraLeft,\r\n          paraY + (3 * height) / 2 + 0.1,\r\n          paraWidth\r\n        );\r\n        pdf.FooterLandscape(OUTPUTTEXTEP[lang].pgFooter);\r\n        return rows;\r\n      }\r\n\r\n      rows = LE + 3 - 6;\r\n      paraY = paraY + height;\r\n      pdf.SetFont(TIMES, BOLD);\r\n      insertPara(pdf, \"......\", paraLeft, paraY + height / 2, paraWidth);\r\n      pdf.SetFont(TIMES, NORMAL);\r\n    }\r\n    values = [];\r\n\r\n    let align = [];\r\n    for (i = 0; i < cols; ++i) {\r\n      //if(i===0) console.log(grid.dataProjection[i][rows])\r\n      values.push(\r\n        (i === 0 && rows === 0) || i === 1\r\n          ? String(grid.dataProjection[i][rows])\r\n          : formatMoney(\r\n              parseFloat(cleanFormat(grid.dataProjection[i][rows], lang)),\r\n              0,\r\n              decimalChar,\r\n              thousands\r\n            ).toString()\r\n      );\r\n      align.push(2);\r\n    }\r\n    paraY = paraY + height;\r\n    fillColor = rows % 2 ? [249, 249, 249] : [228, 229, 230];\r\n    if (rows == LE) {\r\n      fillColor = [208, 215, 230];\r\n      insertPara(\r\n        pdf,\r\n        lang === \"en\" ? \"LE\" : \"EV\",\r\n        paraLeft + totalGridWidth + 0.15,\r\n        paraY + height / 2 + 0.01,\r\n        paraWidth\r\n      );\r\n    }\r\n    //console.log(values)\r\n    insertTableRow(\r\n      pdf,\r\n      paraLeft,\r\n      paraY,\r\n      values,\r\n      height,\r\n      Widths,\r\n      false,\r\n      fillColor,\r\n      align\r\n    );\r\n\r\n    rows++;\r\n  }\r\n\r\n  if (orientation === \"landscape\")\r\n    pdf.FooterLandscape(OUTPUTTEXTEP[lang].pgFooter);\r\n  else pdf.Footer(OUTPUTTEXTEP[lang].pgFooter);\r\n}\r\n\r\nexport function insertGrid (\r\n  pdf,\r\n  grid,\r\n  LE,\r\n  paraLeft,\r\n  paraWidth,\r\n  lang,\r\n  wrappedTitleBar,\r\n  orientation,\r\n  startYr,\r\n  lastRow,\r\n  mode,\r\n  titleY,\r\n  title1,title2,para1,para2,pgFooter\r\n){\r\n  let i;\r\n  let j;\r\n  let cols = grid.dataColTitles.length;\r\n  const height = 0.2;\r\n  let paraY =titleY;// 2.2 * height;\r\n  let max =\r\n    orientation === \"landscape\"\r\n      ? startYr === 0\r\n        ? LINES_PER_PAGE_LANDSCAPE\r\n        : 2 * LINES_PER_PAGE_LANDSCAPE\r\n      : LINES_PER_PAGE_PORTRAIT;\r\n  const decimalChar = lang === \"en\" ? \".\" : \",\";\r\n  const thousands = lang === \"en\" ? \",\" : \" \";\r\n // const formatFr = lang === \"fr\" ? true : false;\r\n  let Widths = [];\r\n\r\n  pdf.AddPage(orientation);\r\n\r\n  // Appendix title\r\n  setFontForTitle(pdf, lang, 16);\r\n  let paragraph = title1 + \": \" + para1;\r\n  insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n  // Appendix para\r\n  setFontForParas(pdf);\r\n  paraY = paraY + 1.6 * height;\r\n  paragraph =\r\n    (mode === GRID_AGGREGATE\r\n      ? title2\r\n      : para2) +\r\n    (mode === GRID_AGGREGATE ? (startYr === 0 ? \"\" : \"\") : \"\");\r\n  insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n  paraY = paraY + 0.5 * height;\r\n\r\n  // grid name and title\r\n  // grid col widths\r\n  Widths.push(paraWidth / (cols + 5)); // year\r\n  Widths.push(paraWidth / (cols + 5)); // age\r\n  for (i = 2; i < cols; ++i) {\r\n    Widths.push((paraWidth - (2 * paraWidth) / (cols + 4)) / (cols - 2));\r\n  }\r\n\r\n  // max of 8 columns in portrait\r\n  let totalGridWidth = paraWidth;\r\n  if (mode === GRID_INDIVIDUAL) totalGridWidth = (cols * paraWidth) / 8;\r\n\r\n  let values = grid.dataColTitles;\r\n  let goodWidth = [];\r\n  let totalGoodWidth = 0;\r\n  for (i = 0; i < cols; ++i) {\r\n    goodWidth.push(pdf.textWidth(values[i]));\r\n    totalGoodWidth += goodWidth[i];\r\n  }\r\n  // aportion grid title\r\n  for (i = 0; i < cols; ++i) {\r\n    Widths[i] = goodWidth[i] + 0.15;\r\n  }\r\n  let widthTotal = 0;\r\n  for (i = 2; i < cols; ++i) widthTotal += Widths[i];\r\n\r\n  // now check multilines\r\n  let goodWidthMultiLine = [];\r\n  let totalGoodWidthMultiLine = 0;\r\n\r\n  let addMore =\r\n    (totalGridWidth - widthTotal - Widths[0] - Widths[1]) / (cols - 2);\r\n  if (mode === GRID_INDIVIDUAL) {\r\n    for (i = 2; i < cols; ++i) Widths[i] += addMore;\r\n  } else if (mode === GRID_AGGREGATE) {\r\n    addMore =\r\n      (totalGridWidth - widthTotal - Widths[0] - Widths[1]) / (cols - 3);\r\n    for (i = 2; i < cols; ++i) if (i !== 4) Widths[i] += addMore;\r\n  }\r\n\r\n  for (i = 0; i < cols; ++i) {\r\n    goodWidthMultiLine.push(pdf.textWidthMultiLine(values[i], Widths[i]));\r\n    totalGoodWidthMultiLine += goodWidthMultiLine[i];\r\n  }\r\n  // aportion grid title\r\n\r\n  /*  for (i = 0; i < cols; ++i)\r\n  if(Widths[i]<.9*goodWidthMultiLine[i])\r\n      Widths[i]=goodWidthMultiLine[i]/.9\r\n*/\r\n  //for (i = 0; i < cols; ++i)\r\n  //console.log(values[i],goodWidth[i],goodWidthMultiLine[i],Widths[i])\r\n  // for (i = 0; i < cols; ++i)\r\n  //  Widths[i]=goodWidthMultiLine[i]/.9*totalGridWidth/totalGoodWidthMultiLine\r\n\r\n  // if(mode===GRID_AGGREGATE)\r\n  {\r\n    paraY = paraY + 0.8 * height;\r\n    paragraph = grid.gridTitle;\r\n    pdf.SetFontSize(PxToPt(12));\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n    paraY = paraY + 0.4 * height;\r\n  }\r\n\r\n  // headers\r\n  //console.log(values)\r\n  const height2 = insertTableTitle(\r\n    pdf,\r\n    paraLeft,\r\n    paraY,\r\n    values,\r\n    height,\r\n    Widths,\r\n    [51, 77, 124]\r\n  );\r\n\r\n  // grid rows\r\n  let rows = startYr;\r\n  let fillColor;\r\n  if (wrappedTitleBar) paraY = paraY + height2;\r\n  // 40 rows per page\r\n  while (rows < lastRow) {\r\n    //grid.dataProjection[0].length) {\r\n\r\n    if (\r\n      rows === max &&\r\n      ((startYr === 0 && lastRow - rows > 6) ||\r\n        (startYr === LINES_PER_PAGE_LANDSCAPE &&\r\n          lastRow + LINES_PER_PAGE_LANDSCAPE - rows > 6))\r\n    ) {\r\n      if (mode === GRID_AGGREGATE) {\r\n        insertPara(\r\n          pdf,\r\n          OUTPUTTEXTEP[lang].pg4P1,\r\n          paraLeft,\r\n          paraY + (3 * height) / 2 + 0.1,\r\n          paraWidth\r\n        );\r\n        pdf.FooterLandscape(pgFooter);\r\n        return rows;\r\n      }\r\n\r\n      rows = lastRow - 6;\r\n      paraY = paraY + height;\r\n      pdf.SetFont(TIMES, BOLD);\r\n      insertPara(pdf, \"......\", paraLeft, paraY + height / 2, paraWidth);\r\n      pdf.SetFont(TIMES, NORMAL);\r\n    }\r\n    values = [];\r\n\r\n    let align = [];\r\n    for (i = 0; i < cols; ++i) {\r\n      //if(i===0) console.log(grid.dataProjection[i][rows])\r\n      values.push(\r\n        (i === 0 && rows === 0) || i === 1\r\n          ? String(grid.dataProjection[i][rows])\r\n          : formatMoney(\r\n              parseFloat(cleanFormat(grid.dataProjection[i][rows], lang)),\r\n              0,\r\n              decimalChar,\r\n              thousands\r\n            ).toString()\r\n      );\r\n      align.push(2);\r\n    }\r\n    paraY = paraY + height;\r\n    fillColor = rows % 2 ? [249, 249, 249] : [228, 229, 230];\r\n    if (rows == LE) {\r\n      fillColor = [208, 215, 230];\r\n      insertPara(\r\n        pdf,\r\n        lang === \"en\" ? \"LE\" : \"EV\",\r\n        paraLeft + totalGridWidth + 0.15,\r\n        paraY + height / 2 + 0.01,\r\n        paraWidth\r\n      );\r\n    }\r\n    //console.log(values)\r\n    insertTableRow(\r\n      pdf,\r\n      paraLeft,\r\n      paraY,\r\n      values,\r\n      height,\r\n      Widths,\r\n      false,\r\n      fillColor,\r\n      align\r\n    );\r\n\r\n    rows++;\r\n  }\r\n\r\n  if (orientation === \"landscape\")\r\n    pdf.FooterLandscape(pgFooter);\r\n  else pdf.Footer(pgFooter);\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { appletMode } from \"../../package.json\";\r\nimport { INCOMENEEDS } from \"./generalDefinitions\";\r\n\r\nconst DEFAULT_MARGIN_LEFT = -67;\r\nconst DEFAULT_MARGIN_TOP = 0;\r\nconst DEFAULT_WIDTH = 140;\r\nconst DEFAULT_HEIGHT = 100;\r\n\r\nconst POPUP_BORDER_INFO = \"#7399C6\";\r\nconst POPUP_BORDER_ALERT = \"red\";\r\nconst POPUP_BORDER_MESSAGE = \"#7399C6\";\r\n\r\nexport const SHOW_AUTOMATIC_RED = 0;\r\nexport const SHOW_STANDARD = 1;\r\nexport const SHOW_STANDARD_RED = 2;\r\nexport const SHOW_NONE = 3;\r\nexport const SHOW_STANDARD_LIGHT_BLUE = 4;\r\nexport const SHOW_STANDARD_WHITE = 5;\r\n\r\nconst infoHighlightStyle = { color: \"#6f2852\", fontWeight: \"bold\" };\r\n\r\nconst MESSAGES = {\r\n  en: {\r\n    infoYr0: appletMode===\"INA\"?\"Year 0 stands for 'at death': today\":\"Year 0 stands for 'today'\",\r\n    infoRetDur: \"Duration to retirement is … years\",\r\n    infoAvgTax: (\r\n      <div>\r\n        {\" \"}\r\n        {/* style={{color:\"#54585a\"}}> */}\r\n        Survivor's <span style={infoHighlightStyle}>Avg. Tax Rate</span> is\r\n        applied to annual income, interest and annual asset disposition. <br />\r\n        <span style={infoHighlightStyle}>Marginal Tax Rate </span>(under\r\n        Presentation Details) is applied to planned or potential full\r\n        disposition of an asset\r\n      </div>\r\n    ),\r\n    infoIconRetire: (\r\n      <div>\r\n        {\" \"}\r\n        {/* style={{color:\"#54585a\"}}> */}\r\n        <span style={infoHighlightStyle}>Income Source</span> and <span style={infoHighlightStyle}>Income Needs</span> durations are usually based on this value.\r\n        <br />They will be adjusted automatically, <br />please recheck.\r\n      </div>\r\n    ),\r\n    infoAdjust:\r\n      \"Adjust Income Needs and Income Source durations to end age (99) or Life Expectancy of\",\r\n    clientOnly: \"Needs Analysis is always done for family member 'Client'\",\r\n    infoElig: (\r\n      <div>\r\n        {\" \"}\r\n        Survivor's and orphan's benefits are based on Client's eligibility\r\n        <br />\r\n        Set <span style={infoHighlightStyle}>Province</span> under \"Presentation\r\n        Details\" for CPP or QPP\r\n      </div>\r\n    ),\r\n    infoSpouseElig:\r\n      \"100% means the Survivor is assumed to be fully eligible for government benefits by the age of 65\",\r\n    ever: \" ... for ever\",\r\n    taxMsg: \"Tax methods need to be discussed with your financial advisor\",\r\n    fetch: \"Failed to connect to the server\",\r\n    ie: \"Please use Edge or Chrome browsers for graphs and full functionality\",\r\n    govB: (\r\n      <div>\r\n        Do not delete government benefits. <br />\r\n        To adjust them, change{\" \"}\r\n        <span style={infoHighlightStyle}>Client's \"CPP/QPP Eligibility\"</span>\r\n      </div>\r\n    ),\r\n    assetTax:\r\n      \"Please use after tax asset values until Tax Method becomes available\",\r\n    internet:\r\n      \"You need to login to the PPI site again.\" +\r\n      \"You can save your data before clicking on this message or use \" +\r\n      \"'Recover' in INA to reload your input data.\" +\r\n      \"Please click to refresh.\",\r\n\r\n    RRIF:\r\n      \"RRIF is reflected in survivor's income based on their own or rolled-over RRSP. Maximum withdrawal age is 71\",\r\n    rollOver:\r\n      \"Client's assets can usually be rolled-over to their spouse to avoid liquidation\",\r\n    insurance:\r\n      \"Client's insurance is available to the survivor while Spouse or Joint (JLTD) insurance is not.\",\r\n    rental:\r\n      \"This is rental income for Real Estate and Dividend income for Stocks. Both as a % of Current Value. Alternatively they can be entered under 'Sources of Income ...'. Such income (after tax) impacts survivors' cash flows and therefore 'Insurance Needs' of the Client\",\r\n    note:\r\n      \"Pull down on lower bottom to enlarge. A few small paragraphs can be saved (up to 5000 characters)\",\r\n    save: (\r\n      <div>\r\n        To save files to your desired location:\r\n        <br />\r\n        <span style={infoHighlightStyle}>Microsoft Edge:</span>\r\n        <li>Go to menu ..., Downloads, Download Settings</li>\r\n        <span style={infoHighlightStyle}>Google Chrome:</span>\r\n        <li>Go to menu ..., Settings, Advanced, Downloads</li>\r\n        <span style={infoHighlightStyle}>then in either browser:</span>\r\n        <li>Turn on \"Ask where to save each file before downloading\"</li>\r\n      </div>\r\n    ),\r\n    gridCapFund:\r\n      \"Capital Fund consists of Additional Capital required (Insurance Needs) less Additional Income Required, accruing at after-tax 'Investment Rate'\",\r\n    salary:\r\n      \"Gross income, government benefits and other annual income types are assumed to grow at inflation rate\",\r\n    salaryPercent:\r\n      \"The After-tax value is shown in today's dollars. It will grow at inflation rate\",\r\n    afterTax: \"All amounts are after tax\",\r\n    taxExempt: (\r\n      <div>\r\n        Small Business{\" \"}\r\n        <span style={infoHighlightStyle}>Capital Gains Tax Exemption</span> is\r\n        assumed to grow at inflation rate\r\n      </div>\r\n    ),\r\n    infoINA:\r\n      \"This amount is based on the present value of shortfalls, discounted at the after tax investment rate. It is adjusted if necessary, to make sure early shortfalls are provided for\",\r\n      infoBOYEOY: \"BOY stands for Beginning of Year and EOY for End of Year\",\r\n      infoPDF:\r\n      \"INA Graphs and Spreadsheet can be exported to PDF under 'Graphs' tab\",  \r\n      probate:\r\n      appletMode===\"INA\"?\"Probate is based on Client's assets at time of death and does not include Joint assets or assets that belong to, or can be rolled-over to Spouse\":\r\n      \"Probate is based on Client's assets at time of death. If a Spouse is added, hence JLTD coverage, it will also include Joint assets or assets that belong to, or can be rolled-over to Spouse\",  \r\n      TFSA:\r\n      \"RRSP and TFSA contributions and withdrawals are subject to limitations set by CRA\",  \r\n      DepositWithd:\r\n      \"Contributions and Withdrawals affect asset's fair market value and also cash flows. Survivors' cash flows from all sources directly impact 'Insurance Needs' of the Client\",  \r\n      inflationGrowth:\r\n      \"Gross income, government benefits and other annual income types are assumed to grow at your selected inflation rate\",  \r\n      PYE_JLTD:\r\n      \"When a Spouse is added, the Estate liability needs to be insured with a JLTD coverage. As such, it includes tax and other liabilities of both at the last death\",  \r\n      needGrowth:\r\n      \"Survivors' Income Needs are assumed to grow at your selected inflation rate\",\r\n      exportINA:\r\n      \"Data can be exported to Insurance Needs Analysis, where insurance needs to support survivor(s) life style can be calculated\",\r\n      taxLiab:\r\n      \"Asset projections take Tax Liability into account. You don't need to enter a separate liability related to taxes such as capital gains\",\r\n  },\r\n  fr: {\r\n    infoYr0:\r\n    appletMode===\"INA\"?\"L'année 0 est l'année du décès: aujourd'hui\":\"L'année 0 représente aujourd'hui\",\r\n    infoRetDur: \"Le nombre d'années avant la retraite est de .... ans\",\r\n    infoAvgTax: (\r\n      <div>\r\n        Le taux d'imposition marginal (sous la rubrique « Précisions sur la\r\n        présentation ») s'applique à la disposition planifiée ou potentielle\r\n        complète d'un actif.{\" \"}\r\n        <span style={infoHighlightStyle}>Le taux d'imposition moyen</span> du\r\n        survivant s'applique au revenu annuel, aux intérêts et à la disposition\r\n        annuelle des actifs.\r\n        <br />\r\n        <span style={infoHighlightStyle}>\r\n          Le taux d'imposition marginal{\" \"}\r\n        </span>{\" \"}\r\n        (sous la rubrique « Précisions sur la présentation ») s'applique à la\r\n        disposition planifiée ou potentielle complète d'un actif.\r\n      </div>\r\n    ),\r\n    infoIconRetire: <div>\r\n    {\" \"}\r\n    {/* style={{color:\"#54585a\"}}> */}\r\n    Les durées de la <span style={infoHighlightStyle}>source de revenus</span> et des <span style={infoHighlightStyle}>besoins en matière de revenus</span> sont généralement basées sur cette valeur.\r\n        <br />Elles seront rajustées automatiquement, veuillez les vérifier de nouveau.\r\n  </div>,\r\n    \r\n    infoAdjust:\r\n      \"Ajuster les besoins de revenu et les durées de la source de revenu à âge à l'échéance (99) or l'espérance de vie de\",\r\n    clientOnly:\r\n      \"L'analyse des besoins est toujours effectuée pour le «client» membre de la famille\",\r\n    infoElig: (\r\n      <div>\r\n        Les prestations du survivant et de l'orphelin sont basées sur\r\n        l'admissibilité du client\r\n        <br />\r\n        Définir{\" \"}\r\n        <span style={infoHighlightStyle}>la province</span> (RPC ou RRQ) à la\r\n        rubrique 'Précisions sur la présentation'\r\n      </div>\r\n    ),\r\n    infoSpouseElig:\r\n      \"100 % signifie que le survivant est supposé être pleinement admissible aux prestations gouvernementales avant l'âge de 65 ans\",\r\n    ever: \" ... pour toujours\",\r\n    taxMsg:\r\n      \"Les méthodes fiscales doivent être discutées avec votre conseiller financier\",\r\n    fetch: \"Défaut de connexion au serveur\",\r\n    ie:\r\n      \"s'il vous plaît utiliser les navigateurs Edge ou Chrome pour les graphiques et les fonctionnalités complètes\",\r\n    govB: (\r\n      <div>\r\n        Ne supprimez pas les prestations gouvernementales. <br />\r\n        Pour les ajuster, modifier{\" \"}\r\n        <span style={infoHighlightStyle}>l'admissibilité du client</span>\r\n      </div>\r\n    ),\r\n    assetTax:\r\n      \"Veuillez utiliser les valeurs des actifs après impôt jusqu'à ce que la méthode d'imposition devienne disponibl\",\r\n    internet:\r\n      \"  Vous devez vous connecter à nouveau au site PPI.\" +\r\n      \"Vous pouvez enregistrer vos données avant de cliquer sur ce message\" +\r\n      \"pour recharger vos données d'entrée.\" +\r\n      \"S'il vous plaît cliquez pour rafraîchir.\",\r\n    RRIF:\r\n      \"Le FERR est pris en compte dans le revenu du survivant sur la base de son propre REER ou d'un REER transféré. L'âge maximal pour retirer des fonds est de 71 ans.\",\r\n    rollOver:\r\n      \"Les actifs du client peuvent habituellement être transférés au conjoint pour éviter une liquidation.\",\r\n    insurance:\r\n      \"L'assurance du client est offerte au survivant, alors que l'assurance du conjoint ou l'assurance conjointe (sur deux têtes) ne le sont pas.\",\r\n    rental:\r\n      \"Il s'agit du revenu de location lié aux biens immobiliers et du revenu de dividende lié aux actions. Il s'agit dans les deux cas d'un pourcentage de la valeur actuelle. Ils peuvent également être saisis dans la rubrique « Sources de revenus… ». Un tel revenu (après impôt) aura un impact sur les flux monétaires des survivants et par conséquent, sur les « besoins en assurance » du client.\",\r\n    note:\r\n      \"Abaissez le bord inférieur pour agrandir. Quelques petits paragraphes peuvent être enregistrés (jusqu'à 5 000 caractères).\",\r\n    save: (\r\n      <div>\r\n        Pour enregistrer les fichiers à l'emplacement voulu :<br />\r\n        <span style={infoHighlightStyle}>Microsoft Edge:</span>\r\n        <li>Aller au menu..., Téléchargements, Paramètres de téléchargement</li>\r\n        <span style={infoHighlightStyle}>Google Chrome:</span>\r\n        <li>\r\n          Aller au menu..., Paramètres, Paramètres avancés, Téléchargements\r\n        </li>\r\n        <span style={infoHighlightStyle}>\r\n          puis dans l'un ou l'autre des navigateurs :\r\n        </span>\r\n        <li>\r\n          Activer la fonction « Me demander quoi faire avec chaque\r\n          téléchargement » ou « Toujours demander où enregistrer les fichiers ».\r\n        </li>\r\n      </div>\r\n    ),\r\n    gridCapFund:\r\n      \"Le fonds de capitaux est constitué du capital additionnel requis (besoins d'assurance), diminué du revenu additionnel requis et accru du taux de rendement après impôt.\",\r\n    salary:\r\n      \"Le revenu brut, les prestations de l'État et les autres types de revenus annuels sont présumés croître au taux d'inflation\",\r\n    salaryPercent:\r\n      \"La valeur après impôt est indiquée en dollars d'aujourd'hui. Il augmentera au taux d'inflation\",\r\n    afterTax: \"Tous les montants sont après impôt\",\r\n    taxExempt: (\r\n      <div>\r\n        {\" \"}\r\n        <span style={infoHighlightStyle}>\r\n          Exonération des gains en capital\r\n        </span>{\" \"}\r\n        pour les petites entreprises est présumée croître au taux d'inflation\r\n      </div>\r\n    ),\r\n    infoINA:\r\n      \"Ce montant est basé sur la valeur actualisée des manques à gagner en matière de revenus, actualisée au taux de rendement après impôt. Il est ajusté, si nécessaire, pour s'assurer que des manque à gagner précoces sont prévus\",\r\n      infoBOYEOY: \"DDA signifie Début d'année et FDA, Fin d'année\",\r\n      infoPDF:\r\n      \"Les graphiques et la feuille de calcul de l'analyse des besoins en matière d'assurance peuvent être exportés en format PDF sous l'onglet 'Graphique'\",      \r\n      probate:\r\n      appletMode===\"INA\"?\"L'homologation est basée sur les actifs du client au moment du décès et n'inclut pas les actifs communs ou les actifs qui appartiennent au conjoint ou qui peuvent être transférés à celui-ci\":\r\n      \"L'homologation est basée sur les actifs du client au moment du décès. Si un conjoint est ajouté, donc la couverture CDD (conjointe au dernier décès), elle comprendra également les actifs communs ou les actifs qui appartiennent au conjoint ou qui peuvent lui être transférés\",  \r\n   TFSA:\r\n      \"Les cotisations et les retraits REER et CELI sont assujettis aux limites établies par l'ARC\",  \r\n      DepositWithd:\r\n      \"Les cotisations et les retraits affectent la juste valeur marchande des actifs et les flux monétaires. Les flux monétaires des survivants, quelle que soit leur origine, ont un impact direct sur les 'besoins en assurance' du client\",  \r\n      inflationGrowth:\r\n      \"Le revenu brut, les prestations gouvernementales et les autres types de revenus annuels sont supposés croître au taux d'inflation que vous avez sélectionné\",  \r\n      PYE_JLTD:\r\n      \"Lorsqu'un conjoint est ajouté, la responsabilité de la succession doit être assurée avec une couverture CDD. En tant que telle, elle comprend les obligations fiscales et les autres dettes des deux conjoints au dernier décès\",  \r\n      needGrowth:\r\n      \"Les besoins en revenu des survivants sont supposés croître au taux d'inflation que vous avez choisi\",\r\n      exportINA:\r\n      \"Les données peuvent être exportées vers l'analyse des besoins en assurance, qui permet de calculer les besoins en assurance pour soutenir le style de vie du ou des survivant(s)\",\r\n      taxLiab:\r\n      \"Les projections d'actifs prennent en compte le passif fiscal. Vous n'avez pas besoin d'entrer un passif séparé lié aux impôts tel que les gains en capital\",\r\n  },\r\n};\r\n\r\nexport function getGenericMessage(lang) {\r\n  return {\r\n    infoID: \"infoGenericMsg\",\r\n    infoText: \"\",\r\n    iconMode: SHOW_NONE,\r\n    popupOpenByProps: true,\r\n    popupBorderColor: POPUP_BORDER_ALERT,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT,\r\n      marginTop: DEFAULT_MARGIN_TOP + 5,\r\n      width: DEFAULT_WIDTH + 30,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconTaxExempt(lang) {\r\n  return {\r\n    infoID: \"infoExempt\",\r\n    infoText: MESSAGES[lang].taxExempt,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH + 20,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconSourcesGov(lang) {\r\n  return {\r\n    infoID: \"infogov\",\r\n    infoText: MESSAGES[lang].govB,\r\n    iconMode: SHOW_STANDARD_RED,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_ALERT,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 12,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoNoInternetAccess(lang) {\r\n  return {\r\n    infoID: \"infoNoInternetAccess\",\r\n    infoText: MESSAGES[lang].internet,\r\n    iconMode: SHOW_NONE,\r\n    popupOpenByProps: true,\r\n    popupBorderColor: POPUP_BORDER_ALERT,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT,\r\n      marginTop: DEFAULT_MARGIN_TOP + 5,\r\n      width: DEFAULT_WIDTH + 80,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconSourcesRRIF(lang) {\r\n  return {\r\n    infoID: \"RRIF\",\r\n    infoText: MESSAGES[lang].RRIF,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconClientsMember(lang) {\r\n  return {\r\n    infoID: \"infoMember\",\r\n    infoText: MESSAGES[lang].clientOnly,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 12,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIncome(lang) {\r\n  return {\r\n    infoID: \"infosalary\",\r\n    infoText: MESSAGES[lang].salary,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 12,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoSalaryPercent(lang) {\r\n  return {\r\n    infoID: \"infoSalaryPercent\",\r\n    infoText: MESSAGES[lang].salaryPercent,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconAssetsIncomeRate(lang) {\r\n  return {\r\n    infoID: \"infoIconIncomeRate\",\r\n    infoText: MESSAGES[lang].rental,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH +100,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconPYE_JLTD(lang) {\r\n  return {\r\n    infoID: \"infoIconPYE_JLTD\",\r\n    infoText: MESSAGES[lang].PYE_JLTD,\r\n    iconMode: SHOW_STANDARD_WHITE,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH +100,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\n\r\nexport function getInfoIconNeedGrowth(lang) {\r\n  return {\r\n    infoID: \"infoIconNeedGrowth\",\r\n    infoText: MESSAGES[lang].needGrowth,\r\n    iconMode: SHOW_STANDARD_WHITE,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH +100,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\n\r\nexport function getInfoINA(lang) {\r\n  return {\r\n    infoID: \"infoINA\",\r\n    infoText: MESSAGES[lang].infoINA,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH + 50,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoPDF(lang) {\r\n  return {\r\n    infoID: \"infoPDF\",\r\n    infoText: MESSAGES[lang].infoPDF,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH + 30,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\n\r\n\r\nexport function getInfoExportINA(lang) {\r\n  return {\r\n    infoID: \"exportINA\",\r\n    infoText: MESSAGES[lang].exportINA,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH + 30,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconAssetsOwner(lang) {\r\n  return {\r\n    infoID: \"infoIconOwner\",\r\n    infoText: MESSAGES[lang].rollOver,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 12,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconTFSA(lang) {\r\n  return {\r\n    infoID: \"infoIconTFSA\",\r\n    infoText: MESSAGES[lang].TFSA,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 20,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconProbate(lang) {\r\n  return {\r\n    infoID: \"infoIconProbate\",\r\n    infoText: MESSAGES[lang].probate,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 20,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH +30,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconDepositWithd(lang) {\r\n  return {\r\n    infoID: \"infoIconDepositWithd\",\r\n    infoText: MESSAGES[lang].DepositWithd,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 20,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH +50,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\n\r\nexport function getInfoIconInflationGrowth(lang) {\r\n  return {\r\n    infoID: \"infoIconInflationGrowth\",\r\n    infoText: MESSAGES[lang].inflationGrowth,\r\n    iconMode: SHOW_STANDARD_WHITE,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 20,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH +50,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconAssetsIns(lang) {\r\n  return {\r\n    infoID: \"insurance\",\r\n    infoText: MESSAGES[lang].insurance,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 30,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconAssetsYr0(lang) {\r\n  return {\r\n    infoID: \"infoIconYr0\",\r\n    infoText: MESSAGES[lang].infoYr0,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 12,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconClientsElig(lang) {\r\n  return {\r\n    infoID: \"infoIconElig\",\r\n    infoText: MESSAGES[lang].infoElig,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 6,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH + 25,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconSpouseElig(lang) {\r\n  return {\r\n    infoID: \"infoIconSpouseElig\",\r\n    infoText: MESSAGES[lang].infoSpouseElig,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 6,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH + 25,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconClientsTax(lang) {\r\n  return {\r\n    infoID: \"infoIconAvgTax\",\r\n    infoText: MESSAGES[lang].infoAvgTax,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT - 20,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH + 70,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\n\r\n\r\nexport function getInfoIconClientsRetire(lang,flagRed) {\r\n  return {\r\n    infoID: \"infoIconRetire\",\r\n    infoText: MESSAGES[lang].infoIconRetire,\r\n    iconMode: flagRed?SHOW_STANDARD_RED:SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT - 20,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH + 45,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoTaxLiability(lang) {\r\n  return {\r\n    infoID: \"infoIconAvgTax\",\r\n    infoText: MESSAGES[lang].infoAvgTax,\r\n    iconMode: SHOW_STANDARD_LIGHT_BLUE,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT - 88,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH + 70,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconTaxLiab(lang) {\r\n  return {\r\n    infoID: \"infoIcontaxLiab\",\r\n    infoText: MESSAGES[lang].taxLiab,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT - 20,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH + 70,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\nexport function getInfoBOYEOY(lang) {\r\n  return {\r\n    infoID: \"infoBOYEOY\",\r\n    infoText: MESSAGES[lang].infoBOYEOY,\r\n    iconMode: SHOW_STANDARD_LIGHT_BLUE,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT - 70,\r\n      marginTop: DEFAULT_MARGIN_TOP+45,\r\n      width: DEFAULT_WIDTH + 35,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconNotes(lang) {\r\n  return {\r\n    infoID: \"InfoIconNotes\",\r\n    infoText: MESSAGES[lang].note,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 20,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH + 70,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoSave(lang) {\r\n  return {\r\n    infoID: \"InfoSave\",\r\n    infoText: MESSAGES[lang].save,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 68,\r\n      marginTop: DEFAULT_MARGIN_TOP - 172,\r\n      width: DEFAULT_WIDTH + 238,\r\n      height: DEFAULT_HEIGHT - 250,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoExcelcapFund(lang) {\r\n  return {\r\n    infoID: \"InfoSave\",\r\n    infoText: MESSAGES[lang].gridCapFund,\r\n    iconMode: SHOW_STANDARD_LIGHT_BLUE,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT - 88,\r\n      marginTop: DEFAULT_MARGIN_TOP+35,\r\n      width: DEFAULT_WIDTH + 70,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoExcelAllAfterTax(lang) {\r\n  return {\r\n    infoID: \"InfoATax\",\r\n    infoText: MESSAGES[lang].afterTax,\r\n    iconMode: SHOW_STANDARD_LIGHT_BLUE,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 30,\r\n      marginTop: DEFAULT_MARGIN_TOP+45,\r\n      width: DEFAULT_WIDTH + 20,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n","import React from \"react\";\r\nimport { MultiButtons } from \"./MultiButtons\";\r\n\r\nimport { OUTPUT_WIDTH_PCT } from \"../definitions/generalDefinitions\";\r\n\r\nexport class AdjustibleImage extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      imageSize: this.props.size,\r\n      imageLeft: this.props.imageLeft,\r\n      allPages: this.props.allPages,\r\n      imageTop: this.props.top,\r\n      showDetails: false,\r\n      image: this.props.image,\r\n      undo: false,\r\n    };\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    this.setState({ showDetails: false });\r\n  };\r\n\r\n  updateImage = () => {\r\n    const image = {\r\n      image: this.state.image,\r\n      left: this.state.imageLeft,\r\n      size: this.state.imageSize,\r\n      allPages: this.state.allPages,\r\n      top: this.state.imageTop,\r\n      showDetails: this.state.showDetails,\r\n    };\r\n    this.props.imageAdjust(image, this.props.ID);\r\n  };\r\n\r\n  imageBigger = () => {\r\n    this.setState(\r\n      (prevState) => ({\r\n        imageSize: parseFloat(prevState.imageSize * 1.1),\r\n      }),\r\n      this.updateImage\r\n    );\r\n  };\r\n\r\n  imageSmaller = () => {\r\n    this.setState(\r\n      (prevState) => ({\r\n        imageSize: parseFloat(prevState.imageSize * 0.9),\r\n      }),\r\n      this.updateImage\r\n    );\r\n  };\r\n\r\n  imageLeft = () => {\r\n    this.setState(\r\n      (prevState) => ({\r\n        imageLeft: parseFloat(prevState.imageLeft - 2),\r\n      }),\r\n      this.updateImage\r\n    );\r\n  };\r\n\r\n  imageRight = () => {\r\n    this.setState(\r\n      (prevState) => ({\r\n        imageLeft: parseFloat(prevState.imageLeft + 2),\r\n      }),\r\n      this.updateImage\r\n    );\r\n  };\r\n\r\n  imagePosition = (e) => {\r\n    let top = e === 1 ? true : false;\r\n    this.setState(\r\n      { imageTop: top },\r\n\r\n      this.updateImage\r\n    );\r\n  };\r\n\r\n  imagePages = (e) => {\r\n    let allPages = e === 1 ? false : true;\r\n    this.setState(\r\n      { allPages: allPages },\r\n\r\n      this.updateImage\r\n    );\r\n  };\r\n\r\n  imageRemove = () => {\r\n    this.setState(\r\n      {\r\n        image: null,\r\n        showDetails: false,\r\n      },\r\n      this.updateImage\r\n    );\r\n  };\r\n\r\n  showDetails = () => {\r\n    const image = {\r\n      image: this.state.image,\r\n      left: this.state.imageLeft,\r\n      size: this.state.imageSize,\r\n      allPages: this.state.allPages,\r\n      imageTop: this.state.imageTop,\r\n      showDetails: !this.state.showDetails,\r\n    };\r\n    this.props.imageAdjust(image, this.props.ID);\r\n  };\r\n\r\n  undoImage = () => {\r\n    const image = {\r\n      image: this.state.image,\r\n      left: this.state.imageLeft,\r\n      size: this.state.imageSize,\r\n      allPages: this.state.allPages,\r\n      imageTop: this.state.imageTop,\r\n      showDetails: false,\r\n    };\r\n    \r\n    if(this.props.undoImage!==undefined)\r\n      image.image=this.props.undoImage\r\n      this.setState(\r\n      {\r\n        image: image,\r\n        undo: true\r\n      },\r\n    );\r\n\r\n  };\r\n\r\n  imageDone = () => {\r\n    this.setState({\r\n      showDetails: false,\r\n    });\r\n  };\r\n\r\n  loadImage = (e) => {\r\n    let file = e.target.files[0];\r\n\r\n    let reader = new FileReader();\r\n    reader.readAsDataURL(file);\r\n\r\n    let image;\r\n    reader.onload = () => {\r\n      image = reader.result;\r\n\r\n      const imageObj = {\r\n        image: image,\r\n        left: this.state.imageLeft,\r\n        size: this.state.imageSize,\r\n        allPages: false,\r\n        imageTop: this.state.imageTop,\r\n        showDetails: this.props.showDetails,\r\n      };\r\n      this.setState(\r\n        () => ({\r\n          image: image,\r\n          showDetails: this.props.showDetails,\r\n          allPages: this.props.allPages,\r\n          undo: false\r\n        }),\r\n        this.props.imageAdjust(imageObj, this.props.ID)\r\n      );\r\n    };\r\n  };\r\n\r\n  render() {\r\n    const styleImage = {\r\n      float: \"left\",\r\n      width: OUTPUT_WIDTH_PCT + \"%\",\r\n      display: \"table-cell\",\r\n      marginTop: \"-3px\",\r\n      marginBottom: \"15px\",\r\n      marginLeft: this.state.imageLeft + \"%\",\r\n    };\r\n    //console.log(this.state.image)\r\n    const lang = this.props.language !== undefined ? this.props.language : \"en\";\r\n    const cmdWidth =\r\n      this.props.buttonText !== undefined\r\n        ? this.props.buttonText.length * (lang === \"en\" ? 10 : 14)\r\n        : 0;\r\n\r\n    return (\r\n      <div\r\n        id=\"image\"\r\n        style={{\r\n          float: \"left\",\r\n          marginTop: \"12px\",\r\n          marginBottom: \"12px\",\r\n          width: OUTPUT_WIDTH_PCT + \"%\",\r\n        }}\r\n      >\r\n        <div style={{ paddingLeft: \"2.5%\" }}>\r\n          {this.state.showDetails === false && cmdWidth > 0 && (\r\n            <label className=\"roundedCornerCmd\">\r\n              <input\r\n                type=\"file\"\r\n                required\r\n                style={{ display: \"none\" }}\r\n                accept=\".jpg, .png, .jpeg, .gif, .bmp, .tif, .ico, .tiff, .svg,|image/*\"\r\n                onChange={this.loadImage}\r\n                onClick={(event) => {\r\n                  event.target.value = null;\r\n                }}\r\n              />\r\n              <span style={{ marginTop: \"10px\", width: \"40px\" }}>\r\n                {this.props.buttonText}\r\n              </span>\r\n              \r\n            </label>\r\n          )}\r\n          {this.props.undoImage!==undefined && <input\r\n             className=\"roundedCornerCmd\"\r\n              style={{marginLeft:\"10px\"}}\r\n              onClick={this.undoImage}\r\n              type=\"button\"\r\n              value={lang === \"en\" ? \"Undo\":\"Annuler\"}\r\n            />}\r\n        </div>\r\n        <br /> <br />\r\n        <hr className=\"ppi1\" />\r\n        {this.state.showDetails && (\r\n          <>\r\n            <div style={{ marginLeft: \"20px\" }}>\r\n              <MultiButtons\r\n                width={\"80px\"}\r\n                noButtons={2}\r\n                buttonCaption={[\r\n                  lang === \"en\" ? \"Top\" : \"Haut\",\r\n                  lang === \"en\" ? \"Bottom\" : \"Bas\",\r\n                ]}\r\n                selected={this.state.imageTop ? 1 : 2}\r\n                selectMultiButton={this.imagePosition}\r\n              />\r\n\r\n              <MultiButtons\r\n                width={\"40px\"}\r\n                noButtons={1}\r\n                buttonCaption={[\"+\"]}\r\n                selected={1}\r\n                selectMultiButton={this.imageBigger}\r\n              />\r\n              <MultiButtons\r\n                width={\"40px\"}\r\n                noButtons={1}\r\n                buttonCaption={[\"-\"]}\r\n                selected={1}\r\n                selectMultiButton={this.imageSmaller}\r\n              />\r\n\r\n              <MultiButtons\r\n                width={\"50px\"}\r\n                noButtons={1}\r\n                buttonCaption={[<text>&#8592;</text>]}\r\n                selected={1}\r\n                selectMultiButton={this.imageLeft}\r\n              />\r\n              <MultiButtons\r\n                width={\"50px\"}\r\n                noButtons={1}\r\n                buttonCaption={[<text>&#8594;</text>]}\r\n                selected={1}\r\n                selectMultiButton={this.imageRight}\r\n              />\r\n\r\n              <MultiButtons\r\n                width={lang === \"en\" ?\"80px\":\"120px\"}\r\n                noButtons={2}\r\n                buttonCaption={[\r\n                  lang === \"en\" ? \"1st page\" : \"1re page\",\r\n                  lang === \"en\" ? \"All pages\" : \"toutes les pages\",\r\n                ]}\r\n                selected={this.state.allPages ? 2 : 1}\r\n                selectMultiButton={this.imagePages}\r\n              />\r\n              <MultiButtons\r\n                width={\"40px\"}\r\n                noButtons={1}\r\n                buttonCaption={[\"x\"]}\r\n                selected={1}\r\n                selectMultiButton={this.imageRemove}\r\n              />\r\n              <MultiButtons\r\n                style={{ marginLeft: \"20px\" }}\r\n                width={\"80px\"}\r\n                noButtons={1}\r\n                buttonCaption={[lang === \"en\" ? \"done\" : \"terminé\"]}\r\n                selected={1}\r\n                selectMultiButton={this.imageDone}\r\n              />\r\n            </div>\r\n          </>\r\n        )}\r\n        <p />\r\n        <div style={styleImage}>\r\n          {this.state.image === null ? (\r\n            \"\"\r\n          ) : (\r\n            <img\r\n              className=\"ppi1\"\r\n              id={this.props.ID}\r\n              src={this.state.undo?this.state.image.image: this.state.image}\r\n              width={this.state.imageSize + \"%\"}\r\n            />\r\n          )}\r\n        </div>\r\n        <br />\r\n        <br />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import { TITLES, APPLET_INA, DEFAULT_QUOTE  } from \"../definitions/generalDefinitions\";\r\nimport React, { Component } from \"react\";\r\nimport { Info } from \"./Info\";\r\n\r\n//import {convertToINA} from '../utils/helper'\r\nimport { versionDetails, isVersion2019, isMobileDevice } from \"../utils/helper\";\r\nimport { version } from \"../../package.json\";\r\n\r\nexport function hideRecover() {\r\n  document.getElementById(\"last\").style.display = \"none\";\r\n}\r\n\r\nexport class Header extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.last = React.createRef();\r\n    this.default = React.createRef();\r\n//    this.defaultButton=this.defaultCommand(this.props.language); \r\nconst language=this.props.language\r\n    const storageName=DEFAULT_QUOTE\r\n    const set= TITLES[language ].default \r\n    const clear=TITLES[language ].defaultClear \r\n    this.defaultButton= localStorage.getItem(storageName) === null?set:clear\r\n \r\n  }\r\n\r\n  hideRecover = () => {\r\n    const ref = this.last.current;\r\n    //const last = document.getElementById(\"last\");\r\n    if (ref !== undefined) ref.style.display = \"none\";\r\n  };\r\n\r\n  saveDefault = () => {\r\n    //const def = document.getElementById(\"default\");\r\n\r\n    const ref = this.default.current;\r\n    const val = ref.value;\r\n    //console.log(ref)\r\n    if (ref !== undefined) {\r\n     \r\n      if (ref.value===TITLES[this.props.language ].default)\r\n      {\r\n        this.props.saveAsDefaultCase(false);\r\n    \r\n    //  ref.style.backgroundColor = \"lightgrey\";\r\n     // ref.style.color = \"white\";\r\n      ref.value = TITLES[this.props.language ].defaultClear\r\n   //  setTimeout(() => {\r\n    //    ref.style.backgroundColor = \"white\";\r\n        //ref.style.color = \"#455560\";\r\n       // ref.value = val;\r\n    //  }, 1000);\r\n\r\n    }\r\n    else{\r\n      this.props.saveAsDefaultCase(true);\r\n    \r\n      ref.value = TITLES[this.props.language ].default\r\n    } \r\n    }\r\n  };\r\n\r\n  defaultCommand=(language)=>{\r\n    const storageName=DEFAULT_QUOTE;\r\n    const set= TITLES[language ].default \r\n    const clear=TITLES[language ].defaultClear \r\n    return localStorage.getItem(storageName) === null?set:clear\r\n  }\r\n\r\n  changeLanguage=()=>{\r\n    this.defaultButton=this.defaultCommand(this.props.language===\"en\"?\"en\":\"fr\")\r\n    //this.props.changeLang()\r\n  }\r\n\r\n  render() {\r\n    const vd = versionDetails();\r\n    const emailAllowed = vd.allowEmail;\r\n    let style1 =\r\n      this.props.language === \"en\" ? { right: \"45px\" } : { right: \"55px\" };\r\n    let style2 =\r\n      this.props.language === \"en\" ? { right: \"90px\" } : { right: \"152px\" };\r\n    let style3 =\r\n      this.props.language === \"en\"\r\n        ? { right: emailAllowed ? \"145px\" : \"97px\" }\r\n        : { right: emailAllowed ? \"210px\" : \"158px\" };\r\n    let style4 =\r\n      this.props.language === \"en\"\r\n        ? { right: emailAllowed ? \"255px\" : \"197px\" }\r\n        : { right: emailAllowed ? \"320px\" : \"256px\" };\r\n    //if(isVersion2019())\r\n    //\tstyle3= this.props.language===\"en\" ? {right: '90px'}:  {right: '152px'};\r\n    var iOS = isMobileDevice(); // /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\r\n    const class1 = iOS === true ? \"headerBarIOS\" : \"headerBar\";\r\n    const styleTitle =\r\n      iOS === true\r\n        ? { color: \"#282e31\", marginBottom: \"8px\", marginTop: \"-10px\" }\r\n        : { color: \"#282e31\", marginBottom: \"8px\" };\r\n    const styleVersion =\r\n      iOS === true\r\n        ? { fontSize: \"10px\" }\r\n        : { display: \"inline-block\", fontSize: \"10px\", paddingLeft: \"4px\" };\r\n    return (\r\n      <div className={class1}>\r\n        <input\r\n          className=\"language\"\r\n          style={{ marginTop: \"0px\", right: \"0px\" }}\r\n          onClick={this.changeLanguage(), this.props.changeLang} /* this.changeLanguage()} */ \r\n          type=\"button\"\r\n          value={this.props.language === \"en\" ? \"Français\" : \"English\"}\r\n        />\r\n        <span>\r\n          <div style={{ maxWidth: \"70%\" }}>\r\n            <div style={{ display: \"inline-block\" }}>\r\n              <h2 className=\"headerTitle\" /* style={styleTitle} */>{this.props.title}</h2>\r\n            </div>\r\n            <div style={styleVersion}>({version})</div>\r\n          </div>\r\n        </span>\r\n        <span className=\"topCommandLine\">\r\n          <input\r\n            className=\"titleButtons\"\r\n            onClick={this.props.saveToFile}\r\n           // style={style1}\r\n            type=\"button\"\r\n            value={this.props.language === \"en\" ? \"Save\" : \"Enregistrer\"}\r\n          />\r\n          <label className=\"titleButtons\" style={{ right: \"0px\" }}>\r\n            <input\r\n              type=\"file\"\r\n              required\r\n              style={{ display: \"none\" }}\r\n              accept=\".ppi_INA_TKD, .ppi_EP_TKD, .json\"\r\n              onChange={this.props.loadFromFile}\r\n              onClick={(event) => {\r\n                event.target.value = null;\r\n              }}\r\n            />\r\n            <span className=\"titleLoad\">\r\n              {this.props.language === \"en\" ? \"Load\" : \"Ouvrir\"}\r\n            </span>\r\n          </label>\r\n          {emailAllowed && (\r\n            <input\r\n              className=\"titleButtons\"\r\n            //  style={style2}\r\n              onClick={this.props.EmailINA}\r\n              type=\"button\"\r\n              value={this.props.language === \"en\" ? \"e-mail\" : \"e-mail\"}\r\n              id=\"email\"\r\n            />\r\n          )}\r\n          <input\r\n            className=\"titleButtons\"\r\n          //  style={style3}\r\n            onClick={(event) => {\r\n              this.saveDefault();\r\n            }}\r\n            type=\"button\"\r\n            ref={this.default}\r\n            value={\r\n              this.defaultButton\r\n            }\r\n            id=\"default\"\r\n          />\r\n          <input\r\n            className=\"titleButtons\"\r\n          //  style={style4}\r\n            onClick={(event) => {\r\n              this.props.loadStorage();\r\n              hideRecover();\r\n            }}\r\n            type=\"button\"\r\n            ref={this.last}\r\n            value={this.props.language === \"en\" ? \"Recover\" : \"Récupérer\"}\r\n            id=\"last\"\r\n          />\r\n\r\n          {/*<input className=\"titleButtons\" onClick={this.EmailINA} style={{right: '130px'}} type=\"button\" value={this.props.language=== \"en\"?\"Email\":\"Email\"} />*/}\r\n        </span>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","module.exports = __webpack_public_path__ + \"static/media/INA.07a8e16f.png\";","module.exports = __webpack_public_path__ + \"static/media/estate.protection.applet.cover.graphic.d3f3dbc3.png\";","import React, { Component } from \"react\";\r\nimport { cleanFormat } from \"../utils/helper\";\r\nimport { Info } from \"./Info\";\r\n\r\nexport class InputField extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      inputValue: this.toFormat(this.props.inputValue),\r\n      isEditing: false,\r\n    };\r\n    \r\n    /* this.infoIcon= this.props.infoIcon === undefined? \r\n\t\t{\r\n\t\t\tmsg: \"\",\r\n\t\t\ticonAlert: false,\r\n      checkInfo: false,\r\n      popupRight:false,\r\n\t\t\tidM: 0\r\n\t\t} : {\r\n\t\t\tmsg: this.props.infoIcon.infoText,\r\n\t\t\ticonAlert: this.props.infoIcon.infoAlert,\r\n      checkInfo: this.props.infoIcon.showInfoIcon,\r\n      popupRight: this.props.infoIcon.popupRight,\r\n\t\t\tidM: this.props.infoIcon.infoID\r\n\t\t} */\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (nextProps.inputValue !== this.props.inputValue) {\r\n      this.setState({ inputValue: this.toFormat(nextProps.inputValue) });\r\n    }\r\n  }\r\n\r\n  updateInputValue(evt) {\r\n    //  const input = this.getInut(evt);\r\n    this.setState({ inputValue: evt.target.value }); // input });\r\n  }\r\n\r\n  getInut = (evt) => {\r\n    var input;\r\n    let chkNum;\r\n    const value = evt.target.value;\r\n    \r\n    /* if (\r\n      this.props.language === \"fr\" &&\r\n      this.props.format === 3 \r\n    )\r\n      chkNum = cleanFormat(value, true, lang);\r\n    else */ \r\n    chkNum = cleanFormat(value, this.props.language);\r\n\r\n    if (\r\n      (isNaN(chkNum.replace(\",\", \".\")) || value === \"\") &&\r\n      !(\r\n        value.toString()[value.toString().length - 1] === \".\" ||\r\n        value.toString()[value.toString().length - 1] === \",\"\r\n      )\r\n    )\r\n      input = value.substring(0, value.length - 1);\r\n    else input = chkNum;\r\n\r\n    const max =\r\n      this.props.format === 2\r\n        ? this.props.maxValue === undefined\r\n          ? 1000000000\r\n          : this.props.maxValue\r\n        : this.props.maxValue === undefined\r\n        ? 100\r\n        : this.props.maxValue;\r\n\r\n    if (input > max) input = max;\r\n    const min = this.props.minValue === undefined ? 0 : this.props.minValue;\r\n\r\n    if (input < min) input = min;\r\n  \r\n    return input;\r\n  };\r\n\r\n  afterStateUpdate() {\r\n    //this.props.handleUpdateInput(this.props.inputName, this.state.inputValue);\r\n    this.props.handleUpdateInput(this.props.id, this.state.inputValue);\r\n  }\r\n\r\n  handleFocus = (event) => {\r\n    if (navigator.userAgent.match(/Edge\\/(13|14|15|16|17)/)) {\r\n      //\treturn setTimeout( event.target.select.bind( event.target ), 1)\r\n    } else event.target.select();\r\n  };\r\n\r\n  selectField = (event) => {\r\n    if (navigator.userAgent.match(/Edge\\/(13|14|15|16|17)/)) {\r\n      event.target.setSelectionRange(0, event.target.value.length);\r\n    }\r\n  };\r\n  onMouseUpSelect = (event) => {\r\n    if (/iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream) {\r\n      event.target.select();\r\n    }\r\n  };\r\n\r\n  handleFocusIOS = (event) => {\r\n    event.target.value = cleanFormat(event.target.value, this.props.language);\r\n  };\r\n\r\n  toFormat(number) {\r\n    let formatter;\r\n    const lang = this.props.language;\r\n    /* if ((lang === \"fr\" || global.langFr) && this.props.format === 3)\r\n      number = cleanFormat(number, true); \r\n    else */\r\n    number = cleanFormat(number, lang);\r\n\r\n    if (isNaN(number) || number === \"\") number = 0;\r\n    if (this.props.format === 2) {\r\n      formatter =\r\n        (lang === \"fr\" ? \"\" : \"$\") +\r\n        new Intl.NumberFormat(lang).format(parseInt(number));\r\n    } else if (this.props.format === 3) {\r\n      if (lang === \"fr\") {\r\n        formatter =\r\n          number.toString()[number.toString().length - 1] === \".\"\r\n            ? parseFloat(number) + \",\"\r\n            : parseFloat(number);\r\n        formatter = formatter.toString().replace(\".\", \",\");\r\n      } else\r\n        formatter =\r\n          number.toString()[number.toString().length - 1] === \".\"\r\n            ? parseFloat(number) + \".\"\r\n            : parseFloat(number);\r\n    } else formatter = parseInt(number);\r\n    return formatter;\r\n  }\r\n\r\n  toggleEditing = (e) => {\r\n    /* e.target.value=this.toFormat(e.target.value);\t\t\r\n\t\t\t\tif(this.props.format === 3)e.target.value+=\"%\"; */\r\n    let input = this.getInut(e);\r\n    input = this.toFormat(input);\r\n    this.setState({ inputValue: input, isEditing: !this.state.isEditing }, () =>\r\n      this.afterStateUpdate()\r\n    );\r\n    //\tthis.props.handleUpdateInput(this.props.id, this.state.inputValue);\r\n  };\r\n\r\n  getValue = (value) => {\r\n    const dec = value.toString().indexOf(\".\");\r\n    const first = value.toString()[0];\r\n\r\n    if (first === 0 && dec === -1)\r\n      return (\r\n        parseFloat(100 * value.toString().slice(1, value.toString().length)) /\r\n        100\r\n      );\r\n    else return parseFloat(100 * value) / 100;\r\n  };\r\n\r\n  selectText = () => {\r\n    var s = this.refs.InputTxt.value;\r\n    if (s.length) {\r\n      window.setTimeout(function () {\r\n        this.refs.InputTxt.setSelectionRange(s.length - 1, s.length);\r\n      }, 0);\r\n    }\r\n  };\r\n\r\n  getRidOfZerosAfterDecimal = (displayValue) => {\r\n    const decimalPos = displayValue.indexOf(\".\");\r\n    if (decimalPos >= 0) {\r\n      if (displayValue.length >= decimalPos + 3)\r\n        // 2 decimals max\r\n        displayValue = displayValue.substring(0, decimalPos + 3);\r\n      // get rid of zeros\r\n      while (\r\n        displayValue.slice(-1) === \"0\" &&\r\n        displayValue.length > decimalPos + 3\r\n      ) {\r\n        displayValue = displayValue.substring(0, displayValue.length - 1);\r\n      }\r\n    }\r\n\r\n    return displayValue;\r\n  };\r\n\r\n  render() {\r\n    let displayValue =\r\n      this.state.inputValue !== undefined\r\n        ? this.state.inputValue.toString()\r\n        : \"\";\r\n    if (displayValue.indexOf(\".\") >= 0)\r\n      displayValue = this.getRidOfZerosAfterDecimal(displayValue);\r\n    //  displayValue=parseFloat(displayValue).toFixed(2);\r\n\r\n    const title = this.props.inputName; //  this.props.Count === 1 ? this.state.inputName : this.state.inputName;\r\n    const disable = this.props.readOnly ? true : false;\r\n    let styleClass = disable ? \"inputField inputFieldDisabled\" : \"inputField\";\r\n    styleClass += this.props.language === \"fr\" ? \" inputFieldFrench\" : \"\";\r\n    const styleClass2 =\r\n      styleClass +\r\n      (this.props.format === 3 ||\r\n      (this.props.format === 2 && this.props.language === \"fr\")\r\n        ? \" percentField\"\r\n        : \"\");\r\n\r\n    let divStyleClass = \"dropDown inputDiv\";\r\n    divStyleClass += this.props.language === \"fr\" ? \" inputDivFrench\" : \"\";\r\n\r\n    let inputColorStyle =\r\n      this.props.colorDiv === undefined\r\n        ? {}\r\n        : { border: \"1px solid \" + this.props.colorDiv };\r\n\r\n    //iOS=false;\r\n    var iOS2 = false;\r\n\r\n    if (\r\n      this.props.info !== undefined &&\r\n      (this.props.showInfo === true || this.props.showInfo === undefined)\r\n    ) {\r\n    }\r\n    //\tlet st1=this.props.format===3?\"styleClass st1percentField\":\"\";\r\n    let perc = this.props.format === 3;\r\n\r\n    if (this.props.language === \"fr\" && this.props.format === 2) {\r\n      return (\r\n        <div\r\n          className={divStyleClass}\r\n          french={this.props.language === \"en\" ? \"true\" : \"false\"}\r\n        >\r\n          <div className=\"controlTitle\">\r\n            {title}\r\n            {/*  {checkInfo === true ? (\r\n              <Info id={idM} msg={msg} infoPosition={this.props.infoPosition} />\r\n            ) : (\r\n              \"\"\r\n            )} */}\r\n            {this.props.infoIcon !== undefined ? (\r\n              <Info infoIcon={this.props.infoIcon} /> //id={this.props.infoIcon.infoID} msg={this.props.infoIcon.infoText}  popupRight={this.props.infoIcon.popupRight}  iconName={this.props.infoIcon.infoAlert? \"infoRed.png\":\"info.png\"} />\r\n            ) : (\r\n              \"\"\r\n            )}\r\n          </div>\r\n          {/*{iOS ? <input type=\"number\" inputmode=\"numeric\" pattern=\"\\d*\"  min=\"0\" max={max} step={step} className={styleClass} isDisabled={disable} onFocus={this.handleFocus} onClick={this.select} value={this.getValue(displayValue)} onChange={evt => this.updateInputValue(evt)} onBlur={this.toggleEditing.bind(this)} />*/}\r\n          {iOS2 ? (\r\n            \"\" //<input type=\"text\" inputmode=\"decimal\" min=\"0.0\" max={max} step={step} className={styleClass} isDisabled={disable} onFocus={this.handleFocus} onClick={this.select} value={displayValue} onChange={evt => this.updateInputValue(evt)}  />\r\n          ) : (\r\n            <div className={styleClass}>\r\n              <span>\r\n                <input\r\n                  type=\"text\"\r\n                  className={styleClass2}\r\n                  style={{ paddingTop: \"0px\", width: \"86%\" }}\r\n                  inputMode=\"decimal\"\r\n                  disabled={disable}\r\n                  value={displayValue}\r\n                  autoFocus\r\n                  onFocus={(e) => this.handleFocus(e)}\r\n                  onMouseUp={this.onMouseUpSelect}\r\n                  onClick={this.selectField}\r\n                  onChange={(evt) => this.updateInputValue(evt)}\r\n                  onBlur={this.toggleEditing.bind(this)}\r\n                />\r\n                <label\r\n                  style={{\r\n                    display: \"inline-block\",\r\n                    float: \"left\",\r\n                    width: \"3%\",\r\n                  }}\r\n                >\r\n                  $\r\n                </label>\r\n              </span>\r\n            </div>\r\n          )}\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div\r\n          className={divStyleClass}\r\n          french={this.props.language === \"en\" ? \"true\" : \"false\"}\r\n        >\r\n          <div className=\"controlTitle\">\r\n            {title}\r\n            {/*  {checkInfo === true && (\r\n              <Info id={idM} msg={msg} infoPosition={this.props.infoPosition}/>\r\n            )} */}\r\n            {this.props.infoIcon !== undefined ? (\r\n              <Info infoIcon={this.props.infoIcon} /> // id={this.props.infoIcon.infoID} msg={this.props.infoIcon.infoText} popupRight={this.props.infoIcon.popupRight} iconName={this.props.infoIcon.infoAlert? \"infoRed.png\":\"info.png\"} />\r\n            ) : (\r\n              \"\"\r\n            )}\r\n          </div>\r\n          {/*{iOS ? <input type=\"number\" inputmode=\"numeric\" pattern=\"\\d*\"  min=\"0\" max={max} step={step} className={styleClass} isDisabled={disable} onFocus={this.handleFocus} onClick={this.select} value={this.getValue(displayValue)} onChange={evt => this.updateInputValue(evt)} onBlur={this.toggleEditing.bind(this)} />*/}\r\n          {iOS2 ? (\r\n            \"\" //<input type=\"text\" inputmode=\"decimal\" min=\"0.0\" max={max} step={step} className={styleClass} isDisabled={disable} onFocus={this.handleFocus} onClick={this.select} value={displayValue} onChange={evt => this.updateInputValue(evt)}  />\r\n          ) : (\r\n            <div>\r\n              {perc === false ? (\r\n                <div>\r\n                  <input\r\n                    style={inputColorStyle}\r\n                    type=\"text\"\r\n                    key=\"if\"\r\n                    className={styleClass}\r\n                    inputMode=\"decimal\"\r\n                    disabled={disable}\r\n                    value={displayValue}\r\n                    onFocus={(e) => this.handleFocus(e)}\r\n                    onClick={this.selectField}\r\n                    onMouseUp={this.onMouseUpSelect}\r\n                    onChange={(evt) => this.updateInputValue(evt)}\r\n                    onBlur={this.toggleEditing.bind(this)}\r\n                  />\r\n                </div>\r\n              ) : (\r\n                <div className={styleClass}>\r\n                  {/* <div className=\"percentDiv\"> */}\r\n                  <span>\r\n                    <input\r\n                      type=\"text\"\r\n                      key=\"if1\"\r\n                      className={styleClass2}\r\n                      style={{ paddingTop: \"0px\", width: \"86%\" }}\r\n                      inputMode=\"decimal\"\r\n                      disabled={disable}\r\n                      value={displayValue}\r\n                      onFocus={(e) => this.handleFocus(e)}\r\n                      onMouseUp={this.onMouseUpSelect}\r\n                      onClick={this.selectField}\r\n                      onChange={(evt) => this.updateInputValue(evt)}\r\n                      onBlur={this.toggleEditing.bind(this)}\r\n                    />\r\n                    <label\r\n                      style={{\r\n                        display: \"inline-block\",\r\n                        float: \"left\",\r\n                        width: \"3%\",\r\n                      }}\r\n                    >\r\n                      %\r\n                    </label>\r\n                  </span>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n}\r\n","import { version } from \"../../package.json\";\r\nimport {\r\n  GROWTHDIR,\r\n  MEMBER,\r\n  LIABILITIES,\r\n  APPLET_EP,\r\n  APPLET_INA,\r\n} from \"../definitions/generalDefinitions\";\r\nimport XLSX from \"xlsx\";\r\nimport React from \"react\";\r\nimport { fetchMCCData, fetchAssetProjection2 } from \"../utils/FetchAPIs\";\r\nimport { readMCCData } from \"../data/dataExchangeMCC\";\r\nimport {\r\n  ASSET_API_OUTPUT_TaxPayable,\r\n  QUOTE_CLIENT,QUOTE_SPOUSE\r\n} from \"../definitions/generalDefinitions\";\r\nimport { OUTPUTTEXT } from \"../definitions/outputDefinitions\";\r\nimport { OUTPUTTEXTEP } from \"../definitions/outputDefinitionsEP\";\r\nimport {\r\n  DISPLAY_RETIREMENT,\r\n  DISPLAY_LIFEEXP,\r\n  DISPLAY_ENDAGE,\r\n  DISPLAY_LIFEEXP_PLUS_3,\r\n  DISPLAY_ANALYSIS,\r\n  OUTPUT_WIDTH_PCT,\r\n  IMAGE_LOGO_OTHERPAGES,\r\n  IMAGE_LOGO,\r\n  IMAGE_APPLET_INA,\r\n  IMAGE_APPLET_EP,\r\n  TITLES\r\n} from \"../definitions/generalDefinitions\";\r\nimport { AdjustibleImage } from \"../components/AdjustibleImage\";\r\nimport { MAX_LOGO_HEIGHT, PAGE_HEIGHT } from \"../components/PDF\";\r\nimport { getMessages } from \"validatorjs\";\r\n\r\nglobal.langFr =\r\n  (\r\n    (navigator.languages && navigator.languages[0]) ||\r\n    navigator.language ||\r\n    navigator.userLanguage\r\n  )\r\n    .toString()\r\n    .indexOf(\"fr\") >= 0;\r\n\r\nexport function cleanFormat(value, lang) {\r\n  if (value !== null) {\r\n    if (value !== undefined) {\r\n      if(lang===undefined) lang=\"en\"\r\n      if (!EngToFrConversion(value) && lang===\"fr\")\r\n        return value\r\n          .toString()\r\n          .replace(\",\", \".\")\r\n          .replace(\"$\", \"\")\r\n          .replace(\"%\", \"\")\r\n          .replace(/ /g, \"\")\r\n          .replace(\" \", \"\")\r\n          .replace(\r\n            /[\\u00A0\\u1680​\\u180e\\u2000-\\u2009\\u200a​\\u200b​\\u202f\\u205f​\\u3000]/g,\r\n            \"\"\r\n          );\r\n      else\r\n        return value\r\n          .toString()\r\n          .replace(/,/g, \"\")\r\n          .replace(\"$\", \"\")\r\n          .replace(\"%\", \"\")\r\n          .replace(/ /g, \"\")\r\n          .replace(\" \", \"\")\r\n          .replace(\r\n            /[\\u00A0\\u1680​\\u180e\\u2000-\\u2009\\u200a​\\u200b​\\u202f\\u205f​\\u3000]/g,\r\n            \"\"\r\n          );\r\n    }\r\n  }\r\n}\r\n\r\nfunction EngToFrConversion(amt){\r\n  let nSeperator=amt.toString().search(\",\");\r\n  if( nSeperator <0)\r\n    return false\r\n  else\r\n  {\r\n    let s1= amt;   \r\n    while (nSeperator >=0)\r\n    {\r\n      s1= s1.toString().substring(nSeperator+1, parseInt(s1.length));\r\n      nSeperator=s1.toString().search(\",\");\r\n      \r\n    }\r\n    if (s1.length>=3) \r\n      return true\r\n    else\r\n      return false\r\n  \r\n}\r\n}\r\n\r\nexport function isMobileDevice() {\r\n  return (\r\n    typeof window.orientation !== \"undefined\" ||\r\n    navigator.userAgent.indexOf(\"IEMobile\") !== -1\r\n  );\r\n}\r\n\r\nexport function numFormat(v, bInput, mode, seperator,decimalChar) {\r\n   var v1;\r\n  var v2;\r\n  var v3;\r\n\r\n  \r\n  var formatted;\r\n  const lang=decimalChar===\".\" || decimalChar=== undefined ? \"en\":\"fr\";\r\n  //const seperator = this.props.language === \"en\" ? \",\" : \" \";\r\n  //console.log(v);\r\n  if (typeof v !== \"undefined\") {\r\n    //console.log(v);\r\n    v = cleanFormat(v, lang);\r\n    if (mode !== 3) v = parseInt(v).toFixed(0);\r\n\r\n    if (mode === 3 && bInput) {\r\n      if (v[v.length - 1] === \".\") v = v.substring(0, v.length - 1);\r\n      else {\r\n        if (v.length > 1) v = (v * 10).toFixed(2);\r\n        if (v > 100) v = (v / 10).toFixed(2);\r\n      }\r\n    }\r\n\r\n    //console.log(v);\r\n    v1 = get1000(v);\r\n    v2 = get1000((v - v1) / 1000);\r\n    v3 = parseInt((v - v1 - 1000 * v2) / 1000000);\r\n\r\n    if (v2 > 0 || v3 > 0) {\r\n      v = v2 + seperator + (v1 > 99 ? v1 : v1 > 10 ? \"0\" + v1 : \"00\" + v1);\r\n      if (v3 > 0)\r\n        v =\r\n          v3 +\r\n          seperator +\r\n          (v2 > 99 ? v2 : v2 > 10 ? \"0\" + v2 : \"00\" + v2) +\r\n          seperator +\r\n          (v1 > 99 ? v1 : v1 > 10 ? \"0\" + v1 : \"00\" + v1);\r\n    }\r\n    \r\n    if (mode === 3) {\r\n      if (\r\n        /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\r\n          navigator.userAgent\r\n        )\r\n      )\r\n        formatted = parseFloat(Math.round(v * 100) / 100).toFixed(2);\r\n      else {\r\n        formatted = parseFloat(\r\n          Math.round(100 * v) / 100 / (v.length === 1 && bInput ? 100 : 1)\r\n        ); // + '%';\r\n        formatted = formatted > 100 ? 100 : formatted;\r\n        formatted = formatted.toFixed(2) + \"%\";\r\n        if(decimalChar!==undefined){\r\n          if(formatted.includes(\".\"))formatted=formatted.replace(\".\",decimalChar)\r\n        }\r\n      }\r\n    } else if (mode === 4) {\r\n      formatted =\r\n        25 * parseInt(parseFloat(Math.round(v * 100) / 100).toFixed(0) / 25);\r\n      if (formatted < 100) formatted = 100;\r\n      if (formatted > 400) formatted = 400;\r\n      if (\r\n        /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\r\n          navigator.userAgent\r\n        )\r\n      )\r\n        formatted = formatted;\r\n      else formatted = formatted + \"%\";\r\n    } else if (mode === 2) formatted = \"$\" + v;\r\n    else formatted = v;\r\n  }\r\n  if (isNaN(cleanFormat(formatted, lang))) formatted = 0;\r\n  return formatted;\r\n}\r\n\r\n//valueChanged = (num, mode) => {\r\n//\tlet seperator = this.props.language === \"en\" ? \",\" : \" \";\r\n//\tvar v = num.value.replace('$', '').replace('%', '').replace(seperator, '');\r\n//\tnum.value = this.numFormat(v);\r\n//}\r\n\r\n\r\nfunction get1000(num) {\r\n  return parseFloat(num) - 1000 * parseInt(num / 1000);\r\n}\r\n\r\n\r\nexport function formatMoney(amount, decimalCount, decimal, thousands) {\r\n  try {\r\n    const lang=decimal===\".\" || decimal=== undefined ? \"en\":\"fr\";\r\n\r\n    cleanFormat(amount, lang);\r\n    decimalCount = Math.abs(decimalCount);\r\n    decimalCount = isNaN(decimalCount) ? 2 : decimalCount;\r\n\r\n    const negativeSign = amount < 0 ? \"-\" : \"\";\r\n\r\n    let i = parseFloat(\r\n      (amount = Math.abs(Number(amount) || 0).toFixed(decimalCount))\r\n    ).toString();\r\n\r\n    let j = i.length > 3 ? i.length % 3 : 0;\r\n\r\n    return (\r\n      negativeSign +\r\n      (j ? i.substr(0, j) + thousands : \"\") +\r\n      i.substr(j).replace(/(\\d{3})(?=\\d)/g, \"$1\" + thousands) +\r\n      (decimalCount\r\n        ? decimal +\r\n          Math.abs(amount - i)\r\n            .toFixed(decimalCount)\r\n            .slice(2)\r\n        : \"\")\r\n    );\r\n  } catch (e) {\r\n    //\tconsole.log(e);\r\n  }\r\n}\r\n\r\nexport function formatMoney2(amount, decimalCount, lang, dollarSign) {\r\n  const decimalChar = lang === \"en\" ? \".\" : \",\";\r\n  const thousands = lang === \"en\" ? \",\" : \" \";\r\n // const formatFr = lang === \"fr\" ? true : false;\r\n\r\n  try {\r\n    cleanFormat(amount, lang);\r\n    decimalCount = Math.abs(decimalCount);\r\n    decimalCount = isNaN(decimalCount) ? 2 : decimalCount;\r\n\r\n    const negativeSign = amount < 0 ? \"-\" : \"\";\r\n\r\n    let i = parseFloat(\r\n      (amount = Math.abs(Number(amount) || 0).toFixed(decimalCount))\r\n    ).toString();\r\n\r\n    let j = i.length > 3 ? i.length % 3 : 0;\r\n\r\n    const returnValue = (\r\n      negativeSign +\r\n      (lang === \"en\" && dollarSign ? \"$\" : \"\") +\r\n      (j ? i.substr(0, j) + thousands : \"\") +\r\n      i.substr(j).replace(/(\\d{3})(?=\\d)/g, \"$1\" + thousands) +\r\n      (decimalCount\r\n        ? decimalChar +\r\n          Math.abs(amount - i)\r\n            .toFixed(decimalCount)\r\n            .slice(2)\r\n        : \"\") +\r\n      (lang === \"fr\" && dollarSign ? \" $\" : \"\")\r\n    ).toString();\r\n\r\n    return returnValue;\r\n  } catch (e) {\r\n    //\tconsole.log(e);\r\n  }\r\n}\r\n\r\nexport function arrayFormatMoney(array, language, noOfDecimals) {\r\n  let arrayFormatted = [];\r\n\r\n  for (let i = 0; i < array.length; i++) {\r\n    arrayFormatted[i] = formatMoney2(\r\n      array[i],\r\n      noOfDecimals,\r\n      language,\r\n      false\r\n      /* decimalChar,\r\n      thousands */\r\n    );\r\n  }\r\n  // console.log(arrayFormatted,array)\r\n  return arrayFormatted;\r\n}\r\n\r\nexport function clearListCookies() {\r\n  // console.log(document.cookie);\r\n  var cookies = document.cookie.split(\";\");\r\n  for (var i = 0; i < cookies.length; i++) {\r\n    var spcook = cookies[i].split(\"=\");\r\n    deleteCookie(spcook[0]);\r\n  }\r\n  function deleteCookie(cookiename) {\r\n    var d = new Date();\r\n    d.setDate(d.getDate() - 1);\r\n    var expires = \";expires=\" + d;\r\n    var name = cookiename;\r\n    var value = \"\";\r\n    document.cookie = name + \"=\" + value + \"; \" + expires + \"; path=/acc/html\";\r\n  }\r\n  localStorage.clear();\r\n  //window .location = \"\"; // TO REFRESH THE PAGE\r\n}\r\n\r\nexport function isVersion2019() {\r\n  const ver = version;\r\n  let verNo = 0;\r\n  let inS = ver.indexOf(\".\");\r\n  verNo = ver.substring(0, inS);\r\n  let verS = num(Number(verNo));\r\n  let inS2 = ver.indexOf(\".\", inS + 1);\r\n  verNo = ver.substring(inS + 1, inS2);\r\n  verS += num(Number(verNo));\r\n  verNo = ver.substring(inS2 + 1, ver.length);\r\n  verS += num(Number(verNo));\r\n  \r\n  return Number(verS) <= 10002;\r\n}\r\n\r\nexport function versionDetails() {\r\n  const ver = version;\r\n  let verNo = 0;\r\n  let inS = ver.indexOf(\".\");\r\n  verNo = ver.substring(0, inS);\r\n  let verS = num(Number(verNo));\r\n  let inS2 = ver.indexOf(\".\", inS + 1);\r\n  verNo = ver.substring(inS + 1, inS2);\r\n  verS += num(Number(verNo));\r\n  verNo = ver.substring(inS2 + 1, ver.length);\r\n  verS += num(Number(verNo));\r\n  let versionNumeric = Number(verS);\r\n\r\n  // 1.0.4\r\n  let allowEmail = false;\r\n  let saveEncrypt = versionNumeric >= 10003 ? true : false;\r\n  let allowAnalysis = versionNumeric > 10004 ? true : false;\r\n  // 1.0.5\r\n  allowEmail = true;\r\n  saveEncrypt = true;\r\n  allowAnalysis = true;\r\n  let verDetails = {\r\n    version: ver,\r\n    versionNumeric: versionNumeric,\r\n    allowEmail: allowEmail,\r\n    saveEncrypt: saveEncrypt,\r\n    allowAnalysis: allowAnalysis,\r\n  };\r\n  // 1.0.6\r\n  allowEmail = true;\r\n  saveEncrypt = true;\r\n  allowAnalysis = false;\r\n  verDetails = {\r\n    version: ver,\r\n    versionNumeric: versionNumeric,\r\n    allowEmail: allowEmail,\r\n    saveEncrypt: saveEncrypt,\r\n    allowAnalysis: allowAnalysis,\r\n  };\r\n  return verDetails;\r\n}\r\n\r\nfunction num(n) {\r\n  return n > 9 ? \"\" + n : \"0\" + n;\r\n}\r\n\r\n/* 16\r\n */\r\n/* \r\nexport function INAAssetSpreadsheetData(asset, taxRate, Spouse, inflation,language) {\r\n  let dataColumns = [];\r\n  let dataColumn = [];\r\n  let noYrs = 100 - Spouse.Age;\r\n\r\n  let i;\r\n  let j;\r\n\r\n  for (i = 0; i < 4; i++) {\r\n    dataColumn = [];\r\n    for (j = 0; j < noYrs; j++) {\r\n      if (i === 0) dataColumn.push(1 + j);\r\n      else if (i === 1) dataColumn.push(Spouse.Age + j);\r\n      else if (i === 2)\r\n        dataColumn.push(numFormat(asset.currValue * 1.03,   language===\"en\"?false:true, 2, language===\"en\"?\",\":\" \"));\r\n      else if (i === 3)\r\n        dataColumn.push(\r\n          numFormat(\r\n            (asset.currValue * 1.03 - asset.ACB) * taxRate,\r\n            language===\"en\"?false:true, 2, language===\"en\"?\",\":\" \"\r\n          )\r\n        );\r\n    }\r\n    dataColumns.push(dataColumn);\r\n    dataColumn = [];\r\n  }\r\n\r\n  //console.log(dataColumns);\r\n  return dataColumns;\r\n}\r\n */\r\nexport function handleCSVDownload2() {\r\n  var de = document.getElementById(\"DExcel\");\r\n  de.setAttribute(\"downloadNow\", \"1\");\r\n}\r\n\r\nexport function handleCSVDownload(data, columns) {\r\n  const CSVHead =\r\n    columns\r\n      .reduce((soFar, column) => soFar + '\"' + column.name + '\",', \"\")\r\n      .slice(0, -1) + \"\\r\\n\";\r\n  const CSVBody = data\r\n    .reduce((soFar, row) => soFar + '\"' + row.data.join('\",\"') + '\"\\r\\n', [])\r\n    .trim();\r\n\r\n  /* taken from react-csv */\r\n  const csv = `${CSVHead}${CSVBody}`;\r\n  const blob = new Blob([csv], { type: \"text/csv\" });\r\n  const dataURI = `data:text/csv;charset=utf-8,${csv}`;\r\n\r\n  const URL = window.URL || window.webkitURL;\r\n  const downloadURI =\r\n    typeof URL.createObjectURL === \"undefined\"\r\n      ? dataURI\r\n      : URL.createObjectURL(blob);\r\n\r\n  let link = document.createElement(\"a\");\r\n  link.setAttribute(\"href\", downloadURI);\r\n  link.setAttribute(\"download\", \"tableDownload.csv\");\r\n  /* document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link); */\r\n  const workbook = XLSX.utils.book_new();\r\n  workbook.SheetNames.push(\"T1\");\r\n  var d = [[\"hey\", \"goh\"]];\r\n  var v = XLSX.utils.aoa_to_sheet(d);\r\n  workbook.Sheets[\"T1\"] = v;\r\n  const worksheet = XLSX.utils.aoa_to_sheet(\r\n    [columns.map((r) => r.name)].concat(data.map((r) => r.data))\r\n  );\r\n\r\n  //\tworksheet.cells(10,10).value=3333333\r\n  XLSX.utils.book_append_sheet(workbook, worksheet, \"Tabela Exportada\");\r\n  XLSX.writeFile(workbook, \"TabelaExportada.xls\", { compression: true });\r\n}\r\n\r\nexport function INAMCCQuote() {\r\n  let MCC = async function (input, insuranceNeed) {\r\n    const minPrem = await getMCCQuoteOutput1(input, insuranceNeed);\r\n    const MCCData = await getMCCQuoteOutput2(input, insuranceNeed, minPrem);\r\n    // console.log(minPrem);\r\n    return MCCData;\r\n  };\r\n\r\n  // console.log(MCC);\r\n  return MCC;\r\n}\r\n\r\n\r\n/* function getMCCQuoteOutput(){\r\n  \t\treturn Promise.all([getMCCQuoteOutput1(),getMCCQuoteOutput2()])\r\n\t} */\r\n\r\nfunction getMCCQuoteOutput1(input, insuranceNeed) {\r\n  let quotePlanID = 48;\r\n  let quoteClient = 1; //\r\n  let dataMCC = readMCCData(input, quotePlanID, quoteClient, insuranceNeed);\r\n\r\n  //let dataAPISite = \"http://localhost:8082\";\r\n  fetchMCCData(dataMCC, insuranceNeed).then((data) => {\r\n    // console.log(data[0]);\r\n    if (data[0][1] !== undefined) {\r\n      console.log(\"POST: MCC_OutputArrays success\");\r\n      return data[0];\r\n    }\r\n  });\r\n}\r\n\r\nfunction getMCCQuoteOutput2(input, insuranceNeed, minPrem) {\r\n  let dataDB = [];\r\n  let quotePlanID = 48;\r\n  let quoteClient = 1; //\r\n  //let dataAPISite = \"http://localhost:8082\";\r\n  let dataMCC = readMCCData(input, quotePlanID, quoteClient, insuranceNeed);\r\n\r\n  dataMCC.policy.objPremium.PremSet = true;\r\n  dataMCC.policy.objPremium.PremSetAmt = minPrem;\r\n  dataMCC.policy.objPremium.PremSetDur = 19;\r\n  dataMCC.policy.objPremium.PremSolve = false;\r\n  fetchMCCData(dataMCC, insuranceNeed).then((data) => {\r\n    //console.log(data[0]);\r\n    if (data[0][1] !== undefined) {\r\n      //console.log(\"POST: MCC_OutputArrays success\");\r\n      dataDB = data[0][3].Values.map((x) => parseInt(cleanFormat(x)));\r\n      dataDB.unshift(parseInt(cleanFormat(insuranceNeed)));\r\n      return dataDB;\r\n    }\r\n  });\r\n}\r\n\r\nexport function getProjectedLiabilities(dataInput, years, probate) {\r\n  let i;\r\n  let j;\r\n  var totalLiabProjections = [];\r\n  for (i = 0; i < years; ++i) totalLiabProjections.push(0);\r\n  // add probate seperately\r\n  for (j = 0; j < dataInput.Liabilitys.length; j++) {\r\n    if (dataInput.Liabilitys[j].liabTypeKey!==LIABILITIES.PROBATE.Key)\r\n    {\r\n      const liabProj = getProjectedLiability(dataInput.Liabilitys[j]);\r\n      for (i = 0; i < Math.min(years, liabProj.length); ++i)\r\n        totalLiabProjections[i] += liabProj[i];\r\n    }\r\n  }\r\n  //console.log(probate.numericValues,years, probate.length)\r\n  // add probate\r\n  if(probate!==undefined)\r\n  {\r\n    for (i = 0; i < Math.min(years, probate.numericValues.length); ++i)\r\n    totalLiabProjections[i] += probate.numericValues[i];\r\n   // console.log(probate.numericValues[i],totalLiabProjections[i])\r\n  }\r\n\r\n  return totalLiabProjections;\r\n}\r\n\r\nexport function getProjectedLiability(liability,probate) {\r\n  let i;\r\n  var totalLiab = 0;\r\n  var totalLiabProjections = [];\r\n\r\n  if (\r\n    liability.liabTypeKey === LIABILITIES.OUTSTANDING_LOANS.Key ||\r\n    liability.liabTypeKey === LIABILITIES.MORTGAGE_REDEMPTION.Key\r\n  ) {\r\n    let amt = liability.currValue;\r\n    totalLiabProjections.push(Math.round(amt));\r\n    liability.growth = getLoanBalance(\r\n      liability.currValue,\r\n      liability.exposureDur,\r\n      liability.repay\r\n    );\r\n    //console.log(liability.growth);\r\n    for (i = 0; i < liability.exposureDur; ++i) {\r\n      amt = (amt - liability.repay) * (1 + liability.growth);\r\n      totalLiabProjections.push(Math.round(amt));\r\n    }\r\n  } else if (liability.liabTypeKey === LIABILITIES.CLIENT_TAX_LIABILITY.Key) {\r\n    //console.log(liability.assetTaxLiabProj)\r\n    let amt = liability.currValue;\r\n    totalLiabProjections.push(Math.round(amt));\r\n    for (i = 1; i < liability.exposureDur; ++i) {\r\n      amt = liability.assetTaxLiabProj[i];\r\n      totalLiabProjections.push(Math.round(amt));\r\n    }\r\n  } else if (liability.liabTypeKey === LIABILITIES.PROBATE.Key) {\r\n    if (probate ===undefined){\r\n      for (i = 0; i < liability.exposureDur; ++i) {\r\n        const amt = i < liability.exposureDur ? liability.currValue : 0;\r\n        totalLiab = amt;\r\n        totalLiabProjections.push(totalLiab);\r\n      }  \r\n    }\r\n    else\r\n      {\r\n        for (i = 0; i < liability.exposureDur; ++i) {\r\n        totalLiab = probate.numericValues[i];\r\n        totalLiabProjections.push(totalLiab);\r\n      }\r\n    }\r\n  } else {\r\n    for (i = 0; i < liability.exposureDur; ++i) {\r\n      const amt = i < liability.exposureDur ? liability.currValue : 0;\r\n      const change =\r\n        //liability.growthDir === GROWTHDIR[lang].Values[0]\r\n        liability.growthDirKey === GROWTHDIR.GROWS.Key\r\n          ? liability.growth / 100\r\n          : -liability.growth / 100;\r\n      totalLiab = amt * Math.pow(1 + change, i);\r\n      totalLiabProjections.push(totalLiab);\r\n    }\r\n  }\r\n\r\n  return totalLiabProjections;\r\n}\r\n\r\nfunction getLoanBalance(currValue, exposureDur, repay) {\r\n  //console.log(currValue,exposureDur,repay)\r\n  let rate = 0.1;\r\n  let dU = 0.2;\r\n  let dL = 0; //-.1111111;\r\n  let dBal = 1;\r\n\r\n  while (dU - dL > 0.0000001) {\r\n    dBal =\r\n      (currValue - repay) * Math.pow(1 + rate, exposureDur) -\r\n      (repay * (1 + rate) * (1 - Math.pow(1 + rate, exposureDur - 1))) / -rate;\r\n\r\n    if (dBal > 0) dU = rate;\r\n    else dL = rate;\r\n\r\n    rate = (dL + dU) / 2;\r\n  }\r\n\r\n  return rate;\r\n}\r\n\r\nexport function getINA_LifeExp_Plus_yrs(\r\n  INALifeExp,\r\n  dataShortfall,\r\n  invRate,\r\n  lifeExp,\r\n  yrs\r\n) {\r\n  let i;\r\n  let INA = INALifeExp;\r\n  \r\n  for (i = 0; i < yrs; ++i) {\r\n    INA =parseInt(INA)+parseInt(\r\n      dataShortfall[lifeExp + i] *\r\n      Math.pow(1 / (1 + invRate / 100), lifeExp + i));\r\n  \r\n  }\r\n\r\n  //console.log(INA)\r\n  return numFormat(INA, false, 2, \",\");\r\n}\r\n\r\nexport function getDataFutureEstateLiability(\r\n  dataTaxLiability,\r\n  totalLiabProjections\r\n) {\r\n  let i;\r\n  let projectEnd = Math.min(\r\n    totalLiabProjections.length,\r\n    dataTaxLiability.length\r\n  );\r\n  let dataFutureEstateLiability = [];\r\n\r\n  for (i = 0; i < projectEnd; ++i) {\r\n    dataFutureEstateLiability.push(dataTaxLiability[i]);\r\n  }\r\n  // add liab\r\n  for (i = 0; i < projectEnd; ++i) {\r\n    dataFutureEstateLiability[i] += totalLiabProjections[i];\r\n  }\r\n  return dataFutureEstateLiability;\r\n}\r\n\r\nexport function getListToShowByOrder(fullListOfItems) {\r\n  const showableList = Object.values(fullListOfItems)\r\n    .filter((obj) => obj.order > 0)\r\n    .slice(0);\r\n\r\n  return showableList.sort(function (a, b) {\r\n    return a.order - b.order;\r\n  });\r\n}\r\n\r\nexport function getListItemNameFromKey(list, Key, lang) {\r\n  let found = Object.values(list).find((obj) => obj.Key === Key);\r\n  if (found === undefined) found = \"\";\r\n  else found = found.value[lang];\r\n  return found;\r\n}\r\n\r\nexport function getListItemKeyFromName(list, name) {\r\n  // console.log(name,list)\r\n  name = name.split(\" \").join(\"\").split(\" \").join(\"\");\r\n  /*  Object.values(list).forEach(\r\n    obj => console.log(obj.value.en.split(\" \").join(\"\").split(\" \").join(\"\"),name,obj.value.en==name))\r\n   */\r\n\r\n  let found = Object.values(list).find(\r\n    (obj) =>\r\n      obj.value.en.split(\" \").join(\"\").split(\" \").join(\"\") == name ||\r\n      obj.value.fr.split(\" \").join(\"\").split(\" \").join(\"\") == name\r\n  );\r\n  if (found === undefined) found = 0;\r\n  else found = found.Key;\r\n  return found;\r\n}\r\n\r\nexport function getAssetsTaxCategoryTotal(dataInput, key) {\r\n  var totalAsset = 0;\r\n  dataInput.Assets.forEach((element) => {\r\n    if (element.assetTaxTypeKey === key) totalAsset += element.currValue;\r\n  });\r\n\r\n  return totalAsset;\r\n}\r\n\r\nexport function getDisableValues(list) {\r\n  let val = [];\r\n  Object.values(list).forEach(() => {\r\n    val.push(false);\r\n  });\r\n  return val;\r\n}\r\n\r\nexport function getAssetsCategoryTotal(dataList, key) {\r\n  var total = 0;\r\n  dataList.Assets.forEach((element) => {\r\n    if (element.assetTypeKey === key) total += element.currValue;\r\n  });\r\n  // // console.log(total,dataList,key)\r\n  return total;\r\n}\r\n\r\nexport function getLiabsCategoryTotal(dataList, key) {\r\n  var total = 0;\r\n  dataList.Liabilitys.forEach((element) => {\r\n    if (element.liabTypeKey === key) total += element.currValue;\r\n  });\r\n  // console.log(total,dataList,key)\r\n  return total;\r\n}\r\n\r\nexport function getAgesEP(clients,LE)\r\n{\r\n  const age1= clients[QUOTE_CLIENT].Age\r\n        \r\n  let dataAges=[]\r\n    //for (let i = startAge; i < parseFloat(startAge + LE + 4); i++)\r\n      if(clients.length > 1)\r\n      {\r\n        const age2= clients[QUOTE_SPOUSE].Age\r\n        for (let i = 0; i < parseFloat(LE + 4); i++)\r\n          dataAges.push(parseInt(age1+i) + \"/\" + parseInt(age2+i));\r\n      }\r\n      else\r\n      {\r\n        for (let i = 0; i < parseFloat(LE + 4); i++)\r\n          dataAges.push(parseInt(age1+i));\r\n      } \r\n\r\n      return dataAges\r\n}\r\n\r\n\r\nexport async function getTaxLiabCategoryTotal(dataInput, key, dataNA, yr) {\r\n  //let appSiteAPI = \"http://localhost:8082\";\r\n\r\n  var totalAsset = 0;\r\n\r\n  let dataAss = dataInput.Assets.filter(\r\n    (obj) => obj.assetTaxTypeKey === key\r\n  ).slice(0);\r\n\r\n  //await dataInput.Assets.forEach(async (element) => {\r\n  // if(element.assetTaxTypeKey === key)\r\n  //{\r\n  for (var i = 0; i < dataAss.length; ++i) {\r\n    let data = await getAssetTL(dataNA, dataAss[i].id, yr);\r\n    if (data !== undefined) {\r\n      totalAsset += data;\r\n    }\r\n  }\r\n  return totalAsset;\r\n}\r\n\r\nasync function getAssetTL(dataNA, id, yr) {\r\n  let data = await fetchAssetProjection2(dataNA, id);\r\n  if (data !== undefined) {\r\n    if (data[ASSET_API_OUTPUT_TaxPayable] !== undefined) {\r\n      return data[ASSET_API_OUTPUT_TaxPayable].numericValues[yr];\r\n    }\r\n   }\r\n}\r\n\r\n\r\n\r\n  export function getDefaultImages()\r\n  {\r\n    return{\r\n      adviserLogo:{image:null, left: 0,size: OUTPUT_WIDTH_PCT, allPages: false, top:true, showDetails:false},\r\n      appletImage:{image:APPLET_INA? require(\"../images/INA.png\"):require(\"../images/estate.protection.applet.cover.graphic.png\"), left: 0,size: OUTPUT_WIDTH_PCT, allPages: false, top:true, showDetails:false}\r\n    }\r\n  }\r\n  \r\n  \r\n\r\nexport function getAfterTaxTotalIncome(clients, index) {\r\n  return (\r\n    clients[QUOTE_CLIENT].Income *\r\n      (1 - clients[QUOTE_CLIENT].avgTaxRate / 100) +\r\n    clients[index].Income * (1 - clients[index].avgTaxRate / 100)\r\n  ); //* Math.pow(1+this.state.dataInput.Presentations[0].inflation / 100,data2.Needs[i].startYear)\r\n}\r\n\r\nexport function isSingleFamily(clients) {\r\n  const spouseKey = MEMBER.SPOUSE.Key;\r\n  let survivors = clients.filter((x) => x.memberKey === spouseKey);\r\n  if (APPLET_INA) return survivors === undefined || survivors.length === 0;\r\n  else if (APPLET_INA) return false;\r\n}\r\n\r\nexport function singleFamilyProjectionYears(clients) {\r\n  let minAge = 0;\r\n  let maxRet = 0;\r\n  let noYrs = 0;\r\n  const clientKey = MEMBER.CLIENT.Key;\r\n  let survivors = clients.filter((x) => x.memberKey !== clientKey);\r\n  if (survivors !== undefined && survivors.length > 0) {\r\n    minAge = survivors.reduce(function (prev, curr) {\r\n      return prev.Age < curr.Age ? prev : curr;\r\n    }).Age;\r\n\r\n    maxRet = survivors.reduce(function (prev, curr) {\r\n      return prev.retirementAge > curr.retirementAge ? prev : curr;\r\n    }).retirementAge;\r\n    \r\n    let noYrsDiff = survivors.reduce(function (prev, curr) {\r\n      return prev.Age - prev.retirementAge < curr.Age - curr.retirementAge ? prev : curr;\r\n    });\r\n    noYrs=noYrsDiff.retirementAge-noYrsDiff.Age\r\n  \r\n  }\r\n  return {\r\n    projectionEnd: maxRet,\r\n    noProjectionYrs: noYrs,//maxRet - minAge,\r\n    survivorAge: minAge,\r\n  };\r\n}\r\n\r\nexport function familyProjectionYears(\r\n  clients,\r\n  periodOption,\r\n  LE,\r\n  insuranceNeeds,\r\n  dataShortfall,\r\n  presentation\r\n) {\r\n  let insNeed = 0;\r\n  let insNeedRet = 0;\r\n  let insNeedLE = 0;\r\n  let insNeedLE3 = 0;\r\n  let insNeedEAge = 0;\r\n\r\n  if (insuranceNeeds.length > 0) {\r\n    insNeedRet = cleanFormat(insuranceNeeds[DISPLAY_RETIREMENT].Value, presentation.language);\r\n    insNeedLE =  cleanFormat(insuranceNeeds[DISPLAY_LIFEEXP].Value, presentation.language);\r\n    insNeedEAge =  cleanFormat(insuranceNeeds[DISPLAY_ENDAGE].Value, presentation.language);\r\n    const lifeExp=parseFloat(cleanFormat(LE.joint, presentation.language)) // this is either client or jltd if two lives\r\n\r\n    insNeed =\r\n      periodOption === DISPLAY_RETIREMENT\r\n        ? insNeedRet\r\n        : periodOption === DISPLAY_LIFEEXP\r\n        ? insNeedLE\r\n        : periodOption === DISPLAY_LIFEEXP_PLUS_3\r\n        ? getINA_LifeExp_Plus_yrs(\r\n          insNeedLE,\r\n            dataShortfall,\r\n            presentation.invRate,\r\n            //LE.spouse,\r\n            lifeExp, // this is either client or jltd if two lives\r\n            3\r\n          )\r\n        : insNeedEAge;\r\n    \r\n    insNeedLE3 =\r\n      dataShortfall !== undefined\r\n        ? getINA_LifeExp_Plus_yrs(\r\n          insNeedLE ,\r\n            dataShortfall,\r\n            presentation.invRate,\r\n            lifeExp,\r\n            3\r\n          )\r\n        : insNeed;\r\n  }\r\n\r\n  // if single family survivor Index could be more than on child, otherwise it is always 1 for spouse\r\n  if (isSingleFamily(clients) && !APPLET_EP) {\r\n    let singleFamilyvalues = singleFamilyProjectionYears(clients);\r\n    singleFamilyvalues.insuranceNeed = insNeedRet;\r\n    singleFamilyvalues.insuranceNeedToRet = insNeedRet;\r\n    singleFamilyvalues.insuranceNeedToLE = insNeedRet;\r\n    singleFamilyvalues.insuranceNeedToLE3 = insNeedRet;\r\n    singleFamilyvalues.insuranceNeedToEnd = insNeedRet;\r\n    return singleFamilyvalues;\r\n  } else {\r\n    let projectEnd = 65;\r\n    let noProjectYrs = 0;\r\n    let survAge;\r\n    const survIdx = 1; // spouse\r\n\r\n    if (APPLET_EP) {\r\n      // survivorExists or EP\r\n      if(clients.length===1){\r\n      projectEnd = LE.client + clients[QUOTE_CLIENT].Age + 3;\r\n      noProjectYrs = projectEnd - clients[QUOTE_CLIENT].Age;\r\n      survAge = clients[QUOTE_CLIENT].Age;\r\n      }\r\n      else // jltd\r\n      {\r\n        const minAge=Math.min(clients[QUOTE_CLIENT].Age, clients[QUOTE_SPOUSE].Age)\r\n        projectEnd = LE.joint + minAge + 3;\r\n        noProjectYrs = projectEnd - minAge;\r\n        survAge = minAge;\r\n      \r\n      }\r\n    } else if (clients.length > 1) {\r\n      // survivorExists or EP\r\n      projectEnd =\r\n        periodOption === DISPLAY_RETIREMENT\r\n          ? clients[survIdx].retirementAge\r\n          : periodOption === DISPLAY_LIFEEXP\r\n          ? LE.spouse + clients[survIdx].Age\r\n          : periodOption === DISPLAY_ANALYSIS\r\n          ? LE.joint + clients[survIdx].Age + 3\r\n          : 100;\r\n      noProjectYrs = projectEnd - clients[survIdx].Age;\r\n      survAge = clients[survIdx].Age;\r\n    } else {\r\n      survAge = clients[QUOTE_CLIENT].Age;\r\n      noProjectYrs = 0;\r\n    }\r\n    return {\r\n      projectionEnd: projectEnd,\r\n      noProjectionYrs: noProjectYrs,\r\n      survivorAge: survAge,\r\n      insuranceNeed: insNeed,\r\n      insuranceNeedToRet: insNeedRet,\r\n      insuranceNeedToLE: insNeedLE,\r\n      insuranceNeedToLE3: insNeedLE3,\r\n      insuranceNeedToEnd: insNeedEAge,\r\n    };\r\n  }\r\n}\r\n\r\nexport function getInsNeedLine(\r\n  presentation,\r\n  projEnd,\r\n  lang,\r\n  noSurvivor,\r\n  singleFamily,\r\n  protectionPeriod,\r\n  insuranceNeed,\r\n  name\r\n) {\r\n  const labelsBilingual = OUTPUTTEXT[lang];\r\n  const decimalChar = lang === \"en\" ? \".\" : \",\";\r\n  const thousands = lang === \"en\" ? \",\" : \" \";\r\n // const formatFr = lang === \"fr\" ? true : false;\r\n  const dollarEn= lang === \"fr\" ? \"\" : \"$\";\r\n  const dollarFr= lang === \"fr\" ? \"$\" : \"\";\r\n\r\n  let needTo =\r\n    presentation.periodOption === DISPLAY_RETIREMENT\r\n      ? singleFamily\r\n        ? labelsBilingual.insNeedsSingleFamily\r\n        : labelsBilingual.insNeedsRet\r\n      : presentation.periodOption === DISPLAY_ENDAGE\r\n      ? labelsBilingual.insNeeds100\r\n      : labelsBilingual.insNeedsRetLE;\r\n\r\n  if (noSurvivor) needTo = labelsBilingual.addSurvivor;\r\n  else if (singleFamily)\r\n    needTo +=\r\n      +protectionPeriod +\r\n      labelsBilingual.years +\r\n      \": \" + dollarEn +\r\n      formatMoney(\r\n        cleanFormat(insuranceNeed, lang),\r\n        0,\r\n        decimalChar,\r\n        thousands\r\n      )+dollarFr;\r\n  else if (presentation.periodOption !== DISPLAY_ENDAGE)\r\n    needTo +=\r\n      +projEnd +\r\n      \"): \" + dollarEn +\r\n      formatMoney(\r\n        cleanFormat(insuranceNeed, lang),\r\n        0,\r\n        decimalChar,\r\n        thousands\r\n      ) +dollarFr;\r\n  else\r\n    needTo +=\r\n      \": \" + dollarEn +\r\n      formatMoney(\r\n        cleanFormat(insuranceNeed, lang),\r\n        0,\r\n        decimalChar,\r\n        thousands\r\n      ) +dollarFr;\r\n  if (name !== \"\" && name !== undefined && name !== TITLES[lang].insured) needTo += \"  (\" + name + \")\";\r\n  return needTo;\r\n}\r\n\r\nexport function getName(name,lang) {\r\n  if (!(name === \"\" || name === undefined || name === TITLES[lang].insured  || name === TITLES[lang].benef)) return \" (\" + name + \")\";\r\n  else return \"\";\r\n}\r\n\r\nexport function formatted(value,lang){\r\n  const decimalChar = lang === \"en\" ? \".\" : \",\";\r\n  const thousands = lang === \"en\" ? \",\" : \" \";\r\n  \r\n  const formattedValue= (lang === \"en\" ? \"$\" : \"\" )+\r\n  formatMoney(\r\n    value,\r\n    0,\r\n    decimalChar,\r\n    thousands\r\n  )+(lang === \"en\" ? \"\" : \"$\" )\r\n\r\n  return formattedValue\r\n }\r\n \r\n\r\n\r\nexport function getLeakageGraphs(\r\n  assets,\r\n  assetProjections,\r\n  AssetLiabProjs,\r\n  totalLiabProjections,\r\n  lang,\r\n  lifeExp\r\n) {\r\n  const optionsPie = {\r\n    responsive: true,\r\n    maintainAspectRatio: true,\r\n    title: {\r\n      display: true,\r\n      position: \"top\",\r\n      text: \"\",\r\n      fontSize: 14, //8,\r\n      fontColor: \"#111\",\r\n    },\r\n    legend: {\r\n      display: true,\r\n      position: \"right\",\r\n      labels: {\r\n        fontColor: \"#333\",\r\n        fontSize: 12, //16\r\n      },\r\n    },\r\n    /*  plugins: {\r\n      // Change options for ALL labels of THIS CHART\r\n      display: true,\r\n      datalabels: {\r\n        color: \"white\",\r\n      },\r\n    },  */\r\n  };\r\n\r\n  const space = \"                                       \";\r\n  let optionsPieEstateLeakage = JSON.parse(JSON.stringify(optionsPie));\r\n  optionsPieEstateLeakage.title.text =\r\n    OUTPUTTEXTEP[lang].graphsLeakageT2 + space;\r\n  //optionsPieEstateLeakage.legend.labels.boxWidth = 20;\r\n  //optionsPieEstateLeakage.plugins.display = true;\r\n\r\n  let optionsPieEstateLeakageLE = JSON.parse(JSON.stringify(optionsPie));\r\n  optionsPieEstateLeakageLE.title.text =\r\n    OUTPUTTEXTEP[lang].graphsLeakageT3 + space; // needTo += +this.props.projectEnd + \")\";\r\n  // optionsPieEstateLeakageLE.legend.labels.boxWidth = 20;\r\n  //optionsPieEstateLeakageLE.plugins.display = true;\r\n \r\n  // asset info\r\n  let assetsTotalNow = 0;\r\n  let assetsTotalLE3 = 0;\r\n // const formatFr = lang === \"fr\" ? true : false;\r\n  const FMVCol = 2;\r\n  for (let i = 0; i < assets.length; ++i) {\r\n    assetsTotalNow += assets[i].currValue;\r\n    assetsTotalLE3 += parseFloat(\r\n      cleanFormat(\r\n        assetProjections[i].grid.dataProjection[FMVCol][lifeExp + 3],\r\n        lang\r\n      )\r\n    );\r\n  }\r\n\r\n  // liab info\r\n  const totalLiabProjectionsNow = parseInt(totalLiabProjections[0]);\r\n  const totalLiabProjectionsLE3 = parseInt(totalLiabProjections[lifeExp + 3]);\r\n\r\n  // leakage data\r\n  // use net worth as full circle in pie chart\r\n  const assetPercent =\r\n    assetsTotalNow - totalLiabProjectionsNow === 0\r\n      ? 0\r\n      : parseInt(\r\n          (100 *\r\n            (assetsTotalNow -\r\n              totalLiabProjectionsNow -\r\n              AssetLiabProjs.EstateLiabsByTypeTotal)) /\r\n            (assetsTotalNow - totalLiabProjectionsNow) +\r\n            0.5\r\n        );\r\n  const taxPercent =\r\n    AssetLiabProjs.EstateLiabsByTypeTotal === 0 ? 0 : 100 - assetPercent;\r\n\r\n  let dataEstateLeakage = [];\r\n  let dataEstateLeakageLE = [];\r\n  dataEstateLeakage.push(\r\n    assetsTotalNow -\r\n      totalLiabProjectionsNow -\r\n      AssetLiabProjs.EstateLiabsByTypeTotal >=\r\n      0\r\n      ? assetsTotalNow -\r\n          totalLiabProjectionsNow -\r\n          AssetLiabProjs.EstateLiabsByTypeTotal\r\n      : 0\r\n  );\r\n  dataEstateLeakage.push(AssetLiabProjs.EstateLiabsByTypeTotal);\r\n  dataEstateLeakageLE.push(\r\n    assetsTotalLE3 -\r\n      totalLiabProjectionsLE3 -\r\n      AssetLiabProjs.EstateLiabsByTypeLE3Total >=\r\n      0\r\n      ? assetsTotalLE3 -\r\n          totalLiabProjectionsLE3 -\r\n          AssetLiabProjs.EstateLiabsByTypeLE3Total\r\n      : 0\r\n  );\r\n  dataEstateLeakageLE.push(AssetLiabProjs.EstateLiabsByTypeLE3Total);\r\n\r\n  const assetPercentLE3 =\r\n    assetsTotalLE3 - totalLiabProjectionsLE3 === 0\r\n      ? 0\r\n      : parseInt(\r\n          (100 *\r\n            (assetsTotalLE3 -\r\n              totalLiabProjectionsLE3 -\r\n              AssetLiabProjs.EstateLiabsByTypeLE3Total)) /\r\n            (assetsTotalLE3 - totalLiabProjectionsLE3) +\r\n            0.5\r\n        );\r\n  const taxPercentLE3 =\r\n    AssetLiabProjs.EstateLiabsByTypeLE3Total +\r\n      assetsTotalLE3 -\r\n      totalLiabProjectionsLE3 ===\r\n    0\r\n      ? 0\r\n      : 100 - assetPercentLE3;\r\n\r\n  //var ctx = document.getElementById('pieEstateLeakage').getContext('2d');\r\n  var dataPieEstateLeakage = {\r\n    labels: [\r\n      // OUTPUTTEXT[lang].graphsL1,OUTPUTTEXT[lang].graphsL2,OUTPUTTEXT[lang].graphsL3,OUTPUTTEXT[lang].graphsL4,OUTPUTTEXT[lang].graphsL5,\r\n      OUTPUTTEXTEP[lang].graphsLeakage1 + \" (\" + assetPercent + \"%)\" + space,\r\n      OUTPUTTEXTEP[lang].graphsLeakage2 + \" (\" + taxPercent + \"%)\" + space,\r\n    ],\r\n    datasets: [\r\n      {\r\n        //data: this.state.estateLiabLE,\r\n        data: dataEstateLeakage,\r\n        //backgroundColor: [\"#F7464A\", \"#46BFBD\", \"#FDB45C\", \"#949FB1\", \"#4D5360\"]\r\n        backgroundColor: [\"#4D7966\", \"#872651\"],\r\n      },\r\n    ],\r\n  };\r\n  const dataPieEstateLeakageLE = {\r\n    labels: [\r\n      // OUTPUTTEXT[lang].graphsL1,OUTPUTTEXT[lang].graphsL2,OUTPUTTEXT[lang].graphsL3,OUTPUTTEXT[lang].graphsL4,OUTPUTTEXT[lang].graphsL5,\r\n      OUTPUTTEXTEP[lang].graphsLeakage1 + \" (\" + assetPercentLE3 + \"%)\" + space,\r\n      OUTPUTTEXTEP[lang].graphsLeakage2 + \" (\" + taxPercentLE3 + \"%)\" + space,\r\n    ],\r\n    datasets: [\r\n      {\r\n        //data: this.state.estateLiabLE,\r\n        data: dataEstateLeakageLE,\r\n        //backgroundColor: [\"#F7464A\", \"#46BFBD\", \"#FDB45C\", \"#949FB1\", \"#4D5360\"]\r\n        backgroundColor: [\"#4D7966\", \"#872651\"],\r\n      },\r\n    ],\r\n  };\r\n  return {\r\n    dataPieEstateLeakage: dataPieEstateLeakage,\r\n    dataPieEstateLeakageLE: dataPieEstateLeakageLE,\r\n    optionsPieEstateLeakage: optionsPieEstateLeakage,\r\n    optionsPieEstateLeakageLE: optionsPieEstateLeakageLE,\r\n  };\r\n}\r\n\r\nexport function getLogoAndAppletImage(dataInput, imageRemove, imageAdjust) {\r\n  const lang = dataInput.Presentations[0].language;\r\n  const allPages =\r\n      dataInput.Presentations[0].adviserLogo.image !== null &&\r\n      dataInput.Presentations[0].adviserLogo.allPages;\r\n  const appletImage =\r\n    dataInput.Presentations[0].appletImage === undefined\r\n      ? APPLET_INA\r\n        ? require(\"../images/INA.png\")\r\n        : require(\"../images/estate.protection.applet.cover.graphic.png\")\r\n      : dataInput.Presentations[0].appletImage.image;\r\n  const logoSize = Math.max(\r\n    500 * (MAX_LOGO_HEIGHT / PAGE_HEIGHT),\r\n    Math.min(\r\n      500 * (MAX_LOGO_HEIGHT / PAGE_HEIGHT),\r\n      (100 *\r\n        (MAX_LOGO_HEIGHT / PAGE_HEIGHT) *\r\n        dataInput.Presentations[0].adviserLogo.size) /\r\n        OUTPUT_WIDTH_PCT\r\n    )\r\n  );\r\n  const logoLeft =\r\n    dataInput.Presentations[0].adviserLogo.size / 2 +\r\n    dataInput.Presentations[0].adviserLogo.left -\r\n    logoSize / 2;\r\n  const logo = (allPages && \r\n    <AdjustibleImage\r\n      image={dataInput.Presentations[0].adviserLogo.image}\r\n      showDetails={false}\r\n      size={logoSize}\r\n      imageLeft={logoLeft}\r\n      ID={IMAGE_LOGO_OTHERPAGES}\r\n    />\r\n  );\r\n  const top=dataInput.Presentations[0].adviserLogo.top \r\n  /* const logoTop = dataInput.Presentations[0].adviserLogo.top && logo\r\n  const logoBottom = !dataInput.Presentations[0].adviserLogo.top && logo\r\n   */\r\n  const logo1stPage = dataInput.Presentations[0].adviserLogo.image !==\r\n    undefined && ( // from older files not null but undefined\r\n    <AdjustibleImage\r\n      image={dataInput.Presentations[0].adviserLogo.image}\r\n      showDetails={true}\r\n      size={dataInput.Presentations[0].adviserLogo.size}\r\n      imageLeft={dataInput.Presentations[0].adviserLogo.left}\r\n      allPages={dataInput.Presentations[0].adviserLogo.allPages}\r\n      top={dataInput.Presentations[0].adviserLogo.top}\r\n      imageRemove={imageRemove}\r\n      imageAdjust={imageAdjust}\r\n      buttonText={lang === \"en\" ? \"Add/Edit logo\" : \"Ajouter/modifier le logo\"}\r\n      ID={IMAGE_LOGO}\r\n      language={lang}\r\n    />\r\n  );\r\n  const applet = (\r\n    <div>\r\n    <AdjustibleImage\r\n      image={appletImage}\r\n      showDetails={false}\r\n      size={OUTPUT_WIDTH_PCT}\r\n      imageLeft={0}\r\n      imageAdjust={imageAdjust}\r\n      //newImagethis.props.loadImage\r\n      buttonText={lang === \"en\" ? \"Replace Applet image\" : \"Remplacer l’image de l’applet\"}\r\n      language={lang}\r\n      top={true}\r\n      ID={APPLET_INA ? IMAGE_APPLET_INA : IMAGE_APPLET_EP}\r\n      undoImage={APPLET_INA\r\n      ? require(\"../images/INA.png\")\r\n      : require(\"../images/estate.protection.applet.cover.graphic.png\")}\r\n    />\r\n    \r\n    </div>\r\n  );\r\n  return {\r\n    //appletImage: appletImage,\r\n    logoSize: logoSize,\r\n    logoLeft: logoLeft,\r\n    logoTop: top?logo:\"\",\r\n    logoBottom: !top?logo:\"\",\r\n    logo1stPage: logo1stPage,\r\n    applet:applet\r\n  };\r\n}\r\n","import React, { Component } from 'react';\r\nimport { Box, Card, CardContent, Typography } from '@material-ui/core'\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { createMuiTheme, ThemeProvider } from \"@material-ui/core/styles\";\r\n\r\nimport {\r\n  getInfoSave\r\n} from \"../definitions/infoIconsDefinitions.js\";\r\n\r\n\r\n\r\nexport class PopupInfoDialog extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      open: this.props.infoIcon.popupOpenByProps,\r\n      name: '',\r\n      showInfo: false\r\n    }\r\n  };\r\n\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (nextProps !== this.props) {\r\n\r\n      this.setState({\r\n        open: nextProps.infoIcon.popupOpenByProps\r\n      })\r\n    }\r\n  }\r\n\r\n  render() {\r\n\r\n    const theme = createMuiTheme({\r\n      typography: {\r\n        fontFamily: '\"Trebuchet MS\"',\r\n        fontSize: 12,\r\n        color: 'red',      \r\n      },\r\n    })  \r\n\r\n    return (\r\n\r\n    \r\n\r\n<Box width=\"100%\" border={2} borderColor={ this.props.infoIcon.popupBorderColor} borderRadius={5}>\r\n        <Card> <CardContent >\r\n        <ThemeProvider theme={theme}>\r\n          <Typography color=\"textPrimary\" component=\"p\" >\r\n                {this.props.infoIcon.infoText}\r\n             \r\n               {/*  <div>\r\n                To save files in your desired location:<ul><li>Microsofrft Edge:\r\n              <ul>\r\n                <li>Go to Options {this.state.showInfo && <img  alt=\"info\" src={optionsEdge}  />} </li>\r\n                <li>Click Downlods - Click Download settings</li>\r\n                <li>Turn on \"Ask where to save each file before downloading\" {this.state.showInfo && <img  alt=\"info\" src={sourceEdge}  />}\r\n              </li>\r\n               </ul>\r\n               </li><li>Google Chrome:\r\n               <ul>\r\n               <li>Go to Options {this.state.showInfo && <img  alt=\"info\" src={optionsChrome}  />} </li>\r\n                <li>Click Settings - Advanced - Downloads</li>\r\n                <li>Turn on \"Ask where to save each file before downloading\" {this.state.showInfo && <img  alt=\"info\" src={sourceChrome}  />}\r\n                </li>\r\n               </ul>\r\n              \r\n              </li></ul></div> */}\r\n             \r\n          </Typography>\r\n          </ThemeProvider>\r\n         \r\n        </CardContent></Card>\r\n        </Box>\r\n \r\n    )\r\n\r\n\r\n  }\r\n}","import React, { Component } from 'react';\r\nimport './info.css';\r\nimport {\r\n\tSHOW_AUTOMATIC_RED,\r\n\tSHOW_STANDARD,\r\n\tSHOW_STANDARD_RED,\r\n\tSHOW_STANDARD_LIGHT_BLUE,\r\n\tSHOW_NONE,\r\n\tSHOW_STANDARD_WHITE,\r\n}\r\n\tfrom \"../definitions/infoIconsDefinitions.js\";\r\nimport { PopupInfoDialog } from \"./PopupInfo\";\r\n\r\nexport class Info extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\topen: this.props.infoIcon.popupOpenByProps\r\n\t\t};\r\n\t\tthis.chkClose = false;\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tif (this.props.iconMode === SHOW_AUTOMATIC_RED) {\r\n\t\t\t//\t  console.log('in info');\r\n\r\n\t\t\tthis.popupInfo(0);\r\n\t\t\tthis.chkClose = true;\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tthis.setState({ open:  this.props.infoIcon.popupOpenByProps })\r\n\t}\r\n\r\n\tshowPopup = () => {\r\n\t\tthis.setState({ open: !this.state.open })\r\n\t\tif (this.props.respondToPopUp!==undefined)this.props.respondToPopUp();\r\n\t}\r\n\r\n\tpopupInfo = () => {\r\n\t\tvar popup = document.getElementById(this.props.infoIcon.infoID);\r\n\t\tpopup.classList.toggle(\"show\");\r\n\t//\tif (this.props.infoIcon.iconMode === SHOW_AUTOMATIC_RED && this.chkClose === true) {\r\n\t\t\tthis.props.respondToPopUp();\r\n\t\t\tthis.chkClose = false;\r\n\t//\t}\r\n\t}\r\n\r\n\r\n\trender() {\r\n\t\tconst position = this.props.infoIcon.position\r\n\t\t// console.log(position)\r\n\r\n\t\t//var icon=this.props.icon===undefined?'../images/info.png':this.props.icon;\r\n\r\n\t\t//var style1=this.props.popupRightMiddle? {paddingLeft:\"14px\", marginLeft: '75px',marginTop: '-135px', width:'196px' }:(this.props.popupRight===true?{marginLeft: '50px'}:{});\r\n\r\n\t\tvar stylePosition = position !== undefined ?\r\n\t\t\t({ marginLeft: position.marginLeft + 'px', marginTop: position.marginTop + 'px', width: position.width + 'px' }) : {};\r\n\t//var style={paddingLeft: this.props.popupRightMiddle?'25px':'8px', height: this.props.sizeIcon===undefined?'14px':this.props.sizeIcon, };\r\n\t\tconst style = { paddingLeft: '8px', height: '14px'};\r\n\t\t//var sour=this.props.iconName===undefined || this.props.iconName==='info.png'?require('../images/info.png'):require('../images/'+this.props.iconName);\r\n\t\tconst source = this.props.infoIcon.iconMode === SHOW_STANDARD ? require('../images/info.png') : (this.props.infoIcon.iconMode === SHOW_NONE ? \"\": (this.props.infoIcon.iconMode === SHOW_STANDARD_LIGHT_BLUE ?require('../images/infoLightBlue.png'): (this.props.infoIcon.iconMode === SHOW_STANDARD_WHITE ?require('../images/infoWhite.png'): require('../images/infoRed.png'))));\r\n\r\n\t\tconst classP = this.state.open === true ? \"popup2\" : \"popup\"\r\n\t\t\r\n\t\t//const width=this.props.infoIcon.infoText.length>120?'600%': (this.props.infoIcon.infoText.length>90?'420%':'350%');\r\n\t\t\r\n\t\tconst marginLeft=position.marginLeft//this.props.infoIcon.infoText.length>120?'-275%':'-125%';\r\n\t\tconst marginTop=position.marginTop\r\n\t\tconst width=position.width\r\n\t\tconst height=position.height\r\n\r\n\t\tconst zIndx=this.props.zIndex===undefined?1:this.props.zIndex\r\n\t\t\r\n\t\tlet borderColor\r\n\r\n\t\treturn (\r\n\t\t\t<div  className={classP} style={{ float: 'right', width: '40px', height: '40px'   }}><div>\r\n\t\t\t\t{this.props.iconMode !== SHOW_AUTOMATIC_RED && this.props.infoIcon.iconMode !== SHOW_NONE && <img onMouseEnter={this.showPopup} onMouseLeave={this.showPopup} onClick={this.showPopup} id={\"info\"} alt=\"info\" src={source} style={style} />}\r\n\t\t\t\t{/* <div className=\"popup\"  onMouseEnter={this.popupInfo} onMouseLeave={this.popupInfo}   onClick={this.popupInfo}>{this.props.showMode!==SHOW_AUTOMATIC_RED && <img  id={\"info\"} alt=\"info\" src={source} style={style} />} */}\r\n\t\t\t\t{/* <span className=\"popuptextBottom\"   style={stylePosition} id={this.props.infoIcon.infoID}>{this.props.infoIcon.infoText}</span> */}\r\n\t\t\t</div>\r\n\t\t\t <div style={{position:'absolute', marginTop: '2px',marginTop:marginTop,  marginLeft: marginLeft, width: width, zIndex: zIndx}}>\t\t\t<span onMouseEnter={this.showPopup} onMouseLeave={this.showPopup}  onClick={this.showPopup} >{this.state.open === true && <PopupInfoDialog  infoIcon={this.props.infoIcon} />}</span>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\r\n}\r\n","// Imports\r\nimport React, { Component } from \"react\";\r\nimport jsPDF from \"jspdf\";\r\n\r\n// Constants\r\nconst PORTRAIT = \"portrait\";\r\nconst PT = \"pt\";\r\nconst LETTER = \"letter\";\r\n\r\nconst PNG = \"png\";\r\n\r\nexport const HELVETICA = \"Helvetica\";\r\nexport const TIMES = \"Times\";\r\n\r\nexport const NORMAL = \"normal\";\r\nexport const BOLD = \"bold\";\r\nexport const ITALIC = \"italic\";\r\n\r\nexport const HEADER_RECT_IN_X: number = 1;\r\nexport const HEADER_RECT_IN_Y: number = 0.48;\r\nexport const HEADER_RECT_IN_W: number = 6.4;\r\nexport const HEADER_RECT_IN_H: number = 0.45;\r\nexport const HEADER_RECT_R: number = 148;\r\nexport const HEADER_RECT_G: number = 148;\r\nexport const HEADER_RECT_B: number = 148;\r\n\r\nexport const HEADER_TEXT_PT_SIZE: number = 10;\r\nexport const HEADER_TEXT_IN_X: number = 1;\r\nexport const HEADER_TEXT_IN_Y: number = 0.75;\r\nexport const HEADER_TEXT_IN_W: number = 6;\r\nexport const HEADER_TEXT_R: number = 0xff;\r\nexport const HEADER_TEXT_G: number = 0xff;\r\nexport const HEADER_TEXT_B: number = 0xff;\r\n\r\nexport const FOOTER_TEXT_PT_SIZE: number = 8;\r\nexport const FOOTER_TEXT_IN_X: number = 1.5;\r\nexport const FOOTER_TEXT_IN_Y: number = 11 - 3 * 0.125;\r\nexport const FOOTER_TEXT_IN_Y_L: number = 8 - 3 * 0.125;\r\n\r\nexport const TEXT_R: number = 0x45;\r\nexport const TEXT_G: number = 0x55;\r\nexport const TEXT_B: number = 0x60;\r\n\r\nexport const MAX_LOGO_HEIGHT = 0.38;\r\n// Functions\r\nexport const InToPt = (in_) => {\r\n  return in_ * 25;\r\n};\r\n\r\nexport const PxToPt = (px) => {\r\n  return (px / 96) * 72;\r\n};\r\n\r\nconst fontName = HELVETICA;\r\nconst fontStyle = NORMAL;\r\nconst fontSize = 16;\r\n\r\nconst textRed = 0x00;\r\nconst textGreen = 0x00;\r\nconst textBlue = 0x00;\r\n\r\nconst fillRed = 0xff;\r\nconst fillGreen = 0xff;\r\nconst fillBlue = 0xff;\r\n\r\nconst showGrids = true;\r\n\r\nconst PAGE_WIDTH = 8.4;\r\nexport const PAGE_HEIGHT = 11;\r\nconst PAGE_USED_AREA_LEFT = 1.2;\r\nconst PAGE_USED_AREA_RIGHT = 7.24;\r\n\r\n// Classes\r\nexport class PDF extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {};\r\n    this.pdf = new jsPDF();\r\n  }\r\n\r\n  AddImage = (imageID, x, y, w, h) => {\r\n    if (this.pdf === null) return;\r\n    const imgData = document.getElementById(imageID);\r\n    const imgProps = this.pdf.getImageProperties(imgData);\r\n    const pdfHeight = (imgProps.height * w) / imgProps.width;\r\n    if (pdfHeight > h) {\r\n      w = (imgProps.width * h) / imgProps.height;\r\n    } else h = pdfHeight;\r\n    this.pdf.addImage(document.getElementById(imageID), PNG, x, y, w, h);\r\n  };\r\n\r\n  AddImageFitWidthOnly = (imageID, x, y, w, maxHeight) => {\r\n    if (this.pdf === null) return;\r\n    let imgData = document.getElementById(imageID);\r\n\r\n    if (imgData !== null) {\r\n      try {\r\n        const imgProps = this.pdf.getImageProperties(imgData);\r\n\r\n        //const pdfWidth = this.pdf.internal.pageSize.getWidth();\r\n        let pdfHeight = (imgProps.height * w) / imgProps.width;\r\n\r\n        if (pdfHeight > maxHeight) {\r\n          if (x + w > (3 * InToPt(PAGE_WIDTH)) / 4)\r\n            x += w - (w * maxHeight) / pdfHeight;\r\n          else if (x + (w * maxHeight) / pdfHeight / 2 > InToPt(PAGE_WIDTH) / 4)\r\n            x += w / 2 - (w * maxHeight) / pdfHeight / 2;\r\n\r\n          /*  else if(x+w/2>InToPt(PAGE_WIDTH/4))\r\n          x-=(w-w*maxHeight / pdfHeight)/2 */\r\n\r\n          w *= maxHeight / pdfHeight;\r\n          pdfHeight = maxHeight;\r\n        }\r\n        this.pdf.addImage(imgData, PNG, x, y, w, pdfHeight);\r\n        return true;\r\n      } catch (error) {\r\n        return false;\r\n      }\r\n    }\r\n  };\r\n\r\n  addCustomImage = (id, pg1TitleY, image, firstPage, top) => {\r\n     const left =\r\n      image === null || image === undefined\r\n        ? 0\r\n        : (image.left * HEADER_RECT_IN_W) / 100;\r\n    const result = this.AddImageFitWidthOnly(\r\n      id,\r\n      InToPt(pg1TitleY - 3 + left), //1.51),\r\n      InToPt(\r\n        firstPage\r\n          ? top\r\n            ? 1.06\r\n            : FOOTER_TEXT_IN_Y + 0.25\r\n          : top\r\n          ? 0.29\r\n          : FOOTER_TEXT_IN_Y + 0.25\r\n      ),\r\n      InToPt((6.04 * image.size) / 100),\r\n      InToPt(firstPage ? (top ? 2.76 : MAX_LOGO_HEIGHT) : MAX_LOGO_HEIGHT) // max height\r\n    );\r\n    return result;\r\n  };\r\n\r\n  AddChart = (containerID, x, y, w, h) => {\r\n    if (this.pdf === null) return;\r\n\r\n    const CANVAS_CLASS_NAME = \"chartjs-render-monitor\";\r\n\r\n    let containerElement = document.getElementById(containerID);\r\n    let canvasElement = null;\r\n\r\n    if (containerElement !== null)\r\n      if (\r\n        containerElement.getElementsByClassName(CANVAS_CLASS_NAME).length === 1\r\n      )\r\n        canvasElement = containerElement.getElementsByClassName(\r\n          CANVAS_CLASS_NAME\r\n        )[0];\r\n\r\n    let dataUrl = canvasElement.toDataURL();\r\n\r\n    if (dataUrl !== null) this.pdf.addImage(dataUrl, \"JPEG\", x, y, w, h);\r\n  };\r\n\r\n  AddCanvas = (canvasID, x, y, w, h) => {\r\n    if (this.pdf === null) return;\r\n\r\n    let canvasElement = null;\r\n    let dataUrl = null;\r\n\r\n    canvasElement = document.getElementById(canvasID);\r\n\r\n    if (canvasElement !== null) dataUrl = canvasElement.toDataURL();\r\n\r\n    if (dataUrl !== null) this.pdf.addImage(dataUrl, \"JPEG\", x, y, w, h);\r\n  };\r\n\r\n  AddPage = (mode) => {\r\n    if (this.pdf === null) return;\r\n\r\n    this.pdf.addPage(\"\", mode);\r\n  };\r\n\r\n  Create = () => {\r\n    if (this.pdf !== null) return;\r\n\r\n    this.pdf = new jsPDF({\r\n      orientation: PORTRAIT,\r\n      unit: PT,\r\n      format: LETTER,\r\n    });\r\n  };\r\n\r\n  ShowGrids = () => {\r\n    return this.showGrids;\r\n  };\r\n\r\n  ShowGrids = (showGrids) => {\r\n    this.showGrids = showGrids;\r\n  };\r\n\r\n  Grid = () => {\r\n    if (this.pdf === null) return;\r\n\r\n    if (this.showGrids === false) return;\r\n\r\n    const FONT_SIZE = 12;\r\n    const LARGE_FONT_SIZE = 16;\r\n\r\n    this.pdf.setFontSize(12);\r\n    this.pdf.setFont(HELVETICA, NORMAL);\r\n    this.pdf.setTextColor(0x00, 0x88, 0x00);\r\n\r\n    let x;\r\n    let y;\r\n\r\n    this.pdf.text(\"0\", 0, FONT_SIZE);\r\n\r\n    for (x = 1; x <= 8; x++) this.pdf.text(\"\" + x, InToPt(x), FONT_SIZE);\r\n\r\n    for (y = 1; y <= 11; y++) this.pdf.text(\"\" + y, 0, InToPt(y));\r\n\r\n    for (x = 0.25; x <= 8.5; x += 0.25)\r\n      for (y = 0.25; y <= 11; y += 0.25)\r\n        this.pdf.text(\".\", InToPt(x), InToPt(y));\r\n\r\n    this.pdf.setFont(HELVETICA, BOLD);\r\n    this.pdf.setFontSize(LARGE_FONT_SIZE);\r\n    for (x = 1; x <= 8; x += 1)\r\n      for (y = 1; y <= 11; y += 1) this.pdf.text(\".\", InToPt(x), InToPt(y));\r\n\r\n    if (this.fontSize !== null) this.pdf.setFontSize(this.fontSize);\r\n\r\n    if (\r\n      this.textRed !== null &&\r\n      this.textGreen !== null &&\r\n      this.textBlue !== null\r\n    )\r\n      this.pdf.setTextColor(this.textRed, this.textGreen, this.textBlue);\r\n\r\n    if (this.fontName !== null && this.fontStyle !== null)\r\n      this.pdf.setFont(this.fontName, this.fontStyle);\r\n  };\r\n\r\n  MultilineText = (text, x, y, w) => {\r\n    if (this.pdf === null) return;\r\n\r\n    let textLines = [];\r\n\r\n    textLines = this.pdf.splitTextToSize(text, w, {\r\n      fontName: this.fontName,\r\n      fontSize: this.fontSize,\r\n    });\r\n\r\n    this.pdf.text(textLines, x, y);\r\n  };\r\n\r\n  DrawLine = (x, y, w) => {\r\n    this.pdf.line(x, y, x + w, y);\r\n  };\r\n\r\n  Reset = () => {\r\n    this.pdf = null;\r\n  };\r\n\r\n  SetFont = (fontName, fontStyle) => {\r\n    if (this.pdf === null) return;\r\n\r\n    this.pdf.setFont(fontName, fontStyle);\r\n\r\n    this.fontName = fontName;\r\n    this.fontStyle = fontStyle;\r\n  };\r\n\r\n  SetFontSize = (fontSize) => {\r\n    if (this.pdf === null) return;\r\n\r\n    this.pdf.setFontSize(fontSize);\r\n\r\n    this.fontSize = fontSize;\r\n  };\r\n\r\n  Save = (fileName) => {\r\n    if (this.pdf === null) return;\r\n\r\n    this.pdf.save(fileName);\r\n  };\r\n\r\n  SetTextColor = (red, green, blue) => {\r\n    if (this.pdf === null) return;\r\n\r\n    this.pdf.setTextColor(red, green, blue);\r\n\r\n    this.textRed = red;\r\n    this.textGreen = green;\r\n    this.textBlue = blue;\r\n  };\r\n\r\n  SetFillColor = (red, green, blue) => {\r\n    if (this.pdf === null) return;\r\n\r\n    this.pdf.setFillColor(red, green, blue);\r\n\r\n    this.fillRed = red;\r\n    this.fillGreen = green;\r\n    this.fillBlue = blue;\r\n  };\r\n\r\n  showOnPage = () => {\r\n    //this.pdf.output('datauri');\r\n    //window.open(this.pdf.output('bloburl'))\r\n    //this.pdf.output('dataurlnewwindow');\r\n    //return this.pdf.output('datauri')\r\n    var blob = this.pdf.output(\"bloburl\");\r\n    return blob;\r\n  };\r\n  Rectangle = (x, y, w, h) => {\r\n    if (this.pdf === null) return;\r\n\r\n    this.pdf.roundedRect(x, y, w, h, 0, 0, \"F\");\r\n  };\r\n\r\n  textWidth = (text) => {\r\n    var arrayText = text.split(\" \");\r\n    let minWidth = 0;\r\n    //console.log(arrayText)\r\n    for (let i = 0; i < arrayText.length; i++) {\r\n      minWidth = Math.max(minWidth, this.pdf.getTextWidth(arrayText[i]));\r\n    }\r\n    return minWidth / 25; // pt to int\r\n  };\r\n  textWidthMultiLine = (text, width) => {\r\n    let arrayText = this.pdf.splitTextToSize(text, InToPt(width));\r\n    let minWidth = 0;\r\n    for (let i = 0; i < arrayText.length; i++) {\r\n      minWidth = Math.max(minWidth, this.pdf.getTextWidth(arrayText[i]));\r\n    }\r\n    return minWidth / 25; // pt to int\r\n  };\r\n\r\n  adjustTextWidth = (arrayText) => {\r\n    let minWidth = 0;\r\n    for (let i = 0; i < arrayText.length; i++) {\r\n      minWidth = Math.max(minWidth, this.pdf.getTextWidth(arrayText[i]));\r\n    }\r\n    return minWidth / 25; // pt to int\r\n  };\r\n\r\n  tableRow = (\r\n    fill,\r\n    textColor,\r\n    x,\r\n    y,\r\n    values,\r\n    height,\r\n    Widths,\r\n    box,\r\n    align,\r\n    title\r\n  ) => {\r\n    const lines2Fac = 1.75;\r\n    const lines3Fac = 2.7;\r\n    const cols = values.length;\r\n    let textY = y + height / 2 + 0.05;\r\n    // wrap if needed\r\n    let h = height;\r\n    for (i = 1; i <= cols; i++) {\r\n      if (\r\n        this.pdf.getTextWidth(values[i - 1]) > 2 * InToPt(Widths[i - 1]) &&\r\n        h < parseFloat(lines3Fac * height)\r\n      ) {\r\n        //console.log(values[i - 1],this.pdf.getTextWidth(values[i - 1]),.8*InToPt(Widths[i - 1]))\r\n        h = lines3Fac * height;\r\n        textY = y + height / 2 + 0.07;\r\n      } else if (\r\n        this.pdf.getTextWidth(values[i - 1]) > InToPt(Widths[i - 1]) &&\r\n        h < parseFloat(lines2Fac * height)\r\n      ) {\r\n        //console.log(values[i - 1],this.pdf.getTextWidth(values[i - 1]),.8*InToPt(Widths[i - 1]))\r\n        h = lines2Fac * height;\r\n        textY = y + height / 2 + 0.07;\r\n      }\r\n      let textOut;\r\n      if (h > height) {\r\n        textOut = this.pdf.splitTextToSize(\r\n          values[i - 1],\r\n          InToPt(Widths[i - 1] - 0.1)\r\n        );\r\n        // adjust width if necessary\r\n        //console.log(textOut,h,height)\r\n        if (title === true) {\r\n          if (textOut.length > 2 && h < parseFloat(lines3Fac * height))\r\n            h = lines3Fac * height;\r\n          else if (textOut.length > 1 && h < parseFloat(lines2Fac * height))\r\n            h = lines2Fac * height;\r\n          textY = y + height / 2 + 0.07;\r\n          // console.log(textOut,h,height)\r\n        }\r\n      }\r\n    }\r\n    this.SetTextColor(textColor[0], textColor[1], textColor[2]);\r\n    //this.SetFontSize(12);\r\n    var i;\r\n    let rightAlign;\r\n    let xi = x;\r\n    for (i = 1; i <= cols; i++) {\r\n      // wrap if needed\r\n      let textOut;\r\n      if (h > height) {\r\n        textOut = this.pdf.splitTextToSize(\r\n          values[i - 1],\r\n          InToPt(Widths[i - 1] - 0.1)\r\n        );\r\n      } else {\r\n        textOut = values[i - 1];\r\n        if (align !== undefined) {\r\n          if (align[i - 1] !== undefined) {\r\n            if (align[i - 1] === 2) rightAlign = true;\r\n          }\r\n        }\r\n      }\r\n      this.SetFillColor(fill[0], fill[1], fill[2]);\r\n      this.Rectangle(\r\n        InToPt(xi),\r\n        InToPt(y),\r\n        InToPt(Widths[i - 1] + 0.1),\r\n        InToPt(h)\r\n      );\r\n      if (box) {\r\n        this.pdf.setDrawColor(155, 155, 155);\r\n        this.pdf.rect(\r\n          InToPt(xi),\r\n          InToPt(y),\r\n          InToPt(Widths[i - 1] + 0.1),\r\n          InToPt(h)\r\n        );\r\n      }\r\n      if (rightAlign)\r\n        this.RightText(\r\n          values[i - 1],\r\n          InToPt(xi - 0.05),\r\n          InToPt(textY),\r\n          InToPt(Widths[i - 1])\r\n        );\r\n      else this.pdf.text(textOut, InToPt(xi + 0.1), InToPt(textY));\r\n\r\n      //  this.MultilineText(values[i - 1], InToPt(xi + .1), InToPt(y + .25), InToPt(3));\r\n      xi += Widths[i - 1];\r\n    }\r\n    //pdf.SetFillColor(fill[0], fill[1], fill[2]);\r\n    //pdf.Rectangle(InToPt(x), InToPt(y), InToPt(w), InToPt(height));\r\n    //pdf.Text(\"Family Profile\", InToPt(x[0] + .1), InToPt(y + .25));\r\n    //pdf.SetFillColor(115, 153, 198);\r\n    //pdf.Rectangle(InToPt(x[1]), InToPt(y), InToPt(w), InToPt(0.4));\r\n    //pdf.Text(\"Income\", InToPt(x[1] + .1), InToPt(y + .25));\r\n    //pdf.SetFillColor(115, 153, 198);\r\n    //pdf.Rectangle(InToPt(x[2]), InToPt(y), InToPt(w), InToPt(0.4));\r\n    //pdf.Text(\"Retirement Age\", InToPt(x[2] + .1), InToPt(y + .25));\r\n\r\n    return h - height; // excess height from here\r\n  };\r\n\r\n  Text = (text, x, y) => {\r\n    if (this.pdf === null) return;\r\n\r\n    this.pdf.text(text, x, y);\r\n  };\r\n\r\n  CenterText = (text, x, y, w) => {\r\n    if (this.pdf === null) return;\r\n\r\n    let tw = this.pdf.getTextWidth(text);\r\n\r\n    this.pdf.text(text, x + (w - tw) / 2, y);\r\n  };\r\n\r\n  RightText = (text, x, y, w) => {\r\n    if (this.pdf === null) return;\r\n\r\n    let tw = this.pdf.getTextWidth(text);\r\n\r\n    this.pdf.text(text, x + (w - tw) + 0.1, y);\r\n  };\r\n\r\n  Header = (textH, headerOffset) => {\r\n    if (headerOffset === undefined) headerOffset = 0;\r\n    this.SetFillColor(HEADER_RECT_R, HEADER_RECT_G, HEADER_RECT_B);\r\n\r\n    this.Rectangle(\r\n      InToPt(HEADER_RECT_IN_X),\r\n      InToPt(HEADER_RECT_IN_Y + headerOffset),\r\n      InToPt(HEADER_RECT_IN_W),\r\n      InToPt(HEADER_RECT_IN_H)\r\n    );\r\n\r\n    this.SetTextColor(HEADER_TEXT_R, HEADER_TEXT_G, HEADER_TEXT_B);\r\n    this.SetFont(HELVETICA, NORMAL);\r\n    this.SetFontSize(HEADER_TEXT_PT_SIZE);\r\n    this.CenterText(\r\n      textH,\r\n      InToPt(HEADER_TEXT_IN_X),\r\n      InToPt(HEADER_TEXT_IN_Y + headerOffset),\r\n      InToPt(HEADER_TEXT_IN_W)\r\n    );\r\n  };\r\n\r\n  addFooterAndHeader = (headerOffset, footerText, headerText) => {\r\n    this.Footer(footerText);\r\n    this.AddPage();\r\n    this.Header(headerText, headerOffset);\r\n  };\r\n\r\n  Footer = (textF) => {\r\n    this.SetTextColor(TEXT_R, TEXT_G, TEXT_B);\r\n    this.SetFont(TIMES, NORMAL);\r\n    this.SetFontSize(FOOTER_TEXT_PT_SIZE);\r\n    this.Text(textF, InToPt(FOOTER_TEXT_IN_X), InToPt(FOOTER_TEXT_IN_Y));\r\n  };\r\n\r\n  FooterLandscape = (textF) => {\r\n    this.SetTextColor(TEXT_R, TEXT_G, TEXT_B);\r\n    this.SetFont(TIMES, NORMAL);\r\n    this.SetFontSize(FOOTER_TEXT_PT_SIZE);\r\n    this.Text(textF, InToPt(FOOTER_TEXT_IN_X), InToPt(FOOTER_TEXT_IN_Y_L));\r\n  };\r\n\r\n  drawRect(paraLeft, paraY, paraWidth, height, color) {\r\n    this.SetFillColor(color[0], color[1], color[2]);\r\n    this.pdf.rect(\r\n      InToPt(paraLeft),\r\n      InToPt(paraY),\r\n      InToPt(paraWidth),\r\n      InToPt(height),\r\n      \"F\"\r\n    );\r\n  }\r\n\r\n  addFooter = (footer, title) => {\r\n    this.Footer(footer);\r\n    this.AddPage();\r\n    this.Header(title);\r\n  };\r\n\r\n  addHeaderNoFooter = (headerOffset, headerText) => {\r\n    this.AddPage();\r\n    this.Header(headerText, headerOffset);\r\n  };\r\n\r\n  tableRowSingle = (\r\n    fill,\r\n    textColor,\r\n    x,\r\n    y,\r\n    values2,\r\n    height,\r\n    Widths,\r\n    coloured\r\n  ) => {\r\n    const values = [values2];\r\n\r\n    if (coloured)\r\n      // has colour\r\n      this.tableRow(fill, textColor, x, y + 0.1, values, height - 0.1, [1.2]);\r\n    else this.tableRow(fill, textColor, x, y, values, height, Widths);\r\n  };\r\n\r\n}","import { appletMode } from \"../../package.json\";\r\nimport {\r\n  ASSETS,\r\n  ASSET_TAX,\r\n  ASSET_OWNERSHIP_ACTION,\r\n  INCOMESOURCES,\r\n  LIABILITIES,\r\n  OWNERSHIP,\r\n  GROWTHDIR,\r\n  INCOMENEEDS,\r\n  PROVINCE,\r\n  APPLET_INA,\r\n  OUTPUT_WIDTH_PCT,\r\n  DEFAULT_QUOTE\r\n} from \"../definitions/generalDefinitions\";\r\n\r\nimport {\r\n  SEX,\r\n  SMOKING,\r\n  MEMBER,\r\n  DEFAULT_DIVIDEND_TAX_RATE,\r\n  DEFAULT_AVG_TAX_RATE,\r\n  DEFAULT_CLIENT_AGE,\r\n  DEFAULT_SPOUSE_AGE,\r\n  DEFAULT_SPOUSE_SALARY,\r\n  DEFAULT_CLIENT_SALARY,\r\n  DEFAULT_SPOUSE_CPP,\r\n  DEFAULT_CLIENT_CPP,\r\n  DEFAULT_SPOUSE_RETIREMENT,\r\n  DEFAULT_CLIENT_RETIREMENT,\r\n  DEFAULT_PROVINCE,\r\n  DEFAULT_INFLATION,\r\n  DEFAULT_INVESTMENT,\r\n  DEFAULT_NEED_PERCENT1,\r\n  DEFAULT_NEED_PERCENT2,\r\n  QUOTE_CLIENT,\r\n  QUOTE_SPOUSE,\r\n  DEFAULT_RRIF_AGE,\r\n  appSiteAPI,\r\n  DISPLAY_RETIREMENT,\r\n  DISPLAY_LIFEEXP,\r\n  DISPLAY_ENDAGE,\r\n  DISPLAY_LIFEEXP_PLUS_3,\r\n  ORPHAN_AGE_QC,\r\n  ORPHAN_AGE_NON_QC,\r\n  MAX_ORPHAN_DUR_QC,\r\n  MAX_ORPHAN_DUR_NON_QC,\r\n  UNIVERSITY_START_AGE,\r\n  UNIVERSITY_END_AGE,\r\n  DISPLAY_PRESENTATION,\r\n} from \"../definitions/generalDefinitions\";\r\nimport { versionDetails, getDefaultImages } from \"../utils/helper\";\r\nimport {loadDefaultCase} from \"../data/dataExchange\";\r\n\r\n\r\nexport function createDefaultAsset(id) {\r\n  let asset = {\r\n    id: id,\r\n    assetTypeKey: ASSETS.PERSONAL_RESIDENCE.Key,\r\n    description: \"\",\r\n    ownerKey: appletMode===\"EP\" ?ASSET_OWNERSHIP_ACTION.CLIENT_ROLLOVER.Key:ASSET_OWNERSHIP_ACTION.JOINT.Key,\r\n    currValue: 0,\r\n    assetTaxTypeKey: ASSET_TAX.NON_TAXABLE.Key,\r\n    growth: 0,\r\n    DisposeYr: 99,\r\n    DisposeDur: 1,\r\n    ACB: 0,\r\n    smallBusinessCapGainExemption: 0,\r\n    contributionAmt: 0,\r\n    contributionStartYr: 0,\r\n    contributionDur: 0,\r\n    withdrawalAmt: 0,\r\n    withdrawalStartYr: 1,\r\n    withdrawalDur: 0,\r\n    incomeRate: 0,\r\n    RRIFStartAge: DEFAULT_RRIF_AGE,\r\n    projection: null,\r\n  };\r\n  return asset;\r\n}\r\n\r\nexport function copyFromAnotherAsset(anotherAsset) {\r\n  return JSON.parse(JSON.stringify(anotherAsset));\r\n}\r\n\r\nexport function copyFromAnotherObject(sourceObject) {\r\n  return JSON.parse(JSON.stringify(sourceObject));\r\n}\r\nexport function createDefaultClient(id) {\r\n  const defaultClient1 = {\r\n    id: 1,\r\n    Age: DEFAULT_CLIENT_AGE,\r\n    sexKey: SEX.MALE.Key, //[\"en\"].Values[0],\r\n    smokerKey: SMOKING.NON_SMOKER.Key,\r\n    Income: DEFAULT_CLIENT_SALARY,\r\n    avgTaxRate: DEFAULT_AVG_TAX_RATE,\r\n    //  member: MEMBER.CLIENT.value[\"en\"],\r\n    memberKey: MEMBER.CLIENT.Key,\r\n    retirementAge: DEFAULT_CLIENT_RETIREMENT,\r\n    Eligibility: DEFAULT_CLIENT_CPP,\r\n    Name: \"\",\r\n  };\r\n  const defaultClient2 = {\r\n    id: 2,\r\n    Age: DEFAULT_SPOUSE_AGE,\r\n    //Sex: SEX[\"en\"].Values[1],\r\n    sexKey: SEX.FEMALE.Key, //[\"en\"].Values[0],\r\n    smokerKey: SMOKING.NON_SMOKER.Key,\r\n    Income: DEFAULT_SPOUSE_SALARY,\r\n    avgTaxRate: DEFAULT_AVG_TAX_RATE,\r\n    //member: MEMBER.SPOUSE.value[\"en\"],\r\n    memberKey: MEMBER.SPOUSE.Key,\r\n    retirementAge: DEFAULT_SPOUSE_RETIREMENT,\r\n    Eligibility: DEFAULT_SPOUSE_CPP,\r\n    Name: \"\",\r\n  };\r\n  const child = {\r\n    id: id, //this.state.dataInput.clientsNo,\r\n    Age: 1,\r\n    sexKey: SEX.MALE.Key,\r\n    smokerKey: SMOKING.NON_SMOKER.Key,\r\n    Income: 0,\r\n    avgTaxRate: 0.0,\r\n    memberKey: MEMBER.CHILD.Key,\r\n    retirementAge: 65,\r\n    Eligibility: 0,\r\n    Name: \"\",\r\n  };\r\n  if (id === 1) return defaultClient1;\r\n  else if (id === 2) return defaultClient2;\r\n  else return child;\r\n}\r\n\r\nexport function createDefaultSource(id) {\r\n  const defaultSource = {\r\n    id: id,\r\n    //Type: INCOMESOURCES.SURVIVORS_INCOME.value[\"en\"],\r\n    sourceTypeKey: INCOMESOURCES.SURVIVORS_INCOME.Key,\r\n    amount: DEFAULT_SPOUSE_SALARY,\r\n    startYear: 0,\r\n    duration: DEFAULT_SPOUSE_RETIREMENT - DEFAULT_SPOUSE_AGE,\r\n    ownerID: 2,\r\n    taxRate: DEFAULT_AVG_TAX_RATE,\r\n    growthRate: DEFAULT_INFLATION,\r\n  };\r\n  return defaultSource;\r\n}\r\n\r\nexport function createDefaultLiab(id) {\r\n  const defaultLiab = {\r\n    id: id,\r\n    //Type: LIABILITIES.LAST_EXPENSES.value[\"en\"],\r\n    liabTypeKey: LIABILITIES.PROBATE.Key,//.LAST_EXPENSES.Key,\r\n    ownerKey: OWNERSHIP.CLIENT.Key,\r\n    currValue: 0,\r\n    //growthDir: GROWTHDIR[\"en\"].Values[0], //increases\r\n    growthDirKey: GROWTHDIR.GROWS.Key, //increases\r\n    growth: 0,\r\n    repay: 0,\r\n    exposureDur: 99,\r\n    assetTaxLiabID: 0,\r\n    assetTaxLiabProj: [],\r\n  };\r\n  return defaultLiab;\r\n}\r\n\r\nexport function createDefaultNeed(id) {\r\n  const defaultNeed1 = {\r\n    id: 1,\r\n    needTypeKey: INCOMENEEDS.PERCET_OF_INCOME.Key,\r\n    Percent: DEFAULT_NEED_PERCENT1,\r\n    amount:\r\n      (DEFAULT_NEED_PERCENT1 *\r\n        (DEFAULT_SPOUSE_SALARY + DEFAULT_CLIENT_SALARY) *\r\n        (1 - DEFAULT_AVG_TAX_RATE / 100)) /\r\n      100,\r\n    startYear: 0,\r\n    duration: DEFAULT_SPOUSE_RETIREMENT - DEFAULT_SPOUSE_AGE,\r\n  };\r\n  const defaultNeed2 = {\r\n    id: id,\r\n    needTypeKey: INCOMENEEDS.PERCET_OF_INCOME.Key,\r\n    Percent: DEFAULT_NEED_PERCENT2,\r\n    amount:\r\n      (DEFAULT_NEED_PERCENT2 *\r\n        (DEFAULT_SPOUSE_SALARY + DEFAULT_CLIENT_SALARY) *\r\n        (1 - DEFAULT_AVG_TAX_RATE / 100)) /\r\n      100,\r\n    startYear: DEFAULT_SPOUSE_RETIREMENT - DEFAULT_SPOUSE_AGE,\r\n    duration: 100,\r\n  };\r\n  if (id === 1) return defaultNeed1;\r\n  else return defaultNeed2;\r\n}\r\n\r\nexport function createDefaultPres(id, tax) {\r\n  const images=getDefaultImages()\r\n  const defaultPres = {\r\n    id: id,\r\n    provinceKey: PROVINCE.BC.Key,\r\n    invRate: DEFAULT_INVESTMENT,\r\n    inflation: DEFAULT_INFLATION,\r\n    taxRate: tax,\r\n    designedFor: \"\",\r\n    designedBy: \"\",\r\n    valuationDate: new Date(),\r\n    presentationDate: new Date(),\r\n    notes: \"\",\r\n    version: versionDetails().version,\r\n    periodOption: APPLET_INA ? DISPLAY_RETIREMENT : DISPLAY_ENDAGE,\r\n    language: global.langFr? \"fr\" : \"en\",// \"en\",\r\n    resultsOption: DISPLAY_PRESENTATION,\r\n    adviserLogo: images.adviserLogo,// {image:null, left: 0,size: OUTPUT_WIDTH_PCT, allPages: false, top:true, showDetails:false},\r\n    appletImage:images.appletImage ,//{image:APPLET_INA? require(\"../images/INA.png\"):require(\"../images/estate.protection.applet.cover.graphic.png\"), left: 0,size: OUTPUT_WIDTH_PCT, allPages: false, top:true, showDetails:false},\r\n  };\r\n  return defaultPres;\r\n}\r\n\r\n\r\nexport function getDefaultData(){\r\n  let dataInput;\r\n \r\n  if(localStorage.getItem(DEFAULT_QUOTE)===null)\r\n  {\r\n    dataInput= getDefaultCase()\r\n\r\n    }\r\n    else\r\n{\r\n  try {\r\n    dataInput=loadDefaultCase()  \r\n  } catch (error) {\r\n    dataInput= getDefaultCase()\r\n  }  \r\n  \r\n}\r\nreturn dataInput;\r\n}\r\n\r\nfunction getDefaultCase()\r\n{\r\n  let dataInput;\r\n  let defaultClients = [];\r\ndefaultClients.push(createDefaultClient(1));\r\nif (APPLET_INA) defaultClients.push(createDefaultClient(2));\r\nlet defaultAssets = [];\r\ndefaultAssets.push(createDefaultAsset(1));\r\nlet defaultSources =[]\r\nif (APPLET_INA) defaultSources.push(createDefaultSource(1));\r\n \r\nconst defaultLiab = [createDefaultLiab(1)];\r\nlet defaultNeeds = [];\r\ndefaultNeeds.push(createDefaultNeed(1));\r\ndefaultNeeds.push(createDefaultNeed(2));\r\nconst defaultPresentation = [createDefaultPres(1, 0)];\r\n\r\n// build state with defaults\r\ndataInput={      \r\n    Clients: defaultClients, //, clientsNo: defaultClients.length },\r\n    Assets: defaultAssets, //, assetsNo: defaultAsset.length },\r\n    Liabilitys: defaultLiab, //, liabilitysNo: 1 },\r\n    Sources: defaultSources, //, sourcesNo: 1 },\r\n    Needs: defaultNeeds, //,  needsNo: 2},\r\n    Presentations: defaultPresentation, //, presentationsNo: 1 },\r\n  }\r\n  return dataInput;\r\n}","import { readMCCData } from \"../data/dataExchangeMCC\";\r\nimport {\r\n  PROVINCE,\r\n  ASSET_API_OUTPUT_Year,\r\n  ASSET_API_OUTPUT_Age,\r\n  ASSET_API_OUTPUT_FMV,\r\n  ASSET_API_OUTPUT_EOYBalance,\r\n  ASSET_API_OUTPUT_ACB,\r\n  ASSET_API_OUTPUT_UCC,\r\n  ASSET_API_OUTPUT_CCA,\r\n  ASSET_API_OUTPUT_CapitalGain,\r\n  ASSET_API_OUTPUT_TaxabaleGain,\r\n  ASSET_API_OUTPUT_Recapture,\r\n  ASSET_API_OUTPUT_TaxPayable,\r\n  ASSET_API_OUTPUT_CapGainsExemption,\r\n  ASSET_API_OUTPUT_Deposits,\r\n  ASSET_API_OUTPUT_Withdrawals,\r\n  ASSET_API_OUTPUT_RRIF,\r\n  ASSET_API_OUTPUT_TaxPayableonIncome,\r\n  ASSET_API_OUTPUT_DispositionAmount,\r\n  appSiteAPI,\r\n  ASSETS,\r\n  ASSET_TAX,\r\n} from \"../definitions/generalDefinitions\";\r\n\r\nexport function fetchTimerAPICheck() {\r\n  let fails = parseInt(localStorage.getItem(\"INAAPIFails\"));\r\n  fetch(appSiteAPI + \"/api/MCC_Carriers?id=1\")\r\n    .then((response) => {\r\n      //console.log(response);\r\n      response.json();\r\n    })\r\n    .then((data) => console.log(\"timer API check\"))\r\n    .catch((error) => {\r\n      if (!fails) fails = 0;\r\n      fails++;\r\n      localStorage.setItem(\"INAAPIFails\", parseInt(fails));\r\n      //console.log(error);\r\n    });\r\n\r\n  return fails;\r\n}\r\n\r\nexport function fetchAssetProjection(dataNA, assetID) {\r\n  return Promise.all([fetchAP(dataNA, assetID)]);\r\n}\r\n\r\nfunction fetchAP(dataNA, assetID) {\r\n  let url = appSiteAPI + \"/api/NA_AssetProjection/\";\r\n  let dataAsset = {};\r\n\r\n  if (assetID === undefined) assetID = 0;\r\n  dataAsset.lives = dataNA.lives;\r\n  dataAsset.asset = dataNA.assets[assetID - 1];\r\n  dataAsset.projectionSettings = dataNA.projectionSettings;\r\n  dataAsset.ratesPack = dataNA.ratesPack;\r\n  /* \r\n dataAsset.asset.incomeRate= 0.0;\r\n            dataAsset.asset.contributionAmt= 1000;\r\n            dataAsset.asset.contributionStartYr= 1;\r\n            dataAsset.asset.contributionDur= 20;  */\r\n\r\n   return fetch(url, {\r\n    method: \"POST\",\r\n    //\t\t\tredirect: 'follow',\r\n    //\t\t\tcredentials: 'same-origin',\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(dataAsset),\r\n  })\r\n    .then((response) => {\r\n      if (response.ok === false) {\r\n        throw Error(response.statusText);\r\n      }\r\n      return response;\r\n    })\r\n    .then((response) => response.json())\r\n    .then((data) => {\r\n      return data;\r\n    })\r\n    .catch((error) => {\r\n      console.log(\"handleAssetProjection failed: \" + error);\r\n      // this.setState({failedAPI: true});\r\n    });\r\n}\r\n\r\nexport function fetchMCCData(dataNA, insNeed) {\r\n  return Promise.all([fetchMCC(dataNA, insNeed)]);\r\n}\r\n\r\nfunction fetchMCC(dataNA, insNeed) {\r\n  // let dataMCC=readMCCData(dataNA, 48,insNeed);\r\n\r\n  let url = appSiteAPI + \"/api/MCC_OutputArrays/\";\r\n  // console.log(url, dataNA);\r\n\r\n  return fetch(url, {\r\n    method: \"POST\",\r\n    //\t\t\tredirect: 'follow',\r\n    //\t\t\tcredentials: 'same-origin',\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(dataNA),\r\n  })\r\n    .then((response) => {\r\n      if (response.ok === false) {\r\n        throw Error(response.statusText);\r\n      }\r\n      return response;\r\n    })\r\n    .then((response) => response.json())\r\n    .then((data) => {\r\n      // console.log(data);\r\n      return data;\r\n    })\r\n    .catch((error) => {\r\n      console.log(\"handleFetchMCCData failed: \" + error);\r\n      // this.setState({failedAPI: true});\r\n    });\r\n}\r\n\r\n\r\n//async function fetchTaxRate1(appSiteAPI, type, province) {\r\nexport async function getTaxRate(type, province) {\r\n  try {\r\n    let taxRate = await fetch(\r\n      appSiteAPI + \"/api/RATES?type=\" + type + \"&province=\" + province\r\n    );\r\n    let data = await taxRate.json();\r\n    // console.log(data)\r\n\r\n    return (Math.round(parseFloat(data) * 10000) / 10000).toFixed(4);\r\n  } catch (error) {\r\n    console.log(\"error, rates API failed\", error);\r\n  }\r\n}\r\n\r\nexport async function fetchGovBenefits(dataNA, provincekey) {\r\n  try {\r\n    if (provincekey !== undefined) {\r\n      dataNA.projectionSettings.province = provincekey;\r\n      dataNA.lives[1].isQC = provincekey === \"QC\" ? true : false;\r\n    }\r\n    let url = appSiteAPI + \"/api/NA_GovBenefits/\";\r\n    let govBenefits = await fetch(url, {\r\n      method: \"POST\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(dataNA),\r\n    });\r\n    let data = await govBenefits.json();\r\n    // console.log(data)\r\n\r\n    return {\r\n      cpp: data[0].Values[0],\r\n      cppDB: Math.round(data[1].Values[0]),\r\n      orphan: Math.round(data[2].Values[0]),\r\n    };\r\n  } catch (error) {\r\n    console.log(\"error, InsuranceNeedsData API failed\", error);\r\n  }\r\n}\r\n\r\nexport async function fetchInsuranceNeedsData(dataNA, provincekey) {\r\n  try {\r\n    if (provincekey !== undefined) {\r\n      dataNA.projectionSettings.province = provincekey;\r\n      dataNA.lives[1].isQC = provincekey === \"QC\" ? true : false;\r\n    }\r\n    let url = appSiteAPI + \"/api/NA_OutputAll/\";\r\n    let insuranceNeedsData = await fetch(url, {\r\n      method: \"POST\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(dataNA),\r\n    });\r\n    let data = await insuranceNeedsData.json();\r\n    console.log(dataNA, data)\r\n\r\n    return {\r\n      ages: data[1],\r\n      govCF: data[3],\r\n      personalCF: data[4],\r\n      needs: data[5],\r\n      shortfall: data[6],\r\n      cpp: data[7].Values[0],\r\n      cppDB: Math.round(data[8].Values[0]),\r\n      orphan: Math.round(data[9].Values[0]),\r\n      lifeExp: Math.round(data[12].Values[0]),\r\n      lifeExpClient: Math.round(data[13].Values[0]),\r\n      lifeExpJLTD: Math.round(data[14].Values[0]),\r\n      provinceMargTax: data[15].Values[0],\r\n      dataTaxLiability: data[16],\r\n      encryptedInput: data[17].Values[0],\r\n      probate: data[18],\r\n    };\r\n  } catch (error) {\r\n    console.log(\"error, InsuranceNeedsData API failed\", error);\r\n  }\r\n}\r\n\r\nexport async function handleFetchInsuranceNeeds(dataNA, dataP) {\r\n  try {\r\n    console.log(\"Data sent to POST:\");\r\n    // console.log(dataNA);\r\n\r\n    let url = appSiteAPI + \"/api/NA_InsuranceNeeds/\";\r\n    let insuranceNeeds = await fetch(url, {\r\n      method: \"POST\",\r\n      //\t\t\tredirect: 'follow',\r\n      //\t\t\tcredentials: 'same-origin',\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(dataNA),\r\n    });\r\n\r\n    let data = await insuranceNeeds.json();\r\n   \r\n    return data;\r\n  } catch (error) {\r\n    console.log(\"handleFetchInsuranceNeeds failed: \", error);\r\n  }\r\n}\r\n\r\n/* export async function fetchTaxRate(appSiteAPI, type, province) {\r\n  await fetch(\r\n    appSiteAPI +\r\n      \"/api/RATES?type=\" +\r\n      type +\r\n      \"&province=\" +\r\n      province\r\n  )\r\n    .then(response => response.json())\r\n    .then(data => {\r\n      console.log(data);\r\n      return data;\r\n    })\r\n    .catch(error => {\r\n      console.log(\"error, rates API failed\", error);\r\n    });\r\n}\r\n\r\n */\r\n\r\n// BEGIN TEMPALTE\r\n// THIS IS THE WAY TO MAKE SURE DATA HAS COME BACK FROM API\r\n// IN THE CALLING MODULE\r\n/* updateClientTaxLiability = async () => {\r\n    let dataNA = this.props.getAssetProjection();\r\n    let appSiteAPI = \"http://localhost:8082\";\r\n    let data = await fetchAssetProjection2(appSiteAPI, dataNA, this.props.id);\r\n    console.log(data);\r\n    if (data !== undefined) {\r\n      console.log(data[ASSET_API_OUTPUT_TaxPayable].numericValues[0]);\r\n\r\n      return data[ASSET_API_OUTPUT_TaxPayable].numericValues;\r\n    }\r\n  }; */\r\n\r\n// USE componentDidUpdate IF NEED TO UPDATE SOMETHING BASED ON THE LATEST VALUE OF ANOTHER AFTER setState or changed props\r\n// componentDidUpdate= async (prevProps, prevState) => {\r\n\r\n// FETCH\r\nexport async function fetchAssetProjection2(dataNA, assetID) {\r\n  try {\r\n    let url = appSiteAPI + \"/api/NA_AssetProjection/\";\r\n    let dataAsset = {};\r\n\r\n    if (assetID === undefined) assetID = 0;\r\n    dataAsset.lives = dataNA.lives;\r\n    dataAsset.asset = dataNA.assets[assetID - 1];\r\n    dataAsset.projectionSettings = dataNA.projectionSettings;\r\n    dataAsset.ratesPack = dataNA.ratesPack;\r\n    //   console.log(dataAsset);\r\n\r\n    let dataProj = await fetch(url, {\r\n      method: \"POST\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(dataAsset),\r\n    });\r\n\r\n    let data = await dataProj.json();\r\n    //      console.log(data);\r\n    return data;\r\n  } catch (error) {\r\n    console.log(\"error, Asset proj API failed\", error);\r\n  }\r\n}\r\n// END TEMPALTE\r\n\r\nasync function asyncAPICall(dataNA, assetID) {\r\n  let data = await fetchAssetProjection2(dataNA, assetID);\r\n  // console.log(data);\r\n  if (data !== undefined) {\r\n    //   console.log(data);\r\n\r\n    return data; //[ASSET_API_OUTPUT_TaxPayable].numericValues;\r\n  }\r\n}\r\n\r\n/* async function fetchAssetProjectionAPI2 (appSiteAPI,dataNA, assetID){\r\n  let data = await asyncAPICall(appSiteAPI, dataNA, assetID);\r\n\r\n  return data\r\n}\r\n */\r\nexport async function fetchAssetProjectionAPI(dataNA, assetID) {\r\n   let dataProjection = {\r\n    dataColTitles: [],\r\n    dataValues: [],\r\n  };\r\n  // console.log(appSiteAPI,dataNA, assetID);\r\n\r\n  //let data =await fetchAssetProjectionAPI2(appSiteAPI, dataNA, assetID);\r\n  let data = await asyncAPICall(dataNA, assetID);\r\n\r\n  return data;\r\n\r\n}\r\n\r\nexport async function fetchAssetFMVandTaxLiab(dataNA, assetID) {\r\n  let dataProjection = {\r\n    FMV: [],\r\n    TaxLiab: [],\r\n  };\r\n  let data = await asyncAPICall(dataNA, assetID);\r\n  if (data[0] !== undefined) {\r\n    dataProjection.FMV = data[ASSET_API_OUTPUT_FMV].numericValues;\r\n    dataProjection.TaxLiab = data[ASSET_API_OUTPUT_TaxPayable].numericValues;\r\n  }\r\n  //console.log(dataProjection);\r\n  return dataProjection;\r\n}\r\n\r\nexport async function fetchAssetAllGridColumns(dataNA, assetID) {\r\n  let data = await asyncAPICall(dataNA, assetID);\r\n  //console.log(data);\r\n  return data;\r\n}\r\n\r\nexport async function handleFetchInsuranceNeedsNew(dataNA, dataInput) {\r\n  try {\r\n    let url = appSiteAPI + \"/api/NA_InsuranceNeeds/\";\r\n\r\n    let data = await fetch(url, {\r\n      method: \"POST\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(dataNA),\r\n    });\r\n\r\n    let dataINA = await data.json();\r\n    // console.log(data)\r\n\r\n    let dataDetails = await fetchInsuranceNeedsData(\r\n      dataNA,\r\n      dataInput.Presentations[0].provincekey\r\n    );\r\n\r\n    if (dataINA !== undefined && dataDetails !== undefined) {\r\n       console.log(\"POST: NA_OutputAll success\");\r\n       return {\r\n        dataInsuranceNeeds: dataINA,\r\n        dataNAAges: dataDetails.ages,\r\n        dataCashFlowGov: dataDetails.govCF,\r\n        dataCashFlowPersonal: dataDetails.personalCF,\r\n        dataCashFlowNeeds: dataDetails.needs,\r\n        dataShortfall: dataDetails.shortfall,\r\n        cpp: dataDetails.cpp,\r\n        cppDB: dataDetails.cppDB,\r\n        orphan: dataDetails.orphan,\r\n        probate: dataDetails.probate,\r\n        lifeExp: dataDetails.lifeExp,\r\n        lifeExpClient: dataDetails.lifeExpClient,\r\n        lifeExpJLTD: dataDetails.lifeExpJLTD,\r\n        provinceMargTax: dataDetails.provinceMargTax,\r\n        dataTaxLiability: dataDetails.dataTaxLiability,\r\n        encryptedInput: dataDetails.encryptedInput,\r\n      };\r\n    }\r\n  } catch (error) {\r\n    console.log(\"error, rates API failed\", error);\r\n  }\r\n}\r\n\r\nexport async function handleFetchQueryStringSave(dataNA) {\r\n  //console.log(dataNA);\r\n\r\n  let url = appSiteAPI + \"/api/NA_QS/\";\r\n\r\n  fetch(url, {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(dataNA),\r\n  })\r\n    .then((response) => {\r\n      if (response.ok === false) {\r\n        throw Error(response.statusText);\r\n      }\r\n      return response;\r\n    })\r\n    .then((response) => response.json())\r\n    .then((data) => {\r\n      if (data !== undefined) {\r\n        //console.log(data);\r\n\r\n        return data;\r\n      }\r\n    })\r\n    .catch((error) => {\r\n      console.log(\"handleFetchQueryString failed: \" + error);\r\n      // this.setState({failedAPI: true});\r\n    });\r\n}\r\n\r\nexport async function handleFetchLoadFromQueryString(contentsFile) {\r\n\r\n  fetch(appSiteAPI + \"/api/NA_QS?QS=\" + contentsFile)\r\n    .then((response) => {\r\n      if (response.ok === false) {\r\n        throw Error(response.statusText);\r\n      }\r\n      return response;\r\n    })\r\n    .then((response) => response.json())\r\n    .then(async (data) => {\r\n    \r\n      return data;\r\n    })\r\n    .catch((error) => {\r\n      console.log(\"handleFetchLoadFromQueryString failed: \" + error);\r\n    });\r\n}\r\n\r\nexport async function handleFetchINADataFromQueryString(savedINA) {\r\n  try {\r\n    let url = appSiteAPI + \"/api/NA_QS?QS=\" + savedINA;\r\n    \r\n    try {\r\n      let savedData = await fetch(url);\r\n      let data = await savedData.json();\r\n      \r\n      return data;\r\n    } catch (error) {\r\n      console.log(\"error, handleFetchINADataFromQueryString failed\", error);\r\n    }\r\n  } catch (error) {\r\n    console.log(\"error, handleFetchINADataFromQueryString\", error);\r\n  }\r\n}\r\n\r\n\r\nexport async function handleFetchQueryString2(dataNA){\r\n\r\n  //const lang=this.state.dataInput.Presentations[0].language\r\n  /* console.log(\r\n    this.state.dataOutput.dataInsuranceNeeds[\r\n      this.state.dataInput.Presentations[0].periodOption\r\n    ].Value\r\n  ); */\r\n  /* const insuranceNeed = this.state.dataOutput.dataInsuranceNeeds[\r\n    this.state.dataInput.Presentations[0].periodOption\r\n  ].Value;\r\n  let dataNA = setUIDataToAPI(this.state.dataInput, insuranceNeed); */\r\n  //console.log(dataNA);\r\n\r\n  let url = appSiteAPI + \"/api/NA_QS/\";\r\n\r\n  //this.setState({ ...this.state });\r\n  await fetch(url, {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(dataNA),\r\n  })\r\n    .then((response) => {\r\n      if (response.ok === false) {\r\n        throw Error(response.statusText);\r\n      }\r\n      return response;\r\n    })\r\n    .then((response) => response.json())\r\n    .then((data) => {\r\n      if (data !== undefined) {\r\n        return data;\r\n\r\n        /* this.dataQS = data;\r\n        if (mode === MODE_SAVE) this.setState({ showMsg: true });\r\n        else if (mode === MODE_EMAIL){\r\n       let url=\"mailto: ?subject= \" +  (appletMode===\"INA\"?TITLES[lang].appletINA:TITLES[lang].appletEP) + \" &body= \" + (EMAIL[lang].body+ \".%0D%0A\"  + appSiteParent + \"?applet=EP\\&QS=\" + this.dataQS);\r\n       /* const s1 =\"?applet=EP\"\r\n       const s2=\"&QS=\" + this.dataQS\r\n        url=\"mailto: ?subject= Needs Analysis Quote &body=The following link takes you to the landing page of Toolkit Direct. Once there, click on Insurance Needs Analysis to open up the attached quote.%0D%0A\" +\r\n        + appSiteParent + [\"applet=EP\",\"QS=\" + this.dataQS].join('&')\r\n*/\r\n\r\n      //  const ft=appSiteParent + \"/?\" + [\"applet=\"+appletMode , \"QS=\"+this.dataQS].join('&')\r\n        /* url=\"mailto: ?subject= Needs Analysis Quote &body= The following link takes you to the landing page of Toolkit Direct. Once there, click on Insurance Needs Analysis to open up the attached quote.%0D%0A\" +\r\n        encodeURIComponent(ft) */\r\n       // url=\"mailto: ?subject= \" +  (appletMode===\"INA\"?TITLES[lang].appletINA:TITLES[lang].appletEP) + \" &body= \" + EMAIL[lang].body+ \".%0D%0A\"  + encodeURIComponent(ft)\r\n\r\n        //return url;\r\n       // console.log(url)\r\n        //  window.location.href = url; */\r\n        }\r\n      }\r\n    )\r\n    .catch((error) => {\r\n      console.log(\"handleFetchQueryString failed: \" + error);\r\n      // this.setState({failedAPI: true});\r\n      return \"\";\r\n    });\r\n};\r\n\r\nexport async function handleFetchQueryString(dataNA){\r\n\r\n  try {\r\n    const url = appSiteAPI + \"/api/NA_QS/\";\r\n  let fetchData = await fetch(url, {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(dataNA),\r\n  })\r\n  let data = await fetchData.json();\r\n  if (data !== undefined)\r\n        return data;\r\n } catch (error) {\r\n    console.log(\"handleFetchQueryString\", error);\r\n  }\r\n}\r\n\r\nexport async function handleFetchPDF(){\r\n\r\n  try {\r\n    const dataNA={\r\n      Html:\"<span>goh</span>\",\r\n      Css:\".canvas-containerWeb {Height: 20vh;}\"\r\n      \r\n      }\r\n\r\n      console.log( JSON.stringify(dataNA))\r\n    const url = appSiteAPI + \"/api/TKD_PDFGenerator/\";\r\n  let fetchData = await fetch(url, {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(dataNA),\r\n  })\r\n  let data = await fetchData.json();\r\n  if (data !== undefined){\r\n        console.log(data)\r\n        return data;}\r\n } catch (error) {\r\n    console.log(\"handleFetchQueryString\", error);\r\n  }\r\n}\r\n","import { name, version } from \"../../package.json\";\r\nimport {\r\n  GROWTHDIR,\r\n  MONTHS,\r\n  ASSETS,\r\n  ASSET_OWNERSHIP_ACTION,\r\n  ASSET_TAX,\r\n  INCOMESOURCES,\r\n  OWNERSHIP,\r\n  SEX,\r\n  SMOKING,\r\n  MEMBER,\r\n  LIABILITIES,\r\n  INCOMENEEDS,\r\n  PROVINCE,\r\n  QUOTE_SPOUSE,\r\n  QUOTE_CLIENT,\r\n  DEFAULT_QUOTE,\r\n  OUTPUT_WIDTH_PCT,\r\n  APPLET_EP,\r\n  MAX_ORPHAN_DUR_QC,\r\n  MAX_ORPHAN_DUR_NON_QC,\r\n} from \"../definitions/generalDefinitions\";\r\nimport {\r\n  cleanFormat,\r\n  formatMoney,\r\n  getListItemNameFromKey,\r\n  isSingleFamily,\r\n  getDefaultImages,\r\n  getListItemKeyFromName,\r\n} from \"../utils/helper\";\r\n\r\nimport { versionDetails, getAfterTaxTotalIncome } from \"../utils/helper\";\r\nimport { appletMode } from \"../../package.json\";\r\nimport { element } from \"prop-types\";\r\n\r\nexport function setUIDataToAPI(dataInput, outputInsuranceNeed) {\r\n \r\n  let age = dataInput.Clients[0].Age;\r\n  const taxRate =\r\n    dataInput.length > 1\r\n      ? dataInput.Clients[QUOTE_SPOUSE].avgTaxRate / 100\r\n      : dataInput.Clients[QUOTE_CLIENT].avgTaxRate / 100;\r\n  if (dataInput.length > 1 && dataInput.Clients[QUOTE_SPOUSE].Age < age)\r\n    age = dataInput.Clients[QUOTE_SPOUSE].Age;\r\n  let dataLives = setLives(dataInput);\r\n  let dataAssets = setAssets(dataInput);\r\n  let dataLiabs = setLiabs(dataInput);\r\n  let dataSources = setSources(dataInput, taxRate);\r\n  let dataEstateContings = setEstateContings();\r\n  let dataIncomeNeeds = setIncomeNeeds(dataInput);\r\n  let dataRates = setRates(dataInput);\r\n  let dataProjSettings = setProjSettings(age, dataInput, parseFloat(cleanFormat(outputInsuranceNeed, dataInput.Presentations[0].language)));\r\n  let dataNA = {\r\n    lives: dataLives,\r\n    assets: dataAssets,\r\n    liabilities: dataLiabs,\r\n    personalIncomeSources: dataSources,\r\n    estateContingiencies: dataEstateContings,\r\n    incomeNeeds: dataIncomeNeeds,\r\n    ratesPack: dataRates,\r\n    projectionSettings: dataProjSettings,\r\n    //liabilities: null,\r\n    //personalIncomeSources: null,\r\n    //estateContingiencies:  null,\r\n    //incomeNeeds:  null\r\n    //ratesPack:  null,\r\n    //projectionSettings:  null\r\n  };\r\n  return dataNA;\r\n}\r\n\r\nfunction setLives(dataInput) {\r\n  let dataE = [];\r\n  let i;\r\n  // for calc purposes\r\n  for (i = 0; i < dataInput.Clients.length; i++) {\r\n    dataE.push({\r\n      Age: dataInput.Clients[i].Age,\r\n      Sex: dataInput.Clients[i].sexKey, // === SEX.FEMALE.Key ? SEX.FEMALE : SEX.MALE,\r\n      Smk:\r\n        dataInput.Clients[i].smokerKey === SMOKING.SMOKER.Key\r\n          ? \"S_STD\"\r\n          : \"NS_STD\", // 2 and 5 : this MCC stuff with 5 leveles elite ...\r\n      Rating: 100,\r\n      //\t\tmember: (i===1 && dataInput.Clients[i].memberKey===MEMBER.DEPENDENT_ADULT.Key)? MEMBER.SPOUSE.Key: //MEMBER[\"en\"].Values[MEMBER[lang].Values.indexOf(dataInput.Clients[i].member)],\r\n      //\t\t\t\t\tdataInput.Clients[i].memberKey,//Object.values(MEMBER).filter(obj => obj.Key=== dataInput.Clients[i].memberKey)[0],//.value.en,\r\n      member: dataInput.Clients[i].memberKey,\r\n      salary: dataInput.Clients[i].Income,\r\n      CPPeligibility: dataInput.Clients[i].Eligibility / 100,\r\n      retirementAge: dataInput.Clients[i].retirementAge,\r\n      avgTaxRate: dataInput.Clients[i].avgTaxRate / 100,\r\n      isQC: dataInput.Presentations[0].provinceKey === \"QC\" ? true : false,\r\n      Name: dataInput.Clients[i].Name,\r\n    });\r\n  }\r\n  return dataE;\r\n}\r\n\r\nfunction setTaxAPIMethod(TaxKey, assetKey) {\r\n  // based on API enum\r\n  /* public enum taxTreatments\r\n        {\r\n            NonTaxable=0,\r\n            CapitalGainIncome, 1\r\n            CapitalGainAnnual, 2\r\n            Registered, 3\r\n            FullyTaxable, 4\r\n            CapitalGainDividend,  5\r\n            Dividend, 6\r\n            RRIF, 7\r\n            LifeInsurance, 8\r\n            Cash, 9\r\n            InterestIncome, 10\r\n            CapitalGainQSmallBusiness, 11\r\n        } */\r\n  // from\r\n  /* 'Non-taxable',\t\r\n\t\t\t\"Capital Gains Deferred\",\r\n\t\t\t\"Capital Gains Annual\",\r\n\t\t\t'Registered',\t\r\n\t\t\t'Fully Taxable',\t\r\n\t\t\t'Dividend'\t */\r\n  //console.log(Tax,Type,)\r\n\r\n  let taxMethodIndex = 0;\r\n\r\n  if (TaxKey === ASSET_TAX.NON_TAXABLE.Key) taxMethodIndex = 0;\r\n  //NonTaxable\r\n  else if (TaxKey === ASSET_TAX.CAPITAL_GAINS_DEFERRED.Key) {\r\n    if (assetKey === ASSETS.SMALL_BUSINESS_SHARES.Key)\r\n      //value[lang])\r\n      taxMethodIndex = 11;\r\n    // CapitalGainQSmallBusiness, 11\r\n    else taxMethodIndex = 1; // CapitalGainIncome, 1\r\n  } else if (TaxKey === ASSET_TAX.CAPITAL_GAINS_ANNUAL.Key) taxMethodIndex = 2;\r\n  //  CapitalGainAnnual\r\n  else if (TaxKey === ASSET_TAX.FULLY_TAXABLE.Key) {\r\n    if (assetKey === ASSETS.INTEREST_BEARING.Key)\r\n      //value[lang])\r\n      taxMethodIndex = 10;\r\n    //InterestIncome, 10\r\n    else taxMethodIndex = 4; // FullyTaxable, 4\r\n  } else if (TaxKey === ASSET_TAX.REGISTERED.Key) taxMethodIndex = 3;\r\n  //Registered, 3\r\n  else if (TaxKey === ASSET_TAX.DIVIDEND.Key) taxMethodIndex = 6; //  Dividend, 6\r\n\r\n  // console.log(taxMethodIndex)\r\n  return taxMethodIndex;\r\n}\r\n\r\nfunction setAssets(dataInput) {\r\n  let dataE = [];\r\n  let i;\r\n  for (i = 0; i < dataInput.Assets.length; i++) {\r\n    const asset = dataInput.Assets[i];\r\n    const assetDesc = asset.description;\r\n    const assetTypeKey =\r\n      asset.assetTypeKey; /*\r\n      dataInput,\r\n      asset.assetTypeKey,\r\n      asset.assetTaxTypeKey\r\n    ); */ // don't add survivor's insurance do in API // const nonClientInsurance=!(asset.assetTypeKey===ASSETS.LIFE_INSURANCE.Key && (asset.ownerKey===ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key || element.ownerKey===ASSET_OWNERSHIP_ACTION.CLIENT_ROLLOVER.Key))\r\n    /*    console.log(asset) */ dataE.push({\r\n      name: Object.values(ASSETS).filter((obj) => obj.Key === assetTypeKey)[0]\r\n        .value.en,\r\n      desc: assetDesc,\r\n      ID: Object.values(ASSETS).filter((obj) => obj.Key === assetTypeKey)[0].ID,\r\n      //taxMethod: setTaxAPIMethod( asset.assetTaxTypeKey,asset.assetTypeKey),\r\n      taxMethod: asset.assetTaxTypeKey,\r\n      //Object.values(ASSET_TAX).filter(obj => obj.Key=== asset.assetTaxTypeKey)[0].value.en,\r\n      owner: Object.values(ASSET_OWNERSHIP_ACTION).filter(\r\n        (obj) => obj.Key === asset.ownerKey\r\n      )[0].ID, // enums in API is same 0-4\r\n      ACB: asset.ACB,\r\n      smallBusinessCapGainExemption: asset.smallBusinessCapGainExemption,\r\n      dispositionYr:\r\n        asset.assetTaxTypeKey === ASSET_TAX.REGISTERED.Key &&\r\n        asset.ownerKey !== ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key\r\n          ? 99\r\n          : asset.DisposeYr,\r\n      dispositionDur: asset.DisposeDur === 0 ? 1 : asset.DisposeDur,\r\n      dispositionYrUlt: 100,\r\n      currValue: asset.currValue,\r\n      annualGrowth: asset.growth / 100,\r\n      incomeRate: asset.incomeRate / 100,\r\n      contributionAmt: asset.contributionAmt,\r\n      contributionStartYr: asset.contributionStartYr,\r\n      contributionDur: asset.contributionDur,\r\n      withdrawalAmt: asset.withdrawalAmt,\r\n      withdrawalStartYr: asset.withdrawalStartYr,\r\n      withdrawalDur: asset.withdrawalDur,\r\n      RRIFStartAge: asset.RRIFStartAge,\r\n    });\r\n  }\r\n  return dataE;\r\n}\r\n\r\nfunction setLiabs(dataInput) {\r\n  let dataE = [];\r\n  let i;\r\n  for (i = 0; i < dataInput.Liabilitys.length; i++) {\r\n    const growth =\r\n      /*  GROWTHDIR[dataInput.Presentations[0].language].Values.indexOf(\r\n        dataInput.Liabilitys[i].growthDir\r\n      ) */\r\n\r\n      dataInput.Liabilitys[i].growthDirKey === GROWTHDIR.GROWS.Key\r\n        ? dataInput.Liabilitys[i].growth / 100\r\n        : -dataInput.Liabilitys[i].growth / 100;\r\n    const liabTypeKey = dataInput.Liabilitys[i].liabTypeKey;\r\n    dataE.push({\r\n      name: Object.values(LIABILITIES).filter(\r\n        (obj) => obj.Key === liabTypeKey\r\n      )[0].value.en,\r\n      ID: Object.values(LIABILITIES).filter((obj) => obj.Key === liabTypeKey)[0]\r\n        .ID,\r\n      owner: dataInput.Liabilitys[i].ownerKey, // OWNERSHIP[\"en\"].Values[OWNERSHIP[lang].Values.indexOf(dataInput.Liabilitys[i].Owner)],\r\n      currValue: dataInput.Liabilitys[i].currValue,\r\n      annualGrowth: growth,\r\n      exposureDur: dataInput.Liabilitys[i].exposureDur,\r\n      annualRepay: dataInput.Liabilitys[i].repay,\r\n    });\r\n  }\r\n  return dataE;\r\n}\r\n\r\nfunction setSources(dataInput, avgTaxRate) {\r\n  let dataE = [];\r\n  let i;\r\n  for (i = 0; i < dataInput.Sources.length; i++) {\r\n    // find source owner avgtaxrate\r\n    let avgTaxRate;\r\n    let salaryOwner = dataInput.Clients.filter((item) => {\r\n      return item.id === dataInput.Sources[i].ownerID;\r\n    });\r\n    if (salaryOwner !== undefined && salaryOwner.length > 0)\r\n      avgTaxRate = salaryOwner[0].avgTaxRate / 100;\r\n\r\n    const sourceTypeKey = dataInput.Sources[i].sourceTypeKey;\r\n    // gov is taken care of in API only needs elig %\r\n    //if (dataInput.Sources[i].Type !== INCOMESOURCES[lang].Values[1] && dataInput.Sources[i].Type !== INCOMESOURCES[lang].Values[2] && dataInput.Sources[i].Type !== INCOMESOURCES[lang].Values[3]) {\r\n    if (\r\n      !(\r\n        dataInput.Sources[i].sourceTypeKey ===\r\n          INCOMESOURCES.GOV_SURVIVORS_PENSION.Key ||\r\n        dataInput.Sources[i].sourceTypeKey ===\r\n          INCOMESOURCES.GOV_ORPHANS_BENEFIT.Key ||\r\n        dataInput.Sources[i].sourceTypeKey ===\r\n          INCOMESOURCES.GOV_DEATH_BENEFIT.Key\r\n      )\r\n    ) {\r\n      dataE.push({\r\n        ID: Object.values(INCOMESOURCES).filter(\r\n          (obj) => obj.Key === sourceTypeKey\r\n        )[0].ID,\r\n        name: Object.values(INCOMESOURCES).filter(\r\n          (obj) => obj.Key === sourceTypeKey\r\n        )[0].value.en,\r\n        amount: dataInput.Sources[i].amount,\r\n        startYear: dataInput.Sources[i].startYear,\r\n        duration: dataInput.Sources[i].duration,\r\n        annualGrowth: dataInput.Presentations[0].inflation / 100,\r\n        taxRate:\r\n          sourceTypeKey === INCOMESOURCES.DIVIDEND_INCOME.Key\r\n            ? dataInput.Sources[i].taxRate / 100\r\n            : avgTaxRate,\r\n        ownerID: dataInput.Sources[i].ownerID,\r\n      });\r\n    }\r\n  }\r\n  return dataE;\r\n}\r\n\r\nfunction setEstateContings() {\r\n  let dataE = [];\r\n  return dataE;\r\n}\r\n\r\nfunction setIncomeNeeds(dataInput) {\r\n  let dataItems = [];\r\n  let i;\r\n  for (i = 0; i < dataInput.Needs.length; i++) {\r\n    const needTypeKey = dataInput.Needs[i].needTypeKey;\r\n    dataItems.push({\r\n      ID: Object.values(INCOMENEEDS).filter((obj) => obj.Key === needTypeKey)[0]\r\n        .ID,\r\n      name: Object.values(INCOMENEEDS).filter(\r\n        (obj) => obj.Key === needTypeKey\r\n      )[0].value.en,\r\n\r\n      amount: dataInput.Needs[i].amount,\r\n      incomePercent: dataInput.Needs[i].Percent / 100,\r\n      startYear: dataInput.Needs[i].startYear,\r\n      duration: dataInput.Needs[i].duration,\r\n      annualGrowth: dataInput.Presentations[0].inflation / 100,\r\n    });\r\n  }\r\n  let dataE = {\r\n    incomePercentAfterDeath: 0.6,\r\n    incomeNeedItems: dataItems,\r\n    upToChildrenOutYrs: 0,\r\n    childrenOutToRetirementYrs: 0,\r\n    retirementToEndYrs: 0,\r\n  };\r\n\r\n  return dataE;\r\n}\r\n\r\nfunction setProjSettings(age, dataInput, outputInsuranceNeed) {\r\n  var tempDate = new Date();\r\n  var date =\r\n    tempDate.getFullYear() +\r\n    \"-\" +\r\n    (tempDate.getMonth() + 1) +\r\n    \"-\" +\r\n    tempDate.getDate();\r\n\r\n  let dataE = {\r\n    deathYear: 0,\r\n    deathOf: 0,\r\n    startYear: 1,\r\n    endYear: 100 - age + 1,\r\n    province: dataInput.Presentations[0].provinceKey,\r\n    language: dataInput.Presentations[0].language === \"en\" ? 0 : 1,\r\n    returnType: 4,\r\n    projectEndOption: dataInput.Presentations[0].periodOption, //toRetirement ? 0 : 1,\r\n    clientsName1: dataInput.Presentations[0].designedFor,\r\n    agentName: dataInput.Presentations[0].designedBy,\r\n    valuationDate: date,\r\n    notes: dataInput.Presentations[0].notes,\r\n    version: versionDetails().version,\r\n    caller: appletMode,\r\n    insuranceAmt: outputInsuranceNeed,\r\n    /*   imageLogo: dataInput.Presentations[0].adviserLogo.image,\r\n    imageLogoSize:dataInput.Presentations[0].adviserLogo.size,\r\n    imageLogoLeft:dataInput.Presentations[0].adviserLogo.left,\r\n    imageLogoAllPages: dataInput.Presentations[0].adviserLogo.allPages,\r\n    imageApplet: dataInput.Presentations[0].adviserLogo.imageApplet */\r\n  };\r\n  return dataE;\r\n}\r\n\r\nfunction setRates(dataInput) {\r\n  // console.log(dataInput.Presentations[0].taxRate / 100)\r\n  let dataE = {\r\n    investmentRate: dataInput.Presentations[0].invRate / 100,\r\n    taxRate: dataInput.Presentations[0].taxRate / 100,\r\n    dividendTaxRate: 0.33,\r\n    capitalGainsInclusion: 0.5,\r\n    inflationRate: dataInput.Presentations[0].inflation / 100,\r\n  };\r\n\r\n  return dataE;\r\n}\r\n\r\nexport function loadSavedDataToUI(savedJSon, dataInput) {\r\n  //console.log(savedJSon)\r\n  dataInput.Presentations[0].language =\r\n    savedJSon.projectionSettings.language === 0 ? \"en\" : \"fr\";\r\n  let i;\r\n  dataInput.Clients = [];\r\n  dataInput.clientsNo = savedJSon.lives.length;\r\n  //console.log(dataInput.Clients)\r\n\r\n  let smk;\r\n  for (i = 0; i < savedJSon.lives.length; i++) {\r\n    smk = savedJSon.lives[i].Smk <= 2 ? \"NS_STD\" : \"S_STD\";\r\n    const memberKey = Object.values(MEMBER).filter(\r\n      (obj) => obj.ID === savedJSon.lives[i].member\r\n    )[0].Key;\r\n    let addLife = true;\r\n\r\n    if (\r\n      APPLET_EP &&\r\n      !(memberKey === MEMBER.CLIENT.Key || memberKey === MEMBER.SPOUSE.Key)\r\n    )\r\n      addLife = false;\r\n\r\n    if (addLife) {\r\n      dataInput.Clients.push({\r\n        id: i + 1,\r\n        Age: savedJSon.lives[i].Age,\r\n        //savedJSon.lives[i].Sex===0? SEX.MALE.Key : SEX.FEMALE.Key,\r\n        sexKey: Object.values(SEX).filter(\r\n          (obj) => obj.ID === savedJSon.lives[i].Sex\r\n        )[0].Key,\r\n        smokerKey:\r\n          smk === \"NS_STD\" ? SMOKING.NON_SMOKER.Key : SMOKING.SMOKER.Key,\r\n        Income: savedJSon.lives[i].salary,\r\n        avgTaxRate: 100 * savedJSon.lives[i].avgTaxRate,\r\n        //member: MEMBER[data.lang].Values[savedJSon.lives[i].member],\r\n        //MEMBER.[savedJSon.lives[i].member].value[data.lang],\r\n        memberKey: memberKey,\r\n        retirementAge: savedJSon.lives[i].retirementAge,\r\n        Eligibility: 100 * savedJSon.lives[i].CPPeligibility,\r\n        Name: savedJSon.lives[i].Name,\r\n      });\r\n    }\r\n  }\r\n\r\n  //console.log(dataInput.Clients)\r\n\r\n  dataInput.Assets = [];\r\n  dataInput.assetsNo = savedJSon.assets.length;\r\n\r\n  for (i = 0; i < savedJSon.assets.length; i++) {\r\n    // console.log((savedJSon.assets[i].owner),Object.values(ASSET_OWNERSHIP_ACTION).filter(obj => obj.ID=== savedJSon.assets[i].owner)[0].Key)\r\n    // console.log(Object.values(ASSET_OWNERSHIP_ACTION).filter(obj => obj.ID=== savedJSon.assets[i].owner)[0].Key, Object.values(ASSET_TAX).filter(obj => obj.ID=== savedJSon.assets[i].taxMethod)[0].Key)\r\n    // as of ver 1.0.7 personal residence became principal residence\r\n\r\n    if (savedJSon.assets[i].name === ASSETS.PERSONAL_RESIDENCE.value.oldName)\r\n      savedJSon.assets[i].name = ASSETS.PERSONAL_RESIDENCE.value.en;\r\n\r\n    let ownerKey = Object.values(ASSET_OWNERSHIP_ACTION).filter(\r\n      (obj) => obj.ID === savedJSon.assets[i].owner\r\n    )[0].Key;\r\n\r\n    if (APPLET_EP && savedJSon.assets[i].name === ASSETS.RRSP_RRIF.value.en) {\r\n      if (savedJSon.lives.length === 1)\r\n        ownerKey = ASSET_OWNERSHIP_ACTION.CLIENT.Key;\r\n      else {\r\n        if (ownerKey !== ASSET_OWNERSHIP_ACTION.CLIENT.Key)\r\n          ownerKey = ASSET_OWNERSHIP_ACTION.SPOUSE.Key;\r\n      }\r\n    }\r\n\r\n    dataInput.Assets.push({\r\n      id: i + 1,\r\n      //assetTypeKey: Object.values(ASSETS).filter(obj => obj.ID=== savedJSon.assets[i].ID)[0].Key,\r\n      assetTypeKey: findMatchingKey(\r\n        Object.values(ASSETS),\r\n        savedJSon.assets[i].name\r\n      ),\r\n      description: savedJSon.assets[i].desc,\r\n      ownerKey: ownerKey,\r\n      assetTaxTypeKey: Object.values(ASSET_TAX).filter(\r\n        (obj) => obj.ID === savedJSon.assets[i].taxMethod\r\n      )[0].Key,\r\n      currValue: savedJSon.assets[i].currValue,\r\n      growth: savedJSon.assets[i].annualGrowth * 100,\r\n      DisposeYr: savedJSon.assets[i].dispositionYr,\r\n      DisposeDur: savedJSon.assets[i].dispositionDur,\r\n      ACB: savedJSon.assets[i].ACB,\r\n      smallBusinessCapGainExemption:\r\n        savedJSon.assets[i].smallBusinessCapGainExemption,\r\n      contributionAmt: savedJSon.assets[i].contributionAmt,\r\n      contributionStartYr: savedJSon.assets[i].contributionStartYr,\r\n      contributionDur: savedJSon.assets[i].contributionDur,\r\n      withdrawalAmt: savedJSon.assets[i].withdrawalAmt,\r\n      withdrawalStartYr: savedJSon.assets[i].withdrawalStartYr,\r\n      withdrawalDur: savedJSon.assets[i].withdrawalDur,\r\n      incomeRate: savedJSon.assets[i].incomeRate * 100,\r\n      RRIFStartAge: savedJSon.assets[i].RRIFStartAge,\r\n    });\r\n  }\r\n\r\n  dataInput.Liabilitys = [];\r\n  dataInput.liabilitysNo = savedJSon.liabilities.length;\r\n\r\n  for (i = 0; i < savedJSon.liabilities.length; i++) {\r\n    // console.log(savedJSon.liabilities[i])\r\n    // console.log(findMatchingKey(Object.values(LIABILITIES),savedJSon.liabilities[i].name))\r\n    dataInput.Liabilitys.push({\r\n      id: i + 1,\r\n      //liabTypeKey: Object.values(LIABILITIES).filter(obj => obj.ID=== savedJSon.liabilities[i].ID)[0].Key,\r\n      liabTypeKey: findMatchingKey(\r\n        Object.values(LIABILITIES),\r\n        savedJSon.liabilities[i].name\r\n      ),\r\n      ownerKey: OWNERSHIP.CLIENT.Key,\r\n      currValue: savedJSon.liabilities[i].currValue,\r\n      /* growthDir:\r\n        savedJSon.liabilities[i].annualGrowth >= 0\r\n          ? GROWTHDIR[dataInput.Presentations[0].language].Values[0]\r\n          : GROWTHDIR[dataInput.Presentations[0].language].Values[1], */\r\n      growthDirKey:\r\n        savedJSon.liabilities[i].annualGrowth >= 0\r\n          ? GROWTHDIR.GROWS.Key\r\n          : GROWTHDIR.REDUCES.Key,\r\n      growth: Math.abs(savedJSon.liabilities[i].annualGrowth * 100),\r\n      exposureDur: savedJSon.liabilities[i].exposureDur,\r\n      assetTaxLiabID: 0,\r\n      repay: savedJSon.liabilities[i].annualRepay,\r\n    });\r\n  }\r\n\r\n  dataInput.Sources = [];\r\n\r\n  dataInput.sourcesNo = savedJSon.personalIncomeSources.length;\r\n\r\n  for (i = 0; i < savedJSon.personalIncomeSources.length; i++) {\r\n    dataInput.Sources.push({\r\n      id: i + 1,\r\n      //sourceTypeKey: Object.values(INCOMESOURCES).filter(obj => obj.ID=== savedJSon.personalIncomeSources[i].ID)[0].Key,\r\n      //sourceTypeKey: Object.values(INCOMESOURCES).filter(obj => obj.value.en=== savedJSon.personalIncomeSources[i].Name)[0].Key,\r\n      sourceTypeKey: findMatchingKey(\r\n        Object.values(INCOMESOURCES),\r\n        savedJSon.personalIncomeSources[i].Name\r\n      ),\r\n\r\n      amount: savedJSon.personalIncomeSources[i].amount,\r\n      startYear: savedJSon.personalIncomeSources[i].startYear,\r\n      duration: savedJSon.personalIncomeSources[i].duration,\r\n      taxRate: savedJSon.personalIncomeSources[i].taxRate * 100,\r\n      ownerID:\r\n        savedJSon.personalIncomeSources[i].ownerID === undefined ||\r\n        savedJSon.personalIncomeSources[i].ownerID === 0\r\n          ? dataInput.Clients.length > 1\r\n            ? 2\r\n            : 1\r\n          : savedJSon.personalIncomeSources[i].ownerID, // spouse or 1st child\r\n    });\r\n  }\r\n\r\n  dataInput.Needs = [];\r\n\r\n  //console.log(savedJSon.incomeNeeds.incomeNeedItems.length)\r\n\r\n  dataInput.needsNo = savedJSon.incomeNeeds.incomeNeedItems.length;\r\n\r\n  for (i = 0; i < savedJSon.incomeNeeds.incomeNeedItems.length; i++) {\r\n    //console.log(i,savedJSon.incomeNeeds.incomeNeedItems[i].amount, Object.values(INCOMENEEDS).filter(obj => obj.ID=== savedJSon.incomeNeeds.incomeNeedItems[i].ID)[0].Key)\r\n    const needKey = findMatchingKey(\r\n      Object.values(INCOMENEEDS),\r\n      savedJSon.incomeNeeds.incomeNeedItems[i].name\r\n    );\r\n    let amt = savedJSon.incomeNeeds.incomeNeedItems[i].amount;\r\n    if (\r\n      needKey === INCOMENEEDS.PERCET_OF_INCOME.Key &&\r\n      dataInput.Clients.length > 1\r\n    )\r\n      // ie not single or EP\r\n      amt = parseInt(\r\n        savedJSon.incomeNeeds.incomeNeedItems[i].incomePercent *\r\n          getAfterTaxTotalIncome(dataInput.Clients, 1)\r\n      );\r\n    dataInput.Needs.push({\r\n      id: i + 1,\r\n      //needTypeKey: Object.values(INCOMENEEDS).filter(obj => obj.ID=== savedJSon.incomeNeeds.incomeNeedItems[i].ID)[0].Key,\r\n      //needTypeKey: Object.values(INCOMENEEDS).filter(obj => obj.value.en=== savedJSon.incomeNeeds.incomeNeedItems[i].name)[0].Key,\r\n      needTypeKey: needKey,\r\n\r\n      Percent: savedJSon.incomeNeeds.incomeNeedItems[i].incomePercent * 100,\r\n      amount: amt,\r\n      startYear: savedJSon.incomeNeeds.incomeNeedItems[i].startYear,\r\n      duration: savedJSon.incomeNeeds.incomeNeedItems[i].duration,\r\n    });\r\n  }\r\n\r\n  dataInput.Presentations = [];\r\n  dataInput.presentationsNo = 1;\r\n\r\n  //for (i = 0; i < savedJSon.liabilities.length; i++) {\r\n\r\n  const dataInputDefImages = loadDefaultCase();\r\n  let logo;\r\n  let appletImage;\r\n  /* console.log(dataInputDefImages) */\r\n  if (dataInputDefImages !== undefined && dataInputDefImages !== null) {\r\n    logo = dataInputDefImages.Presentations[0].adviserLogo;\r\n    appletImage = dataInputDefImages.Presentations[0].appletImage;\r\n  } else {\r\n    /* logo={image:null, left: 0,size: 90, allPages: false}\r\n    appletImage={image:null, left: 0,size: 90, allPages: false} */\r\n    const images = getDefaultImages();\r\n    logo = images.adviserLogo; //  {image:null, left: 0,size: OUTPUT_WIDTH_PCT, allPages: false, top:true, showDetails:false}\r\n    appletImage = images.appletImage; //{image:APPLET_INA? require(\"../images/INA.png\"):require(\"../images/estate.protection.applet.cover.graphic.png\"), left: 0,size: OUTPUT_WIDTH_PCT, allPages: false, top:true, showDetails:false}\r\n  }\r\n\r\n  dataInput.Presentations.push({\r\n    id: 1,\r\n    provinceKey: Object.values(PROVINCE).filter(\r\n      (obj) => obj.ID === savedJSon.projectionSettings.province\r\n    )[0].Key,\r\n    invRate: savedJSon.ratesPack.investmentRate * 100,\r\n    inflation: savedJSon.ratesPack.inflationRate * 100,\r\n    taxRate: savedJSon.ratesPack.taxRate * 100,\r\n    designedFor: savedJSon.projectionSettings.clientsName1,\r\n    designedBy: savedJSon.projectionSettings.agentName,\r\n    valuationDate: savedJSon.projectionSettings.valuationDate,\r\n    notes: savedJSon.projectionSettings.notes,\r\n    // version: savedJSon.projectionSettings.version, keep curr app version as opposed to saved ver\r\n    language: savedJSon.projectionSettings.language === 0 ? \"en\" : \"fr\",\r\n    periodOption: savedJSon.projectionSettings.projectEndOption, //=== DISPLAY_RETIREMENT add this for saved files\r\n\r\n    adviserLogo: logo,\r\n    appletImage: appletImage,\r\n    //imageApplet:savedJSon.projectionSettings.imageApplet,\r\n  });\r\n\r\n  return dataInput;\r\n}\r\n\r\nexport function loadDefaultCase() {\r\n  let storageKey = DEFAULT_QUOTE;\r\n\r\n  const objJSONData = JSON.parse(localStorage.getItem(storageKey));\r\n  // make sure details dont show\r\n  //objJSONData.Presentations[0].adviserLogo.showDetails=false\r\n  return objJSONData;\r\n}\r\n\r\nexport function getOutputValues(data) {\r\n  let output = {\r\n    designedFor: \"\",\r\n    designedBy: \"\",\r\n    dateApplet: \"\",\r\n    province: \"\",\r\n    clients: [],\r\n    assets: [],\r\n    liabilities: [],\r\n    source: [],\r\n    totalLiab: 0,\r\n    Income: 0,\r\n    Income2: 0,\r\n    survivorATaxIncome: 0,\r\n    percentNeed1: 0,\r\n    percentNeed2: [],\r\n    govDB: 0,\r\n    totalAsset: 0,\r\n    totalDisposeAsset: 0,\r\n    totalLiab: 0,\r\n    totalSource: 0,\r\n    totalSource2: 0,\r\n    percentNeed1: 0,\r\n    totalSource: 0,\r\n    totalSourceATax: 0,\r\n    totalSource2ATax: 0,\r\n    infRate: 0,\r\n    invRate: 0,\r\n    insNeedLE: 0,\r\n    insNeedRet: 0,\r\n    insNeedYgChild25: 0,\r\n    insNeedYgChild18: 0,\r\n    ygChild: 100,\r\n    hasChild: false,\r\n  };\r\n\r\n  let dateObj = new Date();\r\n  let month = dateObj.getUTCMonth() + 1; //months from 1-12\r\n  let day = dateObj.getUTCDate();\r\n  let year = dateObj.getUTCFullYear();\r\n  const input = data.dataInput;\r\n  const singleFamily = isSingleFamily(input.Clients);\r\n\r\n  output.language = input.Presentations[0].language;\r\n  output.dateApplet =\r\n    output.language === \"en\"\r\n      ? MONTHS[output.language][month - 1] + \" \" + day + \", \" + year\r\n      : day + \" \" + MONTHS[output.language][month - 1] + \" \" + year;\r\n  //output.language === \"en\"\r\n  //\t? months[month - 1] + \" \" + day + \", \" + year\r\n  //\t: day + \" \" + monthsFr[month - 1] + \" \" + year;\r\n  output.designedFor = input.Presentations[0].designedFor;\r\n  output.designedBy = input.Presentations[0].designedBy;\r\n  output.province = getListItemNameFromKey(\r\n    //input.Presentations[0].Province\r\n    PROVINCE,\r\n    input.Presentations[0].provinceKey,\r\n    output.language\r\n  );\r\n\r\n  //const retAge = input.Clients[0].retirementAge;\r\n  //const retAge2 = input.Clients[1].retirementAge;\r\n  output.Income = input.Clients[QUOTE_CLIENT].Income;\r\n  output.Income2 =\r\n    input.Clients.length > 1 ? input.Clients[QUOTE_SPOUSE].Income : 0;\r\n\r\n  output.invRate = input.Presentations[0].invRate;\r\n  output.infRate = input.Presentations[0].inflation;\r\n \r\n  output.insNeedRet = parseFloat(cleanFormat(data.insuranceNeedRet, output.language));\r\n  output.insNeedLE = parseFloat(cleanFormat(data.insuranceNeedLE, output.language));\r\n\r\n  output.ygChild = 100;\r\n  output.hasChild = false;\r\n  const childMember = MEMBER.CHILD.Key;\r\n  let Children = input.Clients.filter(function (item) {\r\n    return item.memberKey === childMember;\r\n  });\r\n  if (Children.length > 0) {\r\n    output.hasChild = true;\r\n    Children.forEach((element) => {\r\n      if (element.Age <= output.ygChild) output.ygChild = element.Age;\r\n    });\r\n  }\r\n\r\n  const provinceKey = getListItemKeyFromName(PROVINCE, output.province);\r\n  const maxDur =\r\n    provinceKey === \"QC\" ? MAX_ORPHAN_DUR_QC : MAX_ORPHAN_DUR_NON_QC;\r\n  output.youngestChildEndAge = maxDur;\r\n  if (output.hasChild)\r\n    output.youngestChildEndAge = Math.min(\r\n      maxDur,\r\n      input.Clients.filter((item) => {\r\n        return item.Age === output.ygChild;\r\n      })[0].retirementAge\r\n    );\r\n\r\n  //console.log(data);\r\n  output.insNeedYgChild25 = 0;\r\n  output.insNeedYgChild18 = 0;\r\n  for (\r\n    let i = 0;\r\n    i < output.youngestChildEndAge - output.ygChild;\r\n    output.insNeedYgChild25 +=\r\n      data.dataShortfall[i++] / Math.pow(1 + output.invRate / 100, i - 1)\r\n  );\r\n\r\n  for (\r\n    let i = 0;\r\n    i < 18 - output.ygChild;\r\n    output.insNeedYgChild18 +=\r\n      data.dataShortfall[i++] / Math.pow(1 + output.invRate / 100, i - 1)\r\n  );\r\n\r\n  output.insNeedYgChild25 =\r\n    output.insNeedYgChild25 < 0 ? 0 : output.insNeedYgChild25;\r\n  output.insNeedYgChild18 =\r\n    output.insNeedYgChild18 < 0 ? 0 : output.insNeedYgChild18;\r\n\r\n  /* let insNeedYgChild18=cleanFormat(insNeedRet)*((Math.pow(1+invRate/100,18-ygChild))/(Math.pow(1+invRate/100,retAge2-input.Clients[1].Age)));\r\n\t\t\t let insNeedYgChild25=cleanFormat(insNeedRet)*((Math.pow(1+invRate/100,25-ygChild))/(Math.pow(1+invRate/100,retAge2-input.Clients[1].Age)));*/\r\n\r\n  output.liabilities = [];\r\n\r\n  Object.values(LIABILITIES).forEach((element) => {\r\n    if (element.order > 0)\r\n      output.liabilities.push({\r\n        name: element.value[output.language],\r\n        value: 0,\r\n      });\r\n  });\r\n\r\n  /* LIABILITIES[output.language].Values.forEach(function(element) {\r\n\t\t  liabilities.push({ name: element, value: 0 });\r\n\t\t}); */\r\n  /* \t\toutput.incomeNeeds = [];\r\n\t\tINCOMENEEDS[output.language].Values.forEach(function(element) {\r\n\t\t  output.incomeNeeds.push({ name: element, value: 0 });\r\n\t\t});\r\n */\r\n\r\n  output.incomeNeeds = [];\r\n  Object.values(INCOMENEEDS).forEach((element) => {\r\n    output.incomeNeeds.push({ name: element.value[output.language], value: 0 });\r\n  });\r\n\r\n  // populate with what was assigned'\r\n  output.totalLiab = 0;\r\n  output.totalLiabExcludeDeathRelated = 0;\r\n  input.Liabilitys.forEach((element) => {\r\n    //let pos = liabilities.findIndex(i => i.name === element.Type);\r\n    /* let pos = liabilities.indexOf(\r\n\t\t\tliabilities.filter(i => i.name === element.Type)[0]\r\n\t\t  ); */\r\n    let pos = output.liabilities.indexOf(\r\n      output.liabilities.filter(\r\n        (i) =>\r\n          i.name ===\r\n          getListItemNameFromKey(\r\n            LIABILITIES,\r\n            element.liabTypeKey,\r\n            output.language\r\n          )\r\n      )[0]\r\n    );\r\n    output.totalLiab += element.currValue;\r\n\r\n    output.totalLiabExcludeDeathRelated +=\r\n      element.liabTypeKey === LIABILITIES.LAST_EXPENSES.Key ||\r\n      element.liabTypeKey === LIABILITIES.LEGAL_AND_EXECUTOR_FEES.Key ||\r\n      element.liabTypeKey === LIABILITIES.PROBATE.Key\r\n        ? 0\r\n        : element.currValue;\r\n    if (pos !== undefined) output.liabilities[pos].value += element.currValue;\r\n  });\r\n\r\n  output.clients = [];\r\n  let grossIncome = 0;\r\n  input.Clients.forEach(function (element) {\r\n    //let income = \"$\" + formatMoney(element.Income, 0, \",\", \",\");\r\n    grossIncome += element.Income;\r\n    output.clients.push({\r\n      id: element.id,\r\n      memberKey: element.memberKey,\r\n      age: element.Age,\r\n      name: element.Name,\r\n      income: element.Income, //income,//element.memberKey === childMember ? \" - \" : income,\r\n      ret:\r\n        element.memberKey === childMember && !singleFamily\r\n          ? \" - \"\r\n          : element.retirementAge,\r\n    });\r\n  });\r\n\r\n  output.assets = [];\r\n  Object.values(ASSETS).forEach((element) => {\r\n    // console.log(element)\r\n    if (\r\n      !(\r\n        appletMode === \"EP\" &&\r\n        element.Key === ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.Key\r\n      )\r\n    )\r\n      output.assets.push({\r\n        name: element.value[output.language],\r\n        value: 0,\r\n        disposeValue: 0,\r\n      });\r\n  });\r\n\r\n  /*     ASSETS[output.language].Values.forEach(function(element) {\r\n\t\t  assets.push({ name: element, value: 0 });\r\n\t\t}); */\r\n  /*  UNLISTED[output.language].Assets.Values.forEach(function(element) {\r\n\t\t  assets.push({ name: element, value: 0 });\r\n\t\t}); */\r\n  output.totalAsset = 0;\r\n  output.totalAssetExcludeInsurance = 0;\r\n  output.totalAssetInsurance = 0;\r\n  output.totalAssetInsuranceIfSpouse = 0;\r\n  input.Assets.forEach((element) => {\r\n    // console.log(element)\r\n    //let pos = assets.findIndex(i => i.name === element.Type);\r\n    let pos = output.assets.indexOf(\r\n      output.assets.filter(\r\n        (i) =>\r\n          i.name ===\r\n          getListItemNameFromKey(ASSETS, element.assetTypeKey, output.language)\r\n      )[0]\r\n    );\r\n    let showAsDisposed =\r\n      pos !== undefined && pos >= 0 && element.DisposeYr === 0;\r\n    if (\r\n      element.assetTypeKey === ASSETS.LIFE_INSURANCE.Key &&\r\n      !(\r\n        element.ownerKey === ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key ||\r\n        element.ownerKey === ASSET_OWNERSHIP_ACTION.CLIENT_ROLLOVER.Key\r\n      )\r\n    )\r\n      showAsDisposed = false;\r\n    output.totalAsset += element.currValue;\r\n    output.totalAssetExcludeInsurance +=\r\n      element.assetTypeKey === ASSETS.LIFE_INSURANCE.Key\r\n        ? 0\r\n        : element.currValue;\r\n    output.totalAssetInsurance +=\r\n      element.assetTypeKey === ASSETS.LIFE_INSURANCE.Key &&\r\n      !(\r\n        element.ownerKey === ASSET_OWNERSHIP_ACTION.SPOUSE.Key ||\r\n        element.ownerKey === ASSET_OWNERSHIP_ACTION.JOINT.Key\r\n      )\r\n        ? element.currValue\r\n        : 0;\r\n    output.totalAssetInsuranceIfSpouse +=\r\n      element.assetTypeKey === ASSETS.LIFE_INSURANCE.Key &&\r\n      element.ownerKey !== ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key &&\r\n      element.ownerKey !== ASSET_OWNERSHIP_ACTION.CLIENT_ROLLOVER.Key\r\n        ? element.currValue\r\n        : 0;\r\n    output.totalDisposeAsset += showAsDisposed ? element.currValue : 0;\r\n\r\n    if (pos !== undefined && pos >= 0)\r\n      output.assets[pos].value += element.currValue;\r\n    if (showAsDisposed) output.assets[pos].disposeValue += element.currValue;\r\n  });\r\n\r\n  let otherAssetsList = \"\";\r\n  input.Assets.forEach((element) => {\r\n    if (\r\n      element.assetTypeKey === ASSETS.OTHER_ASSETS.Key &&\r\n      element.currValue > 0\r\n    )\r\n      otherAssetsList +=\r\n        \" \" +\r\n        (element.description === \"\" ? \"...\" : element.description) +\r\n        \" - \";\r\n  });\r\n  if (otherAssetsList !== \"\")\r\n    output.otherAssetsList =\r\n      \"* \" +\r\n      ASSETS.OTHER_ASSETS.value[output.language] +\r\n      \":\" +\r\n      otherAssetsList.substring(0, otherAssetsList.length - 3);\r\n  else output.otherAssetsList = \"\";\r\n  /* output.sources = [];\r\n\t\toutput.govDB = 0;\r\n\t\tconst srcDB =INCOMESOURCES.GOV_DEATH_BENEFIT.value[output.language];\r\n\t\tINCOMESOURCES[output.language].Values.forEach(function(element) {\r\n\t\t  output.sources.push({ name: element, value: 0 });\r\n\t\t}); */\r\n\r\n  output.sources = [];\r\n  output.govDB = 0;\r\n  const srcDB = INCOMESOURCES.GOV_DEATH_BENEFIT.Key; //value[output.language];\r\n  Object.values(INCOMESOURCES).forEach((element) => {\r\n    output.sources.push({\r\n      name: element.value[output.language],\r\n      value: 0,\r\n      valueAtDeath: 0,\r\n    });\r\n  });\r\n\r\n  // populate with what was assigned'\r\n  output.totalSource = 0;\r\n  output.totalSource2 = 0;\r\n  output.totalSourceATax = 0;\r\n  output.totalSource2ATax = 0;\r\n  output.totalSourceAtDeath = 0;\r\n  output.totalSource2AtDeath = 0;\r\n  output.totalSourceATaxAtDeath = 0;\r\n  output.totalSource2ATaxAtDeath = 0;\r\n  output.totalDesiredGrossIncome = 0;\r\n  output.totalDesiredGrossIncome2 = 0;\r\n  // NOTE \"this\" is not available inside inline functions, hence:\r\n  // or just use arrow functions\r\n  let srcOrphan = INCOMESOURCES.GOV_ORPHANS_BENEFIT.Key; //value[output.language];\r\n // console.log(input.Sources);\r\n  input.Sources.forEach(function (element) {\r\n    /*  let pos = output.sources.indexOf(\r\n\t\t\toutput.sources.filter(i => i.name === element.Type)[0]\r\n\t\t  );\r\n\t\t   */\r\n    let pos = output.sources.indexOf(\r\n      output.sources.filter(\r\n        (i) =>\r\n          i.name ===\r\n          getListItemNameFromKey(\r\n            INCOMESOURCES,\r\n            element.sourceTypeKey,\r\n            output.language\r\n          )\r\n      )[0]\r\n    );\r\n\r\n    if (element.sourceTypeKey === srcDB) {\r\n      // add gov DB\r\n      output.govDB = element.amount;\r\n      output.totalAsset += output.govDB;\r\n      output.totalDisposeAsset += output.govDB;\r\n    } else {\r\n      output.totalSource += element.amount;\r\n      if (element.startYear === 0) output.totalSourceAtDeath += element.amount;\r\n      // no orphans\r\n      output.totalSource2 +=\r\n        element.sourceTypeKey !== srcOrphan ? element.amount : 0;\r\n      if (element.startYear === 0)\r\n        output.totalSource2AtDeath +=\r\n          element.sourceTypeKey !== srcOrphan ? element.amount : 0;\r\n    }\r\n    if (pos !== undefined) {\r\n      output.sources[pos].value += element.amount;\r\n      if (element.startYear === 0)\r\n        output.sources[pos].valueAtDeath += element.amount;\r\n    }\r\n  });\r\n  // remove gov db from sources\r\n  output.sources = output.sources.filter(\r\n    (i) =>\r\n      i.name !== getListItemNameFromKey(INCOMESOURCES, srcDB, output.language)\r\n  ); //output.srcDB);\r\n  // after tax\r\n  output.totalSourceATax =\r\n    input.Clients.length > 1\r\n      ? output.totalSource * (1 - input.Clients[QUOTE_SPOUSE].avgTaxRate / 100)\r\n      : output.totalSource * (1 - input.Clients[QUOTE_CLIENT].avgTaxRate / 100);\r\n  output.totalSource2ATax =\r\n    input.Clients.length > 1\r\n      ? output.totalSource2 * (1 - input.Clients[QUOTE_SPOUSE].avgTaxRate / 100)\r\n      : output.totalSource2 *\r\n        (1 - input.Clients[QUOTE_CLIENT].avgTaxRate / 100);\r\n\r\n  output.totalSourceATaxAtDeath =\r\n    input.Clients.length > 1\r\n      ? output.totalSourceAtDeath *\r\n        (1 - input.Clients[QUOTE_SPOUSE].avgTaxRate / 100)\r\n      : output.totalSourceAtDeath *\r\n        (1 - input.Clients[QUOTE_CLIENT].avgTaxRate / 100);\r\n  output.totalSource2ATaxAtDeath =\r\n    input.Clients.length > 1\r\n      ? output.totalSource2AtDeath *\r\n        (1 - input.Clients[QUOTE_SPOUSE].avgTaxRate / 100)\r\n      : output.totalSource2AtDeath *\r\n        (1 - input.Clients[QUOTE_CLIENT].avgTaxRate / 100);\r\n\r\n  output.percentNeed1 = 0;\r\n  output.percentNeed2 = [];\r\n  output.percent1 = 0;\r\n  output.percent2 = [];\r\n  var totalNeed = 0;\r\n  const needPercent = INCOMENEEDS.PERCET_OF_INCOME.Key;\r\n  /* output.needs = [];\r\n\t\tINCOMENEEDS[output.language].Values.forEach(function(element) {\r\n\t\t  output.needs.push({ name: element, value: 0 });\r\n\t\t});\r\n */\r\n  output.needs = [];\r\n  Object.values(INCOMENEEDS).forEach((element) => {\r\n    output.needs.push({ name: element.value[output.language], value: 0 });\r\n  });\r\n\r\n  output.totalNeed = 0;\r\n  input.Needs.forEach(function (element) {\r\n    //let pos = needs.findIndex(i => i.name === element.Type);\r\n    //let pos = output.needs.indexOf(output.needs.filter(i => i.name === element.Type)[0]);\r\n    let pos = output.needs.indexOf(\r\n      output.needs.filter(\r\n        (i) =>\r\n          i.name ===\r\n          getListItemNameFromKey(\r\n            INCOMENEEDS,\r\n            element.needTypeKey,\r\n            output.language\r\n          )\r\n      )[0]\r\n    );\r\n\r\n    output.totalNeed += element.amount;\r\n    if (element.needTypeKey === needPercent) {\r\n      if (output.percent1 === 0) {\r\n        output.percent1 = element.Percent;\r\n        output.percentNeed1 = element.amount;\r\n        output.totalDesiredGrossIncome = (grossIncome * element.Percent) / 100;\r\n      } else {\r\n        output.percent2.push(element.Percent);\r\n        output.percentNeed2.push(element.amount);\r\n        output.totalDesiredGrossIncome2 +=\r\n          (grossIncome * element.Percent) / 100;\r\n      }\r\n    }\r\n    if (pos !== undefined) output.needs[pos].value += element.amount;\r\n  });\r\n\r\n  //\t\tif (data.dataCashFlowGov !== undefined)\r\n  //\t\t\tvar maxYScale = 10000 * Math.ceil(1 + Math.max(Math.max(...data.dataCashFlowGov), Math.max(...data.dataCashFlowNeeds), Math.max(...data.dataShortfall), Math.max(...data.dataCashFlowPersonal)) / 10000);\r\n // console.log(output);\r\n\r\n  return output;\r\n}\r\n\r\nfunction findMatchingKey(objValues, nameFromFile) {\r\n  return objValues.filter(\r\n    (obj) =>\r\n      obj.value.en\r\n        .replace(/ /g, \"\")\r\n        .replace(\r\n          /[\\u00A0\\u1680​\\u180e\\u2000-\\u2009\\u200a​\\u200b​\\u202f\\u205f​\\u3000]/g,\r\n          \"\"\r\n        ) ==\r\n        nameFromFile\r\n          .replace(/ /g, \"\")\r\n          .replace(\r\n            /[\\u00A0\\u1680​\\u180e\\u2000-\\u2009\\u200a​\\u200b​\\u202f\\u205f​\\u3000]/g,\r\n            \"\"\r\n          ) ||\r\n      obj.value.fr\r\n        .replace(/ /g, \"\")\r\n        .replace(\r\n          /[\\u00A0\\u1680​\\u180e\\u2000-\\u2009\\u200a​\\u200b​\\u202f\\u205f​\\u3000]/g,\r\n          \"\"\r\n        ) ==\r\n        nameFromFile\r\n          .replace(/ /g, \"\")\r\n          .replace(\r\n            /[\\u00A0\\u1680​\\u180e\\u2000-\\u2009\\u200a​\\u200b​\\u202f\\u205f​\\u3000]/g,\r\n            \"\"\r\n          )\r\n  )[0].Key;\r\n}\r\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAAAhdEVYdENyZWF0aW9uIFRpbWUAMjAxOTowODozMSAwOTowOTo1NrtZ+qQAAAJgSURBVEhL7ZVLaBNRFIb/ySRNTCaPJjUqIii4sG4tahRxJ924qkUQoaCCO6HV2oi616JSqFtFdFGVboRu4kJQrOAiuvCxEgSpVfsgSTPJZJJ5eO7t1DyamSYt3fnN3MWcO3P+c+8954xgEiB6ztzGr4UleNwimGnZ2iYC4BIEaLqBsOTDh4kkuMDU60/ov/oQ8aiE2fkcOjxueDvcaE9FgGEakIsq+QkhXyxh7Eof82GaqekvppQYMgOJQfa4YY6du2cGDg+aT6bemxSmBS3PS5E/S6Uh+b0I+n0UUesroJ1BSdWgqBUsZApwucjAbqb48t1X9A0/QDTkR04uwTCMDZ1BKOCDrKgYT/bDZU1xBJqMBLcgGg4gFlk9omE/RFFAkBw0m4/Rd50UpChW3dYJOMFWNTOXxfPR89jRFeKH2QotCWi6jp+UXZ8nr+NEohvpiRHs270N2bxivWHPmgLlisbPZe7VLXTv2W5ZgbePhnD8wF4sZguWpTmOAhVN5zWRn77L97eRF2MXMXDyIDJLRcuyGlsBSi7oVJEfnyZ58el0Bo3M/Mni/rXT6D26H2pZs6z12AqwjGLVvKv3BnYeuYwfvzPWTJVDZ0fh6bmEN+lvy5XfBMctYiJdEQm+aBDumtRbgaVmnObsnDMcBWrhlbkOWhJgztnVCLOwFuEEbxUpahWnqFU0y5QV5jMyKpSytcRjbOtE66menKxgfKSmVRSUMs8Eu8H6S4zOo3boutn0XTaK5I/9F/79cAZuPsb32UV4bCJqB+Z4a6eEyTsXqgKbRctZtF7+C6zJJgsAfwFSJkjpY7Y95gAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAAAhdEVYdENyZWF0aW9uIFRpbWUAMjAxOTowODozMSAwOTowOTo1NrtZ+qQAAAMVSURBVEhLpZVLTBNRFIb/PqcPKoXyKoqvsFFZ4GPloqJBowkLHxDApSy6MCExxkeKG2OMcYHEsEDcqEsDNRHi0hWiGBegYmIMwZAYCaIgUNppO9N6zm2bTgEHCl9z03bm3vnvOf85dwxJ4sOXKdT7u+F22WEwGLBV6JFYCMl4fv8ShMDVzhd4OjiCAruE5UgMiUQCyfTkfDEZjXDYrYjGFDT4alICge4B9Pa/gWQ1o+3sUXjcTvE7LxUKXFFUzM6H8GRgRAg0nTyYFejpG6IUOfD91e30is1zqOUepqbn0XL6cFbgcXBY7JrSh3KPi9JlRSKPCIwUwbIcw6+5EFQ1QWuTaKyvzRUocEiIxRXEKdREPk9PwwViMZtgtZggU4pWCdgoApvNgqryItglS3rZxlFpU9OzC5j5s8hquQJscjQeR+htV3r65mlo78Hw2CQunjmiEaAIzCYDzp+oRYm7AC6nJPK4UTg9shzH4rKM4OsxhKncm05pqohT5CRjI9G4yH8+D8/ALWokt+0S9QF5ySkypm5licXVlNH0ne9IrVVFJ2egbkqRpE8oEkXvrRZxZPAutBPXhbbPkS+EIgh0D1K5LqUuZ1KUMlkhkx+IG1vB19aF8YlptK5sNPbgJ5WZ2WSE3ZYbATePNh4jmcr5zsAmc2rlqIKyYheVbGK1Bzxpe5lbTOCDz+WwieEgsZ0VxdjtLcYuGnsqPfCWbBPXM3N4vqfQiR3lbtFoGVaZzLAQ7y4zfv8NYTzYgc/9HRin8akvgJddfpFv7Txet5I1BdaCT0ct80vh9C991hUI0wEWE++I3IpSyBN+d8jUN3roCvDDLzf74G8+JozXUkEetLfWoZHOfD0RXQHO6+jXH3hEvWHRGMdUV5Xi4fVGvPs4CdMKcS26AjarBUOjE9h37k76ShY2uMh3TZQ1H9H/Q1eA4RKcWwyj9PhNUefMt6kZeOpuwEllKtEm9BAC3ER68LuBd1lRH8CzgfeouXAXleSBWWfnDBeCEDhQ7RV/9ODm4dfolc4gvKWF5I9+8IqqYv9eL/4BgXeca9Es3FcAAAAASUVORK5CYII=\"","import React, { Component } from \"react\";\r\n\r\nexport class MultiButtons extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const buttonsDefault = this.setupButtons(\r\n      this.props.selected,\r\n      this.props.noButtons,\r\n      this.props.buttonCaption\r\n    );\r\n    this.state = {\r\n      buttons: buttonsDefault,\r\n    };\r\n  }\r\n\r\n /*  getDerivedStateFromProps(){\r\n\r\n  } */\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    const buttonsDefault = this.setupButtons(\r\n      nextProps.selected,\r\n      nextProps.noButtons,\r\n      nextProps.buttonCaption\r\n    );\r\n    this.setState({ buttons: buttonsDefault });\r\n  }\r\n\r\n  setupButtons = (selected, noButtons, buttonCaption) => {\r\n    selected = selected === undefined ? 0 : selected - 1;\r\n    let buttonsDefault = [];\r\n    let i;\r\n    for (i = 0; i < noButtons; ++i) {\r\n      if (i === selected)\r\n        buttonsDefault.push({\r\n          id: selected,\r\n          name: buttonCaption[selected],\r\n          style:\r\n            noButtons === 1\r\n              ? \"roundedCornerCmd\"\r\n              : \"multiButtons multiButtonsAct\",\r\n        });\r\n      else\r\n        buttonsDefault.push({\r\n          id: i,\r\n          name: buttonCaption[i],\r\n          style: \"multiButtons\",\r\n        });\r\n    }\r\n    return buttonsDefault;\r\n  };\r\n\r\n  selectButton = (index) => {\r\n    let buttonsDefault = this.state.buttons;\r\n    let i;\r\n    for (i = 0; i < this.props.noButtons; ++i) {\r\n      buttonsDefault[i].style =\r\n        buttonsDefault[i].id === index\r\n          ? \"multiButtons multiButtonsAct\"\r\n          : \"multiButtons\";\r\n    }\r\n    this.setState({ buttons: buttonsDefault });\r\n    this.props.selectMultiButton(index + 1);\r\n  };\r\n\r\n  render() {\r\n    const stylePosition =\r\n      this.props.width !== undefined ? { width: this.props.width } : {};\r\n    const stylePositionLast =\r\n      this.props.width !== undefined\r\n        ? { width: this.props.width, marginRight: \"5px\" }\r\n        : { marginRight: \"5px\" };\r\n\r\n    return (\r\n      <div style={{ marginRight: \"10px\" }}>\r\n        {this.state.buttons.map((item) => (\r\n          <button\r\n            key={item.id}\r\n            className={item.style}\r\n            style={\r\n              item.id === this.props.noButtons - 1\r\n                ? stylePositionLast\r\n                : stylePosition\r\n            }\r\n            onClick={() => this.selectButton(item.id)}\r\n          >\r\n            {item.name}\r\n          </button>\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Client } from \"./Client\";\r\nimport { defaults } from \"react-chartjs-2\";\r\nimport { Asset } from \"./Asset\";\r\nimport { Liability } from \"./Liability\";\r\nimport { Source } from \"./Source\";\r\nimport { Need } from \"./Need\";\r\nimport { Header, hideRecover } from \"./Header\";\r\nimport { Presentation } from \"./Presentation\";\r\nimport { PopupUserinputDialog } from \"./PopupUserInput\";\r\nimport { Collapsible } from \"./Collapsible\";\r\nimport PasteClients from './PasteClients'\r\nimport {\r\n  getEPGridData,\r\n  getINAGridData,\r\n} from \"../data/aggregateGridProjections\";\r\nimport { AggregateGrid } from \"./AggregateGrid\";\r\nimport _ from \"lodash\";\r\nimport {\r\n  fetchTimerAPICheck,\r\n  getTaxRate,\r\n  handleFetchInsuranceNeedsNew,\r\n  handleFetchINADataFromQueryString,\r\n  handleFetchQueryString,\r\n  handleFetchPDF\r\n} from \"../utils/FetchAPIs\";\r\nimport debounce from \"lodash.debounce\";\r\nimport queryString from \"query-string\";\r\nimport { MultiButtons } from \"./MultiButtons\";\r\nimport { saveAs } from \"file-saver\";\r\nimport { OutputPresentation } from \"./outputPresentation\";\r\nimport { OutputPresentationEP } from \"./outputPresentationEP\";\r\nimport { OutputGraphs } from \"./OutputGraphs\";\r\nimport { OutputGraphsEP } from \"./OutputGraphsEP\";\r\nimport { AnalysisGraphs } from \"./AnalysisGraph\";\r\nimport { AddRemove } from \"./AddRemove\";\r\nimport { Info } from \"./Info\";\r\nimport {\r\n  isMobileDevice,\r\n  clearListCookies,\r\n  //isVersion2019,\r\n  versionDetails,\r\n  //INAFullSpreadsheetHeaders,\r\n  //INAFullSpreadsheetData,\r\n  getINA_LifeExp_Plus_yrs,\r\n  getDataFutureEstateLiability,\r\n  getProjectedLiabilities,\r\n  getListItemKeyFromName,\r\n  familyProjectionYears,\r\n  singleFamilyProjectionYears,\r\n  isSingleFamily,\r\n  getInsNeedLine,\r\n} from \"../utils/helper\";\r\nimport {\r\n  QUOTE_CLIENT,\r\n  QUOTE_SPOUSE,\r\n  appSiteAPI,\r\n  DISPLAY_RETIREMENT,\r\n  DISPLAY_LIFEEXP,\r\n  DISPLAY_ENDAGE,\r\n  DISPLAY_LIFEEXP_PLUS_3,\r\n  ORPHAN_AGE_QC,\r\n  ORPHAN_AGE_NON_QC,\r\n  MAX_ORPHAN_DUR_QC,\r\n  MAX_ORPHAN_DUR_NON_QC,\r\n  UNIVERSITY_START_AGE,\r\n  UNIVERSITY_END_AGE,\r\n  DISPLAY_PRESENTATION,\r\n  DISPLAY_GRAPHS,\r\n  DISPLAY_SPREADSHEET,\r\n  DISPLAY_ANALYSIS,\r\n  MESSAGES,\r\n  ASSETS,\r\n  PROVINCE,\r\n  ASSET_TAX,\r\n  INCOMESOURCES,\r\n  OWNERSHIP,\r\n  SEX,\r\n  SMOKING,\r\n  MEMBER,\r\n  LIABILITIES,\r\n  TITLES,\r\n  INCOMENEEDS,\r\n  GROWTHDIR,\r\n  EMAIL,\r\n  ASSET_OWNERSHIP_ACTION,\r\n  APPLET_INA,\r\n  APPLET_EP,\r\n  DISPLAY_NAME,\r\n  IMAGE_LOGO,\r\n  DEFAULT_QUOTE,\r\n  OWNER_ACTION_Spouse,\r\n  OWNER_ACTION_CLIENTLIQUIDATE\r\n} from \"../definitions/generalDefinitions\";\r\n\r\nimport \"isomorphic-fetch\";\r\nimport shortid from \"shortid\";\r\nimport { buildMode } from \"../../package.json\";\r\nimport { setUIDataToAPI, loadSavedDataToUI } from \"../data/dataExchange\";\r\nimport {\r\n  createDefaultAsset,\r\n  createDefaultPres,\r\n  createDefaultClient,\r\n  createDefaultSource,\r\n  createDefaultNeed,\r\n  createDefaultLiab,\r\n  getDefaultData,\r\n} from \"../data/createDefaults\";\r\nimport {\r\n  getInfoNoInternetAccess,\r\n  getInfoIconSourcesGov,\r\n  getGenericMessage,\r\n  getInfoIconInflationGrowth,\r\n  getInfoIconPYE_JLTD,\r\n  getInfoIconNeedGrowth\r\n} from \"../definitions/infoIconsDefinitions\";\r\n\r\nimport { getAssetGridValues } from \"../data/assetGridProjections\";\r\nimport Loader from \"react-loader-spinner\";\r\n\r\nconst COLLAPSIBLE_CLIENTS = 0;\r\nconst COLLAPSIBLE_ASSETS = 1;\r\nconst COLLAPSIBLE_LIABS = 2;\r\nconst COLLAPSIBLE_SOURCES = 3;\r\nconst COLLAPSIBLE_NEEDS = 4;\r\nconst COLLAPSIBLE_PRESENTATION = 5;\r\nconst COLLAPSIBLE_RESULTS = 6;\r\nconst COLLAPSIBLE_UPDATE_ALL = 7;\r\n\r\nconst COLLAPSIBLES_COUNT = 7;\r\nconst COLLAPSIBLES_CLOSED = false;\r\nconst COLLAPSIBLES_OPEN = true;\r\n\r\nconst DISPLAY_INCOME = 1;\r\nconst DISPLAY_TAXLIAB = 2;\r\nconst INA_FILE_TYPE = \".ppi_INA_TKD\";\r\nconst EP_FILE_TYPE = \".ppi_EP_TKD\";\r\nconst waitTime = 1800;\r\nconst RRIF_LAST_START_AGE = 70;\r\n\r\nconst SITE_TEST = \"https://test-tkdirect\";\r\n\r\n// to send it to Proxy make API site \"\"\r\n//const API_SITE=\"https://ppitoolkitapi.azurewebsites.net\"\r\nconst API_SITE_PROD = \"\"; //\"https://privateapi.ppi.ca/ToolkitDirect\"\r\nconst API_SITE_TEST = \"\"; //\"https://test-tkdirectapi.ppi.ca\";\r\nconst API_SITE_LOCAL = \"http://localhost:8082\"; // \"\"; turn this to \"\" and use proxy server on 3003, first turn on from toolkitDirectProxy Server projet by npm start\r\n//const API_SITE_LOCAL=\"http://www.toolkitdirectapi.com\";\r\n//const API_SITE=\"\";\r\n\r\nconst PARENT_SITE_LOCAL = \"http://localhost:8083\";\r\nconst PARENT_SITE_TEST = \"https://test-tkdirect.ppi.ca/\";\r\nconst PARENT_SITE_PROD = \"https://toolkitdirect.ppi.ca/\";\r\nconst MODE_SAVE = 0;\r\nconst MODE_EMAIL = 1;\r\nconst MODE_ONLY_GET_ENCRYPTED_QS = 2;\r\n\r\n//\"local\"=0 \"test-tkdirect\"=1 \"toolkitdirect\" =2}\r\n/* let appSiteAPI =\r\n  buildMode === 0\r\n    ? API_SITE_LOCAL\r\n    : buildMode === 1\r\n    ? API_SITE_TEST\r\n    : API_SITE_PROD; */\r\nlet appSiteParent =\r\n  buildMode === 0\r\n    ? PARENT_SITE_LOCAL\r\n    : buildMode === 1\r\n    ? PARENT_SITE_TEST\r\n    : PARENT_SITE_PROD;\r\n\r\ndefaults.global.maintainAspectRatio = false;\r\n\r\nexport class NA extends Component {\r\n  displayName = DISPLAY_NAME;\r\n  constructor(props) {\r\n    super(props);\r\n    this.excel = React.createRef();\r\n\r\n    // define default starting clients assets .etc. rows\r\n    let defaultClients = [];\r\n    defaultClients.push(createDefaultClient(1));\r\n    if (APPLET_INA) defaultClients.push(createDefaultClient(2));\r\n    let defaultAssets = [];\r\n    defaultAssets.push(createDefaultAsset(1));\r\n    const defaultSources = [createDefaultSource(1)];\r\n    const defaultLiab = [createDefaultLiab(1)];\r\n    let defaultNeeds = [];\r\n    defaultNeeds.push(createDefaultNeed(1));\r\n    defaultNeeds.push(createDefaultNeed(2));\r\n    const defaultPresentation = [createDefaultPres(1, this.provinceMargTax)];\r\n\r\n    // build state with defaults\r\n    this.state = {\r\n      /*  dataInput: {\r\n        Clients: defaultClients, //, clientsNo: defaultClients.length },\r\n        Assets: defaultAssets, //, assetsNo: defaultAsset.length },\r\n        Liabilitys: defaultLiab, //, liabilitysNo: 1 },\r\n        Sources: defaultSources, //, sourcesNo: 1 },\r\n        Needs: defaultNeeds, //,  needsNo: 2},\r\n        Presentations: defaultPresentation, //, presentationsNo: 1 },\r\n      }, */\r\n      dataInput: getDefaultData() /*  {\r\n        Clients: defaultClients, //, clientsNo: defaultClients.length },\r\n        Assets: defaultAssets, //, assetsNo: defaultAsset.length },\r\n        Liabilitys: defaultLiab, //, liabilitysNo: 1 },\r\n        Sources: defaultSources, //, sourcesNo: 1 },\r\n        Needs: defaultNeeds, //,  needsNo: 2},\r\n        Presentations: defaultPresentation, //, presentationsNo: 1 },\r\n      }, */,\r\n      /* dataInput: getDefaultData(), */ loading: true,\r\n      initialLoading: true,\r\n      failedAPI: false,\r\n      showMsg: false,\r\n      failedRemove:false,\r\n      SnapImport:false,\r\n\r\n      dataOutput: {\r\n        dataInsuranceNeeds: [],\r\n        dataCashFlowPersonal: [],\r\n        dataTaxLiability: [],\r\n        dataCashFlowGov: [],\r\n        dataCashFlowNeeds: [],\r\n        dataNAAges: [],\r\n        dataShortfall: [],\r\n        govBenefits: { cppSurvivor: null, cppDB: null, cppOrphan: null },\r\n        lifeExpectancy: { client: 0, spouse: 0, joint: 0 },\r\n        assetProjections: [],\r\n        aggregateGrid: null,\r\n        encryptedInputLife1AndSpouse: \"\",\r\n        encryptedInputLife1: \"\",\r\n      },\r\n    };\r\n    this.openCollapsible = [];\r\n    let i;\r\n    for (i = 0; i < COLLAPSIBLES_COUNT; ++i) {\r\n      this.openCollapsible.push({\r\n        open: COLLAPSIBLES_CLOSED,\r\n        id: i,\r\n      });\r\n    }\r\n    // open first bar\r\n    this.openCollapsible[COLLAPSIBLE_CLIENTS].open = COLLAPSIBLES_OPEN;\r\n\r\n    this.state.dataOutput3 = {};\r\n    this.state.dataOutput7 = {\r\n      dataInsuranceNeeds: [],\r\n    };\r\n\r\n    /* this.state.dataOutput = {\r\n      dataInsuranceNeeds: [],\r\n      dataCashFlowPersonal: [],\r\n      dataTaxLiability: [],\r\n      dataCashFlowGov: [],\r\n      dataCashFlowNeeds: [],\r\n      dataNAAges: [],\r\n      dataShortfall: [],\r\n      govBenefits: { cppSurvivor: null, cppDB: null, cppOrphan: null },\r\n      lifeExpectancy: { client: 0, spouse: 0, joint: 0 },\r\n      assetProjections: [],\r\n      aggregateGrid: null,\r\n    };\r\n */\r\n    this.tag = { t: 0, y: 0 };\r\n    this.showRecover = 1;\r\n    this.survIdx = APPLET_INA ? QUOTE_SPOUSE : QUOTE_CLIENT;\r\n    this.graphs = false;\r\n    this.caseFromFile=false;\r\n    //this.projectEndOption = DISPLAY_RETIREMENT;\r\n    this.OKToRemove = true;\r\n    //this.toRetirement = true;\r\n    //this.periodOption = APPLET_INA ? DISPLAY_RETIREMENT : DISPLAY_ENDAGE;\r\n    this.accessedAPI = false;\r\n    \r\n    //this.state.govBenefits.cpp = 0;\r\n    //this.state.govBenefits.cppDB = 0;\r\n    //this.lifeExp = 0;\r\n    //this.lifeExpJLTD = 0;\r\n    //this.lifeExpClient = 0;\r\n    //this.orphan = 0;\r\n    //this.orphan = 0;\r\n    this.openParent = true;\r\n    this.openForce = true;\r\n    this.resultIsOpen = false;\r\n    this.langText = \"Français\";\r\n    /*   this.dataInsuranceNeeds = [];\r\n      this.dataCashFlowPersonal = []; */\r\n    this.provinceMargTax = 0;\r\n    /* this.dataTaxLiability = [];\r\n    this.dataCashFlowGov = [];\r\n    this.dataCashFlowNeeds = [];\r\n    this.dataNAAges = [];\r\n    this.dataShortfall = []; */\r\n    this.visibleOutputSection = 0;\r\n    this.dataQS = \"\";\r\n    this.intervalID = 0;\r\n    this.INAOption = APPLET_INA ? DISPLAY_INCOME : DISPLAY_TAXLIAB;\r\n    //this.failedRemove = false;\r\n  }\r\n\r\n  afterTwoSeconds = (value) => {\r\n    return new Promise((resolve) => {\r\n      setTimeout(() => {\r\n        resolve(value);\r\n      }, 2000);\r\n    });\r\n  };\r\n\r\n  probateSync= async (dataInput, dataOutput) => {\r\n    // if not there add\r\n      let qbProbate=new Array(dataOutput.probate.numericValues.length).fill(0);\r\n      if(dataInput.Presentations[0].provinceKey === \"QC\")\r\n        dataOutput.probate.numericValues=qbProbate\r\n\r\n    //  console.log(dataOutput.probate.numericValues)  \r\n      let probate = LIABILITIES.PROBATE.Key;\r\n      let hasProbate = dataInput.Liabilitys.find((x) => x.liabTypeKey === probate);\r\n      if (hasProbate !== undefined) {\r\n        hasProbate.currValue=dataOutput.probate.numericValues[0];\r\n      };\r\n    //console.log(hasProbate,dataInput)\r\n     \r\n    return dataInput;\r\n  };\r\n\r\n\r\n  govBenefitsSync = async (dataInput, dataOutput) => {\r\n    // if not there add\r\n\r\n    if (APPLET_INA) {\r\n      //this.failedRemove=false\r\n      let gov1 = INCOMESOURCES.GOV_SURVIVORS_PENSION.Key; //value[this.state.dataInput.Presentations[0].language];\r\n      let gov = dataInput.Sources.find((x) => x.sourceTypeKey === gov1);\r\n\r\n      let gov2 = INCOMESOURCES.GOV_DEATH_BENEFIT.Key; //value[this.state.dataInput.Presentations[0].language];\r\n      let govDB = dataInput.Sources.find((x) => x.sourceTypeKey === gov2);\r\n\r\n      let hasSpouseArray = dataInput.Clients.find(\r\n        (x) => x.memberKey === MEMBER.SPOUSE.Key\r\n      );\r\n      const hasSpouse =\r\n        hasSpouseArray === undefined || hasSpouseArray.length === 0\r\n          ? false\r\n          : true;\r\n\r\n      /* let hasChildArray = dataInput.Clients.find(\r\n        (x) => x.memberKey === MEMBER.CHILD.Key\r\n      );\r\n      const hasChild =\r\n        hasChildArray === undefined || hasChildArray.length === 0\r\n          ? false\r\n          : true; */\r\n\r\n      const ownerID = dataInput.Clients.length > 1 ? 2 : 1;\r\n      \r\n      /* if (gov === undefined || govDB === undefined) {\r\n        const sourceGovSurv = {\r\n          id: dataInput.Sources.length + 1, //sourcesNo + 1,\r\n          sourceTypeKey: INCOMESOURCES.GOV_SURVIVORS_PENSION.Key,\r\n          amount: hasSpouse ? parseInt(dataOutput.govBenefits.cppSurvivor) : 0, // * this.state.dataInput.Clients[QUOTE_CLIENT].Eligibility) / 100,\r\n          startYear: 0,\r\n          duration: 100,\r\n          ownerID: ownerID,\r\n        };\r\n        const sourceGovDB = {\r\n          id: dataInput.Sources.length + 2,\r\n          sourceTypeKey: INCOMESOURCES.GOV_DEATH_BENEFIT.Key,\r\n          amount: parseInt(dataOutput.govBenefits.cppDB),\r\n          startYear: 0,\r\n          duration: 100,\r\n          ownerID: ownerID,\r\n        };\r\n        if (hasSpouse) dataInput.Sources.push(sourceGovSurv); // add at begi\r\n        dataInput.Sources.push(sourceGovDB);\r\n      } else {\r\n        gov.amount = hasSpouse\r\n          ? parseInt(dataOutput.govBenefits.cppSurvivor)\r\n          : 0;\r\n\r\n        govDB.amount = parseInt(dataOutput.govBenefits.cppDB);\r\n      }\r\n       */\r\n      if (gov === undefined) {\r\n        const sourceGovSurv = {\r\n          id: dataInput.Sources.length + 1, //sourcesNo + 1,\r\n          sourceTypeKey: INCOMESOURCES.GOV_SURVIVORS_PENSION.Key,\r\n          amount: hasSpouse ? parseInt(dataOutput.govBenefits.cppSurvivor) : 0, // * this.state.dataInput.Clients[QUOTE_CLIENT].Eligibility) / 100,\r\n          startYear: 0,\r\n          duration: 100,\r\n          ownerID: ownerID,\r\n        };\r\n        if (hasSpouse) dataInput.Sources.push(sourceGovSurv); // add at begi\r\n        \r\n      } else {\r\n        gov.amount = hasSpouse\r\n          ? parseInt(dataOutput.govBenefits.cppSurvivor)\r\n          : 0;\r\n      }\r\n      \r\n      if (govDB === undefined) {\r\n        const sourceGovDB = {\r\n          id: dataInput.Sources.length + 2,\r\n          sourceTypeKey: INCOMESOURCES.GOV_DEATH_BENEFIT.Key,\r\n          amount: parseInt(dataOutput.govBenefits.cppDB),\r\n          startYear: 0,\r\n          duration: 100,\r\n          ownerID: ownerID,\r\n        };\r\n        dataInput.Sources.push(sourceGovDB);\r\n      } else {\r\n        govDB.amount = parseInt(dataOutput.govBenefits.cppDB);\r\n      }\r\n            \r\n      \r\n      const govOrph = INCOMESOURCES.GOV_ORPHANS_BENEFIT.Key;\r\n\r\n      //let govOrphans = this.state.dataInput.Sources.find(x => x.sourceTypeKey=== \"GOV_ORPHANS_BENEFIT\");\r\n      let govOrphans = dataInput.Sources.filter(function (item) {\r\n        return item.sourceTypeKey === govOrph;\r\n      });\r\n\r\n      dataInput = await this.manageOrphanSync(dataInput, dataOutput); //}\r\n    }\r\n    return dataInput;\r\n  };\r\n\r\n  componentDidMount = async () => {\r\n    document.title = APPLET_INA ? \"INA\" : \"EP\";\r\n    this.intervalID = setInterval(this.loadData, 100000);\r\n    localStorage.setItem(\"INAAPIFails\", parseInt(0));\r\n    this.OKToRemove = true;\r\n    const query = queryString.parse(window.location.search);\r\n     \r\n    if (query.QS !== undefined) {\r\n\r\n      await this.handleInitilizeQuoteFromQueryString(query.QS);\r\n    } else {\r\n      await this.handleIntitalFetch(query.lang === \"fr\" || global.langFr? \"fr\" : \"en\");\r\n    }\r\n    \r\n    if (query.recover !== undefined) {\r\n      if (query.recover === \"true\") {\r\n        let d = new Date();\r\n        d = d.setHours(d.getHours(), d.getMinutes() - 5, 0, 0);\r\n        const objJSONData = JSON.parse(\r\n          localStorage.getItem(APPLET_INA ? \"INAData\" : \"EP\")\r\n        );\r\n       \r\n        var dRecover = new Date(\r\n          objJSONData.dataPresentations.Presentations[0].valuationDate\r\n        );\r\n        dRecover = new Date(\r\n          objJSONData.dataPresentations.Presentations[0].presentationDate\r\n        );\r\n         if (dRecover > d) {\r\n          await this.loadStorage();\r\n          hideRecover();\r\n        }\r\n      }\r\n    }\r\n    console.log(query)\r\n    if (query.snapimport !== undefined) {\r\n      if (query.snapimport === \"1\") {\r\n        this.setState({SnapImport: true});\r\n      }\r\n    }\r\n   \r\n  };\r\n\r\n  handleIntitalFetch = async (lang) => {\r\n    //let presentation = this.state.dataInput.Presentations[0];\r\n    /* await this.handleUpdatePresentation(presentation, true);\r\n\r\n    await this.govBenefits(); */\r\n\r\n    this.setState({ loading: true });\r\n    let { dataInput, dataOutput } = this.state;\r\n    const newDataInput = _.cloneDeep(dataInput);\r\n    const newDataOutput = _.cloneDeep(dataOutput);\r\n\r\n    let presentation = newDataInput.Presentations[0];\r\n\r\n    // update tax rate\r\n    /* if (\r\n      init === true ||\r\n      newDataInput.Presentations[0].provinceKey !== presentation.provinceKey\r\n    ) */ {\r\n      const tr = await getTaxRate(\r\n        \"PERSONAL_INCOME\",\r\n        presentation.provinceKey\r\n        //convertProvince(presentation.provinceKey, this.state.dataInput.Presentations[0].language)\r\n      );\r\n      presentation.taxRate = (Math.round(tr * 10000) / 100).toFixed(4);\r\n    }\r\n\r\n    \r\n    // update gov bens\r\n    /* if (presentation.provinceKey === \"QC\" || this.state.dataInput.Presentations[0].provinceKey === \"QC\") {\r\n\r\n      await this.handleUpdateGovbenefits(presentation.provinceKey)\r\n      \r\n    } */\r\n\r\n    //await this.handleUpdateGovbenefits(presentation.provinceKey)\r\n    // set new lang if coming from lang change in landing page\r\n    presentation.language = lang;\r\n    newDataInput.Presentations[0] = presentation;\r\n\r\n    //this.AddInitialGovBenefits(newDataInput);\r\n\r\n    // first asset needs to be updated with grid etc\r\n    const newState = await this.reSync_reCalculate_reRender(\r\n      newDataInput,\r\n      newDataOutput,\r\n      //COLLAPSIBLE_ASSETS,\r\n      COLLAPSIBLE_UPDATE_ALL, // make sure initial from file, new default updates all\r\n      1,\r\n      0,\r\n      false // initial case is on set to 1, any change after this removes recover\r\n    );\r\n\r\n    // before eupdating state, resync, recalcuate, update state to re_render\r\n    this.setState({ ...newState, loading: false, initialLoading: false });\r\n\r\n    \r\n  };\r\n\r\n \r\n  handleUpdateOutput = async (\r\n    newStateCandidateInput,\r\n    dataOutput,\r\n    itemToUpdateGroup,\r\n    itemToUpdateID\r\n  ) => {\r\n\r\ntry {\r\n\r\n\r\n    //await this.handleFetchInsuranceNeeds();\r\n    const dataNA = await setUIDataToAPI(newStateCandidateInput);\r\n\r\n    // close results tab to avoid numerous recalcs\r\n    // this.openCollapsible[COLLAPSIBLE_RESULTS].open = false;\r\n\r\n    // main output data\r\n    const data = await handleFetchInsuranceNeedsNew(\r\n      dataNA,\r\n      newStateCandidateInput\r\n    );\r\n    let newStateCandidateOutput = this.populateOutput2(data, dataOutput);\r\n    // assets projs , do all assets if it is from a saved file we need all for RESULTS\r\n    if (\r\n      newStateCandidateOutput.assetProjections !== null &&\r\n      (itemToUpdateGroup === COLLAPSIBLE_ASSETS ||\r\n        itemToUpdateGroup === COLLAPSIBLE_RESULTS ||\r\n        itemToUpdateGroup === COLLAPSIBLE_UPDATE_ALL ||\r\n        newStateCandidateOutput.assetProjections.length <\r\n          newStateCandidateInput.Assets.length)\r\n    )\r\n      newStateCandidateOutput.assetProjections = await this.updateAssetProjectionOutput(\r\n        dataNA,\r\n        newStateCandidateInput,\r\n        newStateCandidateOutput,\r\n        itemToUpdateGroup,\r\n        itemToUpdateID\r\n      );\r\n\r\n    // set new encrpt file that now has calculated ins. Amt\r\n    // need to only pass client & spouse to EP and Client only to others\r\n    let newDataInputClient12 = _.cloneDeep(newStateCandidateInput);\r\n    // remove sources based on child\r\n    newDataInputClient12.Clients.forEach((element) => {\r\n      if(element.memberKey===MEMBER.CHILD.Key || element.memberKey===MEMBER.DEPENDENT_ADULT.Key)\r\n        newDataInputClient12.Sources=newDataInputClient12.Sources.filter((item)=>{return (item.ownerID!==element.id)} )\r\n    })\r\n    newDataInputClient12.Clients=newDataInputClient12.Clients.filter((item)=>{return (item.memberKey===MEMBER.CLIENT.Key || item.memberKey===MEMBER.SPOUSE.Key)}) \r\n \r\n    newStateCandidateOutput.encryptedInputLife1AndSpouse = await this.handleQueryString(\r\n      MODE_ONLY_GET_ENCRYPTED_QS,\r\n      newDataInputClient12,\r\n      newStateCandidateOutput\r\n    );\r\n    \r\n    // need to only pass client who is to be insured and not JLTD\r\n    let newDataInputClient1 = _.cloneDeep(newStateCandidateInput);\r\n    newDataInputClient1.Clients=newDataInputClient1.Clients.filter((item)=>{return item.memberKey===MEMBER.CLIENT.Key}) \r\n    \r\n    newStateCandidateOutput.encryptedInputLife1 = await this.handleQueryString(\r\n      MODE_ONLY_GET_ENCRYPTED_QS,\r\n      newDataInputClient1,\r\n      newStateCandidateOutput\r\n    ); // set this.dataQS\r\n    //newStateCandidateOutput.encryptedInput = this.dataQS;\r\n    // liabs projs\r\n    // aggregate grid proj\r\n    newStateCandidateOutput.aggregateGrid = await this.updateOutputData(\r\n      newStateCandidateInput,\r\n      newStateCandidateOutput\r\n    );\r\n    return newStateCandidateOutput;\r\n  \r\n  } catch (error) {\r\n    return null\r\n  }\r\n  };\r\n  /* end Region */\r\n\r\n  updateAssetProjectionOutput = async (\r\n    dataNA,\r\n    newStateCandidateInput,\r\n    newStateCandidateOutput,\r\n    itemToUpdateGroup,\r\n    itemToUpdateID\r\n  ) => {\r\n    for (let i = 0; i < newStateCandidateInput.Assets.length; i++) {\r\n      const element = newStateCandidateInput.Assets[i];\r\n      if (\r\n        element.id === itemToUpdateID ||\r\n        itemToUpdateGroup === COLLAPSIBLE_RESULTS || itemToUpdateGroup === COLLAPSIBLE_UPDATE_ALL\r\n      ) {\r\n        let projection = await getAssetGridValues(\r\n          dataNA,\r\n          element,\r\n          newStateCandidateInput.Presentations[0].language,\r\n          false\r\n        ); //    this.updateProjection2(element,dataNA)\r\n        let a = newStateCandidateOutput.assetProjections.find(\r\n          (e) => e.id === element.id\r\n        );\r\n        if (a !== undefined) {\r\n          a.grid = projection;\r\n        } else\r\n          newStateCandidateOutput.assetProjections.push({\r\n            id: element.id,\r\n            grid: projection,\r\n          });\r\n\r\n      }\r\n    }\r\n\r\n    return newStateCandidateOutput.assetProjections;\r\n  };\r\n\r\n  populateOutput2 = (dataOutputCandidate, dataOutput) => {\r\n    try {\r\n     // console.log( dataOutput)\r\n      dataOutput.dataInsuranceNeeds = dataOutputCandidate.dataInsuranceNeeds;\r\n      dataOutput.dataCashFlowPersonal =\r\n        dataOutputCandidate.dataCashFlowPersonal.numericValues;\r\n      dataOutput.dataTaxLiability =\r\n        dataOutputCandidate.dataTaxLiability.numericValues;\r\n      dataOutput.dataCashFlowGov =\r\n        dataOutputCandidate.dataCashFlowGov.numericValues;\r\n      dataOutput.dataCashFlowNeeds =\r\n        dataOutputCandidate.dataCashFlowNeeds.numericValues;\r\n      dataOutput.dataNAAges = dataOutputCandidate.dataNAAges.numericValues;\r\n      dataOutput.dataShortfall =\r\n        dataOutputCandidate.dataShortfall.numericValues;\r\n      dataOutput.govBenefits.cppSurvivor = dataOutputCandidate.cpp;\r\n      dataOutput.govBenefits.cppDB = dataOutputCandidate.cppDB;\r\n      dataOutput.govBenefits.cppOrphan = dataOutputCandidate.orphan;\r\n      dataOutput.probate = dataOutputCandidate.probate;\r\n      dataOutput.lifeExpectancy.client = dataOutputCandidate.lifeExpClient;\r\n      dataOutput.lifeExpectancy.spouse = dataOutputCandidate.lifeExp;\r\n      dataOutput.lifeExpectancy.joint = dataOutputCandidate.lifeExpJLTD;\r\n      dataOutput.encryptedInputLife1AndSpouse = dataOutputCandidate.encryptedInputLife1AndSpouse;\r\n      dataOutput.encryptedInputLife1=dataOutputCandidate.encryptedInputLife1;\r\n      return dataOutput;\r\n    } catch (error) {\r\n      alert(\"Could not connect to the calculation engine API\");\r\n      return dataOutput;\r\n    }\r\n  };\r\n\r\n  populateOutput = async (data) => {\r\n    let dataOutput = this.state.dataOutput;\r\n\r\n    dataOutput.dataInsuranceNeeds = data.dataInsuranceNeeds;\r\n    dataOutput.dataCashFlowPersonal = data.dataCashFlowPersonal.numericValues;\r\n    dataOutput.dataTaxLiability = data.dataTaxLiability.numericValues;\r\n    dataOutput.dataCashFlowGov = data.dataCashFlowGov.numericValues;\r\n    dataOutput.dataCashFlowNeeds = data.dataCashFlowNeeds.numericValues;\r\n    dataOutput.dataNAAges = data.dataNAAges.numericValues;\r\n    dataOutput.dataShortfall = data.dataShortfall.numericValues;\r\n    dataOutput.govBenefits.cppSurvivor = data.cpp;\r\n    dataOutput.govBenefits.cppDB = data.cppDB;\r\n    dataOutput.govBenefits.cppOrphan = data.orphan;\r\n    dataOutput.lifeExpectancy.client = data.lifeExpClient;\r\n    dataOutput.lifeExpectancy.spouse = data.lifeExp;\r\n    dataOutput.lifeExpectancy.joint = data.lifeExpJLTD;\r\n\r\n    this.setState({ dataOutput: dataOutput });\r\n  };\r\n\r\n  handleQueryString = async (mode, dataInput, dataOutput) => {\r\n    const lang = dataInput.Presentations[0].language;\r\n    const insuranceNeed =\r\n      dataOutput.dataInsuranceNeeds[\r\n        dataInput.Presentations[0].periodOption\r\n      ].Value;\r\n    let dataNA = await setUIDataToAPI(dataInput, insuranceNeed);\r\n    let data = await handleFetchQueryString(dataNA);\r\n    if (data !== undefined) {\r\n      this.dataQS = data;\r\n      if (mode === MODE_ONLY_GET_ENCRYPTED_QS) return data;\r\n      else if (mode === MODE_SAVE) this.setState({ showMsg: true });\r\n      else if (mode === MODE_EMAIL) {\r\n        let url =\r\n          \"mailto: ?subject= \" +\r\n          (APPLET_INA ? TITLES[lang].appletINA : TITLES[lang].appletEP) +\r\n          \" &body= \" +\r\n          (EMAIL[lang].body +\r\n            \".%0D%0A\" +\r\n            appSiteParent +\r\n            \"?applet=EP&QS=\" +\r\n            this.dataQS);\r\n\r\n        const ft =\r\n          appSiteParent +\r\n          \"/?\" +\r\n          [\"applet=\" + DISPLAY_NAME, \"QS=\" + this.dataQS].join(\"&\");\r\n        url =\r\n          \"mailto: ?subject= \" +\r\n          (APPLET_INA ? TITLES[lang].appletINA : TITLES[lang].appletEP) +\r\n          \" &body= \" +\r\n          EMAIL[lang].body +\r\n          \".%0D%0A\" +\r\n          encodeURIComponent(ft);\r\n\r\n        \r\n        window.location.href = url;\r\n      }\r\n    }\r\n  };\r\n\r\n  handleInitilizeQuoteFromQueryString = async (savedINA_QS) => {\r\n   // console.log(savedINA_QS)\r\n    const data = await handleFetchINADataFromQueryString(savedINA_QS);\r\n    let objJSONData = await loadSavedDataToUI(data, this.state.dataInput);\r\n   \r\n    // put loaded data to quote and show\r\n    this.updateStateFromJSon(objJSONData);\r\n  };\r\n\r\n  handleUpdateClient = async (client) => {\r\n    // keep render to just once until or if needed. this also avoids flshing page before final render\r\n\r\n    // replacing spouse with child\r\n    /* const replaceSpouseWithChild=client.memberKey === MEMBER.CHILD.Key && this.state.dataInput.Clients[client.id-1].memberKey === MEMBER.SPOUSE.Key \r\n    if (replaceSpouseWithChild)\r\n    {\r\n      client.id=client.id+1;\r\n      await this.handleAddClient(client);\r\n      //client.id=client.id-1;\r\n      this.handleRemoveClient(client.id-1);\r\n\r\n    }\r\n    else */\r\n    {\r\n      this.setState({ loading: true });\r\n\r\n      const { dataOutput, dataInput } = this.state;\r\n      let newDataInput = _.cloneDeep(dataInput);\r\n      const newDataOutput = _.cloneDeep(dataOutput);\r\n    \r\n      if (client.Age > client.retirementAge)\r\n        client.retirementAge = client.Age + 1;\r\n      const redoAll =\r\n        client.memberKey !== newDataInput.Clients[QUOTE_CLIENT].memberKey ||\r\n        client.Age !== newDataInput.Clients[QUOTE_CLIENT].Age ||\r\n        client.Eligibility !== newDataInput.Clients[QUOTE_CLIENT].Eligibility ||\r\n        client.avgTaxRate !== newDataInput.Clients[QUOTE_CLIENT].avgTaxRate ||\r\n        (newDataInput.Clients.count > 1 &&\r\n          (client.Age !== newDataInput.Clients[QUOTE_SPOUSE].Age ||\r\n            client.avgTaxRate !==\r\n              newDataInput.Clients[QUOTE_SPOUSE].avgTaxRate));\r\n      newDataInput.Clients[client.id - 1] = client;\r\n\r\n      const newState = await this.reSync_reCalculate_reRender(\r\n        newDataInput,\r\n        newDataOutput,\r\n        redoAll ? COLLAPSIBLE_UPDATE_ALL : COLLAPSIBLE_CLIENTS, // need to redo a\r\n        client.id\r\n      );\r\n      this.setState({ ...newState, loading: false });\r\n    }\r\n  };\r\n\r\n  reSync_reCalculate_reRender = async (\r\n    newStateCandidateInput,\r\n    dataOutput,\r\n    itemToUpdateGroup,\r\n    itemToUpdateID,\r\n    debounce,\r\n    saveToStorage\r\n  ) => {\r\n\r\ntry {\r\n  \r\n    // reSync\r\n    newStateCandidateInput = await this.syncPanelsValues2(\r\n      newStateCandidateInput,\r\n      itemToUpdateGroup\r\n    );\r\n\r\n    let newStateCandidateOutput;\r\n    \r\n    // reCalculate\r\n    if (debounce)\r\n      newStateCandidateOutput = await this.debounceHandleUpdateOutput(\r\n        newStateCandidateInput,\r\n        dataOutput,\r\n        itemToUpdateGroup,\r\n        itemToUpdateID\r\n      );\r\n    else\r\n      newStateCandidateOutput = await this.handleUpdateOutput(\r\n        newStateCandidateInput,\r\n        dataOutput,\r\n        itemToUpdateGroup,\r\n        itemToUpdateID\r\n      );\r\n\r\n    newStateCandidateInput = await this.govBenefitsSync(\r\n      newStateCandidateInput,\r\n      newStateCandidateOutput\r\n    );\r\n\r\n    newStateCandidateInput = await this.probateSync(\r\n      newStateCandidateInput,\r\n      newStateCandidateOutput\r\n    );\r\n\r\n\r\n    if (saveToStorage !== false) this.debounceSaveToStorage();\r\n    return {\r\n      dataInput: newStateCandidateInput,\r\n      dataOutput: newStateCandidateOutput,\r\n    };\r\n  } catch (error) {\r\n  \r\n  }\r\n };\r\n\r\n  updateOutputData = async (\r\n    newStateCandidateInput,\r\n    newStateCandidateOutput\r\n  ) => {\r\n    if (true) {\r\n      //APPLET_INA) {\r\n      /* let insNeed = 0;\r\n      let insNeedRet = 0;\r\n      let insNeedLE = 0;\r\n      let insNeedEAge = 0;\r\n      let insNeedLE3 = 0; */\r\n      let dataGov;\r\n      let dataAges;\r\n      let dataPCV;\r\n      let dataNeed;\r\n      let dataShort;\r\n\r\n      //    let hasSurivor = false;\r\n\r\n      let aggregateGrid;\r\n\r\n      /*       const spKey = APPLET_INA ? MEMBER.SPOUSE.Key : MEMBER.CLIENT.Key;\r\n            let Survivor = this.state.dataInput.Clients.find(x => x.memberKey === spKey);\r\n      \r\n            if (Survivor !== undefined) {\r\n              hasSurivor = true;\r\n            }\r\n       */\r\n      const Survivor = newStateCandidateInput.Clients[this.survIdx]; //.find(x => x.memberKey === spKey);\r\n      const Survivors = newStateCandidateInput.Clients.filter((item) => {\r\n        return item.id > 1;\r\n      });\r\n\r\n      /* if (Survivor !== undefined) {\r\n        hasSurivor = true;\r\n      }\r\n */\r\n      const insuranceNeeds = newStateCandidateOutput.dataInsuranceNeeds;\r\n      const periodOption = newStateCandidateInput.Presentations[0].periodOption;\r\n\r\n      const inputOutputIsValid =\r\n        insuranceNeeds.length > 0 &&\r\n        newStateCandidateOutput.dataNAAges !== undefined &&\r\n        Survivor !== undefined;\r\n\r\n      if (inputOutputIsValid) {\r\n        /* if (newStateCandidateOutput.dataInsuranceNeeds.length > 0) {\r\n          insNeed =\r\n            periodOption === DISPLAY_RETIREMENT\r\n              ? insuranceNeeds[DISPLAY_RETIREMENT].Value\r\n              : periodOption === DISPLAY_LIFEEXP\r\n              ? insuranceNeeds[DISPLAY_LIFEEXP].Value\r\n              : periodOption === DISPLAY_LIFEEXP_PLUS_3\r\n              ? getINA_LifeExp_Plus_yrs(\r\n                  insuranceNeeds[DISPLAY_LIFEEXP].Value,\r\n                  newStateCandidateOutput.dataShortfall,\r\n                  newStateCandidateInput.Presentations[0].invRate,\r\n                  newStateCandidateOutput.lifeExpectancy.spouse,\r\n                  3\r\n                )\r\n              : insuranceNeeds[DISPLAY_ENDAGE].Value;\r\n          insNeedRet = insuranceNeeds[DISPLAY_RETIREMENT].Value;\r\n          insNeedLE = insuranceNeeds[DISPLAY_LIFEEXP].Value;\r\n          insNeedEAge = insuranceNeeds[DISPLAY_ENDAGE].Value;\r\n          insNeedLE3 =\r\n            newStateCandidateOutput.dataShortfall !== undefined\r\n              ? getINA_LifeExp_Plus_yrs(\r\n                  insuranceNeeds[DISPLAY_LIFEEXP].Value,\r\n                  newStateCandidateOutput.dataShortfall,\r\n                  newStateCandidateInput.Presentations[0].invRate,\r\n                  newStateCandidateOutput.lifeExpectancy.joint,\r\n                  3\r\n                )\r\n              : insNeed;\r\n        } */\r\n\r\n        const projYears = familyProjectionYears(\r\n          newStateCandidateInput.Clients,\r\n          periodOption,\r\n          newStateCandidateOutput.lifeExpectancy,\r\n          insuranceNeeds,\r\n          newStateCandidateOutput.dataShortfall,\r\n          newStateCandidateInput.Presentations[0]\r\n        );\r\n        const insNeed = projYears.insuranceNeed;\r\n        const insNeedRet = projYears.insuranceNeedToRet;\r\n        const insNeedLE = projYears.insuranceNeedToLE;\r\n        const insNeedLE3 = projYears.insuranceNeedToLE3;\r\n        const insNeedEAge = projYears.insuranceNeedToEnd;\r\n        const singleFamily = isSingleFamily(newStateCandidateInput.Clients);\r\n        const projectEnd = projYears.projectionEnd;\r\n        const noProjectYrs = projYears.noProjectionYrs;\r\n        const survAge = projYears.survivorAge;\r\n        if (singleFamily) {\r\n          // use years\r\n          newStateCandidateOutput.dataNAAges = [];\r\n          for (let i = 0; i < noProjectYrs; i++)\r\n            newStateCandidateOutput.dataNAAges.push(i + 1);\r\n          \r\n        }\r\n        /*     let projectEnd = 65;\r\n        let noProjectYrs = 0;\r\n        let survAge;\r\n\r\n        if (this.survIdx !== -1 && this.survIdx !== undefined) {\r\n          projectEnd =\r\n            periodOption === DISPLAY_RETIREMENT\r\n              ? newStateCandidateInput.Clients[this.survIdx].retirementAge\r\n              : periodOption === DISPLAY_LIFEEXP\r\n              ? newStateCandidateOutput.lifeExpectancy.spouse +\r\n                newStateCandidateInput.Clients[this.survIdx].Age\r\n              : periodOption === DISPLAY_ANALYSIS\r\n              ? newStateCandidateOutput.lifeExpectancy.joint +\r\n                newStateCandidateInput.Clients[this.survIdx].Age +\r\n                3\r\n              : 99;\r\n          noProjectYrs =\r\n            projectEnd - newStateCandidateInput.Clients[this.survIdx].Age;\r\n          survAge = newStateCandidateInput.Clients[this.survIdx].Age;\r\n        } else survAge = newStateCandidateInput.Clients[QUOTE_CLIENT].Age;\r\n */\r\n        dataAges = newStateCandidateOutput.dataNAAges.slice(0, noProjectYrs);\r\n\r\n        dataGov = newStateCandidateOutput.dataCashFlowGov.slice(\r\n          0,\r\n          noProjectYrs\r\n        );\r\n        dataPCV = newStateCandidateOutput.dataCashFlowPersonal.slice(\r\n          0,\r\n          noProjectYrs\r\n        );\r\n        dataNeed = newStateCandidateOutput.dataCashFlowNeeds.slice(\r\n          0,\r\n          noProjectYrs\r\n        );\r\n        dataShort = newStateCandidateOutput.dataShortfall.slice(\r\n          0,\r\n          noProjectYrs\r\n        );\r\n\r\n        if (APPLET_INA) {\r\n          aggregateGrid = await getINAGridData(\r\n            insNeed,\r\n            insNeedRet,\r\n            insNeedLE,\r\n            dataPCV,\r\n            //  Survivor,\r\n            Survivors,\r\n            dataNeed,\r\n            dataGov,\r\n            dataShort,\r\n            newStateCandidateInput.Presentations[0].inflation,\r\n            newStateCandidateInput.Presentations[0].language,\r\n            newStateCandidateInput.Presentations[0].invRate,\r\n            newStateCandidateInput.Sources,\r\n            newStateCandidateOutput.govBenefits.cppDB *\r\n              (1 -\r\n                newStateCandidateInput.Clients[QUOTE_CLIENT].avgTaxRate / 100)\r\n          );\r\n        } else if (APPLET_EP) {\r\n          aggregateGrid = await getEPGridData(\r\n            noProjectYrs,\r\n            newStateCandidateInput\r\n          );\r\n        }\r\n      }\r\n      return aggregateGrid;\r\n    }\r\n  };\r\n\r\n  switchClients = async () => {\r\n    if (\r\n      this.state.dataInput.Clients.find(\r\n        (x) => x.memberKey === MEMBER.SPOUSE.Key\r\n      ) !== undefined\r\n    ) {\r\n      /*  let data2 = this.state.dataInput;\r\n      let client1 = data2.Clients[QUOTE_CLIENT];\r\n      data2.Clients[QUOTE_CLIENT] = data2.Clients[QUOTE_SPOUSE];\r\n      data2.Clients[QUOTE_SPOUSE] = client1;\r\n      // keep member\r\n      data2.Clients[QUOTE_CLIENT].memberKey = MEMBER.CLIENT.Key;\r\n      data2.Clients[QUOTE_SPOUSE].memberKey = MEMBER.SPOUSE.Key;\r\n */\r\n\r\n      this.setState({ loading: true });\r\n/* \r\n      const { dataOutput, dataInput } = this.state;\r\n      const newDataInput = _.cloneDeep(dataInput);\r\n      const newDataOutput = _.cloneDeep(dataOutput);\r\n      let client1 = newDataInput.Clients[QUOTE_CLIENT];\r\n      newDataInput.Clients[QUOTE_CLIENT] = newDataInput.Clients[QUOTE_SPOUSE];\r\n      newDataInput.Clients[QUOTE_SPOUSE] = client1;\r\n      newDataInput.Assets.forEach((element) => {\r\n        if (\r\n          element.ownerKey === ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key ||\r\n          element.ownerKey === ASSET_OWNERSHIP_ACTION.CLIENT_ROLLOVER.Key\r\n        ) {\r\n          element.ownerKey = ASSET_OWNERSHIP_ACTION.SPOUSE.Key;\r\n        } else if (element.ownerKey === ASSET_OWNERSHIP_ACTION.SPOUSE.Key) {\r\n          element.ownerKey =\r\n            element.assetTypeKey === ASSETS.LIFE_INSURANCE.Key\r\n              ? ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key\r\n              : ASSET_OWNERSHIP_ACTION.CLIENT_ROLLOVER.Key;\r\n        }\r\n      });\r\n      newDataInput.Liabilitys.forEach((element) => {\r\n        if (element.ownerID === 0) {\r\n          element.ownerID = QUOTE_SPOUSE + 1;\r\n        }\r\n      });\r\n\r\n      newDataInput.Liabilitys.forEach((element) => {\r\n        if (element.ownerID === QUOTE_CLIENT + 1) {\r\n          element.ownerID = 0;\r\n        }\r\n        if (element.ownerID === QUOTE_SPOUSE + 1) {\r\n          element.ownerID = QUOTE_CLIENT + 1;\r\n        }\r\n      });\r\n      newDataInput.Liabilitys.forEach((element) => {\r\n        if (element.ownerID === 0) {\r\n          element.ownerID = QUOTE_SPOUSE + 1;\r\n        }\r\n      });\r\n\r\n      // keep member\r\n      newDataInput.Clients[QUOTE_CLIENT].memberKey = MEMBER.CLIENT.Key;\r\n      newDataInput.Clients[QUOTE_SPOUSE].memberKey = MEMBER.SPOUSE.Key;\r\n\r\n      newDataInput.Clients[QUOTE_CLIENT].id = QUOTE_CLIENT + 1;\r\n      newDataInput.Clients[QUOTE_SPOUSE].id = QUOTE_SPOUSE + 1;\r\n\r\n      const newState = await this.reSync_reCalculate_reRender(\r\n        newDataInput,\r\n        newDataOutput,\r\n        COLLAPSIBLE_RESULTS, // to updateAll\r\n        0\r\n      ); */\r\n\r\n      const newState = await this.getSwitchClientsState();\r\n\r\n      this.setState({ ...newState, loading: false });\r\n\r\n      /* \r\n      data2 = this.syncPanelsValues2(data2);\r\n      this.setState({ dataInput: data2 }, () =>\r\n        this.waitForSetStateCallback(0)\r\n      ); */\r\n    }\r\n  };\r\n\r\n\r\n  getSwitchClientsState= async ()=>{\r\n  const { dataOutput, dataInput } = this.state;\r\n  const newDataInput = _.cloneDeep(dataInput);\r\n  const newDataOutput = _.cloneDeep(dataOutput);\r\n  let client1 = newDataInput.Clients[QUOTE_CLIENT];\r\n  newDataInput.Clients[QUOTE_CLIENT] = newDataInput.Clients[QUOTE_SPOUSE];\r\n  newDataInput.Clients[QUOTE_SPOUSE] = client1;\r\n  newDataInput.Assets.forEach((element) => {\r\n    if (\r\n      element.ownerKey === ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key ||\r\n      element.ownerKey === ASSET_OWNERSHIP_ACTION.CLIENT_ROLLOVER.Key\r\n    ) {\r\n      element.ownerKey = ASSET_OWNERSHIP_ACTION.SPOUSE.Key;\r\n    } else if (element.ownerKey === ASSET_OWNERSHIP_ACTION.SPOUSE.Key) {\r\n      element.ownerKey =\r\n        element.assetTypeKey === ASSETS.LIFE_INSURANCE.Key\r\n          ? ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key\r\n          : ASSET_OWNERSHIP_ACTION.CLIENT_ROLLOVER.Key;\r\n    }\r\n  });\r\n  newDataInput.Liabilitys.forEach((element) => {\r\n    if (element.ownerID === 0) {\r\n      element.ownerID = QUOTE_SPOUSE + 1;\r\n    }\r\n  });\r\n\r\n  newDataInput.Liabilitys.forEach((element) => {\r\n    if (element.ownerID === QUOTE_CLIENT + 1) {\r\n      element.ownerID = 0;\r\n    }\r\n    if (element.ownerID === QUOTE_SPOUSE + 1) {\r\n      element.ownerID = QUOTE_CLIENT + 1;\r\n    }\r\n  });\r\n  newDataInput.Liabilitys.forEach((element) => {\r\n    if (element.ownerID === 0) {\r\n      element.ownerID = QUOTE_SPOUSE + 1;\r\n    }\r\n  });\r\n\r\n  // keep member\r\n  newDataInput.Clients[QUOTE_CLIENT].memberKey = MEMBER.CLIENT.Key;\r\n  newDataInput.Clients[QUOTE_SPOUSE].memberKey = MEMBER.SPOUSE.Key;\r\n\r\n  newDataInput.Clients[QUOTE_CLIENT].id = QUOTE_CLIENT + 1;\r\n  newDataInput.Clients[QUOTE_SPOUSE].id = QUOTE_SPOUSE + 1;\r\n\r\n  const newState = await this.reSync_reCalculate_reRender(\r\n    newDataInput,\r\n    newDataOutput,\r\n    COLLAPSIBLE_UPDATE_ALL, // to updateAll\r\n    0\r\n  );\r\n\r\n  return newState;\r\n}\r\n\r\n\r\n  handleUpdateAsset = async (asset) => {\r\n\r\n    this.setState({ loading: true });\r\n    const { dataInput, dataOutput } = this.state;\r\n    let newDataInput = _.cloneDeep(dataInput);\r\n    const newDataOutput = _.cloneDeep(dataOutput);\r\n    if (asset.assetTypeKey === ASSETS.RRSP_RRIF.Key) {\r\n      if(APPLET_EP)\r\n      { \r\n        if(asset.ownerKey===ASSET_OWNERSHIP_ACTION.SPOUSE.Key && newDataInput.Clients.length===1 )\r\n          asset.ownerKey=ASSET_OWNERSHIP_ACTION.CLIENT.Key // if no spouse\r\n        if(asset.assetTypeKey===ASSETS.RRSP_RRIF.Key)\r\n        {\r\n          if(asset.ownerKey!==ASSET_OWNERSHIP_ACTION.SPOUSE.Key)\r\n            asset.ownerKey=ASSET_OWNERSHIP_ACTION.CLIENT.Key\r\n        }\r\n      }\r\n      asset = this.manageRRIFBounds(asset, newDataInput.Clients);\r\n      newDataInput = this.addRRIFSource2(newDataInput, asset);\r\n    }\r\n    newDataInput.Assets[asset.id - 1] = asset;\r\n\r\n    const newState = await this.reSync_reCalculate_reRender(\r\n      newDataInput,\r\n      newDataOutput,\r\n      COLLAPSIBLE_ASSETS,\r\n      asset.id\r\n    );\r\n    this.setState({ ...newState, loading: false });\r\n      \r\n    /* this.setState(\r\n      { dataInput: dataA, loading: true },\r\n      () => this.waitForSetStateCallback(0)\r\n    ); */\r\n    //await this.updateProjection(asset)\r\n  };\r\n\r\n  manageRRIFBounds = (asset, clients) => {\r\n    const age =\r\n      asset.ownerKey === ASSET_OWNERSHIP_ACTION.SPOUSE.Key\r\n        ? clients[QUOTE_SPOUSE].Age\r\n        : clients[QUOTE_CLIENT].Age;\r\n    if (asset.RRIFStartAge < age) asset.RRIFStartAge = age;\r\n    else if (asset.RRIFStartAge > RRIF_LAST_START_AGE)\r\n      asset.RRIFStartAge = RRIF_LAST_START_AGE;\r\n    return asset;\r\n  };\r\n \r\n  handleUpdateLiability = async (liability) => {\r\n    this.setState({ loading: true });\r\n    let { dataInput, dataOutput } = this.state;\r\n    const newDataInput = _.cloneDeep(dataInput);\r\n    const newDataOutput = _.cloneDeep(dataOutput);\r\n    newDataInput.Liabilitys[liability.id - 1] = liability;\r\n\r\n    const redoAll = liability.liabTypeKey === LIABILITIES.CHARITABLE_GIFTS.Key?true:false\r\n    // before updating state, resync, recalcuate, then update state to re_render\r\n    let newState = await this.reSync_reCalculate_reRender(\r\n      newDataInput,\r\n      newDataOutput,\r\n      redoAll ? COLLAPSIBLE_UPDATE_ALL : COLLAPSIBLE_LIABS, //updateAll if liab is charitable\r\n      liability.id\r\n    );\r\n   \r\n    this.setState({ ...newState, loading: false });\r\n\r\n    \r\n  };\r\n\r\n  \r\n  handleUpdateSource = async (source) => {\r\n    this.setState({ loading: true });\r\n    let { dataInput, dataOutput } = this.state;\r\n    const newDataInput = _.cloneDeep(dataInput);\r\n    const newDataOutput = _.cloneDeep(dataOutput);\r\n    newDataInput.Sources[source.id - 1] = source;\r\n\r\n    // before updating state, resync, recalcuate, then update state to re_render\r\n    const newState = await this.reSync_reCalculate_reRender(\r\n      newDataInput,\r\n      newDataOutput,\r\n      COLLAPSIBLE_SOURCES,\r\n      source.id\r\n    );\r\n    this.setState({ ...newState, loading: false, failedRemove: false });\r\n  };\r\n\r\n  handleUpdateNeed = async (need) => {\r\n    this.setState({ loading: true });\r\n    let { dataInput, dataOutput } = this.state;\r\n    const newDataInput = _.cloneDeep(dataInput);\r\n    const newDataOutput = _.cloneDeep(dataOutput);\r\n    newDataInput.Needs[need.id - 1] = need;\r\n\r\n    // before updating state, resync, recalcuate, then update state to re_render\r\n    const newState = await this.reSync_reCalculate_reRender(\r\n      newDataInput,\r\n      newDataOutput,\r\n      COLLAPSIBLE_NEEDS,\r\n      need.id\r\n    );\r\n    this.setState({ ...newState, loading: false });\r\n\r\n    //this.setState({ dataInput: data2 }, () => this.waitForSetStateCallback(0));\r\n  };\r\n\r\n  handleUpdatePresentation = async (presentation) => {\r\n    this.setState({ loading: true });\r\n    let { dataInput, dataOutput } = this.state;\r\n    let newDataInput = _.cloneDeep(dataInput);\r\n    const newDataOutput = _.cloneDeep(dataOutput);\r\n\r\n    // update tax rate\r\n    if (\r\n      //init === true ||\r\n      newDataInput.Presentations[0].provinceKey !== presentation.provinceKey\r\n    )  {\r\n      const tr = await getTaxRate(\r\n        \"PERSONAL_INCOME\",\r\n        presentation.provinceKey\r\n        //convertProvince(presentation.provinceKey, this.state.dataInput.Presentations[0].language)\r\n      );\r\n      presentation.taxRate = (Math.round(tr * 10000) / 100).toFixed(4);\r\n    }\r\n\r\n    const pdf = await handleFetchPDF();\r\n    //  console.log(pdf)\r\n\r\n    // update gov bens\r\n    /* if (presentation.provinceKey === \"QC\" || this.state.dataInput.Presentations[0].provinceKey === \"QC\") {\r\n\r\n      await this.handleUpdateGovbenefits(presentation.provinceKey)\r\n      \r\n    } */\r\n\r\n    // update probate\r\n    /* newDataInput = await this.probateSync(\r\n      newDataInput,\r\n      newDataOutput\r\n    ); */\r\n\r\n    const redoAll = true; //presentation.taxRate !== newDataInput.Presentations[0].taxRate || presentation.inflation !== newDataInput.Presentations[0].inflation\r\n\r\n    let debounce = false;\r\n    if (\r\n      newDataInput.Presentations[0].designedBy !== presentation.designedBy ||\r\n      newDataInput.Presentations[0].designedFor !== presentation.designedFor ||\r\n      newDataInput.Presentations[0].notes !== presentation.notes\r\n    )\r\n      debounce = true;\r\n\r\n    newDataInput.Presentations[presentation.id - 1] = presentation;\r\n    const newState = await this.reSync_reCalculate_reRender(\r\n      newDataInput,\r\n      newDataOutput,\r\n      redoAll ? COLLAPSIBLE_UPDATE_ALL : COLLAPSIBLE_PRESENTATION, //updateAll if tax rate or inf rate change\r\n      presentation.id\r\n    );\r\n\r\n    // before eupdating state, resync, recalcuate, update state to re_render\r\n    this.setState({ ...newState, loading: false });\r\n    // use debounce re Notes, des for and des by\r\n    //  data2 = this.syncPanelsValues2(data2);\r\n    //  this.setState({ dataInput: data2 }, () => this.waitForSetStateCallback(0, debounce));\r\n    //this.syncPanelsValues2(2);\r\n    // await this.govBenefits();\r\n  };\r\n\r\n  saveAsDefaultCase = (clear) => {\r\n    // save as default if needed\r\n    const storageName=DEFAULT_QUOTE;\r\n    if(clear)\r\n    {\r\n      localStorage.removeItem(storageName)\r\n     \r\n    }\r\n    else{\r\n    localStorage.setItem(storageName,\r\n      JSON.stringify(this.state.dataInput)\r\n    );\r\n      \r\n  }\r\n    \r\n  };\r\n\r\n  // this updates all and changes languge for all grids\r\n  handleUpdatePresentationChange = async (presentation, noRecalc) => {\r\n    if (noRecalc) {\r\n      this.setState((prevState) => ({\r\n        dataInput: {\r\n          ...prevState.dataInput,\r\n          Presentations: [\r\n            {\r\n              ...prevState.dataInput.Presentations[0],\r\n              resultsOption: presentation.resultsOption,\r\n              periodOption: presentation.periodOption,\r\n            },\r\n          ],\r\n        },\r\n      }));\r\n    } else {\r\n      this.setState({ loading: true });\r\n      let { dataInput, dataOutput } = this.state;\r\n      const newDataInput = _.cloneDeep(dataInput);\r\n      const newDataOutput = _.cloneDeep(dataOutput);\r\n\r\n      newDataInput.Presentations[0] = presentation;\r\n\r\n      const newState = await this.reSync_reCalculate_reRender(\r\n        newDataInput,\r\n        newDataOutput,\r\n        COLLAPSIBLE_RESULTS,\r\n        0,\r\n        false,\r\n        false\r\n      );\r\n\r\n      // before eupdating state, resync, recalcuate, update state to re_render\r\n      this.setState({ ...newState, loading: false });\r\n    }\r\n  };\r\n\r\n  handleAddClient = async (client) => {\r\n    this.setState({ loading: true });\r\n    const { dataInput, dataOutput } = this.state;\r\n    let newDataInput = _.cloneDeep(dataInput);\r\n    const newDataOutput = _.cloneDeep(dataOutput);\r\n    newDataInput.Clients.push(client);\r\n    //if (client.memberKey === MEMBER.CHILD.Key)\r\n    //newDataInput = this.manageAddingChild(newDataInput);\r\n    // resync, recalcuate, then update state to re_render\r\n    // if has salary, add source\r\n\r\n    newDataInput = await this.manageAddingClientWithIncome(\r\n      newDataInput,\r\n      client\r\n    );\r\n    \r\n    // adding a client to EP changes to JLTD and existing assets are affected\r\n    \r\n    const newState = await this.reSync_reCalculate_reRender(\r\n      newDataInput,\r\n      newDataOutput,\r\n      APPLET_EP? COLLAPSIBLE_UPDATE_ALL:COLLAPSIBLE_CLIENTS,\r\n      APPLET_EP? 0:client.id\r\n    );\r\n    this.setState({ ...newState, loading: false });\r\n    //this.setState({ dataInput: data2 }, () => this.manageAddingChild());\r\n    \r\n  };\r\n\r\n  manageAddingChild = (input) => {\r\n    input = this.manageEducation2(input);\r\n    input = this.manageOrphan2(input);\r\n    return input;\r\n  };\r\n\r\n  manageAddingClientWithIncome = async (newDataInput, client) => {\r\n    let source = createDefaultSource(newDataInput.Sources.length + 1);\r\n    source.amount = client.Income;\r\n    source.duration = client.retirementAge - client.Age;\r\n    source.ownerID = client.id;\r\n    source.taxRate = client.avgTaxRate;\r\n    newDataInput.Sources.push(source);\r\n\r\n    return newDataInput;\r\n  };\r\n\r\n  manageRemovingClientWithIncome = async (dataInput) => {\r\n    // remove all salaryPct sources and re-add\r\n    dataInput.Sources = dataInput.Sources.filter(\r\n      (item) => item.sourceTypeKey !== INCOMESOURCES.SURVIVORS_INCOME.Key\r\n    );\r\n    dataInput.Clients.forEach(async (element) => {\r\n      if (element.memberKey !== MEMBER.CLIENT.Key) {\r\n        dataInput = await this.manageAddingClientWithIncome(dataInput, element);\r\n      }\r\n    });\r\n\r\n    return dataInput;\r\n  };\r\n\r\n  /*  manageAddingChild = () => {\r\n    this.manageEducation();\r\n    this.manageOrphan();\r\n    this.waitForSetStateCallback(0);\r\n  }; */\r\n\r\n  handleAddAsset = async (asset) => {\r\n    this.setState({ loading: true });\r\n\r\n    const { dataInput, dataOutput } = this.state;\r\n    let newDataInput = _.cloneDeep(dataInput);\r\n    let newDataOutput = _.cloneDeep(dataOutput);\r\n    if (asset === undefined) {\r\n      asset = createDefaultAsset(1);\r\n    }\r\n\r\n    //  dataInput.assetsNo++;\r\n    newDataInput.Assets.push(asset);\r\n   \r\n\r\n    // resync, recalcuate, then update state to re_render\r\n    const newState = await this.reSync_reCalculate_reRender(\r\n      newDataInput,\r\n      newDataOutput,\r\n      COLLAPSIBLE_ASSETS,\r\n      asset.id\r\n    );\r\n    this.setState({ ...newState, loading: false });\r\n\r\n    /*     this.setState({ dataInput: dataInput, loading: true }, () =>\r\n      this.waitForSetStateCallback(0) // no need to save to storage when default is added\r\n    );\r\n */ //await this.updateProjection(asset)\r\n  };\r\n\r\n  updateProjection = async (asset) => {\r\n    /*  updateProjection = async (asset) => {\r\n         let dataOA = this.state.output\r\n      let dataNA = await setUIDataToAPI(this.state);\r\n      dataOA.assetProjection = await getAssetGridValues(dataNA, asset, this.state.dataInput.Presentations[0].language, false)\r\n      this.setState({ output: dataOA, loading: false }); */\r\n    let dataInput = this.state.dataInput;\r\n\r\n    const insuranceNeed = this.state.dataOutput.dataInsuranceNeeds[\r\n      dataInput.Presentations[0].periodOption\r\n    ].Value;\r\n    let dataNA = await setUIDataToAPI(this.state.dataInput, insuranceNeed);\r\n    dataInput.Assets[asset.id - 1].projection = await getAssetGridValues(\r\n      dataNA,\r\n      asset,\r\n      this.state.dataInput.Presentations[0].language,\r\n      false\r\n    );\r\n    \r\n    this.setState({ dataInput: dataInput, loading: false });\r\n  };\r\n\r\n  handleAddLiability = async (Liab) => {\r\n    this.setState({ loading: true });\r\n    const { dataInput, dataOutput } = this.state;\r\n    const newDataInput = _.cloneDeep(dataInput);\r\n    const newDataOutput = _.cloneDeep(dataOutput);\r\n    if (Liab === undefined) {\r\n      Liab = {\r\n        id: 1,\r\n        //Type: LIABILITIES.LAST_EXPENSES.value[\"en\"],\r\n        liabTypeKey: LIABILITIES.LAST_EXPENSES.Key,\r\n        ownerKey: OWNERSHIP.CLIENT.Key,\r\n        currValue: 0,\r\n        //growthDir: GROWTHDIR[\"en\"].Values[0], //increases\r\n        growthDirKey: GROWTHDIR.GROWS.Key, //increases\r\n        growth: 0,\r\n        repay: 0,\r\n        exposureDur: 99,\r\n        assetTaxLiabID: 0,\r\n        assetTaxLiabProj: [],\r\n      };\r\n    }\r\n\r\n    newDataInput.Liabilitys.push(Liab);\r\n\r\n    // resync, recalcuate, then update state to re_render\r\n\r\n    const newState = await this.reSync_reCalculate_reRender(\r\n      newDataInput,\r\n      newDataOutput,\r\n      COLLAPSIBLE_LIABS,\r\n      Liab.id\r\n    );\r\n    this.setState({ ...newState, loading: false });\r\n\r\n    /*     this.setState({ dataInput: data2 }, () =>\r\n      this.waitForSetStateCallback(0) // no need to save to storage when default is added\r\n    ); */\r\n  };\r\n\r\n  handleAddAssetTaxCredit = (type) => {\r\n    let data2 = this.state.dataInput;\r\n    // check if already there\r\n    let taxCredit = 0;\r\n    this.state.dataInput.Liabilitys.forEach((element) => {\r\n      if (element.liabTypeKey === LIABILITIES.CHARITABLE_GIFTS.Key) {\r\n        taxCredit += element.currValue;\r\n      }\r\n    });\r\n\r\n    taxCredit *= this.state.dataInput.Presentations[0].taxRate / 100;\r\n    let exists = false;\r\n    data2.Assets.forEach((element) => {\r\n      if (element.assetTypeKey === type) {\r\n        exists = true;\r\n        if (Math.abs(element.currValue - taxCredit) > 1) {\r\n          element.currValue = taxCredit;\r\n          this.handleUpdateAsset(element);\r\n        }\r\n      }\r\n    });\r\n    if (taxCredit > 0 && exists === false) {\r\n      const asset = createDefaultAsset(this.state.dataInput.Assets.length + 1); //assetsNo + 1)\r\n      asset.assetTypeKey = ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.Key;\r\n      asset.ownerKey = ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key;\r\n      asset.assetTaxTypeKey = ASSET_TAX.NON_TAXABLE.Key;\r\n      asset.currValue = taxCredit;\r\n      asset.DisposeYr = 0;\r\n\r\n      this.handleAddAsset(asset);\r\n      this.openCollapsible[COLLAPSIBLE_ASSETS].open = COLLAPSIBLES_OPEN;\r\n    }\r\n  };\r\n\r\n  handleAddAssetTaxCredit2 = (dataInput) => {\r\n    // check if already there\r\n    let taxCredit = 0;\r\n    dataInput.Liabilitys.forEach((element) => {\r\n      if (element.liabTypeKey === LIABILITIES.CHARITABLE_GIFTS.Key) {\r\n        taxCredit += element.currValue;\r\n      }\r\n    });\r\n\r\n    taxCredit *= dataInput.Presentations[0].taxRate / 100;\r\n    let exists = false;\r\n    dataInput.Assets.forEach((element) => {\r\n      if (element.assetTypeKey ===ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.Key) {\r\n        exists = true;\r\n        if (Math.abs(element.currValue - taxCredit) > 1) {\r\n          element.currValue = taxCredit;\r\n         // this.handleUpdateAsset(element);\r\n        }\r\n      }\r\n    });\r\n    if (taxCredit > 0 && exists === false) {\r\n      const asset = createDefaultAsset(dataInput.Assets.length + 1); //assetsNo + 1)\r\n      asset.assetTypeKey = ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.Key;\r\n      asset.ownerKey = ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key;\r\n      asset.assetTaxTypeKey = ASSET_TAX.NON_TAXABLE.Key;\r\n      asset.currValue = taxCredit;\r\n      asset.DisposeYr = 0;\r\n\r\n      dataInput.Assets.push(asset)\r\n      this.openCollapsible[COLLAPSIBLE_ASSETS].open = COLLAPSIBLES_OPEN;\r\n    }\r\n    return dataInput\r\n  };\r\n\r\n\r\n  handleAddSource = async (source) => {\r\n    this.setState({ loading: true });\r\n    const { dataInput, dataOutput } = this.state;\r\n    let newDataInput = _.cloneDeep(dataInput);\r\n    let newDataOutput = _.cloneDeep(dataOutput);\r\n    if (source === undefined) {\r\n      source = createDefaultSource();\r\n    }\r\n    // duration, growthRate,ownerID,taxRate depends on clients\r\n    source.ownerID = 2; // spouse or 1st child if single fsmily57\r\n    source.duration = newDataInput.Sources[0].duration;\r\n    source.growthRate = newDataInput.Presentations[0].inflation;\r\n    source.taxRate =\r\n      newDataInput.Clients.length > 1\r\n        ? newDataInput.Clients[1].avgTaxRate\r\n        : newDataInput.Clients[0].avgTaxRate; // first survivor\r\n    \r\n    newDataInput.Sources.push(source);\r\n    // resync, recalcuate, then update state to re_render\r\n    const newState = await this.reSync_reCalculate_reRender(\r\n      newDataInput,\r\n      newDataOutput,\r\n      COLLAPSIBLE_SOURCES,\r\n      source.id\r\n    );\r\n\r\n    this.setState({ ...newState, loading: false, failedRemove: false });\r\n\r\n    \r\n  };\r\n\r\n \r\n  handleAddNeed = async (nextKey, startYear, duration) => {\r\n    this.setState({ loading: true });\r\n    const { dataInput, dataOutput } = this.state;\r\n    const newDataInput = _.cloneDeep(dataInput);\r\n    const newDataOutput = _.cloneDeep(dataOutput);\r\n\r\n    const need = {\r\n      id: newDataInput.Needs.length + 1, //needsNo,\r\n      needTypeKey: nextKey,\r\n      amount: 0,\r\n      Percent: 0,\r\n      startYear: startYear,\r\n      duration: duration,\r\n    };\r\n    newDataInput.Needs.push(need);\r\n\r\n    // resync, recalcuate, then update state to re_render\r\n    const newState = await this.reSync_reCalculate_reRender(\r\n      newDataInput,\r\n      newDataOutput,\r\n      COLLAPSIBLE_NEEDS,\r\n      need.id\r\n    );\r\n    this.setState({ ...newState, loading: false });\r\n\r\n    //    this.setState({ dataInput: data2 }, () => this.waitForSetStateCallback());\r\n  };\r\n\r\n  \r\n  handleRemoveClient = async (id) => {\r\n    if (this.OKToRemove) {\r\n      this.setState({ loading: true });\r\n      const { dataInput, dataOutput } = this.state;\r\n      let newDataInput = _.cloneDeep(dataInput);\r\n      const newDataOutput = _.cloneDeep(dataOutput);\r\n      //   this.OKToRemove = false;\r\n\r\n      // first remove source if child\r\n      let cl = newDataInput.Clients.find((x) => x.id === id);\r\n\r\n      if (cl !== undefined && cl.memberKey === MEMBER.CHILD.Key)\r\n        newDataInput = await this.manageRemoveOrphan(newDataInput, cl.ownerID);\r\n\r\n      newDataInput.Clients.splice(id - 1, 1);\r\n      let i;\r\n      newDataInput.Sources=newDataInput.Sources.filter((item) => {if(item.ownerID >=id)item.ownerID-=1});\r\n     \r\n      for (i = 1; i <= newDataInput.Clients.length; ++i) {\r\n        newDataInput.Clients[i - 1].id = i;\r\n      }\r\n      newDataInput = await this.manageRemovingClientWithIncome(newDataInput);\r\n      //data2.clientsNo = data2.Clients.length;\r\n\r\n      // resync, recalcuate, then update state to re_render\r\n      const newState = await this.reSync_reCalculate_reRender(\r\n        newDataInput,\r\n        newDataOutput,\r\n        COLLAPSIBLE_CLIENTS,\r\n        id\r\n      );\r\n      this.setState({ ...newState, loading: false });\r\n\r\n\r\n    }\r\n  };\r\n\r\n  handleRemoveAsset = async (id) => {\r\n    if (this.OKToRemove) {\r\n      //  this.OKToRemove = false;\r\n\r\n      this.setState({ loading: true });\r\n      const { dataInput, dataOutput } = this.state;\r\n      let newDataInput = _.cloneDeep(dataInput);\r\n      const newDataOutput = _.cloneDeep(dataOutput);\r\n\r\n      // remove RRIF\r\n      if (newDataInput.Assets[id - 1].assetTypeKey === ASSETS.RRSP_RRIF.Key)\r\n        newDataInput = this.removeRRIFSource(newDataInput);\r\n\r\n      newDataInput.Assets.splice(id - 1, 1);\r\n      newDataOutput.assetProjections.splice(id - 1, 1);\r\n      let i;\r\n      for (i = 1; i <= newDataInput.Assets.length; ++i) {\r\n        newDataInput.Assets[i - 1].id = i;\r\n        newDataOutput.assetProjections[i - 1].id = i;\r\n      }\r\n\r\n      // resync, recalcuate, then update state to re_render\r\n      // removing asset redoes ids need to do all grids\r\n      const newState = await this.reSync_reCalculate_reRender(\r\n        newDataInput,\r\n        newDataOutput,\r\n        COLLAPSIBLE_UPDATE_ALL,\r\n        0\r\n        //COLLAPSIBLE_ASSETS,\r\n        //id\r\n      );\r\n      this.setState({ ...newState, loading: false });\r\n      \r\n    }\r\n  };\r\n\r\n  handleRemoveLiability = async (id) => {\r\n    if (this.OKToRemove) {\r\n      // this.OKToRemove = false;\r\n\r\n      \r\n\r\n      this.setState({ loading: true });\r\n      const { dataInput, dataOutput } = this.state;\r\n      const newDataInput = _.cloneDeep(dataInput);\r\n      const newDataOutput = _.cloneDeep(dataOutput);\r\n      // if charit remove corresp asset\r\n      const charit=newDataInput.Liabilitys.filter((liab)=>liab.liabTypeKey===LIABILITIES.CHARITABLE_GIFTS.Key && liab.id===id )\r\n      if(charit !== undefined && charit.length>0)\r\n      {\r\n        const charitAsset=newDataInput.Assets.filter((asset)=>asset.assetTypeKey===ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.Key)\r\n        if(charitAsset !== undefined && charitAsset.length>0)\r\n        {\r\n          newDataInput.Assets=newDataInput.Assets.filter((asset)=>asset.assetTypeKey!==ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.Key)\r\n        let i;\r\n        for (i = 1; i <= newDataInput.Assets.length; ++i) {\r\n          newDataInput.Assets[i - 1].id = i;\r\n          newDataOutput.assetProjections[i - 1].id = i;\r\n        }\r\n      }\r\n      }\r\n\r\n      newDataInput.Liabilitys.splice(id - 1, 1);\r\n      let i;\r\n      for (i = 1; i <= newDataInput.Liabilitys.length; ++i) {\r\n        newDataInput.Liabilitys[i - 1].id = i;\r\n      }\r\n      //data2.liabilitysNo = data2.Liabilitys.length;\r\n\r\n      // resync, recalcuate, then update state to re_render\r\n      const newState = await this.reSync_reCalculate_reRender(\r\n        newDataInput,\r\n        newDataOutput,\r\n        COLLAPSIBLE_LIABS,\r\n        id\r\n      );\r\n      this.setState({ ...newState, loading: false });\r\n\r\n      /* this.setState({ dataInput: data2 }, () =>\r\n        this.waitForSetStateCallback(1)//, 1, 1)\r\n      ); */\r\n    }\r\n  };\r\n\r\n  handleRemoveSource = async (id) => {\r\n    if (this.OKToRemove) {\r\n      //  this.OKToRemove = false;\r\n      \r\n      let failedRemove=false\r\n      this.setState({ loading: true });\r\n      const { dataInput, dataOutput } = this.state;\r\n      const newDataInput = _.cloneDeep(dataInput);\r\n      const newDataOutput = _.cloneDeep(dataOutput);\r\n      let i;\r\n      //this.failedRemove=false\r\n      for (i = 0; i < newDataInput.Sources.length; ++i) {\r\n        if (\r\n          newDataInput.Sources[i].id === id &&\r\n          (newDataInput.Sources[i].sourceTypeKey ===\r\n            INCOMESOURCES.GOV_SURVIVORS_PENSION.Key ||\r\n            newDataInput.Sources[i].sourceTypeKey ===\r\n              INCOMESOURCES.GOV_DEATH_BENEFIT.Key ||\r\n              newDataInput.Sources[i].sourceTypeKey ===\r\n                INCOMESOURCES.GOV_ORPHANS_BENEFIT.Key)\r\n        )\r\n          failedRemove=true;  \r\n          }\r\n      //this.setState({ failedRemove: failedRemove})\r\n\r\n      this.setState(prevState => ({\r\n        failedRemove: prevState.failedRemove===true?false:failedRemove\r\n      }));\r\n\r\n      if (failedRemove === false) {\r\n        newDataInput.Sources.splice(id - 1, 1);\r\n        for (i = 1; i <= newDataInput.Sources.length; ++i) {\r\n          newDataInput.Sources[i - 1].id = i;\r\n        }\r\n        //dataInput.sourcesNo = dataInput.Sources.length;\r\n      \r\n\r\n      // resync, recalcuate, then update state to re_render\r\n      const newState = await this.reSync_reCalculate_reRender(\r\n        newDataInput,\r\n        newDataOutput,\r\n        COLLAPSIBLE_SOURCES,\r\n        id\r\n      );\r\n      this.setState({ ...newState, loading: false });\r\n      }\r\n      /* this.setState({ dataInput: data2 }, () =>\r\n        this.waitForSetStateCallback(1)//, 1, 1)\r\n      ); */\r\n    }\r\n  };\r\n\r\n  handleRemoveNeed = async (id) => {\r\n    if (this.OKToRemove) {\r\n      // this.OKToRemove = false;\r\n\r\n      this.setState({ loading: true });\r\n      const { dataInput, dataOutput } = this.state;\r\n      const newDataInput = _.cloneDeep(dataInput);\r\n      const newDataOutput = _.cloneDeep(dataOutput);\r\n      newDataInput.Needs.splice(id - 1, 1);\r\n      let i;\r\n      for (i = 1; i <= newDataInput.Needs.length; ++i) {\r\n        newDataInput.Needs[i - 1].id = i;\r\n      }\r\n      //data2.needsNo = data2.Needs.length;\r\n\r\n      // resync, recalcuate, then update state to re_render\r\n      const newState = await this.reSync_reCalculate_reRender(\r\n        newDataInput,\r\n        newDataOutput,\r\n        COLLAPSIBLE_NEEDS,\r\n        id\r\n      );\r\n      this.setState({ ...newState, loading: false });\r\n\r\n      /* this.setState({ dataInput: data2 }, () =>\r\n        this.waitForSetStateCallback(1)//, 1, 1)\r\n      ); */\r\n    }\r\n  };\r\n\r\n  addRRIFSource = (asset) => {\r\n    const existingRRIF = this.state.dataInput.Sources.find(\r\n      (x) => x.sourceTypeKey === INCOMESOURCES.RRIF.Key\r\n    );\r\n    // this is done based on asset in API. this display only\r\n    \r\n    if (existingRRIF === undefined) {\r\n      const sourceRRIF = {\r\n        id: this.state.dataInput.Sources.length + 1,\r\n        sourceTypeKey: INCOMESOURCES.RRIF.Key,\r\n        amount: 0,\r\n        startYear: asset.RRIFStartAge,\r\n        duration: 99,\r\n        ownerID: 2,\r\n        taxRate: 0,\r\n        growthRate: 0,\r\n      };\r\n      \r\n      this.handleAddSource(sourceRRIF);\r\n    } else {\r\n      \r\n      existingRRIF.startYear = asset.RRIFStartAge;\r\n      this.handleUpdateSource(existingRRIF);\r\n    }\r\n  };\r\n\r\n  addRRIFSource2 = (dataInput, asset) => {\r\n    const existingRRIF = dataInput.Sources.find(\r\n      (x) => x.sourceTypeKey === INCOMESOURCES.RRIF.Key\r\n    );\r\n    // this is done based on asset in API. this display only\r\n    \r\n    if (existingRRIF === undefined) {\r\n      const sourceRRIF = {\r\n        id: this.state.dataInput.Sources.length + 1,\r\n        sourceTypeKey: INCOMESOURCES.RRIF.Key,\r\n        amount: 0,\r\n        startYear: asset.RRIFStartAge,\r\n        duration: 99,\r\n        ownerID: 2,\r\n        taxRate: 0,\r\n        growthRate: 0,\r\n      };\r\n      \r\n      // do it right here\r\n      dataInput.Sources.push(sourceRRIF);\r\n\r\n      //dataInput = this.handleAddSource(sourceRRIF);\r\n    } else {\r\n      \r\n      existingRRIF.startYear = asset.RRIFStartAge;\r\n      // do it right here\r\n      dataInput.Sources[existingRRIF.id - 1] = existingRRIF;\r\n      //dataInput = this.handleUpdateSource(existingRRIF, false);\r\n    }\r\n\r\n    return dataInput;\r\n  };\r\n\r\n  removeRRIFSource = (dataInput) => {\r\n    const existingRRIF = dataInput.Sources.find(\r\n      (x) => x.sourceTypeKey === INCOMESOURCES.RRIF.Key\r\n    );\r\n    // this is done based on asset in API. this display only\r\n    \r\n    if (existingRRIF !== undefined) {\r\n      const id = existingRRIF.id;\r\n      dataInput.Sources.splice(id - 1, 1);\r\n    }\r\n\r\n    return dataInput;\r\n  };\r\n\r\n  \r\n  copyPresentation = () => {\r\n    return JSON.parse(JSON.stringify(this.state.dataInput.Presentations[0]));\r\n  };\r\n\r\n  changeLang = () => {\r\n    let pres = this.copyPresentation();\r\n    pres.language = pres.language === \"en\" ? \"fr\" : \"en\";\r\n    const noRecalc = false;\r\n   \r\n    \r\n    this.handleUpdatePresentationChange(pres, noRecalc);\r\n    // close all\r\n    let i;\r\n    for (i = 0; i < COLLAPSIBLES_COUNT; ++i) {\r\n      this.openCollapsible[i].open = COLLAPSIBLES_CLOSED;\r\n    }\r\n  };\r\n\r\n  debounceSaveToStorage = debounce(\r\n    () => {\r\n      return this.saveToStorage();\r\n    },\r\n    waitTime,\r\n    { leading: false, trailing: true }\r\n  );\r\n\r\n  areThereChildren = () => {\r\n    let Children = this.state.dataInput.Clients.find(\r\n      (x) => x.memberKey === MEMBER.CHILD.Key\r\n    );\r\n    if (Children !== undefined) return true;\r\n    else return false;\r\n  };\r\n\r\n  manageEducation = () => {\r\n    let Children = this.state.dataInput.Clients.find(\r\n      (x) => x.memberKey === MEMBER.CHILD.Key\r\n    );\r\n    if (Children !== undefined) {\r\n      let eduFunds = this.state.dataInput.Needs.find(\r\n        (x) => x.needTypeKey === INCOMENEEDS.EDUCATION_FUND.Key\r\n      );\r\n      if (eduFunds === undefined)\r\n        this.handleAddNeed(\r\n          INCOMENEEDS.EDUCATION_FUND.Key,\r\n          Math.max(0, UNIVERSITY_START_AGE - Children.Age),\r\n          Math.min(4, Math.max(0, UNIVERSITY_END_AGE - Children.Age))\r\n        );\r\n    }\r\n  };\r\n\r\n  manageEducation2 = (input) => {\r\n    let Children = input.Clients.find((x) => x.memberKey === MEMBER.CHILD.Key);\r\n    if (Children !== undefined) {\r\n      let eduFunds = input.Needs.find(\r\n        (x) => x.needTypeKey === INCOMENEEDS.EDUCATION_FUND.Key\r\n      );\r\n      if (eduFunds === undefined)\r\n        input.Needs.push({\r\n          id: input.Needs.length + 1, //needsNo,\r\n          needTypeKey: INCOMENEEDS.EDUCATION_FUND.Key,\r\n          amount: 0,\r\n          Percent: 0,\r\n          startYear: Math.max(0, UNIVERSITY_START_AGE - Children.Age),\r\n          duration: Math.min(4, Math.max(0, UNIVERSITY_END_AGE - Children.Age)),\r\n        });\r\n    }\r\n    return input;\r\n  };\r\n\r\n  manageOrphan2 = (input) => {\r\n    const childMember = MEMBER.CHILD.Key;\r\n    //const orphanBen = INCOMESOURCES.GOV_ORPHANS_BENEFIT.value[this.state.dataInput.Presentations[0].language];\r\n    const orphanBen = INCOMESOURCES.GOV_ORPHANS_BENEFIT.Key;\r\n    let Children = input.Clients.filter(function (item) {\r\n      return item.memberKey === childMember;\r\n    });\r\n    let orphSources = input.Sources.filter(function (item) {\r\n      return item.sourceTypeKey === orphanBen;\r\n    });\r\n\r\n    let maxDur =\r\n      input.Presentations[0].provinceKey === \"QC\"\r\n        ? MAX_ORPHAN_DUR_QC\r\n        : MAX_ORPHAN_DUR_NON_QC;\r\n    let orphAge =\r\n      input.Presentations[0].provinceKey === \"QC\"\r\n        ? ORPHAN_AGE_QC\r\n        : ORPHAN_AGE_NON_QC;\r\n\r\n    if (Children.length > 0) {\r\n      Children.forEach((element) => {\r\n        if (\r\n          element.Age <= orphAge &&\r\n          orphSources.filter((item) => {\r\n            return item.ownerID === element.id;\r\n          }).length === 0\r\n        ) {\r\n          const source = {\r\n            id: input.Sources.length + 1, //sourcesNo + 1,\r\n            sourceTypeKey: orphanBen,\r\n            amount: this.state.dataOutput.govBenefits.cppOrphan,\r\n            startYear: 0,\r\n            duration: maxDur - element.Age,\r\n            ownerID: element.id,\r\n          };\r\n          // no elig jan 2019 this.handleAddSource(orphanBen,this.orphan * this.state.dataInput.Clients[QUOTE_CLIENT].Eligibility / 100,25-element.Age,element.id, 1);\r\n          input.Sources.push(source);\r\n\r\n          //this.handleAddSource(source);\r\n        }\r\n      });\r\n    } else orphSources = [];\r\n\r\n    return input;\r\n  };\r\n\r\n  /* manageOrphan = () => {\r\n    const childMember = MEMBER.CHILD.Key;\r\n    //const orphanBen = INCOMESOURCES.GOV_ORPHANS_BENEFIT.value[this.state.dataInput.Presentations[0].language];\r\n    const orphanBen = INCOMESOURCES.GOV_ORPHANS_BENEFIT.Key;\r\n    let Children = this.state.dataInput.Clients.filter(function (item) {\r\n      return item.memberKey === childMember;\r\n    });\r\n    let orphSources = this.state.dataInput.Sources.filter(function (item) {\r\n      return item.sourceTypeKey === orphanBen;\r\n    });\r\n\r\n    let maxDur =\r\n      this.state.dataInput.Presentations[0].provinceKey === \"QC\"\r\n        ? MAX_ORPHAN_DUR_QC\r\n        : MAX_ORPHAN_DUR_NON_QC;\r\n    let orphAge =\r\n      this.state.dataInput.Presentations[0].provinceKey === \"QC\"\r\n        ? ORPHAN_AGE_QC\r\n        : ORPHAN_AGE_NON_QC;\r\n\r\n    if (Children.length > 0) {\r\n      Children.forEach((element) => {\r\n        if (\r\n          element.Age <= orphAge &&\r\n          orphSources.filter((item) => {\r\n            return item.ownerID === element.id;\r\n          }).length === 0\r\n        ) {\r\n          const source = {\r\n            id: this.state.dataInput.Sources.length + 1, //sourcesNo + 1,\r\n            sourceTypeKey: orphanBen,\r\n            amount: this.state.dataOutput.govBenefits.cppOrphan,\r\n            startYear: 0,\r\n            duration: maxDur - element.Age,\r\n            ownerID: element.id,\r\n          };\r\n          // no elig jan 2019 this.handleAddSource(orphanBen,this.orphan * this.state.dataInput.Clients[QUOTE_CLIENT].Eligibility / 100,25-element.Age,element.id, 1);\r\n          this.handleAddSource(source);\r\n        }\r\n      });\r\n    }\r\n  };\r\n */\r\n  manageOrphanSync = async (dataInput, dataOutput) => {\r\n    const childMember = MEMBER.CHILD.Key;\r\n    //const orphanBen = INCOMESOURCES.GOV_ORPHANS_BENEFIT.value[this.state.dataInput.Presentations[0].language];\r\n    const orphanBen = INCOMESOURCES.GOV_ORPHANS_BENEFIT.Key;\r\n\r\n    // remove child bens and add\r\n    // dataInput.Sources=\r\n\r\n/*     let orphSourcesIDs = dataInput.Sources.filter(function (item) {\r\n      return item.id && item.sourceTypeKey === orphanBen;\r\n    });\r\n */\r\n    /* let sources = dataInput.Sources.filter((item) => {\r\n      return item.sourceTypeKey !== orphanBen;\r\n    });\r\n */\r\n\r\n    let sources = dataInput.Sources;\r\n\r\n    \r\n    let orphSources = sources.filter(function (item) {\r\n      return item.sourceTypeKey === orphanBen;\r\n    });\r\n\r\n    /* for (let i = 1; i <= sources.length; ++i) {\r\n      sources[i - 1].id = i;\r\n    } */\r\n\r\n    let Children = dataInput.Clients.filter(function (item) {\r\n      return item.memberKey === childMember;\r\n    });\r\n    \r\n    \r\n    let sourcesNo=sources.length\r\n    let maxDur =\r\n      dataInput.Presentations[0].provinceKey === \"QC\"\r\n        ? MAX_ORPHAN_DUR_QC\r\n        : MAX_ORPHAN_DUR_NON_QC;\r\n    let orphAge =\r\n      dataInput.Presentations[0].provinceKey === \"QC\"\r\n        ? ORPHAN_AGE_QC\r\n        : ORPHAN_AGE_NON_QC;\r\n\r\n    let setChildIDs = new Set();   \r\n    if (Children.length > 0) {\r\n      Children.forEach((element) => {\r\n        setChildIDs.add(element.id);\r\n        sourcesNo=sources.length\r\n        if (\r\n          element.Age <= orphAge &&\r\n          orphSources.filter((item) => {\r\n            return item.ownerID === element.id && item.sourceTypeKey === orphanBen;\r\n          }).length === 0\r\n        ) {\r\n          /* let childID=orphSourcesIDs.length>0?orphSourcesIDs[0]:sources.length + 1\r\n          if(orphSourcesIDs.length>0)orphSourcesIDs=orphSourcesIDs.shift(); */\r\n          const source = {\r\n            id: sourcesNo + 1,\r\n            sourceTypeKey: orphanBen,\r\n            amount: dataOutput.govBenefits.cppOrphan,\r\n            startYear: 0,\r\n            duration: maxDur - element.Age,\r\n            ownerID: element.id,\r\n          };\r\n          // no elig jan 2019 this.handleAddSource(orphanBen,this.orphan * this.state.dataInput.Clients[QUOTE_CLIENT].Eligibility / 100,25-element.Age,element.id, 1);\r\n          sources.push(source);\r\n          \r\n        }\r\n        else // exists but needs adj\r\n        {\r\n           sources.forEach((source) => {\r\n            if ( source.sourceTypeKey === orphanBen && source.ownerID === element.id)\r\n              source.amount= dataOutput.govBenefits.cppOrphan\r\n              \r\n            })\r\n            \r\n\r\n        }\r\n        \r\n      });\r\n     /*  for (let i = 1; i <= sources.length; ++i) {\r\n        sources[i - 1].id = i; \r\n      }*/\r\n    } else dataInput = await this.manageRemoveOrphan(dataInput);\r\n\r\n    sources=sources.filter((item) => {\r\n      return item.sourceTypeKey !== orphanBen || (setChildIDs.has(item.ownerID) && item.sourceTypeKey === orphanBen)})\r\n    \r\n    dataInput.Sources = sources;\r\n    return dataInput;\r\n  };\r\n\r\n  manageRemoveOrphan = async (input, childID) => {\r\n    const childMember = MEMBER.CHILD.Key;\r\n    //const orphanBen = INCOMESOURCES.GOV_ORPHANS_BENEFIT.value[this.state.dataInput.Presentations[0].language];\r\n    const orphanBen = INCOMESOURCES.GOV_ORPHANS_BENEFIT.Key;\r\n    input.Sources = input.Sources.filter(function (item) {\r\n      if (childID === undefined)\r\n        // remove all\r\n        return !(item.sourceTypeKey === orphanBen);\r\n      else\r\n        return !(item.ownerID === childID && item.sourceTypeKey === orphanBen);\r\n    });\r\n    let i;\r\n    \r\n    //input.Sources.splice(orphSource.id - 1, 1);\r\n    for (i = 1; i <= input.Sources.length; ++i) {\r\n      input.Sources[i - 1].id = i;\r\n    }\r\n    \r\n    return input;\r\n  };\r\n\r\n  updateDataLang = (oldLang) => {\r\n    this.openParent = false;\r\n    this.openForce = false;\r\n  };\r\n\r\n  getAfterTaxTotalIncome = (newStateCandidateInput) => {\r\n    let totalATaxIncome = 0;\r\n    for (let i = 0; i < newStateCandidateInput.Clients.length; i++)\r\n      totalATaxIncome +=\r\n        newStateCandidateInput.Clients[i].Income *\r\n        (1 - newStateCandidateInput.Clients[i].avgTaxRate / 100);\r\n\r\n    return totalATaxIncome;\r\n  };\r\n\r\n  setSurivorIndex = () => {\r\n    const spKey = APPLET_INA ? MEMBER.SPOUSE.Key : MEMBER.CLIENT.Key;\r\n    let Survivor = this.state.dataInput.Clients.find(\r\n      (x) => x.memberKey === spKey\r\n    );\r\n\r\n    if (Survivor === undefined && APPLET_INA) {\r\n      if (this.state.dataInput.Clients.length === 1)\r\n        Survivor = this.state.dataInput.Clients.find(\r\n          (x) => x.memberKey === MEMBER.CLIENT.Key\r\n        );\r\n      else {\r\n        Survivor = this.state.dataInput.Clients.find(\r\n          (x) => x.memberKey === MEMBER.DEPENDENT_ADULT.Key\r\n        );\r\n        if (Survivor === undefined)\r\n          Survivor = this.state.dataInput.Clients.find(\r\n            (x) => x.memberKey === MEMBER.CHILD.Key\r\n          );\r\n      }\r\n    }\r\n\r\n    return Survivor.id - 1; // id is 1-based\r\n  };\r\n\r\n  setSurivorIndex2 = (newStateCandidateInput) => {\r\n    const spKey = APPLET_INA ? MEMBER.SPOUSE.Key : MEMBER.CLIENT.Key;\r\n    let Survivor = newStateCandidateInput.Clients.find(\r\n      (x) => x.memberKey === spKey\r\n    );\r\n\r\n    if (Survivor === undefined && APPLET_INA) {\r\n      if (newStateCandidateInput.Clients.length === 1)\r\n        Survivor = newStateCandidateInput.Clients.find(\r\n          (x) => x.memberKey === MEMBER.CLIENT.Key\r\n        );\r\n      else {\r\n        Survivor = newStateCandidateInput.Clients.find(\r\n          (x) => x.memberKey === MEMBER.DEPENDENT_ADULT.Key\r\n        );\r\n        if (Survivor === undefined)\r\n          Survivor = newStateCandidateInput.Clients.find(\r\n            (x) => x.memberKey === MEMBER.CHILD.Key\r\n          );\r\n      }\r\n    }\r\n\r\n    return Survivor.id - 1; // id is 1-based\r\n  };\r\n\r\n  syncPanelsValues2 = (newStateCandidateInput, itemToUpdateGroup) => {\r\n    // EP dosent have needs and sources to sync\r\n\r\n    this.survIdx = this.setSurivorIndex2(newStateCandidateInput);\r\n    let protectionPeriod =\r\n      newStateCandidateInput.Clients[this.survIdx].retirementAge -\r\n      newStateCandidateInput.Clients[this.survIdx].Age;\r\n    const singleFamily = isSingleFamily(newStateCandidateInput.Clients);\r\n    if (singleFamily) {\r\n      const yrs = singleFamilyProjectionYears(newStateCandidateInput.Clients);\r\n      protectionPeriod = yrs.noProjectionYrs;\r\n    }\r\n\r\n    \r\n    newStateCandidateInput=this.handleAddAssetTaxCredit2(newStateCandidateInput)\r\n        \r\n    \r\n    if (APPLET_INA) {\r\n      if (this.survIdx !== -1) {\r\n        let i;\r\n        for (i = 0; i < newStateCandidateInput.Needs.length; i++) {\r\n          const needPercent = parseInt(\r\n            (newStateCandidateInput.Needs[i].Percent / 100) *\r\n              this.getAfterTaxTotalIncome(newStateCandidateInput)\r\n          );\r\n\r\n          const dur = protectionPeriod;\r\n          //const dur = 100 - newStateCandidateInput.Clients[this.survIdx].Age;\r\n          if (this.caseFromFile===false && itemToUpdateGroup !== COLLAPSIBLE_RESULTS && // dont change if clicking on results\r\n            newStateCandidateInput.Needs[i].needTypeKey ===\r\n            INCOMENEEDS.PERCET_OF_INCOME.Key\r\n          ) {\r\n            if (\r\n              needPercent !== newStateCandidateInput.Needs[i].amount &&\r\n              newStateCandidateInput.Needs[i].Percent >= 0\r\n            ) {\r\n              newStateCandidateInput.Needs[i].amount = needPercent;\r\n              \r\n            }\r\n\r\n            if (itemToUpdateGroup !== COLLAPSIBLE_NEEDS) {\r\n              // change duration of % of income\r\n              if (\r\n                (singleFamily &&\r\n                  newStateCandidateInput.Needs[i].startYear === 0) ||\r\n                (dur !== newStateCandidateInput.Needs[i].duration &&\r\n                  newStateCandidateInput.Needs[i].duration !== 100 &&\r\n                  dur > 0)\r\n              ) {\r\n                newStateCandidateInput.Needs[i].duration = dur;\r\n                \r\n              }\r\n              if (\r\n                newStateCandidateInput.Needs[i].duration === 100 &&\r\n                dur > 0 &&\r\n                newStateCandidateInput.Needs[i].startYear !== dur\r\n              ) {\r\n                newStateCandidateInput.Needs[i].startYear = dur;\r\n                \r\n              }\r\n            }\r\n          }\r\n\r\n          if (this.caseFromFile===false && \r\n            newStateCandidateInput.Needs[i].needTypeKey ===\r\n            INCOMENEEDS.EDUCATION_FUND.Key\r\n          ) {\r\n            let children = newStateCandidateInput.Clients.find(\r\n              (x) => x.memberKey === MEMBER.CHILD.Key\r\n            );\r\n            let indices = newStateCandidateInput.Clients.map((e) =>\r\n              e.memberKey === MEMBER.CHILD.Key ? e.id : \"\"\r\n            ).filter(String);\r\n            let idxCh = newStateCandidateInput.Needs.map((e) =>\r\n              e.needTypeKey === INCOMENEEDS.EDUCATION_FUND.Key ? e.id : \"\"\r\n            ).filter(String);\r\n            if (children !== undefined) {\r\n              if (\r\n                newStateCandidateInput.Needs[i].startYear !==\r\n                  Math.max(0, UNIVERSITY_START_AGE - children.Age) &&\r\n                children.length > 0\r\n              ) {\r\n                newStateCandidateInput.Needs[i].startYear = Math.max(\r\n                  0,\r\n                  UNIVERSITY_START_AGE - children.Age\r\n                );\r\n                newStateCandidateInput.Needs[i].duration = Math.max(\r\n                  0,\r\n                  Math.min(4, UNIVERSITY_END_AGE - children.Age)\r\n                );\r\n                \r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n    for (i = 0; i < newStateCandidateInput.Sources.length; i++) {\r\n          // all at income tax except divdend\r\n          if (\r\n            newStateCandidateInput.Sources[i].sourceTypeKey !==\r\n            INCOMESOURCES.DIVIDEND_INCOME.Key\r\n          )\r\n            newStateCandidateInput.Sources[i].taxRate =\r\n              newStateCandidateInput.Clients[this.survIdx].avgTaxRate; // spouse\r\n\r\n          // allow a different surv income dur if they input directly\r\n          if (itemToUpdateGroup !== COLLAPSIBLE_SOURCES  && itemToUpdateGroup !== COLLAPSIBLE_RESULTS) {\r\n            const dur = protectionPeriod;\r\n            if (\r\n              newStateCandidateInput.Sources[i].sourceTypeKey ===\r\n                INCOMESOURCES.SURVIVORS_INCOME.Key &&\r\n              newStateCandidateInput.Sources[i].startYear === 0 &&\r\n              dur !== newStateCandidateInput.Sources[i].duration &&\r\n              dur > 0\r\n            ) {\r\n              newStateCandidateInput.Sources[i].duration = dur;\r\n              \r\n            }\r\n          }\r\n\r\n          if (newStateCandidateInput.Sources[i].ownerID === undefined)\r\n            newStateCandidateInput.Sources[i].ownerID =\r\n              newStateCandidateInput.Clients.length === 1 ? 1 : 2; // first surv\r\n          // allow a different surv income if they input directly\r\n          if (newStateCandidateInput.Clients.length > 1) {\r\n            //!singleFamily){\r\n            if (\r\n              itemToUpdateGroup !== COLLAPSIBLE_SOURCES  && itemToUpdateGroup !== COLLAPSIBLE_RESULTS &&\r\n              newStateCandidateInput.Sources[i].ownerID - 1 > 0\r\n            ) {\r\n              if (\r\n                newStateCandidateInput.Sources[i].sourceTypeKey ===\r\n                  INCOMESOURCES.SURVIVORS_INCOME.Key &&\r\n                newStateCandidateInput.Sources[i].amount !==\r\n                  parseInt(\r\n                    newStateCandidateInput.Clients[\r\n                      newStateCandidateInput.Sources[i].ownerID - 1\r\n                    ].Income\r\n                  )\r\n              ) {\r\n                newStateCandidateInput.Sources[i].amount = parseInt(\r\n                  newStateCandidateInput.Clients[\r\n                    newStateCandidateInput.Sources[i].ownerID - 1\r\n                  ].Income\r\n                );\r\n                \r\n              }\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        \r\n        let i;\r\n        for (i = 0; i < newStateCandidateInput.Needs.length; i++) {\r\n          if (\r\n            newStateCandidateInput.Needs[i].needTypeKey ===\r\n            INCOMENEEDS.PERCET_OF_INCOME.Key\r\n          )\r\n            newStateCandidateInput.Needs[i].amount = 0;\r\n        }\r\n        //let newStateCandidateInput = newStateCandidateInput;\r\n        for (i = 0; i < newStateCandidateInput.Sources.length; i++) {\r\n          if (\r\n            newStateCandidateInput.Sources[i].sourceTypeKey ===\r\n            INCOMESOURCES.GOV_SURVIVORS_PENSION.Key\r\n          )\r\n            newStateCandidateInput.Sources[i].amount = 0;\r\n          else if (\r\n            newStateCandidateInput.Sources[i].sourceTypeKey ===\r\n            INCOMESOURCES.GOV_DEATH_BENEFIT.Key\r\n          )\r\n            newStateCandidateInput.Sources[i].amount = 0;\r\n          else if (\r\n            newStateCandidateInput.Sources[i].sourceTypeKey ===\r\n            INCOMESOURCES.GOV_ORPHANS_BENEFIT.Key\r\n          )\r\n            newStateCandidateInput.Sources[i].amount = 0;\r\n          else if (\r\n            newStateCandidateInput.Sources[i].sourceTypeKey ===\r\n            INCOMESOURCES.SURVIVORS_INCOME.Key\r\n          )\r\n            newStateCandidateInput.Sources[i].amount = 0;\r\n        }\r\n        /* this.setState({ dataInput: newStateCandidateInput }, () =>\r\n          this.waitForSetStateCallback(0) */\r\n        // );\r\n        this.OKToRemove = true;\r\n      }\r\n    }\r\n    \r\n\r\n    return newStateCandidateInput;\r\n  };\r\n\r\n  setRates = () => {\r\n    let dataE = {\r\n      investmentRate: this.state.dataInput.Presentations[0].invRate / 100,\r\n      taxRate: this.state.dataInput.Presentations[0].taxRate / 100,\r\n      dividendTaxRate: 0.33,\r\n      capitalGainsInclusion: 0.5,\r\n      inflationRate: this.state.dataInput.Presentations[0].inflation / 100,\r\n    };\r\n\r\n    return dataE;\r\n  };\r\n\r\n  loadStorage = async () => {\r\n    let storageKey = APPLET_INA ? \"INAData\" : \"EPData\";\r\n\r\n    const objJSONData = JSON.parse(localStorage.getItem(storageKey));\r\n    this.updateStateFromJSon(objJSONData);\r\n  };\r\n\r\n  updateStateFromJSon = async (objJSONData) => {\r\n    if (objJSONData !== null && objJSONData !== undefined) {\r\n      // put loaded data to quote and show\r\n      this.setState({ loading: true });\r\n    //  console.log(objJSONData)\r\n      this.caseFromFile=true;\r\n      const { dataOutput } = this.state;\r\n      const newDataOutput = _.cloneDeep(dataOutput);\r\n      const newState = await this.reSync_reCalculate_reRender(\r\n        objJSONData,\r\n        newDataOutput,\r\n        COLLAPSIBLE_UPDATE_ALL, // to updateAll\r\n        0\r\n      );\r\n      this.setState({ ...newState, loading: false, initialLoading: false });\r\n    } //this.updateStateInput(objJSONData, () => this.waitForSetStateCallback());\r\n    this.caseFromFile=false;\r\n  };\r\n\r\n  saveToStorage = () => {\r\n    // in case we need to clear all\r\n    // localStorage.clear();\r\n    localStorage.setItem(\r\n      APPLET_INA ? \"INAData\" : \"EPData\",\r\n      JSON.stringify(this.state.dataInput)\r\n    );\r\n\r\n    // no recovery anymore\r\n    this.showRecover = 0;\r\n    hideRecover();\r\n  };\r\n\r\n  loadFromFile = (e) => {\r\n    const fileTarget = e.target.files[0];\r\n    if (!fileTarget) {\r\n      return;\r\n    }\r\n    this.setState({loading:true});\r\n\r\n    // close all\r\n    let i;\r\n    for (i = 0; i < COLLAPSIBLES_COUNT; ++i) {\r\n      this.openCollapsible[i].open = COLLAPSIBLES_CLOSED;\r\n    }\r\n\r\n    const reader = new FileReader();\r\n    reader.onload = (e) => {\r\n  \r\n      let contentsFile = e.target.result;\r\n      var objJSONData;\r\n      // is this a non-encrypted file\r\n      const encrptedSave =\r\n        contentsFile.search(\"dataInput\") > 0 ||\r\n        versionDetails().saveEncrypt === false\r\n          ? false\r\n          : true;\r\n\r\n      if (encrptedSave === true) {\r\n        // file is saved a s querystring\r\n        this.handleInitilizeQuoteFromQueryString(contentsFile);\r\n      } else {\r\n        // name changes\r\n        contentsFile = contentsFile.split(\"Amount\").join(\"amount\");\r\n        contentsFile = contentsFile.split(\"StartYr\").join(\"startYear\");\r\n        contentsFile = contentsFile.split(\"Duration\").join(\"duration\");\r\n        contentsFile = contentsFile\r\n          .split(\"\" + \"Tax\" + \"\")\r\n          .join(\"\" + \"avgTaxRate\" + \"\");\r\n        contentsFile = contentsFile.split(\"retireAge\").join(\"retirementAge\");\r\n        \r\n        objJSONData = JSON.parse(contentsFile);\r\n        objJSONData.dataPresentations.Presentations[0].presentationDate = new Date();\r\n\r\n        // old files\r\n        objJSONData.dataInput.Clients.forEach(function (element) {\r\n          if (element.sexKey == undefined) {\r\n            element.sexKey = getListItemKeyFromName(SEX, element.Sex);\r\n            delete element.Sex;\r\n          }\r\n        });\r\n        // old files\r\n        objJSONData.dataInput.Clients.forEach(function (element) {\r\n          if (element.smokerKey == undefined) {\r\n            element.smokerKey = getListItemKeyFromName(SMOKING, element.Smoker);\r\n            delete element.Smoker;\r\n          }\r\n        });\r\n        // old files\r\n        objJSONData.dataInput.Clients.forEach(function (element) {\r\n          if (element.memberKey == undefined) {\r\n            element.memberKey = getListItemKeyFromName(MEMBER, element.member);\r\n            delete element.member;\r\n          }\r\n        });\r\n\r\n        // old files\r\n        objJSONData.dataInput.Assets.forEach(function (element) {\r\n          if (element.assetTypeKey == undefined) {\r\n            element.assetTypeKey = getListItemKeyFromName(ASSETS, element.Type);\r\n            delete element.Type;\r\n          }\r\n        });\r\n        // old files\r\n        objJSONData.dataInput.Assets.forEach(function (element) {\r\n          if (element.assetTaxTypeKey == undefined) {\r\n            element.assetTaxTypeKey = getListItemKeyFromName(\r\n              ASSET_TAX,\r\n              element.Tax\r\n            );\r\n            delete element.Tax;\r\n          }\r\n        });\r\n\r\n        // old files\r\n        objJSONData.dataInput.Assets.forEach(function (element) {\r\n          if (element.ownerKey == undefined) {\r\n            element.ownerKey = ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key;\r\n          }\r\n        });\r\n\r\n        \r\n        // old files note change in spelling\r\n        objJSONData.dataInput.Liabilitys.forEach(function (element) {\r\n          if (element.liabTypeKey == undefined) {\r\n            element.liabTypeKey = getListItemKeyFromName(\r\n              LIABILITIES,\r\n              element.Type\r\n            );\r\n            delete element.Type;\r\n          }\r\n        });\r\n        \r\n        // old files\r\n        objJSONData.dataInput.Sources.forEach(function (element) {\r\n          if (element.sourceTypeKey == undefined) {\r\n            element.sourceTypeKey = getListItemKeyFromName(\r\n              INCOMESOURCES,\r\n              element.Type\r\n            );\r\n            delete element.Type;\r\n          }\r\n        });\r\n        \r\n        // old files\r\n        objJSONData.dataInput.Needs.forEach(function (element) {\r\n          if (element.needTypeKey == undefined) {\r\n            element.needTypeKey = getListItemKeyFromName(\r\n              INCOMENEEDS,\r\n              element.Type\r\n            );\r\n            delete element.Type;\r\n          }\r\n        });\r\n\r\n        // old files\r\n        objJSONData.dataInput.Presentations.forEach(function (element) {\r\n          if (element.provinceKey == undefined) {\r\n            element.provinceKey = getListItemKeyFromName(\r\n              PROVINCE,\r\n              element.Province\r\n            );\r\n            delete element.Province;\r\n          }\r\n        });\r\n        this.updateStateFromJSon(objJSONData);\r\n      }\r\n    };\r\n    reader.readAsText(fileTarget);\r\n    this.setState({loading:false});\r\n  };\r\n\r\n  respondToSaveRequest = (fileName) => {\r\n    this.setState({ showMsg: false });\r\n    let blob;\r\n    if (versionDetails().saveEncrypt === false)\r\n      // regular text file\r\n      blob = new Blob([JSON.stringify(this.state.dataInput)], {\r\n        type: \"text/plain;charset=utf-8\",\r\n      });\r\n    else blob = new Blob([this.dataQS], { type: \"text/plain;charset=utf-8\" });\r\n\r\n    // iphone\r\n    var iOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\r\n    if (fileName !== \"\") {\r\n      if (iOS === false) {\r\n        // works on IE and Edge to save file, would also work on Chrome, Firedox for desktop\r\n        saveAs(\r\n          blob,\r\n          fileName === undefined\r\n            ? \"INASavedData.json\"\r\n            : fileName + (APPLET_INA ? INA_FILE_TYPE : EP_FILE_TYPE) //\".json\"\r\n        );\r\n        //saveAs(blob, fileName===undefined?\"INASavedData.json\":prompt('Please enter file name:'))\r\n      } else {\r\n        // Chrome, Firefox, and Chrome and Safari on iOS\r\n        //var dataUrl = JSON.stringify(this.state);\r\n        //var open = window.open(dataUrl);\r\n        //if (open === null || typeof (open) === 'undefined') {\r\n        blob = new Blob([JSON.stringify(this.state.dataInput)]);\r\n        saveAs(\r\n          blob,\r\n          fileName === undefined\r\n            ? \"INASavedData.json\"\r\n            : \"SignInINASavedData.json\"\r\n        );\r\n        //      var blobUrl = URL.createObjectURL(blob)\r\n        //      window.location.href = blobUrl;\r\n        //\t }\r\n      }\r\n    }\r\n  };\r\n\r\n  saveToFile_OLD = () => {\r\n    const blob = new Blob([JSON.stringify(this.state.dataInput)], {\r\n      type: \"text/plain;charset=utf-8\",\r\n    });\r\n    saveAs(blob, \"INASavedData.json\");\r\n  };\r\n\r\n  saveToFile = (fileName) => {\r\n    if (versionDetails().saveEncrypt === false)\r\n      // regular text file\r\n      this.respondToSaveRequest(\"fileINA\");\r\n    else {\r\n      this.handleQueryString(\r\n        MODE_SAVE,\r\n        this.state.dataInput,\r\n        this.state.dataOutput\r\n      );\r\n    }\r\n  };\r\n\r\n  loadData = () => {\r\n    let fails = fetchTimerAPICheck();\r\n    if (fails > 1) this.setState({ failedAPI: true });\r\n  };\r\n\r\n  respondToPopUp = () => {\r\n    this.saveToStorage();\r\n\r\n    let urlReload = PARENT_SITE_PROD + \"?ina=\" + shortid.generate();\r\n    const url2 = window.location.href;\r\n\r\n    if (url2.indexOf(SITE_TEST) !== -1)\r\n      urlReload = PARENT_SITE_TEST + \"?ina=\" + shortid.generate();\r\n\r\n    const urlLogoff = \"https://adfs.ppi.ca/adfs/ls/?wa=wsignout1.0\";\r\n    //\tif(fails>1){\r\n    //localStorage.setItem('INAAPIFails', parseInt(0));\r\n    window.parent.location.href = urlLogoff;\r\n    //\t}\r\n    //\telse\r\n    {\r\n      window.parent.location.href = urlReload;\r\n    }\r\n  };\r\n\r\n  EmailINA = () => {\r\n    // test\r\n\r\n    this.handleQueryString(\r\n      MODE_EMAIL,\r\n      this.state.dataInput,\r\n      this.state.dataOutput\r\n    );\r\n    //window.location.href ='mailto: msamiei@ppi.ca ?subject= Needs Analysis Quote &body=' + this.dataQS;\r\n  };\r\n  /* \tcallAPI2 = (e) => {\r\n\t\t\r\n\t\tif (!this.resultIsOpen){\r\n\t\t\tthis.handleFetchInsuranceNeeds();\r\n\t\t}\r\n\t\tif(this.accessedAPI){\r\n\t\t\tthis.resultIsOpen = !e;\r\n\t\t}\r\n\t\t\t\r\n\t}\r\n\tcallAPI = (e) => {\r\n\t\tthis.callAPI2(e);\r\n\t}\r\n */\r\n  callCalculateResultsAPI = (e) => {\r\n    \r\n    if (!this.resultIsOpen)\r\n      //this.handleUpdataData();\r\n      this.resultIsOpen = !e;\r\n  };\r\n\r\n  adjustVisibleOutputSection = (unit) => {\r\n    this.visibleOutputSection = this.visibleOutputSection + unit;\r\n    \r\n  };\r\n\r\n  hasPersonalResidenceAlready = () => {\r\n    let PR = this.state.dataInput.Assets.find(\r\n      (x) => x.assetTypeKey === ASSETS.PERSONAL_RESIDENCE.Key\r\n    );\r\n\r\n    return PR !== undefined;\r\n  };\r\n\r\n  handleCollapsibleClick = async (collapsible) => {\r\n    if (collapsible.id === COLLAPSIBLE_RESULTS) {\r\n      this.adjustVisibleOutputSection(\r\n        this.openCollapsible[COLLAPSIBLE_RESULTS].open ? -1 : 1\r\n      );\r\n\r\n      this.callCalculateResultsAPI(collapsible.open);\r\n    }\r\n    if (collapsible.id === COLLAPSIBLE_SOURCES) {\r\n      // recheck gov\r\n      // await this.govBenefits();\r\n    }\r\n   // this.setState({failedRemove : false});\r\n\r\n    this.openCollapsible[collapsible.id].open = !collapsible.open;\r\n     \r\n  };\r\n\r\n  setOutput = (e) => {\r\n    // Internet Explorer 6-11\r\n    let isIE = /*@cc_on!@*/ false || !!document.documentMode;\r\n\r\n    if (isIE)\r\n      alert(MESSAGES[this.state.dataInput.Presentations[0].language].ie);\r\n    else this.graphs = e === 2 ? true : false;\r\n    this.setState({ loading: false });\r\n  };\r\n\r\n  /* setInsduration = e => {\r\n    this.toRetirement = e === 1 ? true : false;\r\n    this.setState({ loading: false }, () =>\r\n      this.waitForSetStateCallback(0, 1)\r\n    );\r\n  }; */\r\n\r\n  selectMultiButtonPeriod = (e) => {\r\n    // selection is 1-based\r\n    let pres = this.copyPresentation();\r\n    if (e === DISPLAY_RETIREMENT + 1) {\r\n      pres.periodOption = DISPLAY_RETIREMENT;\r\n    } else if (e === DISPLAY_LIFEEXP + 1) {\r\n      pres.periodOption = DISPLAY_LIFEEXP;\r\n    } else if (e === DISPLAY_ENDAGE + 1) {\r\n      pres.periodOption = DISPLAY_ENDAGE;\r\n    } else if (e === DISPLAY_LIFEEXP_PLUS_3 + 1) {\r\n      pres.periodOption = DISPLAY_LIFEEXP_PLUS_3;\r\n    }\r\n    const noRecalc = false;\r\n    this.handleUpdatePresentationChange(pres, noRecalc);\r\n  };\r\n\r\n  selectMultiButton = (e) => {\r\n    //let pres = this.state.dataInput.Presentations;\r\n    let pres = this.copyPresentation();\r\n\r\n    if (e === DISPLAY_SPREADSHEET) {\r\n      pres.resultsOption = DISPLAY_SPREADSHEET;\r\n    } else if (e === DISPLAY_GRAPHS) {\r\n      pres.resultsOption = DISPLAY_GRAPHS;\r\n    } else if (e === DISPLAY_ANALYSIS) {\r\n      pres.resultsOption = DISPLAY_ANALYSIS;\r\n      pres.periodOption = DISPLAY_ENDAGE;\r\n      // try this now\r\n      pres.resultsOption = DISPLAY_LIFEEXP_PLUS_3;\r\n      pres.periodOption = DISPLAY_LIFEEXP_PLUS_3;\r\n    } else {\r\n      pres.resultsOption = DISPLAY_PRESENTATION;\r\n      //periodOption = DISPLAY_RETIREMENT;\r\n    }\r\n    // these don't require rescalc or resync\r\n    const noRecalc = true;\r\n    this.handleUpdatePresentationChange(pres, noRecalc);\r\n    //this.setState({ Presentations: pres });\r\n  };\r\n\r\n  selectMultiButtonINAorTax = (e) => {\r\n    if (e === DISPLAY_TAXLIAB) {\r\n      this.INAOption = DISPLAY_TAXLIAB;\r\n      // }else if (e === DISPLAY_TAXLIAB_JLTD) {\r\n      //  this.INAOption = DISPLAY_TAXLIAB_JLTD;\r\n    } else if (e === DISPLAY_INCOME) {\r\n      this.INAOption = DISPLAY_INCOME;\r\n    }\r\n    let l = this.state.loading;\r\n    l = !l;\r\n    this.setState({ loading: l });\r\n  };\r\n\r\n  hideEstateRemoveMsg =   () => {\r\n    this.setState({failedRemove : false});\r\n  };\r\n\r\n  imageRemove = () => {\r\n    this.setState((prevState) => ({\r\n      dataInput: {\r\n        ...prevState.dataInput,\r\n        Presentations: [\r\n          {\r\n            ...prevState.dataInput.Presentations[0],\r\n            adviserLogo: {\r\n              image: null,\r\n              left: 0,\r\n              size: 90,\r\n              allPages: false,\r\n              showDetails: false,\r\n            },\r\n          },\r\n        ],\r\n      },\r\n    }));\r\n  };\r\n\r\n  imageAdjust = (image, ID) => {\r\n    if (ID === IMAGE_LOGO)\r\n      this.setState((prevState) => ({\r\n        dataInput: {\r\n          ...prevState.dataInput,\r\n          Presentations: [\r\n            {\r\n              ...prevState.dataInput.Presentations[0],\r\n              adviserLogo: image,\r\n            },\r\n          ],\r\n        },\r\n      }));\r\n    else\r\n      this.setState((prevState) => ({\r\n        dataInput: {\r\n          ...prevState.dataInput,\r\n          Presentations: [\r\n            {\r\n              ...prevState.dataInput.Presentations[0],\r\n              appletImage: image,\r\n            },\r\n          ],\r\n        },\r\n      }));\r\n  };\r\n\r\n  render() {\r\n    /* if (this.state.initialLoading === true) {\r\n      return (\r\n        <div style={{ marginTop: \"60px\", marginLeft: \"90px\" }}>\r\n          <Loader type=\"TailSpin\" color=\"black\" height={30} width={30} />\r\n        </div>\r\n      );\r\n    } */\r\n  \r\n    let i = 1;\r\n    let j = 1;\r\n    let k = 1;\r\n    let l = 1;\r\n    let n = 1;\r\n    let v = 1;\r\n\r\n     const showInput = this.state.showMsg;\r\n\r\n    const dataInput = this.state.dataInput;\r\n    const lang = dataInput.Presentations[0].language;\r\n    const pres =\r\n    lang === \"en\"\r\n      ? \"Presentation\"\r\n      : \"Présentation\";\r\n  const gr =\r\n    lang === \"en\"\r\n      ? \"Graphs\"\r\n      : \"graphique\";\r\n  const ret =\r\n    lang === \"en\"\r\n      ? \"Retirement\"\r\n      : \"Retraite\";\r\n  const le =\r\n    lang === \"en\"\r\n      ? \"Life Expectancy\"\r\n      : \"Espérance de vie\";\r\n\r\n  \r\n    /*  if (this.dataInsuranceNeeds.length > 0) {\r\n      insNeed = this.toRetirement\r\n        ? this.dataInsuranceNeeds[0].Value\r\n        : this.dataInsuranceNeeds[1].Value;\r\n      insNeedRet = this.dataInsuranceNeeds[0].Value;\r\n      insNeedLE = this.dataInsuranceNeeds[1].Value;\r\n    }\r\n    */\r\n    const dataOutput = this.state.dataOutput;\r\n    const insuranceNeeds = this.state.dataOutput.dataInsuranceNeeds;\r\n    const periodOption = dataInput.Presentations[0].periodOption;\r\n\r\n    /* \r\n /* \r\n    /* \r\n /* \r\n    /* \r\n /* \r\n    /* \r\n /* \r\n    /* \r\n /* \r\n    /* \r\n /* \r\n    /* \r\n \r\n let insNeed = 0;\r\n    let insNeedRet = 0;\r\n    let insNeedLE = 0;\r\n    let insNeedLE3 = 0;\r\n    let insNeedEAge = 0;\r\n    if (insuranceNeeds.length > 0) {\r\n      insNeed =\r\n        periodOption === DISPLAY_RETIREMENT\r\n          ? insuranceNeeds[DISPLAY_RETIREMENT].Value\r\n          : periodOption === DISPLAY_LIFEEXP\r\n          ? insuranceNeeds[DISPLAY_LIFEEXP].Value\r\n          : periodOption === DISPLAY_LIFEEXP_PLUS_3\r\n          ? getINA_LifeExp_Plus_yrs(\r\n              insuranceNeeds[DISPLAY_LIFEEXP].Value,\r\n              dataOutput.dataShortfall,\r\n              dataInput.Presentations[0].invRate,\r\n              dataOutput.lifeExpectancy.spouse,\r\n              3\r\n            )\r\n          : insuranceNeeds[DISPLAY_ENDAGE].Value;\r\n      insNeedRet = insuranceNeeds[DISPLAY_RETIREMENT].Value;\r\n      insNeedLE = insuranceNeeds[DISPLAY_LIFEEXP].Value;\r\n      insNeedEAge = insuranceNeeds[DISPLAY_ENDAGE].Value;\r\n      insNeedLE3 =\r\n        dataOutput.dataShortfall !== undefined\r\n          ? getINA_LifeExp_Plus_yrs(\r\n              insuranceNeeds[DISPLAY_LIFEEXP].Value,\r\n              dataOutput.dataShortfall,\r\n              dataInput.Presentations[0].invRate,\r\n              dataOutput.lifeExpectancy.joint,\r\n              3\r\n            )\r\n          : insNeed;\r\n    } */\r\n\r\n    const projYears = familyProjectionYears(\r\n      dataInput.Clients,\r\n      periodOption,\r\n      dataOutput.lifeExpectancy,\r\n      insuranceNeeds,\r\n      dataOutput.dataShortfall,\r\n      dataInput.Presentations[0]\r\n    );\r\n    const insNeed = projYears.insuranceNeed;\r\n    const insNeedRet = projYears.insuranceNeedToRet;\r\n    const insNeedLE = projYears.insuranceNeedToLE;\r\n    const insNeedLE3 = projYears.insuranceNeedToLE3;\r\n    const insNeedEAge = projYears.insuranceNeedToEnd;\r\n\r\n    const projectEnd = projYears.projectionEnd;\r\n    const noProjectYrs = projYears.noProjectionYrs;\r\n    const survAge = projYears.survivorAge;\r\n\r\n    const singleFamily = isSingleFamily(dataInput.Clients);\r\n    if (singleFamily) { // this is protection period now\r\n      dataInput.Presentations[0].periodOption = DISPLAY_RETIREMENT\r\n    }\r\n    const noSurvivor = dataInput.Clients.length === 1;\r\n    const insNeedLine = getInsNeedLine(\r\n      dataInput.Presentations[0],\r\n      projectEnd,\r\n      lang,\r\n      noSurvivor,\r\n      singleFamily,\r\n      noProjectYrs,\r\n      insNeed,\r\n      dataInput.Clients[0].Name\r\n    );\r\n\r\n    // if  singleFamily show years instead of ages as no children may be >1\r\n    if (singleFamily) {\r\n      dataOutput.dataNAAges = [];\r\n      for (let i = 0; i < noProjectYrs; i++) dataOutput.dataNAAges.push(i + 1);\r\n\r\n    }\r\n    /* let projectEnd = 65;\r\n    let noProjectYrs = 0;\r\n    let survAge;\r\n    \r\n    if (this.survIdx >= dataInput.Clients.length) this.survIdx = undefined;\r\n    if (this.survivorExists(dataInput.Clients.length)) {\r\n      projectEnd =\r\n        periodOption === DISPLAY_RETIREMENT\r\n          ? dataInput.Clients[this.survIdx].retirementAge\r\n          : periodOption === DISPLAY_LIFEEXP\r\n          ? dataOutput.lifeExpectancy.spouse +\r\n            dataInput.Clients[this.survIdx].Age\r\n          : periodOption === DISPLAY_ANALYSIS\r\n          ? dataOutput.lifeExpectancy.joint +\r\n            dataInput.Clients[this.survIdx].Age +\r\n            3\r\n          : 100;\r\n      noProjectYrs = projectEnd - dataInput.Clients[this.survIdx].Age;\r\n      survAge = dataInput.Clients[this.survIdx].Age;\r\n    } else survAge = dataInput.Clients[QUOTE_CLIENT].Age;\r\n */\r\n\r\n    //  let hasSurivor = false;\r\n    /*     const spKey = APPLET_INA ? MEMBER.SPOUSE.Key : MEMBER.CLIENT.Key;\r\n        let Survivor = dataInput.Clients.find(x => x.memberKey === spKey);\r\n    \r\n        if (Survivor !== undefined && APPLET_INA) {\r\n          if (dataInput.Clients.length === 1)\r\n            Survivor = dataInput.Clients.find(x => x.memberKey === MEMBER.CLIENT.Key);\r\n          else {\r\n            Survivor = dataInput.Clients.find(x => x.memberKey === MEMBER.DEPENDENT_ADULT.Key);\r\n            if (Survivor !== undefined)\r\n              Survivor = dataInput.Clients.find(x => x.memberKey === MEMBER.CHILD.Key);\r\n    \r\n    \r\n          }\r\n    \r\n        }\r\n    \r\n        if (Survivor !== undefined || APPLET_EP) {\r\n          hasSurivor = true;\r\n        }\r\n     */\r\n    // if file is PYE\r\n    if (dataInput.Clients.length === 1) this.survIdx = 0;\r\n\r\n    const Survivor = this.state.dataInput.Clients[this.survIdx]; //.find(x => x.memberKey === spKey);\r\n    /* if (Survivor !== undefined) {\r\n      hasSurivor = true;\r\n    }\r\n\r\n    if (this.survIdx !== undefined) hasSurivor = true; */\r\n    const inputOutputIsValid =\r\n      insuranceNeeds.length > 0 &&\r\n      dataOutput.dataNAAges !== undefined &&\r\n      Survivor !== undefined;\r\n\r\n    //Survivor !== undefined\r\n\r\n    if (this.state.failedAPI) console.log(\"timer API call failed re ADSF\");\r\n\r\n    let dataAges;\r\n    let dataGov;\r\n    let dataPCV;\r\n    let dataNeed;\r\n    let dataShort;\r\n    let buttonCaption;\r\n    let buttonCaption3;\r\n    let buttonCaptionPeriod;\r\n    /* let gridColumnAligns;\r\n    let dataTitle;\r\n    let dataColHeaders;\r\n    let gridColumnNoofDecimals;\r\n    let dataColumns;\r\n    let excelDataInfoSection; */\r\n    let tableWidth;\r\n    let dataEstateLiability;\r\n    let aggregateGrid;\r\n\r\n    buttonCaption = [\r\n      TITLES[lang].presBut,\r\n      TITLES[lang].graphsBut,\r\n      TITLES[lang].spreadsheetBut,\r\n      TITLES[lang].analysisBut,\r\n    ];\r\n    buttonCaption3 = [\r\n      TITLES[lang].presBut,\r\n      TITLES[lang].graphsBut,\r\n      TITLES[lang].spreadsheetBut,\r\n    ];\r\n    buttonCaptionPeriod = [\r\n      TITLES[lang].retBut,\r\n      TITLES[lang].leBut,\r\n      TITLES[lang].age100But,\r\n    ];\r\n\r\n    if (\r\n      this.survIdx !== undefined &&\r\n      dataInput.Clients[this.survIdx].memberKey !== MEMBER.SPOUSE.Key &&\r\n      dataInput.Clients[this.survIdx].memberKey !== MEMBER.CLIENT.Key\r\n    )\r\n      buttonCaptionPeriod = [TITLES[lang].protectButton];\r\n    if (inputOutputIsValid) {\r\n      // project liabs\r\n      var totalLiabProjections = getProjectedLiabilities(\r\n        dataInput,\r\n        projectEnd,\r\n        dataOutput.probate\r\n      );\r\n\r\n      dataAges = dataOutput.dataNAAges.slice(0, noProjectYrs);\r\n      dataGov = dataOutput.dataCashFlowGov.slice(0, noProjectYrs);\r\n      dataPCV = dataOutput.dataCashFlowPersonal.slice(0, noProjectYrs);\r\n      // if(this.INAOption!==DISPLAY_INCOME)\r\n      dataEstateLiability = getDataFutureEstateLiability(\r\n        //getDataFutureEstateLiability(this.dataTaxLiability.numericValues, totalLiabProjections).slice(0, noProjectYrs);\r\n        dataOutput.dataTaxLiability,\r\n        totalLiabProjections\r\n      );\r\n      dataNeed = dataOutput.dataCashFlowNeeds.slice(0, noProjectYrs);\r\n      dataShort = dataOutput.dataShortfall.slice(0, noProjectYrs);\r\n\r\n      let dataSurvivorSalaryIncome = dataInput.Sources.find(\r\n        (x) => x.sourceTypeKey === INCOMESOURCES.SURVIVORS_INCOME\r\n      );\r\n      if (dataSurvivorSalaryIncome !== undefined) {\r\n        dataSurvivorSalaryIncome.reduce((a, b) => a + b, 0);\r\n      }\r\n      dataSurvivorSalaryIncome = dataOutput.dataShortfall.slice(\r\n        0,\r\n        noProjectYrs\r\n      );\r\n\r\n      \r\n  \r\n      if (dataOutput.aggregateGrid != undefined)\r\n        tableWidth =\r\n          Math.min(\r\n            100,\r\n            10 * this.state.dataOutput.aggregateGrid.dataColTitles.length\r\n          ) + \"%\";\r\n\r\n      // MCC quote\r\n      // dataMCC= INAMCCQuote(this.state,insNeed);\r\n    }\r\n\r\n    const altRow = \"#F8F8F8\";\r\n\r\n    const graphs = (\r\n      <OutputGraphs\r\n        insuranceNeed={insNeed}\r\n        projectEnd={projectEnd}\r\n        dataCashFlowPersonal={dataPCV}\r\n        dataInput={dataInput}\r\n        dataNAAges={dataAges}\r\n        dataCashFlowNeeds={dataNeed}\r\n        dataCashFlowGov={dataGov}\r\n        dataShortfall={dataShort}\r\n        insNeedLine={insNeedLine}\r\n        aggregateGrid={dataOutput.aggregateGrid}\r\n        LE={dataOutput.lifeExpectancy.spouse} // + survAge}\r\n        //language={lang}\r\n        //projectTo={this.toRetirement ? 0 : 1}\r\n\r\n        periodOption={periodOption}\r\n        /* projectTo={\r\n        periodOption === DISPLAY_RETIREMENT\r\n          ? DISPLAY_RETIREMENT\r\n          : periodOption === DISPLAY_LIFEEXP\r\n            ? DISPLAY_LIFEEXP\r\n            : DISPLAY_ENDAGE\r\n      } */\r\n      />\r\n    );\r\n    const graphsEP = (\r\n      <OutputGraphsEP\r\n        insuranceNeed={insNeedLE3}\r\n        projectEnd={projectEnd} // try this now // always to the end\r\n        dataEstateLiability={dataEstateLiability}\r\n        dataInput={dataInput}\r\n        dataNAAges={dataAges}\r\n        lifeExp={dataOutput.lifeExpectancy.joint} // client or if spouse JLTD\r\n        lifeExpJLTD={dataOutput.lifeExpectancy.joint}\r\n        lifeExpClient={dataOutput.lifeExpectancy.client}\r\n        probate={dataOutput.probate}\r\n        INAOption={this.INAOption}\r\n        //dataShortfall={dataShort}\r\n        //dataAPISite={appSiteAPI}\r\n        LE={dataOutput.lifeExpectancy.spouse} // + survAge}\r\n        assetProjections={dataOutput.assetProjections}\r\n        //language={lang}\r\n        //projectTo={this.toRetirement ? 0 : 1}\r\n        // periodOption={DISPLAY_LIFEEXP_PLUS_3}\r\n      />\r\n    );\r\n\r\n    const analysis = (\r\n      <div\r\n        style={{\r\n          marginTop: \"-4px\",\r\n          backgroundColor: \"lightgrey\",\r\n          paddingLeft: \"5px\",\r\n        }}\r\n      >\r\n        <AnalysisGraphs\r\n          insuranceNeed={insNeedLE3}\r\n          projectEnd={projectEnd} // try this now // always to the end\r\n          dataEstateLiability={dataEstateLiability}\r\n          dataInput={dataInput}\r\n          dataNAAges={dataAges}\r\n          lifeExp={dataOutput.lifeExpectancy.spouse}\r\n          lifeExpJLTD={dataOutput.lifeExpectancy.joint}\r\n          lifeExpClient={dataOutput.lifeExpectancy.client}\r\n          INAOption={this.INAOption}\r\n          dataShortfall={dataShort}\r\n          dataAPISite={appSiteAPI}\r\n          language={lang}\r\n          //projectTo={this.toRetirement ? 0 : 1}\r\n          periodOption={DISPLAY_LIFEEXP_PLUS_3}\r\n          //projectTo={this.lifeExp + 3} // always to the end\r\n          /* periodOption === DISPLAY_RETIREMENT\r\n          ? 0\r\n          : periodOption === DISPLAY_LIFEEXP\r\n          ? 1\r\n          : 2\r\n      } */\r\n        />\r\n      </div>\r\n    );\r\n\r\n    let infoIcon = getGenericMessage(lang);\r\n    infoIcon.infoText = getInfoIconSourcesGov(lang).infoText;\r\n    const govPopup = this.state.failedRemove && (\r\n      <div style={{ paddingLeft: \"45%\" }}>\r\n        {\" \"}\r\n        <Info infoIcon={infoIcon} respondToPopUp={this.hideEstateRemoveMsg} />\r\n      </div>\r\n    );\r\n\r\n    //const singleFamily = isSingleFamily(dataInput.Clients); //this.survivorExists(dataInput.Clients.length) &&\r\n    //dataInput.Clients[this.survIdx].memberKey !==\r\n    //  MEMBER.SPOUSE.Key;\r\n    const noSources = dataInput.Sources.length;\r\n\r\n     return (\r\n      <div id=\"main\" className={this.state.initialLoading === true? \"mainDivBlocked\":\"mainDiv\"}>\r\n        <style>{`@media print {display: none;}`}</style>\r\n        <Header\r\n          title={\r\n            this.INAOption === DISPLAY_INCOME\r\n              ? TITLES[lang].appletINA\r\n              : TITLES[lang].appletEP\r\n          }\r\n          saveToFile={this.saveToFile}\r\n          loadFromFile={this.loadFromFile}\r\n          loadStorage={this.loadStorage}\r\n          EmailINA={this.EmailINA}\r\n          changeLang={this.changeLang}\r\n          saveAsDefaultCase={this.saveAsDefaultCase}\r\n          language={lang}\r\n        />\r\n\r\n        {/* <div style={{marginTop:'15px'}} ><MultiButtons\r\n        \r\n          noButtons={2}\r\n          buttonCaption={[\"Income Protection\", \"Estate Protection\"]}\r\n          selectMultiButton={this.selectMultiButtonINAorTax}\r\n        /></div>\r\n         */}\r\n\r\n        <div className=\"topMargin\" />\r\n\r\n        <div style={{ height: \"0px\" }}>\r\n          <PopupUserinputDialog\r\n            openDialog={showInput === true}\r\n            language={lang}\r\n            respondToInput={this.respondToSaveRequest}\r\n          />\r\n        </div>\r\n        <Collapsible\r\n          id={COLLAPSIBLE_PRESENTATION}\r\n          title={TITLES[lang].presentations}\r\n          openParent={this.openParent}\r\n          openCollapsible={this.openCollapsible[COLLAPSIBLE_PRESENTATION]}\r\n          handleCollapsibleClick={this.handleCollapsibleClick}\r\n        >\r\n          {dataInput.Presentations.map((presentation) => (\r\n            <Presentation\r\n              key={presentation.id}\r\n              id={1}\r\n              provinceKey={presentation.provinceKey}\r\n              presentationCurr={presentation}\r\n              language={lang}\r\n              presentationsNo={1}\r\n              //saveAsDefaultCase={this.saveAsDefaultCase}\r\n              handleUpdate={this.handleUpdatePresentation}\r\n            />\r\n          ))}\r\n        </Collapsible>\r\n        <Collapsible\r\n          id={COLLAPSIBLE_CLIENTS}\r\n          title={TITLES[lang].clients}\r\n          openParent={this.openParent}\r\n          openForce={this.openForce}\r\n          handleCollapsibleClick={this.handleCollapsibleClick}\r\n          openCollapsible={this.openCollapsible[COLLAPSIBLE_CLIENTS]}\r\n          infoIcon={APPLET_EP?getInfoIconPYE_JLTD(lang):undefined}\r\n        >\r\n          {dataInput.Clients.map((client) => (\r\n            <Client\r\n              key={client.id}\r\n              id={i++}\r\n              clientCurr={client}\r\n              singleFamily={singleFamily}\r\n              isTheSurvivor={\r\n                (this.survIdx !== undefined &&\r\n                  dataInput.Clients[this.survIdx].memberKey ===\r\n                    client.memberKey) ||\r\n                (singleFamily && client.id > 1)\r\n                  ? true\r\n                  : false\r\n              }\r\n              themeColor={i % 2 && isMobileDevice() ? altRow : \"white\"}\r\n              language={lang}\r\n              isQC={dataInput.Presentations[0].provinceKey === \"QC\"}\r\n              clientsNo={dataInput.Clients.length} //clientsNo}\r\n              handleUpdate={this.handleUpdateClient}\r\n              handleAddClient={this.handleAddClient}\r\n              handleRemoveClient={this.handleRemoveClient}\r\n              switchClients={this.switchClients}\r\n              disableAddRemove={this.state.loading}\r\n            />\r\n          ))}\r\n        </Collapsible>\r\n\r\n        <Collapsible\r\n          id={COLLAPSIBLE_ASSETS}\r\n          title={TITLES[lang].assets}\r\n          openParent={this.openParent}\r\n          openCollapsible={this.openCollapsible[COLLAPSIBLE_ASSETS]}\r\n          handleCollapsibleClick={this.handleCollapsibleClick}\r\n        >\r\n          {dataInput.Assets.map((asset) => (\r\n            <Asset\r\n              key={asset.id}\r\n              assetCurr={asset}\r\n              id={j++}\r\n              language={lang}\r\n              themeColor={j % 2 && isMobileDevice() ? altRow : \"white\"}\r\n              assetsNo={dataInput.Assets.length} //.assetsNo}\r\n              clientsNo={dataInput.Clients.length} //.assetsNo}\r\n              handleUpdate={this.handleUpdateAsset}\r\n              handleAddAsset={this.handleAddAsset}\r\n              handleRemoveAsset={this.handleRemoveAsset}\r\n             // handleAddAssetTaxLiability={this.handleAddAssetTaxLiability}\r\n              adjustVisibleOutputSection={this.adjustVisibleOutputSection}\r\n              hasPersonalResidenceAlready={this.hasPersonalResidenceAlready()}\r\n              projection={dataOutput.assetProjections}\r\n              disableAddRemove={this.state.loading}\r\n            />\r\n          ))}\r\n          {/* allow zero rows */}\r\n          {dataInput.Assets.length === 0 ? ( //).assetsNo === 0 ? (\r\n            <AddRemove\r\n              currentID={0}\r\n              minComps={0}\r\n              numberComps={0}\r\n              handleDoAdd={this.handleAddAsset}\r\n              handleDoRemove={this.handleRemoveAsset}\r\n            />\r\n          ) : (\r\n            \"\"\r\n          )}\r\n        </Collapsible>\r\n        <Collapsible\r\n          id={COLLAPSIBLE_LIABS}\r\n          title={TITLES[lang].liabilities}\r\n          openParent={this.openParent}\r\n          openCollapsible={this.openCollapsible[COLLAPSIBLE_LIABS]}\r\n          handleCollapsibleClick={this.handleCollapsibleClick}\r\n        >\r\n          {dataInput.Liabilitys.map((liability) => (\r\n            <Liability\r\n              key={liability.id}\r\n              liabilityCurr={liability}\r\n              probate={dataOutput.probate}\r\n              language={lang}\r\n              liabilitysNo={dataInput.Liabilitys.length} //.liabilitysNo}\r\n              themeColor={k % 2 && isMobileDevice() ? altRow : \"white\"}\r\n              handleUpdate={this.handleUpdateLiability}\r\n              handleAddLiability={this.handleAddLiability}\r\n              handleRemoveLiability={this.handleRemoveLiability}\r\n             // handleAddAssetTaxCredit={this.handleAddAssetTaxCredit}\r\n              disableAddRemove={this.state.loading}\r\n            />\r\n          ))}\r\n          {/* allow zero rows */}\r\n          {dataInput.Liabilitys.length === 0 ? ( //).liabilitysNo === 0 ? (\r\n            <AddRemove\r\n              currentID={0}\r\n              minComps={0}\r\n              numberComps={0}\r\n              handleDoAdd={this.handleAddLiability}\r\n              handleDoRemove={this.handleRemoveLiability}\r\n            />\r\n          ) : (\r\n            \"\"\r\n          )}\r\n        </Collapsible>\r\n\r\n        {this.INAOption === DISPLAY_INCOME && (\r\n          <Collapsible\r\n            id={COLLAPSIBLE_SOURCES}\r\n            title={TITLES[lang].sources}\r\n            openParent={this.openParent}\r\n            openCollapsible={this.openCollapsible[COLLAPSIBLE_SOURCES]}\r\n            handleCollapsibleClick={this.handleCollapsibleClick}\r\n            infoIcon={getInfoIconInflationGrowth(lang)}\r\n          >\r\n            {govPopup}\r\n            {dataInput.Sources.map((source) => {\r\n                let OrphanAges;\r\n              let maxOrphanDur;\r\n              if (\r\n                source.sourceTypeKey === INCOMESOURCES.GOV_ORPHANS_BENEFIT.Key\r\n              ) {\r\n                OrphanAges = dataInput.Clients.filter(function (item) {\r\n                  return source.ownerID === item.id;\r\n                });\r\n                \r\n                if (OrphanAges.length > 0)\r\n                  maxOrphanDur =\r\n                    (dataInput.Presentations[0].provinceKey === \"QC\"\r\n                      ? MAX_ORPHAN_DUR_QC\r\n                      : MAX_ORPHAN_DUR_NON_QC) - OrphanAges[0].Age;\r\n              }\r\n              return (\r\n                /* !(source.amount === 0 && source.id < noSources && source.sourceTypeKey === INCOMESOURCES.SURVIVORS_INCOME.Key) && */ (\r\n                  <Source // notSurvivorWithZeroIncome and not new sources\r\n                    key={source.id}\r\n                    id={n++}\r\n                    sourceCurr={\r\n                      source.sourceTypeKey ===\r\n                      INCOMESOURCES.GOV_ORPHANS_BENEFIT.Key\r\n                        ? {\r\n                            ...source,\r\n                            maxOrphan: this.orphan,\r\n                            maxOrphanDur: maxOrphanDur,\r\n                          }\r\n                        : source\r\n                    }\r\n                    /* Type={source.Type}\r\n              amount={source.amount}\r\n              startYear={source.startYear}\r\n              duration={source.duration}\r\n              ownerID={source.ownerID} */\r\n                    includeGovOrphanBenefit={this.areThereChildren()}\r\n                    language={lang}\r\n                    sourcesNo={dataInput.Sources.length} //sourcesNo}\r\n                    themeColor={n % 2 && isMobileDevice() ? altRow : \"white\"}\r\n                    handleUpdate={this.handleUpdateSource}\r\n                    handleAddSource={this.handleAddSource}\r\n                    handleRemoveSource={this.handleRemoveSource}\r\n                    disableAddRemove={this.state.loading}\r\n                  />\r\n                )\r\n              );\r\n            })}\r\n          </Collapsible>\r\n        )}\r\n        {this.INAOption === DISPLAY_INCOME && (\r\n          <Collapsible\r\n            id={COLLAPSIBLE_NEEDS}\r\n            title={TITLES[lang].needs}\r\n            openParent={this.openParent}\r\n            openCollapsible={this.openCollapsible[COLLAPSIBLE_NEEDS]}\r\n            handleCollapsibleClick={this.handleCollapsibleClick}\r\n            infoIcon={getInfoIconNeedGrowth(lang)}\r\n            \r\n          >\r\n            {dataInput.Needs.map((need) => (\r\n              <Need\r\n                key={need.id}\r\n                id={l++}\r\n                needCurr={need}\r\n                language={lang}\r\n                needsNo={dataInput.Needs.length} //needsNo}\r\n                afterTaxTotalIncome={this.getAfterTaxTotalIncome(dataInput)}\r\n                themeColor={l % 2 && isMobileDevice() ? altRow : \"white\"}\r\n                handleUpdate={this.handleUpdateNeed}\r\n                handleAddNeed={this.handleAddNeed}\r\n                handleRemoveNeed={this.handleRemoveNeed}\r\n                disableAddRemove={this.state.loading}\r\n              />\r\n            ))}\r\n          </Collapsible>\r\n        )}\r\n        {/*<Collapsible id=\"8\" title={TITLES[lang].settings} openParent={this.openParent}  handleCollapsibleClick\r\n={this. handleCollapsibleClick\r\n}>\r\n\t\t\t\t\t<Setting key={this.state.dataSettings.Settings.id} index={1} Province={this.state.dataSettings.Settings.Province} invRate={this.state.dataSettings.Settings.invRate} inflation={this.state.dataSettings.Settings.inflation} taxRate={this.state.dataSettings.Settings.taxRate} language={lang}  handleUpdate={this.handleUpdateSetting} />\r\n\t\t\t\t\t\r\n\t\t\t\t</Collapsible>*/}\r\n\r\n        {this.state.failedAPI ? (\r\n          <div style={{ paddingLeft: \"40%\" }}>\r\n            <Info\r\n              infoIcon={getInfoNoInternetAccess(lang)}\r\n              respondToPopUp={this.respondToPopUp}\r\n              ref={(Info) => (this.dlgLogin = Info)}\r\n            />\r\n          </div>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n\r\n{/* this.state.loading===false &&  */<Collapsible\r\n          id={COLLAPSIBLE_RESULTS}\r\n          title={TITLES[lang].results}\r\n          enabled={this.state.loading===false}\r\n          openParent={this.openParent}\r\n          openCollapsible={this.openCollapsible[COLLAPSIBLE_RESULTS]}\r\n          handleCollapsibleClick={this.handleCollapsibleClick}\r\n        >\r\n          \r\n          <div style={{ width: \"100%\", float: \"left\", clear: \"left\" }}>\r\n            {versionDetails().allowAnalysis === true && !APPLET_INA ? (\r\n              <MultiButtons\r\n                noButtons={4}\r\n                buttonCaption={buttonCaption}\r\n                selected={dataInput.Presentations[0].resultsOption}\r\n                selectMultiButton={this.selectMultiButton}\r\n              />\r\n            ) : (\r\n              <MultiButtons\r\n                noButtons={3}\r\n                buttonCaption={buttonCaption3}\r\n                selected={dataInput.Presentations[0].resultsOption}\r\n                selectMultiButton={this.selectMultiButton}\r\n              />\r\n            )}\r\n          </div>\r\n\r\n          <div style={{ width: \"100%\", float: \"left\", clear: \"left\" }}>\r\n            {/* <MultiButtons\r\n              button1={ret}\r\n              button2={le}\r\n              buttonActive={this.toRetirement ? 1 : 2}\r\n              selectButton={this.setInsDuration}\r\n            /> */}\r\n            {this.INAOption === DISPLAY_INCOME &&\r\n              dataInput.Presentations[0].resultsOption !== DISPLAY_ANALYSIS &&\r\n              !singleFamily && (\r\n                <MultiButtons\r\n                  noButtons={3}\r\n                  buttonCaption={buttonCaptionPeriod}\r\n                  selected={dataInput.Presentations[0].periodOption + 1}\r\n                  selectMultiButton={this.selectMultiButtonPeriod}\r\n                />\r\n              )}\r\n\r\n            {periodOption !== DISPLAY_RETIREMENT &&\r\n              dataInput.Presentations[0].resultsOption !== DISPLAY_ANALYSIS && (\r\n                <span style={{ fontSize: \"10px\", fontColor: \"grey\" }}>\r\n                  {/* <Info iconName=\"infoRed.png\" id=\"warning\" msg={msg1} /> */}\r\n                </span>\r\n              )}\r\n          </div>\r\n          {dataOutput.dataCashFlowPersonal.length === 0 ? (\r\n            \"\"\r\n          ) : dataInput.Presentations[0].resultsOption === DISPLAY_GRAPHS ? (\r\n            APPLET_INA ? (\r\n              graphs\r\n            ) : (\r\n              graphsEP\r\n            )\r\n          ) : dataInput.Presentations[0].resultsOption ===\r\n            DISPLAY_SPREADSHEET ? (\r\n            //<div style={{ width: tableWidth }}>\r\n            <div>\r\n              {/* {APPLET_INA && this.state.dataOutput.aggregateGrid !== null && this.state.dataOutput.aggregateGrid !== undefined ? */}\r\n              {\r\n                dataOutput.aggregateGrid !== null &&\r\n                  dataOutput.aggregateGrid !== undefined && (\r\n                    <AggregateGrid\r\n                      aggregateGrid={dataOutput.aggregateGrid}\r\n                      LE={APPLET_INA?dataOutput.lifeExpectancy.spouse:dataOutput.lifeExpectancy.joint}\r\n                      lang={lang}\r\n                      insNeedLine={insNeedLine}\r\n                    />\r\n                  )\r\n                \r\n              }\r\n              {/* : APPLET_EP && <ExcelSpreadsheetEP input={this.state} noProjectYrs={noProjectYrs} />} */}\r\n            </div>\r\n          ) : dataInput.Presentations[0].resultsOption === DISPLAY_ANALYSIS ? (\r\n            analysis\r\n          ) : this.INAOption === DISPLAY_INCOME ? (\r\n            <OutputPresentation\r\n              insuranceNeed={insNeed}\r\n              insuranceNeedRet={insNeedRet}\r\n              insuranceNeedLE={insNeedLE}\r\n              insuranceNeedEAge={insNeedEAge}\r\n              projectEnd={projectEnd}\r\n              insNeedLine={insNeedLine}\r\n              LE={dataOutput.lifeExpectancy.spouse + survAge}\r\n              dataInput={dataInput}\r\n              INAOption={this.INAOption}\r\n              dataShortfall={dataShort}\r\n              imageRemove={this.imageRemove}\r\n              imageAdjust={this.imageAdjust}\r\n              encryptedInputLife1AndSpouse={dataOutput.encryptedInputLife1AndSpouse}\r\n              encryptedInputLife1={dataOutput.encryptedInputLife1}\r\n              //periodOption={periodOption}\r\n              getSpouseINA={this.getSwitchClientsState}\r\n            />\r\n          ) : (\r\n            <OutputPresentationEP\r\n              //insuranceNeed={insNeed}\r\n              insuranceNeedRet={insNeedRet}\r\n              insuranceNeedLE={insNeedLE}\r\n              //insuranceNeedEAge={insNeedEAge}\r\n              //projectEnd={projectEnd}\r\n              LE={dataOutput.lifeExpectancy.joint}//client} //{dataOutput.lifeExpectancy.spouse + survAge}\r\n              dataInput={dataInput}\r\n              assetProjections={dataOutput.assetProjections}\r\n              aggregateGrid={dataOutput.aggregateGrid}\r\n              probate={dataOutput.probate}\r\n              INAOption={this.INAOption}\r\n              //dataEstateLiability={dataEstateLiability} //getDataFutureEstateLiability(this.dataTaxLiability.numericValues, totalLiabProjections)}\r\n              dataShortfall={dataShort}\r\n              imageRemove={this.imageRemove}\r\n              imageAdjust={this.imageAdjust}\r\n              //periodOption={periodOption}\r\n              encryptedInputLife1AndSpouse={dataOutput.encryptedInputLife1AndSpouse}\r\n              encryptedInputLife1={dataOutput.encryptedInputLife1}\r\n            />\r\n          )}\r\n        </Collapsible>}\r\n        {this.state.initialLoading === true &&\r\n        <div style={{ marginTop: \"20px\", marginLeft: \"90px\" }}>\r\n          <Loader type=\"TailSpin\" color=\"black\" height={30} width={30} />\r\n        </div>\r\n      }\r\n      {this.state.SnapImport?<PasteClients/>:\"\"}\r\n        <div id=\"copyDiv\" style={{paddingBottom: \"40px\"}}></div>\r\n        \r\n\r\n        {/*\t\t\t\t<DownloadExcel ref={this.excel}  id=\"DExcel\" downloadNow={this.state.downloadExcelNow} hideElement={true}/>\t\t\t\t\t\t\r\n\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n <button onPress={() => Linking.openURL('mailto:support@example.com?subject=SendMail&body=Description') }\r\n      title=\"support@example.com\" /> */}\r\n        <br />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nimport { DropDown } from \"./DropDown\";\r\n//import { InputField4 } from './inputField4';\r\nimport { InputField } from \"./inputField\";\r\nimport { AddRemove } from \"./AddRemove\";\r\nimport { cleanFormat } from \"../utils/helper\";\r\nimport {\r\n  getInfoIconClientsMember,\r\n  getInfoIconClientsElig,\r\n  getInfoIconSpouseElig,\r\n  getInfoIconClientsTax,\r\n  getInfoIconClientsRetire,\r\n  getInfoIncome,\r\n} from \"../definitions/infoIconsDefinitions\";\r\nimport { appletMode } from \"../../package.json\";\r\n\r\nimport {\r\n  MESSAGES,\r\n  SEX,\r\n  SMOKING,\r\n  MEMBER,\r\n  CONTROLTITLE,\r\n  TITLES,\r\n  QUOTE_CLIENT,\r\n  QUOTE_SPOUSE,\r\n  APPLET_EP,\r\n  APPLET_INA,\r\n} from \"../definitions/generalDefinitions\";\r\nimport {\r\n  getListItemNameFromKey,\r\n  getDisableValues,\r\n  getListItemKeyFromName,\r\n} from \"../utils/helper\";\r\nimport { createDefaultClient } from \"../data/createDefaults\";\r\nexport class Client extends Component {\r\n  displayName = Client.name;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      name: this.props.clientCurr.Name,\r\n    };\r\n    var sexValues = [\r\n      {\r\n        label: SEX.MALE.value[this.props.language],\r\n        value: 1,\r\n      },\r\n      { label: SEX.FEMALE.value[this.props.language], value: 2 },\r\n    ];\r\n\r\n    var smokingValues = [\r\n      {\r\n        label: SMOKING.NON_SMOKER.value[this.props.language],\r\n        value: 1,\r\n      },\r\n      { label: SMOKING.SMOKER.value[this.props.language], value: 2 },\r\n    ];\r\n\r\n    var memberValues = [\r\n      {\r\n        label: MEMBER.CLIENT.value[this.props.language],\r\n        value: 1,\r\n      },\r\n      { label: MEMBER.SPOUSE.value[this.props.language], value: 2 },\r\n      { label: MEMBER.CHILD.value[this.props.language], value: 3 },\r\n      { label: MEMBER.DEPENDENT_ADULT.value[this.props.language], value: 4 },\r\n    ];\r\n\r\n    if (APPLET_EP) {\r\n      memberValues = [\r\n        {\r\n          label: MEMBER.CLIENT.value[this.props.language],\r\n          value: 1,\r\n        },\r\n        { label: MEMBER.SPOUSE.value[this.props.language], value: 2 },\r\n      ];\r\n    }\r\n\r\n    const bilingual = CONTROLTITLE[this.props.language];\r\n    this.dataValues = {\r\n      DD: [\r\n        {\r\n          id: 1,\r\n          Title: bilingual.sex,\r\n          defValue: getListItemNameFromKey(\r\n            SEX,\r\n            this.props.clientCurr.sexKey,\r\n            this.props.language\r\n          ),\r\n          disableOptionValue: getDisableValues(SEX),\r\n          Values: sexValues,\r\n        },\r\n        {\r\n          id: 2,\r\n          Title: bilingual.smoking,\r\n          defValue: getListItemNameFromKey(\r\n            SMOKING,\r\n            this.props.clientCurr.smokerKey,\r\n            this.props.language\r\n          ),\r\n          disableOptionValue: getDisableValues(SMOKING),\r\n          Values: smokingValues,\r\n        },\r\n        {\r\n          id: 3,\r\n          Title: bilingual.member,\r\n          defValue: getListItemNameFromKey(\r\n            MEMBER,\r\n            this.props.clientCurr.memberKey,\r\n            this.props.language\r\n          ),\r\n          disableOptionValue: getDisableValues(MEMBER),\r\n          Values: memberValues,\r\n        },\r\n      ],\r\n    };\r\n    this.infoRetireRed = false;\r\n  \r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    // console.log(getListItemNameFromKey(SEX,nextProps.clientCurr.sexKey,this.props.language),nextProps.clientCurr.memberKey,this.props.language)\r\n    if (\r\n      nextProps.clientCurr !== this.props.clientCurr ||\r\n      nextProps.id !== this.props.id ||\r\n      // || nextProps.hasSurivor !== this.props.hasSurivor\r\n      nextProps.clientsNo !== this.props.clientsNo\r\n    ) {\r\n      // console.log(nextProps, this.props,this.dataValues)\r\n      this.dataValues.DD[0].defValue = getListItemNameFromKey(\r\n        SEX,\r\n        nextProps.clientCurr.sexKey,\r\n        this.props.language\r\n      );\r\n      this.dataValues.DD[1].defValue = getListItemNameFromKey(\r\n        SMOKING,\r\n        nextProps.clientCurr.smokerKey,\r\n        this.props.language\r\n      );\r\n      this.dataValues.DD[2].defValue = getListItemNameFromKey(\r\n        MEMBER,\r\n        nextProps.clientCurr.memberKey,\r\n        this.props.language\r\n      );\r\n      // console.log(nextProps, this.props,this.dataValues)\r\n\r\n      this.setState({ name: nextProps.clientCurr.Name });\r\n    }\r\n    //  if (nextProps.clientCurr.retirementAge == this.props.clientCurr.retirementAge)\r\n    //  this.infoRetireRed= false;\r\n  }\r\n\r\n  handleDoRemove = (id) => {\r\n    if (this.props.disableAddRemove === false) {\r\n      this.props.handleRemoveClient(id);\r\n    }\r\n  };\r\n\r\n  handleDoAdd = () => {\r\n    if (this.props.disableAddRemove === false) {\r\n      let newCliet;\r\n      if (this.props.clientsNo === 1) newCliet = createDefaultClient(2);\r\n      else {\r\n        newCliet = createDefaultClient(this.props.clientsNo + 1); //add spouse\r\n        newCliet.Age =\r\n          18 - 2 * (this.props.clientsNo > 6 ? 4 : this.props.clientsNo + 1);\r\n        newCliet.sexKey =\r\n          this.props.clientsNo % 2 ? SEX.MALE.Key : SEX.FEMALE.Key;\r\n        newCliet.retirementAge = 25;\r\n      }\r\n      this.props.handleAddClient(newCliet);\r\n    }\r\n  };\r\n\r\n  doSwitch = () => {\r\n    this.props.switchClients();\r\n  };\r\n  handleUpdateInput = (id, value) => {\r\n    let client = this.getCurrClient();\r\n    /*    let client = {\r\n      id: this.props.id,\r\n      Age: this.props.clientCurr.Age,\r\n      sexKey: this.props.clientCurr.sexKey,\r\n      smokerKey: this.props.clientCurr.smokerKey,\r\n      Income: this.props.clientCurr.Income,\r\n      avgTaxRate: this.props.clientCurr.avgTaxRate,\r\n      memberKey: this.props.clientCurr.memberKey,\r\n      retirementAge: this.props.clientCurr.retirementAge,\r\n      Eligibility: this.props.clientCurr.Eligibility,\r\n      Name:this.props.clientCurr.Name\r\n    };\r\n */\r\n    const lang = this.props.language;\r\n    const valueClean = cleanFormat(value, lang);\r\n    const valueCleanInt = parseInt(valueClean);\r\n\r\n    let changed = false;\r\n    //this.infoRetireRed= false;\r\n    if (id === 0) {\r\n      changed = client.Age !== parseInt(value) ? true : false;\r\n      client.Age = parseInt(value);\r\n    } else if (id === 1) {\r\n      changed = client.Income !== valueCleanInt ? true : false;\r\n      client.Income = valueCleanInt;\r\n    } else if (id === 2) {\r\n      changed =\r\n        client.avgTaxRate !==\r\n        parseInt(100 * valueClean) / 100\r\n          ? true\r\n          : false;\r\n      client.avgTaxRate =\r\n        parseInt(100 * valueClean) / 100;\r\n    } else if (id === 3) {\r\n      changed = client.retirementAge !== parseInt(value) ? true : false;\r\n      if (changed) {\r\n        this.infoRetireRed = true;\r\n        setTimeout(() => {\r\n          this.infoRetireRed = false;\r\n        }, 4000);\r\n      }\r\n      client.retirementAge = parseInt(value);\r\n    } else if (id === 4) {\r\n      changed =\r\n        client.Eligibility !==\r\n        parseInt(100 * valueClean) / 100\r\n          ? true\r\n          : false;\r\n      client.Eligibility =\r\n        parseInt(100 * valueClean) / 100;\r\n    }\r\n\r\n    if (changed) {\r\n      this.props.handleUpdate(client);\r\n      this.setState({ loading: this.props.disableAddRemove });\r\n    }\r\n  };\r\n\r\n  updateDDown = (id, selection) => {\r\n    let client = this.getCurrClient();\r\n    /*  {\r\n      id: this.props.id,\r\n      Age: this.props.clientCurr.Age,\r\n      sexKey: this.props.clientCurr.sexKey,\r\n      smokerKey: this.props.clientCurr.smokerKey,\r\n      Income: this.props.clientCurr.Income,\r\n      avgTaxRate: this.props.clientCurr.avgTaxRate,\r\n      memberKey: this.props.clientCurr.memberKey,\r\n      retirementAge: this.props.clientCurr.retirementAge,\r\n      Eligibility: this.props.clientCurr.Eligibility,\r\n      Name:this.props.clientCurr.Name\r\n    }; */\r\n    if (id === 1) client.sexKey = getListItemKeyFromName(SEX, selection);\r\n    else if (id === 2)\r\n      client.smokerKey = getListItemKeyFromName(SMOKING, selection);\r\n    else if (id === 3)\r\n      client.memberKey = getListItemKeyFromName(MEMBER, selection);\r\n    else if (id === 5) client.Name = selection;\r\n\r\n    if (\r\n      client.memberKey === MEMBER.CHILD.Key &&\r\n      this.props.clientCurr.memberKey !== MEMBER.CHILD.Key\r\n    ) {\r\n      client.Income = 0;\r\n      client.avgTaxRate = 0;\r\n      client.Age = 16;\r\n      client.retirementAge = 25;\r\n    } else if (\r\n      client.memberKey === MEMBER.DEPENDENT_ADULT.Key &&\r\n      this.props.clientCurr.memberKey !== MEMBER.DEPENDENT_ADULT.Key\r\n    ) {\r\n      client.Income = 0;\r\n      client.avgTaxRate = 0;\r\n      client.Age = 25;\r\n      client.retirementAge = 65;\r\n    } else if (\r\n      client.memberKey === MEMBER.SPOUSE.Key &&\r\n      this.props.clientCurr.memberKey !== MEMBER.SPOUSE.Key\r\n    ) {\r\n      client.Income = 60000;\r\n      client.avgTaxRate = 25;\r\n      client.Age = 40;\r\n      client.retirementAge = 65;\r\n    }\r\n    this.props.handleUpdate(client);\r\n  };\r\n\r\n  writeBack = (name) => {\r\n    let client = this.getCurrClient();\r\n    client.Name = name;\r\n    this.props.handleUpdate(client);\r\n  };\r\n\r\n  updateName = (evt) => {\r\n    this.setState({ name: evt.target.value }, this.writeBack(evt.target.value));\r\n  };\r\n\r\n  getCurrClient = () => {\r\n    let client = {\r\n      id: this.props.id,\r\n      Age: this.props.clientCurr.Age,\r\n      sexKey: this.props.clientCurr.sexKey,\r\n      smokerKey: this.props.clientCurr.smokerKey,\r\n      Income: this.props.clientCurr.Income,\r\n      avgTaxRate: this.props.clientCurr.avgTaxRate,\r\n      memberKey: this.props.clientCurr.memberKey,\r\n      retirementAge: this.props.clientCurr.retirementAge,\r\n      Eligibility: this.props.clientCurr.Eligibility,\r\n      Name: this.props.clientCurr.Name,\r\n    };\r\n    return client;\r\n  };\r\n\r\n  handleFocus = (event) => {\r\n    event.target.select();\r\n  };\r\n\r\n  render() {\r\n    const nonSpouse =\r\n      this.props.clientCurr.memberKey === MEMBER.CHILD.Key ||\r\n      this.props.clientCurr.memberKey === MEMBER.DEPENDENT_ADULT.Key;\r\n    const nonSpouseIsTheSurvivor = nonSpouse && this.props.isTheSurvivor;\r\n    const nonSpouseHasIncome =\r\n      this.props.clientCurr.Income > 0 &&\r\n      (this.props.clientCurr.memberKey === MEMBER.CHILD.Key ||\r\n        this.props.clientCurr.memberKey === MEMBER.DEPENDENT_ADULT.Key);\r\n    const bilingual = CONTROLTITLE[this.props.language];\r\n\r\n    let clientMember =\r\n      this.props.clientCurr.memberKey === MEMBER.CLIENT.Key &&\r\n      this.props.id === 1;\r\n    let disableMember = clientMember; // || (this.props.clientCurr.memberKey === MEMBER.SPOUSE.Key &&\r\n    //     this.props.id === 2);\r\n    // console.log(CONTROLTITLE[this.props.language].member, this.props.language,this.dataValues.DD[2])\r\n    // disable Client\r\n    this.dataValues.DD[2].disableOptionValue[QUOTE_CLIENT] = true;\r\n    this.dataValues.DD[2].disableOptionValue[\r\n      QUOTE_SPOUSE\r\n    ] = nonSpouseIsTheSurvivor ? this.props.clientCurr.id !== 2 : true;\r\n    let desc =\r\n      this.props.clientCurr.id === 1\r\n        ? TITLES[this.props.language].insured\r\n        : this.props.clientCurr.id === 2\r\n        ? TITLES[this.props.language].benef\r\n        : \"\";\r\n    if (APPLET_EP)\r\n      desc =\r\n        this.props.clientCurr.id === 1\r\n          ? this.props.clientsNo === 1\r\n            ? TITLES[this.props.language].insured\r\n            : TITLES[this.props.language].insuredJLTD\r\n          : this.props.clientCurr.id === 2\r\n          ? TITLES[this.props.language].insuredJLTD\r\n          : \"\";\r\n    const greyedName = desc;\r\n    const nameHolder = this.state.name === \"\" ? desc : this.state.name;\r\n\r\n    const textColourStyle =\r\n      this.state.name === \"\" || this.state.name === greyedName\r\n        ? { color: \"#99A4be\" }\r\n        : { color: \"black\" };\r\n    if (this.state.loading === true && this.props.disableAddRemove === true) {\r\n      return \"\";\r\n    } else {\r\n      return (\r\n        <div className=\"inputRow\">\r\n          <div className=\"dropDown inputDiv\">\r\n            <div className=\"controlTitle\">\r\n              {CONTROLTITLE[this.props.language].name}\r\n            </div>\r\n            <input\r\n              key={5}\r\n              id={5}\r\n              className=\"inputField  textareaAssetName\"\r\n              /*                 style={textColourStyle} */\r\n              placeholder={greyedName}\r\n              value={this.state.name}\r\n              onClick={(e) => this.handleFocus(e)}\r\n              onFocus={(e) => this.handleFocus(e)}\r\n              type=\"text\"\r\n              onBlur={(evt) => this.updateName(evt)}\r\n              onChange={(evt) => this.setState({ name: evt.target.value })}\r\n\r\n              //onBlur={(evt) => this.updateName(evt)}\r\n            />\r\n\r\n            {/* \r\n              <input\r\n                id={12}\r\n                type=\"text\"\r\n                className=\"inputField  textareaAssetName\"\r\n                onChange={this.updateDesc}\r\n                value={assetCurr.description}\r\n              /> */}\r\n          </div>\r\n          <InputField\r\n            id={0}\r\n            inputName={bilingual.age}\r\n            format={1}\r\n            Count={this.props.clientsNo}\r\n            language={this.props.language}\r\n            inputValue={this.props.clientCurr.Age}\r\n            handleUpdateInput={this.handleUpdateInput}\r\n          />\r\n          {this.dataValues.DD.map((dd) => {\r\n            return (nonSpouse && dd.Title === bilingual.smoking) ||\r\n              dd.Title === bilingual.age ? (\r\n              \"\"\r\n            ) : (\r\n              <DropDown\r\n                key={dd.id}\r\n                id={dd.id}\r\n                Count={this.props.clientsNo}\r\n                Title={dd.Title}\r\n                defValue={dd.defValue}\r\n                disable={dd.Title === bilingual.member ? disableMember : false}\r\n                infoIcon={\r\n                  dd.Title === bilingual.member &&\r\n                  dd.defValue ===\r\n                    getListItemNameFromKey(\r\n                      MEMBER,\r\n                      MEMBER.CLIENT.Key,\r\n                      this.props.language\r\n                    )\r\n                    ? getInfoIconClientsMember(this.props.language)\r\n                    : undefined\r\n                }\r\n                // hasSurivor={this.props.hasSurivor}\r\n                Values={dd.Values}\r\n                language={this.props.language}\r\n                disableOption={dd.disableOptionValue}\r\n                updateDDown={this.updateDDown}\r\n              />\r\n            );\r\n          })}\r\n\r\n          {\r\n            /* nonSpouse && !nonSpouseHasIncome   && !nonSpouseIsTheSurvivor ? (\r\n          \"\"\r\n        ) :  */ <InputField\r\n              id={1}\r\n              inputName={bilingual.income}\r\n              format={2}\r\n              Count={this.props.clientsNo}\r\n              infoIcon={\r\n                this.props.id === 1\r\n                  ? getInfoIncome(this.props.language)\r\n                  : undefined\r\n              }\r\n              language={this.props.language}\r\n              inputValue={this.props.clientCurr.Income}\r\n              handleUpdateInput={this.handleUpdateInput}\r\n            />\r\n          }\r\n          {\r\n            /* nonSpouse && !nonSpouseHasIncome  && !nonSpouseIsTheSurvivor ? (\r\n          \"\"\r\n        ) : */ <InputField\r\n              id={2}\r\n              inputName={bilingual.avgTax}\r\n              format={3}\r\n              Count={this.props.clientsNo}\r\n              //info={MESSAGES[this.props.language].infoAvgTax}\r\n              infoIcon={\r\n                this.props.id === 1\r\n                  ? getInfoIconClientsTax(this.props.language)\r\n                  : undefined\r\n              }\r\n              showInfo={!disableMember} //infoOnlyForRowID={2}\r\n              language={this.props.language}\r\n              inputValue={\r\n                Math.round(10000 * this.props.clientCurr.avgTaxRate) / 10000\r\n              }\r\n              handleUpdateInput={this.handleUpdateInput}\r\n            />\r\n          }\r\n          {nonSpouse && !nonSpouseIsTheSurvivor ? (\r\n            \"\"\r\n          ) : (\r\n            <InputField\r\n              id={3}\r\n              inputName={\r\n                nonSpouseIsTheSurvivor\r\n                  ? bilingual.protectToAge\r\n                  : bilingual.retAge\r\n              }\r\n              format={1}\r\n              Count={this.props.clientsNo}\r\n              language={this.props.language}\r\n              inputValue={this.props.clientCurr.retirementAge}\r\n              infoIcon={\r\n                this.props.id !== 1\r\n                  ? getInfoIconClientsRetire(\r\n                      this.props.language,\r\n                      this.infoRetireRed\r\n                    )\r\n                  : undefined\r\n              }\r\n              handleUpdateInput={this.handleUpdateInput}\r\n            />\r\n          )}\r\n          {nonSpouse ? (\r\n            \"\"\r\n          ) : (\r\n            <InputField\r\n              id={4}\r\n              inputName={this.props.isQC?bilingual.qppElig:bilingual.cppElig}\r\n              format={3}\r\n              Count={this.props.clientsNo}\r\n              //info={MESSAGES[this.props.language].infoElig}\r\n              infoIcon={\r\n                this.props.id === 1\r\n                  ? getInfoIconClientsElig(this.props.language)\r\n                  : getInfoIconSpouseElig(this.props.language)\r\n              }\r\n              showInfo={disableMember}\r\n              language={this.props.language}\r\n              inputValue={\r\n                Math.round(10000 * this.props.clientCurr.Eligibility) / 10000\r\n              }\r\n              handleUpdateInput={this.handleUpdateInput}\r\n            />\r\n          )}\r\n          {/* {isVersion2019() === false && disableMember ? ( */}\r\n          {clientMember === true &&\r\n            this.props.clientsNo > 1 &&\r\n            !this.props.singleFamily &&\r\n            APPLET_INA && (\r\n              <button\r\n                className=\"switchClient\"\r\n                style={{\r\n                  width: this.props.language === \"en\" ? \"115px\" : \"125px\",\r\n                }}\r\n                onClick={this.doSwitch}\r\n              >\r\n                {/* <font size=\"-4\">&#8645;</font> */}\r\n                {bilingual.switch}\r\n                {/* Switch Client */}\r\n              </button>\r\n            )}\r\n          <AddRemove\r\n            currentID={this.props.id}\r\n            numberComps={this.props.clientsNo}\r\n            fixedFirstRow={true}\r\n            minComps={1} //{appletMode===\"INA\"?2:1}\r\n            disabled={this.props.disableAddRemove}\r\n            maxRows={APPLET_INA ? 100 : 2}\r\n            handleDoAdd={this.handleDoAdd}\r\n            handleDoRemove={this.handleDoRemove}\r\n           />\r\n          {/* {isMobileDevice() && this.props.id < this.props.clientsNo ? (\r\n          <hr className=\"ppi2\" />\r\n        ) : (\r\n          \"\"\r\n        )} */}\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { DropDown } from \"./DropDown\";\r\nimport { InputField } from \"./inputField\";\r\n\r\nimport {\r\n  getInfoIconProbate,\r\n} from \"../definitions/infoIconsDefinitions\";\r\n\r\nimport { AddRemove } from \"./AddRemove\";\r\nimport {\r\n  getListToShowByOrder,\r\n  getProjectedLiability,\r\n  cleanFormat,\r\n  getListItemNameFromKey,\r\n  getListItemKeyFromName,\r\n  arrayFormatMoney,\r\n} from \"../utils/helper\";\r\n\r\nimport {\r\n  LIABILITIES,\r\n  ASSETS,\r\n  OWNERSHIP,\r\n  CONTROLTITLE,\r\n  GROWTHDIR,\r\n  UNLISTED,\r\n  ASSET_TaxCredit,\r\n  APPLET_INA,\r\n  APPLET_EP  \r\n} from \"../definitions/generalDefinitions\";\r\nimport { isMobileDevice } from \"../utils/helper\";\r\nimport DataTable from \"./GridExcelComponent/DataTable\";\r\nimport { fetchAssetProjection } from \"../utils/FetchAPIs\";\r\nimport {\r\n  LIABILITY_API_OUTPUT_Year,\r\n  LIABILITY_API_OUTPUT_Age,\r\n  LIABILITY_API_OUTPUT_ProjectedValue,\r\n  LIABILITY_API_OUTPUT_TaxCredit,\r\n  DROPDOWN_WIDE,\r\n} from \"../definitions/generalDefinitions\";\r\n\r\nexport class Liability extends Component {\r\n  displayName = Liability.name;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      displaySreadsheet: false,\r\n      loading: false,\r\n      dataProjection:[]\r\n    };\r\n    var i;\r\n    var typeValues = [];\r\n    const listLiabsToShow = getListToShowByOrder(LIABILITIES);\r\n    for (i = 0; i < listLiabsToShow.length; ++i) {\r\n      typeValues.push({\r\n        label: listLiabsToShow[i].value[this.props.language],\r\n        value: i + 1,\r\n      });\r\n    }\r\n    var ownerValues = [\r\n      { label: OWNERSHIP.CLIENT.value[this.props.language], value: 1 },\r\n      { label: OWNERSHIP.SPOUSE.value[this.props.language], value: 2 },\r\n      { label: OWNERSHIP.JOINT.value[this.props.language], value: 3 },\r\n    ];\r\n\r\n    var growthDirValues = [\r\n      //{ label: GROWTHDIR[this.props.language].Values[0], value: 1 },\r\n      //{ label: GROWTHDIR[this.props.language].Values[1], value: 2 },\r\n      { label: GROWTHDIR.GROWS.value[this.props.language], value: 1 },\r\n      { label: GROWTHDIR.REDUCES.value[this.props.language], value: 2 },\r\n    ];\r\n\r\n    this.dataValues = {\r\n      DD: [\r\n        {\r\n          id: 1,\r\n          Title: CONTROLTITLE[this.props.language].type,\r\n          defValue: getListItemNameFromKey(\r\n            LIABILITIES,\r\n            this.props.liabilityCurr.liabTypeKey,\r\n            this.props.language\r\n          ),\r\n          Values: typeValues,\r\n        },\r\n        {\r\n          id: 2,\r\n          Title: CONTROLTITLE[this.props.language].owner,\r\n          defValue: getListItemNameFromKey(\r\n            OWNERSHIP,\r\n            this.props.liabilityCurr.ownerKey,\r\n            this.props.language\r\n          ),\r\n          Values: ownerValues,\r\n        },\r\n        {\r\n          id: 3,\r\n          Title: CONTROLTITLE[this.props.language].growthDir,\r\n          defValue: //this.props.liabilityCurr.growthDir,\r\n          getListItemNameFromKey(\r\n            GROWTHDIR,\r\n            this.props.liabilityCurr.growthDirKey,\r\n            this.props.language\r\n          ),\r\n          Values: growthDirValues,\r\n        },\r\n      ],\r\n    };\r\n    //this.dataProjection = [];\r\n    this.dataColTitles = [];\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (\r\n      nextProps.liabilityCurr !== this.props.liabilityCurr ||\r\n      nextProps.id !== this.props.id ||\r\n      nextProps.liabilitysNo !== this.props.liabilitysNo\r\n    ) {\r\n      // console.log(nextProps.liabilityCurr.liabTypeKey)\r\n      this.dataValues.DD[0].defValue = getListItemNameFromKey(\r\n        LIABILITIES,\r\n        nextProps.liabilityCurr.liabTypeKey,\r\n        this.props.language\r\n      );\r\n      this.dataValues.DD[1].defValue = getListItemNameFromKey(\r\n        OWNERSHIP,\r\n        nextProps.liabilityCurr.ownerKey,\r\n        this.props.language\r\n      );\r\n      this.dataValues.DD[2].defValue = // nextProps.liabilityCurr.growthDir;\r\n      getListItemNameFromKey(\r\n        GROWTHDIR,\r\n        nextProps.liabilityCurr.growthDirKey,\r\n        this.props.language\r\n      );\r\n\r\n    }\r\n    if (nextProps.probate !== this.props.probate)\r\n    {\r\n      this.setLiabData(nextProps.liabilityCurr,nextProps.probate)\r\n    }\r\n  }\r\n\r\n  handleDoRemove = (id) => {\r\n    this.props.handleRemoveLiability(id);\r\n  };\r\n\r\n  handleDoAdd = () => {\r\n    var liabNo =\r\n      this.props.liabilitysNo > this.dataValues.DD[0].Values.length - 1\r\n        ? this.dataValues.DD[0].Values.length - 1\r\n        : this.props.liabilitysNo;\r\n\r\n    var liabNext = this.dataValues.DD[0].Values[liabNo].label;\r\n    const liabTypeKey = getListItemKeyFromName(LIABILITIES, liabNext);\r\n\r\n    let liability = {\r\n      id: this.props.liabilitysNo + 1,\r\n      //Type: liabNext,\r\n      liabTypeKey: liabTypeKey,\r\n      ownerKey: OWNERSHIP.CLIENT.Key,\r\n      currValue: 0,\r\n      //growthDir: GROWTHDIR[this.props.language].Values[0],\r\n      growthDirKey: GROWTHDIR.GROWS.Key,\r\n      growth: 0,\r\n      repay: 0,\r\n      exposureDur: 99,\r\n      assetTaxLiabID: 0,\r\n      assetTaxLiabProj: [],\r\n    };\r\n\r\n    liability = this.setLiabilityValuesToDefault(liability);\r\n\r\n    this.props.handleAddLiability(liability); //liabNext);\r\n  };\r\n\r\n  updateDDown = (id, selection) => {\r\n    let liability = {\r\n      id: this.props.liabilityCurr.id,\r\n      //Type: this.props.liabilityCurr.Type,\r\n      liabTypeKey: this.props.liabilityCurr.liabTypeKey,\r\n      ownerKey: this.props.liabilityCurr.ownerKey,\r\n      currValue: this.props.liabilityCurr.currValue,\r\n      growth: this.props.liabilityCurr.growth,\r\n      //growthDir: this.props.liabilityCurr.growthDir,\r\n      growthDirKey: this.props.liabilityCurr.growthDirKey,\r\n      exposureDur: this.props.liabilityCurr.exposureDur,\r\n      repay: this.props.liabilityCurr.repay,\r\n    };\r\n    if (id === 1) {\r\n      //liability.Type = selection;\r\n      liability.liabTypeKey = getListItemKeyFromName(LIABILITIES, selection);\r\n    } else if (id === 2) {\r\n      liability.ownerKey = getListItemKeyFromName(OWNERSHIP, selection);\r\n    } else if (id === 3) {\r\n      //liability.growthDir = selection;\r\n      liability.growthDirKey = getListItemKeyFromName(GROWTHDIR, selection);;\r\n    }\r\n\r\n    liability = this.setLiabilityValuesToDefault(liability);\r\n\r\n    this.props.handleUpdate(liability);\r\n    if(this.state.displaySreadsheet) this.setLiabData(liability);// this.handleClick()\r\n  };\r\n\r\n  handleUpdateInput = (id, value) => {\r\n    let liability = {\r\n      id: this.props.liabilityCurr.id,\r\n      //Type: this.props.liabilityCurr.Type,\r\n      liabTypeKey: this.props.liabilityCurr.liabTypeKey,\r\n      ownerKey: this.props.liabilityCurr.ownerKey,\r\n      currValue: this.props.liabilityCurr.currValue,\r\n      growth: this.props.liabilityCurr.growth,\r\n      exposureDur: this.props.liabilityCurr.exposureDur,\r\n      repay: this.props.liabilityCurr.repay,\r\n      //growthDir: this.props.liabilityCurr.growthDir,\r\n      growthDirKey: this.props.liabilityCurr.growthDirKey,\r\n    };\r\n\r\n    let changed = false;\r\n    const lang = this.props.language;\r\n    const valueClean = cleanFormat(value,lang);\r\n    const valueCleanInt = parseInt(valueClean);\r\n   \r\n    if (id === 1) {\r\n      changed =\r\n        liability.currValue !== valueCleanInt ? true : false;\r\n      liability.currValue = valueCleanInt;\r\n    } else if (id === 2) {\r\n      changed =\r\n        liability.growth !==\r\n        parseInt(100 * valueClean) / 100\r\n          ? true\r\n          : false;\r\n      liability.growth =\r\n        parseInt(100 * valueClean) / 100;\r\n    } else if (id === 3) {\r\n      changed = liability.exposureDur !== parseInt(value) ? true : false;\r\n      liability.exposureDur = parseInt(value);\r\n    }\r\n    if (id === 4) {\r\n      changed = liability.repay !== valueCleanInt ? true : false;\r\n      liability.repay = valueCleanInt;\r\n    }\r\n\r\n    if (changed){\r\n      \r\n      this.props.handleUpdate(liability);\r\n      if(this.state.displaySreadsheet) this.setLiabData(liability);//  this.handleClick()\r\n      \r\n  }\r\n   // if(!this.state.displaySreadsheet)  this.setState({ loading: this.props.disableAddRemove });\r\n    \r\n  };\r\n\r\n\r\n  setLiabData=(liability,probate)=>{\r\n    this.setState({ loading: true});\r\n    let dataProjection=[]\r\n  const loan =\r\n  liability.liabTypeKey ===\r\n      LIABILITIES.OUTSTANDING_LOANS.Key ||\r\n      liability.liabTypeKey ===\r\n      LIABILITIES.MORTGAGE_REDEMPTION.Key;\r\n\r\n  if (loan)\r\n    this.dataColTitles = [\r\n      \"Year\",\r\n      \"Repayment\",\r\n      \"Projected Value\",\r\n      //   \"Tax Credit\"\r\n    ];\r\n  else\r\n    this.dataColTitles = [\r\n      \"Year\",\r\n      \"Projected Value\",\r\n      //   \"Tax Credit\"\r\n    ];\r\n\r\n  const lang = this.props.language;\r\n  //console.log(this.props.probate)\r\n  let liabs = getProjectedLiability(liability,probate);\r\n\r\n  let years = [];\r\n  let repays = [];\r\n  let i;\r\n  let repay;\r\n  let year;\r\n  for (i = 0; i < liability.exposureDur + 1; ++i) {\r\n    repay=i>0?liability.repay:0;\r\n    year=i>0?i:\"today\";\r\n    years.push(year);\r\n    repays.push(repay);\r\n  }\r\n\r\n  let taxCredits = [];\r\n  dataProjection[0] = years;\r\n  if (loan) {\r\n    dataProjection[1] = arrayFormatMoney(repays, lang, 0);\r\n    dataProjection[2] = arrayFormatMoney(liabs, lang, 0);\r\n  } else dataProjection[1] = arrayFormatMoney(liabs, lang, 0);\r\n\r\n  this.setState({dataProjection:dataProjection, loading: false});\r\n    \r\n}\r\n\r\n\r\n  handleClick = () => {\r\n    if(!this.props.disableAddRemove)\r\n    {\r\n    this.setState({ loading: true });\r\n    \r\n    this.setLiabData(this.props.liabilityCurr, this.props.probate)\r\n    /* const loan =\r\n      this.props.liabilityCurr.liabTypeKey ===\r\n        LIABILITIES.OUTSTANDING_LOANS.Key ||\r\n      this.props.liabilityCurr.liabTypeKey ===\r\n        LIABILITIES.MORTGAGE_REDEMPTION.Key;\r\n\r\n    if (loan)\r\n      this.dataColTitles = [\r\n        \"Year\",\r\n        \"Repayment\",\r\n        \"Projected Value\",\r\n        //   \"Tax Credit\"\r\n      ];\r\n    else\r\n      this.dataColTitles = [\r\n        \"Year\",\r\n        \"Projected Value\",\r\n        //   \"Tax Credit\"\r\n      ];\r\n\r\n    const lang = this.props.language;\r\n    let liabs = getProjectedLiability(this.props.liabilityCurr, lang);\r\n\r\n    let years = [];\r\n    let repays = [];\r\n    let i;\r\n    let repay;\r\n    let year;\r\n    for (i = 0; i < this.props.liabilityCurr.exposureDur + 1; ++i) {\r\n      repay=i>0?this.props.liabilityCurr.repay:0;\r\n      year=i>0?i:\"today\";\r\n      years.push(year);\r\n      repays.push(repay);\r\n    }\r\n\r\n    let taxCredits = [];\r\n    this.dataProjection[0] = years;\r\n    if (loan) {\r\n      this.dataProjection[1] = arrayFormatMoney(repays, lang, 0);\r\n      this.dataProjection[2] = arrayFormatMoney(liabs, lang, 0);\r\n    } else this.dataProjection[1] = arrayFormatMoney(liabs, lang, 0);\r\n */\r\n    //this.dataProjection[3] = taxCredits;\r\n\r\n    // console.log(this.dataProjection);\r\n\r\n    this.setState((prevState) => {\r\n      let display = prevState.displaySreadsheet;\r\n      return { displaySreadsheet: !display, loading: this.props.disableAddRemove };\r\n      \r\n    });\r\n  }\r\n  };\r\n  //});\r\n  //}\r\n\r\n  \r\n  setLiabilityValuesToDefault = (liability) => {\r\n    if (liability.liabTypeKey === LIABILITIES.OUTSTANDING_LOANS.Key) {\r\n      liability.exposureDur = 10;\r\n    } else if (liability.liabTypeKey === LIABILITIES.MORTGAGE_REDEMPTION.Key) {\r\n      liability.exposureDur = 25;\r\n    }\r\n\r\n    return liability;\r\n  };\r\n\r\n  render() {\r\n\r\n    //const growthSel = GROWTHDIR[this.props.language].Values.indexOf(\r\n    //  this.props.liabilityCurr.growthDir );\r\n      const growthSel = this.props.liabilityCurr.growthDirKey===GROWTHDIR.GROWS.Key?GROWTHDIR.GROWS.ID:GROWTHDIR.REDUCES.ID; \r\n   \r\n\r\n    const loanOrTax =\r\n      this.props.liabilityCurr.liabTypeKey ===\r\n        LIABILITIES.OUTSTANDING_LOANS.Key ||\r\n      this.props.liabilityCurr.liabTypeKey ===\r\n        LIABILITIES.MORTGAGE_REDEMPTION.Key ||\r\n      this.props.liabilityCurr.liabTypeKey ===\r\n        LIABILITIES.CLIENT_TAX_LIABILITY.Key;\r\n\r\n    const probate=     this.props.liabilityCurr.liabTypeKey ===   LIABILITIES.PROBATE.Key\r\n    \r\n    const showGrowth =\r\n    !APPLET_INA &&\r\n      !loanOrTax && !probate && \r\n      this.dataValues.DD.map((dd) => dd.id === 3);\r\n    const showRepay =\r\n    !APPLET_INA &&\r\n      (this.props.liabilityCurr.liabTypeKey ===\r\n        LIABILITIES.MORTGAGE_REDEMPTION.Key ||\r\n        this.props.liabilityCurr.liabTypeKey ===\r\n          LIABILITIES.OUTSTANDING_LOANS.Key);\r\n\r\n    const showExposure =\r\n    !APPLET_INA && !probate && \r\n      !(\r\n        this.props.liabilityCurr.liabTypeKey ===\r\n        LIABILITIES.CLIENT_TAX_LIABILITY.Key\r\n      );\r\n\r\n    // console.log(this.props.liabilityCurr.id,this.props.liabilityCurr.liabTypeKey,this.props.liabilitysNo)\r\n\r\n\r\n    if (this.state.loading === true && this.props.disableAddRemove=== true) {\r\n      return (\r\n       \"\"\r\n      );\r\n    } else {\r\n    return (\r\n      <div className=\"inputRow\">\r\n        {this.dataValues.DD.map(\r\n          (\r\n            dd // don't show ownership dosen't matter \r\n          ) =>\r\n            dd.id < 3 &&\r\n             !(dd.id === 2) &&  ( \r\n              <DropDown\r\n                key={dd.id}\r\n                id={dd.id}\r\n                Count={this.props.liabilitysNo}\r\n                Title={dd.Title}\r\n                infoIcon={\r\n                  dd.Title === CONTROLTITLE[this.props.language].type && this.props.liabilityCurr.liabTypeKey===LIABILITIES.PROBATE.Key\r\n                    ? getInfoIconProbate(this.props.language)\r\n                    : undefined\r\n                }\r\n                width={DROPDOWN_WIDE}\r\n                defValue={dd.defValue}\r\n                Values={dd.Values}\r\n                updateDDown={this.updateDDown}\r\n              />\r\n            )\r\n        )}\r\n        <InputField\r\n          inputName={CONTROLTITLE[this.props.language].amount}\r\n          id={1}\r\n          format={2}\r\n          Count={this.props.liabilitysNo}\r\n          language={this.props.language}\r\n          inputValue={this.props.liabilityCurr.currValue}\r\n          handleUpdateInput={this.handleUpdateInput}\r\n        />\r\n\r\n        {showRepay && (\r\n          <InputField\r\n            inputName={CONTROLTITLE[this.props.language].repay}\r\n            id={4}\r\n            format={2}\r\n            Count={this.props.liabilitysNo}\r\n            language={this.props.language}\r\n            inputValue={this.props.liabilityCurr.repay}\r\n            handleUpdateInput={this.handleUpdateInput}\r\n          />\r\n        )}\r\n\r\n        {!APPLET_INA  &&\r\n          !loanOrTax && !probate && \r\n          this.dataValues.DD.map(\r\n            (dd) =>\r\n              dd.id === 3 && (\r\n                <DropDown\r\n                  key={dd.id}\r\n                  id={dd.id}\r\n                  Count={this.props.liabilitysNo}\r\n                  Title={dd.Title}\r\n                  defValue={dd.defValue}\r\n                  Values={dd.Values}\r\n                  updateDDown={this.updateDDown}\r\n                />\r\n              )\r\n          )}\r\n        {!APPLET_INA  && !loanOrTax && !probate &&  (\r\n          <InputField\r\n            inputName={\r\n              growthSel === 0\r\n                ? CONTROLTITLE[this.props.language].growth\r\n                : CONTROLTITLE[this.props.language].changeRate\r\n            }\r\n            id={2}\r\n            format={3}\r\n            Count={this.props.liabilitysNo}\r\n            language={this.props.language}\r\n            inputValue={Math.round(10000*this.props.liabilityCurr.growth)/10000}\r\n            handleUpdateInput={this.handleUpdateInput}\r\n          />\r\n        )}\r\n\r\n        {showExposure && (\r\n          <InputField\r\n            inputName={CONTROLTITLE[this.props.language].exposureDur}\r\n            id={3}\r\n            format={1}\r\n            Count={this.props.liabilitysNo}\r\n            language={this.props.language}\r\n            inputValue={this.props.liabilityCurr.exposureDur}\r\n            handleUpdateInput={this.handleUpdateInput}\r\n          />\r\n        )}\r\n\r\n        {!APPLET_INA  && (\r\n          <img\r\n            className=\"iconMore\"\r\n            onClick={this.handleClick}\r\n            id=\"gridOn\"\r\n            alt=\"ll\"\r\n            src={\r\n              this.state.displaySreadsheet === true\r\n                ? require(\"../images/gridOff.png\")\r\n                : require(\"../images/gridOn.png\")\r\n            }\r\n          />\r\n        )}\r\n\r\n        <AddRemove\r\n          currentID={this.props.liabilityCurr.id}\r\n          minComps={0}\r\n          id={this.props.liabilityCurr.liabTypeKey}\r\n          numberComps={this.props.liabilitysNo}\r\n          handleDoAdd={this.handleDoAdd}\r\n          handleDoRemove={this.handleDoRemove}\r\n          disabled={this.props.disableAddRemove}\r\n        />\r\n        {/*isMobileDevice() &&\r\n        this.props.liabilityCurr.id < this.props.liabilitysNo ? (\r\n          <hr className=\"ppi2\" />\r\n        ) : (\r\n          \"\"\r\n        )*/}\r\n        {this.state.displaySreadsheet === true && (\r\n          <div style={{ clear: \"both\", float: \"left\", width: \"60%\" }}>\r\n            <DataTable\r\n              dataColTitles={this.dataColTitles}\r\n              dataProjection={this.state.dataProjection}\r\n              gridTitle={\r\n                getListItemNameFromKey(\r\n                  LIABILITIES,\r\n                  this.props.liabilityCurr.liabTypeKey,\r\n                  this.props.language\r\n                ) + \" Projection\"\r\n              }\r\n              language={this.props.language}\r\n            />\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { DropDown } from \"./DropDown\";\r\nimport { AddRemove } from \"./AddRemove\";\r\nimport { cleanFormat, getListToShowByOrder, getDisableValues } from \"../utils/helper\";\r\n\r\nimport { copyFromAnotherObject }  from \"../data/createDefaults\";\r\nimport {\r\n  CONTROLTITLE,\r\n  INCOMESOURCES,\r\n  DEFAULT_DIVIDEND_TAX_RATE,\r\n} from \"../definitions/generalDefinitions\";\r\n//import { InputField4 } from './inputField4';\r\nimport { InputField } from \"./inputField\";\r\nimport {\r\n  isMobileDevice,\r\n  getListItemNameFromKey,\r\n  getListItemKeyFromName,\r\n} from \"../utils/helper\";\r\nimport { DROPDOWN_WIDE } from \"../definitions/generalDefinitions\";\r\nimport {\r\n  getInfoIconSourcesGov,\r\n  getInfoIconAssetsYr0,\r\n  getInfoIconInflationGrowth\r\n} from \"../definitions/infoIconsDefinitions\";\r\n\r\nexport class Source extends Component {\r\n  displayName = Source.name;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    let i;\r\n    let typeValues = [];\r\n    const listSourcesToShow = getListToShowByOrder(INCOMESOURCES);\r\n    for (i = 0; i < listSourcesToShow.length; ++i) {\r\n      {\r\n        typeValues.push({\r\n          label: listSourcesToShow[i].value[this.props.language],\r\n          value: i + 1,\r\n        });\r\n      }\r\n    }\r\n\r\n    /* \r\n    for (i = 0; i <= 5; ++i) {\r\n      typeValues.push({\r\n        label: INCOMESOURCES[this.props.language].Values[i],\r\n        value: i + 1\r\n      });\r\n    }\r\n */\r\n    // console.log(this.props.sourceCurr)\r\n    this.state = {};\r\n    this.dataValues = {\r\n      DD: [\r\n        {\r\n          id: 1,\r\n          Title: CONTROLTITLE[this.props.language].type,\r\n          defValue: getListItemNameFromKey(\r\n            INCOMESOURCES,\r\n            this.props.sourceCurr.sourceTypeKey,\r\n            this.props.language\r\n          ),\r\n          disableOptionValue: getDisableValues(INCOMESOURCES),\r\n          Values: typeValues,\r\n        },\r\n      ],\r\n    };\r\n    this.dataValues.DD[0].disableOptionValue[INCOMESOURCES.GOV_DEATH_BENEFIT.ID]=true;\r\n    this.dataValues.DD[0].disableOptionValue[INCOMESOURCES.GOV_SURVIVORS_PENSION.ID]=true;\r\n    this.dataValues.DD[0].disableOptionValue[INCOMESOURCES.GOV_ORPHANS_BENEFIT.ID]=true;\r\n\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (\r\n      nextProps.sourceCurr !== this.props.sourceCurr ||\r\n      nextProps.id !== this.props.id ||\r\n      nextProps.sourcesNo !== this.props.sourcesNo\r\n    ) {\r\n      // console.log(nextProps.sourceCurr.sourceTypeKey)\r\n      this.dataValues.DD[0].defValue = getListItemNameFromKey(\r\n        INCOMESOURCES,\r\n        nextProps.sourceCurr.sourceTypeKey,\r\n        this.props.language\r\n      );\r\n    }\r\n  }\r\n\r\n  handleDoRemove = (id) => {\r\n    if (this.props.disableAddRemove === false) {\r\n      this.props.handleRemoveSource(id);\r\n    }  \r\n  };\r\n\r\n  isSourceGovNonOrphanBenefit = (key) => {\r\n    if (\r\n      key === INCOMESOURCES.GOV_SURVIVORS_PENSION.Key ||\r\n      key === INCOMESOURCES.GOV_DEATH_BENEFIT.Key\r\n    )\r\n      return true;\r\n    else return false;\r\n  };\r\n\r\n  isDividendIncome = (key) => {\r\n    if (key === INCOMESOURCES.DIVIDEND_INCOME.Key) return true;\r\n    else return false;\r\n  };\r\n  isSourceGovOrphansBenefit = (key) => {\r\n    if (key === INCOMESOURCES.GOV_ORPHANS_BENEFIT.Key) return true;\r\n    else return false;\r\n  };\r\n\r\n  handleDoAdd = () => {\r\n    // no gov stuff\r\n    if (this.props.disableAddRemove === false) {\r\n    \r\n    var sourceNo =\r\n      this.props.sourcesNo > this.dataValues.DD[0].Values.length - 1\r\n        ? this.dataValues.DD[0].Values.length - 1\r\n        : this.props.sourcesNo;\r\n    //if(this.props.includeGovOrphanBenefit===false)\r\n    //  sourceNo +=1;\r\n    if (sourceNo > this.dataValues.DD[0].Values.length - 1) sourceNo -= 1;\r\n\r\n    let sourceNextKey = getListItemKeyFromName(\r\n      INCOMESOURCES,\r\n      this.dataValues.DD[0].Values[sourceNo].label\r\n    );\r\n\r\n    // dont add gov stuff unless has child && orphanben\r\n    while (\r\n      sourceNextKey === INCOMESOURCES.GOV_DEATH_BENEFIT.Key ||\r\n      sourceNextKey === INCOMESOURCES.GOV_SURVIVORS_PENSION.Key ||\r\n      (sourceNextKey === INCOMESOURCES.GOV_ORPHANS_BENEFIT.Key &&\r\n        this.props.includeGovOrphanBenefit === false)\r\n    ) {\r\n      sourceNo += 1;\r\n      sourceNextKey = getListItemKeyFromName(\r\n        INCOMESOURCES,\r\n        this.dataValues.DD[0].Values[sourceNo].label\r\n      );\r\n    }\r\n\r\n    // dont repeat\r\n    while (\r\n      sourceNextKey === this.props.sourceCurr.sourceTypeKey &&\r\n      this.props.sourceCurr.sourceTypeKey !== INCOMESOURCES.OTHER.Key\r\n    ) {\r\n      sourceNo += 1;\r\n      sourceNextKey = getListItemKeyFromName(\r\n        INCOMESOURCES,\r\n        this.dataValues.DD[0].Values[sourceNo].label\r\n      );\r\n    }\r\n\r\n    const source = {\r\n      id: this.props.sourcesNo + 1,\r\n      sourceTypeKey: sourceNextKey,\r\n      amount: 0,\r\n      startYear: 0,\r\n      // set others based on INA other values tax infl\r\n      // duration, growthRate,ownerID,taxRate depends on clients\r\n\r\n    };\r\n    if (sourceNextKey === INCOMESOURCES.DIVIDEND_INCOME.Key)\r\n      source.taxRate = DEFAULT_DIVIDEND_TAX_RATE;\r\n    // console.log(source)\r\n    this.props.handleAddSource(source);\r\n  }\r\n  };\r\n\r\n  updateDDown = (id, selection) => {\r\n    let source = {\r\n      id: this.props.sourceCurr.id,\r\n      //Type: this.props.Type,\r\n      sourceTypeKey: this.props.sourceCurr.sourceTypeKey,\r\n      amount: this.props.sourceCurr.amount,\r\n      startYear: this.props.sourceCurr.startYear,\r\n      duration: this.props.sourceCurr.duration,\r\n      taxRate: this.props.sourceCurr.taxRate,\r\n      annualGrowth: this.props.sourceCurr.annualGrowth,\r\n    };\r\n\r\n    if (id === 1)\r\n      source.sourceTypeKey = getListItemKeyFromName(INCOMESOURCES, selection);\r\n    else if (id === 2) source.ownerID = selection;\r\n    this.props.handleUpdate(source);\r\n  };\r\n\r\n  handleUpdateInput = (id, value) => {\r\n    let  s1 = {\r\n      id: this.props.sourceCurr.id,\r\n      //Type: this.props.Type,\r\n      sourceTypeKey: this.props.sourceCurr.sourceTypeKey,\r\n      amount: this.props.sourceCurr.amount,\r\n      startYear: this.props.sourceCurr.startYear,\r\n      duration: this.props.sourceCurr.duration,\r\n      ownerID: this.props.sourceCurr.ownerID,\r\n      taxRate: this.props.sourceCurr.taxRate,\r\n      annualGrowth: this.props.sourceCurr.annualGrowth,\r\n    };\r\n\r\n//    s1 =copyFromAnotherObject(this.props.sourceCurr)\r\n\r\n    let changed = false;\r\n    const lang = this.props.language;\r\n    const valueClean = cleanFormat(value,lang);\r\n    const valueCleanInt = parseInt(valueClean);\r\n\r\n    if (id === 1) {\r\n      changed = s1.amount !== valueCleanInt ? true : false;\r\n      s1.amount = valueCleanInt;\r\n    } else if (id === 2) {\r\n      changed = s1.startYear !== value ? true : false;\r\n      s1.startYear = value;\r\n    } else if (id === 3) {\r\n      changed = s1.duration !== value ? true : false;\r\n      s1.duration = value;\r\n    } else if (id === 4) {\r\n      changed =\r\n        s1.taxRate !==\r\n        parseInt(100 * valueClean) / 100\r\n          ? true\r\n          : false;\r\n      s1.taxRate =\r\n        parseInt(100 * valueClean) / 100;\r\n    } else if (id === 5) {\r\n      changed =\r\n        s1.annualGrowth !==\r\n        parseInt(100 * valueClean) / 100\r\n          ? true\r\n          : false;\r\n      s1.annualGrowth =\r\n        parseInt(100 * valueClean) / 100;\r\n    }\r\n    if (changed){\r\n       this.props.handleUpdate(s1);\r\n       this.setState({ loading: this.props.disableAddRemove });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const gov = this.isSourceGovNonOrphanBenefit(\r\n      this.props.sourceCurr.sourceTypeKey\r\n    );\r\n    const govOrphan = this.isSourceGovOrphansBenefit(\r\n      this.props.sourceCurr.sourceTypeKey\r\n    );\r\n    const dividend = this.isDividendIncome(this.props.sourceCurr.sourceTypeKey);\r\n    const RRIF = this.props.sourceCurr.sourceTypeKey === INCOMESOURCES.RRIF.Key;\r\n    // console.log(this.props.sourceCurr,govOrphan,this.props.sourceCurr.maxOrphan)\r\n    \r\n    \r\n    let unlistedGreyedOption;\r\n    if (RRIF) {\r\n      unlistedGreyedOption = [];\r\n      unlistedGreyedOption.push({\r\n        label: INCOMESOURCES.RRIF.value[this.props.language],\r\n        value: 1,\r\n      });\r\n    }\r\n\r\n    if (this.state.loading === true && this.props.disableAddRemove=== true) {\r\n      return (\r\n       \"\"\r\n      );\r\n    } else {\r\n      return (\r\n      <div className=\"inputRow\">\r\n        {this.dataValues.DD.map((dd) => (\r\n          <DropDown\r\n            key={dd.id}\r\n            id={dd.id}\r\n            Count={this.props.sourcesNo}\r\n            Title={dd.Title}\r\n            // infoIcon={gov && !govOrphan ? getInfoIconSourcesGov(this.props.language): undefined}\r\n            width={DROPDOWN_WIDE}\r\n            language={this.props.language}\r\n            defValue={dd.defValue}\r\n            Values={dd.Values}\r\n            disableOption={dd.disableOptionValue}\r\n            unlistedGreyedOption={unlistedGreyedOption}\r\n            updateDDown={this.updateDDown}\r\n          />\r\n        ))}\r\n        {!RRIF && (\r\n          <InputField\r\n            format={2}\r\n            id={1}\r\n            key=\"amt\"\r\n            inputName={CONTROLTITLE[this.props.language].amountGross}\r\n            readOnly={gov}\r\n            Count={this.props.sourcesNo}\r\n            language={this.props.language}\r\n            infoIcon={\r\n              gov || govOrphan// && !govOrphan\r\n                ? getInfoIconSourcesGov(this.props.language)\r\n                : undefined\r\n            }\r\n            maxValue={govOrphan ? this.props.sourceCurr.maxOrphan : undefined}\r\n            inputValue={this.props.sourceCurr.amount}\r\n            inputTitle={this.props.sourceCurr.id}\r\n            handleUpdateInput={this.handleUpdateInput}\r\n          />\r\n        )}\r\n\r\n        {gov || govOrphan ? (\r\n          \"\"\r\n        ) : (\r\n          <InputField\r\n            format={1}\r\n            id={2}\r\n            inputName={\r\n              RRIF\r\n                ? CONTROLTITLE[this.props.language].RRIFAge\r\n                : CONTROLTITLE[this.props.language].startYear\r\n            }\r\n            Count={this.props.sourcesNo}\r\n            language={this.props.language}\r\n            inputValue={this.props.sourceCurr.startYear}\r\n            infoIcon={getInfoIconAssetsYr0(this.props.language)}\r\n            //infoIcon={RRIF ? getInfoIconSourcesRRIF(this.props.language): undefined}\r\n            readOnly={RRIF}\r\n            inputTitle={this.props.sourceCurr.id}\r\n            handleUpdateInput={this.handleUpdateInput}\r\n          />\r\n        )}\r\n        {gov || RRIF ? (\r\n          \"\"\r\n        ) : (\r\n          <InputField\r\n            format={1}\r\n            id={3}\r\n            inputName={CONTROLTITLE[this.props.language].dur}\r\n            Count={this.props.sourcesNo}\r\n            language={this.props.language}\r\n            inputValue={this.props.sourceCurr.duration}\r\n            maxValue={\r\n              govOrphan ? this.props.sourceCurr.maxOrphanDur : undefined\r\n            }\r\n            inputTitle={this.props.sourceCurr.id}\r\n            handleUpdateInput={this.handleUpdateInput}\r\n          />\r\n        )}\r\n\r\n        {dividend && (\r\n          <InputField\r\n            id={4}\r\n            inputName={CONTROLTITLE[this.props.language].dividendTaxRate}\r\n            format={3}\r\n            Count={this.props.sourcesNo}\r\n            language={this.props.language}\r\n            //   infoIcon={getInfoIconDividend(this.props.language)}\r\n            inputValue={this.props.sourceCurr.taxRate}\r\n            inputTitle={this.props.sourceCurr.id}\r\n            handleUpdateInput={this.handleUpdateInput}\r\n          />\r\n        )}\r\n\r\n        <AddRemove\r\n          currentID={this.props.sourceCurr.id}\r\n          numberComps={this.props.sourcesNo}\r\n          handleDoAdd={this.handleDoAdd}\r\n          handleDoRemove={this.handleDoRemove}\r\n          disabled={this.props.disableAddRemove}\r\n        />\r\n        {/* {isMobileDevice() && this.props.sourceCurr.id < this.props.sourcesNo ? (\r\n          <hr className=\"ppi2\" />\r\n        ) : (\r\n          \"\"\r\n        )} */}\r\n      </div>\r\n    );\r\n      }\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { DropDown } from \"./DropDown\";\r\nimport { AddRemove } from \"./AddRemove\";\r\nimport { cleanFormat, getListItemKeyFromName } from \"../utils/helper\";\r\nimport {\r\n  MESSAGES,\r\n  CONTROLTITLE,\r\n  INCOMENEEDS,\r\n  DROPDOWN_WIDE,\r\n} from \"../definitions/generalDefinitions\";\r\n//import { InputField4 } from './inputField4';\r\nimport { InputField } from \"./inputField\";\r\nimport {\r\n  isMobileDevice,\r\n  getListToShowByOrder,\r\n  getListItemNameFromKey,\r\n} from \"../utils/helper\";\r\nimport {\r\n  getInfoSalaryPercent,\r\n  getInfoIconAssetsYr0,\r\n} from \"../definitions/infoIconsDefinitions\";\r\n\r\nexport class Need extends Component {\r\n  displayName = Need.name;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    let i;\r\n    let typeValues = [];\r\n    const listNeedsToShow = getListToShowByOrder(INCOMENEEDS);\r\n    for (i = 0; i < listNeedsToShow.length; ++i) {\r\n      typeValues.push({\r\n        label: listNeedsToShow[i].value[this.props.language],\r\n        value: i + 1,\r\n      });\r\n    }\r\n    this.state = {};\r\n    this.dataValues = {\r\n      DD: [\r\n        {\r\n          id: 1,\r\n          Title: CONTROLTITLE[this.props.language].type,\r\n          defValue: getListItemNameFromKey(\r\n            INCOMENEEDS,\r\n            this.props.needCurr.needTypeKey,\r\n            this.props.language\r\n          ),\r\n          Values: typeValues,\r\n        },\r\n      ],\r\n    };\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (\r\n      nextProps.needCurr !== this.props.needCurr ||\r\n      nextProps.id !== this.props.id ||\r\n      nextProps.needsNo !== this.props.needsNo\r\n    ) {\r\n      this.dataValues.DD[0].defValue = getListItemNameFromKey(\r\n        INCOMENEEDS,\r\n        nextProps.needCurr.needTypeKey,\r\n        this.props.language\r\n      );\r\n    }\r\n  }\r\n\r\n  handleDoRemove = (id) => {\r\n    if (this.props.disableAddRemove === false) {\r\n      this.props.handleRemoveNeed(id);\r\n    }\r\n  };\r\n\r\n  handleDoAdd = () => {\r\n    if (this.props.disableAddRemove === false) {\r\n      let needNo =\r\n      this.props.needsNo > this.dataValues.DD[0].Values.length - 1\r\n        ? this.dataValues.DD[0].Values.length - 1\r\n        : this.props.needsNo-1; // e % of income by default start from there\r\n\r\n    if (needNo > this.dataValues.DD[0].Values.length - 1) needNo -= 1\r\n    let needNext = this.dataValues.DD[0].Values[needNo].label;\r\n\r\n    const startYear = 0; //this.props.startYear\r\n    const dur = 1; //this.props.duration;\r\n\r\n    this.props.handleAddNeed(\r\n      getListItemKeyFromName(INCOMENEEDS, needNext),\r\n      startYear,\r\n      dur\r\n    );\r\n    }\r\n  };\r\n\r\n\r\n\r\n  updateDDown = (id, selection) => {\r\n    let need = {\r\n      id: this.props.id,\r\n      needTypeKey: this.props.needCurr.needTypeKey,\r\n\r\n      Percent: this.props.needCurr.Percent,\r\n      amount: this.props.needCurr.amount,\r\n      startYear: this.props.needCurr.startYear,\r\n      duration: this.props.needCurr.duration,\r\n    };\r\n\r\n    if (id === 1)\r\n      need.needTypeKey = getListItemKeyFromName(INCOMENEEDS, selection);\r\n    else if (id === 2) need.Owner = selection;\r\n    // console.log(need)\r\n    this.props.handleUpdate(need);\r\n  };\r\n\r\n  handleUpdateInput = (id, value) => {\r\n    \r\n    let need = {\r\n      id: this.props.id,\r\n      needTypeKey: this.props.needCurr.needTypeKey,\r\n      Percent: this.props.needCurr.Percent,\r\n      amount: this.props.needCurr.amount,\r\n      startYear: this.props.needCurr.startYear,\r\n      duration: this.props.needCurr.duration,\r\n    };\r\n\r\n    let changed = false;\r\n    const lang = this.props.language;\r\n    const valueClean = cleanFormat(value,lang);\r\n    const valueCleanInt = parseInt(valueClean);\r\n   \r\n    if (id === 1) {\r\n      changed = need.amount !== valueCleanInt ? true : false;\r\n      need.amount = valueCleanInt;\r\n      need.Percent = //100*need.amount/this.props.afterTaxTotalIncome\r\n        (parseInt(1000000*need.amount / this.props.afterTaxTotalIncome)/10000).toFixed(2);\r\n     } else if (id === 2) {\r\n      changed = need.startYear !== value ? true : false;\r\n      need.startYear = value;\r\n    } else if (id === 3) {\r\n      changed = need.duration !== value ? true : false;\r\n      need.duration = value;\r\n    } else if (id === 4) {\r\n      changed =\r\n        need.Percent !==\r\n        parseInt(100 * valueClean) / 100\r\n          ? true\r\n          : false;\r\n      need.Percent = parseFloat(valueClean);\r\n    }\r\n     if (changed) {\r\n       this.props.handleUpdate(need);\r\n       this.setState({ loading: this.props.disableAddRemove });\r\n     }\r\n  };\r\n\r\n  render() {\r\n    let rOnly =\r\n      this.props.needCurr.needTypeKey === INCOMENEEDS.PERCET_OF_INCOME.Key;\r\n    rOnly = false;\r\n    const percentN =\r\n      this.props.needCurr.needTypeKey === INCOMENEEDS.PERCET_OF_INCOME.Key;\r\n    let divStyleClass = \"dropDown inputDiv\";\r\n    divStyleClass += this.props.language === \"fr\" ? \" inputDivFrench\" : \"\";\r\n\r\n    if (this.state.loading === true && this.props.disableAddRemove=== true) {\r\n      return (\r\n       \"\"\r\n      );\r\n    } else {\r\n    return (\r\n      <div className=\"inputRow\">\r\n        {this.dataValues.DD.map((dd) => (\r\n          <DropDown\r\n            key={dd.id}\r\n            id={dd.id}\r\n            Count={this.props.needsNo}\r\n            disable={this.props.needCurr.duration === 100}\r\n            Title={dd.Title}\r\n            defValue={dd.defValue}\r\n            width={DROPDOWN_WIDE}\r\n            Values={dd.Values}\r\n            updateDDown={this.updateDDown}\r\n          />\r\n        ))}\r\n        {percentN ? (\r\n          <InputField\r\n            inputName={CONTROLTITLE[this.props.language].percent}\r\n            format={3}\r\n            id={4}\r\n            Count={this.props.needsNo}\r\n            language={this.props.language}\r\n            inputValue={this.props.needCurr.Percent}\r\n            handleUpdateInput={this.handleUpdateInput}\r\n          />\r\n        ) : (\r\n          \"\"\r\n        )}\r\n        <InputField\r\n          inputName={CONTROLTITLE[this.props.language].afterTaxAmount}\r\n          format={2}\r\n          id={1}\r\n          key={\"am1\"}\r\n          readOnly={rOnly}\r\n          Count={this.props.needsNo}\r\n          language={this.props.language}\r\n          infoIcon={getInfoSalaryPercent(this.props.language)}\r\n          inputValue={this.props.needCurr.amount}\r\n          handleUpdateInput={this.handleUpdateInput}\r\n        />\r\n        <InputField\r\n          format={1}\r\n          id={2}\r\n          inputName={CONTROLTITLE[this.props.language].startYear}\r\n          Count={this.props.needsNo}\r\n          language={this.props.language}\r\n          infoIcon={getInfoIconAssetsYr0(this.props.language)}\r\n          inputValue={this.props.needCurr.startYear}\r\n          handleUpdateInput={this.handleUpdateInput}\r\n        />\r\n        {this.props.needCurr.duration === 100 ? (\r\n          <div className={divStyleClass}>\r\n            <div className=\"controlTitle\">\r\n              {CONTROLTITLE[this.props.language].dur}\r\n            </div>\r\n            <input\r\n              type=\"text\"\r\n              className=\"inputField inputFieldDisabled\"\r\n              isDisabled={true}\r\n              value={MESSAGES[this.props.language].ever}\r\n            />\r\n          </div>\r\n        ) : (\r\n          <InputField\r\n            format={1}\r\n            id={3}\r\n            inputName={CONTROLTITLE[this.props.language].dur}\r\n            Count={this.props.needsNo}\r\n            language={this.props.language}\r\n            inputValue={this.props.needCurr.duration}\r\n            handleUpdateInput={this.handleUpdateInput}\r\n          />\r\n        )}\r\n\r\n        <AddRemove\r\n          currentID={this.props.id}\r\n          numberComps={this.props.needsNo}\r\n          disabled={this.props.disableAddRemove}\r\n          handleDoAdd={this.handleDoAdd}\r\n          handleDoRemove={this.handleDoRemove}\r\n          disabled={this.props.disableAddRemove}\r\n        />\r\n        {/* {isMobileDevice() && this.props.id < this.props.needsNo ? (\r\n          <hr className=\"ppi2\" />\r\n        ) : (\r\n          \"\"\r\n        )} */}\r\n      </div>\r\n    );\r\n      }\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { DropDown } from \"./DropDown\";\r\n//import { InputField4 } from './inputField4';\r\nimport { InputField } from \"./inputField\";\r\nimport { cleanFormat, getListItemKeyFromName } from \"../utils/helper\";\r\nimport { CONTROLTITLE, PROVINCE } from \"../definitions/generalDefinitions\";\r\nimport { DROPDOWN_WIDE } from \"../definitions/generalDefinitions\";\r\nimport { getListItemNameFromKey, getListToShowByOrder } from \"../utils/helper\";\r\nimport { getInfoIconNotes } from \"../definitions/infoIconsDefinitions\";\r\nimport { Info } from \"./Info\";\r\n\r\nexport class Presentation extends Component {\r\n  displayName = Presentation.name;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    /*     this.state = {\r\n      image: this.props.presentationCurr.adviserLogo\r\n    };\r\n */\r\n\r\n    let i;\r\n    /* let typeValues = [];\r\n    for (i = 0; i <= 9; ++i) {\r\n      typeValues.push({\r\n        label: PROVINCE[this.props.language].Values[i],\r\n        value: i + 1\r\n      });\r\n    } */\r\n\r\n    let typeValues = [];\r\n    const listProvincesToShow = getListToShowByOrder(PROVINCE);\r\n    // console.log(listProvincesToShow)\r\n    for (i = 0; i < listProvincesToShow.length; ++i) {\r\n      typeValues.push({\r\n        label: listProvincesToShow[i].value[this.props.language],\r\n        value: i + 1,\r\n      });\r\n    }\r\n\r\n    this.state = {\r\n      designedFor: \"\",\r\n      designedBy: \"\",\r\n      notes: \"\",\r\n      showSaved:false\r\n    };\r\n    \r\n    this.dataValues = {\r\n      DD: [\r\n        {\r\n          id: 1,\r\n          Title: CONTROLTITLE[this.props.language].province,\r\n          defValue: getListItemNameFromKey(\r\n            PROVINCE,\r\n            this.props.presentationCurr.provinceKey,\r\n            this.props.language\r\n          ),\r\n          Values: typeValues,\r\n        },\r\n      ],\r\n    };\r\n  }\r\n  // unsafe use getDerivedStateFromProps TBD\r\n\r\n  componentDidMount = () => {\r\n    this.setState({\r\n      designedFor: this.props.presentationCurr.designedFor,\r\n      designedBy: this.props.presentationCurr.designedBy,\r\n      notes: this.props.presentationCurr.notes,\r\n    });\r\n  };\r\n  componentWillReceiveProps(nextProps) {\r\n    if (nextProps.presentationCurr !== this.props.presentationCurr) {\r\n      this.dataValues.DD[0].defValue = getListItemNameFromKey(\r\n        PROVINCE,\r\n        nextProps.presentationCurr.provinceKey,\r\n        this.props.language\r\n      );\r\n      //\t\tthis.dataValues.DD[0].Title = CONTROLTITLE[this.props.language].province;\r\n     }\r\n  }\r\n\r\n  /* static getDerivedStateFromProps(nextProps, prevState){\r\n    \r\n    if(nextProps.presentationCurr!==prevState.presentationCurr){\r\n      return {presentationCurr : nextProps.presentationCurr};\r\n    }\r\n    else return null;\r\n  }\r\n\r\n */\r\n\r\n  getNewPresentation = () => {\r\n    return {\r\n      id: this.props.id,\r\n      provinceKey: this.props.presentationCurr.provinceKey,\r\n      invRate: this.props.presentationCurr.invRate,\r\n      inflation: this.props.presentationCurr.inflation,\r\n      taxRate: this.props.presentationCurr.taxRate,\r\n      designedFor: this.props.presentationCurr.designedFor,\r\n      designedBy: this.props.presentationCurr.designedBy,\r\n      notes: this.props.presentationCurr.notes,\r\n      periodOption: this.props.presentationCurr.periodOption,\r\n      language: this.props.presentationCurr.language,\r\n      resultsOption: this.props.presentationCurr.resultsOption,\r\n      adviserLogo: this.props.presentationCurr.adviserLogo,\r\n      appletImage: this.props.presentationCurr.appletImage,\r\n    };\r\n  };\r\n\r\n  updateDDown = (id, selection) => {\r\n    let pres = this.getNewPresentation();\r\n    if (id === 1)\r\n      pres.provinceKey = getListItemKeyFromName(PROVINCE, selection);\r\n    this.props.handleUpdate(pres);\r\n  };\r\n\r\n  handleUpdateInput = (id, value) => {\r\n    let pres = this.getNewPresentation();\r\n    const lang=this.props.language;\r\n    let changed = false;\r\n    const valueClean = cleanFormat(value,lang);\r\n   \r\n    if (id === 1) {\r\n      changed =\r\n        pres.invRate !==\r\n        parseInt(10000 * valueClean) / 10000\r\n          ? true\r\n          : false;\r\n      pres.invRate =\r\n        parseInt(10000 * valueClean) / 10000;\r\n    } else if (id === 2) {\r\n      changed =\r\n        pres.inflation !==\r\n        parseInt(10000 * valueClean) / 10000\r\n          ? true\r\n          : false;\r\n\r\n      pres.inflation =\r\n        parseInt(10000 * valueClean) / 10000;\r\n    } else if (id === 3) {\r\n       changed =\r\n        pres.taxRate !==\r\n        parseInt(10000 * valueClean) / 10000\r\n          ? true\r\n          : false;\r\n\r\n      pres.taxRate =\r\n        parseInt(10000 * valueClean) / 10000;\r\n    }\r\n    //changed = pres.adviserLogo !== this.state.image ? true : false;\r\n \r\n    \r\n    if (changed) this.props.handleUpdate(pres);\r\n  };\r\n\r\n  updateInputValue(id, evt) {\r\n     let pres = this.getNewPresentation();\r\n    let changed = false;\r\n    if (id === 3) {\r\n      changed = pres.designedFor !== evt.target.value;\r\n      pres.designedFor = evt.target.value;\r\n    } else if (id === 4) {\r\n      changed = pres.designedBy !== evt.target.value;\r\n      pres.designedBy = evt.target.value;\r\n    } else if (id === 5) {\r\n      changed = pres.notes !== evt.target.value;\r\n      pres.notes = evt.target.value;\r\n    }\r\n    if (changed) this.props.handleUpdate(pres);\r\n  }\r\n\r\n \r\n\r\n  render() {\r\n     const infoIcon = getInfoIconNotes(this.props.language);\r\n    return (\r\n      <div className=\"inputRow\">\r\n        {this.dataValues.DD.map((dd) => (\r\n          <DropDown\r\n            key={dd.id}\r\n            id={dd.id}\r\n            Count={1}\r\n            Title={dd.Title}\r\n            width={DROPDOWN_WIDE}\r\n            defValue={dd.defValue}\r\n            Values={dd.Values}\r\n            updateDDown={this.updateDDown}\r\n          />\r\n        ))}\r\n        <InputField\r\n          inputName={CONTROLTITLE[this.props.language].taxRate}\r\n          format={3}\r\n          id={3}\r\n          Count={1}\r\n          language={this.props.language}\r\n          inputValue={Math.round(10000*this.props.presentationCurr.taxRate)/10000}\r\n          inputTitle={this.props.id}\r\n          handleUpdateInput={this.handleUpdateInput}\r\n        />\r\n        <InputField\r\n          inputName={CONTROLTITLE[this.props.language].invRate}\r\n          format={3}\r\n          id={1}\r\n          Count={1}\r\n          language={this.props.language}\r\n          inputValue={Math.round(10000*this.props.presentationCurr.invRate)/10000}\r\n          inputTitle={this.props.id}\r\n          handleUpdateInput={this.handleUpdateInput}\r\n        />\r\n        <InputField\r\n          inputName={CONTROLTITLE[this.props.language].inflation}\r\n          format={3}\r\n          id={2}\r\n          Count={1}\r\n          language={this.props.language}\r\n          inputValue={Math.round(10000*this.props.presentationCurr.inflation)/10000}\r\n          inputTitle={this.props.id}\r\n          handleUpdateInput={this.handleUpdateInput}\r\n        />\r\n        <div className=\"dropDown inputText\">\r\n          <span className=\"controlTitle\">\r\n            {CONTROLTITLE[this.props.language].designedFor}\r\n          </span>\r\n          <input\r\n            id={3}\r\n            className=\"inputField Text\"\r\n            value={this.state.designedFor}\r\n            onFocus={this.handleFocus}\r\n            onClick={this.select}\r\n            type=\"text\"\r\n            onBlur={(evt) => this.updateInputValue(3, evt)}\r\n            onChange={(evt) => this.setState({ designedFor: evt.target.value })}\r\n          />\r\n        </div>\r\n        <div className=\"dropDown inputText\">\r\n          <span className=\"controlTitle\">\r\n            {CONTROLTITLE[this.props.language].designedBy}\r\n          </span>\r\n          <input\r\n            id={4}\r\n            className=\"inputField Text\"\r\n            onFocus={this.handleFocus}\r\n            onClick={this.select}\r\n            type=\"text\"\r\n            value={this.state.designedBy}\r\n            onBlur={(evt) => this.updateInputValue(4, evt)}\r\n            onChange={(evt) => this.setState({ designedBy: evt.target.value })}\r\n          />\r\n        </div>\r\n     \r\n        <div className=\"dropDown inputTextNotes\">\r\n          <span className=\"controlTitle\">\r\n            {CONTROLTITLE[this.props.language].notes}\r\n          </span>\r\n          <Info infoIcon={infoIcon} />{\" \"}\r\n          <textarea\r\n            id={5}\r\n            className=\"inputField textarea\"\r\n            onFocus={this.handleFocus}\r\n            onClick={this.select}\r\n            type=\"text\"\r\n            value={this.state.notes}\r\n            onBlur={(evt) => this.updateInputValue(5, evt)}\r\n            onChange={(evt) => this.setState({ notes: evt.target.value })}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\nimport { Dialog, Button, Card, CardContent, Typography } from '@material-ui/core'\r\nimport { DialogActions, DialogContent, DialogContentText, DialogTitle, TextField } from '@material-ui/core'\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport { Info } from \"./Info\";\r\nimport {\r\n  getInfoSave\r\n} from \"../definitions/infoIconsDefinitions.js\";\r\n\r\n\r\nconst MESSAGES = {\r\n  en: {\r\n  saveAs1: \"To save files in your desired location: \",\r\n  saveAs2: \" - Microsoft Edge: select 'SaveAs' when prompted \",\r\n  saveAs3: \" - Google Chrome: make a one time change: \",\r\n  saveAs4: \"go to Settings - Advanced - Downloads and turn on \",\r\n  saveAs5: \"'Ask where to save each file before downloading\"\r\n  \r\n  },\r\n  fr: {\r\n  saveAs1: \"To save files in your desired location: ^F\",\r\n  saveAs2: \" - Microsoft Edge: select 'SaveAs' when prompted  ^F\",\r\n  saveAs3: \" - Google Chrome: make a one time change:  ^F\",\r\n  saveAs4: \"go to Settings - Advanced - Downloads and turn on  ^F\",\r\n  saveAs5: \"'Ask where to save each file before downloading  ^F\"\r\n  \r\n  }\r\n};\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    '& > *': {\r\n      margin: theme.spacing(1),\r\n    },\r\n  },\r\n}));\r\n\r\n\r\nexport class PopupUserinputDialog extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      open: this.props.openDialog,\r\n      name: '',\r\n      showInfo: false\r\n    }\r\n  };\r\n\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (nextProps !== this.props) {\r\n\r\n      this.setState({\r\n        open: nextProps.openDialog\r\n      })\r\n    }\r\n  }\r\n\r\n  handleOK = () => {\r\n    this.props.respondToInput(this.state.name)\r\n    this.setState({\r\n      open: !this.state.open\r\n    })\r\n  }\r\n\r\n\r\n  handleCancel = () => {\r\n    this.props.respondToInput(\"\")\r\n    this.setState({\r\n      open: !this.state.open\r\n    })\r\n  }\r\n\r\n\r\n  handleInfo = () => {\r\n    this.setState({\r\n      showInfo: !this.state.showInfo\r\n    })\r\n  }\r\n\r\n\r\n\r\n  render() {\r\n\r\n    const handleChange = evt => {\r\n\r\n\r\n      this.setState({\r\n        name: evt.target.value\r\n      }\r\n\r\n      )\r\n\r\n\r\n    }\r\n    const infoIcon = getInfoSave(this.props.language);\r\n    var sourceEdge = require('../images/chooseButton.png');\r\n    var sourceChrome = require('../images/chooseButtonChrome.png');\r\n    var optionsEdge = require('../images/optionsEdge.png');\r\n    var optionsChrome = require('../images/optionsChrome.png');\r\n\r\n    const message=MESSAGES[this.props.language]\r\n\r\n    \r\n    return (\r\n\r\n      <div>\r\n\r\n       {/*  <Button/> */}\r\n        <Dialog\r\n          open={this.state.open}\r\n          onClose={this.handleToggle}\r\n          aria-labelledby=\"confirm-dialog\"\r\n\r\n        >\r\n          <DialogTitle id=\"confirm-dialog\"></DialogTitle>\r\n          <DialogContent >\r\n            <DialogContentText><span className=\"dialog\">Save to File</span>\r\n            </DialogContentText>\r\n\r\n            <form>\r\n              <TextField\r\n                id=\"1\"\r\n                label=\"file name\"\r\n                value={this.state.name}\r\n                onChange={handleChange}\r\n                margin=\"normal\">\r\n              </TextField>\r\n\r\n\r\n            </form>\r\n          </DialogContent>\r\n           \r\n          <DialogActions style={{ paddingRight: '12px', paddingBottom: '10px' }}>\r\n          <div  style={{ marginLeft: '12px'}}><Info  infoIcon={infoIcon}/>\r\n          {/* <Button onClick={this.handleInfo} variant=\"contained\"> <span className=\"dialog\"> Instructions </span></Button> */}\r\n          <Button onClick={this.handleCancel} variant=\"contained\"   style={{ marginLeft: '222px', marginRight: '8px'}} > <span className=\"dialog\"> Cancel </span></Button>\r\n            <Button onClick={this.handleOK} variant=\"contained\"> <span className=\"dialog\"> OK </span></Button></div>\r\n            \r\n          </DialogActions>\r\n          {this.state.showInfo &&\r\n            <Card> <CardContent>\r\n              <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n                <div>\r\n                To save files in your desired location:<ul><li>Microsofrft Edge:\r\n              <ul>\r\n                <li>Go to Options {this.state.showInfo && <img  alt=\"info\" src={optionsEdge}  />} </li>\r\n                <li>Click Downlods - Click Download settings</li>\r\n                <li>Turn on \"Ask where to save each file before downloading\" {this.state.showInfo && <img  alt=\"info\" src={sourceEdge}  />}\r\n              </li>\r\n               </ul>\r\n               </li><li>Google Chrome:\r\n               <ul>\r\n               <li>Go to Options {this.state.showInfo && <img  alt=\"info\" src={optionsChrome}  />} </li>\r\n                <li>Click Settings - Advanced - Downloads</li>\r\n                <li>Turn on \"Ask where to save each file before downloading\" {this.state.showInfo && <img  alt=\"info\" src={sourceChrome}  />}\r\n                </li>\r\n               </ul>\r\n              \r\n              </li></ul></div>\r\n             \r\n          </Typography>\r\n         \r\n        </CardContent></Card>}\r\n         \r\n        </Dialog>\r\n\r\n      </div >\r\n\r\n    )\r\n\r\n\r\n  }\r\n}","import React from \"react\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\n// NOTE: USE FOR LOCAL DEVELOPMENT\r\nconst APP_SITE /*: string */ = \"https://test-tkdirectapi.ppi.ca\";\r\n\r\n// NOTE: USE FOR TESTING / PRODUCTION\r\n// const APP_SITE: string = \"\";\r\n\r\nconst NA_QS_URL /*: string */ = APP_SITE + \"/api/NA_QS\";\r\n\r\n// interface IClient {\r\n//   clientFileName: string;\r\n//   clientFileContent: string;\r\n//   clientJson: string;\r\n// }\r\n\r\n// interface IClients {\r\n//   id: string,\r\n//   clients: IClient[];\r\n// }\r\n\r\n// interface IClientProps {\r\n//   clientFileName: string;\r\n//   clientJson: string;\r\n//   clientIndex: number;\r\n//   setClientFileContent (index: number, fileContent: string): void;\r\n// }\r\n\r\nconst Client /*: React.FC<IClientProps> */ = (props) => {\r\n  const [encryptedJson, setEncryptedJson] = useState(/*<string>*/ \"\");\r\n  const [jsonEncrypted, setJsonEncrypted] = useState(/*<boolean>*/ false);\r\n  const [encryptedJsonAssigned, setEncryptedJsonAssigned] = useState(\r\n    /*<boolean>*/ false\r\n  );\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      var myHeaders = new Headers();\r\n      myHeaders.append(\"Accept\", \"application/json\");\r\n      myHeaders.append(\"Content-Type\", \"application/json\");\r\n\r\n      let obj = JSON.parse(props.clientJson);\r\n      let raw = JSON.stringify(obj);\r\n\r\n      let data = await fetch(NA_QS_URL, {\r\n        method: \"POST\",\r\n        headers: myHeaders,\r\n        body: raw,\r\n        redirect: \"follow\",\r\n      })\r\n        .then((response) => {\r\n          return response.text();\r\n        })\r\n        .catch((error) => {\r\n          return error;\r\n        });\r\n\r\n      if (typeof data === \"string\") {\r\n        setEncryptedJson(data);\r\n        setJsonEncrypted(true);\r\n      }\r\n    })();\r\n  }, [jsonEncrypted]);\r\n\r\n  if (jsonEncrypted === true && encryptedJsonAssigned === false) {\r\n    setEncryptedJsonAssigned(true);\r\n    props.setClientFileContent(\r\n      props.clientIndex,\r\n      encryptedJson.substr(1, encryptedJson.length - 2)\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        marginTop: 16,\r\n        marginLeft: 16,\r\n        display: \"none\",\r\n      }}\r\n    >\r\n      <div>{props.clientFileName}</div>\r\n      <div>{encryptedJson}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nfunction PasteClients() {\r\n  const [clients, setClients] = useState(\r\n    /*<IClients>*/ { id: \"\", clients: [] }\r\n  );\r\n\r\n  const [note, setNote] = useState(/*<string>*/ \"\");\r\n\r\n  const pasteClients = () => {\r\n    setNote(\"\");\r\n\r\n    navigator.clipboard.readText().then((clipText) => {\r\n      let parsedObject = null;\r\n\r\n      try {\r\n        parsedObject = JSON.parse(clipText);\r\n\r\n        if (parsedObject.id !== undefined) {\r\n          if (parsedObject.clients !== undefined) {\r\n            if (parsedObject.clientFileSpecs !== undefined) {\r\n              let id = parsedObject.id;\r\n\r\n              if (parsedObject.clients !== undefined) {\r\n                if (parsedObject.clientFileSpecs !== undefined) {\r\n                  let pastedClients /*: IClient[] */ = [];\r\n\r\n                  if (Array.isArray(parsedObject.clients) === true) {\r\n                    if (Array.isArray(parsedObject.clientFileSpecs) === true) {\r\n                      for (let i = 0; i < parsedObject.clients.length; i++) {\r\n                        let clientJson = JSON.stringify(\r\n                          parsedObject.clients[i]\r\n                        );\r\n                        let clientFileName =\r\n                          parsedObject.clientFileSpecs[i].clientFileName;\r\n\r\n                        let client /*: IClient*/ = {\r\n                          clientFileName: clientFileName,\r\n                          clientJson: clientJson,\r\n                          clientFileContent: \"\",\r\n                        };\r\n\r\n                        pastedClients.push(client);\r\n                      }\r\n                    }\r\n                  }\r\n\r\n                  // Set new clients.\r\n                  setClients({ id: id, clients: pastedClients });\r\n\r\n                  // Clear clipboard if we have any clients.\r\n                  if (parsedObject.clients.length > 0) {\r\n                    navigator.clipboard.writeText(\"<empty clipboard>\").then(\r\n                      function () {\r\n                        /* clipboard successfully set */\r\n                      },\r\n                      function () {\r\n                        /* clipboard write failed */\r\n                      }\r\n                    );\r\n\r\n                    setNote(`${parsedObject.clients.length} files created.`);\r\n                    return;\r\n                  } else {\r\n                    setNote(\"No files created.\");\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      } catch (e) {\r\n        setNote(\"No files created. Clipboard content not recognized.\");\r\n      }\r\n    });\r\n\r\n    setNote(\"No files created. Clipboard content not recognized.\");\r\n\r\n    setClients({ id: \"\", clients: [] });\r\n  };\r\n\r\n  function setClientFileContent(\r\n    index /*: number */,\r\n    clientFileContent /*: string*/\r\n  ) {\r\n    let newClients /*: IClient[]*/ = [];\r\n    let allClientFileContentsAssigned = true;\r\n\r\n    for (let i = 0; i < clients.clients.length; i++) {\r\n      let newClient /*: IClient*/ = {\r\n        clientFileName: clients.clients[i].clientFileName,\r\n        clientJson: clients.clients[i].clientJson,\r\n        clientFileContent: clients.clients[i].clientFileContent,\r\n      };\r\n\r\n      if (i === index) {\r\n        newClient.clientFileContent = clientFileContent;\r\n      }\r\n\r\n      if (newClient.clientFileContent === null) {\r\n        allClientFileContentsAssigned = false;\r\n      }\r\n\r\n      newClients.push(newClient);\r\n    }\r\n\r\n    if (allClientFileContentsAssigned === true) {\r\n      let clientFileSpecs = [];\r\n\r\n      for (let i = 0; i < clients.clients.length; i++) {\r\n        let clientFileSpec = {\r\n          clientFileName: newClients[i].clientFileName,\r\n          clientFileContent: newClients[i].clientFileContent,\r\n        };\r\n\r\n        clientFileSpecs.push(clientFileSpec);\r\n      }\r\n\r\n      let clientFileSpecsCollection = {\r\n        id: clients.id,\r\n        clientFileSpecs: clientFileSpecs,\r\n      };\r\n      let clientFileSpecsCollectionJson = JSON.stringify(\r\n        clientFileSpecsCollection,\r\n        null,\r\n        2\r\n      );\r\n\r\n      navigator.clipboard.writeText(clientFileSpecsCollectionJson).then(\r\n        function () {\r\n          /* clipboard successfully set */\r\n        },\r\n        function () {\r\n          /* clipboard write failed */\r\n        }\r\n      );\r\n    }\r\n\r\n    setClients({ id: clients.id, clients: newClients });\r\n  }\r\n\r\n  function clientComponents() /*: any*/ {\r\n    let clientComponents /*: any[]*/ = [];\r\n\r\n    for (let i = 0; i < clients.clients.length; i++) {\r\n      clientComponents.push(\r\n        <Client\r\n          key={i}\r\n          clientFileName={clients.clients[i].clientFileName}\r\n          clientJson={clients.clients[i].clientJson}\r\n          clientIndex={i}\r\n          setClientFileContent={setClientFileContent}\r\n        />\r\n      );\r\n    }\r\n\r\n    return <React.Fragment>{clientComponents}</React.Fragment>;\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div\r\n        style={{\r\n          marginTop: 16,\r\n        }}\r\n      >\r\n        <button\r\n          style={{\r\n            marginLeft: 16,\r\n          }}\r\n          onClick={pasteClients}\r\n        >\r\n          Create Exported Client Files\r\n        </button>\r\n      </div>\r\n\r\n      <div\r\n        style={{\r\n          marginTop: 16,\r\n          marginLeft: 16,\r\n        }}\r\n      >\r\n        {note}\r\n      </div>\r\n\r\n      <div\r\n        style={{\r\n          marginTop: 16,\r\n        }}\r\n      >\r\n        {clientComponents()}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PasteClients;\r\n","import React, { Component } from \"react\";\r\nimport DataTable from \"./GridExcelComponent/DataTable\";\r\nimport { getInfoINA } from \"../definitions/infoIconsDefinitions\";\r\nimport { Info } from \"./Info\";\r\nimport {\r\n  APPLET_INA,\r\n} from \"../definitions/generalDefinitions\";\r\n\r\nexport class AggregateGrid extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n  render() {\r\n    \r\n    return (\r\n      <div>\r\n        <h3 className=\"ppi1\">\r\n          {APPLET_INA ?this.props.insNeedLine:\"\"}\r\n          {APPLET_INA &&\r\n          <Info\r\n              infoIcon={getInfoINA(this.props.lang)}\r\n          />}\r\n        </h3>\r\n\r\n        <DataTable\r\n          gridTitle=\"\"// use same title as othr pages {this.props.aggregateGrid.gridTitle}\r\n          dataColTitles={this.props.aggregateGrid.dataColTitles}\r\n          dataProjection={this.props.aggregateGrid.dataProjection}\r\n          gridColumnsDataExcelInfoSection={\r\n            this.props.aggregateGrid.gridColumnsDataExcelInfoSection\r\n          }\r\n          gridColumnAligns={this.props.aggregateGrid.gridColumnAligns}\r\n          gridIcons={this.props.aggregateGrid.gridIcons}\r\n          specialRow={this.props.LE}\r\n          language={this.props.lang}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport { Chart, Bar, Pie } from \"react-chartjs-2\";\r\n//import ChartDataLabels from 'chartjs-plugin-datalabels';\r\n//import \"./Output.css\";\r\nimport \"./Output.css\";\r\nimport { setUIDataToAPI } from \"../data/dataExchange\";\r\nimport { getAssetLiabProjections } from \"../data/aggregateGridProjections\";\r\nimport {\r\n  getProjectedLiabilities,\r\n  getTaxLiabCategoryTotal,\r\n  getLeakageGraphs,\r\n  getAgesEP\r\n} from \"../utils/helper\";\r\nimport {\r\n  QUOTE_CLIENT,\r\n  QUOTE_SPOUSE,\r\n  ASSET_TAX,\r\n  ASSETS,\r\n  LIABILITIES,\r\n} from \"../definitions/generalDefinitions\";\r\nimport { OUTPUTTEXTEP } from \"../definitions/outputDefinitionsEP\";\r\nimport {\r\n  ASSET_TAX_TYPE_PRINCIPAL_RES,\r\n  ASSET_TAX_TYPE_REAL_ESTATE,\r\n  ASSET_TAX_TYPE_STOCKS,\r\n  ASSET_TAX_TYPE_SMALL_BUS,\r\n  ASSET_TAX_TYPE_RRSP,\r\n  ASSET_TAX_TYPE_INTEREST,\r\n  ASSET_TAX_TYPE_OTHER,\r\n  ASSET_TAX_TYPE_COUNT,\r\n} from \"../definitions/outputDefinitionsEP\";\r\n\r\n// props option\r\nconst DISPLAY_INCOME = 1;\r\n\r\n// for Estate\r\nconst DISPLAY_TAXLIAB_CLIENT = 1;\r\nconst DISPLAY_TAXLIAB_JLTD = 2;\r\n\r\nexport class OutputGraphsEP extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      loadingMCC: true,\r\n      estateLiab: [],\r\n      estateLiabLE: [],\r\n      taxL: 0,\r\n    };\r\n    this.dataAges = [];\r\n    this.dataPremiums = [];\r\n    this.dataDB = [];\r\n    this.dataSVEquiBuild = [];\r\n    this.dataSVManulife = [];\r\n    this.Prem = 0;\r\n    this.bestPremiumDur = 100;\r\n    this.bestMinMultiple = 0;\r\n    this.premiumDur = 10;\r\n    this.lifeExp = 0;\r\n    this.minMultiple = 0;\r\n    this.insMultiple = 0;\r\n    this.bestFitEquiBuild = false;\r\n    this.INAEstateOption = DISPLAY_TAXLIAB_CLIENT;\r\n\r\n    this.chartRef = React.createRef();\r\n    this.taxLiabChartRef = React.createRef();\r\n    //   Chart.plugins.unregister(ChartDataLabels)\r\n\r\n  }\r\n\r\n\r\n  render() {\r\n    // get data similar to presentation\r\n    const AssetLiabProjs = getAssetLiabProjections(this.props);\r\n    const lang = this.props.dataInput.Presentations[0].language;\r\n    const totalLiabProjections = getProjectedLiabilities(\r\n      this.props.dataInput,\r\n      this.props.projectEnd,\r\n      this.props.probate\r\n    );\r\n\r\n//console.log(this.props,totalLiabProjections)\r\n\r\n    let dtaAgesAll = [];\r\n    let k;\r\n    let lifeExp = this.props.lifeExp;\r\n    const clients = this.props.dataInput.Clients;\r\n    let age =\r\n      clients.length > 1\r\n        ? Math.min(clients[QUOTE_SPOUSE].Age, clients[QUOTE_CLIENT].Age)\r\n        : clients[QUOTE_CLIENT].Age;\r\n\r\n    //let age = this.props.dataInput.Clients[1].Age;\r\n\r\n    if (this.INAEstateOption === DISPLAY_TAXLIAB_CLIENT) {\r\n      lifeExp = this.props.lifeExp;//Client;\r\n      age = this.props.dataInput.Clients[QUOTE_CLIENT].Age;\r\n    } else if (this.INAEstateOption === DISPLAY_TAXLIAB_JLTD) {\r\n      lifeExp = this.props.lifeExp;//JLTD;\r\n      age =\r\n        clients.length > 1\r\n          ? Math.min(clients[QUOTE_SPOUSE].Age, clients[QUOTE_CLIENT].Age)\r\n          : clients[QUOTE_CLIENT].Age;\r\n    }\r\n\r\n    /* for (k = 0; k <= lifeExp + 3; ++k) {\r\n      dtaAgesAll.push(age + k);\r\n    } */\r\n\r\n    dtaAgesAll=getAgesEP(clients, lifeExp)\r\n\r\n    \r\n\r\n    //options\r\n\r\n    const leakageGraps = getLeakageGraphs(\r\n      this.props.dataInput.Assets,\r\n      this.props.assetProjections,\r\n      AssetLiabProjs,\r\n      totalLiabProjections,\r\n      lang,\r\n      lifeExp\r\n    );\r\n\r\n    const optionsPie = {\r\n      responsive: true,\r\n      maintainAspectRatio: false,\r\n      title: {\r\n        display: true,\r\n        position: \"top\",\r\n        text: \"\",\r\n        fontSize: 14, //8,\r\n        fontColor: \"#111\",\r\n      },\r\n      legend: {\r\n        display: true,\r\n        position: \"right\",\r\n        labels: {\r\n          fontColor: \"#333\",\r\n          fontSize: 12, //16\r\n        },\r\n      },\r\n      /*   plugins: {\r\n    // Change options for ALL labels of THIS CHART\r\n    display: false,\r\n    datalabels: {\r\n        color: 'white'\r\n    }\r\n} */\r\n    };\r\n\r\n    let optionsPieEstateLiab = JSON.parse(JSON.stringify(optionsPie));\r\n    optionsPieEstateLiab.title.text = OUTPUTTEXTEP[lang].graphsT2;\r\n\r\n    let optionsPieEstateLiabLE = JSON.parse(JSON.stringify(optionsPie));\r\n    optionsPieEstateLiabLE.title.text =\r\n      OUTPUTTEXTEP[\r\n        lang\r\n      ].graphsT3; \r\n    const taxLiabTotal_Index =\r\n      AssetLiabProjs.AssetnEstateLiabs.length - 1; //last row\r\n    let dataTaxLiabLifeExp = [];\r\n    let dataTaxLiab = [];\r\n    let dataLiabAtDeath=[];\r\n    let taxLiabs = AssetLiabProjs.AssetnEstateLiabs[taxLiabTotal_Index].values;\r\n    for (k = 0; k <= lifeExp + 3; ++k) {\r\n      dataTaxLiabLifeExp.push(0);\r\n      dataTaxLiab.push(taxLiabs[k]);\r\n      dataLiabAtDeath.push(totalLiabProjections[k]);\r\n    }\r\n    dataTaxLiabLifeExp[lifeExp] = taxLiabs[lifeExp];\r\n    dataTaxLiab[lifeExp]=0;\r\n    // bar chart\r\n    const dataTaxLiability = {\r\n      labels: dtaAgesAll,\r\n      datasets: [\r\n        {\r\n          label: OUTPUTTEXTEP[lang].graphs2L2,\r\n          //type: \"line\",\r\n          data: dataTaxLiabLifeExp,\r\n          fill: true, // Don't fill area under the line\r\n          borderColor: \"#6AAd8b\",\r\n          backgroundColor: \"rgb(106,173,139,.5)\", // \"rgba(96, 125, 139, .7)\"\r\n        },\r\n        {\r\n          label: OUTPUTTEXTEP[lang].graphsLeakage2,\r\n          //type: \"line\",\r\n          data: dataTaxLiab,\r\n\r\n          fill: true, // Don't fill area under the line\r\n          borderColor: \"darkGrey\", // Line color\r\n          backgroundColor: \"#607d8b\",\r\n        },\r\n        {\r\n          label:  OUTPUTTEXTEP[lang].graphsLeakage3,\r\n          //type: \"line\",\r\n          data: dataLiabAtDeath,\r\n\r\n          fill: true, // Don't fill area under the line\r\n          borderColor: \"white\", // Line color\r\n          backgroundColor: \"#910d48\",\r\n        },\r\n      ],\r\n    };\r\n    // bar chart\r\n    const optionsTaxLiab = {\r\n      responsive: true,\r\n      maintainAspectRatio: false,\r\n      scales: {\r\n        xAxes: [\r\n          {\r\n            stacked: true,\r\n            ticks: {\r\n              beginAtZero: true,\r\n            },\r\n          },\r\n        ],\r\n        yAxes: [\r\n          {\r\n            stacked: true,\r\n            ticks: {\r\n              beginAtZero: true,\r\n              callback: function (value, index, values) {\r\n                let result =\r\n                  value < 1000\r\n                    ? value\r\n                    : lang === \"en\"\r\n                    ? Intl.NumberFormat().format(value / 1000) + \"K\"\r\n                    : (Intl.NumberFormat().format(value / 1000) + \"K\").replace(\r\n                        \",\",\r\n                        \" \"\r\n                      );\r\n                return result;\r\n              },\r\n\r\n              steps: 10,\r\n              stepValue: 5,\r\n            },\r\n          },\r\n        ],\r\n      },\r\n    };\r\n\r\n    /*   let optionsPieTax = JSON.parse(JSON.stringify(optionsPie));\r\n    optionsPieTax.title.text = \"Tax Treatment of Assets\";\r\n\r\n    let optionsPieLiabsAtDeath = JSON.parse(JSON.stringify(optionsPie));\r\n    optionsPieLiabsAtDeath.title.text = \"Liabilities At Death\";\r\n\r\n    let optionsPieLiabs = JSON.parse(JSON.stringify(optionsPie));\r\n    optionsPieLiabs.title.text = \"Liabilities Breakdown\";\r\n */\r\n    let estateLiab = [];\r\n    const totalLiabProjectionsNow = parseInt(totalLiabProjections[0]);\r\n    const totalLiabProjectionsLE3 = parseInt(totalLiabProjections[lifeExp + 3]);\r\n    estateLiab.push(totalLiabProjectionsNow);\r\n    estateLiab.push(\r\n      AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_REAL_ESTATE]\r\n    );\r\n    estateLiab.push(AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_STOCKS]);\r\n    estateLiab.push(AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_SMALL_BUS]);\r\n    estateLiab.push(AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_RRSP]);\r\n    estateLiab.push(AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_INTEREST]);\r\n    estateLiab.push(AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_OTHER]);\r\n\r\n    const dataPieEstateLiabNow = {\r\n      labels: [\r\n        //OUTPUTTEXTEP[lang].graphsL1,OUTPUTTEXTEP[lang].graphsL2,OUTPUTTEXTEP[lang].graphsL3,OUTPUTTEXTEP[lang].graphsL4,OUTPUTTEXTEP[lang].graphsL5,\r\n        OUTPUTTEXTEP[lang].graphsL1,\r\n        OUTPUTTEXTEP[lang].graphsTaxes + OUTPUTTEXTEP[lang].pg3Tab3R2C1,\r\n        OUTPUTTEXTEP[lang].graphsTaxes + OUTPUTTEXTEP[lang].pg3Tab3R3C1,\r\n        OUTPUTTEXTEP[lang].graphsTaxes + OUTPUTTEXTEP[lang].pg3Tab3R4C1,\r\n        OUTPUTTEXTEP[lang].graphsTaxes + OUTPUTTEXTEP[lang].pg3Tab3R5C1,\r\n        OUTPUTTEXTEP[lang].graphsTaxes + OUTPUTTEXTEP[lang].pg3Tab3R6C1,\r\n        OUTPUTTEXTEP[lang].graphsTaxes + OUTPUTTEXTEP[lang].pg3Tab3R7C1,\r\n      ],\r\n      datasets: [\r\n        {\r\n          //data: this.state.estateLiab,\r\n          data: estateLiab,\r\n          //backgroundColor: [\"#F7464A\", \"#46BFBD\", \"#FDB45C\", \"#949FB1\", \"#4D5360\"]\r\n          backgroundColor: [\r\n            \"#872651\",\r\n            ASSETS.REAL_ESTATE.colour,\r\n            ASSETS.STOCKS_BONDS.colour,\r\n            ASSETS.SMALL_BUSINESS_SHARES.colour,\r\n            ASSETS.RRSP_RRIF.colour,\r\n            ASSETS.INTEREST_BEARING.colour,\r\n            ASSETS.OTHER_ASSETS.colour,\r\n          ],\r\n        },\r\n      ],\r\n    };\r\n\r\n    let estateLiabLE3 = [];\r\n    estateLiabLE3.push(totalLiabProjectionsNow);\r\n    estateLiabLE3.push(\r\n      AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_REAL_ESTATE]\r\n    );\r\n    estateLiabLE3.push(\r\n      AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_STOCKS]\r\n    );\r\n    estateLiabLE3.push(\r\n      AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_SMALL_BUS]\r\n    );\r\n    estateLiabLE3.push(\r\n      AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_RRSP]\r\n    );\r\n    estateLiabLE3.push(\r\n      AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_INTEREST]\r\n    );\r\n    estateLiabLE3.push(\r\n      AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_OTHER]\r\n    );\r\n\r\n    const dataPieEstateLiabLE = {\r\n      labels: [\r\n        // OUTPUTTEXTEP[lang].graphsL1,OUTPUTTEXTEP[lang].graphsL2,OUTPUTTEXTEP[lang].graphsL3,OUTPUTTEXTEP[lang].graphsL4,OUTPUTTEXTEP[lang].graphsL5,\r\n        OUTPUTTEXTEP[lang].graphsL1,\r\n        OUTPUTTEXTEP[lang].graphsTaxes + OUTPUTTEXTEP[lang].pg3Tab3R2C1,\r\n        OUTPUTTEXTEP[lang].graphsTaxes + OUTPUTTEXTEP[lang].pg3Tab3R3C1,\r\n        OUTPUTTEXTEP[lang].graphsTaxes + OUTPUTTEXTEP[lang].pg3Tab3R4C1,\r\n        OUTPUTTEXTEP[lang].graphsTaxes + OUTPUTTEXTEP[lang].pg3Tab3R5C1,\r\n        OUTPUTTEXTEP[lang].graphsTaxes + OUTPUTTEXTEP[lang].pg3Tab3R6C1,\r\n        OUTPUTTEXTEP[lang].graphsTaxes + OUTPUTTEXTEP[lang].pg3Tab3R7C1,\r\n      ],\r\n      datasets: [\r\n        {\r\n          //data: this.state.estateLiabLE,\r\n          data: estateLiabLE3,\r\n          //backgroundColor: [\"#F7464A\", \"#46BFBD\", \"#FDB45C\", \"#949FB1\", \"#4D5360\"]\r\n          backgroundColor: [\r\n            \"#872651\",\r\n            ASSETS.REAL_ESTATE.colour,\r\n            ASSETS.STOCKS_BONDS.colour,\r\n            ASSETS.SMALL_BUSINESS_SHARES.colour,\r\n            ASSETS.RRSP_RRIF.colour,\r\n            ASSETS.INTEREST_BEARING.colour,\r\n            ASSETS.OTHER_ASSETS.colour,\r\n          ],\r\n        },\r\n      ],\r\n    };\r\n\r\n    \r\n    let optionsLiab= JSON.parse(JSON.stringify(leakageGraps.optionsPieEstateLeakage));\r\n    let optionsLiabLE= JSON.parse(JSON.stringify(leakageGraps.optionsPieEstateLeakageLE));\r\n    \r\n    optionsLiab.title.text=OUTPUTTEXTEP[lang].graphsT2;\r\n    optionsLiabLE.title.text=OUTPUTTEXTEP[lang].graphsT3;\r\n\r\n    return (\r\n      <div style={{ width: \"90%\" }}>\r\n        <div style={{ width: \"50%\" }}>\r\n        <br />\r\n          <h3 className=\"ppi1\">\r\n            <div>\r\n              {OUTPUTTEXTEP[lang].graphsT1} <br />\r\n            </div>\r\n          </h3>\r\n\r\n         {/* </div> <div style={{ width: \"100%\" }}> */}\r\n          {/* <div style={{ width: \"100%\", marginLeft: \"31px\" }}>\r\n            <article\r\n               className=\"canvas-containerLeakage\"\r\n                style={{ position: \"relative\"}}  \r\n            >\r\n              <div className=\"EPGraphDiv\">\r\n                <Pie\r\n                  data={dataPieEstateLiabNow}\r\n                  options={leakageGraps.dataPieEstateLeakage}\r\n                />\r\n              </div>\r\n              <div className=\"EPGraphDiv\">\r\n                <Pie\r\n                  data={dataPieEstateLiabLE}\r\n                  options={leakageGraps.dataPieEstateLeakage}\r\n                />\r\n              </div>\r\n            </article>\r\n          </div>\r\n */}\r\n\r\n          <div style={{ width: \"100%\", marginLeft: \"31px\" }}>\r\n            <article\r\n              className=\"canvas-containerLiab\"\r\n              /* style={{ position: \"relative\", height: \"35vh\", width: \"80vw\" }} */\r\n            >\r\n              <div className=\"EPGraphDiv\">\r\n                <Pie\r\n                  data={dataPieEstateLiabNow}\r\n                  options={optionsLiab}\r\n                />\r\n              </div>\r\n              <div className=\"EPGraphDiv\">\r\n                <Pie\r\n                  data={dataPieEstateLiabLE}\r\n                  options={optionsLiabLE}\r\n                />\r\n              </div>\r\n            </article>\r\n          </div>\r\n\r\n          <br/>\r\n          <br />\r\n          <h3 className=\"ppi1\">\r\n            <div>\r\n              {OUTPUTTEXTEP[lang].graphsLeakageT1} <br />\r\n            </div>\r\n          </h3>\r\n          <div style={{ width: \"100%\", marginLeft: \"31px\" }}>\r\n            <article\r\n              className=\"canvas-containerLeakage\"\r\n              /* style={{ position: \"relative\", height: \"35vh\", width: \"80vw\" }} */\r\n            >\r\n              <div className=\"EPGraphDiv\">\r\n                <Pie\r\n                  data={leakageGraps.dataPieEstateLeakage}\r\n                  options={leakageGraps.optionsPieEstateLeakage}\r\n                />\r\n              </div>\r\n              <div className=\"EPGraphDiv\">\r\n                <Pie\r\n                  data={leakageGraps.dataPieEstateLeakageLE}\r\n                  options={leakageGraps.optionsPieEstateLeakageLE}\r\n                />\r\n              </div>\r\n            </article>\r\n          </div>\r\n          <h3 className=\"ppi1\">\r\n            <div>\r\n              {OUTPUTTEXTEP[lang].graphs2L1} <br />\r\n            </div>\r\n          </h3>\r\n          </div>\r\n          <div style={{ width: \"100%\" }}>\r\n            <article className=\"canvas-container\" style={{ height: \"200px\" }}>\r\n              <Bar data={dataTaxLiability} options={optionsTaxLiab} />\r\n            </article>\r\n          </div>\r\n\r\n          <br />\r\n          <hr />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport DataTable from \"./GridExcelComponent/DataTable\";\r\nimport Loader from 'react-loader-spinner'\r\nimport _ from 'lodash';\r\n\r\nexport class ProjectionGrid extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            loading: true,\r\n            projectionGrid: this.props.assetProjection,\r\n        }\r\n        this.dataAges = []\r\n    }\r\n\r\n    async componentWillReceiveProps(nextProps) {\r\n        if (!_.isEqual(nextProps.assetProjection, this.props.assetProjection)) {\r\n           this.setState({ loading: true });\r\n           this.setState({\r\n               projectionGrid: nextProps.assetProjection,\r\n               loading: false,\r\n           })\r\n       }\r\n   }\r\n   async componentDidMount() {\r\n    this.setState({ loading: true });\r\n    this.setState({\r\n        projectionGrid: this.props.assetProjection,\r\n        loading: false,\r\n    })\r\n}\r\n    render() {\r\n        \r\n        const projectionGrid=this.state.projectionGrid\r\n         if (this.state.loading) {// || this.state.projectionGrid===null || this.state.projectionGrid===undefined) {\r\n            return   <div><Loader type=\"TailSpin\" color=\"black\" height={30} width={30} /></div>;\r\n        }\r\n        return (\r\n            <div>\r\n                <DataTable\r\n                    gridTitle={projectionGrid.gridTitle}\r\n                    dataColTitles={projectionGrid.dataColTitles}\r\n                    dataProjection={projectionGrid.dataProjection}\r\n                    \r\n                    language={this.props.lang}\r\n                />\r\n            </div>);\r\n    }\r\n}\r\n\r\n","import React, { useState,useEffect } from \"react\";\r\nimport DataTable from \"./GridExcelComponent/DataTable\";\r\n\r\n\r\n\r\nexport default function ProjectionGrid1({assetProjection,lang}) {\r\n    const [projectionGrid, setProjectionGrid] = useState(assetProjection);\r\n\r\n  \r\n    useEffect(() => {\r\n        /* getGridData(input, assetCurr)\r\n            .then(response => response.json())\r\n            .then(data => setProjectionGrid(data)); */\r\n\r\n           setProjectionGrid(assetProjection)\r\n    }, [assetProjection])\r\n\r\n\r\n    //if(projectionGrid!==null && projectionGrid!==undefined){\r\n    return (\r\n        <div>\r\n         \r\n            { assetProjection ?\r\n            <DataTable\r\n                gridTitle={projectionGrid.gridTitle}\r\n                dataColTitles={  projectionGrid.dataColTitles}\r\n                dataProjection={projectionGrid.dataProjection}\r\n                \r\n                language={lang}\r\n            /> : null}\r\n        </div>);\r\n}\r\n\r\n","import React, { Component } from 'react';\r\n\r\nexport class GridButton extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.handleClick = this.handleClick.bind(this);\r\n    }\r\n    \r\n\thandleClick = () => {\r\n\t\tthis.props.handleClickGridButton();\r\n    }\r\n\r\n\trender() {\r\n\t\treturn (\r\n            <span>\r\n                    <img\r\n                    className={this.props.className}\r\n                    onClick={this.handleClick}\r\n                    id={this.props.id}\r\n                    alt={this.props.alt}\r\n                    src = {this.props.src}\r\n                    />  \r\n            </span>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { DropDown } from \"./DropDown\";\r\n//import { InputField4 } from './inputField4';\r\nimport { InputField } from \"./inputField\";\r\nimport { AddRemove } from \"./AddRemove\";\r\nimport { cleanFormat, getDisableValues } from \"../utils/helper\";\r\nimport {\r\n  getInfoIconAssetsIncomeRate,\r\n  getInfoIconAssetsYr0,\r\n  getInfoIconAssetsOwner,\r\n  getInfoIconSourcesRRIF,\r\n  getInfoTaxLiability,\r\n  getInfoIconTaxExempt,\r\n  getInfoIconAssetsIns,\r\n  getInfoIconTFSA,\r\n  getInfoIconDepositWithd,\r\n  getInfoIconTaxLiab,\r\n} from \"../definitions/infoIconsDefinitions\";\r\n\r\nimport {\r\n  createDefaultAsset,\r\n  copyFromAnotherAsset,\r\n} from \"../data/createDefaults\";\r\nimport {\r\n  MESSAGES,\r\n  ASSETS,\r\n  ASSET_TAX,\r\n  CONTROLTITLE,\r\n  OWNERSHIP,\r\n  ASSET_OWNERSHIP_ACTION,\r\n  //  ASSET_OWNERSHIP_ACTION2,\r\n  COLUMN_TITLES,\r\n} from \"../definitions/generalDefinitions\";\r\nimport {\r\n  getListItemNameFromKey,\r\n  getListItemKeyFromName,\r\n  isMobileDevice,\r\n  getListToShowByOrder,\r\n  arrayFormatMoney,\r\n} from \"../utils/helper\";\r\n\r\nimport { ProjectionGrid } from \"./ProjectionGrid.js\";\r\nimport ProjectionGrid1 from \"./ProjectionGrid1.js\";\r\nimport DataTable from \"./GridExcelComponent/DataTable\";\r\nimport {\r\n  fetchAssetProjection2,\r\n  fetchAssetProjectionAPI,\r\n} from \"../utils/FetchAPIs\";\r\nimport {\r\n  DEFAULT_RRIF_AGE,\r\n  DROPDOWN_WIDE,\r\n} from \"../definitions/generalDefinitions\";\r\nimport _ from \"lodash\";\r\n\r\nimport {\r\n  ASSET_API_OUTPUT_TaxPayable,\r\n  APPLET_INA,\r\n  APPLET_EP,\r\n} from \"../definitions/generalDefinitions\";\r\n\r\nimport { GridButton } from \"./GridButton\";\r\nimport { getAssetGridValues } from \"../data/assetGridProjections\";\r\nimport debounce from \"lodash.debounce\";\r\nimport { Language } from \"@material-ui/icons\";\r\n\r\nconst ASSET_DROPDOWN_TYPE = 0;\r\n// inserted desc here not a dropdown no need for indes\r\nconst ASSET_DROPDOWN_OWNER = 2;\r\nconst ASSET_DROPDOWN_TAXTYPE = 3;\r\n\r\nexport class Asset extends Component {\r\n  displayName = Asset.name;\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      description: \"\",\r\n      displaySreadsheet: false,\r\n      loading: false,\r\n    };\r\n    var i;\r\n    var typeValues = [];\r\n    const listAssetsToShow = getListToShowByOrder(ASSETS);\r\n    for (i = 0; i < listAssetsToShow.length; ++i) {\r\n      typeValues.push({\r\n        label: listAssetsToShow[i].value[this.props.language],\r\n        value: i + 1,\r\n      });\r\n    }\r\n    /* for (i = 0; i < ASSETS[this.props.language].Values.length; ++i) {\r\n      typeValues.push({\r\n        label: ASSETS[this.props.language].Values[i],\r\n        value: i + 1\r\n      });\r\n    } */\r\n\r\n    /* var ownerValues = [\r\n      {\r\n        label: OWNERSHIP[this.props.language].Values[0],\r\n        value: 1\r\n      },\r\n      { label: OWNERSHIP[this.props.language].Values[1], value: 2 },\r\n      { label: OWNERSHIP[this.props.language].Values[2], value: 3 },\r\n      { label: OWNERSHIP[this.props.language].Values[3], value: 4 }\r\n    ];\r\n */\r\n    var ownerActionValues = [\r\n      {\r\n        label:\r\n          ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.value[this.props.language],\r\n        value: 1,\r\n      },\r\n      {\r\n        label:\r\n          ASSET_OWNERSHIP_ACTION.CLIENT_ROLLOVER.value[this.props.language],\r\n        value: 2,\r\n      },\r\n      {\r\n        label: ASSET_OWNERSHIP_ACTION.SPOUSE.value[this.props.language],\r\n        value: 3,\r\n      },\r\n      {\r\n        label: ASSET_OWNERSHIP_ACTION.JOINT.value[this.props.language],\r\n        value: 4,\r\n      },\r\n    ];\r\n    if (APPLET_EP) {\r\n      ownerActionValues = [\r\n        {\r\n          label: ASSET_OWNERSHIP_ACTION.CLIENT.value[this.props.language],\r\n          value: 1,\r\n        },\r\n        {\r\n          label: ASSET_OWNERSHIP_ACTION.SPOUSE.value[this.props.language],\r\n          value: 2,\r\n        },\r\n      ];\r\n    }\r\n\r\n    /* var ownerActionValues2 = [\r\n          {\r\n            label:\r\n              ASSET_OWNERSHIP_ACTION2.properties[this.props.language].Values[\r\n                OWNER_ACTION_CLIENTLIQUIDATE\r\n              ],\r\n            value: 1\r\n          },\r\n          {\r\n            label:\r\n              ASSET_OWNERSHIP_ACTION[this.props.language].Values[\r\n                OWNER_ACTION_CLIENTROLLOVER\r\n              ],\r\n            value: 2\r\n          },\r\n          {\r\n            label:\r\n              ASSET_OWNERSHIP_ACTION[this.props.language].Values[\r\n                OWNER_ACTION_Spouse\r\n              ],\r\n            value: 3\r\n          },\r\n          {\r\n            label:\r\n              ASSET_OWNERSHIP_ACTION[this.props.language].Values[\r\n                OWNER_ACTION_Joint\r\n              ],\r\n            value: 4\r\n          }\r\n        ];\r\n    \r\n     */\r\n    this.taxValues = [];\r\n    this.desc = this.props.assetCurr.description;\r\n    const listAssetTaxesToShow = getListToShowByOrder(ASSET_TAX);\r\n    // console.log(listAssetTaxesToShow)\r\n    for (i = 0; i < listAssetTaxesToShow.length; ++i) {\r\n      this.taxValues.push({\r\n        label: listAssetTaxesToShow[i].value[this.props.language],\r\n        value: i + 1,\r\n      });\r\n    }\r\n    // console.log(this.props.assetCurr)\r\n    /*     for (i = 0; i < ASSET_TAX[this.props.language].Values.length; ++i) {\r\n          this.taxValues.push({\r\n            label: ASSET_TAX[this.props.language].Values[i],\r\n            value: i + 1\r\n          });\r\n        }\r\n     */\r\n\r\n    // console.log(this.props.assetCurr.ownerKey)\r\n    this.dataValues = {\r\n      DD: [ // asset types\r\n        {\r\n          //ASSET_DROPDOWN_TYPE index =0\r\n          id: 1,\r\n          Title: CONTROLTITLE[this.props.language].type,\r\n          defValue: getListItemNameFromKey(\r\n            ASSETS,\r\n            this.props.assetCurr.assetTypeKey,\r\n            this.props.language\r\n          ),\r\n          Values: typeValues,\r\n          disableOptionValue: getDisableValues(ASSETS),\r\n        },\r\n        {\r\n          id: 12,\r\n          Title: \"Description\",\r\n        },\r\n        {\r\n          //ASSET_DROPDOWN_OWNER index =2\r\n          id: 2, \r\n          Title: CONTROLTITLE[this.props.language].owner,\r\n          /* defValue: this.props.assetCurr.ownerKey,\r\n          Values: ownerValues \r\n          Title: ASSET_OWNERSHIP.Title.value[this.props.language],//CONTROLTITLE[this.props.language].ownershipAction,           */\r\n          defValue: getListItemNameFromKey(\r\n            ASSET_OWNERSHIP_ACTION,\r\n            this.props.assetCurr.ownerKey,\r\n            this.props.language\r\n          ),\r\n          Values: ownerActionValues,\r\n          disableOptionValue: getDisableValues(ASSET_OWNERSHIP_ACTION),\r\n        },\r\n        {\r\n          id: 3, //ASSET_DROPDOWN_TAXTYPE index =3\r\n          Title: CONTROLTITLE[this.props.language].tax,\r\n          defValue: getListItemNameFromKey(\r\n            ASSET_TAX,\r\n            this.props.assetCurr.assetTaxTypeKey,\r\n            this.props.language\r\n          ), // this.props.assetCurr.Tax,\r\n          disableOptionValue: getDisableValues(ASSET_TAX),\r\n          Values: this.taxValues,\r\n        },\r\n      ],\r\n    };\r\n\r\n    this.DDTax = {\r\n      disableOptionValue: getDisableValues(ASSET_TAX),\r\n    };\r\n    for (let i = 3; i < this.DDTax.disableOptionValue.length; i++)\r\n      this.DDTax.disableOptionValue[i] = true;\r\n\r\n    this.dataColTitles = [];\r\n    this.taxLiabOfClient = [];\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    //console.log(nextProps.assetCurr, this.props.assetCurr);\r\n    if (\r\n      !_.isEqual(nextProps.assetCurr, this.props.assetCurr) ||\r\n      nextProps.id !== this.props.id ||\r\n      nextProps.assetsNo !== this.props.assetsNo ||\r\n      nextProps.clientsNo !== this.props.clientsNo ||\r\n      !_.isEqual(nextProps.projection, this.props.projection)\r\n    ) {\r\n      if (\r\n        this.props.assetCurr.assetTypeKey ===\r\n          ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.Key ||\r\n        nextProps.assetCurr.assetTypeKey ===\r\n          ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.Key\r\n      ) {\r\n        // console.log(this.dataValues.DD[0].Values);\r\n        //console.log(nextProps.projection, this.props.projection);\r\n\r\n        this.dataValues.DD[ASSET_DROPDOWN_TYPE].Values.push({\r\n          label: ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.value[this.props.language],\r\n          value: this.dataValues.DD[ASSET_DROPDOWN_TYPE].Values.length + 1,\r\n        });\r\n        // console.log(this.dataValues.DD[0].Values);\r\n      }\r\n\r\n      this.dataValues.DD[ASSET_DROPDOWN_TYPE].defValue = getListItemNameFromKey(\r\n        ASSETS,\r\n        nextProps.assetCurr.assetTypeKey,\r\n        this.props.language\r\n      );\r\n      this.dataValues.DD[\r\n        ASSET_DROPDOWN_OWNER\r\n      ].defValue = getListItemNameFromKey(\r\n        ASSET_OWNERSHIP_ACTION,\r\n        nextProps.assetCurr.ownerKey,\r\n        this.props.language\r\n      );\r\n      this.dataValues.DD[\r\n        ASSET_DROPDOWN_TAXTYPE\r\n      ].defValue = getListItemNameFromKey(\r\n        ASSET_TAX,\r\n        nextProps.assetCurr.assetTaxTypeKey,\r\n        this.props.language\r\n      ); //nextProps.assetCurr.Tax;\r\n\r\n      this.dataValues.DD[2].disableOptionValue[1] =\r\n      (APPLET_EP && nextProps.clientsNo === 1) ||\r\n      (nextProps.assetCurr.assetTypeKey === ASSETS.LIFE_INSURANCE.Key);\r\n        //APPLET_EP && nextProps.clientsNo === 1;\r\n\r\n      this.setState({ description: nextProps.assetCurr.description });\r\n      //this.dataValues.DD[3].defValue = nextProps.assetCurr.ownerKey;\r\n\r\n      /* \r\nlet i;\r\n      this.typeValues = [];\r\n       if(this.props.Type===ASSETS[this.props.language].Values[4])\t//\t\t'Registered')  \r\n      {\r\n        this.dataValues.DD[2].defValue =ASSET_TAX[this.props.language].Values[TAX_RRSP] \r\n\r\n      this.typeValues.push({\r\n        label: ASSETS[this.props.language].Values[2],\r\n       });\r\n     }\r\n      else{\r\n      for (i = 0; i <= ASSETS[this.props.language].Values.length; ++i) {\r\n        this.typeValues.push({\r\n        label: ASSETS[this.props.language].Values[i],\r\n        value: i + 1\r\n      });\r\n      }} */\r\n    }\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    this.setState({ description: this.props.assetCurr.description });\r\n  };\r\n\r\n  componentDidUpdate = async (prevProps, prevState) => {\r\n    if (prevProps !== this.props) {\r\n      /*  console.log(\r\n         `this.state.clickCounts(♻️ componentDidUpdate)`,\r\n         this.props.assetCurr.currValue\r\n       );\r\n       */\r\n    }\r\n  };\r\n\r\n  handleDoRemove = (id) => {\r\n    if (this.props.disableAddRemove === false) {\r\n      this.props.handleRemoveAsset(id);\r\n    }\r\n  };\r\n\r\n  handleDoAdd = () => {\r\n    if (this.props.disableAddRemove === false) {\r\n      var assNo =\r\n        this.props.assetsNo >\r\n        this.dataValues.DD[ASSET_DROPDOWN_TYPE].Values.length - 1\r\n          ? this.dataValues.DD[ASSET_DROPDOWN_TYPE].Values.length - 2\r\n          : this.props.assetsNo;\r\n      var assNext = this.dataValues.DD[ASSET_DROPDOWN_TYPE].Values[assNo].label;\r\n      if (assNo === 4 || assNo === 5) assNo = 0;\r\n      else\r\n        assNo =\r\n          this.props.assetsNo >\r\n          this.dataValues.DD[ASSET_DROPDOWN_TAXTYPE].Values.length - 1\r\n            ? this.dataValues.DD[ASSET_DROPDOWN_TAXTYPE].Values.length - 1\r\n            : this.props.assetsNo;\r\n      var assTax = this.dataValues.DD[ASSET_DROPDOWN_TAXTYPE].Values[assNo]\r\n        .label;\r\n      const assTaxTypeKey = getListItemKeyFromName(\r\n        ASSET_TAX,\r\n        this.dataValues.DD[ASSET_DROPDOWN_TAXTYPE].Values[assNo].label\r\n      );\r\n      // console.log(assTaxTypeKey,assTax )\r\n      let asset = createDefaultAsset(this.props.assetsNo + 1);\r\n      asset.assetTypeKey = getListItemKeyFromName(ASSETS, assNext);\r\n      asset.description = \"\";\r\n      asset.ownerKey = APPLET_INA\r\n        ? ASSET_OWNERSHIP_ACTION.CLIENT_ROLLOVER.Key\r\n        : ASSET_OWNERSHIP_ACTION.CLIENT.Key; // in EP RRSP owner client or spouse\r\n      if (asset.assetTypeKey === ASSETS.LIFE_INSURANCE.Key)\r\n        asset.ownerKey = ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key;\r\n      asset.assetTaxTypeKey = assTaxTypeKey;\r\n\r\n      asset = this.setAssetValuesToDefault(asset);\r\n\r\n      this.dataValues.DD[ASSET_DROPDOWN_TAXTYPE].Values = this.taxValues;\r\n\r\n      this.props.handleAddAsset(asset);\r\n    }\r\n  };\r\n\r\n  updateDDown = (id, selection) => {\r\n    const { id: propId, assetCurr } = this.props;\r\n\r\n    let asset = copyFromAnotherAsset(assetCurr);\r\n    asset.id = propId;\r\n    if (id === 1) {\r\n      asset = createDefaultAsset(propId);\r\n      asset.assetTypeKey = getListItemKeyFromName(ASSETS, selection);\r\n      asset = this.setAssetValuesToDefault(asset);\r\n    } else if (id === 2) {\r\n      asset.ownerKey = getListItemKeyFromName(\r\n        ASSET_OWNERSHIP_ACTION,\r\n        selection\r\n      );\r\n      asset = this.setAssetValuesToDefault(asset);\r\n    } else if (id === 3)\r\n      //asset.Tax = selection;\r\n      asset.assetTaxTypeKey = getListItemKeyFromName(ASSET_TAX, selection);\r\n\r\n    /* asset = this.setAssetValuesToDefault(asset);  */\r\n    console.log(asset)\r\n    this.props.handleUpdate(asset);\r\n    //if (this.state.displaySreadsheet === true)\r\n    //this.handleUpdateGrid();\r\n  };\r\n  debounceHandleUpdataDesc = debounce(\r\n    (asset) => this.props.handleUpdate(asset),\r\n    500\r\n  );\r\n\r\n  updateDesc = (evt) => {\r\n    //console.log(evt.target.value);\r\n    let asset = copyFromAnotherAsset(this.props.assetCurr);\r\n    asset.description = evt.target.value;\r\n    this.props.handleUpdate(asset);\r\n  };\r\n\r\n  handleUpdateInput = (id, value) => {\r\n    //this.setState({ loading: true });\r\n    let asset = copyFromAnotherAsset(this.props.assetCurr);\r\n    asset.id = this.props.id;\r\n    //console.log(value);\r\n    /* let asset = {\r\n      id: this.props.id,\r\n      //Type: this.props.assetCurr.Type,\r\n      assetTypeKey: this.props.assetCurr.assetTypeKey,\r\n      ownerKey: this.props.assetCurr.ownerKey,\r\n      //OwnerID: this.props.assetCurr.OwnerID,\r\n      currValue: this.props.assetCurr.currValue,\r\n      //Tax: this.props.assetCurr.Tax,\r\n      assetTaxTypeKey: this.props.assetCurr.assetTaxTypeKey,\r\n      //TaxID: this.props.assetCurr.TaxID,\r\n      growth: this.props.assetCurr.growth,\r\n      DisposeYr: this.props.assetCurr.DisposeYr,\r\n      DisposeDur: this.props.assetCurr.DisposeDur,\r\n      ACB: this.props.assetCurr.ACB,\r\n      smallBusinessCapGainExemption: this.props.assetCurr\r\n        .smallBusinessCapGainExemption,\r\n      contributionAmt: this.props.assetCurr.contributionAmt,\r\n      contributionStartYr: this.props.assetCurr.contributionStartYr,\r\n      contributionDur: this.props.assetCurr.contributionDur,\r\n      incomeRate: this.props.assetCurr.incomeRate,\r\n      RRIFStartAge: this.props.assetCurr.RRIFStartAge\r\n    };\r\n */\r\n    let changed = false;\r\n    const lang = this.props.language;\r\n    const valueClean = cleanFormat(value,lang);\r\n    const valueCleanInt = parseInt(valueClean);\r\n    \r\n    if (id === 2) {\r\n      changed = asset.DisposeYr !== parseInt(value) ? true : false;\r\n      asset.DisposeYr = parseInt(value);\r\n    } else if (id === 3) {\r\n      changed = asset.DisposeDur !== parseInt(value) ? true : false;\r\n      asset.DisposeDur = parseInt(value);\r\n    } else if (id === 4) {\r\n      changed = asset.ACB !== valueCleanInt ? true : false;\r\n      asset.ACB = valueCleanInt;\r\n    } else if (id === 10) {\r\n      changed =\r\n        asset.smallBusinessCapGainExemption !== valueCleanInt\r\n          ? true\r\n          : false;\r\n      asset.smallBusinessCapGainExemption = valueCleanInt;\r\n    } else if (id === 1) {\r\n      changed = asset.currValue !== valueCleanInt ? true : false;\r\n      asset.currValue = valueCleanInt;\r\n    } else if (id === 5) {\r\n      changed =\r\n        asset.growth !==\r\n        parseInt(10000 * valueClean) / 10000\r\n          ? true\r\n          : false;\r\n      asset.growth =\r\n        parseInt(10000 * valueClean) / 10000;\r\n    } else if (id === 6) {\r\n      changed =\r\n        asset.contributionAmt !== valueCleanInt ? true : false;\r\n      asset.contributionAmt = valueCleanInt;\r\n    } else if (id === 7) {\r\n      changed = asset.contributionStartYr !== parseInt(value) ? true : false;\r\n      asset.contributionStartYr = parseInt(value);\r\n    } else if (id === 8) {\r\n      changed = asset.contributionDur !== parseInt(value) ? true : false;\r\n      asset.contributionDur = parseInt(value);\r\n    } else if (id === 13) {\r\n      changed =\r\n        asset.withdrawalAmt !== valueCleanInt ? true : false;\r\n      asset.withdrawalAmt = valueCleanInt;\r\n    } else if (id === 14) {\r\n      changed = asset.withdrawalStartYr !== parseInt(value) ? true : false;\r\n      asset.withdrawalStartYr = parseInt(value);\r\n    } else if (id === 15) {\r\n      changed = asset.withdrawalDur !== parseInt(value) ? true : false;\r\n      asset.withdrawalDur = parseInt(value);\r\n    } else if (id === 9) {\r\n      changed =\r\n        asset.incomeRate !==\r\n        parseInt(10000 * valueClean) / 10000\r\n          ? true\r\n          : false;\r\n      asset.incomeRate =\r\n        parseInt(10000 * valueClean) / 10000;\r\n    } else if (id === 11) {\r\n      changed = asset.RRIFStartAge !== parseInt(value) ? true : false;\r\n      asset.RRIFStartAge = parseInt(value);\r\n    } else if (id === 12) {\r\n      changed = asset.description !== value ? true : false;\r\n      asset.description = value;\r\n    }\r\n    if (changed) {\r\n      this.props.handleUpdate(asset);\r\n      this.setState({ loading: this.props.disableAddRemove });\r\n      \r\n      //this.setState({ loading: false });\r\n      // this.handleUpdateGrid();\r\n    }\r\n  };\r\n\r\n  updateClientTaxLiability = async () => {\r\n    let dataNA = this.props.getAssetProjection();\r\n    //let appSiteAPI = \"http://localhost:8082\";\r\n    let data = await fetchAssetProjection2(dataNA, this.props.id);\r\n    if (data !== undefined) {\r\n      // console.log(data[ASSET_API_OUTPUT_TaxPayable].numericValues[0]);\r\n\r\n      return data[ASSET_API_OUTPUT_TaxPayable].numericValues;\r\n    }\r\n  };\r\n\r\n  getData = async (dataNA, id) => {\r\n    let data = await fetchAssetProjectionAPI(dataNA, id);\r\n\r\n    return data;\r\n  };\r\n\r\n  handleClickGridButton = () => {\r\n    this.setState({ loading: true });\r\n    const display = this.state.displaySreadsheet;\r\n\r\n    this.props.adjustVisibleOutputSection(display === false ? 1 : -1);\r\n    this.setState({ displaySreadsheet: !display, loading: false });\r\n\r\n    /* if (this.state.displaySreadsheet === true) {\r\n      this.setState(prevState => {\r\n        let display = prevState.displaySreadsheet;\r\n        return { displaySreadsheet: !display,  loading:false };\r\n      });\r\n    }\r\n    else {\r\n      //await this.handleUpdateGrid()\r\n      this.setState(prevState => {\r\n        let display = prevState.displaySreadsheet;\r\n        return { displaySreadsheet: !display,  loading:false };\r\n      });\r\n      } */\r\n  };\r\n\r\n  setAssetValuesToDefault = (asset) => {\r\n    this.dataValues.DD[ASSET_DROPDOWN_TAXTYPE].Values = this.taxValues;\r\n\r\n    if (asset.assetTypeKey === ASSETS.RRSP_RRIF.Key) {\r\n      //value[this.props.language]) {\r\n      //asset.Tax = ASSET_TAX.REGISTERED.value[this.props.language];\r\n      asset.assetTaxTypeKey = ASSET_TAX.REGISTERED.Key;\r\n      //asset.ownerKey = APPLET_INA?ASSET_OWNERSHIP_ACTION.CLIENT_ROLLOVER.Key:asset.ownerKey;\r\n    } else if (\r\n      asset.assetTypeKey === ASSETS.PERSONAL_RESIDENCE.Key || asset.assetTypeKey === ASSETS.TFSA.Key//value[this.props.language]\r\n    ) {\r\n      //asset.Tax = ASSET_TAX.NON_TAXABLE.value[this.props.language];\r\n      asset.assetTaxTypeKey = ASSET_TAX.NON_TAXABLE.Key;\r\n      asset.ACB = 0;\r\n      asset.DisposeYr = 99;\r\n      asset.DisposeDur = 1;\r\n      if (asset.assetTypeKey === ASSETS.TFSA.Key) \r\n        asset.ownerKey =ASSET_OWNERSHIP_ACTION.CLIENT_ROLLOVER.Key;\r\n    } else if (asset.assetTypeKey === ASSETS.CASH.Key) {\r\n      //value[this.props.language]) {\r\n      //asset.Tax = ASSET_TAX.NON_TAXABLE.value[this.props.language];\r\n      asset.assetTaxTypeKey = ASSET_TAX.NON_TAXABLE.Key;\r\n\r\n      asset.ACB = 0;\r\n    } else if (\r\n      asset.assetTypeKey === ASSETS.LIFE_INSURANCE.Key //value[this.props.language]\r\n    ) {\r\n      //asset.Tax = ASSET_TAX.NON_TAXABLE.value[this.props.language];\r\n      asset.assetTaxTypeKey = ASSET_TAX.NON_TAXABLE.Key;\r\n\r\n      asset.DisposeYr = APPLET_INA ? 0 : 99;\r\n      asset.DisposeDur = 1;\r\n      asset.ACB = 0;\r\n\r\n      //  asset.ownerKey = APPLET_INA?ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key:ASSET_OWNERSHIP_ACTION.CLIENT_ROLLOVER.Key;  allow spouse ins\r\n    } else if (\r\n      asset.assetTypeKey === ASSETS.STOCKS_BONDS.Key || //value[this.props.language] ||\r\n      asset.assetTypeKey === ASSETS.REAL_ESTATE.Key //value[this.props.language]\r\n    ) {\r\n      //asset.Tax = ASSET_TAX.CAPITAL_GAINS_DEFERRED.value[this.props.language];\r\n      asset.assetTaxTypeKey = ASSET_TAX.CAPITAL_GAINS_DEFERRED.Key;\r\n\r\n      /* this.dataValues.DD[ASSET_DROPDOWN_TAXTYPE].Values = [];\r\n      this.dataValues.DD[ASSET_DROPDOWN_TAXTYPE].Values.push({\r\n        label: ASSET_TAX.CAPITAL_GAINS_DEFERRED.value[this.props.language],\r\n        value: 1,\r\n      });\r\n      this.dataValues.DD[ASSET_DROPDOWN_TAXTYPE].Values.push({\r\n        label: ASSET_TAX.CAPITAL_GAINS_ANNUAL.value[this.props.language],\r\n        value: 2,\r\n      }); */\r\n    } else if (asset.assetTypeKey === ASSETS.SMALL_BUSINESS_SHARES.Key)\r\n      //value[this.props.language])\r\n      //asset.Tax = ASSET_TAX.CAPITAL_GAINS_DEFERRED.value[this.props.language];\r\n      asset.assetTaxTypeKey = ASSET_TAX.QUALIFYING_SMALL_BUSINESS.Key;\r\n    //.CAPITAL_GAINS_DEFERRED.Key;\r\n    else if (asset.assetTypeKey === ASSETS.INTEREST_BEARING.Key)\r\n      asset.assetTaxTypeKey = ASSET_TAX.INTEREST.Key;\r\n    //.FULLY_TAXABLE.Key;\r\n    //asset.assetTaxTypeKey= ASSET_TAX.INTEREST.Key;\r\n    else if (\r\n      asset.assetTypeKey === ASSETS.OTHER_ASSETS.Key //value[this.props.language] ||\r\n    )\r\n      //asset.Tax = ASSET_TAX.FULLY_TAXABLE.value[this.props.language];\r\n      asset.assetTaxTypeKey = ASSET_TAX.FULLY_TAXABLE.Key;\r\n    \r\n    if (\r\n      asset.ownerKey === ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key //ASSET_OWNERSHIP.CLIENTLIQUIDATE.value[this.props.language]\r\n    ) {\r\n      asset.DisposeYr = 0;\r\n      asset.DisposeDur = 1;\r\n    }\r\n    // console.log(asset)\r\n\r\n    return asset;\r\n  };\r\n\r\n  clone2 = () => {\r\n    let id = \"assetGrid\";\r\n    if (this.state.displaySreadsheet === true) {\r\n      // console.log(this.state.displaySreadsheet)\r\n\r\n      var itm = document.getElementById(id);\r\n      // console.log(itm)\r\n\r\n      var cln = itm.cloneNode(true);\r\n      cln.id = \"ll\";\r\n      //cln.style.position=\"relative\"\r\n      let cln2 = document.createElement(\"div\");\r\n      cln2.appendChild(cln);\r\n      cln2.id = \"lll\";\r\n      document.addEventListener(\"click\", function (e) {\r\n        if (e.target && e.target.id === \"lll\") {\r\n        }\r\n      });\r\n\r\n      document.getElementById(\"copyDiv\").appendChild(cln2);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      id,\r\n      assetCurr,\r\n      /* Type,\r\n      Owner,\r\n      index,\r\n      currValue,\r\n      Tax,\r\n      growth,\r\n      Dispos\r\n      eYr,\r\n      DisposeDur,\r\n      ACB,\r\n      smallBusinessCapGainExemption,\r\n      contributionAmt,\r\n      contributionStartYr,\r\n      contributionDur,\r\n      incomeRate, */\r\n      language,\r\n      themeColor,\r\n      assetsNo,\r\n    } = this.props;\r\n    const assetID = assetCurr.assetTypeKey; //ASSETS.INTEREST_BEARING.value[this.props.language]\r\n    //Object.values(ASSETS).filter(obj => obj.value[language]=== assetCurr.Type)[0].Key\r\n    let disableTaxMethods =\r\n      assetCurr.assetTypeKey === ASSETS.LIFE_INSURANCE.Key || //value[language] ||\r\n      assetCurr.assetTypeKey === ASSETS.CASH.Key || //value[language] ||\r\n      assetCurr.assetTypeKey === ASSETS.PERSONAL_RESIDENCE.Key || //value[language] ||\r\n      assetCurr.assetTypeKey === ASSETS.TFSA.Key || //value[language] ||\r\n      assetCurr.assetTypeKey === ASSETS.RRSP_RRIF.Key || //value[language] ||\r\n      assetCurr.assetTypeKey === ASSETS.INTEREST_BEARING.Key ||\r\n      assetCurr.assetTypeKey === ASSETS.SMALL_BUSINESS_SHARES.Key\r\n        ? true\r\n        : false;\r\n    const disableOwner = false; // allow ins for both\r\n    const insurance = assetCurr.assetTypeKey === ASSETS.LIFE_INSURANCE.Key;\r\n\r\n    const taxStocks = assetCurr.assetTypeKey === ASSETS.STOCKS_BONDS.Key;\r\n    const taxRS = assetCurr.assetTypeKey === ASSETS.REAL_ESTATE.Key;\r\n\r\n    // assetCurr.assetTypeKey === ASSETS.LIFE_INSURANCE.Key ? true : false;\r\n    let hideOwner =\r\n      APPLET_EP && this.props.assetCurr.assetTypeKey !== ASSETS.RRSP_RRIF.Key\r\n        ? true\r\n        : false;\r\n\r\n    const taxT = CONTROLTITLE[language].tax;\r\n    const ownerT = CONTROLTITLE[language].owner;\r\n    const assetTypeIns =\r\n      CONTROLTITLE[language].type &&\r\n      assetCurr.assetTypeKey === ASSETS.LIFE_INSURANCE.Key;\r\n\r\n    let assetTax = MESSAGES[language].assetTax;\r\n\r\n    //const taxCredit=assetCurr.Type === UNLISTED[this.props.language].Assets.Values[ASSET_TaxCredit]\r\n    const taxCredit =\r\n      assetCurr.Type ===\r\n      ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.value[this.props.language];\r\n\r\n    const rrsp = assetCurr.assetTaxTypeKey === ASSET_TAX.REGISTERED.Key; //value[language];\r\n    const showACB = !(\r\n      //assetCurr.Tax === ASSET_TAX.NON_TAXABLE.value[language] ||\r\n      (\r\n        assetCurr.assetTaxTypeKey === ASSET_TAX.NON_TAXABLE.Key || //value[language] ||\r\n        rrsp ||\r\n        assetCurr.assetTypeKey === ASSETS.INTEREST_BEARING.Key || //value[language] ||\r\n        //assetCurr.Tax === ASSET_TAX.CAPITAL_GAINS_ANNUAL.value[language]\r\n        assetCurr.assetTaxTypeKey === ASSET_TAX.CAPITAL_GAINS_ANNUAL.Key\r\n      )\r\n    );\r\n    const showIncome =APPLET_INA &&\r\n    (assetCurr.assetTaxTypeKey === ASSET_TAX.CAPITAL_GAINS_DEFERRED.Key);\r\n      //assetCurr.Tax === ASSET_TAX.CAPITAL_GAINS_DEFERRED.value[language] ||\r\n      /* (APPLET_EP &&\r\n        (assetCurr.assetTaxTypeKey === ASSET_TAX.CAPITAL_GAINS_DEFERRED.Key ||\r\n        assetCurr.assetTypeKey === ASSETS.OTHER_ASSETS.Key || //value[language] ||\r\n          rrsp)) ||\r\n      (APPLET_INA &&\r\n        rrsp &&\r\n       assetCurr.ownerKey !== ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key); //ASSET_OWNERSHIP.CLIENTLIQUIDATE.value[this.props.language]\r\n     */\r\n    \r\n    const showDur = !(\r\n      rrsp ||\r\n      assetCurr.assetTypeKey === ASSETS.PERSONAL_RESIDENCE.Key || //value[language] ||\r\n      assetCurr.assetTypeKey === ASSETS.REAL_ESTATE.Key || //value[language] ||\r\n      taxCredit ||\r\n      ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key\r\n    );\r\n    const showGrowth = !(\r\n      (\r\n        assetCurr.assetTypeKey === ASSETS.LIFE_INSURANCE.Key ||\r\n        assetCurr.assetTypeKey === ASSETS.CASH.Key || //value[language] ||\r\n        taxCredit ||\r\n        assetCurr.ownerKey === ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key\r\n      ) //ASSET_OWNERSHIP.CLIENTLIQUIDATE.value[this.props.language]\r\n    );\r\n\r\n    const showDispose = !(\r\n      rrsp ||\r\n      (APPLET_INA && assetCurr.assetTypeKey === ASSETS.LIFE_INSURANCE.Key) || //value[language] ||\r\n      assetCurr.ownerKey === ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key || //ASSET_OWNERSHIP.CLIENTLIQUIDATE.value[this.props.language]\r\n      taxCredit\r\n    );\r\n\r\n    const showCotribution = //APPLET_EP &&\r\n      assetCurr.ownerKey !== ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key && //ASSET_OWNERSHIP.CLIENTLIQUIDATE.value[this.props.language]\r\n      (rrsp ||\r\n      assetCurr.assetTypeKey === ASSETS.INTEREST_BEARING.Key || //value[language] ||\r\n        assetCurr.assetTypeKey === ASSETS.STOCKS_BONDS.Key  || assetCurr.assetTypeKey === ASSETS.TFSA.Key); //value[language];\r\n    const showWithdrawal =\r\n      (APPLET_EP || (APPLET_INA && assetCurr.withdrawalAmt>0 )  || (APPLET_INA )) &&\r\n      assetCurr.ownerKey !== ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key && //ASSET_OWNERSHIP.CLIENTLIQUIDATE.value[this.props.language]\r\n      (assetCurr.assetTypeKey === ASSETS.INTEREST_BEARING.Key || //value[language] ||\r\n        assetCurr.assetTypeKey === ASSETS.STOCKS_BONDS.Key || rrsp || assetCurr.assetTypeKey === ASSETS.TFSA.Key); //value[language];\r\n\r\n    const showCGE = assetCurr.assetTypeKey === ASSETS.SMALL_BUSINESS_SHARES.Key; //value[language]\r\n    // console.log(this.dataValues);\r\n\r\n    let gridIcons = new Array(this.dataColTitles.length);\r\n    this.dataColTitles.forEach((item) => {\r\n      if (item === COLUMN_TITLES[this.props.language].TaxLiability)\r\n        gridIcons[this.dataColTitles.length - 1] = getInfoTaxLiability(\r\n          language\r\n        );\r\n    });\r\n\r\n    //const disableDD=(dd.Title === CONTROLTITLE[language].owner && disableOwner)  || (dd.Title === taxT && disableTaxMethods) || (taxCredit && (dd.Title === taxT || dd.Title ===CONTROLTITLE[this.props.language].ownerAction))\r\n    let disableAll = false;\r\n    if (\r\n      this.props.assetCurr.assetTypeKey ===\r\n      ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.Key\r\n    ) {\r\n      disableAll = true;\r\n      this.dataValues.DD[ASSET_DROPDOWN_TYPE].Values.push({\r\n        label: ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.value[this.props.language],\r\n        value: this.dataValues.DD[ASSET_DROPDOWN_TYPE].Values.length + 1,\r\n      });\r\n    }\r\n\r\n    const p =\r\n      this.props.projection[this.props.assetCurr.id - 1] === undefined\r\n        ? null\r\n        : this.props.projection[this.props.assetCurr.id - 1].grid;\r\n\r\n    this.dataValues.DD[0].disableOptionValue[\r\n      ASSETS.PERSONAL_RESIDENCE.ID\r\n    ] = this.props.hasPersonalResidenceAlready; // disable more\r\n\r\n    this.dataValues.DD[2].disableOptionValue[1] =\r\n      (APPLET_EP && this.props.clientsNo === 1) ||\r\n      (assetCurr.assetTypeKey === ASSETS.LIFE_INSURANCE.Key);\r\n    \r\n\r\n    this.dataValues.DD[2].disableOptionValue[3] =\r\n      (this.props.assetCurr.assetTypeKey===ASSETS.TFSA.Key || this.props.assetCurr.assetTypeKey===ASSETS.RRSP_RRIF.Key )\r\n    \r\n    //console.log(this.props.assetCurr.projection, this.props.projection[0].grid);\r\n    if (this.state.loading === true && this.props.disableAddRemove=== true) {\r\n      return (\r\n       \"\"\r\n      );\r\n    } else {\r\n      return (\r\n        <div className=\"inputRow\">\r\n          {this.dataValues.DD.map((dd) =>\r\n            dd.id < 4 ? (\r\n              !(hideOwner === true && dd.id === 2) && (\r\n                <DropDown\r\n                  key={dd.id.toString()}\r\n                  id={dd.id}\r\n                  Count={assetsNo}\r\n                  Title={dd.Title}\r\n                  disable={\r\n                    disableAll === true ||\r\n                    (dd.Title === CONTROLTITLE[language].owner &&\r\n                      disableOwner) ||\r\n                    (dd.Title === taxT && disableTaxMethods) ||\r\n                    (taxCredit &&\r\n                      (dd.Title === taxT ||\r\n                        dd.Title ===\r\n                          CONTROLTITLE[this.props.language].ownerAction))\r\n                  }\r\n                  defValue={dd.defValue}\r\n                  unlistedValue={\r\n                    taxCredit\r\n                      ? ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.value[\r\n                          this.props.language\r\n                        ]\r\n                      : \"\"\r\n                  } // TODO ideally find in list of values\r\n                  Values={dd.Values}\r\n                  //info={dd.Title === \"Type\" && id === 1 ? assetTax : \"\"}\r\n                  infoIcon={\r\n                    (dd.Title === ownerT && assetCurr.id === 1\r\n                      ? getInfoIconAssetsOwner(this.props.language)\r\n                      : assetTypeIns\r\n                      ? getInfoIconAssetsIns(this.props.language)\r\n                      : undefined) ||\r\n                      (dd.Title === CONTROLTITLE[language].type && (this.props.assetCurr.assetTypeKey===ASSETS.TFSA.Key || this.props.assetCurr.assetTypeKey===ASSETS.RRSP_RRIF.Key)\r\n                        ? getInfoIconTFSA(this.props.language)\r\n                        : undefined)||\r\n                        (dd.Title === CONTROLTITLE[language].tax && (this.props.assetCurr.id===1) && APPLET_INA\r\n                          ? getInfoIconTaxLiab(this.props.language)\r\n                          : undefined)\r\n  \r\n\r\n                        \r\n                        \r\n                  }\r\n                  language={language}\r\n                  //   disableOption={dd.disableOptionValue}\r\n                  disableOption={\r\n                    dd.id !== 3\r\n                      ? dd.disableOptionValue\r\n                      : taxStocks || taxRS\r\n                      ? this.DDTax.disableOptionValue\r\n                      : dd.disableOptionValue\r\n                  }\r\n                  width={DROPDOWN_WIDE}\r\n                  updateDDown={this.updateDDown}\r\n                />\r\n              )\r\n            ) : (\r\n              <div className=\"dropDown inputDiv\">\r\n                <div className=\"controlTitle\">\r\n                  {CONTROLTITLE[this.props.language].desc}\r\n                </div>\r\n                <input\r\n                  key={dd.id.toString()}\r\n                  id={12}\r\n                  className=\"inputField  textareaAssetName\"\r\n                  value={this.state.description}\r\n                  onClick={this.select}\r\n                  type=\"text\"\r\n                  onChange={(evt) =>\r\n                    this.setState({ description: evt.target.value })\r\n                  }\r\n                  onBlur={(evt) => this.updateDesc(evt)}\r\n                />\r\n\r\n                {/* \r\n              <input\r\n                id={12}\r\n                type=\"text\"\r\n                className=\"inputField  textareaAssetName\"\r\n                onChange={this.updateDesc}\r\n                value={assetCurr.description}\r\n              /> */}\r\n              </div>\r\n            )\r\n          )}\r\n          <InputField\r\n            inputName={\r\n              insurance\r\n                ? CONTROLTITLE[language].FA\r\n                : CONTROLTITLE[language].amount\r\n            }\r\n            id={1}\r\n            format={2}\r\n            Count={assetsNo}\r\n            language={language}\r\n            inputValue={assetCurr.currValue}\r\n            handleUpdateInput={this.handleUpdateInput}\r\n          />\r\n\r\n          {showGrowth && (\r\n            <InputField\r\n              inputName={CONTROLTITLE[language].growth}\r\n              format={3}\r\n              id={5}\r\n              Count={assetsNo}\r\n              language={language}\r\n              inputValue={Math.round(10000*assetCurr.growth)/10000}\r\n              inputTitle={id}\r\n              handleUpdateInput={this.handleUpdateInput}\r\n            />\r\n          )}\r\n\r\n          {showDispose && (\r\n            <InputField\r\n              inputName={\r\n                APPLET_INA\r\n                  ? CONTROLTITLE[language].disposeYr\r\n                  : CONTROLTITLE[language].disposeYr\r\n              } //CONTROLTITLE[language].dur}\r\n              id={2}\r\n              //info={MESSAGES[language].infoYr0}\r\n              infoIcon={getInfoIconAssetsYr0(this.props.language)}\r\n              format={1}\r\n              Count={assetsNo}\r\n              language={language}\r\n              inputValue={assetCurr.DisposeYr}\r\n              handleUpdateInput={this.handleUpdateInput}\r\n            />\r\n          )}\r\n          {showDur && (\r\n            <InputField\r\n              inputName={CONTROLTITLE[language].disposeDur}\r\n              id={3}\r\n              format={1}\r\n              Count={assetsNo}\r\n              language={language}\r\n              inputValue={assetCurr.DisposeDur}\r\n              handleUpdateInput={this.handleUpdateInput}\r\n            />\r\n          )}\r\n          {rrsp &&\r\n            assetCurr.ownerKey !== //ASSET_OWNERSHIP.CLIENTLIQUIDATE.value[this.props.language]\r\n              ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key && (\r\n              <InputField\r\n                inputName={CONTROLTITLE[language].RRIFAge}\r\n                format={1}\r\n                id={11}\r\n                Count={assetsNo}\r\n                infoIcon={getInfoIconSourcesRRIF(this.props.language)}\r\n                language={language}\r\n                inputValue={assetCurr.RRIFStartAge}\r\n                handleUpdateInput={this.handleUpdateInput}\r\n              />\r\n            )}\r\n          {showIncome && (\r\n            <InputField\r\n              inputName={\r\n                rrsp\r\n                  ? CONTROLTITLE[language].RRIFRate\r\n                  : CONTROLTITLE[language].incomeRate\r\n              }\r\n              format={3}\r\n              id={9}\r\n              Count={assetsNo}\r\n              infoIcon={getInfoIconAssetsIncomeRate(this.props.language)}\r\n              language={language}\r\n              inputValue={Math.round(10000*assetCurr.incomeRate)/10000}\r\n              handleUpdateInput={this.handleUpdateInput}\r\n            />\r\n          )}\r\n\r\n          {showCGE && (\r\n            <InputField\r\n              inputName={CONTROLTITLE[language].smallBusinessCapGainExemption}\r\n              format={2}\r\n              id={10}\r\n              Count={assetsNo}\r\n              language={language}\r\n              infoIcon={getInfoIconTaxExempt(this.props.language)}\r\n              inputValue={assetCurr.smallBusinessCapGainExemption}\r\n              handleUpdateInput={this.handleUpdateInput}\r\n            />\r\n          )}\r\n          {showACB && (\r\n            <InputField\r\n              inputName={CONTROLTITLE[language].ACB}\r\n              format={2}\r\n              id={4}\r\n              Count={assetsNo}\r\n              language={language}\r\n              inputValue={assetCurr.ACB}\r\n              //{/*readOnly={disableTaxMethods}*/}\r\n\r\n              handleUpdateInput={this.handleUpdateInput}\r\n            />\r\n          )}\r\n\r\n          {showCotribution && (\r\n            <div>\r\n              <InputField\r\n                inputName={CONTROLTITLE[language].contributionAmt}\r\n                id={6}\r\n                format={2}\r\n                Count={assetsNo}\r\n                language={language}\r\n                inputValue={assetCurr.contributionAmt}\r\n                infoIcon={getInfoIconDepositWithd(this.props.language)}\r\n                colorDiv={\"green\"}\r\n                handleUpdateInput={this.handleUpdateInput}\r\n              />\r\n              {/* <InputField\r\n              inputName={CONTROLTITLE[language].contributionStartYr}\r\n              id={7}\r\n              format={1}\r\n              //info={MESSAGES[language].infoYr0}\r\n              Count={assetsNo}\r\n              language={language}\r\n              inputValue={assetCurr.contributionStartYr}\r\n              handleUpdateInput={this.handleUpdateInput}\r\n            />  */}\r\n              <InputField\r\n                inputName={CONTROLTITLE[language].contributionDur}\r\n                id={8}\r\n                format={1}\r\n                Count={assetsNo}\r\n                language={language}\r\n                inputValue={assetCurr.contributionDur}\r\n                colorDiv={\"green\"}\r\n                handleUpdateInput={this.handleUpdateInput}\r\n              />\r\n            </div>\r\n          )}\r\n\r\n          {showWithdrawal && (\r\n            <div>\r\n              <InputField\r\n                inputName={CONTROLTITLE[language].withdrawalAmt}\r\n                id={13}\r\n                format={2}\r\n                Count={assetsNo}\r\n                language={language}\r\n                inputValue={assetCurr.withdrawalAmt}\r\n                colorDiv={\"red\"}\r\n                handleUpdateInput={this.handleUpdateInput}\r\n              />\r\n              <InputField\r\n                inputName={CONTROLTITLE[language].withdrawalStartYr}\r\n                id={14}\r\n                format={1}\r\n                //info={MESSAGES[language].infoYr0}\r\n                Count={assetsNo}\r\n                language={language}\r\n                inputValue={assetCurr.withdrawalStartYr}\r\n                minValue={1}\r\n                colorDiv={\"red\"}\r\n                handleUpdateInput={this.handleUpdateInput}\r\n              />\r\n              <InputField\r\n                inputName={CONTROLTITLE[language].withdrawalDur}\r\n                id={15}\r\n                format={1}\r\n                Count={assetsNo}\r\n                language={language}\r\n                inputValue={assetCurr.withdrawalDur}\r\n                colorDiv={\"red\"}\r\n                handleUpdateInput={this.handleUpdateInput}\r\n              />\r\n            </div>\r\n          )}\r\n          {/*  <svg\r\n          className=\"iconMore\"\r\n          onClick={this.handleClickGridButton}\r\n          style={{ top: \"140px\" }}\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          width=\"24\"s\r\n          height=\"24\"\r\n          viewBox=\"0 0 24 24\"\r\n        >\r\n          <path d=\"M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z\" />\r\n        </svg> */}\r\n          {!taxCredit && !disableAll && (\r\n            <GridButton\r\n              className=\"iconMore\"\r\n              handleClickGridButton={this.handleClickGridButton}\r\n              id=\"gridOn\"\r\n              alt=\"ll\"\r\n              src={\r\n                this.state.displaySreadsheet === true\r\n                  ? require(\"../images/gridOff.png\")\r\n                  : require(\"../images/gridOn.png\")\r\n              }\r\n            />\r\n          )}\r\n\r\n          <AddRemove\r\n            currentID={id}\r\n            minComps={0}\r\n            //currentIndex={index}\r\n            id={assetID}\r\n            numberComps={assetsNo}\r\n            disabled={this.props.disableAddRemove}\r\n            handleDoAdd={this.handleDoAdd}\r\n            handleDoRemove={this.handleDoRemove}\r\n          />\r\n          {/* {isMobileDevice() && id < assetsNo ? <hr className=\"ppi2\" /> : \"\"} */}\r\n\r\n          {this.state.displaySreadsheet === true && (\r\n            <div\r\n              id=\"assetGrid\"\r\n              style={{\r\n                clear: \"both\",\r\n                float: \"left\",\r\n              }} /*    onClick={this.clone2}  */\r\n            >\r\n              {p !== null && (\r\n                <ProjectionGrid1 assetProjection={p} lang={language} />\r\n              )}{\" \"}\r\n            </div>\r\n          )}\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport { Chart,Bar, Pie } from \"react-chartjs-2\";\r\n//import ChartDataLabels from 'chartjs-plugin-datalabels';\r\n//import \"./Output.css\";\r\nimport \"./Output.css\";\r\nimport { setUIDataToAPI } from \"../data/dataExchange\";\r\nimport { getAssetLiabProjections } from \"../data/aggregateGridProjections\";\r\nimport {\r\n  getProjectedLiabilities,\r\n  getLeakageGraphs\r\n} from \"../utils/helper\";\r\nimport {\r\n  QUOTE_CLIENT,\r\n  QUOTE_SPOUSE,\r\n} from \"../definitions/generalDefinitions\";\r\nimport { OUTPUTTEXTEP } from \"../definitions/outputDefinitionsEP\";\r\n\r\n// for Estate\r\nconst DISPLAY_TAXLIAB_CLIENT = 1;\r\nconst DISPLAY_TAXLIAB_JLTD = 2;\r\n\r\nexport class OutputGraphsEPLeakage extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n   // Chart.plugins.unregister(ChartDataLabels)\r\n  }\r\n  \r\n  render() {\r\n    // get data similar to presentation\r\n  \r\n    const AssetLiabProjs = getAssetLiabProjections(this.props);\r\n    const lang =this.props.dataInput.Presentations[0].language;\r\n    const totalLiabProjections = getProjectedLiabilities(\r\n      this.props.dataInput,\r\n      this.props.projectEnd,\r\n      this.props.probate\r\n    );\r\n\r\n    let dtaAgesAll = [];\r\n    let k;\r\n    let lifeExp = this.props.lifeExp;\r\n    const clients = this.props.dataInput.Clients;\r\n    let age =\r\n      clients.length > 1\r\n        ? Math.min(clients[QUOTE_SPOUSE].Age, clients[QUOTE_CLIENT].Age)\r\n        : clients[QUOTE_CLIENT].Age;\r\n\r\n    //let age = this.props.dataInput.Clients[1].Age;\r\n\r\n    if (this.INAEstateOption === DISPLAY_TAXLIAB_CLIENT) {\r\n      lifeExp = this.props.lifeExpClient;\r\n      age = this.props.dataInput.Clients[QUOTE_CLIENT].Age;\r\n    } else if (this.INAEstateOption === DISPLAY_TAXLIAB_JLTD) {\r\n      lifeExp = this.props.lifeExpJLTD;\r\n      age =\r\n        clients.length > 1\r\n          ? Math.min(clients[QUOTE_SPOUSE].Age, clients[QUOTE_CLIENT].Age)\r\n          : clients[QUOTE_CLIENT].Age;\r\n    }\r\n\r\n    for (k = 0; k <= lifeExp + 3; ++k) {\r\n      dtaAgesAll.push(age + k);\r\n    }\r\n\r\n  const leakageGraps=getLeakageGraphs(this.props.dataInput.Assets,this.props.assetProjections,AssetLiabProjs,totalLiabProjections,\r\n  lang,\r\n  lifeExp)\r\n\r\n\r\n\r\n // leakageGraps.dataPieEstateLeakage.plugins=[ChartDataLabels]\r\n // leakageGraps.dataPieEstateLeakageLE.plugins=[ChartDataLabels]\r\n\r\n leakageGraps.optionsPieEstateLeakage.legend.labels.boxWidth = 20;\r\n leakageGraps.optionsPieEstateLeakageLE.legend.labels.boxWidth = 20;\r\n //optionsPieEstateLeakageLE.legend.labels.position = \"left\";\r\n //leakageGraps.dataPieEstateLeakage.responsive=false\r\n //leakageGraps.dataPieEstateLeakage.maintainAspectRatio=false\r\n  //leakageGraps.optionsPieEstateLeakage.legend.position= \"bottom\"\r\n  //leakageGraps.optionsPieEstateLeakageLE.legend.position= \"bottom\"\r\n \r\nreturn (\r\n  <div style={{ width: \"90%\" }}>\r\n    <div style={{ width: \"100%\" }}>\r\n\r\n        <h3 className=\"ppi1\">\r\n        <div>\r\n          {OUTPUTTEXTEP[lang].graphsLeakageT1} <br />\r\n        </div>\r\n      </h3>\r\n        \r\n        <div style={{ width: \"90%\" }}>\r\n        <article  id=\"pieEstateLeakage\"\r\n            className=\"canvas-containerLeakage\">\r\n            <div className=\"EPGraphDiv\">\r\n            <Pie\r\n              data={leakageGraps.dataPieEstateLeakage}\r\n              options={leakageGraps.optionsPieEstateLeakage}\r\n            />\r\n          </div >\r\n          </article>\r\n        <article  id=\"pieEstateLeakage2\"\r\n            className=\"canvas-containerLeakage\" >\r\n            <div className=\"EPGraphDiv\">\r\n            <Pie\r\n              data={leakageGraps.dataPieEstateLeakageLE}\r\n              options={leakageGraps.optionsPieEstateLeakageLE}\r\n            />\r\n          </div>\r\n        </article>\r\n        </div>\r\n        \r\n\r\n      <br />\r\n      <hr />\r\n    </div>\r\n  </div>\r\n);\r\n\r\n}\r\n\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Pie, Bar, Line, Chart } from \"react-chartjs-2\";\r\nimport \"./Output.css\";\r\nimport { OUTPUTTEXTEP } from \"../definitions/outputDefinitionsEP\";\r\n\r\nimport { TOTALS } from \"../definitions/generalDefinitions\";\r\nexport class OutputGraphStacked extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  render() {\r\n    const lang = this.props.language;\r\n    var optionsEstate = {\r\n      /*  \"hover\": {\r\n        \"animationDuration\": 0\r\n      },\r\n      \"animation\": {\r\n        \"duration\": 1,\r\n        \"onComplete\": function() {\r\n          var chartInstance = this.chart,\r\n            ctx = chartInstance.ctx;\r\n  \r\n          ctx.font = Chart.helpers.fontString(Chart.defaults.global.defaultFontSize, Chart.defaults.global.defaultFontStyle, Chart.defaults.global.defaultFontFamily);\r\n          ctx.textAlign = 'center';\r\n          ctx.textBaseline = 'bottom';\r\n  \r\n          this.data.datasets.forEach(function(dataset, i) {\r\n            var meta = chartInstance.controller.getDatasetMeta(i);\r\n            meta.data.forEach(function(bar, index) {\r\n              var data = dataset.data[index];\r\n              ctx.fillText(data, bar._model.x, bar._model.y - 5);\r\n            });\r\n          });\r\n        }\r\n      }, */\r\n      elements: { point: { radius: 0 } },\r\n      responsive: true,\r\n      title: {\r\n        display: true,\r\n        position: \"top\",\r\n        text: OUTPUTTEXTEP[lang].pg4GT,\r\n        fontSize: 14, //8,\r\n        fontColor: \"#111\",\r\n      },\r\n      legend: {\r\n        display: true,\r\n        position: \"bottom\",\r\n        labels: {\r\n          fontColor: \"#333\",\r\n          fontSize: 12, //16\r\n        },\r\n      },\r\n      scales: {\r\n        yAxes: [\r\n          {\r\n            stacked: true,\r\n            ticks: {\r\n              beginAtZero: true,\r\n              callback: function (value, index, values) {\r\n                let result =\r\n                  value < 1000\r\n                    ? value\r\n                    : lang === \"en\"\r\n                    ? Intl.NumberFormat().format(value / 1000) + \"K\"\r\n                    : (Intl.NumberFormat().format(value / 1000) + \"K\").replace(\r\n                        \",\",\r\n                        \" \"\r\n                      );\r\n                return result;\r\n              },\r\n            },\r\n          },\r\n        ],\r\n        xAxes: [\r\n          {\r\n            stacked: true,\r\n            ticks: {\r\n              beginAtZero: true,\r\n            },\r\n          },\r\n        ],\r\n      },\r\n    };\r\n\r\n    let dataAssetnEstateLiabProj = [];\r\n\r\n    let type = [\"line\", \"bar\"];\r\n\r\n    let col = [];\r\n\r\n    // Estate Liability has to be first to stay on top!\r\n    let data = [];\r\n    const taxLiab = TOTALS.TAX_LIAB.value[this.props.language];\r\n    for (let i = 0; i < this.props.dataAssetnEstateLiabProj.length; ++i) {\r\n      if (this.props.dataAssetnEstateLiabProj[i].name === taxLiab)\r\n        data.push(this.props.dataAssetnEstateLiabProj[i]);\r\n    }\r\n    for (let i = 0; i < this.props.dataAssetnEstateLiabProj.length; ++i) {\r\n      if (this.props.dataAssetnEstateLiabProj[i].name !== taxLiab)\r\n        data.push(this.props.dataAssetnEstateLiabProj[i]);\r\n    }\r\n\r\n    for (let i = 0; i < data.length; ++i) {\r\n      col = [];\r\n      let taxLiabLine = data[i].name === taxLiab ? true : false;\r\n      for (let k = 0; k < this.props.dataAges.length; ++k) {\r\n        col.push(data[i].colour);\r\n      }\r\n      col[this.props.LE] = shadeColor(data[i].colour, -20);\r\n      dataAssetnEstateLiabProj.push({\r\n        type: type[taxLiabLine ? 0 : 1],\r\n        label: data[i].name,\r\n        data: data[i].values, //!== undefined?this.props.dataRE:[],\r\n        fill: taxLiabLine ? false : true,\r\n        borderColor: data[i].colour,\r\n        backgroundColor: col, //this.props.dataAssetnEstateLiabProj[i].colour\r\n      });\r\n    }\r\n\r\n    \r\n\r\n    function shadeColor(color, percent) {\r\n      var R = parseInt(color.substring(1, 3), 16);\r\n      var G = parseInt(color.substring(3, 5), 16);\r\n      var B = parseInt(color.substring(5, 7), 16);\r\n\r\n      R = parseInt((R * (100 + percent)) / 100);\r\n      G = parseInt((G * (100 + percent)) / 100);\r\n      B = parseInt((B * (100 + percent)) / 100);\r\n\r\n      R = R < 255 ? R : 255;\r\n      G = G < 255 ? G : 255;\r\n      B = B < 255 ? B : 255;\r\n\r\n      var RR =\r\n        R.toString(16).length == 1 ? \"0\" + R.toString(16) : R.toString(16);\r\n      var GG =\r\n        G.toString(16).length == 1 ? \"0\" + G.toString(16) : G.toString(16);\r\n      var BB =\r\n        B.toString(16).length == 1 ? \"0\" + B.toString(16) : B.toString(16);\r\n\r\n      return \"#\" + RR + GG + BB;\r\n    }\r\n\r\n    const dataEstate = {\r\n      labels: this.props.dataAges, // this.dataAges,\r\n      datasets: dataAssetnEstateLiabProj,\r\n    };\r\n\r\n    return (\r\n      <div style={{ width: \"90%\" }}>\r\n        <div>\r\n          <article\r\n            id=\"stackedChart\"\r\n            className=\"canvas-containerWeb\"\r\n            style={{ marginLeft: \"25px\", height: \"450px\" }}\r\n          >\r\n            <div\r\n              style={{\r\n                overflow: \"hidden\",\r\n                float: \"left\",\r\n                width: \"100%\",\r\n                height: \"400px\",\r\n              }}\r\n            >\r\n              <Bar data={dataEstate} options={optionsEstate} />\r\n            </div>\r\n          </article>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport \"./Output.css\";\r\nimport { Table } from \"react-bootstrap\";\r\nimport {\r\n  ASSETS,\r\n  ASSET_TAX,\r\n  CONTROLTITLE,\r\n  TOTALS,\r\n  TITLES,\r\n  QUOTE_SPOUSE,\r\n  QUOTE_CLIENT,\r\n  OUTPUT_WIDTH_PCT,\r\n} from \"../definitions/generalDefinitions\";\r\nimport { OUTPUTTEXTEP } from \"../definitions/outputDefinitionsEP\";\r\n//import { Bar } from \"react-chartjs-2\";\r\nimport { doSavePdfActionEP } from \"./OutputPDFEP\";\r\nimport { MultiButtons } from \"./MultiButtons\";\r\nimport { OutputGraphsEPLeakage } from \"./OutputGraphsEPLeakage\";\r\nimport {getLogoAndAppletImage,getAgesEP} from \"../utils/helper\";\r\nimport { getInfoExportINA  } from \"../definitions/infoIconsDefinitions\";\r\nimport { Info } from \"./Info\";\r\n\r\n//import { AdjustibleImage } from \"./AdjustibleImage\";\r\n//import jsPDF from 'jspdf';\r\n//import * as jsPDF from 'jspdf';\r\nimport {\r\n  formatMoney,\r\n  formatMoney2,\r\n  getListItemNameFromKey,\r\n  getProjectedLiabilities,\r\n} from \"../utils/helper\";\r\nimport { getOutputValues, setUIDataToAPI } from \"../data/dataExchange\";\r\nimport { getAssetLiabProjections } from \"../data/aggregateGridProjections\";\r\nimport { OutputGraphStacked } from \"./OutputGraphStacked\";\r\nimport {\r\n  fetchAssetProjectionAPI,\r\n  fetchAssetProjection,\r\n  fetchAssetFMVandTaxLiab,\r\n} from \"../utils/FetchAPIs\";\r\n\r\nimport { getAssetGridValues } from \"../data/assetGridProjections\";\r\nimport DataTable from \"./GridExcelComponent/DataTable\";\r\nimport { isEqual } from \"lodash\";\r\nimport Loader from \"react-loader-spinner\";\r\nimport { AddToHomeScreenOutlined } from \"@material-ui/icons\";\r\n\r\nimport {\r\n  ASSET_TAX_TYPE_PRINCIPAL_RES,\r\n  ASSET_TAX_TYPE_REAL_ESTATE,\r\n  ASSET_TAX_TYPE_STOCKS,\r\n  ASSET_TAX_TYPE_SMALL_BUS,\r\n  ASSET_TAX_TYPE_RRSP,\r\n  ASSET_TAX_TYPE_INTEREST,\r\n  ASSET_TAX_TYPE_OTHER,\r\n  ASSET_TAX_TYPE_COUNT,\r\n} from \"../definitions/outputDefinitionsEP\";\r\n\r\nexport class OutputPresentationEP extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      loading: true,\r\n      showGrids: false,\r\n      image: this.props.dataInput.Presentations[0].adviserLogo.image,\r\n      imageSize: 90,\r\n      imageAlign: 2,\r\n    };\r\n    this.AssetLiabProjs = null;\r\n  }\r\n\r\n\r\n  doINA = async () => {\r\n    //window.top.location.href = 'localhost:8086';\r\n    //window.parent.changeLogo();\r\n   // console.log(this.props);\r\n    /* console.log(\"INA_\" +\r\n    this.props.dataInput.Presentations[0].language +\r\n    \"_\" +\r\n    this.props.encryptedInput,\r\n  \"*\") */\r\n   await window.parent.postMessage(\r\n      \"INA_\" +\r\n        this.props.dataInput.Presentations[0].language +\r\n        \"_\" +\r\n        this.props.encryptedInputLife1AndSpouse,\r\n      \"*\"\r\n    );\r\n\r\n   \r\n  };\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    this.setState({ showGrids: false });\r\n  }\r\n\r\n  clickMultiButton = (e) => {\r\n    let showGrids = true;\r\n    if (e === 1) showGrids = false;\r\n\r\n    this.setState({ showGrids: showGrids });\r\n  };\r\n\r\n  doPDF = () => {\r\n    var data = doSavePdfActionEP(this.props, this.AssetLiabProjs); //, this.dateApplet);\r\n\r\n    // option to embed the pdf\r\n    /* {\r\n      setTimeout(function () {\r\n        document.getElementById(\"obj\").setAttribute(\"data\", data);\r\n        document.getElementById(\"obj\").setAttribute(\"height\", \"0px\");\r\n      }, 1000);\r\n    } */\r\n  };\r\n\r\n  doPrint = () => {\r\n    var mywindow = window.open(\"\", \"PRINT\");\r\n\r\n    mywindow.document.write(\r\n      \"<html><head><title>\" + document.title + \"</title>\"\r\n    );\r\n    mywindow.document.write(\"</head><body >\");\r\n    mywindow.document.write(\"<h1>\" + \"Protecting Your Estate\" + \"</h1>\");\r\n    mywindow.document.write(document.getElementById(\"presentation\").innerHTML);\r\n    mywindow.document.write(\"</body></html>\");\r\n\r\n    mywindow.document.close(); // necessary for IE >= 10\r\n    mywindow.focus(); // necessary for IE >= 10*/\r\n\r\n    mywindow.print();\r\n    mywindow.close();\r\n\r\n    return true;\r\n  };\r\n\r\n  /*  onImageChange = (event) => {\r\n    if (event.target.files && event.target.files[0]) {\r\n      this.setState({\r\n        image: URL.createObjectURL(event.target.files[0])\r\n      });\r\n    }\r\n   } */\r\n\r\n  render() {\r\n    this.AssetLiabProjs = getAssetLiabProjections(this.props);\r\n    this.output = getOutputValues(this.props);\r\n    const styleWithLogo = { overflow: \"hidden\", width: \"100%\", overflowX: \"auto\" };\r\n    const styleWithLogoGrids = {width: \"100%\" };\r\n    \r\n    const lang = this.props.dataInput.Presentations[0].language;\r\n    const LE = this.props.LE;\r\n    const clients = this.props.dataInput.Clients;\r\n\r\n    let loaded =\r\n      this.AssetLiabProjs.AssetnEstateLiabs.length > 0 ? true : false;\r\n\r\n    \r\n  \r\n    //let dataAges = [];\r\n\r\n    const startAge =\r\n      clients.length > 1\r\n        ? Math.min(clients[QUOTE_SPOUSE].Age, clients[QUOTE_CLIENT].Age)\r\n        : clients[QUOTE_CLIENT].Age;\r\n    // do to LE+3\r\n\r\n\r\n    let dataAges=getAgesEP (clients, LE)\r\n    \r\n\r\n    let p2 = 1;\r\n    let p5 = 1;\r\n    let p6 = 1;\r\n   \r\n    //const { grids, loading } = this.state;\r\n    let totalAssets = 0;\r\n    let totalLiabs = 0;\r\n    if (this.AssetLiabProjs.projectionsGrids[0] === undefined) {\r\n      return <Loader type=\"TailSpin\" color=\"black\" height={30} width={30} />;\r\n    }\r\n\r\n\r\n    const allPages =\r\n      this.props.dataInput.Presentations[0].adviserLogo.image !== null &&\r\n      this.props.dataInput.Presentations[0].adviserLogo.allPages;\r\n\r\n    let j = 0;\r\n\r\n    const images=getLogoAndAppletImage(this.props.dataInput, this.props.imageRemove,this.props.imageAdjust)\r\n    const logoTop=images.logoTop\r\n    const logoBottom=images.logoBottom\r\n   \r\n\r\n    return (\r\n      <div id=\"presentation\">\r\n        <input\r\n          className=\"roundedCornerCmd\"\r\n          style={{\r\n            //width: \"90px\",\r\n            marginTop: \"-32px\",\r\n                marginRight: \"0px\",\r\n                paddingRight: \"8px\",\r\n                float: \"right\",\r\n          }}\r\n          onClick={this.doPDF}\r\n          type=\"button\"\r\n          value={CONTROLTITLE[lang].pdf}\r\n        />\r\n        <div style={{ width: \"100%\", float: \"left\", clear: \"left\" }}>\r\n\r\n      \r\n\r\n            <input\r\n              className=\"roundedCornerCmd\"\r\n              style={{\r\n           //     width: \"180px\",\r\n                marginTop: \"25px\",\r\n                marginRight: \"0px\",\r\n                paddingRight: \"8px\",\r\n                float: \"right\",\r\n              }}\r\n              onClick={this.doINA}\r\n              type=\"button\"\r\n              value={TITLES[lang].appletINA}\r\n            />{<div style={{\r\n                 paddingTop: \"10px\",\r\n                 float: \"right\",\r\n               }}><Info infoIcon={getInfoExportINA(lang)}/></div>} \r\n          </div>\r\n        {/* <object id=\"obj\" type=\"application/pdf\" width=\"50%\" height=\"0px\">\r\n          <p>\r\n            It appears you don't have a PDF plugin for this browser. Please\r\n            download the PDF file.\r\n          </p>\r\n        </object> */}\r\n\r\n        {/* \r\n<iframe id='iframe' type=\"application/pdf\" style={{width:\"100%\", height:\"auto\", float:\"left\"}}></iframe>\r\n        <input\r\n          className=\"multiButtons multiButtonsAct\"\r\n          style={{\r\n            width: \"90px\",\r\n            marginTop: \"0px\",\r\n            paddingRight: \"8px\",\r\n            float: \"right\",\r\n          }}\r\n          onClick={this.doPDF2}\r\n          type=\"button\"\r\n          value={CONTROLTITLE[lang].pdf}\r\n        />\r\n */}\r\n        {/*  <input\r\n          className=\"multiButtons multiButtonsAct\"\r\n          style={{\r\n            width: \"130px\",\r\n            marginTop: \"0px\",\r\n            paddingRight: \"8px\",\r\n            float: \"right\",\r\n          }}\r\n          onClick={this.doPrint}\r\n          type=\"button\"\r\n          value={CONTROLTITLE[lang].print}\r\n        />\r\n */}\r\n        {/* <h3 className=\"ppi1\">\r\n          {needTo}: {this.props.insuranceNeed}\r\n        </h3>\r\n */}\r\n\r\n        <div className=\"contentPres\">\r\n          {/* PAGE 1 */}\r\n\r\n          <p />\r\n        {/* add logo */}\r\n          {images.logo1stPage}\r\n            {/* add image */}\r\n            {images.applet}\r\n\r\n{/*           {this.props.dataInput.Presentations[0].adviserLogo.image !== null && (\r\n            <AdjustibleImage\r\n              image={this.props.dataInput.Presentations[0].adviserLogo.image}\r\n              showDetails={\r\n                this.props.dataInput.Presentations[0].adviserLogo.showDetails\r\n              }\r\n              size={this.props.dataInput.Presentations[0].adviserLogo.size}\r\n              imageLeft={this.props.dataInput.Presentations[0].adviserLogo.left}\r\n              allPages={\r\n                this.props.dataInput.Presentations[0].adviserLogo.allPages\r\n              }\r\n              imageRemove={this.props.imageRemove}\r\n              imageAdjust={this.props.imageAdjust}\r\n              ID={\"AdvisorLogo\"}\r\n            />\r\n          )}\r\n          <AdjustibleImage\r\n            image={require(\"../images/estate.protection.applet.cover.graphic.png\")}\r\n            showDetails={false}\r\n            size={OUTPUT_WIDTH_PCT}\r\n            imageLeft={0}\r\n            ID={\"EPPage1\"}\r\n          />\r\n */}          {/*            <img\r\n            className=\"ppi1\"\r\n            id=\"EPPage1\"\r\n            src={require(\"../images/estate.protection.applet.cover.graphic.png\")}\r\n            width=\"90%\"\r\n          />  */}\r\n          <h1 className=\"ppi1\">{OUTPUTTEXTEP[lang].pg1T}</h1>\r\n          <h5 className=\"ppi2\">\r\n            {OUTPUTTEXTEP[lang].pg1P1} {this.output.designedFor}\r\n            <br />\r\n            {OUTPUTTEXTEP[lang].pg1P2} {this.output.designedBy}\r\n            <br />\r\n            {OUTPUTTEXTEP[lang].pg1P3} {this.output.dateApplet}\r\n            <br />\r\n            {OUTPUTTEXTEP[lang].pg1P4} {this.output.province}\r\n            <br />\r\n          </h5>\r\n          <hr className=\"ppi1\" />\r\n          \r\n          {logoBottom}\r\n          {/* PAGE 2 Intro*/}\r\n\r\n          <div style={styleWithLogo}>\r\n          {logoTop}\r\n            {/* {allPages && (\r\n              <AdjustibleImage\r\n                image={this.props.dataInput.Presentations[0].adviserLogo.image}\r\n                showDetails={false}\r\n                size={this.props.dataInput.Presentations[0].adviserLogo.size}\r\n                imageLeft={\r\n                  this.props.dataInput.Presentations[0].adviserLogo.left\r\n                }\r\n                allPages={\r\n                  this.props.dataInput.Presentations[0].adviserLogo.allPages\r\n                }\r\n                imageRemove={this.props.imageRemove}\r\n                imageAdjust={this.props.imageAdjust}\r\n                ID={\"EPOtherPagesLogo\"}\r\n              />\r\n            )} */}\r\n            <br />\r\n            <h2 className=\"ppi1\">{OUTPUTTEXTEP[lang].pg2T}</h2>\r\n            {/* number changed to bullets feek */}\r\n            {OUTPUTTEXTEP[lang].pg2Paragraphs.map((item) => (\r\n              <p className=\"ppi1\" key={p2++}>\r\n                {p2 >= 4 && p2 !== 6 && p2 !== 9 && p2 <= 12 && (\r\n                  <span\r\n                    style={{\r\n                      paddingLeft: \"15px\",\r\n                      paddingRight: \"5px\",\r\n                      color: \"#759AC7\",\r\n                      fontSize: \"18px\",\r\n                      whiteSpace: \"nowrap\",\r\n                    }}\r\n                  >\r\n                    {/*{p2 < 6 ? p2 - 3 : p2 < 9 ? p2 - 4 : p2 - 5}.{\" \"}*/}\r\n                    &#8226;\r\n                  </span>\r\n                )}{\" \"}\r\n                {item}\r\n                <br />\r\n              </p>\r\n            ))}\r\n          </div>\r\n\r\n          {/* PAGE 3 fin situation*/}\r\n          {logoBottom}\r\n          \r\n          <div style={styleWithLogo}>\r\n          {logoTop}\r\n            {/* {allPages && (\r\n              <AdjustibleImage\r\n                image={this.props.dataInput.Presentations[0].adviserLogo.image}\r\n                showDetails={false}\r\n                size={this.props.dataInput.Presentations[0].adviserLogo.size}\r\n                imageLeft={\r\n                  this.props.dataInput.Presentations[0].adviserLogo.left\r\n                }\r\n                allPages={\r\n                  this.props.dataInput.Presentations[0].adviserLogo.allPages\r\n                }\r\n                imageRemove={this.props.imageRemove}\r\n                imageAdjust={this.props.imageAdjust}\r\n              />\r\n            )} */}\r\n            <br />\r\n            <h2 className=\"ppi1\">{OUTPUTTEXTEP[lang].pg3T}</h2>\r\n            <p className=\"ppi1\">{OUTPUTTEXTEP[lang].pg3P1}</p>\r\n\r\n            <div style={{ fontSize: \"14px\" }}>\r\n              <div style={{ paddingLeft: \"20px\", width: \"35%\", float: \"left\" }}>\r\n                <div>\r\n                  <table\r\n                    className=\"tableEP\"\r\n                    style={{ paddingLeft: \"10px\", width: \"100%\" }}\r\n                  >\r\n                    <tbody>\r\n                      <tr>\r\n                        <th className=\"tableTitleEP\" colSpan=\"2\">\r\n                          {OUTPUTTEXTEP[lang].pg3TabT}\r\n                        </th>\r\n                      </tr>\r\n                      {/* add assets*/}\r\n                      {this.output.assets.map((item) => {\r\n                        totalAssets += item.value;\r\n                        return (\r\n                          <tr key={item.name}>\r\n                            <td style={{ height: \"1px\", width: \"65%\" }}>\r\n                              {item.name}\r\n                              {item.name === ASSETS.OTHER_ASSETS.value[lang] &&\r\n                              item.value > 0\r\n                                ? \" *\"\r\n                                : \"\"}\r\n                            </td>\r\n                            <td\r\n                              className=\"textalignright\"\r\n                              style={{ height: \"1px\" }}\r\n                            >\r\n                              {/* ${formatMoney(item.value, 0, \",\", \",\")} */}\r\n                              {formatMoney2(item.value, 0, lang)}\r\n                            </td>\r\n                          </tr>\r\n                        );\r\n                      })}\r\n                      <tr\r\n                        key={\"totalAssets\"}\r\n                        style={{\r\n                          height: \"1px\",\r\n                          width: \"65%\",\r\n                          backgroundColor: \"#f0f0f5\",\r\n                          textAlign: \"right\",\r\n                        }}\r\n                      >\r\n                        <td>{OUTPUTTEXTEP[lang].pg3Tab2RTot}</td>\r\n                        <td\r\n                          className=\"textalignright\"\r\n                          style={{ height: \"1px\" }}\r\n                        >\r\n                          {/* ${formatMoney(totalAssets, 0, \",\", \",\")} */}\r\n                          {formatMoney2(totalAssets, 0, lang)}\r\n                        </td>\r\n                      </tr>\r\n                    </tbody>\r\n                  </table>\r\n                  {this.output.otherAssetsList !== \"\" && (\r\n                    <p\r\n                      className=\"ppi1\"\r\n                      style={{\r\n                        color: \"darkgrey\",\r\n                        marginTop: \"3px\",\r\n                        marginLeft: \"-10px\",\r\n                        fontSize: \"12px\",\r\n                        float: \"left\",\r\n                      }}\r\n                    >\r\n                      {this.output.otherAssetsList}\r\n                    </p>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              <div style={{ paddingLeft: \"23px\", width: \"38%\", float: \"left\" }}>\r\n                <div>\r\n                  <table\r\n                    className=\"tableEP\"\r\n                    style={{ paddingLeft: \"10px\", width: \"100%\" }}\r\n                  >\r\n                    <tbody>\r\n                      <tr>\r\n                        <th className=\"tableTitleEP\" colSpan=\"2\">\r\n                          {OUTPUTTEXTEP[lang].pg3Tab2T}\r\n                        </th>\r\n                      </tr>\r\n                      {/* liabs*/}\r\n                      {this.output.liabilities.map((item) => {\r\n                        totalLiabs += item.value;\r\n                        return (\r\n                          <tr key={item.name}>\r\n                            <td style={{ width: \"60%\" }}>{item.name}</td>\r\n                            <td className=\"textalignright\">\r\n                              {/* ${formatMoney(item.value, 0, \",\", \",\")} */}\r\n                              {formatMoney2(item.value, 0, lang)}\r\n                            </td>\r\n                          </tr>\r\n                        );\r\n                      })}\r\n                      <tr\r\n                        key={\"totalLiabs\"}\r\n                        style={{\r\n                          height: \"1px\",\r\n                          width: \"65%\",\r\n                          backgroundColor: \"#f0f0f5\",\r\n                          textAlign: \"right\",\r\n                        }}\r\n                      >\r\n                        <td>{OUTPUTTEXTEP[lang].pg3Tab2RTot}</td>\r\n                        <td\r\n                          className=\"textalignright\"\r\n                          style={{ height: \"1px\" }}\r\n                        >\r\n                          {/* ${formatMoney(totalLiabs, 0, \",\", \",\")} */}\r\n                          {formatMoney2(totalLiabs, 0, lang)}\r\n                        </td>\r\n                      </tr>\r\n                      <tr\r\n                        key={\"netWorth\"}\r\n                        style={{\r\n                          height: \"1px\",\r\n                          width: \"65%\",\r\n                          backgroundColor: \"#d1d1e0\",\r\n                          textAlign: \"right\",\r\n                        }}\r\n                      >\r\n                        <td>{OUTPUTTEXTEP[lang].pg3Tab2NW}</td>\r\n                        <td\r\n                          className=\"textalignright\"\r\n                          style={{ height: \"1px\" }}\r\n                        >\r\n                          {/* ${formatMoney(totalAssets-totalLiabs, 0, \",\", \",\")} */}\r\n                          {formatMoney2(totalAssets - totalLiabs, 0, lang)}\r\n                        </td>\r\n                      </tr>\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <h2 className=\"ppi1\">{OUTPUTTEXTEP[lang].pg3T2}</h2>\r\n          <p className=\"ppi1\">{OUTPUTTEXTEP[lang].pg3P2}</p>\r\n          <p className=\"ppi1\">{OUTPUTTEXTEP[lang].pg3P3}</p>\r\n\r\n          <div\r\n            style={{\r\n              fontFamily: \"Georgia, 'Times New Roman', imes, serif\",\r\n              fontSize: \"14px\",\r\n            }}\r\n          >\r\n            <div style={{ paddingLeft: \"20px\", width: \"70%\", float: \"left\" }}>\r\n              <div>\r\n                <table\r\n                  className=\"tableEP\"\r\n                  style={{ paddingLeft: \"10px\", width: \"100%\" }}\r\n                >\r\n                  <tbody>\r\n                    <tr>\r\n                      <th className=\"tableTitleEP\" style={{ width: \"30%\" }}>\r\n                        {OUTPUTTEXTEP[lang].pg3Tab3R1C1}\r\n                      </th>\r\n                      <th className=\"tableTitleEP\" style={{ width: \"20%\" }}>\r\n                        {OUTPUTTEXTEP[lang].pg3Tab3R1C2}\r\n                      </th>\r\n                      <th className=\"tableTitleEP\" style={{ width: \"20%\" }}>\r\n                        {OUTPUTTEXTEP[lang].pg3Tab3R1C3}\r\n                      </th>\r\n                      <th className=\"tableTitleEP\" style={{ width: \"20%\" }}>\r\n                        {OUTPUTTEXTEP[lang].pg3Tab3R1C4}\r\n                      </th>\r\n                    </tr>\r\n                    <tr>\r\n                      <td>{OUTPUTTEXTEP[lang].pg3Tab3R2C1}</td>\r\n                      <td className=\"textalignright\">\r\n                        {\r\n                          this.AssetLiabProjs.EstateLiabsByTypeGrowth[\r\n                            ASSET_TAX_TYPE_REAL_ESTATE\r\n                          ]\r\n                        }\r\n                      </td>\r\n                      <td className=\"textalignright\">\r\n                        {/* $\r\n                        {formatMoney(\r\n                          this.AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_REAL_ESTATE],\r\n                          0,\r\n                          \",\",\r\n                          \",\"\r\n                        )} */}\r\n                        {formatMoney2(\r\n                          this.AssetLiabProjs.EstateLiabsByType[\r\n                            ASSET_TAX_TYPE_REAL_ESTATE\r\n                          ],\r\n                          0,\r\n                          lang\r\n                        )}\r\n                      </td>\r\n                      <td className=\"textalignright\">\r\n                        {/* $\r\n                        {formatMoney(\r\n                          this.AssetLiabProjs.EstateLiabsByTypeLE3[\r\n                            ASSET_TAX_TYPE_REAL_ESTATE\r\n                          ],\r\n                          0,\r\n                          \",\",\r\n                          \",\"\r\n                        )} */}\r\n                        {formatMoney2(\r\n                          this.AssetLiabProjs.EstateLiabsByTypeLE3[\r\n                            ASSET_TAX_TYPE_REAL_ESTATE\r\n                          ],\r\n                          0,\r\n                          lang\r\n                        )}\r\n                      </td>\r\n                    </tr>\r\n                    <tr>\r\n                      <td>{OUTPUTTEXTEP[lang].pg3Tab3R3C1}</td>\r\n                      <td className=\"textalignright\">\r\n                        {\r\n                          this.AssetLiabProjs.EstateLiabsByTypeGrowth[\r\n                            ASSET_TAX_TYPE_STOCKS\r\n                          ]\r\n                        }\r\n                      </td>\r\n                      <td className=\"textalignright\">\r\n                        {/* $\r\n                        {formatMoney(\r\n                          this.AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_STOCKS],\r\n                          0,\r\n                          \",\",\r\n                          \",\"\r\n                        )} */}\r\n                        {formatMoney2(\r\n                          this.AssetLiabProjs.EstateLiabsByType[\r\n                            ASSET_TAX_TYPE_STOCKS\r\n                          ],\r\n                          0,\r\n                          lang\r\n                        )}\r\n                      </td>\r\n                      <td className=\"textalignright\">\r\n                        {/* $\r\n                        {formatMoney(\r\n                          this.AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_STOCKS],\r\n                          0,\r\n                          \",\",\r\n                          \",\"\r\n                        )} */}\r\n                        {formatMoney2(\r\n                          this.AssetLiabProjs.EstateLiabsByTypeLE3[\r\n                            ASSET_TAX_TYPE_STOCKS\r\n                          ],\r\n                          0,\r\n                          lang\r\n                        )}\r\n                      </td>\r\n                    </tr>\r\n                    <tr>\r\n                      <td>{OUTPUTTEXTEP[lang].pg3Tab3R4C1}</td>\r\n                      <td className=\"textalignright\">\r\n                        {\r\n                          this.AssetLiabProjs.EstateLiabsByTypeGrowth[\r\n                            ASSET_TAX_TYPE_SMALL_BUS\r\n                          ]\r\n                        }\r\n                      </td>\r\n                      <td className=\"textalignright\">\r\n                        {/* $\r\n                        {formatMoney(\r\n                          this.AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_SMALL_BUS],\r\n                          0,\r\n                          \",\",\r\n                          \",\"\r\n                        )} */}\r\n                        {formatMoney2(\r\n                          this.AssetLiabProjs.EstateLiabsByType[\r\n                            ASSET_TAX_TYPE_SMALL_BUS\r\n                          ],\r\n                          0,\r\n                          lang\r\n                        )}\r\n                      </td>\r\n                      <td className=\"textalignright\">\r\n                        {/* $\r\n                        {formatMoney(\r\n                          this.AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_SMALL_BUS],\r\n                          0,\r\n                          \",\",\r\n                          \",\"\r\n                        )} */}\r\n                        {formatMoney2(\r\n                          this.AssetLiabProjs.EstateLiabsByTypeLE3[\r\n                            ASSET_TAX_TYPE_SMALL_BUS\r\n                          ],\r\n                          0,\r\n                          lang\r\n                        )}\r\n                      </td>\r\n                    </tr>\r\n                    <tr>\r\n                      <td>{OUTPUTTEXTEP[lang].pg3Tab3R5C1}</td>\r\n                      <td className=\"textalignright\">\r\n                        {\r\n                          this.AssetLiabProjs.EstateLiabsByTypeGrowth[\r\n                            ASSET_TAX_TYPE_RRSP\r\n                          ]\r\n                        }\r\n                      </td>\r\n                      <td className=\"textalignright\">\r\n                        {/* $\r\n                        {formatMoney(\r\n                          this.AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_RRSP],\r\n                          0,\r\n                          \",\",\r\n                          \",\"\r\n                        )} */}\r\n                        {formatMoney2(\r\n                          this.AssetLiabProjs.EstateLiabsByType[\r\n                            ASSET_TAX_TYPE_RRSP\r\n                          ],\r\n                          0,\r\n                          lang\r\n                        )}\r\n                      </td>\r\n                      <td className=\"textalignright\">\r\n                        {/* $\r\n                        {formatMoney(\r\n                          this.AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_RRSP],\r\n                          0,\r\n                          \",\",\r\n                          \",\"\r\n                        )} */}\r\n                        {formatMoney2(\r\n                          this.AssetLiabProjs.EstateLiabsByTypeLE3[\r\n                            ASSET_TAX_TYPE_RRSP\r\n                          ],\r\n                          0,\r\n                          lang\r\n                        )}\r\n                      </td>\r\n                    </tr>\r\n                    <tr>\r\n                      <td>{OUTPUTTEXTEP[lang].pg3Tab3R6C1}</td>\r\n                      <td className=\"textalignright\">\r\n                        {\r\n                          this.AssetLiabProjs.EstateLiabsByTypeGrowth[\r\n                            ASSET_TAX_TYPE_INTEREST\r\n                          ]\r\n                        }\r\n                      </td>\r\n                      <td className=\"textalignright\">\r\n                        {/* $\r\n                        {formatMoney(\r\n                          this.AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_INTEREST],\r\n                          0,\r\n                          \",\",\r\n                          \",\"\r\n                        )} */}\r\n                        {formatMoney2(\r\n                          this.AssetLiabProjs.EstateLiabsByType[\r\n                            ASSET_TAX_TYPE_INTEREST\r\n                          ],\r\n                          0,\r\n                          lang\r\n                        )}\r\n                      </td>\r\n                      <td className=\"textalignright\">\r\n                        {/* $\r\n                        {formatMoney(\r\n                          this.AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_INTEREST],\r\n                          0,\r\n                          \",\",\r\n                          \",\"\r\n                        )} */}\r\n                        {formatMoney2(\r\n                          this.AssetLiabProjs.EstateLiabsByTypeLE3[\r\n                            ASSET_TAX_TYPE_INTEREST\r\n                          ],\r\n                          0,\r\n                          lang\r\n                        )}\r\n                      </td>\r\n                    </tr>\r\n                    <tr>\r\n                      <td>{OUTPUTTEXTEP[lang].pg3Tab3R7C1}</td>\r\n                      <td className=\"textalignright\">\r\n                        {\r\n                          this.AssetLiabProjs.EstateLiabsByTypeGrowth[\r\n                            ASSET_TAX_TYPE_OTHER\r\n                          ]\r\n                        }\r\n                      </td>\r\n                      <td className=\"textalignright\">\r\n                        {/* $\r\n                        {formatMoney(\r\n                          this.AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_INTEREST],\r\n                          0,\r\n                          \",\",\r\n                          \",\"\r\n                        )} */}\r\n                        {formatMoney2(\r\n                          this.AssetLiabProjs.EstateLiabsByType[\r\n                            ASSET_TAX_TYPE_OTHER\r\n                          ],\r\n                          0,\r\n                          lang\r\n                        )}\r\n                      </td>\r\n                      <td className=\"textalignright\">\r\n                        {/* $\r\n                        {formatMoney(\r\n                          this.AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_INTEREST],\r\n                          0,\r\n                          \",\",\r\n                          \",\"\r\n                        )} */}\r\n                        {formatMoney2(\r\n                          this.AssetLiabProjs.EstateLiabsByTypeLE3[\r\n                            ASSET_TAX_TYPE_OTHER\r\n                          ],\r\n                          0,\r\n                          lang\r\n                        )}\r\n                      </td>\r\n                    </tr>\r\n                    <tr\r\n                      style={{ backgroundColor: \"#f0f0f5\", textAlign: \"right\" }}\r\n                    >\r\n                      <td colSpan=\"2\">{OUTPUTTEXTEP[lang].pg3Tab3R8C1}</td>\r\n                      <td className=\"textalignright\">\r\n                        {/* ${formatMoney(this.AssetLiabProjs.EstateLiabsByTypeTotal, 0, \",\", \",\")} */}\r\n                        {formatMoney2(\r\n                          this.AssetLiabProjs.EstateLiabsByTypeTotal,\r\n                          0,\r\n                          lang\r\n                        )}\r\n                      </td>\r\n                      <td className=\"textalignright\">\r\n                        {/* ${formatMoney(this.AssetLiabProjs.EstateLiabsByTypeLE3Total, 0, \",\", \",\")} */}\r\n                        {formatMoney2(\r\n                          this.AssetLiabProjs.EstateLiabsByTypeLE3Total,\r\n                          0,\r\n                          lang\r\n                        )}\r\n                      </td>\r\n                    </tr>\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </div>\r\n            <p\r\n              className=\"ppi1\"\r\n              style={{\r\n                color: \"darkgrey\",\r\n                marginTop: \"3px\",\r\n                fontSize: \"12px\",\r\n                float: \"left\",\r\n              }}\r\n            >\r\n              {OUTPUTTEXTEP[lang].pg3P4}\r\n              <br />\r\n              {OUTPUTTEXTEP[lang].pg3P5}\r\n            </p>\r\n          </div>\r\n\r\n          {logoBottom}\r\n          \r\n          {/* PAGE 4 fin situation*/}\r\n          <div style={styleWithLogo}>\r\n          {logoTop}\r\n            {/* {allPages && (\r\n              <AdjustibleImage\r\n                image={this.props.dataInput.Presentations[0].adviserLogo.image}\r\n                showDetails={false}\r\n                size={this.props.dataInput.Presentations[0].adviserLogo.size}\r\n                imageLeft={\r\n                  this.props.dataInput.Presentations[0].adviserLogo.left\r\n                }\r\n                allPages={\r\n                  this.props.dataInput.Presentations[0].adviserLogo.allPages\r\n                }\r\n                imageRemove={this.props.imageRemove}\r\n                imageAdjust={this.props.imageAdjust}\r\n              />\r\n            )} */}\r\n            <br />\r\n            <h2 className=\"ppi1\">{OUTPUTTEXTEP[lang].pg4T}</h2>\r\n            <p className=\"ppi1\">{OUTPUTTEXTEP[lang].pg4P1}</p>\r\n          </div>\r\n\r\n          {\r\n            (loaded === true && (\r\n              <OutputGraphStacked\r\n                language={lang}\r\n                dataAges={dataAges}\r\n                dataAssetnEstateLiabProj={this.AssetLiabProjs.AssetnEstateLiabs}\r\n                LE={LE} //\r\n              />\r\n            ))\r\n          }\r\n\r\n          <p\r\n            className=\"ppi1\"\r\n            style={{\r\n              color: \"darkgrey\",\r\n              marginTop: \"-30px\",\r\n              fontSize: \"12px\",\r\n              float: \"left\",\r\n            }}\r\n          >\r\n            {OUTPUTTEXTEP[lang].pg4P2 + LE + \")\"}\r\n          </p>\r\n\r\n          <p\r\n            className=\"ppi1\"\r\n            style={{\r\n              backgroundColor: \"lightgrey\",\r\n              width: \"84%\",\r\n              marginTop: \"30px\",\r\n              paddingTop: \"10px\",\r\n              paddingBottom: \"12px\",\r\n              marginLeft: \"30px\",\r\n            }}\r\n          >\r\n            {OUTPUTTEXTEP[lang].pg4P3\r\n              .replace(\r\n                \"X1\",\r\n                formatMoney2(\r\n                  this.AssetLiabProjs.EstateLiabsByTypeTotal,\r\n                  0,\r\n                  lang\r\n                )\r\n              )\r\n              .replace(\r\n                \"X2\",\r\n                formatMoney2(\r\n                  this.AssetLiabProjs.EstateLiabsByTypeLE3Total,\r\n                  0,\r\n                  lang\r\n                )\r\n              )}\r\n          </p>\r\n\r\n          <div>\r\n            <OutputGraphsEPLeakage\r\n              insuranceNeed={this.props.insuranceNeed}\r\n              projectEnd={startAge + LE + 3}\r\n              dataEstateLiability={this.props.dataEstateLiability}\r\n              dataInput={this.props.dataInput}\r\n              dataNAAges={dataAges}\r\n              probate={this.props.probate}\r\n              lifeExp={LE}\r\n              lifeExpJLTD={LE}\r\n              lifeExpClient={LE}\r\n              INAOption={this.INAOption}\r\n              //dataShortfall={dataShort}\r\n              //dataAPISite={appSiteAPI}\r\n              LE={this.props.LE}\r\n              assetProjections={this.props.assetProjections}\r\n              showLeakageOnly={true}\r\n              //language={lang}\r\n              //projectTo={this.toRetirement ? 0 : 1}\r\n              //periodOption={DISPLAY_LIFEEXP_PLUS_3}\r\n            />\r\n          </div>\r\n\r\n          {logoBottom}\r\n          \r\n          {/* PAGE 5 Estate Protection Alternatives*/}\r\n\r\n          <div style={styleWithLogo}>\r\n          {logoTop}\r\n            {/* {allPages && (\r\n              <AdjustibleImage\r\n                image={this.props.dataInput.Presentations[0].adviserLogo.image}\r\n                showDetails={false}\r\n                size={this.props.dataInput.Presentations[0].adviserLogo.size}\r\n                imageLeft={\r\n                  this.props.dataInput.Presentations[0].adviserLogo.left\r\n                }\r\n                allPages={\r\n                  this.props.dataInput.Presentations[0].adviserLogo.allPages\r\n                }\r\n                imageRemove={this.props.imageRemove}\r\n                imageAdjust={this.props.imageAdjust}\r\n              />\r\n            )} */}\r\n            <br />\r\n            <h2 className=\"ppi1\">{OUTPUTTEXTEP[lang].pg5T}</h2>\r\n\r\n            {OUTPUTTEXTEP[lang].pg5Paragraphs.map((item) => (\r\n              <p className=\"ppi1\" key={p5++}>\r\n                {p5 >= 4 && p5 !== 8 && p5 <= 12 && (\r\n                  <span style={{ paddingLeft: \"15px\", color: \"#759AC7\" }}>\r\n                    {p5 < 8 ? p5 - 3 : p5 - 8}.{\" \"}\r\n                  </span>\r\n                )}{\" \"}\r\n                {item}\r\n                <br />\r\n              </p>\r\n            ))}\r\n\r\n            <p\r\n              className=\"ppi1\"\r\n              style={{\r\n                backgroundColor: \"lightgrey\",\r\n                width: \"84%\",\r\n                marginTop: \"30px\",\r\n                paddingTop: \"10px\",\r\n                paddingBottom: \"12px\",\r\n                marginLeft: \"30px\",\r\n              }}\r\n            >\r\n              {OUTPUTTEXTEP[lang].pg5Plast}\r\n            </p>\r\n          </div>\r\n\r\n          {logoBottom}\r\n          \r\n          {/* PAGE 6 Using Life Insurance to Preserve Your Estate*/}\r\n\r\n          <div\r\n            style={{ overflowX: \"hidden\", overflowY: \"hidden\", width: \"100%\" }}\r\n          >\r\n            {logoTop}\r\n            {/* {allPages && (\r\n              <AdjustibleImage\r\n                image={this.props.dataInput.Presentations[0].adviserLogo.image}\r\n                showDetails={false}\r\n                size={this.props.dataInput.Presentations[0].adviserLogo.size}\r\n                imageLeft={\r\n                  this.props.dataInput.Presentations[0].adviserLogo.left\r\n                }\r\n                allPages={\r\n                  this.props.dataInput.Presentations[0].adviserLogo.allPages\r\n                }\r\n                imageRemove={this.props.imageRemove}\r\n                imageAdjust={this.props.imageAdjust}\r\n              />\r\n            )}\r\n */}\r\n            <br />\r\n            <h2 className=\"ppi1\">{OUTPUTTEXTEP[lang].pg6T}</h2>\r\n            {OUTPUTTEXTEP[lang].pg6Paragraphs1.map((item) => (\r\n              <p className=\"ppi1\" key={p6++}>\r\n                {p6 >= 4 && p6 <= 6 && (\r\n                  <span style={{ paddingLeft: \"15px\", color: \"#759AC7\" }}>\r\n                    {p6 < 8 ? p6 - 3 : p6 - 8}.{\" \"}\r\n                  </span>\r\n                )}{\" \"}\r\n                {item}\r\n                <br />\r\n              </p>\r\n            ))}\r\n            {/*} don't show for now*/}\r\n            {/* {OUTPUTTEXTEP[lang].pg6Paragraphs2.map(item =>\r\n              (<p className=\"ppi1\" key={p6++}>{p6 > 12 && <span style={{ paddingLeft: '15px', color: '#759AC7' }}>&#8226;  </span>} {item}<br /></p>)\r\n            )} */}\r\n          </div>\r\n\r\n          {logoBottom}\r\n          \r\n          {/* PAGE 7 Summary*/}\r\n\r\n          <div style={styleWithLogo}>\r\n          {logoTop}\r\n            {/* {allPages && (\r\n              <AdjustibleImage\r\n                image={this.props.dataInput.Presentations[0].adviserLogo.image}\r\n                showDetails={false}\r\n                size={this.props.dataInput.Presentations[0].adviserLogo.size}\r\n                imageLeft={\r\n                  this.props.dataInput.Presentations[0].adviserLogo.left\r\n                }\r\n                allPages={\r\n                  this.props.dataInput.Presentations[0].adviserLogo.allPages\r\n                }\r\n                imageRemove={this.props.imageRemove}\r\n                imageAdjust={this.props.imageAdjust}\r\n              />\r\n            )} */}\r\n            <br />\r\n            <h2 className=\"ppi1\">{OUTPUTTEXTEP[lang].pg7T}</h2>\r\n            <p className=\"ppi1\">{OUTPUTTEXTEP[lang].pg7P1}</p>\r\n          </div>\r\n\r\n          {/* PAGE 8 appendix ledgers*/}\r\n\r\n          <div style={styleWithLogoGrids}>\r\n            <br />\r\n            <h2 className=\"ppi1\">{OUTPUTTEXTEP[lang].pg8T}</h2>\r\n\r\n            <p className=\"ppi1\">{OUTPUTTEXTEP[lang].pg8P2}</p>\r\n\r\n            <div style={{ marginLeft: \"24px\" }}>\r\n              <MultiButtons\r\n                noButtons={2}\r\n                buttonCaption={[\r\n                  OUTPUTTEXTEP[lang].pg8O1,\r\n                  OUTPUTTEXTEP[lang].pg8O2,\r\n                ]}\r\n                selected={this.state.showGrids ? 2 : 1}\r\n                selectMultiButton={this.clickMultiButton}\r\n              />\r\n            </div>\r\n            <div\r\n              id=\"assetGrid\"\r\n              style={{\r\n                clear: \"both\",\r\n                float: \"left\",\r\n                marginLeft: \"25px\",\r\n              }} /*    onClick={this.clone2}  */\r\n            >\r\n              {this.state.showGrids &&\r\n                this.AssetLiabProjs.projectionsGrids.map((grid) => {\r\n                  //console.log(grid.dataColTitles)\r\n                  return (\r\n                    <DataTable\r\n                      key={j++}\r\n                      dataColTitles={grid.dataColTitles}\r\n                      dataProjection={grid.dataProjection}\r\n                      gridTitle={grid.gridTitle}\r\n                      gridIcons={[]}\r\n                      specialRow={LE - startAge}\r\n                      language={lang}\r\n                    />\r\n                  );\r\n                })}\r\n            </div>\r\n          </div>\r\n\r\n          {logoBottom}\r\n          \r\n          {/* PAGE 9 notes*/}\r\n\r\n          <div style={styleWithLogo}>\r\n          {logoTop}\r\n            {/* {allPages && (\r\n              <AdjustibleImage\r\n                image={this.props.dataInput.Presentations[0].adviserLogo.image}\r\n                showDetails={false}\r\n                size={this.props.dataInput.Presentations[0].adviserLogo.size}\r\n                imageLeft={\r\n                  this.props.dataInput.Presentations[0].adviserLogo.left\r\n                }\r\n                allPages={\r\n                  this.props.dataInput.Presentations[0].adviserLogo.allPages\r\n                }\r\n                imageRemove={this.props.imageRemove}\r\n                imageAdjust={this.props.imageAdjust}\r\n              />\r\n            )} */}\r\n            <br />\r\n            <h2 className=\"ppi1\">{OUTPUTTEXTEP[lang].pg9T}</h2>\r\n\r\n            <p className=\"ppi1\">{OUTPUTTEXTEP[lang].pg9P1}</p>\r\n            <p className=\"ppi1\">{OUTPUTTEXTEP[lang].pg9P2}</p>\r\n\r\n            {logoBottom}\r\n          \r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport {\r\n  OUTPUTTITLE,\r\n  TITLES,\r\n  MEMBER,\r\n  MAX_ORPHAN_DUR_QC,\r\n  MAX_ORPHAN_DUR_NON_QC,\r\n  ORPHAN_AGE_QC,\r\n  ORPHAN_AGE_NON_QC,\r\n  PROVINCE,\r\n  IMAGE_LOGO,\r\n  IMAGE_LOGO_OTHERPAGES,\r\n  IMAGE_APPLET_INA\r\n} from \"../definitions/generalDefinitions\";\r\nimport { OUTPUTTEXT } from \"../definitions/outputDefinitions\";\r\nimport {\r\n  getListItemNameFromKey,\r\n  formatMoney,\r\n  getListItemKeyFromName,\r\n  cleanFormat,\r\n  isSingleFamily,\r\n  getName,\r\n  formatted\r\n} from \"../utils/helper\";\r\nimport { getOutputValues } from \"../data/dataExchange\";\r\n\r\nimport {\r\n  PDF,\r\n  InToPt,\r\n  PxToPt,\r\n  HELVETICA,\r\n  TIMES,\r\n  NORMAL,\r\n  BOLD,\r\n  ITALIC,\r\n} from \"./PDF\";\r\n\r\nconst DISPLAY_INCOME = 1;\r\nconst DISPLAY_TAXLIAB = 2;\r\n\r\nconst LINE_CHART_DIV_ID = \"bar1\";\r\nconst LINE_CHART_DIV2_ID = \"lineChartDiv2\";\r\n\r\nconst LINE_CHART_DIV_STYLE = {\r\n  marginTop: \"65px\",\r\n  marginLeft: \"64px\",\r\n  marginBottom: \"64px\",\r\n  height: \"192px\",\r\n  width: \"384px\",\r\n};\r\n\r\nconst LINE_CHART_DIV2_STYLE = {\r\n  marginTop: \"65px\",\r\n  marginLeft: \"64px\",\r\n  marginBottom: \"64px\",\r\n  height: \"192px\",\r\n  width: \"384px\",\r\n};\r\n\r\nconst TOP_MARGIN = 0.48;\r\nconst PARA_WIDTH = 5.5;\r\n\r\n\r\nasync function getSpouseINA(props)\r\n{\r\n  let data;\r\n  data= await props.getSpouseINA();\r\n  const spouseInsRet=data.dataOutput.dataInsuranceNeeds[0].Value;\r\n  const spouseInsLE=data.dataOutput.dataInsuranceNeeds[1].Value;\r\n  const LESpouse=data.dataOutput.lifeExpectancy.spouse+data.dataInput.Clients[1].Age\r\n\r\n  return {spouseInsRet:spouseInsRet,spouseInsLE:spouseInsLE, LESpouse:LESpouse};\r\n}\r\n\r\nfunction formattedMoneyString(value,lang){\r\n  return formatted(value,lang).toString()\r\n}\r\n\r\n\r\n\r\nexport async function doSavePdfAction(props) {\r\n  let pdf = new PDF();\r\n  pdf.Create();\r\n\r\n  // pdf.ShowGrids = false;\r\n\r\n  var htmlElement;\r\n  var paragraph;\r\n\r\n  // pdf output shared with presentation\r\n  let output = getOutputValues(props);\r\n  const lang = props.dataInput.Presentations[0].language;\r\n  const provinceKey = getListItemKeyFromName(PROVINCE, output.province);\r\n  let maxDur = provinceKey === \"QC\" ? MAX_ORPHAN_DUR_QC : MAX_ORPHAN_DUR_NON_QC;\r\n  let orphAge = provinceKey === \"QC\" ? ORPHAN_AGE_QC : ORPHAN_AGE_NON_QC;\r\n  const clients = props.dataInput.Clients;\r\n  const assets = props.dataInput.Assets;\r\n  const singleFamily = isSingleFamily(clients);\r\n  const labelsBilingual = OUTPUTTEXT[lang];\r\n\r\n  const decimalChar = lang === \"en\" ? \".\" : \",\";\r\n  const thousands = lang === \"en\" ? \",\" : \" \";\r\n  const formatFr = lang === \"fr\" ? true : false;\r\n\r\n\r\n  // are there two need periods eg when children this or that\r\n  const twoNeedPercents = output.percent2.length > 0 ? true : false;\r\n  const pg1TitleY = 4.2;\r\n  // Page 1\r\n  pdf.SetFont(HELVETICA, NORMAL);\r\n  if (lang === \"en\") pdf.SetFontSize(PxToPt(36));\r\n  else pdf.SetFontSize(PxToPt(24));\r\n  pdf.SetTextColor(0x45, 0x55, 0x60);\r\n  pdf.Text(\r\n    props.INAOption === DISPLAY_INCOME\r\n      ? TITLES[lang].appletINA\r\n      : TITLES[lang].appletEP,\r\n    InToPt(1.5),\r\n    InToPt(pg1TitleY) //3.5)\r\n  );\r\n  /* \r\n  pdf.AddImageFitWidthOnly(\r\n    \"INAPage1Logo\",\r\n    InToPt(1.51), //1.51),\r\n    InToPt(1.06),\r\n    InToPt(5.54),\r\n    InToPt(2.76) // max height\r\n  ); */\r\n  const image = props.dataInput.Presentations[0].adviserLogo;\r\n  const top = props.dataInput.Presentations[0].adviserLogo.top;\r\n  const pg1ImageID=props.dataInput.Presentations[0].adviserLogo.ID;\r\n\r\n  const imageApp = props.dataInput.Presentations[0].appletImage;\r\n  \r\n  let result;\r\n  result=pdf.addCustomImage(IMAGE_LOGO, pg1TitleY, image, true,top);\r\n\r\n  //result=pdf.addCustomImage(IMAGE_APPLET_INA, InToPt(pg1TitleY + 0.5), imageApp, true,top);\r\n    pdf.AddImage(\r\n    IMAGE_APPLET_INA,\r\n    InToPt(1.51),\r\n    InToPt(pg1TitleY + 0.5), //4.06),\r\n    InToPt(5.54),\r\n    InToPt(2.75)\r\n  ); \r\n   //\tconsole.log(output.clients);\r\n  //\tconsole.log(OUTPUTTEXT[lang].pg1P1);\r\n\r\n  pdf.SetFont(HELVETICA, NORMAL);\r\n  pdf.SetFontSize(PxToPt(18));\r\n  pdf.SetTextColor(0x45, 0x55, 0x60);\r\n  pdf.Text(\r\n    OUTPUTTEXT[lang].pg1P1 + output.designedFor,\r\n    InToPt(1.52),\r\n    InToPt(pg1TitleY + 3.63) //7.13\r\n  );\r\n  pdf.Text(\r\n    OUTPUTTEXT[lang].pg1P2 + output.designedBy,\r\n    InToPt(1.52),\r\n    InToPt(pg1TitleY + 4.13) //7.63)\r\n  );\r\n  pdf.Text(\r\n    OUTPUTTEXT[lang].pg1P3 + output.dateApplet,\r\n    InToPt(1.52),\r\n    InToPt(pg1TitleY + 4.42) //7.92)\r\n  );\r\n  pdf.Text(\r\n    OUTPUTTEXT[lang].pg1P4 + output.province,\r\n    InToPt(1.52),\r\n    InToPt(pg1TitleY + 4.69) //8.19)\r\n  );\r\n\r\n  \r\n\r\n  const headerOffset = image.image === null ? 0 : 0.25;\r\n  const topToTitle_Y  =1.35\r\n  const titleToPara_Y  =1.6\r\n  \r\n  const topMargin = pdf.HEADER_RECT_IN_Y + headerOffset;\r\n  {\r\n    /*---}\t\t\t// Page 2*/\r\n    const footerText = OUTPUTTEXT[lang].pgFooter;\r\n    const headerText = OUTPUTTEXT[lang].pg1T;\r\n    \r\n    pdf.addFooterAndHeader(headerOffset, footerText, headerText);\r\n\r\n    result=result && pdf.addCustomImage(IMAGE_LOGO_OTHERPAGES, pg1TitleY, image,false,top);\r\n\r\n    pdf.SetFont(HELVETICA, NORMAL);\r\n    if (lang === \"en\") pdf.SetFontSize(PxToPt(25));\r\n    else pdf.SetFontSize(PxToPt(20));\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    pdf.Text(\r\n      OUTPUTTITLE[lang].Values[0],\r\n      InToPt(1.5),\r\n      InToPt(headerOffset + topToTitle_Y)\r\n    );\r\n\r\n    pdf.SetFont(TIMES, NORMAL);\r\n    pdf.SetFontSize(PxToPt(16));\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n\r\n    // profile table\r\n    let x = 1.5;\r\n    let y = headerOffset + titleToPara_Y;\r\n    let incY = 0.4;\r\n    let incTableY = 0.25;\r\n    const incColourdRowsY= incTableY + 0.08;\r\n    let height = 0.35;\r\n    const val = singleFamily\r\n      ? labelsBilingual.pg2TabT4Alt\r\n      : labelsBilingual.pg2TabT4;\r\n    let values = [\r\n      OUTPUTTEXT[lang].pg2TabT1,\r\n      OUTPUTTEXT[lang].pg2TabT2,\r\n      OUTPUTTEXT[lang].pg2TabT3,\r\n      val,\r\n      OUTPUTTEXT[lang].pg2TabT5,\r\n    ];\r\n    let fill = [115, 153, 198];\r\n    let textColor = [255, 255, 255];\r\n    let Widths = [2.3, 0.5, .9, .9,.8]; // add up to PARA_WIDTH=5.5\r\n    if(lang===\"fr\") Widths = [2.0, 0.4, .85, .75,1.4];\r\n    pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n\r\n    \r\n    y += incY+.2;\r\n    fill = [255, 255, 255];\r\n    textColor = [0x45, 0x55, 0x60];\r\n    output.clients.forEach(function (element) {\r\n      \r\n      const len=(getListItemNameFromKey(MEMBER, element.memberKey, lang) + getName(element.name,lang)).length\r\n      values = [\r\n        len>26?getListItemNameFromKey(MEMBER, element.memberKey, lang) :getListItemNameFromKey(MEMBER, element.memberKey, lang) + getName(element.name,lang),\r\n        element.age.toString(),\r\n        formattedMoneyString(element.income,lang)\r\n        /* \"$\" +\r\n          formatMoney(\r\n           element.income,\r\n            0,\r\n            decimalChar,\r\n            thousands\r\n          ) */,\r\n        (singleFamily\r\n          ? (element.memberKey === MEMBER.CLIENT.Key\r\n            ? \"-\"\r\n            : element.ret-element.age) //protectionPeriod\r\n          : element.ret).toString(),\r\n        (clients[element.id - 1].avgTaxRate + \"%\").toString(),\r\n      ];\r\n      pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n      y += incTableY;\r\n      if(len>26){\r\n        values= [\r\n          getName(element.name,lang),\r\n          \"\",\r\n          \"\",\r\n          \"\",\r\n          \"\",\r\n        ];\r\n        pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n        y += incTableY;\r\n    \r\n      }\r\n    });\r\n\r\n    // fin. summary table\r\n    pdf.SetFont(TIMES, NORMAL);\r\n    pdf.SetFontSize(PxToPt(16));\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n\r\n    y += incTableY-.05;\r\n    fill = [115, 153, 198];\r\n    textColor = [255, 255, 255];\r\n    Widths = [4.3, 1.2]; // add up to PARA_WIDTH=5.5\r\n    let values2 = [OUTPUTTEXT[lang].pg2T3, \"\"];\r\n\r\n    pdf.tableRow(fill, textColor, x, y, values2, height, Widths);\r\n\r\n    fill = [255, 255, 255];\r\n    textColor = [0x45, 0x55, 0x60];\r\n    values2 = [\r\n      OUTPUTTEXT[lang].pg2P5,\r\n      (\r\n        formattedMoneyString(output.totalAssetExcludeInsurance,lang)\r\n        /* \"$\" +\r\n        formatMoney(\r\n          output.totalAssetExcludeInsurance,\r\n          0,\r\n          decimalChar,\r\n          thousands\r\n        ) */\r\n      ),\r\n    ];\r\n    y += incY;\r\n    pdf.tableRow(fill, textColor, x, y, values2, height, Widths);\r\n    values2 = [\r\n      OUTPUTTEXT[lang].pg2P6,\r\n      (\r\n        formattedMoneyString(output.totalLiabExcludeDeathRelated,lang)\r\n        /* \r\n        \"$\" +\r\n        formatMoney(\r\n          output.totalLiabExcludeDeathRelated,\r\n          0,\r\n          decimalChar,\r\n          thousands\r\n        ) */\r\n      ),\r\n    ];\r\n    y += incTableY;\r\n    pdf.tableRow(fill, textColor, x, y, values2, height, Widths);\r\n    values2 = OUTPUTTEXT[lang].pg2P7;\r\n    y += incTableY;\r\n    pdf.tableRowSingle(fill, textColor, x+2.8, y, values2, height, Widths,false);\r\n    \r\n    values2 =\r\n      (\r\n        formattedMoneyString(output.totalAssetExcludeInsurance -\r\n          output.totalLiabExcludeDeathRelated,lang)\r\n        \r\n        /* \"$\" +\r\n        formatMoney(\r\n          output.totalAssetExcludeInsurance -\r\n            output.totalLiabExcludeDeathRelated,\r\n          0,\r\n          decimalChar,\r\n          thousands\r\n        ) */\r\n      );\r\n    fill = [196, 223, 224];\r\n    pdf.tableRowSingle(fill, textColor, x+4.3, y, values2, height, Widths, true);\r\n    \r\n    //pdf.tableRow(fill, textColor, x+4.3, y+.065, values2, height-.10, [1.2]);\r\n    fill = [255, 255, 255];\r\n    const govDB=formattedMoneyString(output.totalAssetInsurance+output.govDB,lang);\r\n    values2 = [\r\n      OUTPUTTEXT[lang].pg2P8.replace(\"yyy\",govDB), \r\n      (\r\n        govDB\r\n      ),\r\n    ];\r\n    y += incColourdRowsY;\r\n    pdf.tableRow(fill, textColor, x, y, values2, height, Widths);\r\n\r\n    values2 = [\r\n      OUTPUTTEXT[lang].pg2P9,\r\n      (\r\n        formattedMoneyString(output.totalLiab - output.totalLiabExcludeDeathRelated,lang)\r\n        \r\n        /* \"$\" +\r\n        formatMoney(\r\n          output.totalLiab - output.totalLiabExcludeDeathRelated,\r\n          0,\r\n          decimalChar,\r\n          thousands\r\n        ) */\r\n      ),\r\n    ];\r\n    y += incTableY;\r\n    pdf.tableRow(fill, textColor, x, y, values2, height, Widths);\r\n    pdf.DrawLine(InToPt(1.5), InToPt(y + incY), InToPt(PARA_WIDTH));\r\n\r\n    // ins\r\n    y += 1.2*incY;\r\n    values2 =  OUTPUTTEXT[lang].pg2P10 + getName(clients[0].Name,lang) +\":\"\r\n    pdf.tableRowSingle(fill, textColor, x, y, values2, height, [PARA_WIDTH],false);\r\n    \r\n    if(!singleFamily)\r\n    {\r\n    values2 = [\r\n      OUTPUTTEXT[lang].pg8TabRow3 + props.LE + \")\",\r\n      \"\"\r\n    ];\r\n    y += incColourdRowsY;\r\n    pdf.tableRow(fill, textColor, x, y, values2, height, Widths);\r\n\r\n    values2 = (\r\n      formattedMoneyString(output.insNeedLE,lang)\r\n        \r\n      /* \"$\" + formatMoney(output.insNeedLE, 0, decimalChar, thousands) */)\r\n    fill = [196, 223, 224];\r\n    pdf.tableRowSingle(fill, textColor, x+4.3, y, values2, height, Widths, true);\r\n\r\n  }\r\n   \r\n  //pdf.tableRow(fill, textColor, x+4.3, y+.065, values2, height-.10, [1.2]);\r\n    fill = [255, 255, 255];\r\n    \r\n    values2 = [\r\n      singleFamily? OUTPUTTEXT[lang].pg8TabRow4Alt.replace(\"A. \",\"\"): OUTPUTTEXT[lang].pg8TabRow4\r\n      \r\n      ,\r\n      \"\",\r\n    ];\r\n    y += incColourdRowsY;\r\n    pdf.tableRow(fill, textColor, x, y, values2, height, Widths);\r\n    \r\n    values2 =(\r\n      formattedMoneyString(output.insNeedRet,lang)\r\n        /* \"$\" + formatMoney(output.insNeedRet, 0, decimalChar, thousands) */)\r\n    fill = [196, 223, 224];\r\n    pdf.tableRowSingle(fill, textColor, x+4.3, y, values2, height, Widths, true);\r\n    fill = [255, 255, 255];\r\n    \r\n    // spouse ins\r\n    if(!singleFamily)\r\n    {\r\n        const spouseSwitched= await getSpouseINA(props)\r\n        const spouseInsRet=cleanFormat(spouseSwitched.spouseInsRet, lang);\r\n        const spouseInsLE=cleanFormat(spouseSwitched.spouseInsLE, lang);\r\n        const LESpouse=spouseSwitched.LESpouse\r\n        pdf.DrawLine(InToPt(1.5), InToPt(y + incY), InToPt(PARA_WIDTH));\r\n    \r\n\r\n        y += 1.2*incY;\r\n        pdf.tableRow(fill, textColor, x, y, [OUTPUTTEXT[lang].pg2P12], height, Widths);\r\n   \r\n        y += 1.35*incY;\r\n        \r\n        values2 =  [OUTPUTTEXT[lang].pg2P11.replace(lang===\"en\"?\" NAME\":\" NOM\", getName(clients[1].Name,lang)) ,\r\n          (\r\n            formattedMoneyString(output.totalAssetInsuranceIfSpouse+output.govDB,lang)\r\n            /*  \"$\" +\r\n            formatMoney(\r\n              output.totalAssetInsuranceIfSpouse+output.govDB,              \r\n              0,\r\n              decimalChar,\r\n              thousands\r\n            ) */\r\n          )]\r\n\r\n          pdf.tableRow(fill, textColor, x, y, values2, height, Widths);\r\n        \r\n        values2 = [\r\n          OUTPUTTEXT[lang].pg8TabRow3 + LESpouse + \")\",\r\n          \"\"\r\n        ];\r\n        y += incColourdRowsY;\r\n        pdf.tableRow(fill, textColor, x, y, values2, height, Widths);\r\n    \r\n        values2 = (\r\n          formattedMoneyString(spouseInsLE,lang)\r\n        /* \"$\" + formatMoney( spouseInsLE, 0, decimalChar, thousands) */)\r\n        fill = [196, 223, 224];\r\n        pdf.tableRowSingle(fill, textColor, x+4.3, y, values2, height, Widths, true);\r\n    \r\n      \r\n      //pdf.tableRow(fill, textColor, x+4.3, y+.065, values2, height-.10, [1.2]);\r\n        fill = [255, 255, 255];\r\n        \r\n        values2 = [\r\n          OUTPUTTEXT[lang].pg8TabRow4\r\n          ,\r\n          \"\",\r\n        ];\r\n        y += incColourdRowsY;\r\n        pdf.tableRow(fill, textColor, x, y, values2, height, Widths);\r\n        \r\n        values2 =(\r\n          formattedMoneyString(spouseInsRet,lang)\r\n        /* \"$\" + formatMoney( spouseInsRet, 0, decimalChar, thousands) */)\r\n        fill = [196, 223, 224];\r\n        pdf.tableRowSingle(fill, textColor, x+4.3, y, values2, height, Widths, true);\r\n        fill = [255, 255, 255];\r\n      \r\n\r\n    }\r\n\r\n\r\n\r\n    // if more than 5 clients move\r\n    if(output.clients.length>lang===\"en\"?4:3){\r\n      pdf.addFooterAndHeader(headerOffset, footerText, headerText);\r\n      /* extra assump PAGE */\r\n      result=result && pdf.addCustomImage(IMAGE_LOGO_OTHERPAGES, pg1TitleY, image,false,top);\r\n      pdf.SetFont(HELVETICA, NORMAL);\r\n      if (lang === \"en\") pdf.SetFontSize(PxToPt(25));\r\n      else pdf.SetFontSize(PxToPt(20));\r\n      pdf.SetFont(TIMES, NORMAL);\r\n      pdf.SetFontSize(PxToPt(16));\r\n      x = 1.5;\r\n      y = headerOffset + titleToPara_Y-.3;\r\n      incY = 0.44;\r\n      height = 0.35;\r\n\r\n    }\r\n    else\r\n      y += 2*incTableY;\r\n    \r\n    // assump table\r\n    pdf.SetFont(TIMES, NORMAL);\r\n    pdf.SetFontSize(PxToPt(16));\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n\r\n    //  pdf.DrawLine(InToPt(1.5), InToPt(y - 0.13), InToPt(PARA_WIDTH));\r\n    // y += .3*incY;\r\n    fill = [115, 153, 198];\r\n    textColor = [255, 255, 255];\r\n    Widths = [4.9, 0.6]; // add up to PARA_WIDTH=5.5\r\n    values2 = [OUTPUTTEXT[lang].pg2T2, \"\"];\r\n\r\n    pdf.tableRow(fill, textColor, x, y, values2, height, Widths);\r\n\r\n    fill = [255, 255, 255];\r\n    textColor = [0x45, 0x55, 0x60];\r\n    values2 = [OUTPUTTEXT[lang].pg7TabRow4, (output.infRate + \"%\").toString()];\r\n    y += incY;\r\n    pdf.tableRow(fill, textColor, x, y, values2, height, Widths);\r\n    values2 = [OUTPUTTEXT[lang].pg7TabRow5, (output.invRate + \"%\").toString()];\r\n    y += incTableY;\r\n    pdf.tableRow(fill, textColor, x, y, values2, height, Widths);\r\n\r\n    values2 = [\r\n      OUTPUTTEXT[lang].pg2TabT6,\r\n      (\r\n        parseFloat(props.dataInput.Presentations[0].taxRate).toFixed(2) + \"%\"\r\n      ).toString(),\r\n    ];\r\n    y += incTableY;\r\n    pdf.tableRow(fill, textColor, x, y, values2, height, Widths);\r\n\r\n    pdf.SetFont(TIMES, NORMAL);\r\n    pdf.SetFontSize(PxToPt(16));\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n\r\n    y += 2 * incY-.07;\r\n    pdf.DrawLine(InToPt(1.5), InToPt(y - 0.35), InToPt(PARA_WIDTH));\r\n   // y += 0.7 * incY;\r\n\r\n    paragraph = OUTPUTTEXT[lang].pg2Tab2;\r\n    pdf.MultilineText(paragraph, InToPt(1.5), InToPt(y), InToPt(5.6));\r\n\r\n    y += incY -.05;\r\n    paragraph = OUTPUTTEXT[lang].pg2Tab3;\r\n    pdf.MultilineText(paragraph, InToPt(1.5), InToPt(y), InToPt(5.6));\r\n    \r\n    /* // notes\r\n    pdf.SetFont(TIMES, NORMAL);\r\n    pdf.SetFontSize(PxToPt(16));\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n\r\n    y += 2.8 * incY;\r\n    fill = [115, 153, 198];\r\n    textColor = [255, 255, 255];\r\n    Widths = [4.9, 0.6]; // add up to PARA_WIDTH=5.5\r\n    values2 = [OUTPUTTEXT[lang].pg9T, \"\"];\r\n\r\n    pdf.tableRow(fill, textColor, x, y, values2, height, Widths);\r\n\r\n    y += 1.6 * incY;\r\n    paragraph = OUTPUTTEXT[lang].pg9P1;\r\n    pdf.SetFont(TIMES, NORMAL);\r\n    pdf.SetFontSize(PxToPt(16));\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    pdf.MultilineText(paragraph, InToPt(1.5), InToPt(y), InToPt(PARA_WIDTH));\r\n */\r\n    /* \tvalues = [\"Client\", \"$70,000\", \"65\"];\r\n\t\t\ty += incY;\t\r\n\t\t\tpdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n\t\t\tvalues = [\"Spouse\", \"$50,000\", \"65\"];\r\n\t\t\ty +=incY;\r\n\t\t\tpdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n\t\t  */\r\n\r\n    //pdf.SetFillColor(255, 255, 255);\r\n    //pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    //pdf.Rectangle(InToPt(1.5), InToPt(2), InToPt(1.8), InToPt(0.4));\r\n    //pdf.Text(\"Client\", InToPt(1.61), InToPt(2.25));\r\n    //pdf.SetFillColor(255, 255, 255);\r\n    //pdf.Rectangle(InToPt(3.32), InToPt(2), InToPt(1.8), InToPt(0.4));\r\n    //pdf.Text(\"$70,000\", InToPt(3.43), InToPt(2.25));\r\n    //pdf.SetFillColor(255, 255, 255);\r\n    //pdf.Rectangle(InToPt(5.14), InToPt(2), InToPt(1.8), InToPt(0.4));\r\n    //pdf.Text(\"65\", InToPt(5.25), InToPt(2.25));\r\n\r\n    //pdf.SetFillColor(255, 255, 255);\r\n    //pdf.Rectangle(InToPt(1.5), InToPt(2.5), InToPt(1.8), InToPt(0.4));\r\n    //pdf.Text(\"Spouse\", InToPt(1.61), InToPt(2.75));\r\n    //pdf.SetFillColor(255, 255, 255);\r\n    //pdf.Rectangle(InToPt(3.32), InToPt(2.5), InToPt(1.8), InToPt(0.4));\r\n    //pdf.Text(\"$50,000\", InToPt(3.43), InToPt(2.75));\r\n    //pdf.SetFillColor(255, 255, 255);\r\n    //pdf.Rectangle(InToPt(5.14), InToPt(2.5), InToPt(1.8), InToPt(0.4));\r\n    //pdf.Text(\"65\", InToPt(5.25), InToPt(2.75));\r\n\r\n    //\t// Page 3\r\n//    pdf.AddPage();\r\n  //  pdf.Header(headerText, headerOffset);\r\n\r\n    pdf.addFooterAndHeader(headerOffset, footerText, headerText);\r\n\r\n    {\r\n      /* PAGE 3 Family Cash Needs at Death*/\r\n    }\r\n\r\n    // combine 2 and 3\r\n    // logo if asked for\r\n    result=result && pdf.addCustomImage(IMAGE_LOGO_OTHERPAGES, pg1TitleY, image,false,top);\r\n\r\n    pdf.SetFont(HELVETICA, NORMAL);\r\n    if (lang === \"en\") pdf.SetFontSize(PxToPt(25));\r\n    else pdf.SetFontSize(PxToPt(20));\r\n\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    pdf.Text(OUTPUTTEXT[lang].pg3T, InToPt(1.5), InToPt(headerOffset + topToTitle_Y\r\n  ));\r\n\r\n    paragraph = OUTPUTTEXT[lang].pg3P1;\r\n    pdf.SetFont(TIMES, NORMAL);\r\n    pdf.SetFontSize(PxToPt(16));\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    pdf.MultilineText(\r\n      paragraph,\r\n      InToPt(1.5),\r\n      InToPt(headerOffset + 1.8),\r\n      InToPt(PARA_WIDTH)\r\n    );\r\n\r\n    x = 1.5;\r\n    y = headerOffset + 2.5;\r\n    incY = 0.4;\r\n    height = 0.35;\r\n    Widths = [4.3, 1.2]; // add up to PARA_WIDTH=5.5\r\n\r\n    values = [OUTPUTTEXT[lang].pg3TabT];\r\n    fill = [115, 153, 198];\r\n    textColor = [255, 255, 255];\r\n    pdf.tableRow(fill, textColor, x, y, values, height, [PARA_WIDTH]);\r\n\r\n    fill = [255, 255, 255];\r\n    textColor = [0x45, 0x55, 0x60];\r\n\r\n    y += incY;\r\n    output.liabilities.forEach(function (element) {\r\n      values = [\r\n        element.name,\r\n        (\r\n          formattedMoneyString(element.value,lang)\r\n        /* \"$\" + formatMoney(element.value, 0, decimalChar, thousands) */\r\n        ),\r\n      ];\r\n      pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n      y += incTableY;\r\n    });\r\n    y -= incTableY;\r\n    values = [\r\n      OUTPUTTEXT[lang].pg3TabRTot,\r\n      (\r\n        formattedMoneyString(output.totalLiab,lang)\r\n        /* \"$\" + formatMoney(output.totalLiab, 0, decimalChar, thousands) */\r\n      ),\r\n    ];\r\n    y += incY;\r\n    pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n    pdf.DrawLine(InToPt(1.5), InToPt(y), InToPt(PARA_WIDTH));\r\n\r\n    // pdf.addFooterAndHeader(headerOffset,footerText, headerText);\r\n\r\n    {\r\n      /* PAGE 4 Family Income Needs at Death*/\r\n    }\r\n    // pdf.addCustomImageIMAGE_LOGO_OTHERPAGES, pg1TitleY, image);\r\n\r\n    // combined with page 3\r\n    /*    pdf.SetFont(HELVETICA, NORMAL);\r\n    if (lang === \"en\") pdf.SetFontSize(PxToPt(25));\r\n    else pdf.SetFontSize(PxToPt(20));\r\n\r\n     pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    pdf.Text(OUTPUTTEXT[lang].pg4T, InToPt(1.5), InToPt(topToTitle_Y\r\n  ));\r\n    \r\n    paragraph = OUTPUTTEXT[lang].pg4P1;\r\n    pdf.SetFont(TIMES, NORMAL);\r\n    pdf.SetFontSize(PxToPt(16));\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    pdf.MultilineText(paragraph, InToPt(1.5), InToPt(headerOffset+topToTitle_Y\r\n  ), InToPt(PARA_WIDTH));\r\n/ / this is already in pg 3 so no para here\r\n*/\r\n    x = 1.5;\r\n    //   y = headerOffset+1.65;//2.3; don't go down\r\n    y += incY;\r\n    //incY = 0.44;\r\n    height = 0.35;\r\n    //const Widths = 5;\r\n\r\n    values = [OUTPUTTEXT[lang].pg4TabT];\r\n    fill = [115, 153, 198];\r\n    textColor = [255, 255, 255];\r\n    pdf.tableRow(fill, textColor, x, y, values, height, [PARA_WIDTH]);\r\n\r\n    fill = [255, 255, 255];\r\n    textColor = [0x45, 0x55, 0x60];\r\n\r\n    values = [\r\n      OUTPUTTEXT[lang].pg4TabRow1,\r\n      (\r\n        formattedMoneyString(output.Income + output.Income2,lang)\r\n        /* \"$\" +\r\n        formatMoney(output.Income + output.Income2, 0, decimalChar, thousands) */\r\n      ),\r\n    ];\r\n    y += incY;\r\n    pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n\r\n    y += incY;\r\n    pdf.MultilineText(\r\n      OUTPUTTEXT[lang].pg4TabRow2,\r\n      InToPt(x + 0.1),\r\n      InToPt(y + incY),\r\n      InToPt(3)\r\n    );\r\n\r\n    //values = [OUTPUTTEXT[lang].pg4TabRow2,\"\"];\r\n    y += incY - 0.3;\r\n    pdf.DrawLine(InToPt(1.5), InToPt(y - 0.13), InToPt(PARA_WIDTH));\r\n\r\n    //pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n\r\n    if (twoNeedPercents) {\r\n      values = [\r\n        OUTPUTTEXT[lang].pgTabRowMoreIncome,\r\n        (output.percent1 + \"%\").toString(),\r\n      ];\r\n      y += 2.1 * incY;\r\n      pdf.DrawLine(InToPt(1.5), InToPt(y), InToPt(PARA_WIDTH));\r\n      pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n\r\n      values = [\r\n        OUTPUTTEXT[lang].pgTabRowThereAfter,\r\n        //(output.percent2 + \"%\").toString(),\r\n        (output.percent2.map((item) => item + \"% \")).toString(),\r\n      ];\r\n      y += incTableY;\r\n      pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n      //    pdf.DrawLine(InToPt(1.5), InToPt(y), InToPt(PARA_WIDTH));\r\n    } else {\r\n      values = [\r\n        OUTPUTTEXT[lang].pgTabRowThereAfter,\r\n        (output.percent1 + \"%\").toString(),\r\n      ];\r\n      y += 2.1 * incY;\r\n      pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n      //  pdf.DrawLine(InToPt(1.5), InToPt(y), InToPt(PARA_WIDTH));\r\n    }\r\n    values = [OUTPUTTEXT[lang].pg4TabRow5, \"\"];\r\n    y += 1.5 * incY;\r\n    pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n    //pdf.DrawLine(InToPt(1.5), InToPt(y), InToPt(PARA_WIDTH));\r\n\r\n    if (twoNeedPercents) {\r\n      values = [\r\n        OUTPUTTEXT[lang].pgTabRowMoreIncome,\r\n        (\r\n          formattedMoneyString(output.percentNeed1,lang)\r\n        /* \"$\" + formatMoney(output.percentNeed1, 0, decimalChar, thousands) */\r\n        ),\r\n      ];\r\n      y += incY;\r\n      pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n      pdf.DrawLine(InToPt(1.5), InToPt(y), InToPt(PARA_WIDTH));\r\n\r\n      values = [\r\n        OUTPUTTEXT[lang].pgTabRowThereAfter,\r\n        (\r\n          formattedMoneyString(output.percentNeed2.reduce((a, b) => a + b, 0),lang)\r\n        /* \"$\" + formatMoney(output.percentNeed2.reduce((a, b) => a + b, 0), 0, decimalChar, thousands) */\r\n        ),\r\n      ];\r\n    } else\r\n      values = [\r\n        OUTPUTTEXT[lang].pgTabRowThereAfter,\r\n        (\r\n          formattedMoneyString(output.percentNeed1,lang)\r\n        /* \"$\" + formatMoney(output.percentNeed1, 0, decimalChar, thousands) */\r\n        ),\r\n      ];\r\n\r\n    y += incTableY;\r\n    pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n    //pdf.DrawLine(InToPt(1.5), InToPt(y), InToPt(PARA_WIDTH));\r\n    //pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n    //y += incY;\r\n    //pdf.DrawLine(InToPt(1.5), InToPt(y), InToPt(PARA_WIDTH));\r\n\r\n    pdf.addFooterAndHeader(headerOffset, footerText, headerText);\r\n\r\n    {\r\n      /* PAGE 5 Family Cash Sources at Death*/\r\n    }\r\n    result=result && pdf.addCustomImage(IMAGE_LOGO_OTHERPAGES, pg1TitleY, image,false,top);\r\n\r\n    Widths =  lang === \"en\"?[3.35, 1.1, 1.1]:[3.65, .95, .95]; // add up to PARA_WIDTH=5.5\r\n    pdf.SetFont(HELVETICA, NORMAL);\r\n    if (lang === \"en\") pdf.SetFontSize(PxToPt(25));\r\n    else pdf.SetFontSize(PxToPt(20));\r\n\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    pdf.Text(OUTPUTTEXT[lang].pg5T, InToPt(1.5), InToPt(headerOffset + topToTitle_Y\r\n  ));\r\n\r\n    pdf.SetFont(TIMES, NORMAL);\r\n\r\n    pdf.SetFontSize(PxToPt(16));\r\n\r\n    x = 1.5;\r\n    y = headerOffset + titleToPara_Y;\r\n    incY = 0.44;\r\n    height = 0.35;\r\n    //const Widths = 5;\r\n    values = [\r\n      OUTPUTTEXT[lang].pg5TabT,\r\n      OUTPUTTEXT[lang].pg5TabT2,\r\n      OUTPUTTEXT[lang].pg5TabT3,\r\n    ];\r\n    fill = [115, 153, 198];\r\n    textColor = [255, 255, 255];\r\n    pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n\r\n    fill = [255, 255, 255];\r\n    textColor = [0x45, 0x55, 0x60];\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n\r\n    /* if (lang === \"fr\") {\r\n      y += incY;\r\n      y += 0.3;\r\n      pdf.MultilineText(\r\n        OUTPUTTEXT[lang].pg5TabRow1,\r\n        InToPt(x + 0.1),\r\n        InToPt(y),\r\n        InToPt(3)\r\n      );\r\n      pdf.Text(\r\n        \"$\" + formatMoney(output.govDB, 0, decimalChar, thousands),\r\n        InToPt(x + 3.35),\r\n        InToPt(y)\r\n      );\r\n      pdf.Text(\r\n        \"$\" + formatMoney(output.govDB, 0, decimalChar, thousands),\r\n        InToPt(x + 4.45),\r\n        InToPt(y)\r\n      );\r\n    } else */ {\r\n      values = [\r\n        OUTPUTTEXT[lang].pg5TabRow1,\r\n        (\r\n          formattedMoneyString(output.govDB,lang)\r\n        /* \"$\" + formatMoney(output.govDB, 0, decimalChar, thousands) */),\r\n        (\r\n          formattedMoneyString(output.govDB,lang)\r\n        /* \"$\" + formatMoney(output.govDB, 0, decimalChar, thousands) */),\r\n          \r\n      ];\r\n      y += incY;\r\n      pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n    }\r\n\r\n    y += incY;\r\n    output.assets.forEach(function (element) {\r\n      values = [\r\n        element.name,\r\n        (\r\n          formattedMoneyString(element.value,lang)\r\n        /* \"$\" + formatMoney(element.value, 0, decimalChar, thousands) */\r\n        ),\r\n        element.disposeValue > 0\r\n          ? (\r\n            formattedMoneyString(element.disposeValue,lang)\r\n            /* \"$\" + formatMoney(element.disposeValue, 0, decimalChar, thousands) */\r\n            )\r\n          : \"\",\r\n      ];\r\n      pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n      y += incTableY;\r\n    });\r\n\r\n    values = [\r\n      OUTPUTTEXT[lang].pg5TabRow3,\r\n      (\r\n        formattedMoneyString(output.totalAsset,lang)\r\n        /* \"$\" + formatMoney(output.totalAsset, 0, decimalChar, thousands) */\r\n      ),\r\n      (\r\n        formattedMoneyString(output.totalDisposeAsset,lang)\r\n        /* \"$\" + formatMoney(output.totalDisposeAsset, 0, decimalChar, thousands) */\r\n      ),\r\n    ];\r\n    y += incY;\r\n    pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n\r\n   /*  if (lang === \"fr\") {\r\n      y += 0.73 * incY;\r\n      pdf.MultilineText(\r\n        OUTPUTTEXT[lang].pg5TabRow4,\r\n        InToPt(x + 0.1),\r\n        InToPt(y + 0.4),\r\n        InToPt(3)\r\n      );\r\n      pdf.Text(\r\n        \"$\" +\r\n          formatMoney(output.totalLiab, 0, decimalChar, thousands),\r\n        InToPt(x + 4.45),\r\n        InToPt(y + 0.41)\r\n      );\r\n      y += 0.73 * incY;\r\n    } else */ {\r\n      values = [\r\n        OUTPUTTEXT[lang].pg5TabRow4,\r\n        \"\",\r\n        (\r\n          formattedMoneyString(output.totalLiab,lang)\r\n        /* \"$\" + formatMoney(output.totalLiab, 0, decimalChar, thousands) */\r\n        ),\r\n      ];\r\n      y += incY;\r\n      pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n    }\r\n\r\n    y += incY;\r\n    /* pdf.MultilineText(\r\n      OUTPUTTEXT[lang].pg5TabRow5,\r\n      InToPt(x + 0.1),\r\n      InToPt(y + 0.4),\r\n      InToPt(3)\r\n    ); */\r\n    values = [\r\n      OUTPUTTEXT[lang].pg5TabRow5,\r\n      \"\",\r\n      (\r\n        formattedMoneyString(output.totalDisposeAsset - output.totalLiab,lang)\r\n        /* \"$\" + formatMoney(output.totalDisposeAsset - output.totalLiab, 0, decimalChar, thousands) */\r\n      ),\r\n    ];\r\n    //y += incY;\r\n    pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n    \r\n    /* pdf.Text(\r\n      \"$\" +\r\n        formatMoney(\r\n          output.totalDisposeAsset - output.totalLiab,\r\n          0,\r\n          decimalChar,\r\n          thousands\r\n        ),\r\n      InToPt(x + 4.45),\r\n      InToPt(y + 0.41)\r\n    ); */\r\n\r\n    y += incY;\r\n    pdf.DrawLine(InToPt(1.5), InToPt(y - 0.43), InToPt(PARA_WIDTH));\r\n\r\n    pdf.addFooterAndHeader(headerOffset, footerText, headerText);\r\n\r\n   \r\n   \r\n   \r\n   \r\n    {\r\n      /* PAGE 6 Family Income Sources at Death*/\r\n    }\r\n    result=result && pdf.addCustomImage(IMAGE_LOGO_OTHERPAGES, pg1TitleY, image,false,top);\r\n    Widths = [4.4, 1.1]; // add up to PARA_WIDTH=5.5\r\n    Widths = [3.0,1.6, .9]; // add up to PARA_WIDTH=5.5\r\n    pdf.SetFont(HELVETICA, NORMAL);\r\n    if (lang === \"en\") pdf.SetFontSize(PxToPt(25));\r\n    else pdf.SetFontSize(PxToPt(20));\r\n\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    pdf.Text(OUTPUTTEXT[lang].pg6T, InToPt(1.5), InToPt(headerOffset + topToTitle_Y\r\n  ));\r\n\r\n    pdf.SetFont(TIMES, NORMAL);\r\n\r\n    pdf.SetFontSize(PxToPt(16));\r\n\r\n    x = 1.5;\r\n    y = headerOffset + titleToPara_Y;\r\n    incY = 0.44;\r\n    height = 0.35;\r\n    //const Widths = 5;\r\n    /* values = [OUTPUTTEXT[lang].pg6TabT];\r\n    fill = [115, 153, 198];\r\n    textColor = [255, 255, 255];\r\n    pdf.tableRow(fill, textColor, x, y, values, height, [PARA_WIDTH]); */\r\n\r\n    values = [\r\n      OUTPUTTEXT[lang].pg6TabT,\r\n      OUTPUTTEXT[lang].pg5TabT2,\r\n      OUTPUTTEXT[lang].pg5TabT3,\r\n    ];\r\n    fill = [115, 153, 198];\r\n    textColor = [255, 255, 255];\r\n    pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n\r\n\r\n\r\n    fill = [255, 255, 255];\r\n    textColor = [0x45, 0x55, 0x60];\r\n\r\n    y += incY;\r\n    output.sources.forEach(function (element) {\r\n      values = [\r\n        element.name,\r\n        (\r\n          formattedMoneyString(element.value,lang)\r\n        /* \"$\" + formatMoney(element.value, 0, decimalChar, thousands) */\r\n        ),\r\n        formattedMoneyString(element.valueAtDeath,lang),\r\n      ];\r\n      pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n      y += incTableY;\r\n    });\r\n    y += incY;\r\n    pdf.MultilineText(\r\n      OUTPUTTEXT[lang].pg6TabRow1,\r\n      InToPt(x + 0.1),\r\n      InToPt(y + 0.35),\r\n      InToPt(3)\r\n    );\r\n    y += incY + 0.3;\r\n    pdf.DrawLine(InToPt(1.5), InToPt(y - 0.04), InToPt(PARA_WIDTH));\r\n    //y += incY+.1;\r\n\r\n    // Widths = [3.1, 1.2, 1.2]; // add up to PARA_WIDTH=5.5\r\n    Widths = [4.8, .8]; // add up to PARA_WIDTH=5.5\r\n  \r\n    if (twoNeedPercents) {\r\n      y += incY - 0.27;\r\n\r\n      pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        x,\r\n        y,\r\n        [OUTPUTTEXT[lang].pgTabRowMoreIncome],\r\n        height,\r\n        Widths\r\n      );\r\n\r\n      pdf.SetFontSize(PxToPt(12));\r\n      pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        x + 3.6,\r\n        y,\r\n        [\r\n          \"(\" +\r\n            labelsBilingual.pg6Net +\r\n            (\r\n              formattedMoneyString(output.totalSourceATaxAtDeath,lang)\r\n        /* \"  $\" +\r\n              formatMoney(output.totalSourceATax, 0, decimalChar, thousands) */\r\n            ).toString() +\r\n            \")\",\r\n        ],\r\n        height,\r\n        Widths\r\n      );\r\n      pdf.SetFontSize(PxToPt(16));\r\n      pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        x + 4.6,\r\n        y,\r\n        [\r\n          (\r\n            formattedMoneyString(output.totalSourceAtDeath,lang)\r\n        /* \"$\" + formatMoney(output.totalSource, 0, decimalChar, thousands) */\r\n          ),\r\n        ],\r\n        height,\r\n        Widths\r\n      );\r\n\r\n      // y += incY;\r\n      y += incColourdRowsY;\r\n\r\n      pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        x,\r\n        y,\r\n        [!singleFamily?OUTPUTTEXT[lang].pgTabRowThereAfter: OUTPUTTEXT[lang].pg5TabRow7],\r\n        height,\r\n        Widths\r\n      );\r\n\r\n      pdf.SetFontSize(PxToPt(12));\r\n      pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        x + 3.6,\r\n        y,\r\n        [\r\n          \"(\" +\r\n            labelsBilingual.pg6Net +\r\n            (\r\n              formattedMoneyString(output.totalSource2ATaxAtDeath,lang)\r\n        /* \"  $\" +\r\n              formatMoney(output.totalSource2ATax, 0, decimalChar, thousands) */\r\n            ).toString() +\r\n            \")\",\r\n        ],\r\n        height,\r\n        Widths\r\n      );\r\n      pdf.SetFontSize(PxToPt(16));\r\n      pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        x + 4.6,\r\n        y,\r\n        [\r\n          (\r\n            formattedMoneyString(output.totalSource2AtDeath,lang)\r\n        /* \"$\" + formatMoney(output.totalSource2, 0, decimalChar, thousands) */\r\n          ),\r\n        ],\r\n        height,\r\n        Widths\r\n      );\r\n\r\n      /* values = [\r\n        OUTPUTTEXT[lang].pgTabRowMoreIncome,\r\n        (\r\n          \"$\" + formatMoney(output.totalSource, 0, decimalChar, thousands)\r\n        ),\r\n      ];\r\n      y += incY - 0.27;\r\n      pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n */\r\n      /*     values = [\r\n        OUTPUTTEXT[lang].pgTabRowThereAfter,\r\n        (\r\n          \"$\" + formatMoney(output.totalSource2, 0, decimalChar, thousands)\r\n        ),\r\n      ];\r\n      y += incY;\r\n      pdf.SetFontSize(PxToPt(16));\r\n      pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n\r\n      values = [\r\n        \"(\" + (\"$\" + formatMoney(output.totalSourceATax, 0, decimalChar, thousands)\r\n      ) + \" \" + labelsBilingual.pg6Net + \")\",\r\n    ];\r\n    pdf.SetFontSize(PxToPt(12));\r\n    pdf.tableRow(fill, textColor, x+3, y, values, height, Widths); */\r\n      pdf.SetFontSize(PxToPt(16));\r\n    } else {\r\n      /*    values = [\r\n        OUTPUTTEXT[lang].pgTabRowThereAfter,\r\n        (\r\n          \"$\" + formatMoney(output.totalSource1, 0, decimalChar, thousands)\r\n        )\r\n        +\r\n        \"          (\" + (\"$\" + formatMoney(output.totalSource2ATax, 0, decimalChar, thousands)\r\n      ) + \" \" + labelsBilingual.pg6Net + \")\",\r\n      ]; */\r\n      y += incY;\r\n      pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        x,\r\n        y,\r\n        [!singleFamily?OUTPUTTEXT[lang].pgTabRowThereAfter: OUTPUTTEXT[lang].pg5TabRow7],\r\n        height,\r\n        Widths\r\n      );\r\n\r\n      pdf.SetFontSize(PxToPt(12));\r\n      pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        x + 3.6,\r\n        y,\r\n        [\r\n          \"(\" +\r\n            labelsBilingual.pg6Net +\r\n            (\r\n              formattedMoneyString(output.totalSourceATaxAtDeath,lang)\r\n        /* \"  $\" +\r\n              formatMoney(output.totalSourceATax, 0, decimalChar, thousands) */\r\n            ) +\r\n            \")\",\r\n        ],\r\n        height+.1,\r\n        Widths\r\n      );\r\n      pdf.SetFontSize(PxToPt(16));\r\n      pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        x + 4.6,\r\n        y,\r\n        [\r\n          (\r\n            formattedMoneyString(output.totalSourceAtDeath,lang)\r\n        /* \"$\" + formatMoney(output.totalSource, 0, decimalChar, thousands) */\r\n          ),\r\n        ],\r\n        height+.1,\r\n        Widths\r\n      );\r\n\r\n      /*      pdf.tableRow(fill, textColor, x, y, values, height, Widths); */\r\n    }\r\n    y += incY + 0.5;\r\n    pdf.MultilineText(\r\n      OUTPUTTEXT[lang].pgTabRowMoreIncome,\r\n      InToPt(x + 0.1),\r\n      InToPt(y),\r\n      InToPt(3)\r\n    );\r\n    y += incY - 0.13;\r\n    pdf.DrawLine(InToPt(1.5), InToPt(y + 0.26), InToPt(PARA_WIDTH));\r\n\r\n    //values = [OUTPUTTEXT[lang].pgTabRowMoreIncome, (\"$\"+ formatMoney(output.percentNeed1-output.totalSource, 0,decimalChar,thousands))];\r\n    //y += incY;\r\n    //pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n\r\n    //\tvalues = [OUTPUTTEXT[lang].pgTabRowThereAfter, (\"$\"+ formatMoney(output.percentNeed2-output.totalSource2, 0,decimalChar,thousands))];\r\n    //\ty += incY;\r\n    //pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n    //#7399C6\r\n    //pdf.Text(OUTPUTTEXT[lang].pgTabRowThereAfter,  x, y);\r\n    //pdf.tableRow(fill, textColor, x, y, OUTPUTTEXT[lang].pgTabRowThereAfter, [1]);\r\n\r\n    values = [OUTPUTTEXT[lang].pgTabRowMoreIncome];\r\n    y += incY;\r\n    //Widths = [3.1,1.2, 1.2]; // add up to PARA_WIDTH=5.5\r\n    pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n\r\n    if (twoNeedPercents) {\r\n      pdf.SetFontSize(PxToPt(12));\r\n      pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        x + 3.6,\r\n        y,\r\n        [\r\n          \"(\" +\r\n            (\r\n              formatMoney(output.percentNeed1, 0, decimalChar, thousands)\r\n            ).toString() +\r\n            \"-\" +\r\n            (\r\n              \r\n              formatMoney(output.totalSourceATaxAtDeath, 0, decimalChar, thousands)\r\n            ).toString() +\r\n            \")\",\r\n        ],\r\n        height+.1,\r\n        [1.2]\r\n      );\r\n\r\n      pdf.SetFontSize(PxToPt(16));\r\n      fill = [196, 223, 224];\r\n      \r\n      values2=(\r\n        formattedMoneyString(Math.max(0, output.percentNeed1 - output.totalSourceATaxAtDeath),lang)\r\n        /* \"$\" +\r\n        formatMoney(\r\n          Math.max(0, output.percentNeed1 - output.totalSourceATax),\r\n          0,\r\n          decimalChar,\r\n          thousands\r\n        ) */\r\n      )\r\n      pdf.tableRowSingle(fill, textColor, x+4.6, y, values2, height, Widths, true);\r\n      /* pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        x + 4.4,\r\n        y,\r\n        [\r\n          (\r\n            \"$\" +\r\n            formatMoney(\r\n              Math.max(0, output.percentNeed1 - output.totalSourceATax),\r\n              0,\r\n              decimalChar,\r\n              thousands\r\n            )\r\n          ),\r\n        ],\r\n        height,\r\n        [1]\r\n      );\r\n */\r\n      fill = [255, 255, 255];\r\n      values = [!singleFamily?OUTPUTTEXT[lang].pgTabRowThereAfter:OUTPUTTEXT[lang].pg5TabRow7];\r\n      //y += incY;\r\n      y += incColourdRowsY;\r\n      pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n\r\n      pdf.SetFontSize(PxToPt(12));\r\n      pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        x + 3.6,\r\n        y,\r\n        [\r\n          \"(\" +\r\n            (\r\n              formatMoney(output.percentNeed2.reduce((a, b) => a + b, 0), 0, decimalChar, thousands)\r\n            ).toString() +\r\n            \"-\" +\r\n            (\r\n              formatMoney(output.totalSource2ATaxAtDeath, 0, decimalChar, thousands)\r\n            ).toString() +\r\n            \")\",\r\n        ],\r\n        height+.1,\r\n        [1.2]\r\n      );\r\n\r\n      pdf.SetFontSize(PxToPt(16));\r\n      fill = [196, 223, 224];\r\n      values2=(\r\n        formattedMoneyString(Math.max(0, output.percentNeed2.reduce((a, b) => a + b, 0) - output.totalSource2ATaxAtDeath),lang)\r\n        /* \"$\" +\r\n        formatMoney(\r\n          Math.max(0, output.percentNeed2.reduce((a, b) => a + b, 0) - output.totalSource2ATax),          \r\n          0,\r\n          decimalChar,\r\n          thousands\r\n        ) */\r\n      )\r\n      pdf.tableRowSingle(fill, textColor, x+4.6, y, values2, height, Widths, true);\r\n/* \r\n      pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        x + 4.4,\r\n        y,\r\n        [\r\n          (\r\n            \"$\" +\r\n            formatMoney(\r\n              Math.max(0, output.percentNeed2 - output.totalSource2ATax),\r\n              0,\r\n              decimalChar,\r\n              thousands\r\n            )\r\n          ),\r\n        ],\r\n        height,\r\n        [1]\r\n      ); */\r\n    } else {\r\n      fill = [255, 255, 255];\r\n      pdf.SetFontSize(PxToPt(12));\r\n      pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        x + 3.6,\r\n        y,\r\n        [\r\n          \"(\" +\r\n            (\r\n              formatMoney(output.percentNeed1, 0, decimalChar, thousands)\r\n            ).toString() +\r\n            \"-\" +\r\n            (\r\n              \r\n              formatMoney(output.totalSourceATaxAtDeath, 0, decimalChar, thousands)\r\n            ).toString() +\r\n            \")\",\r\n        ],\r\n        height+.1,\r\n        [1.2]\r\n      );\r\n      pdf.SetFontSize(PxToPt(16));\r\n      fill = [196, 223, 224];\r\n      \r\n      values2=(\r\n        formattedMoneyString(Math.max(0, output.percentNeed1 - output.totalSourceATaxAtDeath),lang)\r\n        /* \"$\" +\r\n        formatMoney(\r\n          Math.max(0, output.percentNeed1 - output.totalSourceATax),\r\n          0,\r\n          decimalChar,\r\n          thousands\r\n        ) */\r\n      )\r\n      pdf.tableRowSingle(fill, textColor, x+4.6, y, values2, height, Widths, true);\r\n      \r\n    }\r\n\r\n    pdf.SetFontSize(PxToPt(16));\r\n    /*       fill = [196, 223, 224];\r\n\r\n\r\n    pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        x + 4.4,\r\n        y,\r\n        [\r\n          (\r\n            \"$\" +\r\n            formatMoney(\r\n              Math.max(0, output.percentNeed1 - output.totalSource),\r\n              0,\r\n              decimalChar,\r\n              thousands\r\n            )\r\n          ),\r\n        ],\r\n        height,\r\n        [1]\r\n      ); */\r\n\r\n    pdf.addFooterAndHeader(headerOffset, footerText, headerText);\r\n\r\n   \r\n   \r\n   \r\n   \r\n   \r\n   \r\n   \r\n   \r\n   \r\n    {\r\n      // remove this page\r\n      /* PAGE 7 Life info anal*/\r\n    } /* \r\n    pdf.addCustomImage(IMAGE_LOGO_OTHERPAGES, pg1TitleY, image);\r\n\r\n    Widths = [4.3, 1.2];\r\n    pdf.SetFont(HELVETICA, NORMAL);\r\n    if (lang === \"en\") pdf.SetFontSize(PxToPt(25));\r\n    else pdf.SetFontSize(PxToPt(20));\r\n\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    pdf.Text(OUTPUTTEXT[lang].pg7T, InToPt(1.5), InToPt(headerOffset+topToTitle_Y\r\n  ));\r\n\r\n    pdf.SetFont(TIMES, NORMAL);\r\n\r\n    pdf.SetFontSize(PxToPt(16));\r\n\r\n    x = 1.5;\r\n    y = headerOffset+titleToPara_Y;\r\n    incY = 0.42;\r\n    height = 0.35;\r\n    //const Widths = 5;\r\n    values = [OUTPUTTEXT[lang].pg7TabT];\r\n    fill = [115, 153, 198];\r\n    textColor = [255, 255, 255];\r\n    pdf.tableRow(fill, textColor, x, y, values, height, [PARA_WIDTH]);\r\n\r\n    fill = [255, 255, 255];\r\n    textColor = [0x45, 0x55, 0x60];\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n\r\n    y += incY + 0.2;\r\n    pdf.MultilineText(\r\n      OUTPUTTEXT[lang].pg7TabRow1,\r\n      InToPt(x + 0.1),\r\n      InToPt(y),\r\n      InToPt(3)\r\n    );\r\n    y += incY / 2;\r\n\r\n    //if (output.hasChild) {\r\n    //\tif (output.ygChild < 18) {\r\n    if (twoNeedPercents) {\r\n      values = [\r\n        OUTPUTTEXT[lang].pg7TabRow2,\r\n        (\r\n          \"$\" +\r\n          formatMoney(\r\n            Math.max(0, output.percentNeed1 - output.totalSource),\r\n            0,\r\n            decimalChar,\r\n            thousands\r\n          )\r\n        ),\r\n      ];\r\n      y += incY;\r\n      pdf.tableRow(fill, textColor, x + 0.1, y, values, height, Widths);\r\n\r\n      values = [\r\n        OUTPUTTEXT[lang].pgTabRowThereAfter,\r\n        (\r\n          \"$\" +\r\n          formatMoney(\r\n            Math.max(0, output.percentNeed2 - output.totalSource2),\r\n            0,\r\n            decimalChar,\r\n            thousands\r\n          )\r\n        ),\r\n      ];\r\n    } else\r\n      values = [\r\n        OUTPUTTEXT[lang].pgTabRowThereAfter,\r\n        (\r\n          \"$\" +\r\n          formatMoney(\r\n            Math.max(0, output.percentNeed1 - output.totalSource),\r\n            0,\r\n            decimalChar,\r\n            thousands\r\n          )\r\n        ),\r\n      ];\r\n\r\n    y += incY;\r\n    pdf.tableRow(fill, textColor, x + 0.1, y, values, height, Widths);\r\n\r\n    values = [OUTPUTTEXT[lang].pg7TabRow4, (output.infRate + \"%\")];\r\n    y += incY;\r\n    pdf.tableRow(fill, textColor, x + 0.1, y, values, height, Widths);\r\n\r\n    y += incY + 0.22;\r\n    pdf.MultilineText(\r\n      OUTPUTTEXT[lang].pg7TabRow5,\r\n      InToPt(x + 0.2),\r\n      InToPt(y),\r\n      InToPt(3)\r\n    );\r\n    pdf.Text(\r\n      (output.invRate + \"%\"),\r\n      InToPt(x + 4.25),\r\n      InToPt(y + 0.21)\r\n    );\r\n\r\n    y += incY + 0.3;\r\n    pdf.DrawLine(InToPt(1.5), InToPt(y - 0.23), InToPt(PARA_WIDTH));\r\n    y += incY - 0.2;\r\n    pdf.MultilineText(\r\n      OUTPUTTEXT[lang].pg7TabRow6,\r\n      InToPt(x + 0.2),\r\n      InToPt(y),\r\n      InToPt(3)\r\n    );\r\n    y += incY - 0.2;\r\n    values = [\r\n      OUTPUTTEXT[lang].pg7TabRow7 + props.LE + \")\",\r\n      (\r\n        \"$\" +\r\n        formatMoney(\r\n          Math.max(0, output.insNeedLE + output.totalAsset - output.totalLiab),\r\n          0,\r\n          decimalChar,\r\n          thousands\r\n        )\r\n      ),\r\n    ];\r\n    y += incY + 0.1;\r\n    pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n\r\n    values = [\r\n      OUTPUTTEXT[lang].pg7TabRow8,\r\n      (\r\n        \"$\" +\r\n        formatMoney(\r\n          Math.max(0, output.insNeedRet + output.totalAsset - output.totalLiab),\r\n          0,\r\n          decimalChar,\r\n          thousands\r\n        )\r\n      ),\r\n    ];\r\n    y += incY;\r\n    pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n\r\n    if (output.hasChild) {\r\n      if (output.ygChild < maxDur) {\r\n        values = [\r\n          OUTPUTTEXT[lang].pg7TabRow9,\r\n          (\r\n            \"$\" +\r\n            formatMoney(\r\n              Math.max(\r\n                0,\r\n                output.insNeedYgChild25 + output.totalAsset - output.totalLiab\r\n              ),\r\n              0,\r\n              decimalChar,\r\n              thousands\r\n            )\r\n          ),\r\n        ];\r\n        y += incY;\r\n        pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n      }\r\n\r\n      if (output.ygChild < orphAge) {\r\n        values = [\r\n          OUTPUTTEXT[lang].pg7TabRow10,\r\n          (\r\n            \"$\" +\r\n            formatMoney(\r\n              Math.max(\r\n                0,\r\n                output.insNeedYgChild18 + output.totalAsset - output.totalLiab\r\n              ),\r\n              0,\r\n              decimalChar,\r\n              thousands\r\n            )\r\n          ),\r\n        ];\r\n        y += incY;\r\n        pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n      }\r\n    }\r\n    //  pdf.AddChart(\"bar1\", InToPt(1.5), InToPt(y + 0.7), InToPt(4), InToPt(2));\r\n\r\n    pdf.addFooterAndHeader(headerOffset,footerText, headerText);\r\n */\r\n    {\r\n      /* PAGE 8 Life info anal 2 */\r\n    }\r\n    result=result && pdf.addCustomImage(IMAGE_LOGO_OTHERPAGES, pg1TitleY, image,false,top);\r\n\r\n    Widths = [4.3, 1.2];\r\n    pdf.SetFont(HELVETICA, NORMAL);\r\n    if (lang === \"en\") pdf.SetFontSize(PxToPt(25));\r\n    else pdf.SetFontSize(PxToPt(20));\r\n\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    pdf.Text(OUTPUTTEXT[lang].pg8T, InToPt(1.5), InToPt(headerOffset + topToTitle_Y\r\n  ));\r\n\r\n    pdf.SetFont(TIMES, NORMAL);\r\n\r\n    pdf.SetFontSize(PxToPt(16));\r\n\r\n    x = 1.5;\r\n    y = headerOffset + titleToPara_Y;\r\n    incY = 0.42;\r\n    height = 0.35;\r\n    //const Widths = 5;\r\n    values = [OUTPUTTEXT[lang].pg8TabT];\r\n    fill = [115, 153, 198];\r\n    textColor = [255, 255, 255];\r\n    pdf.tableRow(fill, textColor, x, y, values, height, [PARA_WIDTH]);\r\n\r\n    fill = [255, 255, 255];\r\n    textColor = [0x45, 0x55, 0x60];\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n\r\n    /* values = [OUTPUTTEXT[lang].pg8TabRow1, (\"$\"+ formatMoney(totalAsset-output.totalLiab, 0,decimalChar,thousands))];\r\n\t  y += incY;\t\r\n\t  pdf.tableRow(fill, textColor, x, y, values, height, Widths); */\r\n\r\n    y += incY + 0.2;\r\n    pdf.MultilineText(\r\n      OUTPUTTEXT[lang].pg8TabRow1,\r\n      InToPt(x),\r\n      InToPt(y),\r\n      InToPt(3)\r\n    );\r\n    pdf.Text(\r\n      (\r\n        formattedMoneyString(output.totalDisposeAsset - output.totalLiab,lang)\r\n        /* \"$\" +\r\n        formatMoney(\r\n          output.totalDisposeAsset - output.totalLiab,\r\n          0,\r\n          decimalChar,\r\n          thousands\r\n        ) */\r\n      ),\r\n      InToPt(x + 4.42),\r\n      InToPt(y + 0.21)\r\n    );\r\n\r\n    y += incY + 0.3;\r\n    pdf.MultilineText(\r\n      OUTPUTTEXT[lang].pg8TabRow2,\r\n      InToPt(x),\r\n      InToPt(y),\r\n      InToPt(3)\r\n    );\r\n    y += incY - 0.1;\r\n\r\n    if(!singleFamily)\r\n    {\r\n    values = [\r\n      OUTPUTTEXT[lang].pg8TabRow3 + props.LE + \")\",\r\n      (\r\n        formattedMoneyString(output.insNeedLE,lang)\r\n        /* \"$\" + formatMoney(output.insNeedLE, 0, decimalChar, thousands) */\r\n      ),\r\n    ];\r\n    y += incY + 0.1;\r\n    pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n  }\r\n\r\n    values = [\r\n      singleFamily? OUTPUTTEXT[lang].pg8TabRow4Alt.replace(\"A. \",\"\"): OUTPUTTEXT[lang].pg8TabRow4,\r\n      (\r\n        formattedMoneyString(output.insNeedRet,lang)\r\n        /* \"$\" + formatMoney(output.insNeedRet, 0, decimalChar, thousands) */\r\n      ),\r\n    ];\r\n    y += incY;\r\n    pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n\r\n    if (output.hasChild) {\r\n      if (output.ygChild < maxDur) {\r\n        values = [\r\n          singleFamily?OUTPUTTEXT[lang].pg8TabRow5.replace(\"C.\",\"B.\").replace(\"25\",output.youngestChildEndAge): OUTPUTTEXT[lang].pg8TabRow5.replace(\"25\",output.youngestChildEndAge),\r\n          (\r\n            formattedMoneyString(output.insNeedYgChild25,lang)\r\n        /* \"$\" +\r\n            formatMoney(output.insNeedYgChild25, 0, decimalChar, thousands) */\r\n          ),\r\n        ];\r\n        y += incY;\r\n        pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n      }\r\n\r\n      if (output.ygChild < orphAge) {\r\n        values = [\r\n          singleFamily?OUTPUTTEXT[lang].pg8TabRow6.replace(\"D.\",\"C.\"): OUTPUTTEXT[lang].pg8TabRow6,\r\n          (\r\n            formattedMoneyString(output.insNeedYgChild18,lang)\r\n        /* \"$\" +\r\n            formatMoney(output.insNeedYgChild18, 0, decimalChar, thousands) */\r\n          ),\r\n        ];\r\n        y += incY;\r\n        pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n      }\r\n    }\r\n    pdf.AddChart(\"bar2\", InToPt(1.5), InToPt(y + 0.7), InToPt(4), InToPt(2));\r\n\r\n    pdf.addFooterAndHeader(headerOffset, footerText, headerText);\r\n\r\n    {\r\n      /* Nptes*/\r\n    }\r\n    result=result && pdf.addCustomImage(IMAGE_LOGO_OTHERPAGES, pg1TitleY, image,false,top);\r\n\r\n    pdf.SetFont(HELVETICA, NORMAL);\r\n    if (lang === \"en\") pdf.SetFontSize(PxToPt(25));\r\n    else pdf.SetFontSize(PxToPt(20));\r\n\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    pdf.Text(OUTPUTTEXT[lang].pg9T, InToPt(1.5), InToPt(headerOffset+topToTitle_Y\r\n  ));\r\n\r\n    paragraph = OUTPUTTEXT[lang].pg9P1;\r\n    pdf.SetFont(TIMES, NORMAL);\r\n    pdf.SetFontSize(PxToPt(16));\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    pdf.MultilineText(paragraph, InToPt(1.5), InToPt(headerOffset+1.8), InToPt(PARA_WIDTH));\r\n\r\n    //pdf.addFooterAndHeader(headerOffset,footerText, headerText);\r\n    pdf.addHeaderNoFooter(headerOffset,headerText);\r\n    {\r\n      /* Acknow*/\r\n    }\r\n    result=result && pdf.addCustomImage(IMAGE_LOGO_OTHERPAGES, pg1TitleY, image,false,top);\r\n\r\n    pdf.SetFont(HELVETICA, NORMAL);\r\n    if (lang === \"en\") pdf.SetFontSize(PxToPt(25));\r\n    else pdf.SetFontSize(PxToPt(20));\r\n\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    pdf.Text(OUTPUTTEXT[lang].pg10T, InToPt(1.5), InToPt(headerOffset + topToTitle_Y\r\n  ));\r\n\r\n    paragraph = OUTPUTTEXT[lang].pg10P1;\r\n    pdf.SetFont(TIMES, NORMAL);\r\n    pdf.SetFontSize(PxToPt(16));\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    pdf.MultilineText(\r\n      paragraph,\r\n      InToPt(1.5),\r\n      InToPt(headerOffset + 1.8),\r\n      InToPt(PARA_WIDTH)\r\n    );\r\n\r\n    pdf.SetFont(TIMES, NORMAL);\r\n\r\n    pdf.SetFontSize(PxToPt(16));\r\n\r\n    x = 1.5;\r\n    y = headerOffset + 3.6;\r\n    incY = 0.42;\r\n    height = 0.35;\r\n    //const Widths = 5;\r\n    fill = [255, 255, 255];\r\n    textColor = [0x45, 0x55, 0x60];\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n\r\n    let yOffset = props.lang === \"fr\" ? 3 : 4;\r\n    y += incY + 0.2;\r\n    pdf.MultilineText(\r\n      OUTPUTTEXT[lang].pg10TabRow1,\r\n      InToPt(x),\r\n      InToPt(y),\r\n      InToPt(4)\r\n    );\r\n    pdf.Text(OUTPUTTEXT[lang].pg10TabRow11, InToPt(x + yOffset), InToPt(y));\r\n\r\n    y += incY;\r\n    pdf.MultilineText(\r\n      OUTPUTTEXT[lang].pg10TabRow2,\r\n      InToPt(x),\r\n      InToPt(y),\r\n      InToPt(4)\r\n    );\r\n    pdf.Text(OUTPUTTEXT[lang].pg10TabRow11, InToPt(x + yOffset), InToPt(y));\r\n\r\n    y += incY;\r\n    pdf.MultilineText(\r\n      OUTPUTTEXT[lang].pg10TabRow3,\r\n      InToPt(x),\r\n      InToPt(y),\r\n      InToPt(4)\r\n    );\r\n    pdf.Text(OUTPUTTEXT[lang].pg10TabRow11, InToPt(x + yOffset), InToPt(y));\r\n\r\n    pdf.Footer(OUTPUTTEXT[lang].pgFooter);\r\n\r\n    if(result===false)\r\n      alert(lang===\"en\"? \"PDF image error, SVG extension is not supported\":\"Erreur d’image PDF, l’extension SVG n’est pas prise en charge\")  \r\n\r\n    // Done\r\n    pdf.Save(\"INA_PDF.pdf\");\r\n  }\r\n}\r\n\r\n","import React, { Component } from \"react\";\r\nimport \"./Output.css\";\r\nimport { Table } from \"react-bootstrap\";\r\nimport {\r\n  CONTROLTITLE,\r\n  DISPLAY_RETIREMENT,\r\n  DISPLAY_LIFEEXP,\r\n  DISPLAY_ENDAGE,\r\n  MAX_ORPHAN_DUR_QC,\r\n  MAX_ORPHAN_DUR_NON_QC,\r\n  ORPHAN_AGE_QC,\r\n  ORPHAN_AGE_NON_QC,\r\n  PROVINCE,\r\n  SEX,\r\n  SMOKING,\r\n  MEMBER,\r\n  QUOTE_CLIENT,\r\n  QUOTE_SPOUSE,\r\n  OUTPUT_WIDTH_PCT,\r\n  IMAGE_APPLET_INA,\r\n  IMAGE_LOGO,\r\n  IMAGE_LOGO_OTHERPAGES,\r\n  APPLET_INA,\r\n} from \"../definitions/generalDefinitions\";\r\nimport { MAX_LOGO_HEIGHT, PAGE_HEIGHT } from \"./PDF\";\r\nimport { getName, getLogoAndAppletImage,formatted,isMobileDevice } from \"../utils/helper\";\r\nimport { setUIDataToAPI } from \"../data/dataExchange\";\r\nimport { handleFetchQueryStringSave } from \"../utils/FetchAPIs\";\r\nimport { OUTPUTTEXT } from \"../definitions/outputDefinitions\";\r\nimport { Bar } from \"react-chartjs-2\";\r\nimport { doSavePdfAction } from \"./OutputPDF\";\r\n//import { AdjustibleImage } from \"./AdjustibleImage\";\r\n//import jsPDF from 'jspdf';\r\n//import * as jsPDF from 'jspdf';\r\nimport {\r\n  cleanFormat,\r\n  formatMoney,\r\n  getListItemKeyFromName,\r\n  numFormat,\r\n  familyProjectionYears,\r\n  isSingleFamily,\r\n  \r\n} from \"../utils/helper\";\r\nimport { getOutputValues } from \"../data/dataExchange\";\r\nimport { getInfoINA, getInfoPDF  } from \"../definitions/infoIconsDefinitions\";\r\nimport { Info } from \"./Info\";\r\n\r\nexport class OutputPresentation extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      image: this.props.dataInput.Presentations[0].adviserLogo,\r\n    };\r\n    this.dateApplet = \"\";\r\n  }\r\n\r\n  doPDF = () => {\r\n    doSavePdfAction(this.props);\r\n  };\r\n\r\n  doLIFO = async () => {\r\n    //window.top.location.href = 'localhost:8086';\r\n    //window.parent.changeLogo();\r\n\r\n    await window.parent.postMessage(\r\n      \"LIFO_\" +\r\n        this.props.dataInput.Presentations[0].language +\r\n        \"_\" +\r\n        this.props.encryptedInputLife1,\r\n      \"*\"\r\n    );\r\n  };\r\n  doWL = async () => {\r\n    //window.top.location.href = 'localhost:8086';\r\n    //window.parent.changeLogo();\r\n    await window.parent.postMessage(\r\n      \"WL_\" +\r\n        this.props.dataInput.Presentations[0].language +\r\n        \"_\" +\r\n        this.props.encryptedInputLife1,\r\n      \"*\"\r\n    );\r\n  };\r\n  doEP = async () => {\r\n    \r\n    console.log(\"EP_\" +\r\n    this.props.dataInput.Presentations[0].language +\r\n    \"_\" +\r\n    this.props.encryptedInputLife1AndSpouse)\r\n\r\n    await window.parent.postMessage(\r\n      \"EP_\" +\r\n        this.props.dataInput.Presentations[0].language +\r\n        \"_\" +\r\n        this.props.encryptedInputLife1AndSpouse,\r\n      \"*\"\r\n    );\r\n  };\r\n\r\n  doCompuLife = () => {\r\n    const lang = this.props.dataInput.Presentations[0].language;\r\n   // const formatFr = lang === \"fr\" ? true : false;\r\n    const FA = parseFloat(cleanFormat(this.props.insuranceNeed, lang));\r\n    const province = this.props.dataInput.Presentations[0].provinceKey;\r\n    var today = new Date();\r\n    const birthYr = today.getFullYear() - this.props.dataInput.Clients[0].Age;\r\n    const birthMth = today.getMonth() + 1;\r\n    const birthDay = today.getDate();\r\n    let provinceCode = 2;\r\n    let url = \"http://quotes.ppi.ca/canmain.html?comp=so\";\r\n\r\n    //console.log(url);\r\n    url =\r\n      url +\r\n      \"&lang=\" +\r\n      lang +\r\n      \"&ID=\" +\r\n      \"TKD\" +\r\n      \"&ORIGIN=\" +\r\n      \"TKD\" +\r\n      \"&face=\" +\r\n      parseInt(FA) +\r\n      \"&prepby=\" +\r\n      this.props.dataInput.Presentations[0].designedBy +\r\n      \"&prov=\";\r\n\r\n    if (province === PROVINCE.AB) provinceCode = \"1\";\r\n    else if (province === PROVINCE.BC) provinceCode = \"2\";\r\n    else if (province === PROVINCE.MB) provinceCode = \"3\";\r\n    else if (province === PROVINCE.NB) provinceCode = \"4\";\r\n    else if (province === PROVINCE.NF) provinceCode = \"5\";\r\n    else if (province === PROVINCE.NS) provinceCode = \"6\";\r\n    else if (province === PROVINCE.NT) provinceCode = \"7\";\r\n    else if (province === PROVINCE.NU) provinceCode = \"8\";\r\n    else if (province === PROVINCE.ON) provinceCode = \"9\";\r\n    else if (province === PROVINCE.PE) provinceCode = \"10\";\r\n    else if (province === PROVINCE.QC) provinceCode = \"11\";\r\n    else if (province === PROVINCE.SK) provinceCode = \"12\";\r\n    else if (province === PROVINCE.YU) provinceCode = \"13\";\r\n\r\n    url = url + provinceCode;\r\n   \r\n    {\r\n      url =\r\n        url + \"&prepfor=\" + this.props.dataInput.Presentations[0].designedFor;\r\n      url =\r\n        url + \"&byear=\" + birthYr + \"&bmonth=\" + birthMth + \"&bday=\" + birthDay;\r\n\r\n      url =\r\n        url +\r\n        \"&sex=\" +\r\n        (this.props.dataInput.Clients[0].sexKey === SEX.MALE.Key ? \"M\" : \"F\");\r\n      url =\r\n        url +\r\n        \"&smoker=\" +\r\n        (this.props.dataInput.Clients[0].smokerKey === SMOKING.NON_SMOKER.Key\r\n          ? \"N\"\r\n          : \"Y\");\r\n    }\r\n    //console.log(url);\r\n    const height = Math.min(window.innerHeight - 130 - 20, 800);\r\n    this.externalWindow = window.open(\r\n      url,\r\n      \"_blank\",\r\n      \"width=950,height=\" + height + \",left=25,top=130\"\r\n    );\r\n    this.containerEl = this.externalWindow.document.createElement(\"div\");\r\n    this.externalWindow.document.body.appendChild(this.containerEl);\r\n\r\n    /* try {\r\n      window.open(url, \"_blank\");\r\n    } catch (e) {} */\r\n  };\r\n\r\n  /* onImageChange = (event) => {\r\n    if (event.target.files && event.target.files[0]) {\r\n      this.setState({\r\n        image: URL.createObjectURL(event.target.files[0])\r\n      });\r\n    }\r\n   }\r\n */\r\n\r\n   \r\n\r\n  render() {\r\n    // presentation output shared with pdf\r\n    \r\n    let output = getOutputValues(this.props);\r\n    const lang = this.props.dataInput.Presentations[0].language;\r\n    const labelsBilingual = OUTPUTTEXT[lang];\r\n    const decimalChar = lang === \"en\" ? \".\" : \",\";\r\n    const thousands = lang === \"en\" ? \",\" : \" \";\r\n    const formatFr = lang === \"fr\" ? true : false;\r\n    const dollarEn= lang === \"fr\" ? \"\" : \"$\";\r\n    const dollarFr= lang === \"fr\" ? \"$\" : \"\";\r\n\r\n    const clients = this.props.dataInput.Clients;\r\n    const projYears = familyProjectionYears(\r\n      clients,\r\n      this.props.dataInput.Presentations[0].periodOption,\r\n      this.props.LE,\r\n      this.props.LE\r\n    );\r\n    const projectEnd = projYears.projectionEnd;\r\n    const protectionPeriod = projYears.noProjectionYrs;\r\n    const minAge = projYears.survivorAge;\r\n    const singleFamily = isSingleFamily(clients);\r\n    const noSurvivor = clients.length === 1;\r\n\r\n    \r\n    \r\n\r\n    //const insNeedLine= getInsNeedLine(this.props.dataInput.Presentations[0], this.props.projectEnd, lang,noSurvivor,singleFamily,protectionPeriod)\r\n\r\n    /* const protectionPeriod=this.props.projectEnd-minAge  */\r\n\r\n    const provinceKey = getListItemKeyFromName(PROVINCE, output.province);\r\n    let maxDur =\r\n      provinceKey === \"QC\" ? MAX_ORPHAN_DUR_QC : MAX_ORPHAN_DUR_NON_QC;\r\n    let orphAge = provinceKey === \"QC\" ? ORPHAN_AGE_QC : ORPHAN_AGE_NON_QC;\r\n\r\n    // graph details\r\n    const options = {\r\n      legend: {\r\n        display: false,\r\n      },\r\n      responsive: true,\r\n      maintainAspectRatio: false,\r\n      scales: {\r\n        xAxes: [{ stacked: true }],\r\n        yAxes: [\r\n          {\r\n            stacked: true,\r\n            /* ticks: {\r\n              beginAtZero: true,\r\n              steps: 10,\r\n              stepValue: 5,\r\n            }, */\r\n            ticks: {\r\n              beginAtZero: true,\r\n              callback: function (value, index, values) {\r\n                let result =\r\n                  value < 1000\r\n                    ? value\r\n                    : Intl.NumberFormat(lang).format(value / 1000) + \"K\"\r\n                return result;\r\n              },\r\n            },\r\n\r\n\r\n          },\r\n        ],\r\n      },\r\n    };\r\n\r\n    // //console.log(output)\r\n\r\n    var dataLabels = [\"A\", \"B\"];\r\n    /* var dataValues = [\r\n      output.insNeedLE + output.totalAsset - output.totalLiab,\r\n      output.insNeedRet + output.totalAsset - output.totalLiab,\r\n    ]; */\r\n    var dColor = [\"#7399c6\", \"#d9d3a4\"];\r\n    const under25 =\r\n      output.ygChild < maxDur\r\n        ? output.insNeedYgChild25 + output.totalAsset - output.totalLiab\r\n        : 0;\r\n    const under18 =\r\n      output.ygChild < orphAge\r\n        ? output.insNeedYgChild18 + output.totalAsset - output.totalLiab\r\n        : 0;\r\n\r\n    let youngestChildEndAge=maxDur \r\n    if (output.hasChild)\r\n      {\r\n        youngestChildEndAge=Math.min(maxDur , this.props.dataInput.Clients.filter((item)=> { return item.Age===output.ygChild})[0].retirementAge)\r\n    \r\n        \r\n      }\r\n    \r\n    \r\n    if (output.hasChild) {\r\n      dataLabels = [\"A\", \"B\", \"C\", \"D\"];\r\n      /* dataValues = [\r\n        output.insNeedLE + output.totalAsset - output.totalLiab,\r\n        output.insNeedRet + output.totalAsset - output.totalLiab,\r\n        under25,\r\n        under18,\r\n      ]; */\r\n      dColor = [\"#7399c6\", \"#d9d3a4\", \"#949ca1\", \"#847a18\"];\r\n    }\r\n\r\n    /* console.log(output.clients) */\r\n    var dataValues2 = [output.insNeedLE, output.insNeedRet];\r\n    if (output.hasChild) {\r\n      if(singleFamily)\r\n      {\r\n        dataLabels = [\"A\", \"B\", \"C\"];\r\n        dataValues2 = [\r\n          output.insNeedRet,\r\n          output.insNeedYgChild25,\r\n          output.insNeedYgChild18,\r\n        ];\r\n        dColor = [\"#d9d3a4\", \"#949ca1\", \"#847a18\"];\r\n      }\r\n      else{\r\n      dataLabels = [\"A\", \"B\", \"C\", \"D\"];\r\n      dataValues2 = [\r\n        output.insNeedLE,\r\n        output.insNeedRet,\r\n        output.insNeedYgChild25,\r\n        output.insNeedYgChild18,\r\n      ];\r\n      dColor = [\"#7399c6\", \"#d9d3a4\", \"#949ca1\", \"#847a18\"];\r\n    }\r\n    }\r\n\r\n    /* const dataInsurance = {\r\n      labels: dataLabels,\r\n      datasets: [\r\n        {\r\n          label: \"\", //Income Shortfall',\r\n          data: dataValues,\r\n          fill: false, // Don't fill area under the line\r\n          borderColor: \"#2B3856\", // Line color\r\n          backgroundColor: dColor,\r\n        },\r\n      ],\r\n    };\r\n */\r\n    const dataInsurance2 = {\r\n      labels: dataLabels,\r\n      datasets: [\r\n        {\r\n          label: \"\", //Income Shortfall',\r\n          data: dataValues2,\r\n          fill: false, // Don't fill area under the line\r\n          borderColor: \"#2B3856\", // Line color\r\n          backgroundColor: dColor,\r\n        },\r\n      ],\r\n    };\r\n\r\n    const needTo = this.props.insNeedLine;\r\n    const images = getLogoAndAppletImage(\r\n      this.props.dataInput,\r\n      this.props.imageRemove,\r\n      this.props.imageAdjust\r\n    );\r\n\r\n    const logoTop = images.logoTop;\r\n    const logoBottom = images.logoBottom;\r\n\r\n    const PDFTopMargin=singleFamily?0:-37  \r\n\r\n    if (noSurvivor) {\r\n      return (\r\n        <div>\r\n          <h3 className=\"ppi1\">{needTo}</h3>\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          <div className=\"exportArea\"/*  style={{ width: \"20%\", float: \"right\", clear: \"left\" }} */>\r\n          \r\n          <div style={{ width: \"100%\", float: \"left\", clear: \"left\" }}>\r\n          \r\n            <input\r\n              className=\"roundedCornerCmd\"\r\n              style={{\r\n             //   width: \"80px\",\r\n                marginTop: PDFTopMargin-35 +\"px\",\r\n                marginRight: \"0px\",\r\n                paddingRight: \"8px\",\r\n                float: \"right\",\r\n              }}\r\n              onClick={this.doPDF}\r\n              type=\"button\"\r\n              value={CONTROLTITLE[lang].pdf}\r\n            /> {<div style={{\r\n              //   width: \"80px\",\r\n                 marginTop: PDFTopMargin-26 +\"px\",\r\n                 marginRight: lang===\"en\"? \"122px\":\"180px\",\r\n                 paddingRight: \"8px\",\r\n                 float: \"right\",\r\n               }}><Info infoIcon={getInfoPDF(lang)}/></div>} \r\n           \r\n          </div>\r\n          <div style={{ width: \"100%\", float: \"left\", clear: \"left\" }}>\r\n            {/* <input type=\"file\" onChange={this.onImageChange} id=\"logo\"/> */}\r\n\r\n            <input\r\n              className=\"roundedCornerCmd\"\r\n              style={{\r\n               // width: \"180px\",\r\n                marginTop: PDFTopMargin + \"px\",\r\n                paddingRight: \"8px\",\r\n                float: \"right\",\r\n              }}\r\n              onClick={this.doCompuLife}\r\n              type=\"button\"\r\n              value={CONTROLTITLE[lang].compulife}\r\n            />\r\n          </div>\r\n          <div style={{ width: \"100%\", float: \"left\", clear: \"left\" }}>\r\n            <input\r\n              className=\"roundedCornerCmd\"\r\n              style={{\r\n           //     width: \"180px\",\r\n                marginTop: \"10px\",\r\n                marginRight: \"0px\",\r\n                paddingRight: \"8px\",\r\n                float: \"right\",\r\n              }}\r\n              onClick={this.doEP}\r\n              type=\"button\"\r\n              value={CONTROLTITLE[lang].ep}\r\n            />\r\n          </div>\r\n          <div style={{ width: \"100%\", float: \"left\", clear: \"left\" }}>\r\n            <input\r\n              className=\"roundedCornerCmd\"\r\n              style={{\r\n            //    width: \"80px\",\r\n                marginTop: \"0px\",\r\n                marginRight: \"0px\",\r\n                paddingRight: \"8px\",\r\n                float: \"right\",\r\n              }}\r\n              onClick={this.doLIFO}\r\n              type=\"button\"\r\n              value={CONTROLTITLE[lang].lifo}\r\n            />\r\n          </div>\r\n          <div style={{ width: \"100%\", float: \"left\", clear: \"left\" }}>\r\n            <input\r\n              className=\"roundedCornerCmd\"\r\n              style={{\r\n            //    width: \"80px\",\r\n                marginTop: \"0px\",\r\n                marginRight: \"0px\",\r\n                paddingRight: \"8px\",\r\n                float: \"right\",\r\n              }}\r\n              onClick={this.doWL}\r\n              type=\"button\"\r\n              value={CONTROLTITLE[lang].wl}\r\n            />\r\n          </div>\r\n          </div>\r\n          <div className=\"contentPres\">\r\n            <h3 className=\"ppi1\">\r\n              {needTo}\r\n              {/* : {dollarEn}\r\n          {formatMoney(\r\n            cleanFormat(this.props.insuranceNeed, formatFr),\r\n            0,\r\n            decimalChar,\r\n            thousands\r\n          ) */}\r\n              <Info infoIcon={getInfoINA(lang)} />\r\n            </h3>\r\n\r\n             \r\n              {/* add logo */}\r\n              {images.logo1stPage}\r\n              {/* add image */}\r\n              {images.applet}\r\n\r\n            \r\n              <h1 className=\"ppi1\">{labelsBilingual.pg1T}</h1>\r\n              <h5 className=\"ppi2\">\r\n                {labelsBilingual.pg1P1} {output.designedFor}\r\n                <br />\r\n                {labelsBilingual.pg1P2} {output.designedBy}\r\n                <br />\r\n                {labelsBilingual.pg1P3} {output.dateApplet}\r\n                <br />\r\n                {labelsBilingual.pg1P4} {output.province}\r\n                <br />\r\n              </h5>\r\n              {logoBottom}\r\n              {/* PAGE 2 profile*/}\r\n              <hr className=\"ppi1\" />\r\n              {logoTop}\r\n              <h2 className=\"ppi1\">{labelsBilingual.pg1T}</h2>\r\n              <div\r\n                style={{\r\n                  overflowX: \"auto\",\r\n                  overflowY: \"hidden\",\r\n                  width: \"100%\",\r\n                }}\r\n              >\r\n                <table className=\"blueTable\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th style={{ width: \"30%\", marginLeft: \"0px\" }}>\r\n                        {labelsBilingual.pg2TabT1}\r\n                      </th>\r\n                      <th style={{ width: \"10%\" }}>\r\n                        {labelsBilingual.pg2TabT2}\r\n                      </th>\r\n                      <th style={{ width: \"18%\" }}>\r\n                        {labelsBilingual.pg2TabT3}\r\n                      </th>\r\n                      <th style={{ width: \"19%\" }}>\r\n                        {singleFamily\r\n                          ? labelsBilingual.pg2TabT4Alt\r\n                          : labelsBilingual.pg2TabT4}\r\n                      </th>\r\n                      <th style={{ width: \"19%\" }}>\r\n                        {labelsBilingual.pg2TabT5}\r\n                      </th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {output.clients.map((item) => (\r\n                      <tr key={item.id}>\r\n                        <td>\r\n                          {item.memberKey === MEMBER.CLIENT.Key\r\n                            ? MEMBER.CLIENT.value[lang] + getName(item.name,lang)\r\n                            : item.memberKey === MEMBER.SPOUSE.Key\r\n                            ? MEMBER.SPOUSE.value[lang] + getName(item.name,lang)\r\n                            : (item.memberKey === MEMBER.CHILD.Key? MEMBER.CHILD.value[lang] + getName(item.name,lang):MEMBER.DEPENDENT_ADULT.value[lang] + getName(item.name,lang))}\r\n                        </td>\r\n                        <td className=\"textalignright\">{item.age}</td>\r\n                        <td className=\"textalignright\">\r\n                        {formatted(item.income,lang)}\r\n                        {/* {dollarFr}\r\n                          {formatMoney(\r\n                            item.income,\r\n                            0,\r\n                            decimalChar,\r\n                            thousands\r\n                          )} */}\r\n                        </td>\r\n                        <td className=\"textalignright\">\r\n                          {singleFamily\r\n                            ? item.memberKey === MEMBER.CLIENT.Key\r\n                              ? \"-\"\r\n                              : item.ret-item.age //protectionPeriod\r\n                            : item.ret}\r\n                        </td>\r\n                        <td className=\"textalignright\">\r\n                          {item.memberKey === MEMBER.CLIENT.Key\r\n                            ? numFormat(\r\n                                clients[QUOTE_CLIENT].avgTaxRate,\r\n                                false,\r\n                                3, thousands,\r\n                                decimalChar\r\n                              )\r\n                            : item.memberKey === MEMBER.SPOUSE.Key\r\n                            ? numFormat(\r\n                                clients[QUOTE_SPOUSE].avgTaxRate,\r\n                                false,\r\n                                3,thousands,\r\n                                decimalChar\r\n                              )\r\n                            : numFormat(\r\n                                clients[item.id - 1].avgTaxRate,\r\n                                false,\r\n                                3,thousands,\r\n                                decimalChar\r\n                              )}\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                    {/*}\t\t\t<tr>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<td>Client</td><td className=\"textalignrightwidth110\">{dollarEn}{formatMoney(Income, 0,decimalChar,thousands)}</td><td className=\"textalignright\">{retAge}</td><td className=\"textalignright\">{retAge}</td></tr>\r\n\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<td>Spouse</td><td className=\"textalignrightwidth110\">{dollarEn}{formatMoney(Income2, 0,decimalChar,thousands)}</td><td className=\"textalignright\">{retAge2}</td><td className=\"textalignright\">{retAge}</td></tr>\r\n\t\t\t\t\t\t*/}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n              {/* financial summary\r\n               */}\r\n              <h4 className=\"ppi1\"></h4>\r\n              <div className=\"tableTitle\">{labelsBilingual.pg2T3}</div>\r\n              <table className=\"incomePosition\">\r\n                <tbody>\r\n                  <tr>\r\n                    <td className=\"paddingleft25\">{labelsBilingual.pg2P5}</td>\r\n                    <td className=\"textalignright\">\r\n                      {formatted(output.totalAssetExcludeInsurance,lang)}\r\n                      {/* {dollarEn}\r\n                      {formatMoney(\r\n                        output.totalAssetExcludeInsurance,\r\n                        0,\r\n                        decimalChar,\r\n                        thousands\r\n                      )} */}\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td className=\"paddingleft25\">{labelsBilingual.pg2P6}</td>\r\n                    <td className=\"textalignright\">\r\n                    {formatted(output.totalLiabExcludeDeathRelated,lang)}\r\n                      {/* {dollarEn}\r\n                      {formatMoney(\r\n                        output.totalLiabExcludeDeathRelated,\r\n                        0,\r\n                        decimalChar,\r\n                        thousands\r\n                      )} */}\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td\r\n                      className=\"paddingleft25\"\r\n                      style={{ textAlign: \"right\" }}\r\n                    >\r\n                      {labelsBilingual.pg2P7}\r\n                    </td>\r\n                    <td className=\"textalignright\">\r\n                    {formatted(output.totalAssetExcludeInsurance -\r\n                          output.totalLiabExcludeDeathRelated,lang)}\r\n                    \r\n                    {/*   {dollarEn}\r\n                      {formatMoney(\r\n                        output.totalAssetExcludeInsurance -\r\n                          output.totalLiabExcludeDeathRelated,\r\n                        0,\r\n                        decimalChar,\r\n                        thousands\r\n                      )} */}\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td className=\"paddingleft25\">{labelsBilingual.pg2P8.replace(\"yyy\",formatted(output.totalAssetInsurance + output.govDB,lang))}</td>\r\n                    <td className=\"textalignright\">\r\n                    {formatted(output.totalAssetInsurance + output.govDB,lang)}\r\n                    \r\n                    {/*   {dollarEn}\r\n                      {formatMoney(\r\n                        output.totalAssetInsurance + output.govDB,\r\n                        0,\r\n                        decimalChar,\r\n                        thousands\r\n                      )} */}\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td className=\"paddingleft25\">{labelsBilingual.pg2P9}</td>\r\n                    <td className=\"textalignright\">\r\n                    {formatted(output.totalLiab - output.totalLiabExcludeDeathRelated,lang)}\r\n                    {/* \r\n                      {dollarEn}\r\n                      {formatMoney(\r\n                        output.totalLiab - output.totalLiabExcludeDeathRelated,\r\n                        0,\r\n                        decimalChar,\r\n                        thousands\r\n                      )} */}\r\n                    </td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n              {/* assumptions <h2 className=\"ppi1\">{labelsBilingual.pg2T2}</h2> */}\r\n              <h4 className=\"ppi1\"></h4>\r\n              <div className=\"tableTitle\">{labelsBilingual.pg2T2}</div>\r\n              <table className=\"incomePosition\">\r\n                <tbody>\r\n                  <tr>\r\n                    <td className=\"paddingleft25\">\r\n                      {labelsBilingual.pg7TabRow4}\r\n                    </td>\r\n                    <td className=\"textalignright\">\r\n                      {numFormat(output.infRate, false, 3,thousands, decimalChar)}\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td className=\"paddingleft25\">\r\n                      {labelsBilingual.pg7TabRow5}\r\n                    </td>\r\n                    <td className=\"textalignright\">\r\n                      {numFormat(output.invRate, false, 3,thousands, decimalChar)}\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td className=\"paddingleft25\">\r\n                      {labelsBilingual.pg2TabT6}\r\n                    </td>\r\n                    <td className=\"textalignright\">\r\n                      {numFormat(\r\n                        this.props.dataInput.Presentations[0].taxRate,\r\n                        false,\r\n                        3,thousands,\r\n                        decimalChar\r\n                      )}\r\n                    </td>\r\n                  </tr>\r\n                  <tr></tr>\r\n                  <tr></tr>\r\n                  <tr></tr>\r\n                  {/* <tr >\r\n                  <td className=\"backgroundcolorFFFFFF\" colSpan=\"2\" >\r\n                    {labelsBilingual.pg2Tab3}\r\n                  </td> \r\n                </tr>*/}\r\n                </tbody>\r\n              </table>\r\n              <p className=\"ppi1\" style={{ width: \"90%\" }}>\r\n                {labelsBilingual.pg2Tab2}\r\n              </p>\r\n              <p className=\"ppi1\" style={{ width: \"90%\" }}>\r\n                {labelsBilingual.pg2Tab3}\r\n              </p>\r\n              {/* Notes */}\r\n              {/* <h4 className=\"ppi1\"></h4>\r\n              <div className=\"tableTitle\">{labelsBilingual.pg9T}</div>\r\n              <p className=\"ppi1\">{labelsBilingual.pg9P1}</p>\r\n              <p />\r\n */}              {logoBottom}\r\n              {/* PAGE 3 Family Cash Needs at Death Combine with Income needs*/}\r\n              <hr className=\"ppi1\" />\r\n              {logoTop}\r\n              <br />\r\n              <h2 className=\"ppi1\">{labelsBilingual.pg3T}</h2>\r\n              <p className=\"ppi1\">{labelsBilingual.pg3P1}</p>\r\n              <div\r\n                style={{\r\n                  overflowX: \"auto\",\r\n                  overflowY: \"hidden\",\r\n                  width: \"100%\",\r\n                }}\r\n              >\r\n                <div className=\"tableTitle\">{labelsBilingual.pg3TabT}</div>\r\n                <table className=\"cashNeeds\">\r\n                  <thead></thead>\r\n                  <tbody>\r\n                    {output.liabilities.map((item) => (\r\n                      <tr key={item.name}>\r\n                        <td style={{ width: \"50%\" }}>{item.name}</td>\r\n                        <td className=\"textalignright\">\r\n                        {formatted(item.value,lang)}\r\n                    \r\n                    {/*       {dollarEn}{formatMoney(item.value, 0, decimalChar, thousands)} */}\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                    <tr className=\"backgroundcolorDCE5F0\">\r\n                      <td>\r\n                        <strong>{labelsBilingual.pg3TabRTot}</strong>\r\n                      </td>\r\n                      <td className=\"textalignrightpaddingright20\">\r\n                        <strong>\r\n                        {formatted(output.totalLiab,lang)}\r\n                    \r\n                    {/*       {dollarEn}\r\n                          {formatMoney(\r\n                            output.totalLiab,\r\n                            0,\r\n                            decimalChar,\r\n                            thousands\r\n                          )} */}\r\n                        </strong>\r\n                      </td>\r\n                    </tr>\r\n                    {/*\t<tr className=\"backgroundcolorDCE5F0\">\r\n\t\t\t\t\t\t\t\t<td><strong>Permanent Cash Needs <sup>p</sup></strong></td>\r\n\t\t\t\t\t\t\t\t\t\t<td className=\"textalignright\"><strong>{dollarEn}200 <sup>p</sup></strong></td>\r\n\t\t\t\t\t\t\t\t\t</tr>*/}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n              {/* combined with pg 3 PAGE 4 Family Income Needs at Death*/}\r\n              {/* <br />\r\n          <hr className=\"ppi1\" />\r\n          <h2 className=\"ppi1\">{labelsBilingual.pg4T}</h2>\r\n          <p className=\"ppi1\">{labelsBilingual.pg4P1}</p>*/}\r\n              <h4 className=\"ppi1\"></h4>\r\n              <div\r\n                style={{\r\n                  overflowX: \"auto\",\r\n                  overflowY: \"hidden\",\r\n                  width: \"100%\",\r\n                }}\r\n              >\r\n                <div className=\"tableTitle\">{labelsBilingual.pg4TabT}</div>\r\n                <table className=\"incomeNeeds\">\r\n                  <thead></thead>\r\n                  <tbody>\r\n                    <tr>\r\n                      <td className=\"paddingleft25\" style={{ width: \"70%\" }}>\r\n                        {labelsBilingual.pg4TabRow1}\r\n                      </td>\r\n                      <td className=\"textalignright\">\r\n                      {formatted( output.Income + output.Income2,lang)}\r\n                    \r\n                    {/*     {dollarEn}\r\n                        {formatMoney(\r\n                          output.Income + output.Income2,\r\n                          0,\r\n                          decimalChar,\r\n                          thousands\r\n                        )} */}\r\n                      </td>\r\n                    </tr>\r\n                    <tr className=\"backgroundcolorFFFFFF\">\r\n                      <td>\r\n                        <br />\r\n                        {labelsBilingual.pg4TabRow2}\r\n                      </td>\r\n                      <td></td>\r\n                    </tr>\r\n\r\n                    {output.percent2.length > 0 && (\r\n                      <tr>\r\n                        <td className=\"paddingleft25\">\r\n                          {labelsBilingual.pg4TabRow3}\r\n                        </td>\r\n                        <td className=\"textalignright\">{output.percent1}%</td>\r\n                      </tr>\r\n                    )}\r\n                    {output.percent2.length > 0 && (\r\n                      <tr>\r\n                        <td className=\"paddingleft25\">\r\n                          {labelsBilingual.pg4TabRow4}\r\n                        </td>\r\n                        <td className=\"textalignright\">{output.percent2.map((item) => <span>{item}% </span>)}</td>\r\n                      </tr>\r\n                    )}\r\n                    {output.percent2.length === 0 && (\r\n                      <tr>\r\n                        <td className=\"paddingleft25\">\r\n                          {labelsBilingual.pg4TabRow4}\r\n                        </td>\r\n                        <td className=\"textalignright\">{output.percent1}%</td>\r\n                      </tr>\r\n                    )}\r\n\r\n                    <tr className=\"backgroundcolorFFFFFF\">\r\n                      <td></td>\r\n                      <td></td>\r\n                    </tr>\r\n                    <tr className=\"backgroundcolorFFFFFF\">\r\n                      <td>{labelsBilingual.pg4TabRow5}</td>\r\n                      <td></td>\r\n                    </tr>\r\n                    {output.percent2.length > 0 && (\r\n                      <tr>\r\n                        <td className=\"paddingleft25\">\r\n                          {labelsBilingual.pgTabRowMoreIncome}\r\n                        </td>\r\n                        <td className=\"textalignright\">\r\n                        {formatted(output.percentNeed1,lang)}\r\n                    \r\n                    {/*       {dollarEn}\r\n                          {formatMoney(\r\n                            output.percentNeed1,\r\n                            0,\r\n                            decimalChar,\r\n                            thousands\r\n                          )} */}\r\n                        </td>\r\n                      </tr>\r\n                    )}\r\n                    {output.percent2.length > 0 && (\r\n                      <tr>\r\n                        <td className=\"paddingleft25\">\r\n                          {labelsBilingual.pgTabRowThereAfter}\r\n                        </td>\r\n                        <td className=\"textalignright\">\r\n                        {formatted(output.percentNeed2.reduce((a, b) => a + b, 0),lang)}\r\n                    \r\n                    {/*       {dollarEn}\r\n                          {formatMoney(\r\n                            output.percentNeed2.reduce((a, b) => a + b, 0),\r\n                            0,\r\n                            decimalChar,\r\n                            thousands\r\n                          )} */}\r\n                        </td>\r\n                      </tr>\r\n                    )}\r\n                    {output.percent2.length === 0 && (\r\n                      <tr>\r\n                        <td className=\"paddingleft25\">\r\n                          {labelsBilingual.pgTabRowThereAfter}\r\n                        </td>\r\n                        <td className=\"textalignright\">\r\n                        {formatted(output.percentNeed1,lang)}\r\n                    \r\n                          {/* {dollarEn}\r\n                          {formatMoney(\r\n                            output.percentNeed1,\r\n                            0,\r\n                            decimalChar,\r\n                            thousands\r\n                          )} */}\r\n                        </td>\r\n                      </tr>\r\n                    )}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n              <br />\r\n              <hr className=\"ppi1\" />\r\n              {logoBottom}\r\n              {/* PAGE 5 Family Cash Sourcess at Death*/}\r\n              {logoTop}\r\n              <h2 className=\"ppi1\">{labelsBilingual.pg5T}</h2>\r\n              <div\r\n                style={{\r\n                  overflowX: \"auto\",\r\n                  overflowY: \"hidden\",\r\n                  width: \"100%\",\r\n                }}\r\n              >\r\n                <table className=\"tableTitle\" style={{ width: \"90%\"}}>\r\n                <tr >  <td  style={{ width: \"50%\",border:\"none\" }}>{labelsBilingual.pg5TabT}</td>\r\n                  <td style={{ width: \"25%\",border:\"none\" }}>\r\n                    {labelsBilingual.pg5TabT2}\r\n                  </td>\r\n                  <td style={{ width: \"25%\",border:\"none\" }}>\r\n                    {labelsBilingual.pg5TabT3}\r\n                  </td>    </tr>\r\n                 </table>\r\n                \r\n               <table className=\"cashSources\">\r\n                  <tbody>\r\n                    {/* add gov db*/}\r\n                    <tr>\r\n                      <td style={{ height: \"1px\", width: \"50%\" }}>\r\n                        {labelsBilingual.pg5TabRow1}\r\n                      </td>\r\n                      <td\r\n                        className=\"textalignright\"\r\n                        style={{ height: \"1px\", width: \"25%\" }}\r\n                      >\r\n                        {formatted(output.govDB,lang)}\r\n                    \r\n                    {/*     {dollarEn}{formatMoney(output.govDB, 0, decimalChar, thousands)} */}\r\n                      </td>\r\n                      <td\r\n                        className=\"textalignright\"\r\n                        style={{ height: \"1px\", width: \"25%\" }}\r\n                      >\r\n                        {formatted(output.govDB,lang)}\r\n                    \r\n                    {/*     {dollarEn}{formatMoney(output.govDB, 0, decimalChar, thousands)} */}\r\n                      </td>\r\n                    </tr>\r\n                    {output.assets.map((item) => (\r\n                      <tr key={item.name}>\r\n                        <td style={{ height: \"1px\", width: \"50%\" }}>\r\n                          {item.name}\r\n                        </td>\r\n                        <td\r\n                          className=\"textalignright\"\r\n                          style={{ height: \"1px\", width: \"25%\" }}\r\n                        >\r\n                          {formatted(item.value,lang)}\r\n                    \r\n                    {/*       {dollarEn}{formatMoney(item.value, 0, decimalChar, thousands)} */}\r\n                        </td>\r\n                        <td\r\n                          className=\"textalignright\"\r\n                          style={{ height: \"1px\", width: \"25%\" }}\r\n                        >\r\n                          {item.disposeValue > 0\r\n                            ? \r\n                            formatted(item.disposeValue,lang)\r\n                              /* {dollarEn} +\r\n                              formatMoney(\r\n                                item.disposeValue,\r\n                                0,\r\n                                decimalChar,\r\n                                thousands\r\n                              ) */\r\n                            : \"\"}\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                    <tr className=\"backgroundcolorDCE5F0\">\r\n                      <td>{labelsBilingual.pg5TabRow3}</td>\r\n                      {/* <td className=\"textalignright\">\r\n                    {dollarEn}{formatMoney(output.totalAsset, 0, decimalChar, thousands)}\r\n                  </td> */}\r\n                      <td className=\"textalignright\">\r\n                      {formatted(output.totalAsset,lang)}\r\n                    {/* \r\n                        {dollarEn}\r\n                        {formatMoney(\r\n                          output.totalAsset,\r\n                          0,\r\n                          decimalChar,\r\n                          thousands\r\n                        )} */}\r\n                      </td>\r\n                      <td className=\"textalignright\">\r\n                      {formatted(output.totalDisposeAsset,lang)}\r\n                    \r\n                    {/*     {dollarEn}\r\n                        {formatMoney(\r\n                          output.totalDisposeAsset,\r\n                          0,\r\n                          decimalChar,\r\n                          thousands\r\n                        )} */}\r\n                      </td>\r\n                    </tr>\r\n                    <tr className=\"backgroundcolorDCE5F0\">\r\n                      <td>{labelsBilingual.pg5TabRow4}</td>\r\n                      <td> </td>\r\n                      <td\r\n                        className=\"textalignright\"\r\n                        style={{ height: \"1px\", width: \"25%\" }}\r\n                      >\r\n                        {formatted(output.totalLiab,lang)}\r\n                    {/* \r\n                        {dollarEn}\r\n                        {formatMoney(\r\n                          output.totalLiab,\r\n                          0,\r\n                          decimalChar,\r\n                          thousands\r\n                        )} */}\r\n                      </td>\r\n                    </tr>\r\n                    <tr>\r\n                      <td>{labelsBilingual.pg5TabRow5}</td>\r\n                      <td> </td>\r\n                      <td className=\"textalignright\">\r\n                      {formatted(output.totalDisposeAsset - output.totalLiab,lang)}\r\n                    \r\n                    {/*     {dollarEn}\r\n                        {formatMoney(\r\n                          output.totalDisposeAsset - output.totalLiab,\r\n                          0,\r\n                          decimalChar,\r\n                          thousands\r\n                        )} */}\r\n                      </td>\r\n                    </tr>\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n              <hr className=\"ppi1\" />\r\n              {logoBottom}\r\n              {/* PAGE 6 Family Income Sources at Death*/}\r\n              {logoTop}\r\n              <br />\r\n              <h2 className=\"ppi1\">{labelsBilingual.pg6T}</h2>\r\n              <div\r\n                style={{\r\n                  overflowX: \"auto\",\r\n                  overflowY: \"hidden\",\r\n                  width: \"100%\",\r\n                }}\r\n              >\r\n                {/* <div className=\"tableTitle\">{labelsBilingual.pg6TabT}</div> */}\r\n                <table className=\"tableTitle\" style={{ width: \"90%\"}}>\r\n                <tr >  <td  style={{ width: \"51%\",border:\"none\" }}>{labelsBilingual.pg6TabT}</td>\r\n                  <td style={{ width: \"14%\",border:\"none\" }}>\r\n                    {labelsBilingual.pg5TabT2}\r\n                  </td>\r\n                  <td style={{ width: \"25%\",border:\"none\" }}>\r\n                    {labelsBilingual.pg5TabT3}\r\n                  </td>    </tr>\r\n                 </table>\r\n                \r\n           \r\n\r\n\r\n                <table className=\"incomeSources\">\r\n                  <tbody>\r\n                    {output.sources.map((item) => (\r\n                      <tr key={item.name}>\r\n                        <td style={{ width: \"51%\" }}>{item.name}</td>\r\n                        <td className=\"textalignright\"  style={{ width: \"14%\" }}>\r\n                        {formatted(item.value,lang)}\r\n                          </td>\r\n                        <td className=\"textalignright\"  style={{ width: \"25%\" }}>\r\n                        {formatted(item.valueAtDeath,lang)}\r\n                          </td>\r\n                      </tr>\r\n                    ))}\r\n                    <tr className=\"backgroundcolorFFFFFF\">\r\n                      <td colSpan =\"2\"></td>\r\n                      <td colSpan =\"2\"></td>\r\n                    </tr>\r\n                    <tr className=\"backgroundcolorFFFFFF\">\r\n                    <td colSpan =\"2\">{labelsBilingual.pg6TabRow1}</td>\r\n                    <td colSpan =\"2\"></td>\r\n                    </tr>\r\n                    {output.percent2.length > 0 && (\r\n                      <tr>\r\n                        <td colSpan =\"2\" className=\"paddingleft25\">\r\n                          {labelsBilingual.pg6TabRow2}\r\n                        </td>\r\n                        <td colSpan =\"2\" className=\"textalignright\">\r\n                          <span\r\n                            style={{ fontSize: \"10px\", marginRight: \"30px\" }}\r\n                          >\r\n                            ({labelsBilingual.pg6Net + \" \"}\r\n                            {formatMoney(\r\n                              //output.totalSourceATax,\r\n                              output.totalSourceATaxAtDeath,\r\n                              0,\r\n                              decimalChar,\r\n                              thousands\r\n                            )}\r\n                            )\r\n                          </span>\r\n                          {/* {formatted(output.totalSource,lang)} */}\r\n                          {formatted(output.totalSourceAtDeath,lang)}\r\n                    \r\n                    {/*       {dollarEn}\r\n                          {formatMoney(\r\n                            output.totalSource,\r\n                            0,\r\n                            decimalChar,\r\n                            thousands\r\n                          )} */}\r\n                        </td>\r\n                      </tr>\r\n                    )}\r\n                    {output.percent2.length > 0 && (\r\n                      <tr>\r\n                        <td colSpan =\"2\" className=\"paddingleft25\">\r\n                          {!singleFamily?labelsBilingual.pgTabRowThereAfter: labelsBilingual.pg5TabRow7}\r\n                        </td>\r\n                        <td colSpan =\"2\" className=\"textalignright\">\r\n                          <span\r\n                            style={{ fontSize: \"10px\", marginRight: \"30px\" }}\r\n                          >\r\n                            ({labelsBilingual.pg6Net + \" \"}\r\n                            {formatMoney(\r\n                              //output.totalSource2ATax,\r\n                              output.totalSource2ATaxAtDeath,\r\n                              0,\r\n                              decimalChar,\r\n                              thousands\r\n                            )}\r\n                            )\r\n                          </span>\r\n                          {/* {formatted(output.totalSource2,lang)} */}\r\n                          {formatted(output.totalSource2AtDeath,lang)}\r\n                    \r\n                    {/*       {dollarEn}\r\n                          {formatMoney(\r\n                            output.totalSource2,\r\n                            0,\r\n                            decimalChar,\r\n                            thousands\r\n                          )} */}\r\n                        </td>\r\n                      </tr>\r\n                    )}\r\n                    {output.percent2.length === 0 && (\r\n                      <tr>\r\n                        <td colSpan =\"2\" className=\"paddingleft25\">\r\n                          {!singleFamily?labelsBilingual.pgTabRowThereAfter: labelsBilingual.pg5TabRow7}\r\n                        </td>\r\n                        <td colSpan =\"2\" className=\"textalignright\">\r\n                        {/* {formatted(output.totalSource,lang)} */}\r\n                        {formatted(output.totalSourceAtDeath,lang)}\r\n                    \r\n                    {/*       {dollarEn}\r\n                          {formatMoney(\r\n                            output.totalSource,\r\n                            0,\r\n                            decimalChar,\r\n                            thousands\r\n                          )} */}\r\n                        </td>\r\n                      </tr>\r\n                    )}\r\n                    <tr className=\"backgroundcolorFFFFFF\">\r\n                    <td colSpan =\"2\"></td>\r\n                    <td colSpan =\"2\"></td>\r\n                    </tr>\r\n                    <tr className=\"backgroundcolorFFFFFF\">\r\n                    <td colSpan =\"2\">{labelsBilingual.pg6TabRow4}</td>\r\n                    <td colSpan =\"2\"></td>\r\n                    </tr>\r\n                    {output.percent2.length > 0 && (\r\n                      <tr>\r\n                        <td colSpan =\"2\" className=\"paddingleft25\">\r\n                          {labelsBilingual.pgTabRowMoreIncome}\r\n                        </td>\r\n\r\n\r\n                        <td colSpan =\"2\" className=\"textalignright\">\r\n                          <span\r\n                            style={{ fontSize: \"10px\", marginRight: \"20px\" }}\r\n                          >\r\n              \r\n\r\n                            ({\r\n              formatMoney(output.percentNeed1, 0, decimalChar, thousands)\r\n            } \r\n            - \r\n            {             \r\n              /* formatMoney(output.totalSourceATax, 0, decimalChar, thousands) */\r\n              formatMoney(output.totalSourceATaxAtDeath, 0, decimalChar, thousands)\r\n            })\r\n\r\n\r\n\r\n                          </span>\r\n                         {/*  {formatted(output.totalSource2,lang)} */}\r\n                    \r\n                    {/*       {dollarEn}\r\n                          {formatMoney(\r\n                            output.totalSource2,\r\n                            0,\r\n                            decimalChar,\r\n                            thousands\r\n                          )} */}\r\n                      {/*   </td>\r\n\r\n\r\n\r\n\r\n                        <td className=\"textalignrightbackgroundcolorDCE5F0\"> */}\r\n                          <strong>\r\n                          {/* {formatted(Math.max(0, output.percentNeed1 - output.totalSourceATax),lang)} */}\r\n                          {formatted(Math.max(0, output.percentNeed1 - output.totalSourceATaxAtDeath),lang)}\r\n                    \r\n                    {/*         {dollarEn}\r\n                            {formatMoney(\r\n                              Math.max(\r\n                                0,\r\n                                //output.percentNeed1 - output.totalSourceATax\r\n                                output.totalDesiredGrossIncome1- output.totalSource1\r\n                              ),\r\n                              0,\r\n                              decimalChar,\r\n                              thousands\r\n                            )} */}\r\n                          </strong>\r\n                        </td>\r\n                      </tr>\r\n                    )}\r\n                    {output.percent2.length > 0 && (\r\n                      <tr>\r\n                        <td colSpan =\"2\" className=\"paddingleft25\">\r\n                        {!singleFamily?labelsBilingual.pgTabRowThereAfter: labelsBilingual.pg5TabRow7}\r\n                        </td>\r\n                        <td colSpan =\"2\" className=\"textalignrightbackgroundcolorDCE5F0\">\r\n  <span\r\n                            style={{ fontSize: \"10px\", marginRight: \"30px\" }}\r\n                          >\r\n              \r\n\r\n                            ({\r\n              formatMoney(output.percentNeed2.reduce((a, b) => a + b, 0), 0, decimalChar, thousands)\r\n            } \r\n            - \r\n            {             \r\n              /* formatMoney(output.totalSource2ATax, 0, decimalChar, thousands) */\r\n              formatMoney(output.totalSource2ATaxAtDeath, 0, decimalChar, thousands)\r\n            })\r\n\r\n</span>\r\n                          <strong>\r\n                          {/* {formatted(Math.max(0, output.percentNeed2.reduce((a, b) => a + b, 0) - output.totalSource2ATax),lang)} */}\r\n                          {formatted(Math.max(0, output.percentNeed2.reduce((a, b) => a + b, 0) - output.totalSource2ATaxAtDeath),lang)}\r\n                    \r\n                    {/*         {dollarEn}\r\n                            {formatMoney(\r\n                              Math.max(\r\n                                0,\r\n                                //output.percentNeed2.reduce((a, b) => a + b, 0) - output.totalSource2ATax\r\n                                output.totalDesiredGrossIncome2- output.totalSource2\r\n                              ),\r\n                              0,\r\n                              decimalChar,\r\n                              thousands\r\n                            )} */}\r\n                          </strong>\r\n                        </td>\r\n                      </tr>\r\n                    )}\r\n                    {output.percent2.length === 0 && (\r\n                      <tr>\r\n                        <td colSpan =\"2\" className=\"paddingleft25\">\r\n                          {!singleFamily?labelsBilingual.pgTabRowThereAfter: labelsBilingual.pg5TabRow7}\r\n                        </td>\r\n                        <td colSpan =\"2\" className=\"textalignrightbackgroundcolorDCE5F0\">\r\n\r\n\r\n                       {/*  <td className=\"textalignright\"> */}\r\n                          <span\r\n                            style={{ fontSize: \"10px\", marginRight: \"30px\" }}\r\n                          >\r\n              \r\n\r\n                            ({\r\n              formatMoney(output.percentNeed1, 0, decimalChar, thousands)\r\n            } \r\n            - \r\n            {             \r\n              /* formatMoney(output.totalSourceATax, 0, decimalChar, thousands) */\r\n              formatMoney(output.totalSourceATaxAtDeath, 0, decimalChar, thousands)\r\n            })\r\n\r\n\r\n\r\n                          </span>\r\n                         \r\n\r\n                          <strong>\r\n                          {/* {formatted(Math.max(0, output.percentNeed1 - output.totalSourceATax),lang)}{/* output.totalDesiredGrossIncome - output.totalSource,lang)} */} */}\r\n                          {formatted(Math.max(0, output.percentNeed1 - output.totalSourceATaxAtDeath),lang)}{/* output.totalDesiredGrossIncome - output.totalSource,lang)} */}\r\n                    \r\n                    {/*         {dollarEn}\r\n                            {formatMoney(\r\n                              Math.max(\r\n                                0,\r\n                                //output.percentNeed1 - output.totalSource\r\n                                output.totalDesiredGrossIncome - output.totalSource\r\n                              ),\r\n                              0,\r\n                              decimalChar,\r\n                              thousands\r\n                            )} */}\r\n                          </strong>\r\n                        </td>\r\n                      </tr>\r\n                    )}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n              {/* PAGE 7 life i anal*/}\r\n              {/* <br />\r\n          <hr className=\"ppi1\" />\r\n          <h2 className=\"ppi1\">{labelsBilingual.pg7T}</h2>\r\n          <div\r\n            style={{ overflowX: \"auto\", overflowY: \"hidden\", width: \"100%\" }}\r\n          >\r\n            <div className=\"tableTitle\">{labelsBilingual.pg7TabT}</div>\r\n\r\n            <table className=\"incomePosition\">\r\n              <tbody>\r\n                <tr className=\"backgroundcolorFFFFFF\">\r\n                  <td style={{ width: \"70%\" }}> </td>\r\n                  <td> </td>\r\n                </tr>\r\n                <tr>\r\n                  <td className=\"backgroundcolorFFFFFF\">\r\n                    {labelsBilingual.pg7TabRow1}\r\n                  </td>\r\n                  <td className=\"backgroundcolorFFFFFF\"></td>\r\n                </tr>\r\n                {output.percent2 > 0 && (\r\n                  <tr>\r\n                    <td className=\"paddingleft25\">\r\n                      {labelsBilingual.pg7TabRow2}\r\n                    </td>\r\n                    <td className=\"textalignright\">\r\n                      {dollarEn}\r\n                      {formatMoney(\r\n                        Math.max(0, output.percentNeed1 - output.totalSource),\r\n                        0,\r\n                        decimalChar,\r\n                        thousands\r\n                      )}\r\n                    </td>\r\n                  </tr>\r\n                )}\r\n                {output.percent2 > 0 && (\r\n                  <tr>\r\n                    <td className=\"paddingleft25\">\r\n                      {labelsBilingual.pgTabRowThereAfter}\r\n                    </td>\r\n                    <td className=\"textalignright\">\r\n                      {dollarEn}\r\n                      {formatMoney(\r\n                        Math.max(0, output.percentNeed2 - output.totalSource2),\r\n                        0,\r\n                        decimalChar,\r\n                        thousands\r\n                      )}\r\n                    </td>\r\n                  </tr>\r\n                )}\r\n                {output.percent2 === 0 && (\r\n                  <tr>\r\n                    <td className=\"paddingleft25\">\r\n                      {labelsBilingual.pgTabRowThereAfter}\r\n                    </td>\r\n                    <td className=\"textalignright\">\r\n                      {dollarEn}\r\n                      {formatMoney(\r\n                        Math.max(0, output.percentNeed1 - output.totalSource),\r\n                        0,\r\n                        decimalChar,\r\n                        thousands\r\n                      )}\r\n                    </td>\r\n                  </tr>\r\n                )}\r\n\r\n                <tr>\r\n                  <td className=\"paddingleft25\">\r\n                    {labelsBilingual.pg7TabRow4}\r\n                  </td>\r\n                  <td className=\"textalignright\">{output.infRate}%</td>\r\n                </tr>\r\n                <tr>\r\n                  <td className=\"paddingleft25\">\r\n                    {labelsBilingual.pg7TabRow5}\r\n                  </td>\r\n                  <td className=\"textalignright\">{output.invRate}%</td>\r\n                </tr>\r\n                <tr className=\"backgroundcolorFFFFFF\">\r\n                  <td> </td>\r\n                  <td> </td>\r\n                </tr>\r\n                <tr>\r\n                  <td className=\"backgroundcolorFFFFFF\">\r\n                    {labelsBilingual.pg7TabRow6}\r\n                  </td>\r\n                  <td className=\"backgroundcolorFFFFFF\"> </td>\r\n                </tr>\r\n                <tr>\r\n                  <td>\r\n                    <strong></strong>\r\n                    {labelsBilingual.pg7TabRow7} {this.props.LE})\r\n                  </td>\r\n                  <td className=\"textalignright\">\r\n                    {dollarEn}\r\n                    {formatMoney(\r\n                      Math.max(\r\n                        0,\r\n                        output.insNeedLE + output.totalAsset - output.totalLiab\r\n                      ),\r\n                      0,\r\n                      decimalChar,\r\n                      thousands\r\n                    )}\r\n                  </td>\r\n                </tr>\r\n                <tr>\r\n                  <td>\r\n                    <strong></strong>\r\n                    {labelsBilingual.pg7TabRow8}\r\n                  </td>\r\n                  <td className=\"textalignright\">\r\n                    {dollarEn}\r\n                    {formatMoney(\r\n                      Math.max(\r\n                        0,\r\n                        output.insNeedRet + output.totalAsset - output.totalLiab\r\n                      ),\r\n                      0,\r\n                      decimalChar,\r\n                      thousands\r\n                    )}\r\n                  </td>\r\n                </tr>\r\n                {output.hasChild && output.ygChild < maxDur && (\r\n                  <tr>\r\n                    <td>\r\n                      <strong></strong>\r\n                      {labelsBilingual.pg7TabRow9}\r\n                    </td>\r\n                    <td className=\"textalignright\">\r\n                      {dollarEn}\r\n                      {formatMoney(\r\n                        Math.max(\r\n                          0,\r\n                          output.insNeedYgChild25 +\r\n                            output.totalAsset -\r\n                            output.totalLiab\r\n                        ),\r\n                        0,\r\n                        decimalChar,\r\n                        thousands\r\n                      )}\r\n                    </td>\r\n                  </tr>\r\n                )}\r\n                {output.hasChild && output.ygChild < orphAge && (\r\n                  <tr>\r\n                    <td>\r\n                      <strong></strong>\r\n                      {labelsBilingual.pg7TabRow10}\r\n                    </td>\r\n                    <td className=\"textalignright\">\r\n                      {dollarEn}\r\n                      {formatMoney(\r\n                        Math.max(\r\n                          0,\r\n                          output.insNeedYgChild18 +\r\n                            output.totalAsset -\r\n                            output.totalLiab\r\n                        ),\r\n                        0,\r\n                        decimalChar,\r\n                        thousands\r\n                      )}\r\n                    </td>\r\n                  </tr>\r\n                )}\r\n              </tbody>\r\n            </table>\r\n          </div> */}\r\n              {/* PAGE 7 chart*/}\r\n              {/* <div style={{ color: \"darkBlue\", marginTop: \"55px\" }}>\r\n            <br />\r\n            <div style={{ marginLeft: \"20px\", width: \"90%\" }}>\r\n              <div style={{ width: \"75%\" }}>\r\n                <article\r\n                  id=\"bar1\"\r\n                  className=\"canvas-container\"\r\n                  style={{ height: \"200px\" }}\r\n                >\r\n                  <Bar data={dataInsurance} options={options} />\r\n                </article>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <br />\r\n          <br /> */}\r\n              <hr className=\"ppi1\" />\r\n              {logoBottom}\r\n              {/* PAGE 8 life i anal 2*/}\r\n              {logoTop}\r\n              <br />\r\n              <h2 className=\"ppi1\"> {labelsBilingual.pg8T}</h2>\r\n              <div className=\"tableTitle\">{labelsBilingual.pg8TabT}</div>\r\n              <div\r\n                style={{\r\n                  overflowX: \"auto\",\r\n                  overflowY: \"hidden\",\r\n                  width: \"100%\",\r\n                }}\r\n              >\r\n                <table className=\"incomePosition\">\r\n                  <tbody>\r\n                    <tr>\r\n                      <td width=\"70%\">{labelsBilingual.pg8TabRow1}</td>\r\n                      <td className=\"textalignright\" width=\"30%\">\r\n                      {formatted(output.totalDisposeAsset - output.totalLiab,lang)}\r\n                    \r\n                    {/*     {dollarEn}\r\n                        {formatMoney(\r\n                          output.totalDisposeAsset - output.totalLiab,\r\n                          0,\r\n                          decimalChar,\r\n                          thousands\r\n                        )} */}\r\n                      </td>\r\n                    </tr>\r\n                    <tr>\r\n                      <td className=\"backgroundcolorFFFFFF\">\r\n                        <br />\r\n                        {labelsBilingual.pg8TabRow2}\r\n                      </td>\r\n                      <td className=\"backgroundcolorFFFFFF\"></td>\r\n                    </tr>\r\n                    {!singleFamily &&\r\n      \r\n                      <tr>\r\n                      <td>\r\n                        <strong></strong>\r\n                        {labelsBilingual.pg8TabRow3}\r\n                        {this.props.LE})\r\n                      </td>\r\n                      <td className=\"textalignright\">\r\n                        {/* {dollarEn+this.props.insuranceNeedLE+dollarFr} */}\r\n                        {formatted(this.props.insuranceNeedLE,lang)}\r\n                      </td>\r\n                    </tr>}\r\n                    <tr>\r\n                      <td>\r\n                        <strong></strong>\r\n                        {singleFamily? labelsBilingual.pg8TabRow4Alt.replace(\"B.\",\"A.\"): labelsBilingual.pg8TabRow4}\r\n                      </td>\r\n                      <td className=\"textalignright\">\r\n                        {/* {dollarEn+this.props.insuranceNeedRet+dollarFr} */}\r\n                        {formatted(this.props.insuranceNeedRet,lang)}\r\n                      </td>\r\n                    </tr>\r\n                    {output.hasChild && output.ygChild < maxDur && (\r\n                      <tr>\r\n                        <td>\r\n                          <strong></strong>\r\n                          {singleFamily? labelsBilingual.pg8TabRow5.replace(\"C.\",\"B.\").replace(\"25\",output.youngestChildEndAge):labelsBilingual.pg8TabRow5.replace(\"25\",output.youngestChildEndAge)}\r\n                        </td>\r\n                        <td className=\"textalignright\">\r\n                        {formatted(output.insNeedYgChild25,lang)}\r\n                    \r\n                    {/*       {dollarEn}\r\n                          {formatMoney(\r\n                            output.insNeedYgChild25,\r\n                            0,\r\n                            decimalChar,\r\n                            thousands\r\n                          )} */}\r\n                        </td>\r\n                      </tr>\r\n                    )}\r\n                    {output.hasChild && output.ygChild < orphAge && (\r\n                      <tr>\r\n                        <td>\r\n                          <strong></strong>\r\n                          {singleFamily? labelsBilingual.pg8TabRow6.replace(\"D.\",\"C.\"):labelsBilingual.pg8TabRow6}\r\n                        </td>\r\n                        <td className=\"textalignright\">\r\n                        {formatted(output.insNeedYgChild18,lang)}\r\n                    \r\n                    {/*       {dollarEn}\r\n                          {formatMoney(\r\n                            output.insNeedYgChild18,\r\n                            0,\r\n                            decimalChar,\r\n                            thousands\r\n                          )} */}\r\n                        </td>\r\n                      </tr>\r\n                    )}\r\n                    <tr></tr>\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n              {/* PAGE 8 chart*/}\r\n              <div style={{ color: \"darkBlue\", marginTop: \"55px\" }}>\r\n                <br />\r\n                <div style={{ marginLeft: \"20px\", width: \"90%\" }}>\r\n                  <div style={{ width: \"75%\" }}>\r\n                    <article\r\n                      id=\"bar2\"\r\n                      className=\"canvas-container\"\r\n                      style={{ height: \"200px\" }}\r\n                    >\r\n                      <Bar data={dataInsurance2} options={options} />\r\n                    </article>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <br />\r\n              <br />\r\n              {/* PAGE 9 notes*/}\r\n              {/*  <hr className=\"ppi1\" />\r\n             {allPages && (\r\n              <AdjustibleImage\r\n                image={this.props.dataInput.Presentations[0].adviserLogo.image}\r\n                showDetails={false}\r\n                size={this.props.dataInput.Presentations[0].adviserLogo.size}\r\n                imageLeft={\r\n                  this.props.dataInput.Presentations[0].adviserLogo.left\r\n                }\r\n                allPages={\r\n                  this.props.dataInput.Presentations[0].adviserLogo.allPages\r\n                }\r\n                imageRemove={this.props.imageRemove}\r\n                imageAdjust={this.props.imageAdjust}\r\n                \r\n              />\r\n            )}\r\n            <br />\r\n            <img className=\"ppi2\" src=\"img/desktop/picture1.png\" width=\"400\" alt=\"Capital Requirements Chart\" />\r\n            <br /> <br /> \r\n            {logoTop}\r\n              <br />\r\n              <br /> <br />\r\n            <h2 className=\"ppi1\">{labelsBilingual.pg9T}</h2>\r\n            <p className=\"ppi1\">{labelsBilingual.pg9P1}</p>\r\n            <br /> */}\r\n\r\n\r\n              {logoBottom}\r\n              {/* PAGE 9 Notes*/}\r\n              {logoTop}\r\n              <br />\r\n              <br /> <br />\r\n              <h2 className=\"ppi1\">{labelsBilingual.pg9T}</h2>\r\n              <p className=\"ppi1\">{labelsBilingual.pg9P1}</p>\r\n              <br /> <br />\r\n              <br />\r\n              <br />\r\n              <br />\r\n\r\n\r\n              {logoBottom}\r\n              {/* PAGE 10 ackno*/}\r\n              {logoTop}\r\n              <br />\r\n              <br /> <br />\r\n              <h2 className=\"ppi1\">{labelsBilingual.pg10T}</h2>\r\n              <p className=\"ppi1\">{labelsBilingual.pg10P1}</p>\r\n              <br /> <br />\r\n              <br />\r\n              <br />\r\n              <br />\r\n              <p className=\"ppi1\">\r\n                {labelsBilingual.pg10TabRow1}\r\n                <br />\r\n                <span style={{ paddingLeft: \"118px\" }}>\r\n                  {labelsBilingual.pg10TabRow11}\r\n                </span>\r\n              </p>\r\n              <br />\r\n              <br />\r\n              <p className=\"ppi1\">\r\n                {labelsBilingual.pg10TabRow2}\r\n                <br />\r\n                <span style={{ paddingLeft: \"118px\" }}>\r\n                  {labelsBilingual.pg10TabRow11}\r\n                </span>\r\n              </p>\r\n              <br />\r\n              <br />\r\n              <p className=\"ppi1\">\r\n                {labelsBilingual.pg10TabRow3}\r\n                <br />\r\n                <span style={{ paddingLeft: \"110px\" }}>\r\n                  {labelsBilingual.pg10TabRow11}\r\n                </span>\r\n              </p>\r\n              <br />\r\n              <hr className=\"ppi1\" />\r\n              {logoBottom}\r\n            </div>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n}\r\n","import {\r\n    TITLES,\r\n    ASSETS,\r\n    IMAGE_LOGO,\r\n    IMAGE_LOGO_OTHERPAGES,\r\n    IMAGE_APPLET_EP,\r\n  } from \"../definitions/generalDefinitions\";\r\n  import { OUTPUTTEXT} from \"../definitions/outputDefinitions\";\r\n  import { OUTPUTTEXTEP  } from \"../definitions/outputDefinitionsEP\";\r\n  import { formatMoney, formatMoney2, cleanFormat } from \"../utils/helper\";\r\n  import { getOutputValues } from \"../data/dataExchange\";\r\n  import {insertGrid} from \"./OutputPDFEP\"\r\n\r\n  import {\r\n    PDF,\r\n    InToPt,\r\n    PxToPt,\r\n    HELVETICA,\r\n    TIMES,\r\n    NORMAL,\r\n    BOLD,\r\n    HEADER_RECT_IN_W,\r\n  } from \"./PDF\";\r\n  import {\r\n    ASSET_TAX_TYPE_PRINCIPAL_RES,\r\n    ASSET_TAX_TYPE_REAL_ESTATE,\r\n    ASSET_TAX_TYPE_STOCKS,\r\n    ASSET_TAX_TYPE_SMALL_BUS,\r\n    ASSET_TAX_TYPE_RRSP,\r\n    ASSET_TAX_TYPE_INTEREST,\r\n    ASSET_TAX_TYPE_OTHER,\r\n    ASSET_TAX_TYPE_COUNT,\r\n  } from \"../definitions/outputDefinitionsEP\";\r\n  \r\n  const DISPLAY_INCOME = 1;\r\n  \r\n  const BULLET_FONT_SIZE = 24;\r\n  const NUMBER_BULLET_FONT_SIZE = 11;\r\n  const GRID_AGGREGATE = 0;\r\n  const GRID_INDIVIDUAL = 1;\r\n  \r\n  const LINES_PER_PAGE_LANDSCAPE = 27;\r\n  const LINES_PER_PAGE_PORTRAIT = 37;\r\n  \r\n\r\n\r\nexport async function doSavePdfINAAppendixAction(props) {\r\n  //  try \r\n  {\r\n        let pdf = new PDF();\r\n        pdf.Create();\r\n    \r\n       // var paragraph;\r\n        let height = 0.2;\r\n        let Widths = [1.2, 0.6, 1.8, 1.4];\r\n        let values;\r\n        const paraWidth = 6;\r\n        const paraLeft = 1.2;\r\n        const lineHeight = 0.196;\r\n        const indent = 0.15;\r\n        let paraY = 1;// 2.2 * lineHeight;\r\n    \r\n        // pdf output shared with presentation\r\n      //  let output = getOutputValues(props);\r\n    \r\n        const lang = props.dataInput.Presentations[0].language;\r\n        const pg1TitleY = 4.2;\r\n    \r\n    //  pdf.Header(OUTPUTTEXT[lang].pg1T);\r\n\r\n// Appendix title\r\n      setFontForTitle(pdf, lang, 16);\r\n      let paragraph = OUTPUTTEXT[lang].pgAppendix + \": \" + OUTPUTTEXT[lang].pgAppendixT;\r\n      insertPara(pdf, paragraph, paraLeft-.4, paraY, paraWidth);\r\n    \r\n      setFontForParas(pdf);\r\n      paragraph = OUTPUTTEXT[lang].pgAppendixP1;\r\n      paraY = paraY + 4 *lineHeight;\r\n    insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n     \r\n    paraY = paraY + 1.5* lineHeight;\r\n     \r\n      const graphWidth=paraWidth+1\r\n      let h= document.getElementById(\"barNeeds\").clientHeight\r\n      let w= document.getElementById(\"barNeeds\").clientWidth\r\n      const maxH=2;\r\n      const maxH2=2.5\r\n      let hFinal=graphWidth*h/w>maxH?maxH:graphWidth*h/w\r\n      let wFinal=graphWidth*h/w>maxH?maxH*w/h:graphWidth\r\n      \r\n      pdf.AddChart(\r\n        \"barNeeds\",\r\n        InToPt(paraLeft-.5),\r\n        InToPt(paraY),\r\n        InToPt(wFinal),\r\n        InToPt(hFinal)\r\n        //InToPt(graphWidth),\r\n        //InToPt(graphWidth*h/w)\r\n      );\r\n      // paraY = paraY + 5*lineHeight;\r\n      \r\n      paraY = paraY + 12* lineHeight;\r\n      paragraph = OUTPUTTEXT[lang].pgAppendixP2;\r\n      insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n      paraY = paraY + 1.5* lineHeight;\r\n     \r\n      h= document.getElementById(\"barShortfall\").clientHeight\r\n      w= document.getElementById(\"barShortfall\").clientWidth\r\n      hFinal=graphWidth*h/w>maxH?maxH:graphWidth*h/w\r\n      wFinal=graphWidth*h/w>maxH?maxH*w/h:graphWidth\r\n      pdf.AddChart(\r\n        \"barShortfall\",\r\n        InToPt(paraLeft-.5),\r\n        InToPt(paraY),\r\n        InToPt(wFinal),\r\n        InToPt(hFinal)\r\n      );\r\n      \r\n      h= document.getElementById(\"pieAssets\").clientHeight\r\n      w= document.getElementById(\"pieAssets\").clientWidth\r\n      hFinal=graphWidth*h/w>maxH2?maxH2:graphWidth*h/w\r\n      wFinal=graphWidth*h/w>maxH2?2*maxH2*w/h:graphWidth/2\r\n      \r\n      paraY = paraY + 13 * lineHeight;\r\n      paragraph = OUTPUTTEXT[lang].pgAppendixP3;\r\n      insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n      paraY = paraY + 1.5* lineHeight;\r\n      pdf.AddChart(\r\n        \"pieAssets\",\r\n        InToPt(paraLeft-1),\r\n        InToPt(paraY),\r\n        /* InToPt(wFinal),\r\n        InToPt(.8*hFinal) */\r\n        InToPt(graphWidth/2),\r\n        InToPt(graphWidth*h/w)\r\n      );\r\n     // paraY = paraY + 10 * lineHeight;\r\n     h= document.getElementById(\"pieLiabs\").clientHeight\r\n     w= document.getElementById(\"pieLiabs\").clientWidth\r\n     hFinal=graphWidth*h/w>maxH2?maxH2:graphWidth*h/w\r\n     wFinal=graphWidth*h/w>maxH2?2*maxH2*w/h:graphWidth/2\r\n      pdf.AddChart(\r\n        \"pieLiabs\",\r\n        InToPt(paraLeft+graphWidth/2-.5),\r\n        InToPt(paraY),\r\n        /* InToPt(wFinal),\r\n        InToPt(.8*hFinal) */\r\n        InToPt(graphWidth/2),\r\n        InToPt(graphWidth*h/w)\r\n      );\r\n\r\n      pdf.Footer(OUTPUTTEXT[lang].pgFooter);\r\n\r\n      const LE = props.LE; //- props.assetProjections[0].grid.dataProjection[1][0];\r\n      const lastRow=props.aggregateGrid.dataProjection[0].length\r\n      paragraph = OUTPUTTEXT[lang].pgAppendix + \": \" + OUTPUTTEXT[lang].pgAppendixT;\r\n    /* \r\n      insertGrid2(\r\n        pdf,\r\n        props.aggregateGrid,\r\n        LE,\r\n        paraLeft - 0.2,\r\n        1.65 * paraWidth,\r\n        lang,\r\n        true,\r\n        \"landscape\",\r\n        0,\r\n        GRID_AGGREGATE,\r\n        lastRow\r\n      ); */\r\n      insertGrid(\r\n        pdf,\r\n        props.aggregateGrid,\r\n        LE,\r\n        paraLeft - 0.2,\r\n        1.65 * paraWidth,\r\n        lang,\r\n        true,\r\n        \"landscape\",\r\n        0,\r\n        lastRow,        \r\n        GRID_AGGREGATE,\r\n        .65,\r\n        paragraph, \"\", \"\", \"\", OUTPUTTEXT[lang].pgFooter\r\n      )  \r\n\r\n      // if too long add another page\r\n      if (\r\n        lastRow > LINES_PER_PAGE_LANDSCAPE &&\r\n        lastRow < 2 * LINES_PER_PAGE_LANDSCAPE\r\n      )\r\n        insertGrid(\r\n          pdf,\r\n          props.aggregateGrid,\r\n          LE,\r\n          paraLeft - 0.2,\r\n          1.65 * paraWidth,\r\n          lang,\r\n          true,\r\n          \"landscape\",\r\n          LINES_PER_PAGE_LANDSCAPE,\r\n          lastRow,\r\n          GRID_AGGREGATE,.65,\r\n          paragraph, \"\", \"\", \"\", OUTPUTTEXT[lang].pgFooter\r\n          );\r\n      else if (lastRow > 2 * LINES_PER_PAGE_LANDSCAPE) {\r\n        insertGrid(\r\n          pdf,\r\n          props.aggregateGrid,\r\n          LE,\r\n          paraLeft - 0.2,\r\n          1.65 * paraWidth,\r\n          lang,\r\n          true,\r\n          \"landscape\",\r\n          LINES_PER_PAGE_LANDSCAPE,\r\n          lastRow,  \r\n          GRID_AGGREGATE,.65,\r\n          paragraph, \"\", \"\", \"\", OUTPUTTEXT[lang].pgFooter\r\n        );\r\n        insertGrid(\r\n          pdf,\r\n          props.aggregateGrid,\r\n          LE,\r\n          paraLeft - 0.2,\r\n          1.65 * paraWidth,\r\n          lang,\r\n          true,\r\n          \"landscape\",\r\n          2 * LINES_PER_PAGE_LANDSCAPE,\r\n          lastRow,  \r\n          GRID_AGGREGATE,.65,\r\n          paragraph, \"\", \"\", \"\", OUTPUTTEXT[lang].pgFooter\r\n        );\r\n      }\r\n\r\n      pdf.Footer(OUTPUTTEXT[lang].pgFooter);\r\n    \r\n          /*/*-Appendix\t\tgrids // Page 8*/\r\n    \r\n          // add a landscape page for aggregate grid\r\n    \r\n/*           const LE = props.LE; //- props.assetProjections[0].grid.dataProjection[1][0];\r\n          insertGrid2(\r\n            pdf,\r\n            props.aggregateGrid,\r\n            LE,\r\n            paraLeft - 0.2,\r\n            1.65 * paraWidth,\r\n            lang,\r\n            true,\r\n            \"landscape\",\r\n            0,\r\n            GRID_AGGREGATE\r\n          );\r\n          // if too long add another page\r\n          if (\r\n            LE + 3 > LINES_PER_PAGE_LANDSCAPE &&\r\n            LE + 3 < 2 * LINES_PER_PAGE_LANDSCAPE\r\n          )\r\n            insertGrid2(\r\n              pdf,\r\n              props.aggregateGrid,\r\n              LE,\r\n              paraLeft - 0.2,\r\n              1.65 * paraWidth,\r\n              lang,\r\n              true,\r\n              \"landscape\",\r\n              LINES_PER_PAGE_LANDSCAPE,\r\n              GRID_AGGREGATE\r\n            );\r\n          else if (LE + 3 > 2 * LINES_PER_PAGE_LANDSCAPE) {\r\n            insertGrid2(\r\n              pdf,\r\n              props.aggregateGrid,\r\n              LE,\r\n              paraLeft - 0.2,\r\n              1.65 * paraWidth,\r\n              lang,\r\n              true,\r\n              \"landscape\",\r\n              LINES_PER_PAGE_LANDSCAPE,\r\n              GRID_AGGREGATE\r\n            );\r\n            insertGrid2(\r\n              pdf,\r\n              props.aggregateGrid,\r\n              LE,\r\n              paraLeft - 0.2,\r\n              1.65 * paraWidth,\r\n              lang,\r\n              true,\r\n              \"landscape\",\r\n              2 * LINES_PER_PAGE_LANDSCAPE,\r\n              GRID_AGGREGATE\r\n            );\r\n          }\r\n          for (let j = 0; j < props.assetProjections.length; ++j)\r\n            insertGrid2(\r\n              pdf,\r\n              props.assetProjections[j].grid,\r\n              LE,\r\n              paraLeft,\r\n              paraWidth,\r\n              lang,\r\n              true,\r\n              \"portrait\",\r\n              0,\r\n              GRID_INDIVIDUAL\r\n            );\r\n    \r\n          //end ofPage 8\r\n          pdf.addFooterAndHeader(headerOffset, footerText, headerText);\r\n    \r\n          //-Using Life Insurance to Preserve Your Estate\t\t// Page 6\r\n          // logo if asked for\r\n          //    pdf.addCustomImage(\"EPOtherPagesLogo\", pg1TitleY, image);\r\n          result =\r\n            result &&\r\n            pdf.addCustomImage(IMAGE_LOGO_OTHERPAGES, pg1TitleY, image, false, top);\r\n    \r\n          paraY = 8 * lineHeight;\r\n          setFontForTitle(pdf, lang);\r\n          pdf.Text(OUTPUTTEXTEP[lang].pg9T, InToPt(paraLeft), InToPt(paraY));\r\n          setFontForParas(pdf);\r\n    \r\n          paraY = paraY + 2 * lineHeight;\r\n          insertPara(pdf, OUTPUTTEXTEP[lang].pg9P1, paraLeft, paraY, paraWidth);\r\n          paraY = paraY + (lang === \"fr\" ? 7 : 6) * lineHeight;\r\n          insertPara(pdf, OUTPUTTEXTEP[lang].pg9P2, paraLeft, paraY, paraWidth);\r\n    \r\n          //pdf.Footer(OUTPUTTEXTEP[lang].pgFooter);\r\n          // pdf.showOnPage();\r\n*/\r\n          var data = pdf.showOnPage();\r\n    \r\n//        // Done\r\n          pdf.Save(\"INA_Appendix_PDF.pdf\");\r\n          return data;\r\n        }\r\n    \r\n  \r\n}\r\n\r\n    function setFontForTitle(pdf, lang, size) {\r\n      pdf.SetFont(HELVETICA, NORMAL);\r\n      if (size === undefined) {\r\n        if (lang === \"en\") pdf.SetFontSize(PxToPt(25));\r\n        else pdf.SetFontSize(PxToPt(20));\r\n      } else {\r\n        pdf.SetFont(HELVETICA, BOLD);\r\n        if (lang === \"en\") pdf.SetFontSize(PxToPt(size));\r\n        else pdf.SetFontSize(PxToPt(size - 1));\r\n      }\r\n    \r\n      pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    }\r\n    \r\n    function addNote(pdf, para, left, paraY, paraWidth) {\r\n      setFontForParas(pdf);\r\n      pdf.SetTextColor(150, 150, 150);\r\n      pdf.SetFontSize(PxToPt(12));\r\n      insertPara(pdf, para, left, paraY, paraWidth);\r\n      setFontForParas(pdf);\r\n    }\r\n    \r\n    function setFontForParas(pdf) {\r\n      pdf.SetFont(TIMES, NORMAL);\r\n      pdf.SetFontSize(PxToPt(16));\r\n      pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    }\r\n    \r\n    function insertBullet(pdf, bullet, left, y, size) {\r\n      pdf.SetTextColor(115, 153, 198);\r\n      pdf.SetFontSize(PxToPt(size));\r\n      pdf.SetFont(TIMES, BOLD);\r\n      pdf.Text(\r\n        bullet,\r\n        InToPt(left + (size === BULLET_FONT_SIZE ? 0.02 : 0)),\r\n        InToPt(y - (size === BULLET_FONT_SIZE ? 0.03 : 0))\r\n      );\r\n      pdf.SetFont(TIMES, NORMAL);\r\n      pdf.SetFontSize(PxToPt(16));\r\n      pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    }\r\n    \r\n    function insertPara(pdf, para, left, paraY, paraWidth) {\r\n      pdf.MultilineText(para, InToPt(left), InToPt(paraY), InToPt(paraWidth));\r\n    }\r\n    \r\n    function insertTableTitle(\r\n      pdf,\r\n      paraLeft,\r\n      paraY,\r\n      values,\r\n      height,\r\n      paraWidths,\r\n      fillColor\r\n    ) {\r\n      pdf.SetFontSize(PxToPt(12));\r\n      const fill = fillColor === undefined ? [115, 153, 198] : fillColor;\r\n      const textColor = [255, 255, 255];\r\n      pdf.SetFont(TIMES, BOLD);\r\n      const h = pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        paraLeft,\r\n        paraY,\r\n        values,\r\n        height,\r\n        paraWidths,\r\n        false,\r\n        false,\r\n        true\r\n      );\r\n      return h;\r\n    }\r\n    \r\n    function insertTableRow(\r\n      pdf,\r\n      paraLeft,\r\n      paraY,\r\n      values,\r\n      height,\r\n      paraWidths,\r\n      bold,\r\n      fillColor,\r\n      align\r\n    ) {\r\n      pdf.SetTextColor(0x45, 0x55, 0x60);\r\n      const fill = fillColor === undefined ? [249, 249, 249] : fillColor;\r\n      const textColor = [0x45, 0x55, 0x60];\r\n      pdf.SetFont(TIMES, bold ? BOLD : NORMAL);\r\n      pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        paraLeft,\r\n        paraY,\r\n        values,\r\n        height,\r\n        paraWidths,\r\n        true,\r\n        align\r\n      );\r\n    }\r\n    /* function insertTableRowBold(pdf, paraLeft, paraY, values, height, paraWidths,align) {\r\n      pdf.SetTextColor(0x45, 0x55, 0x60);\r\n      const fill = [235, 235, 235];\r\n      const textColor = [0x45, 0x55, 0x60];\r\n      pdf.SetFont(TIMES, BOLD);\r\n      pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        paraLeft,\r\n        paraY,\r\n        values,\r\n        height,\r\n        paraWidths,\r\n        true,\r\n        align\r\n      );\r\n    }\r\n     */\r\n    \r\n    /* function pdf.addCustomImage( id,pg1TitleY,image,firstPage){\r\n     \r\n    pdf.AddImageFitWidthOnly(\r\n      id,\r\n      InToPt(pg1TitleY - 3 + image.left*HEADER_RECT_IN_W/100), //1.51),\r\n      InToPt(firstPage?1.06:.29),\r\n      InToPt(6.04*image.size/100),\r\n      InToPt(firstPage?2.76:.38) // max height\r\n    );\r\n    } */\r\n    \r\n    function insertGrid2(\r\n      pdf,\r\n      grid,\r\n      LE,\r\n      paraLeft,\r\n      paraWidth,\r\n      lang,\r\n      wrappedTitleBar,\r\n      orientation,\r\n      startYr,\r\n      mode,\r\n      lastRow\r\n    ) {\r\n      let i;\r\n      let j;\r\n      let cols = grid.dataColTitles.length;\r\n      const height = 0.2;\r\n      let paraY = 2.2 * height;\r\n      let max =\r\n        orientation === \"landscape\"\r\n          ? startYr === 0\r\n            ? LINES_PER_PAGE_LANDSCAPE\r\n            : 2 * LINES_PER_PAGE_LANDSCAPE\r\n          : LINES_PER_PAGE_PORTRAIT;\r\n      const decimalChar = lang === \"en\" ? \".\" : \",\";\r\n      const thousands = lang === \"en\" ? \",\" : \" \";\r\n      //const formatFr = lang === \"fr\" ? true : false;\r\n      let Widths = [];\r\n    \r\n      pdf.AddPage(orientation);\r\n    \r\n      // Appendix title\r\n      setFontForTitle(pdf, lang, 16);\r\n      let paragraph = OUTPUTTEXT[lang].pgAppendix + \": \" + OUTPUTTEXT[lang].pgAppendixT;\r\n      insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n    \r\n      // Appendix para\r\n      setFontForParas(pdf);\r\n      paraY = paraY + 1.6 * height;\r\n      paragraph =\r\n        (mode === GRID_AGGREGATE\r\n          ? OUTPUTTEXT[lang].pgAppendix\r\n          : OUTPUTTEXT[lang].pgAppendixT) +\r\n        (mode === GRID_AGGREGATE ? (startYr === 0 ? \"\" : \"\") : \"\");\r\n      insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n    \r\n      paraY = paraY + 0.5 * height;\r\n    \r\n      // grid name and title\r\n      // grid col widths\r\n      Widths.push(paraWidth / (cols + 5)); // year\r\n      Widths.push(paraWidth / (cols + 5)); // age\r\n      for (i = 2; i < cols; ++i) {\r\n        Widths.push((paraWidth - (2 * paraWidth) / (cols + 4)) / (cols - 2));\r\n      }\r\n    \r\n      // max of 8 columns in portrait\r\n      let totalGridWidth = paraWidth;\r\n      if (mode === GRID_INDIVIDUAL) totalGridWidth = (cols * paraWidth) / 8;\r\n    \r\n      let values = grid.dataColTitles;\r\n      let goodWidth = [];\r\n      let totalGoodWidth = 0;\r\n      for (i = 0; i < cols; ++i) {\r\n        goodWidth.push(pdf.textWidth(values[i]));\r\n        totalGoodWidth += goodWidth[i];\r\n      }\r\n      // aportion grid title\r\n      for (i = 0; i < cols; ++i) {\r\n        Widths[i] = goodWidth[i] + 0.15;\r\n      }\r\n      let widthTotal = 0;\r\n      for (i = 2; i < cols; ++i) widthTotal += Widths[i];\r\n    \r\n      // now check multilines\r\n      let goodWidthMultiLine = [];\r\n      let totalGoodWidthMultiLine = 0;\r\n    \r\n      let addMore =\r\n        (totalGridWidth - widthTotal - Widths[0] - Widths[1]) / (cols - 2);\r\n      if (mode === GRID_INDIVIDUAL) {\r\n        for (i = 2; i < cols; ++i) Widths[i] += addMore;\r\n      } else if (mode === GRID_AGGREGATE) {\r\n        addMore =\r\n          (totalGridWidth - widthTotal - Widths[0] - Widths[1]) / (cols - 3);\r\n        for (i = 2; i < cols; ++i) if (i !== 4) Widths[i] += addMore;\r\n      }\r\n    \r\n      for (i = 0; i < cols; ++i) {\r\n        goodWidthMultiLine.push(pdf.textWidthMultiLine(values[i], Widths[i]));\r\n        totalGoodWidthMultiLine += goodWidthMultiLine[i];\r\n      }\r\n      \r\n      {\r\n        paraY = paraY + 0.8 * height;\r\n        paragraph = grid.gridTitle;\r\n        pdf.SetFontSize(PxToPt(12));\r\n        pdf.SetTextColor(0x45, 0x55, 0x60);\r\n        insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n        paraY = paraY + 0.4 * height;\r\n      }\r\n    \r\n      // headers\r\n       const height2 = insertTableTitle(\r\n        pdf,\r\n        paraLeft,\r\n        paraY,\r\n        values,\r\n        height,\r\n        Widths,\r\n        [51, 77, 124]\r\n      );\r\n      // grid rows\r\n      let rows = startYr;\r\n      let fillColor;\r\n      if (wrappedTitleBar) paraY = paraY + height2;\r\n      // 40 rows per page\r\n      while (rows < LE + 3 && rows<lastRow) {\r\n        //grid.dataProjection[0].length) {\r\n    \r\n        if (\r\n          rows === max &&\r\n          ((startYr === 0 && LE + 3 - rows > 6) ||\r\n            (startYr === LINES_PER_PAGE_LANDSCAPE &&\r\n              LE + LINES_PER_PAGE_LANDSCAPE + 3 - rows > 6))\r\n        ) {\r\n          if (mode === GRID_AGGREGATE) {\r\n            insertPara(\r\n              pdf,\r\n              OUTPUTTEXTEP[lang].pg4P1,\r\n              paraLeft,\r\n              paraY + (3 * height) / 2 + 0.1,\r\n              paraWidth\r\n            );\r\n            pdf.FooterLandscape(OUTPUTTEXT[lang].pgFooter);\r\n            return rows;\r\n          }\r\n    \r\n          rows = LE + 3 - 6;\r\n          paraY = paraY + height;\r\n          pdf.SetFont(TIMES, BOLD);\r\n          insertPara(pdf, \"......\", paraLeft, paraY + height / 2, paraWidth);\r\n          pdf.SetFont(TIMES, NORMAL);\r\n        }\r\n        values = [];\r\n    \r\n        let align = [];\r\n        for (i = 0; i < cols; ++i) {\r\n          //if(i===0) console.log(grid.dataProjection[i][rows])\r\n          values.push(\r\n            (i === 0 && rows === 0) || i === 1\r\n              ? String(grid.dataProjection[i][rows])\r\n              : formatMoney(\r\n                  parseFloat(cleanFormat(grid.dataProjection[i][rows], lang)),\r\n                  0,\r\n                  decimalChar,\r\n                  thousands\r\n                ).toString()\r\n          );\r\n          align.push(2);\r\n        }\r\n        paraY = paraY + height;\r\n        fillColor = rows % 2 ? [249, 249, 249] : [228, 229, 230];\r\n        if (rows == LE) {\r\n          fillColor = [208, 215, 230];\r\n          insertPara(\r\n            pdf,\r\n            lang === \"en\" ? \"LE\" : \"EV\",\r\n            paraLeft + totalGridWidth + 0.15,\r\n            paraY + height / 2 + 0.01,\r\n            paraWidth\r\n          );\r\n        }\r\n        //console.log(values)\r\n        insertTableRow(\r\n          pdf,\r\n          paraLeft,\r\n          paraY,\r\n          values,\r\n          height,\r\n          Widths,\r\n          false,\r\n          fillColor,\r\n          align\r\n        );\r\n    \r\n        rows++;\r\n      }\r\n    \r\n      if (orientation === \"landscape\")\r\n        pdf.FooterLandscape(OUTPUTTEXT[lang].pgFooter);\r\n      else pdf.Footer(OUTPUTTEXT[lang].pgFooter);\r\n    }\r\n    ","import React, { Component } from \"react\";\r\nimport { Pie, Bar, Line } from \"react-chartjs-2\";\r\n//import \"./Output.css\";\r\nimport \"./Output.css\";\r\nimport {\r\n  getAssetsCategoryTotal,\r\n  getLiabsCategoryTotal,\r\n  cleanFormat, formatMoney,\r\n  familyProjectionYears,\r\n  getInsNeedLine,\r\n  isSingleFamily,\r\n} from \"../utils/helper\";\r\nimport {\r\n  ASSETS,\r\n  LIABILITIES,\r\n  CONTROLTITLE,\r\n  DISPLAY_RETIREMENT,\r\nDISPLAY_LIFEEXP,\r\nDISPLAY_ENDAGE,\r\nDISPLAY_LIFEEXP_PLUS_3\r\n} from \"../definitions/generalDefinitions\";\r\nimport {GRAPHS_LABLES \r\n} from \"../definitions/outputDefinitions\";\r\nimport {\r\n  getInfoINA,\r\n} from \"../definitions/infoIconsDefinitions\";\r\nimport { Info } from \"./Info\";\r\nimport { doSavePdfINAAppendixAction } from \"./OutputPDFINAAppendix\";\r\n\r\n\r\nexport class OutputGraphs extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n\r\n\r\n  doPDF = () => {\r\n    doSavePdfINAAppendixAction(this.props);\r\n  };\r\n  \r\n\r\n  render() {\r\n    //if (this.props.dataCashFlowGov !== undefined)\r\n    const lang=this.props.dataInput.Presentations[0].language\r\n    const negNeed = this.props.dataCashFlowNeeds.map(x => -x);\r\n\r\n  const mobile=  ( window.innerWidth <= 840 ) && ( window.innerHeight <= 840 );\r\n // console.log(window.innerWidth, window.innerHeight)\r\n    const maxYScale =\r\n      10000 *\r\n      Math.ceil(\r\n        1 +\r\n          Math.max(\r\n            Math.max(...this.props.dataCashFlowGov),\r\n            Math.max(...this.props.dataCashFlowNeeds),\r\n            Math.max(...this.props.dataShortfall),\r\n            Math.max(...this.props.dataCashFlowPersonal)\r\n          ) /\r\n            10000\r\n      );\r\n    //\tconst negNeedMax = negNeed.map(x => -maxYScale*1.05);\r\n    //\tnegNeedMax.push(- maxYScale * 1.05);\r\n    //\tnegNeedMax.push(- maxYScale * 1.05)\r\n \r\n    const options = {\r\n      responsive: true,\r\n      maintainAspectRatio: false,\r\n      legend: {\r\n        display: true,\r\n        labels: {\r\n          fontColor: \"#333\",\r\n          fontSize: mobile?10:14//16\r\n        }\r\n      },\r\n      scales: {\r\n        xAxes: [\r\n          {\r\n            stacked: true,\r\n            ticks: {\r\n              fontSize:  mobile?10:14,\r\n              beginAtZero: true\r\n            }\r\n          }\r\n        ],\r\n        yAxes: [\r\n          {\r\n            stacked: true,\r\n            ticks: {\r\n              fontSize:  mobile?10:14,\r\n              beginAtZero: true,\r\n                beginAtZero: true,\r\n                steps: 10,\r\n                stepValue: 5,\r\n                max: maxYScale,\r\n    callback: function (value, index, values) {\r\n                  let result =\r\n                    value < 1000 && value > -1000\r\n                      ? value\r\n                      : lang === \"en\"\r\n                      ? Intl.NumberFormat().format(value / 1000) + \"K\"\r\n                      : (Intl.NumberFormat().format(value / 1000) + \"K\").replace(\r\n                          \",\",\r\n                          \" \"\r\n                        );\r\n                  return result;\r\n                },\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    };\r\n    const labelsBilingual=GRAPHS_LABLES[lang]\r\n    const decimalChar = lang === \"en\" ? \".\" : \",\"\r\n    const thousands = lang === \"en\" ? \",\" : \" \"\r\n    const formatFr=lang===\"fr\"? true:false\r\n    \r\n    const clients=this.props.dataInput.Clients\r\n    const singleFamily = isSingleFamily(clients);\r\n    const PDFTopMargin=singleFamily?0:-37  \r\n\r\n    const data = {\r\n      labels: this.props.dataNAAges,\r\n      datasets: [\r\n        {\r\n          label: labelsBilingual.persCF,\r\n          data: this.props.dataCashFlowPersonal,\r\n          fill: false,\r\n          borderColor: \"LightSteelBlue\", // Line color\r\n          backgroundColor: \"LightSteelBlue\"\r\n        },\r\n        {\r\n          label:\r\n          labelsBilingual.govCF,\r\n          data: this.props.dataCashFlowGov,\r\n          fill: false, // Don't fill area under the line\r\n          borderColor: \"#FAD7A0\", // Line color\r\n          backgroundColor: \"#FAD7A0\"\r\n        },\r\n        {\r\n          label:\r\n          labelsBilingual.incomeNeeds,\r\n          data: negNeed,\r\n          fill: false, // Don't fill area under the line\r\n          borderColor: \"#2B3856\", // Line color\r\n          backgroundColor: \"#2B3856\"\r\n        }\r\n        \r\n      ]\r\n    };\r\n\r\n    var dataFutureINA = [];\r\n    let i;\r\n    let j;\r\n    var pv;\r\n    var totalLiab = 0;\r\n    for (i = 0; i < this.props.dataInput.Liabilitys.length; i++) {\r\n      totalLiab += this.props.dataInput.Liabilitys[i].currValue;\r\n    }\r\n\r\n    let shortfallNeg=[]\r\n     \r\n    for (i = 0; i < this.props.dataShortfall.length; ++i) {\r\n      shortfallNeg.push(-this.props.dataShortfall[i])\r\n      pv = 0;\r\n      for (j = i; j < this.props.dataShortfall.length; ++j)\r\n        pv += this.props.dataShortfall[j] / Math.pow(1.03, j - i);\r\n\r\n      if (i > 0 && i < 20) pv += totalLiab * Math.pow(1.02, i);\r\n      dataFutureINA.push(pv);\r\n    }\r\n    // console.log(totalLiab, dataFutureINA);\r\n\r\n/*     let dataPositiveShortfall = [];\r\n    for (j = 0; j < this.props.dataShortfall.length; ++j)\r\n        dataPositiveShortfall[j]= this.props.dataShortfall[j]>0?this.props.dataShortfall[j]:0;\r\n     \r\n\r\n\r\n\r\n */   \r\n      \r\n      const dataShortfall = {\r\n      labels: this.props.dataNAAges, // [39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84],\r\n      datasets: [\r\n        {\r\n          label: labelsBilingual.shortfall,\r\n          data: shortfallNeg,//this.props.dataShortfall,\r\n          //[10964, 13734, 14008, 14288, 14574, 14866, 15163, 15466, 15776, 16091, 16413, 16741, 17076, 17417, 17766, 18121, 18484, 18853, 19230, 19615, 20007, 20407, 20815, 21232, 21656, 22090, 27632, 28184, 28748, 29323, 29910, 30508, 31118, 31740, 32375, 33023, 33683, 34357, 35044, 35745, 36460, 37189, 37933, 38691, 39465, 40254],\r\n          fill: false, // Don't fill area under the line\r\n          borderColor: \"darkred\", // Line color\r\n          backgroundColor: \"darkred\"\r\n        }\r\n      ]\r\n    };\r\n\r\n    var optionsPie = {\r\n      responsive: true,\r\n      title: {\r\n        display: true,\r\n        position: \"top\",\r\n        text: labelsBilingual.assetsBrk,//\"Assets Breakdown Today\",\r\n        fontSize:  mobile?10:14,//8,\r\n        fontColor: \"#111\"\r\n      },\r\n      legend: {\r\n        display: true,\r\n        position: \"right\",\r\n        labels: {\r\n          fontColor: \"#333\",\r\n          fontSize: mobile?10:12//16\r\n        }\r\n      }\r\n    };\r\n     \r\n    let optionsPieLiabs = JSON.parse(JSON.stringify(optionsPie));\r\n\r\n    \r\n    optionsPieLiabs.title.text= labelsBilingual.liabsBrk//\"Liabilities Breakdown\" \r\n     \r\n    const dataPieAssets = {\r\n      labels: [\r\n        labelsBilingual.cashLike,labelsBilingual.RRSP,labelsBilingual.shares,labelsBilingual.realEstate,labelsBilingual.otherAssets\r\n      ],\r\n      datasets: [\r\n        {\r\n             data: [\r\n            getAssetsCategoryTotal(this.props.dataInput,ASSETS.CASH.Key)+\r\n            getAssetsCategoryTotal(this.props.dataInput,ASSETS.LIFE_INSURANCE.Key)+\r\n            getAssetsCategoryTotal(this.props.dataInput,ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.Key)\r\n            +getAssetsCategoryTotal(this.props.dataInput,ASSETS.TFSA.Key)\r\n            , \r\n            getAssetsCategoryTotal(this.props.dataInput,ASSETS.RRSP_RRIF.Key), \r\n            getAssetsCategoryTotal(this.props.dataInput,ASSETS.SMALL_BUSINESS_SHARES.Key)+\r\n            getAssetsCategoryTotal(this.props.dataInput,ASSETS.STOCKS_BONDS.Key),\r\n            getAssetsCategoryTotal(this.props.dataInput,ASSETS.REAL_ESTATE.Key)+\r\n            getAssetsCategoryTotal(this.props.dataInput,ASSETS.PERSONAL_RESIDENCE.Key),\r\n            getAssetsCategoryTotal(this.props.dataInput,ASSETS.OTHER_ASSETS.Key)\r\n          ],\r\n          backgroundColor: [\"#F7464A\", \"#46BFBD\", \"#FDB45C\", \"#949FB1\", \"#4D5360\"]\r\n        }\r\n      ]\r\n    }\r\n\r\n    const dataPieLiabs = {\r\n      labels: [\r\n        labelsBilingual.loans, labelsBilingual.taxes, labelsBilingual.emergency, labelsBilingual.otherLiabs,labelsBilingual.atDeath\r\n        \r\n      ],\r\n      datasets: [\r\n        {\r\n             data: [\r\n            getLiabsCategoryTotal(this.props.dataInput,LIABILITIES.OUTSTANDING_LOANS.Key)+\r\n            getLiabsCategoryTotal(this.props.dataInput,LIABILITIES.MORTGAGE_REDEMPTION.Key)+\r\n            getLiabsCategoryTotal(this.props.dataInput,LIABILITIES.CREDIT_CARDS.Key)+\r\n            getLiabsCategoryTotal(this.props.dataInput,LIABILITIES.CLIENT_TAX_LIABILITY.Key)\r\n            , \r\n            getLiabsCategoryTotal(this.props.dataInput,LIABILITIES.INCOME_TAXES.Key), \r\n            getLiabsCategoryTotal(this.props.dataInput,LIABILITIES.EMERGENCY_FUND.Key),\r\n            getLiabsCategoryTotal(this.props.dataInput,LIABILITIES.OTHER.Key)+\r\n            getLiabsCategoryTotal(this.props.dataInput,LIABILITIES.CHILD_HOME_CARE.Key),\r\n            getLiabsCategoryTotal(this.props.dataInput,LIABILITIES.LAST_EXPENSES.Key)+\r\n        getLiabsCategoryTotal(this.props.dataInput,LIABILITIES.LEGAL_AND_EXECUTOR_FEES.Key)+\r\n        getLiabsCategoryTotal(this.props.dataInput,LIABILITIES.LEGACY_FOR_CHILDREN.Key)+\r\n        getLiabsCategoryTotal(this.props.dataInput,LIABILITIES.CHARITABLE_GIFTS.Key)+\r\n        getLiabsCategoryTotal(this.props.dataInput,LIABILITIES.PROBATE.Key)\r\n          ],\r\n          backgroundColor: [\"#F7464A\", \"#46BFBD\", \"#FDB45C\", \"#949FB1\", \"#4D5360\"]\r\n        }\r\n      ]\r\n    }\r\n/* \r\n    let needToE =\r\n      this.props.periodOption === 0 ? labels.insNeedsRet: labels.insNeedsRetLE\r\n      /*   ? \"Insurance Needs to retirement (age \"\r\n        : \"Insurance Needs to life expectancy (age \";\r\n    let needToF =\r\n      this.props.periodOption === 0\r\n        ? \"Besoins en assurance jusqu'à la retraite(âge \"\r\n        : \"Besoins en assurance jusqu'à l'espérance de vie (âge \"; \r\n    let needTo = lang === \"en\" ? needToE : needToF;\r\n */\r\n    /* let needTo =\r\n      this.props.periodOption ===DISPLAY_RETIREMENT ? labelsBilingual.insNeedsRet: (this.props.periodOption === DISPLAY_ENDAGE?labelsBilingual.insNeeds100:labelsBilingual.insNeedsRetLE)\r\n    if(this.props.periodOption !== DISPLAY_ENDAGE)\r\n      needTo += +this.props.projectEnd + \")\";\r\n */\r\n/* \r\n      const clients=this.props.dataInput.Clients\r\n      const projYears = familyProjectionYears(\r\n        clients,\r\n        this.props.dataInput.Presentations[0].periodOption,\r\n        this.props.LE,\r\n        this.props.LE\r\n      );\r\n      //const projectEnd = projYears.projectionEnd;\r\n      const protectionPeriod = projYears.noProjectionYrs;\r\n     // const minAge = projYears.survivorAge;\r\n      const singleFamily = isSingleFamily(clients);\r\n      const noSurvivor = clients.length===1;  \r\n      const insNeedLine= getInsNeedLine(this.props.dataInput.Presentations[0], this.props.projectEnd, lang,noSurvivor,singleFamily,protectionPeriod)\r\n     */const needTo=this.props.insNeedLine\r\n\r\n    \r\n/*     const assetsPie= this.props.dataInput.Assets.length>0 &&\r\n    <article className=\"canvas-container\" style={{height: \"450px\" }}>\r\n     <div style={{overflow:'hidden', float: 'left', width: '50%',height: \"400px\" }}><Pie data={dataPieAssets} options={optionsPie} /></div>\r\n    </article>\r\n */\r\n\r\nconst assetsPie= this.props.dataInput.Assets.length>0 &&\r\n    <article id=\"pieAssets\" \r\n\r\n/* style={{ position: \"relative\", left: \"20px\", height: \"400px\"}} */\r\n>\r\n\r\n<div className=\"INAPie\">\r\n<Pie  data={dataPieAssets} options={optionsPie}  />\r\n</div>\r\n</article>\r\n\r\n\r\n/* \r\nconst liabsPie= this.props.dataInput.Liabilitys.length>0 &&\r\n   <article className=\"canvas-container\" style={{height: \"450px\" }}>\r\n   <div style={{overflow:'hidden', float: 'left', width: '50%',height: \"400px\" }}><Pie data={dataPieLiabs} options={optionsPieLiabs} /></div>\r\n </article>\r\n */\r\nconst liabsPie= this.props.dataInput.Liabilitys.length>0 &&\r\n    <article   id=\"pieLiabs\" \r\n/* style={{ position: \"relative\", height: \"400px\"}} */\r\n>\r\n\r\n<div className=\"INAPie\">\r\n<Pie data={dataPieLiabs} options={optionsPieLiabs} />\r\n</div>\r\n</article>\r\n\r\n\r\n\r\n\r\n    return (\r\n      <div>\r\n        \r\n        <div style={{ width: \"100%\", float: \"left\", clear: \"left\" }}>\r\n            \r\n            <input\r\n              className=\"roundedCornerCmd\"\r\n              style={{\r\n             //   width: \"80px\",\r\n                marginTop: PDFTopMargin +\"px\",\r\n                marginRight: \"0px\",\r\n                paddingRight: \"8px\",\r\n                float: \"right\",\r\n              }}\r\n              onClick={this.doPDF}\r\n              type=\"button\"\r\n              value={CONTROLTITLE[lang].pdfINAAppendix}\r\n            />\r\n          </div>\r\n        <h3 className=\"ppi1\">\r\n          {needTo}{/* : ${formatMoney(cleanFormat(this.props.insuranceNeed,formatFr), 0, decimalChar, thousands)} */} \r\n          <Info\r\n              infoIcon={getInfoINA(lang)}\r\n          />\r\n        </h3>\r\n\r\n        <br />\r\n        <div style={{ width: \"90%\" }}>\r\n          <div style={{ width: \"100%\" }}>\r\n          <article  id=\"barNeeds\" className=\"canvas-containerINAGraphs\">\r\n              <Bar data={data} options={options} />\r\n            </article>\r\n            <article  id=\"barShortfall\" className=\"canvas-containerINAGraphs\">\r\n              <Bar  data={dataShortfall} options={options} />\r\n            </article>\r\n            <br />\r\n            <h3 className=\"ppi1\">\r\n                {labelsBilingual.currFins}\r\n                \r\n            </h3>\r\n            {\r\n               <div>\r\n                 {assetsPie}<br/><br/>{liabsPie}\r\n              </div> \r\n            }\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Bar, Line, Chart,Pie } from \"react-chartjs-2\";\r\n//import \"./Output.css\";\r\nimport \"./Output.css\";\r\nimport { readMCCData } from \"../data/dataExchangeMCC\";\r\nimport { fetchMCCData } from \"../utils/FetchAPIs\";\r\nimport { setUIDataToAPI} from \"../data/dataExchange\";\r\nimport {\r\n  getProjectedLiabilities,\r\n  cleanFormat,\r\n  numFormat,\r\n  getAssetsTaxCategoryTotal,\r\n  getAssetsCategoryTotal,\r\n  getTaxLiabCategoryTotal,\r\n  getLiabsCategoryTotal\r\n} from \"../utils/helper\";\r\nimport {\r\n  GROWTHDIR,\r\n  QUOTE_CLIENT,\r\n  QUOTE_SPOUSE,\r\n  QUOTE_JOINT,\r\n  ASSET_TAX,\r\n  ASSETS,\r\n  LIABILITIES\r\n} from \"../definitions/generalDefinitions\";\r\nimport MCCGraph from \"./MCCGraph\";\r\nimport { MultiButtons } from \"./MultiButtons\";\r\nimport { InputField } from \"./inputField\";\r\nimport DataTable from \"./GridExcelComponent/DataTable\";\r\n\r\n// props option\r\nconst DISPLAY_INCOME = 1;\r\n\r\n// for Estate\r\nconst DISPLAY_TAXLIAB_CLIENT = 1;\r\nconst DISPLAY_TAXLIAB_JLTD = 2;\r\n\r\nexport class AnalysisGraphs extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      loadingMCC: true,\r\n      estateLiab: [],\r\n      estateLiabLE: [],\r\n      taxL:0\r\n    };\r\n    this.dataAges = [];\r\n    this.dataPremiums = [];\r\n    this.dataDB = [];\r\n    this.dataSVEquiBuild = [];\r\n    this.dataSVManulife = [];\r\n    this.Prem = 0;\r\n    this.bestPremiumDur = 100;\r\n    this.bestMinMultiple = 0;\r\n    this.premiumDur = 10;\r\n    this.lifeExp = 0;\r\n    this.minMultiple = 0;\r\n    this.insMultiple = 0;\r\n    this.bestFitEquiBuild = false;\r\n    this.INAEstateOption = DISPLAY_TAXLIAB_CLIENT;\r\n    this.insuranceAmtInitial = this.props.INAOption === DISPLAY_INCOME\r\n        ? this.props.insuranceNeed\r\n        : this.props.dataEstateLiability[0];\r\nthis.chartRef = React.createRef();\r\n  this.taxLiabChartRef = React.createRef();\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getEstateLiabPieCharts()\r\n\r\n  }\r\n\r\n\r\n  shouldComponentUpdate(nextProps, nextState, prevState) {\r\n    if (\r\n      this.props.projectEnd !== nextProps.projectEnd ||\r\n      this.state.loadingMCC !== prevState.loadingMCC || this.props.INAOption !== nextProps.INAOption\r\n    ) {\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  getMCCQuoteOutput = () => {\r\n    return Promise.all([this.getMCCQuoteOutput1(), this.getMCCQuoteOutput4()]);\r\n  };\r\n\r\n  getMCCQuoteOutput1 = () => {\r\n    let quotePlanID = 48;\r\n    let quoteClient =\r\n      this.INAEstateOption === DISPLAY_TAXLIAB_JLTD\r\n        ? QUOTE_JOINT\r\n        : QUOTE_CLIENT;\r\n    let FA=this.props.INAOption === DISPLAY_INCOME\r\n        ? this.props.insuranceNeed\r\n        : this.props.dataEstateLiability[0];\r\n        const FAClean=parseFloat(cleanFormat(FA))\r\n    let dataMCC = readMCCData(\r\n      this.props.input,\r\n      quotePlanID,\r\n      quoteClient,\r\n      FAClean\r\n    );\r\n\r\n    // console.log(this.props.dataAPISite, dataMCC, FA);\r\n    if(FA>0)\r\n    {\r\n    fetchMCCData(\r\n      this.props.dataAPISite,\r\n      dataMCC,\r\n      FAClean\r\n    )\r\n      .then(data => {\r\n        // console.log(data[0]);\r\n        if (data[0] !== undefined) {\r\n          //  console.log(\"POST: MCC_OutputArrays success\");\r\n          this.minPrem = parseInt(cleanFormat(data[0][2].Values[0]));\r\n          //this.dataDB = data[0][3].Values.map(x=>parseInt(cleanFormat(x)));\r\n          this.lifeExp = this.props.lifeExp; // Math.round(parseInt(data[0][4].Values[0]));\r\n\r\n          //console.log(this.lifeExp,data[0][4].Values)\r\n          // make render\r\n        }\r\n      })\r\n      .then(data => {\r\n        this.getMCCQuoteOutput4();\r\n      });\r\n    }\r\n  };\r\n\r\n \r\n  getMCCQuoteOutput4 = async () => {\r\n    let quotePlanID = 48;\r\n    let quoteClient =\r\n      this.INAEstateOption === DISPLAY_TAXLIAB_JLTD\r\n        ? QUOTE_JOINT\r\n        : QUOTE_CLIENT;\r\n    let FA= this.props.INAOption === DISPLAY_INCOME\r\n        ? this.props.insuranceNeed\r\n        : this.props.dataEstateLiability[0];    \r\n    const FAClean=parseFloat(cleanFormat(FA))\r\n    let dataMCC = readMCCData(\r\n      this.props.input,\r\n      quotePlanID,\r\n      quoteClient,\r\n      FAClean\r\n    );\r\n    let age = dataMCC.insured.lives[0].age;\r\n    if (dataMCC.insured.lifeStatus > 0 && age > dataMCC.insured.lives[1].age)\r\n      age = dataMCC.insured.lives[1].age;\r\n    let years = this.props.projectEnd;\r\n    dataMCC.policy.objPremium.PremSet = true;\r\n    if (this.bestFitEquiBuild === true) {\r\n      dataMCC.policy.faceAmount =\r\n        FAClean / 2;\r\n      dataMCC.policy.objRider.ICO20 = true;\r\n      dataMCC.policy.objRider.T20Amt =\r\n        FAClean / 2;\r\n      dataMCC.policy.objCustomDB.solveForPremium_On = true;\r\n      dataMCC.policy.objCustomDB.customDB =\r\n        this.props.INAOption === DISPLAY_INCOME\r\n          ? this.getDataFutureINA()\r\n          : this.props.dataEstateLiability;\r\n    } else {\r\n      dataMCC.policy.objCustomDB.customDB = [];\r\n      dataMCC.policy.objCustomDB.solveForPremium_On = false;\r\n      dataMCC.policy.objPremium.PremSetAmt = this.Prem;\r\n      dataMCC.policy.objPremium.PremSetDur = parseInt(this.premiumDur);\r\n    }\r\n    dataMCC.policy.objPremium.PremSolve = false;\r\n    fetchMCCData(\r\n      this.props.dataAPISite,\r\n      dataMCC,\r\n      FAClean\r\n    ).then(data => {\r\n       if (data[0][1] !== undefined) {\r\n        console.log(\"POST: MCC_OutputArrays success\");\r\n        this.dataAges = data[0][1].Values.slice(0, years).map(x =>\r\n          parseInt(cleanFormat(x))\r\n        );\r\n        this.dataPremiums = data[0][2].Values.map(x =>\r\n          parseInt(cleanFormat(x))\r\n        );\r\n        this.dataDB = data[0][3].Values.slice(0, years).map(x =>\r\n          parseInt(cleanFormat(x))\r\n        );\r\n        this.dataSVEquiBuild = data[0][4].Values.slice(0, years).map(x =>\r\n          parseInt(cleanFormat(x))\r\n        );\r\n        this.dataDB.unshift(FAClean);\r\n        let i;\r\n\r\n        for (\r\n          i = 0;\r\n          i < this.dataDB.length + age - this.props.projectEnd + 3;\r\n          ++i\r\n        ) {\r\n          this.dataAges.pop();\r\n          this.dataDB.pop();\r\n          this.dataPremiums.pop();\r\n          this.dataSVEquiBuild.pop();\r\n        }\r\n        //console.log(this.dataDB);\r\n        /* let l = this.state.loadingMCC;\r\n        l = false;\r\n        this.setState({ l }); */\r\n      }\r\n    });\r\n  };\r\n\r\n  getMCCQuoteOutputManu = async () => {\r\n    let quotePlanID = 47; //MANU_UL_CLIENT_INVSEL = 47\r\n    let quoteClient =\r\n      this.INAEstateOption === DISPLAY_TAXLIAB_JLTD\r\n        ? QUOTE_JOINT\r\n        : QUOTE_CLIENT;\r\n        let FA = this.props.INAOption === DISPLAY_INCOME\r\n        ? this.props.insuranceNeed\r\n        : this.props.dataEstateLiability[0];\r\n        const FAClean=parseFloat(cleanFormat(FA))\r\n    let dataMCC = readMCCData(\r\n      this.props.input,\r\n      quotePlanID,\r\n      quoteClient,\r\n      FAClean\r\n    );\r\n    //console.log(dataMCC);\r\n    let age = dataMCC.insured.lives[0].age;\r\n    if (dataMCC.insured.lifeStatus > 0 && age > dataMCC.insured.lives[1].age)\r\n      age = dataMCC.insured.lives[1].age;\r\n    let years = this.props.projectEnd;\r\n    dataMCC.policy.objPremium.PremSet = false;\r\n    dataMCC.policy.objPremium.PremSolve = true;\r\n    dataMCC.policy.objPremium.PremSolveDur = 99; //years-age;\r\n    dataMCC.policy.objCustomDB.customDB = [];\r\n    dataMCC.policy.objCustomDB.solveForPremium_On = false;\r\n    dataMCC.policy.intRate = 0.035;\r\n    dataMCC.policy.province = \"AB\"; // data.dataInput.Presentations[0].Province,\r\n    fetchMCCData(\r\n      this.props.dataAPISite,\r\n      dataMCC,\r\n      FAClean\r\n    ).then(data => {\r\n       if (data[0][1] !== undefined) {\r\n        console.log(\"POST: MCC_OutputArrays success\");\r\n        this.dataAges = data[0][1].Values.slice(0, years).map(x =>\r\n          parseInt(cleanFormat(x))\r\n        );\r\n        this.dataPremiums = data[0][2].Values.map(x =>\r\n          parseInt(cleanFormat(x))\r\n        );\r\n        this.dataDB = data[0][3].Values.slice(0, years).map(x =>\r\n          parseInt(cleanFormat(x))\r\n        );\r\n        this.dataSVManulife = data[0][4].Values.slice(0, years).map(x =>\r\n          parseInt(cleanFormat(x))\r\n        );\r\n\r\n        this.dataDB.unshift(FAClean);\r\n        let i;\r\n\r\n        for (\r\n          i = 0;\r\n          i < this.dataDB.length + age - this.props.projectEnd + 8;\r\n          ++i\r\n        ) {\r\n          this.dataAges.pop();\r\n          this.dataDB.pop();\r\n          this.dataPremiums.pop();\r\n          this.dataSVManulife.pop();\r\n        }\r\n        //console.log(this.dataDB);\r\n        /* let l = this.state.loadingMCC;\r\n        l = false;\r\n        this.setState({ l }); */\r\n      }\r\n    });\r\n  };\r\n\r\n  selectMultiButton = (id, value) => {\r\n    if (value !== undefined) {\r\n      if (id === 1) this.premiumDur = value;\r\n      else if (id === 2) this.minMultiple = value;\r\n      else if (id === 3) this.insMultiple = value;\r\n      else if (id === 4) this.insuranceAmtInitial = value;\r\n    }\r\n    this.getMCCQuoteOutput();\r\n    //console.log(value);\r\n\r\n    let b = !this.state.loadingMCC;\r\n    this.setState({ loadingMCC: b });\r\n    this.minPrem = 1;\r\n  };\r\n\r\n  solveForOptimumQuote = async () => {\r\n    let min = 0;\r\n    this.bestPremiumDur = 100;\r\n    let k;\r\n    let ratio;\r\n    let dataFutureINA = this.getDataFutureINA();\r\n    //let dataFutureEstateLiab = this.getDataFutureEstateLiability();\r\n    this.bestFitEquiBuild = false;\r\n\r\n    if (false) {\r\n      let gotHereInInnerLoop = false;\r\n      for (ratio = 0; ratio <= 40; ratio++) {\r\n        for (k = 5; k < this.lifeExp + 1; k++) {\r\n          this.premiumDur = k;\r\n          this.Prem = (1 + ratio / 20) * this.minPrem;\r\n\r\n          let dataFVofPrems = this.getDataFVofPrems(\r\n            (this.props.INAOption = DISPLAY_INCOME\r\n              ? dataFutureINA\r\n              : this.props.dataEstateLiability)\r\n          );\r\n\r\n          await this.getMCCQuoteOutput4();\r\n          let SumOfSquresDiff = 0;\r\n          let i;\r\n          for (i = 0; i < this.lifeExp; ++i) {\r\n            let insVal = DISPLAY_INCOME\r\n              ? dataFutureINA[i]\r\n              : this.props.dataEstateLiability[i];\r\n            //console.log(SumOfSquresDiff,dataFVofPrems,insVal)\r\n            SumOfSquresDiff += Math.pow(dataFVofPrems[i] - insVal, 2);\r\n          }\r\n          SumOfSquresDiff = Math.round(\r\n            SumOfSquresDiff / (1000000 * this.lifeExp)\r\n          );\r\n\r\n          if (min === 0) min = SumOfSquresDiff;\r\n          else if (min > SumOfSquresDiff) {\r\n            //console.log(\"k, min, SumOfSquresDiff\");\r\n            min = SumOfSquresDiff;\r\n            this.bestPremiumDur = k;\r\n            this.bestMinMultiple = 5 * ratio;\r\n            gotHereInInnerLoop = true;\r\n          } else if (gotHereInInnerLoop === true) k = this.lifeExp + 1; //get out\r\n          //console.log(k, min, SumOfSquresDiff, ratio);\r\n          //let b = !this.state.loadingMCC;\r\n          //await this.setState({ loadingMCC: b });\r\n        }\r\n        gotHereInInnerLoop = false;\r\n      }\r\n      this.premiumDur = this.bestPremiumDur;\r\n      this.minMultiple = this.bestMinMultiple;\r\n      //await this.getMCCQuoteOutput();\r\n    } else {\r\n      //this.premiumDur = this.bestPremiumDur;\r\n      //this.minMultiple =  this.bestMinMultiple;\r\n      //this.premiumDur = k;\r\n      this.Prem = (1 + this.bestMinMultiple) * this.minPrem;\r\n\r\n      await this.getMCCQuoteOutput();\r\n    }\r\n    let b = !this.state.loadingMCC;\r\n    await this.setState({ loadingMCC: b });\r\n  };\r\n\r\n  solveForOptimumEquiBuild = async e => {\r\n    if (e === 1) {\r\n      this.bestPremiumDur = 100;\r\n      let dataFutureINA = this.getDataFutureINA();\r\n      //let dataFutureEstateLiab = this.getDataFutureEstateLiability();\r\n\r\n      this.bestFitEquiBuild = true;\r\n      await this.getMCCQuoteOutput4();\r\n\r\n      let dataFVofPrems = this.getDataFVofPrems(dataFutureINA);\r\n      let SumOfSquresDiff = 0;\r\n      let i;\r\n      for (i = 0; i < this.lifeExp; ++i) {\r\n        let insVal = DISPLAY_INCOME\r\n          ? dataFutureINA[i]\r\n          : this.props.dataEstateLiability[i];\r\n        //console.log(SumOfSquresDiff,dataFVofPrems,insVal)\r\n        SumOfSquresDiff += Math.pow(dataFVofPrems[i] - insVal, 2);\r\n      }\r\n      SumOfSquresDiff = Math.round(SumOfSquresDiff / (1000000 * this.lifeExp));\r\n      //console.log(SumOfSquresDiff)\r\n    } else if (e === 2) {\r\n      this.bestPremiumDur = 100;\r\n      let dataFutureINA = this.getDataFutureINA();\r\n\r\n      this.bestFitEquiBuild = true;\r\n      await this.getMCCQuoteOutputManu();\r\n\r\n      let dataFVofPrems = this.getDataFVofPrems(dataFutureINA);\r\n    }\r\n    // await this.getMCCQuoteOutput();\r\n\r\n    let b = !this.state.loadingMCC;\r\n    await this.setState({ loadingMCC: b });\r\n  };\r\n\r\n  selectMultiButtonINAorTax = (e) => {\r\n    if (e === DISPLAY_TAXLIAB_CLIENT) {\r\n      this.INAEstateOption = DISPLAY_TAXLIAB_CLIENT;\r\n    } else if (e === DISPLAY_TAXLIAB_JLTD) {\r\n      this.INAEstateOption = DISPLAY_TAXLIAB_JLTD;\r\n    }\r\n\r\n    //let dataFutureEstateLiab = this.getDataFutureEstateLiability();\r\n    this.insuranceAmtInitial =\r\n      this.props.INAOption === DISPLAY_INCOME\r\n        ? this.props.insuranceNeed\r\n        : this.props.dataEstateLiability[0];\r\n    //this.insuranceAmtInitial =parseInt(cleanFormat(this.insuranceAmtInitial))*(1 + this.insMultiple / 100);\r\n    this.getMCCQuoteOutput();\r\n\r\n    \r\n\r\n    let b = !this.state.loadingMCC;\r\n    this.setState({ loadingMCC: b });\r\n    this.minPrem = 1;\r\n    //this.setState({ loading: false });\r\n  };\r\n\r\n\r\n\r\ngetEstateLiabPieCharts= async () => {\r\n     \r\n    const totalLiabProjections = getProjectedLiabilities(\r\n      this.props.input.dataInput,\r\n      this.props.projectEnd,\r\n      this.props.language\r\n    );\r\n\r\n\r\n\r\n    // console.log(this.state.estateLiab,this.state.estateLiabLE)\r\n\r\n    let dataNA = setUIDataToAPI(this.props.input, 0);\r\n\r\n    let estateLiab2=[]\r\n    estateLiab2.push(totalLiabProjections[0])\r\n    const l1= await getTaxLiabCategoryTotal(this.props.input.dataInput,ASSET_TAX.REGISTERED.Key,dataNA, 0);\r\n    this.setState({taxL: l1})\r\n    estateLiab2.push(l1)\r\n    const l2=await getTaxLiabCategoryTotal(this.props.input.dataInput,ASSET_TAX.CAPITAL_GAINS_ANNUAL.Key,dataNA, 0)\r\n    const l3=await getTaxLiabCategoryTotal(this.props.input.dataInput,ASSET_TAX.CAPITAL_GAINS_DEFERRED.Key,dataNA, 0)\r\n    estateLiab2.push(l2+l3)\r\n    estateLiab2.push(await getTaxLiabCategoryTotal(this.props.input.dataInput,ASSET_TAX.FULLY_TAXABLE.Key,dataNA, 0))\r\n    estateLiab2.push(await getTaxLiabCategoryTotal(this.props.input.dataInput,ASSET_TAX.DIVIDEND.Key,dataNA, 0));\r\n\r\n\r\n    this.setState({estateLiab: estateLiab2});\r\n\r\n    let estateLiab3=[]\r\n    estateLiab3.push(totalLiabProjections[this.lifeExp])\r\n    estateLiab3.push(await getTaxLiabCategoryTotal(this.props.input.dataInput,ASSET_TAX.REGISTERED.Key,dataNA, this.lifeExp))\r\n    const l2LE=await getTaxLiabCategoryTotal(this.props.input.dataInput,ASSET_TAX.CAPITAL_GAINS_ANNUAL.Key,dataNA, this.lifeExp)\r\n    const l3LE=await getTaxLiabCategoryTotal(this.props.input.dataInput,ASSET_TAX.CAPITAL_GAINS_DEFERRED.Key,dataNA, this.lifeExp)\r\n    estateLiab3.push(l2LE+l3LE)\r\n    estateLiab3.push(await getTaxLiabCategoryTotal(this.props.input.dataInput,ASSET_TAX.FULLY_TAXABLE.Key,dataNA, this.lifeExp))\r\n    estateLiab3.push(await getTaxLiabCategoryTotal(this.props.input.dataInput,ASSET_TAX.DIVIDEND.Key,dataNA, this.lifeExp));\r\n    this.setState({estateLiabLE: estateLiab3});\r\n\r\n    // console.log(this.state.estateLiab,this.state.estateLiabLE)\r\n// console.log(estateLiab2,estateLiab3)\r\n}\r\n\r\n\r\n\r\n\r\n\r\n  getDataFutureINA = () => {\r\n    let dataFutureINA = [];\r\n    let i;\r\n    let j;\r\n    var pv;\r\n    var totalLiab = 0;\r\n    var totalLiabProjections = [];\r\n    // project liabs\r\n\r\n    totalLiabProjections = getProjectedLiabilities(\r\n      this.props.input.dataInput,\r\n      this.props.projectEnd,\r\n      this.props.language\r\n    );\r\n\r\n    \r\n\r\n    const currINA = parseFloat(cleanFormat(this.props.insuranceNeed));\r\n    const intRate = parseFloat(\r\n      this.props.input.dataInput.Presentations[0].invRate / 100\r\n    );\r\n    const inflation = parseFloat(\r\n      this.props.input.dataInput.Presentations[0].inflation / 100\r\n    );\r\n    dataFutureINA.push(currINA);\r\n    //console.log(this.props.insuranceNeed)\r\n    for (i = 1; i < this.props.projectEnd; ++i) {\r\n      pv =\r\n        (dataFutureINA[i - 1] - this.props.dataShortfall[i - 1]) *\r\n        (1 + intRate);\r\n      //   console.log(pv)\r\n      dataFutureINA.push(Math.round(Math.max(0, pv)));\r\n    }\r\n    // add liab\r\n    for (i = 1; i < this.props.projectEnd; ++i) {\r\n      dataFutureINA[i] += totalLiabProjections[i];\r\n    }\r\n    return dataFutureINA;\r\n  };\r\n\r\n  /* getDataFutureEstateLiability = () => {\r\n    let i;\r\n    var totalLiabProjections = [];\r\n    \r\n    // project liabs\r\n    totalLiabProjections=getProjectedLiabilities(this.props.input.dataInput, this.props.projectEnd, this.props.language) \r\n\r\n    const currEstateLiability=parseFloat(cleanFormat(this.props.insuranceNeed));\r\n    const intRate=parseFloat(this.props.input.dataInput.Presentations[0].invRate/100);            \r\n    const inflation=parseFloat(this.props.input.dataInput.Presentations[0].inflation/100);\r\n    let dataFutureEstateLiability=[]\r\n    \r\n    for (i = 1; i < this.props.projectEnd; ++i) {\r\n        dataFutureEstateLiability.push(this.props.dataTaxLiability[i]);\r\n    }\r\n    // add liab\r\n    for (i = 1; i < this.props.projectEnd; ++i) {\r\n        dataFutureEstateLiability[i]+=totalLiabProjections[i];\r\n    }\r\n    return dataFutureEstateLiability;\r\n  };\r\n */\r\n\r\nhandleFocus = (event) => {\r\n  event.target.select();\r\n};\r\n\r\n  getDataFVofPrems = dataFuture => {\r\n    let dataFVofPrems = [];\r\n    let i;\r\n    let fv = 0;\r\n\r\n    for (i = 0; i < this.dataPremiums.length; ++i) {\r\n      let shortfall = dataFuture[i] - this.dataDB[i];\r\n      fv = (fv + this.dataPremiums[i]) * 1.0375;\r\n      dataFVofPrems.push(fv + shortfall);\r\n    }\r\n    for (i = this.dataPremiums.length; i < this.props.projectEnd; ++i) {\r\n      let shortfall = dataFuture[i] - this.dataDB[i];\r\n      fv = fv * 1.0375;\r\n      dataFVofPrems.push(fv + shortfall);\r\n    }\r\n\r\n    return dataFVofPrems;\r\n  };\r\n\r\n  render() {\r\n    let dtaAgesAll = [];\r\n    let k;\r\n    let lifeExp = this.props.lifeExp;\r\n    let age = this.props.input.dataInput.Clients[1].Age;\r\n\r\n    if (this.INAEstateOption === DISPLAY_TAXLIAB_CLIENT) {\r\n      lifeExp = this.props.lifeExpClient;\r\n      age = this.props.input.dataInput.Clients[0].Age;\r\n    } else if (this.INAEstateOption === DISPLAY_TAXLIAB_JLTD) {\r\n      lifeExp = this.props.lifeExpJLTD;\r\n      if (age > this.props.input.dataInput.Clients[1].Age)\r\n        age = this.props.input.dataInput.Clients[1].Age;\r\n    }\r\n\r\n    for (k = 0; k < lifeExp + 3; ++k) {\r\n      dtaAgesAll.push(age + k);\r\n    }\r\n\r\n    //if (this.props.INAOption !== DISPLAY_INCOME) {\r\n    var dataFutureINA = this.getDataFutureINA();\r\n    const dataShortfallFV = {\r\n      labels: dtaAgesAll, // this.dataAges,\r\n      datasets: [\r\n        {\r\n          label:\r\n            this.props.language === \"en\"\r\n              ? \"Future insurance needs\"\r\n              : \"Besoins d’assurance futurs\", //Income Shortfall',\r\n          data: dataFutureINA,\r\n\r\n          fill: true, // Don't fill area under the line\r\n          borderColor: \"darkred\", // Line color\r\n          backgroundColor: \"rgba(244, 144, 128, 0.8)\"\r\n        }\r\n      ]\r\n    };\r\n    //} else {\r\n    let dataTaxLiabLifeExp = [];\r\n    let dataTaxLiab = []; // this.props.dataEstateLiability;\r\n\r\n    for (k = 0; k < lifeExp + 3; ++k) {\r\n      dataTaxLiabLifeExp.push(0);\r\n      dataTaxLiab.push(this.props.dataEstateLiability[k]);\r\n    }\r\n    dataTaxLiabLifeExp[lifeExp] = dataTaxLiab[lifeExp];\r\n    dataTaxLiab[lifeExp] = 0;\r\n\r\n    // console.log(this.INAEstateOption, age, dtaAgesAll, lifeExp);\r\n    const dataTaxLiability = {\r\n      labels: dtaAgesAll,\r\n      datasets: [\r\n        {\r\n          label:\r\n            this.props.language === \"en\"\r\n              ? \"Future insurance Needs\"\r\n              : \"Future insurance Needs ^F\", //Income Shortfall',\r\n          //type: \"line\",\r\n          data: dataTaxLiab,\r\n\r\n          fill: true, // Don't fill area under the line\r\n          borderColor: \"darkGrey\", // Line color\r\n          backgroundColor: \"#607d8b\"\r\n        },\r\n        {\r\n          label:\r\n            this.props.language === \"en\"\r\n              ? \"Life Expectancy \"\r\n              : \"Espérance de vie\", //Income Shortfall',\r\n          //type: \"line\",\r\n          data: dataTaxLiabLifeExp,\r\n          fill: true, // Don't fill area under the line\r\n          borderColor: \"#6AAd8b\",\r\n          backgroundColor: \"rgb(106,173,139,.5)\"// \"rgba(96, 125, 139, .7)\"\r\n        }\r\n      ]\r\n    };\r\n\r\n  const dataPieAssets = {\r\n  labels: [\r\n    \"Cash/TFSA/Insurance\", \"RRSP/RRIF\", \"Public/Private shares\", \"Real Estate\", \"Other\"\r\n  ],\r\n  datasets: [\r\n    {\r\n         data: [\r\n        getAssetsCategoryTotal(this.props.input.dataInput,ASSETS.CASH.Key)+\r\n        getAssetsCategoryTotal(this.props.input.dataInput,ASSETS.LIFE_INSURANCE.Key)+\r\n        getAssetsCategoryTotal(this.props.input.dataInput,ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.Key)\r\n        , \r\n        getAssetsCategoryTotal(this.props.input.dataInput,ASSETS.RRSP_RRIF.Key), \r\n        getAssetsCategoryTotal(this.props.input.dataInput,ASSETS.SMALL_BUSINESS_SHARES.Key)+\r\n        getAssetsCategoryTotal(this.props.input.dataInput,ASSETS.STOCKS_BONDS.Key),\r\n        getAssetsCategoryTotal(this.props.input.dataInput,ASSETS.REAL_ESTATE.Key)+\r\n        getAssetsCategoryTotal(this.props.input.dataInput,ASSETS.PERSONAL_RESIDENCE.Key),\r\n        getAssetsCategoryTotal(this.props.input.dataInput,ASSETS.OTHER_ASSETS.Key)\r\n      ],\r\n      backgroundColor: [\"#F7464A\", \"#46BFBD\", \"#FDB45C\", \"#949FB1\", \"#4D5360\"]\r\n    }\r\n  ]\r\n}\r\nconst dataPieTax = {\r\n  labels: [\r\n    \"Non-Taxable\", \"RRSP/RRIF\", \"Capital Gains\", \"Taxed As Income\", \"Dividend\"\r\n  ],\r\n  datasets: [\r\n    {\r\n         data: [\r\n        getAssetsTaxCategoryTotal(this.props.input.dataInput,ASSET_TAX.NON_TAXABLE.Key), \r\n        getAssetsTaxCategoryTotal(this.props.input.dataInput,ASSET_TAX.REGISTERED.Key), \r\n        getAssetsTaxCategoryTotal(this.props.input.dataInput,ASSET_TAX.CAPITAL_GAINS_ANNUAL.Key)+\r\n        getAssetsTaxCategoryTotal(this.props.input.dataInput,ASSET_TAX.CAPITAL_GAINS_DEFERRED.Key),\r\n        getAssetsTaxCategoryTotal(this.props.input.dataInput,ASSET_TAX.FULLY_TAXABLE.Key), \r\n        getAssetsTaxCategoryTotal(this.props.input.dataInput,ASSET_TAX.DIVIDEND.Key)\r\n      ],\r\n      backgroundColor: [\"#F7464A\", \"#46BFBD\", \"#FDB45C\", \"#949FB1\", \"#4D5360\"]\r\n    }\r\n  ]\r\n}\r\n\r\nconst dataPieLiabs = {\r\n  labels: [\r\n    \"Loans\", \"Taxes\", \"Emergency Fund\", \"Other\"\r\n  ],\r\n  datasets: [\r\n    {\r\n         data: [\r\n        getLiabsCategoryTotal(this.props.input.dataInput,LIABILITIES.OUTSTANDING_LOANS.Key)+\r\n        getLiabsCategoryTotal(this.props.input.dataInput,LIABILITIES.MORTGAGE_REDEMPTION.Key)+\r\n        getLiabsCategoryTotal(this.props.input.dataInput,LIABILITIES.CREDIT_CARDS.Key)+\r\n        getLiabsCategoryTotal(this.props.input.dataInput,LIABILITIES.CLIENT_TAX_LIABILITY.Key)\r\n        , \r\n        getLiabsCategoryTotal(this.props.input.dataInput,LIABILITIES.INCOME_TAXES.Key), \r\n        getLiabsCategoryTotal(this.props.input.dataInput,LIABILITIES.EMERGENCY_FUND.Key),\r\n        getLiabsCategoryTotal(this.props.input.dataInput,LIABILITIES.OTHER.Key)+\r\n        getLiabsCategoryTotal(this.props.input.dataInput,LIABILITIES.CHILD_HOME_CARE.Key)\r\n      ],\r\n      backgroundColor: [\"#F7464A\", \"#46BFBD\", \"#FDB45C\", \"#949FB1\"]\r\n    }\r\n  ]\r\n}\r\nconst dataPieLiabsAtDeath = {\r\n  labels: [\r\n    \"Last Expenses\", \"Legal and Executor Fees\", \"Future Commitments\"\r\n  ],\r\n  datasets: [\r\n    {\r\n         data: [\r\n           getLiabsCategoryTotal(this.props.input.dataInput,LIABILITIES.LAST_EXPENSES.Key),\r\n        getLiabsCategoryTotal(this.props.input.dataInput,LIABILITIES.LEGAL_AND_EXECUTOR_FEES.Key), \r\n        getLiabsCategoryTotal(this.props.input.dataInput,LIABILITIES.LEGACY_FOR_CHILDREN.Key)+\r\n        getLiabsCategoryTotal(this.props.input.dataInput,LIABILITIES.CHARITABLE_GIFTS.Key)\r\n      ],\r\n      backgroundColor: [\"#F7464A\", \"#46BFBD\", \"#FDB45C\"]\r\n    }\r\n  ]\r\n}\r\n\r\n\r\n\r\n\r\n//options\r\n  var optionsPie = {\r\n    responsive: true,\r\n    title: {\r\n      display: true,\r\n      position: \"top\",\r\n      text: \"Assets Breakdown Today\",\r\n      fontSize: 14,//8,\r\n      fontColor: \"#111\"\r\n    },\r\n    legend: {\r\n      display: true,\r\n      position: \"right\",\r\n      labels: {\r\n        fontColor: \"#333\",\r\n        fontSize: 12//16\r\n      }\r\n    }\r\n  };\r\n   \r\n   \r\n   let optionsPieTax = JSON.parse(JSON.stringify(optionsPie));\r\n   optionsPieTax.title.text=\"Tax Treatment of Assets\"\r\n\r\nlet optionsPieLiabsAtDeath = JSON.parse(JSON.stringify(optionsPie));\r\n   optionsPieLiabsAtDeath.title.text=\"Liabilities At Death\"\r\n\r\nlet optionsPieLiabs = JSON.parse(JSON.stringify(optionsPie));\r\n   optionsPieLiabs.title.text=\"Liabilities Breakdown\"\r\n\r\n\r\n\r\n\r\nconst dataPieEstateLiabNow = {\r\n  labels: [\r\n    \"Liabilities\", \"Taxes: RRSP/RRIF\", \"Taxes: Capital Gains\", \"Taxes: As Income\", \"Taxes: Dividend\"\r\n  ],\r\n  datasets: [\r\n    {\r\n         data: this.state.estateLiab,\r\n      backgroundColor: [\"#F7464A\", \"#46BFBD\", \"#FDB45C\", \"#949FB1\", \"#4D5360\"]\r\n    }\r\n  ]\r\n}\r\nconst dataPieEstateLiabLE = {\r\n  labels: [\r\n    \"Liabilities\", \"Taxes: RRSP/RRIF\", \"Taxes: Capital Gains\", \"Taxes: As Income\", \"Taxes: Dividend\"\r\n  ],\r\n  datasets: [\r\n    {\r\n         data: this.state.estateLiabLE,\r\n      backgroundColor: [\"#F7464A\", \"#46BFBD\", \"#FDB45C\", \"#949FB1\", \"#4D5360\"]\r\n    }\r\n  ]\r\n}\r\n let optionsPieEstateLiab= JSON.parse(JSON.stringify(optionsPie));\r\n   optionsPieEstateLiab.title.text=\"Estate Liability Today\"\r\n\r\nlet optionsPieEstateLiabLE= JSON.parse(JSON.stringify(optionsPie));\r\n   optionsPieEstateLiabLE.title.text=\"Estate Liability at Life Expectancy +3\"\r\n\r\n\r\n\r\n\r\n\r\n    /* var ctx = document.getElementById('myChart3');\r\n\r\n    var myChart3=new Chart(ctx, {\r\n      type: \"bar\", // override the default type\r\n\r\n      data: {\r\n        labels: dtaAgesAll,\r\n        datasets: [\r\n          {\r\n            label:\r\n              this.props.language === \"en\"\r\n                ? \"Life Expectancy\"\r\n                : \"Life Expectancy ^F\", //Income Shortfall',\r\n            data: dataTaxLiabLifeExp,\r\n            borderColor: \"#6AAd8b\",\r\n            backgroundColor: \"rgb(106,173,139,.5)\"\r\n          },\r\n          {\r\n            type: \"line\", // set the default type\r\n            label:\r\n              this.props.language === \"en\"\r\n                ? \"Future insurance Needs\"\r\n                : \"Future insurance Needs ^F\", //Income Shortfall',\r\n            //type: \"line\",\r\n            data: this.props.dataEstateLiability,\r\n            fill: true, // Don't fill area under the line\r\n            borderColor: \"darkGrey\", // Line color\r\n            backgroundColor: \"#607d8b\"\r\n          }\r\n        ]\r\n      },\r\n      options: {\r\n        //Customize chart options\r\n      }\r\n    });\r\n */\r\n    \r\n    //this.taxLiabChartRef = this.chartRef.current.getContext(\"2d\");\r\n    /* new Chart(this.taxLiabChartRef, {\r\n      type: \"bar\", // override the default type\r\n\r\n      data: {\r\n        labels: dtaAgesAll,\r\n        datasets: [\r\n          {\r\n            label:\r\n              this.props.language === \"en\"\r\n                ? \"Life Expectancy\"\r\n                : \"Life Expectancy ^F\", //Income Shortfall',\r\n            data: dataTaxLiabLifeExp,\r\n            borderColor: \"#6AAd8b\",\r\n            backgroundColor: \"rgb(106,173,139,.5)\"\r\n          },\r\n          {\r\n            type: \"line\", // set the default type\r\n            label:\r\n              this.props.language === \"en\"\r\n                ? \"Future insurance Needs\"\r\n                : \"Future insurance Needs ^F\", //Income Shortfall',\r\n            //type: \"line\",\r\n            data: this.props.dataEstateLiability,\r\n            fill: true, // Don't fill area under the line\r\n            borderColor: \"darkGrey\", // Line color\r\n            backgroundColor: \"#607d8b\"\r\n          }\r\n        ]\r\n      },\r\n      options: {\r\n        //Customize chart options\r\n      }\r\n    }); */\r\n\r\n    // FV of prems\r\n    let dataFVofPrems = this.getDataFVofPrems(dataFutureINA);\r\n\r\n    // console.log(this.props.dataEstateLiability);\r\n\r\n    const dataMCCpremFV = {\r\n      labels: dtaAgesAll, // this.dataAges,\r\n      datasets: [\r\n        {\r\n          label:\r\n            this.props.language === \"en\"\r\n              ? \"Future Value of premiums paid      vs \"\r\n              : \"EquiBuild quote ^F\", //Income Shortfall',\r\n          data: dataFVofPrems,\r\n          fill: true,\r\n          borderColor: \"darkgreen\", // Line color\r\n          backgroundColor: \"rgba(144, 244, 88, .2)\"\r\n        },\r\n        {\r\n          label:\r\n            this.props.language === \"en\"\r\n              ? \"Raise cash to pay for shortfall \"\r\n              : \"Future insurance needs ^F\", //Income Shortfall',\r\n          data:\r\n            this.props.INAOption === DISPLAY_INCOME\r\n              ? dataFutureINA\r\n              : this.props.dataEstateLiability,\r\n          //[10964, 13734, 14008, 14288, 14574, 14866, 15163, 15466, 15776, 16091, 16413, 16741, 17076, 17417, 17766, 18121, 18484, 18853, 19230, 19615, 20007, 20407, 20815, 21232, 21656, 22090, 27632, 28184, 28748, 29323, 29910, 30508, 31118, 31740, 32375, 33023, 33683, 34357, 35044, 35745, 36460, 37189, 37933, 38691, 39465, 40254],\r\n          fill: true, // Don't fill area under the line\r\n          borderColor:\r\n            this.props.INAOption === DISPLAY_INCOME ? \"darkred\" : \"darkGrey\",\r\n          backgroundColor:\r\n            this.props.INAOption === DISPLAY_INCOME\r\n              ? \"rgba(244, 144, 128, 0.9)\"\r\n              : \"#607D8B\"\r\n        }\r\n      ]\r\n    };\r\n\r\n    let SumOfSquresDiff = 0;\r\n    let i;\r\n    for (i = 0; i < this.lifeExp; ++i) {\r\n      let insVal = DISPLAY_INCOME\r\n        ? dataFutureINA[i]\r\n        : this.props.dataEstateLiability[i];\r\n      //console.log(SumOfSquresDiff,dataFVofPrems,insVal)\r\n      SumOfSquresDiff += Math.pow(dataFVofPrems[i] - insVal, 2);\r\n    }\r\n    SumOfSquresDiff = numFormat(\r\n      Math.round(SumOfSquresDiff / (1000000 * this.lifeExp)),\r\n      false,\r\n      5,\r\n      \",\"\r\n    );\r\n\r\n    const dataMCCQuoteDB = {\r\n      labels: dtaAgesAll, // this.dataAges,\r\n      datasets: [\r\n        {\r\n          label:\r\n            this.props.language === \"en\"\r\n              ? \"EquiBuild quote\"\r\n              : \"EquiBuild quote ^F\", //Income Shortfall',\r\n          data: this.dataDB,\r\n          fill: true,\r\n          borderColor: \"darkblue\", // Line color\r\n          backgroundColor: \"rgba(144, 144, 188, .3)\"\r\n        },\r\n        {\r\n          label:\r\n            this.props.language === \"en\"\r\n              ? \"Future insurance needs\"\r\n              : \"Future insurance needs ^F\", //Income Shortfall',\r\n          data:\r\n            this.props.INAOption === DISPLAY_INCOME\r\n              ? dataFutureINA\r\n              : this.props.dataEstateLiability,\r\n          //[10964, 13734, 14008, 14288, 14574, 14866, 15163, 15466, 15776, 16091, 16413, 16741, 17076, 17417, 17766, 18121, 18484, 18853, 19230, 19615, 20007, 20407, 20815, 21232, 21656, 22090, 27632, 28184, 28748, 29323, 29910, 30508, 31118, 31740, 32375, 33023, 33683, 34357, 35044, 35745, 36460, 37189, 37933, 38691, 39465, 40254],\r\n          fill: true, // Don't fill area under the line\r\n          borderColor:\r\n            this.props.INAOption === DISPLAY_INCOME ? \"darkred\" : \"darkGrey\",\r\n          backgroundColor:\r\n            this.props.INAOption === DISPLAY_INCOME\r\n              ? \"rgba(244, 144, 128, 0.9)\"\r\n              : \"#607D8B\"\r\n        }\r\n      ]\r\n    };\r\n\r\n    const optionsFV = {\r\n      responsive: true,\r\n      maintainAspectRatio: false,\r\n      scales: {\r\n        xAxes: [\r\n          {\r\n            stacked: true,\r\n            ticks: {\r\n              beginAtZero: true\r\n            }\r\n          }\r\n        ],\r\n        yAxes: [\r\n          {\r\n            stacked: false,\r\n            ticks: {\r\n              beginAtZero: true,\r\n              steps: 10,\r\n              stepValue: 5\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    };\r\n\r\n    //let colHeaders=[\"Year\", \"Survivor's Age\", \"Insurance Need\", \"Propsed Plan Death Benefit\", \"Future Value of Premiums\", \"Net Advantage of Insurance\" ];\r\n    let colHeaders = [\r\n      \"Survivor's Age\",\r\n      \"Insurance Need\",\r\n      \"Premiums\",\r\n      \"Propsed Plan Death Benefit\",\r\n      \"Future Value of Premiums\"\r\n    ];\r\n    let dataProjection = [];\r\n    dataProjection.push(this.dataAges);\r\n    dataProjection.push(\r\n      this.props.INAOption === DISPLAY_INCOME\r\n        ? dataFutureINA\r\n        : this.props.dataEstateLiability\r\n    );\r\n    dataProjection.push(this.dataPremiums);\r\n    dataProjection.push(this.dataDB);\r\n    dataProjection.push(dataFVofPrems);\r\n\r\n    let dataProjectionCV = [];\r\n    dataProjectionCV.push(this.dataAges);\r\n    dataProjectionCV.push(this.dataSVEquiBuild);\r\n    dataProjectionCV.push(this.dataSVManulife);\r\n\r\n    let needToE =\r\n      \"Insurance Needs Projections from today to life expectancy plus 3 years (\" +\r\n      lifeExp +\r\n      \" + 3)\";\r\n    let needToF =\r\n      \"Insurance Needs to life expectancy (\" +\r\n      lifeExp +\r\n      \" years) plus 3 years^F\";\r\n    let needTo = this.props.language === \"en\" ? needToE : needToF;\r\n    // needTo += +this.props.projectEnd + \")\";\r\n\r\n    //console.log(this.state.loadingMCC);\r\n    return (\r\n      <div style={{ color: \"darkBlue\", marginTop: \"15px\" }}>\r\n        {this.props.INAOption !== DISPLAY_INCOME && (\r\n          <MultiButtons\r\n            noButtons={2}\r\n            buttonCaption={[\"Estate of Client\", \"Estate of Couple\"]}\r\n            selectMultiButton={this.selectMultiButtonINAorTax}\r\n          />\r\n        )}\r\n        \r\n        <div style={{ width: \"90%\" }}>\r\n        <div style={{ width: \"100%\" }}> \r\n        \r\n           <h3 className=\"ppi1\">\r\n          {this.props.INAOption === DISPLAY_INCOME\r\n            ? \"Your current financial situation is summerized below:\" //this.props.insuranceNeed\r\n            : <div><br/><br/>Estate Liability breakdown Today and at Life Expectancy plus 3 years: <br/></div>\r\n            }\r\n          {/*numFormat(this.props.dataTaxLiability[0], false, 2, \",\")}*/}\r\n        </h3>\r\n\r\n \r\n          <div style={{ width: \"100%\" }}>\r\n            {this.props.INAOption === DISPLAY_INCOME ? (\r\n               <div><article className=\"canvas-container\" style={{height: \"450px\" }}>\r\n                <div style={{overflow:'hidden', float: 'left', width: '50%',height: \"400px\" }}><Pie data={dataPieAssets} options={optionsPie} /></div>\r\n                <div style={{float: 'left',width: '50%',height: \"400px\"}}><Pie data={dataPieTax} options={optionsPieTax} /></div>\r\n              </article>\r\n              <article className=\"canvas-container\" style={{height: \"450px\" }}>\r\n                <div style={{overflow:'hidden', float: 'left', width: '50%',height: \"400px\" }}><Pie data={dataPieLiabs} options={optionsPieLiabs} /></div>\r\n                <div style={{float: 'left',width: '50%',height: \"400px\"}}><Pie data={dataPieLiabsAtDeath} options={optionsPieLiabsAtDeath} /></div>\r\n              </article></div>\r\n         ) : (\r\n           \r\n            <article className=\"canvas-container\" style={{height: \"450px\" }}>\r\n                <div style={{overflow:'hidden', float: 'left', width: '50%',height: \"400px\" }}><Pie data={dataPieEstateLiabNow} options={optionsPieEstateLiab} /></div >\r\n                <div style={{float: 'left',width: '50%',height: \"400px\"}}><Pie data={dataPieEstateLiabLE} options={optionsPieEstateLiabLE} /></div>\r\n              </article>)}\r\n          </div>\r\n\r\n<br/>\r\n           <h3 className=\"ppi1\">\r\n          {this.props.INAOption === DISPLAY_INCOME\r\n            ? <div>\"Net Worth Today:\"<br/> \"Assets:\"<br/> \"Liabilities:\"</div> //this.props.insuranceNeed\r\n            : <br/>\r\n            }\r\n          {/*numFormat(this.props.dataTaxLiability[0], false, 2, \",\")}*/}\r\n        </h3>\r\n\r\n\r\n\r\n        <h3 className=\"ppi1\">\r\n          {needTo} {/*:{\" \"}*/}\r\n          {this.props.INAOption === DISPLAY_INCOME\r\n            ? \"\" //this.props.insuranceNeed\r\n            : \"\"}\r\n          {/*numFormat(this.props.dataTaxLiability[0], false, 2, \",\")}*/}\r\n        </h3>\r\n\r\n             {this.props.INAOption === DISPLAY_INCOME ? (\r\n              <article className=\"canvas-container\" style={{ height: \"200px\" }}>\r\n                <Line data={dataShortfallFV} options={optionsFV} />\r\n              </article>\r\n            ) : (\r\n              <article className=\"canvas-container\" style={{ height: \"200px\" }}>\r\n                <Bar data={dataTaxLiability} options={optionsFV} />\r\n              </article>\r\n            )}\r\n\r\n            {/*  {this.props.INAOption !== DISPLAY_INCOME &&\r\n             <div>\r\n              <canvas id=\"myChart\" ref={this.chartRef} />\r\n            </div>}\r\n             */}\r\n          \r\n            <br /> <br /> <br /> <br />\r\n            <hr />\r\n            <h2>Insurance Quote:</h2>\r\n            <div style={{ width: \"100%\", float: \"left\", clear: \"left\" }}>\r\n              <MultiButtons\r\n                noButtons={1}\r\n                buttonCaption={[\"Optimize\"]}\r\n                selectMultiButton={this.solveForOptimumQuote}\r\n              />\r\n            </div>\r\n            <div style={{ width: \"100%\", float: \"left\", clear: \"left\" }}>\r\n              <MultiButtons\r\n                noButtons={2}\r\n                buttonCaption={[\"Best EquiBuild fit\", \"Manulife UL fit\"]}\r\n                selectMultiButton={this.solveForOptimumEquiBuild}\r\n              />\r\n            </div>\r\n            <InputField\r\n              inputName=\"Insurance Amtount\"\r\n              id={4}\r\n              format={2}\r\n              Count={1}\r\n              language={this.props.language}\r\n              inputValue={this.props.INAOption === DISPLAY_INCOME\r\n        ? this.props.insuranceNeed\r\n        : this.props.dataEstateLiability[0]}\r\n              maxValue={1000}\r\n              handleUpdateInput={this.selectMultiButton}\r\n            />\r\n            <InputField\r\n              inputName=\"No. of deposits\"\r\n              id={1}\r\n              format={1}\r\n              Count={1}\r\n              language={this.props.language}\r\n              inputValue={this.premiumDur}\r\n              handleUpdateInput={this.selectMultiButton}\r\n            />\r\n            <InputField\r\n              inputName=\"Over min. deposit\"\r\n              id={2}\r\n              format={3}\r\n              Count={1}\r\n              maxValue={300}\r\n              language={this.props.language}\r\n              inputValue={this.minMultiple}\r\n              handleUpdateInput={this.selectMultiButton}\r\n            />\r\n            <h3 style={{ marginTop: \"20px\", marginLeft: \"20px\" }}>\r\n              Minimize this measure of goodness of fit: {SumOfSquresDiff}{\" \"}\r\n              <span style={{ leftPadding: \"20px\" }}>\r\n                {\" \"}\r\n                Premium duration: {this.bestPremiumDur}\r\n              </span>{\" \"}\r\n            </h3>\r\n            <article className=\"canvas-container\" style={{ height: \"200px\" }}>\r\n              <Line data={dataMCCQuoteDB} options={optionsFV} />\r\n            </article>\r\n            <br /> <br /> <br /> <br />\r\n            <br /> <br /> <br /> <br />\r\n            <hr />\r\n            <h2>Compare Options</h2>\r\n            <article className=\"canvas-container\" style={{ height: \"200px\" }}>\r\n              <Line data={dataMCCpremFV} options={optionsFV} />\r\n            </article>\r\n            <p />\r\n            <br />\r\n            <p />\r\n            <br />\r\n            <hr />\r\n           \r\n            <div style={{ width: \"60%\" }}>\r\n              <DataTable\r\n                dataColTitles={colHeaders}\r\n                dataProjection={dataProjection}\r\n                gridTitle={\"Compare Options\"}\r\n                language={this.props.language}\r\n              />\r\n            </div>\r\n            <br />\r\n            {this.dataSVManulife.length > 0 && this.dataSVEquiBuild.length > 0 && (\r\n              <div style={{ width: \"60%\" }}>\r\n                <DataTable\r\n                  dataColTitles={[\r\n                    \"Age\",\r\n                    \"EquiBuild Surrnder Value\",\r\n                    \"ManuLife UL Surrnder Value\"\r\n                  ]}\r\n                  dataProjection={dataProjectionCV}\r\n                  gridTitle={\"Compare Surrender Values: EquiBuild vs Manulife UL\"}\r\n                  language={this.props.language}\r\n                />\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAhdEVYdENyZWF0aW9uIFRpbWUAMjAxOTowODozMSAwOTowOTo1NrtZ+qQAAAR6SURBVHhe7ZyLjVNBDEUXuqIhGoAytgEoCMoCTTazmrzkfWb8t++RVkRCSM++Z+zJE9ovP379+fcGylJCgPfv3+6f5vj5++/9U15SCbAa9CyZxAgtgFbgZ0QWIpwAXkLfI5oMIQTwHvoeEWRwK0DU0PfwKoM7AbIFv8WbCG4EyB78Fi8ifL3/aUq18ButZg91mwrgpQmWWNdvsgKqh76HxVpQF8Aq/JXmWjyrtgSqAmg1VLKJGWoYURFAumkWo7MjWZtGXeICRG/QDBK1StcoKkDEhnDAXbdkzWICRGqCFJw9kKpfRIAIhWvC1Q+JXrAL4LlYazz2hvVNIMI/xmNdbAIg/Gu0+qg1cvW6wSIAxwNxNCYSXiQgC8AVfkU8SEASAOHTsZZgWQCEz4elBGyXwFkQ/iNWEiwJQDGuFYrwX2PRm2kBOEY/kGElmykBqOHj5F+D0qfZjNTuAAh/Dq1+XRaAuvfBPKt9m8lKfAIgfBrSElwSgLr7gV9OBcDot0dyCoitAM/ht8Zsf7wj1c9DASI0ZoajsKOIMMtZTSITwOPpvxquZwkk+rorwGojIoffySbBUT1idwAQA1YBMpz+TrYpsMdLATwXD9bYy5RtAng8/Znh6jfuAIV4NQWeBMg2/ldPSpWJxjIBMP5t4Oh7iRUw26jMQm8n/IMAmW//V0ONFj71eckTIFLD2rPuPe/R32WmxArY0sMef6pSUoDqjKv+U4DM+z87lAlGmgCVR2cWsAKKAwGKAwGKAwGK0i/9t98StvININoFEDU+0+rDBChOCQFW33Gs/rtIYAIUBwIUBwIUBwIUBwIUBwIUBwIUBwIUBwIUBwIUZ1mACq9JI7Gax00A/NeuumAFFKUfeghQHAhQHJIAuAjGBxMgAZSD+CkAvgnUBBOgIONhJwuAe0BsMAGCQz2ADwLgHlAPlgmANWDDSt+3hxwroDhPAmAN1IJtAmAN6MIx/htYAcV5KcDqGsAU0IHr9DcwAYrDLgCmgCzc/d0VgPJtABL44ihLrIBASBysQwEwBfyw2s+zDEUnACTwz6kAlCnghdUavNQudfob4ncATAEa0v27/Zq4++dDqA+SYZJoQ+n51X5fngDUADEJ5tAIvyG+AkYgwTU0+zQlAMa4f2Yzmp4AHKsAk2AfrdHfUV0BI5DgEauDsSQA1yqABB9w9GE1k+UJAAl4sAy/QVoBkICGdfgN8h0AEqzhIfzG5TeBZ3AGyCWVR7j6xNUjtm8BnKFlnQYe62ITgJvWrCwicNfCedjYVsCIRHAR10KEPogI0JA6vRFEiHQAxARoSEnQ8ChCROlFBWhIStCxlEG6PunaxAVoaEgwIt00rXo0xFYRoKEtwZaVZlo+s9ZUUxOgYy2Cd7SC76i/B9AuMBIWvVGfACOYBh9YHgrTN4Gt8OoTwbp+F6+CK0rgRX7TFfCK7GvBm+zuBOhkE8HrlHMrwEhUGSKsthACdKKIECH4TigBRrzJECn0kbACbNEWImrgW9IIsAdVjCxB75FeAHDE29t/eyk/hYljv2IAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,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\"","var map = {\n\t\"./ar\": 367,\n\t\"./ar.js\": 367,\n\t\"./az\": 368,\n\t\"./az.js\": 368,\n\t\"./be\": 369,\n\t\"./be.js\": 369,\n\t\"./bg\": 370,\n\t\"./bg.js\": 370,\n\t\"./bs\": 371,\n\t\"./bs.js\": 371,\n\t\"./ca\": 372,\n\t\"./ca.js\": 372,\n\t\"./cs\": 373,\n\t\"./cs.js\": 373,\n\t\"./cy\": 374,\n\t\"./cy.js\": 374,\n\t\"./da\": 375,\n\t\"./da.js\": 375,\n\t\"./de\": 376,\n\t\"./de.js\": 376,\n\t\"./el\": 377,\n\t\"./el.js\": 377,\n\t\"./en\": 240,\n\t\"./en.js\": 240,\n\t\"./es\": 378,\n\t\"./es.js\": 378,\n\t\"./et\": 379,\n\t\"./et.js\": 379,\n\t\"./eu\": 380,\n\t\"./eu.js\": 380,\n\t\"./fa\": 381,\n\t\"./fa.js\": 381,\n\t\"./fi\": 382,\n\t\"./fi.js\": 382,\n\t\"./fr\": 383,\n\t\"./fr.js\": 383,\n\t\"./hr\": 384,\n\t\"./hr.js\": 384,\n\t\"./hu\": 385,\n\t\"./hu.js\": 385,\n\t\"./id\": 386,\n\t\"./id.js\": 386,\n\t\"./it\": 387,\n\t\"./it.js\": 387,\n\t\"./ja\": 388,\n\t\"./ja.js\": 388,\n\t\"./ka\": 389,\n\t\"./ka.js\": 389,\n\t\"./ko\": 390,\n\t\"./ko.js\": 390,\n\t\"./lt\": 391,\n\t\"./lt.js\": 391,\n\t\"./lv\": 392,\n\t\"./lv.js\": 392,\n\t\"./mk\": 393,\n\t\"./mk.js\": 393,\n\t\"./mn\": 394,\n\t\"./mn.js\": 394,\n\t\"./ms\": 395,\n\t\"./ms.js\": 395,\n\t\"./nb_NO\": 396,\n\t\"./nb_NO.js\": 396,\n\t\"./nl\": 397,\n\t\"./nl.js\": 397,\n\t\"./pl\": 398,\n\t\"./pl.js\": 398,\n\t\"./pt\": 399,\n\t\"./pt.js\": 399,\n\t\"./pt_BR\": 400,\n\t\"./pt_BR.js\": 400,\n\t\"./ro\": 401,\n\t\"./ro.js\": 401,\n\t\"./ru\": 402,\n\t\"./ru.js\": 402,\n\t\"./se\": 403,\n\t\"./se.js\": 403,\n\t\"./sl\": 404,\n\t\"./sl.js\": 404,\n\t\"./sq\": 405,\n\t\"./sq.js\": 405,\n\t\"./sr\": 406,\n\t\"./sr.js\": 406,\n\t\"./sv\": 407,\n\t\"./sv.js\": 407,\n\t\"./tr\": 408,\n\t\"./tr.js\": 408,\n\t\"./ua\": 409,\n\t\"./ua.js\": 409,\n\t\"./uk\": 410,\n\t\"./uk.js\": 410,\n\t\"./vi\": 411,\n\t\"./vi.js\": 411,\n\t\"./zh\": 412,\n\t\"./zh.js\": 412,\n\t\"./zh_TW\": 413,\n\t\"./zh_TW.js\": 413\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 590;","import React from \"react\";\r\nimport ReactExport from \"react-data-export\";\r\nimport { cleanFormat } from \"../../utils/helper\";\r\nimport { APPLET_INA,\r\n  APPLET_EP\r\n} from \"../../definitions/generalDefinitions\";\r\n\r\n\r\nconst ExcelFile = ReactExport.ExcelFile;\r\nconst ExcelSheet = ReactExport.ExcelFile.ExcelSheet;\r\n\r\nexport default class DownloadExcel extends React.Component {\r\n  render() {\r\n    // see https://github.com/securedeveloper/react-data-export for formatting\r\n    const styleCell = { alignment: { horizontal: \"right\" } ,font: {name: \"Trebuchet MS\"} , numFmt: \"##,##0\" };\r\n    const styleCellCol1 = { alignment: { horizontal: \"right\" } ,font: {name: \"Trebuchet MS\"} , numFmt: \"0\" };\r\n    const styleCellAlt = { alignment: { horizontal: \"right\" } ,font: {name: \"Trebuchet MS\"}, fill: { patternType: \"solid\", fgColor: { rgb: \"E9EAEB\" }}, numFmt: \"##,##0\" };\r\n    const styleCellAltCol1 = { alignment: { horizontal: \"right\" } ,font: {name: \"Trebuchet MS\"}, fill: { patternType: \"solid\", fgColor: { rgb: \"E9EAEB\" }}, numFmt: \"0\" };\r\n    const styleTitleRowInfo = {\r\n      font: {name: \"Trebuchet MS\", color: { rgb: \"FFFFFF\" }, bold: true},\r\n      alignment: { wrapText: true,horizontal: \"center\" },\r\n      border: {\r\n        top: { style: \"thin\", color: { rgb: \"C0C0C0\" } },\r\n        bottom: { style: \"thin\", color: { rgb: \"C0C0C0\" } },\r\n        right: { style: \"thin\", color: { rgb: \"C0C0C0\" } },\r\n        left: { style: \"thin\", color: { rgb: \"C0C0C0\" } }\r\n      },\r\n      fill: { patternType: \"solid\", fgColor: { rgb: \"7399c6\" } }\r\n    };\r\n    const styleCellLeftAllign = { alignment: { horizontal: \"left\" },font: {name: \"Trebuchet MS\"}};\r\n    const styleTitleRow = {\r\n      font: {name: \"Trebuchet MS\", color: { rgb: \"FFFFFF\" }, bold: true},\r\n      alignment: {wrapText: true , horizontal: \"center\" },\r\n      border: {\r\n        top: { style: \"thin\", color: { rgb: \"C0C0C0\" } },\r\n        bottom: { style: \"thin\", color: { rgb: \"C0C0C0\" } },\r\n        right: { style: \"thin\", color: { rgb: \"C0C0C0\" } },\r\n        left: { style: \"thin\", color: { rgb: \"C0C0C0\" } }\r\n      },\r\n      fill: { patternType: \"solid\", fgColor: { rgb: \"334D7C\" } }\r\n     \r\n    };\r\n\r\n    let excelColumnsDataInfoSection = [];\r\n    let title = [];\r\n    let dataBodyTitles = []\r\n    let dataBody = [];\r\n    let dataRow = [];\r\n    let j;\r\n    let i;\r\n    let dataCell;\r\n\r\n    // console.log(this.props.excelColumnsDataInfoSection);\r\n\r\n    // section 1 title and header data\r\n    dataRow = [];\r\n    const lang = this.props.language;\r\n    \r\n    // always name and its value: length 2\r\n\r\n    if (this.props.excelColumnsDataInfoSection !== undefined) {\r\n      for (j = 0; j < this.props.excelColumnsDataInfoSection.length; ++j) {\r\n        for (i = 0; i < this.props.excelColumnsDataInfoSection[0].length; ++i) {\r\n           dataCell =\r\n            this.props.excelColumnsDataInfoSection[j][i] === undefined\r\n              ? \"\"\r\n              : (this.props.excelColumnsDataInfoSection[j][i].toString().indexOf(\"%\")>=0 || isNaN(this.props.excelColumnsDataInfoSection[j][i].toString())===true  || this.props.excelColumnsDataInfoSection[j][i].toString()===\"\" ?\r\n              this.props.excelColumnsDataInfoSection[j][i].toString():\r\n                parseFloat(cleanFormat(this.props.excelColumnsDataInfoSection[j][i]),lang));\r\n          dataRow.push({\r\n            value: dataCell,\r\n            style: j === 0 ? styleTitleRowInfo : styleCell\r\n          });\r\n        }\r\n        excelColumnsDataInfoSection.push(dataRow);\r\n        dataRow = [];\r\n      }\r\n    }\r\n\r\n    // section 2 column headers and data\r\n    // add column titles as first data row to be able to style with another stupid libaray\r\n    // empty titles\r\n\r\n    if (this.props.excelColumnsHeaders !== undefined) {\r\n\r\n      title.push([{ value: this.props.title, style: {font: {sz: \"14\", name: \"Trebuchet MS\", bold: true}}}]);\r\n      \r\n      for (j = 0; j < this.props.excelColumnsHeaders.length; ++j) {\r\n        dataBodyTitles.push({ title: \"\", width: { wpx: this.props.width }, font: {name: \"Trebuchet MS\", bold: true}} );\r\n      }\r\n\r\n      for (j = 0; j < this.props.excelColumnsHeaders.length; ++j) {\r\n        \r\n        dataRow.push({ value: this.props.excelColumnsHeaders[j], style: styleTitleRow });\r\n      }\r\n      dataBody.push(dataRow);\r\n    }\r\n\r\n    dataRow = [];\r\n    if (this.props.excelColumnsDataMain !== undefined) {\r\n      for (i = 0; i < this.props.excelColumnsDataMain[0].length; ++i) {\r\n        for (j = 0; j < this.props.excelColumnsHeaders.length; ++j) {\r\n          dataCell =\r\n            this.props.excelColumnsDataMain[j][i] === undefined\r\n              ? \"\"\r\n              :(this.props.excelColumnsDataMain[j][i].toString().indexOf(\"%\")>=0 || isNaN(this.props.excelColumnsDataMain[j][i].toString())===true  || this.props.excelColumnsDataMain[j][i].toString()===\"\" ?\r\n              this.props.excelColumnsDataMain[j][i].toString():\r\n                parseFloat(cleanFormat(this.props.excelColumnsDataMain[j][i]),lang));\r\n\r\n          dataRow.push({\r\n            value: dataCell,\r\n            style: isNaN(parseFloat(cleanFormat(dataCell,lang)))\r\n              ? styleCellLeftAllign\r\n              : (i%2?(j===0?styleCellAltCol1:styleCellAlt):(j===0?styleCellCol1:styleCell))\r\n          });\r\n        }\r\n        dataBody.push(dataRow);\r\n        dataRow = [];\r\n      }\r\n    }\r\n    const multiDataSet = [\r\n      // section 1 title\r\n      {\r\n        columns: [],\r\n        data: title\r\n      },\r\n      // section 1 key values\r\n      {\r\n        columns: [],\r\n        data: excelColumnsDataInfoSection\r\n      },\r\n\r\n      // section 2\r\n      {\r\n        xSteps: 0,\r\n        ySteps: 1,\r\n        columns: dataBodyTitles,\r\n        data: dataBody\r\n      }\r\n    ];\r\n    var tempDate = new Date();\r\n    var date = tempDate.getDate()+ tempDate.toLocaleString('en-us', { month: 'short' })  + tempDate.getFullYear()\r\n\r\n    if (this.props.downloadNow === 0) return \"\";\r\n    else\r\n      return (\r\n        <ExcelFile hideElement={true} filename= {(APPLET_INA?\"INA\":\"PYE\") + \"_Data_\" + date}>\r\n          <ExcelSheet dataSet={multiDataSet} name={APPLET_INA?\"INAd\":\"PYE\" }/>\r\n        </ExcelFile>\r\n      );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport AddIcon from \"@material-ui/icons/Add\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\n//import { ReactComponent as Icon} from './icon.svg';\r\nimport \"./ExcelToolbar.css\";\r\n\r\nconst defaultToolbarStyles = {\r\n    iconButton: {\r\n    },\r\n};\r\n\r\nexport default class ExcelToolbar extends React.Component {\r\n\r\n    handleClick = () => {\r\n        this.props.setExcel();\r\n    };\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n        // console.log(\"classes\", classes)\r\n        const title=<span  style={{fontSize: '12px', marginBottom: '0px', margin: '0px', padding: '0px' }}  >{this.props.excelToolbarText}</span>\r\n        return (\r\n            <React.Fragment>\r\n                <Tooltip placement='left-end' style={{fontSize: '12px', margin: '0px', padding: '0px' }}   title={title}>\r\n                    <IconButton  onClick={this.handleClick}>\r\n                        <svg className=\"icon\" xmlns=\"http://www.w3.org/2000/svg\"   padding= '0px' width=\"30\" height=\"30\"  viewBox=\"0 0 24 24\"><path d=\"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM17 13l-5 5-5-5h3V9h4v4h3z\"/></svg>\r\n                    </IconButton>\r\n                </Tooltip>\r\n            </React.Fragment>\r\n        );\r\n    }\r\n\r\n}\r\n","import React from \"react\";\r\nimport MUIDataTable from \"mui-datatables\";\r\nimport {\r\n  Typography,\r\n  TableRow,\r\n  TableCell,\r\n  Card,\r\n  CardContent\r\n} from \"@material-ui/core\";\r\nimport { createMuiTheme, MuiThemeProvider } from \"@material-ui/core/styles\";\r\nimport {GRID_INTERNAL_CAPTIONS} from '../../definitions/generalDefinitions';\r\n//import DownloadExcel from './DownloadExcel'\r\nimport DownloadExcel from \"./DownloadExcel\";\r\nimport ExcelToolbar from \"./ExcelToolbar\";\r\n//import PrintToolbar from \"./printToolbar\";\r\nimport {\r\n  getInfoIconNotes\r\n} from \"../../definitions/infoIconsDefinitions.js\";\r\nimport { Info } from \"../Info\";\r\n\r\n\r\nexport default class Datatable extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      downloadExcelNow: 0\r\n    };\r\n  }\r\n\r\n\r\n\r\n  getMuiTheme = () =>\r\n    createMuiTheme({\r\n      typography: {\r\n        fontFamily: '\"Trebuchet MS\"',\r\n        fontSize: 11,\r\n        fontWeight: \"100\"\r\n      },\r\n      overrides: {\r\n        MUIDataTable: {\r\n          tableRoot: {\r\n            margin: 0,\r\n            \r\n          },\r\n          paper: {\r\n            boxShadow: \"none\",\r\n            borderBottom:\"1px solid rgb(150, 150, 150)\",\r\n            borderRight:\"1px solid rgb(200, 200, 200)\",\r\n          }\r\n        },\r\n        MuiTableRow: {\r\n          root: {\r\n            //for the body\r\n            height: \"100%\"\r\n          },\r\n          head: {\r\n            //for the head\r\n            height: \"100%\"\r\n          },\r\n          footer: {\r\n            display: \"none\"\r\n          }\r\n        },\r\n        MuiTableCell: {\r\n          head: {\r\n            fontSize: \".8rem\"\r\n          },\r\n          \r\n          sizeSmall: {\r\n            padding: \"8px 3px 8px 3px\"\r\n          }\r\n\r\n        },\r\n        MUIDataTableToolbar: {\r\n          root: {\r\n            paddingLeft: \"0px\"\r\n          },\r\n          titleRoot: {\r\n            fontSize: 24,\r\n            fontWeight: 'bold'\r\n          },\r\n          icon: {\r\n            fontSize: 24\r\n          }\r\n        },\r\n        MUIDataTableBodyCell: {\r\n          root: {\r\n            backgroundColor: \"#FF0000\"\r\n           }\r\n        },\r\n        MUITypography: {\r\n          root: {\r\n            backgroundColor: \"blue\"\r\n           },\r\n           \r\n            body2: {\r\n              color: 'blue',\r\n            },\r\n        },\r\n        MUITablePagination: {\r\n          caption: {\r\n              value: 'blue',\r\n            },\r\n        }\r\n      }\r\n    });\r\n\r\n  setExcel = () => {\r\n    let downloadNow = this.state.downloadExcelNow === 1 ? 0 : 1;\r\n    this.setState({ downloadExcelNow: downloadNow });\r\n  };\r\n\r\n  render() {\r\n    let data = [];\r\n    let dataRow = [];\r\n    let j;\r\n    let i;\r\n\r\n\r\n    \r\n    let unit=65\r\n    let factor=1.3\r\n    if(this.props.dataColTitles.length<4) // for liabs\r\n      unit=95\r\n   \r\n      let divStyle={ width: factor*unit*(this.props.dataColTitles.length),  marginBottom:\"10px\"  }   \r\n    if(factor*unit*this.props.dataColTitles.length>(1/factor)* window.innerWidth)\r\n    {\r\n      unit=((1/factor)*window.innerWidth/(factor*this.props.dataColTitles.length))\r\n      divStyle={ width: factor*unit*(this.props.dataColTitles.length) }   \r\n    \r\n    } \r\n     if(unit<60)\r\n    {\r\n      unit=60 \r\n      divStyle={ width: \"100%\" } \r\n    } \r\n    \r\n    \r\n    let columns = [];\r\n\r\n    if (this.props.dataProjection !== undefined) {\r\n    \r\n      for (i = 0; i < this.props.dataProjection[0].length; ++i) {\r\n        for (j = 0; j < this.props.dataColTitles.length; ++j) {\r\n          if(j<1)\r\n          dataRow.push(this.props.dataProjection[j][i]);\r\n          else\r\n          dataRow.push(this.props.dataProjection[j][i]);\r\n        }\r\n        data.push(dataRow);\r\n        dataRow = [];\r\n      }\r\n\r\n      // build and style header and columns\r\n      let widthCustom =unit;// Math.max(80,6 * this.props.dataColTitles.length); //+'%';\r\n      let styleHeader = {\r\n        backgroundColor: \"#334d7c\",\r\n        color: \"#FFFFFF\",\r\n        textAlign: \"center\",\r\n        width: widthCustom,\r\n        fontWeight: \"bold\",\r\n        position: \"sticky\",\r\n        top: 0,\r\n        zIndex: 0,\r\n      };\r\n\r\n      let customHeader = ({ index, ...column }) => {\r\n        return (\r\n          \r\n          <TableCell key={index} style={styleHeader}>\r\n            {this.props.gridIcons !== undefined && \r\n            this.props.gridIcons[index] !== undefined && <div><Info infoIcon={this.props.gridIcons[index]}/><br/></div>} \r\n          {/* {index===this.props.headerIndex && <div><Info infoIcon={getInfoIconNotes(this.props.language)}/><br/></div>}  */}\r\n           {column.name}\r\n           </TableCell>\r\n        );\r\n      };\r\n\r\n      for (i = 0; i < this.props.dataColTitles.length; ++i) {\r\n        columns.push({\r\n          name: this.props.dataColTitles[i],\r\n          options: {\r\n            filter: false,\r\n            customHeadRender: customHeader\r\n          }\r\n        });\r\n      }\r\n    }\r\n    const captions= GRID_INTERNAL_CAPTIONS[this.props.language]\r\n    const title=<span style={{fontSize: '14px'}}  >{captions.excel}</span>\r\n            \r\n              \r\n    const excelToolbarText=captions.excel \r\n     const options = {\r\n      filter: false,\r\n      filterType: \"dropdown\",\r\n      selectableRows: \"none\",\r\n      responsive: \"scrollMaxHeight\", //this removes horiz\r\n      resizableColumns: true,\r\n      selectableRowsHeader: false,\r\n      viewColumns: false,\r\n      search: false,\r\n      download: false,\r\n      print:false,\r\n      textLabels:{\r\n        pagination: {\r\n          rowsPerPage: captions.rows,\r\n          displayRows: captions.of\r\n        },\r\n        \r\n      },\r\n      \r\n      rowsPerPage: 100,\r\n      setTableProps: () => {\r\n        return {\r\n          padding: \"default\",\r\n          size: \"small\",\r\n          margin: \"0px\"\r\n        };\r\n      },\r\n      downloadOptions: {\r\n        filename: \"INAtableDownload.csv\",\r\n        separator: \",\"\r\n      },\r\n      onDownload: (buildHead, buildBody, columns, data) => {\r\n        //handleCSVDownload2(data, columns);\r\n        this.setExcel();\r\n        //return \"\\uFEFF\" + \"dfof\\n \" + \"go to hell\\n\" + buildHead(headerNames) + buildBody(data);\r\n        return false;\r\n      },\r\n      customRowRender: (data, dataIndex, rowIndex) => {\r\n        let style = {textAlign: \"right\"};\r\n        if (data[0] === \"wwwwwww\") {\r\n          style.backgroundColor = \"green\";\r\n          style.fontSize = \"36px\";\r\n        }\r\n        var rows = [];\r\n\r\n        let i;\r\n        for (i = 0; i < this.props.dataColTitles.length; ++i) {\r\n          let dataI = data[i];\r\n          rows.push(\r\n            <TableCell key={i} style={style}>\r\n              <Typography>{\r\n /* this.formatMoney(\r\n  dataI,\r\n    this.props.gridColumnAligns[i],\r\n    \".\",\r\n    \",\"\r\n  ) } */dataI}</Typography>\r\n            </TableCell>\r\n          );\r\n        }\r\n        // console.log(rows)\r\n        return (\r\n          <TableRow key={rowIndex} style={{ backgroundColor: this.props.specialRow===undefined ? (rowIndex%2?\"#f9f9f9\":\"#e4e5e6\"):(rowIndex===this.props.specialRow?\"#d0d7e6\":(rowIndex%2?\"#f9f9f9\":\"#e4e5e6\")) }}>\r\n            {rows}\r\n          </TableRow>\r\n        );\r\n      },\r\n      customToolbar: () => <ExcelToolbar excelToolbarText={excelToolbarText} setExcel={this.setExcel} />\r\n    };\r\n\r\n   \r\n\r\n    return (\r\n        <div style={divStyle} >\r\n          \r\n        <MuiThemeProvider theme={this.getMuiTheme()}>\r\n          <MUIDataTable\r\n            title={this.props.gridTitle}\r\n            data={data}\r\n            columns={columns}\r\n            options={options}\r\n          />\r\n        </MuiThemeProvider>\r\n        {this.state.downloadExcelNow ===1 && <DownloadExcel\r\n          excelColumnsDataMain={this.props.dataProjection}\r\n          width={\"90\"}\r\n          excelColumnsHeaders={this.props.dataColTitles}\r\n          title={this.props.gridTitle}\r\n          excelColumnsDataInfoSection={this.props.gridColumnsDataExcelInfoSection}\r\n          downloadNow={this.state.downloadExcelNow}\r\n          hideElement={true}\r\n          language={this.props.language}\r\n        />}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport Select from \"react-select\";\r\nimport { MESSAGES } from \"../definitions/generalDefinitions\";\r\nimport { Info } from \"./Info\";\r\nimport { DROPDOWN_WIDE } from \"../definitions/generalDefinitions\";\r\n\r\nexport class DropDown extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      //\tid: this.props.Count,\r\n      //Title: this.props.Title,\r\n      selection: \"?\",\r\n      valueSelected: this.props.defValue,\r\n    };\r\n    this.update = false;\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (nextProps !== this.props && nextProps.defValue !== undefined) {\r\n      this.setState({ valueSelected: nextProps.defValue });\r\n    }\r\n  }\r\n\r\n  handleChange = (event) => {\r\n    this.setState(\r\n      {\r\n        selection: event.label.valueOf(),\r\n        valueSelected: event.label.valueOf(),\r\n      },\r\n      () => this.afterStateUpdate()\r\n    );\r\n    this.update = true;\r\n  };\r\n\r\n  afterStateUpdate() {\r\n    this.props.updateDDown(this.props.id, this.state.selection);\r\n  }\r\n\r\n  getDefault() {\r\n    try {\r\n      return this.props.Values[\r\n        this.props.Values.find((x) => x.label === this.props.defValue).value - 1\r\n      ];\r\n    } catch (error) {\r\n      return this.props.defValue;\r\n    }\r\n  }\r\n\r\n  disableOption = (option) => {\r\n    let disable=this.props.disableOption===undefined?false:(this.props.disableOption[option.value-1])\r\n    return  disable;\r\n    //(\r\n\r\n    //  this.props.disableOption[option.value-1]===true\r\n      /* (this.props.Title === \"Member\" || this.props.Title === \"Membre\") &&\r\n      (option.label === \"Client\" ||\r\n        (this.props.hasSurivor &&\r\n          (option.label === \"Spouse\" || option.label === \"Conjoint\"))) */\r\n    //);\r\n  };\r\n\r\n  render() {\r\n    let styleDD = \"dropDown\";\r\n    if (this.props.width === DROPDOWN_WIDE) styleDD = \"dropDown dropDown2\";\r\n    const title = this.props.Title; // this.state.Title;\r\n    // console.log(this.props.Title)\r\n    const customStyles = {\r\n      control: (base) => ({\r\n        ...base,\r\n        height: 35,\r\n        minHeight: 35,\r\n        backgroundColor: \"#e9eef1\",\r\n        \"&:hover\": {\r\n          backgroundColor: \"#d6e5ee\",\r\n        },\r\n      }),\r\n    };\r\n\r\n    const taxCredit =\r\n      this.getDefault() === this.props.unlistedValue ? true : false;\r\n    var charOp = [];\r\n    charOp.push({\r\n      label: this.props.unlistedValue,\r\n      value: 1,\r\n    });\r\n\r\n    let selectComponent = (\r\n      <Select\r\n        isSearchable={true}\r\n        onfocus={this.oc}\r\n        styles={customStyles}\r\n        key={this.props.defValue}\r\n        isDisabled={this.props.disable}\r\n        value={this.getDefault()}\r\n        id={this.props.id}\r\n        onChange={this.handleChange}\r\n        options={this.props.Values}\r\n        isOptionDisabled={(option) => this.disableOption(option)}\r\n      />\r\n    );\r\n\r\n    if (taxCredit === true)\r\n      selectComponent = (\r\n        <Select\r\n          isSearchable={true}\r\n          styles={customStyles}\r\n          key={this.props.defValue}\r\n          isDisabled={false}\r\n          value={charOp[0]}\r\n          id={this.props.id}\r\n          options={charOp}\r\n        />\r\n      );\r\n\r\n    if (this.props.unlistedGreyedOption !== undefined)\r\n      selectComponent = (\r\n        <Select\r\n          isSearchable={true}\r\n          styles={customStyles}\r\n          key={this.props.defValue}\r\n          isDisabled={true}\r\n          value={this.props.unlistedGreyedOption[0]}\r\n          id={this.props.id}\r\n          options={this.props.unlistedGreyedOption}\r\n        />\r\n      );\r\n\r\n    // console.log(this.props.infoIcon)\r\n    return (\r\n      <div>\r\n        <div className={styleDD} key={this.props.defValue}>\r\n          <div className=\"controlTitle\">\r\n            {title}\r\n            {/* {checkInfo===true?<Info iconName={gov!==-1 || idM===\"infoOther\"?\"infoRed.png\":\"info.png\"}  id={idM} msg={msg} popupRight={idM===\"infoOther\"||idM===\"infogov\"?true:false}/>:''} */}\r\n            {this.props.infoIcon !== undefined ? (\r\n              <Info infoIcon={this.props.infoIcon} zIndex={999} /> //id={this.props.infoIcon.infoID} msg={this.props.infoIcon.infoText}  popupRight={this.props.infoIcon.popupRight}  iconName={this.props.infoIcon.infoAlert? \"infoRed.png\":\"info.png\"} />\r\n            ) : (\r\n              \"\"\r\n            )}\r\n          </div>\r\n\r\n          {selectComponent}\r\n          {/* <Select  isSearchable={false} onfocus={this.oc} styles={customStyles} key={this.state.valueSelected} isDisabled={this.props.disable} value={this.getDefault()} id={this.props.id} onChange={this.handleChange} options={this.props.Values} isOptionDisabled={(option)=>this.disableOption(option)} />\r\n\t\t\t\t\t{taxCredit===true&&<Select  isSearchable={false} onfocus={this.oc} styles={customStyles} key={this.state.valueSelected} isDisabled={true} value={charOp[0]} id={this.props.id} onChange={this.handleChange} options={charOp}  />} */}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport class AddRemove extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.doAdd = this.doAdd.bind(this);\r\n    this.doRemove = this.doRemove.bind(this);\r\n  }\r\n\r\n  doRemove = (id) => {\r\n    if (!this.props.disabled)\r\n      this.props.handleDoRemove(id);\r\n  };\r\n\r\n  doAdd = () => {\r\n    if (!this.props.disabled)\r\n      this.props.handleDoAdd();\r\n  };\r\n\r\n  render() {\r\n    const noRow = 0; //this.props.minComps === 2 ? 2 : 0;\r\n    let className=\"addRemove\";\r\n    if(this.props.disabled)\r\n      className=\"addRemove addRemoveDisabled\";\r\n    \r\n\tlet minRows = this.props.minComps;\r\n    const maxRows=this.props.maxRows === undefined?100:this.props.maxRows;\r\n    \r\n    if (minRows === undefined) minRows = 1;\r\n    var returnAR = \"\";\r\n\r\n    \r\n    if (\r\n      (this.props.currentID >= this.props.numberComps ||\r\n      this.props.numberComps === 0) && this.props.currentID < maxRows\r\n    ) {\r\n      returnAR = (\r\n        <span>\r\n          <button className={className} onClick={this.doAdd}>\r\n            +\r\n          </button>\r\n        </span>\r\n      );\r\n      if (\r\n        (minRows > 1 && this.props.currentID > minRows) ||\r\n        this.props.currentID > minRows\r\n      )\r\n        returnAR = (\r\n          <span>\r\n            <button className={className} onClick={this.doAdd}>\r\n              +\r\n            </button>\r\n            <button\r\n              className={className}\r\n              onClick={() => {\r\n                this.doRemove(this.props.currentID);\r\n              }}\r\n            >\r\n              -\r\n            </button>\r\n          </span>\r\n        );\r\n    } else if (\r\n      !(this.props.fixedFirstRow === true && this.props.currentID === 1) &&\r\n      (this.props.currentID > minRows || minRows <= 1)\r\n    )\r\n      returnAR = (\r\n        <span>\r\n          <button\r\n            className={className}\r\n            onClick={() => {\r\n              this.doRemove(this.props.currentID);\r\n            }}\r\n          >\r\n            -\r\n          </button>\r\n        </span>\r\n      );\r\n    return returnAR;\r\n  }\r\n}\r\n","export const ASSET_TAX_TYPE_PRINCIPAL_RES = 0;\r\nexport const ASSET_TAX_TYPE_REAL_ESTATE = 1;\r\nexport const ASSET_TAX_TYPE_STOCKS = 2;\r\nexport const ASSET_TAX_TYPE_SMALL_BUS = 3;\r\nexport const ASSET_TAX_TYPE_RRSP = 4;\r\nexport const ASSET_TAX_TYPE_INTEREST = 5;\r\nexport const ASSET_TAX_TYPE_OTHER = 6;\r\n\r\n\r\nexport const ASSET_TAX_TYPE_COUNT = 7;\r\n\r\n\r\nexport const OUTPUTTEXTEP = {\r\n  en: {\r\n    pg1T: \"Protecting Your Estate\",\r\n    pg1P1: \"Designed for: \",\r\n    pg1P2: \"Designed by: \",\r\n    pg1P3: \"Date: \",\r\n    pg1P4: \"Province: \",\r\n\r\n    pg2T: \"Introduction\",\r\n    pg2Paragraphs: [\r\n      \"Throughout your lifetime, your success has allowed you to accumulate assets beyond those that you will need to provide for an enjoyable retirement. The ownership of some of these assets will result in a tax liability upon your death (or the death of your spouse). These assets can be divided into three groups: \",\r\n      \"First, assets of a capital nature. The current Canadian tax law provides for the deemed disposition of your capital assets on your death at fair market value, and any increase in value over the cost (the tax term is Adjusted Cost Base) is taxed as a capital gain. The most common assets in this category are:\",\r\n      \"Shares in private or public companies\",\r\n      \"Second home or vacation properties\",\r\n      \"Second, assets that generally produce income on your death. The most common assets in this category are:\",\r\n      \"Registered assets, RRSPs or RRIFs\",\r\n      \"Assets that are taxed as income such as interest bearing assets, GICs or money market funds\",\r\n      \"Third, are assets that are either fully tax paid or do not attract tax on death. The most common of these are:\",\r\n      \"Non-taxable assets such as cash and TFSAs\",\r\n      \"Principal residence\",\r\n      \"The tax free proceeds from a life insurance policy\",\r\n    ],\r\n\r\n    pg3T: \"Your Financial Situation\",\r\n    pg3P1:\r\n      \"Your current balance sheet and estimated net worth are summarized below. In order to calculate your future tax liability it is necessary to project the growth in the value of your assets going forward. (See Appendix for details.)\",\r\n    pg3TabT: \"Assets\",\r\n    pg3TabRTot: \"Total Assets Available\",\r\n    pg3Tab2T: \"Liabilities\",\r\n    pg3Tab2RTot: \"Total\",\r\n    pg3Tab2NW: \"Net Worth\",\r\n\r\n    pg3T2: \"Your Growing Tax Liability\",\r\n    pg3P2:\r\n      \"As the value of your assets grow so does the tax liability that your estate will incur upon death. To project this liability, we have assumed the following asset growth rates:\",\r\n    pg3P3: \"\",\r\n    pg3Tab3R1C1: \"Assets\",\r\n    pg3Tab3R1C2: \"Growth Rate\",\r\n    pg3Tab3R1C3: \"Tax Liability Today\",\r\n    pg3Tab3R1C4: \"Tax Liability Life Exp. + 3*\",\r\n\r\n    pg3Tab3R2C1: \"Real Estate (Non-Principal)\",\r\n    pg3Tab3R2C2: \"\",\r\n    pg3Tab3R2C3: \"\",\r\n    pg3Tab3R2C4: \"\",\r\n\r\n    pg3Tab3R3C1: \"Stocks & Bonds\",\r\n    pg3Tab3R3C2: \"\",\r\n    pg3Tab3R3C3: \"\",\r\n    pg3Tab3R3C4: \"\",\r\n\r\n    pg3Tab3R4C1: \"Small Business Shares\",\r\n    pg3Tab3R4C2: \"\",\r\n    pg3Tab3R4C3: \"\",\r\n    pg3Tab3R4C4: \"\",\r\n\r\n    pg3Tab3R5C1: \"RRSP/RRIF\",\r\n    pg3Tab3R5C2: \"\",\r\n    pg3Tab3R5C3: \"\",\r\n    pg3Tab3R5C4: \"\",\r\n\r\n    pg3Tab3R6C1: \"Interest Bearing\",\r\n    pg3Tab3R6C2: \"\",\r\n    pg3Tab3R6C3: \"\",\r\n    pg3Tab3R6C4: \"\",\r\n\r\n    pg3Tab3R7C1: \"Other\",\r\n    pg3Tab3R7C2: \"\",\r\n    pg3Tab3R7C3: \"\",\r\n    pg3Tab3R7C4: \"\",\r\n\r\n    pg3Tab3R8C1: \"Total\",\r\n    pg3Tab3R8C2: \"\",\r\n    pg3Tab3R8C3: \"\",\r\n    pg3Tab3R8C4: \"\",\r\n    pg3P4:\" * Tax liability is estimated based on today's  personal income tax rate and current income tax legislation\",\r\n    pg3P5:\" ** Please see assumptions in Appendix for withdrawals of amounts from RRIF as they factor into this calculation\",\r\n    pg4T: \"Future Value of Your Estate\",\r\n    pg4P1:\r\n      \"Using the growth rate and income tax assumptions, this chart shows the total value of your estate in the future and the corresponding tax liability on death that would need to be funded for each year going forward.\",\r\n    pg4GT:\"Estate Value & Tax Liability\",\r\n    pg4P2: \" * Life Expectancy is slightly shaded in the bar graph (year: \",\r\n    pg4P3:\r\n      \"Your future tax liability grows from $X1 today to $X2 at life expectancy plus 3 years, and will need to be funded upon death.\",\r\n\r\n    pg5T: \"Estate Protection Alternatives\",\r\n    pg5Paragraphs: [\r\n      \"Many people want to keep their estate intact to pass on to their heirs.  But what is the best method to fund this tax liability upon your death so that your assets can be passed to your heirs unencumbered?\",\r\n      \"Typically, there are four options to provide the liquidity to pay taxes that come due upon death:\",\r\n      \"Liquidate assets \",\r\n      \"Borrow funds, which usually means using assets as security\",\r\n      \"Create a cash reserve by systematically saving during your lifetime\",\r\n      \"Transfer the risk by purchasing life insurance in advance\",\r\n      \"Some of the advantages and disadvantages to each of these methods are:\",\r\n      \"Liquidate assets -  Business cycles and the state of the markets are critical in the value of an asset. You have no way of knowing what this will be at your death. Further, the sale of assets by an estate often signals to a purchaser that there is a degree of urgency, which does not help the seller realize full value.\",\r\n      \"Borrow Funds -  In estate situations, the main objective is usually to distribute the assets to the beneficiaries.  Borrowing against the assets, which will likely require pledging them as security, makes this more difficult. Further, it is not possible to predict the market conditions at the time of death. Financial institutions go through cycles, as do loan rates. \",\r\n      \"Create a cash reserve - In the context of an estate situation a cash reserve is not a practical option as you do not know when death will occur and whether there will be ample cash flow at that time.\",\r\n      \"Transfer the risk by purchasing life insurance -  Life insurance, purchased in advance, removes many of the risks associated with funding the tax liability upon death. The death benefit provides liquidity at exactly the time it is needed, and in Canada it is paid tax-free to the named beneficiary.\",\r\n    ],\r\n    pg5Plast:\r\n      \"The most practical, and cost effective, method to transfer the risk of funding a tax liability is to purchase life insurance.\",\r\n\r\n    pg6T: \"Using Life Insurance to Preserve Your Estate\",\r\n    pg6Paragraphs1: [\r\n      \"A permanent life insurance policy can be a good way to provide for this future tax liability. Life insurance removes many of the financial risks associated with a premature death. It provides the financial assistance when it is needed, upon the death of the life insured. \",\r\n      \"The type of life insurance that is most appropriate for this need is permanent insurance, because coverage stays in place until death, no matter the age. There are three types of permanent cash value life insurance coverage:\",\r\n      \"Universal Life\",\r\n      \"Whole Life\",\r\n      \"Hybrid Life\",\r\n      \"Cash values are made up of accumulated capital within the policy's tax deferred accumulation fund including any guaranteed cash surrender values that are offered to the policyowner by the insurance company upon cancellation of the contract. Depending on the type of policy the total cash value, including the guaranteed portion, may be accessed by the policyowner through a number of different methods.\",\r\n      \"One of the challenges facing the purchase of insurance is that the tax liability changes over time. Insurance policies can be custom designed to meet your unique situation by matching the death benefit as closely as possible to the need for cash to pay tax liabilities at the time of death. \",\r\n    ],\r\n    pg6Paragraphs2: [\r\n      \"This is a hybrid product that is customized to address your growing estate liability insurance needs. A hybrid life insurance policy offers a unique combination of the best elements of traditional whole life and universal life insurance:\",\r\n      \"Cost of insurance is guaranteed not to increase\",\r\n      \"Death benefit is a combination of the base insurance amount, additional paid up coverage and the value of investments\",\r\n      \"Policy has contractually guaranteed cash values\",\r\n      \"Additional funds, above the cost of insurance, may be deposited\",\r\n      \"The funds are invested at the discretion of the policy owner (not the insurance company) and include these options: fixed income, stock market index accounts, mutual fund mirrored accounts and smoothed return investment account\",\r\n    ],\r\n\r\n    pg7T: \"Summary\",\r\n    pg7P1:\r\n      \"The best method of covering a future tax liability upon death is to purchase life insurance, which effectively transfers the risk away from the estate. Not only does it give you peace of mind, it also outperforms other alternative methods in terms of financial cost.\",\r\n    pg8T: \"Appendix\",\r\n    pg8P1:\r\n      \"Detailed tax liability projections for all asset categories\",\r\n    pg8P2: \"Detailed tax liability projections by individual asset category:\",\r\n    pg8O1: \"Hide\",\r\n    pg8O2: \"Show\",\r\n\r\n    pgFooter: \"See Some Important Notes at the end of this presentation.\",\r\n\r\n    pg9T: \"Some Important Notes\",\r\n    pg9P1:\r\n      \"This presentation is for general information purposes. The information contained in this presentation must not be taken or relied upon by the reader as legal, accounting, taxation or actuarial advice. For these matters readers should seek independent professional advice. Please refer to insurance company illustrations, policy contracts and information folders regarding any insurance matters referred to in this presentation.\",\r\n    pg9P2:\r\n      \"Any tax calculations are provided as examples only and are based on the personal income tax rates and income tax legislation in effect on the date of the presentation. It is assumed that the taxpayer is a Canadian resident and not a US citizen.\",\r\n\r\n      graphsT1:\"Estate Liability breakdown Today and at Life Expectancy plus 3 years:\",\r\n      graphsT2:\"Estate Liability Today\",\r\n      graphsT3:\"Estate Liability at Life Expectancy +3\",\r\n      graphsL1:\"Liabilities\",\r\n      graphsL2:\"Taxes: RRSP/RRIF\",\r\n      graphsL3:\"Taxes: Capital Gains\",\r\n      graphsL4:\"Taxes: As Income\",\r\n      graphsL5:\"Taxes: Dividend\",\r\n      graphs2L1:\"Future Insurance Needs\",\r\n      graphs2L2:\"Life Expectancy\",\r\n      graphsTaxes:\"Taxes: \",\r\n      graphsLeakageT1: \"Estate Leakage Today and at Life Expectancy plus 3 years:\",\r\n      graphsLeakageT2: \"Estate Leakage Today\",\r\n      graphsLeakageT3: \"Estate Leakage at Life Expectancy +3\",\r\n      graphsLeakage1: \"Net Estate Value\",\r\n      graphsLeakage2: \"Tax Liability\",\r\n      graphsLeakage3: \"Other Liabilities\",\r\n      \r\n  },\r\n  fr:  {\r\n        pg1T: \"Protection de votre patrimoine\",\r\n    pg1P1: \"Préparé pour : \",\r\n    pg1P2: \"Préparé par : \",\r\n    pg1P3: \"Date : \",\r\n    pg1P4: \"Province : \",\r\n\r\n    pg2T: \"Introduction\",\r\n    pg2Paragraphs: [\r\n      \"Tout au long de votre vie, votre réussite vous a permis d'accumuler plus d'actifs que ce dont vous aurez besoin pour vous assurer une retraite agréable. La propriété de certains de ces actifs entraînera une obligation fiscale à votre décès (ou au décès de votre conjoint). Ces actifs se divisent en trois catégories : \",\r\n      \"Premièrement, les immobilisations. La Loi de l'impôt sur le revenu du Canada prévoit actuellement une disposition présumée de vos biens en immobilisation à la juste valeur marchande à votre décès, et toute augmentation de la valeur par rapport au coût d'acquisition (le terme fiscal est « prix de base rajusté ») sera imposée comme un gain en capital. Les actifs les plus courants dans cette catégorie sont les suivants :\",\r\n      \"Actions de sociétés publiques ou fermées\",\r\n      \"Résidences secondaires ou de vacances\",\r\n      \"Deuxièmement, les actifs qui produisent généralement des revenus à votre décès. Les actifs les plus courants dans cette catégorie sont les suivants :\",\r\n      \"Actifs enregistrés, REER ou FERR\",\r\n      \"Actifs imposés en tant que revenus, tels que les actifs porteurs d'intérêts, les CPG ou les fonds du marché monétaire\",\r\n      \"Troisièmement, les actifs totalement libérés d'impôt ou qui ne sont pas imposables au décès. Les actifs les plus courants dans cette catégorie sont les suivants :\",\r\n      \"Actifs non imposables, tels que les liquidités et les CELI\",\r\n      \"Résidence principale\",\r\n      \"Capital décès libre d'impôt au titre d'une police d'assurance vie\",\r\n    ],\r\n\r\n    pg3T: \"Votre situation financière\",\r\n    pg3P1:\r\n      \"Votre bilan actuel et la valeur nette approximative de vos actifs sont résumés ci-dessous. Afin de calculer l'impôt que vous aurez à payer, il est nécessaire de prévoir la croissance future de vos actifs. (Voir les projections détaillées en annexe.)\",\r\n    pg3TabT: \"Actifs\",\r\n    pg3TabRTot: \"Total des actifs disponibles\",\r\n    pg3Tab2T: \"Passifs\",\r\n    pg3Tab2RTot: \"Total\",\r\n    pg3Tab2NW: \"Valeur nette\",\r\n\r\n    pg3T2: \"Augmentation de votre obligation fiscale\",\r\n    pg3P2:\r\n      \"L'obligation fiscale à laquelle sera assujetti votre patrimoine à votre décès augmente proportionnellement à la valeur de vos biens. Pour prévoir cette obligation, nous avons utilisé les hypothèses de taux de croissance suivantes :\",\r\n    pg3P3: \"\",\r\n    pg3Tab3R1C1: \"Actifs\",\r\n    pg3Tab3R1C2: \"Taux de croissance\",\r\n    pg3Tab3R1C3: \"Obligation fiscale actuelle\",\r\n    pg3Tab3R1C4: \"Obligation fiscale à l'espérance de vie, plus 3 ans*\",\r\n\r\n    pg3Tab3R2C1: \"Biens immobiliers (non principaux)\",\r\n    pg3Tab3R2C2: \"\",\r\n    pg3Tab3R2C3: \"\",\r\n    pg3Tab3R2C4: \"\",\r\n\r\n    pg3Tab3R3C1: \"Actions et obligations\",\r\n    pg3Tab3R3C2: \"\",\r\n    pg3Tab3R3C3: \"\",\r\n    pg3Tab3R3C4: \"\",\r\n\r\n    pg3Tab3R4C1: \"Actions de petites entreprises\",\r\n    pg3Tab3R4C2: \"\",\r\n    pg3Tab3R4C3: \"\",\r\n    pg3Tab3R4C4: \"\",\r\n\r\n    pg3Tab3R5C1: \"REER/FERR**\",\r\n    pg3Tab3R5C2: \"\",\r\n    pg3Tab3R5C3: \"\",\r\n    pg3Tab3R5C4: \"\",\r\n\r\n    pg3Tab3R6C1: \"Actifs porteurs d'intérêts\",\r\n    pg3Tab3R6C2: \"\",\r\n    pg3Tab3R6C3: \"\",\r\n    pg3Tab3R6C4: \"\",\r\n\r\n    pg3Tab3R7C1: \"Autres\",\r\n    pg3Tab3R7C2: \"\",\r\n    pg3Tab3R7C3: \"\",\r\n    pg3Tab3R7C4: \"\",\r\n\r\n    \r\n    pg3Tab3R8C1: \"Total\",\r\n    pg3Tab3R8C2: \"\",\r\n    pg3Tab3R8C3: \"\",\r\n    pg3Tab3R8C4: \"\",\r\n\r\n    pg3P4:\r\n      \" * L'obligation fiscale est projetée en utilisant votre taux d'imposition personnel actuel et la loi de l'impôt sur le revenu courante\",\r\n    pg3P5:\r\n      \" ** Veuillez consulter en annexe les hypothèses relatives aux retraits de montants du FERR, puisqu'ils sont pris en compte dans ce calcul\",\r\n\r\n    pg4T: \"Valeur future de votre patrimoine\",\r\n    pg4P1:\r\n          \"Selon les taux de croissance et d'imposition présumés, le tableau ci-dessous présente la valeur totale future de votre patrimoine et l'obligation fiscale au décès qu'il faudrait financer pour chaque année à venir.\",\r\n    pg4GT:\"Valeur du patrimoine et obligation fiscale\",\r\n    pg4P2: \" * L'espérance de vie est légèrement ombragée dans le graphique à barres (année: \",\r\n    pg4P3:\r\n      \"Votre obligation fiscale future passe de X1 $ aujourd'hui à X2 $ à l'espérance de vie plus 3 ans, et devra être financée au décès.\",\r\n\r\n    pg5T: \"Options de protection du patrimoine\",\r\n    pg5Paragraphs: [\r\n      \"Beaucoup de gens veulent garder leur patrimoine intact pour le transmettre à leurs héritiers.  Mais quel est le meilleur moyen de financer l'obligation fiscale qui en découle à au décès afin que leurs actifs puissent être transmis sans encombre à leurs héritiers?\",\r\n      \"En règle générale, il y a quatre moyens d'obtenir les liquidités nécessaires pour payer les impôts exigibles au décès :\",\r\n      \"Liquider les actifs\",\r\n      \"Emprunter de l'argent, ce qui signifie généralement utiliser des actifs en garantie\",\r\n      \"Créer une réserve de liquidités en épargnant de façon systématique tout au long de sa vie\",\r\n      \"Transférer le risque en souscrivant une assurance vie à l'avance\",\r\n      \"Voici certains des avantages et inconvénients de chacune de ces options :\",\r\n      \"Liquider les actifs - Les cycles économiques et l'état des marchés sont déterminants pour la valeur d'un actif. Vous n'avez aucun moyen de savoir ce qu'elle sera à votre décès. En outre, la vente d'actifs par les ayants droit indique souvent à un acheteur qu'il y a une certaine urgence, ce qui n'aide pas le vendeur à en obtenir la pleine valeur.\",\r\n      \"Emprunter de l'argent -  En planification successorale, l'objectif principal est généralement de distribuer les actifs aux bénéficiaires. Emprunter de l'argent en cédant des actifs en garantie rend la tâche plus difficile. En outre, il n'est pas possible de prévoir les conditions du marché au moment du décès. Les institutions financières connaissent des cycles, tout comme les taux d'intérêt sur les prêts. \",\r\n\"Créer une réserve de liquidités - en planification successorale, une réserve de liquidités n'est pas une option pratique, puisque vous ne savez pas quand le décès surviendra et si, à ce moment-là, il y aura assez de liquidités.\",\r\n      \"Transférer le risque en souscrivant une assurance vie -  la souscription à l'avance d'une assurance vie permet d'éliminer une grande partie des risques associés au financement de l'obligation fiscale au décès. Le capital décès procure des liquidités au moment même où on en a besoin. Au Canada, il est versé au bénéficiaire en franchise d'impôt.\",\r\n    ],\r\n    pg5Plast:\r\n      \"La souscription d'une assurance vie est la méthode la plus pratique et la plus rentable pour transférer le risque associé au financement de l'obligation fiscale.\",\r\n\r\n    pg6T: \"Utiliser l'assurance vie pour protéger votre patrimoine\",\r\n    pg6Paragraphs1: [\r\n      \"Une police d'assurance vie permanente peut être un bon moyen de sécuriser cette future obligation fiscale. L'assurance vie élimine une grande partie des risques financiers associés à un décès prématuré. Elle fournit l'aide financière nécessaire moment du décès de l'assuré. \",\r\n      \"À cette fin, l'assurance permanente est le type d'assurance vie le plus approprié, car la protection reste en vigueur jusqu'au décès, peu importe l'âge. Il y a trois formules d'assurance vie permanente avec valeur de rachat :\",\r\n      \"Vie universelle\",\r\n      \"Vie entière\",\r\n      \"Vie hybride\",\r\n      \"Les valeurs de rachat comprennent le capital accumulé dans le fonds d'accumulation à impôt différé de la police, y compris toute valeur de rachat garantie offerte au titulaire de police par la compagnie d'assurance à la résiliation du contrat. Selon le type de police, le titulaire peut avoir accès à la valeur de rachat totale, y compris la partie garantie, grâce à un certain nombre de méthodes différentes.\",\r\n      \"L'une des difficultés que pose l'achat d'une assurance est que l'obligation fiscale change au fil du temps. Les polices d'assurance peuvent être conçues sur mesure pour répondre à votre situation particulière. Pour ce faire, on s'assure que le capital décès correspond le plus possible aux liquidités nécessaires pour payer l'obligation fiscale au moment du décès. \",\r\n    ],\r\n    pg6Paragraphs2: [\r\n      \"Il s'agit d'un produit hybride conçu sur mesure pour répondre à vos besoins d'assurance visant à prévoir les obligations croissantes liées à votre patrimoine. Une police d'assurance vie hybride combine de façon unique les meilleurs éléments de l'assurance vie entière traditionnelle et de l'assurance vie universelle :\",\r\n      \"Le coût de l'assurance n'augmentera pas\",\r\n      \"Le capital décès est constitué du montant d'assurance de base, d'une assurance supplémentaire libérée et de la valeur des placements\",\r\n      \"La police comprend des valeurs de rachat garanties par le contrat\",\r\n      \"Des fonds supplémentaires, en sus du coût de l'assurance, peuvent être déposés\",\r\n      \"Les fonds sont investis à la discrétion du titulaire de la police (et non de la compagnie d'assurance) et comprennent les options suivantes : revenu fixe, comptes indiciels d'actions, fonds distincts qui calquent des fonds communs et compte de placement à rendement stabilité\",\r\n    ],\r\n\r\n    pg7T: \"Résumé\",\r\n    pg7P1:\r\n      \"La souscription d'une assurance vie constitue le meilleur moyen de prévoir l'obligation fiscale au décès. Elle dégage efficacement les ayants droit du risque financier. Non seulement elle vous apporte la tranquillité d'esprit, mais elle surpasse également les autres méthodes alternatives en terme de coût financier..\",\r\n    pg8T: \"Annexe\",\r\n    pg8P1:\r\n      \"Projections détaillées de l'obligation fiscale pour toutes les catégories d'actifs combinées\",\r\n    pg8P2: \"Projections détaillées de l'obligation fiscale par catégorie d'actifs :\",\r\n    pg8O1: \"Cacher\",\r\n    pg8O2: \"Montrer\",\r\n\r\n\r\n    pgFooter: \"Voir les notes importantes à la fin du document.\",\r\n\r\n    pg9T: \"Notes importantes\",\r\n    pg9P1:\r\n      \"Le présent exposé ne comporte que des renseignements généraux. L'information qui s'y trouve ne doit pas être considérée par le lecteur comme des conseils juridiques, comptables, fiscaux ou actuariels. Pour ces questions, le lecteur devrait consulter un professionnel indépendant. Veuillez vous reporter aux exposés de vente, au libellé des contrats et à la documentation des compagnies d'assurance pour obtenir des précisions sur les questions d'assurance mentionnées dans le présent document.\",\r\n    pg9P2:\r\n      \"Tous les calculs fiscaux sont fournis à titre d'exemple seulement et sont basés sur les taux d'impôt et la Loi de l'impôt sur le revenu en vigueur en date de la présentation. Nous présumons qu'il s'agit d'un résident canadien et non pas d'un citoyen américain.\",\r\n      graphsT1:\"Obligation fiscale aujourd'hui et à l'espérance de vie, plus 3 ans\",\r\n      graphsT2:\"Obligation fiscale aujourd'hui\",\r\n      graphsT3:\"Obligation fiscale à l'espérance de vie, plus 3 ans\",\r\n      graphsL1:\"Passifs\",\r\n      graphsL2:\"Impôt: REER/FERR\",\r\n      graphsL3:\"Impôt: Gain en capital\",\r\n      graphsL4:\"Impôt: sur le revenu\",\r\n      graphsL5:\"Impôt: sur dividende\",\r\n      graphs2L1:\"Besoins d'assurance futurs \",\r\n      graphs2L2:\"à l'espérance de vie\",\r\n      graphsTaxes:\"Impôt: \",\r\n      graphsLeakageT1: \"Réduction du patrimoine aujourd'hui et à l'espérance de vie, plus 3 ans\",\r\n      graphsLeakageT2: \"Réduction du patrimoine aujourd'hui\",\r\n      graphsLeakageT3: \"Réduction du patrimoine à l'espérance de vie, plus 3 ans\",\r\n      graphsLeakage1: \"Valeur successorale nette\",\r\n      graphsLeakage2: \"Obligation fiscale\",\r\n      graphsLeakage3: \"Autres éléments de passif\",\r\n  },\r\n\r\n};\r\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAWCAIAAAANYFjGAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAFVSURBVEhLY/z//z/D4ANMUHqQASqH1o8fPyAMDg4OCIM8MEhDaxBHIjzkaQTIiNDRSCQFoEdi7d63yy5+efHlzz+iMygTI4MED0uUPk+zszBUCBWQEYkIZ917/9t1/rNnn/9AJMgAUrwsuxOllARZoXwYoChtUegmIABqBxoC5VAGoM4Cxh2pbprqL/mpQfN/uzaQBLIhgkBDgEZB2JQAqLOA6QnCIBIA3ZFlIcTLDtIOJIFsuMtINQorgDoLmMYhDCJBrKEAlAUDcBFSjcIKoM4iPt9BACSckAFchFSjsAKoWcBMThL4/PMflAUDcBFSjcIKoM4CFjwQBpFg8fkPUBYMwEVINQorgDoLWBhCGESC7I3Pp514BwkhIAlkA0UgUqQahRUgilPlvocUlltAACxR7xbJQzkwQFFxCiyggYZCOWQBSCkP5VAGBnGdCGUOHsDAAAC1IZnmPH6jBwAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAZCAIAAAD8NuoTAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAKjSURBVEhLzZbPahNBHMc3+6dJdpvQkEojvSRYKCJolYrgVYSiFyV49jXEB5AefQMfQIp4EArqA5SKYsFKD6VFqaS0mnbTbDY7s1m/uzPEdt3sziY55HOYzP42M/nkN38znudJk4fMPyeMCdUa2yCyfs73lslk+mVaxqCFHhi9AFQQhI0cgAqDfVmQUbWYDaV0c6+79tnZ2O8dnPgdzs9k7lTl+q2p27WsqqrMjzURYSQtCLmuSwh5/qb9+kuPRy/y5Kb84rGhaZqiKJDj0SQGan3aJzsNenzWc6N/LsiTSylx3m7Rn6cKj0Zxtya9empks37aBHMWoXViee+27ENzgE4AWsGKku6Hbef7kcqjg6nfkFbrBZgJjmZEVhOdAvxUHfwWcgJrX6WN3Q6m4P9ZiCSshbFLdApS5WEAtxuJ9v/AgsAsZG15aDBhLcwnXovFX34u/WXGTakQmz8kZAvt+HMsYS3McV6LA3/Y1zojKbQaLZlpDZMtUQIvlPxRANhgNxFxAmGt2ekUoobm8poAlUKKiRiWWKwIrSwcLrKsVHSbPwqwdJlgRxXct8Jay1VtrpiYMHQOK3Wh7PCAAA+uuuKnUITBw+u5RDP/HFbU+RnlSuGUh2JZWWgvV6eYFg/FMuThExw8xLEty/yzvmsc2tP8RRRLc9bLR7RcLhuGfziKmA15VKMVlnq32221Ws1mc/Wj8n6vyN9d5H7NfHbPLZVKhUKKw2f4GwQaYh+CWbvdNk0TF5v1He3bsX5kaXh7SSfXZq2VRYKLTbFYRJ5GParF6V9sbBvDaXU6HVgigldYdPDI5/O6rudyubFdbARho4m0QQ4l6GshNwBCKAXHrs+oWgA9MOAHUEEw2EJ8UGGwLwsyBi0G6+d8b0wlrZCPJP0F2oqhNNA6qd4AAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAZCAIAAAD8NuoTAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAACFSURBVEhL7dcxDoAgDAVQ6sSN4P6nYhKRdtA42B8YOvy3WBvT/AjRIL33FM9h12AYCxE01mvLt9as2i3nbJUPFxHBWAjGQvzHKqXUWu1m8nQWud7W93fu6azg5xTBWAjGQjAWImisDQeyMUGd0yhGU0SOaRRKH3badk7UOc9pGgUNdEvpAg55Of2PHimJAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAZCAIAAAD8NuoTAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAACBSURBVEhL7dRBCoAgEAVQ9XoRXaFFm04XUl0vmxyRcNUHQYP/FpNFDH/xy4YQTH9cunaGsRA/ibX5Y15Wmem+kTKW3888GypjTeOQZ0P8byFYeQQrj2DlEaw8gpVHMBai01gVKi8b1BXJQR5aa10kB6Uvf1TtS9Q9720aBQ30MOYGI+VMGsZJ3L0AAAAASUVORK5CYII=\"","\r\n// Imports\r\nimport React from 'react';\r\nimport packageJson from '../package.json';\r\n\r\nglobal.appVersion = packageJson.version;\r\n\r\nconst APP_VERSION = global.appVersion;\r\n\r\n// version from response - first param, local version second param\r\nconst semverGreaterThan = (versionA, versionB) => {\r\n  const versionsA = versionA.split(/\\./g);\r\n\r\n  const versionsB = versionB.split(/\\./g);\r\n  while (versionsA.length || versionsB.length) {\r\n    const a = Number(versionsA.shift());\r\n\r\n    const b = Number(versionsB.shift());\r\n    // eslint-disable-next-line no-continue\r\n    if (a === b) continue;\r\n    // eslint-disable-next-line no-restricted-globals\r\n    return a > b || isNaN(b);\r\n  }\r\n  return false;\r\n};\r\n\r\nclass CacheBuster extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      loading: true,\r\n      isLatestVersion: false,\r\n      refreshCacheAndReload: () => {\r\n        console.log('Clearing cache and hard reloading...')\r\n        if (caches) {\r\n          // Service worker cache should be cleared with caches.delete()\r\n          caches.keys().then(function(names) {\r\n            for (let name of names) caches.delete(name);\r\n          });\r\n        }\r\n\r\n        // delete browser cache and hard reload\r\n        window.location.reload(true);\r\n      }\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    fetch('/meta.json')\r\n      .then((response) => response.json())\r\n      .then((meta) => {\r\n        const latestVersion = meta.version;\r\n        const currentVersion = global.appVersion;\r\n\r\n        const shouldForceRefresh = semverGreaterThan(latestVersion, currentVersion);\r\n        if (shouldForceRefresh) {\r\n          console.log(`We have a new version - ${latestVersion}. Should force refresh`);\r\n          this.setState({ loading: false, isLatestVersion: false });\r\n        } else {\r\n          console.log(`You already have the latest version - ${latestVersion}. No cache refresh needed.`);\r\n          this.setState({ loading: false, isLatestVersion: true });\r\n        }\r\n      });\r\n  }\r\n  render() {\r\n    const { loading, isLatestVersion, refreshCacheAndReload } = this.state;\r\n    return this.props.children({ loading, isLatestVersion, refreshCacheAndReload });\r\n  }\r\n}\r\n\r\nexport {CacheBuster, APP_VERSION};","import React, { Component } from 'react';\r\nimport { NA } from './components/NA';\r\nimport './App.css';\r\nimport {CacheBuster} from \"./CacheBuster\"\r\n\r\nexport default class App extends Component {\r\n\tdisplayName = \"PPI Toolkit Direct\";\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = { language: \"en\", loading:true };\r\n\t\tthis.langText = \"English\";\r\n\t}\r\n\r\n\tchangeLang = () => {\r\n\t\tvar data2 = this.state;\r\n\t\tvar oldLang = this.state.language;\r\n\t\tdata2.language = this.state.language === \"en\" ? \"fr\" : \"en\";\r\n\t\tthis.langText = this.state.language === \"en\" ? \"Fran�ais\" : \"English\";\r\n\t\tthis.setState({ data2, loading: false });// () => this.updateDataLang(oldLang));\r\n\t}\r\n\t\r\n\trender() {\r\n\r\n\t\treturn (\r\n\t\t\t<div> \r\n\t\t\t\t<NA />\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\t\t);\r\n\t  /* return (\r\n      {/* <CacheBuster>\r\n        {({ loading, isLatestVersion, refreshCacheAndReload }) => {\r\n          if (loading) return null;\r\n          if (!loading && !isLatestVersion) {\r\n            // You can decide how and when you want to force reload\r\n            refreshCacheAndReload();\r\n          } \r\n\r\n          return (*/}\r\n\t\t/* \t\t\t<NA />\r\n\t\t  \t\r\n          );\r\n\t\t */\r\n     /*     }}\r\n      </CacheBuster>\r\n    ); \r\n \r\n\r\n\t}*/\r\n}\r\n","\r\nimport './index.css';\r\nimport './components/NA.css';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport App from './App';\r\n//import registerServiceWorker from './registerServiceWorker';\r\n\r\nconst baseUrl = document.getElementsByTagName('base')[0].getAttribute('href');\r\nconst rootElement = document.getElementById('root');\r\n\r\nReactDOM.render(\r\n  \r\n  <BrowserRouter basename={baseUrl}>\r\n    <App />\r\n  </BrowserRouter>,\r\n  rootElement);\r\n\r\n//registerServiceWorker();\r\n","import { numFormat, cleanFormat, formatMoney2 } from \"../utils/helper\";\r\nimport { getAssetGridValues } from \"./assetGridProjections\";\r\nimport { setUIDataToAPI } from \"./dataExchange\";\r\nimport _ from \"lodash\";\r\n\r\nimport {\r\n  COLUMN_TITLES,\r\n  TITLES,\r\n  INCOMESOURCES,\r\n  MEMBER,\r\n} from \"../definitions/generalDefinitions\";\r\nimport {\r\n  getInfoExcelcapFund,\r\n  getInfoExcelAllAfterTax,\r\n  getInfoBOYEOY\r\n} from \"../definitions/infoIconsDefinitions\";\r\n\r\nimport {\r\n  ASSETS,\r\n  ASSET_TAX,\r\n  CONTROLTITLE,\r\n  TOTALS,\r\n  QUOTE_SPOUSE,\r\n  QUOTE_CLIENT,\r\n  ASSET_YEAR_TODAY,\r\n  FIRST_BENEFICIARY_ID\r\n} from \"../definitions/generalDefinitions\";\r\n\r\nimport {\r\n  ASSET_TAX_TYPE_PRINCIPAL_RES,\r\n  ASSET_TAX_TYPE_REAL_ESTATE,\r\n  ASSET_TAX_TYPE_STOCKS,\r\n  ASSET_TAX_TYPE_SMALL_BUS,\r\n  ASSET_TAX_TYPE_RRSP,\r\n  ASSET_TAX_TYPE_INTEREST,\r\n  ASSET_TAX_TYPE_OTHER,\r\n  ASSET_TAX_TYPE_COUNT,\r\n} from \"../definitions/outputDefinitionsEP\";\r\n\r\nconst COLUMN_YEAR = 0;\r\nconst COLUMN_AGE = 1;\r\nconst COLUMN_INCOME_NEED = 2;\r\nconst COLUMN_CPP = 3;\r\nconst COLUMN_SURVIVOR_INCOME = 4;\r\nconst COLUMN_OTHER_INCOME = 5;\r\nconst COLUMN_TOTAL_INCOME = 6;\r\nconst COLUMN_TOTAL_ASSET_LIAB = 7;\r\nconst COLUMN_SHORTFALL = 8;\r\nconst COLUMN_INSURANCE_NEED = 9;\r\nconst COLUMN_FUND = 10;\r\n\r\n// INA\r\n\r\nfunction INAFullSpreadsheetData(\r\n  cols,\r\n  insNeed,\r\n  dataInput,\r\n  dataPCV,\r\n  //Spouse,\r\n  survivors,\r\n  dataNeed,\r\n  dataGov,\r\n  dataShort,\r\n  inflation,\r\n  invRate,\r\n  afterTaxCPP_DB,\r\n  language\r\n) {\r\n\r\n\r\n  let dataColumns = [];\r\n  let dataColumn = [];\r\n  let noYrs = dataNeed.length;\r\n  const tempDate = new Date();\r\n  const year = tempDate.getFullYear();\r\n\r\n  let dataColumnCapFund = [];\r\n\r\n  let colNo;\r\n  let yr;\r\n  let survivorsIncome = 0;\r\n  let surivorsSalaryProjection = getSurivorsSalaryProjection(\r\n    dataInput,\r\n    noYrs,\r\n    survivors,\r\n    inflation\r\n  );\r\n  let surivorsCashFlowsFromAllSources=dataPCV;\r\n  let survivorsNonGovNonAssetLiabIncomeProjection = getSurvivorsNonGovNonAssetLiabIncomeProjections(\r\n    dataInput,\r\n    noYrs,\r\n    //Spouse.avgTaxRate,\r\n    survivors,\r\n    inflation\r\n  );\r\n  //const formatFr = language === \"fr\" ? true : false;\r\n  const decimalChar = language === \"en\" ? \".\" : \",\";\r\n  const thousands = language === \"en\" ? \",\" : \" \";\r\n  const capFundBase = cleanFormat(insNeed, language); //+parseFloat(CPP_DB)\r\n\r\n  //console.log(Spouse);\r\n\r\n  // console.log(surivorsSalaryProjection,survivorsNonGovNonAssetLiabIncomeProjection)\r\n  // for cap fund use first survivor tax rate   \r\n  let avgTaxRate=0;\r\n  let beneficiaryAge=0;\r\n  if(survivors.length>0)\r\n  {\r\n    avgTaxRate=survivors.filter((item)=> { return item.id===FIRST_BENEFICIARY_ID})[0].avgTaxRate;\r\n    beneficiaryAge=survivors.filter((item)=> { return item.id===FIRST_BENEFICIARY_ID})[0].Age;\r\n  }\r\n   for (colNo = 0; colNo < cols; colNo++) {\r\n    dataColumn = [];\r\n    for (yr = 0; yr < noYrs; yr++) {\r\n      if (yr === 0)\r\n        dataColumnCapFund[yr] = Math.max(\r\n          0,\r\n          (capFundBase -\r\n            cleanFormat(dataShort[yr] > 0 ? dataShort[yr] : 0, language)) *\r\n            Math.pow(1 + (invRate / 100) * (1 - avgTaxRate / 100), 1)\r\n        );\r\n      else\r\n        dataColumnCapFund[yr] = Math.max(\r\n          0,\r\n          (dataColumnCapFund[yr - 1] -\r\n            cleanFormat(dataShort[yr] > 0 ? dataShort[yr] : 0, language)) *\r\n            Math.pow(1 + (invRate / 100) * (1 - avgTaxRate / 100), 1)\r\n        );\r\n\r\n      if (colNo === COLUMN_YEAR) dataColumn.push(year + yr);\r\n      else if (colNo === COLUMN_AGE) dataColumn.push(beneficiaryAge + yr);\r\n      else if (colNo === COLUMN_INCOME_NEED)\r\n        dataColumn.push(formatMoney2(-dataNeed[yr], 0, language, false));\r\n      //numFormat(dataNeed[yr],  language===\"en\"?false:true, 2, language===\"en\"?\",\":\" \"));\r\n      else if (colNo === COLUMN_CPP)\r\n        dataColumn.push(formatMoney2(dataGov[yr], 0, language, false));\r\n      //numFormat(dataGov[yr],   language===\"en\"?false:true, 2,  language===\"en\"?\",\":\" \"));\r\n      else if (colNo === COLUMN_SURVIVOR_INCOME) {\r\n        survivorsIncome = surivorsSalaryProjection[yr];\r\n        dataColumn.push(formatMoney2(survivorsIncome, 0, language, false)); //numFormat(spouseIncome,   language===\"en\"?false:true, 2, language===\"en\"?\",\":\" \"));\r\n      } else if (colNo === COLUMN_OTHER_INCOME) {\r\n        let otherIncome = ( //Math.round((dataPCV[yr] - surivorsSalaryProjection[yr]) * 100) / 100\r\n          Math.round(\r\n            (parseFloat(survivorsNonGovNonAssetLiabIncomeProjection[yr]) -\r\n            parseFloat(surivorsSalaryProjection[yr])) *\r\n              100\r\n          ) / 100\r\n        ).toFixed(0);\r\n        if (Math.abs(otherIncome) <= 1) otherIncome = 0;\r\n        dataColumn.push(formatMoney2(otherIncome, 0, language, false)); //numFormat(otherIncome,   language===\"en\"?false:true, 2, language===\"en\"?\",\":\" \"));\r\n      } else if (colNo === COLUMN_TOTAL_INCOME)\r\n        dataColumn.push(\r\n          formatMoney2(\r\n            parseFloat(survivorsNonGovNonAssetLiabIncomeProjection[yr]) + parseFloat(dataGov[yr]),\r\n            0,\r\n            language,\r\n            false\r\n          )\r\n        );\r\n      //numFormat(dataPCV[yr] + dataGov[yr],   language===\"en\"?false:true, 2, language===\"en\"?\",\":\" \"));\r\n      else if (colNo === COLUMN_TOTAL_ASSET_LIAB)\r\n        dataColumn.push(\r\n          formatMoney2(\r\n            Math.abs(\r\n              dataPCV[yr] - (parseFloat(survivorsNonGovNonAssetLiabIncomeProjection[yr]))\r\n            ) > 1\r\n              ? dataPCV[yr] - (parseFloat(survivorsNonGovNonAssetLiabIncomeProjection[yr]))\r\n              : 0,\r\n            0,\r\n            language,\r\n            false\r\n          )\r\n        ); //numFormat(dataPCV[yr] + dataGov[yr],   language===\"en\"?false:true, 2, language===\"en\"?\",\":\" \"));\r\n      if (colNo === COLUMN_SHORTFALL)\r\n        dataColumn.push(\r\n          formatMoney2(\r\n            dataShort[yr] > 0 ? dataShort[yr] : 0,\r\n            0,\r\n            language,\r\n            false\r\n          )\r\n          // numFormat(dataShort[yr] > 0 ? dataShort[yr] : 0, false,   language===\"en\"?false:true, 2, language===\"en\"?\",\":\" \")\r\n        );\r\n      else if (colNo === COLUMN_INSURANCE_NEED)\r\n        dataColumn.push(\r\n          yr === 0 ? formatMoney2(capFundBase, 0, language, false) : 0\r\n        );\r\n      //numFormat(insNeed, false,   language===\"en\"?false:true, 2, language===\"en\"?\",\":\" \") : 0);\r\n      else if (colNo === COLUMN_FUND)\r\n        dataColumn.push(\r\n          formatMoney2(dataColumnCapFund[yr], 0, language, false)\r\n        ); //numFormat(0, false,   language===\"en\"?false:true, 2, language===\"en\"?\",\":\" \"));\r\n    }\r\n    \r\n    // add CPP DB to other from CPP do this above before formatting\r\n    /* if (colNo === COLUMN_CPP)\r\n      dataColumn[0] = formatMoney2(parseFloat(cleanformat(dataColumn[0])) - parseFloat(afterTaxCPP_DB));\r\n    \r\n    if (colNo === COLUMN_OTHER_INCOME)\r\n      dataColumn[0] = formatMoney2(parseFloat(cleanformat(ddataColumn[0])) - parseFloat(afterTaxCPP_DB)); */\r\n\r\n    dataColumns.push(dataColumn);\r\n\r\n    dataColumn = [];\r\n  }\r\n  return dataColumns;\r\n}\r\n\r\nfunction getSurivorsSalaryProjection(\r\n  sources,\r\n  noYrs,\r\n  survivors,\r\n  inflation\r\n) {\r\n  let totalIncome = Array(noYrs).fill(0);\r\n  let yr;\r\n  // console.log(sources)\r\n\r\n  let avgTaxRate=0;\r\n  sources.forEach((element) => {\r\n    if (element.sourceTypeKey === INCOMESOURCES.SURVIVORS_INCOME.Key) {\r\n      try {\r\n        avgTaxRate=survivors.filter((item)=> { return item.id===element.ownerID})[0].avgTaxRate\r\n      } catch (error) {\r\n        \r\n      }\r\n      /* console.log(element,survivors,avgTaxRate) */\r\n      for (yr = 0; yr < noYrs; yr++) {\r\n        totalIncome[yr] +=\r\n          yr >= element.startYear &&\r\n          yr < parseInt(element.startYear) + parseInt(element.duration)\r\n            ? parseFloat(element.amount) *\r\n              (1 - avgTaxRate / 100) *\r\n              Math.pow(1 + inflation / 100, yr)\r\n            : 0;\r\n      }\r\n    }\r\n  });\r\n  for (yr = 0; yr < noYrs; yr++)\r\n    totalIncome[yr] = (Math.round(totalIncome[yr] * 100) / 100).toFixed(0);\r\n\r\n  return totalIncome;\r\n}\r\n\r\nfunction getSurvivorsNonGovNonAssetLiabIncomeProjections(\r\n  sources,\r\n  noYrs,\r\n  //avgTaxRate,\r\n  survivors,\r\n  inflation\r\n) {\r\n  let totalIncome = Array(noYrs).fill(0);\r\n  let yr;\r\n  // console.log(sources)\r\n\r\n  let avgTaxRate=0;\r\n  sources.forEach((element) => {\r\n    if (\r\n      !(\r\n        element.sourceTypeKey === INCOMESOURCES.GOV_DEATH_BENEFIT.Key ||\r\n        element.sourceTypeKey === INCOMESOURCES.GOV_ORPHANS_BENEFIT.Key ||\r\n        element.sourceTypeKey === INCOMESOURCES.GOV_SURVIVORS_PENSION.Key\r\n      )\r\n    ) {\r\n      // console.log(element.sourceTypeKey)\r\n      try {\r\n        avgTaxRate=survivors.filter((item)=> { return item.id===element.ownerID})[0].avgTaxRate\r\n      } catch (error) {\r\n        \r\n      }\r\n      for (yr = 0; yr < noYrs; yr++) {\r\n        totalIncome[yr] +=\r\n          yr >= element.startYear &&\r\n          yr < parseInt(element.startYear) + parseInt(element.duration)\r\n            ? parseFloat(element.amount) *\r\n              (1 - avgTaxRate / 100) *\r\n              Math.pow(1 + inflation / 100, yr)\r\n            : 0;\r\n      }\r\n    }\r\n  });\r\n  for (yr = 0; yr < noYrs; yr++)\r\n    totalIncome[yr] = (Math.round(totalIncome[yr] * 100) / 100).toFixed(0);\r\n\r\n  return totalIncome;\r\n}\r\n\r\n// INA spreadsheet\r\nexport function getINAGridData(\r\n  insNeed,\r\n  insNeedRet,\r\n  insNeedLE,\r\n  dataPCV,\r\n // Spouse,\r\n  Survivors,\r\n  dataNeed,\r\n  dataGov,\r\n  dataShort,\r\n  inflation,\r\n  language,\r\n  invRate,\r\n  Sources,\r\n  afterTaxCPP_DB\r\n) {\r\n  let gridColumnAligns;\r\n  let dataTitle;\r\n  let dataColHeaders;\r\n  let dataColumns;\r\n  let excelDataInfoSection;\r\n  let gridIcons;\r\n\r\n  {\r\n    // spreadsheet\r\n    dataTitle = TITLES[language].appletINA;\r\n    dataColHeaders = INAFullSpreadsheetHeaders(language);\r\n    dataColumns = INAFullSpreadsheetData(\r\n      dataColHeaders.length,\r\n      insNeed,\r\n      Sources,\r\n      dataPCV,\r\n  //    Spouse,\r\n      Survivors,\r\n      dataNeed,\r\n      dataGov,\r\n      dataShort,\r\n      inflation,\r\n      invRate,\r\n      afterTaxCPP_DB,\r\n      language\r\n    );\r\n    gridColumnAligns = new Array(dataColHeaders.length).fill(2);\r\n\r\n    gridIcons = new Array(dataColHeaders.length);\r\n    gridIcons[COLUMN_FUND] = getInfoExcelcapFund(language);\r\n    gridIcons[COLUMN_YEAR] = getInfoExcelAllAfterTax(language);\r\n    \r\n    const singleFamily=Survivors.filter(client => client.memberKey ===MEMBER.SPOUSE.Key).length===0\r\n\r\n\r\n    const decimalChar = language === \"en\" ? \".\" : \",\";\r\n    const thousands = language === \"en\" ? \",\" : \" \";\r\n\r\n    if(singleFamily) \r\n    {\r\n\r\n      excelDataInfoSection = [\r\n        [\r\n          COLUMN_TITLES[language].intRate,\r\n          COLUMN_TITLES[language].infRate,\r\n          COLUMN_TITLES[language].surplusCapital,\r\n          COLUMN_TITLES[language].blank,\r\n          COLUMN_TITLES[language].additionalCapitalReq,\r\n          COLUMN_TITLES[language].survivorProtection,\r\n          \r\n        ],\r\n        [\r\n          invRate.toString() + \"%\",\r\n          inflation.toString() + \"%\",\r\n          parseFloat(afterTaxCPP_DB),\r\n          \"\",\r\n          \"\",\r\n          insNeedRet,\r\n        ],\r\n      ];\r\n\r\n    } else\r\n    {\r\n\r\n    excelDataInfoSection = [\r\n      [\r\n        COLUMN_TITLES[language].intRate,\r\n        COLUMN_TITLES[language].infRate,\r\n        COLUMN_TITLES[language].surplusCapital,\r\n        COLUMN_TITLES[language].blank,\r\n        COLUMN_TITLES[language].additionalCapitalReq,\r\n        COLUMN_TITLES[language].survivor65,\r\n        COLUMN_TITLES[language].survivorLE,\r\n      ],\r\n      [\r\n        invRate.toString() + \"%\",\r\n        inflation.toString() + \"%\",\r\n        parseFloat(afterTaxCPP_DB),\r\n        \"\",\r\n        \"\",\r\n        insNeedRet,\r\n        insNeedLE,\r\n      ],\r\n    ];\r\n  }\r\n  }\r\n  return {\r\n    gridTitle: dataTitle,\r\n    dataColTitles: dataColHeaders,\r\n    dataProjection: dataColumns,\r\n    gridColumnsDataExcelInfoSection: excelDataInfoSection,\r\n    gridColumnAligns: gridColumnAligns,\r\n    gridIcons: gridIcons,\r\n  };\r\n}\r\n\r\nfunction INAFullSpreadsheetHeaders(lang) {\r\n  let headers = [];\r\n  let i;\r\n\r\n  for (i = 0; i < COLUMN_TITLES.INA_SHEET_HEADERS[lang].Full.length; ++i) {\r\n    headers.push(COLUMN_TITLES.INA_SHEET_HEADERS[lang].Full[i]);\r\n  }\r\n\r\n  return headers;\r\n}\r\n\r\n// ESTATE PROTECTION\r\nasync function EPFullSpreadsheetData(\r\n  cols,\r\n  noProjectYrs, // + 1,\r\n  input\r\n) {\r\n  let noYrs = noProjectYrs;\r\n  const language = input.Presentations[0].language;\r\n // const formatFr = language === \"fr\" ? true : false;\r\n  const decimalChar = language === \"en\" ? \".\" : \",\";\r\n  const thousands = language === \"en\" ? \",\" : \" \";\r\n\r\n  let count = 0;\r\n  let dataColumns = new Array(cols).fill(0).map(() => new Array(noYrs).fill(0));\r\n\r\n  const dataNA = await setUIDataToAPI(input);\r\n\r\n  const assetsLength = input.Assets.length;\r\n\r\n  for (let i = 0; i < assetsLength; i++) {\r\n    const element = input.Assets[i];\r\n    const data = await getAssetGridValues(dataNA, element, language, true);\r\n    count += 1;\r\n    \r\n    for (let col = 0; col < 2; col++) {\r\n      for (let yr = 0; yr < noYrs; yr++) {\r\n        dataColumns[col][yr] = data.dataProjection[col][yr];\r\n        \r\n      }\r\n    }\r\n    // year 0 is today, change it\r\n    // dataColumns[0][0]=ASSET_YEAR_TODAY[language].today;\r\n    // dont add up year and age\r\n    for (let col = 2; col < Math.min(cols, data.dataProjection.length); col++) {\r\n      for (let yr = 0; yr < noYrs; yr++) {\r\n        dataColumns[col][yr] =\r\n          parseInt(cleanFormat(dataColumns[col][yr], language)) +\r\n          parseInt(cleanFormat(data.dataProjection[col][yr], language));\r\n      }\r\n    }\r\n  //  console.log(dataColumns)\r\n  }\r\n\r\n  \r\n  for (let col = 0; col < cols; col++) {\r\n    for (let yr = 0; yr < noYrs; yr++) {\r\n      if (yr === 0)\r\n        dataColumns[2][yr] =\r\n          parseInt(dataColumns[10][yr]) -\r\n          parseInt(dataColumns[4][yr]) -\r\n          parseInt(dataColumns[5][yr]) +\r\n          parseInt(dataColumns[6][yr]) +\r\n          parseInt(dataColumns[7][yr]);\r\n      else dataColumns[2][yr] = dataColumns[10][yr - 1];\r\n\r\n      \r\n      \r\n      dataColumns[11][yr] =\r\n        Math.round(\r\n          10000 *\r\n            (-1 +\r\n              (parseInt(dataColumns[10][yr]) + parseInt(dataColumns[6][yr])) /\r\n                parseInt(dataColumns[2][yr]))\r\n        ).toFixed(2) /\r\n          100 +\r\n        \" %\";\r\n    }\r\n  }\r\n  \r\n  for (let col = 0; col < cols; col++) {\r\n    if (col !== 11 && col !== 1) {\r\n      for (let yr = 0; yr < noYrs; yr++) {\r\n        dataColumns[col][yr] = formatMoney2(\r\n          dataColumns[col][yr],\r\n          0,\r\n          language,\r\n          false\r\n        );\r\n      }\r\n  \r\n    } else\r\n      for (let yr = 0; yr < noYrs; yr++) {\r\n        if (col !== 1 && isNaN(dataColumns[col][yr])) dataColumns[col][yr] = 0;\r\n      }\r\n  \r\n  }\r\n  // year 0 is today, change it\r\n  dataColumns[0][0] = ASSET_YEAR_TODAY[language].today;\r\n  return dataColumns;\r\n}\r\n\r\n// EP spreadsheet\r\nexport async function getEPGridData(noProjectYrs, input) {\r\n  let gridColumnAligns;\r\n  let dataTitle;\r\n  let dataColHeaders;\r\n  let dataColumns;\r\n  let excelDataInfoSection;\r\n  let gridIcons;\r\n\r\n  // spreadsheet\r\n  const language = input.Presentations[0].language;\r\n\r\n  dataTitle = TITLES[language].appletEP;\r\n  dataColHeaders = EPFullSpreadsheetHeaders(language);\r\n\r\n  dataColumns = await EPFullSpreadsheetData(\r\n    dataColHeaders.length,\r\n    noProjectYrs, // + 1,\r\n    input\r\n  );\r\n  gridColumnAligns = new Array(dataColHeaders.length).fill(2);\r\n  gridIcons = new Array(dataColHeaders.length);\r\n  dataColHeaders.forEach((item) => {\r\n    if (item === COLUMN_TITLES.[language].EOYBalance)\r\n      gridIcons[2] = getInfoBOYEOY(  // boy\r\n        language\r\n      );\r\n      gridIcons[dataColHeaders.length-3]=gridIcons[2] //eoy\r\n  });\r\n  const decimalChar = language === \"en\" ? \".\" : \",\";\r\n  const thousands = language === \"en\" ? \",\" : \" \";\r\n\r\n  return {\r\n    gridTitle: dataTitle,\r\n    dataColTitles: dataColHeaders,\r\n    dataProjection: dataColumns,\r\n    gridIcons: gridIcons,\r\n  };\r\n}\r\n\r\nfunction EPFullSpreadsheetHeaders(lang) {\r\n  let headers = [];\r\n  let i;\r\n\r\n  for (i = 0; i < COLUMN_TITLES.EP_SHEET_HEADERS[lang].Full.length; ++i) {\r\n    headers.push(COLUMN_TITLES.EP_SHEET_HEADERS[lang].Full[i]);\r\n  }\r\n\r\n  return headers;\r\n}\r\n\r\nexport function getAssetLiabProjections(props) {\r\n  // add liab and tax liab\r\n  const input = props.dataInput;\r\n  const assetProjections = props.assetProjections;\r\n  //console.log(assetProjections)\r\n  const lang = input.Presentations[0].language;\r\n // const formatFr = lang === \"fr\" ? true : false;\r\n  const clients = input.Clients;\r\n  const startAge =\r\n    clients.length > 1\r\n      ? Math.min(clients[QUOTE_SPOUSE].Age, clients[QUOTE_CLIENT].Age)\r\n      : clients[QUOTE_CLIENT].Age;\r\n\r\n  const LE3 = parseInt(props.LE) + 3;\r\n  let EstateLiabsByType = Array(ASSET_TAX_TYPE_COUNT).fill(0);\r\n  let EstateLiabsByTypeLE3 = Array(ASSET_TAX_TYPE_COUNT).fill(0);\r\n  let proj = [];\r\n  let dataEstateLiability = Array(100 - startAge + 1).fill(0);\r\n\r\n  //const dataNA = setUIDataToAPI(props.dataInput);\r\n\r\n  let tmpGrids = [];\r\n  let AssetProjectionsGrid = [];\r\n  let taxLiabCol = 0;\r\n  let FMVCol = 0;\r\n  let EstateLiabsByTypeTotal = 0;\r\n  let EstateLiabsByTypeLE3Total = 0;\r\n  let EstateLiabsByTypeGrowth = [];\r\n  let EstateLiabsByTypeInitialAmt = [];\r\n  EstateLiabsByTypeGrowth = Array(ASSET_TAX_TYPE_COUNT).fill(0);\r\n  EstateLiabsByTypeInitialAmt = Array(ASSET_TAX_TYPE_COUNT).fill(0);\r\n  // add all assets\r\n\r\n  if (input.Assets.length === 0) {\r\n    proj.values = Array(100).fill(0);\r\n    const grid = assetProjections[0].grid;\r\n    tmpGrids.push(grid);\r\n  } else {\r\n    input.Assets.forEach((element) => {\r\n      proj.values = Array(100).fill(0);\r\n      //console.log(assetProjections);\r\n      //console.log(assetProjections[element.id - 1]);\r\n\r\n      const grid = assetProjections[element.id - 1].grid;\r\n      tmpGrids.push(grid);\r\n      FMVCol = 2;\r\n      let fmv = [];\r\n      for (let i = 0; i < 100 - startAge; i++) {\r\n        fmv.push(parseFloat(cleanFormat(grid.dataProjection[FMVCol][i])));\r\n      }\r\n\r\n      if (element.assetTaxTypeKey !== ASSET_TAX.NON_TAXABLE.Key) {\r\n        if (element.assetTypeKey === ASSETS.PERSONAL_RESIDENCE.Key) {\r\n          taxLiabCol = grid.dataProjection.length - 1;\r\n          EstateLiabsByType[ASSET_TAX_TYPE_PRINCIPAL_RES] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][0], lang)\r\n          );\r\n          EstateLiabsByTypeLE3[ASSET_TAX_TYPE_PRINCIPAL_RES] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][LE3], lang)\r\n          );\r\n          addAssetToProjections(\r\n            proj,\r\n            fmv,\r\n            ASSETS.PERSONAL_RESIDENCE.value[lang],\r\n            ASSETS.PERSONAL_RESIDENCE.colour\r\n          );\r\n        } else if (element.assetTypeKey === ASSETS.REAL_ESTATE.Key) {\r\n          taxLiabCol = grid.dataProjection.length - 1;\r\n          FMVCol = 2;\r\n\r\n          EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_REAL_ESTATE] +=\r\n            (parseFloat(cleanFormat(element.currValue, lang)) *\r\n              element.growth) /\r\n            100;\r\n          EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_REAL_ESTATE] += parseFloat(\r\n            cleanFormat(element.currValue, lang)\r\n          );\r\n\r\n          EstateLiabsByType[ASSET_TAX_TYPE_REAL_ESTATE] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][0], lang)\r\n          );\r\n\r\n          EstateLiabsByTypeLE3[ASSET_TAX_TYPE_REAL_ESTATE] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][LE3], lang)\r\n          );\r\n          addAssetToProjections(\r\n            proj,\r\n            fmv,\r\n            ASSETS.REAL_ESTATE.value[lang],\r\n            ASSETS.REAL_ESTATE.colour\r\n          );\r\n        } else if (element.assetTypeKey === ASSETS.STOCKS_BONDS.Key) {\r\n          taxLiabCol = grid.dataProjection.length - 1;\r\n          FMVCol = 2;\r\n          EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_STOCKS] +=\r\n            (parseFloat(cleanFormat(element.currValue, lang)) *\r\n              element.growth) /\r\n            100;\r\n          EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_STOCKS] += parseFloat(\r\n            cleanFormat(element.currValue, lang)\r\n          );\r\n          EstateLiabsByType[ASSET_TAX_TYPE_STOCKS] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][0], lang)\r\n          );\r\n          EstateLiabsByTypeLE3[ASSET_TAX_TYPE_STOCKS] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][LE3], lang)\r\n          );\r\n          addAssetToProjections(\r\n            proj,\r\n            fmv,\r\n            ASSETS.STOCKS_BONDS.value[lang],\r\n            ASSETS.STOCKS_BONDS.colour\r\n          );\r\n        } else if (element.assetTypeKey === ASSETS.SMALL_BUSINESS_SHARES.Key) {\r\n          taxLiabCol = grid.dataProjection.length - 1;\r\n          FMVCol = 2;\r\n          EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_SMALL_BUS] +=\r\n            (parseFloat(cleanFormat(element.currValue, lang)) *\r\n              element.growth) /\r\n            100;\r\n          EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_SMALL_BUS] += parseFloat(\r\n            cleanFormat(element.currValue, lang)\r\n          );\r\n          EstateLiabsByType[ASSET_TAX_TYPE_SMALL_BUS] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][0], lang)\r\n          );\r\n          EstateLiabsByTypeLE3[ASSET_TAX_TYPE_SMALL_BUS] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][LE3], lang)\r\n          );\r\n          addAssetToProjections(\r\n            proj,\r\n            fmv,\r\n            ASSETS.SMALL_BUSINESS_SHARES.value[lang],\r\n            ASSETS.SMALL_BUSINESS_SHARES.colour\r\n          );\r\n        } else if (element.assetTypeKey === ASSETS.RRSP_RRIF.Key) {\r\n          taxLiabCol = grid.dataProjection.length - 1;\r\n          FMVCol = 2;\r\n          EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_RRSP] +=\r\n            (parseFloat(cleanFormat(element.currValue, lang)) *\r\n              element.growth) /\r\n            100;\r\n          EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_RRSP] += parseFloat(\r\n            cleanFormat(element.currValue, lang)\r\n          );\r\n          EstateLiabsByType[ASSET_TAX_TYPE_RRSP] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][0], lang)\r\n          );\r\n          EstateLiabsByTypeLE3[ASSET_TAX_TYPE_RRSP] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][LE3], lang)\r\n          );\r\n          addAssetToProjections(\r\n            proj,\r\n            fmv,\r\n            ASSETS.RRSP_RRIF.value[lang],\r\n            ASSETS.RRSP_RRIF.colour\r\n          );\r\n        } else if (element.assetTypeKey === ASSETS.INTEREST_BEARING.Key) {\r\n          taxLiabCol = grid.dataProjection.length - 1;\r\n          FMVCol = 2;\r\n\r\n          EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_INTEREST] +=\r\n            (parseFloat(cleanFormat(element.currValue, lang)) *\r\n              element.growth) /\r\n            100;\r\n          EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_INTEREST] += parseFloat(\r\n            cleanFormat(element.currValue, lang)\r\n          );\r\n          EstateLiabsByType[ASSET_TAX_TYPE_INTEREST] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][0], lang)\r\n          );\r\n          EstateLiabsByTypeLE3[ASSET_TAX_TYPE_INTEREST] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][LE3], lang)\r\n          );\r\n          addAssetToProjections(\r\n            proj,\r\n            fmv,\r\n            ASSETS.INTEREST_BEARING.value[lang],\r\n            ASSETS.INTEREST_BEARING.colour\r\n          );\r\n        }\r\n        // take other, bundle taxable together\r\n        else if (element.assetTypeKey === ASSETS.OTHER_ASSETS.Key) {\r\n          taxLiabCol = grid.dataProjection.length - 1;\r\n          FMVCol = 2;\r\n          EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_OTHER] +=\r\n            (parseFloat(cleanFormat(element.currValue, lang)) *\r\n              element.growth) /\r\n            100;\r\n          EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_OTHER] += parseFloat(\r\n            cleanFormat(element.currValue, lang)\r\n          );\r\n          EstateLiabsByType[ASSET_TAX_TYPE_OTHER] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][0], lang)\r\n          );\r\n          EstateLiabsByTypeLE3[ASSET_TAX_TYPE_OTHER] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][LE3], lang)\r\n          );\r\n          addAssetToProjections(\r\n            proj,\r\n            fmv,\r\n            ASSETS.OTHER_ASSETS.value[lang],\r\n            ASSETS.OTHER_ASSETS.colour\r\n          );\r\n        }\r\n        // bundle non-taxable together\r\n        /* else if (element.assetTypeKey === ASSETS.CASH.Key) {\r\n      FMVCol = 2;\r\n      addAssetToProjections(\r\n        proj,\r\n        fmv,\r\n        ASSET_TAX.NON_TAXABLE.value[lang],\r\n        ASSETS.CASH.colour\r\n      );\r\n    } else if (element.assetTypeKey === ASSETS.LIFE_INSURANCE.Key) {\r\n      FMVCol = 2;\r\n      addAssetToProjections(\r\n        proj,\r\n        fmv,\r\n        ASSET_TAX.NON_TAXABLE.value[lang],\r\n        ASSETS.LIFE_INSURANCE.colour\r\n      );\r\n    } else if (\r\n      element.assetTypeKey === ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.Key\r\n    ) {\r\n      FMVCol = 2;\r\n      addAssetToProjections(\r\n        proj,\r\n        fmv,\r\n        ASSET_TAX.NON_TAXABLE.value[lang],\r\n        ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.colour\r\n      );\r\n    } */\r\n        /* else {\r\n      taxLiabCol = grid.dataProjection.length - 1;\r\n      FMVCol = 2;\r\n     \r\n      EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_OTHER] +=  parseFloat(cleanFormat(element.currValue, lang))*element.growth/100;\r\n      EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_OTHER]+=parseFloat(cleanFormat(element.currValue, lang));\r\n      EstateLiabsByType[ASSET_TAX_TYPE_OTHER] += parseFloat(\r\n        cleanFormat(grid.dataProjection[taxLiabCol][0], lang)\r\n      );\r\n      EstateLiabsByTypeLE3[ASSET_TAX_TYPE_OTHER] += parseFloat(\r\n        cleanFormat(grid.dataProjection[taxLiabCol][LE3], lang)\r\n      );\r\n      addAssetToProjections(\r\n        proj,\r\n        fmv,\r\n        ASSETS.OTHER_BEARING.value[lang],\r\n        ASSETS.OTHER_BEARING.colour\r\n      );\r\n    }\r\n */\r\n        EstateLiabsByTypeTotal += parseFloat(\r\n          cleanFormat(grid.dataProjection[taxLiabCol][0], lang)\r\n        );\r\n        EstateLiabsByTypeLE3Total += parseFloat(\r\n          cleanFormat(grid.dataProjection[taxLiabCol][LE3], lang)\r\n        );\r\n        // sum all for total tax liab\r\n        if (proj.length > 0) {\r\n          for (let i = 0; i < grid.dataProjection[0].length - 1; i++) {\r\n            if (grid.dataProjection[taxLiabCol][i] !== undefined)\r\n              dataEstateLiability[i] += parseFloat(\r\n                cleanFormat(grid.dataProjection[taxLiabCol][i], lang)\r\n              );\r\n          }\r\n          dataEstateLiability[100 - startAge] =\r\n            dataEstateLiability[100 - startAge - 1];\r\n        }\r\n      }\r\n    });\r\n  }\r\n  proj.push({\r\n    name: TOTALS.TAX_LIAB.value[lang], // TOTALS.ESTATE_LIAB.value[lang],\r\n    colour: TOTALS.ESTATE_LIAB.colour,\r\n    values: dataEstateLiability,\r\n  });\r\n\r\n  const rateRS =\r\n    EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_REAL_ESTATE] === 0\r\n      ? 0\r\n      : (100 * EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_REAL_ESTATE]) /\r\n        EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_REAL_ESTATE];\r\n  const rateS =\r\n    EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_STOCKS] === 0\r\n      ? 0\r\n      : (100 * EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_STOCKS]) /\r\n        EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_STOCKS];\r\n  const rateSB =\r\n    EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_SMALL_BUS] === 0\r\n      ? 0\r\n      : (100 * EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_SMALL_BUS]) /\r\n        EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_SMALL_BUS];\r\n  const rateRR =\r\n    EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_RRSP] === 0\r\n      ? 0\r\n      : (100 * EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_RRSP]) /\r\n        EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_RRSP];\r\n  const rateI =\r\n    EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_INTEREST] === 0\r\n      ? 0\r\n      : (100 * EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_INTEREST]) /\r\n        EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_INTEREST];\r\n  const rateO =\r\n    EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_OTHER] === 0\r\n      ? 0\r\n      : (100 * EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_OTHER]) /\r\n        EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_OTHER];\r\n\r\n  EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_REAL_ESTATE] =\r\n    lang === \"en\"\r\n      ? numFormat(rateRS, false, 3)\r\n      : numFormat(rateRS, false, 3).replace(\".\", \",\");\r\n  EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_STOCKS] =\r\n    lang === \"en\"\r\n      ? numFormat(rateS, false, 3)\r\n      : numFormat(rateS, false, 3).replace(\".\", \",\");\r\n  EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_SMALL_BUS] =\r\n    lang === \"en\"\r\n      ? numFormat(rateSB, false, 3)\r\n      : numFormat(rateSB, false, 3).replace(\".\", \",\");\r\n  EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_RRSP] =\r\n    lang === \"en\"\r\n      ? numFormat(rateRR, false, 3)\r\n      : numFormat(rateRR, false, 3).replace(\".\", \",\");\r\n  EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_INTEREST] =\r\n    lang === \"en\"\r\n      ? numFormat(rateI, false, 3)\r\n      : numFormat(rateI, false, 3).replace(\".\", \",\");\r\n  EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_OTHER] =\r\n    lang === \"en\"\r\n      ? numFormat(rateO, false, 3)\r\n      : numFormat(rateO, false, 3).replace(\".\", \",\");\r\n\r\n  let projectionsGrids = tmpGrids;\r\n  //setState({ grids: tmpGrids, loading: false });\r\n\r\n  const AssetnEstateLiabs = proj;\r\n  \r\n\r\n  return {\r\n    EstateLiabsByType,\r\n    EstateLiabsByTypeTotal,\r\n    EstateLiabsByTypeLE3,\r\n    EstateLiabsByTypeLE3Total,\r\n    EstateLiabsByTypeGrowth,\r\n    AssetnEstateLiabs,\r\n    projectionsGrids,\r\n  };\r\n}\r\n\r\nfunction addAssetToProjections(proj, data, assetName, colour) {\r\n  let alreadyThere = false;\r\n  for (let i = 0; i < proj.length; i++) {\r\n    if (proj[i].colour === colour) {\r\n      alreadyThere = true;\r\n       for (let j = 0; j < 100; j++) proj[i].values[j] += data[j];\r\n    }\r\n  }\r\n  if (alreadyThere === false)\r\n    proj.push({ name: assetName, colour: colour, values: data });\r\n\r\n  //console.log(proj);\r\n  return proj;\r\n}\r\n"],"sourceRoot":""}