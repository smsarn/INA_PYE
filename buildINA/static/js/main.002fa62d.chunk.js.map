{"version":3,"sources":["definitions/generalDefinitions.js","data/dataExchangeMCC.js","components/Collapsible.js","definitions/outputDefinitions.js","data/assetGridProjections.js","definitions/infoIconsDefinitions.js","components/AdjustibleImage.js","components/Header.js","images/INA.png","images/estate.protection.applet.cover.graphic.png","components/inputField.js","utils/helper.js","components/PopupInfo.js","components/Info.js","components/PDF.js","data/dataExchange.js","utils/FetchAPIs.js","data/createDefaults.js","images/gridOff.png","images/gridOn.png","components/MultiButtons.js","components/NA.js","components/Client.js","components/Liability.js","components/Source.js","components/Need.js","components/Presentation.js","components/PopupUserInput.js","components/PasteClients.js","components/AggregateGrid.js","components/OutputGraphsEP.js","components/ProjectionGrid.js","components/ProjectionGrid1.js","components/GridButton.js","components/Asset.js","components/OutputPDFEP.js","components/OutputGraphsEPLeakage.js","components/OutputGraphStacked.js","components/outputPresentationEP.js","components/OutputPDF.js","components/outputPresentation.js","components/OutputPDFINAAppendix.js","components/OutputGraphs.js","components/AnalysisGraph.js","images/info.png","images/infoLightBlue.png","images/infoWhite.png","images/infoRed.png","../node_modules/validatorjs/src/lang sync /^/.*$","components/GridExcelComponent/DownloadExcel.js","components/GridExcelComponent/ExcelToolbar.js","components/GridExcelComponent/DataTable.js","components/AddRemove.js","components/DropDown.js","definitions/outputDefinitionsEP.js","images/chooseButton.png","images/chooseButtonChrome.png","images/optionsEdge.png","images/optionsChrome.png","CacheBuster.js","App.js","index.js","data/aggregateGridProjections.js"],"names":["APPLET_INA","appletMode","APPLET_EP","DISPLAY_NAME","DEFAULT_QUOTE","QUOTE_CLIENT","QUOTE_SPOUSE","QUOTE_JOINT","FIRST_BENEFICIARY_ID","OUTPUT_WIDTH_PCT","IMAGE_APPLET_EP","IMAGE_APPLET_INA","IMAGE_LOGO","IMAGE_LOGO_OTHERPAGES","ASSET_API_OUTPUT_Year","ASSET_API_OUTPUT_Age","ASSET_API_OUTPUT_FMV","ASSET_API_OUTPUT_EOYBalance","ASSET_API_OUTPUT_ACB","ASSET_API_OUTPUT_CapitalGain","ASSET_API_OUTPUT_TaxPayable","ASSET_API_OUTPUT_CapGainsExemption","ASSET_API_OUTPUT_Deposits","ASSET_API_OUTPUT_Withdrawals","ASSET_API_OUTPUT_RRIF","ASSET_API_OUTPUT_TaxPayableonIncome","ASSET_API_OUTPUT_DispositionAmount","DROPDOWN_WIDE","DEFAULT_DIVIDEND_TAX_RATE","DEFAULT_AVG_TAX_RATE","DEFAULT_CLIENT_AGE","DEFAULT_SPOUSE_AGE","DEFAULT_SPOUSE_SALARY","DEFAULT_CLIENT_SALARY","DEFAULT_SPOUSE_CPP","DEFAULT_CLIENT_CPP","DEFAULT_SPOUSE_RETIREMENT","DEFAULT_CLIENT_RETIREMENT","DEFAULT_INFLATION","DEFAULT_INVESTMENT","DEFAULT_NEED_PERCENT1","DEFAULT_NEED_PERCENT2","DEFAULT_RRIF_AGE","DISPLAY_RETIREMENT","DISPLAY_LIFEEXP","DISPLAY_ENDAGE","DISPLAY_LIFEEXP_PLUS_3","ORPHAN_AGE_QC","ORPHAN_AGE_NON_QC","MAX_ORPHAN_DUR_QC","MAX_ORPHAN_DUR_NON_QC","UNIVERSITY_START_AGE","UNIVERSITY_END_AGE","DISPLAY_PRESENTATION","DISPLAY_GRAPHS","DISPLAY_SPREADSHEET","DISPLAY_ANALYSIS","appSiteAPI","buildMode","ASSET_YEAR_TODAY","en","today","fr","CONTROLTITLELIABS","year","repay","projValue","CONTROLTITLE","age","sex","smoking","name","member","type","owner","growthDir","exposureDur","changeRate","amount","FA","amountGross","afterTaxAmount","percent","tax","desc","disposeYr","disposeDur","startYear","dur","ACB","smallBusinessCapGainExemption","growth","income","avgTax","retAge","protectToAge","cppElig","qppElig","invRate","inflation","taxRate","dividendTaxRate","province","designedBy","designedFor","contributionAmt","contributionStartYr","contributionDur","withdrawalAmt","withdrawalStartYr","withdrawalDur","incomeRate","RRIFRate","RRIFAge","ownershipAction","pdf","pdfINAAppendix","print","lifo","wl","ep","compulife","save","load","rec","notes","switch","TITLES","appletINA","appletEP","clients","clients_1","assets","liabilities","sources","sources_1","needs","needs_1","settings","presentations","results","presBut","graphsBut","retBut","protectButton","leBut","age100But","spreadsheetBut","analysisBut","benef","insuredJLTD","insured","default","defaultClear","OUTPUTTITLE","Values","MESSAGES","insNeed","graphLine2","graphT1","graphT2","graphT3","graphT4","ever","taxMsg","fetch","infoYr0","infoRetDur","infoAvgTax","infoAdjust","clientOnly","infoElig","ie","govB","assetTax","COLUMN_TITLES","INA_SHEET_HEADERS","Full","EP_SHEET_HEADERS","intRate","infRate","surplusCapital","blank","additionalCapitalReq","survivorLE","survivor65","survivorProtection","Year","Age","FMV","EOYBalance","AvgGrowth","AnnualContribution","MinRRIFIncome","Withdrawal","SaleProceeds","RentalIncome","TaxLiability","Taxonincome","TaxLiabilityatDeath","CapitalGain","CapitalGainsExemption","GRID_INTERNAL_CAPTIONS","excel","rows","of","TOTALS","ESTATE_LIAB","value","Key","order","colour","TAX_LIAB","EMAIL","body","LIABILITIES","LAST_EXPENSES","ID","LEGAL_AND_EXECUTOR_FEES","OUTSTANDING_LOANS","MORTGAGE_REDEMPTION","EMERGENCY_FUND","CHARITABLE_GIFTS","LEGACY_FOR_CHILDREN","CHILD_HOME_CARE","CREDIT_CARDS","INCOME_TAXES","OTHER","CLIENT_TAX_LIABILITY","PROBATE","ASSETS","PERSONAL_RESIDENCE","oldName","REAL_ESTATE","STOCKS_BONDS","SMALL_BUSINESS_SHARES","RRSP_RRIF","INTEREST_BEARING","CASH","OTHER_ASSETS","LIFE_INSURANCE","CHARITABLE_GIFTS_TAX_CREDIT","TFSA","OWNERSHIP","CLIENT","SPOUSE","JOINT","ASSET_OWNERSHIP_ACTION","CLIENT_LIQUIDATE","CLIENT_ROLLOVER","ASSET_TAX","NON_TAXABLE","CAPITAL_GAINS_DEFERRED","CAPITAL_GAINS_ANNUAL","REGISTERED","FULLY_TAXABLE","DIVIDEND","INTEREST","QUALIFYING_SMALL_BUSINESS","INCOMESOURCES","SURVIVORS_INCOME","GOV_SURVIVORS_PENSION","GOV_DEATH_BENEFIT","GOV_ORPHANS_BENEFIT","RENTAL_INCOME","DIVIDEND_INCOME","RETIREMENT_INCOME","RRIF","INCOMENEEDS","PERCET_OF_INCOME","EDUCATION_FUND","TEMPORARY_INCOME","PROVINCE","AB","BC","ON","QC","MB","NS","NB","NF","SK","PE","YU","NU","NT","MEMBER","CHILD","DEPENDENT_ADULT","SEX","MALE","FEMALE","GROWTHDIR","GROWS","REDUCES","SMOKING","NON_SMOKER","SMOKER","MONTHS","readMCCData","dataInput","planID","client","lives","clientID","i","dataE","push","Clients","sexKey","smk","smokerKey","rating","length","setLives","lifeStatus","policy","planName","carrierName","carrierID","faceAmount","Presentations","Province","objPremium","DepositMode","PremCustom","PremSet","PremSolve","PremSetDur","PremSolveDur","PremOffsetOn","PremOffsetYear","objCustomDB","solveForPremium_On","solveForPUA_On","solveRider_On","customDB","objRider","T10","T20","ICO10","ICO20","T25","T30","T25Amt","T30Amt","T10Dur","T20Dur","T10Amt","T20Amt","objPUA","MaxPUA","MaxPUAAmt","BonusPUA","FundPUA","FundPUAAmt","FundPUADur","outputOptions","extCoverage","IRR_ERR","outputColumnIDs","generalInfo","language","lang","formatNumericOutput","Collapsible","props","togglePanel","e","a","enabled","handleCollapsibleClick","id","state","open","setState","openCollapsible","nextProps","this","arr","style","fontSize","float","onClick","className","title","undefined","infoIcon","children","Component","OUTPUTTEXT","insNeeds100","insNeedsRet","insNeedsRetLE","insNeedsSingleFamily","insNeedsSinglePerson","years","addSurvivor","pg1T","pg1P1","pg1P2","pg1P3","pg1P4","pg2TabT1","pg2TabT1_1","pg2TabT2","pg2TabT3","pg2TabT4","pg2TabT4Alt","pg2TabT5","pg2TabT6","pg2T2","pg2Tab2","pg2Tab2_1","pg2Tab3","pg2T3","pg2P5","pg2P6","pg2P7","pg2P8","pg2P9","pg2P10","pg2P12","pg2P11","pg3T","pg3T_1","pg3P1","pg3P1_1","pg3TabT","pg3TabRTot","pg4T","pg4P1","pg4TabT","pg4TabRow1","pg4TabRow1_1","pg4TabRow2","pg4TabRow2_1","pg4TabRow5","pgTabRowMoreIncome","pgTabRowThereAfter","pgTabRowThereAfter_1","pg5T","pg5T_1","pg5TabT","pg5TabT2","pg5TabT3","pg5TabRow1","pg5TabRow3","pg5TabRow4","pg5TabRow4_1","pg5TabRow5","pg5TabRow5_1","pg6T","pg6T_1","pg6TabT","pg6TabRow1","pg5TabRow7","pg5TabRow7_1","pg6TabRow4","pg6Net","pg7T","pg7TabT","pg7TabT_1","pg7TabRow1","pg7TabRow4","pg7TabRow5","pg7TabRow5_1","pg7TabRow6","pg7TabRow7","pg7TabRow8","pg7TabRow9","pg7TabRow10","pg8T","pg8TabT","pg8TabT_1","pg8TabRow1","pg8TabRow2","pg8TabRow3","pg8TabRow4","pg8TabRow5","pg8TabRow6","pg8TabRow4Alt","pg9T","pg9P1","pgFooter","pg10T","pg10P1","pg10TabRow1","pg10TabRow11","pg10TabRow2","pg10TabRow3","pgAppendix","pgAppendixT","pgAppendixP1","pgAppendixP2","pgAppendixP3","GRAPHS_LABLES","graphMsg","persCF","govCF","incomeNeeds","shortfall","assetsBrk","liabsBrk","cashLike","RRSP","shares","realEstate","otherAssets","loans","taxes","emergency","otherLiabs","atDeath","currFins","getAssetGridValues","dataNA","assetCurr","aggregate","fetchAssetAllGridColumns","data","console","log","taxOnDisposition","yr","numericValues","arrayFormatMoney","arrYear","arrAge","arrAdjAge","age1","age2","parseInt","arrDeposits","arrFMV","arrRRIF","arrEOYBalance","arrWithdrawals","arrTaxPayableonIncome","arrTaxPayable","arrDispositionAmount","arrACB","arrCapitalGain","arrCapGainsExemption","gridTitleSection","getListItemNameFromKey","ownerKey","description","gridTitle","assetTypeKey","dataColTitles","dataProjection","assetTaxTypeKey","SHOW_AUTOMATIC_RED","SHOW_STANDARD","SHOW_NONE","SHOW_STANDARD_LIGHT_BLUE","SHOW_STANDARD_WHITE","infoHighlightStyle","color","fontWeight","infoIconRetire","infoEligSinglePerson","infoSpouseElig","internet","rollOver","insurance","rental","note","gridCapFund","salary","salaryPercent","afterTax","taxExempt","infoINA","infoBOYEOY","infoAvgGrowth","infoPDF","probate","DepositWithd","inflationGrowth","PYE_JLTD","needGrowth","needGrowth_1","exportINA","taxLiab","liabDesc","getGenericMessage","infoID","infoText","iconMode","popupOpenByProps","popupBorderColor","position","marginLeft","marginTop","DEFAULT_MARGIN_TOP","width","DEFAULT_WIDTH","height","getInfoIconTaxExempt","getInfoIconSourcesGov","DEFAULT_MARGIN_LEFT","getInfoNoInternetAccess","getInfoIconSourcesRRIF","getInfoIconClientsMember","getInfoIncome","getInfoSalaryPercent","getInfoIconAssetsIncomeRate","getInfoIconPYE_JLTD","getInfoIconNeedGrowth","getInfoINA","getInfoPDF","getInfoExportINA","getInfoIconAssetsOwner","getInfoIconTFSA","getInfoIconProbate","getInfoIconLiabDesc","getInfoIconDepositWithd","getInfoIconInflationGrowth","getInfoIconAssetsIns","getInfoIconAssetsYr0","getInfoIconClientsElig","getInfoIconClientsEligSinglePerson","getInfoIconSpouseElig","getInfoIconClientsTax","getInfoIconClientsRetire","flagRed","getInfoTaxLiability","getInfoIconTaxLiab","getInfoBOYEOY","getInfoAvgGrowth","getInfoIconNotes","getInfoSave","DEFAULT_HEIGHT","getInfoExcelcapFund","getInfoExcelAllAfterTax","AdjustibleImage","componentDidMount","showDetails","updateImage","image","left","imageLeft","size","imageSize","allPages","top","imageTop","imageAdjust","imageBigger","prevState","parseFloat","imageSmaller","imageRight","imagePosition","imagePages","imageRemove","undoImage","undo","imageDone","loadImage","file","target","files","reader","FileReader","readAsDataURL","onload","imageObj","result","styleImage","display","marginBottom","cmdWidth","buttonText","paddingLeft","required","accept","onChange","event","noButtons","buttonCaption","selected","selectMultiButton","src","React","hideRecover","document","getElementById","Header","ref","last","current","saveDefault","saveAsDefaultCase","defaultCommand","storageName","set","clear","localStorage","getItem","changeLanguage","defaultButton","createRef","emailAllowed","versionDetails","allowEmail","iOS","isMobileDevice","class1","styleVersion","right","changeLang","maxWidth","version","saveToFile","loadFromFile","EmailINA","loadStorage","module","exports","InputField","getInut","evt","input","chkNum","cleanFormat","isNaN","replace","toString","substring","max","format","maxValue","min","minValue","handleFocus","navigator","userAgent","match","select","selectField","setSelectionRange","onMouseUpSelect","test","window","MSStream","handleFocusIOS","toggleEditing","toFormat","inputValue","isEditing","afterStateUpdate","getValue","dec","indexOf","slice","selectText","s","refs","InputTxt","setTimeout","getRidOfZerosAfterDecimal","displayValue","decimalPos","handleUpdateInput","number","Intl","NumberFormat","inputName","disable","readOnly","styleClass","styleClass2","divStyleClass","inputColorStyle","colorDiv","border","info","showInfo","perc","titleColour","french","paddingTop","inputMode","disabled","autoFocus","onFocus","onMouseUp","updateInputValue","onBlur","bind","key","amt","nSeperator","search","s1","EngToFrConversion","orientation","numFormat","v","bInput","mode","seperator","decimalChar","v1","v2","v3","formatted","toFixed","get1000","Math","round","includes","num","formatMoney","decimalCount","decimal","thousands","abs","negativeSign","Number","j","substr","formatMoney2","dollarSign","array","noOfDecimals","arrayFormatted","ver","verNo","inS","verS","inS2","versionNumeric","saveEncrypt","allowAnalysis","n","getProjectedLiabilities","totalLiabProjections","Liabilitys","liabTypeKey","liabProj","getProjectedLiability","liability","totalLiab","currValue","rate","dU","dL","pow","getLoanBalance","assetTaxLiabProj","change","growthDirKey","getINA_LifeExp_Plus_yrs","INALifeExp","dataShortfall","lifeExp","yrs","INA","getDataFutureEstateLiability","dataTaxLiability","projectEnd","dataFutureEstateLiability","getListToShowByOrder","fullListOfItems","Object","values","filter","obj","sort","b","list","found","find","getListItemKeyFromName","split","join","getAssetsTaxCategoryTotal","totalAsset","Assets","forEach","element","getDisableValues","val","getAssetsCategoryTotal","dataList","total","getLiabsCategoryTotal","getAgesEP","LE","dataAges","getTaxLiabCategoryTotal","dataAss","getAssetTL","fetchAssetProjection2","getDefaultImages","adviserLogo","appletImage","require","getAfterTaxTotalIncome","index","Income","avgTaxRate","isSingleFamily","spouseKey","survivors","x","memberKey","singleFamilyProjectionYears","minAge","maxRet","noYrs","clientKey","reduce","prev","curr","retirementAge","noYrsDiff","projectionEnd","noProjectionYrs","survivorAge","familyProjectionYears","periodOption","insuranceNeeds","presentation","insNeedRet","insNeedLE","insNeedLE3","insNeedEAge","Value","joint","singleFamilyvalues","insuranceNeed","insuranceNeedToRet","insuranceNeedToLE","insuranceNeedToLE3","insuranceNeedToEnd","survAge","noProjectYrs","spouse","getInsNeedLine","projEnd","numSurvivor","singleFamily","protectionPeriod","labelsBilingual","dollarEn","dollarFr","needTo","getName","getLeakageGraphs","assetProjections","AssetLiabProjs","optionsPie","responsive","maintainAspectRatio","text","fontColor","legend","labels","space","optionsPieEstateLeakage","JSON","parse","stringify","OUTPUTTEXTEP","graphsLeakageT2","optionsPieEstateLeakageLE","graphsLeakageT3","assetsTotalNow","assetsTotalLE3","grid","totalLiabProjectionsNow","totalLiabProjectionsLE3","assetPercent","EstateLiabsByTypeTotal","taxPercent","dataEstateLeakage","dataEstateLeakageLE","EstateLiabsByTypeLE3Total","assetPercentLE3","taxPercentLE3","dataPieEstateLeakage","graphsLeakage1","graphsLeakage2","datasets","backgroundColor","dataPieEstateLeakageLE","getLogoAndAppletImage","logoSize","MAX_LOGO_HEIGHT","PAGE_HEIGHT","logoLeft","logo","logoTop","logoBottom","logo1stPage","applet","global","langFr","languages","userLanguage","PopupInfoDialog","theme","createMuiTheme","typography","fontFamily","Box","borderColor","borderRadius","Card","CardContent","ThemeProvider","Typography","component","Info","showPopup","respondToPopUp","popupInfo","classList","toggle","chkClose","source","classP","zIndx","zIndex","onMouseEnter","onMouseLeave","alt","HELVETICA","TIMES","NORMAL","BOLD","InToPt","in_","PxToPt","px","PDF","AddImage","imageID","y","w","h","imgData","imgProps","getImageProperties","pdfHeight","addImage","AddImageFitWidthOnly","maxHeight","error","addCustomImage","pg1TitleY","firstPage","FOOTER_TEXT_IN_Y","AddChart","containerID","containerElement","canvasElement","getElementsByClassName","dataUrl","toDataURL","AddCanvas","canvasID","AddPage","addPage","Create","jsPDF","unit","ShowGrids","showGrids","Grid","setFontSize","setFont","setTextColor","textRed","textGreen","textBlue","fontName","fontStyle","MultilineText","textLines","splitTextToSize","DrawLine","line","Reset","SetFont","SetFontSize","Save","fileName","SetTextColor","red","green","blue","SetFillColor","setFillColor","fillRed","fillGreen","fillBlue","showOnPage","output","Rectangle","roundedRect","textWidth","arrayText","minWidth","getTextWidth","textWidthMultiLine","adjustTextWidth","tableRow","fill","textColor","Widths","box","align","rightAlign","cols","textY","textOut","xi","setDrawColor","rect","RightText","Text","CenterText","tw","textH","headerOffset","addFooterAndHeader","footerText","headerText","Footer","textF","FooterLandscape","addFooter","footer","addHeaderNoFooter","tableRowSingle","values2","coloured","paraLeft","paraY","paraWidth","setUIDataToAPI","outputInsuranceNeed","Sex","Smk","Rating","CPPeligibility","Eligibility","isQC","provinceKey","Name","asset","assetDesc","taxMethod","dispositionYr","DisposeYr","dispositionDur","DisposeDur","dispositionYrUlt","annualGrowth","RRIFStartAge","setAssets","annualRepay","setLiabs","personalIncomeSources","salaryOwner","item","Sources","ownerID","sourceTypeKey","duration","setSources","estateContingiencies","dataItems","needTypeKey","Needs","incomePercent","Percent","incomePercentAfterDeath","incomeNeedItems","upToChildrenOutYrs","childrenOutToRetirementYrs","retirementToEndYrs","setIncomeNeeds","ratesPack","investmentRate","capitalGainsInclusion","inflationRate","setRates","projectionSettings","tempDate","Date","date","getFullYear","getMonth","getDate","deathYear","deathOf","endYear","returnType","projectEndOption","clientsName1","agentName","valuationDate","caller","insuranceAmt","setProjSettings","loadSavedDataToUI","savedJSon","clientsNo","addLife","assetsNo","findMatchingKey","liabilitysNo","assetTaxLiabID","sourcesNo","needsNo","needKey","presentationsNo","dataInputDefImages","loadDefaultCase","images","storageKey","getOutputValues","dateApplet","Income2","survivorATaxIncome","percentNeed1","percentNeed2","govDB","totalDisposeAsset","dateObj","month","getUTCMonth","day","getUTCDate","getUTCFullYear","insuranceNeedRet","insuranceNeedLE","ygChild","hasChild","childMember","Children","maxDur","youngestChildEndAge","insNeedYgChild25","insNeedYgChild18","totalLiabExcludeDeathRelated","pos","grossIncome","ret","disposeValue","totalAssetExcludeInsurance","totalAssetInsurance","totalAssetInsuranceIfSpouse","showAsDisposed","otherAssetsList","srcDB","valueAtDeath","totalSource","totalSource2","totalSourceATax","totalSource2ATax","totalSourceAtDeath","totalSource2AtDeath","totalSourceATaxAtDeath","totalSource2ATaxAtDeath","totalDesiredGrossIncome","totalDesiredGrossIncome2","srcOrphan","percent1","percent2","needPercent","totalNeed","objValues","nameFromFile","fetchTimerAPICheck","fails","then","response","json","catch","setItem","fetchMCCData","Promise","all","fetchMCC","url","method","headers","Accept","ok","Error","statusText","getTaxRate","fetchInsuranceNeedsData","provincekey","insuranceNeedsData","ages","personalCF","cpp","cppDB","orphan","lifeExpClient","lifeExpJLTD","provinceMargTax","encryptedInput","assetID","dataAsset","dataProj","asyncAPICall","fetchAssetProjectionAPI","dataValues","handleFetchInsuranceNeedsNew","dataINA","dataDetails","dataInsuranceNeeds","dataNAAges","dataCashFlowGov","dataCashFlowPersonal","dataCashFlowNeeds","handleFetchINADataFromQueryString","savedINA","savedData","handleFetchQueryString","fetchData","createDefaultAsset","projection","copyFromAnotherAsset","anotherAsset","createDefaultClient","defaultClient1","defaultClient2","child","createDefaultSource","growthRate","createDefaultNeed","defaultNeed1","defaultNeed2","createDefaultPres","presentationDate","resultsOption","getDefaultData","getDefaultCase","defaultClients","defaultAssets","defaultSources","defaultLiab","defaultNeeds","MultiButtons","setupButtons","buttonsDefault","selectButton","buttons","stylePosition","stylePositionLast","marginRight","map","appSiteParent","defaults","NA","displayName","probateSync","dataOutput","qbProbate","Array","hasProbate","govBenefitsSync","gov1","gov","gov2","hasSpouseArray","hasSpouse","sourceGovSurv","govBenefits","cppSurvivor","sourceGovDB","manageOrphanSync","intervalID","setInterval","loadData","OKToRemove","query","queryString","location","QS","handleInitilizeQuoteFromQueryString","handleIntitalFetch","recover","d","setHours","getHours","getMinutes","objJSONData","dataPresentations","snapimport","SnapImport","loading","newDataInput","_","cloneDeep","newDataOutput","tr","reSync_reCalculate_reRender","newState","initialLoading","handleUpdateOutput","newStateCandidateInput","itemToUpdateGroup","itemToUpdateID","newStateCandidateOutput","populateOutput2","updateAssetProjectionOutput","newDataInputClient12","handleQueryString","encryptedInputLife1AndSpouse","newDataInputClient1","encryptedInputLife1","updateOutputData","aggregateGrid","dataOutputCandidate","cppOrphan","lifeExpectancy","alert","populateOutput","dataQS","showMsg","ft","encodeURIComponent","href","savedINA_QS","updateStateFromJSon","handleUpdateClient","redoAll","count","debounce","saveToStorage","syncPanelsValues2","debounceHandleUpdateOutput","debounceSaveToStorage","Survivor","survIdx","Survivors","projYears","dataGov","dataPCV","dataNeed","dataShort","getINAGridData","getEPGridData","switchClients","getSwitchClientsState","client1","handleUpdateAsset","manageRRIFBounds","addRRIFSource2","handleUpdateLiability","handleUpdateSource","failedRemove","handleUpdateNeed","need","handleUpdatePresentation","removeItem","handleUpdatePresentationChange","noRecalc","handleAddClient","manageAddingClientWithIncome","manageAddingChild","manageEducation2","manageOrphan2","manageRemovingClientWithIncome","handleAddAsset","updateProjection","handleAddLiability","Liab","handleAddAssetTaxCredit","data2","taxCredit","exists","handleAddAssetTaxCredit2","handleAddSource","handleAddNeed","nextKey","handleRemoveClient","cl","manageRemoveOrphan","splice","setAssetActionToLiquidate","setNeedsSinglePerson","handleRemoveAsset","removeRRIFSource","handleRemoveLiability","charit","liab","charitAsset","handleRemoveSource","handleRemoveNeed","addRRIFSource","existingRRIF","sourceRRIF","copyPresentation","pres","leading","trailing","areThereChildren","manageEducation","orphanBen","orphSources","orphAge","pop","setChildIDs","Set","add","has","childID","updateDataLang","openParent","openForce","totalATaxIncome","setSurivorIndex","spKey","setSurivorIndex2","caseFromFile","showRecover","fileTarget","contentsFile","Smoker","Type","Tax","readAsText","respondToSaveRequest","blob","Blob","saveAs","saveToFile_OLD","failedAPI","urlReload","PARENT_SITE_PROD","shortid","generate","PARENT_SITE_TEST","parent","callCalculateResultsAPI","resultIsOpen","adjustVisibleOutputSection","visibleOutputSection","hasPersonalResidenceAlready","collapsible","setOutput","documentMode","graphs","selectMultiButtonPeriod","selectMultiButtonINAorTax","INAOption","l","hideEstateRemoveMsg","tag","t","accessedAPI","langText","showInput","singlePerson","insNeedLine","buttonCaption3","buttonCaptionPeriod","dataEstateLiability","inputOutputIsValid","dataSurvivorSalaryIncome","graphsEP","analysis","dataAPISite","govPopup","openDialog","respondToInput","presentationCurr","handleUpdate","clientCurr","isTheSurvivor","themeColor","disableAddRemove","currentID","minComps","numberComps","handleDoAdd","handleDoRemove","liabilityCurr","OrphanAges","maxOrphanDur","sourceCurr","maxOrphan","includeGovOrphanBenefit","needCurr","afterTaxTotalIncome","dlgLogin","insuranceNeedEAge","getSpouseINA","paddingBottom","Client","newCliet","doSwitch","getCurrClient","valueClean","valueCleanInt","changed","infoRetireRed","updateDDown","selection","writeBack","updateName","sexValues","label","smokingValues","memberValues","bilingual","DD","Title","defValue","disableOptionValue","nonSpouse","nonSpouseIsTheSurvivor","clientMember","disableMember","greyedName","placeholder","Count","dd","disableOption","fixedFirstRow","maxRows","Liability","liabNo","liabNext","setLiabilityValuesToDefault","displaySreadsheet","setLiabData","updateDesc","loan","liabs","repays","handleClick","typeValues","listLiabsToShow","ownerValues","growthDirValues","growthSel","loanOrTax","showRepay","showExposure","Source","isSourceGovNonOrphanBenefit","isDividendIncome","isSourceGovOrphansBenefit","sourceNo","sourceNextKey","listSourcesToShow","unlistedGreyedOption","govOrphan","dividend","inputTitle","disabledRemove","Need","needNo","needNext","Owner","listNeedsToShow","percentN","isDisabled","Presentation","getNewPresentation","listProvincesToShow","showSaved","PopupUserinputDialog","makeStyles","root","margin","spacing","handleOK","handleCancel","handleInfo","sourceEdge","sourceChrome","optionsEdge","optionsChrome","onClose","handleToggle","aria-labelledby","paddingRight","variant","useState","encryptedJson","setEncryptedJson","jsonEncrypted","setJsonEncrypted","encryptedJsonAssigned","setEncryptedJsonAssigned","useEffect","myHeaders","Headers","append","clientJson","raw","redirect","setClientFileContent","clientIndex","clientFileName","PasteClients","setClients","setNote","clientFileContent","newClients","allClientFileContentsAssigned","newClient","clientFileSpecs","clientFileSpec","clientFileSpecsCollection","clientFileSpecsCollectionJson","clipboard","writeText","readText","clipText","parsedObject","pastedClients","isArray","clientComponents","Fragment","AggregateGrid","gridColumnsDataExcelInfoSection","gridColumnAligns","gridIcons","specialRow","OutputGraphsEP","loadingMCC","estateLiab","estateLiabLE","taxL","dataPremiums","dataDB","dataSVEquiBuild","dataSVManulife","Prem","bestPremiumDur","bestMinMultiple","premiumDur","minMultiple","insMultiple","bestFitEquiBuild","INAEstateOption","chartRef","taxLiabChartRef","dtaAgesAll","k","getAssetLiabProjections","leakageGraps","graphsT2","graphsT3","taxLiabTotal_Index","AssetnEstateLiabs","dataTaxLiabLifeExp","dataTaxLiab","dataLiabAtDeath","taxLiabs","graphs2L2","graphsLeakage3","optionsTaxLiab","scales","xAxes","stacked","ticks","beginAtZero","yAxes","callback","steps","stepValue","EstateLiabsByType","ASSET_TAX_TYPE_REAL_ESTATE","ASSET_TAX_TYPE_STOCKS","ASSET_TAX_TYPE_SMALL_BUS","ASSET_TAX_TYPE_RRSP","ASSET_TAX_TYPE_INTEREST","ASSET_TAX_TYPE_OTHER","dataPieEstateLiabNow","graphsL1","graphsTaxes","pg3Tab3R2C1","pg3Tab3R3C1","pg3Tab3R4C1","pg3Tab3R5C1","pg3Tab3R6C1","pg3Tab3R7C1","estateLiabLE3","EstateLiabsByTypeLE3","dataPieEstateLiabLE","optionsLiab","optionsLiabLE","graphsT1","options","graphsLeakageT1","graphs2L1","ProjectionGrid1","assetProjection","projectionGrid","setProjectionGrid","DataTable","GridButton","handleClickGridButton","Asset","assNo","assNext","assTaxTypeKey","setAssetValuesToDefault","taxValues","propId","updateClientTaxLiability","getAssetProjection","getData","clone2","cln","cloneNode","cln2","createElement","appendChild","addEventListener","listAssetsToShow","ownerActionValues","listAssetTaxesToShow","DDTax","taxLiabOfClient","isEqual","disableTaxMethods","taxStocks","taxRS","hideOwner","taxT","ownerT","assetTypeIns","rrsp","showACB","showIncome","showDur","showGrowth","showDispose","showContribution","showWithdrawal","showCGE","disableAll","p","DropDown","ownerAction","unlistedValue","AddRemove","setFontForTitle","addNote","para","setFontForParas","insertPara","insertBullet","bullet","insertTableTitle","paraWidths","fillColor","insertTableRow","bold","insertGrid2","wrappedTitleBar","startYr","paragraph","pg8P1","pg8P2","totalGridWidth","goodWidth","widthTotal","goodWidthMultiLine","addMore","height2","String","OutputGraphsEPLeakage","boxWidth","OutputGraphStacked","optionsEstate","elements","point","radius","pg4GT","dataAssetnEstateLiabProj","col","taxLiabLine","shadeColor","R","G","B","dataEstate","overflow","OutputPresentationEP","doINA","postMessage","clickMultiButton","doPDF","pg2T","parag","pg2Paragraphs","tableWidthAss","totalAssets","tmpY","pg3Tab2RTot","tableWidth","totalLiabs","tableLeft","pg3Tab2T","pg3Tab2NW","pg3T2","pg3P2","pg3Tab3R1C1","pg3Tab3R1C2","pg3Tab3R1C3","pg3Tab3R1C4","EstateLiabsByTypeGrowth","pg3Tab3R8C1","pg3P4","pg3P5","pg4P2","pg4P3","drawRect","pg5Paragraphs","pg5Plast","pg6Paragraphs1","pg7P1","pg9P2","doSavePdfActionEP","doPrint","mywindow","write","innerHTML","close","focus","imageAlign","styleWithLogo","overflowX","loaded","startAge","p2","p5","p6","projectionsGrids","whiteSpace","colSpan","textAlign","pg3P3","showLeakageOnly","overflowY","pg8O1","pg8O2","spouseInsRet","spouseInsLE","LESpouse","formattedMoneyString","thereAfterText","thereAfterTextSF","twoNeedPercents","topToTitle_Y","titleToPara_Y","HEADER_RECT_IN_Y","incY","incColourdRowsY","incTableY","len","allDB","spouseSwitched","yOffset","OutputPresentation","doSavePdfAction","doLIFO","doWL","doEP","doCompuLife","birthYr","birthMth","birthDay","provinceCode","innerHeight","externalWindow","containerEl","pdfRef","noSurvivor","dataLabels","dColor","dataValues2","dataInsurance2","PDFTopMargin","pg4TabRow3","pg4TabRow4","pg6TabRow2","clientHeight","clientWidth","hFinal","wFinal","graphWidth","lastRow","insertGrid","titleY","title1","title2","para1","para2","OutputGraphs","doSavePdfINAAppendixAction","pv","negNeed","mobile","innerWidth","maxYScale","ceil","dataFutureINA","shortfallNeg","optionsPieLiabs","dataPieAssets","dataPieLiabs","assetsPie","liabsPie","AnalysisGraphs","getMCCQuoteOutput","getMCCQuoteOutput1","getMCCQuoteOutput4","quoteClient","FAClean","dataMCC","minPrem","getDataFutureINA","PremSetAmt","unshift","getMCCQuoteOutputManu","insuranceAmtInitial","solveForOptimumQuote","ratio","dataFVofPrems","getDataFVofPrems","SumOfSquresDiff","insVal","gotHereInInnerLoop","solveForOptimumEquiBuild","getEstateLiabPieCharts","estateLiab2","l1","l2","l3","estateLiab3","l2LE","l3LE","currINA","dataFuture","fv","nextState","dataShortfallFV","dataPieTax","dataPieLiabsAtDeath","optionsPieTax","optionsPieLiabsAtDeath","optionsPieEstateLiab","optionsPieEstateLiabLE","dataMCCpremFV","dataMCCQuoteDB","optionsFV","dataProjectionCV","needToE","needToF","leftPadding","webpackContext","req","webpackContextResolve","__webpack_require__","o","code","keys","resolve","ExcelFile","ReactExport","ExcelSheet","DownloadExcel","dataCell","styleCell","alignment","horizontal","font","numFmt","styleCellCol1","styleCellAlt","patternType","fgColor","rgb","styleCellAltCol1","styleTitleRowInfo","wrapText","bottom","styleCellLeftAllign","styleTitleRow","excelColumnsDataInfoSection","dataBodyTitles","dataBody","dataRow","excelColumnsHeaders","sz","wpx","excelColumnsDataMain","multiDataSet","columns","xSteps","ySteps","toLocaleString","downloadNow","hideElement","filename","dataSet","ExcelToolbar","setExcel","classes","padding","excelToolbarText","Tooltip","placement","IconButton","xmlns","viewBox","Datatable","getMuiTheme","overrides","MUIDataTable","tableRoot","paper","boxShadow","borderBottom","borderRight","MuiTableRow","head","MuiTableCell","sizeSmall","MUIDataTableToolbar","titleRoot","icon","MUIDataTableBodyCell","MUITypography","body2","MUITablePagination","caption","downloadExcelNow","divStyle","styleHeader","customHeader","column","TableCell","customHeadRender","captions","filterType","selectableRows","resizableColumns","selectableRowsHeader","viewColumns","download","textLabels","pagination","rowsPerPage","displayRows","setTableProps","downloadOptions","separator","onDownload","buildHead","buildBody","customRowRender","dataIndex","rowIndex","dataI","TableRow","customToolbar","doRemove","doAdd","classNameRemove","minRows","returnAR","handleChange","valueOf","valueSelected","update","option","styleDD","customStyles","control","base","minHeight","getDefault","charOp","selectComponent","isSearchable","onfocus","oc","styles","isOptionDisabled","ASSET_TAX_TYPE_PRINCIPAL_RES","ASSET_TAX_TYPE_COUNT","pg3Tab3R2C2","pg3Tab3R2C3","pg3Tab3R2C4","pg3Tab3R3C2","pg3Tab3R3C3","pg3Tab3R3C4","pg3Tab3R4C2","pg3Tab3R4C3","pg3Tab3R4C4","pg3Tab3R5C2","pg3Tab3R5C3","pg3Tab3R5C4","pg3Tab3R6C2","pg3Tab3R6C3","pg3Tab3R6C4","pg3Tab3R7C2","pg3Tab3R7C3","pg3Tab3R7C4","pg3Tab3R8C2","pg3Tab3R8C3","pg3Tab3R8C4","pg6Paragraphs2","graphsL2","graphsL3","graphsL4","graphsL5","appVersion","packageJson","App","baseUrl","getElementsByTagName","getAttribute","rootElement","ReactDOM","render","basename","INAFullSpreadsheetData","afterTaxCPP_DB","colNo","dataColumns","dataColumn","dataColumnCapFund","survivorsIncome","surivorsSalaryProjection","totalIncome","getSurivorsSalaryProjection","survivorsNonGovNonAssetLiabIncomeProjection","getSurvivorsNonGovNonAssetLiabIncomeProjections","capFundBase","beneficiaryAge","otherIncome","dataTitle","dataColHeaders","INAFullSpreadsheetHeaders","EPFullSpreadsheetData","assetsLength","EPSILON","EPFullSpreadsheetHeaders","LE3","proj","tmpGrids","taxLiabCol","FMVCol","EstateLiabsByTypeInitialAmt","fmv","addAssetToProjections","rateRS","rateS","rateSB","rateRR","rateI","rateO","assetName","alreadyThere"],"mappings":";8GAAA,suFAGaA,EAA4B,QAAfC,aACbC,EAA2B,OAAfD,aACZE,EAAeF,aACfG,EAA+B,QAAfH,aAAuB,iBAAmB,gBAE1DI,EAAe,EACfC,EAAe,EACfC,EAAc,EACdC,EAAuB,EAMvBC,EAAmB,KAGnBC,EAAkB,UAClBC,EAAmB,WACnBC,EAAa,cACbC,EAAwB,wBAiCxBC,EAAwB,EACxBC,EAAuB,EACvBC,EAAuB,EACvBC,EAA8B,EAC9BC,EAAuB,EAGvBC,EAA+B,EAG/BC,EAA8B,GAC9BC,EAAqC,GACrCC,EAA4B,GAC5BC,EAA+B,GAC/BC,EAAwB,GACxBC,EAAsC,GACtCC,EAAqC,GAOrCC,EAAgB,EAOhBC,EAA4B,GAC5BC,EAAuB,GACvBC,EAAqB,GACrBC,EAAqB,GACrBC,EAAwB,IACxBC,EAAwB,IACxBC,EAAqB,IACrBC,EAAqB,GACrBC,EAA4B,GAC5BC,EAA4B,GAE5BC,EAAoB,EACpBC,EAAqB,EACrBC,EAAwB,GACxBC,EAAwB,GAExBC,EAAmB,GAEnBC,EAAqB,EACrBC,EAAkB,EAClBC,EAAiB,EACjBC,EAAyB,EAEzBC,EAAgB,GAChBC,EAAoB,GACpBC,EAAoB,GACpBC,EAAwB,GACxBC,GAAuB,GACvBC,GAAqB,GAErBC,GAAuB,EACvBC,GAAiB,EACjBC,GAAsB,EACtBC,GAAmB,EAMnBC,GACG,IAAdC,YAHqB,yBAKjBA,YANgB,IAWTC,GAAmB,CAC9BC,GAAI,CACFC,MAAO,SAETC,GAAI,CACFD,MAAO,SAoEEE,GAAoB,CAC/BH,GAAI,CACFI,KAAM,OACNC,MAAO,YACPC,UAAW,mBAEbJ,GAAI,CACFE,KAAM,WACNC,MAAO,gBACPC,UAAW,uBAuXFC,GAAe,CAC1BP,GAAI,CACFQ,IAAK,MACLC,IAAK,MACLC,QAAS,iBACTC,KAAM,OACNC,OAAQ,SACRC,KAAM,OACNC,MAAO,QACPC,UAAW,gBACXC,YAAa,oBACbC,WAAY,iBACZZ,MAAO,mBACPa,OAAQ,gBACRC,GAAI,cACJC,YAAa,cACbC,eAAgB,kBAChBC,QAAS,UACTC,IAAK,aACLC,KAAM,cACNC,UAAW,kBACXC,WAAY,mBACZC,UAAW,aACXC,IAAK,WACLC,IAAK,MACLC,8BAA+B,eAC/BC,OAAQ,cACRC,OAAQ,eACRC,OAAQ,gBACRC,OAAQ,iBACRC,aAAc,iBACdC,QAAS,kBACTC,QAAS,kBACTC,QAAS,kBACTC,UAAW,iBACXC,QAAS,oBACTC,gBAAiB,oBACjBC,SAAU,WACVC,WAAY,cACZC,YAAa,eACbC,gBAAiB,eACjBC,oBAAqB,YACrBC,gBAAiB,WACjBC,cAAe,aACfC,kBAAmB,YACnBC,cAAe,WACfC,WAAY,cACZC,SAAU,mBACVC,QAAS,WACTC,gBAAiB,YACjBC,IAAK,gBACLC,eAAgB,yBAChBC,MAAO,iBACPC,KAAM,iCACNC,GAAI,gCACJC,GAAI,0BACJC,UAAW,kBACXC,KAAM,OACNC,KAAM,OACNC,IAAK,UACLC,MAAO,QACPC,OAAQ,iBAEVhE,GAAI,CACFM,IAAK,SACLC,IAAK,OACLC,QAAS,yBACTC,KAAM,MACNC,OAAQ,SACRC,KAAM,OACNC,MAAO,kBACPC,UAAW,mBACXC,YAAa,2BACbC,WAAY,uBACZZ,MAAO,uBACPa,OAAQ,kBACRC,GAAI,oBACJC,YAAa,eACbC,eAAgB,2BAChBC,QAAS,cACTC,IAAK,qBACLC,KAAM,cACNC,UAAW,4BACXC,WAAY,+BACZC,UAAW,2BACXC,IAAK,WACLC,IAAK,MACLC,8BAA+B,oBAC/BC,OAAQ,qBACRC,OAAQ,cACRC,OAAQ,qBACRC,OAAQ,wBACRC,aAAc,2BACdC,QAAS,0BACTC,QAAS,0BACTC,QAAS,oBACTC,UAAW,mBACXC,QAAS,wBACTC,gBAAiB,oBACjBC,SAAU,WACVC,WAAY,MACZC,YAAa,gBACbC,gBAAiB,eACjBC,oBAAqB,YACrBC,gBAAiB,WAEjBC,cAAe,UACfC,kBAAmB,gBACnBC,cAAe,WAEfC,WAAY,cACZC,SAAU,sBACVC,QAAS,qBACTC,gBAAiB,kBACjBC,IAAK,yBACLC,eAAgB,6BAChBC,MAAO,kBACPC,KAAM,0CACNC,GAAI,wCACJC,GAAI,iCACJC,UAAW,6BACXC,KAAM,cACNC,KAAM,UACNC,IAAK,kBACLC,MAAO,QACPC,OAAQ,wBAICC,GAAS,CACpBnE,GAAI,CACFoE,UAAW,2BACXC,SAAU,yBACVC,QAAS,iBACTC,UAAW,iBACXC,OAAQ,0BACRC,YAAa,mCACbC,QAAS,oCACTC,UAAW,kCACXC,MAAO,+BACPC,QAAS,6BACTC,SAAU,uBACVC,cAAe,uBACfC,QAAS,UACTC,QAAS,eACTC,UAAW,SACXC,OAAQ,aACRC,cAAe,oBACfC,MAAO,kBACPC,UAAW,UACXC,eAAgB,cAChBC,YAAa,WACbC,MAAO,iBACPC,YAAa,iBACbC,QAAS,mBAETC,QAAS,iBACTC,aAAc,iBAEhB3F,GAAI,CACFkE,UAAW,gDACXC,SAAU,iCACVC,QAAS,kBACTC,UAAW,mBACXC,OAAQ,sBACRC,YAAa,wCACbC,QAAS,oCACTC,UAAW,sCACXC,MAAO,iCACPC,QAAS,qCACTC,SAAU,gCACVC,cAAe,uCACfC,QAAS,eACTC,QAAS,kBACTC,UAAW,YACXC,OAAQ,WACRC,cAAe,2BACfC,MAAO,sBACPC,UAAW,UACXC,eAAgB,oBAChBC,YAAa,UACbC,MAAO,wBACPE,QAAS,uBACTC,QAAS,2BACTC,aAAc,0BAiBLC,GAAc,CACzB9F,GAAI,CACF+F,OAAQ,CACN,2BACA,6BACA,+BACA,+BACA,iCACA,0BACA,yBAGJ7F,GAAI,CACF6F,OAAQ,CACN,gDACA,wDACA,gDACA,wDACA,kDACA,sCACA,uBA8BOC,GAAW,CACtBhG,GAAI,CACFiG,QAAS,kBACTC,WAAY,uDACZC,QAAS,qBACTC,QAAS,uBACTC,QAAS,eACTC,QAAS,0BAETC,KAAM,gBACNC,OAAQ,+DACRC,MAAO,mCAGTvG,GAAI,CACF+F,QAAS,sBACTC,WACE,qFACFC,QAAS,6BACTC,QAAS,yCACTC,QAAS,iBACTC,QAAS,mCACTI,QACE,kIACFC,WAAY,0DACZC,WACE,2MACFC,WACE,6HACFC,WACE,8FACFC,SACE,gGACFR,KAAM,qBACNC,OACE,wFACFC,MAAO,oCACPO,GACE,wHACFC,KACE,6GACFC,SACE,+HAIOC,GAAgB,CAC3BC,kBAAmB,CACjBpH,GAAI,CACFqH,KAAM,CACJ,gBACA,eACA,eACA,qBACA,oBACA,eACA,eACA,gCACA,8BACA,8BACA,iBAGJnH,GAAI,CACFmH,KAAM,CACJ,sBACA,sBACA,iBACA,yBACA,wBACA,eACA,eACA,kDACA,8BACA,6BACA,uBAINC,iBAAkB,CAChBtH,GAAI,CACFqH,KAAM,CACJ,OACA,MACA,cACA,oBACA,gBACA,eACA,gBACA,gBACA,eACA,0BACA,cACA,iBACA,yBAGJnH,GAAI,CACFmH,KAAM,CACJ,WACA,SACA,gCACA,yBACA,gBACA,gBACA,uBACA,yBACA,kBACA,sCACA,2BACA,qBACA,qCAKNrH,GAAI,CACFuH,QAAS,gBACTC,QAAS,iBACTC,eAAgB,kBAChBC,MAAO,GACPC,qBAAsB,+BACtBC,WAAY,wCACZC,WAAY,2BACZC,mBAAoB,qCACpBC,KAAM,OACNC,IAAK,MACLC,IAAK,oBACL9G,GAAI,cACJ+G,WAAY,cACZC,UAAW,iBACXtG,IAAK,MACLuG,mBAAoB,sBACpBC,cAAe,mBACfC,WAAY,qBACZC,aAAc,gBACdC,aAAc,gBACdC,aAAc,gBACdC,YAAa,gBACbC,oBAAqB,yBACrBC,YAAa,eACbC,sBAAuB,2BAEzB3I,GAAI,CACFqH,QAAS,uBACTC,QAAS,mBACTC,eAAgB,0BAChBC,MAAO,GACPC,qBAAsB,+BACtBC,WAAY,kDACZC,WAAY,yCACZC,mBAAoB,mDACpBC,KAAM,WACNC,IAAK,SACLC,IAAK,yBACL9G,GAAI,oBACJ+G,WAAY,aACZC,UAAW,qBACXtG,IAAK,MACLuG,mBAAoB,wBACpBC,cAAe,2BACfC,WAAY,kBACZC,aAAc,uBACdC,aAAc,mBACdC,aAAc,sBACdC,YAAa,yBACbC,oBAAqB,qCACrBC,YAAa,kBACbC,sBAAuB,wCAIdC,GAAyB,CACpC9I,GAAI,CACF+I,MAAO,iBACPC,KAAM,gBACNC,GAAI,MAEN/I,GAAI,CACF6I,MAAO,qCACPC,KAAM,kBACNC,GAAI,sBAIKC,GAAS,CACpBC,YAAa,CACXC,MAAO,CAAEpJ,GAAI,mBAAoBE,GAAI,uBACrCmJ,IAAK,cACLC,MAAO,EACPC,OAAQ,WAEVC,SAAU,CACRJ,MAAO,CAAEpJ,GAAI,gBAAiBE,GAAI,uBAClCmJ,IAAK,WACLC,MAAO,EACPC,OAAQ,YAICE,GAAQ,CACnBzJ,GAAI,CACF0J,KAAM,yDAERxJ,GAAI,CACFwJ,KACE,oFAIOC,GAAc,CACzBC,cAAe,CACbR,MAAO,CAAEpJ,GAAI,gBAAiBE,GAAI,kBAClCmJ,IAAK,gBACLC,MAAO,EACPO,GAAI,GAENC,wBAAyB,CACvBV,MAAO,CACLpJ,GAAI,0BACJE,GAAI,oCAENmJ,IAAK,0BACLC,MAAO,EACPO,GAAI,GAENE,kBAAmB,CACjBX,MAAO,CAAEpJ,GAAI,oBAAqBE,GAAI,kCACtCmJ,IAAK,oBACLC,MAAO,EACPO,GAAI,GAENG,oBAAqB,CACnBZ,MAAO,CAAEpJ,GAAI,yBAAuBE,GAAI,yCACxCmJ,IAAK,sBACLC,MAAO,EACPO,GAAI,GAENI,eAAgB,CACdb,MAAO,CAAEpJ,GAAI,oBAAkBE,GAAI,sBACnCmJ,IAAK,iBACLC,MAAO,EACPO,GAAI,GAENK,iBAAkB,CAChBd,MAAO,CAAEpJ,GAAI,sBAAoBE,GAAI,8BACrCmJ,IAAK,mBACLC,MAAO,EACPO,GAAI,GAENM,oBAAqB,CACnBf,MAAO,CAAEpJ,GAAI,4BAAuBE,GAAI,yCACxCmJ,IAAK,sBACLC,MAAO,EACPO,GAAI,GAENO,gBAAiB,CACfhB,MAAO,CAAEpJ,GAAI,qBAAmBE,GAAI,gDACpCmJ,IAAK,kBACLC,MAAO,EACPO,GAAI,GAENQ,aAAc,CACZjB,MAAO,CAAEpJ,GAAI,kBAAgBE,GAAI,6BACjCmJ,IAAK,eACLC,MAAO,GACPO,GAAI,GAENS,aAAc,CACZlB,MAAO,CAAEpJ,GAAI,kBAAgBE,GAAI,mCACjCmJ,IAAK,eACLC,MAAO,GACPO,GAAI,GAENU,MAAO,CAAEnB,MAAO,CAAEpJ,GAAI,QAASE,GAAI,SAAWmJ,IAAK,QAASC,MAAO,IACnEkB,qBAAsB,CACpBpB,MAAO,CAAEpJ,GAAI,6BAAwBE,GAAI,qCACzCmJ,IAAK,uBACLC,MAAO,EACPO,GAAI,IAENY,QAAS,CACPrB,MAAO,CAAEpJ,GAAI,UAAWE,GAAI,wBAC5BmJ,IAAK,UACLC,MAAO,EACPO,GAAI,KAKKa,GAAS,CACpBC,mBAAoB,CAClBvB,MAAO,CACLpJ,GAAI,sBACJE,GAAI,0BACJ0K,QAAS,sBAEXvB,IAAK,qBACLC,MAAO,EACPO,GAAI,EACJN,OAAQ,WAEVsB,YAAa,CACXzB,MAAO,CAAEpJ,GAAI,cAAeE,GAAI,cAChCmJ,IAAK,cACLC,MAAO,EACPO,GAAI,EACJN,OAAQ,WAEVuB,aAAc,CACZ1B,MAAO,CAAEpJ,GAAI,iBAAkBE,GAAI,0BACnCmJ,IAAK,eACLC,MAAO,EACPO,GAAI,EACJN,OAAQ,WAEVwB,sBAAuB,CACrB3B,MAAO,CACLpJ,GAAI,wBACJE,GAAI,mCAENmJ,IAAK,wBACLC,MAAO,EACPO,GAAI,EACJN,OAAQ,WAEVyB,UAAW,CACT5B,MAAO,CAAEpJ,GAAI,YAAaE,GAAI,aAC9BmJ,IAAK,YACLC,MAAO,EACPO,GAAI,EACJN,OAAQ,WAEV0B,iBAAkB,CAChB7B,MAAO,CAAEpJ,GAAI,mBAAoBE,GAAI,gCACrCmJ,IAAK,mBACLC,MAAO,EACPO,GAAI,EACJN,OAAQ,WAEV2B,KAAM,CACJ9B,MAAO,CAAEpJ,GAAI,OAAQE,GAAI,iBACzBmJ,IAAK,OACLC,MAAO,EACPO,GAAI,EACJN,OAAQ,WAEV4B,aAAc,CACZ/B,MAAO,CAAEpJ,GAAI,eAAgBE,GAAI,iBACjCmJ,IAAK,eACLC,MAAO,EACPO,GAAI,EACJN,OAAQ,WAEV6B,eAAgB,CACdhC,MAAO,CAAEpJ,GAAI,iBAAkBE,GAAI,iBACnCmJ,IAAK,iBACLC,MAAO,GACPO,GAAI,EACJN,OAAQ,UAEV8B,4BAA6B,CAC3BjC,MAAO,CACLpJ,GAAI,2BACJE,GAAI,iDAENmJ,IAAK,8BACLC,MAAO,EACPO,GAAI,EACJN,OAAQ,UAEV+B,KAAM,CACJlC,MAAO,CACLpJ,GAAI,OACJE,GAAI,QAENmJ,IAAK,OACLC,MAAO,EACPO,GAAI,GACJN,OAAQ,WAICgC,GAAY,CACvBC,OAAQ,CACNpC,MAAO,CAAEpJ,GAAI,SAAUE,GAAI,UAC3BmJ,IAAK,SACLC,MAAO,EACPO,GAAI,GAEN4B,OAAQ,CACNrC,MAAO,CAAEpJ,GAAI,SAAUE,GAAI,YAC3BmJ,IAAK,SACLC,MAAO,EACPO,GAAI,GAEN6B,MAAO,CACLtC,MAAO,CAAEpJ,GAAI,QAASE,GAAI,YAC1BmJ,IAAK,QACLC,MAAO,EACPO,GAAI,IAIK8B,GAAyB,CACpCH,OAAQ,CACNpC,MAAO,CAAEpJ,GAAI,SAAUE,GAAI,UAC3BmJ,IAAK,SACLC,MAAO,EACPO,GAAI,GAEN4B,OAAQ,CACNrC,MAAO,CAAEpJ,GAAI,SAAUE,GAAI,YAC3BmJ,IAAK,SACLC,MAAO,EACPO,GAAI,GAEN6B,MAAO,CACLtC,MAAO,CAAEpJ,GAAI,QAASE,GAAI,YAC1BmJ,IAAK,QACLC,MAAO,EACPO,GAAI,GAEN+B,iBAAkB,CAChBxC,MAAO,CAAEpJ,GAAI,oBAAqBE,GAAI,qBACtCmJ,IAAK,mBACLC,MAAO,EACPO,GAAI,GAENgC,gBAAiB,CACfzC,MAAO,CAAEpJ,GAAI,oBAAqBE,GAAI,mBACtCmJ,IAAK,kBACLC,MAAO,EACPO,GAAI,IAIKiC,GAAY,CACvBC,YAAa,CACX3C,MAAO,CAAEpJ,GAAI,cAAeE,GAAI,iBAChCmJ,IAAK,cACLC,MAAO,EACPO,GAAI,GAENmC,uBAAwB,CACtB5C,MAAO,CAAEpJ,GAAI,yBAA0BE,GAAI,mCAC3CmJ,IAAK,yBACLC,MAAO,EACPO,GAAI,GAENoC,qBAAsB,CACpB7C,MAAO,CAAEpJ,GAAI,uBAAwBE,GAAI,4BACzCmJ,IAAK,uBACLC,MAAO,EACPO,GAAI,GAENqC,WAAY,CACV9C,MAAO,CAAEpJ,GAAI,aAAcE,GAAI,iBAC/BmJ,IAAK,aACLC,MAAO,EACPO,GAAI,GAENsC,cAAe,CACb/C,MAAO,CAAEpJ,GAAI,gBAAiBE,GAAI,wBAClCmJ,IAAK,gBACLC,MAAO,EACPO,GAAI,GAENuC,SAAU,CACRhD,MAAO,CAAEpJ,GAAI,WAAYE,GAAI,aAC7BmJ,IAAK,WACLC,MAAO,EACPO,GAAI,GAENwC,SAAU,CACRjD,MAAO,CAAEpJ,GAAI,WAAYE,GAAI,kBAC7BmJ,IAAK,WACLC,MAAO,EACPO,GAAI,GAENyC,0BAA2B,CACzBlD,MAAO,CAAEpJ,GAAI,yBAA0BE,GAAI,uBAC3CmJ,IAAK,4BACLC,MAAO,EACPO,GAAI,IAIK0C,GAAgB,CAC3BC,iBAAkB,CAChBpD,MAAO,CAAEpJ,GAAI,oBAAqBE,GAAI,wBACtCmJ,IAAK,mBACLC,MAAO,EACPO,GAAI,GAEN4C,sBAAuB,CACrBrD,MAAO,CACLpJ,GAAI,0BACJE,GAAI,iCAENmJ,IAAK,wBACLC,MAAO,EACPO,GAAI,GAEN6C,kBAAmB,CACjBtD,MAAO,CAAEpJ,GAAI,qBAAsBE,GAAI,sCACvCmJ,IAAK,oBACLC,MAAO,EACPO,GAAI,GAEN8C,oBAAqB,CACnBvD,MAAO,CACLpJ,GAAI,wBACJE,GAAI,kCAENmJ,IAAK,sBACLC,MAAO,EACPO,GAAI,GAEN+C,cAAe,CACbxD,MAAO,CAAEpJ,GAAI,gBAAiBE,GAAI,oBAClCmJ,IAAK,gBACLC,MAAO,EACPO,GAAI,GAENgD,gBAAiB,CACfzD,MAAO,CAAEpJ,GAAI,kBAAmBE,GAAI,wBACpCmJ,IAAK,kBACLC,MAAO,EACPO,GAAI,GAGNiD,kBAAmB,CACjB1D,MAAO,CAAEpJ,GAAI,oBAAqBE,GAAI,uBACtCmJ,IAAK,oBACLC,MAAO,EACPO,GAAI,GAENU,MAAO,CACLnB,MAAO,CAAEpJ,GAAI,QAASE,GAAI,SAC1BmJ,IAAK,QACLC,MAAO,EACPO,GAAI,GAENkD,KAAM,CACJ3D,MAAO,CAAEpJ,GAAI,OAAQE,GAAI,QACzBmJ,IAAK,OACLC,MAAO,EACPO,GAAI,IAIKmD,GAAc,CACzBC,iBAAkB,CAChB7D,MAAO,CAAEpJ,GAAI,oBAAqBE,GAAI,qBACtCmJ,IAAK,mBACLC,MAAO,EACPO,GAAI,GAGNqD,eAAgB,CACd9D,MAAO,CAAEpJ,GAAI,iBAAkBE,GAAI,qBACnCmJ,IAAK,iBACLC,MAAO,EACPO,GAAI,GAGNsD,iBAAkB,CAChB/D,MAAO,CAAEpJ,GAAI,mBAAoBE,GAAI,uBACrCmJ,IAAK,mBACLC,MAAO,EACPO,GAAI,GAGNU,MAAO,CACLnB,MAAO,CAAEpJ,GAAI,QAASE,GAAI,SAC1BmJ,IAAK,QACLC,MAAO,EACPO,GAAI,IAIKuD,GAAW,CAGtBC,GAAI,CACFjE,MAAO,CAAEpJ,GAAI,UAAWE,GAAI,WAC5BmJ,IAAK,KACLC,MAAO,EACPO,GAAI,GAENyD,GAAI,CACFlE,MAAO,CAAEpJ,GAAI,mBAAoBE,GAAI,wBACrCmJ,IAAK,KACLC,MAAO,EACPO,GAAI,GAEN0D,GAAI,CACFnE,MAAO,CAAEpJ,GAAI,UAAWE,GAAI,WAC5BmJ,IAAK,KACLC,MAAO,EACPO,GAAI,GAEN2D,GAAI,CACFpE,MAAO,CAAEpJ,GAAI,SAAUE,GAAI,aAC3BmJ,IAAK,KACLC,MAAO,GACPO,GAAI,GAEN4D,GAAI,CACFrE,MAAO,CAAEpJ,GAAI,WAAYE,GAAI,YAC7BmJ,IAAK,KACLC,MAAO,EACPO,GAAI,GAEN6D,GAAI,CACFtE,MAAO,CAAEpJ,GAAI,cAAeE,GAAI,sBAChCmJ,IAAK,KACLC,MAAO,EACPO,GAAI,GAEN8D,GAAI,CACFvE,MAAO,CAAEpJ,GAAI,gBAAiBE,GAAI,qBAClCmJ,IAAK,KACLC,MAAO,EACPO,GAAI,GAEN+D,GAAI,CACFxE,MAAO,CAAEpJ,GAAI,4BAA6BE,GAAI,2BAC9CmJ,IAAK,KACLC,MAAO,EACPO,GAAI,GAENgE,GAAI,CACFzE,MAAO,CAAEpJ,GAAI,eAAgBE,GAAI,gBACjCmJ,IAAK,KACLC,MAAO,GACPO,GAAI,GAENiE,GAAI,CACF1E,MAAO,CAAEpJ,GAAI,uBAAwBE,GAAI,+BACzCmJ,IAAK,KACLC,MAAO,EACPO,GAAI,GAENkE,GAAI,CACF3E,MAAO,CAAEpJ,GAAI,QAASE,GAAI,SAC1BmJ,IAAK,KACLC,MAAO,GACPO,GAAI,IAENmE,GAAI,CACF5E,MAAO,CAAEpJ,GAAI,UAAWE,GAAI,WAC5BmJ,IAAK,KACLC,MAAO,EACPO,GAAI,IAENoE,GAAI,CACF7E,MAAO,CAAEpJ,GAAI,wBAAyBE,GAAI,6BAC1CmJ,IAAK,KACLC,MAAO,EACPO,GAAI,KAIKqE,GAAS,CACpB1C,OAAQ,CACNpC,MAAO,CAAEpJ,GAAI,SAAUE,GAAI,UAC3BmJ,IAAK,SACLC,MAAO,EACPO,GAAI,GAEN4B,OAAQ,CACNrC,MAAO,CAAEpJ,GAAI,SAAUE,GAAI,YAC3BmJ,IAAK,SACLC,MAAO,EACPO,GAAI,GAENsE,MAAO,CACL/E,MAAO,CAAEpJ,GAAI,QAASE,GAAI,UAC1BmJ,IAAK,QACLC,MAAO,EACPO,GAAI,GAENuE,gBAAiB,CACfhF,MAAO,CAAEpJ,GAAI,kBAAmBE,GAAI,sBACpCmJ,IAAK,kBACLC,MAAO,EACPO,GAAI,IAIKwE,GAAM,CACjBC,KAAM,CACJlF,MAAO,CAAEpJ,GAAI,OAAQE,GAAI,SACzBmJ,IAAK,OACLC,MAAO,EACPO,GAAI,GAEN0E,OAAQ,CACNnF,MAAO,CAAEpJ,GAAI,SAAUE,GAAI,SAC3BmJ,IAAK,SACLC,MAAO,EACPO,GAAI,IAIK2E,GAAY,CACvBC,MAAO,CACLrF,MAAO,CAAEpJ,GAAI,QAASE,GAAI,YAC1BmJ,IAAK,QACLC,MAAO,EACPO,GAAI,GAEN6E,QAAS,CACPtF,MAAO,CAAEpJ,GAAI,UAAWE,GAAI,WAC5BmJ,IAAK,UACLC,MAAO,EACPO,GAAI,IAUK8E,GAAU,CACrBC,WAAY,CACVxF,MAAO,CAAEpJ,GAAI,aAAcE,GAAI,cAC/BmJ,IAAK,aACLC,MAAO,EACPO,GAAI,GAENgF,OAAQ,CACNzF,MAAO,CAAEpJ,GAAI,SAAUE,GAAI,UAC3BmJ,IAAK,SACLC,MAAO,EACPO,GAAI,IAIKiF,GAAS,CACpB9O,GAAI,CACF,UACA,WACA,QACA,QACA,MACA,OACA,OACA,SACA,YACA,UACA,WACA,YAEFE,GAAI,CACF,UACA,aACA,OACA,QACA,MACA,OACA,UACA,UACA,YACA,UACA,WACA,iB,iCC3kDJ,mDAIO,SAAS6O,EAAYC,EAAWC,EAAQC,EAAQjJ,GAqErD,MAhEc,CACZN,QAAS,CACPwJ,MAiEN,SAAkBC,EAAUJ,GAC1B,IACIK,EADAC,EAAQ,GAGZ,GAAIF,IAAa1S,KACf4S,EAAMC,KAAK,CACT/O,IAAKwO,EAAUQ,QAAQ,GAAGxH,IAC1BvH,IAAKuO,EAAUQ,QAAQ,GAAGC,SAAWpB,KAAIE,OAAOlF,IAAM,EAAI,EAC1DqG,IACEV,EAAUQ,QAAQ,GAAGG,YAAchB,KAAQE,OAAOxF,IAAM,QAAU,SAGpEuG,OAAQ,WAEP,GAAIR,IAAa3S,KACpB6S,EAAMC,KAAK,CACT/O,IAAKwO,EAAUQ,QAAQ,GAAGxH,IAC1BvH,IAAKuO,EAAUQ,QAAQ,GAAGC,SAAWpB,KAAIE,OAAOlF,IAAM,EAAI,EAC1DqG,IACEV,EAAUQ,QAAQ,GAAGG,YAAchB,KAAQE,OAAOxF,IAAM,QAAU,SAGpEuG,OAAQ,WAGV,IAAKP,EAAI,EAAGA,EAAIL,EAAUQ,QAAQK,OAAQR,IACxCC,EAAMC,KAAK,CACT/O,IAAKwO,EAAUQ,QAAQH,GAAGrH,IAC1BvH,IAAKuO,EAAUQ,QAAQH,GAAGI,SAAWpB,KAAIE,OAAOlF,IAAM,EAAI,EAC1DqG,IACEV,EAAUQ,QAAQH,GAAGM,YAAchB,KAAQE,OAAOxF,IAAM,QAAU,SAGpEuG,OAAQ,MAId,OAAON,EA5GUQ,CACfZ,EACAF,GAKEe,WAAYb,IAASvS,KAAY,EAAE,GAErCqT,OAAQ,CACNC,SAAU,YACVC,YAAa,sBACbjB,OAAQA,EACRkB,UAAU,EACVC,WAAYnK,EACZsB,QAAS,MACT7E,SAAUsM,EAAUqB,cAAc,GAAGC,SACrCC,WAAY,CACVC,YAAa,EACbC,YAAY,EACZC,SAAS,EACTC,WAAW,EACXC,WAAY,GACZC,aAAc,GACdC,cAAc,EACdC,eAAgB,GAElBC,YAAa,CACXC,oBAAoB,EACpBC,gBAAgB,EAChBC,eAAe,EACfC,SAAU,IAEZC,SAAU,CACVC,KAAK,EACLC,KAAK,EACLC,OAAO,EACPC,OAAO,EACPC,KAAK,EACLC,KAAK,EACLC,OAAQ,EACRC,OAAQ,EACRC,OAAQ,GACRC,OAAQ,GACRC,OAAQ,EACRC,OAAQ,IAGVC,OAAQ,CACNC,QAAQ,EACRC,UAAW,IACXC,UAAU,EACVC,SAAS,EACTC,WAAY,EACZC,WAAY,IAEdC,cAAe,CACbC,aAAa,EACbC,SAAS,EACTC,gBAAiB,CAAC,EAAG,EAAG,EAAG,IAAK,GAAI,KAEtCC,YAAa,CACXjQ,YAAa,GACbD,WAAY,GACZmQ,SAA6B,OAAnB9D,EAAU+D,KAAgB,EAAI,EACxCC,qBAAqB,M,wJCnEdC,EAAb,kDACE,WAAYC,GAAQ,IAAD,8BACjB,cAAMA,IAeRC,YAhBmB,uCAgBL,WAAOC,GAAP,SAAAC,EAAA,0DACY,IAArB,EAAKH,MAAMI,QADF,gCAGN,EAAKJ,MAAMK,uBAAuB,CACtCC,GAAI,EAAKC,MAAMD,GACfE,KAAM,EAAKD,MAAMC,OALP,OAOZ,EAAKC,SAAS,CAAED,MAAO,EAAKD,MAAMC,OAPtB,2CAhBK,sDAEjB,EAAKD,MAAQ,CACXC,KAAM,EAAKR,MAAMU,gBAAgBF,KACjCF,GAAI,EAAKN,MAAMU,gBAAgBJ,IAJhB,EADrB,6DASE,SAA0BK,GACpBC,KAAKL,MAAMC,OAASG,EAAUD,gBAAgBF,MAChDI,KAAKH,SAAS,CACZD,KAAMG,EAAUD,gBAAgBF,KAChCF,GAAIK,EAAUD,gBAAgBJ,OAbtC,oBA2BE,WACE,IAAMO,EAAMD,KAAKL,MAAMC,KACrB,0BAAMM,MAAO,CAAEC,SAAU,OAAQC,MAAO,UAAxC,UAEA,0BAAMF,MAAO,CAAEC,SAAU,OAAQC,MAAO,UAAxC,UAEF,OACE,6BACE,yBAAKC,QAASL,KAAKX,YAAaiB,UAAU,UACvCN,KAAKZ,MAAMmB,WACaC,IAAxBR,KAAKZ,MAAMqB,UAA0B,kBAAC,IAAD,CAAMA,SAAUT,KAAKZ,MAAMqB,WAC7DR,GAELD,KAAKL,MAAMC,KACV,yBAAKU,UAAU,WAAWN,KAAKZ,MAAMsB,UACnC,UA1CZ,GAAiCC,c,gCCHjC,oEAAO,IAAMC,EAAa,CACxB1U,GAAI,CACF2U,YAAa,6BACbC,YAAa,sCACbC,cAAe,2CACfC,qBAAsB,iEACtBC,qBAAsB,iEACtBC,MAAO,SACPC,YAAa,mGACbC,KAAM,oCACNC,MAAO,oBACPC,MAAO,mBACPC,MAAO,SACPC,MAAO,gBACPC,SAAU,iBACVC,WAAY,UACZC,SAAU,MACVC,SAAU,gBACVC,SAAU,iBACVC,YAAa,oBACbC,SAAU,gBACVC,SAAU,oBACVC,MAAO,cAEPC,QAAS,+DACTC,UAAW,6CACXC,QAAS,qWACTC,MAAO,oBACPC,MAAM,qCACNC,MAAO,8CACPC,MAAO,YACPC,MAAO,8DACPC,MAAO,kCACPC,OAAQ,uCACRC,OAAQ,kGACRC,OAAQ,iDAERC,KAAM,+BACNC,OAAQ,+BACRC,MACE,wLACFC,QACE,wLACFC,QAAS,aACTC,WAAY,QAEZC,KAAM,GAENC,MAAO,gBACPC,QAAS,eACTC,WAAY,qCACZC,aAAc,8BACdC,WACE,gIACFC,aACE,oFAGFC,WAAY,8CACZC,mBAAoB,gCACpBC,mBAAoB,8BACpBC,qBAAsB,4BAEtBC,KAAM,sBACNC,OAAQ,sBACRC,QAAS,eACTC,SAAU,MACVC,SAAU,WACVC,WAAY,iCACZC,WAAY,uBACZC,WAAY,kCACZC,aAAc,kCACdC,WACE,+EACFC,aACE,0DACFC,KAAM,wBACNC,OAAQ,wBACRC,QAAS,iBACTC,WACE,uEAGFC,WAAY,sCACZC,aAAc,iBACdC,WACE,2GAGFC,OAAQ,OACRC,KAAM,0BACNC,QAAS,uCACTC,UAAW,4CACXC,WACE,4GAGFC,WAAY,4CACZC,WACE,0EACFC,aACE,wEACFC,WACE,uJACFC,WAAY,oDACZC,WAAY,kCACZC,WAAY,uCACZC,YAAa,uCACbC,KAAM,0BACNC,QAAS,0CACTC,UAAW,4CACXC,WACE,iFACFC,WACE,6IACFC,WAAY,oDACZC,WAAY,kCACZC,WAAY,uCACZC,WAAY,uCACZC,cAAe,uCACfC,KAAM,uBACNC,MACE,2dAEFC,SAAU,4DACVC,MAAO,kBACPC,OACE,qhBACFC,YAAa,+CACbC,aAAc,oBACdC,YAAa,+CACbC,YAAa,6CACbC,WAAY,WACZC,YACE,6BACAC,aAAc,uDACdC,aAAc,wEACdC,aAAe,+BAEnBjb,GAAI,CACFyU,YAAa,sDACbC,YAAa,sDACbC,cAAe,iEACfC,qBAAsB,oFACtBC,qBAAsB,kFACtBC,MAAO,aACPC,YAAa,kIACbC,KAAM,+DACNC,MAAO,sBACPC,MAAO,WACPC,MAAO,SACPC,MAAO,gBACPC,SAAU,kBACVC,WAAY,SACZC,SAAU,SACVC,SAAU,gBACVC,SAAU,wBACVC,YAAa,2BACbG,MAAO,gBACPC,QAAS,iFACTC,UAAW,4DACXC,QAAS,8dAETL,SAAU,0BACVC,SAAU,6BAEVK,MAAO,0BACPC,MAAM,oCACNC,MAAO,iDACPC,MAAO,eACPC,MAAO,kEACPC,MAAO,2CACPC,OAAQ,2CACRC,OAAQ,8HACRC,OAAQ,mDAERC,KAAM,iEACNC,OAAQ,qEAERC,MAEE,yRACFC,QAEE,4RACFC,QAAS,2BACTC,WAAY,QAEZC,KAAM,GAIPC,MAAO,aACNC,QAAS,qBACTC,WAAY,2CACZC,aAAc,kCACdC,WACE,mHACFC,aACE,6FAKFC,WAAY,qDACZC,mBAAoB,wCACpBC,mBAAoB,iCACpBC,qBAAsB,kCACtBC,KAAM,0CACNC,OAAQ,6CACRC,QAAS,0BACTC,SAAU,OACVC,SAAU,iBAEVC,WACE,mDACFC,WAAY,sCACZC,WAAY,0EACZC,aAAc,0EACdC,WACE,0FACFC,aACE,6FACFC,KAAM,oCACNC,OAAQ,uCACRC,QAAS,oBACTC,WACE,uFAGFC,WACA,4CACAC,aACA,qBAEAC,WACA,gIAGAC,OAAQ,MAERC,KAAM,sBACNC,QAAS,mDACTC,UAAW,sDACXC,WACA,gIAGAC,WAAY,4BACZC,WAAY,oEACZC,aAAc,wEACdC,WACE,yLACFC,WAAY,qEACZC,WAAY,yCACZC,WAAY,wCACZC,YAAa,wCACbC,KAAM,sBACNC,QAAS,mDACTC,UAAW,sDACXC,WACE,yHACFC,WACE,0GACFC,WAAY,qEACZC,WAAY,yCACZC,WAAY,wCACZC,WAAY,wCACZC,cAAe,sDACfC,KAAM,oBACNC,MACE,gnBACFC,SAAU,kEACRC,MAAO,4BACTC,OACE,0oBACFC,YAAa,4CACbC,aAAc,oCACdC,YAAa,4CACbC,YAAa,6DACbC,WAAa,SACbC,YACE,sFACAC,aAAc,qDACdC,aAAc,sGACdC,aAAe,qCAKRC,EAAgB,CAC3Bpb,GAAI,CACFiG,QAAS,kBACToV,SAAU,uDACVC,OAAQ,qBACRC,MAAO,uBACPC,YAAa,eACbC,UAAW,8BACXC,UAAW,yBACXC,SAAU,wBACVC,SAAiB,sBACjBC,KAAM,YACNC,OAAQ,wBACRC,WAAY,cACZC,YAAY,QACZC,MAAO,QACPC,MAAM,QACNC,UAAU,iBACVC,WAAW,QACXC,QAAS,4BACT1H,YAAa,6BACbC,YAAa,sCACbC,cAAe,2CAEfyH,SAAU,0DAEZpc,GAAI,CACF+F,QAAS,sBACToV,SACE,qFACAC,OAAQ,6BACRC,MAAO,yCACPC,YAAa,iBACbC,UAAW,uCAEbC,UAAW,uCACXC,SAAU,0BACVC,SAAiB,+BACjBC,KAAM,YACNC,OAAQ,2BACRC,WAAY,aACZC,YAAY,QACZC,MAAO,WACPC,MAAM,mBACNC,UAAU,kBACVC,WAAW,QACXC,QAAS,uCACT1H,YAAa,sDACbC,YAAa,sDACbC,cAAe,iEAEfyH,SAAU,mF,8HCvTP,SAAeC,EAAtB,wC,4CAAO,WAAkCC,EAAQC,EAAW1J,EAAM2J,GAA3D,iEAAArJ,EAAA,6DACCgB,EAAQlN,IAAc4L,GADvB,SAGY4J,YAAyBH,EAAQC,EAAUjJ,IAHvD,eAIQc,KADTsI,EAHC,cAI8BtI,IAATsI,EAJrB,iBASH,IAJAC,QAAQC,IAAI,8BAERC,EAAmB,GAGrBC,EAAK,EACLA,EAAKJ,EAAKpf,KAA6Byf,cAAcpN,SACnDmN,EAEFD,EAAiBC,GACfJ,EAAK9e,KAAoCmf,cAAcD,GAAM,EACzDJ,EAAKpf,KAA6Byf,cAAcD,GAChD,EAUR,GARAD,EAAmBG,YAAiBH,EAAkBhK,EAAM,IAExDoK,EAAUP,EAAK1f,KAAuB+f,eAGlC,GAAKld,IAAiBgT,GAAM9S,MAC9Bmd,EAASR,EAAKzf,KAAsB8f,cACtCI,EAAY,GACE,OAAfhhB,cAAuBmgB,EAAOrN,MAAMU,OAAO,EAK5C,IAHMyN,EAAKd,EAAOrN,MAAM,GAAGnH,IACrBuV,EAAKf,EAAOrN,MAAM,GAAGnH,IAGnBqH,EAAI,EACRA,EAAI8N,EAAQtN,SACVR,EAEFgO,EAAU9N,KAAKiO,SAASF,EAAKjO,GAAK,IAAMmO,SAASD,EAAKlO,SAI1DgO,EAAWD,EAoFb,GAlFMK,EAAcP,YAClBN,EAAKlf,KAA2Buf,cAChClK,EACA,GAEI2K,EAASR,YACbN,EAAKxf,KAAsB6f,cAC3BlK,EACA,GAGI4K,EAAUT,YACdN,EAAKhf,KAAuBqf,cAC5BlK,EACA,GAEI6K,EAAgBV,YACpBN,EAAKvf,KAA6B4f,cAClClK,EACA,GAEI8K,EAAiBX,YACrBN,EAAKjf,KAA8Bsf,cACnClK,EACA,GAEI+K,EAAwBZ,YAC5BN,EAAK/e,KAAqCof,cAC1ClK,EACA,GAEIgL,EAAgBb,YACpBN,EAAKpf,KAA6Byf,cAClClK,EACA,GAEIiL,EAAuBd,YAC3BN,EAAK9e,KAAoCmf,cACzClK,EACA,GAEIkL,EAASf,YACbN,EAAKtf,KAAsB2f,cAC3BlK,EACA,GAKImL,EAAiBhB,YACrBN,EAAKrf,KAA8B0f,cACnClK,EACA,GAEIoL,EAAuBjB,YAC3BN,EAAKnf,KAAoCwf,cACzClK,EACA,GAEIqL,EACW,QAAf/hB,aACI,KACAgiB,YACE1S,IACA8Q,EAAU6B,SACVvL,GAEF,IAE2B,KAA1B0J,EAAU8B,YACP,KAAO9B,EAAU8B,YAAc,IAC/B,GACJC,EACJH,YAAuB3T,IAAQ+R,EAAUgC,aAAc1L,GACvDqL,EACA,cAEEM,EAAgB,GAChBC,EAAiB,IAIH,IAAdjC,EAAoB,CACtB,IACMrN,EAAI,EACRA,EAAIlI,IAAcG,iBAAiByL,GAAM1L,KAAKwI,SAC5CR,EAEFqP,EAAcnP,KAAKpI,IAAcG,iBAAiByL,GAAM1L,KAAKgI,IAG/DsP,EAAe,GAAKxB,EACpBwB,EAAe,GAAKtB,EACpBsB,EAAe,GAAKjB,EACpBiB,EAAe,GAAKjB,EACpBiB,EAAe,GAAKlB,EACpBkB,EAAe,GAAKhB,EACpBgB,EAAe,GAAKX,EACpBW,EAAe,GAAKb,EACpBa,EAAe,GAAKT,EACpBS,EAAe,GAAKR,EACpBQ,EAAe,IAAMf,EACrBe,EAAe,IAAMjB,EACrBiB,EAAe,IAAMZ,OAKjBtB,EAAUmC,kBAAoB9S,IAAUI,WAAW7C,IAEjDjN,KACFsiB,EAAgB,CACdrK,EAAMtM,KACNsM,EAAMrM,IACNqM,EAAMpM,IACNoM,EAAMjM,mBACNiM,EAAMhM,cACNgM,EAAM/L,WAEN+L,EAAMnM,YAIRyW,EAAe,GAAKxB,EACpBwB,EAAe,GAAKtB,EACpBsB,EAAe,GAAKjB,EACpBiB,EAAe,GAAKlB,EACpBkB,EAAe,GAAKhB,EACpBgB,EAAe,GAAKd,EAEpBc,EAAe,GAAKf,IAEpBc,EAAgB,CACdrK,EAAMtM,KACNsM,EAAMrM,IACNqM,EAAMpM,IACNoM,EAAMjM,mBACNiM,EAAMhM,cACNgM,EAAM/L,WAEN+L,EAAMnM,WAENmM,EAAM5L,cAIRkW,EAAe,GAAKxB,EACpBwB,EAAe,GAAKtB,EACpBsB,EAAe,GAAKjB,EACpBiB,EAAe,GAAKlB,EACpBkB,EAAe,GAAKhB,EACpBgB,EAAe,GAAKd,EAEpBc,EAAe,GAAKf,EACpBe,EAAe,GAAKZ,GAEbtB,EAAUgC,eAAiB/T,IAAOC,mBAAmBtB,IAC1DjN,KACFsiB,EAAgB,CACdrK,EAAMtM,KACNsM,EAAMrM,IACNqM,EAAMpM,IACNoM,EAAM9L,cAERoW,EAAe,GAAKxB,EACpBwB,EAAe,GAAKtB,EACpBsB,EAAe,GAEbjB,EACFiB,EAAe,GAAKX,IAEpBU,EAAgB,CACdrK,EAAMtM,KACNsM,EAAMrM,IACNqM,EAAMpM,IACNoM,EAAM9L,aACN8L,EAAM5L,cAERkW,EAAe,GAAKxB,EACpBwB,EAAe,GAAKtB,EACpBsB,EAAe,GAEbjB,EACFiB,EAAe,GAAKX,EACpBW,EAAe,GAAKZ,GAGbtB,EAAUgC,eAAiB/T,IAAOU,eAAe/B,KACtDjN,IACFsiB,EAAgB,CAACrK,EAAMtM,KAAMsM,EAAMrM,IAAKqM,EAAMlT,IAC9Cwd,EAAe,GAAKxB,EACpBwB,EAAe,GAAKtB,EACpBsB,EAAe,GAEbjB,GAUKjB,EAAUgC,eAAiB/T,IAAOG,YAAYxB,IACnDjN,KACFsiB,EAAgB,CACdrK,EAAMtM,KACNsM,EAAMrM,IACNqM,EAAMpM,IACNoM,EAAMxS,IACNwS,EAAM7L,aACN6L,EAAM9L,cAERoW,EAAe,GAAKxB,EACpBwB,EAAe,GAAKtB,EACpBsB,EAAe,GAEbjB,EACFiB,EAAe,GAAKV,EACpBU,EAAe,GAAKd,EACpBc,EAAe,GAAKX,EACpBW,EAAe,GAAK5B,IAEpB2B,EAAgB,CACdrK,EAAMtM,KACNsM,EAAMrM,IACNqM,EAAMpM,IACNoM,EAAMxS,IAGNwS,EAAM9L,aACN8L,EAAMzL,YACNyL,EAAM5L,cAERkW,EAAe,GAAKxB,EACpBwB,EAAe,GAAKtB,EACpBsB,EAAe,GAEbjB,EACFiB,EAAe,GAAKV,EAGpBU,EAAe,GAAKX,EACpBW,EAAe,GAAKT,EACpBS,EAAe,GAAKZ,GAEbtB,EAAUgC,eAAiB/T,IAAOK,sBAAsB1B,IAC7DjN,KACFsiB,EAAgB,CACdrK,EAAMtM,KACNsM,EAAMrM,IACNqM,EAAMpM,IACNoM,EAAMxS,IACNwS,EAAM9L,aACN8L,EAAM5L,cAERkW,EAAe,GAAKxB,EACpBwB,EAAe,GAAKtB,EACpBsB,EAAe,GAGbjB,EACFiB,EAAe,GAAKV,EACpBU,EAAe,GAAKX,EACpBW,EAAe,GAAK5B,IAEpB2B,EAAgB,CACdrK,EAAMtM,KACNsM,EAAMrM,IACNqM,EAAMpM,IACNoM,EAAMxS,IACNwS,EAAM9L,aACN8L,EAAMxL,sBACNwL,EAAMzL,YACNyL,EAAM5L,cAERkW,EAAe,GAAKxB,EACpBwB,EAAe,GAAKtB,EACpBsB,EAAe,GAGbjB,EACFiB,EAAe,GAAKV,EACpBU,EAAe,GAAKX,EACpBW,EAAe,GAAKR,EACpBQ,EAAe,GAAKT,EACpBS,EAAe,GAAKZ,GAGtBtB,EAAUgC,eAAiB/T,IAAOO,iBAAiB5B,KACnDoT,EAAUgC,eAAiB/T,IAAOI,aAAazB,KAC/CoT,EAAUgC,eAAiB/T,IAAOY,KAAKjC,IAEnCjN,KACFsiB,EAAgB,CACdrK,EAAMtM,KACNsM,EAAMrM,IACNqM,EAAMpM,IACNoM,EAAMjM,mBACNiM,EAAM/L,WACN+L,EAAMnM,YAERyW,EAAe,GAAKxB,EACpBwB,EAAe,GAAKtB,EACpBsB,EAAe,GAAKjB,EACpBiB,EAAe,GAAKlB,EACpBkB,EAAe,GAAKd,EACpBc,EAAe,GAAKf,IAEpBc,EAAgB,CACdrK,EAAMtM,KACNsM,EAAMrM,IACNqM,EAAMpM,IACNoM,EAAMjM,mBACNiM,EAAM/L,WACN+L,EAAMnM,WACNmM,EAAM5L,cAERkW,EAAe,GAAKxB,EACpBwB,EAAe,GAAKtB,EACpBsB,EAAe,GAAKjB,EACpBiB,EAAe,GAAKlB,EACpBkB,EAAe,GAAKd,EACpBc,EAAe,GAAKf,EACpBe,EAAe,GAAKZ,EAChBtB,EAAUgC,eAAiB/T,IAAOI,aAAazB,MACjDqV,EAAgB,CACdrK,EAAMtM,KACNsM,EAAMrM,IACNqM,EAAMpM,IACNoM,EAAMxS,IACNwS,EAAMjM,mBACNiM,EAAM/L,WACN+L,EAAM9L,aACN8L,EAAMzL,YACNyL,EAAMnM,WACNmM,EAAM5L,cAERkW,EAAe,GAAKxB,EACpBwB,EAAe,GAAKtB,EACpBsB,EAAe,GAAKjB,EACpBiB,EAAe,GAAKV,EACpBU,EAAe,GAAKlB,EACpBkB,EAAe,GAAKd,EACpBc,EAAe,GAAKX,EACpBW,EAAe,GAAKT,EACpBS,EAAe,GAAKf,EACpBe,EAAe,GAAKZ,IAMpB3hB,KACFsiB,EAAgB,CAACrK,EAAMtM,KAAMsM,EAAMrM,IAAKqM,EAAMpM,IAAKoM,EAAMnM,YAEzDyW,EAAe,GAAKxB,EACpBwB,EAAe,GAAKtB,EACpBsB,EAAe,GAAKjB,EACpBiB,EAAe,GAAKf,IAEpBc,EAAgB,CACdrK,EAAMtM,KACNsM,EAAMrM,IACNqM,EAAMpM,IACNoM,EAAMnM,WACNmM,EAAM/L,WACN+L,EAAM5L,cAGRkW,EAAe,GAAKxB,EACpBwB,EAAe,GAAKtB,EACpBsB,EAAe,GAAKjB,EACpBiB,EAAe,GAAKf,EACpBe,EAAe,GAAKd,EACpBc,EAAe,GAAKZ,GAnavB,yBAuaI,CAAEW,gBAAeC,iBAAgBH,cAvarC,6C,wDC9BP,42CAaaK,GAbb,KAakC,GACrBC,EAAgB,EAEhBC,EAAY,EACZC,EAA2B,EAC3BC,EAAsB,EAE7BC,EAAqB,CAAEC,MAAO,UAAWC,WAAY,QAErDpZ,EAAW,CACfhG,GAAI,CACF0G,QAAsB,QAAbrK,aAAmB,sCAAsC,4BAClEsK,WAAY,yCACZC,WACE,6BACG,IADH,cAGa,0BAAMoN,MAAOkL,GAAb,iBAHb,wEAImE,6BACjE,0BAAMlL,MAAOkL,GAAb,sBALF,gGAUFG,eACE,6BACG,IAED,0BAAMrL,MAAOkL,GAAb,iBAHF,QAG4D,0BAAMlL,MAAOkL,GAAb,gBAH5D,8CAIE,6BAJF,wCAI6C,6BAJ7C,mBAOFrY,WACE,wFACFC,WAAY,oDACZC,SACE,6BACG,IADH,qEAGE,6BAHF,OAIM,0BAAMiN,MAAOkL,GAAb,YAJN,gDAQFI,qBACA,+BACAC,eACE,mGACFhZ,KAAM,gBACNC,OAAQ,+DACRC,MAAO,kCACPO,GAAI,uEACJC,KACE,mEACqC,6BADrC,yBAEyB,IACvB,0BAAM+M,MAAOkL,GAAb,oCAGJhY,SACE,uEACFsY,SACE,4KAKFzS,KACE,8GACF0S,SACE,kFACFC,UACE,iGACFC,OACE,2QACFC,KACE,oGACF9b,KACE,uEAEE,6BACA,0BAAMkQ,MAAOkL,GAAb,mBACA,4EACA,0BAAMlL,MAAOkL,GAAb,kBACA,6EACA,0BAAMlL,MAAOkL,GAAb,2BACA,yFAGJW,YACE,kJACFC,OACE,wGACFC,cACE,kFACFC,SAAU,4BACVC,UACE,8CACiB,IACf,0BAAMjM,MAAOkL,GAAb,+BAFF,yCAMFgB,QACE,oLACAC,WAAY,2DACZC,cAAgB,mDAAwB,6BAAxB,+BAAyD,6BAAzD,kBAA6E,6BAA7E,oBAChBC,QACA,uEACAC,QACa,QAAbjkB,aAAmB,mJACnB,+LACAiP,KACA,oFACAiV,aACA,6KACAC,gBACA,sHACAC,SACA,kKACAC,WACA,mEACAC,aACA,0EACAC,UACA,8HACAC,QACA,yIACAC,SACA,oEAEJ5gB,GAAI,CACFwG,QACa,QAAbrK,aAAmB,0DAA8C,yCACjEsK,WAAY,0DACZC,WACE,kNAGuB,IACrB,0BAAMoN,MAAOkL,GAAb,8BAJF,4GAOE,6BACA,0BAAMlL,MAAOkL,GAAb,gCACgC,KACxB,IAVV,wJAeFG,eAAgB,6BACf,IADe,uBAGC,0BAAMrL,MAAOkL,GAAb,qBAHD,WAGkE,0BAAMlL,MAAOkL,GAAb,oCAHlE,uDAIZ,6BAJY,mFAOhBrY,WACE,2IACFC,WACE,8FACFC,SACE,6HAGE,6BAHF,aAIU,IACR,0BAAMiN,MAAOkL,GAAb,eALF,yEASFI,qBACA,gDAEAC,eACE,yIACFhZ,KAAM,qBACNC,OACE,wFACFC,MAAO,oCACPO,GACE,wHACFC,KACE,mFACqD,6BADrD,6BAE6B,IAC3B,0BAAM+M,MAAOkL,GAAb,iCAGJhY,SACE,6HACFsY,SACE,sNAIFzS,KACE,6KACF0S,SACE,mHACFC,UACE,iJACFC,OACE,ibACFC,KACE,4IACF9b,KACE,wFACuD,6BACrD,0BAAMkQ,MAAOkL,GAAb,mBACA,8GACA,0BAAMlL,MAAOkL,GAAb,kBACA,gHAGA,0BAAMlL,MAAOkL,GAAb,+CAGA,qLAMJW,YACE,sLACFC,OACE,yIACFC,cACE,0GACFC,SAAU,2CACVC,UACE,6BACG,IACD,0BAAMjM,MAAOkL,GAAb,uCAEQ,IAJV,kFAQFgB,QACE,sQACAC,WAAY,0DACZC,cAAgB,uDAA4B,6BAA5B,qCAAmE,6BAAnE,oCAAmG,6BAAnG,oCAChBC,QACA,gKACAC,QACa,QAAbjkB,aAAmB,qNACnB,kTACHiP,KACG,iGACAiV,aACA,+OACAC,gBACA,0KACAC,SACA,oPACAC,WACA,6FACAC,aACA,8GACAC,UACA,4LACAC,QACA,yKACAC,SACA,wEAIC,SAASC,EAAkBhO,GAChC,MAAO,CACLiO,OAAQ,iBACRC,SAAU,GACVC,SAAUnC,EACVoC,kBAAkB,EAClBC,iBAxRuB,MAyRvBC,SAAU,CACRC,YAhSsB,GAiStBC,UAAWC,EACXC,MAAOC,IACPC,OAhSiB,MAqShB,SAASC,EAAqB7O,GACnC,MAAO,CACLiO,OAAQ,aACRC,SAAUjb,EAAS+M,GAAMkN,UACzBiB,SAAUpC,EACVqC,kBAAkB,EAClBC,iBAzSsB,UA0StBC,SAAU,CACRC,YAhTsB,GAiTtBC,UAhTqB,EAiTrBE,MAAOC,IACPC,OAhTiB,MAqThB,SAASE,EAAsB9O,GACpC,MAAO,CACLiO,OAAQ,UACRC,SAAUjb,EAAS+M,GAAM9L,KACzBia,SAjT6B,EAkT7BC,kBAAkB,EAClBC,iBAxTuB,MAyTvBC,SAAU,CACRC,YAAYQ,GACZP,UAhUqB,EAiUrBE,MAhUgB,IAiUhBE,OAhUiB,MAqUhB,SAASI,EAAwBhP,GACtC,MAAO,CACLiO,OAAQ,uBACRC,SAAUjb,EAAS+M,GAAMyM,SACzB0B,SAAUnC,EACVoC,kBAAkB,EAClBC,iBAxUuB,MAyUvBC,SAAU,CACRC,YAhVsB,GAiVtBC,UAAWC,EACXC,MAAOC,IACPC,OAhViB,MAqVhB,SAASK,EAAuBjP,GACrC,MAAO,CACLiO,OAAQ,OACRC,SAAUjb,EAAS+M,GAAMhG,KACzBmU,SAAUpC,EACVqC,kBAAkB,EAClBC,iBAzVsB,UA0VtBC,SAAU,CACRC,YAhWsB,GAiWtBC,UAhWqB,EAiWrBE,MAhWgB,IAiWhBE,OAhWiB,MAqWhB,SAASM,EAAyBlP,GACvC,MAAO,CACLiO,OAAQ,aACRC,SAAUjb,EAAS+M,GAAMjM,WACzBoa,SAAUpC,EACVqC,kBAAkB,EAClBC,iBAzWsB,UA0WtBC,SAAU,CACRC,YAAYQ,GACZP,UAhXqB,EAiXrBE,MAhXgB,IAiXhBE,OAhXiB,MAqXhB,SAASO,EAAcnP,GAC5B,MAAO,CACLiO,OAAQ,aACRC,SAAUjb,EAAS+M,GAAM+M,OACzBoB,SAAUpC,EACVqC,kBAAkB,EAClBC,iBAzXsB,UA0XtBC,SAAU,CACRC,YAAYQ,GACZP,UAhYqB,EAiYrBE,MAhYgB,IAiYhBE,OAhYiB,MAqYhB,SAASQ,EAAqBpP,GACnC,MAAO,CACLiO,OAAQ,oBACRC,SAAUjb,EAAS+M,GAAMgN,cACzBmB,SAAUpC,EACVqC,kBAAkB,EAClBC,iBAzYsB,UA0YtBC,SAAU,CACRC,YAhZsB,GAiZtBC,UAhZqB,EAiZrBE,MAhZgB,IAiZhBE,OAhZiB,MAqZhB,SAASS,EAA4BrP,GAC1C,MAAO,CACLiO,OAAQ,qBACRC,SAAUjb,EAAS+M,GAAM4M,OACzBuB,SAAUpC,EACVqC,kBAAkB,EAClBC,iBAzZsB,UA0ZtBC,SAAU,CACRC,YAhasB,GAiatBC,UAhaqB,EAiarBE,MAAOC,IACPC,OAhaiB,MAqahB,SAASU,EAAoBtP,GAClC,MAAO,CACLiO,OAAQ,mBACRC,SAAUjb,EAAS+M,GAAM0N,SACzBS,SAAUjC,EACVkC,kBAAkB,EAClBC,iBAzasB,UA0atBC,SAAU,CACRC,YAhbsB,GAibtBC,UAhbqB,EAibrBE,MAAOC,IACPC,OAhbiB,MAsbhB,SAASW,EAAsBvP,GACpC,MAAO,CACLiO,OAAQ,qBACRC,SAAUjb,EAAS+M,GAAM2N,WACzBQ,SAAUjC,EACVkC,kBAAkB,EAClBC,iBA1bsB,UA2btBC,SAAU,CACRC,YAjcsB,GAkctBC,UAjcqB,EAkcrBE,MAAOC,IACPC,OAjciB,MAuchB,SAASY,EAAWxP,GACzB,MAAO,CACLiO,OAAQ,UACRC,SAAUjb,EAAS+M,GAAMmN,QACzBgB,SAAUpC,EACVqC,kBAAkB,EAClBC,iBA3csB,UA4ctBC,SAAU,CACRC,YAldsB,GAmdtBC,UAldqB,EAmdrBE,MAAOC,IACPC,OAldiB,MAudhB,SAASa,EAAWzP,GACzB,MAAO,CACLiO,OAAQ,UACRC,SAAUjb,EAAS+M,GAAMsN,QACzBa,SAAUpC,EACVqC,kBAAkB,EAClBC,iBA3dsB,UA4dtBC,SAAU,CACRC,YAlesB,GAmetBC,UAleqB,EAmerBE,MAAOC,IACPC,OAleiB,MAyehB,SAASc,EAAiB1P,GAC/B,MAAO,CACLiO,OAAQ,YACRC,SAAUjb,EAAS+M,GAAM6N,UACzBM,SAAUpC,EACVqC,kBAAkB,EAClBC,iBA7esB,UA8etBC,SAAU,CACRC,YApfsB,GAqftBC,UApfqB,EAqfrBE,MAAOC,IACPC,OApfiB,MAyfhB,SAASe,EAAuB3P,GACrC,MAAO,CACLiO,OAAQ,gBACRC,SAAUjb,EAAS+M,GAAM0M,SACzByB,SAAUpC,EACVqC,kBAAkB,EAClBC,iBA7fsB,UA8ftBC,SAAU,CACRC,YAAYQ,GACZP,UApgBqB,EAqgBrBE,MApgBgB,IAqgBhBE,OApgBiB,MAygBhB,SAASgB,EAAgB5P,GAC9B,MAAO,CACLiO,OAAQ,eACRC,SAAUjb,EAAS+M,GAAMzH,KACzB4V,SAAUpC,EACVqC,kBAAkB,EAClBC,iBA7gBsB,UA8gBtBC,SAAU,CACRC,YAAYQ,GACZP,UAphBqB,EAqhBrBE,MAphBgB,IAqhBhBE,OAphBiB,MAyhBhB,SAASiB,EAAmB7P,GACjC,MAAO,CACLiO,OAAQ,kBACRC,SAAUjb,EAAS+M,GAAMuN,QACzBY,SAAUpC,EACVqC,kBAAkB,EAClBC,iBA7hBsB,UA8hBtBC,SAAU,CACRC,YAAYQ,GACZP,UApiBqB,EAqiBrBE,MAAOC,IACPC,OApiBiB,MA2iBhB,SAASkB,EAAoB9P,GAClC,MAAO,CACLiO,OAAQ,mBACRC,SAAUjb,EAAS+M,GAAM+N,SACzBI,SAAUpC,EACVqC,kBAAkB,EAClBC,iBA/iBsB,UAgjBtBC,SAAU,CACRC,YAAYQ,GACZP,UAtjBqB,EAujBrBE,MAAOC,IACPC,OAtjBiB,MA2jBhB,SAASmB,EAAwB/P,GACtC,MAAO,CACLiO,OAAQ,uBACRC,SAAUjb,EAAS+M,GAAMwN,aACzBW,SAAUpC,EACVqC,kBAAkB,EAClBC,iBA/jBsB,UAgkBtBC,SAAU,CACRC,YAAYQ,GACZP,UAtkBqB,EAukBrBE,MAAOC,IACPC,OAtkBiB,MA4kBhB,SAASoB,EAA2BhQ,GACzC,MAAO,CACLiO,OAAQ,0BACRC,SAAUjb,EAAS+M,GAAMyN,gBACzBU,SAAUjC,EACVkC,kBAAkB,EAClBC,iBAhlBsB,UAilBtBC,SAAU,CACRC,YAAYQ,GACZP,UAvlBqB,EAwlBrBE,MAAOC,IACPC,OAvlBiB,MA4lBhB,SAASqB,EAAqBjQ,GACnC,MAAO,CACLiO,OAAQ,YACRC,SAAUjb,EAAS+M,GAAM2M,UACzBwB,SAAUpC,EACVqC,kBAAkB,EAClBC,iBAhmBsB,UAimBtBC,SAAU,CACRC,YAAYQ,GACZP,UAvmBqB,EAwmBrBE,MAvmBgB,IAwmBhBE,OAvmBiB,MA4mBhB,SAASsB,EAAqBlQ,GACnC,MAAO,CACLiO,OAAQ,cACRC,SAAUjb,EAAS+M,GAAMrM,QACzBwa,SAAUpC,EACVqC,kBAAkB,EAClBC,iBAhnBsB,UAinBtBC,SAAU,CACRC,YAAYQ,GACZP,UAvnBqB,EAwnBrBE,MAvnBgB,IAwnBhBE,OAvnBiB,MA4nBhB,SAASuB,EAAuBnQ,GACrC,MAAO,CACLiO,OAAQ,eACRC,SAAUjb,EAAS+M,GAAMhM,SACzBma,SAAUpC,EACVqC,kBAAkB,EAClBC,iBAhoBsB,UAioBtBC,SAAU,CACRC,YAAYQ,GACZP,UAvoBqB,EAwoBrBE,MAAOC,IACPC,OAvoBiB,MA4oBhB,SAASwB,EAAmCpQ,GACjD,MAAO,CACLiO,OAAQ,iBACRC,SAAUjb,EAAS+M,GAAMuM,qBACzB4B,SAAUpC,EACVqC,kBAAkB,EAClBC,iBAhpBsB,UAipBtBC,SAAU,CACRC,YAAYQ,GACZP,UAvpBqB,EAwpBrBE,MAAOC,IACPC,OAvpBiB,MA4pBhB,SAASyB,EAAsBrQ,GACpC,MAAO,CACLiO,OAAQ,qBACRC,SAAUjb,EAAS+M,GAAMwM,eACzB2B,SAAUpC,EACVqC,kBAAkB,EAClBC,iBAhqBsB,UAiqBtBC,SAAU,CACRC,YAAYQ,GACZP,UAvqBqB,EAwqBrBE,MAAOC,IACPC,OAvqBiB,MA4qBhB,SAAS0B,EAAsBtQ,GACpC,MAAO,CACLiO,OAAQ,iBACRC,SAAUjb,EAAS+M,GAAMnM,WACzBsa,SAAUpC,EACVqC,kBAAkB,EAClBC,iBAhrBsB,UAirBtBC,SAAU,CACRC,YAAYQ,GACZP,UAvrBqB,EAwrBrBE,MAAOC,IACPC,OAvrBiB,MA8rBhB,SAAS2B,EAAyBvQ,EAAKwQ,GAC5C,MAAO,CACLvC,OAAQ,iBACRC,SAAUjb,EAAS+M,GAAMsM,eACzB6B,SAAUqC,EA1rBmB,EA0rBOzE,EACpCqC,kBAAkB,EAClBC,iBAlsBsB,UAmsBtBC,SAAU,CACRC,YAAYQ,GACZP,UAzsBqB,EA0sBrBE,MAAOC,IACPC,OAzsBiB,MA8sBhB,SAAS6B,EAAoBzQ,GAClC,MAAO,CACLiO,OAAQ,iBACRC,SAAUjb,EAAS+M,GAAMnM,WACzBsa,SAAUlC,EACVmC,kBAAkB,EAClBC,iBAltBsB,UAmtBtBC,SAAU,CACRC,YAAYQ,IACZP,UAztBqB,EA0tBrBE,MAAOC,IACPC,OAztBiB,MA8tBhB,SAAS8B,EAAmB1Q,GACjC,MAAO,CACLiO,OAAQ,kBACRC,SAAUjb,EAAS+M,GAAM8N,QACzBK,SAAUpC,EACVqC,kBAAkB,EAClBC,iBAluBsB,UAmuBtBC,SAAU,CACRC,YAAYQ,GACZP,UAzuBqB,EA0uBrBE,MAAOC,IACPC,OAzuBiB,MA6uBhB,SAAS+B,EAAc3Q,GAC5B,MAAO,CACLiO,OAAQ,aACRC,SAAUjb,EAAS+M,GAAMoN,WACzBe,SAAUlC,EACVmC,kBAAkB,EAClBC,iBAjvBsB,UAkvBtBC,SAAU,CACRC,YAAYQ,IACZP,UAAWC,GACXC,MAAOC,IACPC,OAxvBiB,MA6vBhB,SAASgC,EAAiB5Q,GAC/B,MAAO,CACLiO,OAAQ,gBACRC,SAAUjb,EAAS+M,GAAMqN,cACzBc,SAAUlC,EACVmC,kBAAkB,EAClBC,iBAjwBsB,UAkwBtBC,SAAU,CACRC,YAAYQ,IACZP,UAAWC,GACXC,MAAOC,IACPC,OAxwBiB,MA6wBhB,SAASiC,EAAiB7Q,GAC/B,MAAO,CACLiO,OAAQ,gBACRC,SAAUjb,EAAS+M,GAAM6M,KACzBsB,SAAUpC,EACVqC,kBAAkB,EAClBC,iBAjxBsB,UAkxBtBC,SAAU,CACRC,YAAYQ,GACZP,UAxxBqB,EAyxBrBE,MAAOC,IACPC,OAxxBiB,MA6xBhB,SAASkC,EAAY9Q,GAC1B,MAAO,CACLiO,OAAQ,WACRC,SAAUjb,EAAS+M,GAAMjP,KACzBod,SAAUpC,EACVqC,kBAAkB,EAClBC,iBAjyBsB,UAkyBtBC,SAAU,CACRC,WAAYQ,GACZP,WAAWC,IACXC,MAAOC,IACPC,QAAQmC,MAKP,SAASC,EAAoBhR,GAClC,MAAO,CACLiO,OAAQ,kBACRC,SAAUjb,EAAS+M,GAAM8M,YACzBqB,SAAUlC,EACVmC,kBAAkB,EAClBC,iBAjzBsB,UAkzBtBC,SAAU,CACRC,YAAYQ,IACZP,UAAWC,GACXC,MAAOC,IACPC,OAxzBiB,MA6zBhB,SAASqC,EAAwBjR,GACtC,MAAO,CACLiO,OAAQ,WACRC,SAAUjb,EAAS+M,GAAMiN,SACzBkB,SAAUlC,EACVmC,kBAAkB,EAClBC,iBAj0BsB,UAk0BtBC,SAAU,CACRC,YAAYQ,GACZP,UAAWC,GACXC,MAAOC,IACPC,OAx0BiB,Q,sICFVsC,EAAb,kDACE,WAAY/Q,GAAQ,IAAD,8BACjB,cAAMA,IAYRgR,kBAAoB,WAClB,EAAKvQ,SAAS,CAAEwQ,aAAa,KAdZ,EAiBnBC,YAAc,WACZ,IAAMC,EAAQ,CACZA,MAAO,EAAK5Q,MAAM4Q,MAClBC,KAAM,EAAK7Q,MAAM8Q,UACjBC,KAAM,EAAK/Q,MAAMgR,UACjBC,SAAU,EAAKjR,MAAMiR,SACrBC,IAAK,EAAKlR,MAAMmR,SAChBT,YAAa,EAAK1Q,MAAM0Q,aAE1B,EAAKjR,MAAM2R,YAAYR,EAAO,EAAKnR,MAAMrJ,KA1BxB,EA6BnBib,YAAc,WACZ,EAAKnR,UACH,SAACoR,GAAD,MAAgB,CACdN,UAAWO,WAAiC,IAAtBD,EAAUN,cAElC,EAAKL,cAlCU,EAsCnBa,aAAe,WACb,EAAKtR,UACH,SAACoR,GAAD,MAAgB,CACdN,UAAWO,WAAiC,GAAtBD,EAAUN,cAElC,EAAKL,cA3CU,EA+CnBG,UAAY,WACV,EAAK5Q,UACH,SAACoR,GAAD,MAAgB,CACdR,UAAWS,WAAWD,EAAUR,UAAY,MAE9C,EAAKH,cApDU,EAwDnBc,WAAa,WACX,EAAKvR,UACH,SAACoR,GAAD,MAAgB,CACdR,UAAWS,WAAWD,EAAUR,UAAY,MAE9C,EAAKH,cA7DU,EAiEnBe,cAAgB,SAAC/R,GACf,IAAIuR,EAAY,IAANvR,EACV,EAAKO,SACH,CAAEiR,SAAUD,GAEZ,EAAKP,cAtEU,EA0EnBgB,WAAa,SAAChS,GACZ,IAAIsR,EAAiB,IAANtR,EACf,EAAKO,SACH,CAAE+Q,SAAUA,GAEZ,EAAKN,cA/EU,EAmFnBiB,YAAc,WACZ,EAAK1R,SACH,CACE0Q,MAAO,KACPF,aAAa,GAEf,EAAKC,cAzFU,EA6FnBD,YAAc,WACZ,IAAME,EAAQ,CACZA,MAAO,EAAK5Q,MAAM4Q,MAClBC,KAAM,EAAK7Q,MAAM8Q,UACjBC,KAAM,EAAK/Q,MAAMgR,UACjBC,SAAU,EAAKjR,MAAMiR,SACrBE,SAAU,EAAKnR,MAAMmR,SACrBT,aAAc,EAAK1Q,MAAM0Q,aAE3B,EAAKjR,MAAM2R,YAAYR,EAAO,EAAKnR,MAAMrJ,KAtGxB,EAyGnByb,UAAY,WACV,IAAMjB,EAAQ,CACZA,MAAO,EAAK5Q,MAAM4Q,MAClBC,KAAM,EAAK7Q,MAAM8Q,UACjBC,KAAM,EAAK/Q,MAAMgR,UACjBC,SAAU,EAAKjR,MAAMiR,SACrBE,SAAU,EAAKnR,MAAMmR,SACrBT,aAAa,QAGW7P,IAAvB,EAAKpB,MAAMoS,YACZjB,EAAMA,MAAM,EAAKnR,MAAMoS,WACvB,EAAK3R,SACL,CACE0Q,MAAOA,EACPkB,MAAM,KAxHO,EA8HnBC,UAAY,WACV,EAAK7R,SAAS,CACZwQ,aAAa,KAhIE,EAoInBsB,UAAY,SAACrS,GACX,IAKIiR,EALAqB,EAAOtS,EAAEuS,OAAOC,MAAM,GAEtBC,EAAS,IAAIC,WACjBD,EAAOE,cAAcL,GAGrBG,EAAOG,OAAS,WAGd,IAAMC,EAAW,CACf5B,MAHFA,EAAQwB,EAAOK,OAIb5B,KAAM,EAAK7Q,MAAM8Q,UACjBC,KAAM,EAAK/Q,MAAMgR,UACjBC,UAAU,EACVE,SAAU,EAAKnR,MAAMmR,SACrBT,YAAa,EAAKjR,MAAMiR,aAE1B,EAAKxQ,UACH,iBAAO,CACL0Q,MAAOA,EACPF,YAAa,EAAKjR,MAAMiR,YACxBO,SAAU,EAAKxR,MAAMwR,SACrBa,MAAM,KAER,EAAKrS,MAAM2R,YAAYoB,EAAU,EAAK/S,MAAMrJ,OA3JhD,EAAK4J,MAAQ,CACXgR,UAAW,EAAKvR,MAAMsR,KACtBD,UAAW,EAAKrR,MAAMqR,UACtBG,SAAU,EAAKxR,MAAMwR,SACrBE,SAAU,EAAK1R,MAAMyR,IACrBR,aAAa,EACbE,MAAO,EAAKnR,MAAMmR,MAClBkB,MAAM,GATS,EADrB,0CAmKE,WACE,IAAMY,EAAa,CACjBjS,MAAO,OACPuN,MAAO5kB,KAAmB,IAC1BupB,QAAS,aACT7E,UAAW,OACX8E,aAAc,OACd/E,WAAYxN,KAAKL,MAAM8Q,UAAY,KAG/BxR,OAA+BuB,IAAxBR,KAAKZ,MAAMJ,SAAyBgB,KAAKZ,MAAMJ,SAAW,KACjEwT,OACsBhS,IAA1BR,KAAKZ,MAAMqT,WACPzS,KAAKZ,MAAMqT,WAAW1W,QAAmB,OAATkD,EAAgB,GAAK,IACrD,EAEN,OACE,yBACES,GAAG,QACHQ,MAAO,CACLE,MAAO,OACPqN,UAAW,OACX8E,aAAc,OACd5E,MAAO5kB,KAAmB,MAG5B,yBAAKmX,MAAO,CAAEwS,YAAa,UACG,IAA3B1S,KAAKL,MAAM0Q,aAAyBmC,EAAW,GAC9C,2BAAOlS,UAAU,oBACf,2BACEvT,KAAK,OACL4lB,UAAQ,EACRzS,MAAO,CAAEoS,QAAS,QAClBM,OAAO,kEACPC,SAAU7S,KAAK2R,UACftR,QAAS,SAACyS,GACRA,EAAMjB,OAAOvc,MAAQ,QAGzB,0BAAM4K,MAAO,CAAEuN,UAAW,OAAQE,MAAO,SACtC3N,KAAKZ,MAAMqT,kBAKMjS,IAAvBR,KAAKZ,MAAMoS,WAAyB,2BAClClR,UAAU,mBACTJ,MAAO,CAACsN,WAAW,QACnBnN,QAASL,KAAKwR,UACdzkB,KAAK,SACLuI,MAAgB,OAAT2J,EAAgB,OAAO,aAGpC,6BApCF,IAoCS,6BACP,wBAAIqB,UAAU,SACbN,KAAKL,MAAM0Q,aACV,oCACE,yBAAKnQ,MAAO,CAAEsN,WAAY,SACxB,kBAAC,IAAD,CACEG,MAAO,OACPoF,UAAW,EACXC,cAAe,CACJ,OAAT/T,EAAgB,MAAQ,OACf,OAATA,EAAgB,SAAW,OAE7BgU,SAAUjT,KAAKL,MAAMmR,SAAW,EAAI,EACpCoC,kBAAmBlT,KAAKqR,gBAG1B,kBAAC,IAAD,CACE1D,MAAO,OACPoF,UAAW,EACXC,cAAe,CAAC,KAChBC,SAAU,EACVC,kBAAmBlT,KAAKgR,cAE1B,kBAAC,IAAD,CACErD,MAAO,OACPoF,UAAW,EACXC,cAAe,CAAC,KAChBC,SAAU,EACVC,kBAAmBlT,KAAKmR,eAG1B,kBAAC,IAAD,CACExD,MAAO,OACPoF,UAAW,EACXC,cAAe,CAAC,yCAChBC,SAAU,EACVC,kBAAmBlT,KAAKyQ,YAE1B,kBAAC,IAAD,CACE9C,MAAO,OACPoF,UAAW,EACXC,cAAe,CAAC,yCAChBC,SAAU,EACVC,kBAAmBlT,KAAKoR,aAG1B,kBAAC,IAAD,CACEzD,MAAgB,OAAT1O,EAAe,OAAO,QAC7B8T,UAAW,EACXC,cAAe,CACJ,OAAT/T,EAAgB,WAAa,WACpB,OAATA,EAAgB,YAAc,oBAEhCgU,SAAUjT,KAAKL,MAAMiR,SAAW,EAAI,EACpCsC,kBAAmBlT,KAAKsR,aAE1B,kBAAC,IAAD,CACE3D,MAAO,OACPoF,UAAW,EACXC,cAAe,CAAC,KAChBC,SAAU,EACVC,kBAAmBlT,KAAKuR,cAE1B,kBAAC,IAAD,CACErR,MAAO,CAAEsN,WAAY,QACrBG,MAAO,OACPoF,UAAW,EACXC,cAAe,CAAU,OAAT/T,EAAgB,OAAS,cACzCgU,SAAU,EACVC,kBAAmBlT,KAAK0R,cAKhC,4BACA,yBAAKxR,MAAOmS,GACY,OAArBrS,KAAKL,MAAM4Q,MACV,GAEA,yBACEjQ,UAAU,OACVZ,GAAIM,KAAKZ,MAAMrJ,GACfod,IAAKnT,KAAKL,MAAM8R,KAAKzR,KAAKL,MAAM4Q,MAAMA,MAAOvQ,KAAKL,MAAM4Q,MACxD5C,MAAO3N,KAAKL,MAAMgR,UAAY,OAIpC,6BACA,kCAhTR,GAAqCyC,IAAMzS,Y,uLCGpC,SAAS0S,IACdC,SAASC,eAAe,QAAQrT,MAAMoS,QAAU,OAG3C,IAAMkB,EAAb,kDACE,WAAYpU,GAAQ,IAAD,uBACjB,cAAMA,IAYRiU,YAAc,WACZ,IAAMI,EAAM,EAAKC,KAAKC,aAEVnT,IAARiT,IAAmBA,EAAIvT,MAAMoS,QAAU,SAhB1B,EAmBnBsB,YAAc,WAGZ,IAAMH,EAAM,EAAK3hB,QAAQ6hB,QACbF,EAAIne,WAEJkL,IAARiT,IAEEA,EAAIne,QAAQjF,KAAO,EAAK+O,MAAMJ,UAAWlN,SAE3C,EAAKsN,MAAMyU,mBAAkB,GAI/BJ,EAAIne,MAAQjF,KAAO,EAAK+O,MAAMJ,UAAWjN,eASzC,EAAKqN,MAAMyU,mBAAkB,GAE7BJ,EAAIne,MAAQjF,KAAO,EAAK+O,MAAMJ,UAAWlN,WA5C1B,EAiDnBgiB,eAAe,SAAC9U,GACd,IAAM+U,EAAYrrB,IACZsrB,EAAK3jB,KAAO2O,GAAWlN,QACvBmiB,EAAM5jB,KAAO2O,GAAWjN,aAC9B,OAA6C,OAAtCmiB,aAAaC,QAAQJ,GAAsBC,EAAIC,GArDrC,EAwDnBG,eAAe,WACb,EAAKC,cAAc,EAAKP,eAAqC,OAAtB,EAAK1U,MAAMJ,SAAgB,KAAK,OAvDvE,EAAK0U,KAAON,IAAMkB,YAClB,EAAKxiB,QAAUshB,IAAMkB,YAEzB,IAAMtV,EAAS,EAAKI,MAAMJ,SAChB+U,EAAYrrB,IACZsrB,EAAK3jB,KAAO2O,GAAWlN,QACvBmiB,EAAM5jB,KAAO2O,GAAWjN,aARb,OASjB,EAAKsiB,cAAqD,OAAtCH,aAAaC,QAAQJ,GAAsBC,EAAIC,EATlD,EADrB,0CA8DE,WAAU,IAAD,OAEDM,EADKC,cACaC,WAepBC,GAbF1U,KAAKZ,MAAMJ,SAEXgB,KAAKZ,MAAMJ,SAEXgB,KAAKZ,MAAMJ,SAIXgB,KAAKZ,MAAMJ,SAKH2V,eACJC,GAAiB,IAARF,EAAe,eAAiB,YAKzCG,GACI,IAARH,EACI,CAAEvU,SAAU,QACZ,CAAEmS,QAAS,eAAgBnS,SAAU,OAAQuS,YAAa,OAChE,OACE,yBAAKpS,UAAWsU,GACd,2BACEtU,UAAU,WACVJ,MAAO,CAAEuN,UAAW,MAAOqH,MAAO,OAClCzU,SAASL,KAAKoU,iBAAkBpU,KAAKZ,MAAM2V,YAC3ChoB,KAAK,SACLuI,MAA+B,OAAxB0K,KAAKZ,MAAMJ,SAAoB,cAAa,YAErD,8BACE,yBAAKkB,MAAO,CAAE8U,SAAU,QACtB,yBAAK9U,MAAO,CAAEoS,QAAS,iBACrB,wBAAIhS,UAAU,eAAwCN,KAAKZ,MAAMmB,QAEnE,yBAAKL,MAAO2U,GAAZ,IAA4BI,UAA5B,OAGJ,0BAAM3U,UAAU,kBACd,2BACEA,UAAU,eACVD,QAASL,KAAKZ,MAAM8V,WAEpBnoB,KAAK,SACLuI,MAA+B,OAAxB0K,KAAKZ,MAAMJ,SAAoB,OAAS,gBAEjD,2BAAOsB,UAAU,eAAeJ,MAAO,CAAE4U,MAAO,QAC9C,2BACE/nB,KAAK,OACL4lB,UAAQ,EACRzS,MAAO,CAAEoS,QAAS,QAClBM,OAAO,mCACPC,SAAU7S,KAAKZ,MAAM+V,aACrB9U,QAAS,SAACyS,GACRA,EAAMjB,OAAOvc,MAAQ,QAGzB,0BAAMgL,UAAU,aACW,OAAxBN,KAAKZ,MAAMJ,SAAoB,OAAS,WAG5CuV,GACC,2BACEjU,UAAU,eAEVD,QAASL,KAAKZ,MAAMgW,SACpBroB,KAAK,SACLuI,OAAO0K,KAAKZ,MAAMJ,SAAoB,UACtCU,GAAG,UAGP,2BACEY,UAAU,eAEVD,QAAS,SAACyS,GACR,EAAKc,eAEP7mB,KAAK,SACL0mB,IAAKzT,KAAKlO,QACVwD,MACE0K,KAAKqU,cAEP3U,GAAG,YAEL,2BACEY,UAAU,eAEVD,QAAS,SAACyS,GACR,EAAK1T,MAAMiW,cACXhC,KAEFtmB,KAAK,SACL0mB,IAAKzT,KAAK0T,KACVpe,MAA+B,OAAxB0K,KAAKZ,MAAMJ,SAAoB,UAAY,kBAClDU,GAAG,eAlKf,GAA4BiB,c,oBCZ5B2U,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,oE,qICI9BC,EAAb,kDACE,WAAYpW,GAAQ,IAAD,8BACjB,cAAMA,IAiCRqW,QAAU,SAACC,GACT,IAAIC,EACAC,EACEtgB,EAAQogB,EAAI7D,OAAOvc,MAQzBsgB,EAASC,YAAYvgB,EAAO,EAAK8J,MAAMJ,UAUlC2W,GAPFG,MAAMF,EAAOG,QAAQ,IAAK,OAAmB,KAAVzgB,GAEgB,MAAlDA,EAAM0gB,WAAW1gB,EAAM0gB,WAAWja,OAAS,IACO,MAAlDzG,EAAM0gB,WAAW1gB,EAAM0gB,WAAWja,OAAS,GAIlC6Z,EADHtgB,EAAM2gB,UAAU,EAAG3gB,EAAMyG,OAAS,GAG5C,IAAMma,EACkB,IAAtB,EAAK9W,MAAM+W,YACiB3V,IAAxB,EAAKpB,MAAMgX,SACT,IACA,EAAKhX,MAAMgX,cACW5V,IAAxB,EAAKpB,MAAMgX,SACX,IACA,EAAKhX,MAAMgX,SAEbT,EAAQO,IAAKP,EAAQO,GACzB,IAAMG,OAA8B7V,IAAxB,EAAKpB,MAAMkX,SAAyB,EAAI,EAAKlX,MAAMkX,SAI/D,OAFIX,EAAQU,IAAKV,EAAQU,GAElBV,GAvEU,EA+EnBY,YAAc,SAACzD,GACT0D,UAAUC,UAAUC,MAAM,2BAEvB5D,EAAMjB,OAAO8E,UAlFH,EAqFnBC,YAAc,SAAC9D,GACT0D,UAAUC,UAAUC,MAAM,2BAC5B5D,EAAMjB,OAAOgF,kBAAkB,EAAG/D,EAAMjB,OAAOvc,MAAMyG,SAvFtC,EA0FnB+a,gBAAkB,SAAChE,GACb,mBAAmBiE,KAAKP,UAAUC,aAAeO,OAAOC,UAC1DnE,EAAMjB,OAAO8E,UA5FE,EAgGnBO,eAAiB,SAACpE,GAChBA,EAAMjB,OAAOvc,MAAQugB,YAAY/C,EAAMjB,OAAOvc,MAAO,EAAK8J,MAAMJ,WAjG/C,EAiInBmY,cAAgB,SAAC7X,GAGf,IAAIqW,EAAQ,EAAKF,QAAQnW,GACzBqW,EAAQ,EAAKyB,SAASzB,GACtB,EAAK9V,SAAS,CAAEwX,WAAY1B,EAAO2B,WAAY,EAAK3X,MAAM2X,YAAa,kBACrE,EAAKC,uBAvIU,EA4InBC,SAAW,SAACliB,GACV,IAAMmiB,EAAMniB,EAAM0gB,WAAW0B,QAAQ,KAGrC,OAAc,IAFApiB,EAAM0gB,WAAW,KAEH,IAATyB,EAEfvG,WAAW,IAAM5b,EAAM0gB,WAAW2B,MAAM,EAAGriB,EAAM0gB,WAAWja,SAC5D,IAEQmV,WAAW,IAAM5b,GAAS,KArJrB,EAwJnBsiB,WAAa,WACX,IAAIC,EAAI,EAAKC,KAAKC,SAASziB,MACvBuiB,EAAE9b,QACJib,OAAOgB,YAAW,WAChBhY,KAAK8X,KAAKC,SAASlB,kBAAkBgB,EAAE9b,OAAS,EAAG8b,EAAE9b,UACpD,IA7JY,EAiKnBkc,0BAA4B,SAACC,GAC3B,IAAMC,EAAaD,EAAaR,QAAQ,KACxC,GAAIS,GAAc,EAKhB,IAJID,EAAanc,QAAUoc,EAAa,IAEtCD,EAAeA,EAAajC,UAAU,EAAGkC,EAAa,IAG3B,MAA3BD,EAAaP,OAAO,IACpBO,EAAanc,OAASoc,EAAa,GAEnCD,EAAeA,EAAajC,UAAU,EAAGiC,EAAanc,OAAS,GAInE,OAAOmc,GA9KP,EAAKvY,MAAQ,CACX0X,WAAY,EAAKD,SAAS,EAAKhY,MAAMiY,YACrCC,WAAW,GAJI,EADrB,6DAwBE,SAA0BvX,GACpBA,EAAUsX,aAAerX,KAAKZ,MAAMiY,YACtCrX,KAAKH,SAAS,CAAEwX,WAAYrX,KAAKoX,SAASrX,EAAUsX,gBA1B1D,8BA8BE,SAAiB3B,GAEf1V,KAAKH,SAAS,CAAEwX,WAAY3B,EAAI7D,OAAOvc,UAhC3C,8BA2EE,WAEE0K,KAAKZ,MAAMgZ,kBAAkBpY,KAAKZ,MAAMM,GAAIM,KAAKL,MAAM0X,cA7E3D,sBAqGE,SAASgB,GACP,IACMpZ,EAAOe,KAAKZ,MAAMJ,SAwBxB,OApBAqZ,EAASxC,YAAYwC,EAAQpZ,IAEzB6W,MAAMuC,IAAsB,KAAXA,KAAeA,EAAS,GACnB,IAAtBrY,KAAKZ,MAAM+W,QAED,OAATlX,EAAgB,GAAK,KACtB,IAAIqZ,KAAKC,aAAatZ,GAAMkX,OAAOzM,SAAS2O,IACf,IAAtBrY,KAAKZ,MAAM+W,OACP,OAATlX,GAEoD,MAApDoZ,EAAOrC,WAAWqC,EAAOrC,WAAWja,OAAS,GACzCmV,WAAWmH,GAAU,IACrBnH,WAAWmH,IACKrC,WAAWD,QAAQ,IAAK,KAGQ,MAApDsC,EAAOrC,WAAWqC,EAAOrC,WAAWja,OAAS,GACzCmV,WAAWmH,GAAU,IACrBnH,WAAWmH,GACF3O,SAAS2O,KA9HhC,oBAoLE,WAAU,IAAD,OACHH,OACwB1X,IAA1BR,KAAKL,MAAM0X,WACPrX,KAAKL,MAAM0X,WAAWrB,WACtB,GACFkC,EAAaR,QAAQ,MAAQ,IAC/BQ,EAAelY,KAAKiY,0BAA0BC,IAGhD,IAAM3X,EAAQP,KAAKZ,MAAMoZ,UACnBC,IAAUzY,KAAKZ,MAAMsZ,SACvBC,EAAaF,EAAU,gCAAkC,aAEvDG,GADND,GAAsC,OAAxB3Y,KAAKZ,MAAMJ,SAAoB,oBAAsB,KAG1C,IAAtBgB,KAAKZ,MAAM+W,QACW,IAAtBnW,KAAKZ,MAAM+W,QAAwC,OAAxBnW,KAAKZ,MAAMJ,SACnC,gBACA,IAEF6Z,EAAgB,oBACpBA,GAAyC,OAAxB7Y,KAAKZ,MAAMJ,SAAoB,kBAAoB,GAEpE,IAAI8Z,OACsBtY,IAAxBR,KAAKZ,MAAM2Z,SACP,GACA,CAAEC,OAAQ,aAAehZ,KAAKZ,MAAM2Z,eAMpBvY,IAApBR,KAAKZ,MAAM6Z,QACc,IAAxBjZ,KAAKZ,MAAM8Z,UAAqBlZ,KAAKZ,MAAM8Z,UAI9C,IAAIC,EAA6B,IAAtBnZ,KAAKZ,MAAM+W,OAChBjW,OAAkCM,IAAzBR,KAAKZ,MAAMga,aAAoD,KAAzBpZ,KAAKZ,MAAMga,YAAkB,GAAG,CAAC/N,MAAMrL,KAAKZ,MAAMga,aAEvG,MAA4B,OAAxBpZ,KAAKZ,MAAMJ,UAA2C,IAAtBgB,KAAKZ,MAAM+W,OAE3C,yBACE7V,UAAWuY,EACXQ,OAAgC,OAAxBrZ,KAAKZ,MAAMJ,SAAoB,OAAS,SAEhD,yBAAKsB,UAAU,eAAeJ,MAAOA,GAClCK,OAMwBC,IAAxBR,KAAKZ,MAAMqB,SACV,kBAAC,IAAD,CAAMA,SAAUT,KAAKZ,MAAMqB,WAE3B,IAOF,yBAAKH,UAAWqY,GACd,8BACE,2BACE5rB,KAAK,OACLuT,UAAWsY,EACX1Y,MAAO,CAAEoZ,WAAY,MAAO3L,MAAO,OACnC4L,UAAU,UACVC,SAAUf,EACVnjB,MAAO4iB,EACPuB,WAAS,EACTC,QAAS,SAACpa,GAAD,OAAO,EAAKiX,YAAYjX,IACjCqa,UAAW3Z,KAAK8W,gBAChBzW,QAASL,KAAK4W,YACd/D,SAAU,SAAC6C,GAAD,OAAS,EAAKkE,iBAAiBlE,IACzCmE,OAAQ7Z,KAAKmX,cAAc2C,KAAK9Z,QAElC,2BACEE,MAAO,CACLoS,QAAS,eACTlS,MAAO,OACPuN,MAAO,OAJX,QAgBR,yBACErN,UAAWuY,EACXQ,OAAgC,OAAxBrZ,KAAKZ,MAAMJ,SAAoB,OAAS,SAEjD,yBAAKsB,UAAU,eAAeJ,MAAOA,GACjCK,OAIwBC,IAAxBR,KAAKZ,MAAMqB,SACV,kBAAC,IAAD,CAAMA,SAAUT,KAAKZ,MAAMqB,WAE3B,IAOF,8BACY,IAAT0Y,EACC,6BACE,2BACEjZ,MAAO4Y,EACP/rB,KAAK,OACLgtB,IAAI,KACJzZ,UAAWqY,EACXY,UAAU,UACVC,SAAUf,EACVnjB,MAAO4iB,EACPwB,QAAS,SAACpa,GAAD,OAAO,EAAKiX,YAAYjX,IACjCe,QAASL,KAAK4W,YACd+C,UAAW3Z,KAAK8W,gBAChBjE,SAAU,SAAC6C,GAAD,OAAS,EAAKkE,iBAAiBlE,IACzCmE,OAAQ7Z,KAAKmX,cAAc2C,KAAK9Z,SAIpC,yBAAKM,UAAWqY,GAEd,8BACE,2BACE5rB,KAAK,OACLgtB,IAAI,MACJzZ,UAAWsY,EACX1Y,MAAO,CAAEoZ,WAAY,MAAO3L,MAAO,OACnC4L,UAAU,UACVC,SAAUf,EACVnjB,MAAO4iB,EACPwB,QAAS,SAACpa,GAAD,OAAO,EAAKiX,YAAYjX,IACjCqa,UAAW3Z,KAAK8W,gBAChBzW,QAASL,KAAK4W,YACd/D,SAAU,SAAC6C,GAAD,OAAS,EAAKkE,iBAAiBlE,IACzCmE,OAAQ7Z,KAAKmX,cAAc2C,KAAK9Z,QAElC,2BACEE,MAAO,CACLoS,QAAS,eACTlS,MAAO,OACPuN,MAAO,OAJX,aA1UpB,GAAgChN,c,koCCwCzB,SAASkV,EAAYvgB,EAAO2J,GACjC,GAAc,OAAV3J,QACYkL,IAAVlL,EAEF,YADUkL,IAAPvB,IAAkBA,EAAK,MA6BhC,SAA2B+a,GACzB,IAAIC,EAAWD,EAAIhE,WAAWkE,OAAO,KACrC,GAAID,EAAY,EACd,OAAO,EAIP,IADA,IAAIE,EAAIH,EACDC,GAAa,GAElBE,EAAIA,EAAGnE,WAAWC,UAAUgE,EAAW,EAAGvQ,SAASyQ,EAAGpe,SACtDke,EAAWE,EAAGnE,WAAWkE,OAAO,KAGlC,OAAIC,EAAGpe,QAAQ,EAzCRqe,CAAkB9kB,IAAiB,OAAP2J,EAaxB3J,EACJ0gB,WACAD,QAAQ,KAAM,IACdA,QAAQ,IAAK,IACbA,QAAQ,IAAK,IACbA,QAAQ,KAAM,IACdA,QAAQ,IAAK,IACbA,QACC,2FACA,IArBGzgB,EACJ0gB,WACAD,QAAQ,IAAK,KACbA,QAAQ,IAAK,IACbA,QAAQ,IAAK,IACbA,QAAQ,KAAM,IACdA,QAAQ,IAAK,IACbA,QACC,2FACA,IAuCL,SAASpB,IACd,MACgC,qBAAvBqC,OAAOqD,cAC+B,IAA7C7D,UAAUC,UAAUiB,QAAQ,YAIzB,SAAS4C,EAAUC,EAAGC,EAAQC,EAAMC,EAAUC,GAClD,IAAIC,EACDC,EACAC,EAGAC,EACE9b,EAAmB,MAAd0b,QAAoCna,IAAfma,EAA2B,KAAK,KAiEhE,MA9DiB,qBAANJ,IAETA,EAAI1E,EAAY0E,EAAGtb,GACN,IAATwb,IAAYF,EAAI7Q,SAAS6Q,GAAGS,QAAQ,IAE3B,IAATP,GAAcD,IACQ,MAApBD,EAAEA,EAAExe,OAAS,GAAYwe,EAAIA,EAAEtE,UAAU,EAAGsE,EAAExe,OAAS,IAErDwe,EAAExe,OAAS,IAAGwe,GAAS,GAAJA,GAAQS,QAAQ,IACnCT,EAAI,MAAKA,GAAKA,EAAI,IAAIS,QAAQ,MAKtCJ,EAAKK,EAAQV,GACbM,EAAKI,GAASV,EAAIK,GAAM,KACxBE,EAAKpR,UAAU6Q,EAAIK,EAAK,IAAOC,GAAM,MAEjCA,EAAK,GAAKC,EAAK,KACjBP,EAAIM,EAAKH,GAAaE,EAAK,GAAKA,EAAKA,EAAK,GAAK,IAAMA,EAAK,KAAOA,GAC7DE,EAAK,IACPP,EACEO,EACAJ,GACCG,EAAK,GAAKA,EAAKA,EAAK,GAAK,IAAMA,EAAK,KAAOA,GAC5CH,GACCE,EAAK,GAAKA,EAAKA,EAAK,GAAK,IAAMA,EAAK,KAAOA,KAGrC,IAATH,EAEA,iEAAiE1D,KAC/DP,UAAUC,WAGZsE,EAAY7J,WAAWgK,KAAKC,MAAU,IAAJZ,GAAW,KAAKS,QAAQ,IAM1DD,GADAA,GAHAA,EAAY7J,WACVgK,KAAKC,MAAM,IAAMZ,GAAK,KAAoB,IAAbA,EAAExe,QAAgBye,EAAS,IAAM,KAExC,IAAM,IAAMO,GACdC,QAAQ,GAAK,SAClBxa,IAAdma,GACEI,EAAUK,SAAS,OAAKL,EAAUA,EAAUhF,QAAQ,IAAI4E,KAG7C,IAATF,IACTM,EACE,GAAKrR,SAASwH,WAAWgK,KAAKC,MAAU,IAAJZ,GAAW,KAAKS,QAAQ,GAAK,KACnD,MAAKD,EAAY,KAC7BA,EAAY,MAAKA,EAAY,KAE/B,iEAAiEhE,KAC/DP,UAAUC,WAGZsE,EAAYA,EACTA,GAAwB,KACRA,EAAH,IAATN,EAAwB,IAAMF,EACxBA,GAEfzE,MAAMD,EAAYkF,EAAW9b,MAAQ8b,EAAY,GAC9CA,EAUT,SAASE,EAAQI,GACf,OAAOnK,WAAWmK,GAAO,IAAO3R,SAAS2R,EAAM,KAI1C,SAASC,EAAYluB,EAAQmuB,EAAcC,EAASC,GACzD,IAGE5F,EAAYzoB,EAFS,MAAVouB,QAA4Bhb,IAAXgb,EAAuB,KAAK,MAGxDD,EAAeL,KAAKQ,IAAIH,GACxBA,EAAezF,MAAMyF,GAAgB,EAAIA,EAEzC,IAAMI,EAAevuB,EAAS,EAAI,IAAM,GAEpCmO,EAAI2V,WACL9jB,EAAS8tB,KAAKQ,IAAIE,OAAOxuB,IAAW,GAAG4tB,QAAQO,IAChDvF,WAEE6F,EAAItgB,EAAEQ,OAAS,EAAIR,EAAEQ,OAAS,EAAI,EAEtC,OACE4f,GACCE,EAAItgB,EAAEugB,OAAO,EAAGD,GAAKJ,EAAY,IAClClgB,EAAEugB,OAAOD,GAAG9F,QAAQ,iBAAkB,KAAO0F,IAC5CF,EACGC,EACAN,KAAKQ,IAAItuB,EAASmO,GACfyf,QAAQO,GACR5D,MAAM,GACT,IAEN,MAAOrY,KAKJ,SAASyc,EAAa3uB,EAAQmuB,EAActc,EAAM+c,GACvD,IAAMrB,EAAuB,OAAT1b,EAAgB,IAAM,IACpCwc,EAAqB,OAATxc,EAAgB,IAAM,IAGxC,IACE4W,EAAYzoB,EAAQ6R,GACpBsc,EAAeL,KAAKQ,IAAIH,GACxBA,EAAezF,MAAMyF,GAAgB,EAAIA,EAEzC,IAAMI,EAAevuB,EAAS,EAAI,IAAM,GAEpCmO,EAAI2V,WACL9jB,EAAS8tB,KAAKQ,IAAIE,OAAOxuB,IAAW,GAAG4tB,QAAQO,IAChDvF,WAEE6F,EAAItgB,EAAEQ,OAAS,EAAIR,EAAEQ,OAAS,EAAI,EAgBtC,OAbE4f,GACU,OAAT1c,GAAiB+c,EAAa,IAAM,KACpCH,EAAItgB,EAAEugB,OAAO,EAAGD,GAAKJ,EAAY,IAClClgB,EAAEugB,OAAOD,GAAG9F,QAAQ,iBAAkB,KAAO0F,IAC5CF,EACGZ,EACAO,KAAKQ,IAAItuB,EAASmO,GACfyf,QAAQO,GACR5D,MAAM,GACT,KACM,OAAT1Y,GAAiB+c,EAAa,KAAO,KACtChG,WAGF,MAAO1W,KAKJ,SAAS8J,EAAiB6S,EAAOjd,EAAUkd,GAGhD,IAFA,IAAIC,EAAiB,GAEZ5gB,EAAI,EAAGA,EAAI0gB,EAAMlgB,OAAQR,IAChC4gB,EAAe5gB,GAAKwgB,EAClBE,EAAM1gB,GACN2gB,EACAld,GACA,GAMJ,OAAOmd,EAqCF,SAAS3H,IACd,IAAM4H,EAAMnH,UACRoH,EAAQ,EACRC,EAAMF,EAAI1E,QAAQ,KACtB2E,EAAQD,EAAInG,UAAU,EAAGqG,GACzB,IAAIC,EAAOlB,EAAIO,OAAOS,IAClBG,EAAOJ,EAAI1E,QAAQ,IAAK4E,EAAM,GAClCD,EAAQD,EAAInG,UAAUqG,EAAM,EAAGE,GAC/BD,GAAQlB,EAAIO,OAAOS,IACnBA,EAAQD,EAAInG,UAAUuG,EAAO,EAAGJ,EAAIrgB,QACpCwgB,GAAQlB,EAAIO,OAAOS,IACnB,IAAII,EAAiBb,OAAOW,GA4B5B,MAPa,CACXtH,QAASmH,EACTK,eAAgBA,EAChBhI,YANW,EAOXiI,aANY,EAOZC,eANc,GAWlB,SAAStB,EAAIuB,GACX,OAAOA,EAAI,EAAI,GAAKA,EAAI,IAAMA,EAwIzB,SAASC,EAAwB3hB,EAAWgG,EAAOsL,GACxD,IAAIjR,EACAsgB,EACAiB,EAAuB,GAC3B,IAAKvhB,EAAI,EAAGA,EAAI2F,IAAS3F,EAAGuhB,EAAqBrhB,KAAK,GAEtD,IAAKogB,EAAI,EAAGA,EAAI3gB,EAAU6hB,WAAWhhB,OAAQ8f,IAC3C,GAAI3gB,EAAU6hB,WAAWlB,GAAGmB,cAAcnnB,KAAYc,QAAQpB,IAC9D,CACE,IAAM0nB,EAAWC,EAAsBhiB,EAAU6hB,WAAWlB,IAC5D,IAAKtgB,EAAI,EAAGA,EAAI2f,KAAK7E,IAAInV,EAAO+b,EAASlhB,UAAWR,EAClDuhB,EAAqBvhB,IAAM0hB,EAAS1hB,GAK1C,QAAaiF,IAAVgM,EAED,IAAKjR,EAAI,EAAGA,EAAI2f,KAAK7E,IAAInV,EAAOsL,EAAQrD,cAAcpN,UAAWR,EACjEuhB,EAAqBvhB,IAAMiR,EAAQrD,cAAc5N,GAInD,OAAOuhB,EAGF,SAASI,EAAsBC,EAAU3Q,GAC9C,IAAIjR,EACA6hB,EAAY,EACZN,EAAuB,GAE3B,GACEK,EAAUH,cAAgBnnB,KAAYI,kBAAkBV,KACxD4nB,EAAUH,cAAgBnnB,KAAYK,oBAAoBX,IAC1D,CACA,IAAIykB,EAAMmD,EAAUE,UAQpB,IAPAP,EAAqBrhB,KAAKyf,KAAKC,MAAMnB,IACrCmD,EAAUlvB,OAiDd,SAAwBovB,EAAWnwB,EAAaX,GAE9C,IAAI+wB,EAAO,GACPC,EAAK,GACLC,EAAK,EAGT,KAAOD,EAAKC,EAAK,OAEZH,EAAY9wB,GAAS2uB,KAAKuC,IAAI,EAAIH,EAAMpwB,GACxCX,GAAS,EAAI+wB,IAAS,EAAIpC,KAAKuC,IAAI,EAAIH,EAAMpwB,EAAc,KAAQowB,EAE3D,EAAGC,EAAKD,EACdE,EAAKF,EAEVA,GAAQE,EAAKD,GAAM,EAGrB,OAAOD,EAnEcI,CACjBP,EAAUE,UACVF,EAAUjwB,YACViwB,EAAU5wB,OAGPgP,EAAI,EAAGA,EAAI4hB,EAAUjwB,cAAeqO,EACvCye,GAAOA,EAAMmD,EAAU5wB,QAAU,EAAI4wB,EAAUlvB,QAC/C6uB,EAAqBrhB,KAAKyf,KAAKC,MAAMnB,SAElC,GAAImD,EAAUH,cAAgBnnB,KAAYa,qBAAqBnB,IAAK,CAEzE,IAAIykB,EAAMmD,EAAUE,UAEpB,IADAP,EAAqBrhB,KAAKyf,KAAKC,MAAMnB,IAChCze,EAAI,EAAGA,EAAI4hB,EAAUjwB,cAAeqO,EACvCye,EAAMmD,EAAUQ,iBAAiBpiB,GACjCuhB,EAAqBrhB,KAAKyf,KAAKC,MAAMnB,SAElC,GAAImD,EAAUH,cAAgBnnB,KAAYc,QAAQpB,IACvD,QAAeiL,IAAXgM,EACF,IAAKjR,EAAI,EAAGA,EAAI4hB,EAAUjwB,cAAeqO,EAAG,CAE1C6hB,EADY7hB,EAAI4hB,EAAUjwB,YAAciwB,EAAUE,UAAY,EAE9DP,EAAqBrhB,KAAK2hB,QAK1B,IAAK7hB,EAAI,EAAGA,EAAI4hB,EAAUjwB,cAAeqO,EACzC6hB,EAAY5Q,EAAQrD,cAAc5N,GAClCuhB,EAAqBrhB,KAAK2hB,QAI9B,IAAK7hB,EAAI,EAAGA,EAAI4hB,EAAUjwB,cAAeqO,EAAG,CAC1C,IAAMye,EAAMze,EAAI4hB,EAAUjwB,YAAciwB,EAAUE,UAAY,EACxDO,EAEJT,EAAUU,eAAiBnjB,IAAUC,MAAMpF,IACvC4nB,EAAUlvB,OAAS,KAClBkvB,EAAUlvB,OAAS,IAC1BmvB,EAAYpD,EAAMkB,KAAKuC,IAAI,EAAIG,EAAQriB,GACvCuhB,EAAqBrhB,KAAK2hB,GAI9B,OAAON,EAwBF,SAASgB,EACdC,EACAC,EACAxvB,EACAyvB,EACAC,GAEA,IAAI3iB,EACA4iB,EAAMJ,EAEV,IAAKxiB,EAAI,EAAGA,EAAI2iB,IAAO3iB,EACrB4iB,EAAKzU,SAASyU,GAAKzU,SACjBsU,EAAcC,EAAU1iB,GACxB2f,KAAKuC,IAAI,GAAK,EAAIjvB,EAAU,KAAMyvB,EAAU1iB,IAKhD,OAAO+e,EAAU6D,GAAK,EAAO,EAAG,KAG3B,SAASC,EACdC,EACAvB,GAEA,IAAIvhB,EACA+iB,EAAapD,KAAK7E,IACpByG,EAAqB/gB,OACrBsiB,EAAiBtiB,QAEfwiB,EAA4B,GAEhC,IAAKhjB,EAAI,EAAGA,EAAI+iB,IAAc/iB,EAC5BgjB,EAA0B9iB,KAAK4iB,EAAiB9iB,IAGlD,IAAKA,EAAI,EAAGA,EAAI+iB,IAAc/iB,EAC5BgjB,EAA0BhjB,IAAMuhB,EAAqBvhB,GAEvD,OAAOgjB,EAGF,SAASC,EAAqBC,GAKnC,OAJqBC,OAAOC,OAAOF,GAChCG,QAAO,SAACC,GAAD,OAASA,EAAIrpB,MAAQ,KAC5BmiB,MAAM,GAEWmH,MAAK,SAAUvf,EAAGwf,GACpC,OAAOxf,EAAE/J,MAAQupB,EAAEvpB,SAIhB,SAAS+U,EAAuByU,EAAMzpB,EAAK0J,GAChD,IAAIggB,EAAQP,OAAOC,OAAOK,GAAME,MAAK,SAACL,GAAD,OAASA,EAAItpB,MAAQA,KAG1D,OAFyB0pB,OAAXze,IAAVye,EAA6B,GACpBA,EAAM3pB,MAAM2J,GAIpB,SAASkgB,EAAuBH,EAAMnyB,GAE3CA,EAAOA,EAAKuyB,MAAM,KAAKC,KAAK,IAAID,MAAM,QAAKC,KAAK,IAKhD,IAAIJ,EAAQP,OAAOC,OAAOK,GAAME,MAC9B,SAACL,GAAD,OACEA,EAAIvpB,MAAMpJ,GAAGkzB,MAAM,KAAKC,KAAK,IAAID,MAAM,QAAKC,KAAK,KAAOxyB,GACxDgyB,EAAIvpB,MAAMlJ,GAAGgzB,MAAM,KAAKC,KAAK,IAAID,MAAM,QAAKC,KAAK,KAAOxyB,KAI5D,OAFyBoyB,OAAXze,IAAVye,EAA6B,EACpBA,EAAM1pB,IAId,SAAS+pB,EAA0BpkB,EAAW6e,GACnD,IAAIwF,EAAa,EAKjB,OAJArkB,EAAUskB,OAAOC,SAAQ,SAACC,GACpBA,EAAQ5U,kBAAoBiP,IAAKwF,GAAcG,EAAQrC,cAGtDkC,EAGF,SAASI,EAAiBX,GAC/B,IAAIY,EAAM,GAIV,OAHAlB,OAAOC,OAAOK,GAAMS,SAAQ,WAC1BG,EAAInkB,MAAK,MAEJmkB,EAGF,SAASC,EAAuBC,EAAU/F,GAC/C,IAAIgG,EAAQ,EAKZ,OAJAD,EAASN,OAAOC,SAAQ,SAACC,GACnBA,EAAQ/U,eAAiBoP,IAAKgG,GAASL,EAAQrC,cAG9C0C,EAGF,SAASC,EAAsBF,EAAU/F,GAC9C,IAAIgG,EAAQ,EAKZ,OAJAD,EAAS/C,WAAW0C,SAAQ,SAACC,GACvBA,EAAQ1C,cAAgBjD,IAAKgG,GAASL,EAAQrC,cAG7C0C,EAGF,SAASE,EAAUzvB,EAAQ0vB,GAEhC,IAAM1W,EAAMhZ,EAAQ7H,MAAcuL,IAE9BisB,EAAS,GAET,GAAG3vB,EAAQuL,OAAS,EAGlB,IADA,IAAM0N,EAAMjZ,EAAQ5H,MAAcsL,IACzBqH,EAAI,EAAGA,EAAI2V,WAAWgP,EAAK,GAAI3kB,IACtC4kB,EAAS1kB,KAAKiO,SAASF,EAAKjO,GAAK,IAAMmO,SAASD,EAAKlO,SAIvD,IAAK,IAAIA,EAAI,EAAGA,EAAI2V,WAAWgP,EAAK,GAAI3kB,IACtC4kB,EAAS1kB,KAAKiO,SAASF,EAAKjO,IAGhC,OAAO4kB,EAIN,SAAeC,EAAtB,wC,4CAAO,WAAuCllB,EAAW6e,EAAKrR,EAAQQ,GAA/D,qBAAA3J,EAAA,sDAGDggB,EAAa,EAEbc,EAAUnlB,EAAUskB,OAAOZ,QAC7B,SAACC,GAAD,OAASA,EAAI/T,kBAAoBiP,KACjCpC,MAAM,GAKCpc,EAAI,EAZR,YAYWA,EAAI8kB,EAAQtkB,QAZvB,iCAacukB,EAAW5X,EAAQ2X,EAAQ9kB,GAAGmE,GAAIwJ,GAbhD,YAcU1I,KADTsI,EAbD,UAeDyW,GAAczW,GAfb,SAYiCvN,EAZjC,gDAkBEgkB,GAlBF,6C,+BAqBQe,E,kFAAf,WAA0B5X,EAAQhJ,EAAIwJ,GAAtC,eAAA3J,EAAA,sEACmBghB,YAAsB7X,EAAQhJ,GADjD,eAEec,KADTsI,EADN,gCAG8CtI,IAAtCsI,EAAKpf,KAHb,yCAIaof,EAAKpf,KAA6Byf,cAAcD,IAJ7D,4C,sBAWS,SAASsX,IAEd,MAAM,CACJC,YAAY,CAAClQ,MAAM,KAAMC,KAAM,EAAEE,KAAM3nB,KAAkB6nB,UAAU,EAAOC,KAAI,EAAMR,aAAY,GAChGqQ,YAAY,CAACnQ,MAAMjoB,IAAYq4B,EAAQ,KAAqBA,EAAQ,KAAyDnQ,KAAM,EAAEE,KAAM3nB,KAAkB6nB,UAAU,EAAOC,KAAI,EAAMR,aAAY,IAMnM,SAASuQ,EAAuBpwB,EAASqwB,GAC9C,OACErwB,EAAQ7H,MAAcm4B,QACnB,EAAItwB,EAAQ7H,MAAco4B,WAAa,KAC1CvwB,EAAQqwB,GAAOC,QAAU,EAAItwB,EAAQqwB,GAAOE,WAAa,KAItD,SAASC,EAAexwB,GAC7B,IAAMywB,EAAY7mB,KAAOzC,OAAOpC,IAC5B2rB,EAAY1wB,EAAQouB,QAAO,SAACuC,GAAD,OAAOA,EAAEC,YAAcH,KACtD,OAAI34B,SAAiCkY,IAAd0gB,GAAgD,IAArBA,EAAUnlB,QACnDzT,UAAJ,EAGA,SAAS+4B,EAA4B7wB,GAC1C,IAAI8wB,EAAS,EACTC,EAAS,EACTC,EAAQ,EACNC,EAAYrnB,KAAO1C,OAAOnC,IAC5B2rB,EAAY1wB,EAAQouB,QAAO,SAACuC,GAAD,OAAOA,EAAEC,YAAcK,KACtD,QAAkBjhB,IAAd0gB,GAA2BA,EAAUnlB,OAAS,EAAG,CACnDulB,EAASJ,EAAUQ,QAAO,SAAUC,EAAMC,GACxC,OAAOD,EAAKztB,IAAM0tB,EAAK1tB,IAAMytB,EAAOC,KACnC1tB,IAEHqtB,EAASL,EAAUQ,QAAO,SAAUC,EAAMC,GACxC,OAAOD,EAAKE,cAAgBD,EAAKC,cAAgBF,EAAOC,KACvDC,cAEH,IAAIC,EAAYZ,EAAUQ,QAAO,SAAUC,EAAMC,GAC/C,OAAOD,EAAKztB,IAAMytB,EAAKE,cAAgBD,EAAK1tB,IAAM0tB,EAAKC,cAAgBF,EAAOC,KAEhFJ,EAAMM,EAAUD,cAAcC,EAAU5tB,SAKxCqtB,EAAO/wB,EAAQ,GAAGqxB,cAClBP,EAAO9wB,EAAQ,GAAG0D,IAClBstB,EAAMhxB,EAAQ,GAAGqxB,cAAcrxB,EAAQ,GAAG0D,IAE5C,MAAO,CACL6tB,cAAeR,EACfS,gBAAiBR,EACjBS,YAAaX,GAIV,SAASY,EACd1xB,EACA2xB,EACAjC,EACAkC,EACApE,EACAqE,GAEA,IAAIlwB,EAAU,EACVmwB,EAAa,EACbC,EAAY,EACZC,EAAa,EACbC,EAAc,EAElB,GAAIL,EAAermB,OAAS,EAAG,CAC7BumB,EAAazM,EAAYuM,EAAen3B,KAAoBy3B,MAAOL,EAAarjB,UAChFujB,EAAa1M,EAAYuM,EAAel3B,KAAiBw3B,MAAOL,EAAarjB,UAC7EyjB,EAAe5M,EAAYuM,EAAej3B,KAAgBu3B,MAAOL,EAAarjB,UAC9E,IAAMif,EAAQ/M,WAAW2E,EAAYqK,EAAGyC,MAAON,EAAarjB,WAE5D7M,EACEgwB,IAAiBl3B,IACbq3B,EACAH,IAAiBj3B,IACjBq3B,EACAJ,IAAiB/2B,IACjB0yB,EACAyE,EACEvE,EACAqE,EAAa7zB,QAEbyvB,EACA,GAEFwE,EAEND,OACoBhiB,IAAlBwd,EACIF,EACAyE,EACEvE,EACAqE,EAAa7zB,QACbyvB,EACA,GAEF9rB,EAIR,GAAI6uB,EAAexwB,KAAahI,IAAW,CACzC,IAAIo6B,EAAqBvB,EAA4B7wB,GAMrD,OALAoyB,EAAmBC,cAAgBP,EACnCM,EAAmBE,mBAAqBR,EACxCM,EAAmBG,kBAAoBT,EACvCM,EAAmBI,mBAAqBV,EACxCM,EAAmBK,mBAAqBX,EACjCM,EAEP,IAEIM,EAFA5E,EAAa,GACb6E,EAAe,EAInB,GAAI36B,IAEF,GAAoB,IAAjBgI,EAAQuL,OAEXonB,GADA7E,EAAa4B,EAAG9kB,OAAS5K,EAAQ7H,MAAcuL,IAAM,GACzB1D,EAAQ7H,MAAcuL,IAClDgvB,EAAU1yB,EAAQ7H,MAAcuL,QAGhC,CACE,IAAMotB,EAAOpG,KAAK7E,IAAI7lB,EAAQ7H,MAAcuL,IAAK1D,EAAQ5H,MAAcsL,KAEvEivB,GADA7E,EAAa4B,EAAGyC,MAAQrB,EAAS,GACLA,EAC5B4B,EAAU5B,OAGH9wB,EAAQuL,OAAS,GAU1BonB,GARA7E,EACE6D,IAAiBl3B,IACbuF,EArBQ,GAqBSqxB,cACjBM,IAAiBj3B,IACjBg1B,EAAGkD,OAAS5yB,EAvBJ,GAuBqB0D,IAC7BiuB,IAAiBr2B,IACjBo0B,EAAGyC,MAAQnyB,EAzBH,GAyBoB0D,IAAM,EAClC,KACsB1D,EA3Bd,GA2B+B0D,IAC7CgvB,EAAU1yB,EA5BI,GA4Ba0D,MAE3BgvB,EAAU1yB,EAAQ7H,MAAcuL,IAChCivB,EAAe,GAEjB,MAAO,CACLpB,cAAezD,EACf0D,gBAAiBmB,EACjBlB,YAAaiB,EACbL,cAAe1wB,EACf2wB,mBAAoBR,EACpBS,kBAAmBR,EACnBS,mBAAoBR,EACpBS,mBAAoBR,GAKnB,SAASY,EACdhB,EACAiB,EACArkB,EACAskB,EACAC,EACAC,EACAZ,EACAh2B,GAEA,IAAM62B,EAAkB9iB,IAAW3B,GAC7B0b,EAAuB,OAAT1b,EAAgB,IAAM,IACpCwc,EAAqB,OAATxc,EAAgB,IAAM,IAElC0kB,EAAmB,OAAT1kB,EAAgB,GAAK,IAC/B2kB,EAAmB,OAAT3kB,EAAgB,IAAM,GAElC4kB,EACFxB,EAAaF,eAAiBl3B,IAC1Bu4B,EACGD,EAAY,EAAEG,EAAgB1iB,qBAAqB0iB,EAAgBziB,qBACpEyiB,EAAgB5iB,YAClBuhB,EAAaF,eAAiBh3B,IAC9Bu4B,EAAgB7iB,YAChB6iB,EAAgB3iB,cAkCtB,OAhCIyT,IAAiBiI,gBAAgB,OAAyB,IAAhB8G,EAAmBM,EAASH,EAAgBviB,YACjFqiB,EACPK,IACGJ,EACDC,EAAgBxiB,MAChB,KAAOyiB,EACPrI,EACEzF,EAAYgN,EAAe5jB,GAC3B,EACA0b,EACAc,GACAmI,EACGvB,EAAaF,eAAiBh3B,IACrC04B,IACGP,EACD,MAAQK,EACRrI,EACEzF,EAAYgN,EAAe5jB,GAC3B,EACA0b,EACAc,GACCmI,EAELC,GACE,KAAOF,EACPrI,EACEzF,EAAYgN,EAAe5jB,GAC3B,EACA0b,EACAc,GACCmI,EACM,KAAT/2B,QAAwB2T,IAAT3T,GAAsBA,IAASwD,KAAO4O,GAAMpN,UAASgyB,GAAU,MAAQh3B,EAAO,KAC1Fg3B,EAGF,SAASC,EAAQj3B,EAAKoS,GAC3B,MAAe,KAATpS,QAAwB2T,IAAT3T,GAAsBA,IAASwD,KAAO4O,GAAMpN,SAAYhF,IAASwD,KAAO4O,GAAMtN,MAAe,KAAO9E,EAAO,IACpH,GAGP,SAASkuB,EAAUzlB,EAAM2J,GAY9B,OARgC,OAATA,EAAgB,IAAM,IAC7Cqc,EACEhmB,EACA,EAN2B,OAAT2J,EAAgB,IAAM,IACf,OAATA,EAAgB,IAAM,MAQ5B,OAATA,EAAgB,GAAK,KAOnB,SAAS8kB,EACdrzB,EACAszB,EACAC,EACAnH,EACA7d,EACAgf,GAEA,IAAMiG,EAAa,CACjBC,YAAY,EACZC,qBAAqB,EACrB7jB,MAAO,CACL+R,SAAS,EACT/E,SAAU,MACV8W,KAAM,GACNlkB,SAAU,GACVmkB,UAAW,QAEbC,OAAQ,CACNjS,SAAS,EACT/E,SAAU,QACViX,OAAQ,CACNF,UAAW,OACXnkB,SAAU,MAYVskB,EAAQ,0CACVC,EAA0BC,KAAKC,MAAMD,KAAKE,UAAUX,IACxDQ,EAAwBnkB,MAAM8jB,KAC5BS,IAAa7lB,GAAM8lB,gBAAkBN,EAIvC,IAAIO,EAA4BL,KAAKC,MAAMD,KAAKE,UAAUX,IAC1Dc,EAA0BzkB,MAAM8jB,KAC9BS,IAAa7lB,GAAMgmB,gBAAkBR,EASvC,IAJA,IAAIS,EAAiB,EACjBC,EAAiB,EAGZ5pB,EAAI,EAAGA,EAAI7K,EAAOqL,SAAUR,EACnC2pB,GAAkBx0B,EAAO6K,GAAG8hB,UAC5B8H,GAAkBjU,WAChB2E,EACEmO,EAAiBzoB,GAAG6pB,KAAKva,eALhB,GAKuCoT,EAAU,GAC1Dhf,IAMN,IAAMomB,EAA0B3b,SAASoT,EAAqB,IACxDwI,EAA0B5b,SAASoT,EAAqBmB,EAAU,IAIlEsH,EACJL,EAAiBG,IAA4B,EACzC,EACA3b,SACG,KACEwb,EACCG,EACApB,EAAeuB,yBAChBN,EAAiBG,GAClB,IAEJI,EACsC,IAA1CxB,EAAeuB,uBAA+B,EAAI,IAAMD,EAEtDG,EAAoB,GACpBC,EAAsB,GAC1BD,EAAkBjqB,KAChBypB,EACEG,EACApB,EAAeuB,wBACf,EACEN,EACEG,EACApB,EAAeuB,uBACjB,GAENE,EAAkBjqB,KAAKwoB,EAAeuB,wBACtCG,EAAoBlqB,KAClB0pB,EACEG,EACArB,EAAe2B,2BACf,EACET,EACEG,EACArB,EAAe2B,0BACjB,GAEND,EAAoBlqB,KAAKwoB,EAAe2B,2BAExC,IAAMC,EACJV,EAAiBG,IAA4B,EACzC,EACA5b,SACG,KACEyb,EACCG,EACArB,EAAe2B,4BAChBT,EAAiBG,GAClB,IAEJQ,EACJ7B,EAAe2B,0BACbT,EACAG,IACF,EACI,EACA,IAAMO,EAiCZ,MAAO,CACLE,qBA/ByB,CACzBvB,OAAQ,CAENM,IAAa7lB,GAAM+mB,eAAiB,KAAOT,EAAe,KAAOd,EACjEK,IAAa7lB,GAAMgnB,eAAiB,KAAOR,EAAa,KAAOhB,GAEjEyB,SAAU,CACR,CAEEpd,KAAM4c,EAENS,gBAAiB,CAAC,UAAW,cAqBjCC,uBAjB6B,CAC7B5B,OAAQ,CAENM,IAAa7lB,GAAM+mB,eAAiB,KAAOH,EAAkB,KAAOpB,EACpEK,IAAa7lB,GAAMgnB,eAAiB,KAAOH,EAAgB,KAAOrB,GAEpEyB,SAAU,CACR,CAEEpd,KAAM6c,EAENQ,gBAAiB,CAAC,UAAW,cAOjCzB,wBAAyBA,EACzBM,0BAA2BA,GAIxB,SAASqB,EAAsBnrB,EAAWqW,EAAaR,GAC5D,IAAM9R,EAAO/D,EAAUqB,cAAc,GAAGyC,SAClC4R,EAC+C,OAAjD1V,EAAUqB,cAAc,GAAGkkB,YAAYlQ,OACvCrV,EAAUqB,cAAc,GAAGkkB,YAAY7P,SACrC8P,OACuClgB,IAA3CtF,EAAUqB,cAAc,GAAGmkB,YACvBp4B,IACEq4B,EAAQ,KACRA,EAAQ,KACVzlB,EAAUqB,cAAc,GAAGmkB,YAAYnQ,MACvC+V,EAAWpL,KAAKhF,IACbqQ,IAAkBC,IAAzB,IACAtL,KAAK7E,IACIkQ,IAAkBC,IAAzB,IAEGD,IAAkBC,IADpB,IAECtrB,EAAUqB,cAAc,GAAGkkB,YAAY/P,KACvC3nB,OAGA09B,EACJvrB,EAAUqB,cAAc,GAAGkkB,YAAY/P,KAAO,EAC9CxV,EAAUqB,cAAc,GAAGkkB,YAAYjQ,KACvC8V,EAAW,EACPI,EAAQ9V,GACZ,kBAAC,IAAD,CACEL,MAAOrV,EAAUqB,cAAc,GAAGkkB,YAAYlQ,MAC9CF,aAAa,EACbK,KAAM4V,EACN7V,UAAWgW,EACX1wB,GAAI5M,OAGF0nB,EAAI3V,EAAUqB,cAAc,GAAGkkB,YAAY5P,IAwCjD,MAAO,CAELyV,SAAUA,EACVG,SAAUA,EACVE,QAAS9V,EAAI6V,EAAK,GAClBE,WAAa/V,EAAS,GAAL6V,EACjBG,iBAzCArmB,IADkBtF,EAAUqB,cAAc,GAAGkkB,YAAYlQ,OAEzD,kBAAC,IAAD,CACEA,MAAOrV,EAAUqB,cAAc,GAAGkkB,YAAYlQ,MAC9CF,aAAa,EACbK,KAAMxV,EAAUqB,cAAc,GAAGkkB,YAAY/P,KAC7CD,UAAWvV,EAAUqB,cAAc,GAAGkkB,YAAYjQ,KAClDI,SAAU1V,EAAUqB,cAAc,GAAGkkB,YAAY7P,SACjDC,IAAK3V,EAAUqB,cAAc,GAAGkkB,YAAY5P,IAC5CU,YAAaA,EACbR,YAAaA,EACb0B,WAAqB,OAATxT,EAAgB,gBAAkB,2BAC9ClJ,GAAI7M,KACJ8V,SAAUC,IA8BZ6nB,OA1BA,6BACA,kBAAC,IAAD,CACEvW,MAAOmQ,EACPrQ,aAAa,EACbK,KAAM3nB,KACN0nB,UAAW,EACXM,YAAaA,EAEb0B,WAAqB,OAATxT,EAAgB,uBAAyB,0CACrDD,SAAUC,EACV4R,KAAK,EACL9a,GAAIzN,IAAaW,KAAmBD,KACpCwoB,UAAWlpB,IACTq4B,EAAQ,KACRA,EAAQ,SA5rChBoG,EAAOC,QAEFxQ,UAAUyQ,WAAazQ,UAAUyQ,UAAU,IAC5CzQ,UAAUxX,UACVwX,UAAU0Q,cAETlR,WACA0B,QAAQ,OAAS,I,4tEC/BTyP,EAAb,kDACE,WAAY/nB,GAAQ,IAAD,8BACjB,cAAMA,IACDO,MAAQ,CACXC,KAAM,EAAKR,MAAMqB,SAAS4M,iBAC1BxgB,KAAM,GACNqsB,UAAU,GALK,EADrB,6DAWE,SAA0BnZ,GACpBA,IAAcC,KAAKZ,OAErBY,KAAKH,SAAS,CACZD,KAAMG,EAAUU,SAAS4M,qBAfjC,oBAoBE,WAEE,IAAM+Z,EAAQC,YAAe,CAC3BC,WAAY,CACVC,WAAY,iBACZpnB,SAAU,GACVkL,MAAO,SAIX,OAIJ,kBAACmc,EAAA,EAAD,CAAK7Z,MAAM,OAAOqL,OAAQ,EAAGyO,YAAcznB,KAAKZ,MAAMqB,SAAS6M,iBAAkBoa,aAAc,GACvF,kBAACC,EAAA,EAAD,SAAO,kBAACC,EAAA,EAAD,KACP,kBAACC,EAAA,EAAD,CAAeT,MAAOA,GACpB,kBAACU,EAAA,EAAD,CAAYzc,MAAM,cAAc0c,UAAU,KACnC/nB,KAAKZ,MAAMqB,SAAS0M,kBAtCrC,GAAqCxM,aCExBqnB,EAAb,kDACC,WAAY5oB,GAAQ,IAAD,8BAClB,cAAMA,IAoBP6oB,UAAY,WACX,EAAKpoB,SAAS,CAAED,MAAO,EAAKD,MAAMC,YACFY,IAA5B,EAAKpB,MAAM8oB,gBAA2B,EAAK9oB,MAAM8oB,kBAvBnC,EA0BnBC,UAAY,WACC7U,SAASC,eAAe,EAAKnU,MAAMqB,SAASyM,QAClDkb,UAAUC,OAAO,QAEtB,EAAKjpB,MAAM8oB,iBACX,EAAKI,UAAW,GA7BjB,EAAK3oB,MAAQ,CACZC,KAAM,EAAKR,MAAMqB,SAAS4M,kBAE3B,EAAKib,UAAW,EALE,EADpB,qDASC,WACKtoB,KAAKZ,MAAMgO,WAAarC,MAG3B/K,KAAKmoB,UAAU,GACfnoB,KAAKsoB,UAAW,KAdnB,uCAkBC,SAA0BvoB,GACzBC,KAAKH,SAAS,CAAED,KAAOI,KAAKZ,MAAMqB,SAAS4M,qBAnB7C,oBAqCC,WAAU,IAAD,EACFE,EAAWvN,KAAKZ,MAAMqB,SAAS8M,SAY/Bgb,QAL2B/nB,IAAb+M,IACJA,EAASC,WAA8BD,EAASE,UAAyBF,EAASI,OAInF3N,KAAKZ,MAAMqB,SAAS2M,WAAapC,IAAgB2V,EAAQ,KAAyB3gB,KAAKZ,MAAMqB,SAAS2M,WAAanC,IAAY,GAAKjL,KAAKZ,MAAMqB,SAAS2M,WAAalC,IAA0ByV,EAAQ,KAAiC3gB,KAAKZ,MAAMqB,SAAS2M,WAAajC,IAAqBwV,EAAQ,KAA4BA,EAAQ,MAEnV6H,GAA6B,IAApBxoB,KAAKL,MAAMC,KAAgB,SAAW,QAI/C4N,EAAWD,EAASC,WACpBC,EAAUF,EAASE,UACnBE,EAAMJ,EAASI,MAGf8a,GAFOlb,EAASM,YAEUrN,IAApBR,KAAKZ,MAAMspB,OAAmB,EAAE1oB,KAAKZ,MAAMspB,QAIvD,OACC,yBAAMpoB,UAAWkoB,EAAQtoB,MAAO,CAAEE,MAAO,QAASuN,MAAO,OAAQE,OAAQ,SAAY,6BACnF7N,KAAKZ,MAAMgO,WAAarC,KAAsB/K,KAAKZ,MAAMqB,SAAS2M,WAAanC,KAAa,yBAAK0d,aAAc3oB,KAAKioB,UAAWW,aAAc5oB,KAAKioB,UAAW5nB,QAASL,KAAKioB,UAAWvoB,GAAI,OAAQmpB,IAAI,OAAO1V,IAAKoV,EAAQroB,MAnB/M,CAAEwS,YAAa,MAAO7E,OAAQ,WAuB1C,yBAAK3N,OAAK,GAAGqN,SAAS,WAAYE,UAAW,OAAnC,0BAAmDA,GAAnD,2BAA2ED,GAA3E,sBAA8FG,GAA9F,uBAA6G8a,GAA7G,IAAV,MAAkI,0BAAME,aAAc3oB,KAAKioB,UAAWW,aAAc5oB,KAAKioB,UAAY5nB,QAASL,KAAKioB,YAAiC,IAApBjoB,KAAKL,MAAMC,MAAiB,kBAAC,EAAD,CAAkBa,SAAUT,KAAKZ,MAAMqB,kBAvEvS,GAA0BE,c,qYCFbmoB,EAAY,YACZC,EAAQ,QAERC,EAAS,SACTC,EAAO,OA4BP1C,EAAkB,IAElB2C,EAAS,SAACC,GACrB,OAAa,GAANA,GAGIC,EAAS,SAACC,GACrB,OAAQA,EAAK,GAAM,IAkBR7C,EAAc,GAKd8C,EAAb,kDACE,WAAYlqB,GAAQ,IAAD,8BACjB,cAAMA,IAKRmqB,SAAW,SAACC,EAASrI,EAAGsI,EAAGC,EAAGC,GAC5B,GAAiB,OAAb,EAAKl6B,IAAT,CACA,IAAMm6B,EAAUtW,SAASC,eAAeiW,GAClCK,EAAW,EAAKp6B,IAAIq6B,mBAAmBF,GACvCG,EAAaF,EAAShc,OAAS6b,EAAKG,EAASlc,MAC/Coc,EAAYJ,EACdD,EAAKG,EAASlc,MAAQgc,EAAKE,EAAShc,OAC/B8b,EAAII,EACX,EAAKt6B,IAAIu6B,SAAS1W,SAASC,eAAeiW,GA/ElC,MA+EiDrI,EAAGsI,EAAGC,EAAGC,KAdjD,EAiBnBM,qBAAuB,SAACT,EAASrI,EAAGsI,EAAGC,EAAGQ,GACxC,GAAiB,OAAb,EAAKz6B,IAAT,CACA,IAAIm6B,EAAUtW,SAASC,eAAeiW,GAEtC,GAAgB,OAAZI,EACF,IACE,IAAMC,EAAW,EAAKp6B,IAAIq6B,mBAAmBF,GAGzCG,EAAaF,EAAShc,OAAS6b,EAAKG,EAASlc,MAejD,OAbIoc,EAAYG,IACV/I,EAAIuI,EAAK,EAAIR,EApCR,KAoC8B,EACrC/H,GAAKuI,EAAKA,EAAIQ,EAAaH,EACpB5I,EAAKuI,EAAIQ,EAAaH,EAAY,EAAIb,EAtCtC,KAsC2D,IAClE/H,GAAKuI,EAAI,EAAKA,EAAIQ,EAAaH,EAAY,GAK7CL,GAAKQ,EAAYH,EACjBA,EAAYG,GAEd,EAAKz6B,IAAIu6B,SAASJ,EAzGd,MAyG4BzI,EAAGsI,EAAGC,EAAGK,IAClC,EACP,MAAOI,GACP,OAAO,KA3CM,EAgDnBC,eAAiB,SAAC1qB,EAAI2qB,EAAW9Z,EAAO+Z,EAAWzZ,GAChD,IAAML,EACK,OAAVD,QAA4B/P,IAAV+P,EACd,EAzG8B,IA0G7BA,EAAMC,KAA2B,IAgBxC,OAfe,EAAKyZ,qBAClBvqB,EACAwpB,EAAOmB,EAAY,EAAI7Z,GACvB0Y,EACEoB,EACIzZ,EACE,KACA0Z,OACF1Z,EACA,IACA0Z,QAENrB,EAAQ,KAAO3Y,EAAMG,KAAQ,KAC7BwY,EAAOoB,GAAazZ,EAAM,KAA0B0V,KAlErC,EAuEnBiE,SAAW,SAACC,EAAatJ,EAAGsI,EAAGC,EAAGC,GAChC,GAAiB,OAAb,EAAKl6B,IAAT,CAEA,IAEIi7B,EAAmBpX,SAASC,eAAekX,GAC3CE,EAAgB,KAEK,OAArBD,GAEsE,IAAtEA,EAAiBE,uBAPK,0BAOqC7uB,SAE3D4uB,EAAgBD,EAAiBE,uBATX,0BAWpB,IAEN,IAAIC,EAAUF,EAAcG,YAEZ,OAAZD,GAAkB,EAAKp7B,IAAIu6B,SAASa,EAAS,OAAQ1J,EAAGsI,EAAGC,EAAGC,KAzFjD,EA4FnBoB,UAAY,SAACC,EAAU7J,EAAGsI,EAAGC,EAAGC,GAC9B,GAAiB,OAAb,EAAKl6B,IAAT,CAEA,IAAIk7B,EAAgB,KAChBE,EAAU,KAIQ,QAFtBF,EAAgBrX,SAASC,eAAeyX,MAEZH,EAAUF,EAAcG,aAEpC,OAAZD,GAAkB,EAAKp7B,IAAIu6B,SAASa,EAAS,OAAQ1J,EAAGsI,EAAGC,EAAGC,KAtGjD,EAyGnBsB,QAAU,SAACxQ,GACQ,OAAb,EAAKhrB,KAET,EAAKA,IAAIy7B,QAAQ,GAAIzQ,IA5GJ,EA+GnB0Q,OAAS,WACU,OAAb,EAAK17B,MAET,EAAKA,IAAM,IAAI27B,IAAM,CACnB/Q,YAxLW,WAyLXgR,KAxLK,KAyLLlV,OAxLS,aAmEM,EAyHnBmV,UAAY,WACV,OAAO,EAAKC,WA1HK,EA6HnBD,UAAY,SAACC,GACX,EAAKA,UAAYA,GA9HA,EAiInBC,KAAO,WACL,GAAiB,OAAb,EAAK/7B,MAEc,IAAnB,EAAK87B,UAAT,CAEA,IAOIpK,EACAsI,EAIJ,IATA,EAAKh6B,IAAIg8B,YAAY,IACrB,EAAKh8B,IAAIi8B,QAAQ5C,EAAWE,GAC5B,EAAKv5B,IAAIk8B,aAAa,EAAM,IAAM,GAKlC,EAAKl8B,IAAI40B,KAAK,IAAK,EAVD,IAYblD,EAAI,EAAGA,GAAK,EAAGA,IAAK,EAAK1xB,IAAI40B,KAAK,GAAKlD,EAAG+H,EAAO/H,GAZpC,IAclB,IAAKsI,EAAI,EAAGA,GAAK,GAAIA,IAAK,EAAKh6B,IAAI40B,KAAK,GAAKoF,EAAG,EAAGP,EAAOO,IAE1D,IAAKtI,EAAI,IAAMA,GAAK,IAAKA,GAAK,IAC5B,IAAKsI,EAAI,IAAMA,GAAK,GAAIA,GAAK,IAC3B,EAAKh6B,IAAI40B,KAAK,IAAK6E,EAAO/H,GAAI+H,EAAOO,IAIzC,IAFA,EAAKh6B,IAAIi8B,QAAQ5C,EAAWG,GAC5B,EAAKx5B,IAAIg8B,YApBe,IAqBnBtK,EAAI,EAAGA,GAAK,EAAGA,GAAK,EACvB,IAAKsI,EAAI,EAAGA,GAAK,GAAIA,GAAK,EAAG,EAAKh6B,IAAI40B,KAAK,IAAK6E,EAAO/H,GAAI+H,EAAOO,IAE9C,OAAlB,EAAKtpB,UAAmB,EAAK1Q,IAAIg8B,YAAY,EAAKtrB,UAGnC,OAAjB,EAAKyrB,SACc,OAAnB,EAAKC,WACa,OAAlB,EAAKC,UAEL,EAAKr8B,IAAIk8B,aAAa,EAAKC,QAAS,EAAKC,UAAW,EAAKC,UAErC,OAAlB,EAAKC,UAAwC,OAAnB,EAAKC,WACjC,EAAKv8B,IAAIi8B,QAAQ,EAAKK,SAAU,EAAKC,aAzKtB,EA4KnBC,cAAgB,SAAC5H,EAAMlD,EAAGsI,EAAGC,GAC3B,GAAiB,OAAb,EAAKj6B,IAAT,CAEA,IAAIy8B,EAEJA,EAAY,EAAKz8B,IAAI08B,gBAAgB9H,EAAMqF,EAAG,CAC5CqC,SAAU,EAAKA,SACf5rB,SAAU,EAAKA,WAGjB,EAAK1Q,IAAI40B,KAAK6H,EAAW/K,EAAGsI,KAtLX,EAyLnB2C,SAAW,SAACjL,EAAGsI,EAAGC,GAChB,EAAKj6B,IAAI48B,KAAKlL,EAAGsI,EAAGtI,EAAIuI,EAAGD,IA1LV,EA6LnB6C,MAAQ,WACN,EAAK78B,IAAM,MA9LM,EAiMnB88B,QAAU,SAACR,EAAUC,GACF,OAAb,EAAKv8B,MAET,EAAKA,IAAIi8B,QAAQK,EAAUC,GAE3B,EAAKD,SAAWA,EAChB,EAAKC,UAAYA,IAvMA,EA0MnBQ,YAAc,SAACrsB,GACI,OAAb,EAAK1Q,MAET,EAAKA,IAAIg8B,YAAYtrB,GAErB,EAAKA,SAAWA,IA/MC,EAkNnBssB,KAAO,SAACC,GACW,OAAb,EAAKj9B,KAET,EAAKA,IAAIO,KAAK08B,IArNG,EAwNnBC,aAAe,SAACC,EAAKC,EAAOC,GACT,OAAb,EAAKr9B,MAET,EAAKA,IAAIk8B,aAAaiB,EAAKC,EAAOC,GAElC,EAAKlB,QAAUgB,EACf,EAAKf,UAAYgB,EACjB,EAAKf,SAAWgB,IA/NC,EAkOnBC,aAAe,SAACH,EAAKC,EAAOC,GACT,OAAb,EAAKr9B,MAET,EAAKA,IAAIu9B,aAAaJ,EAAKC,EAAOC,GAElC,EAAKG,QAAUL,EACf,EAAKM,UAAYL,EACjB,EAAKM,SAAWL,IAzOC,EA4OnBM,WAAa,WAMX,OADW,EAAK39B,IAAI49B,OAAO,YAjPV,EAoPnBC,UAAY,SAACnM,EAAGsI,EAAGC,EAAGC,GACH,OAAb,EAAKl6B,KAET,EAAKA,IAAI89B,YAAYpM,EAAGsI,EAAGC,EAAGC,EAAG,EAAG,EAAG,MAvPtB,EA0PnB6D,UAAY,SAACnJ,GAIX,IAHA,IAAIoJ,EAAYpJ,EAAKjF,MAAM,KACvBsO,EAAW,EAENnyB,EAAI,EAAGA,EAAIkyB,EAAU1xB,OAAQR,IACpCmyB,EAAWxS,KAAKhF,IAAIwX,EAAU,EAAKj+B,IAAIk+B,aAAaF,EAAUlyB,KAEhE,OAAOmyB,EAAW,IAjQD,EAmQnBE,mBAAqB,SAACvJ,EAAM1W,GAG1B,IAFA,IAAI8f,EAAY,EAAKh+B,IAAI08B,gBAAgB9H,EAAM6E,EAAOvb,IAClD+f,EAAW,EACNnyB,EAAI,EAAGA,EAAIkyB,EAAU1xB,OAAQR,IACpCmyB,EAAWxS,KAAKhF,IAAIwX,EAAU,EAAKj+B,IAAIk+B,aAAaF,EAAUlyB,KAEhE,OAAOmyB,EAAW,IAzQD,EA4QnBG,gBAAkB,SAACJ,GAEjB,IADA,IAAIC,EAAW,EACNnyB,EAAI,EAAGA,EAAIkyB,EAAU1xB,OAAQR,IACpCmyB,EAAWxS,KAAKhF,IAAIwX,EAAU,EAAKj+B,IAAIk+B,aAAaF,EAAUlyB,KAEhE,OAAOmyB,EAAW,IAjRD,EAoRnBI,SAAW,SACTC,EACAC,EACA7M,EACAsI,EACA9K,EACA9Q,EACAogB,EACAC,EACAC,EACA5tB,GAEA,IA0CIhF,EACA6yB,EAzCEC,EAAO1P,EAAO5iB,OAChBuyB,EAAQ7E,EAAI5b,EAAS,EAAI,IAEzB8b,EAAI9b,EACR,IAAKtS,EAAI,EAAGA,GAAK8yB,EAAM9yB,IAAK,CAExB,EAAK9L,IAAIk+B,aAAahP,EAAOpjB,EAAI,IAAM,EAAI2tB,EAAO+E,EAAO1yB,EAAI,KAC7DouB,EAAIzY,WARU,IAQarD,IAG3B8b,EAXc,IAWE9b,EAChBygB,EAAQ7E,EAAI5b,EAAS,EAAI,KAEzB,EAAKpe,IAAIk+B,aAAahP,EAAOpjB,EAAI,IAAM2tB,EAAO+E,EAAO1yB,EAAI,KACzDouB,EAAIzY,WAhBU,KAgBarD,KAG3B8b,EAnBc,KAmBE9b,EAChBygB,EAAQ7E,EAAI5b,EAAS,EAAI,KAE3B,IAAI0gB,OAAO,EACP5E,EAAI9b,IACN0gB,EAAU,EAAK9+B,IAAI08B,gBACjBxN,EAAOpjB,EAAI,GACX2tB,EAAO+E,EAAO1yB,EAAI,GAAK,MAIX,IAAVgF,IACEguB,EAAQxyB,OAAS,GAAK4tB,EAAIzY,WA9BlB,IA8ByCrD,GACnD8b,EA/BU,IA+BM9b,EACT0gB,EAAQxyB,OAAS,GAAK4tB,EAAIzY,WAjCvB,KAiC8CrD,KACxD8b,EAlCU,KAkCM9b,GAClBygB,EAAQ7E,EAAI5b,EAAS,EAAI,MAK/B,EAAK8e,aAAaqB,EAAU,GAAIA,EAAU,GAAIA,EAAU,IAIxD,IAAIQ,EAAKrN,EACT,IAAK5lB,EAAI,EAAGA,GAAK8yB,EAAM9yB,IAAK,CAE1B,IAAIgzB,OAAO,EACP5E,EAAI9b,EACN0gB,EAAU,EAAK9+B,IAAI08B,gBACjBxN,EAAOpjB,EAAI,GACX2tB,EAAO+E,EAAO1yB,EAAI,GAAK,MAGzBgzB,EAAU5P,EAAOpjB,EAAI,QACPiF,IAAV2tB,QACmB3tB,IAAjB2tB,EAAM5yB,EAAI,IACS,IAAjB4yB,EAAM5yB,EAAI,KAAU6yB,GAAa,IAI3C,EAAKrB,aAAagB,EAAK,GAAIA,EAAK,GAAIA,EAAK,IACzC,EAAKT,UACHpE,EAAOsF,GACPtF,EAAOO,GACPP,EAAO+E,EAAO1yB,EAAI,GAAK,IACvB2tB,EAAOS,IAELuE,IACF,EAAKz+B,IAAIg/B,aAAa,IAAK,IAAK,KAChC,EAAKh/B,IAAIi/B,KACPxF,EAAOsF,GACPtF,EAAOO,GACPP,EAAO+E,EAAO1yB,EAAI,GAAK,IACvB2tB,EAAOS,KAGPyE,EACF,EAAKO,UACHhQ,EAAOpjB,EAAI,GACX2tB,EAAOsF,EAAK,KACZtF,EAAOoF,GACPpF,EAAO+E,EAAO1yB,EAAI,KAEjB,EAAK9L,IAAI40B,KAAKkK,EAASrF,EAAOsF,EAAK,IAAMtF,EAAOoF,IAGrDE,GAAMP,EAAO1yB,EAAI,GAYnB,OAAOouB,EAAI9b,GAnYM,EAsYnB+gB,KAAO,SAACvK,EAAMlD,EAAGsI,GACE,OAAb,EAAKh6B,KAET,EAAKA,IAAI40B,KAAKA,EAAMlD,EAAGsI,IAzYN,EA4YnBoF,WAAa,SAACxK,EAAMlD,EAAGsI,EAAGC,GACxB,GAAiB,OAAb,EAAKj6B,IAAT,CAEA,IAAIq/B,EAAK,EAAKr/B,IAAIk+B,aAAatJ,GAE/B,EAAK50B,IAAI40B,KAAKA,EAAMlD,GAAKuI,EAAIoF,GAAM,EAAGrF,KAjZrB,EAoZnBkF,UAAY,SAACtK,EAAMlD,EAAGsI,EAAGC,GACvB,GAAiB,OAAb,EAAKj6B,IAAT,CAEA,IAAIq/B,EAAK,EAAKr/B,IAAIk+B,aAAatJ,GAE/B,EAAK50B,IAAI40B,KAAKA,EAAMlD,GAAKuI,EAAIoF,GAAM,GAAKrF,KAzZvB,EA4ZnBjW,OAAS,SAACub,EAAOC,QACMxuB,IAAjBwuB,IAA4BA,EAAe,GAC/C,EAAKjC,aAld4B,IACA,IACA,KAkdjC,EAAKO,UACHpE,EAzdkC,GA0dlCA,EAzdkC,IAydR8F,GAC1B9F,EAzdkC,KA0dlCA,EAzdkC,MA4dpC,EAAKyD,aAnd4B,IACA,IACA,KAkdjC,EAAKJ,QAAQzD,EAAWE,GACxB,EAAKwD,YAzdkC,IA0dvC,EAAKqC,WACHE,EACA7F,EA3dkC,GA4dlCA,EA3dkC,IA2dR8F,GAC1B9F,EA3dkC,KA6CnB,EAkbnB+F,mBAAqB,SAACD,EAAcE,EAAYC,GAC9C,EAAKC,OAAOF,GACZ,EAAKjE,UACL,EAAKzX,OAAO2b,EAAYH,IArbP,EAwbnBI,OAAS,SAACC,GACR,EAAK1C,aA5dqB,GACA,GACA,IA2d1B,EAAKJ,QAAQxD,EAAOC,GACpB,EAAKwD,YAnekC,GAoevC,EAAKoC,KAAKS,EAAOnG,EAnemB,KAmeOA,EAleP,UAsCnB,EA+bnBoG,gBAAkB,SAACD,GACjB,EAAK1C,aAneqB,GACA,GACA,IAke1B,EAAKJ,QAAQxD,EAAOC,GACpB,EAAKwD,YA1ekC,GA2evC,EAAKoC,KAAKS,EAAOnG,EA1emB,KA0eOA,EAxeL,SAqCrB,EAidnBqG,UAAY,SAACC,EAAQjvB,GACnB,EAAK6uB,OAAOI,GACZ,EAAKvE,UACL,EAAKzX,OAAOjT,IApdK,EAudnBkvB,kBAAoB,SAACT,EAAcG,GACjC,EAAKlE,UACL,EAAKzX,OAAO2b,EAAYH,IAzdP,EA4dnBU,eAAiB,SACf3B,EACAC,EACA7M,EACAsI,EACAkG,EACA9hB,EACAogB,EACA2B,GAEA,IAAMjR,EAAS,CAACgR,GAEZC,EAEF,EAAK9B,SAASC,EAAMC,EAAW7M,EAAGsI,EAAI,GAAK9K,EAAQ9Q,EAAS,GAAK,CAAC,MAC/D,EAAKigB,SAASC,EAAMC,EAAW7M,EAAGsI,EAAG9K,EAAQ9Q,EAAQogB,IAze1D,EAAKtuB,MAAQ,GACb,EAAKlQ,IAAM,IAAI27B,IAHE,EADrB,4CAucE,SAASyE,EAAUC,EAAOC,EAAWliB,EAAQxC,GAC3CrL,KAAK+sB,aAAa1hB,EAAM,GAAIA,EAAM,GAAIA,EAAM,IAC5CrL,KAAKvQ,IAAIi/B,KACPxF,EAAO2G,GACP3G,EAAO4G,GACP5G,EAAO6G,GACP7G,EAAOrb,GACP,SA9cN,GAAyBlN,c,0MCrClB,SAASqvB,EAAe90B,EAAW+0B,GAExC,IAAIvjC,EAAMwO,EAAUQ,QAAQ,GAAGxH,IAE7BgH,EAAUa,OAAS,EACfb,EAAUQ,QAAQ9S,MAAcm4B,WAChC7lB,EAAUQ,QAAQ/S,MAAco4B,WA4BtC,OA3BI7lB,EAAUa,OAAS,GAAKb,EAAUQ,QAAQ9S,MAAcsL,IAAMxH,IAChEA,EAAMwO,EAAUQ,QAAQ9S,MAAcsL,KAS3B,CACXmH,MAmBJ,SAAkBH,GAChB,IACIK,EADAC,EAAQ,GAGZ,IAAKD,EAAI,EAAGA,EAAIL,EAAUQ,QAAQK,OAAQR,IACxCC,EAAMC,KAAK,CACTvH,IAAKgH,EAAUQ,QAAQH,GAAGrH,IAC1Bg8B,IAAKh1B,EAAUQ,QAAQH,GAAGI,OAC1Bw0B,IACEj1B,EAAUQ,QAAQH,GAAGM,YAAchB,KAAQE,OAAOxF,IAC9C,QACA,SACN66B,OAAQ,IAGRtjC,OAAQoO,EAAUQ,QAAQH,GAAG6lB,UAC7BpV,OAAQ9Q,EAAUQ,QAAQH,GAAGulB,OAC7BuP,eAAgBn1B,EAAUQ,QAAQH,GAAG+0B,YAAc,IACnDzO,cAAe3mB,EAAUQ,QAAQH,GAAGsmB,cACpCd,WAAY7lB,EAAUQ,QAAQH,GAAGwlB,WAAa,IAC9CwP,KAAiD,OAA3Cr1B,EAAUqB,cAAc,GAAGi0B,YACjCC,KAAMv1B,EAAUQ,QAAQH,GAAGk1B,OAG/B,OAAOj1B,EApDSQ,CAASd,GAUvBxK,OAiGJ,SAAmBwK,GACjB,IACIK,EADAC,EAAQ,GADgB,aAI1B,IAAMk1B,EAAQx1B,EAAUskB,OAAOjkB,GACzBo1B,EAAYD,EAAMjmB,YAClBE,EACJ+lB,EAAM/lB,aAKoBnP,EAAMC,KAAK,CACrC5O,KAAM6xB,OAAOC,OAAO/nB,KAAQgoB,QAAO,SAACC,GAAD,OAASA,EAAItpB,MAAQoV,KAAc,GACnErV,MAAMpJ,GACTwB,KAAMijC,EACN56B,GAAI2oB,OAAOC,OAAO/nB,KAAQgoB,QAAO,SAACC,GAAD,OAASA,EAAItpB,MAAQoV,KAAc,GAAG5U,GAEvE66B,UAAWF,EAAM5lB,gBAEjB9d,MAAO0xB,OAAOC,OAAO9mB,KAAwB+mB,QAC3C,SAACC,GAAD,OAASA,EAAItpB,MAAQm7B,EAAMlmB,YAC3B,GAAGzU,GACLhI,IAAK2iC,EAAM3iC,IACXC,8BAA+B0iC,EAAM1iC,8BACrC6iC,cACEH,EAAM5lB,kBAAoB9S,IAAUI,WAAW7C,KAC/Cm7B,EAAMlmB,WAAa3S,IAAuBC,iBAAiBvC,IACvD,GACAm7B,EAAMI,UACZC,eAAqC,IAArBL,EAAMM,WAAmB,EAAIN,EAAMM,WACnDC,iBAAkB,IAClB5T,UAAWqT,EAAMrT,UACjB6T,aAAcR,EAAMziC,OAAS,IAC7BoB,WAAYqhC,EAAMrhC,WAAa,IAC/BN,gBAAiB2hC,EAAM3hC,gBACvBC,oBAAqB0hC,EAAM1hC,oBAC3BC,gBAAiByhC,EAAMzhC,gBACvBC,cAAewhC,EAAMxhC,cACrBC,kBAAmBuhC,EAAMvhC,kBACzBC,cAAeshC,EAAMthC,cACrB+hC,aAAcT,EAAMS,aAAe,KAtCvC,IAAK51B,EAAI,EAAGA,EAAIL,EAAUskB,OAAOzjB,OAAQR,IAAM,IAyC/C,OAAOC,EAtJU41B,CAAUl2B,GAUzBvK,YA+IJ,SAAkBuK,GAChB,IACIK,EADAC,EAAQ,GADe,aAIzB,IAAMvN,EAKJiN,EAAU6hB,WAAWxhB,GAAGsiB,eAAiBnjB,IAAUC,MAAMpF,IACrD2F,EAAU6hB,WAAWxhB,GAAGtN,OAAS,KAChCiN,EAAU6hB,WAAWxhB,GAAGtN,OAAS,IAClC+uB,EAAc9hB,EAAU6hB,WAAWxhB,GAAGyhB,YACtChQ,EAAW9R,EAAU6hB,WAAWxhB,GAAGkP,YAEzCjP,EAAMC,KAAK,CACT5O,KAAM6xB,OAAOC,OAAO9oB,MAAa+oB,QAC/B,SAACC,GAAD,OAASA,EAAItpB,MAAQynB,KACrB,GAAG1nB,MAAMpJ,GACX6J,GAAI2oB,OAAOC,OAAO9oB,MAAa+oB,QAAO,SAACC,GAAD,OAASA,EAAItpB,MAAQynB,KAAa,GACrEjnB,GACH/I,MAAOkO,EAAU6hB,WAAWxhB,GAAGiP,SAC/B9c,KAAMsf,EACNqQ,UAAWniB,EAAU6hB,WAAWxhB,GAAG8hB,UACnC6T,aAAcjjC,EACdf,YAAagO,EAAU6hB,WAAWxhB,GAAGrO,YACrCmkC,YAAan2B,EAAU6hB,WAAWxhB,GAAGhP,SAvBzC,IAAKgP,EAAI,EAAGA,EAAIL,EAAU6hB,WAAWhhB,OAAQR,IAAM,IA0BnD,OAAOC,EArLS81B,CAASp2B,GAUvBq2B,sBA8KJ,SAAoBr2B,EAAW6lB,GAC7B,IACIxlB,EADAC,EAAQ,GAD6B,aAKvC,IAAIulB,OAAU,EACVyQ,EAAct2B,EAAUQ,QAAQkjB,QAAO,SAAC6S,GAC1C,OAAOA,EAAK/xB,KAAOxE,EAAUw2B,QAAQn2B,GAAGo2B,gBAEtBnxB,IAAhBgxB,GAA6BA,EAAYz1B,OAAS,IACpDglB,EAAayQ,EAAY,GAAGzQ,WAAa,KAE3C,IAAM6Q,EAAgB12B,EAAUw2B,QAAQn2B,GAAGq2B,cAKvC12B,EAAUw2B,QAAQn2B,GAAGq2B,gBACnBn5B,KAAcE,sBAAsBpD,KACtC2F,EAAUw2B,QAAQn2B,GAAGq2B,gBACnBn5B,KAAcI,oBAAoBtD,KACpC2F,EAAUw2B,QAAQn2B,GAAGq2B,gBACnBn5B,KAAcG,kBAAkBrD,KAGpCiG,EAAMC,KAAK,CACT1F,GAAI2oB,OAAOC,OAAOlmB,MAAemmB,QAC/B,SAACC,GAAD,OAASA,EAAItpB,MAAQq8B,KACrB,GAAG77B,GACLlJ,KAAM6xB,OAAOC,OAAOlmB,MAAemmB,QACjC,SAACC,GAAD,OAASA,EAAItpB,MAAQq8B,KACrB,GAAGt8B,MAAMpJ,GACXkB,OAAQ8N,EAAUw2B,QAAQn2B,GAAGnO,OAC7BS,UAAWqN,EAAUw2B,QAAQn2B,GAAG1N,UAChCgkC,SAAU32B,EAAUw2B,QAAQn2B,GAAGs2B,SAC/BX,aAAch2B,EAAUqB,cAAc,GAAG9N,UAAY,IACrDC,QACEkjC,IAAkBn5B,KAAcM,gBAAgBxD,IAC5C2F,EAAUw2B,QAAQn2B,GAAG7M,QAAU,IAC/BqyB,EACN4Q,QAASz2B,EAAUw2B,QAAQn2B,GAAGo2B,WArCpC,IAAKp2B,EAAI,EAAGA,EAAIL,EAAUw2B,QAAQ31B,OAAQR,IAAM,IAyChD,OAAOC,EAnOWs2B,CAAW52B,GAU3B62B,qBA6NU,GA5NVrqB,YAgOJ,SAAwBxM,GACtB,IACIK,EADAy2B,EAAY,GADiB,aAI/B,IAAMC,EAAc/2B,EAAUg3B,MAAM32B,GAAG02B,YACvCD,EAAUv2B,KAAK,CACb1F,GAAI2oB,OAAOC,OAAOzlB,MAAa0lB,QAAO,SAACC,GAAD,OAASA,EAAItpB,MAAQ08B,KAAa,GACrEl8B,GACHlJ,KAAM6xB,OAAOC,OAAOzlB,MAAa0lB,QAC/B,SAACC,GAAD,OAASA,EAAItpB,MAAQ08B,KACrB,GAAG38B,MAAMpJ,GAEXkB,OAAQ8N,EAAUg3B,MAAM32B,GAAGnO,OAC3B+kC,cAAej3B,EAAUg3B,MAAM32B,GAAG62B,QAAU,IAC5CvkC,UAAWqN,EAAUg3B,MAAM32B,GAAG1N,UAC9BgkC,SAAU32B,EAAUg3B,MAAM32B,GAAGs2B,SAC7BX,aAAch2B,EAAUqB,cAAc,GAAG9N,UAAY,OAbzD,IAAK8M,EAAI,EAAGA,EAAIL,EAAUg3B,MAAMn2B,OAAQR,IAAM,IAwB9C,MARY,CACV82B,wBAAyB,GACzBC,gBAAiBN,EACjBO,mBAAoB,EACpBC,2BAA4B,EAC5BC,mBAAoB,GAjQAC,CAAex3B,GAUnCy3B,UA+RJ,SAAkBz3B,GAUhB,MARY,CACV03B,eAAgB13B,EAAUqB,cAAc,GAAG/N,QAAU,IACrDE,QAASwM,EAAUqB,cAAc,GAAG7N,QAAU,IAC9CC,gBAAiB,IACjBkkC,sBAAuB,GACvBC,cAAe53B,EAAUqB,cAAc,GAAG9N,UAAY,KA/SxCskC,CAAS73B,GAUvB83B,mBA4PJ,SAAyBtmC,EAAKwO,EAAW+0B,GACvC,IAAIgD,EAAW,IAAIC,KACfC,EACFF,EAASG,cACT,KACCH,EAASI,WAAa,GACvB,IACAJ,EAASK,UAwBX,MAtBY,CACVC,UAAW,EACXC,QAAS,EACT3lC,UAAW,EACX4lC,QAAS,IAAM/mC,EAAM,EACrBkC,SAAUsM,EAAUqB,cAAc,GAAGi0B,YACrCxxB,SAAkD,OAAxC9D,EAAUqB,cAAc,GAAGyC,SAAoB,EAAI,EAC7D00B,WAAY,EACZC,iBAAkBz4B,EAAUqB,cAAc,GAAG4lB,aAC7CyR,aAAc14B,EAAUqB,cAAc,GAAGzN,YACzC+kC,UAAW34B,EAAUqB,cAAc,GAAG1N,WACtCilC,cAAeX,EACfhjC,MAAO+K,EAAUqB,cAAc,GAAGpM,MAClC8kB,QAAST,cAAiBS,QAC1B8e,OAAQxrC,aACRyrC,aAAc/D,GA7ROgE,CAAgBvnC,EAAKwO,EAAWgW,WAAW2E,YAAYoa,EAAqB/0B,EAAUqB,cAAc,GAAGyC,aAoTzH,SAASk1B,EAAkBC,EAAWj5B,GAI3C,IAAIK,EAKAK,EACJ,IARAV,EAAUqB,cAAc,GAAGyC,SACiB,IAA1Cm1B,EAAUnB,mBAAmBh0B,SAAiB,KAAO,KAEvD9D,EAAUQ,QAAU,GACpBR,EAAUk5B,UAAYD,EAAU94B,MAAMU,OAIjCR,EAAI,EAAGA,EAAI44B,EAAU94B,MAAMU,OAAQR,IAAK,CAC3CK,EAAMu4B,EAAU94B,MAAME,GAAG40B,KAAO,EAAI,SAAW,QAC/C,IAAM/O,EAAY1C,OAAOC,OAAOvkB,MAAQwkB,QACtC,SAACC,GAAD,OAASA,EAAI9oB,KAAOo+B,EAAU94B,MAAME,GAAGzO,UACvC,GAAGyI,IACD8+B,GAAU,EAGZ7rC,KACE44B,IAAchnB,KAAO1C,OAAOnC,KAAO6rB,IAAchnB,KAAOzC,OAAOpC,MAEjE8+B,GAAU,GAERA,GACFn5B,EAAUQ,QAAQD,KAAK,CACrBiE,GAAInE,EAAI,EACRrH,IAAKigC,EAAU94B,MAAME,GAAGrH,IAExByH,OAAQ+iB,OAAOC,OAAOpkB,MAAKqkB,QACzB,SAACC,GAAD,OAASA,EAAI9oB,KAAOo+B,EAAU94B,MAAME,GAAG20B,OACvC,GAAG36B,IACLsG,UACU,WAARD,EAAmBf,KAAQC,WAAWvF,IAAMsF,KAAQE,OAAOxF,IAC7DurB,OAAQqT,EAAU94B,MAAME,GAAGyQ,OAC3B+U,WAAY,IAAMoT,EAAU94B,MAAME,GAAGwlB,WAGrCK,UAAWA,EACXS,cAAesS,EAAU94B,MAAME,GAAGsmB,cAClCyO,YAAa,IAAM6D,EAAU94B,MAAME,GAAG80B,eACtCI,KAAM0D,EAAU94B,MAAME,GAAGk1B,OAU/B,IAHAv1B,EAAUskB,OAAS,GACnBtkB,EAAUo5B,SAAWH,EAAUzjC,OAAOqL,OAEjCR,EAAI,EAAGA,EAAI44B,EAAUzjC,OAAOqL,OAAQR,IAAK,CAKxC44B,EAAUzjC,OAAO6K,GAAG1O,OAAS+J,IAAOC,mBAAmBvB,MAAMwB,UAC/Dq9B,EAAUzjC,OAAO6K,GAAG1O,KAAO+J,IAAOC,mBAAmBvB,MAAMpJ,IAE7D,IAAIse,EAAWkU,OAAOC,OAAO9mB,KAAwB+mB,QACnD,SAACC,GAAD,OAASA,EAAI9oB,KAAOo+B,EAAUzjC,OAAO6K,GAAGvO,SACxC,GAAGuI,IAED/M,KAAa2rC,EAAUzjC,OAAO6K,GAAG1O,OAAS+J,IAAOM,UAAU5B,MAAMpJ,KACpC,IAA3BioC,EAAU94B,MAAMU,OAClByO,EAAW3S,IAAuBH,OAAOnC,IAErCiV,IAAa3S,IAAuBH,OAAOnC,MAC7CiV,EAAW3S,IAAuBF,OAAOpC,MAI/C2F,EAAUskB,OAAO/jB,KAAK,CACpBiE,GAAInE,EAAI,EAERoP,aAAc4pB,EACZ7V,OAAOC,OAAO/nB,KACdu9B,EAAUzjC,OAAO6K,GAAG1O,MAEtB4d,YAAa0pB,EAAUzjC,OAAO6K,GAAG7N,KACjC8c,SAAUA,EACVM,gBAAiB4T,OAAOC,OAAO3mB,KAAW4mB,QACxC,SAACC,GAAD,OAASA,EAAI9oB,KAAOo+B,EAAUzjC,OAAO6K,GAAGq1B,aACxC,GAAGr7B,IACL8nB,UAAW8W,EAAUzjC,OAAO6K,GAAG8hB,UAC/BpvB,OAA2C,IAAnCkmC,EAAUzjC,OAAO6K,GAAG21B,aAC5BJ,UAAWqD,EAAUzjC,OAAO6K,GAAGs1B,cAC/BG,WAAYmD,EAAUzjC,OAAO6K,GAAGw1B,eAChChjC,IAAKomC,EAAUzjC,OAAO6K,GAAGxN,IACzBC,8BACEmmC,EAAUzjC,OAAO6K,GAAGvN,8BACtBe,gBAAiBolC,EAAUzjC,OAAO6K,GAAGxM,gBACrCC,oBAAqBmlC,EAAUzjC,OAAO6K,GAAGvM,oBACzCC,gBAAiBklC,EAAUzjC,OAAO6K,GAAGtM,gBACrCC,cAAeilC,EAAUzjC,OAAO6K,GAAGrM,cACnCC,kBAAmBglC,EAAUzjC,OAAO6K,GAAGpM,kBACvCC,cAAe+kC,EAAUzjC,OAAO6K,GAAGnM,cACnCC,WAA6C,IAAjC8kC,EAAUzjC,OAAO6K,GAAGlM,WAChC8hC,aAAcgD,EAAUzjC,OAAO6K,GAAG41B,aAAe,IAOrD,IAHAj2B,EAAU6hB,WAAa,GACvB7hB,EAAUs5B,aAAeL,EAAUxjC,YAAYoL,OAE1CR,EAAI,EAAGA,EAAI44B,EAAUxjC,YAAYoL,OAAQR,IAG5CL,EAAU6hB,WAAWthB,KAAK,CACxBiE,GAAInE,EAAI,EAERyhB,YAAauX,EACX7V,OAAOC,OAAO9oB,MACds+B,EAAUxjC,YAAY4K,GAAG1O,MAE3B4d,YAAa0pB,EAAUxjC,YAAY4K,GAAG7N,KAEtC8c,SAAU/S,KAAUC,OAAOnC,IAC3B8nB,UAAW8W,EAAUxjC,YAAY4K,GAAG8hB,UAKpCQ,aACEsW,EAAUxjC,YAAY4K,GAAG21B,cAAgB,EACrCx2B,IAAUC,MAAMpF,IAChBmF,IAAUE,QAAQrF,IACxBtH,OAAQitB,KAAKQ,IAA4C,IAAxCyY,EAAUxjC,YAAY4K,GAAG21B,cAC1ChkC,YAAainC,EAAUxjC,YAAY4K,GAAGrO,YACtCunC,eAAgB,EAChBloC,MAAO4nC,EAAUxjC,YAAY4K,GAAG81B,cAQpC,IAJAn2B,EAAUw2B,QAAU,GAEpBx2B,EAAUw5B,UAAYP,EAAU5C,sBAAsBx1B,OAEjDR,EAAI,EAAGA,EAAI44B,EAAU5C,sBAAsBx1B,OAAQR,IACtDL,EAAUw2B,QAAQj2B,KAAK,CACrBiE,GAAInE,EAAI,EAGRq2B,cAAe2C,EACb7V,OAAOC,OAAOlmB,MACd07B,EAAU5C,sBAAsBh2B,GAAGk1B,MAGrCrjC,OAAQ+mC,EAAU5C,sBAAsBh2B,GAAGnO,OAC3CS,UAAWsmC,EAAU5C,sBAAsBh2B,GAAG1N,UAC9CgkC,SAAUsC,EAAU5C,sBAAsBh2B,GAAGs2B,SAC7CnjC,QAAsD,IAA7CylC,EAAU5C,sBAAsBh2B,GAAG7M,QAC5CijC,aACiDnxB,IAA/C2zB,EAAU5C,sBAAsBh2B,GAAGo2B,SACY,IAA/CwC,EAAU5C,sBAAsBh2B,GAAGo2B,QAC/Bz2B,EAAUQ,QAAQK,OAAS,EACzB,EACA,EACFo4B,EAAU5C,sBAAsBh2B,GAAGo2B,UAU7C,IANAz2B,EAAUg3B,MAAQ,GAIlBh3B,EAAUy5B,QAAUR,EAAUzsB,YAAY4qB,gBAAgBv2B,OAErDR,EAAI,EAAGA,EAAI44B,EAAUzsB,YAAY4qB,gBAAgBv2B,OAAQR,IAAK,CAEjE,IAAMq5B,EAAUL,EACd7V,OAAOC,OAAOzlB,MACdi7B,EAAUzsB,YAAY4qB,gBAAgB/2B,GAAG1O,MAEvCmtB,EAAMma,EAAUzsB,YAAY4qB,gBAAgB/2B,GAAGnO,OAEjDwnC,IAAY17B,KAAYC,iBAAiB5D,KACzC2F,EAAUQ,QAAQK,OAAS,IAG3Bie,EAAMtQ,SACJyqB,EAAUzsB,YAAY4qB,gBAAgB/2B,GAAG42B,cACvCvR,YAAuB1lB,EAAUQ,QAAS,KAEhDR,EAAUg3B,MAAMz2B,KAAK,CACnBiE,GAAInE,EAAI,EAGR02B,YAAa2C,EAEbxC,QAAkE,IAAzD+B,EAAUzsB,YAAY4qB,gBAAgB/2B,GAAG42B,cAClD/kC,OAAQ4sB,EACRnsB,UAAWsmC,EAAUzsB,YAAY4qB,gBAAgB/2B,GAAG1N,UACpDgkC,SAAUsC,EAAUzsB,YAAY4qB,gBAAgB/2B,GAAGs2B,WAIvD32B,EAAUqB,cAAgB,GAC1BrB,EAAU25B,gBAAkB,EAI5B,IACInO,EACAhG,EAFEoU,EAAqBC,IAI3B,QAA2Bv0B,IAAvBs0B,GAA2D,OAAvBA,EACtCpO,EAAOoO,EAAmBv4B,cAAc,GAAGkkB,YAC3CC,EAAcoU,EAAmBv4B,cAAc,GAAGmkB,gBAC7C,CAGL,IAAMsU,EAASxU,cACfkG,EAAOsO,EAAOvU,YACdC,EAAcsU,EAAOtU,YAwBvB,OArBAxlB,EAAUqB,cAAcd,KAAK,CAC3BiE,GAAI,EACJ8wB,YAAa9R,OAAOC,OAAOrlB,MAAUslB,QACnC,SAACC,GAAD,OAASA,EAAI9oB,KAAOo+B,EAAUnB,mBAAmBpkC,YACjD,GAAG2G,IACL/G,QAA8C,IAArC2lC,EAAUxB,UAAUC,eAC7BnkC,UAA+C,IAApC0lC,EAAUxB,UAAUG,cAC/BpkC,QAAuC,IAA9BylC,EAAUxB,UAAUjkC,QAC7BI,YAAaqlC,EAAUnB,mBAAmBY,aAC1C/kC,WAAYslC,EAAUnB,mBAAmBa,UACzCC,cAAeK,EAAUnB,mBAAmBc,cAC5C3jC,MAAOgkC,EAAUnB,mBAAmB7iC,MAEpC6O,SAAoD,IAA1Cm1B,EAAUnB,mBAAmBh0B,SAAiB,KAAO,KAC/DmjB,aAAcgS,EAAUnB,mBAAmBW,iBAE3ClT,YAAaiG,EACbhG,YAAaA,IAIRxlB,EAGF,SAAS65B,IACd,IAAIE,EAAavsC,IAKjB,OAHoBi8B,KAAKC,MAAM1Q,aAAaC,QAAQ8gB,IAM/C,SAASC,EAAgBpsB,GAAO,IAAD,EAChCukB,GAAM,GACRv+B,YAAa,GACbD,WAAY,GACZsmC,WAAY,GACZvmC,SAAU,GACV4B,QAAS,GACTE,OAAQ,GACRC,YAAa,GACb43B,OAAQ,GACRnL,UAAW,EACX0D,OAAQ,EACRsU,QAAS,EACTC,mBAAoB,EACpBC,aAAc,EACdC,aAAc,GACdC,MAAO,EACPjW,WAAY,EACZkW,kBAAmB,GAjBX,0BAkBG,GAlBH,4BAmBK,GAnBL,6BAoBM,GApBN,6BAqBM,GArBN,4BAsBK,GAtBL,gCAuBS,GAvBT,iCAwBU,GAxBV,wBAyBC,GAzBD,wBA0BC,GA1BD,0BA2BG,GA3BH,2BA4BI,GA5BJ,iCA6BU,GA7BV,iCA8BU,GA9BV,wBA+BC,KA/BD,0BAgCE,GAhCF,GAmCNC,EAAU,IAAIxC,KACdyC,EAAQD,EAAQE,cAAgB,EAChCC,EAAMH,EAAQI,aACdxpC,EAAOopC,EAAQK,iBACbpgB,EAAQ7M,EAAK5N,UACbsoB,EAAexC,YAAerL,EAAMja,SAE1C2xB,EAAOruB,SAAW2W,EAAMpZ,cAAc,GAAGyC,SACzCquB,EAAO8H,WACe,OAApB9H,EAAOruB,SACHhE,KAAOqyB,EAAOruB,UAAU22B,EAAQ,GAAK,IAAME,EAAM,KAAOvpC,EACxDupC,EAAM,IAAM76B,KAAOqyB,EAAOruB,UAAU22B,EAAQ,GAAK,IAAMrpC,EAI7D+gC,EAAOv+B,YAAc6mB,EAAMpZ,cAAc,GAAGzN,YAC5Cu+B,EAAOx+B,WAAa8mB,EAAMpZ,cAAc,GAAG1N,WAC3Cw+B,EAAOz+B,SAAW2b,YAEhBjR,KACAqc,EAAMpZ,cAAc,GAAGi0B,YACvBnD,EAAOruB,UAKTquB,EAAOvM,OAASnL,EAAMja,QAAQ/S,MAAcm4B,OAC5CuM,EAAO+H,QACLzf,EAAMja,QAAQK,OAAS,EAAI4Z,EAAMja,QAAQ9S,MAAck4B,OAAS,EAElEuM,EAAO7+B,QAAUmnB,EAAMpZ,cAAc,GAAG/N,QACxC6+B,EAAO35B,QAAUiiB,EAAMpZ,cAAc,GAAG9N,UAExC4+B,EAAO/K,WAAapR,WAAW2E,YAAY/M,EAAKktB,iBAAkB3I,EAAOruB,WACzEquB,EAAO9K,UAAYrR,WAAW2E,YAAY/M,EAAKmtB,gBAAiB5I,EAAOruB,WAEvEquB,EAAO6I,QAAU,IACjB7I,EAAO8I,UAAW,EAClB,IAAMC,EAAch8B,KAAOC,MAAM9E,IAC7B8gC,EAAW1gB,EAAMja,QAAQkjB,QAAO,SAAU6S,GAC5C,OAAOA,EAAKrQ,YAAcgV,KAExBC,EAASt6B,OAAS,IACpBsxB,EAAO8I,UAAW,EAClBE,EAAS5W,SAAQ,SAACC,GACZA,EAAQxrB,KAAOm5B,EAAO6I,UAAS7I,EAAO6I,QAAUxW,EAAQxrB,SAIhE,IACMoiC,EACY,OAFEnX,YAAuB7lB,KAAU+zB,EAAOz+B,UAEnCrD,KAAoBC,KAC7C6hC,EAAOkJ,oBAAsBD,EACzBjJ,EAAO8I,WACT9I,EAAOkJ,oBAAsBrb,KAAK7E,IAChCigB,EACA3gB,EAAMja,QAAQkjB,QAAO,SAAC6S,GACpB,OAAOA,EAAKv9B,MAAQm5B,EAAO6I,WAC1B,GAAGrU,gBAIVwL,EAAOmJ,iBAAmB,EAC1BnJ,EAAOoJ,iBAAmB,EAC1B,IACE,IAAIl7B,EAAI,EACRA,EAAI8xB,EAAOkJ,oBAAsBlJ,EAAO6I,QACxC7I,EAAOmJ,kBACL1tB,EAAKkV,cAAcziB,KAAO2f,KAAKuC,IAAI,EAAI4P,EAAO7+B,QAAU,IAAK+M,EAAI,IAGrE,IACE,IAAIA,EAAI,EACRA,EAAI,GAAK8xB,EAAO6I,QAChB7I,EAAOoJ,kBACL3tB,EAAKkV,cAAcziB,KAAO2f,KAAKuC,IAAI,EAAI4P,EAAO7+B,QAAU,IAAK+M,EAAI,IAGrE8xB,EAAOmJ,iBACLnJ,EAAOmJ,iBAAmB,EAAI,EAAInJ,EAAOmJ,iBAC3CnJ,EAAOoJ,iBACLpJ,EAAOoJ,iBAAmB,EAAI,EAAIpJ,EAAOoJ,iBAK3CpJ,EAAO18B,YAAc,GAErB+tB,OAAOC,OAAO9oB,MAAa4pB,SAAQ,SAACC,GAC9BA,EAAQlqB,MAAQ,GAClB63B,EAAO18B,YAAY8K,KAAK,CACtB5O,KAAM6yB,EAAQpqB,MAAM+3B,EAAOruB,UAC3B1J,MAAO,OAab+3B,EAAO3lB,YAAc,GACrBgX,OAAOC,OAAOzlB,MAAaumB,SAAQ,SAACC,GAClC2N,EAAO3lB,YAAYjM,KAAK,CAAE5O,KAAM6yB,EAAQpqB,MAAM+3B,EAAOruB,UAAW1J,MAAO,OAIzE+3B,EAAOjQ,UAAY,EACnBiQ,EAAOqJ,6BAA+B,EACtC/gB,EAAMoH,WAAW0C,SAAQ,SAACC,GAKxB,IAAIiX,EAAMtJ,EAAO18B,YAAY+mB,QAC3B2V,EAAO18B,YAAYiuB,QACjB,SAACrjB,GAAD,OACEA,EAAE1O,OACF0d,YACE1U,KACA6pB,EAAQ1C,YACRqQ,EAAOruB,aAEX,IAEJquB,EAAOjQ,WAAasC,EAAQrC,UAE5BgQ,EAAOqJ,8BACLhX,EAAQ1C,cAAgBnnB,KAAYC,cAAcP,KAClDmqB,EAAQ1C,cAAgBnnB,KAAYG,wBAAwBT,KAC5DmqB,EAAQ1C,cAAgBnnB,KAAYc,QAAQpB,IACxC,EACAmqB,EAAQrC,eACF7c,IAARm2B,IAAmBtJ,EAAO18B,YAAYgmC,GAAKrhC,OAASoqB,EAAQrC,cAGlEgQ,EAAO78B,QAAU,GACjB,IAAIomC,EAAc,EAClBjhB,EAAMja,QAAQ+jB,SAAQ,SAAUC,GAE9BkX,GAAelX,EAAQoB,OACvBuM,EAAO78B,QAAQiL,KAAK,CAClBiE,GAAIggB,EAAQhgB,GACZ0hB,UAAW1B,EAAQ0B,UACnB10B,IAAKgzB,EAAQxrB,IACbrH,KAAM6yB,EAAQ+Q,KACdviC,OAAQwxB,EAAQoB,OAChB+V,IACEnX,EAAQ0B,YAAcgV,GAAgB5S,EAElC9D,EAAQmC,cADR,WAKVwL,EAAO38B,OAAS,GAChBguB,OAAOC,OAAO/nB,KAAQ6oB,SAAQ,SAACC,GAIV,OAAfn3B,cACAm3B,EAAQnqB,MAAQqB,IAAOW,4BAA4BhC,KAGrD83B,EAAO38B,OAAO+K,KAAK,CACjB5O,KAAM6yB,EAAQpqB,MAAM+3B,EAAOruB,UAC3B1J,MAAO,EACPwhC,aAAc,OAUpBzJ,EAAO9N,WAAa,EACpB8N,EAAO0J,2BAA6B,EACpC1J,EAAO2J,oBAAsB,EAC7B3J,EAAO4J,4BAA8B,EACrCthB,EAAM6J,OAAOC,SAAQ,SAACC,GAGpB,IAAIiX,EAAMtJ,EAAO38B,OAAOgnB,QACtB2V,EAAO38B,OAAOkuB,QACZ,SAACrjB,GAAD,OACEA,EAAE1O,OACF0d,YAAuB3T,IAAQ8oB,EAAQ/U,aAAc0iB,EAAOruB,aAC9D,IAEAk4B,OACM12B,IAARm2B,GAAqBA,GAAO,GAA2B,IAAtBjX,EAAQoR,UAEzCpR,EAAQ/U,eAAiB/T,IAAOU,eAAe/B,KAE7CmqB,EAAQlV,WAAa3S,IAAuBC,iBAAiBvC,KAC7DmqB,EAAQlV,WAAa3S,IAAuBE,gBAAgBxC,MAG9D2hC,GAAiB,GACnB7J,EAAO9N,YAAcG,EAAQrC,UAC7BgQ,EAAO0J,4BACLrX,EAAQ/U,eAAiB/T,IAAOU,eAAe/B,IAC3C,EACAmqB,EAAQrC,UACdgQ,EAAO2J,qBACLtX,EAAQ/U,eAAiB/T,IAAOU,eAAe/B,KAE7CmqB,EAAQlV,WAAa3S,IAAuBF,OAAOpC,KACnDmqB,EAAQlV,WAAa3S,IAAuBD,MAAMrC,IAEhDmqB,EAAQrC,UACR,EACNgQ,EAAO4J,6BACLvX,EAAQ/U,eAAiB/T,IAAOU,eAAe/B,KAC/CmqB,EAAQlV,WAAa3S,IAAuBC,iBAAiBvC,KAC7DmqB,EAAQlV,WAAa3S,IAAuBE,gBAAgBxC,IACxDmqB,EAAQrC,UACR,EACNgQ,EAAOoI,mBAAqByB,EAAiBxX,EAAQrC,UAAY,OAErD7c,IAARm2B,GAAqBA,GAAO,IAC9BtJ,EAAO38B,OAAOimC,GAAKrhC,OAASoqB,EAAQrC,WAClC6Z,IAAgB7J,EAAO38B,OAAOimC,GAAKG,cAAgBpX,EAAQrC,cAGjE,IAAI8Z,EAAkB,GACtBxhB,EAAM6J,OAAOC,SAAQ,SAACC,GAElBA,EAAQ/U,eAAiB/T,IAAOS,aAAa9B,KAC7CmqB,EAAQrC,UAAY,IAEpB8Z,GACE,KACyB,KAAxBzX,EAAQjV,YAAqB,MAAQiV,EAAQjV,aAC9C,UAGJ4iB,EAAO8J,gBADe,KAApBA,EAEA,KACAvgC,IAAOS,aAAa/B,MAAM+3B,EAAOruB,UACjC,IACAm4B,EAAgBlhB,UAAU,EAAGkhB,EAAgBp7B,OAAS,GAC5B,GAQ9BsxB,EAAOz8B,QAAU,GACjBy8B,EAAOmI,MAAQ,EACf,IAAM4B,EAAQ3+B,KAAcG,kBAAkBrD,IAC9CmpB,OAAOC,OAAOlmB,MAAegnB,SAAQ,SAACC,GACpC2N,EAAOz8B,QAAQ6K,KAAK,CAClB5O,KAAM6yB,EAAQpqB,MAAM+3B,EAAOruB,UAC3B1J,MAAO,EACP+hC,aAAc,OAKlBhK,EAAOiK,YAAc,EACrBjK,EAAOkK,aAAe,EACtBlK,EAAOmK,gBAAkB,EACzBnK,EAAOoK,iBAAmB,EAC1BpK,EAAOqK,mBAAqB,EAC5BrK,EAAOsK,oBAAsB,EAC7BtK,EAAOuK,uBAAyB,EAChCvK,EAAOwK,wBAA0B,EACjCxK,EAAOyK,wBAA0B,EACjCzK,EAAO0K,yBAA2B,EAGlC,IAAIC,EAAYv/B,KAAcI,oBAAoBtD,IAElDogB,EAAM+b,QAAQjS,SAAQ,SAAUC,GAK9B,IAAIiX,EAAMtJ,EAAOz8B,QAAQ8mB,QACvB2V,EAAOz8B,QAAQguB,QACb,SAACrjB,GAAD,OACEA,EAAE1O,OACF0d,YACE9R,KACAinB,EAAQkS,cACRvE,EAAOruB,aAEX,IAGA0gB,EAAQkS,gBAAkBwF,GAE5B/J,EAAOmI,MAAQ9V,EAAQtyB,OACvBigC,EAAO9N,YAAc8N,EAAOmI,MAC5BnI,EAAOoI,mBAAqBpI,EAAOmI,QAEnCnI,EAAOiK,aAAe5X,EAAQtyB,OACJ,IAAtBsyB,EAAQ7xB,YAAiBw/B,EAAOqK,oBAAsBhY,EAAQtyB,QAElEigC,EAAOkK,cACL7X,EAAQkS,gBAAkBoG,EAAYtY,EAAQtyB,OAAS,EAC/B,IAAtBsyB,EAAQ7xB,YACVw/B,EAAOsK,qBACLjY,EAAQkS,gBAAkBoG,EAAYtY,EAAQtyB,OAAS,SAEjDoT,IAARm2B,IACFtJ,EAAOz8B,QAAQ+lC,GAAKrhC,OAASoqB,EAAQtyB,OACX,IAAtBsyB,EAAQ7xB,YACVw/B,EAAOz8B,QAAQ+lC,GAAKU,cAAgB3X,EAAQtyB,YAIlDigC,EAAOz8B,QAAUy8B,EAAOz8B,QAAQguB,QAC9B,SAACrjB,GAAD,OACEA,EAAE1O,OAAS0d,YAAuB9R,KAAe2+B,EAAO/J,EAAOruB,aAGnEquB,EAAOmK,gBACL7hB,EAAMja,QAAQK,OAAS,EACnBsxB,EAAOiK,aAAe,EAAI3hB,EAAMja,QAAQ9S,MAAcm4B,WAAa,KACnEsM,EAAOiK,aAAe,EAAI3hB,EAAMja,QAAQ/S,MAAco4B,WAAa,KACzEsM,EAAOoK,iBACL9hB,EAAMja,QAAQK,OAAS,EACnBsxB,EAAOkK,cAAgB,EAAI5hB,EAAMja,QAAQ9S,MAAcm4B,WAAa,KACpEsM,EAAOkK,cACN,EAAI5hB,EAAMja,QAAQ/S,MAAco4B,WAAa,KAEpDsM,EAAOuK,uBACLjiB,EAAMja,QAAQK,OAAS,EACnBsxB,EAAOqK,oBACN,EAAI/hB,EAAMja,QAAQ9S,MAAcm4B,WAAa,KAC9CsM,EAAOqK,oBACN,EAAI/hB,EAAMja,QAAQ/S,MAAco4B,WAAa,KACpDsM,EAAOwK,wBACLliB,EAAMja,QAAQK,OAAS,EACnBsxB,EAAOsK,qBACN,EAAIhiB,EAAMja,QAAQ9S,MAAcm4B,WAAa,KAC9CsM,EAAOsK,qBACN,EAAIhiB,EAAMja,QAAQ/S,MAAco4B,WAAa,KAEpDsM,EAAOiI,aAAe,EACtBjI,EAAOkI,aAAe,GACtBlI,EAAO4K,SAAW,EAClB5K,EAAO6K,SAAW,GAClB,IACMC,EAAcj/B,KAAYC,iBAAiB5D,IA+CjD,OAzCA83B,EAAOv8B,MAAQ,GACf4tB,OAAOC,OAAOzlB,MAAaumB,SAAQ,SAACC,GAClC2N,EAAOv8B,MAAM2K,KAAK,CAAE5O,KAAM6yB,EAAQpqB,MAAM+3B,EAAOruB,UAAW1J,MAAO,OAGnE+3B,EAAO+K,UAAY,EACnBziB,EAAMuc,MAAMzS,SAAQ,SAAUC,GAG5B,IAAIiX,EAAMtJ,EAAOv8B,MAAM4mB,QACrB2V,EAAOv8B,MAAM8tB,QACX,SAACrjB,GAAD,OACEA,EAAE1O,OACF0d,YACErR,KACAwmB,EAAQuS,YACR5E,EAAOruB,aAEX,IAGJquB,EAAO+K,WAAa1Y,EAAQtyB,OACxBsyB,EAAQuS,cAAgBkG,IACF,IAApB9K,EAAO4K,UACT5K,EAAO4K,SAAWvY,EAAQ0S,QAC1B/E,EAAOiI,aAAe5V,EAAQtyB,OAC9BigC,EAAOyK,wBAA2BlB,EAAclX,EAAQ0S,QAAW,MAEnE/E,EAAO6K,SAASz8B,KAAKikB,EAAQ0S,SAC7B/E,EAAOkI,aAAa95B,KAAKikB,EAAQtyB,QACjCigC,EAAO0K,0BACJnB,EAAclX,EAAQ0S,QAAW,WAG5B5xB,IAARm2B,IAAmBtJ,EAAOv8B,MAAM6lC,GAAKrhC,OAASoqB,EAAQtyB,WAOrDigC,EAGT,SAASkH,EAAgB8D,EAAWC,GAClC,OAAOD,EAAUzZ,QACf,SAACC,GAAD,OACEA,EAAIvpB,MAAMpJ,GACP6pB,QAAQ,KAAM,IACdA,QACC,2FACA,KAEFuiB,EACGviB,QAAQ,KAAM,IACdA,QACC,2FACA,KAEN8I,EAAIvpB,MAAMlJ,GACP2pB,QAAQ,KAAM,IACdA,QACC,2FACA,KAEFuiB,EACGviB,QAAQ,KAAM,IACdA,QACC,2FACA,OAER,GAAGxgB,M,+XC1hCA,SAASgjC,IACd,IAAIC,EAAQ9uB,SAASwK,aAAaC,QAAQ,gBAc1C,OAbAxhB,MAAM5G,KAAa,0BAChB0sC,MAAK,SAACC,GAELA,EAASC,UAEVF,MAAK,SAAC3vB,GAAD,OAAUC,QAAQC,IAAI,sBAC3B4vB,OAAM,SAACzO,GACDqO,IAAOA,EAAQ,GACpBA,IACAtkB,aAAa2kB,QAAQ,cAAenvB,SAAS8uB,OAI1CA,EAgDF,SAASM,EAAapwB,EAAQvW,GACnC,OAAO4mC,QAAQC,IAAI,CAACC,EAASvwB,EAAQvW,KAGvC,SAAS8mC,EAASvwB,EAAQvW,GAGxB,IAAI+mC,EAAMntC,KAAa,yBAGvB,OAAO4G,MAAMumC,EAAK,CAChBC,OAAQ,OAGRC,QAAS,CACPC,OAAQ,mBACR,eAAgB,oBAElBzjC,KAAM+uB,KAAKE,UAAUnc,KAEpB+vB,MAAK,SAACC,GACL,IAAoB,IAAhBA,EAASY,GACX,MAAMC,MAAMb,EAASc,YAEvB,OAAOd,KAERD,MAAK,SAACC,GAAD,OAAcA,EAASC,UAC5BF,MAAK,SAAC3vB,GAEL,OAAOA,KAER8vB,OAAM,SAACzO,GACNphB,QAAQC,IAAI,8BAAgCmhB,MAO3C,SAAesP,EAAtB,oC,4CAAO,WAA0B1sC,EAAM6B,GAAhC,iBAAA2Q,EAAA,+EAEiB5M,MAClB5G,KAAa,mBAAqBgB,EAAO,aAAe6B,GAHvD,cAECF,EAFD,gBAKcA,EAAQiqC,OALtB,cAKC7vB,EALD,0BAQKoS,KAAKC,MAAyB,IAAnBjK,WAAWpI,IAAiB,KAAOkS,QAAQ,IAR3D,kCAUHjS,QAAQC,IAAI,0BAAZ,MAVG,2D,sBA0CA,SAAe0wB,EAAtB,oC,4CAAO,WAAuChxB,EAAQixB,GAA/C,mBAAAp6B,EAAA,2EAEiBiB,IAAhBm5B,IACFjxB,EAAOsqB,mBAAmBpkC,SAAW+qC,EACrCjxB,EAAOrN,MAAM,GAAGk1B,KAAuB,OAAhBoJ,GAErBT,EAAMntC,KAAa,qBANpB,SAO4B4G,MAAMumC,EAAK,CACxCC,OAAQ,OACRC,QAAS,CACPC,OAAQ,mBACR,eAAgB,oBAElBzjC,KAAM+uB,KAAKE,UAAUnc,KAbpB,cAOCkxB,EAPD,gBAecA,EAAmBjB,OAfjC,cAeC7vB,EAfD,yBAkBI,CACL+wB,KAAM/wB,EAAK,GACXrB,MAAOqB,EAAK,GACZgxB,WAAYhxB,EAAK,GACjBhY,MAAOgY,EAAK,GACZnB,UAAWmB,EAAK,GAChBixB,IAAKjxB,EAAK,GAAG7W,OAAO,GACpB+nC,MAAO9e,KAAKC,MAAMrS,EAAK,GAAG7W,OAAO,IACjCgoC,OAAQ/e,KAAKC,MAAMrS,EAAK,GAAG7W,OAAO,IAClCgsB,QAAS/C,KAAKC,MAAMrS,EAAK,IAAI7W,OAAO,IACpCioC,cAAehf,KAAKC,MAAMrS,EAAK,IAAI7W,OAAO,IAC1CkoC,YAAajf,KAAKC,MAAMrS,EAAK,IAAI7W,OAAO,IACxCmoC,gBAAiBtxB,EAAK,IAAI7W,OAAO,GACjCosB,iBAAkBvV,EAAK,IACvBuxB,eAAgBvxB,EAAK,IAAI7W,OAAO,GAChCua,QAAS1D,EAAK,MAjCb,kCAoCHC,QAAQC,IAAI,uCAAZ,MApCG,2D,sBAwGA,SAAeuX,EAAtB,oC,4CAAO,WAAqC7X,EAAQ4xB,GAA7C,qBAAA/6B,EAAA,sEAEC25B,EAAMntC,KAAa,gCAGPyU,IAAZ85B,IAAuBA,EAAU,IAFjCC,EAAY,IAGNl/B,MAAQqN,EAAOrN,MACzBk/B,EAAU7J,MAAQhoB,EAAOhY,OAAO4pC,EAAU,GAC1CC,EAAUvH,mBAAqBtqB,EAAOsqB,mBACtCuH,EAAU5H,UAAYjqB,EAAOiqB,UAT1B,UAYkBhgC,MAAMumC,EAAK,CAC9BC,OAAQ,OACRC,QAAS,CACPC,OAAQ,mBACR,eAAgB,oBAElBzjC,KAAM+uB,KAAKE,UAAU0V,KAlBpB,eAYCC,EAZD,iBAqBcA,EAAS7B,OArBvB,eAqBC7vB,EArBD,yBAuBIA,GAvBJ,kCAyBHC,QAAQC,IAAI,+BAAZ,MAzBG,2D,+BA8BQyxB,E,gFAAf,WAA4B/xB,EAAQ4xB,GAApC,eAAA/6B,EAAA,sEACmBghB,EAAsB7X,EAAQ4xB,GADjD,eAGe95B,KAFTsI,EADN,iDAMWA,GANX,4C,sBAgBO,SAAe4xB,EAAtB,oC,4CAAO,WAAuChyB,EAAQ4xB,GAA/C,eAAA/6B,EAAA,4DACiB,CACpBqL,cAAe,GACf+vB,WAAY,IAHT,SAQYF,EAAa/xB,EAAQ4xB,GARjC,cAQDxxB,EARC,yBAUEA,GAVF,4C,sBA4BA,SAAeD,EAAtB,oC,4CAAO,WAAwCH,EAAQ4xB,GAAhD,eAAA/6B,EAAA,sEACYk7B,EAAa/xB,EAAQ4xB,GADjC,cACDxxB,EADC,yBAGEA,GAHF,4C,sBAMA,SAAe8xB,EAAtB,oC,4CAAO,WAA4ClyB,EAAQxN,GAApD,qBAAAqE,EAAA,sEAEC25B,EAAMntC,KAAa,0BAFpB,SAIc4G,MAAMumC,EAAK,CAC1BC,OAAQ,OACRC,QAAS,CACPC,OAAQ,mBACR,eAAgB,oBAElBzjC,KAAM+uB,KAAKE,UAAUnc,KAVpB,cAICI,EAJD,gBAaiBA,EAAK6vB,OAbtB,cAaCkC,EAbD,iBAgBqBnB,EACtBhxB,EACAxN,EAAUqB,cAAc,GAAGo9B,aAlB1B,WAgBCmB,EAhBD,YAqBat6B,IAAZq6B,QAAyCr6B,IAAhBs6B,EArB1B,wBAsBA/xB,QAAQC,IAAI,8BAtBZ,kBAuBO,CACN+xB,mBAAoBF,EACpBG,WAAYF,EAAYjB,KACxBoB,gBAAiBH,EAAYrzB,MAC7ByzB,qBAAsBJ,EAAYhB,WAClCqB,kBAAmBL,EAAYhqC,MAC/BktB,cAAe8c,EAAYnzB,UAC3BoyB,IAAKe,EAAYf,IACjBC,MAAOc,EAAYd,MACnBC,OAAQa,EAAYb,OACpBztB,QAASsuB,EAAYtuB,QACrByR,QAAS6c,EAAY7c,QACrBic,cAAeY,EAAYZ,cAC3BC,YAAaW,EAAYX,YACzBC,gBAAiBU,EAAYV,gBAC7B/b,iBAAkByc,EAAYzc,iBAC9Bgc,eAAgBS,EAAYT,iBAvC7B,0DA2CHtxB,QAAQC,IAAI,0BAAZ,MA3CG,2D,sBAmGA,SAAeoyB,EAAtB,kC,4CAAO,WAAiDC,GAAjD,mBAAA97B,EAAA,sEAEC25B,EAAMntC,KAAa,iBAAmBsvC,EAFvC,kBAKqB1oC,MAAMumC,GAL3B,cAKGoC,EALH,gBAMgBA,EAAU3C,OAN1B,cAMG7vB,EANH,yBAQMA,GARN,kCAUDC,QAAQC,IAAI,kDAAZ,MAVC,0DAaHD,QAAQC,IAAI,2CAAZ,MAbG,kE,sBAkFA,SAAeuyB,EAAtB,kC,4CAAO,WAAsC7yB,GAAtC,mBAAAnJ,EAAA,sEAGG25B,EAAMntC,KAAa,cAHtB,SAIiB4G,MAAMumC,EAAK,CAC/BC,OAAQ,OACRC,QAAS,CACPC,OAAQ,mBACR,eAAgB,oBAElBzjC,KAAM+uB,KAAKE,UAAUnc,KAVlB,cAID8yB,EAJC,gBAYYA,EAAU7C,OAZtB,eAaQn4B,KADTsI,EAZC,kDAcQA,GAdR,0DAgBHC,QAAQC,IAAI,yBAAZ,MAhBG,2D,yDCthBP,0PAuDO,SAASyyB,EAAmB/7B,GAuBjC,MAtBY,CACVA,GAAIA,EACJiL,aAAc/T,IAAOC,mBAAmBtB,IACxCkV,YAAa,GACbD,SAAuB,OAAbjiB,aAAmBsP,IAAuBE,gBAAgBxC,IAAIsC,IAAuBD,MAAMrC,IACrG8nB,UAAW,EACXvS,gBAAiB9S,IAAUC,YAAY1C,IACvCtH,OAAQ,EACR6iC,UAAW,GACXE,WAAY,EACZjjC,IAAK,EACLC,8BAA+B,EAC/Be,gBAAiB,EACjBC,oBAAqB,EACrBC,gBAAiB,EACjBC,cAAe,EACfC,kBAAmB,EACnBC,cAAe,EACfC,WAAY,EACZ8hC,aAAcnmC,IACd0wC,WAAY,MAKT,SAASC,EAAqBC,GACnC,OAAOjX,KAAKC,MAAMD,KAAKE,UAAU+W,IAM5B,SAASC,EAAoBn8B,GAClC,IAAMo8B,EAAiB,CACrBp8B,GAAI,EACJxL,IAAK9J,IACLuR,OAAQpB,KAAIC,KAAKjF,IACjBsG,UAAWhB,KAAQC,WAAWvF,IAC9BurB,OAAQv2B,IACRw2B,WAAY52B,IAEZi3B,UAAWhnB,KAAO1C,OAAOnC,IACzBssB,cAAel3B,IACf2lC,YAAa7lC,IACbgmC,KAAM,IAEFsL,EAAiB,CACrBr8B,GAAI,EACJxL,IAAK7J,IAELsR,OAAQpB,KAAIE,OAAOlF,IACnBsG,UAAWhB,KAAQC,WAAWvF,IAC9BurB,OAAQx2B,IACRy2B,WAAY52B,IAEZi3B,UAAWhnB,KAAOzC,OAAOpC,IACzBssB,cAAen3B,IACf4lC,YAAa9lC,IACbimC,KAAM,IAEFuL,EAAQ,CACZt8B,GAAIA,EACJxL,IAAK,EACLyH,OAAQpB,KAAIC,KAAKjF,IACjBsG,UAAWhB,KAAQC,WAAWvF,IAC9BurB,OAAQ,EACRC,WAAY,EACZK,UAAWhnB,KAAOC,MAAM9E,IACxBssB,cAAe,GACfyO,YAAa,EACbG,KAAM,IAER,OAAW,IAAP/wB,EAAiBo8B,EACL,IAAPp8B,EAAiBq8B,EACdC,EAGP,SAASC,EAAoBv8B,GAYlC,MAXsB,CACpBA,GAAIA,EAEJkyB,cAAen5B,KAAcC,iBAAiBnD,IAC9CnI,OAAQ9C,IACRuD,UAAW,EACXgkC,SAAUnnC,IAA4BL,IACtCsnC,QAAS,EACTjjC,QAASvE,IACT+xC,WAAYtxC,KAwBT,SAASuxC,EAAkBz8B,GAChC,IAAM08B,EAAe,CACnB18B,GAAI,EACJuyB,YAAa/4B,KAAYC,iBAAiB5D,IAC1C68B,QAAStnC,IACTsC,OACGtC,KACER,IAAwBC,MACxB,EAAIJ,IAAuB,KAC9B,IACF0D,UAAW,EACXgkC,SAAUnnC,IAA4BL,KAElCgyC,EAAe,CACnB38B,GAAIA,EACJuyB,YAAa/4B,KAAYC,iBAAiB5D,IAC1C68B,QAASrnC,IACTqC,OACGrC,KACET,IAAwBC,MACxB,EAAIJ,IAAuB,KAC9B,IACF0D,UAAWnD,IAA4BL,IACvCwnC,SAAU,KAEZ,OAAW,IAAPnyB,EAAiB08B,EACTC,EAGP,SAASC,EAAkB58B,EAAIjS,GACpC,IAAMunC,EAAOxU,cAmBb,MAlBoB,CAClB9gB,GAAIA,EACJ8wB,YAAal3B,KAASE,GAAGjE,IACzB/G,QAAS3D,IACT4D,UAAW7D,IACX8D,QAASjB,EACTqB,YAAa,GACbD,WAAY,GACZilC,cAAe,IAAIZ,KACnBqJ,iBAAkB,IAAIrJ,KACtB/iC,MAAO,GACP8kB,QAAST,cAAiBS,QAC1BkN,aAAc75B,IAAa2C,IAAqBE,IAChD6T,SAAU+nB,EAAOC,OAAQ,KAAO,KAChCwV,cAAe7wC,IACf80B,YAAauU,EAAOvU,YACpBC,YAAYsU,EAAOtU,aAMhB,SAAS+b,IACd,IAAIvhC,EAEJ,GAAyC,OAAtCgZ,aAAaC,QAAQzrB,KAEtBwS,EAAWwhC,SAKb,IACExhC,EAAU65B,cACV,MAAO5K,GACPjvB,EAAWwhC,IAIf,OAAOxhC,EAGP,SAASwhC,IAEP,IACIC,EAAiB,GACvBA,EAAelhC,KAAKogC,EAAoB,IACpCvzC,KAAYq0C,EAAelhC,KAAKogC,EAAoB,IACxD,IAAIe,EAAgB,GACpBA,EAAcnhC,KAAKggC,EAAmB,IACtC,IAAIoB,EAAgB,GAChBv0C,KAAYu0C,EAAephC,KAAKwgC,EAAoB,IAExD,IAvGkCv8B,EAuG5Bo9B,EAAc,EAvGcp9B,EAuGK,EAtGjB,CAClBA,GAAIA,EAEJsd,YAAannB,KAAYc,QAAQpB,IACjCkV,YAAa,GACbD,SAAU/S,KAAUC,OAAOnC,IAC3B8nB,UAAW,EAEXQ,aAAcnjB,IAAUC,MAAMpF,IAC9BtH,OAAQ,EACR1B,MAAO,EACPW,YAAa,GACbunC,eAAgB,EAChB9W,iBAAkB,MA0FlBof,EAAe,GAcjB,OAbFA,EAAathC,KAAK0gC,EAAkB,IACpCY,EAAathC,KAAK0gC,EAAkB,IAI1B,CACNzgC,QAASihC,EACTnd,OAAQod,EACR7f,WAAY+f,EACZpL,QAASmL,EACT3K,MAAO6K,EACPxgC,cATwB,CAAC+/B,EAAkB,EAAG,Q,oCC/PlDhnB,EAAOC,QAAU,khC,kBCAjBD,EAAOC,QAAU,kwC,sHCEJynB,EAAb,kDACE,WAAY59B,GAAQ,IAAD,uBACjB,cAAMA,IAwBR69B,aAAe,SAAChqB,EAAUF,EAAWC,GACnCC,OAAwBzS,IAAbyS,EAAyB,EAAIA,EAAW,EACnD,IACI1X,EADA2hC,EAAiB,GAErB,IAAK3hC,EAAI,EAAGA,EAAIwX,IAAaxX,EACvBA,IAAM0X,EACRiqB,EAAezhC,KAAK,CAClBiE,GAAIuT,EACJpmB,KAAMmmB,EAAcC,GACpB/S,MACgB,IAAd6S,EACI,mBACA,iCAGRmqB,EAAezhC,KAAK,CAClBiE,GAAInE,EACJ1O,KAAMmmB,EAAczX,GACpB2E,MAAO,iBAGb,OAAOg9B,GA9CU,EAiDnBC,aAAe,SAACtc,GACd,IACItlB,EADA2hC,EAAiB,EAAKv9B,MAAMy9B,QAEhC,IAAK7hC,EAAI,EAAGA,EAAI,EAAK6D,MAAM2T,YAAaxX,EACtC2hC,EAAe3hC,GAAG2E,MAChBg9B,EAAe3hC,GAAGmE,KAAOmhB,EACrB,+BACA,eAER,EAAKhhB,SAAS,CAAEu9B,QAASF,IACzB,EAAK99B,MAAM8T,kBAAkB2N,EAAQ,IAzDrC,IAAMqc,EAAiB,EAAKD,aAC1B,EAAK79B,MAAM6T,SACX,EAAK7T,MAAM2T,UACX,EAAK3T,MAAM4T,eALI,OAOjB,EAAKrT,MAAQ,CACXy9B,QAASF,GARM,EADrB,6DAiBE,SAA0Bn9B,GACxB,IAAMm9B,EAAiBl9B,KAAKi9B,aAC1Bl9B,EAAUkT,SACVlT,EAAUgT,UACVhT,EAAUiT,eAEZhT,KAAKH,SAAS,CAAEu9B,QAASF,MAvB7B,oBA+DE,WAAU,IAAD,OACDG,OACiB78B,IAArBR,KAAKZ,MAAMuO,MAAsB,CAAEA,MAAO3N,KAAKZ,MAAMuO,OAAU,GAC3D2vB,OACiB98B,IAArBR,KAAKZ,MAAMuO,MACP,CAAEA,MAAO3N,KAAKZ,MAAMuO,MAAO4vB,YAAa,OACxC,CAAEA,YAAa,OAErB,OACE,yBAAKr9B,MAAO,CAAEq9B,YAAa,SACxBv9B,KAAKL,MAAMy9B,QAAQI,KAAI,SAAC/L,GAAD,OACtB,4BACE1X,IAAK0X,EAAK/xB,GACVY,UAAWmxB,EAAKvxB,MAChBA,MACEuxB,EAAK/xB,KAAO,EAAKN,MAAM2T,UAAY,EAC/BuqB,EACAD,EAENh9B,QAAS,kBAAM,EAAK88B,aAAa1L,EAAK/xB,MAErC+xB,EAAK5kC,cApFlB,GAAkCumB,IAAMzS,Y,wgBCwJpC88B,EACY,IAAdzxC,YAfwB,wBAiBN,IAAdA,YAhBmB,gCACA,gCAmBzB0xC,WAAS3W,OAAO3C,qBAAsB,EAE/B,IAAMuZ,GAAb,kDAEE,WAAYv+B,GAAQ,IAAD,uBACjB,cAAMA,IAFRw+B,YAAcn1C,IACK,EAuEnBo1C,YAvEmB,uCAuEL,WAAO3iC,EAAW4iC,GAAlB,mBAAAv+B,EAAA,6DAERw+B,EAAY,IAAIC,MAAMF,EAAWtxB,QAAQrD,cAAcpN,QAAQgyB,KAAK,GACzB,OAA3C7yB,EAAUqB,cAAc,GAAGi0B,cAC7BsN,EAAWtxB,QAAQrD,cAAgB40B,GAGjCvxB,EAAU3W,KAAYc,QAAQpB,SAIfiL,KAHfy9B,EAAa/iC,EAAU6hB,WAAWmC,MACpC,SAACiC,GAAD,OAAOA,EAAEnE,cAAgBxQ,QAGzByxB,EAAW5gB,UAAYygB,EAAWtxB,QAAQrD,cAAc,IAZ9C,kBAgBLjO,GAhBK,2CAvEK,0DA0FnBgjC,gBA1FmB,uCA0FD,WAAOhjC,EAAW4iC,GAAlB,+BAAAv+B,EAAA,0DAGZjX,IAHY,wBAKV61C,EAAO1lC,KAAcE,sBAAsBpD,IAC3C6oC,EAAMljC,EAAUw2B,QAAQxS,MAAK,SAACiC,GAAD,OAAOA,EAAEyQ,gBAAkBuM,KAExDE,EAAO5lC,KAAcG,kBAAkBrD,IACvCigC,EAAQt6B,EAAUw2B,QAAQxS,MAAK,SAACiC,GAAD,OAAOA,EAAEyQ,gBAAkByM,KAE1DC,EAAiBpjC,EAAUQ,QAAQwjB,MACrC,SAACiC,GAAD,OAAOA,EAAEC,YAAchnB,KAAOzC,OAAOpC,OAEjCgpC,OACe/9B,IAAnB89B,GAA0D,IAA1BA,EAAeviC,OAI3C41B,EAAUz2B,EAAUQ,QAAQK,OAAS,EAAI,EAAI,OAEvCyE,IAAR49B,GACII,EAAgB,CACpB9+B,GAAIxE,EAAUw2B,QAAQ31B,OAAS,EAC/B61B,cAAen5B,KAAcE,sBAAsBpD,IACnDnI,OAAQmxC,EAAY70B,SAASo0B,EAAWW,YAAYC,aAAe,EACnE7wC,UAAW,EACXgkC,SAAU,IACVF,QAASA,GAEP4M,GAAWrjC,EAAUw2B,QAAQj2B,KAAK+iC,IAEtCJ,EAAIhxC,OAASmxC,EACT70B,SAASo0B,EAAWW,YAAYC,aAChC,OAGQl+B,IAAVg1B,GACImJ,EAAc,CAClBj/B,GAAIxE,EAAUw2B,QAAQ31B,OAAS,EAC/B61B,cAAen5B,KAAcG,kBAAkBrD,IAC/CnI,OAAQsc,SAASo0B,EAAWW,YAAYzE,OACxCnsC,UAAW,EACXgkC,SAAU,IACVF,QAASA,GAEXz2B,EAAUw2B,QAAQj2B,KAAKkjC,IAEvBnJ,EAAMpoC,OAASsc,SAASo0B,EAAWW,YAAYzE,OAhDnC,UAmDI,EAAK4E,iBAAiB1jC,EAAW4iC,GAnDrC,QAmDd5iC,EAnDc,wCAqDTA,GArDS,4CA1FC,0DAkJnBkV,kBAlJmB,sBAkJC,gCAAA7Q,EAAA,yDAClB+T,SAAS/S,MAAQjY,IAAa,MAAQ,KACtC,EAAKu2C,WAAaC,YAAY,EAAKC,SAAU,KAC7C7qB,aAAa2kB,QAAQ,cAAenvB,SAAS,IAC7C,EAAKs1B,YAAa,OAGDx+B,KAFXy+B,EAAQC,IAAYta,MAAM5N,OAAOmoB,SAASjlB,SAEtCklB,GAPQ,iCAQV,EAAKC,oCAAoCJ,EAAMG,IARrC,gDAUV,EAAKE,mBACM,OAAfL,EAAMhgC,MAAiB8nB,EAAOC,OAAS,KAAO,MAXhC,gBAeIxmB,IAAlBy+B,EAAMM,QAfQ,oBAgBM,SAAlBN,EAAMM,QAhBM,oBAkBdC,GADIA,EAAI,IAAItM,MACNuM,SAASD,EAAEE,WAAYF,EAAEG,aAAe,EAAG,EAAG,GAC9CC,EAAcjb,KAAKC,MACvB1Q,aAAaC,QAAQ7rB,IAAa,UAAY,OAGjC,IAAI4qC,KACjB0M,EAAYC,kBAAkBtjC,cAAc,GAAGu3B,iBAEtC,IAAIZ,KACb0M,EAAYC,kBAAkBtjC,cAAc,GAAGggC,kBAElCiD,GA7BD,kCA8BN,EAAKnqB,cA9BC,QA+BZhC,cA/BY,aAoCO7S,IAArBy+B,EAAMa,YACiB,MAArBb,EAAMa,YACR,EAAKjgC,SAAS,CAAEkgC,YAAY,IAtCd,4CAlJD,EA6LnBT,mBA7LmB,uCA6LE,WAAOrgC,GAAP,6BAAAM,EAAA,6DAMnB,EAAKM,SAAS,CAAEmgC,SAAS,IANN,EAOa,EAAKrgC,MAA/BzE,EAPa,EAObA,UAAW4iC,EAPE,EAOFA,WACXmC,EAAeC,IAAEC,UAAUjlC,GAC3BklC,EAAgBF,IAAEC,UAAUrC,GAE9Bzb,EAAe4d,EAAa1jC,cAAc,GAX3B,SAcAk9B,YACf,kBACApX,EAAamO,aAhBE,cAcX6P,EAdW,OAmBjBhe,EAAa3zB,SAAWwsB,KAAKC,MAAW,IAALklB,GAAc,KAAKrlB,QAAQ,GAIhEqH,EAAarjB,SAAWC,EACxBghC,EAAa1jC,cAAc,GAAK8lB,EAxBb,UA6BI,EAAKie,4BAC1BL,EACAG,EAzQyB,EA4QzB,EACA,GACA,GApCiB,QA6BbG,EA7Ba,OAwCnB,EAAK1gC,SAAL,2BAAmB0gC,GAAnB,IAA6BP,SAAS,EAAOQ,gBAAgB,KAxC1C,4CA7LF,wDAwOnBC,mBAxOmB,uCAwOE,WACnBC,EACA5C,EACA6C,EACAC,GAJmB,uBAAArhC,EAAA,+EAQIywB,YAAe0Q,GARnB,cAQXh4B,EARW,gBAcEkyB,YACjBlyB,EACAg4B,GAhBe,UAcX53B,EAdW,OAqB8B,QAH3C+3B,EAA0B,EAAKC,gBAAgBh4B,EAAMg1B,IAG/B9Z,oBAhTL,IAiTlB2c,GA5SmB,IA6SlBA,GA5SqB,IA6SrBA,GACAE,EAAwB7c,iBAAiBjoB,OACvC2kC,EAAuBlhB,OAAOzjB,QA1BnB,kCA6BP,EAAKglC,4BACTr4B,EACAg4B,EACAG,EACAF,EACAC,GAlCW,QA4BfC,EAAwB7c,iBA5BT,sBAuCbgd,EAAuBd,IAAEC,UAAUO,IAElBhlC,QAAQ+jB,SAAQ,SAACC,GAElCA,EAAQ0B,YAAchnB,KAAOC,MAAM9E,KACnCmqB,EAAQ0B,YAAchnB,KAAOE,gBAAgB/E,MAE7CyrC,EAAqBtP,QAAUsP,EAAqBtP,QAAQ9S,QAC1D,SAAC6S,GACC,OAAOA,EAAKE,UAAYjS,EAAQhgB,UAIxCshC,EAAqBtlC,QAAUslC,EAAqBtlC,QAAQkjB,QAC1D,SAAC6S,GACC,OACEA,EAAKrQ,YAAchnB,KAAO1C,OAAOnC,KACjCk8B,EAAKrQ,YAAchnB,KAAOzC,OAAOpC,OAxDtB,UA8DT,EAAK0rC,kBA1TgB,EA4TzBD,EACAH,GAjEa,eA6DjBA,EAAwBK,6BA7DP,QAqEbC,EAAsBjB,IAAEC,UAAUO,IAClBhlC,QAAUylC,EAAoBzlC,QAAQkjB,QACxD,SAAC6S,GACC,OAAOA,EAAKrQ,YAAchnB,KAAO1C,OAAOnC,OAxE3B,UA6ET,EAAK0rC,kBAzUgB,EA2UzBE,EACAN,GAhFa,eA4EjBA,EAAwBO,oBA5EP,iBAqF6B,EAAKC,iBACjDX,EACAG,GAvFe,eAqFjBA,EAAwBS,cArFP,yBAyFVT,GAzFU,2DA2FV,MA3FU,0DAxOF,8DAwUnBE,4BAxUmB,uCAwUW,WAC5Br4B,EACAg4B,EACAG,EACAF,EACAC,GAL4B,iBAAArhC,EAAA,0DAAAA,EAAA,iBAOnBhE,GAPmB,QAAAgE,EAAA,SAAAA,EAAA,0DAQpBmgB,EAAUghB,EAAuBlhB,OAAOjkB,IAEpCmE,KAAOkhC,GAhYK,IAiYpBD,GAhYuB,IAiYvBA,EAZwB,gCAcDl4B,YACrBC,EACAgX,EACAghB,EAAuBnkC,cAAc,GAAGyC,UACxC,GAlBsB,OAcpB08B,EAdoB,YAuBdl7B,KAHNjB,EAAIshC,EAAwB7c,iBAAiB9E,MAC/C,SAAC5f,GAAD,OAAOA,EAAEI,KAAOggB,EAAQhgB,OAGxBH,EAAE6lB,KAAOsW,EAETmF,EAAwB7c,iBAAiBvoB,KAAK,CAC5CiE,GAAIggB,EAAQhgB,GACZ0lB,KAAMsW,IA5Bc,0CAOnBngC,EAAI,EAPe,YAOZA,EAAImlC,EAAuBlhB,OAAOzjB,QAPtB,yCAOnBR,GAPmB,eAO8BA,IAP9B,+CAiCrBslC,EAAwB7c,kBAjCH,2CAxUX,gEA4WnB8c,gBAAkB,SAACS,EAAqBzD,GACtC,IAwBE,OAtBAA,EAAW/C,mBAAqBwG,EAAoBxG,mBACpD+C,EAAW5C,qBACTqG,EAAoBrG,qBAAqB/xB,cAC3C20B,EAAWzf,iBACTkjB,EAAoBljB,iBAAiBlV,cACvC20B,EAAW7C,gBACTsG,EAAoBtG,gBAAgB9xB,cACtC20B,EAAW3C,kBACToG,EAAoBpG,kBAAkBhyB,cACxC20B,EAAW9C,WAAauG,EAAoBvG,WAAW7xB,cACvD20B,EAAW9f,cACTujB,EAAoBvjB,cAAc7U,cACpC20B,EAAWW,YAAYC,YAAc6C,EAAoBxH,IACzD+D,EAAWW,YAAYzE,MAAQuH,EAAoBvH,MACnD8D,EAAWW,YAAY+C,UAAYD,EAAoBtH,OACvD6D,EAAWtxB,QAAU+0B,EAAoB/0B,QACzCsxB,EAAW2D,eAAermC,OAASmmC,EAAoBrH,cACvD4D,EAAW2D,eAAere,OAASme,EAAoBtjB,QACvD6f,EAAW2D,eAAe9e,MAAQ4e,EAAoBpH,YACtD2D,EAAWoD,6BACTK,EAAoBL,6BACtBpD,EAAWsD,oBAAsBG,EAAoBH,oBAC9CtD,EACP,MAAO3T,GAEP,OADAuX,MAAM,mDACC5D,IAxYQ,EA4YnB6D,eA5YmB,uCA4YF,WAAO74B,GAAP,eAAAvJ,EAAA,uDACXu+B,EAAa,EAAKn+B,MAAMm+B,YAEjB/C,mBAAqBjyB,EAAKiyB,mBACrC+C,EAAW5C,qBAAuBpyB,EAAKoyB,qBAAqB/xB,cAC5D20B,EAAWzf,iBAAmBvV,EAAKuV,iBAAiBlV,cACpD20B,EAAW7C,gBAAkBnyB,EAAKmyB,gBAAgB9xB,cAClD20B,EAAW3C,kBAAoBryB,EAAKqyB,kBAAkBhyB,cACtD20B,EAAW9C,WAAalyB,EAAKkyB,WAAW7xB,cACxC20B,EAAW9f,cAAgBlV,EAAKkV,cAAc7U,cAC9C20B,EAAWW,YAAYC,YAAc51B,EAAKixB,IAC1C+D,EAAWW,YAAYzE,MAAQlxB,EAAKkxB,MACpC8D,EAAWW,YAAY+C,UAAY14B,EAAKmxB,OACxC6D,EAAW2D,eAAermC,OAAS0N,EAAKoxB,cACxC4D,EAAW2D,eAAere,OAASta,EAAKmV,QACxC6f,EAAW2D,eAAe9e,MAAQ7Z,EAAKqxB,YAEvC,EAAKt6B,SAAS,CAAEi+B,WAAYA,EAAYiC,YAAY,IAjBrC,4CA5YE,wDAganBkB,kBAhamB,uCAgaC,WAAOxmB,EAAMvf,EAAW4iC,GAAxB,yBAAAv+B,EAAA,6DACZN,EAAO/D,EAAUqB,cAAc,GAAGyC,SAClC6jB,EACJib,EAAW/C,mBAAmB7/B,EAAUqB,cAAc,GAAG4lB,cACtDO,MAJa,SAKCsN,YAAe90B,EAAW2nB,GAL3B,cAKdna,EALc,gBAMD6yB,YAAuB7yB,GANtB,eAOLlI,KADTsI,EANc,4BAQhB,EAAK84B,OAAS94B,EA5be,IA6bzB2R,EATY,0CASgC3R,GAThC,QAtbJ,IAgcH2R,EAAoB,EAAK5a,SAAS,CAAEgiC,SAAS,IA/bzC,IAgcJpnB,IAEL,sBACCnyB,IAAa+H,KAAO4O,GAAM3O,UAAYD,KAAO4O,GAAM1O,UACpD,WACCoF,IAAMsJ,GAAMrJ,KACX,UACA6nC,EACA,iBACA,EAAKmE,OAEHE,EACJrE,EACA,KACA,CAAC,UAAYh1C,IAAc,MAAQ,EAAKm5C,QAAQviB,KAAK,KACvD6Z,EACE,sBACC5wC,IAAa+H,KAAO4O,GAAM3O,UAAYD,KAAO4O,GAAM1O,UACpD,WACAoF,IAAMsJ,GAAMrJ,KACZ,UACAmsC,mBAAmBD,GAErB9qB,OAAOmoB,SAAS6C,KAAO9I,GAlCT,4CAhaD,4DAucnBmG,oCAvcmB,uCAucmB,WAAO4C,GAAP,iBAAA1iC,EAAA,sEAEjB67B,YAAkC6G,GAFjB,cAE9Bn5B,EAF8B,gBAKZorB,YAAkBprB,EAAM,EAAKnJ,MAAMzE,WALvB,OAKhC0kC,EALgC,OAQpC,EAAKsC,oBAAoBtC,GARW,2CAvcnB,wDAkdnBuC,mBAldmB,uCAkdE,WAAO/mC,GAAP,2BAAAmE,EAAA,6DAIjB,EAAKM,SAAS,CAAEmgC,SAAS,IAJR,EAMiB,EAAKrgC,MAA/Bm+B,EANS,EAMTA,WAAY5iC,EANH,EAMGA,UAChB+kC,EAAeC,IAAEC,UAAUjlC,GACzBklC,EAAgBF,IAAEC,UAAUrC,GAE9B1iC,EAAOlH,IAAMkH,EAAOymB,gBACtBzmB,EAAOymB,cAAgBzmB,EAAOlH,IAAM,GAChCkuC,EACJhnC,EAAOgmB,YAAc6e,EAAavkC,QAAQ/S,MAAcy4B,WACxDhmB,EAAOlH,MAAQ+rC,EAAavkC,QAAQ/S,MAAcuL,KAClDkH,EAAOk1B,cAAgB2P,EAAavkC,QAAQ/S,MAAc2nC,aAC1Dl1B,EAAO2lB,aAAekf,EAAavkC,QAAQ/S,MAAco4B,YACxDkf,EAAavkC,QAAQ2mC,MAAQ,IAC3BjnC,EAAOlH,MAAQ+rC,EAAavkC,QAAQ9S,MAAcsL,KACjDkH,EAAO2lB,aACLkf,EAAavkC,QAAQ9S,MAAcm4B,YAC3Ckf,EAAavkC,QAAQN,EAAOsE,GAAK,GAAKtE,EArBrB,SAuBM,EAAKklC,4BAC1BL,EACAG,EACAgC,EAzhBuB,EAPH,EAiiBpBhnC,EAAOsE,IA3BQ,OAuBX6gC,EAvBW,OA6BjB,EAAK1gC,SAAL,2BAAmB0gC,GAAnB,IAA6BP,SAAS,KA7BrB,4CAldF,wDAmfnBM,4BAnfmB,uCAmfW,WAC5BI,EACA5C,EACA6C,EACAC,EACA0B,EACAC,GAN4B,eAAAhjC,EAAA,+EAUK,EAAKijC,kBAClC9B,EACAC,GAZwB,UAU1BD,EAV0B,QAkBtB4B,EAlBsB,iCAmBQ,EAAKG,2BACnC/B,EACA5C,EACA6C,EACAC,GAvBsB,OAmBxBC,EAnBwB,gDA0BQ,EAAKJ,mBACnCC,EACA5C,EACA6C,EACAC,GA9BsB,QA0BxBC,EA1BwB,gCAiCK,EAAK3C,gBAClCwC,EACAG,GAnCwB,eAiC1BH,EAjC0B,iBAsCK,EAAK7C,YAClC6C,EACAG,GAxCwB,eAsC1BH,EAtC0B,OA2CtB,EAAK/gC,MAAMogC,YAAY,EAAKlgC,SAAS,CAAEkgC,YAAY,KAEjC,IAAlBwC,GAAyB,EAAKG,wBA7CR,kBA8CnB,CACLxnC,UAAWwlC,EACX5C,WAAY+C,IAhDY,4FAnfX,kEAwiBnBQ,iBAxiBmB,uCAwiBA,WACjBX,EACAG,GAFiB,6CAAAthC,EAAA,yDAqBTojC,EAAWjC,EAAuBhlC,QAAQ,EAAKknC,SAC/CC,EAAYnC,EAAuBhlC,QAAQkjB,QAAO,SAAC6S,GACvD,OAAOA,EAAK/xB,GAAK,KAOb0iB,EAAiBye,EAAwB9F,mBACzC5Y,EAAeue,EAAuBnkC,cAAc,GAAG4lB,eAG3DC,EAAermB,OAAS,QACeyE,IAAvCqgC,EAAwB7F,iBACXx6B,IAAbmiC,GApCa,iBAoDb,GAbMG,EAAY5gB,YAChBwe,EAAuBhlC,QACvBymB,EACA0e,EAAwBY,eACxBrf,EACAye,EAAwB7iB,cACxB0iB,EAAuBnkC,cAAc,IAEjCpK,EAAU2wC,EAAUjgB,cACpBP,EAAawgB,EAAUhgB,mBACvBP,EAAYugB,EAAU/f,kBACtBS,EAAexC,YAAe0f,EAAuBhlC,SACrDynB,EAAe2f,EAAU9gB,gBAC3BwB,EAGF,IADAqd,EAAwB7F,WAAa,GAC5Bz/B,EAAI,EAAGA,EAAI4nB,EAAc5nB,IAChCslC,EAAwB7F,WAAWv/B,KAAKF,EAAI,GAxDnC,GA2DbwnC,EAAUlC,EAAwB5F,gBAAgBtjB,MAChD,EACAwL,GAEF6f,EAAUnC,EAAwB3F,qBAAqBvjB,MACrD,EACAwL,GAEF8f,EAAWpC,EAAwB1F,kBAAkBxjB,MACnD,EACAwL,GAEF+f,EAAYrC,EAAwB7iB,cAAcrG,MAChD,EACAwL,IAGE76B,IA5ES,kCA6EW66C,YACpBhxC,EACAmwB,EACAC,EACAygB,EAEAH,EACAI,EACAF,EACAG,EACAxC,EAAuBnkC,cAAc,GAAG9N,UACxCiyC,EAAuBnkC,cAAc,GAAGyC,SACxC0hC,EAAuBnkC,cAAc,GAAG/N,QACxCkyC,EAAuBhP,QACvBmP,EAAwBpC,YAAYzE,OACjC,EACC0G,EAAuBhlC,QAAQ/S,MAAco4B,WAAa,MA7FrD,QA6EXugB,EA7EW,mCA+FF94C,IA/FE,kCAgGW46C,YACpBjgB,EACAud,GAlGS,QAgGXY,EAhGW,wCAsGRA,GAtGQ,4CAxiBA,0DAkpBnB+B,cAlpBmB,sBAkpBH,4BAAA9jC,EAAA,8DAINiB,IAFN,EAAKb,MAAMzE,UAAUQ,QAAQwjB,MAC3B,SAACiC,GAAD,OAAOA,EAAEC,YAAchnB,KAAOzC,OAAOpC,OAH3B,uBAMZ,EAAKsK,SAAS,CAAEmgC,SAAS,IANb,SAQW,EAAKsD,wBARhB,OAQN/C,EARM,OAUZ,EAAK1gC,SAAL,2BAAmB0gC,GAAnB,IAA6BP,SAAS,KAV1B,2CAlpBG,EAgqBnBsD,sBAhqBmB,sBAgqBK,wCAAA/jC,EAAA,+DACY,EAAKI,MAA/Bm+B,EADc,EACdA,WAAY5iC,EADE,EACFA,UACd+kC,EAAeC,IAAEC,UAAUjlC,GAC3BklC,EAAgBF,IAAEC,UAAUrC,GAC9ByF,EAAUtD,EAAavkC,QAAQ/S,MACnCs3C,EAAavkC,QAAQ/S,MAAgBs3C,EAAavkC,QAAQ9S,MAC1Dq3C,EAAavkC,QAAQ9S,MAAgB26C,EACrCtD,EAAazgB,OAAOC,SAAQ,SAACC,GAEzBA,EAAQlV,WAAa3S,IAAuBC,iBAAiBvC,KAC7DmqB,EAAQlV,WAAa3S,IAAuBE,gBAAgBxC,IAE5DmqB,EAAQlV,SAAW3S,IAAuBF,OAAOpC,IACxCmqB,EAAQlV,WAAa3S,IAAuBF,OAAOpC,MAC5DmqB,EAAQlV,SACNkV,EAAQ/U,eAAiB/T,IAAOU,eAAe/B,IAC3CsC,IAAuBC,iBAAiBvC,IACxCsC,IAAuBE,gBAAgBxC,QAGjD0qC,EAAaljB,WAAW0C,SAAQ,SAACC,GACP,IAApBA,EAAQiS,UACVjS,EAAQiS,QAAU/oC,KAAe,MAIrCq3C,EAAaljB,WAAW0C,SAAQ,SAACC,GAC3BA,EAAQiS,UAAYhpC,KAAe,IACrC+2B,EAAQiS,QAAU,GAEhBjS,EAAQiS,UAAY/oC,KAAe,IACrC82B,EAAQiS,QAAUhpC,KAAe,MAGrCs3C,EAAaljB,WAAW0C,SAAQ,SAACC,GACP,IAApBA,EAAQiS,UACVjS,EAAQiS,QAAU/oC,KAAe,MAKrCq3C,EAAavkC,QAAQ/S,MAAcy4B,UAAYhnB,KAAO1C,OAAOnC,IAC7D0qC,EAAavkC,QAAQ9S,MAAcw4B,UAAYhnB,KAAOzC,OAAOpC,IAE7D0qC,EAAavkC,QAAQ/S,MAAc+W,GAAK/W,KAAe,EACvDs3C,EAAavkC,QAAQ9S,MAAc8W,GAAK9W,KAAe,EA7CjC,UA+CC,EAAK03C,4BAC1BL,EACAG,EA9vByB,EAgwBzB,GAnDoB,eA+ChBG,EA/CgB,yBAsDfA,GAtDe,4CAhqBL,EAytBnBiD,kBAztBmB,uCAytBC,WAAO9S,GAAP,yBAAAnxB,EAAA,6DAClB,EAAKM,SAAS,CAAEmgC,SAAS,IADP,EAEgB,EAAKrgC,MAA/BzE,EAFU,EAEVA,UAAW4iC,EAFD,EAECA,WACfmC,EAAeC,IAAEC,UAAUjlC,GACzBklC,EAAgBF,IAAEC,UAAUrC,GAC9BpN,EAAM/lB,eAAiB/T,IAAOM,UAAU3B,MACtC/M,MAEAkoC,EAAMlmB,WAAa3S,IAAuBF,OAAOpC,KACjB,IAAhC0qC,EAAavkC,QAAQK,SAErB20B,EAAMlmB,SAAW3S,IAAuBH,OAAOnC,KAC7Cm7B,EAAM/lB,eAAiB/T,IAAOM,UAAU3B,KACtCm7B,EAAMlmB,WAAa3S,IAAuBF,OAAOpC,MACnDm7B,EAAMlmB,SAAW3S,IAAuBH,OAAOnC,MAGrDm7B,EAAQ,EAAK+S,iBAAiB/S,EAAOuP,EAAavkC,SAClDukC,EAAe,EAAKyD,eAAezD,EAAcvP,IAEnDuP,EAAazgB,OAAOkR,EAAMhxB,GAAK,GAAKgxB,EApBlB,SAsBK,EAAK4P,4BAC1BL,EACAG,EApyBqB,EAsyBrB1P,EAAMhxB,IA1BU,OAsBZ6gC,EAtBY,OA4BlB,EAAK1gC,SAAL,2BAAmB0gC,GAAnB,IAA6BP,SAAS,KA5BpB,4CAztBD,wDAwvBnByD,iBAAmB,SAAC/S,EAAOlgC,GACzB,IAAM9D,EACJgkC,EAAMlmB,WAAa3S,IAAuBF,OAAOpC,IAC7C/E,EAAQ5H,MAAcsL,IACtB1D,EAAQ7H,MAAcuL,IAI5B,OAHIw8B,EAAMS,aAAezkC,EAAKgkC,EAAMS,aAAezkC,EAC1CgkC,EAAMS,aAAenmC,MAC5B0lC,EAAMS,aAAenmC,KAChB0lC,GAhwBU,EAmwBnBiT,sBAnwBmB,uCAmwBK,WAAOxmB,GAAP,2BAAA5d,EAAA,6DACtB,EAAKM,SAAS,CAAEmgC,SAAS,IADH,EAEU,EAAKrgC,MAA/BzE,EAFgB,EAEhBA,UAAW4iC,EAFK,EAELA,WACXmC,EAAeC,IAAEC,UAAUjlC,GAC3BklC,EAAgBF,IAAEC,UAAUrC,GAClCmC,EAAaljB,WAAWI,EAAUzd,GAAK,GAAKyd,EAEtCilB,EACJjlB,EAAUH,cAAgBnnB,KAAYO,iBAAiBb,IARnC,SAUD,EAAK+qC,4BACxBL,EACAG,EACAgC,EA7zByB,EALL,EAm0BpBjlB,EAAUzd,IAdU,OAUlB6gC,EAVkB,OAiBtB,EAAK1gC,SAAL,2BAAmB0gC,GAAnB,IAA6BP,SAAS,KAjBhB,4CAnwBL,wDAuxBnB4D,mBAvxBmB,uCAuxBE,WAAOrb,GAAP,yBAAAhpB,EAAA,6DACnB,EAAKM,SAAS,CAAEmgC,SAAS,IADN,EAEa,EAAKrgC,MAA/BzE,EAFa,EAEbA,UAAW4iC,EAFE,EAEFA,WACXmC,EAAeC,IAAEC,UAAUjlC,GAC3BklC,EAAgBF,IAAEC,UAAUrC,GAClCmC,EAAavO,QAAQnJ,EAAO7oB,GAAK,GAAK6oB,EALnB,SAQI,EAAK+X,4BAC1BL,EACAG,EAl1BsB,EAo1BtB7X,EAAO7oB,IAZU,OAQb6gC,EARa,OAcnB,EAAK1gC,SAAL,2BAAmB0gC,GAAnB,IAA6BP,SAAS,EAAO6D,cAAc,KAdxC,2CAvxBF,wDAwyBnBC,iBAxyBmB,uCAwyBA,WAAOC,GAAP,yBAAAxkC,EAAA,6DACjB,EAAKM,SAAS,CAAEmgC,SAAS,IADR,EAEe,EAAKrgC,MAA/BzE,EAFW,EAEXA,UAAW4iC,EAFA,EAEAA,WACXmC,EAAeC,IAAEC,UAAUjlC,GAC3BklC,EAAgBF,IAAEC,UAAUrC,GAClCmC,EAAa/N,MAAM6R,EAAKrkC,GAAK,GAAKqkC,EALjB,SAQM,EAAKzD,4BAC1BL,EACAG,EAl2BoB,EAo2BpB2D,EAAKrkC,IAZU,OAQX6gC,EARW,OAcjB,EAAK1gC,SAAL,2BAAmB0gC,GAAnB,IAA6BP,SAAS,KAdrB,2CAxyBA,wDA2zBnBgE,yBA3zBmB,uCA2zBQ,WAAO3hB,GAAP,2BAAA9iB,EAAA,yDACzB,EAAKM,SAAS,CAAEmgC,SAAS,IADA,EAEO,EAAKrgC,MAA/BzE,EAFmB,EAEnBA,UAAW4iC,EAFQ,EAERA,WACbmC,EAAeC,IAAEC,UAAUjlC,GACzBklC,EAAgBF,IAAEC,UAAUrC,GAKhCmC,EAAa1jC,cAAc,GAAGi0B,cAAgBnO,EAAamO,YATpC,gCAWNiJ,YACf,kBACApX,EAAamO,aAbQ,OAWjB6P,EAXiB,OAgBvBhe,EAAa3zB,SAAWwsB,KAAKC,MAAW,IAALklB,GAAc,KAAKrlB,QAAQ,GAhBvC,cAmBT,GAED,EAEbilB,EAAa1jC,cAAc,GAAG1N,aAAewzB,EAAaxzB,YAC1DoxC,EAAa1jC,cAAc,GAAGzN,cAAgBuzB,EAAavzB,aAC3DmxC,EAAa1jC,cAAc,GAAGpM,QAAUkyB,EAAalyB,QAE1C,EAEb8vC,EAAa1jC,cAAc8lB,EAAa3iB,GAAK,GAAK2iB,EA7BzB,UA8BF,EAAKie,4BAC1BL,EACAG,EAx4ByB,EA04BzB/d,EAAa3iB,IAlCU,QA8BnB6gC,EA9BmB,OAsCzB,EAAK1gC,SAAL,2BAAmB0gC,GAAnB,IAA6BP,SAAS,KAtCb,4CA3zBR,wDAo2BnBnsB,kBAAoB,SAACI,GAEnB,IAAMF,EAAcrrB,IAChBurB,EACFC,aAAa+vB,WAAWlwB,GAExBG,aAAa2kB,QAAQ9kB,EAAa4Q,KAAKE,UAAU,EAAKllB,MAAMzE,aA12B7C,EA+2BnBgpC,+BA/2BmB,uCA+2Bc,WAAO7hB,EAAc8hB,GAArB,yBAAA5kC,EAAA,0DAC3B4kC,EAD2B,gBAE7B,EAAKtkC,UAAS,SAACoR,GAAD,MAAgB,CAC5B/V,UAAU,2BACL+V,EAAU/V,WADN,IAEPqB,cAAe,CAAC,2BAET0U,EAAU/V,UAAUqB,cAAc,IAF1B,IAGXigC,cAAena,EAAama,cAC5Bra,aAAcE,EAAaF,sBATN,8BAe7B,EAAKtiB,SAAS,CAAEmgC,SAAS,IAfI,EAgBG,EAAKrgC,MAA/BzE,EAhBuB,EAgBvBA,UAAW4iC,EAhBY,EAgBZA,WACXmC,EAAeC,IAAEC,UAAUjlC,GAC3BklC,EAAgBF,IAAEC,UAAUrC,GAElCmC,EAAa1jC,cAAc,GAAK8lB,EApBH,UAsBN,EAAKie,4BAC1BL,EACAG,EAr7BoB,EAu7BpB,GACA,GACA,GA5B2B,QAsBvBG,EAtBuB,OAgC7B,EAAK1gC,SAAL,2BAAmB0gC,GAAnB,IAA6BP,SAAS,KAhCT,4CA/2Bd,0DAm5BnBoE,gBAn5BmB,uCAm5BD,WAAOhpC,GAAP,yBAAAmE,EAAA,6DAChB,EAAKM,SAAS,CAAEmgC,SAAS,IADT,EAEkB,EAAKrgC,MAA/BzE,EAFQ,EAERA,UAAW4iC,EAFH,EAEGA,WACfmC,EAAeC,IAAEC,UAAUjlC,GACzBklC,EAAgBF,IAAEC,UAAUrC,GAClCmC,EAAavkC,QAAQD,KAAKL,GALV,SAWK,EAAKipC,6BACxBpE,EACA7kC,GAbc,cAWhB6kC,EAXgB,iBAkBO,EAAKK,4BAC1BL,EACAG,EACA53C,IAr9ByB,EAPH,EA69BtBA,IAAY,EAAI4S,EAAOsE,IAtBT,QAkBV6gC,EAlBU,OAwBhB,EAAK1gC,SAAL,2BAAmB0gC,GAAnB,IAA6BP,SAAS,KAxBtB,4CAn5BC,wDA+6BnBsE,kBAAoB,SAAC3uB,GAGnB,OAFAA,EAAQ,EAAK4uB,iBAAiB5uB,GAC9BA,EAAQ,EAAK6uB,cAAc7uB,IAj7BV,EAq7BnB0uB,6BAr7BmB,uCAq7BY,WAAOpE,EAAc7kC,GAArB,eAAAmE,EAAA,6DACzBgpB,EAAS0T,YAAoBgE,EAAavO,QAAQ31B,OAAS,IACxD3O,OAASgO,EAAO0lB,OACvByH,EAAOsJ,SAAWz2B,EAAOymB,cAAgBzmB,EAAOlH,IAChDq0B,EAAOoJ,QAAUv2B,EAAOsE,GACxB6oB,EAAO75B,QAAU0M,EAAO2lB,WACxBkf,EAAavO,QAAQj2B,KAAK8sB,GANG,kBAQtB0X,GARsB,2CAr7BZ,0DAg8BnBwE,+BAh8BmB,uCAg8Bc,WAAOvpC,GAAP,SAAAqE,EAAA,6DAE/BrE,EAAUw2B,QAAUx2B,EAAUw2B,QAAQ9S,QACpC,SAAC6S,GAAD,OAAUA,EAAKG,gBAAkBn5B,KAAcC,iBAAiBnD,OAElE2F,EAAUQ,QAAQ+jB,QAAlB,uCAA0B,WAAOC,GAAP,SAAAngB,EAAA,yDACpBmgB,EAAQ0B,YAAchnB,KAAO1C,OAAOnC,IADhB,gCAEJ,EAAK8uC,6BAA6BnpC,EAAWwkB,GAFzC,OAEtBxkB,EAFsB,kDAA1B,uDAL+B,kBAWxBA,GAXwB,2CAh8Bd,wDA88BnBwpC,eA98BmB,uCA88BF,WAAOhU,GAAP,yBAAAnxB,EAAA,6DACf,EAAKM,SAAS,CAAEmgC,SAAS,IADV,EAGmB,EAAKrgC,MAA/BzE,EAHO,EAGPA,UAAW4iC,EAHJ,EAGIA,WACfmC,EAAeC,IAAEC,UAAUjlC,GAC3BklC,EAAgBF,IAAEC,UAAUrC,QAClBt9B,IAAVkwB,IACFA,EAAQ+K,YAAmB,GAES,IAAhCwE,EAAavkC,QAAQK,SACvB20B,EAAMlmB,SAAW3S,IAAuBC,iBAAiBvC,MAI7D0qC,EAAazgB,OAAO/jB,KAAKi1B,GAdV,SAiBQ,EAAK4P,4BAC1BL,EACAG,EAphCqB,EAshCrB1P,EAAMhxB,IArBO,OAiBT6gC,EAjBS,OAuBf,EAAK1gC,SAAL,2BAAmB0gC,GAAnB,IAA6BP,SAAS,KAvBvB,4CA98BE,wDA6+BnB2E,iBA7+BmB,uCA6+BA,WAAOjU,GAAP,mBAAAnxB,EAAA,6DACbrE,EAAY,EAAKyE,MAAMzE,UAErB2nB,EACJ,EAAKljB,MAAMm+B,WAAW/C,mBACpB7/B,EAAUqB,cAAc,GAAG4lB,cAC3BO,MANa,SAOEsN,YAAe,EAAKrwB,MAAMzE,UAAW2nB,GAPvC,cAObna,EAPa,gBAQiCD,YAChDC,EACAgoB,EACA,EAAK/wB,MAAMzE,UAAUqB,cAAc,GAAGyC,UACtC,GAZe,OAQjB9D,EAAUskB,OAAOkR,EAAMhxB,GAAK,GAAGg8B,WARd,OAejB,EAAK77B,SAAS,CAAE3E,UAAWA,EAAW8kC,SAAS,IAf9B,2CA7+BA,wDA+/BnB4E,mBA//BmB,uCA+/BE,WAAOC,GAAP,yBAAAtlC,EAAA,6DACnB,EAAKM,SAAS,CAAEmgC,SAAS,IADN,EAEe,EAAKrgC,MAA/BzE,EAFW,EAEXA,UAAW4iC,EAFA,EAEAA,WACbmC,EAAeC,IAAEC,UAAUjlC,GAC3BklC,EAAgBF,IAAEC,UAAUrC,QACrBt9B,IAATqkC,IACFA,EAAO,CACLnlC,GAAI,EAEJsd,YAAannB,KAAYC,cAAcP,IACvCiV,SAAU/S,KAAUC,OAAOnC,IAC3B8nB,UAAW,EAEXQ,aAAcnjB,IAAUC,MAAMpF,IAC9BtH,OAAQ,EACR1B,MAAO,EACPW,YAAa,GACbunC,eAAgB,EAChB9W,iBAAkB,KAItBsiB,EAAaljB,WAAWthB,KAAKopC,GAtBV,SA0BI,EAAKvE,4BAC1BL,EACAG,EA7kCoB,EA+kCpByE,EAAKnlC,IA9BY,OA0Bb6gC,EA1Ba,OAgCnB,EAAK1gC,SAAL,2BAAmB0gC,GAAnB,IAA6BP,SAAS,KAhCnB,4CA//BF,wDAsiCnB8E,wBAA0B,SAAC/3C,GACzB,IAAIg4C,EAAQ,EAAKplC,MAAMzE,UAEnB8pC,EAAY,EAChB,EAAKrlC,MAAMzE,UAAU6hB,WAAW0C,SAAQ,SAACC,GACnCA,EAAQ1C,cAAgBnnB,KAAYO,iBAAiBb,MACvDyvC,GAAatlB,EAAQrC,cAIzB2nB,GAAa,EAAKrlC,MAAMzE,UAAUqB,cAAc,GAAG7N,QAAU,IAC7D,IAAIu2C,GAAS,EAUb,GATAF,EAAMvlB,OAAOC,SAAQ,SAACC,GAChBA,EAAQ/U,eAAiB5d,IAC3Bk4C,GAAS,EACL/pB,KAAKQ,IAAIgE,EAAQrC,UAAY2nB,GAAa,IAC5CtlB,EAAQrC,UAAY2nB,EACpB,EAAKxB,kBAAkB9jB,QAIzBslB,EAAY,IAAgB,IAAXC,EAAkB,CACrC,IAAMvU,EAAQ+K,YAAmB,EAAK97B,MAAMzE,UAAUskB,OAAOzjB,OAAS,GACtE20B,EAAM/lB,aAAe/T,IAAOW,4BAA4BhC,IACxDm7B,EAAMlmB,SAAW3S,IAAuBC,iBAAiBvC,IACzDm7B,EAAM5lB,gBAAkB9S,IAAUC,YAAY1C,IAC9Cm7B,EAAMrT,UAAY2nB,EAClBtU,EAAMI,UAAY,EAElB,EAAK4T,eAAehU,GACpB,EAAK5wB,gBAvnCgB,GAunCoBF,MA7mCrB,IAyCL,EAwkCnBslC,yBAA2B,SAAChqC,GAE1B,IAAI8pC,EAAY,EAChB9pC,EAAU6hB,WAAW0C,SAAQ,SAACC,GACxBA,EAAQ1C,cAAgBnnB,KAAYO,iBAAiBb,MACvDyvC,GAAatlB,EAAQrC,cAIzB2nB,GAAa9pC,EAAUqB,cAAc,GAAG7N,QAAU,IAClD,IAAIu2C,GAAS,EAUb,GATA/pC,EAAUskB,OAAOC,SAAQ,SAACC,GACpBA,EAAQ/U,eAAiB/T,IAAOW,4BAA4BhC,MAC9D0vC,GAAS,EACL/pB,KAAKQ,IAAIgE,EAAQrC,UAAY2nB,GAAa,IAC5CtlB,EAAQrC,UAAY2nB,OAKtBA,EAAY,IAAgB,IAAXC,EAAkB,CACrC,IAAMvU,EAAQ+K,YAAmBvgC,EAAUskB,OAAOzjB,OAAS,GAC3D20B,EAAM/lB,aAAe/T,IAAOW,4BAA4BhC,IACxDm7B,EAAMlmB,SAAW3S,IAAuBC,iBAAiBvC,IACzDm7B,EAAM5lB,gBAAkB9S,IAAUC,YAAY1C,IAC9Cm7B,EAAMrT,UAAY2nB,EAClBtU,EAAMI,UAAY,EAElB51B,EAAUskB,OAAO/jB,KAAKi1B,GACtB,EAAK5wB,gBAxpCgB,GAwpCoBF,MA9oCrB,EAgpCtB,OAAO1E,GAvmCU,EA0mCnBiqC,gBA1mCmB,uCA0mCD,WAAO5c,GAAP,yBAAAhpB,EAAA,6DAChB,EAAKM,SAAS,CAAEmgC,SAAS,IADT,EAEkB,EAAKrgC,MAA/BzE,EAFQ,EAERA,UAAW4iC,EAFH,EAEGA,WACfmC,EAAeC,IAAEC,UAAUjlC,GAC3BklC,EAAgBF,IAAEC,UAAUrC,QACjBt9B,IAAX+nB,IACFA,EAAS0T,eAGX1T,EAAOoJ,QAAU,EACjBpJ,EAAOsJ,SAAWoO,EAAavO,QAAQ,GAAGG,SAC1CtJ,EAAO2T,WAAa+D,EAAa1jC,cAAc,GAAG9N,UAClD85B,EAAO75B,QACLuxC,EAAavkC,QAAQK,OAAS,EAC1BkkC,EAAavkC,QAAQ,GAAGqlB,WACxBkf,EAAavkC,QAAQ,GAAGqlB,WAE9Bkf,EAAavO,QAAQj2B,KAAK8sB,GAjBV,UAmBO,EAAK+X,4BAC1BL,EACAG,EAhrCsB,EAkrCtB7X,EAAO7oB,IAvBO,QAmBV6gC,EAnBU,OA0BhB,EAAK1gC,SAAL,2BAAmB0gC,GAAnB,IAA6BP,SAAS,EAAO6D,cAAc,KA1B3C,4CA1mCC,wDAuoCnBuB,cAvoCmB,uCAuoCH,WAAOC,EAASx3C,EAAWgkC,GAA3B,2BAAAtyB,EAAA,kEACEiB,IAAZ6kC,IACFA,EAAUnsC,KAAYG,iBAAiB9D,IACvC1H,EAAY,EACZgkC,EAAW,IAEb,EAAKhyB,SAAS,CAAEmgC,SAAS,IANX,EAOoB,EAAKrgC,MAA/BzE,EAPM,EAONA,UAAW4iC,EAPL,EAOKA,WACbmC,EAAeC,IAAEC,UAAUjlC,GAC3BklC,EAAgBF,IAAEC,UAAUrC,GAE5BiG,EAAO,CACXrkC,GAAIugC,EAAa/N,MAAMn2B,OAAS,EAChCk2B,YAAaoT,EACbj4C,OAAQ,EACRglC,QAAS,EACTvkC,UAAWA,EACXgkC,SAAUA,GAEZoO,EAAa/N,MAAMz2B,KAAKsoC,GAnBV,SAsBS,EAAKzD,4BAC1BL,EACAG,EA/sCoB,EAitCpB2D,EAAKrkC,IA1BO,OAsBR6gC,EAtBQ,OA4Bd,EAAK1gC,SAAL,2BAAmB0gC,GAAnB,IAA6BP,SAAS,KA5BxB,4CAvoCG,4DAwqCnBsF,mBAxqCmB,uCAwqCE,WAAO5lC,GAAP,+BAAAH,EAAA,0DACf,EAAKy/B,WADU,oBAEjB,EAAKn/B,SAAS,CAAEmgC,SAAS,IAFR,EAGiB,EAAKrgC,MAA/BzE,EAHS,EAGTA,UAAW4iC,EAHF,EAGEA,WACfmC,EAAeC,IAAEC,UAAUjlC,GACzBklC,EAAgBF,IAAEC,UAAUrC,QAMvBt9B,KAFP+kC,EAAKtF,EAAavkC,QAAQwjB,MAAK,SAACiC,GAAD,OAAOA,EAAEzhB,KAAOA,OAE3B6lC,EAAGnkB,YAAchnB,KAAOC,MAAM9E,IAXrC,iCAYM,EAAKiwC,mBAAmBvF,EAAcsF,EAAG5T,SAZ/C,OAYfsO,EAZe,eAoBjB,IANAA,EAAavkC,QAAQ+pC,OAAO/lC,EAAK,EAAG,GAEpCugC,EAAavO,QAAUuO,EAAavO,QAAQ9S,QAAO,SAAC6S,GAC9CA,EAAKE,SAAWjyB,IAAI+xB,EAAKE,SAAW,MAGrCp2B,EAAI,EAAGA,GAAK0kC,EAAavkC,QAAQK,SAAUR,EAC9C0kC,EAAavkC,QAAQH,EAAI,GAAGmE,GAAKnE,EArBlB,iBAuBI,EAAKkpC,+BAA+BxE,GAvBxC,WAuBjBA,EAvBiB,OAyBbmC,GAAU,EAEsB,IAAhCnC,EAAavkC,QAAQK,OA3BR,kCA6BM,EAAK2pC,0BAA0BzF,GA7BrC,eA6BfA,EA7Be,iBA8BM,EAAK0F,qBAAqB1F,GA9BhC,QA8BfA,EA9Be,OA+BfmC,GAAU,EA/BK,yBAmCM,EAAK9B,4BAC1BL,EACAG,EACAgC,EA3vCuB,EAPH,EAmwCpB1iC,GAvCe,QAmCX6gC,EAnCW,OAyCjB,EAAK1gC,SAAL,2BAAmB0gC,GAAnB,IAA6BP,SAAS,KAzCrB,4CAxqCF,wDAqtCnB4F,kBArtCmB,uCAqtCC,WAAOlmC,GAAP,2BAAAH,EAAA,0DACd,EAAKy/B,WADS,iBAgBhB,IAZA,EAAKn/B,SAAS,CAAEmgC,SAAS,IAJT,EAKkB,EAAKrgC,MAA/BzE,EALQ,EAKRA,UAAW4iC,EALH,EAKGA,WACfmC,EAAeC,IAAEC,UAAUjlC,GACzBklC,EAAgBF,IAAEC,UAAUrC,GAG9BmC,EAAazgB,OAAO9f,EAAK,GAAGiL,eAAiB/T,IAAOM,UAAU3B,MAChE0qC,EAAe,EAAK4F,iBAAiB5F,IAEvCA,EAAazgB,OAAOimB,OAAO/lC,EAAK,EAAG,GACnC0gC,EAAcpc,iBAAiByhB,OAAO/lC,EAAK,EAAG,GAEzCnE,EAAI,EAAGA,GAAK0kC,EAAazgB,OAAOzjB,SAAUR,EAC7C0kC,EAAazgB,OAAOjkB,EAAI,GAAGmE,GAAKnE,EAChC6kC,EAAcpc,iBAAiBzoB,EAAI,GAAGmE,GAAKnE,EAlB7B,iBAuBO,EAAK+kC,4BAC1BL,EACAG,EA3xCuB,EA6xCvB,GA3Bc,QAuBVG,EAvBU,OA+BhB,EAAK1gC,SAAL,2BAAmB0gC,GAAnB,IAA6BP,SAAS,KA/BtB,4CArtCD,wDAwvCnB8F,sBAxvCmB,uCAwvCK,WAAOpmC,GAAP,iCAAAH,EAAA,0DAClB,EAAKy/B,WADa,iBAcpB,GAVA,EAAKn/B,SAAS,CAAEmgC,SAAS,IAJL,EAKc,EAAKrgC,MAA/BzE,EALY,EAKZA,UAAW4iC,EALC,EAKDA,WACbmC,EAAeC,IAAEC,UAAUjlC,GAC3BklC,EAAgBF,IAAEC,UAAUrC,QAOnBt9B,KALTulC,EAAS9F,EAAaljB,WAAW6B,QACrC,SAAConB,GAAD,OACEA,EAAKhpB,cAAgBnnB,KAAYO,iBAAiBb,KAClDywC,EAAKtmC,KAAOA,OAEYqmC,EAAOhqC,OAAS,QAKtByE,KAJdylC,EAAchG,EAAazgB,OAAOZ,QACtC,SAAC8R,GAAD,OACEA,EAAM/lB,eAAiB/T,IAAOW,4BAA4BhC,SAE7B0wC,EAAYlqC,OAAS,EAMpD,IALAkkC,EAAazgB,OAASygB,EAAazgB,OAAOZ,QACxC,SAAC8R,GAAD,OACEA,EAAM/lB,eAAiB/T,IAAOW,4BAA4BhC,OAGzDgG,EAAI,EAAGA,GAAK0kC,EAAazgB,OAAOzjB,SAAUR,EAC7C0kC,EAAazgB,OAAOjkB,EAAI,GAAGmE,GAAKnE,EAChC6kC,EAAcpc,iBAAiBzoB,EAAI,GAAGmE,GAAKnE,EAOjD,IAFA0kC,EAAaljB,WAAW0oB,OAAO/lC,EAAK,EAAG,GAElCnE,EAAI,EAAGA,GAAK0kC,EAAaljB,WAAWhhB,SAAUR,EACjD0kC,EAAaljB,WAAWxhB,EAAI,GAAGmE,GAAKnE,EAnClB,iBAuCG,EAAK+kC,4BAC1BL,EACAG,EAn1CkB,EAq1ClB1gC,GA3CkB,QAuCd6gC,EAvCc,OA6CpB,EAAK1gC,SAAL,2BAAmB0gC,GAAnB,IAA6BP,SAAS,KA7ClB,4CAxvCL,wDAyyCnBkG,mBAzyCmB,uCAyyCE,WAAOxmC,GAAP,6BAAAH,EAAA,0DACf,EAAKy/B,WADU,iBAWjB,IAPI6E,GAAe,EACnB,EAAKhkC,SAAS,CAAEmgC,SAAS,IALR,EAMiB,EAAKrgC,MAA/BzE,EANS,EAMTA,UAAW4iC,EANF,EAMEA,WACbmC,EAAeC,IAAEC,UAAUjlC,GAC3BklC,EAAgBF,IAAEC,UAAUrC,GAG7BviC,EAAI,EAAGA,EAAI0kC,EAAavO,QAAQ31B,SAAUR,EAE3C0kC,EAAavO,QAAQn2B,GAAGmE,KAAOA,GAC9BugC,EAAavO,QAAQn2B,GAAGq2B,gBACvBn5B,KAAcE,sBAAsBpD,KACpC0qC,EAAavO,QAAQn2B,GAAGq2B,gBACtBn5B,KAAcG,kBAAkBrD,KAClC0qC,EAAavO,QAAQn2B,GAAGq2B,gBACtBn5B,KAAcI,oBAAoBtD,MAEtCsuC,GAAe,GArBF,GAyBjB,EAAKhkC,UAAS,SAACoR,GAAD,MAAgB,CAC5B4yB,cAAyC,IAA3B5yB,EAAU4yB,cAAgCA,OAGrC,IAAjBA,EA7Ba,iBA+Bf,IADA5D,EAAavO,QAAQ+T,OAAO/lC,EAAK,EAAG,GAC/BnE,EAAI,EAAGA,GAAK0kC,EAAavO,QAAQ31B,SAAUR,EAC9C0kC,EAAavO,QAAQn2B,EAAI,GAAGmE,GAAKnE,EAhCpB,iBAqCQ,EAAK+kC,4BAC1BL,EACAG,EAj4CkB,EAm4ClB1gC,GAzCa,QAqCT6gC,EArCS,OA2Cf,EAAK1gC,SAAL,2BAAmB0gC,GAAnB,IAA6BP,SAAS,KA3CvB,4CAzyCF,wDAy1CnBmG,iBAz1CmB,uCAy1CA,WAAOzmC,GAAP,2BAAAH,EAAA,0DACb,EAAKy/B,WADQ,iBAUf,IANA,EAAKn/B,SAAS,CAAEmgC,SAAS,IAJV,EAKmB,EAAKrgC,MAA/BzE,EALO,EAKPA,UAAW4iC,EALJ,EAKIA,WACbmC,EAAeC,IAAEC,UAAUjlC,GAC3BklC,EAAgBF,IAAEC,UAAUrC,GAClCmC,EAAa/N,MAAMuT,OAAO/lC,EAAK,EAAG,GAE7BnE,EAAI,EAAGA,GAAK0kC,EAAa/N,MAAMn2B,SAAUR,EAC5C0kC,EAAa/N,MAAM32B,EAAI,GAAGmE,GAAKnE,EAXlB,gBAeQ,EAAK+kC,4BAC1BL,EACAG,EA15CkB,EA45ClB1gC,GAnBa,OAeT6gC,EAfS,OAqBf,EAAK1gC,SAAL,2BAAmB0gC,GAAnB,IAA6BP,SAAS,KArBvB,4CAz1CA,wDAk3CnBoG,cAAgB,SAAC1V,GACf,IAAM2V,EAAe,EAAK1mC,MAAMzE,UAAUw2B,QAAQxS,MAChD,SAACiC,GAAD,OAAOA,EAAEyQ,gBAAkBn5B,KAAcQ,KAAK1D,OAIhD,QAAqBiL,IAAjB6lC,EAA4B,CAC9B,IAAMC,EAAa,CACjB5mC,GAAI,EAAKC,MAAMzE,UAAUw2B,QAAQ31B,OAAS,EAC1C61B,cAAen5B,KAAcQ,KAAK1D,IAClCnI,OAAQ,EACRS,UAAW6iC,EAAMS,aACjBU,SAAU,GACVF,QAAS,EACTjjC,QAAS,EACTwtC,WAAY,GAGd,EAAKiJ,gBAAgBmB,QAErBD,EAAax4C,UAAY6iC,EAAMS,aAC/B,EAAKyS,mBAAmByC,IAv4CT,EA24CnB3C,eAAiB,SAACxoC,EAAWw1B,GAC3B,IAAM2V,EAAenrC,EAAUw2B,QAAQxS,MACrC,SAACiC,GAAD,OAAOA,EAAEyQ,gBAAkBn5B,KAAcQ,KAAK1D,OAIhD,QAAqBiL,IAAjB6lC,EAA4B,CAC9B,IAAMC,EAAa,CACjB5mC,GAAI,EAAKC,MAAMzE,UAAUw2B,QAAQ31B,OAAS,EAC1C61B,cAAen5B,KAAcQ,KAAK1D,IAClCnI,OAAQ,EACRS,UAAW6iC,EAAMS,aACjBU,SAAU,GACVF,QAAS,EACTjjC,QAAS,EACTwtC,WAAY,GAIdhhC,EAAUw2B,QAAQj2B,KAAK6qC,QAIvBD,EAAax4C,UAAY6iC,EAAMS,aAE/Bj2B,EAAUw2B,QAAQ2U,EAAa3mC,GAAK,GAAK2mC,EAG3C,OAAOnrC,GAv6CU,EA06CnB2qC,iBAAmB,SAAC3qC,GAClB,IAAMmrC,EAAenrC,EAAUw2B,QAAQxS,MACrC,SAACiC,GAAD,OAAOA,EAAEyQ,gBAAkBn5B,KAAcQ,KAAK1D,OAIhD,QAAqBiL,IAAjB6lC,EAA4B,CAC9B,IAAM3mC,EAAK2mC,EAAa3mC,GACxBxE,EAAUw2B,QAAQ+T,OAAO/lC,EAAK,EAAG,GAGnC,OAAOxE,GAr7CU,EAw7CnBqrC,iBAAmB,WACjB,OAAO5hB,KAAKC,MAAMD,KAAKE,UAAU,EAAKllB,MAAMzE,UAAUqB,cAAc,MAz7CnD,EA47CnBwY,WAAa,WACX,IAAIyxB,EAAO,EAAKD,mBAChBC,EAAKxnC,SAA6B,OAAlBwnC,EAAKxnC,SAAoB,KAAO,KAChD,IAIIzD,EACJ,IAHA,EAAK2oC,+BAA+BsC,GAFnB,GAKZjrC,EAAI,EAAGA,EA/+CW,IA++CeA,EACpC,EAAKuE,gBAAgBvE,GAAGqE,MA/+CF,GA0CP,EAy8CnB8iC,sBAAwBJ,KACtB,WACE,OAAO,EAAKC,kBA9+CD,KAi/Cb,CAAEkE,SAAS,EAAOC,UAAU,IA98CX,EAi9CnBC,iBAAmB,WAIjB,YAAiBnmC,IAHF,EAAKb,MAAMzE,UAAUQ,QAAQwjB,MAC1C,SAACiC,GAAD,OAAOA,EAAEC,YAAchnB,KAAOC,MAAM9E,QAn9CrB,EAy9CnBqxC,gBAAkB,WAChB,IAAIvQ,EAAW,EAAK12B,MAAMzE,UAAUQ,QAAQwjB,MAC1C,SAACiC,GAAD,OAAOA,EAAEC,YAAchnB,KAAOC,MAAM9E,YAErBiL,IAAb61B,SAIe71B,IAHF,EAAKb,MAAMzE,UAAUg3B,MAAMhT,MACxC,SAACiC,GAAD,OAAOA,EAAE8Q,cAAgB/4B,KAAYE,eAAe7D,QAGpD,EAAK6vC,cACHlsC,KAAYE,eAAe7D,IAC3B2lB,KAAKhF,IAAI,EAAGzqB,KAAuB4qC,EAASniC,KAC5CgnB,KAAK7E,IAAI,EAAG6E,KAAKhF,IAAI,EAAGxqB,KAAqB2qC,EAASniC,SAr+C3C,EA0+CnBqwC,iBAAmB,SAAC5uB,GAClB,IAAI0gB,EAAW1gB,EAAMja,QAAQwjB,MAAK,SAACiC,GAAD,OAAOA,EAAEC,YAAchnB,KAAOC,MAAM9E,YACrDiL,IAAb61B,SAIe71B,IAHFmV,EAAMuc,MAAMhT,MACzB,SAACiC,GAAD,OAAOA,EAAE8Q,cAAgB/4B,KAAYE,eAAe7D,QAGpDogB,EAAMuc,MAAMz2B,KAAK,CACfiE,GAAIiW,EAAMuc,MAAMn2B,OAAS,EACzBk2B,YAAa/4B,KAAYE,eAAe7D,IACxCnI,OAAQ,EACRglC,QAAS,EACTvkC,UAAWqtB,KAAKhF,IAAI,EAAGzqB,KAAuB4qC,EAASniC,KACvD29B,SAAU3W,KAAK7E,IAAI,EAAG6E,KAAKhF,IAAI,EAAGxqB,KAAqB2qC,EAASniC,SAGtE,OAAOyhB,GA1/CU,EA6/CnB6uB,cAAgB,SAAC7uB,GACf,IAAMygB,EAAch8B,KAAOC,MAAM9E,IAE3BsxC,EAAYpuC,KAAcI,oBAAoBtD,IAChD8gC,EAAW1gB,EAAMja,QAAQkjB,QAAO,SAAU6S,GAC5C,OAAOA,EAAKrQ,YAAcgV,KAExB0Q,EAAcnxB,EAAM+b,QAAQ9S,QAAO,SAAU6S,GAC/C,OAAOA,EAAKG,gBAAkBiV,KAG5BvQ,EACqC,OAAvC3gB,EAAMpZ,cAAc,GAAGi0B,YACnBjlC,KACAC,KACFu7C,EACqC,OAAvCpxB,EAAMpZ,cAAc,GAAGi0B,YACnBnlC,KACAC,KA0BN,OAxBI+qC,EAASt6B,OAAS,EACpBs6B,EAAS5W,SAAQ,SAACC,GAChB,GACEA,EAAQxrB,KAAO6yC,GAGD,IAFdD,EAAYloB,QAAO,SAAC6S,GAClB,OAAOA,EAAKE,UAAYjS,EAAQhgB,MAC/B3D,OACH,CACA,IAAMwsB,EAAS,CACb7oB,GAAIiW,EAAM+b,QAAQ31B,OAAS,EAC3B61B,cAAeiV,EACfz5C,OAAQ,EAAKuS,MAAMm+B,WAAWW,YAAY+C,UAC1C3zC,UAAW,EACXgkC,SAAUyE,EAAS5W,EAAQxrB,IAC3By9B,QAASjS,EAAQhgB,IAGnBiW,EAAM+b,QAAQj2B,KAAK8sB,OAKlBue,EAAc,GAEdnxB,GAziDU,EA4iDnB+vB,0BA5iDmB,uCA4iDS,WAAOxqC,GAAP,SAAAqE,EAAA,6DAC1BrE,EAAUskB,OAAOC,SAAQ,SAACC,GACxBA,EAAQlV,SAAW3S,IAAuBC,iBAAiBvC,IAC3DmqB,EAAQoR,UAAU,KAHM,kBAKnB51B,GALmB,2CA5iDT,wDAojDnByqC,qBApjDmB,uCAojDI,WAAOzqC,GAAP,SAAAqE,EAAA,6DACrBrE,EAAUg3B,MAAM8U,MADK,kBAEd9rC,GAFc,2CApjDJ,wDAyjDnB0jC,iBAzjDmB,uCAyjDA,WAAO1jC,EAAW4iC,GAAlB,+BAAAv+B,EAAA,yDACX62B,EAAch8B,KAAOC,MAAM9E,IAE3BsxC,EAAYpuC,KAAcI,oBAAoBtD,IAEhD3E,EAAUsK,EAAUw2B,QAEpBoV,EAAcl2C,EAAQguB,QAAO,SAAU6S,GACzC,OAAOA,EAAKG,gBAAkBiV,KAG5BxQ,EAAWn7B,EAAUQ,QAAQkjB,QAAO,SAAU6S,GAChD,OAAOA,EAAKrQ,YAAcgV,KAGxB1B,EAAY9jC,EAAQmL,OACpBu6B,EACyC,OAA3Cp7B,EAAUqB,cAAc,GAAGi0B,YACvBjlC,KACAC,KACFu7C,EACyC,OAA3C7rC,EAAUqB,cAAc,GAAGi0B,YACvBnlC,KACAC,KAEF27C,EAAc,IAAIC,MAClB7Q,EAASt6B,OAAS,GA1BL,iBA2Bfs6B,EAAS5W,SAAQ,SAACC,GAGhB,GAFAunB,EAAYE,IAAIznB,EAAQhgB,IACxBg1B,EAAY9jC,EAAQmL,OAElB2jB,EAAQxrB,KAAO6yC,GAKD,IAJdD,EAAYloB,QAAO,SAAC6S,GAClB,OACEA,EAAKE,UAAYjS,EAAQhgB,IAAM+xB,EAAKG,gBAAkBiV,KAEvD9qC,OACH,CAGA,IAAMwsB,EAAS,CACb7oB,GAAIg1B,EAAY,EAChB9C,cAAeiV,EACfz5C,OAAQ0wC,EAAWW,YAAY+C,UAC/B3zC,UAAW,EACXgkC,SAAUyE,EAAS5W,EAAQxrB,IAC3By9B,QAASjS,EAAQhgB,IAGnB9O,EAAQ6K,KAAK8sB,QAGb33B,EAAQ6uB,SAAQ,SAAC8I,GAEbA,EAAOqJ,gBAAkBiV,GACzBte,EAAOoJ,UAAYjS,EAAQhgB,KAE3B6oB,EAAOn7B,OAAS0wC,EAAWW,YAAY+C,iBAzDhC,yCAgEQ,EAAKgE,mBAAmBtqC,GAhEhC,QAgEVA,EAhEU,sBAkEjBtK,EAAUA,EAAQguB,QAAO,SAAC6S,GACxB,OACEA,EAAKG,gBAAkBiV,GACtBI,EAAYG,IAAI3V,EAAKE,UAAYF,EAAKG,gBAAkBiV,KAI7D3rC,EAAUw2B,QAAU9gC,EAzEH,kBA0EVsK,GA1EU,4CAzjDA,0DAsoDnBsqC,mBAtoDmB,uCAsoDE,WAAO7vB,EAAO0xB,GAAd,iBAAA9nC,EAAA,sDAanB,IAXMsnC,EAAYpuC,KAAcI,oBAAoBtD,IACpDogB,EAAM+b,QAAU/b,EAAM+b,QAAQ9S,QAAO,SAAU6S,GAC7C,YAAgBjxB,IAAZ6mC,IAEO5V,EAAKG,gBAAkBiV,KAEvBpV,EAAKE,UAAY0V,GAAW5V,EAAKG,gBAAkBiV,MAK3DtrC,EAAI,EAAGA,GAAKoa,EAAM+b,QAAQ31B,SAAUR,EACvCoa,EAAM+b,QAAQn2B,EAAI,GAAGmE,GAAKnE,EAdT,yBAiBZoa,GAjBY,2CAtoDF,0DA0pDnB2xB,eAAiB,WACf,EAAKC,YAAa,EAClB,EAAKC,WAAY,GA5pDA,EA+pDnB5mB,uBAAyB,SAAC8f,GAExB,IADA,IAAI+G,EAAkB,EACblsC,EAAI,EAAGA,EAAImlC,EAAuBhlC,QAAQK,OAAQR,IACzDksC,GACE/G,EAAuBhlC,QAAQH,GAAGulB,QACjC,EAAI4f,EAAuBhlC,QAAQH,GAAGwlB,WAAa,KAExD,OAAO0mB,GAtqDU,EAyqDnBC,gBAAkB,WAChB,IAAMC,EAAQr/C,IAAa8R,KAAOzC,OAAOpC,IAAM6E,KAAO1C,OAAOnC,IACzDotC,EAAW,EAAKhjC,MAAMzE,UAAUQ,QAAQwjB,MAC1C,SAACiC,GAAD,OAAOA,EAAEC,YAAcumB,KAmBzB,YAhBiBnnC,IAAbmiC,GAA0Br6C,MACgB,IAAxC,EAAKqX,MAAMzE,UAAUQ,QAAQK,OAC/B4mC,EAAW,EAAKhjC,MAAMzE,UAAUQ,QAAQwjB,MACtC,SAACiC,GAAD,OAAOA,EAAEC,YAAchnB,KAAO1C,OAAOnC,YAMtBiL,KAHjBmiC,EAAW,EAAKhjC,MAAMzE,UAAUQ,QAAQwjB,MACtC,SAACiC,GAAD,OAAOA,EAAEC,YAAchnB,KAAOE,gBAAgB/E,UAG9CotC,EAAW,EAAKhjC,MAAMzE,UAAUQ,QAAQwjB,MACtC,SAACiC,GAAD,OAAOA,EAAEC,YAAchnB,KAAOC,MAAM9E,SAKrCotC,EAASjjC,GAAK,GA/rDJ,EAksDnBkoC,iBAAmB,SAAClH,GAClB,IAAMiH,EAAQr/C,IAAa8R,KAAOzC,OAAOpC,IAAM6E,KAAO1C,OAAOnC,IACzDotC,EAAWjC,EAAuBhlC,QAAQwjB,MAC5C,SAACiC,GAAD,OAAOA,EAAEC,YAAcumB,KAmBzB,YAhBiBnnC,IAAbmiC,GAA0Br6C,MACkB,IAA1Co4C,EAAuBhlC,QAAQK,OACjC4mC,EAAWjC,EAAuBhlC,QAAQwjB,MACxC,SAACiC,GAAD,OAAOA,EAAEC,YAAchnB,KAAO1C,OAAOnC,YAMtBiL,KAHjBmiC,EAAWjC,EAAuBhlC,QAAQwjB,MACxC,SAACiC,GAAD,OAAOA,EAAEC,YAAchnB,KAAOE,gBAAgB/E,UAG9CotC,EAAWjC,EAAuBhlC,QAAQwjB,MACxC,SAACiC,GAAD,OAAOA,EAAEC,YAAchnB,KAAOC,MAAM9E,SAKrCotC,EAASjjC,GAAK,GAxtDJ,EA2tDnB8iC,kBAAoB,SAAC9B,EAAwBC,GAG3C,EAAKiC,QAAU,EAAKgF,iBAAiBlH,GACrC,IAAIjd,EACFid,EAAuBhlC,QAAQ,EAAKknC,SAAS/gB,cAC7C6e,EAAuBhlC,QAAQ,EAAKknC,SAAS1uC,IACzCsvB,EAAexC,YAAe0f,EAAuBhlC,SACvD8nB,IAEFC,EADYpC,YAA4Bqf,EAAuBhlC,SACxCsmB,iBAOzB,GAJA0e,EAAyB,EAAKwE,yBAC5BxE,GAGEp4C,IACF,IAAsB,IAAlB,EAAKs6C,QAAgB,CACvB,IAAIrnC,EACJ,IAAKA,EAAI,EAAGA,EAAImlC,EAAuBxO,MAAMn2B,OAAQR,IAAK,CACxD,IAAM48B,EAAczuB,SACjBg3B,EAAuBxO,MAAM32B,GAAG62B,QAAU,IACzC,EAAKxR,uBAAuB8f,IAG1B5yC,EAAM21B,EAqCZ,IAlCwB,IAAtB,EAAKokB,cAtyDW,IAuyDhBlH,GACAD,EAAuBxO,MAAM32B,GAAG02B,cAC9B/4B,KAAYC,iBAAiB5D,MAI7B4iC,IAAgBuI,EAAuBxO,MAAM32B,GAAGnO,QAChDszC,EAAuBxO,MAAM32B,GAAG62B,SAAW,IAE3CsO,EAAuBxO,MAAM32B,GAAGnO,OAAS+qC,GAlzD7B,IAqzDVwI,GAAqF,IAA1CD,EAAuBhlC,QAAQK,UAGzEynB,GAC+C,IAA9Ckd,EAAuBxO,MAAM32B,GAAG1N,WACjCC,IAAQ4yC,EAAuBxO,MAAM32B,GAAGs2B,UACM,MAA7C6O,EAAuBxO,MAAM32B,GAAGs2B,UAChC/jC,EAAM,KAER4yC,EAAuBxO,MAAM32B,GAAGs2B,SAAW/jC,GAGE,MAA7C4yC,EAAuBxO,MAAM32B,GAAGs2B,UAChC/jC,EAAM,GACN4yC,EAAuBxO,MAAM32B,GAAG1N,YAAcC,IAE9C4yC,EAAuBxO,MAAM32B,GAAG1N,UAAYC,MAM1B,IAAtB,EAAK+5C,cACLnH,EAAuBxO,MAAM32B,GAAG02B,cAC9B/4B,KAAYE,eAAe7D,IAC7B,CACA,IAAImL,EAAWggC,EAAuBhlC,QAAQwjB,MAC5C,SAACiC,GAAD,OAAOA,EAAEC,YAAchnB,KAAOC,MAAM9E,YAErBiL,IAAbE,GAEAggC,EAAuBxO,MAAM32B,GAAG1N,YAC9BqtB,KAAKhF,IAAI,EAAGzqB,KAAuBiV,EAASxM,MAC9CwM,EAAS3E,OAAS,IAElB2kC,EAAuBxO,MAAM32B,GAAG1N,UAAYqtB,KAAKhF,IAC/C,EACAzqB,KAAuBiV,EAASxM,KAElCwsC,EAAuBxO,MAAM32B,GAAGs2B,SAAW3W,KAAKhF,IAC9C,EACAgF,KAAK7E,IAAI,EAAG3qB,KAAqBgV,EAASxM,QAOpD,IAAKqH,EAAI,EAAGA,EAAImlC,EAAuBhP,QAAQ31B,OAAQR,IAAK,CAU1D,GAPEmlC,EAAuBhP,QAAQn2B,GAAGq2B,gBAClCn5B,KAAcM,gBAAgBxD,MAE9BmrC,EAAuBhP,QAAQn2B,GAAG7M,QAChCgyC,EAAuBhlC,QAAQ,EAAKknC,SAAS7hB,YA72D/B,IAi3DhB4f,GA92DgB,IA+2DhBA,EACA,CACA,IAAM7yC,EAAM21B,EAEVid,EAAuBhP,QAAQn2B,GAAGq2B,gBAChCn5B,KAAcC,iBAAiBnD,KACe,IAAhDmrC,EAAuBhP,QAAQn2B,GAAG1N,WAClCC,IAAQ4yC,EAAuBhP,QAAQn2B,GAAGs2B,UAC1C/jC,EAAM,IAEN4yC,EAAuBhP,QAAQn2B,GAAGs2B,SAAW/jC,QAIC0S,IAA9CkgC,EAAuBhP,QAAQn2B,GAAGo2B,UACpC+O,EAAuBhP,QAAQn2B,GAAGo2B,QACU,IAA1C+O,EAAuBhlC,QAAQK,OAAe,EAAI,GAElD2kC,EAAuBhlC,QAAQK,OAAS,GAp4D1B,IAu4Dd4kC,GAp4Dc,IAq4DdA,GACAD,EAAuBhP,QAAQn2B,GAAGo2B,QAAU,EAAI,GAG9C+O,EAAuBhP,QAAQn2B,GAAGq2B,gBAChCn5B,KAAcC,iBAAiBnD,KACjCmrC,EAAuBhP,QAAQn2B,GAAGnO,SAChCsc,SACEg3B,EAAuBhlC,QACrBglC,EAAuBhP,QAAQn2B,GAAGo2B,QAAU,GAC5C7Q,UAGN4f,EAAuBhP,QAAQn2B,GAAGnO,OAASsc,SACzCg3B,EAAuBhlC,QACrBglC,EAAuBhP,QAAQn2B,GAAGo2B,QAAU,GAC5C7Q,cAMP,CACL,IAAIvlB,EACJ,IAAKA,EAAI,EAAGA,EAAImlC,EAAuBxO,MAAMn2B,OAAQR,IAEjDmlC,EAAuBxO,MAAM32B,GAAG02B,cAChC/4B,KAAYC,iBAAiB5D,MAE7BmrC,EAAuBxO,MAAM32B,GAAGnO,OAAS,GAG7C,IAAKmO,EAAI,EAAGA,EAAImlC,EAAuBhP,QAAQ31B,OAAQR,KAEnDmlC,EAAuBhP,QAAQn2B,GAAGq2B,gBAClCn5B,KAAcE,sBAAsBpD,KAIpCmrC,EAAuBhP,QAAQn2B,GAAGq2B,gBAClCn5B,KAAcG,kBAAkBrD,KAIhCmrC,EAAuBhP,QAAQn2B,GAAGq2B,gBAClCn5B,KAAcI,oBAAoBtD,KAIlCmrC,EAAuBhP,QAAQn2B,GAAGq2B,gBAClCn5B,KAAcC,iBAAiBnD,OAb/BmrC,EAAuBhP,QAAQn2B,GAAGnO,OAAS,GAiB/C,EAAK4xC,YAAa,EAItB,OAAO0B,GAj5DU,EAo5DnB3N,SAAW,WAST,MARY,CACVH,eAAgB,EAAKjzB,MAAMzE,UAAUqB,cAAc,GAAG/N,QAAU,IAChEE,QAAS,EAAKiR,MAAMzE,UAAUqB,cAAc,GAAG7N,QAAU,IACzDC,gBAAiB,IACjBkkC,sBAAuB,GACvBC,cAAe,EAAKnzB,MAAMzE,UAAUqB,cAAc,GAAG9N,UAAY,MA15DlD,EAg6DnB4mB,YAh6DmB,sBAg6DL,8BAAA9V,EAAA,sDACR01B,EAAa3sC,IAAa,UAAY,SAEpCs3C,EAAcjb,KAAKC,MAAM1Q,aAAaC,QAAQ8gB,IACpD,EAAKiN,oBAAoBtC,GAJb,2CAh6DK,EAu6DnBsC,oBAv6DmB,uCAu6DG,WAAOtC,GAAP,mBAAArgC,EAAA,yDACA,OAAhBqgC,QAAwCp/B,IAAhBo/B,EADR,uBAGlB,EAAK//B,SAAS,CAAEmgC,SAAS,IAEzB,EAAK6H,cAAe,EACZ/J,EAAe,EAAKn+B,MAApBm+B,WACFsC,EAAgBF,IAAEC,UAAUrC,GAPhB,SAQK,EAAKwC,4BAC1BV,EACAQ,EA99DuB,EAg+DvB,GAZgB,OAQZG,EARY,OAclB,EAAK1gC,SAAL,2BAAmB0gC,GAAnB,IAA6BP,SAAS,EAAOQ,gBAAgB,KAd3C,OAgBpB,EAAKqH,cAAe,EAhBA,4CAv6DH,wDA07DnBtF,cAAgB,WAGdruB,aAAa2kB,QACXvwC,IAAa,UAAY,SACzBq8B,KAAKE,UAAU,EAAKllB,MAAMzE,YAI5B,EAAK4sC,YAAc,EACnBz0B,eAp8DiB,EAu8DnB8B,aAAe,SAAC7V,GACd,IAAMyoC,EAAazoC,EAAEuS,OAAOC,MAAM,GAClC,GAAKi2B,EAAL,CAMA,IAAIxsC,EACJ,IAJA,EAAKsE,SAAS,CAAEmgC,SAAS,IAIpBzkC,EAAI,EAAGA,EA3/DW,IA2/DeA,EACpC,EAAKuE,gBAAgBvE,GAAGqE,MA3/DF,EA8/DxB,IAAMmS,EAAS,IAAIC,WACnBD,EAAOG,OAAS,SAAC5S,GACf,IACIsgC,EADAoI,EAAe1oC,EAAEuS,OAAOO,QASP,MALnB41B,EAAa9tB,OAAO,aAAe,IACF,IAAjC1F,cAAiBkI,aAMjB,EAAK2iB,oCAAoC2I,IASzCA,GAHAA,GADAA,GADAA,GADAA,EAAeA,EAAa5oB,MAAM,UAAUC,KAAK,WACrBD,MAAM,WAAWC,KAAK,cACtBD,MAAM,YAAYC,KAAK,aAEhDD,MAAW,OACXC,KAAU,eACeD,MAAM,aAAaC,KAAK,kBAEpDugB,EAAcjb,KAAKC,MAAMojB,IACbnI,kBAAkBtjC,cAAc,GAAGggC,iBAC7C,IAAIrJ,KAGN0M,EAAY1kC,UAAUQ,QAAQ+jB,SAAQ,SAAUC,QACxBlf,GAAlBkf,EAAQ/jB,SACV+jB,EAAQ/jB,OAASwjB,YAAuB5kB,KAAKmlB,EAAQwQ,YAC9CxQ,EAAQwQ,QAInB0P,EAAY1kC,UAAUQ,QAAQ+jB,SAAQ,SAAUC,QACrBlf,GAArBkf,EAAQ7jB,YACV6jB,EAAQ7jB,UAAYsjB,YAAuBtkB,KAAS6kB,EAAQuoB,eACrDvoB,EAAQuoB,WAInBrI,EAAY1kC,UAAUQ,QAAQ+jB,SAAQ,SAAUC,QACrBlf,GAArBkf,EAAQ0B,YACV1B,EAAQ0B,UAAYjC,YAAuB/kB,KAAQslB,EAAQ5yB,eACpD4yB,EAAQ5yB,WAKnB8yC,EAAY1kC,UAAUskB,OAAOC,SAAQ,SAAUC,QACjBlf,GAAxBkf,EAAQ/U,eACV+U,EAAQ/U,aAAewU,YAAuBvoB,IAAQ8oB,EAAQwoB,aACvDxoB,EAAQwoB,SAInBtI,EAAY1kC,UAAUskB,OAAOC,SAAQ,SAAUC,QACdlf,GAA3Bkf,EAAQ5U,kBACV4U,EAAQ5U,gBAAkBqU,YACxBnnB,IACA0nB,EAAQyoB,YAEHzoB,EAAQyoB,QAKnBvI,EAAY1kC,UAAUskB,OAAOC,SAAQ,SAAUC,QACrBlf,GAApBkf,EAAQlV,WACVkV,EAAQlV,SAAW3S,IAAuBC,iBAAiBvC,QAK/DqqC,EAAY1kC,UAAU6hB,WAAW0C,SAAQ,SAAUC,QACtBlf,GAAvBkf,EAAQ1C,cACV0C,EAAQ1C,YAAcmC,YACpBtpB,KACA6pB,EAAQwoB,aAEHxoB,EAAQwoB,SAKnBtI,EAAY1kC,UAAUw2B,QAAQjS,SAAQ,SAAUC,QACjBlf,GAAzBkf,EAAQkS,gBACVlS,EAAQkS,cAAgBzS,YACtB1mB,KACAinB,EAAQwoB,aAEHxoB,EAAQwoB,SAKnBtI,EAAY1kC,UAAUg3B,MAAMzS,SAAQ,SAAUC,QACjBlf,GAAvBkf,EAAQuS,cACVvS,EAAQuS,YAAc9S,YACpBjmB,KACAwmB,EAAQwoB,aAEHxoB,EAAQwoB,SAKnBtI,EAAY1kC,UAAUqB,cAAckjB,SAAQ,SAAUC,QACzBlf,GAAvBkf,EAAQ8Q,cACV9Q,EAAQ8Q,YAAcrR,YACpB7lB,KACAomB,EAAQljB,iBAEHkjB,EAAQljB,aAGnB,EAAK0lC,oBAAoBtC,KAG7B7tB,EAAOq2B,WAAWL,GAClB,EAAKloC,SAAS,CAAEmgC,SAAS,MA9kER,EAilEnBqI,qBAAuB,SAAC3b,GAEtB,IAAI4b,EADJ,EAAKzoC,SAAS,CAAEgiC,SAAS,IAIvByG,GAFmC,IAAjC9zB,cAAiBkI,YAEZ,IAAI6rB,KAAK,CAAC5jB,KAAKE,UAAU,EAAKllB,MAAMzE,YAAa,CACtDnO,KAAM,6BAEE,IAAIw7C,KAAK,CAAC,EAAK3G,QAAS,CAAE70C,KAAM,6BAG5C,IAAI2nB,EAAM,mBAAmBqC,KAAKP,UAAUC,aAAeO,OAAOC,SACjD,KAAbyV,KACU,IAARhY,EAEF8zB,iBACEF,OACa9nC,IAAbksB,EACI,oBACAA,GAAYpkC,IAzoEJ,eACD,iBA4oEbggD,EAAO,IAAIC,KAAK,CAAC5jB,KAAKE,UAAU,EAAKllB,MAAMzE,aAC3CstC,iBACEF,OACa9nC,IAAbksB,EACI,oBACA,8BA7mEO,EAmnEnB+b,eAAiB,WACf,IAAMH,EAAO,IAAIC,KAAK,CAAC5jB,KAAKE,UAAU,EAAKllB,MAAMzE,YAAa,CAC5DnO,KAAM,6BAERy7C,iBAAOF,EAAM,sBAvnEI,EA0nEnBpzB,WAAa,YAC0B,IAAjCV,cAAiBkI,YAEnB,EAAK2rB,qBAAqB,WAE1B,EAAKpH,kBArpEO,EAupEV,EAAKthC,MAAMzE,UACX,EAAKyE,MAAMm+B,aAloEE,EAuoEnBiB,SAAW,WACGxG,cACA,GAAG,EAAK14B,SAAS,CAAE6oC,WAAW,KAzoEzB,EA4oEnBxgB,eAAiB,WACf,EAAKqa,gBAEL,IAAIoG,EAAYC,qCAA6BC,IAAQC,YAGpB,IAFpB9xB,OAAOmoB,SAAS6C,KAEpBtqB,QAlrEK,2BAmrEZixB,EAAYI,qCAA6BF,IAAQC,YAKnD9xB,OAAOgyB,OAAO7J,SAAS6C,KAHL,8CAOhBhrB,OAAOgyB,OAAO7J,SAAS6C,KAAO2G,GA5pEf,EAgqEnBvzB,SAAW,WAGT,EAAK6rB,kBAxrEU,EA0rEb,EAAKthC,MAAMzE,UACX,EAAKyE,MAAMm+B,aAtqEI,EA2qEnBmL,wBAA0B,SAAC3pC,GACpB,EAAK4pC,eAER,EAAKA,cAAgB5pC,IA9qEN,EAirEnB6pC,2BAA6B,SAAC9d,GAC5B,EAAK+d,qBAAuB,EAAKA,qBAAuB/d,GAlrEvC,EAqrEnBge,4BAA8B,WAK5B,YAAc7oC,IAJL,EAAKb,MAAMzE,UAAUskB,OAAON,MACnC,SAACiC,GAAD,OAAOA,EAAExW,eAAiB/T,IAAOC,mBAAmBtB,QAvrErC,EA6rEnBkK,uBA7rEmB,uCA6rEM,WAAO6pC,GAAP,SAAA/pC,EAAA,sDA3uEC,IA4uEpB+pC,EAAY5pC,KACd,EAAKypC,2BACH,EAAKrpC,gBA9uEe,GA8uEsBF,MAAQ,EAAI,GAGxD,EAAKqpC,wBAAwBK,EAAY1pC,OAEvC0pC,EAAY5pC,GAKZ,EAAKC,MAAMogC,YAAY,EAAKlgC,SAAS,CAAEkgC,YAAY,IACvD,EAAKjgC,gBAAgBwpC,EAAY5pC,IAAIE,MAAQ0pC,EAAY1pC,KAdlC,2CA7rEN,wDA8sEnB2pC,UAAY,SAACjqC,KAEwBgU,SAASk2B,aAG1C9H,MAAMxvC,KAAS,EAAKyN,MAAMzE,UAAUqB,cAAc,GAAGyC,UAAU9L,IAC5D,EAAKu2C,OAAe,IAANnqC,EACnB,EAAKO,SAAS,CAAEmgC,SAAS,KArtER,EAwtEnB0J,wBAA0B,SAACpqC,GAEzB,IAAIknC,EAAO,EAAKD,mBACZjnC,IAAMrU,IAAqB,EAC7Bu7C,EAAKrkB,aAAel3B,IACXqU,IAAMpU,IAAkB,EACjCs7C,EAAKrkB,aAAej3B,IACXoU,IAAMnU,IAAiB,EAChCq7C,EAAKrkB,aAAeh3B,IACXmU,IAAMlU,IAAyB,IACxCo7C,EAAKrkB,aAAe/2B,KAGtB,EAAK84C,+BAA+BsC,GADnB,IApuEA,EAwuEnBtzB,kBAAoB,SAAC5T,GAEnB,IAAIknC,EAAO,EAAKD,mBAEZjnC,IAAMzT,IACR26C,EAAKhK,cAAgB3wC,IACZyT,IAAM1T,IACf46C,EAAKhK,cAAgB5wC,IACZ0T,IAAMxT,KACf06C,EAAKhK,cAAgB1wC,IACrB06C,EAAKrkB,aAAeh3B,IAEpBq7C,EAAKhK,cAAgBpxC,IACrBo7C,EAAKrkB,aAAe/2B,KAEpBo7C,EAAKhK,cAAgB7wC,IAKvB,EAAKu4C,+BAA+BsC,GADnB,IA3vEA,EAgwEnBmD,0BAA4B,SAACrqC,GAtyEP,IAuyEhBA,EACF,EAAKsqC,UAxyEa,EADD,IA4yERtqC,IACT,EAAKsqC,UA7yEY,GA+yEnB,IAAIC,EAAI,EAAKlqC,MAAMqgC,QACnB6J,GAAKA,EACL,EAAKhqC,SAAS,CAAEmgC,QAAS6J,KA1wER,EA6wEnBC,oBAAsB,WACpB,EAAKjqC,SAAS,CAAEgkC,cAAc,KA9wEb,EAixEnBtyB,YAAc,WACZ,EAAK1R,UAAS,SAACoR,GAAD,MAAgB,CAC5B/V,UAAU,2BACL+V,EAAU/V,WADN,IAEPqB,cAAe,CAAC,2BAET0U,EAAU/V,UAAUqB,cAAc,IAF1B,IAGXkkB,YAAa,CACXlQ,MAAO,KACPC,KAAM,EACNE,KAAM,GACNE,UAAU,EACVP,aAAa,aA7xEN,EAqyEnBU,YAAc,SAACR,EAAOxa,GAChBA,IAAO7M,KACT,EAAK2W,UAAS,SAACoR,GAAD,MAAgB,CAC5B/V,UAAU,2BACL+V,EAAU/V,WADN,IAEPqB,cAAe,CAAC,2BAET0U,EAAU/V,UAAUqB,cAAc,IAF1B,IAGXkkB,YAAalQ,WAMrB,EAAK1Q,UAAS,SAACoR,GAAD,MAAgB,CAC5B/V,UAAU,2BACL+V,EAAU/V,WADN,IAEPqB,cAAe,CAAC,2BAET0U,EAAU/V,UAAUqB,cAAc,IAF1B,IAGXmkB,YAAanQ,YArzEvB,IAAIosB,EAAiB,GACrBA,EAAelhC,KAAKogC,YAAoB,IACpCvzC,KAAYq0C,EAAelhC,KAAKogC,YAAoB,IACpC,GACNpgC,KAAKggC,YAAmB,IAGtC,IAgCIlgC,EAhCAwhC,EAAe,GAiCnB,IAhCAA,EAAathC,KAAK0gC,YAAkB,IACpCY,EAAathC,KAAK0gC,YAAkB,IAIpC,EAAKx8B,MAAQ,CACXzE,UAAWuhC,cACXuD,SAAS,EACTQ,gBAAgB,EAChBkI,WAAW,EACX7G,SAAS,EACTgC,cAAc,EACd9D,YAAY,EAEZjC,WAAY,CACV/C,mBAAoB,GACpBG,qBAAsB,GACtB7c,iBAAkB,GAClB4c,gBAAiB,GACjBE,kBAAmB,GACnBH,WAAY,GACZhd,cAAe,GACfygB,YAAa,CAAEC,YAAa,KAAM1E,MAAO,KAAMwH,UAAW,MAC1DC,eAAgB,CAAErmC,OAAQ,EAAGgoB,OAAQ,EAAGT,MAAO,GAC/CqB,iBAAkB,GAClBsd,cAAe,KACfJ,6BAA8B,GAC9BE,oBAAqB,KAGzB,EAAKthC,gBAAkB,GAElBvE,EAAI,EAAGA,EAvFW,IAuFeA,EACpC,EAAKuE,gBAAgBrE,KAAK,CACxBmE,MAxFoB,EAyFpBF,GAAInE,IA/CS,OAmDjB,EAAKuE,gBAvGmB,GAuGkBF,KAAwD,OAAjD,EAAKD,MAAMzE,UAAUqB,cAAc,GAAGyC,SAEvF,EAAK+qC,IAAM,CAAEC,EAAG,EAAGvgB,EAAG,GACtB,EAAKqe,YAAc,EACnB,EAAKlF,QAAUt6C,IAAaM,KAAeD,KAC3C,EAAK8gD,QAAS,EACd,EAAK5B,cAAe,EACpB,EAAK7I,YAAa,EAClB,EAAKiL,aAAc,EACnB,EAAK1C,YAAa,EAClB,EAAKC,WAAY,EACjB,EAAK0B,cAAe,EACpB,EAAKgB,SAAW,cAChB,EAAK9P,gBAAkB,EACvB,EAAKgP,qBAAuB,EAC5B,EAAKxH,OAAS,GACd,EAAK/C,WAAa,EAClB,EAAK+K,UAAYthD,IA3GE,EACC,EAsCH,EAFrB,0CAk0EE,WAAU,IAAD,OACHiT,EAAI,EACJsgB,EAAI,EAEJguB,EAAI,EACJjtB,EAAI,EAEFutB,EAAYnqC,KAAKL,MAAMkiC,QAEvB3mC,EAAY8E,KAAKL,MAAMzE,UACvB+D,EAAO/D,EAAUqB,cAAc,GAAGyC,SAElC8+B,EAAa99B,KAAKL,MAAMm+B,WACxB1b,EAAiBpiB,KAAKL,MAAMm+B,WAAW/C,mBACvC5Y,EAAejnB,EAAUqB,cAAc,GAAG4lB,aAE1C2gB,EAAY5gB,YAChBhnB,EAAUQ,QACVymB,EACA2b,EAAW2D,eACXrf,EACA0b,EAAW9f,cACX9iB,EAAUqB,cAAc,IAEpBpK,EAAU2wC,EAAUjgB,cACpBP,EAAawgB,EAAUhgB,mBACvBP,EAAYugB,EAAU/f,kBACtBP,EAAasgB,EAAU9f,mBACvBP,EAAcqgB,EAAU7f,mBAC1B3E,EAAawkB,EAAU/gB,cACvBoB,EAAe2f,EAAU9gB,gBACvBkB,EAAU4f,EAAU7gB,YAEpBuB,EAAexC,YAAe9lB,EAAUQ,SACxC0uC,EAA4C,IAA7BlvC,EAAUQ,QAAQK,OAErCquC,GAAgB51B,cAAiBrL,cAE/Bqa,IAEFtoB,EAAUqB,cAAc,GAAG4lB,aAAel3B,KAIX,IAA7BiQ,EAAUQ,QAAQK,SACpBonB,EAAe,EACfjoB,EAAUg3B,MAAMzS,SAAQ,SAACC,GACnByD,EAAezD,EAAQmS,WAAU1O,EAAezD,EAAQmS,aAE9DvT,EAAa6E,EAAejoB,EAAUQ,QAAQ,GAAGxH,KAGnD,IAAMqvB,EAAcroB,EAAUQ,QAAQK,OAAS,EACzCsuC,EAAchnB,YAClBnoB,EAAUqB,cAAc,GACxB+hB,EACArf,EACAskB,EACAC,EACAL,EACAhxB,EACA+I,EAAUQ,QAAQ,GAAG+0B,MAIvB,GAAIjN,EAAc,CAChBsa,EAAW9C,WAAa,GACxB,IAAK,IAAIz/B,EAAI,EAAGA,EAAI4nB,EAAc5nB,IAAKuiC,EAAW9C,WAAWv/B,KAAKF,EAAI,GAGvC,IAA7BL,EAAUQ,QAAQK,SAAciE,KAAK4iC,QAAU,GAEnD,IAWIziB,EACA4iB,EACAC,EACAC,EACAC,GACAlwB,GACAs3B,GACAC,GAEAC,GApBE7H,GAAW3iC,KAAKL,MAAMzE,UAAUQ,QAAQsE,KAAK4iC,SAE7C6H,GACJroB,EAAermB,OAAS,QACEyE,IAA1Bs9B,EAAW9C,iBACEx6B,IAAbmiC,GAwCF,GApCI3iC,KAAKL,MAAM+oC,WAAW3/B,QAAQC,IAAI,iCAatCgK,GAAgB,CACd3iB,KAAO4O,GAAM9N,QACbd,KAAO4O,GAAM7N,UACbf,KAAO4O,GAAMxN,eACbpB,KAAO4O,GAAMvN,aAEf44C,GAAiB,CACfj6C,KAAO4O,GAAM9N,QACbd,KAAO4O,GAAM7N,UACbf,KAAO4O,GAAMxN,gBAEf84C,GAAsB,CACpBl6C,KAAO4O,GAAM5N,OACbhB,KAAO4O,GAAM1N,MACblB,KAAO4O,GAAMzN,gBAIIgP,IAAjBR,KAAK4iC,SACL1nC,EAAUQ,QAAQsE,KAAK4iC,SAASxhB,YAAchnB,KAAOzC,OAAOpC,KAC5D2F,EAAUQ,QAAQsE,KAAK4iC,SAASxhB,YAAchnB,KAAO1C,OAAOnC,MAE5Dg1C,GAAsB,CAACl6C,KAAO4O,GAAM3N,gBAClCm5C,GAAoB,CAEtB,IAAI3tB,GAAuBD,YACzB3hB,EACAojB,EACAwf,EAAWtxB,SAGb2T,EAAW2d,EAAW9C,WAAWrjB,MAAM,EAAGwL,GAC1C4f,EAAUjF,EAAW7C,gBAAgBtjB,MAAM,EAAGwL,GAC9C6f,EAAUlF,EAAW5C,qBAAqBvjB,MAAM,EAAGwL,GAEnDqnB,GAAsBpsB,YAEpB0f,EAAWzf,iBACXvB,IAEFmmB,EAAWnF,EAAW3C,kBAAkBxjB,MAAM,EAAGwL,GACjD+f,GAAYpF,EAAW9f,cAAcrG,MAAM,EAAGwL,GAE9C,IAAIunB,GAA2BxvC,EAAUw2B,QAAQxS,MAC/C,SAACiC,GAAD,OAAOA,EAAEyQ,gBAAkBn5B,KAAcC,yBAEV8H,IAA7BkqC,IACFA,GAAyBhpB,QAAO,SAACniB,EAAGwf,GAAJ,OAAUxf,EAAIwf,IAAG,GAEnD2rB,GAA2B5M,EAAW9f,cAAcrG,MAClD,EACAwL,QAG8B3iB,GAA5Bs9B,EAAWwD,eAEXpmB,KAAK7E,IACH,IACA,GAAKrW,KAAKL,MAAMm+B,WAAWwD,cAAc12B,cAAc7O,QACrD,IAMV,IAEM0tC,GACJ,kBAAC,IAAD,CACE5mB,cAAe1wB,EACfmsB,WAAYA,EACZ4c,qBAAsB8H,EACtB9nC,UAAWA,EACX8/B,WAAY7a,EACZgb,kBAAmB8H,EACnBhI,gBAAiB8H,EACjB/kB,cAAeklB,GACfmH,YAAaA,EACb/I,cAAexD,EAAWwD,cAC1BphB,GAAI4d,EAAW2D,eAAere,OAI9BjB,aAAcA,IAUZwoB,GACJ,kBAAC,IAAD,CACE9nB,cAAeL,EACflE,WAAYA,EACZksB,oBAAqBA,GACrBtvC,UAAWA,EACX8/B,WAAY7a,EACZlC,QAAS6f,EAAW2D,eAAe9e,MACnCwX,YAAa2D,EAAW2D,eAAe9e,MACvCuX,cAAe4D,EAAW2D,eAAermC,OACzCoR,QAASsxB,EAAWtxB,QACpBo9B,UAAW5pC,KAAK4pC,UAGhB1pB,GAAI4d,EAAW2D,eAAere,OAC9BY,iBAAkB8Z,EAAW9Z,mBAO3B4mB,GACJ,yBACE1qC,MAAO,CACLuN,UAAW,OACX0Y,gBAAiB,YACjBzT,YAAa,QAGf,kBAAC,IAAD,CACEmQ,cAAeL,EACflE,WAAYA,EACZksB,oBAAqBA,GACrBtvC,UAAWA,EACX8/B,WAAY7a,EACZlC,QAAS6f,EAAW2D,eAAere,OACnC+W,YAAa2D,EAAW2D,eAAe9e,MACvCuX,cAAe4D,EAAW2D,eAAermC,OACzCwuC,UAAW5pC,KAAK4pC,UAChB5rB,cAAeklB,GACf2H,YAAa9+C,KACbiT,SAAUC,EAEVkjB,aAAc/2B,OAYhBqV,GAAWwM,YAAkBhO,GACjCwB,GAAS0M,SAAWY,YAAsB9O,GAAMkO,SAChD,IAAM29B,GAAW9qC,KAAKL,MAAMkkC,cAC1B,yBAAK3jC,MAAO,CAAEwS,YAAa,QACxB,IACD,kBAAC,IAAD,CAAMjS,SAAUA,GAAUynB,eAAgBloB,KAAK8pC,uBAQnD,OACE,yBACEpqC,GAAG,OACHY,WACgC,IAA9BN,KAAKL,MAAM6gC,eAA0B,iBAAmB,WAG1D,gEACA,kBAAC,IAAD,CACEjgC,MAhnFa,IAinFXP,KAAK4pC,UACDv5C,KAAO4O,GAAM3O,UACbD,KAAO4O,GAAM1O,SAEnB2kB,WAAYlV,KAAKkV,WACjBC,aAAcnV,KAAKmV,aACnBE,YAAarV,KAAKqV,YAClBD,SAAUpV,KAAKoV,SACfL,WAAY/U,KAAK+U,WACjBlB,kBAAmB7T,KAAK6T,kBACxB7U,SAAUC,IAWZ,yBAAKqB,UAAU,cAEf,yBAAKJ,MAAO,CAAE2N,OAAQ,QACpB,kBAAC,IAAD,CACEk9B,YAA0B,IAAdZ,EACZnrC,SAAUC,EACV+rC,eAAgBhrC,KAAKqoC,wBAGzB,kBAAC,IAAD,CACE3oC,GAxpFuB,EAypFvBa,MAAOlQ,KAAO4O,GAAMhO,cACpBs2C,WAAYvnC,KAAKunC,WACjBznC,gBAAiBE,KAAKF,gBA3pFC,GA4pFvBL,uBAAwBO,KAAKP,wBAE5BvE,EAAUqB,cAAcihC,KAAI,SAACnb,GAAD,OAC3B,kBAAC,IAAD,CACEtI,IAAKsI,EAAa3iB,GAClBA,GAAI,EACJ8wB,YAAanO,EAAamO,YAC1Bya,iBAAkB5oB,EAClBrjB,SAAUC,EACV41B,gBAAiB,EAEjBqW,aAAc,EAAKlH,+BAIzB,kBAAC,IAAD,CACEtkC,GAjrFkB,EAkrFlBa,MAAO6pC,EAAe/5C,KAAO4O,GAAMxO,UAAYJ,KAAO4O,GAAMzO,QAC5D+2C,WAAYvnC,KAAKunC,WACjBC,UAAWxnC,KAAKwnC,UAChB/nC,uBAAwBO,KAAKP,uBAC7BK,gBAAiBE,KAAKF,gBAtrFJ,GAurFlBW,SAAUjY,IAAY+lB,YAAoBtP,QAAQuB,GAEjDtF,EAAUQ,QAAQ8hC,KAAI,SAACpiC,GAAD,OACrB,kBAAC,IAAD,CACE2e,IAAK3e,EAAOsE,GACZA,GAAInE,IACJ4vC,WAAY/vC,EACZooB,aAAcA,EACd4nB,sBACoB5qC,IAAjB,EAAKoiC,SACJ1nC,EAAUQ,QAAQ,EAAKknC,SAASxhB,YAC9BhmB,EAAOgmB,WACVoC,GAAgBpoB,EAAOsE,GAAK,GAI/B2rC,WAAY9vC,EAAI,GAAKoZ,cApLhB,UAoL4C,QACjD3V,SAAUC,EACVsxB,KAAiD,OAA3Cr1B,EAAUqB,cAAc,GAAGi0B,YACjC4D,UAAWl5B,EAAUQ,QAAQK,OAC7BmvC,aAAc,EAAK/I,mBACnBiC,gBAAiB,EAAKA,gBACtBkB,mBAAoB,EAAKA,mBACzBjC,cAAe,EAAKA,cACpBiI,iBAAkB,EAAK3rC,MAAMqgC,cAKnC,kBAAC,IAAD,CACEtgC,GAptFiB,EAqtFjBa,MAAOlQ,KAAO4O,GAAMvO,OACpB62C,WAAYvnC,KAAKunC,WACjBznC,gBAAiBE,KAAKF,gBAvtFL,GAwtFjBL,uBAAwBO,KAAKP,wBAE5BvE,EAAUskB,OAAOge,KAAI,SAAC9M,GAAD,OACpB,kBAAC,IAAD,CACE3W,IAAK2W,EAAMhxB,GACXiJ,UAAW+nB,EACXhxB,GAAImc,IACJ7c,SAAUC,EACVosC,WAAYxvB,EAAI,GAAKlH,cA9MhB,UA8M4C,QACjD2f,SAAUp5B,EAAUskB,OAAOzjB,OAC3Bq4B,UAAWl5B,EAAUQ,QAAQK,OAC7BmvC,aAAc,EAAK1H,kBACnBkB,eAAgB,EAAKA,eACrBkB,kBAAmB,EAAKA,kBAExBuD,2BAA4B,EAAKA,2BACjCE,4BAA6B,EAAKA,8BAClC3N,WAAYoC,EAAW9Z,iBACvBsnB,iBAAkB,EAAK3rC,MAAMqgC,aAIJ,IAA5B9kC,EAAUskB,OAAOzjB,OAChB,kBAAC,IAAD,CACEwvC,UAAW,EACXC,SAAU,EACVC,YAAa,EACbC,YAAa1rC,KAAK0kC,eAClBiH,eAAgB3rC,KAAK4lC,oBAGvB,IAGJ,kBAAC,IAAD,CACElmC,GA1vFgB,EA2vFhBa,MAAOlQ,KAAO4O,GAAMtO,YACpB42C,WAAYvnC,KAAKunC,WACjBznC,gBAAiBE,KAAKF,gBA7vFN,GA8vFhBL,uBAAwBO,KAAKP,wBAE5BvE,EAAU6hB,WAAWygB,KAAI,SAACrgB,GAAD,OACxB,kBAAC,IAAD,CACEpD,IAAKoD,EAAUzd,GACfksC,cAAezuB,EACf3Q,QAASsxB,EAAWtxB,QACpBxN,SAAUC,EACVu1B,aAAct5B,EAAU6hB,WAAWhhB,OACnCsvC,WAAqB12B,cAtPhB,UAsP4C,QACjDu2B,aAAc,EAAKvH,sBACnBiB,mBAAoB,EAAKA,mBACzBkB,sBAAuB,EAAKA,sBAE5BwF,iBAAkB,EAAK3rC,MAAMqgC,aAIA,IAAhC9kC,EAAU6hB,WAAWhhB,OACpB,kBAAC,IAAD,CACEwvC,UAAW,EACXC,SAAU,EACVC,YAAa,EACbC,YAAa1rC,KAAK4kC,mBAClB+G,eAAgB3rC,KAAK8lC,wBAGvB,IA9wFW,IAkxFd9lC,KAAK4pC,WACJ,kBAAC,IAAD,CACElqC,GA9xFgB,EA+xFhBa,MAAO6pC,EAAe/5C,KAAO4O,GAAMpO,UAAYR,KAAO4O,GAAMrO,QAC5D22C,WAAYvnC,KAAKunC,WACjBznC,gBAAiBE,KAAKF,gBAjyFN,GAkyFhBL,uBAAwBO,KAAKP,uBAC7BgB,SAAUwO,YAA2BhQ,IAEpC6rC,GACA5vC,EAAUw2B,QAAQ8L,KAAI,SAACjV,GACtB,IAAIsjB,EACAC,EAcJ,OAZEvjB,EAAOqJ,gBAAkBn5B,KAAcI,oBAAoBtD,MAE3Ds2C,EAAa3wC,EAAUQ,QAAQkjB,QAAO,SAAU6S,GAC9C,OAAOlJ,EAAOoJ,UAAYF,EAAK/xB,OAGlB3D,OAAS,IACtB+vC,GAC8C,OAA3C5wC,EAAUqB,cAAc,GAAGi0B,YACxBjlC,KACAC,MAAyBqgD,EAAW,GAAG33C,KAGyE,kBAAC,IAAD,CACtH6lB,IAAKwO,EAAO7oB,GACZA,GAAIkd,IACJmvB,WACExjB,EAAOqJ,gBACPn5B,KAAcI,oBAAoBtD,IADlC,2BAGSgzB,GAHT,IAIMyjB,UAAW,EAAK/R,OAChB6R,aAAcA,IAEhBvjB,EAON0jB,wBAAyB,EAAKtF,mBAC9B3nC,SAAUC,EACVy1B,UAAWx5B,EAAUw2B,QAAQ31B,OAC7BsvC,WAAYzuB,EAAI,GAAKjI,cA5TpB,UA4TgD,QACjDu2B,aAAc,EAAKtH,mBACnBuB,gBAAiB,EAAKA,gBACtBe,mBAAoB,EAAKA,mBACzBoF,iBAAkB,EAAK3rC,MAAMqgC,cAt0FxB,IA40FdhgC,KAAK4pC,WACJ,kBAAC,IAAD,CACElqC,GAv1Fc,EAw1Fda,MAAO6pC,EAAe/5C,KAAO4O,GAAMlO,QAAUV,KAAO4O,GAAMnO,MAC1Dy2C,WAAYvnC,KAAKunC,WACjBznC,gBAAiBE,KAAKF,gBA11FR,GA21FdL,uBAAwBO,KAAKP,uBAC7BgB,SAAU+N,YAAsBvP,IAE/B/D,EAAUg3B,MAAMsL,KAAI,SAACuG,GAAD,OACnB,kBAAC,IAAD,CACEhqB,IAAKgqB,EAAKrkC,GACVA,GAAImqC,IACJqC,SAAUnI,EACV/kC,SAAUC,EACV01B,QAASz5B,EAAUg3B,MAAMn2B,OACzBowC,oBAAqB,EAAKvrB,uBAAuB1lB,GACjDmwC,WAAYxB,EAAI,GAAKl1B,cAvVlB,UAuV8C,QACjDu2B,aAAc,EAAKpH,iBACnBsB,cAAe,EAAKA,cACpBe,iBAAkB,EAAKA,iBACvBmF,iBAAkB,EAAK3rC,MAAMqgC,aAIL,IAA3B9kC,EAAUg3B,MAAMn2B,OACf,kBAAC,IAAD,CACEwvC,UAAW,EACXC,SAAU,EACVC,YAAa,EACbC,YAAa1rC,KAAKolC,cAClBuG,eAAgB3rC,KAAKmmC,mBAGvB,IAWLnmC,KAAKL,MAAM+oC,UACV,yBAAKxoC,MAAO,CAAEwS,YAAa,QACzB,kBAAC,IAAD,CACEjS,SAAUwN,YAAwBhP,GAClCipB,eAAgBloB,KAAKkoB,eACrBzU,IAAK,SAACuU,GAAD,OAAW,EAAKokB,SAAWpkB,MAIpC,GAIqC,kBAAC,IAAD,CACnCtoB,GA94FgB,EA+4FhBa,MAAOlQ,KAAO4O,GAAM/N,QACpBsO,SAAgC,IAAvBQ,KAAKL,MAAMqgC,QACpBuH,WAAYvnC,KAAKunC,WACjBznC,gBAAiBE,KAAKF,gBAl5FN,GAm5FhBL,uBAAwBO,KAAKP,wBAE7B,yBAAKS,MAAO,CAAEyN,MAAO,OAAQvN,MAAO,OAAQ6T,MAAO,UACb,IAAnCO,cAAiBmI,eAA2Br0B,IAQ3C,kBAAC,IAAD,CACEyqB,UAAW,EACXC,cAAes3B,GACfr3B,SAAU/X,EAAUqB,cAAc,GAAGigC,cACrCtpB,kBAAmBlT,KAAKkT,oBAX1B,kBAAC,IAAD,CACEH,UAAW,EACXC,cAAeA,GACfC,SAAU/X,EAAUqB,cAAc,GAAGigC,cACrCtpB,kBAAmBlT,KAAKkT,qBAY9B,yBAAKhT,MAAO,CAAEyN,MAAO,OAAQvN,MAAO,OAAQ6T,MAAO,SAh6FxC,IAu6FRjU,KAAK4pC,WACJ1uC,EAAUqB,cAAc,GAAGigC,gBAAkB1wC,MAC5C03B,GACC,kBAAC,IAAD,CACEzQ,UAAW,EACXC,cAAeu3B,GACft3B,SAAU/X,EAAUqB,cAAc,GAAG4lB,aAAe,EACpDjP,kBAAmBlT,KAAK0pC,0BAI7BvnB,IAAiBl3B,KAChBiQ,EAAUqB,cAAc,GAAGigC,gBACzB1wC,KACA,0BAAMoU,MAAO,CAAEC,SAAU,OAAQmkB,UAAW,WAKN,IAA3CwZ,EAAW5C,qBAAqBn/B,OAC/B,GACEb,EAAUqB,cAAc,GAAGigC,gBAAkB5wC,IAC/CtD,IACEmhD,GAEAkB,GAEAzvC,EAAUqB,cAAc,GAAGigC,gBAC7B3wC,IAEA,6BAEgC,OAA7BiyC,EAAWwD,oBACmB9gC,IAA7Bs9B,EAAWwD,eAET,kBAAC,IAAD,CACEA,cAAexD,EAAWwD,cAC1BphB,GACE53B,IACIw1C,EAAW2D,eAAere,OAC1B0a,EAAW2D,eAAe9e,MAEhC1jB,KAAMA,EACNorC,YAAaA,KAMnBnvC,EAAUqB,cAAc,GAAGigC,gBAC7B1wC,IACA8+C,GA19FS,IA29FP5qC,KAAK4pC,UACP,kBAAC,IAAD,CACE/mB,cAAe1wB,EACf6jC,iBAAkB1T,EAClB2T,gBAAiB1T,EACjB8pB,kBAAmB5pB,EACnBnE,WAAYA,EACZ+rB,YAAaA,EACbnqB,GAAI4d,EAAW2D,eAAere,OAASF,EACvChoB,UAAWA,EACX0uC,UAAW5pC,KAAK4pC,UAChB5rB,cAAeklB,GACf3xB,YAAavR,KAAKuR,YAClBR,YAAa/Q,KAAK+Q,YAClBmwB,6BACEpD,EAAWoD,6BAEbE,oBAAqBtD,EAAWsD,oBAEhCkL,aAActsC,KAAKsjC,wBAGrB,kBAAC,IAAD,CAEEtN,iBAAkB1T,EAClB2T,gBAAiB1T,EAGjBrC,GAAI4d,EAAW2D,eAAe9e,MAC9BznB,UAAWA,EACX8oB,iBAAkB8Z,EAAW9Z,iBAC7Bsd,cAAexD,EAAWwD,cAC1B90B,QAASsxB,EAAWtxB,QACpBo9B,UAAW5pC,KAAK4pC,UAEhB5rB,cAAeklB,GACf3xB,YAAavR,KAAKuR,YAClBR,YAAa/Q,KAAK+Q,YAElBmwB,6BACEpD,EAAWoD,6BAEbE,oBAAqBtD,EAAWsD,wBAKT,IAA9BphC,KAAKL,MAAM6gC,gBACV,yBAAKtgC,MAAO,CAAEuN,UAAW,OAAQD,WAAY,SAC3C,kBAAC,IAAD,CAAQzgB,KAAK,WAAWse,MAAM,QAAQwC,OAAQ,GAAIF,MAAO,MAG5D3N,KAAKL,MAAMogC,WAAa,kBAAC,IAAD,MAAmB,GAC5C,yBAAKrgC,GAAG,UAAUQ,MAAO,CAAEqsC,cAAe,UAG1C,kCA9+FR,GAAwB5rC,e,uMC/HX6rC,EAAb,kDAGE,WAAYptC,GAAQ,IAAD,uBACjB,cAAMA,IAHRw+B,YAAc4O,EAAO3/C,KAEF,EAmHnB8+C,eAAiB,SAACjsC,IACoB,IAAhC,EAAKN,MAAMksC,kBACb,EAAKlsC,MAAMkmC,mBAAmB5lC,IArHf,EAyHnBgsC,YAAc,WAEV,IAAIe,GAD8B,IAAhC,EAAKrtC,MAAMksC,mBAEgB,IAAzB,EAAKlsC,MAAMg1B,UAAiBqY,EAAW5Q,YAAoB,KAE7D4Q,EAAW5Q,YAAoB,EAAKz8B,MAAMg1B,UAAY,IAC7ClgC,IACP,GAAK,GAAK,EAAKkL,MAAMg1B,UAAY,EAAI,EAAI,EAAKh1B,MAAMg1B,UAAY,GAClEqY,EAAS9wC,OACP,EAAKyD,MAAMg1B,UAAY,EAAI75B,KAAIC,KAAKjF,IAAMgF,KAAIE,OAAOlF,IACvDk3C,EAAS5qB,cAAgB,IAE3B,EAAKziB,MAAMglC,gBAAgBqI,KArIZ,EAyInBC,SAAW,WACT,EAAKttC,MAAMikC,iBA1IM,EA4InBjrB,kBAAoB,SAAC1Y,EAAIpK,GACvB,IAAI8F,EAAS,EAAKuxC,gBAcZ1tC,EAAO,EAAKG,MAAMJ,SAClB4tC,EAAa/2B,YAAYvgB,EAAO2J,GAChC4tC,EAAgBnjC,SAASkjC,GAE3BE,GAAU,EAEH,IAAPptC,GACFotC,EAAU1xC,EAAOlH,MAAQwV,SAASpU,GAClC8F,EAAOlH,IAAMwV,SAASpU,IACN,IAAPoK,GACTotC,EAAU1xC,EAAO0lB,SAAW+rB,EAC5BzxC,EAAO0lB,OAAS+rB,GACA,IAAPntC,GACTotC,EACE1xC,EAAO2lB,aACPrX,SAAS,IAAMkjC,GAAc,IAG/BxxC,EAAO2lB,WACLrX,SAAS,IAAMkjC,GAAc,KACf,IAAPltC,IACTotC,EAAU1xC,EAAOymB,gBAAkBnY,SAASpU,MAE1C,EAAKy3C,eAAgB,EACrB/0B,YAAW,WACT,EAAK+0B,eAAgB,IACpB,MAEL3xC,EAAOymB,cAAgBnY,SAASpU,IAChB,IAAPoK,IACTotC,EACE1xC,EAAOk1B,cACP5mB,SAAS,IAAMkjC,GAAc,IAG/BxxC,EAAOk1B,YACL5mB,SAAS,IAAMkjC,GAAc,KAG7BE,IACF,EAAK1tC,MAAM8rC,aAAa9vC,GACxB,EAAKyE,SAAS,CAAEmgC,QAAS,EAAK5gC,MAAMksC,qBApMrB,EAwMnB0B,YAAc,SAACttC,EAAIutC,GACjB,IAAI7xC,EAAS,EAAKuxC,gBAaP,IAAPjtC,EAAUtE,EAAOO,OAASwjB,YAAuB5kB,KAAK0yC,GAC1C,IAAPvtC,EACPtE,EAAOS,UAAYsjB,YAAuBtkB,KAASoyC,GACrC,IAAPvtC,EACPtE,EAAOgmB,UAAYjC,YAAuB/kB,KAAQ6yC,GACpC,IAAPvtC,IAAUtE,EAAOq1B,KAAOwc,GAG/B7xC,EAAOgmB,YAAchnB,KAAOC,MAAM9E,KAClC,EAAK6J,MAAM+rC,WAAW/pB,YAAchnB,KAAOC,MAAM9E,KAEjD6F,EAAO0lB,OAAS,EAChB1lB,EAAO2lB,WAAa,EACpB3lB,EAAOlH,IAAM,GACbkH,EAAOymB,cAAgB,IAEvBzmB,EAAOgmB,YAAchnB,KAAOE,gBAAgB/E,KAC5C,EAAK6J,MAAM+rC,WAAW/pB,YAAchnB,KAAOE,gBAAgB/E,KAE3D6F,EAAO0lB,OAAS,EAChB1lB,EAAO2lB,WAAa,EACpB3lB,EAAOlH,IAAM,GACbkH,EAAOymB,cAAgB,IAEvBzmB,EAAOgmB,YAAchnB,KAAOzC,OAAOpC,KACnC,EAAK6J,MAAM+rC,WAAW/pB,YAAchnB,KAAOzC,OAAOpC,MAElD6F,EAAO0lB,OAAS,IAChB1lB,EAAO2lB,WAAa,GACpB3lB,EAAOlH,IAAM,GACbkH,EAAOymB,cAAgB,IAEzB,EAAKziB,MAAM8rC,aAAa9vC,IAtPP,EAyPnB8xC,UAAY,SAACrgD,GACX,IAAIuO,EAAS,EAAKuxC,gBAClBvxC,EAAOq1B,KAAO5jC,EACd,EAAKuS,MAAM8rC,aAAa9vC,IA5PP,EA+PnB+xC,WAAa,SAACz3B,GACZ,EAAK7V,SAAS,CAAEhT,KAAM6oB,EAAI7D,OAAOvc,OAAS,EAAK43C,UAAUx3B,EAAI7D,OAAOvc,SAhQnD,EAmQnBq3C,cAAgB,WAad,MAZa,CACXjtC,GAAI,EAAKN,MAAMM,GACfxL,IAAK,EAAKkL,MAAM+rC,WAAWj3C,IAC3ByH,OAAQ,EAAKyD,MAAM+rC,WAAWxvC,OAC9BE,UAAW,EAAKuD,MAAM+rC,WAAWtvC,UACjCilB,OAAQ,EAAK1hB,MAAM+rC,WAAWrqB,OAC9BC,WAAY,EAAK3hB,MAAM+rC,WAAWpqB,WAClCK,UAAW,EAAKhiB,MAAM+rC,WAAW/pB,UACjCS,cAAe,EAAKziB,MAAM+rC,WAAWtpB,cACrCyO,YAAa,EAAKlxB,MAAM+rC,WAAW7a,YACnCG,KAAM,EAAKrxB,MAAM+rC,WAAW1a,OA9Qb,EAmRnBla,YAAc,SAACzD,GACbA,EAAMjB,OAAO8E,UAlRb,EAAKhX,MAAQ,CACX9S,KAAM,EAAKuS,MAAM+rC,WAAW1a,MAE9B,IAAI2c,EAAY,CACd,CACEC,MAAO9yC,KAAIC,KAAKlF,MAAM,EAAK8J,MAAMJ,UACjC1J,MAAO,GAET,CAAE+3C,MAAO9yC,KAAIE,OAAOnF,MAAM,EAAK8J,MAAMJ,UAAW1J,MAAO,IAGrDg4C,EAAgB,CAClB,CACED,MAAOxyC,KAAQC,WAAWxF,MAAM,EAAK8J,MAAMJ,UAC3C1J,MAAO,GAET,CAAE+3C,MAAOxyC,KAAQE,OAAOzF,MAAM,EAAK8J,MAAMJ,UAAW1J,MAAO,IAGzDi4C,EAAe,CACjB,CACEF,MAAOjzC,KAAO1C,OAAOpC,MAAM,EAAK8J,MAAMJ,UACtC1J,MAAO,GAET,CAAE+3C,MAAOjzC,KAAOzC,OAAOrC,MAAM,EAAK8J,MAAMJ,UAAW1J,MAAO,GAC1D,CAAE+3C,MAAOjzC,KAAOC,MAAM/E,MAAM,EAAK8J,MAAMJ,UAAW1J,MAAO,GACzD,CAAE+3C,MAAOjzC,KAAOE,gBAAgBhF,MAAM,EAAK8J,MAAMJ,UAAW1J,MAAO,IAGjE9M,MACF+kD,EAAe,CACb,CACEF,MAAOjzC,KAAO1C,OAAOpC,MAAM,EAAK8J,MAAMJ,UACtC1J,MAAO,GAET,CAAE+3C,MAAOjzC,KAAOzC,OAAOrC,MAAM,EAAK8J,MAAMJ,UAAW1J,MAAO,KAI9D,IAAMk4C,EAAY/gD,IAAa,EAAK2S,MAAMJ,UAzCzB,OA0CjB,EAAK27B,WAAa,CAChB8S,GAAI,CACF,CACE/tC,GAAI,EACJguC,MAAOF,EAAU7gD,IACjBghD,SAAUpjC,YACRhQ,KACA,EAAK6E,MAAM+rC,WAAWxvC,OACtB,EAAKyD,MAAMJ,UAEb4uC,mBAAoBjuB,YAAiBplB,MACrCtI,OAAQm7C,GAEV,CACE1tC,GAAI,EACJguC,MAAOF,EAAU5gD,QACjB+gD,SAAUpjC,YACR1P,KACA,EAAKuE,MAAM+rC,WAAWtvC,UACtB,EAAKuD,MAAMJ,UAEb4uC,mBAAoBjuB,YAAiB9kB,MACrC5I,OAAQq7C,GAEV,CACE5tC,GAAI,EACJguC,MAAOF,EAAU1gD,OACjB6gD,SAAUpjC,YACRnQ,KACA,EAAKgF,MAAM+rC,WAAW/pB,UACtB,EAAKhiB,MAAMJ,UAEb4uC,mBAAoBjuB,YAAiBvlB,MACrCnI,OAAQs7C,KAId,EAAKR,eAAgB,EA/EJ,EAHrB,6DAsFE,SAA0BhtC,GAGtBA,EAAUorC,aAAenrC,KAAKZ,MAAM+rC,YACpCprC,EAAUL,KAAOM,KAAKZ,MAAMM,IAE5BK,EAAUq0B,YAAcp0B,KAAKZ,MAAMg1B,YAGnCp0B,KAAK26B,WAAW8S,GAAG,GAAGE,SAAWpjC,YAC/BhQ,KACAwF,EAAUorC,WAAWxvC,OACrBqE,KAAKZ,MAAMJ,UAEbgB,KAAK26B,WAAW8S,GAAG,GAAGE,SAAWpjC,YAC/B1P,KACAkF,EAAUorC,WAAWtvC,UACrBmE,KAAKZ,MAAMJ,UAEbgB,KAAK26B,WAAW8S,GAAG,GAAGE,SAAWpjC,YAC/BnQ,KACA2F,EAAUorC,WAAW/pB,UACrBphB,KAAKZ,MAAMJ,UAIbgB,KAAKH,SAAS,CAAEhT,KAAMkT,EAAUorC,WAAW1a,UAhHjD,oBA0RE,WAAU,IAAD,OACDod,EACJ7tC,KAAKZ,MAAM+rC,WAAW/pB,YAAchnB,KAAOC,MAAM9E,KACjDyK,KAAKZ,MAAM+rC,WAAW/pB,YAAchnB,KAAOE,gBAAgB/E,IACvDu4C,EAAyBD,GAAa7tC,KAAKZ,MAAMgsC,cAKjDoC,GAHJxtC,KAAKZ,MAAM+rC,WAAWrqB,OAAS,IAC9B9gB,KAAKZ,MAAM+rC,WAAW/pB,YAAchnB,KAAOC,MAAM9E,MAChDyK,KAAKZ,MAAM+rC,WAAW/pB,UAAchnB,KAAOE,gBAAgB/E,MAC7C9I,IAAauT,KAAKZ,MAAMJ,WACpCorC,EAAwC,IAAzBpqC,KAAKZ,MAAMg1B,UAC5B2Z,EACF/tC,KAAKZ,MAAM+rC,WAAW/pB,YAAchnB,KAAO1C,OAAOnC,KAChC,IAAlByK,KAAKZ,MAAMM,GACTsuC,EAAgBD,EAIpB/tC,KAAK26B,WAAW8S,GAAG,GAAGG,mBAAmBjlD,OAAgB,EACzDqX,KAAK26B,WAAW8S,GAAG,GAAGG,mBACpBhlD,OACEklD,GAAsD,IAA7B9tC,KAAKZ,MAAM+rC,WAAWzrC,GACnD,IAAIhS,EAC2B,IAA7BsS,KAAKZ,MAAM+rC,WAAWzrC,GAClBrP,KAAO2P,KAAKZ,MAAMJ,UAAUnN,QACC,IAA7BmO,KAAKZ,MAAM+rC,WAAWzrC,GACtBrP,KAAO2P,KAAKZ,MAAMJ,UAAUrN,MAC5B,GACFnJ,MACFkF,EAC+B,IAA7BsS,KAAKZ,MAAM+rC,WAAWzrC,GAClB0qC,EACE/5C,KAAO2P,KAAKZ,MAAMJ,UAAUnN,QAC5BxB,KAAO2P,KAAKZ,MAAMJ,UAAUpN,YACD,IAA7BoO,KAAKZ,MAAM+rC,WAAWzrC,GACtBrP,KAAO2P,KAAKZ,MAAMJ,UAAUpN,YAC5B,IACR,IAAMq8C,EAAavgD,EACoB,KAApBsS,KAAKL,MAAM9S,MAAqBmT,KAAKL,MAAM9S,KAGxC,KAApBmT,KAAKL,MAAM9S,MAAemT,KAAKL,MAAM9S,KAGvC,OAA2B,IAAvBmT,KAAKL,MAAMqgC,UAAoD,IAAhChgC,KAAKZ,MAAMksC,iBACrC,GAGL,yBAAKhrC,UAAU,YACb,yBAAKA,UAAU,qBACb,yBAAKA,UAAU,gBACZ7T,IAAauT,KAAKZ,MAAMJ,UAAUnS,MAErC,2BACEktB,IAAK,EACLra,GAAI,EACJY,UAAU,gCAEV4tC,YAAaD,EACb34C,MAAO0K,KAAKL,MAAM9S,KAClBwT,QAAS,SAACf,GAAD,OAAO,EAAKiX,YAAYjX,IACjCoa,QAAS,SAACpa,GAAD,OAAO,EAAKiX,YAAYjX,IACjCvS,KAAK,OACL8sB,OAAQ,SAACnE,GAAD,OAAS,EAAKy3B,WAAWz3B,IACjC7C,SAAU,SAAC6C,GAAD,OAAS,EAAK7V,SAAS,CAAEhT,KAAM6oB,EAAI7D,OAAOvc,YAcxD,kBAAC,IAAD,CACEoK,GAAI,EACJ8Y,UAAWg1B,EAAU9gD,IACrBypB,OAAQ,EACRg4B,MAAOnuC,KAAKZ,MAAMg1B,UAClBp1B,SAAUgB,KAAKZ,MAAMJ,SACrBqY,WAAYrX,KAAKZ,MAAM+rC,WAAWj3C,IAClCkkB,kBAAmBpY,KAAKoY,oBAEzBpY,KAAK26B,WAAW8S,GAAGjQ,KAAI,SAAC4Q,GACvB,OAAQP,GAAaO,EAAGV,QAAUF,EAAU5gD,SAC1CwhD,EAAGV,QAAUF,EAAU9gD,IACvB,GAEA,kBAAC,IAAD,CACEqtB,IAAKq0B,EAAG1uC,GACRA,GAAI0uC,EAAG1uC,GACPyuC,MAAO,EAAK/uC,MAAMg1B,UAClBsZ,MAAOU,EAAGV,MACVC,SAAUS,EAAGT,SACbl1B,QAAS21B,EAAGV,QAAUF,EAAU1gD,QAASkhD,EACzCvtC,SACE2tC,EAAGV,QAAUF,EAAU1gD,QACvBshD,EAAGT,WACDpjC,YACEnQ,KACAA,KAAO1C,OAAOnC,IACd,EAAK6J,MAAMJ,UAEXmP,YAAyB,EAAK/O,MAAMJ,eACpCwB,EAGNvO,OAAQm8C,EAAGn8C,OACX+M,SAAU,EAAKI,MAAMJ,SACrBqvC,cAAeD,EAAGR,mBAClBZ,YAAa,EAAKA,iBAQlB,kBAAC,IAAD,CACFttC,GAAI,EACJ8Y,UAAWg1B,EAAUt/C,OACrBioB,OAAQ,EACRg4B,MAAOnuC,KAAKZ,MAAMg1B,UAClB3zB,SACoB,IAAlBT,KAAKZ,MAAMM,GACP0O,YAAcpO,KAAKZ,MAAMJ,eACzBwB,EAENxB,SAAUgB,KAAKZ,MAAMJ,SACrBqY,WAAYrX,KAAKZ,MAAM+rC,WAAWrqB,OAClC1I,kBAAmBpY,KAAKoY,oBAMvB,kBAAC,IAAD,CACD1Y,GAAI,EACJ8Y,UAAWg1B,EAAUr/C,OACrBgoB,OAAQ,EACRg4B,MAAOnuC,KAAKZ,MAAMg1B,UAElB3zB,SACoB,IAAlBT,KAAKZ,MAAMM,IAAa0qC,OAEpB5pC,EADA+O,YAAsBvP,KAAKZ,MAAMJ,UAGvCka,UAAW80B,EACXhvC,SAAUgB,KAAKZ,MAAMJ,SACrBqY,WACE6D,KAAKC,MAAM,IAAQnb,KAAKZ,MAAM+rC,WAAWpqB,YAAc,IAEzD3I,kBAAmBpY,KAAKoY,oBAG3BgyB,GAAiByD,IAAcC,EAC9B,GAEA,kBAAC,IAAD,CACEpuC,GAAI,EACJ8Y,UACEs1B,GAA0B1D,EACtBoD,EAAUn/C,aACVm/C,EAAUp/C,OAEhB+nB,OAAQ,EACRg4B,MAAOnuC,KAAKZ,MAAMg1B,UAClBp1B,SAAUgB,KAAKZ,MAAMJ,SACrBqY,WAAYrX,KAAKZ,MAAM+rC,WAAWtpB,cAClCphB,SACoB,IAAlBT,KAAKZ,MAAMM,GACP8P,YACExP,KAAKZ,MAAMJ,SACXgB,KAAK+sC,oBAEPvsC,EAEN4Y,YAAc00B,GAA0B1D,EAAa,MAAM,GAC3DhyB,kBAAmBpY,KAAKoY,oBAG3By1B,EACC,GAEA,kBAAC,IAAD,CACEnuC,GAAI,EACJ8Y,UAAWxY,KAAKZ,MAAMmxB,KAAKid,EAAUj/C,QAAQi/C,EAAUl/C,QACvD6nB,OAAQ,EACRg4B,MAAOnuC,KAAKZ,MAAMg1B,UAElB3zB,SACoB,IAAlBT,KAAKZ,MAAMM,GACN0qC,EAAa/6B,YAAmCrP,KAAKZ,MAAMJ,UAAUoQ,YAAuBpP,KAAKZ,MAAMJ,UACxGsQ,YAAsBtP,KAAKZ,MAAMJ,UAEvCka,SAAU80B,EACVhvC,SAAUgB,KAAKZ,MAAMJ,SACrBqY,WACE6D,KAAKC,MAAM,IAAQnb,KAAKZ,MAAM+rC,WAAW7a,aAAe,IAE1DlY,kBAAmBpY,KAAKoY,qBAIV,IAAjB21B,GACC/tC,KAAKZ,MAAMg1B,UAAY,IACtBp0B,KAAKZ,MAAMokB,cACZl7B,KACE,4BACEgY,UAAU,eACVJ,MAAO,CACLyN,MAA+B,OAAxB3N,KAAKZ,MAAMJ,SAAoB,QAAU,SAElDqB,QAASL,KAAK0sC,UAGbc,EAAUp9C,QAIjB,kBAAC,IAAD,CACEm7C,UAAWvrC,KAAKZ,MAAMM,GACtB+rC,YAAazrC,KAAKZ,MAAMg1B,UACxBka,eAAe,EACf9C,SAAU,EACVhyB,SAAUxZ,KAAKZ,MAAMksC,iBACrBiD,QAASjmD,IAAa,IAAM,EAC5BojD,YAAa1rC,KAAK0rC,YAClBC,eAAgB3rC,KAAK2rC,sBAlgBjC,GAA4BhrC,c,qLCQf6tC,G,MAAb,kDAGE,WAAYpvC,GAAQ,IAAD,EAQb7D,EARa,qBACjB,cAAM6D,IAHRw+B,YAAc4Q,EAAU3hD,KAEL,EAuGnBujB,kBAAoB,WAClB,EAAKvQ,SAAS,CAAE4K,YAAa,EAAKrL,MAAMwsC,cAAcnhC,eAxGrC,EA2GnBkhC,eAAiB,SAACjsC,GAChB,EAAKN,MAAM0mC,sBAAsBpmC,IA5GhB,EA+GnBgsC,YAAc,WACZ,IAAI+C,EACF,EAAKrvC,MAAMo1B,aAAe,EAAKmG,WAAW8S,GAAG,GAAGx7C,OAAO8J,OAAS,EAC5D,EAAK4+B,WAAW8S,GAAG,GAAGx7C,OAAO8J,OAAS,EACtC,EAAKqD,MAAMo1B,aAEbka,EAAW,EAAK/T,WAAW8S,GAAG,GAAGx7C,OAAOw8C,GAAQpB,MAC9CrwB,EAAcmC,YAAuBtpB,KAAa64C,GAEpDvxB,EAAY,CACdzd,GAAI,EAAKN,MAAMo1B,aAAe,EAE9BxX,YAAaA,EACbvS,YAAc,GACdD,SAAU/S,KAAUC,OAAOnC,IAC3B8nB,UAAW,EAEXQ,aAAcnjB,IAAUC,MAAMpF,IAC9BtH,OAAQ,EACR1B,MAAO,EACPW,YAAa,GACbunC,eAAgB,EAChB9W,iBAAkB,IAGpBR,EAAY,EAAKwxB,4BAA4BxxB,GAE7C,EAAK/d,MAAMwlC,mBAAmBznB,IA1Ib,EA6InB6vB,YAAc,SAACttC,EAAIutC,GACjB,IAAI9vB,EAAY,CACdzd,GAAI,EAAKN,MAAMwsC,cAAclsC,GAE7Bsd,YAAa,EAAK5d,MAAMwsC,cAAc5uB,YACtCxS,SAAU,EAAKpL,MAAMwsC,cAAcphC,SACnC6S,UAAW,EAAKje,MAAMwsC,cAAcvuB,UACpCpvB,OAAQ,EAAKmR,MAAMwsC,cAAc39C,OAEjC4vB,aAAc,EAAKze,MAAMwsC,cAAc/tB,aACvC3wB,YAAa,EAAKkS,MAAMwsC,cAAc1+C,YACtCX,MAAO,EAAK6S,MAAMwsC,cAAcr/C,OAEvB,IAAPmT,EAEFyd,EAAUH,YAAcmC,YAAuBtpB,KAAao3C,GAC5C,IAAPvtC,EACTyd,EAAU3S,SAAW2U,YAAuB1nB,KAAWw1C,GACvC,IAAPvtC,IAETyd,EAAUU,aAAesB,YAAuBzkB,IAAWuyC,IAG7D9vB,EAAY,EAAKwxB,4BAA4BxxB,GAE7C,EAAK/d,MAAM8rC,aAAa/tB,GACrB,EAAKxd,MAAMivC,mBAAmB,EAAKC,YAAY1xB,IAvKjC,EA0KnB2xB,WAAa,SAACp5B,GAEZ,IAAIswB,EAAQrhB,KAAKC,MAAMD,KAAKE,UAAU,EAAKzlB,MAAMwsC,gBACjD5F,EAAKv7B,YAAciL,EAAI7D,OAAOvc,MAC9B,EAAK8J,MAAM8rC,aAAalF,IA9KP,EAiLnB5tB,kBAAoB,SAAC1Y,EAAIpK,GACvB,IAAI6nB,EAAY,CACdzd,GAAI,EAAKN,MAAMwsC,cAAclsC,GAE7Bsd,YAAa,EAAK5d,MAAMwsC,cAAc5uB,YACtCxS,SAAU,EAAKpL,MAAMwsC,cAAcphC,SACnC6S,UAAW,EAAKje,MAAMwsC,cAAcvuB,UACpCpvB,OAAQ,EAAKmR,MAAMwsC,cAAc39C,OACjCf,YAAa,EAAKkS,MAAMwsC,cAAc1+C,YACtCX,MAAO,EAAK6S,MAAMwsC,cAAcr/C,MAEhCsxB,aAAc,EAAKze,MAAMwsC,cAAc/tB,cAGrCivB,GAAU,EACR7tC,EAAO,EAAKG,MAAMJ,SAClB4tC,EAAa/2B,YAAYvgB,EAAM2J,GAC/B4tC,EAAgBnjC,SAASkjC,GAEpB,IAAPltC,GACFotC,EACE3vB,EAAUE,YAAcwvB,EAC1B1vB,EAAUE,UAAYwvB,GACN,IAAPntC,GACTotC,EACE3vB,EAAUlvB,SACVyb,SAAS,IAAMkjC,GAAc,IAG/BzvB,EAAUlvB,OACRyb,SAAS,IAAMkjC,GAAc,KACf,IAAPltC,GACTotC,EAAU3vB,EAAUjwB,cAAgBwc,SAASpU,GAC7C6nB,EAAUjwB,YAAcwc,SAASpU,IACjB,IAAPoK,IACTotC,EAAU3vB,EAAU1S,cAAgBnV,EACpC6nB,EAAU1S,YAAcnV,GAEf,IAAPoK,IACFotC,EAAU3vB,EAAU5wB,QAAUsgD,EAC9B1vB,EAAU5wB,MAAQsgD,GAGhBC,IAEF,EAAK1tC,MAAM8rC,aAAa/tB,GACrB,EAAKxd,MAAMivC,mBAAmB,EAAKC,YAAY1xB,KA/NnC,EAuOnB0xB,YAAY,SAAC1xB,EAAU3Q,GACrB,EAAK3M,SAAS,CAAEmgC,SAAS,IACzB,IAAIn1B,EAAe,GACf5L,EAAK,EAAKG,MAAMJ,SAChB+vC,EACN5xB,EAAUH,cACNnnB,KAAYI,kBAAkBV,KAC9B4nB,EAAUH,cACVnnB,KAAYK,oBAAoBX,IAGlC,EAAKqV,cADHmkC,EACmB,CACnB1iD,IAAkB4S,GAAM3S,KACxBD,IAAkB4S,GAAM1S,MACxBF,IAAkB4S,GAAMzS,WAIL,CACnBH,IAAkB4S,GAAM3S,KACxBD,IAAkB4S,GAAMzS,WAK5B,IAII+O,EACAhP,EACAD,EANA0iD,EAAQ9xB,YAAsBC,EAAU3Q,GAExCtL,EAAQ,GACR+tC,EAAS,GAIb,IAAK1zC,EAAI,EAAGA,EAAI4hB,EAAUjwB,YAAc,IAAKqO,EAC3ChP,EAAMgP,EAAE,EAAE4hB,EAAU5wB,MAAM,EAC1BD,EAAKiP,EAAE,EAAEA,EAAGtP,IAAiBgT,GAAM9S,MACnC+U,EAAMzF,KAAKnP,GACX2iD,EAAOxzC,KAAKlP,GAIdse,EAAe,GAAK3J,EAChB6tC,GACFlkC,EAAe,GAAKzB,YAAiB6lC,EAAQhwC,EAAM,GACnD4L,EAAe,GAAKzB,YAAiB4lC,EAAO/vC,EAAM,IAC7C4L,EAAe,GAAKzB,YAAiB4lC,EAAO/vC,EAAM,GAEzD,EAAKY,SAAS,CAACgL,eAAeA,EAAgBm1B,SAAS,KArRpC,EA0RnBkP,YAAc,WACR,EAAK9vC,MAAMksC,mBAEf,EAAKzrC,SAAS,CAAEmgC,SAAS,IAEzB,EAAK6O,YAAY,EAAKzvC,MAAMwsC,cAAe,EAAKxsC,MAAMoN,SA+CtD,EAAK3M,UAAS,SAACoR,GAEb,MAAO,CAAE29B,mBADK39B,EAAU29B,kBACc5O,QAAS,EAAK5gC,MAAMksC,uBAhV3C,EAyVnBqD,4BAA8B,SAACxxB,GAO7B,OANIA,EAAUH,cAAgBnnB,KAAYI,kBAAkBV,IAC1D4nB,EAAUjwB,YAAc,GACfiwB,EAAUH,cAAgBnnB,KAAYK,oBAAoBX,MACnE4nB,EAAUjwB,YAAc,IAGnBiwB,GA9VP,EAAKxd,MAAQ,CACX8K,YAAa,GACbmkC,mBAAmB,EACnB5O,SAAS,EACTn1B,eAAe,IAGjB,IAAIskC,EAAa,GACjB,EAAKzhD,KAAO,EAAK0R,MAAMwsC,cAAcnhC,YACrC,IAAM2kC,EAAkB5wB,YAAqB3oB,MAC7C,IAAK0F,EAAI,EAAGA,EAAI6zC,EAAgBrzC,SAAUR,EACxC4zC,EAAW1zC,KAAK,CACd4xC,MAAO+B,EAAgB7zC,GAAGjG,MAAM,EAAK8J,MAAMJ,UAC3C1J,MAAOiG,EAAI,IAGf,IAAI8zC,EAAc,CAChB,CAAEhC,MAAO51C,KAAUC,OAAOpC,MAAM,EAAK8J,MAAMJ,UAAW1J,MAAO,GAC7D,CAAE+3C,MAAO51C,KAAUE,OAAOrC,MAAM,EAAK8J,MAAMJ,UAAW1J,MAAO,GAC7D,CAAE+3C,MAAO51C,KAAUG,MAAMtC,MAAM,EAAK8J,MAAMJ,UAAW1J,MAAO,IAG1Dg6C,EAAkB,CAGpB,CAAEjC,MAAO3yC,IAAUC,MAAMrF,MAAM,EAAK8J,MAAMJ,UAAW1J,MAAO,GAC5D,CAAE+3C,MAAO3yC,IAAUE,QAAQtF,MAAM,EAAK8J,MAAMJ,UAAW1J,MAAO,IA5B/C,OA+BjB,EAAKqlC,WAAa,CAChB8S,GAAI,CACF,CACE/tC,GAAI,EACJguC,MAAOjhD,IAAa,EAAK2S,MAAMJ,UAAUjS,KACzC4gD,SAAUpjC,YACR1U,KACA,EAAKuJ,MAAMwsC,cAAc5uB,YACzB,EAAK5d,MAAMJ,UAEb/M,OAAQk9C,GAEV,CACEzvC,GAAI,EACJguC,MAAOjhD,IAAa,EAAK2S,MAAMJ,UAAUhS,MACzC2gD,SAAUpjC,YACR9S,KACA,EAAK2H,MAAMwsC,cAAcphC,SACzB,EAAKpL,MAAMJ,UAEb/M,OAAQo9C,GAEV,CACE3vC,GAAI,EACJguC,MAAOjhD,IAAa,EAAK2S,MAAMJ,UAAU/R,UACzC0gD,SACApjC,YACE7P,IACA,EAAK0E,MAAMwsC,cAAc/tB,aACzB,EAAKze,MAAMJ,UAEb/M,OAAQq9C,KAKd,EAAK1kC,cAAgB,GAnEJ,EAHrB,6DAyEE,SAA0B7K,GAEtBA,EAAU6rC,gBAAkB5rC,KAAKZ,MAAMwsC,eACvC7rC,EAAUL,KAAOM,KAAKZ,MAAMM,IAC5BK,EAAUy0B,eAAiBx0B,KAAKZ,MAAMo1B,eAGtCx0B,KAAK26B,WAAW8S,GAAG,GAAGE,SAAWpjC,YAC/B1U,KACAkK,EAAU6rC,cAAc5uB,YACxBhd,KAAKZ,MAAMJ,UAEbgB,KAAK26B,WAAW8S,GAAG,GAAGE,SAAWpjC,YAC/B9S,KACAsI,EAAU6rC,cAAcphC,SACxBxK,KAAKZ,MAAMJ,UAEbgB,KAAK26B,WAAW8S,GAAG,GAAGE,SACtBpjC,YACE7P,IACAqF,EAAU6rC,cAAc/tB,aACxB7d,KAAKZ,MAAMJ,UAGbgB,KAAKH,SAAS,CAAE4K,YAAa1K,EAAU6rC,cAAcnhC,eAGnD1K,EAAUyM,UAAYxM,KAAKZ,MAAMoN,SAEnCxM,KAAK6uC,YAAY9uC,EAAU6rC,cAAc7rC,EAAUyM,WAtGzD,oBAsWE,WAAU,IAAD,OAIC+iC,EAAYvvC,KAAKZ,MAAMwsC,cAAc/tB,eAAenjB,IAAUC,MAAMpF,IAAImF,IAAUC,MAAM5E,GAAG2E,IAAUE,QAAQ7E,GAG/Gy5C,EACJxvC,KAAKZ,MAAMwsC,cAAc5uB,cACvBnnB,KAAYI,kBAAkBV,KAChCyK,KAAKZ,MAAMwsC,cAAc5uB,cACvBnnB,KAAYK,oBAAoBX,KAClCyK,KAAKZ,MAAMwsC,cAAc5uB,cACvBnnB,KAAYa,qBAAqBnB,IAE/BiX,EAAaxM,KAAKZ,MAAMwsC,cAAc5uB,cAAkBnnB,KAAYc,QAAQpB,IAM5Ek6C,IAHLnnD,MACEknD,IAAchjC,GACfxM,KAAK26B,WAAW8S,GAAGjQ,KAAI,SAAC4Q,GAAD,OAAkB,IAAVA,EAAG1uC,OAEnCpX,MACE0X,KAAKZ,MAAMwsC,cAAc5uB,cACxBnnB,KAAYK,oBAAoBX,KAChCyK,KAAKZ,MAAMwsC,cAAc5uB,cACvBnnB,KAAYI,kBAAkBV,MAE9Bm6C,GACLpnD,MAAekkB,KAEZxM,KAAKZ,MAAMwsC,cAAc5uB,cACzBnnB,KAAYa,qBAAqBnB,KAMrC,OAA2B,IAAvByK,KAAKL,MAAMqgC,UAAmD,IAA/BhgC,KAAKZ,MAAMksC,iBAE3C,GAID,yBAAKhrC,UAAU,YACZN,KAAK26B,WAAW8S,GAAGjQ,KAClB,SACE4Q,GADF,OAGEA,EAAG1uC,GAAK,KACK,IAAV0uC,EAAG1uC,KACJ,kBAAC,IAAD,CACEqa,IAAKq0B,EAAG1uC,GACRA,GAAI0uC,EAAG1uC,GACPyuC,MAAO,EAAK/uC,MAAMo1B,aAClBkZ,MAAOU,EAAGV,MACVjtC,SACE2tC,EAAGV,QAAUjhD,IAAa,EAAK2S,MAAMJ,UAAUjS,MAAQ,EAAKqS,MAAMwsC,cAAc5uB,cAAcnnB,KAAYc,QAAQpB,IAC9GuZ,YAAmB,EAAK1P,MAAMJ,eAC9BwB,EAENmN,MAAO1jB,IACP0jD,SAAUS,EAAGT,SACb17C,OAAQm8C,EAAGn8C,OACX+6C,YAAa,EAAKA,iBAIzB,yBAAK1sC,UAAU,qBACR,yBAAKA,UAAU,gBACZ7T,IAAauT,KAAKZ,MAAMJ,UAAUtR,KACZ,OAAtBsS,KAAKZ,MAAMJ,SAAgB,kBAAC,IAAD,CAAMyB,SAAUsO,YAAoB/O,KAAKZ,MAAMJ,iBAAcwB,EAAW,KAGtG,2BACEuZ,IAAK,OACLra,GAAI,EAEJY,UAAU,gCACVhL,MAAO0K,KAAKL,MAAM8K,YAClBpK,QAASL,KAAK2W,OACd5pB,KAAK,OACL8lB,SAAU,SAAC6C,GAAD,OACR,EAAK7V,SAAS,CAAE4K,YAAaiL,EAAI7D,OAAOvc,SAE1CukB,OAAQ,SAACnE,GAAD,OAAS,EAAKo5B,WAAWp5B,OAK3C,kBAAC,IAAD,CACE8C,UAAW/rB,IAAauT,KAAKZ,MAAMJ,UAAU5R,OAC7CsS,GAAI,EACJyW,OAAQ,EACRg4B,MAAOnuC,KAAKZ,MAAMo1B,aAClBx1B,SAAUgB,KAAKZ,MAAMJ,SACrB0Z,SAAUlM,EACV6K,WAAYrX,KAAKZ,MAAMwsC,cAAcvuB,UACrCjF,kBAAmBpY,KAAKoY,oBAGzBq3B,GACC,kBAAC,IAAD,CACEj3B,UAAW/rB,IAAauT,KAAKZ,MAAMJ,UAAUzS,MAC7CmT,GAAI,EACJyW,OAAQ,EACRg4B,MAAOnuC,KAAKZ,MAAMo1B,aAClBx1B,SAAUgB,KAAKZ,MAAMJ,SACrBqY,WAAYrX,KAAKZ,MAAMwsC,cAAcr/C,MACrC6rB,kBAAmBpY,KAAKoY,qBAI1B9vB,MACCknD,IAAchjC,GACfxM,KAAK26B,WAAW8S,GAAGjQ,KACjB,SAAC4Q,GAAD,OACY,IAAVA,EAAG1uC,IACD,kBAAC,IAAD,CACEqa,IAAKq0B,EAAG1uC,GACRA,GAAI0uC,EAAG1uC,GACPyuC,MAAO,EAAK/uC,MAAMo1B,aAClBkZ,MAAOU,EAAGV,MACVC,SAAUS,EAAGT,SACb17C,OAAQm8C,EAAGn8C,OACX+6C,YAAa,EAAKA,kBAI1B1kD,MAAgBknD,IAAchjC,GAC9B,kBAAC,IAAD,CACEgM,UACgB,IAAd+2B,EACI9iD,IAAauT,KAAKZ,MAAMJ,UAAU/Q,OAClCxB,IAAauT,KAAKZ,MAAMJ,UAAU7R,WAExCuS,GAAI,EACJyW,OAAQ,EACRg4B,MAAOnuC,KAAKZ,MAAMo1B,aAClBx1B,SAAUgB,KAAKZ,MAAMJ,SACrBqY,WAAY6D,KAAKC,MAAM,IAAMnb,KAAKZ,MAAMwsC,cAAc39C,QAAQ,IAC9DmqB,kBAAmBpY,KAAKoY,oBAI3Bs3B,GACC,kBAAC,IAAD,CACEl3B,UAAW/rB,IAAauT,KAAKZ,MAAMJ,UAAU9R,YAC7CwS,GAAI,EACJyW,OAAQ,EACRg4B,MAAOnuC,KAAKZ,MAAMo1B,aAClBx1B,SAAUgB,KAAKZ,MAAMJ,SACrBqY,WAAYrX,KAAKZ,MAAMwsC,cAAc1+C,YACrCkrB,kBAAmBpY,KAAKoY,qBAI1B9vB,KACA,yBACEgY,UAAU,WACVD,QAASL,KAAKkvC,YACdxvC,GAAG,SACHmpB,IAAI,KACJ1V,KACmC,IAAjCnT,KAAKL,MAAMivC,kBACPjuB,EAAQ,KACRA,EAAQ,OAKlB,kBAAC,IAAD,CACE4qB,UAAWvrC,KAAKZ,MAAMwsC,cAAclsC,GACpC8rC,SAAU,EACV9rC,GAAIM,KAAKZ,MAAMwsC,cAAc5uB,YAC7ByuB,YAAazrC,KAAKZ,MAAMo1B,aACxBkX,YAAa1rC,KAAK0rC,YAClBC,eAAgB3rC,KAAK2rC,eACrBnyB,SAAUxZ,KAAKZ,MAAMksC,oBAQW,IAAjCtrC,KAAKL,MAAMivC,mBACV,yBAAK1uC,MAAO,CAAE+T,MAAO,OAAQ7T,MAAO,OAAQuN,MAAO,QACjD,kBAAC,IAAD,CACE/C,cAAe5K,KAAK4K,cACpBC,eAAgB7K,KAAKL,MAAMkL,eAC3BH,UACEH,YACE1U,KACAmK,KAAKZ,MAAMwsC,cAAc5uB,YACzBhd,KAAKZ,MAAMJ,UACT,cAENA,SAAUgB,KAAKZ,MAAMJ,iBA5iBnC,GAA+B2B,e,6KCnBlBgvC,EAAb,kDAGE,WAAYvwC,GAAQ,IAAD,EAEb7D,EAFa,qBACjB,cAAM6D,IAHRw+B,YAAc+R,EAAO9iD,KAEF,EA4DnB8+C,eAAiB,SAACjsC,IACoB,IAAhC,EAAKN,MAAMksC,kBACb,EAAKlsC,MAAM8mC,mBAAmBxmC,IA9Df,EAkEnBkwC,4BAA8B,SAAC71B,GAC7B,OACEA,IAAQthB,KAAcE,sBAAsBpD,KAC5CwkB,IAAQthB,KAAcG,kBAAkBrD,KArEzB,EA2EnBs6C,iBAAmB,SAAC91B,GAClB,OAAIA,IAAQthB,KAAcM,gBAAgBxD,KA5EzB,EA+EnBu6C,0BAA4B,SAAC/1B,GAC3B,OAAIA,IAAQthB,KAAcI,oBAAoBtD,KAhF7B,EAoFnBm2C,YAAc,WAEZ,IAAoC,IAAhC,EAAKtsC,MAAMksC,iBAA4B,CAE3C,IAAIyE,EACF,EAAK3wC,MAAMs1B,UAAY,EAAKiG,WAAW8S,GAAG,GAAGx7C,OAAO8J,OAAS,EACzD,EAAK4+B,WAAW8S,GAAG,GAAGx7C,OAAO8J,OAAS,EACtC,EAAKqD,MAAMs1B,UAGbqb,EAAW,EAAKpV,WAAW8S,GAAG,GAAGx7C,OAAO8J,OAAS,IAAGg0C,GAAY,GAQpE,IANA,IAAIC,EAAgB7wB,YAClB1mB,KACA,EAAKkiC,WAAW8S,GAAG,GAAGx7C,OAAO89C,GAAU1C,OAKvC2C,IAAkBv3C,KAAcG,kBAAkBrD,KAClDy6C,IAAkBv3C,KAAcE,sBAAsBpD,KACrDy6C,IAAkBv3C,KAAcI,oBAAoBtD,MACZ,IAAvC,EAAK6J,MAAM6sC,yBAEb8D,GAAY,EACZC,EAAgB7wB,YACd1mB,KACA,EAAKkiC,WAAW8S,GAAG,GAAGx7C,OAAO89C,GAAU1C,OAK3C,KACE2C,IAAkB,EAAK5wC,MAAM2sC,WAAWna,eACxC,EAAKxyB,MAAM2sC,WAAWna,gBAAkBn5B,KAAchC,MAAMlB,KAE5Dw6C,GAAY,EACZC,EAAgB7wB,YACd1mB,KACA,EAAKkiC,WAAW8S,GAAG,GAAGx7C,OAAO89C,GAAU1C,OAI3C,IAAM9kB,EAAS,CACb7oB,GAAI,EAAKN,MAAMs1B,UAAY,EAC3B9C,cAAeoe,EACf5iD,OAAQ,EACRS,UAAW,GAKTmiD,IAAkBv3C,KAAcM,gBAAgBxD,MAClDgzB,EAAO75B,QAAUxE,KAEnB,EAAKkV,MAAM+lC,gBAAgB5c,KA3IV,EA+InBykB,YAAc,SAACttC,EAAIutC,GACjB,IAAI1kB,EAAS,CACX7oB,GAAI,EAAKN,MAAM2sC,WAAWrsC,GAE1BkyB,cAAe,EAAKxyB,MAAM2sC,WAAWna,cACrCxkC,OAAQ,EAAKgS,MAAM2sC,WAAW3+C,OAC9BS,UAAW,EAAKuR,MAAM2sC,WAAWl+C,UACjCgkC,SAAU,EAAKzyB,MAAM2sC,WAAWla,SAChCnjC,QAAS,EAAK0Q,MAAM2sC,WAAWr9C,QAC/BwiC,aAAc,EAAK9xB,MAAM2sC,WAAW7a,cAG3B,IAAPxxB,EACF6oB,EAAOqJ,cAAgBzS,YAAuB1mB,KAAew0C,GAC/C,IAAPvtC,IAAU6oB,EAAOoJ,QAAUsb,GACpC,EAAK7tC,MAAM8rC,aAAa3iB,IA9JP,EAiKnBnQ,kBAAoB,SAAC1Y,EAAIpK,GACvB,IAAK6kB,EAAK,CACRza,GAAI,EAAKN,MAAM2sC,WAAWrsC,GAE1BkyB,cAAe,EAAKxyB,MAAM2sC,WAAWna,cACrCxkC,OAAQ,EAAKgS,MAAM2sC,WAAW3+C,OAC9BS,UAAW,EAAKuR,MAAM2sC,WAAWl+C,UACjCgkC,SAAU,EAAKzyB,MAAM2sC,WAAWla,SAChCF,QAAS,EAAKvyB,MAAM2sC,WAAWpa,QAC/BjjC,QAAS,EAAK0Q,MAAM2sC,WAAWr9C,QAC/BwiC,aAAc,EAAK9xB,MAAM2sC,WAAW7a,cAKlC4b,GAAU,EACR7tC,EAAO,EAAKG,MAAMJ,SAClB4tC,EAAa/2B,YAAYvgB,EAAM2J,GAC/B4tC,EAAgBnjC,SAASkjC,GAEpB,IAAPltC,GACFotC,EAAU3yB,EAAG/sB,SAAWy/C,EACxB1yB,EAAG/sB,OAASy/C,GACI,IAAPntC,GACTotC,EAAU3yB,EAAGtsB,YAAcyH,EAC3B6kB,EAAGtsB,UAAYyH,GACC,IAAPoK,GACTotC,EAAU3yB,EAAG0X,WAAav8B,EAC1B6kB,EAAG0X,SAAWv8B,GACE,IAAPoK,GACTotC,EACE3yB,EAAGzrB,UACHgb,SAAS,IAAMkjC,GAAc,IAG/BzyB,EAAGzrB,QACDgb,SAAS,IAAMkjC,GAAc,KACf,IAAPltC,IACTotC,EACE3yB,EAAG+W,eACHxnB,SAAS,IAAMkjC,GAAc,IAG/BzyB,EAAG+W,aACDxnB,SAAS,IAAMkjC,GAAc,KAE7BE,IACD,EAAK1tC,MAAM8rC,aAAa/wB,GACxB,EAAKta,SAAS,CAAEmgC,QAAS,EAAK5gC,MAAMksC,qBA9MvC,IAAI6D,EAAa,GACXc,EAAoBzxB,YAAqB/lB,MAC/C,IAAK8C,EAAI,EAAGA,EAAI00C,EAAkBl0C,SAAUR,EAExC4zC,EAAW1zC,KAAK,CACd4xC,MAAO4C,EAAkB10C,GAAGjG,MAAM,EAAK8J,MAAMJ,UAC7C1J,MAAOiG,EAAI,IATA,OAuBjB,EAAKoE,MAAQ,GACb,EAAKg7B,WAAa,CAChB8S,GAAI,CACF,CACE/tC,GAAI,EACJguC,MAAOjhD,IAAa,EAAK2S,MAAMJ,UAAUjS,KACzC4gD,SAAUpjC,YACR9R,KACA,EAAK2G,MAAM2sC,WAAWna,cACtB,EAAKxyB,MAAMJ,UAEb4uC,mBAAoBjuB,YAAiBlnB,MACrCxG,OAAQk9C,KAId,EAAKxU,WAAW8S,GAAG,GAAGG,mBAAmBn1C,KAAcG,kBAAkB7C,KAAI,EAC7E,EAAK4kC,WAAW8S,GAAG,GAAGG,mBAAmBn1C,KAAcE,sBAAsB5C,KAAI,EACjF,EAAK4kC,WAAW8S,GAAG,GAAGG,mBAAmBn1C,KAAcI,oBAAoB9C,KAAI,EAzC9D,EAHrB,6DAgDE,SAA0BgK,GAEtBA,EAAUgsC,aAAe/rC,KAAKZ,MAAM2sC,YACpChsC,EAAUL,KAAOM,KAAKZ,MAAMM,IAC5BK,EAAU20B,YAAc10B,KAAKZ,MAAMs1B,YAGnC10B,KAAK26B,WAAW8S,GAAG,GAAGE,SAAWpjC,YAC/B9R,KACAsH,EAAUgsC,WAAWna,cACrB5xB,KAAKZ,MAAMJ,aA1DnB,oBAwNE,WAAU,IAYJkxC,EAZG,OACD9R,EAAMp+B,KAAK4vC,4BACf5vC,KAAKZ,MAAM2sC,WAAWna,eAElBue,EAAYnwC,KAAK8vC,0BACrB9vC,KAAKZ,MAAM2sC,WAAWna,eAElBwe,EAAWpwC,KAAK6vC,iBAAiB7vC,KAAKZ,MAAM2sC,WAAWna,eACvD34B,EAAO+G,KAAKZ,MAAM2sC,WAAWna,gBAAkBn5B,KAAcQ,KAAK1D,IAaxE,OARI0D,IACFi3C,EAAuB,IACFz0C,KAAK,CACxB4xC,MAAO50C,KAAcQ,KAAK3D,MAAM0K,KAAKZ,MAAMJ,UAC3C1J,MAAO,KAIgB,IAAvB0K,KAAKL,MAAMqgC,UAAmD,IAA/BhgC,KAAKZ,MAAMksC,iBAE3C,GAID,yBAAKhrC,UAAU,YACZN,KAAK26B,WAAW8S,GAAGjQ,KAAI,SAAC4Q,GAAD,OACtB,kBAAC,IAAD,CACEr0B,IAAKq0B,EAAG1uC,GACRA,GAAI0uC,EAAG1uC,GACPyuC,MAAO,EAAK/uC,MAAMs1B,UAClBgZ,MAAOU,EAAGV,MAEV//B,MAAO1jB,IACP+U,SAAU,EAAKI,MAAMJ,SACrB2uC,SAAUS,EAAGT,SACb17C,OAAQm8C,EAAGn8C,OACXo8C,cAAeD,EAAGR,mBAClBsC,qBAAsBA,EACtBlD,YAAa,EAAKA,kBAGpB/zC,GACA,kBAAC,IAAD,CACEkd,OAAQ,EACRzW,GAAI,EACJqa,IAAI,MACJvB,UAAW/rB,IAAauT,KAAKZ,MAAMJ,UAAU1R,YAC7CorB,SAAU0lB,EACV+P,MAAOnuC,KAAKZ,MAAMs1B,UAClB11B,SAAUgB,KAAKZ,MAAMJ,SACrByB,SACE29B,GAAO+R,EACHpiC,YAAsB/N,KAAKZ,MAAMJ,eACjCwB,EAEN4V,SAAU+5B,EAAYnwC,KAAKZ,MAAM2sC,WAAWC,eAAYxrC,EACxD6W,WAAYrX,KAAKZ,MAAM2sC,WAAW3+C,OAClCijD,WAAYrwC,KAAKZ,MAAM2sC,WAAWrsC,GAClC0Y,kBAAmBpY,KAAKoY,oBAI3BgmB,GAAO+R,EACN,GAEA,kBAAC,IAAD,CACEh6B,OAAQ,EACRzW,GAAI,EACJ8Y,UACEvf,EACIxM,IAAauT,KAAKZ,MAAMJ,UAAUzP,QAClC9C,IAAauT,KAAKZ,MAAMJ,UAAUnR,UAExCsgD,MAAOnuC,KAAKZ,MAAMs1B,UAClB11B,SAAUgB,KAAKZ,MAAMJ,SACrBqY,WAAYrX,KAAKZ,MAAM2sC,WAAWl+C,UAClC4S,SAAU0O,YAAqBnP,KAAKZ,MAAMJ,UAE1C0Z,SAAUzf,EACVo3C,WAAYrwC,KAAKZ,MAAM2sC,WAAWrsC,GAClC0Y,kBAAmBpY,KAAKoY,oBAG3BgmB,GAAOnlC,EACN,GAEA,kBAAC,IAAD,CACEkd,OAAQ,EACRzW,GAAI,EACJ8Y,UAAW/rB,IAAauT,KAAKZ,MAAMJ,UAAUlR,IAC7CqgD,MAAOnuC,KAAKZ,MAAMs1B,UAClB11B,SAAUgB,KAAKZ,MAAMJ,SACrBqY,WAAYrX,KAAKZ,MAAM2sC,WAAWla,SAClCzb,SACE+5B,EAAYnwC,KAAKZ,MAAM2sC,WAAWD,kBAAetrC,EAEnD6vC,WAAYrwC,KAAKZ,MAAM2sC,WAAWrsC,GAClC0Y,kBAAmBpY,KAAKoY,oBAI3Bg4B,GACC,kBAAC,IAAD,CACE1wC,GAAI,EACJ8Y,UAAW/rB,IAAauT,KAAKZ,MAAMJ,UAAUrQ,gBAC7CwnB,OAAQ,EACRg4B,MAAOnuC,KAAKZ,MAAMs1B,UAClB11B,SAAUgB,KAAKZ,MAAMJ,SAErBqY,WAAYrX,KAAKZ,MAAM2sC,WAAWr9C,QAClC2hD,WAAYrwC,KAAKZ,MAAM2sC,WAAWrsC,GAClC0Y,kBAAmBpY,KAAKoY,oBAI5B,kBAAC,IAAD,CACEmzB,UAAWvrC,KAAKZ,MAAM2sC,WAAWrsC,GACjC+rC,YAAazrC,KAAKZ,MAAMs1B,UACxBgX,YAAa1rC,KAAK0rC,YAClBC,eAAgB3rC,KAAK2rC,eACrBnyB,SAAUxZ,KAAKZ,MAAMksC,iBACrBgF,eAAgBlS,SApV1B,GAA4Bz9B,c,qKCHf4vC,EAAb,kDAGE,WAAYnxC,GAAQ,IAAD,EAEb7D,EAFa,qBACjB,cAAM6D,IAHRw+B,YAAc2S,EAAK1jD,KAEA,EA4CnB8+C,eAAiB,SAACjsC,GAEd,EAAKN,MAAM+mC,iBAAiBzmC,IA9Cb,EAkDnBgsC,YAAc,WAGV,IAAI8E,EACJ,EAAKpxC,MAAMu1B,QAAU,EAAKgG,WAAW8S,GAAG,GAAGx7C,OAAO8J,OAAS,EACvD,EAAK4+B,WAAW8S,GAAG,GAAGx7C,OAAO8J,OAAS,EACtC,EAAKqD,MAAMu1B,QAAQ,EAErB6b,EAAS,EAAK7V,WAAW8S,GAAG,GAAGx7C,OAAO8J,OAAS,IAAGy0C,GAAU,GAChE,IAAIC,EAAW,EAAK9V,WAAW8S,GAAG,GAAGx7C,OAAOu+C,GAAQnD,MAKpD,EAAKjuC,MAAMgmC,cACTjmB,YAAuBjmB,KAAau3C,GAJpB,EACN,IA9DK,EA0EnBzD,YAAc,SAACttC,EAAIutC,GACjB,IAAIlJ,EAAO,CACTrkC,GAAI,EAAKN,MAAMM,GACfuyB,YAAa,EAAK7yB,MAAM8sC,SAASja,YAEjCG,QAAS,EAAKhzB,MAAM8sC,SAAS9Z,QAC7BhlC,OAAQ,EAAKgS,MAAM8sC,SAAS9+C,OAC5BS,UAAW,EAAKuR,MAAM8sC,SAASr+C,UAC/BgkC,SAAU,EAAKzyB,MAAM8sC,SAASra,UAGrB,IAAPnyB,EACFqkC,EAAK9R,YAAc9S,YAAuBjmB,KAAa+zC,GACzC,IAAPvtC,IAAUqkC,EAAK2M,MAAQzD,GAEhC,EAAK7tC,MAAM8rC,aAAanH,IAzFP,EA4FnB3rB,kBAAoB,SAAC1Y,EAAIpK,GAEvB,IAAIyuC,EAAO,CACTrkC,GAAI,EAAKN,MAAMM,GACfuyB,YAAa,EAAK7yB,MAAM8sC,SAASja,YACjCG,QAAS,EAAKhzB,MAAM8sC,SAAS9Z,QAC7BhlC,OAAQ,EAAKgS,MAAM8sC,SAAS9+C,OAC5BS,UAAW,EAAKuR,MAAM8sC,SAASr+C,UAC/BgkC,SAAU,EAAKzyB,MAAM8sC,SAASra,UAG5Bib,GAAU,EACR7tC,EAAO,EAAKG,MAAMJ,SAClB4tC,EAAa/2B,YAAYvgB,EAAM2J,GAC/B4tC,EAAgBnjC,SAASkjC,GAEpB,IAAPltC,GACFotC,EAAU/I,EAAK32C,SAAWy/C,EAC1B9I,EAAK32C,OAASy/C,EACd9I,EAAK3R,SACF1oB,SAAS,IAAQq6B,EAAK32C,OAAS,EAAKgS,MAAM+sC,qBAAqB,KAAOnxB,QAAQ,IAChE,IAAPtb,GACVotC,EAAU/I,EAAKl2C,YAAcyH,EAC7ByuC,EAAKl2C,UAAYyH,GACD,IAAPoK,GACTotC,EAAU/I,EAAKlS,WAAav8B,EAC5ByuC,EAAKlS,SAAWv8B,GACA,IAAPoK,IACTotC,EACE/I,EAAK3R,UACL1oB,SAAS,IAAMkjC,GAAc,IAG/B7I,EAAK3R,QAAUlhB,WAAW07B,IAEvBE,GACF,EAAK1tC,MAAM8rC,aAAanH,IA7H3B,IAAIoL,EAAa,GACXwB,EAAkBnyB,YAAqBtlB,MAC7C,IAAKqC,EAAI,EAAGA,EAAIo1C,EAAgB50C,SAAUR,EACxC4zC,EAAW1zC,KAAK,CACd4xC,MAAOsD,EAAgBp1C,GAAGjG,MAAM,EAAK8J,MAAMJ,UAC3C1J,MAAOiG,EAAI,IARE,OAWjB,EAAKoE,MAAQ,CACXqgC,SAAS,GAEX,EAAKrF,WAAa,CAChB8S,GAAI,CACF,CACE/tC,GAAI,EACJguC,MAAOjhD,IAAa,EAAK2S,MAAMJ,UAAUjS,KACzC4gD,SAAUpjC,YACRrR,KACA,EAAKkG,MAAM8sC,SAASja,YACpB,EAAK7yB,MAAMJ,UAEb/M,OAAQk9C,KAxBG,EAHrB,6DAiCE,SAA0BpvC,GAEtBA,EAAUmsC,WAAalsC,KAAKZ,MAAM8sC,UAClCnsC,EAAUL,KAAOM,KAAKZ,MAAMM,IAC5BK,EAAU40B,UAAY30B,KAAKZ,MAAMu1B,UAEjC30B,KAAK26B,WAAW8S,GAAG,GAAGE,SAAWpjC,YAC/BrR,KACA6G,EAAUmsC,SAASja,YACnBjyB,KAAKZ,MAAMJ,aA1CnB,oBAwIE,WAAU,IAAD,OAELgB,KAAKZ,MAAM8sC,SAASja,YAAgB/4B,KAAYC,iBAAiB5D,IAEnE,IAAMq7C,EACJ5wC,KAAKZ,MAAM8sC,SAASja,cAAgB/4B,KAAYC,iBAAiB5D,IAC/DsjB,EAAgB,oBAGnB,OAFDA,GAAyC,OAAxB7Y,KAAKZ,MAAMJ,SAAoB,kBAAoB,IAExC,IAAvBgB,KAAKL,MAAMqgC,UAAmD,IAA/BhgC,KAAKZ,MAAMksC,iBAE5C,GAID,yBAAKhrC,UAAU,YACZN,KAAK26B,WAAW8S,GAAGjQ,KAAI,SAAC4Q,GAAD,OACtB,kBAAC,IAAD,CACEr0B,IAAKq0B,EAAG1uC,GACRA,GAAI0uC,EAAG1uC,GACPyuC,MAAO,EAAK/uC,MAAMu1B,QAClBlc,QAA0C,MAAjC,EAAKrZ,MAAM8sC,SAASra,SAC7B6b,MAAOU,EAAGV,MACVC,SAAUS,EAAGT,SACbhgC,MAAO1jB,IACPgI,OAAQm8C,EAAGn8C,OACX+6C,YAAa,EAAKA,iBAGrB4D,EACC,kBAAC,IAAD,CACEp4B,UAAW/rB,IAAauT,KAAKZ,MAAMJ,UAAUxR,QAC7C2oB,OAAQ,EACRzW,GAAI,EACJyuC,MAAOnuC,KAAKZ,MAAMu1B,QAClB31B,SAAUgB,KAAKZ,MAAMJ,SACrBqY,WAAYrX,KAAKZ,MAAM8sC,SAAS9Z,QAChCha,kBAAmBpY,KAAKoY,oBAG1B,GAEF,kBAAC,IAAD,CACEI,UAAW/rB,IAAauT,KAAKZ,MAAMJ,UAAUzR,eAC7C4oB,OAAQ,EACRzW,GAAI,EACJqa,IAAK,MACLrB,UA5CE,EA6CFy1B,MAAOnuC,KAAKZ,MAAMu1B,QAClB31B,SAAUgB,KAAKZ,MAAMJ,SACrByB,SAAU4N,YAAqBrO,KAAKZ,MAAMJ,UAC1CqY,WAAYrX,KAAKZ,MAAM8sC,SAAS9+C,OAChCgrB,kBAAmBpY,KAAKoY,oBAE1B,kBAAC,IAAD,CACEjC,OAAQ,EACRzW,GAAI,EACJ8Y,UAAW/rB,IAAauT,KAAKZ,MAAMJ,UAAUnR,UAC7CsgD,MAAOnuC,KAAKZ,MAAMu1B,QAClB31B,SAAUgB,KAAKZ,MAAMJ,SACrByB,SAAU0O,YAAqBnP,KAAKZ,MAAMJ,UAC1CqY,WAAYrX,KAAKZ,MAAM8sC,SAASr+C,UAChCuqB,kBAAmBpY,KAAKoY,oBAEQ,MAAjCpY,KAAKZ,MAAM8sC,SAASra,SACnB,yBAAKvxB,UAAWuY,GACd,yBAAKvY,UAAU,gBACZ7T,IAAauT,KAAKZ,MAAMJ,UAAUlR,KAErC,2BACEf,KAAK,OACLuT,UAAU,gCACVuwC,YAAY,EACZv7C,MAAOpD,KAAS8N,KAAKZ,MAAMJ,UAAUvM,QAIzC,kBAAC,IAAD,CACE0jB,OAAQ,EACRzW,GAAI,EACJ8Y,UAAW/rB,IAAauT,KAAKZ,MAAMJ,UAAUlR,IAC7CqgD,MAAOnuC,KAAKZ,MAAMu1B,QAClB31B,SAAUgB,KAAKZ,MAAMJ,SACrBqY,WAAYrX,KAAKZ,MAAM8sC,SAASra,SAChCzZ,kBAAmBpY,KAAKoY,oBAI5B,kBAAC,IAAD,CACEmzB,UAAWvrC,KAAKZ,MAAM8sC,SAASxsC,GAC/B8rC,SAAU,EACV9rC,GAAIM,KAAKZ,MAAM8sC,SAASja,YACxBwZ,YAAazrC,KAAKZ,MAAMu1B,QACxB+W,YAAa1rC,KAAK0rC,YAClBC,eAAgB3rC,KAAK2rC,eACrBnyB,SAAUxZ,KAAKZ,MAAMksC,wBAvO/B,GAA0B3qC,c,qKCXbmwC,EAAb,kDAGE,WAAY1xC,GAAQ,IAAD,EAOb7D,EAPa,qBACjB,cAAM6D,IAHRw+B,YAAckT,EAAajkD,KAER,EAkDnBujB,kBAAoB,WAClB,EAAKvQ,SAAS,CACZ/Q,YAAa,EAAKsQ,MAAM6rC,iBAAiBn8C,YACzCD,WAAY,EAAKuQ,MAAM6rC,iBAAiBp8C,WACxCsB,MAAO,EAAKiP,MAAM6rC,iBAAiB96C,SAtDpB,EA8EnB4gD,mBAAqB,WACnB,MAAO,CACLrxC,GAAI,EAAKN,MAAMM,GACf8wB,YAAa,EAAKpxB,MAAM6rC,iBAAiBza,YACzChiC,QAAS,EAAK4Q,MAAM6rC,iBAAiBz8C,QACrCC,UAAW,EAAK2Q,MAAM6rC,iBAAiBx8C,UACvCC,QAAS,EAAK0Q,MAAM6rC,iBAAiBv8C,QACrCI,YAAa,EAAKsQ,MAAM6rC,iBAAiBn8C,YACzCD,WAAY,EAAKuQ,MAAM6rC,iBAAiBp8C,WACxCsB,MAAO,EAAKiP,MAAM6rC,iBAAiB96C,MACnCgyB,aAAc,EAAK/iB,MAAM6rC,iBAAiB9oB,aAC1CnjB,SAAU,EAAKI,MAAM6rC,iBAAiBjsC,SACtCw9B,cAAe,EAAKp9B,MAAM6rC,iBAAiBzO,cAC3C/b,YAAa,EAAKrhB,MAAM6rC,iBAAiBxqB,YACzCC,YAAa,EAAKthB,MAAM6rC,iBAAiBvqB,cA5F1B,EAgGnBssB,YAAc,SAACttC,EAAIutC,GACjB,IAAIzG,EAAO,EAAKuK,qBACL,IAAPrxC,IACF8mC,EAAKhW,YAAcrR,YAAuB7lB,KAAU2zC,IACtD,EAAK7tC,MAAM8rC,aAAa1E,IApGP,EAuGnBpuB,kBAAoB,SAAC1Y,EAAIpK,GACvB,IAAIkxC,EAAO,EAAKuK,qBACV9xC,EAAK,EAAKG,MAAMJ,SAClB8tC,GAAU,EACRF,EAAa/2B,YAAYvgB,EAAM2J,GAE1B,IAAPS,GACFotC,EACEtG,EAAKh4C,UACLkb,SAAS,IAAQkjC,GAAc,IAGjCpG,EAAKh4C,QACHkb,SAAS,IAAQkjC,GAAc,KACjB,IAAPltC,GACTotC,EACEtG,EAAK/3C,YACLib,SAAS,IAAQkjC,GAAc,IAIjCpG,EAAK/3C,UACHib,SAAS,IAAQkjC,GAAc,KACjB,IAAPltC,IACRotC,EACCtG,EAAK93C,UACLgb,SAAS,IAAQkjC,GAAc,IAIjCpG,EAAK93C,QACHgb,SAAS,IAAQkjC,GAAc,KAK/BE,GAAS,EAAK1tC,MAAM8rC,aAAa1E,IA3HrC,IAAI2I,EAAa,GACX6B,EAAsBxyB,YAAqBllB,MAEjD,IAAKiC,EAAI,EAAGA,EAAIy1C,EAAoBj1C,SAAUR,EAC5C4zC,EAAW1zC,KAAK,CACd4xC,MAAO2D,EAAoBz1C,GAAGjG,MAAM,EAAK8J,MAAMJ,UAC/C1J,MAAOiG,EAAI,IAtBE,OA0BjB,EAAKoE,MAAQ,CACX7Q,YAAa,GACbD,WAAY,GACZsB,MAAO,GACP8gD,WAAU,GAGZ,EAAKtW,WAAa,CAChB8S,GAAI,CACF,CACE/tC,GAAI,EACJguC,MAAOjhD,IAAa,EAAK2S,MAAMJ,UAAUpQ,SACzC++C,SAAUpjC,YACRjR,KACA,EAAK8F,MAAM6rC,iBAAiBza,YAC5B,EAAKpxB,MAAMJ,UAEb/M,OAAQk9C,KA3CG,EAHrB,6DA4DE,SAA0BpvC,GACpBA,EAAUkrC,mBAAqBjrC,KAAKZ,MAAM6rC,mBAC5CjrC,KAAK26B,WAAW8S,GAAG,GAAGE,SAAWpjC,YAC/BjR,KACAyG,EAAUkrC,iBAAiBza,YAC3BxwB,KAAKZ,MAAMJ,aAjEnB,8BAiJE,SAAiBU,EAAIgW,GAClB,IAAI8wB,EAAOxmC,KAAK+wC,qBACbjE,GAAU,EACH,IAAPptC,GACFotC,EAAUtG,EAAK13C,cAAgB4mB,EAAI7D,OAAOvc,MAC1CkxC,EAAK13C,YAAc4mB,EAAI7D,OAAOvc,OACd,IAAPoK,GACTotC,EAAUtG,EAAK33C,aAAe6mB,EAAI7D,OAAOvc,MACzCkxC,EAAK33C,WAAa6mB,EAAI7D,OAAOvc,OACb,IAAPoK,IACTotC,EAAUtG,EAAKr2C,QAAUulB,EAAI7D,OAAOvc,MACpCkxC,EAAKr2C,MAAQulB,EAAI7D,OAAOvc,OAEtBw3C,GAAS9sC,KAAKZ,MAAM8rC,aAAa1E,KA9JzC,oBAmKE,WAAU,IAAD,OACA/lC,EAAWqP,YAAiB9P,KAAKZ,MAAMJ,UAC9C,OACE,yBAAKsB,UAAU,YACZN,KAAK26B,WAAW8S,GAAGjQ,KAAI,SAAC4Q,GAAD,OACtB,kBAAC,IAAD,CACEr0B,IAAKq0B,EAAG1uC,GACRA,GAAI0uC,EAAG1uC,GACPyuC,MAAO,EACPT,MAAOU,EAAGV,MACV//B,MAAO1jB,IACP0jD,SAAUS,EAAGT,SACb17C,OAAQm8C,EAAGn8C,OACX+6C,YAAa,EAAKA,iBAGtB,kBAAC,IAAD,CACEx0B,UAAW/rB,IAAauT,KAAKZ,MAAMJ,UAAUtQ,QAC7CynB,OAAQ,EACRzW,GAAI,EACJyuC,MAAO,EACPnvC,SAAUgB,KAAKZ,MAAMJ,SACrBqY,WAAY6D,KAAKC,MAAM,IAAMnb,KAAKZ,MAAM6rC,iBAAiBv8C,SAAS,IAClE2hD,WAAYrwC,KAAKZ,MAAMM,GACvB0Y,kBAAmBpY,KAAKoY,oBAE1B,kBAAC,IAAD,CACEI,UAAW/rB,IAAauT,KAAKZ,MAAMJ,UAAUxQ,QAC7C2nB,OAAQ,EACRzW,GAAI,EACJyuC,MAAO,EACPnvC,SAAUgB,KAAKZ,MAAMJ,SACrBqY,WAAY6D,KAAKC,MAAM,IAAMnb,KAAKZ,MAAM6rC,iBAAiBz8C,SAAS,IAClE6hD,WAAYrwC,KAAKZ,MAAMM,GACvB0Y,kBAAmBpY,KAAKoY,oBAE1B,kBAAC,IAAD,CACEI,UAAW/rB,IAAauT,KAAKZ,MAAMJ,UAAUvQ,UAC7C0nB,OAAQ,EACRzW,GAAI,EACJyuC,MAAO,EACPnvC,SAAUgB,KAAKZ,MAAMJ,SACrBqY,WAAY6D,KAAKC,MAAM,IAAMnb,KAAKZ,MAAM6rC,iBAAiBx8C,WAAW,IACpE4hD,WAAYrwC,KAAKZ,MAAMM,GACvB0Y,kBAAmBpY,KAAKoY,oBAE1B,yBAAK9X,UAAU,sBACb,0BAAMA,UAAU,gBACb7T,IAAauT,KAAKZ,MAAMJ,UAAUlQ,aAErC,2BACE4Q,GAAI,EACJY,UAAU,kBACVhL,MAAO0K,KAAKL,MAAM7Q,YAClB4qB,QAAS1Z,KAAKuW,YACdlW,QAASL,KAAK2W,OACd5pB,KAAK,OACL8sB,OAAQ,SAACnE,GAAD,OAAS,EAAKkE,iBAAiB,EAAGlE,IAC1C7C,SAAU,SAAC6C,GAAD,OAAS,EAAK7V,SAAS,CAAE/Q,YAAa4mB,EAAI7D,OAAOvc,YAG/D,yBAAKgL,UAAU,sBACb,0BAAMA,UAAU,gBACb7T,IAAauT,KAAKZ,MAAMJ,UAAUnQ,YAErC,2BACE6Q,GAAI,EACJY,UAAU,kBACVoZ,QAAS1Z,KAAKuW,YACdlW,QAASL,KAAK2W,OACd5pB,KAAK,OACLuI,MAAO0K,KAAKL,MAAM9Q,WAClBgrB,OAAQ,SAACnE,GAAD,OAAS,EAAKkE,iBAAiB,EAAGlE,IAC1C7C,SAAU,SAAC6C,GAAD,OAAS,EAAK7V,SAAS,CAAEhR,WAAY6mB,EAAI7D,OAAOvc,YAI9D,yBAAKgL,UAAU,2BACb,0BAAMA,UAAU,gBACb7T,IAAauT,KAAKZ,MAAMJ,UAAU7O,OAErC,kBAAC,IAAD,CAAMsQ,SAAUA,IAAa,IAC7B,8BACEf,GAAI,EACJY,UAAU,sBACVoZ,QAAS1Z,KAAKuW,YACdlW,QAASL,KAAK2W,OACd5pB,KAAK,OACLuI,MAAO0K,KAAKL,MAAMxP,MAClB0pB,OAAQ,SAACnE,GAAD,OAAS,EAAKkE,iBAAiB,EAAGlE,IAC1C7C,SAAU,SAAC6C,GAAD,OAAS,EAAK7V,SAAS,CAAE1P,MAAOulB,EAAI7D,OAAOvc,iBA7PjE,GAAkCqL,c,yOC6BrBuwC,GATKC,aAAW,SAAC/pB,GAAD,MAAY,CACvCgqB,KAAM,CACJ,QAAS,CACPC,OAAQjqB,EAAMkqB,QAAQ,SAM5B,kDACE,WAAYlyC,GAAQ,IAAD,8BACjB,cAAMA,IAkBRmyC,SAAW,WACT,EAAKnyC,MAAM4rC,eAAe,EAAKrrC,MAAM9S,MACrC,EAAKgT,SAAS,CACZD,MAAO,EAAKD,MAAMC,QAtBH,EA2BnB4xC,aAAe,WACb,EAAKpyC,MAAM4rC,eAAe,IAC1B,EAAKnrC,SAAS,CACZD,MAAO,EAAKD,MAAMC,QA9BH,EAmCnB6xC,WAAa,WACX,EAAK5xC,SAAS,CACZqZ,UAAW,EAAKvZ,MAAMuZ,YAnCxB,EAAKvZ,MAAQ,CACXC,KAAM,EAAKR,MAAM2rC,WACjBl+C,KAAM,GACNqsB,UAAU,GALK,EADrB,6DAWE,SAA0BnZ,GACpBA,IAAcC,KAAKZ,OAErBY,KAAKH,SAAS,CACZD,KAAMG,EAAUgrC,eAfxB,oBA4CE,WAAU,IAAD,OAaDtqC,EAAWsP,YAAY/P,KAAKZ,MAAMJ,UACpC0yC,EAAa/wB,EAAQ,KACrBgxB,EAAehxB,EAAQ,KACvBixB,EAAcjxB,EAAQ,KACtBkxB,EAAgBlxB,EAAQ,KAEL3gB,KAAKZ,MAAMJ,SAGlC,OAEE,6BAGE,kBAAC,IAAD,CACEY,KAAMI,KAAKL,MAAMC,KACjBkyC,QAAS9xC,KAAK+xC,aACdC,kBAAgB,kBAGhB,kBAAC,IAAD,CAAatyC,GAAG,mBAChB,kBAAC,IAAD,KACE,kBAAC,IAAD,KAAmB,0BAAMY,UAAU,UAAhB,iBAGnB,8BACE,kBAAC,IAAD,CACEZ,GAAG,IACH2tC,MAAM,YACN/3C,MAAO0K,KAAKL,MAAM9S,KAClBgmB,SAzCS,SAAA6C,GAGnB,EAAK7V,SAAS,CACZhT,KAAM6oB,EAAI7D,OAAOvc,SAsCT+7C,OAAO,aAOb,kBAAC,IAAD,CAAenxC,MAAO,CAAE+xC,aAAc,OAAQ1F,cAAe,SAC7D,yBAAMrsC,MAAO,CAAEsN,WAAY,SAAS,kBAAC,IAAD,CAAO/M,SAAUA,IAErD,kBAAC,IAAD,CAAQJ,QAASL,KAAKwxC,aAAcU,QAAQ,YAAchyC,MAAO,CAAEsN,WAAY,QAAS+vB,YAAa,QAArG,IAA+G,0BAAMj9B,UAAU,UAAhB,aAC7G,kBAAC,IAAD,CAAQD,QAASL,KAAKuxC,SAAUW,QAAQ,aAAxC,IAAqD,0BAAM5xC,UAAU,UAAhB,WAGtDN,KAAKL,MAAMuZ,UACV,kBAAC,IAAD,SAAO,kBAAC,IAAD,KACL,kBAAC,IAAD,CAAYg5B,QAAQ,QAAQ7mC,MAAM,gBAAgB0c,UAAU,KAC1D,uEACuC,4BAAI,gDAC7C,4BACE,6CAAmB/nB,KAAKL,MAAMuZ,UAAY,yBAAM2P,IAAI,OAAO1V,IAAKy+B,IAAhE,KACA,wEACA,wFAA8D5xC,KAAKL,MAAMuZ,UAAY,yBAAM2P,IAAI,OAAO1V,IAAKu+B,OAGvG,6CACL,4BACA,6CAAmB1xC,KAAKL,MAAMuZ,UAAY,yBAAM2P,IAAI,OAAO1V,IAAK0+B,IAAhE,KACC,qEACA,wFAA8D7xC,KAAKL,MAAMuZ,UAAY,yBAAM2P,IAAI,OAAO1V,IAAKw+B,kBArH3H,GAA0ChxC,e,+FCVpC6rC,EAAuC,SAACptC,GAE5C,MAA0C+yC,mBAAqB,IAA/D,mBAAOC,EAAP,KAAsBC,EAAtB,KACA,EAA0CF,oBAAsB,GAAhE,mBAAOG,EAAP,KAAsBC,EAAtB,KACA,EAA0DJ,oBAAsB,GAAhF,mBAAOK,EAAP,KAA8BC,EAA9B,KA2CA,OAzCAC,qBACE,WAEE,sBAAC,kCAAAnzC,EAAA,6DAEKozC,EAAY,IAAIC,SACVC,OAAO,SAAU,oBAC3BF,EAAUE,OAAO,eAAgB,oBAE7Bh0B,EAAM8F,KAAKC,MAAMxlB,EAAM0zC,YACvBC,EAAMpuB,KAAKE,UAAUhG,GAP1B,SAUkBlsB,MAxCkB,aAwCD,CAChCwmC,OAAQ,OACRC,QAASuZ,EACT/8C,KAAMm9C,EACNC,SAAU,WAETva,MAAK,SAAAC,GAAc,OAAOA,EAASrU,UACnCuU,OAAM,SAAAzO,GAAW,OAAOA,KAjB5B,OAmBqB,kBAThBrhB,EAVL,UAoBGupC,EAAiBvpC,GACjBypC,GAAiB,IArBpB,0CAAD,KA4BF,CACED,KAIkB,IAAlBA,IAAoD,IAA1BE,IAC5BC,GAAyB,GACzBrzC,EAAM6zC,qBAAqB7zC,EAAM8zC,YAAad,EAAct2B,OAAO,EAAGs2B,EAAcr2C,OAAS,KAI7F,yBACEmE,MAAO,CACLuN,UAAW,GACXD,WAAY,GACZ8E,QAAS,SAGX,6BACGlT,EAAM+zC,gBAET,6BACGf,KAkOMgB,IA3Nf,WAEE,MAA8BjB,mBAAuB,CAAEzyC,GAAI,GAAIlP,QAAS,KAAxE,mBAAOA,EAAP,KAAgB6iD,EAAhB,KAEA,EAAwBlB,mBAAqB,IAA7C,mBAAOrmC,EAAP,KAAawnC,EAAb,KAuFA,SAASL,EAAsBpyB,EAAqB0yB,GAKlD,IAHA,IAAIC,EAA4B,GAC5BC,GAAgC,EAE3Bl4C,EAAI,EAAGA,EAAI/K,EAAQA,QAAQuL,OAAQR,IAAI,CAE9C,IAAIm4C,EAA0B,CAC5BP,eAAgB3iD,EAAQA,QAAQ+K,GAAG43C,eACnCL,WAAYtiD,EAAQA,QAAQ+K,GAAGu3C,WAC/BS,kBAAmB/iD,EAAQA,QAAQ+K,GAAGg4C,mBAGpCh4C,IAAMslB,IACR6yB,EAAUH,kBAAoBA,GAGhCC,EAAW/3C,KAAKi4C,GAGlB,IAAK,IAAIn4C,EAAI,EAAGA,EAAI/K,EAAQA,QAAQuL,OAAQR,IAAI,CAE9C,GAAwC,OAApCi4C,EAAWj4C,GAAGg4C,kBAA2B,CAC3CE,GAAgC,EAChC,MAEG,GAAwC,KAApCD,EAAWj4C,GAAGg4C,kBAAyB,CAC9CE,GAAgC,EAChC,OAKJ,IAAsC,IAAlCA,EAAuC,CAIzC,IAFA,IAAIE,EAAkB,GAEbp4C,EAAI,EAAGA,EAAI/K,EAAQA,QAAQuL,OAAQR,IAAI,CAE9C,IAAIq4C,EAAiB,CACnBT,eAAgBK,EAAWj4C,GAAG43C,eAC9BI,kBAAmBC,EAAWj4C,GAAGg4C,mBAGnCI,EAAgBl4C,KAAKm4C,GAGvB,IAAIC,EAA4B,CAACn0C,GAAIlP,EAAQkP,GAAIi0C,gBAAiBA,GAC9DG,EAAgCnvB,KAAKE,UAAUgvB,EAA2B,KAAM,GAEpFr9B,UAAUu9B,UAAUC,UAAUF,GAA+Brb,MAAK,eAE/D,eAML4a,EAAW,CAAC3zC,GAAIlP,EAAQkP,GAAIlP,QAASgjD,IA4BvC,OACE,6BAEE,yBACEtzC,MAAO,CACLuN,UAAW,KAGb,wCACEvN,MAAO,CACLsN,WAAY,IAEdnN,QAvLa,WAEnBizC,EAAQ,IAER98B,UAAUu9B,UAAUE,WAAWxb,MAC7B,SAAAyb,GAEE,IAAIC,EAAe,KAEnB,IAGE,QAAwB3zC,KAFxB2zC,EAAexvB,KAAKC,MAAMsvB,IAETx0C,SACcc,IAAzB2zC,EAAa3jD,cACsBgQ,IAAjC2zC,EAAaR,gBAA+B,CAE9C,IAAIj0C,EAAKy0C,EAAaz0C,GAEtB,QAA6Bc,IAAzB2zC,EAAa3jD,cACsBgQ,IAAjC2zC,EAAaR,gBAA+B,CAE9C,IAAIS,EAAiC,GAErC,IAA4C,IAAxCpW,MAAMqW,QAAQF,EAAa3jD,WACuB,IAAhDwtC,MAAMqW,QAAQF,EAAaR,iBAE7B,IAAK,IAAIp4C,EAAI,EAAGA,EAAI44C,EAAa3jD,QAAQuL,OAAQR,IAAK,CAEpD,IAAIu3C,EAAanuB,KAAKE,UAAUsvB,EAAa3jD,QAAQ+K,IAGjDH,EAAuB,CACzB+3C,eAHmBgB,EAAaR,gBAAgBp4C,GAAG43C,eAInDL,WAAYA,EACZS,kBAAmB,IAGrBa,EAAc34C,KAAKL,GAUzB,GAHAi4C,EAAW,CAAE3zC,GAAIA,EAAIlP,QAAS4jD,IAG1BD,EAAa3jD,QAAQuL,OAAS,EAShC,OAPAya,UAAUu9B,UAAUC,UAAU,qBAAqBvb,MAAK,eAErD,oBAIH6a,EAAQ,GAAD,OAAIa,EAAa3jD,QAAQuL,OAAzB,oBAKPu3C,EAAQ,uBAYtB,MAAOh0C,GACLg0C,EAAQ,2DAMdA,EAAQ,uDAERD,EAAW,CAAC3zC,GAAG,GAAIlP,QAAQ,OAkGvB,QAKS,CAAC21B,gBAAgB,WAL1B,iCAYF,yBACEjmB,MAAO,CACLuN,UAAW,GACXD,WAAY,KAGb1B,GAGH,yBACE5L,MAAO,CACLuN,UAAW,KAvDnB,WAIE,IAFA,IAAI6mC,EAA+B,GAE1B/4C,EAAI,EAAGA,EAAI/K,EAAQA,QAAQuL,OAAQR,IAC1C+4C,EAAiB74C,KACf,kBAAC+wC,EAAD,CACEzyB,IAAKxe,EACL43C,eAAgB3iD,EAAQA,QAAQ+K,GAAG43C,eACnCL,WAAYtiD,EAAQA,QAAQ+K,GAAGu3C,WAC/BI,YAAa33C,EACb03C,qBAAsBA,KAK5B,OACE,kBAAC,IAAMsB,SAAP,KACGD,GAwCAA,O,sJC3SIE,EAAb,kDACE,WAAYp1C,GAAQ,uCACZA,GAFV,0CAIE,WAEE,OACE,6BACE,wBAAIkB,UAAU,QACXhY,IAAY0X,KAAKZ,MAAMirC,YAAY,GACnC/hD,KACD,kBAAC,IAAD,CACImY,SAAUgO,YAAWzO,KAAKZ,MAAMH,SAItC,kBAAC,IAAD,CACEyL,UAAU,GACVE,cAAe5K,KAAKZ,MAAMkiC,cAAc12B,cACxCC,eAAgB7K,KAAKZ,MAAMkiC,cAAcz2B,eACzC4pC,gCACEz0C,KAAKZ,MAAMkiC,cAAcmT,gCAE3BC,iBAAkB10C,KAAKZ,MAAMkiC,cAAcoT,iBAC3CC,UAAW30C,KAAKZ,MAAMkiC,cAAcqT,UACpCC,WAAY50C,KAAKZ,MAAM8gB,GACvBlhB,SAAUgB,KAAKZ,MAAMH,YA1B/B,GAAmC0B,c,0KC+BtBk0C,EAAb,kDACE,WAAYz1C,GAAQ,IAAD,8BACjB,cAAMA,IACDO,MAAQ,CACXm1C,YAAY,EACZC,WAAY,GACZC,aAAc,GACdC,KAAM,GAER,EAAK90B,SAAW,GAChB,EAAK+0B,aAAe,GACpB,EAAKC,OAAS,GACd,EAAKC,gBAAkB,GACvB,EAAKC,eAAiB,GACtB,EAAKC,KAAO,EACZ,EAAKC,eAAiB,IACtB,EAAKC,gBAAkB,EACvB,EAAKC,WAAa,GAClB,EAAKx3B,QAAU,EACf,EAAKy3B,YAAc,EACnB,EAAKC,YAAc,EACnB,EAAKC,kBAAmB,EACxB,EAAKC,gBAzBsB,EA2B3B,EAAKC,SAAW1iC,IAAMkB,YACtB,EAAKyhC,gBAAkB3iC,IAAMkB,YAxBZ,EADrB,0CA+BE,WAEE,IAUI0hC,EACAC,EAXEhyB,EAAiBiyB,YAAwBl2C,KAAKZ,OAC9CH,EAAOe,KAAKZ,MAAMlE,UAAUqB,cAAc,GAAGyC,SAC7C8d,EAAuBD,YAC3B7c,KAAKZ,MAAMlE,UACX8E,KAAKZ,MAAMkf,WACXte,KAAKZ,MAAMoN,SAOTyR,EAAUje,KAAKZ,MAAM6e,QACnBztB,EAAUwP,KAAKZ,MAAMlE,UAAUQ,QAEnClL,EAAQuL,OAAS,EACbmf,KAAK7E,IAAI7lB,EAAQ5H,MAAcsL,IAAK1D,EAAQ7H,MAAcuL,KAC1D1D,EAAQ7H,MAAcuL,IArDD,IAyDvB8L,KAAK61C,iBACP53B,EAAUje,KAAKZ,MAAM6e,QACfje,KAAKZ,MAAMlE,UAAUQ,QAAQ/S,MAAcuL,KA1D1B,IA2Dd8L,KAAK61C,kBACd53B,EAAUje,KAAKZ,MAAM6e,QAEnBztB,EAAQuL,OAAS,EACbmf,KAAK7E,IAAI7lB,EAAQ5H,MAAcsL,IAAK1D,EAAQ7H,MAAcuL,KAC1D1D,EAAQ7H,MAAcuL,KAO9B8hD,EAAW/1B,YAAUzvB,EAASytB,GAM9B,IAAMk4B,EAAepyB,YACnB/jB,KAAKZ,MAAMlE,UAAUskB,OACrBxf,KAAKZ,MAAM4kB,iBACXC,EACAnH,EACA7d,EACAgf,GAGIiG,EAAa,CACjBC,YAAY,EACZC,qBAAqB,EACrB7jB,MAAO,CACL+R,SAAS,EACT/E,SAAU,MACV8W,KAAM,GACNlkB,SAAU,GACVmkB,UAAW,QAEbC,OAAQ,CACNjS,SAAS,EACT/E,SAAU,QACViX,OAAQ,CACNF,UAAW,OACXnkB,SAAU,MAYWwkB,KAAKC,MAAMD,KAAKE,UAAUX,IAChC3jB,MAAM8jB,KAAOS,IAAa7lB,GAAMm3C,SAExBzxB,KAAKC,MAAMD,KAAKE,UAAUX,IAChC3jB,MAAM8jB,KAC3BS,IACE7lB,GACAo3C,SACJ,IAAMC,EACJryB,EAAesyB,kBAAkBx6C,OAAS,EACxCy6C,EAAqB,GACrBC,EAAc,GACdC,EAAgB,GAChBC,EAAW1yB,EAAesyB,kBAAkBD,GAAoB33B,OACpE,IAAKs3B,EAAI,EAAGA,GAAKh4B,EAAU,IAAKg4B,EAC9BO,EAAmB/6C,KAAK,GACxBg7C,EAAYh7C,KAAKk7C,EAASV,IAC1BS,EAAgBj7C,KAAKqhB,EAAqBm5B,IAE5CO,EAAmBv4B,GAAW04B,EAAS14B,GACvCw4B,EAAYx4B,GAAS,EAErB,IAAMI,EAAmB,CACvBmG,OAAQwxB,EACR9vB,SAAU,CACR,CACEmnB,MAAOvoB,IAAa7lB,GAAM23C,UAE1B9tC,KAAM0tC,EACNzoB,MAAM,EACNtG,YAAa,UACbtB,gBAAiB,uBAEnB,CACEknB,MAAOvoB,IAAa7lB,GAAMgnB,eAE1Bnd,KAAM2tC,EAEN1oB,MAAM,EACNtG,YAAa,WACbtB,gBAAiB,WAEnB,CACEknB,MAAQvoB,IAAa7lB,GAAM43C,eAE3B/tC,KAAM4tC,EAEN3oB,MAAM,EACNtG,YAAa,QACbtB,gBAAiB,aAKjB2wB,EAAiB,CACrB3yB,YAAY,EACZC,qBAAqB,EACrB2yB,OAAQ,CACNC,MAAO,CACL,CACEC,SAAS,EACTC,MAAO,CACLC,aAAa,KAInBC,MAAO,CACL,CACEH,SAAS,EACTC,MAAO,CACLC,aAAa,EACbE,SAAU,SAAU/hD,EAAOurB,EAAOlC,GAUhC,OARErpB,EAAQ,IACJA,EACS,OAAT2J,EACAqZ,KAAKC,eAAepC,OAAO7gB,EAAQ,KAAQ,KAC1CgjB,KAAKC,eAAepC,OAAO7gB,EAAQ,KAAQ,KAAKygB,QAC/C,IACA,MAKVuhC,MAAO,GACPC,UAAW,OAgBjBxC,EAAa,GACX1vB,EAA0B3b,SAASoT,EAAqB,IAC9BpT,SAASoT,EAAqBmB,EAAU,IACxE82B,EAAWt5C,KAAK4pB,GAChB0vB,EAAWt5C,KACTwoB,EAAeuzB,kBAAkBC,MAEnC1C,EAAWt5C,KAAKwoB,EAAeuzB,kBAAkBE,MACjD3C,EAAWt5C,KAAKwoB,EAAeuzB,kBAAkBG,MACjD5C,EAAWt5C,KAAKwoB,EAAeuzB,kBAAkBI,MACjD7C,EAAWt5C,KAAKwoB,EAAeuzB,kBAAkBK,MACjD9C,EAAWt5C,KAAKwoB,EAAeuzB,kBAAkBM,MAEjD,IAAMC,EAAuB,CAC3BvzB,OAAQ,CAENM,IAAa7lB,GAAM+4C,SACnBlzB,IAAa7lB,GAAMg5C,YAAcnzB,IAAa7lB,GAAMi5C,YACpDpzB,IAAa7lB,GAAMg5C,YAAcnzB,IAAa7lB,GAAMk5C,YACpDrzB,IAAa7lB,GAAMg5C,YAAcnzB,IAAa7lB,GAAMm5C,YACpDtzB,IAAa7lB,GAAMg5C,YAAcnzB,IAAa7lB,GAAMo5C,YACpDvzB,IAAa7lB,GAAMg5C,YAAcnzB,IAAa7lB,GAAMq5C,YACpDxzB,IAAa7lB,GAAMg5C,YAAcnzB,IAAa7lB,GAAMs5C,aAEtDryB,SAAU,CACR,CAEEpd,KAAMisC,EAEN5uB,gBAAiB,CACf,UACAvvB,IAAOG,YAAYtB,OACnBmB,IAAOI,aAAavB,OACpBmB,IAAOK,sBAAsBxB,OAC7BmB,IAAOM,UAAUzB,OACjBmB,IAAOO,iBAAiB1B,OACxBmB,IAAOS,aAAa5B,WAMxB+iD,EAAgB,GACpBA,EAAc/8C,KAAK4pB,GACnBmzB,EAAc/8C,KACZwoB,EAAew0B,qBAAqBhB,MAEtCe,EAAc/8C,KACZwoB,EAAew0B,qBAAqBf,MAEtCc,EAAc/8C,KACZwoB,EAAew0B,qBAAqBd,MAEtCa,EAAc/8C,KACZwoB,EAAew0B,qBAAqBb,MAEtCY,EAAc/8C,KACZwoB,EAAew0B,qBAAqBZ,MAEtCW,EAAc/8C,KACZwoB,EAAew0B,qBAAqBX,MAGtC,IAAMY,EAAsB,CAC1Bl0B,OAAQ,CAENM,IAAa7lB,GAAM+4C,SACnBlzB,IAAa7lB,GAAMg5C,YAAcnzB,IAAa7lB,GAAMi5C,YACpDpzB,IAAa7lB,GAAMg5C,YAAcnzB,IAAa7lB,GAAMk5C,YACpDrzB,IAAa7lB,GAAMg5C,YAAcnzB,IAAa7lB,GAAMm5C,YACpDtzB,IAAa7lB,GAAMg5C,YAAcnzB,IAAa7lB,GAAMo5C,YACpDvzB,IAAa7lB,GAAMg5C,YAAcnzB,IAAa7lB,GAAMq5C,YACpDxzB,IAAa7lB,GAAMg5C,YAAcnzB,IAAa7lB,GAAMs5C,aAEtDryB,SAAU,CACR,CAEEpd,KAAM0vC,EAENryB,gBAAiB,CACf,UACAvvB,IAAOG,YAAYtB,OACnBmB,IAAOI,aAAavB,OACpBmB,IAAOK,sBAAsBxB,OAC7BmB,IAAOM,UAAUzB,OACjBmB,IAAOO,iBAAiB1B,OACxBmB,IAAOS,aAAa5B,WAOxBkjD,EAAah0B,KAAKC,MAAMD,KAAKE,UAAUsxB,EAAazxB,0BACpDk0B,EAAej0B,KAAKC,MAAMD,KAAKE,UAAUsxB,EAAanxB,4BAK1D,OAHA2zB,EAAYp4C,MAAM8jB,KAAKS,IAAa7lB,GAAMm3C,SAC1CwC,EAAcr4C,MAAM8jB,KAAKS,IAAa7lB,GAAMo3C,SAG1C,yBAAKn2C,MAAO,CAAEyN,MAAO,QACnB,yBAAKzN,MAAO,CAAEyN,MAAO,QACrB,6BACE,wBAAIrN,UAAU,QACZ,6BACGwkB,IAAa7lB,GAAM45C,SADtB,IACgC,+BA0BlC,yBAAK34C,MAAO,CAAEyN,MAAO,OAAQH,WAAY,SACvC,6BACElN,UAAU,wBAGV,yBAAKA,UAAU,cACb,kBAAC,MAAD,CACEwI,KAAMivC,EACNe,QAASH,KAGb,yBAAKr4C,UAAU,cACb,kBAAC,MAAD,CACEwI,KAAM4vC,EACNI,QAASF,OAMjB,6BACA,6BACA,wBAAIt4C,UAAU,QACZ,6BACGwkB,IAAa7lB,GAAM85C,gBADtB,IACuC,+BAGzC,yBAAK74C,MAAO,CAAEyN,MAAO,OAAQH,WAAY,SACvC,6BACElN,UAAU,2BAGV,yBAAKA,UAAU,cACb,kBAAC,MAAD,CACEwI,KAAMqtC,EAAapwB,qBACnB+yB,QAAS3C,EAAazxB,2BAG1B,yBAAKpkB,UAAU,cACb,kBAAC,MAAD,CACEwI,KAAMqtC,EAAa/vB,uBACnB0yB,QAAS3C,EAAanxB,+BAK9B,wBAAI1kB,UAAU,QACZ,6BACGwkB,IAAa7lB,GAAM+5C,UADtB,IACiC,gCAInC,yBAAK94C,MAAO,CAAEyN,MAAO,SACnB,6BAASrN,UAAU,mBAAmBJ,MAAO,CAAE2N,OAAQ,UACrD,kBAAC,MAAD,CAAK/E,KAAMuV,EAAkBy6B,QAAShC,MAI1C,6BACA,kCAlZV,GAAoC1jC,IAAMzS,Y,oPClCNA,Y,QCArB,SAASs4C,EAAT,GAAkD,IAAxBC,EAAuB,EAAvBA,gBAAgBj6C,EAAO,EAAPA,KACrD,EAA4CkzC,mBAAS+G,GAArD,mBAAOC,EAAP,KAAuBC,EAAvB,KAaA,OAVA1G,qBAAU,WAKH0G,EAAkBF,KACtB,CAACA,IAKA,6BAEMA,EACF,kBAACG,EAAA,EAAD,CACI3uC,UAAWyuC,EAAezuC,UAC1BE,cAAiBuuC,EAAevuC,cAChCC,eAAgBsuC,EAAetuC,eAE/B7L,SAAUC,IACT,M,qBC3BJq6C,EAAb,kDACC,WAAYl6C,GAAQ,IAAD,8BAClB,cAAMA,IAIP8vC,YAAc,WACb,EAAK9vC,MAAMm6C,yBAJX,EAAKrK,YAAc,EAAKA,YAAYp1B,KAAjB,gBAFD,EADpB,0CAUC,WACC,OACU,8BACQ,yBACAxZ,UAAWN,KAAKZ,MAAMkB,UACtBD,QAASL,KAAKkvC,YACdxvC,GAAIM,KAAKZ,MAAMM,GACfmpB,IAAK7oB,KAAKZ,MAAMypB,IAChB1V,IAAOnT,KAAKZ,MAAM+T,WAlBtC,GAAgCC,IAAMzS,WCoEzB64C,G,cAAb,kDAEE,WAAYp6C,GAAQ,IAAD,EAOb7D,EAPa,qBACjB,cAAM6D,IAFRw+B,YAAc4b,EAAM3sD,KACD,EA+PnBujB,kBAAoB,WAClB,EAAKvQ,SAAS,CAAE4K,YAAa,EAAKrL,MAAMuJ,UAAU8B,eAhQjC,EAmQnBkhC,eAAiB,SAACjsC,IACoB,IAAhC,EAAKN,MAAMksC,kBACb,EAAKlsC,MAAMwmC,kBAAkBlmC,IArQd,EAyQnBgsC,YAAc,WACZ,IAAoC,IAAhC,EAAKtsC,MAAMksC,iBAA4B,CACzC,IAAImO,EACF,EAAKr6C,MAAMk1B,SACX,EAAKqG,WAAW8S,GApRI,GAoRoBx7C,OAAO8J,OAAS,EACpD,EAAK4+B,WAAW8S,GArRA,GAqRwBx7C,OAAO8J,OAAS,EACxD,EAAKqD,MAAMk1B,SACbolB,EAAU,EAAK/e,WAAW8S,GAvRR,GAuRgCx7C,OAAOwnD,GAAOpM,MACpCoM,EAAlB,IAAVA,GAAyB,IAAVA,EAAqB,EAGpC,EAAKr6C,MAAMk1B,SACX,EAAKqG,WAAW8S,GAzRK,GAyRsBx7C,OAAO8J,OAAS,EACvD,EAAK4+B,WAAW8S,GA1RC,GA0R0Bx7C,OAAO8J,OAAS,EAC3D,EAAKqD,MAAMk1B,SAEjB,EAAKqG,WAAW8S,GA7RO,GA6RoBx7C,OAAOwnD,GAAOpM,MAD3D,IAEMsM,EAAgBx6B,YACpBnnB,IACA,EAAK2iC,WAAW8S,GAhSO,GAgSoBx7C,OAAOwnD,GAAOpM,OAGvD3c,EAAQ+K,YAAmB,EAAKr8B,MAAMk1B,SAAW,GACrD5D,EAAM/lB,aAAewU,YAAuBvoB,IAAQ8iD,GACpDhpB,EAAMjmB,YAAc,GAIhBniB,IAC2B,IAAzB,EAAK8W,MAAMg1B,YACb1D,EAAMlmB,SAAW3S,IAAuBC,iBAAiBvC,KACtDm7B,EAAMlmB,SAAW3S,IAAuBH,OAAOnC,IAElDm7B,EAAM/lB,eAAiB/T,IAAOU,eAAe/B,MAC/Cm7B,EAAMlmB,SAAW3S,IAAuBC,iBAAiBvC,KAC3Dm7B,EAAM5lB,gBAAkB6uC,EAExBjpB,EAAQ,EAAKkpB,wBAAwBlpB,GAErC,EAAKiK,WAAW8S,GApTS,GAoTkBx7C,OAAS,EAAK4nD,UAEzD,EAAKz6C,MAAMslC,eAAehU,KAlTX,EAsTnBsc,YAAc,SAACttC,EAAIutC,GACjB,MAAkC,EAAK7tC,MAA3B06C,EAAZ,EAAQp6C,GAAYiJ,EAApB,EAAoBA,UAEhB+nB,EAAQiL,YAAqBhzB,GACjC+nB,EAAMhxB,GAAKo6C,EACA,IAAPp6C,IACFgxB,EAAQ+K,YAAmBqe,IACrBnvC,aAAewU,YAAuBvoB,IAAQq2C,GACpDvc,EAAQ,EAAKkpB,wBAAwBlpB,IAErB,IAAPhxB,GACTgxB,EAAMlmB,SAAW2U,YACftnB,IACAo1C,GAEFvc,EAAQ,EAAKkpB,wBAAwBlpB,IACrB,IAAPhxB,IAETgxB,EAAM5lB,gBAAkBqU,YAAuBnnB,IAAWi1C,IAI5D,EAAK7tC,MAAM8rC,aAAaxa,IA5UP,EAqVnBoe,WAAa,SAACp5B,GAEZ,IAAIgb,EAAQiL,YAAqB,EAAKv8B,MAAMuJ,WAC5C+nB,EAAMjmB,YAAciL,EAAI7D,OAAOvc,MAC/B,EAAK8J,MAAM8rC,aAAaxa,IAzVP,EA4VnBtY,kBAAoB,SAAC1Y,EAAIpK,GAEvB,IAAIo7B,EAAQiL,YAAqB,EAAKv8B,MAAMuJ,WAC5C+nB,EAAMhxB,GAAK,EAAKN,MAAMM,GAyBtB,IAAIotC,GAAU,EACR7tC,EAAO,EAAKG,MAAMJ,SAClB4tC,EAAa/2B,YAAYvgB,EAAO2J,GAChC4tC,EAAgBnjC,SAASkjC,GAEpB,IAAPltC,GACFotC,EAAUpc,EAAMI,YAAcpnB,SAASpU,GACvCo7B,EAAMI,UAAYpnB,SAASpU,IACX,IAAPoK,GACTotC,EAAUpc,EAAMM,aAAetnB,SAASpU,GACxCo7B,EAAMM,WAAatnB,SAASpU,IACZ,IAAPoK,GACTotC,EAAUpc,EAAM3iC,MAAQ8+C,EACxBnc,EAAM3iC,IAAM8+C,GACI,KAAPntC,GACTotC,EACEpc,EAAM1iC,gCAAkC6+C,EAC1Cnc,EAAM1iC,8BAAgC6+C,GACtB,IAAPntC,GACTotC,EAAUpc,EAAMrT,YAAcwvB,EAC9Bnc,EAAMrT,UAAYwvB,GACF,IAAPntC,GACTotC,EACEpc,EAAMziC,SAAWyb,SAAS,IAAQkjC,GAAc,IAClDlc,EAAMziC,OAASyb,SAAS,IAAQkjC,GAAc,KAC9B,IAAPltC,GACTotC,EAAUpc,EAAM3hC,kBAAoB89C,EACpCnc,EAAM3hC,gBAAkB89C,GACR,IAAPntC,GACTotC,EAAUpc,EAAM1hC,sBAAwB0a,SAASpU,GACjDo7B,EAAM1hC,oBAAsB0a,SAASpU,IACrB,IAAPoK,GACTotC,EAAUpc,EAAMzhC,kBAAoBya,SAASpU,GAC7Co7B,EAAMzhC,gBAAkBya,SAASpU,IACjB,KAAPoK,GACTotC,EAAUpc,EAAMxhC,gBAAkB29C,EAClCnc,EAAMxhC,cAAgB29C,GACN,KAAPntC,GACTotC,EAAUpc,EAAMvhC,oBAAsBua,SAASpU,GAC/Co7B,EAAMvhC,kBAAoBua,SAASpU,IACnB,KAAPoK,GACTotC,EAAUpc,EAAMthC,gBAAkBsa,SAASpU,GAC3Co7B,EAAMthC,cAAgBsa,SAASpU,IACf,IAAPoK,GACTotC,EACEpc,EAAMrhC,aAAeqa,SAAS,IAAQkjC,GAAc,IAGtDlc,EAAMrhC,WAAaqa,SAAS,IAAQkjC,GAAc,KAClC,KAAPltC,GACTotC,EAAUpc,EAAMS,eAAiBznB,SAASpU,GAC1Co7B,EAAMS,aAAeznB,SAASpU,IACd,KAAPoK,IACTotC,EAAUpc,EAAMjmB,cAAgBnV,EAChCo7B,EAAMjmB,YAAcnV,GAElBw3C,IACF,EAAK1tC,MAAM8rC,aAAaxa,GACxB,EAAK7wB,SAAS,CAAEmgC,QAAS,EAAK5gC,MAAMksC,qBAlbrB,EAybnByO,yBAzbmB,sBAybQ,8BAAAx6C,EAAA,6DACrBmJ,EAAS,EAAKtJ,MAAM46C,qBADC,SAGRz5B,YAAsB7X,EAAQ,EAAKtJ,MAAMM,IAHjC,eAIZc,KADTsI,EAHqB,iDAOhBA,EAAKpf,KAA6Byf,eAPlB,2CAzbR,EAocnB8wC,QApcmB,uCAocT,WAAOvxC,EAAQhJ,GAAf,eAAAH,EAAA,sEACSm7B,YAAwBhyB,EAAQhJ,GADzC,cACJoJ,EADI,yBAGDA,GAHC,2CApcS,0DA0cnBywC,sBAAwB,WACtB,EAAK15C,SAAS,CAAEmgC,SAAS,IACzB,IAAM1tB,EAAU,EAAK3S,MAAMivC,kBAE3B,EAAKxvC,MAAM+pC,4BAAuC,IAAZ72B,EAAoB,GAAK,GAC/D,EAAKzS,SAAS,CAAE+uC,mBAAoBt8B,EAAS0tB,SAAS,KA/crC,EAgenB4Z,wBAA0B,SAAClpB,GAiGzB,OAhGA,EAAKiK,WAAW8S,GAreW,GAqegBx7C,OAAS,EAAK4nD,UAErDnpB,EAAM/lB,eAAiB/T,IAAOM,UAAU3B,KAG1Cm7B,EAAM5lB,gBAAkB9S,IAAUI,WAAW7C,IAE3CjN,KACA,EAAK8W,MAAMg1B,UAAY,GACvB1D,EAAMlmB,WAAa3S,IAAuBD,MAAMrC,MAEhDm7B,EAAMlmB,SAAW3S,IAAuBE,gBAAgBxC,MAG1Dm7B,EAAM/lB,eAAiB/T,IAAOC,mBAAmBtB,KACjDm7B,EAAM/lB,eAAiB/T,IAAOY,KAAKjC,KAGnCm7B,EAAM5lB,gBAAkB9S,IAAUC,YAAY1C,IAC9Cm7B,EAAM3iC,IAAM,EACZ2iC,EAAMI,UAAY,GAClBJ,EAAMM,WAAa,EACfN,EAAM/lB,eAAiB/T,IAAOY,KAAKjC,KAAOm7B,EAAMlmB,WAAa3S,IAAuBD,MAAMrC,MAC5Fm7B,EAAMlmB,SAAW3S,IAAuBE,gBAAgBxC,MACjDm7B,EAAM/lB,eAAiB/T,IAAOQ,KAAK7B,KAG5Cm7B,EAAM5lB,gBAAkB9S,IAAUC,YAAY1C,IAE9Cm7B,EAAM3iC,IAAM,GAEZ2iC,EAAM/lB,eAAiB/T,IAAOU,eAAe/B,KAG7Cm7B,EAAM5lB,gBAAkB9S,IAAUC,YAAY1C,IAE9Cm7B,EAAMI,UAAYxoC,IAAa,EAAI,GACnCooC,EAAMM,WAAa,EACnBN,EAAM3iC,IAAM,GAIZ2iC,EAAM/lB,eAAiB/T,IAAOI,aAAazB,KAC3Cm7B,EAAM/lB,eAAiB/T,IAAOG,YAAYxB,IAG1Cm7B,EAAM5lB,gBAAkB9S,IAAUE,uBAAuB3C,IAWhDm7B,EAAM/lB,eAAiB/T,IAAOK,sBAAsB1B,IAG7Dm7B,EAAM5lB,gBAAkB9S,IAAUQ,0BAA0BjD,IAErDm7B,EAAM/lB,eAAiB/T,IAAOO,iBAAiB5B,IACtDm7B,EAAM5lB,gBAAkB9S,IAAUO,SAAShD,IAI3Cm7B,EAAM/lB,eAAiB/T,IAAOS,aAAa9B,MAG3Cm7B,EAAM5lB,gBAAkB9S,IAAUK,cAAc9C,KAE/C/M,MAEIkoC,EAAM/lB,eAAiB/T,IAAOM,UAAU3B,KAAOm7B,EAAM/lB,eAAiB/T,IAAOY,KAAKjC,KAEjFm7B,EAAMlmB,WAAa3S,IAAuBH,OAAOnC,KAAQm7B,EAAMlmB,WAAa3S,IAAuBF,OAAOpC,MAC1Gm7B,EAAMlmB,SAAW3S,IAAuBH,OAAOnC,MAOrDm7B,EAAMlmB,WAAa3S,IAAuBC,iBAAiBvC,MAE3Dm7B,EAAMI,UAAY,EAClBJ,EAAMM,WAAa,GAKjB1oC,KAAuC,IAAzB,EAAK8W,MAAMg1B,YAC3B1D,EAAMlmB,SAAW3S,IAAuBC,iBAAiBvC,IACzDm7B,EAAMI,UAAY,GAEbJ,GAjkBU,EAokBnBwpB,OAAS,WAEP,IAAqC,IAAjC,EAAKv6C,MAAMivC,kBAA4B,CAGzC,IAGIuL,EAHM7mC,SAASC,eAJZ,aAOO6mC,WAAU,GACxBD,EAAIz6C,GAAK,KAET,IAAI26C,EAAO/mC,SAASgnC,cAAc,OAClCD,EAAKE,YAAYJ,GACjBE,EAAK36C,GAAK,MACV4T,SAASknC,iBAAiB,SAAS,SAAUl7C,GACvCA,EAAEuS,QAAUvS,EAAEuS,OAAOnS,MAI3B4T,SAASC,eAAe,WAAWgnC,YAAYF,KArlBjD,EAAK16C,MAAQ,CACX8K,YAAa,GACbmkC,mBAAmB,EACnB5O,SAAS,GAGX,IAAImP,EAAa,GACXsL,EAAmBj8B,YAAqB5nB,KAC9C,IAAK2E,EAAI,EAAGA,EAAIk/C,EAAiB1+C,SAAUR,EACzC4zC,EAAW1zC,KAAK,CACd4xC,MAAOoN,EAAiBl/C,GAAGjG,MAAM,EAAK8J,MAAMJ,UAC5C1J,MAAOiG,EAAI,IAoBf,IAAIm/C,EAAoB,CACtB,CACErN,MACEx1C,IAAuBC,iBAAiBxC,MAAM,EAAK8J,MAAMJ,UAC3D1J,MAAO,GAET,CACE+3C,MACEx1C,IAAuBE,gBAAgBzC,MAAM,EAAK8J,MAAMJ,UAC1D1J,MAAO,GAET,CACE+3C,MAAOx1C,IAAuBF,OAAOrC,MAAM,EAAK8J,MAAMJ,UACtD1J,MAAO,GAET,CACE+3C,MAAOx1C,IAAuBD,MAAMtC,MAAM,EAAK8J,MAAMJ,UACrD1J,MAAO,IAGP9M,MACFkyD,EAAoB,CAClB,CACErN,MAAOx1C,IAAuBH,OAAOpC,MAAM,EAAK8J,MAAMJ,UACtD1J,MAAO,GAET,CACE+3C,MAAOx1C,IAAuBF,OAAOrC,MAAM,EAAK8J,MAAMJ,UACtD1J,MAAO,KAqCb,EAAKukD,UAAY,GACjB,EAAKnsD,KAAO,EAAK0R,MAAMuJ,UAAU8B,YACjC,IAAMkwC,EAAuBn8B,YAAqBxmB,KAElD,IAAKuD,EAAI,EAAGA,EAAIo/C,EAAqB5+C,SAAUR,EAC7C,EAAKs+C,UAAUp+C,KAAK,CAClB4xC,MAAOsN,EAAqBp/C,GAAGjG,MAAM,EAAK8J,MAAMJ,UAChD1J,MAAOiG,EAAI,IAaf,EAAKo/B,WAAa,CAChB8S,GAAI,CAEF,CAEE/tC,GAAI,EACJguC,MAAOjhD,IAAa,EAAK2S,MAAMJ,UAAUjS,KACzC4gD,SAAUpjC,YACR3T,IACA,EAAKwI,MAAMuJ,UAAUgC,aACrB,EAAKvL,MAAMJ,UAEb/M,OAAQk9C,EACRvB,mBAAoBjuB,YAAiB/oB,MAEvC,CACE8I,GAAI,GACJguC,MAAO,eAET,CAEEhuC,GAAI,EACJguC,MAAOjhD,IAAa,EAAK2S,MAAMJ,UAAUhS,MAIzC2gD,SAAUpjC,YACR1S,IACA,EAAKuH,MAAMuJ,UAAU6B,SACrB,EAAKpL,MAAMJ,UAEb/M,OAAQyoD,EACR9M,mBAAoBjuB,YAAiB9nB,MAEvC,CACE6H,GAAI,EACJguC,MAAOjhD,IAAa,EAAK2S,MAAMJ,UAAUvR,IACzCkgD,SAAUpjC,YACRvS,IACA,EAAKoH,MAAMuJ,UAAUmC,gBACrB,EAAK1L,MAAMJ,UAEb4uC,mBAAoBjuB,YAAiB3nB,KACrC/F,OAAQ,EAAK4nD,aAKnB,EAAKe,MAAQ,CACXhN,mBAAoBjuB,YAAiB3nB,MAEvC,IAAK,IAAIuD,EAAI,EAAGA,EAAI,EAAKq/C,MAAMhN,mBAAmB7xC,OAAQR,IACxD,EAAKq/C,MAAMhN,mBAAmBryC,IAAK,EA1KpB,OA4KjB,EAAKqP,cAAgB,GACrB,EAAKiwC,gBAAkB,GA7KN,EAFrB,6DAkLE,SAA0B96C,GAGrBmgC,IAAE4a,QAAQ/6C,EAAU4I,UAAW3I,KAAKZ,MAAMuJ,YAC3C5I,EAAUL,KAAOM,KAAKZ,MAAMM,IAC5BK,EAAUu0B,WAAat0B,KAAKZ,MAAMk1B,UAClCv0B,EAAUq0B,YAAcp0B,KAAKZ,MAAMg1B,WAClC8L,IAAE4a,QAAQ/6C,EAAU27B,WAAY17B,KAAKZ,MAAMs8B,cAG1C17B,KAAKZ,MAAMuJ,UAAUgC,eACnB/T,IAAOW,4BAA4BhC,KACrCwK,EAAU4I,UAAUgC,eAClB/T,IAAOW,4BAA4BhC,KAKrCyK,KAAK26B,WAAW8S,GAzMI,GAyMoBx7C,OAAOwJ,KAAK,CAClD4xC,MAAOz2C,IAAOW,4BAA4BjC,MAAM0K,KAAKZ,MAAMJ,UAC3D1J,MAAO0K,KAAK26B,WAAW8S,GA3ML,GA2M6Bx7C,OAAO8J,OAAS,IAKnEiE,KAAK26B,WAAW8S,GAhNM,GAgNkBE,SAAWpjC,YACjD3T,IACAmJ,EAAU4I,UAAUgC,aACpB3K,KAAKZ,MAAMJ,UAEbgB,KAAK26B,WAAW8S,GAnNO,GAmNkBE,SACvCpjC,YACE1S,IACAkI,EAAU4I,UAAU6B,SACpBxK,KAAKZ,MAAMJ,UAEfgB,KAAK26B,WAAW8S,GAxNS,GAwNkBE,SACzCpjC,YACEvS,IACA+H,EAAU4I,UAAUmC,gBACpB9K,KAAKZ,MAAMJ,UAGfgB,KAAK26B,WAAW8S,GAAG,GAAGG,mBAAmB,GACtCplD,KAAqC,IAAxBuX,EAAUq0B,WACxBr0B,EAAU4I,UAAUgC,eAAiB/T,IAAOU,eAAe/B,IAEzDjN,KAAsC,IAAxByX,EAAUq0B,YAC1Br0B,EAAU4I,UAAU6B,SAClB3S,IAAuBC,iBAAiBvC,IAC1CyK,KAAK26B,WAAW8S,GAAG,GAAGG,mBAAmB,IAAK,EAC9C5tC,KAAK26B,WAAW8S,GAAG,GAAGG,mBAAmB,IAAK,EAC9C5tC,KAAK26B,WAAW8S,GAAG,GAAGG,mBAAmB,IAAK,GAGhD5tC,KAAKH,SAAS,CAAE4K,YAAa1K,EAAU4I,UAAU8B,iBAzOvD,oBA6lBE,WAAU,IAAD,OACP,EAqBIzK,KAAKZ,MApBPM,EADF,EACEA,GACAiJ,EAFF,EAEEA,UAgBA3J,EAlBF,EAkBEA,SAEAs1B,GApBF,EAmBE+W,WAnBF,EAoBE/W,UAEIgG,EAAU3xB,EAAUgC,aAEtBowC,EACFpyC,EAAUgC,eAAiB/T,IAAOU,eAAe/B,KACjDoT,EAAUgC,eAAiB/T,IAAOQ,KAAK7B,KACvCoT,EAAUgC,eAAiB/T,IAAOC,mBAAmBtB,KACrDoT,EAAUgC,eAAiB/T,IAAOY,KAAKjC,KACvCoT,EAAUgC,eAAiB/T,IAAOM,UAAU3B,KAC5CoT,EAAUgC,eAAiB/T,IAAOO,iBAAiB5B,KACnDoT,EAAUgC,eAAiB/T,IAAOK,sBAAsB1B,IAIpDqW,EAAYjD,EAAUgC,eAAiB/T,IAAOU,eAAe/B,IAE7DylD,EAAYryC,EAAUgC,eAAiB/T,IAAOI,aAAazB,IAC3D0lD,EAAQtyC,EAAUgC,eAAiB/T,IAAOG,YAAYxB,IAGxD2lD,GAAY,EACb1yD,KAAawX,KAAKZ,MAAMuJ,UAAUgC,eAAiB/T,IAAOM,UAAU3B,KAAOyK,KAAKZ,MAAMuJ,UAAUgC,eAAiB/T,IAAOY,KAAKjC,MAC5H2lD,GAAY,GAEhB,IAAMC,EAAO1uD,IAAauS,GAAUvR,IAC9B2tD,EAAS3uD,IAAauS,GAAUhS,MAChCquD,EACJ5uD,IAAauS,GAAUjS,MACvB4b,EAAUgC,eAAiB/T,IAAOU,eAAe/B,IAK7CyvC,GAHS9yC,KAAS8M,GAAU5L,SAIhCuV,EAAUu/B,OACVtxC,IAAOW,4BAA4BjC,MAAM0K,KAAKZ,MAAMJ,WAEhDs8C,EAAO3yC,EAAUmC,kBAAoB9S,IAAUI,WAAW7C,IAC1DgmD,IAGF5yC,EAAUmC,kBAAoB9S,IAAUC,YAAY1C,KACpD+lD,GACA3yC,EAAUgC,eAAiB/T,IAAOO,iBAAiB5B,KAEnDoT,EAAUmC,kBAAoB9S,IAAUG,qBAAqB5C,KAG3DimD,EACJlzD,KACAqgB,EAAUmC,kBAAoB9S,IAAUE,uBAAuB3C,IAW3DkmD,IACJH,GACA3yC,EAAUgC,eAAiB/T,IAAOC,mBAAmBtB,KACrDoT,EAAUgC,eAAiB/T,IAAOG,YAAYxB,KAC9CyvC,GACAntC,IAAuBC,iBAAiBvC,KAEpCmmD,IAEF/yC,EAAUgC,eAAiB/T,IAAOU,eAAe/B,KACjDoT,EAAUgC,eAAiB/T,IAAOQ,KAAK7B,KACvCyvC,GACAr8B,EAAU6B,WAAa3S,IAAuBC,iBAAiBvC,KAI7DomD,IACJL,GACChzD,KAAcqgB,EAAUgC,eAAiB/T,IAAOU,eAAe/B,KAChEoT,EAAU6B,WAAa3S,IAAuBC,iBAAiBvC,KAC/DyvC,GAGE4W,GACDpzD,KAAcF,KAAcqgB,EAAU6B,WAAa3S,IAAuBC,iBAAiBvC,OAC3F+lD,GACC3yC,EAAUgC,eAAiB/T,IAAOO,iBAAiB5B,KACnDoT,EAAUgC,eAAiB/T,IAAOI,aAAazB,KAC/CoT,EAAUgC,eAAiB/T,IAAOY,KAAKjC,KACvCsmD,GACDrzD,KACEF,KAAcqgB,EAAUzZ,cAAgB,GACzC5G,MACFqgB,EAAU6B,WAAa3S,IAAuBC,iBAAiBvC,MAC9DoT,EAAUgC,eAAiB/T,IAAOO,iBAAiB5B,KAClDoT,EAAUgC,eAAiB/T,IAAOI,aAAazB,KAC/C+lD,GACA3yC,EAAUgC,eAAiB/T,IAAOY,KAAKjC,KAIzCjN,KACAqgB,EAAU6B,WAAa3S,IAAuBE,gBAAgBxC,MAC7D+lD,GAAQ3yC,EAAUgC,eAAiB/T,IAAOY,KAAKjC,OAEhDqmD,GAAmB,EACnBC,GAAiB,GAGnB,IAAMC,EAAUnzC,EAAUgC,eAAiB/T,IAAOK,sBAAsB1B,IAGpEo/C,EAAY,IAAI3W,MAAMh+B,KAAK4K,cAAc7O,QAC7CiE,KAAK4K,cAAc6U,SAAQ,SAACgS,GACtBA,IAASp+B,IAAc,EAAK+L,MAAMJ,UAAUrK,eAC9CggD,EAAU,EAAK/pC,cAAc7O,OAAS,GACpC2T,YAAoB1Q,OAI1B,IAAI+8C,GAAa,EAEf/7C,KAAKZ,MAAMuJ,UAAUgC,eACrB/T,IAAOW,4BAA4BhC,MAEnCwmD,GAAa,EACb/7C,KAAK26B,WAAW8S,GAvvBM,GAuvBkBx7C,OAAOwJ,KAAK,CAClD4xC,MAAOz2C,IAAOW,4BAA4BjC,MAAM0K,KAAKZ,MAAMJ,UAC3D1J,MAAO0K,KAAK26B,WAAW8S,GAzvBH,GAyvB2Bx7C,OAAO8J,OAAS,KAInE,IAAMigD,OACmDx7C,IAAvDR,KAAKZ,MAAMs8B,WAAW17B,KAAKZ,MAAMuJ,UAAUjJ,GAAK,GAC5C,KACAM,KAAKZ,MAAMs8B,WAAW17B,KAAKZ,MAAMuJ,UAAUjJ,GAAK,GAAG0lB,KAqBzD,OAnBAplB,KAAK26B,WAAW8S,GAAG,GAAGG,mBAAmBh3C,IAAOC,mBAAmBd,IACjEiK,KAAKZ,MAAMiqC,4BAEbrpC,KAAK26B,WAAW8S,GAAG,GAAGG,mBAAmB,GACtCplD,KAAsC,IAAzBwX,KAAKZ,MAAMg1B,WACzBzrB,EAAUgC,eAAiB/T,IAAOU,eAAe/B,IAEnDyK,KAAK26B,WAAW8S,GAAG,GAAGG,mBAAmB,GACvC5tC,KAAKZ,MAAMuJ,UAAUgC,eAAiB/T,IAAOY,KAAKjC,KAClDyK,KAAKZ,MAAMuJ,UAAUgC,eAAiB/T,IAAOM,UAAU3B,IAGrDjN,KAAuC,IAAzB0X,KAAKZ,MAAMg1B,YAC3Bp0B,KAAK26B,WAAW8S,GAAG,GAAGG,mBAAmB,IAAK,EAC9C5tC,KAAK26B,WAAW8S,GAAG,GAAGG,mBAAmB,IAAK,EAC9C5tC,KAAK26B,WAAW8S,GAAG,GAAGG,mBAAmB,IAAK,IAIrB,IAAvB5tC,KAAKL,MAAMqgC,UAAoD,IAAhChgC,KAAKZ,MAAMksC,iBACrC,GAGL,yBAAKhrC,UAAU,YACZN,KAAK26B,WAAW8S,GAAGjQ,KAAI,SAAC4Q,GAAD,OACtBA,EAAG1uC,GAAK,KACU,IAAdw7C,GAAgC,IAAV9M,EAAG1uC,KACzB,kBAACu8C,EAAA,EAAD,CACEliC,IAAKq0B,EAAG1uC,GAAGsW,WACXtW,GAAI0uC,EAAG1uC,GACPyuC,MAAO7Z,EACPoZ,MAAOU,EAAGV,MACVj1B,SACiB,IAAfsjC,GACC3N,EAAGV,QAAUjhD,IAAauS,GAAUhS,QA/JhC,GAiKJohD,EAAGV,QAAUyN,GAAQJ,GACrB/V,IACEoJ,EAAGV,QAAUyN,GACZ/M,EAAGV,QACDjhD,IAAa,EAAK2S,MAAMJ,UAAUk9C,aAE1CvO,SAAUS,EAAGT,SACbwO,cACEnX,EACIpuC,IAAOW,4BAA4BjC,MACjC,EAAK8J,MAAMJ,UAEb,GAEN/M,OAAQm8C,EAAGn8C,OAEXwO,UACG2tC,EAAGV,QAAU0N,GAA2B,IAAjBzyC,EAAUjJ,GAC9BkP,YAAuB,EAAKxP,MAAMJ,UAClCq8C,EACAnsC,YAAqB,EAAK9P,MAAMJ,eAChCwB,KACH4tC,EAAGV,QAAUjhD,IAAauS,GAAUjS,MACpC,EAAKqS,MAAMuJ,UAAUgC,eAAiB/T,IAAOY,KAAKjC,KACjD,EAAK6J,MAAMuJ,UAAUgC,eACnB/T,IAAOM,UAAU3B,SAEjBiL,EADAqO,YAAgB,EAAKzP,MAAMJ,aAE9BovC,EAAGV,QAAUjhD,IAAauS,GAAUvR,KACT,IAA5B,EAAK2R,MAAMuJ,UAAUjJ,IACrBpX,IACIqnB,YAAmB,EAAKvQ,MAAMJ,eAC9BwB,GAENxB,SAAUA,EAEVqvC,cACY,IAAVD,EAAG1uC,GACC0uC,EAAGR,mBACHoN,GAAaC,EACb,EAAKL,MAAMhN,mBACXQ,EAAGR,mBAETjgC,MAAO1jB,IACP+iD,YAAa,EAAKA,cAItB,yBAAK1sC,UAAU,qBACb,yBAAKA,UAAU,gBACZ7T,IAAa,EAAK2S,MAAMJ,UAAUtR,MAErC,2BACEqsB,IAAKq0B,EAAG1uC,GAAGsW,WACXtW,GAAI,GACJY,UAAU,gCACVhL,MAAO,EAAKqK,MAAM8K,YAClBpK,QAAS,EAAKsW,OACd5pB,KAAK,OACL8lB,SAAU,SAAC6C,GAAD,OACR,EAAK7V,SAAS,CAAE4K,YAAaiL,EAAI7D,OAAOvc,SAE1CukB,OAAQ,SAACnE,GAAD,OAAS,EAAKo5B,WAAWp5B,UAczC,kBAAC,IAAD,CACE8C,UACE5M,EACInf,IAAauS,GAAU3R,GACvBZ,IAAauS,GAAU5R,OAE7BsS,GAAI,EACJyW,OAAQ,EACRg4B,MAAO7Z,EACPt1B,SAAUA,EACVqY,WAAY1O,EAAU0U,UACtBjF,kBAAmBpY,KAAKoY,oBAGzBsjC,GACC,kBAAC,IAAD,CACEljC,UAAW/rB,IAAauS,GAAU/Q,OAClCkoB,OAAQ,EACRzW,GAAI,EACJyuC,MAAO7Z,EACPt1B,SAAUA,EACVqY,WAAY6D,KAAKC,MAAM,IAAQxS,EAAU1a,QAAU,IACnDoiD,WAAY3wC,EACZ0Y,kBAAmBpY,KAAKoY,oBAI3BujC,GACC,kBAAC,IAAD,CACEnjC,WACElwB,IACImE,IAAauS,GAAUrR,WAG7B+R,GAAI,EAEJe,SAAU0O,YAAqBnP,KAAKZ,MAAMJ,UAC1CmX,OAAQ,EACRg4B,MAAO7Z,EACPt1B,SAAUA,EACVqY,WAAY1O,EAAUmoB,UACtB1Y,kBAAmBpY,KAAKoY,oBAG3BqjC,GACC,kBAAC,IAAD,CACEjjC,UAAW/rB,IAAauS,GAAUpR,WAClC8R,GAAI,EACJyW,OAAQ,EACRg4B,MAAO7Z,EACPt1B,SAAUA,EACVqY,WAAY1O,EAAUqoB,WACtB5Y,kBAAmBpY,KAAKoY,oBAG1BkjC,GACA3yC,EAAU6B,WACR3S,IAAuBC,iBAAiBvC,KACxC,kBAAC,IAAD,CACEijB,UAAW/rB,IAAauS,GAAUzP,QAClC4mB,OAAQ,EACRzW,GAAI,GACJyuC,MAAO7Z,EACP7zB,SAAUyN,YAAuBlO,KAAKZ,MAAMJ,UAC5CA,SAAUA,EACVqY,WAAY1O,EAAUwoB,aACtB/Y,kBAAmBpY,KAAKoY,oBAG7BojC,GACC,kBAAC,IAAD,CACEhjC,UACE8iC,EACI7uD,IAAauS,GAAU1P,SACvB7C,IAAauS,GAAU3P,WAE7B8mB,OAAQ,EACRzW,GAAI,EACJyuC,MAAO7Z,EACP7zB,SAAU6N,YAA4BtO,KAAKZ,MAAMJ,UACjDA,SAAUA,EACVqY,WAAY6D,KAAKC,MAAM,IAAQxS,EAAUtZ,YAAc,IACvD+oB,kBAAmBpY,KAAKoY,oBAI3B0jC,GACC,kBAAC,IAAD,CACEtjC,UAAW/rB,IAAauS,GAAUhR,8BAClCmoB,OAAQ,EACRzW,GAAI,GACJyuC,MAAO7Z,EACPt1B,SAAUA,EACVyB,SAAUqN,YAAqB9N,KAAKZ,MAAMJ,UAC1CqY,WAAY1O,EAAU3a,8BACtBoqB,kBAAmBpY,KAAKoY,oBAG3BmjC,GACC,kBAAC,IAAD,CACE/iC,UAAW/rB,IAAauS,GAAUjR,IAClCooB,OAAQ,EACRzW,GAAI,EACJyuC,MAAO7Z,EACPt1B,SAAUA,EACVqY,WAAY1O,EAAU5a,IAGtBqqB,kBAAmBpY,KAAKoY,oBAI3BwjC,GACC,6BACE,kBAAC,IAAD,CACEpjC,UAAW/rB,IAAauS,GAAUjQ,gBAClC2Q,GAAI,EACJyW,OAAQ,EACRg4B,MAAO7Z,EACPt1B,SAAUA,EACVqY,WAAY1O,EAAU5Z,gBACtB0R,SAAUuO,YAAwBhP,KAAKZ,MAAMJ,UAC7C+Z,SAAU,QACVX,kBAAmBpY,KAAKoY,oBAY1B,kBAAC,IAAD,CACEI,UAAW/rB,IAAauS,GAAU/P,gBAClCyQ,GAAI,EACJyW,OAAQ,EACRg4B,MAAO7Z,EACPt1B,SAAUA,EACVqY,WAAY1O,EAAU1Z,gBACtB8pB,SAAU,QACVX,kBAAmBpY,KAAKoY,qBAK7ByjC,GACC,6BACE,kBAAC,IAAD,CACErjC,UAAW/rB,IAAauS,GAAU9P,cAClCwQ,GAAI,GACJyW,OAAQ,EACRg4B,MAAO7Z,EACPt1B,SAAUA,EACVqY,WAAY1O,EAAUzZ,cACtB6pB,SAAU,MACVX,kBAAmBpY,KAAKoY,oBAE1B,kBAAC,IAAD,CACEI,UAAW/rB,IAAauS,GAAU7P,kBAClCuQ,GAAI,GACJyW,OAAQ,EAERg4B,MAAO7Z,EACPt1B,SAAUA,EACVqY,WAAY1O,EAAUxZ,kBACtBmnB,SAAU,EACVyC,SAAU,MACVX,kBAAmBpY,KAAKoY,oBAE1B,kBAAC,IAAD,CACEI,UAAW/rB,IAAauS,GAAU5P,cAClCsQ,GAAI,GACJyW,OAAQ,EACRg4B,MAAO7Z,EACPt1B,SAAUA,EACVqY,WAAY1O,EAAUvZ,cACtB2pB,SAAU,MACVX,kBAAmBpY,KAAKoY,sBAe5B4sB,IAAc+W,GACd,kBAAC,EAAD,CACEz7C,UAAU,WACVi5C,sBAAuBv5C,KAAKu5C,sBAC5B75C,GAAG,SACHmpB,IAAI,KACJ1V,KACmC,IAAjCnT,KAAKL,MAAMivC,kBACPjuB,EAAQ,KACRA,EAAQ,OAKlB,kBAACy7B,EAAA,EAAD,CACE7Q,UAAW7rC,EACX8rC,SAAU,EAEV9rC,GAAI46B,EACJmR,YAAanX,EACb9a,SAAUxZ,KAAKZ,MAAMksC,iBACrBI,YAAa1rC,KAAK0rC,YAClBC,eAAgB3rC,KAAK2rC,kBAIW,IAAjC3rC,KAAKL,MAAMivC,mBACV,yBACElvC,GAAG,YACHQ,MAAO,CACL+T,MAAO,OACP7T,MAAO,SAGF,OAAN47C,GACC,kBAAC/C,EAAD,CAAiBC,gBAAiB8C,EAAG/8C,KAAMD,IAC1C,UAplCjB,GAA2B2B,e,4LCm4B3B,SAAS07C,EAAgB5sD,EAAKwP,EAAMyR,GAClCjhB,EAAI88B,QAAQzD,IAAWE,UACVxoB,IAATkQ,EACW,OAATzR,EAAexP,EAAI+8B,YAAYpD,YAAO,KACrC35B,EAAI+8B,YAAYpD,YAAO,MAE5B35B,EAAI88B,QAAQzD,IAAWG,KACV,OAAThqB,EAAexP,EAAI+8B,YAAYpD,YAAO1Y,IACrCjhB,EAAI+8B,YAAYpD,YAAO1Y,EAAO,KAGrCjhB,EAAIk9B,aAAa,GAAM,GAAM,IAG/B,SAAS2vB,EAAQ7sD,EAAK8sD,EAAM/rC,EAAMsf,EAAOC,GACvCysB,EAAgB/sD,GAChBA,EAAIk9B,aAAa,IAAK,IAAK,KAC3Bl9B,EAAI+8B,YAAYpD,YAAO,KACvBqzB,EAAWhtD,EAAK8sD,EAAM/rC,EAAMsf,EAAOC,GACnCysB,EAAgB/sD,GAGlB,SAAS+sD,EAAgB/sD,GACvBA,EAAI88B,QAAQxD,IAAOC,KACnBv5B,EAAI+8B,YAAYpD,YAAO,KACvB35B,EAAIk9B,aAAa,GAAM,GAAM,IAG/B,SAAS+vB,EAAajtD,EAAKktD,EAAQnsC,EAAMiZ,EAAG/Y,GAC1CjhB,EAAIk9B,aAAa,IAAK,IAAK,KAC3Bl9B,EAAI+8B,YAAYpD,YAAO1Y,IACvBjhB,EAAI88B,QAAQxD,IAAOE,KACnBx5B,EAAIm/B,KACF+tB,EACAzzB,YAAO1Y,GAz8Bc,KAy8BNE,EAA4B,IAAO,IAClDwY,YAAOO,GA18Bc,KA08BT/Y,EAA4B,IAAO,KAEjDjhB,EAAI88B,QAAQxD,IAAOC,KACnBv5B,EAAI+8B,YAAYpD,YAAO,KACvB35B,EAAIk9B,aAAa,GAAM,GAAM,IAG/B,SAAS8vB,EAAWhtD,EAAK8sD,EAAM/rC,EAAMsf,EAAOC,GAC1CtgC,EAAIw8B,cAAcswB,EAAMrzB,YAAO1Y,GAAO0Y,YAAO4G,GAAQ5G,YAAO6G,IAG9D,SAAS6sB,EACPntD,EACAogC,EACAC,EACAnR,EACA9Q,EACAgvC,EACAC,GAEArtD,EAAI+8B,YAAYpD,YAAO,KACvB,IAAM2E,OAAqBvtB,IAAds8C,EAA0B,CAAC,IAAK,IAAK,KAAOA,EAezD,OAbArtD,EAAI88B,QAAQxD,IAAOE,KACTx5B,EAAIq+B,SACZC,EAHgB,CAAC,IAAK,IAAK,KAK3B8B,EACAC,EACAnR,EACA9Q,EACAgvC,GACA,GACA,GACA,GAKJ,SAASE,EACPttD,EACAogC,EACAC,EACAnR,EACA9Q,EACAgvC,EACAG,EACAF,EACA3uB,GAEA1+B,EAAIk9B,aAAa,GAAM,GAAM,IAC7B,IAAMoB,OAAqBvtB,IAAds8C,EAA0B,CAAC,IAAK,IAAK,KAAOA,EAEzDrtD,EAAI88B,QAAQxD,IAAOi0B,EAAO/zB,IAAOD,KACjCv5B,EAAIq+B,SACFC,EAHgB,CAAC,GAAM,GAAM,IAK7B8B,EACAC,EACAnR,EACA9Q,EACAgvC,GACA,EACA1uB,GAiCJ,SAAS8uB,EACPxtD,EACA21B,EACAlF,EACA2P,EACAE,EACA9wB,EACAi+C,EACA7iC,EACA8iC,EACA1iC,GAEA,IAAIlf,EAEA8yB,EAAOjJ,EAAKxa,cAAc7O,OAE1B+zB,EAAQ,IADG,GAEX5Z,EACc,cAAhBmE,EACgB,IAAZ8iC,EAxjCyB,GA0jCvB,GAzjCsB,GA2jCxBxiC,EAAuB,OAAT1b,EAAgB,IAAM,IACpCwc,EAAqB,OAATxc,EAAgB,IAAM,IAEpCgvB,EAAS,GAEbx+B,EAAIw7B,QAAQ5Q,GAGZgiC,EAAgB5sD,EAAKwP,EAAM,IAC3B,IAAIm+C,EAAYt4B,IAAa7lB,GAAM6G,KAAO,KAAOgf,IAAa7lB,GAAM6D,KAmBpE,IAlBA25C,EAAWhtD,EAAK2tD,EAAWvtB,EAAUC,EAAOC,GAG5CysB,EAAgB/sD,GAChBqgC,GAAgB,IAtBD,GA4Bf2sB,EAAWhtD,EALX2tD,GA9kCqB,IA+kClB3iC,EACGqK,IAAa7lB,GAAMo+C,MACnBv4B,IAAa7lB,GAAMq+C,OACqB,GACnBztB,EAAUC,EAAOC,GAE5CD,GAAgB,GAIhB7B,EAAOxyB,KAAKs0B,GAAa1B,EAAO,IAChCJ,EAAOxyB,KAAKs0B,GAAa1B,EAAO,IAC3B9yB,EAAI,EAAGA,EAAI8yB,IAAQ9yB,EACtB0yB,EAAOxyB,MAAMs0B,EAAa,EAAIA,GAAc1B,EAAO,KAAOA,EAAO,IAKnE,IAAIkvB,EAAiBxtB,EAhmCC,IAimClBtV,IAA0B8iC,EAAkBlvB,EAAO0B,EAAa,GAEpE,IAAIpR,EAASyG,EAAKxa,cACd4yC,EAAY,GAEhB,IAAKjiD,EAAI,EAAGA,EAAI8yB,IAAQ9yB,EACtBiiD,EAAU/hD,KAAKhM,EAAI+9B,UAAU7O,EAAOpjB,KAClBiiD,EAAUjiD,GAG9B,IAAKA,EAAI,EAAGA,EAAI8yB,IAAQ9yB,EACtB0yB,EAAO1yB,GAAIiiD,EAAUjiD,GAAK,IACvB0yB,EAAO1yB,GAAG,IAAI0yB,EAAO,KAAGA,EAAO1yB,GAAG,IAAI0yB,EAAO,IAIlD,IAAIwvB,EAAa,EACjB,IAAKliD,EAAI,EAAGA,EAAI8yB,IAAQ9yB,EAAGkiD,GAAcxvB,EAAO1yB,GAGhD,IAAImiD,EAAqB,GAGrBC,GACDJ,EAAiBE,EAAaxvB,EAAO,GAAKA,EAAO,KAAOI,EAAO,GAClE,GA1nCsB,IA0nClB5T,GACF,GAAG4T,EAAK,EACN,IAAK9yB,EAAI,EAAGA,EAAI8yB,IAAQ9yB,EAAG0yB,EAAO1yB,IAAMoiD,OACrC,GA9nCc,IA8nCVljC,EAGT,IAFAkjC,GACGJ,EAAiBE,EAAaxvB,EAAO,GAAKA,EAAO,KAAOI,EAAO,GAC7D9yB,EAAI,EAAGA,EAAI8yB,IAAQ9yB,EAAa,IAANA,IAAS0yB,EAAO1yB,IAAMoiD,GAKvD,IAAKpiD,EAAI,EAAGA,EAAI8yB,IAAQ9yB,EACtBmiD,EAAmBjiD,KAAKhM,EAAIm+B,mBAAmBjP,EAAOpjB,GAAI0yB,EAAO1yB,KACtCmiD,EAAmBniD,GAe9Cu0B,GAAgB,GAhGH,GAiGbstB,EAAYh4B,EAAK1a,UACjBjb,EAAI+8B,YAAYpD,YAAO,KACvB35B,EAAIk9B,aAAa,GAAM,GAAM,IAC7B8vB,EAAWhtD,EAAK2tD,EAAWvtB,EAAUC,EAAOC,GAM9C,IAYI+sB,EAZEc,EAAUhB,EACdntD,EACAogC,EAPAC,GAAgB,GArGH,GA8GbnR,EA9Ga,GAgHbsP,EACA,CAAC,GAAI,GAAI,MAIP/4B,EAAOioD,EAEPD,IAAiBptB,GAAgB8tB,GAIrC,KAAO1oD,EAAOgrB,EAFC,GAEc,CAG3B,GACEhrB,IAASghB,IACK,IAAZinC,GAAiBj9B,EAPR,EAOwBhrB,EAAO,GAprCf,KAqrCxBioD,GACCj9B,EAtrCuB,GA6qChB,EASoChrB,EAAO,GACtD,CACA,GA3rCiB,IA2rCbulB,EASF,OARAgiC,EACEhtD,EACA,GACAogC,EACAC,EAAS,EAzIF,GAyIgB,EAAI,GAC3BC,GAEFtgC,EAAI6/B,gBAAgBxK,IAAa7lB,GAAMyH,UAChCxR,EAGTA,EAAOgrB,EAvBI,EAuBY,EACvB4P,GAjJW,GAkJXrgC,EAAI88B,QAAQxD,IAAOE,KACnBwzB,EAAWhtD,EAAK,SAAUogC,EAAUC,EAAQjiB,GAAYkiB,GACxDtgC,EAAI88B,QAAQxD,IAAOC,KAErBrK,EAAS,GAET,IAAIwP,EAAQ,GACZ,IAAK5yB,EAAI,EAAGA,EAAI8yB,IAAQ9yB,EAEtBojB,EAAOljB,KACE,IAANF,GAAoB,IAATrG,GAAqB,IAANqG,GAAiB,KAANA,EAClCsiD,OAAOz4B,EAAKva,eAAetP,GAAGrG,IAC9BomB,YACEpK,WAAW2E,YAAYuP,EAAKva,eAAetP,GAAGrG,GAAO+J,IACrD,EACA0b,EACAc,GACAzF,YAERmY,EAAM1yB,KAAK,GAEbq0B,GAvKa,GAwKbgtB,EAAY5nD,EAAO,EAAI,CAAC,IAAK,IAAK,KAAO,CAAC,IAAK,IAAK,KAChDA,GAAQgrB,IACV48B,EAAY,CAAC,IAAK,IAAK,KACvBL,EACEhtD,EACS,OAATwP,EAAgB,KAAO,KACvB4wB,EAAW0tB,EAAiB,IAC5BztB,EAAQjiB,GAAa,IACrBkiB,IAIJgtB,EACEttD,EACAogC,EACAC,EACAnR,EAxLW,GA0LXsP,GACA,EACA6uB,EACA3uB,GAGFj5B,IAGkB,cAAhBmlB,EACF5qB,EAAI6/B,gBAAgBxK,IAAa7lB,GAAMyH,UACpCjX,EAAI2/B,OAAOtK,IAAa7lB,GAAMyH,U,4BC3wCxBo3C,EAAb,kDACE,WAAY1+C,GAAQ,uCACZA,GAFV,0CAME,WAGE,IASI62C,EATEhyB,EAAiBiyB,YAAwBl2C,KAAKZ,OAC9CH,EAAMe,KAAKZ,MAAMlE,UAAUqB,cAAc,GAAGyC,SAC5C8d,EAAuBD,YAC3B7c,KAAKZ,MAAMlE,UACX8E,KAAKZ,MAAMkf,WACXte,KAAKZ,MAAMoN,SAGTwpC,EAAa,GAEb/3B,EAAUje,KAAKZ,MAAM6e,QACnBztB,EAAUwP,KAAKZ,MAAMlE,UAAUQ,QACjChP,EACF8D,EAAQuL,OAAS,EACbmf,KAAK7E,IAAI7lB,EAAQ5H,MAAcsL,IAAK1D,EAAQ7H,MAAcuL,KAC1D1D,EAAQ7H,MAAcuL,IAe5B,IA1C2B,IA+BvB8L,KAAK61C,iBACP53B,EAAUje,KAAKZ,MAAM86B,cACrBxtC,EAAMsT,KAAKZ,MAAMlE,UAAUQ,QAAQ/S,MAAcuL,KAhC1B,IAiCd8L,KAAK61C,kBACd53B,EAAUje,KAAKZ,MAAM+6B,YACrBztC,EACE8D,EAAQuL,OAAS,EACbmf,KAAK7E,IAAI7lB,EAAQ5H,MAAcsL,IAAK1D,EAAQ7H,MAAcuL,KAC1D1D,EAAQ7H,MAAcuL,KAGzB+hD,EAAI,EAAGA,GAAKh4B,EAAU,IAAKg4B,EAC9BD,EAAWv6C,KAAK/O,EAAMupD,GAG1B,IAAME,EAAapyB,YAAiB/jB,KAAKZ,MAAMlE,UAAUskB,OAAOxf,KAAKZ,MAAM4kB,iBAAiBC,EAAenH,EAC3G7d,EACAgf,GAeF,OARCk4B,EAAazxB,wBAAwBH,OAAOC,OAAOu5B,SAAW,GAC9D5H,EAAanxB,0BAA0BT,OAAOC,OAAOu5B,SAAW,GAQ/D,yBAAK79C,MAAO,CAAEyN,MAAO,QACnB,yBAAKzN,MAAO,CAAEyN,MAAO,SAEjB,wBAAIrN,UAAU,QACd,6BACGwkB,IAAa7lB,GAAM85C,gBADtB,IACuC,+BAIvC,yBAAK74C,MAAO,CAAEyN,MAAO,QACrB,6BAAUjO,GAAG,mBACTY,UAAU,2BACV,yBAAKA,UAAU,cACf,kBAAC,MAAD,CACEwI,KAAMqtC,EAAapwB,qBACnB+yB,QAAS3C,EAAazxB,4BAI5B,6BAAUhlB,GAAG,oBACTY,UAAU,2BACV,yBAAKA,UAAU,cACf,kBAAC,MAAD,CACEwI,KAAMqtC,EAAa/vB,uBACnB0yB,QAAS3C,EAAanxB,+BAO9B,6BACA,mCA7FN,GAA2C5R,IAAMzS,W,gBCfpCq9C,EAAb,kDACE,WAAY5+C,GAAQ,uCACZA,GAFV,0CAKE,WAmFE,IAlFA,IAAMH,EAAOe,KAAKZ,MAAMJ,SACpBi/C,EAAgB,CAuBlBC,SAAU,CAAEC,MAAO,CAAEC,OAAQ,IAC7Bj6B,YAAY,EACZ5jB,MAAO,CACL+R,SAAS,EACT/E,SAAU,MACV8W,KAAMS,IAAa7lB,GAAMo/C,MACzBl+C,SAAU,GACVmkB,UAAW,QAEbC,OAAQ,CACNjS,SAAS,EACT/E,SAAU,SACViX,OAAQ,CACNF,UAAW,OACXnkB,SAAU,KAGd42C,OAAQ,CACNK,MAAO,CACL,CACEH,SAAS,EACTC,MAAO,CACLC,aAAa,EACbE,SAAU,SAAU/hD,EAAOurB,EAAOlC,GAUhC,OARErpB,EAAQ,IACJA,EACS,OAAT2J,EACAqZ,KAAKC,eAAepC,OAAO7gB,EAAQ,KAAQ,KAC1CgjB,KAAKC,eAAepC,OAAO7gB,EAAQ,KAAQ,KAAKygB,QAC/C,IACA,SAOhBihC,MAAO,CACL,CACEC,SAAS,EACTC,MAAO,CACLC,aAAa,OAOnBmH,EAA2B,GAE3BvxD,EAAO,CAAC,OAAQ,OAEhBwxD,EAAM,GAGNz1C,EAAO,GACLiE,EAAU3X,KAAOM,SAASJ,MAAM0K,KAAKZ,MAAMJ,UACxCzD,EAAI,EAAGA,EAAIyE,KAAKZ,MAAMk/C,yBAAyBviD,SAAUR,EAC5DyE,KAAKZ,MAAMk/C,yBAAyB/iD,GAAG1O,OAASkgB,GAClDjE,EAAKrN,KAAKuE,KAAKZ,MAAMk/C,yBAAyB/iD,IAElD,IAAK,IAAIA,EAAI,EAAGA,EAAIyE,KAAKZ,MAAMk/C,yBAAyBviD,SAAUR,EAC5DyE,KAAKZ,MAAMk/C,yBAAyB/iD,GAAG1O,OAASkgB,GAClDjE,EAAKrN,KAAKuE,KAAKZ,MAAMk/C,yBAAyB/iD,IAGlD,IAAK,IAAIA,EAAI,EAAGA,EAAIuN,EAAK/M,SAAUR,EAAG,CACpCgjD,EAAM,GAEN,IADA,IAAIC,EAAc11C,EAAKvN,GAAG1O,OAASkgB,EAC1BkpC,EAAI,EAAGA,EAAIj2C,KAAKZ,MAAM+gB,SAASpkB,SAAUk6C,EAChDsI,EAAI9iD,KAAKqN,EAAKvN,GAAG9F,QAEnB8oD,EAAIv+C,KAAKZ,MAAM8gB,IAAMu+B,EAAW31C,EAAKvN,GAAG9F,QAAS,IACjD6oD,EAAyB7iD,KAAK,CAC5B1O,KAAMA,EAAKyxD,EAAc,EAAI,GAC7BnR,MAAOvkC,EAAKvN,GAAG1O,KACfic,KAAMA,EAAKvN,GAAGojB,OACdoP,MAAMywB,EACN/2B,YAAa3e,EAAKvN,GAAG9F,OACrB0wB,gBAAiBo4B,IAMrB,SAASE,EAAWpzC,EAAO7d,GACzB,IAAIkxD,EAAIh1C,SAAS2B,EAAM4K,UAAU,EAAG,GAAI,IACpC0oC,EAAIj1C,SAAS2B,EAAM4K,UAAU,EAAG,GAAI,IACpC2oC,EAAIl1C,SAAS2B,EAAM4K,UAAU,EAAG,GAAI,IAiBxC,OAfAyoC,EAAIh1C,SAAUg1C,GAAK,IAAMlxD,GAAY,KAKrCmxD,GAJAA,EAAIj1C,SAAUi1C,GAAK,IAAMnxD,GAAY,MAI7B,IAAMmxD,EAAI,IAClBC,GAJAA,EAAIl1C,SAAUk1C,GAAK,IAAMpxD,GAAY,MAI7B,IAAMoxD,EAAI,IASX,KANoB,IAL3BF,EAAIA,EAAI,IAAMA,EAAI,KAKd1oC,SAAS,IAAIja,OAAc,IAAM2iD,EAAE1oC,SAAS,IAAM0oC,EAAE1oC,SAAS,MAEtC,GAAzB2oC,EAAE3oC,SAAS,IAAIja,OAAc,IAAM4iD,EAAE3oC,SAAS,IAAM2oC,EAAE3oC,SAAS,MAEtC,GAAzB4oC,EAAE5oC,SAAS,IAAIja,OAAc,IAAM6iD,EAAE5oC,SAAS,IAAM4oC,EAAE5oC,SAAS,KAKnE,IAAM6oC,EAAa,CACjBr6B,OAAQxkB,KAAKZ,MAAM+gB,SACnB+F,SAAUo4B,GAGZ,OACE,yBAAKp+C,MAAO,CAAEyN,MAAO,QACnB,6BACE,6BACEjO,GAAG,eACHY,UAAU,sBACVJ,MAAO,CAAEsN,WAAY,OAAQK,OAAQ,UAErC,yBACE3N,MAAO,CACL4+C,SAAU,SACV1+C,MAAO,OACPuN,MAAO,OACPE,OAAQ,UAGV,kBAAC,MAAD,CAAK/E,KAAM+1C,EAAY/F,QAASmF,YAhK9C,GAAwC7qC,IAAMzS,W,iDCmDjCo+C,EAAb,kDACE,WAAY3/C,GAAQ,IAAD,8BACjB,cAAMA,IAYR4/C,MAbmB,sBAaX,sBAAAz/C,EAAA,sEASDyX,OAAOgyB,OAAOiW,YACjB,OACE,EAAK7/C,MAAMlE,UAAUqB,cAAc,GAAGyC,SACtC,IACA,EAAKI,MAAM8hC,6BACb,KAdI,2CAbW,EAqCnBge,iBAAmB,SAAC5/C,GAClB,IAAIisB,GAAY,EACN,IAANjsB,IAASisB,GAAY,GAEzB,EAAK1rB,SAAS,CAAE0rB,UAAWA,KAzCV,EA4CnB4zB,MAAQ,YH5DH,SAA2B//C,EAAO6kB,GACvC,IACE,IAGIm5B,EAHA3tD,EAAM,IAAI65B,IACd75B,EAAI07B,SAGJ,IAEIxM,EADAsP,EAAS,CAAC,IAAK,GAAK,IAAK,KAMzB6B,EAAQ,MAGRzC,EAAS6H,YAAgB91B,GAEvBH,EAAOG,EAAMlE,UAAUqB,cAAc,GAAGyC,SAI9CvP,EAAI88B,QAAQzD,IAAWE,KACJv5B,EAAI+8B,YAAYpD,YAAO,KAE1C35B,EAAIk9B,aAAa,GAAM,GAAM,IAC7Bl9B,EAAIm/B,KApCe,IAqCjBxvB,EAAMwqC,UACFv5C,KAAO4O,GAAM3O,UACbD,KAAO4O,GAAM1O,SACjB24B,YApBe,KAqBfA,YAZgB,MAiBlB,IAII9W,EAJE7B,EAAQnR,EAAMlE,UAAUqB,cAAc,GAAGkkB,YACzCuO,EAA+B,OAAhBze,EAAMA,MAAiB,EAAI,IAC1CM,EAAMzR,EAAMlE,UAAUqB,cAAc,GAAGkkB,YAAY5P,IAGzDuB,EAAS3iB,EAAI26B,eAAelhC,KAtBV,IAsBiCqnB,GAAO,EAAMM,GAEhEphB,EAAI85B,SACFvgC,KACAkgC,YAAO2G,MACP3G,YAAOmB,KACPnB,YAAO,MACPA,YAAO,OAGTz5B,EAAI+8B,YAAYpD,YAAO,KACvB35B,EAAIk9B,aAAa,GAAM,GAAM,IAC7Bl9B,EAAIm/B,KACF9J,IAAa7lB,GAAMoC,MAAQgsB,EAAOv+B,YAClCo6B,YAAO2G,MACP3G,YAAOmB,OAET56B,EAAIm/B,KACF9J,IAAa7lB,GAAMqC,MAAQ+rB,EAAOx+B,WAClCq6B,YAAO2G,MACP3G,YAAOmB,OAET56B,EAAIm/B,KACF9J,IAAa7lB,GAAMsC,MAAQ8rB,EAAO8H,WAClCjM,YAAO2G,MACP3G,YA/CgB,IA+CG,OAErBz5B,EAAIm/B,KACF9J,IAAa7lB,GAAMuC,MAAQ6rB,EAAOz+B,SAClCs6B,YAAO2G,MACP3G,YAAOmB,OAKP,IAAM6E,EAAapK,IAAa7lB,GAAMyH,SAChCyoB,EAAarK,IAAa7lB,GAAMmC,KACtC3R,EAAIw/B,mBAAmBD,EAAcE,EAAYC,GAKjD/c,EACEA,GACA3iB,EAAI26B,eAAejhC,KAlEL,IAkEuConB,GAAO,EAAOM,GAErEwrC,EAAgB5sD,EAAKwP,GACrBxP,EAAIm/B,KAAK9J,IAAa7lB,GAAMmgD,KAAMl2B,YA9EnB,KA8EqCA,YAAO4G,IAC3D0sB,EAAgB/sD,GAEhB,IAAI4vD,EAAQ,GACZv6B,IAAa7lB,GAAMqgD,cAAc9hB,KAAI,SAAC/L,GAAD,OAAU4tB,EAAM5jD,KAAKg2B,MAE1D3B,GAAgB,KAChB2sB,EAAWhtD,EAAK4vD,EAAM,GArFP,IAqFqBvvB,EAtFpB,GAwFhBA,GAAgB,IAChB2sB,EAAWhtD,EAAK4vD,EAAM,GAxFP,IAwFqBvvB,EAzFpB,GA4FhB4sB,EAAajtD,EAAK,IA3FH,IAEF,IAwFbqgC,GAzFiB,MAyFS,OAAT7wB,EAAgB,IAAM,KA5GpB,IA8GnBw9C,EAAWhtD,EAAK4vD,EAAM,GAAIxvB,MAAyBC,EA7FnC,GAgGhB4sB,EAAajtD,EAAK,IA/FH,IAEF,IA4FbqgC,GAAgB,MAhHG,IAkHnB2sB,EAAWhtD,EAAK4vD,EAAM,GAAIxvB,MAAyBC,EAjGnC,GAmGhBA,GAAgB,KAChB2sB,EAAWhtD,EAAK4vD,EAAM,GAnGP,IAmGqBvvB,EApGpB,GAuGhB4sB,EAAajtD,EAAK,IAtGH,IAEF,IAmGbqgC,GAAgB,EApGC,KAnBE,IAyHnB2sB,EAAWhtD,EAAK4vD,EAAM,GAAIxvB,MAAyBC,EAxGnC,GA2GhB4sB,EAAajtD,EAAK,IA1GH,IAEF,IAuGbqgC,GAAgB,MA3HG,IA6HnB2sB,EAAWhtD,EAAK4vD,EAAM,GAAIxvB,MAAyBC,EA5GnC,GA8GhBA,GAAgB,EA5GC,KA6GjB2sB,EAAWhtD,EAAK4vD,EAAM,GA9GP,IA8GqBvvB,EA/GpB,GAkHhB4sB,EAAajtD,EAAK,IAjHH,IAEF,IA8GbqgC,GAAgB,EA/GC,KAnBE,IAoInB2sB,EAAWhtD,EAAK4vD,EAAM,GAAIxvB,MAAyBC,EAnHnC,GAsHhB4sB,EAAajtD,EAAK,IArHH,IAEF,IAkHbqgC,GAAgB,MAtIG,IAwInB2sB,EAAWhtD,EAAK4vD,EAAM,GAAIxvB,MAAyBC,EAvHnC,GA0HhB4sB,EAAajtD,EAAK,IAzHH,IAEF,IAsHbqgC,GAAgB,MA1IG,IA4InB2sB,EAAWhtD,EAAK4vD,EAAM,IAAKxvB,MAAyBC,EA3HpC,GA8HhBrgC,EAAIw/B,mBAAmBD,EAAcE,EAAYC,GAKjD/c,EACEA,GACA3iB,EAAI26B,eAAejhC,KA3HL,IA2HuConB,GAAO,EAAOM,GAErEif,EAAQ,MACRusB,EAAgB5sD,EAAKwP,GACrBxP,EAAIm/B,KAAK9J,IAAa7lB,GAAM6D,KAAMomB,YAxInB,KAwIqCA,YAAO4G,IAC3D0sB,EAAgB/sD,GAEhBqgC,GAAgB,KAChBstB,EAAYt4B,IAAa7lB,GAAM+D,MAC/By5C,EAAWhtD,EAAK2tD,EA7ID,IA6IsBttB,EA9IrB,GAiJhB,IAAIyvB,EACO,OAATtgD,EAAgB8wB,IAAsBA,IACpCyvB,EAAc,EACT,IACTvxB,EAAS,CAAC8B,IAAqBA,IAClB,OAAT9wB,IACFgvB,EAAS,CAAE,EAAIsxB,EAAiB,EAAI,GAAKA,EAAgB,EAAI,KAG/D,IAAME,EADN3vB,GAAgB,IAvJC,KAyJjBnR,EAAS,CAACmG,IAAa7lB,GAAMiE,SAE7B,IAAIirB,EAAQ,GACZyuB,EAAiBntD,EA7JF,IA6JiBqgC,EAAOnR,EAV9B,IAU8C,CACrD4gC,EAAgB,MAGlBlyB,EAAO38B,OAAO8sC,KAAI,SAAC9d,GACjBf,EAAS,CACPe,EAAQ7yB,MACL6yB,EAAQ7yB,OAAS+J,IAAOS,aAAa/B,MAAM2J,IAC5CygB,EAAQpqB,MAAQ,EACZ,KACA,IACNymB,YAAa2D,EAAQpqB,MAAO,EAAG2J,IAGjCkvB,EAAM1yB,KAAK,GACX0yB,EAAM1yB,KAAK,GACX+jD,GAAetuC,WAAWwO,EAAQpqB,OAElCynD,EACEttD,EAhLW,IA8KbqgC,GA3BO,IAgCLnR,EAhCK,IAkCLsP,GACA,EACA,CAAC,IAAK,IAAK,KACXE,OAIJA,EAAQ,IACF1yB,KAAK,GACX0yB,EAAM1yB,KAAK,GAEXshD,EACEttD,EAjMa,IA+LfqgC,GA5CS,IAiDP,CAAChL,IAAa7lB,GAAMygD,YAAa3jC,YAAayjC,EAAa,EAAGvgD,IAjDvD,IAmDPgvB,GACA,EACA,CAAC,IAAK,IAAK,KACXE,GAI6B,KAA3Bd,EAAO8J,kBACTrH,GAAgB,MAChBstB,EAAY/vB,EAAO8J,gBACnBmlB,EAAQ7sD,EAAK2tD,EAhNA,IAgNqBttB,EAjNpB,IAmNhB0sB,EAAgB/sD,GAIhB,IAAIkwD,EACO,OAAT1gD,EAAgB8wB,KAAuBA,IACzC9B,EAAS,CAAC8B,IAAqBA,IAClB,OAAT9wB,IAAegvB,EAAS,CAAE,EAAI0xB,EAAc,EAAGA,EAAa,IAEhE,IAAIC,EAAa,EACXC,EA5NS,IA4NcN,EAAgB,GAC7CzvB,EAAQ2vB,EACR9gC,EAAS,CAACmG,IAAa7lB,GAAM6gD,UAC7BlD,EAAiBntD,EAAKowD,EAAW/vB,EAAOnR,EA5E/B,IA4E+C,CACtDghC,EAAa,MAGfxxB,EAAQ,GACRd,EAAO18B,YAAY6sC,KAAI,SAAC9d,GACtBf,EAAS,CAACe,EAAQ7yB,KAAMkvB,YAAa2D,EAAQpqB,MAAO,EAAG2J,IACvDkvB,EAAM1yB,KAAK,GACX0yB,EAAM1yB,KAAK,GAEXmkD,GAAc1uC,WAAWwO,EAAQpqB,OAEjCynD,EACEttD,EACAowD,EAHF/vB,GAvFO,IA4FLnR,EA5FK,IA8FLsP,GACA,EACA,CAAC,IAAK,IAAK,KACXE,OAIJA,EAAQ,IACF1yB,KAAK,GACX0yB,EAAM1yB,KAAK,GAGXshD,EACEttD,EACAowD,EAHF/vB,GAzGS,IA8GP,CAAChL,IAAa7lB,GAAMygD,YAAa3jC,YAAa6jC,EAAY,EAAG3gD,IA9GtD,IAgHPgvB,GACA,EACA,CAAC,IAAK,IAAK,KACXE,GAGF4uB,EACEttD,EACAowD,EAHF/vB,GArHS,IA0HP,CACEhL,IAAa7lB,GAAM8gD,UACnBhkC,YAAayjC,EAAcI,EAAY,EAAG3gD,IA5HrC,IA+HPgvB,GACA,EACA,CAAC,IAAK,IAAK,KACXE,GAIF2B,GAAgB,MAChBusB,EAAgB5sD,EAAKwP,GACrBxP,EAAIm/B,KAAK9J,IAAa7lB,GAAM+gD,MAAO92B,YA3RpB,KA2RsCA,YAAO4G,IAC5D0sB,EAAgB/sD,GAEhBqgC,GAAgB,KAChBstB,EAAYt4B,IAAa7lB,GAAMghD,MAC/BxD,EAAWhtD,EAAK2tD,EAhSD,IAgSsBttB,EAjSrB,GAoShB7B,EAAS,EADT0xB,EAnSgB,GAqSD,EAAI,GACjBA,EAAa,EAAI,GACjBA,EAAa,EAAI,GACjBA,EAAa,EAAI,KAEN,OAAT1gD,IACFgvB,EAAS,CACP0xB,EAAa,EAAI,IACjBA,EAAa,EAAI,IACjBA,EAAa,EAAI,IACjBA,EAAa,EAAI,MAGrB7vB,GAhTiB,MAgTS,OAAT7wB,EAAgB,IAAM,KACvC0f,EAAS,CACPmG,IAAa7lB,GAAMihD,YACnBp7B,IAAa7lB,GAAMkhD,YACnBr7B,IAAa7lB,GAAMmhD,YACnBt7B,IAAa7lB,GAAMohD,aAErB,IAAMzC,EAAUhB,EACdntD,EAzTa,IA2TbqgC,EACAnR,EAzKO,IA2KPsP,GAIF8uB,EACEttD,EAnUa,IAgUfqgC,EAAQA,EA7KC,IA6KgB8tB,EAMvB,CACE94B,IAAa7lB,GAAMi5C,YACnBj0B,EAAeq8B,wBAAwB7I,KACvC17B,YACEkI,EAAeuzB,kBAAkBC,KACjC,EACAx4C,GAEF8c,YACEkI,EAAew0B,qBAAqBhB,KACpC,EACAx4C,IA9LG,IAkMPgvB,GACA,EACA,CAAC,IAAK,IAAK,KACXE,GAGF4uB,EACEttD,EA5Va,IA0VfqgC,GAvMS,IA4MP,CACEhL,IAAa7lB,GAAMk5C,YACnBl0B,EAAeq8B,wBAAwB5I,KACvC37B,YACEkI,EAAeuzB,kBAAkBE,KACjC,EACAz4C,GAEF8c,YACEkI,EAAew0B,qBAAqBf,KACpC,EACAz4C,IAvNG,IA4NPgvB,GACA,EACA,CAAC,IAAK,IAAK,KACXE,GAGF4uB,EACEttD,EAtXa,IAoXfqgC,GAjOS,IAsOP,CACEhL,IAAa7lB,GAAMm5C,YACnBn0B,EAAeq8B,wBAAwB3I,KACvC57B,YACEkI,EAAeuzB,kBAAkBG,KACjC,EACA14C,GAEF8c,YACEkI,EAAew0B,qBAAqBd,KACpC,EACA14C,IAjPG,IAsPPgvB,GACA,EACA,CAAC,IAAK,IAAK,KACXE,GAGF4uB,EACEttD,EAhZa,IA8YfqgC,GA3PS,IAgQP,CACEhL,IAAa7lB,GAAMo5C,YACnBp0B,EAAeq8B,wBAAwB1I,KACvC77B,YACEkI,EAAeuzB,kBAAkBI,KACjC,EACA34C,GAEF8c,YACEkI,EAAew0B,qBAAqBb,KACpC,EACA34C,IA3QG,IA+QPgvB,GACA,EACA,CAAC,IAAK,IAAK,KACXE,GAGF4uB,EACEttD,EAzaa,IAuafqgC,GApRS,IAyRP,CACEhL,IAAa7lB,GAAMq5C,YACnBr0B,EAAeq8B,wBAAwBzI,KACvC97B,YACEkI,EAAeuzB,kBAAkBK,KACjC,EACA54C,GAEF8c,YACEkI,EAAew0B,qBAAqBZ,KACpC,EACA54C,IApSG,IAwSPgvB,GACA,EACA,CAAC,IAAK,IAAK,KACXE,GAGF4uB,EACEttD,EAlca,IAgcfqgC,GA7SS,IAkTP,CACEhL,IAAa7lB,GAAMs5C,YACnBt0B,EAAeq8B,wBAAwBxI,KACvC/7B,YACEkI,EAAeuzB,kBAAkBM,KACjC,EACA74C,GAEF8c,YACEkI,EAAew0B,qBAAqBX,KACpC,EACA74C,IA7TG,IAiUPgvB,GACA,EACA,CAAC,IAAK,IAAK,KACXE,GAGFF,EAAS,CACP0xB,EAAa,GAAc,OAAT1gD,EAAgB,GAAM,IAAO0gD,EAAa,EAAI,GAChEA,EAAa,GAAc,OAAT1gD,EAAgB,IAAO,IACzC0gD,EAAa,GAAc,OAAT1gD,EAAgB,IAAO,MAG3C89C,EACEttD,EAjea,IA+dfqgC,GA5US,IAiVP,CACEhL,IAAa7lB,GAAMshD,YACnBxkC,YAAakI,EAAeuB,uBAAwB,EAAGvmB,GACvD8c,YAAakI,EAAe2B,0BAA2B,EAAG3mB,IApVrD,IAuVPgvB,GACA,EACA,CAAC,IAAK,IAAK,KACXE,GAGF2B,GAAgB,MAChBstB,EAAYt4B,IAAa7lB,GAAMuhD,MAC/BlE,EAAQ7sD,EAAK2tD,EAlfE,IAkfmBttB,EAnflB,GAofhBA,GAlfiB,MAkfS,OAAT7wB,EAAgB,IAAM,IACvCm+C,EAAYt4B,IAAa7lB,GAAMwhD,MAC/BnE,EAAQ7sD,EAAK2tD,EArfE,IAqfmBttB,EAtflB,GAyfhBrgC,EAAIw/B,mBAAmBD,EAAcE,EAAYC,GAIjD/c,EACEA,GACA3iB,EAAI26B,eAAejhC,KArfL,IAqfuConB,GAAO,EAAOM,GAErEif,EAAQ,MACRusB,EAAgB5sD,EAAKwP,GACrBxP,EAAIm/B,KAAK9J,IAAa7lB,GAAMmE,KAAM8lB,YAlgBnB,KAkgBqCA,YAAO4G,IAC3D0sB,EAAgB/sD,GAEhBqgC,GAAgB,KAChBstB,EAAYt4B,IAAa7lB,GAAMoE,MAC/Bo5C,EAAWhtD,EAAK2tD,EAvgBD,IAugBsBttB,EAxgBrB,GA0gBhBA,GAAgB,MAChBrgC,EAAI+6B,SACF,eACAtB,YA5gBa,KA6gBbA,YAAO4G,GACP5G,YA/gBc,GAghBdA,YAAO,OAGT4G,GAAgB,MAChBstB,EAAYt4B,IAAa7lB,GAAMyhD,MAAQthD,EAAM8gB,GAAK,IAClDo8B,EAAQ7sD,EAAK2tD,EAphBE,IAohBmBttB,EArhBlB,GAuhBhBA,GAAgB,IArhBC,KAshBjBstB,EAAYt4B,IAAa7lB,GAAM0hD,MAC5B5qC,QACC,KACAgG,YAAakI,EAAeuB,uBAAwB,EAAGvmB,IAExD8W,QACC,KACAgG,YAAakI,EAAe2B,0BAA2B,EAAG3mB,IAE9DxP,EAAImxD,SAhiBW,IAgiBQ9wB,EAAQ,GAAKC,IAAiB,IAAY,CAC/D,IACA,IACA,MAEF0sB,EAAWhtD,EAAK2tD,EAAWvtB,IAAgBC,EAtiB3B,GAwiBhBA,GAAgB,EAtiBC,KAuiBjBrgC,EAAI+6B,SACF,mBACAtB,YAAO2G,IACP3G,YAAO4G,GACP5G,YAAO,KACPA,YAAQ,OAGVz5B,EAAI+6B,SACF,oBACAtB,YAAO2G,MACP3G,YAAO4G,GACP5G,YAAO,KACPA,YAAQ,OAIVz5B,EAAIw/B,mBAAmBD,EAAcE,EAAYC,GAKjD/c,EACEA,GACA3iB,EAAI26B,eAAejhC,KAvjBL,IAujBuConB,GAAO,EAAOM,GAErEif,EAAQ,MACRusB,EAAgB5sD,EAAKwP,GACrBxP,EAAIm/B,KAAK9J,IAAa7lB,GAAM8E,KAAMmlB,YApkBnB,KAokBqCA,YAAO4G,IAC3D0sB,EAAgB/sD,GAEhB4vD,EAAQ,GACRv6B,IAAa7lB,GAAM4hD,cAAcrjB,KAAI,SAAC/L,GAAD,OAAU4tB,EAAM5jD,KAAKg2B,MAG1D3B,GAAgB,KAChBstB,EAAYiC,EAAM,GAClB5C,EAAWhtD,EAAK2tD,EA7kBD,IA6kBsBttB,EA9kBrB,GAglBhBA,GAAgB,KAChBstB,EAAYiC,EAAM,GAClB5C,EAAWhtD,EAAK2tD,EAjlBD,IAilBsBttB,EAllBrB,GAolBhBA,GAAgB,IAChBstB,EAAYiC,EAAM,GAClB3C,EACEjtD,EACA,KAvlBa,IAEF,IAulBXqgC,EA1mBwB,IA6mB1B2sB,EAAWhtD,EAAK2tD,EAAWvtB,MAAyBC,EA7lBpC,GA+lBhBA,GAAgB,IA7lBC,KA8lBjBstB,EAAYiC,EAAM,GAClB3C,EACEjtD,EACA,KAlmBa,IAEF,IAkmBXqgC,EArnBwB,IAwnB1B2sB,EAAWhtD,EAAK2tD,EAAWvtB,MAAyBC,EAxmBpC,GA0mBhBA,GAAgB,IAxmBC,KAymBjBstB,EAAYiC,EAAM,GAClB3C,EACEjtD,EACA,KA7mBa,IAEF,IA6mBXqgC,EAhoBwB,IAmoB1B2sB,EAAWhtD,EAAK2tD,EAAWvtB,MAAyBC,EAnnBpC,GAqnBhBA,GAnnBiB,MAmnBS,OAAT7wB,EAAgB,IAAM,KACvCm+C,EAAYiC,EAAM,GAClB3C,EACEjtD,EACA,KAxnBa,IAEF,IAwnBXqgC,EA3oBwB,IA8oB1B2sB,EAAWhtD,EAAK2tD,EAAWvtB,MAAyBC,EA9nBpC,GAgoBhBA,GAAgB,KAChBstB,EAAYiC,EAAM,GAClB5C,EAAWhtD,EAAK2tD,EAjoBD,IAioBsBttB,EAloBrB,GAooBhBA,GAAgB,IAloBC,KAmoBjBstB,EAAYiC,EAAM,GAClB3C,EACEjtD,EACA,KAvoBa,IAEF,IAuoBXqgC,EA1pBwB,IA6pB1B2sB,EAAWhtD,EAAK2tD,EAAWvtB,MAAyBC,EA7oBpC,GA+oBhBA,GAAgB,IAChBstB,EAAYiC,EAAM,GAClB3C,EACEjtD,EACA,KAlpBa,IAEF,IAkpBXqgC,EArqBwB,IAwqB1B2sB,EAAWhtD,EAAK2tD,EAAWvtB,MAAyBC,EAxpBpC,GA0pBhBA,GAAgB,EAxpBC,KAypBjBstB,EAAYiC,EAAM,GAClB3C,EACEjtD,EACA,KA7pBa,IAEF,IA6pBXqgC,EAhrBwB,IAmrB1B2sB,EAAWhtD,EAAK2tD,EAAWvtB,MAAyBC,EAnqBpC,GAqqBhBA,GAAgB,KAChBstB,EAAYiC,EAAM,IAClB3C,EACEjtD,EACA,KAxqBa,IAEF,IAwqBXqgC,EA3rBwB,IA8rB1B2sB,EAAWhtD,EAAK2tD,EAAWvtB,MAAyBC,EA9qBpC,GAgrBhBA,GAAgB,EA9qBC,KA+qBjBstB,EAAYt4B,IAAa7lB,GAAM6hD,SAG/BrxD,EAAImxD,SAnrBW,IAmrBQ9wB,EAAQ,GAAKC,IAAiB,IAAY,CAC/D,IACA,IACA,MAEF0sB,EAAWhtD,EAAK2tD,EAAWvtB,IAAgBC,EAzrB3B,GA4rBhBrgC,EAAIw/B,mBAAmBD,EAAcE,EAAYC,GAKjD/c,EACEA,GACA3iB,EAAI26B,eAAejhC,KAzrBL,IAyrBuConB,GAAO,EAAOM,GAErEif,EAAQ,MACRusB,EAAgB5sD,EAAKwP,GACrBxP,EAAIm/B,KAAK9J,IAAa7lB,GAAMyF,KAAMwkB,YAtsBnB,KAssBqCA,YAAO4G,IAC3D0sB,EAAgB/sD,GAEhB4vD,EAAQ,GACRv6B,IAAa7lB,GAAM8hD,eAAevjB,KAAI,SAAC/L,GAAD,OAAU4tB,EAAM5jD,KAAKg2B,MAG3D3B,GAAgB,KAChBstB,EAAYiC,EAAM,GAClB5C,EAAWhtD,EAAK2tD,EA/sBD,IA+sBsBttB,EAhtBrB,GAktBhBA,GAAgB,IAChBstB,EAAYiC,EAAM,GAClB5C,EAAWhtD,EAAK2tD,EAntBD,IAmtBsBttB,EAptBrB,GAstBhBA,GAAgB,KAChBstB,EAAYiC,EAAM,GAClB3C,EACEjtD,EACA,KAztBa,IAEF,IAytBXqgC,EA5uBwB,IA+uB1B2sB,EAAWhtD,EAAK2tD,EAAWvtB,MAAyBC,EA/tBpC,GAiuBhBA,GAAgB,MAChBstB,EAAYiC,EAAM,GAClB3C,EACEjtD,EACA,KApuBa,IAEF,IAouBXqgC,EAvvBwB,IA0vB1B2sB,EAAWhtD,EAAK2tD,EAAWvtB,MAAyBC,EA1uBpC,GA4uBhBA,GAAgB,MAChBstB,EAAYiC,EAAM,GAClB3C,EACEjtD,EACA,KA/uBa,IAEF,IA+uBXqgC,EAlwBwB,IAqwB1B2sB,EAAWhtD,EAAK2tD,EAAWvtB,MAAyBC,EArvBpC,GAuvBhBA,GAAgB,KAChBstB,EAAYiC,EAAM,GAClB5C,EAAWhtD,EAAK2tD,EAxvBD,IAwvBsBttB,EAzvBrB,GA2vBhBA,GAAgB,EAzvBC,KA0vBjBstB,EAAYiC,EAAM,GAClB5C,EAAWhtD,EAAK2tD,EA5vBD,IA4vBsBttB,EA7vBrB,GAqxBhB1d,EACEA,GACA3iB,EAAI26B,eAAejhC,KA7wBL,IA6wBuConB,GAAO,EAAOM,GAErEif,GAAgB,MAChBusB,EAAgB5sD,EAAKwP,GACrBxP,EAAIm/B,KAAK9J,IAAa7lB,GAAMiG,KAAMgkB,YA1xBnB,KA0xBqCA,YAAO4G,IAC3D0sB,EAAgB/sD,GAEhBqgC,GAAgB,KAChBstB,EAAYt4B,IAAa7lB,GAAM+hD,MAC/BvxD,EAAIw8B,cACFmxB,EACAl0B,YAjyBa,KAkyBbA,YAAO4G,GACP5G,YApyBc,IAwyBhBz5B,EAAI2/B,OAAOtK,IAAa7lB,GAAMyH,UAM9B,IAAMwZ,EAAK9gB,EAAM8gB,GAEjB+8B,EACExtD,EACA2P,EAAMkiC,cACNphB,EACA2P,EACA,KArzBc,EAszBd5wB,GACA,EACA,YACA,EAx0Be,GA60BfihB,EAfa,EA3zBY,IA20BzBA,EAhBa,EAgBG,GAEhB+8B,EACExtD,EACA2P,EAAMkiC,cACNphB,EACA2P,EACA,KAt0BY,EAu0BZ5wB,GACA,EACA,YAr1BuB,GAHV,GA41BRihB,EA9BM,EA8BU,KACvB+8B,EACExtD,EACA2P,EAAMkiC,cACNphB,EACA2P,EACA,KAn1BY,EAo1BZ5wB,GACA,EACA,YAl2BuB,GAHV,GAy2Bfg+C,EACExtD,EACA2P,EAAMkiC,cACNphB,EACA2P,EACA,KA/1BY,EAg2BZ5wB,GACA,EACA,YACA,GAl3Ba,IAs3BjB,IAAK,IAAI4c,EAAI,EAAGA,EAAIzc,EAAM4kB,iBAAiBjoB,SAAU8f,EACnDohC,EACExtD,EACA2P,EAAM4kB,iBAAiBnI,GAAGuJ,KAC1BlF,EA12BW,IADC,EA82BZjhB,GACA,EACA,WACA,EA/3Bc,GAo4BlBxP,EAAIw/B,mBAAmBD,EAAcE,EAAYC,GAKjD/c,EACEA,GACA3iB,EAAI26B,eAAejhC,KAn3BL,IAm3BuConB,GAAO,EAAOM,GAErEif,EAAQ,MACRusB,EAAgB5sD,EAAKwP,GACrBxP,EAAIm/B,KAAK9J,IAAa7lB,GAAMuH,KAAM0iB,YAh4BnB,KAg4BqCA,YAAO4G,IAC3D0sB,EAAgB/sD,GAEhBqgC,GAAgB,KAChB2sB,EAAWhtD,EAAKq1B,IAAa7lB,GAAMwH,MAp4BpB,IAo4BqCqpB,EAr4BpC,GAs4BhBA,GAp4BiB,MAo4BS,OAAT7wB,EAAgB,EAAI,GACrCw9C,EAAWhtD,EAAKq1B,IAAa7lB,GAAMgiD,MAt4BpB,IAs4BqCnxB,EAv4BpC,GA24BhB,IAAIhnB,EAAOrZ,EAAI29B,cAEA,IAAXhb,GAAkBsvB,MAAa,OAAPziC,EAAY,kBAAkB,2BAG1DxP,EAAIg9B,KAAK,eAGX,MAAOtC,KG/1BI+2B,CAAkB,EAAK9hD,MAAO,EAAK6kB,iBA7C7B,EAwDnBk9B,QAAU,WACR,IAAIC,EAAWpqC,OAAOpX,KAAK,GAAI,SAgB/B,OAdAwhD,EAAS9tC,SAAS+tC,MAChB,sBAAwB/tC,SAAS/S,MAAQ,YAE3C6gD,EAAS9tC,SAAS+tC,MAAM,kBACxBD,EAAS9tC,SAAS+tC,MAAM,mCACxBD,EAAS9tC,SAAS+tC,MAAM/tC,SAASC,eAAe,gBAAgB+tC,WAChEF,EAAS9tC,SAAS+tC,MAAM,kBAExBD,EAAS9tC,SAASiuC,QAClBH,EAASI,QAETJ,EAASzxD,QACTyxD,EAASG,SAEF,GAvEP,EAAK5hD,MAAQ,CACXqgC,SAAS,EACTzU,WAAW,EACXhb,MAAO,EAAKnR,MAAMlE,UAAUqB,cAAc,GAAGkkB,YAAYlQ,MACzDI,UAAW,GACX8wC,WAAY,GAEd,EAAKx9B,eAAiB,KATL,EADrB,6DAkCE,SAA0BlkB,GACxBC,KAAKH,SAAS,CAAE0rB,WAAW,MAnC/B,oBAqFE,WACEvrB,KAAKikB,eAAiBiyB,YAAwBl2C,KAAKZ,OAEnDY,KAAKqtB,OAAS6H,YAAgBl1B,KAAKZ,OACnC,IAAMsiD,EAAgB,CAAE5C,SAAU,SAAUnxC,MAAO,OAAQg0C,UAAW,QAGhE1iD,EAAOe,KAAKZ,MAAMlE,UAAUqB,cAAc,GAAGyC,SAC7CkhB,EAAKlgB,KAAKZ,MAAM8gB,GAChB1vB,EAAUwP,KAAKZ,MAAMlE,UAAUQ,QAEjCkmD,EACF5hD,KAAKikB,eAAesyB,kBAAkBx6C,OAAS,EAM3C8lD,EACJrxD,EAAQuL,OAAS,EACbmf,KAAK7E,IAAI7lB,EAAQ5H,MAAcsL,IAAK1D,EAAQ7H,MAAcuL,KAC1D1D,EAAQ7H,MAAcuL,IAIxBisB,EAASF,YAAWzvB,EAAS0vB,GAG7B4hC,EAAK,EACLC,EAAK,EACLC,EAAK,EAGLxC,EAAc,EACdI,EAAa,EACjB,QAAgDp/C,IAA5CR,KAAKikB,eAAeg+B,iBAAiB,GACvC,OAAO,kBAAC,IAAD,CAAQl1D,KAAK,WAAWse,MAAM,QAAQwC,OAAQ,GAAIF,MAAO,KAKJ,OAA5D3N,KAAKZ,MAAMlE,UAAUqB,cAAc,GAAGkkB,YAAYlQ,OAClDvQ,KAAKZ,MAAMlE,UAAUqB,cAAc,GAAGkkB,YAAY7P,SAFpD,IAIIiL,EAAI,EAEFmZ,EAAO3O,YAAsBrmB,KAAKZ,MAAMlE,UAAW8E,KAAKZ,MAAMmS,YAAYvR,KAAKZ,MAAM2R,aACrF4V,EAAQqO,EAAOrO,QACfC,EAAWoO,EAAOpO,WAGxB,OACE,yBAAKlnB,GAAG,gBACN,2BACEY,UAAU,mBACVJ,MAAO,CAELuN,UAAW,QACP8vB,YAAa,MACb0U,aAAc,MACd7xC,MAAO,SAEbC,QAASL,KAAKm/C,MACdpyD,KAAK,SACLuI,MAAO7I,IAAawS,GAAMxP,MAE5B,yBAAKyQ,MAAO,CAAEyN,MAAO,OAAQvN,MAAO,OAAQ6T,MAAO,SAI/C,2BACE3T,UAAU,mBACVJ,MAAO,CAELuN,UAAW,OACX8vB,YAAa,MACb0U,aAAc,MACd7xC,MAAO,SAETC,QAASL,KAAKg/C,MACdjyD,KAAK,SACLuI,MAAOjF,KAAO4O,GAAM3O,YACnB,yBAAK4P,MAAO,CACVoZ,WAAY,OACZlZ,MAAO,UACN,kBAAC4nB,EAAA,EAAD,CAAMvnB,SAAUkO,YAAiB1P,OA0C3C,yBAAKqB,UAAU,eAGb,4BAEC00B,EAAOnO,YAELmO,EAAOlO,OAPZ,aAsCE,wBAAIxmB,UAAU,QAAQwkB,IAAa7lB,GAAMmC,MACzC,wBAAId,UAAU,QACXwkB,IAAa7lB,GAAMoC,MADtB,IAC8BrB,KAAKqtB,OAAOv+B,YACxC,6BACCg2B,IAAa7lB,GAAMqC,MAHtB,IAG8BtB,KAAKqtB,OAAOx+B,WACxC,6BACCi2B,IAAa7lB,GAAMsC,MALtB,IAK8BvB,KAAKqtB,OAAO8H,WACxC,6BACCrQ,IAAa7lB,GAAMuC,MAPtB,IAO8BxB,KAAKqtB,OAAOz+B,SACxC,8BAEF,wBAAI0R,UAAU,SAEbsmB,EAGD,yBAAK1mB,MAAOwhD,GACX/6B,EAiBC,6BACA,wBAAIrmB,UAAU,QAAQwkB,IAAa7lB,GAAMmgD,MAExCt6B,IAAa7lB,GAAMqgD,cAAc9hB,KAAI,SAAC/L,GAAD,OACpC,uBAAGnxB,UAAU,OAAOyZ,IAAK+nC,KACtBA,GAAM,GAAY,IAAPA,GAAmB,IAAPA,GAAYA,GAAM,IACxC,0BACE5hD,MAAO,CACLwS,YAAa,OACbu/B,aAAc,MACd5mC,MAAO,UACPlL,SAAU,OACV+hD,WAAY,WANhB,UAYC,IACFzwB,EACD,kCAML7K,EAED,yBAAK1mB,MAAOwhD,GACX/6B,EAgBC,6BACA,wBAAIrmB,UAAU,QAAQwkB,IAAa7lB,GAAM6D,MACzC,uBAAGxC,UAAU,QAAQwkB,IAAa7lB,GAAM+D,OAExC,yBAAK9C,MAAO,CAAEC,SAAU,SACtB,yBAAKD,MAAO,CAAEwS,YAAa,OAAQ/E,MAAO,MAAOvN,MAAO,SACtD,6BACE,2BACEE,UAAU,UACVJ,MAAO,CAAEwS,YAAa,OAAQ/E,MAAO,SAErC,+BACE,4BACE,wBAAIrN,UAAU,eAAe6hD,QAAQ,KAClCr9B,IAAa7lB,GAAMiE,UAIvBlD,KAAKqtB,OAAO38B,OAAO8sC,KAAI,SAAC/L,GAEvB,OADA+tB,GAAe/tB,EAAKn8B,MAElB,wBAAIykB,IAAK0X,EAAK5kC,MACZ,wBAAIqT,MAAO,CAAE2N,OAAQ,MAAOF,MAAO,QAChC8jB,EAAK5kC,KACL4kC,EAAK5kC,OAAS+J,IAAOS,aAAa/B,MAAM2J,IACzCwyB,EAAKn8B,MAAQ,EACT,KACA,IAEN,wBACEgL,UAAU,iBACVJ,MAAO,CAAE2N,OAAQ,QAGhBkO,YAAa0V,EAAKn8B,MAAO,EAAG2J,QAKrC,wBACE8a,IAAK,cACL7Z,MAAO,CACL2N,OAAQ,MACRF,MAAO,MACPwY,gBAAiB,UACjBi8B,UAAW,UAGb,4BAAKt9B,IAAa7lB,GAAMygD,aACxB,wBACEp/C,UAAU,iBACVJ,MAAO,CAAE2N,OAAQ,QAGhBkO,YAAayjC,EAAa,EAAGvgD,OAKL,KAAhCe,KAAKqtB,OAAO8J,iBACX,uBACE72B,UAAU,OACVJ,MAAO,CACLmL,MAAO,WACPoC,UAAW,MACXD,WAAY,QACZrN,SAAU,OACVC,MAAO,SAGRJ,KAAKqtB,OAAO8J,mBAKrB,yBAAKj3B,MAAO,CAAEwS,YAAa,OAAQ/E,MAAO,MAAOvN,MAAO,SACtD,6BACE,2BACEE,UAAU,UACVJ,MAAO,CAAEwS,YAAa,OAAQ/E,MAAO,SAErC,+BACE,4BACE,wBAAIrN,UAAU,eAAe6hD,QAAQ,KAClCr9B,IAAa7lB,GAAM6gD,WAIvB9/C,KAAKqtB,OAAO18B,YAAY6sC,KAAI,SAAC/L,GAE5B,OADAmuB,GAAcnuB,EAAKn8B,MAEjB,wBAAIykB,IAAK0X,EAAK5kC,MACZ,wBAAIqT,MAAO,CAAEyN,MAAO,QAAU8jB,EAAK5kC,MACnC,wBAAIyT,UAAU,kBAEXyb,YAAa0V,EAAKn8B,MAAO,EAAG2J,QAKrC,wBACE8a,IAAK,aACL7Z,MAAO,CACL2N,OAAQ,MACRF,MAAO,MACPwY,gBAAiB,UACjBi8B,UAAW,UAGb,4BAAKt9B,IAAa7lB,GAAMygD,aACxB,wBACEp/C,UAAU,iBACVJ,MAAO,CAAE2N,OAAQ,QAGhBkO,YAAa6jC,EAAY,EAAG3gD,KAGjC,wBACE8a,IAAK,WACL7Z,MAAO,CACL2N,OAAQ,MACRF,MAAO,MACPwY,gBAAiB,UACjBi8B,UAAW,UAGb,4BAAKt9B,IAAa7lB,GAAM8gD,WACxB,wBACEz/C,UAAU,iBACVJ,MAAO,CAAE2N,OAAQ,QAGhBkO,YAAayjC,EAAcI,EAAY,EAAG3gD,WAS3D,wBAAIqB,UAAU,QAAQwkB,IAAa7lB,GAAM+gD,OACzC,uBAAG1/C,UAAU,QAAQwkB,IAAa7lB,GAAMghD,OACxC,uBAAG3/C,UAAU,QAAQwkB,IAAa7lB,GAAMojD,OAExC,yBACEniD,MAAO,CACLqnB,WAAY,0CACZpnB,SAAU,SAGZ,yBAAKD,MAAO,CAAEwS,YAAa,OAAQ/E,MAAO,MAAOvN,MAAO,SACtD,6BACE,2BACEE,UAAU,UACVJ,MAAO,CAAEwS,YAAa,OAAQ/E,MAAO,SAErC,+BACE,4BACE,wBAAIrN,UAAU,eAAeJ,MAAO,CAAEyN,MAAO,QAC1CmX,IAAa7lB,GAAMihD,aAEtB,wBAAI5/C,UAAU,eAAeJ,MAAO,CAAEyN,MAAO,QAC1CmX,IAAa7lB,GAAMkhD,aAEtB,wBAAI7/C,UAAU,eAAeJ,MAAO,CAAEyN,MAAO,QAC1CmX,IAAa7lB,GAAMmhD,aAEtB,wBAAI9/C,UAAU,eAAeJ,MAAO,CAAEyN,MAAO,QAC1CmX,IAAa7lB,GAAMohD,cAGxB,4BACE,4BAAKv7B,IAAa7lB,GAAMi5C,aACxB,wBAAI53C,UAAU,kBAEVN,KAAKikB,eAAeq8B,wBAClB7I,MAIN,wBAAIn3C,UAAU,kBAQXyb,YACC/b,KAAKikB,eAAeuzB,kBAClBC,KAEF,EACAx4C,IAGJ,wBAAIqB,UAAU,kBAUXyb,YACC/b,KAAKikB,eAAew0B,qBAClBhB,KAEF,EACAx4C,KAIN,4BACE,4BAAK6lB,IAAa7lB,GAAMk5C,aACxB,wBAAI73C,UAAU,kBAEVN,KAAKikB,eAAeq8B,wBAClB5I,MAIN,wBAAIp3C,UAAU,kBAQXyb,YACC/b,KAAKikB,eAAeuzB,kBAClBE,KAEF,EACAz4C,IAGJ,wBAAIqB,UAAU,kBAQXyb,YACC/b,KAAKikB,eAAew0B,qBAClBf,KAEF,EACAz4C,KAIN,4BACE,4BAAK6lB,IAAa7lB,GAAMm5C,aACxB,wBAAI93C,UAAU,kBAEVN,KAAKikB,eAAeq8B,wBAClB3I,MAIN,wBAAIr3C,UAAU,kBAQXyb,YACC/b,KAAKikB,eAAeuzB,kBAClBG,KAEF,EACA14C,IAGJ,wBAAIqB,UAAU,kBAQXyb,YACC/b,KAAKikB,eAAew0B,qBAClBd,KAEF,EACA14C,KAIN,4BACE,4BAAK6lB,IAAa7lB,GAAMo5C,aACxB,wBAAI/3C,UAAU,kBAEVN,KAAKikB,eAAeq8B,wBAClB1I,MAIN,wBAAIt3C,UAAU,kBAQXyb,YACC/b,KAAKikB,eAAeuzB,kBAClBI,KAEF,EACA34C,IAGJ,wBAAIqB,UAAU,kBAQXyb,YACC/b,KAAKikB,eAAew0B,qBAClBb,KAEF,EACA34C,KAIN,4BACE,4BAAK6lB,IAAa7lB,GAAMq5C,aACxB,wBAAIh4C,UAAU,kBAEVN,KAAKikB,eAAeq8B,wBAClBzI,MAIN,wBAAIv3C,UAAU,kBAQXyb,YACC/b,KAAKikB,eAAeuzB,kBAClBK,KAEF,EACA54C,IAGJ,wBAAIqB,UAAU,kBAQXyb,YACC/b,KAAKikB,eAAew0B,qBAClBZ,KAEF,EACA54C,KAIN,4BACE,4BAAK6lB,IAAa7lB,GAAMs5C,aACxB,wBAAIj4C,UAAU,kBAEVN,KAAKikB,eAAeq8B,wBAClBxI,MAIN,wBAAIx3C,UAAU,kBAQXyb,YACC/b,KAAKikB,eAAeuzB,kBAClBM,KAEF,EACA74C,IAGJ,wBAAIqB,UAAU,kBAQXyb,YACC/b,KAAKikB,eAAew0B,qBAClBX,KAEF,EACA74C,KAIN,wBACEiB,MAAO,CAAEimB,gBAAiB,UAAWi8B,UAAW,UAEhD,wBAAID,QAAQ,KAAKr9B,IAAa7lB,GAAMshD,aACpC,wBAAIjgD,UAAU,kBAEXyb,YACC/b,KAAKikB,eAAeuB,uBACpB,EACAvmB,IAGJ,wBAAIqB,UAAU,kBAEXyb,YACC/b,KAAKikB,eAAe2B,0BACpB,EACA3mB,SAQd,uBACEqB,UAAU,OACVJ,MAAO,CACLmL,MAAO,WACPoC,UAAW,MACXtN,SAAU,OACVC,MAAO,SAGR0kB,IAAa7lB,GAAMuhD,MACpB,6BACC17B,IAAa7lB,GAAMwhD,QAIvB75B,EAGD,yBAAK1mB,MAAOwhD,GACX/6B,EAgBC,6BACA,wBAAIrmB,UAAU,QAAQwkB,IAAa7lB,GAAMmE,MACzC,uBAAG9C,UAAU,QAAQwkB,IAAa7lB,GAAMoE,SAI5B,IAAXu+C,GACC,kBAAC,EAAD,CACE5iD,SAAUC,EACVkhB,SAAUA,EACVm+B,yBAA0Bt+C,KAAKikB,eAAesyB,kBAC9Cr2B,GAAIA,IAKV,uBACE5f,UAAU,OACVJ,MAAO,CACLmL,MAAO,WACPoC,UAAW,QACXtN,SAAU,OACVC,MAAO,SAGR0kB,IAAa7lB,GAAMyhD,MAAQxgC,EAAK,KAGnC,uBACE5f,UAAU,OACVJ,MAAO,CACLimB,gBAAiB,YACjBxY,MAAO,MACPF,UAAW,OACX6L,WAAY,OACZizB,cAAe,OACf/+B,WAAY,SAGbsX,IAAa7lB,GAAM0hD,MACjB5qC,QACC,KACAgG,YACE/b,KAAKikB,eAAeuB,uBACpB,EACAvmB,IAGH8W,QACC,KACAgG,YACE/b,KAAKikB,eAAe2B,0BACpB,EACA3mB,KAKR,6BACE,kBAAC,EAAD,CACE4jB,cAAe7iB,KAAKZ,MAAMyjB,cAC1BvE,WAAYujC,EAAW3hC,EAAK,EAC5BsqB,oBAAqBxqC,KAAKZ,MAAMorC,oBAChCtvC,UAAW8E,KAAKZ,MAAMlE,UACtB8/B,WAAY7a,EACZ3T,QAASxM,KAAKZ,MAAMoN,QACpByR,QAASiC,EACTia,YAAaja,EACbga,cAAeha,EACf0pB,UAAW5pC,KAAK4pC,UAGhB1pB,GAAIlgB,KAAKZ,MAAM8gB,GACf8D,iBAAkBhkB,KAAKZ,MAAM4kB,iBAC7Bs+B,iBAAiB,KAOpB17B,EAID,yBAAK1mB,MAAOwhD,GACX/6B,EAgBC,6BACA,wBAAIrmB,UAAU,QAAQwkB,IAAa7lB,GAAM8E,MAExC+gB,IAAa7lB,GAAM4hD,cAAcrjB,KAAI,SAAC/L,GAAD,OACpC,uBAAGnxB,UAAU,OAAOyZ,IAAKgoC,KACtBA,GAAM,GAAY,IAAPA,GAAYA,GAAM,IAC5B,0BAAM7hD,MAAO,CAAEwS,YAAa,OAAQrH,MAAO,YACxC02C,EAAK,EAAIA,EAAK,EAAIA,EAAK,EAD1B,IAC8B,KAE7B,IACFtwB,EACD,iCAIJ,uBACEnxB,UAAU,OACVJ,MAAO,CACLimB,gBAAiB,YACjBxY,MAAO,MACPF,UAAW,OACX6L,WAAY,OACZizB,cAAe,OACf/+B,WAAY,SAGbsX,IAAa7lB,GAAM6hD,WAIvBl6B,EAID,yBACE1mB,MAAO,CAAEyhD,UAAW,SAAUY,UAAW,SAAU50C,MAAO,SAEzDgZ,EAiBD,6BACA,wBAAIrmB,UAAU,QAAQwkB,IAAa7lB,GAAMyF,MACxCogB,IAAa7lB,GAAM8hD,eAAevjB,KAAI,SAAC/L,GAAD,OACrC,uBAAGnxB,UAAU,OAAOyZ,IAAKioC,KACtBA,GAAM,GAAKA,GAAM,GAChB,0BAAM9hD,MAAO,CAAEwS,YAAa,OAAQrH,MAAO,YACxC22C,EAAK,EAAIA,EAAK,EAAIA,EAAK,EAD1B,IAC8B,KAE7B,IACFvwB,EACD,kCASL7K,EAID,yBAAK1mB,MAAOwhD,GACX/6B,EAgBC,6BACA,wBAAIrmB,UAAU,QAAQwkB,IAAa7lB,GAAMiG,MACzC,uBAAG5E,UAAU,QAAQwkB,IAAa7lB,GAAM+hD,QAK1C,yBAAK9gD,MAj6BgB,CAACyN,MAAO,SAk6B3B,6BACA,wBAAIrN,UAAU,QAAQwkB,IAAa7lB,GAAM6G,MAEzC,uBAAGxF,UAAU,QAAQwkB,IAAa7lB,GAAMq+C,OAExC,yBAAKp9C,MAAO,CAAEsN,WAAY,SACxB,kBAACwvB,EAAA,EAAD,CACEjqB,UAAW,EACXC,cAAe,CACb8R,IAAa7lB,GAAMujD,MACnB19B,IAAa7lB,GAAMwjD,OAErBxvC,SAAUjT,KAAKL,MAAM4rB,UAAY,EAAI,EACrCrY,kBAAmBlT,KAAKk/C,oBAG5B,yBACEx/C,GAAG,YACHQ,MAAO,CACL+T,MAAO,OACP7T,MAAO,OACPoN,WAAY,SAGbxN,KAAKL,MAAM4rB,WACVvrB,KAAKikB,eAAeg+B,iBAAiBzkB,KAAI,SAACpY,GAExC,OACE,kBAACi0B,EAAA,EAAD,CACEt/B,IAAK8B,IACLjR,cAAewa,EAAKxa,cACpBC,eAAgBua,EAAKva,eACrBH,UAAW0a,EAAK1a,UAChBiqC,UAAW,GACXC,WAAY10B,EAAK2hC,EACjB7iD,SAAUC,SAOrB2nB,EAID,yBAAK1mB,MAAOwhD,GACX/6B,EAgBC,6BACA,wBAAIrmB,UAAU,QAAQwkB,IAAa7lB,GAAMuH,MAEzC,uBAAGlG,UAAU,QAAQwkB,IAAa7lB,GAAMwH,OACxC,uBAAGnG,UAAU,QAAQwkB,IAAa7lB,GAAMgiD,OAEvCr6B,SAjkCb,GAA0CjmB,c,sNCM3B2rC,E,8EAAf,WAA4BltC,GAA5B,qBAAAG,EAAA,sEAGcH,EAAMktC,eAHpB,cAGExjC,EAHF,OAIQ45C,EAAa55C,EAAKg1B,WAAW/C,mBAAmB,GAAGrY,MACnDigC,EAAY75C,EAAKg1B,WAAW/C,mBAAmB,GAAGrY,MAClDkgC,EAAS95C,EAAKg1B,WAAW2D,eAAere,OAAOta,EAAK5N,UAAUQ,QAAQ,GAAGxH,IANjF,kBAQS,CAACwuD,aAAaA,EAAaC,YAAYA,EAAaC,SAASA,IARtE,4C,sBAWA,SAASC,EAAqBvtD,EAAM2J,GAClC,OAAO8b,YAAUzlB,EAAM2J,GAAM+W,W,4CAKxB,WAA+B5W,GAA/B,qGAAAG,EAAA,0DACD9P,EAAM,IAAI65B,KACV6B,SAQAkC,EAAS6H,YAAgB91B,GACvBH,EAAOG,EAAMlE,UAAUqB,cAAc,GAAGyC,SACxCwxB,EAAcrR,YAAuB7lB,KAAU+zB,EAAOz+B,UACxD0nC,EAAyB,OAAhB9F,EAAuBjlC,KAAoBC,KACpDu7C,EAA0B,OAAhBvW,EAAuBnlC,KAAgBC,KAC/CkF,EAAU4O,EAAMlE,UAAUQ,QACjB0D,EAAMlE,UAAUskB,OACzBgE,EAAexC,YAAexwB,GAC9BkzB,EAAkB9iB,IAAW3B,GAE7BmrC,EAAkD,IAAnChrC,EAAMlE,UAAUQ,QAAQK,OACvC+mD,EAAe1Y,EAAexpC,IAAW3B,GAAM6E,qBAAqBlD,IAAW3B,GAAM4E,mBACrFk/C,EAAkB3Y,EAAexpC,IAAW3B,GAAM8F,aAAanE,IAAW3B,GAAM6F,WAEhF6V,EAAuB,OAAT1b,EAAgB,IAAM,IACpCwc,EAAqB,OAATxc,EAAgB,IAAM,IACd,OAATA,EAIX+jD,EAAkB31B,EAAO6K,SAASn8B,OAAS,EAC3CsuB,EAAY,IAElB56B,EAAI88B,QAAQzD,IAAWE,KACV,OAAT/pB,EAAexP,EAAI+8B,YAAYpD,YAAO,KACrC35B,EAAI+8B,YAAYpD,YAAO,KAC5B35B,EAAIk9B,aAAa,GAAM,GAAM,IAC7Bl9B,EAAIm/B,KAhFiB,IAiFnBxvB,EAAMwqC,UACFv5C,KAAO4O,GAAM3O,UACbD,KAAO4O,GAAM1O,SACjB24B,YAAO,KACPA,YAAOmB,IAUH9Z,EAAQnR,EAAMlE,UAAUqB,cAAc,GAAGkkB,YACzC5P,EAAMzR,EAAMlE,UAAUqB,cAAc,GAAGkkB,YAAY5P,IACxCzR,EAAMlE,UAAUqB,cAAc,GAAGkkB,YAAY1qB,GAE7CqJ,EAAMlE,UAAUqB,cAAc,GAAGmkB,YAGlDtO,EAAO3iB,EAAI26B,eAAelhC,KAAYmhC,EAAW9Z,GAAO,EAAKM,GAG3DphB,EAAI85B,SACJtgC,KACAigC,YAAO,MACPA,YAAOmB,EAAY,IACnBnB,YAAO,MACPA,YAAO,OAKTz5B,EAAI88B,QAAQzD,IAAWE,KACvBv5B,EAAI+8B,YAAYpD,YAAO,KACvB35B,EAAIk9B,aAAa,GAAM,GAAM,IAC7Bl9B,EAAIm/B,KACFhuB,IAAW3B,GAAMoC,MAAQgsB,EAAOv+B,YAChCo6B,YAAO,MACPA,YAAOmB,EAAY,OAErB56B,EAAIm/B,KACFhuB,IAAW3B,GAAMqC,MAAQ+rB,EAAOx+B,WAChCq6B,YAAO,MACPA,YAAOmB,EAAY,OAErB56B,EAAIm/B,KACFhuB,IAAW3B,GAAMsC,MAAQ8rB,EAAO8H,WAChCjM,YAAO,MACPA,YAAOmB,EAAY,OAErB56B,EAAIm/B,KACFhuB,IAAW3B,GAAMuC,MAAQ6rB,EAAOz+B,SAChCs6B,YAAO,MACPA,YAAOmB,EAAY,OAKf2E,EAA+B,OAAhBze,EAAMA,MAAiB,EAAI,IAC1C0yC,EAAe,KACfC,EAAgB,IAEJzzD,EAAI0zD,iBAAmBn0B,EAGjCE,EAAatuB,IAAW3B,GAAMyH,SAC9ByoB,EAAavuB,IAAW3B,GAAMmC,KAEpC3R,EAAIw/B,mBAAmBD,EAAcE,EAAYC,GAEjD/c,EAAOA,GAAU3iB,EAAI26B,eAAejhC,KAAuBkhC,EAAW9Z,GAAM,EAAMM,GAElFphB,EAAI88B,QAAQzD,IAAWE,KACV,OAAT/pB,EAAexP,EAAI+8B,YAAYpD,YAAO,KACrC35B,EAAI+8B,YAAYpD,YAAO,KAC5B35B,EAAIk9B,aAAa,GAAM,GAAM,IAC7Bl9B,EAAIm/B,KACF58B,KAAYiN,GAAMhN,OAAO,GACzBi3B,YAAO,KACPA,YAAO8F,EAAei0B,IAGxBxzD,EAAI88B,QAAQxD,IAAOC,KACnBv5B,EAAI+8B,YAAYpD,YAAO,KACvB35B,EAAIk9B,aAAa,GAAM,GAAM,IAGzBxL,EAAI,IACJsI,EAAIuF,EAAek0B,EACnBE,EAAO,GAELC,GADFC,EAAY,KACmB,IAC/Bz1C,EAAS,IACP+R,EAAM4D,EACRE,EAAgB5hB,YAChB4hB,EAAgB7hB,SAChB8c,EAAS,CACXyrB,EAAcxpC,IAAW3B,GAAMyC,WAAWd,IAAW3B,GAAMwC,SAC3Db,IAAW3B,GAAM0C,SACjBf,IAAW3B,GAAM2C,SACjBge,EACAhf,IAAW3B,GAAM8C,UAEfgsB,EAAO,CAAC,IAAK,IAAK,KAClBC,EAAY,CAAC,IAAK,IAAK,KACvBC,EAAS,CAAC,IAAK,GAAK,GAAI,GAAG,IACrB,OAAPhvB,IAAagvB,EAAS,CAAC,EAAK,GAAK,IAAK,IAAI,MAC7Cx+B,EAAIq+B,SAASC,EAAMC,EAAW7M,EAAGsI,EAAG9K,EAAQ9Q,EAAQogB,GAGpDxE,GAAK25B,EAAK,GACVr1B,EAAO,CAAC,IAAK,IAAK,KAClBC,EAAY,CAAC,GAAM,GAAM,IACzBX,EAAO78B,QAAQivB,SAAQ,SAAUC,GAE/B,IAAM6jC,GAAKh5C,YAAuBnQ,KAAQslB,EAAQ0B,UAAWniB,GAAQ6kB,YAAQpE,EAAQ7yB,KAAKoS,IAAOlD,OACjG4iB,EAAS,CACP4kC,EAAI,GAAGh5C,YAAuBnQ,KAAQslB,EAAQ0B,UAAWniB,GAAOsL,YAAuBnQ,KAAQslB,EAAQ0B,UAAWniB,GAAQ6kB,YAAQpE,EAAQ7yB,KAAKoS,GAC/IygB,EAAQhzB,IAAIspB,WACZ6sC,EAAqBnjC,EAAQxxB,OAAO+Q,IAQnCukB,EACI9D,EAAQ0B,YAAchnB,KAAO1C,OAAOnC,IACnC,IACAmqB,EAAQmX,IAAInX,EAAQhzB,IACtBgzB,EAAQmX,KAAK7gB,YAChBxlB,EAAQkvB,EAAQhgB,GAAK,GAAGqhB,WAAa,KAAK/K,YAE7CvmB,EAAIq+B,SAASC,EAAMC,EAAW7M,EAAGsI,EAAG9K,EAAQ9Q,EAAQogB,GACpDxE,GAAK65B,EACFC,EAAI,KACL5kC,EAAQ,CACNmF,YAAQpE,EAAQ7yB,KAAKoS,GACrB,GACA,GACA,GACA,IAEFxP,EAAIq+B,SAASC,EAAMC,EAAW7M,EAAGsI,EAAG9K,EAAQ9Q,EAAQogB,GACpDxE,GAAK65B,MAMT7zD,EAAI88B,QAAQxD,IAAOC,KACnBv5B,EAAI+8B,YAAYpD,YAAO,KACvB35B,EAAIk9B,aAAa,GAAM,GAAM,IAE7BlD,GAAK65B,EAAU,IACfv1B,EAAO,CAAC,IAAK,IAAK,KAClBC,EAAY,CAAC,IAAK,IAAK,KACvBC,EAAS,CAAC,IAAK,KACX0B,EAAU,CAAC/uB,IAAW3B,GAAMoD,MAAO,IAEvC5S,EAAIq+B,SAASC,EAAMC,EAAW7M,EAAGsI,EAAGkG,EAAS9hB,EAAQogB,GAErDF,EAAO,CAAC,IAAK,IAAK,KAClBC,EAAY,CAAC,GAAM,GAAM,IACzB2B,EAAU,CACR/uB,IAAW3B,GAAMqD,MAEfugD,EAAqBx1B,EAAO0J,2BAA2B93B,IAU3DwqB,GAAK25B,EACL3zD,EAAIq+B,SAASC,EAAMC,EAAW7M,EAAGsI,EAAGkG,EAAS9hB,EAAQogB,GACrD0B,EAAU,CACR/uB,IAAW3B,GAAMsD,MAEfsgD,EAAqBx1B,EAAOqJ,6BAA6Bz3B,IAW7DwqB,GAAK65B,EACL7zD,EAAIq+B,SAASC,EAAMC,EAAW7M,EAAGsI,EAAGkG,EAAS9hB,EAAQogB,GACrD0B,EAAU/uB,IAAW3B,GAAMuD,MAC3BinB,GAAK65B,EACL7zD,EAAIigC,eAAe3B,EAAMC,EAAW7M,EAAE,IAAKsI,EAAGkG,EAAS9hB,EAAQogB,GAAO,GAEtE0B,EAEIkzB,EAAqBx1B,EAAO0J,2BAC1B1J,EAAOqJ,6BAA6Bz3B,GAW1C8uB,EAAO,CAAC,IAAK,IAAK,KAClBt+B,EAAIigC,eAAe3B,EAAMC,EAAW7M,EAAE,IAAKsI,EAAGkG,EAAS9hB,EAAQogB,GAAQ,GAGvEF,EAAO,CAAC,IAAK,IAAK,KACZy1B,EAAMX,EAAqBx1B,EAAO2J,oBAAoB3J,EAAOmI,MAAMv2B,GACnEu2B,EAAMqtB,EAAqBx1B,EAAOmI,MAAMv2B,GAC9C0wB,EAAU,CACR/uB,IAAW3B,GAAMwD,MAAMsT,QAAQ,MAAMyf,GAEnCguB,GAGJ/5B,GAAK45B,EACL5zD,EAAIq+B,SAASC,EAAMC,EAAW7M,EAAGsI,EAAGkG,EAAS9hB,EAAQogB,GAErD0B,EAAU,CACR/uB,IAAW3B,GAAMyD,MAEfmgD,EAAqBx1B,EAAOjQ,UAAYiQ,EAAOqJ,6BAA6Bz3B,IAWhFwqB,GAAK65B,EACL7zD,EAAIq+B,SAASC,EAAMC,EAAW7M,EAAGsI,EAAGkG,EAAS9hB,EAAQogB,GACrDx+B,EAAI28B,SAASlD,YAAO,KAAMA,YAAOO,EAAI25B,GAAOl6B,YAlT7B,MAqTfO,GAAK,IAAI25B,EACTzzB,EAAW/uB,IAAW3B,GAAM0D,OAASmhB,YAAQtzB,EAAQ,GAAGigC,KAAKxxB,GAAO,IACpExP,EAAIigC,eAAe3B,EAAMC,EAAW7M,EAAGsI,EAAGkG,EAAS9hB,EAAQ,CAvT5C,MAuTyD,GAEpE2V,IAEJmM,EAAU,CACR/uB,IAAW3B,GAAMkH,WAAa/G,EAAM8gB,GAAK,IACzC,IAEFuJ,GAAK45B,EACL5zD,EAAIq+B,SAASC,EAAMC,EAAW7M,EAAGsI,EAAGkG,EAAS9hB,EAAQogB,GAErD0B,EACEkzB,EAAqBx1B,EAAO9K,UAAUtjB,GAGxC8uB,EAAO,CAAC,IAAK,IAAK,KAClBt+B,EAAIigC,eAAe3B,EAAMC,EAAW7M,EAAE,IAAKsI,EAAGkG,EAAS9hB,EAAQogB,GAAQ,IAKvEF,EAAO,CAAC,IAAK,IAAK,KAElB4B,EAAU,CACRnM,EAAc5iB,IAAW3B,GAAMsH,cAAcwP,QAAQ,MAAM,IAAKnV,IAAW3B,GAAMmH,WAGjF,IAEFqjB,GAAK45B,EACL5zD,EAAIq+B,SAASC,EAAMC,EAAW7M,EAAGsI,EAAGkG,EAAS9hB,EAAQogB,GAErD0B,EACEkzB,EAAqBx1B,EAAO/K,WAAWrjB,GAEzC8uB,EAAO,CAAC,IAAK,IAAK,KAClBt+B,EAAIigC,eAAe3B,EAAMC,EAAW7M,EAAE,IAAKsI,EAAGkG,EAAS9hB,EAAQogB,GAAQ,GACvEF,EAAO,CAAC,IAAK,IAAK,KAGdvK,EA3UD,oCA6U6B8oB,EAAaltC,GA7U1C,SA6UOqkD,EA7UP,OA8UOf,EAAa7sC,YAAY4tC,EAAef,aAAczjD,GACtD0jD,EAAY9sC,YAAY4tC,EAAed,YAAa1jD,GACpD2jD,EAASa,EAAeb,SAC9BnzD,EAAI28B,SAASlD,YAAO,KAAMA,YAAOO,EAAI25B,GAAOl6B,YArWjC,MAwWXO,GAAK,IAAI25B,EACT3zD,EAAIq+B,SAASC,EAAMC,EAAW7M,EAAGsI,EAAG,CAAC7oB,IAAW3B,GAAM2D,QAASiL,EAAQogB,GAEvExE,GAAK,KAAK25B,EAEVzzB,EAAW,CAAC/uB,IAAW3B,GAAM4D,OAAOkT,QAAe,OAAP9W,EAAY,QAAQ,OAAQ6kB,YAAQtzB,EAAQ,GAAGigC,KAAKxxB,IAE5F4jD,EAAqBx1B,EAAO4J,4BAA4B5J,EAAOmI,MAAMv2B,IAUvExP,EAAIq+B,SAASC,EAAMC,EAAW7M,EAAGsI,EAAGkG,EAAS9hB,EAAQogB,GAEvD0B,EAAU,CACR/uB,IAAW3B,GAAMkH,WAAay8C,EAAW,IACzC,IAEFn5B,GAAK45B,EACL5zD,EAAIq+B,SAASC,EAAMC,EAAW7M,EAAGsI,EAAGkG,EAAS9hB,EAAQogB,GAErD0B,EACEkzB,EAAqBF,EAAY1jD,GAEnC8uB,EAAO,CAAC,IAAK,IAAK,KAClBt+B,EAAIigC,eAAe3B,EAAMC,EAAW7M,EAAE,IAAKsI,EAAGkG,EAAS9hB,EAAQogB,GAAQ,GAIvEF,EAAO,CAAC,IAAK,IAAK,KAElB4B,EAAU,CACR/uB,IAAW3B,GAAMmH,WAEjB,IAEFqjB,GAAK45B,EACL5zD,EAAIq+B,SAASC,EAAMC,EAAW7M,EAAGsI,EAAGkG,EAAS9hB,EAAQogB,GAErD0B,EACEkzB,EAAqBH,EAAazjD,GAEpC8uB,EAAO,CAAC,IAAK,IAAK,KAClBt+B,EAAIigC,eAAe3B,EAAMC,EAAW7M,EAAE,IAAKsI,EAAGkG,EAAS9hB,EAAQogB,GAAQ,GACvEF,EAAO,CAAC,IAAK,IAAK,KArYnB,SA6YAV,EAAO78B,QAAQuL,OAAOkD,IAAO,MAAO,GACrCxP,EAAIw/B,mBAAmBD,EAAcE,EAAYC,GAEjD/c,EAAOA,GAAU3iB,EAAI26B,eAAejhC,KAAuBkhC,EAAW9Z,GAAM,EAAMM,GAClFphB,EAAI88B,QAAQzD,IAAWE,KACV,OAAT/pB,EAAexP,EAAI+8B,YAAYpD,YAAO,KACrC35B,EAAI+8B,YAAYpD,YAAO,KAC5B35B,EAAI88B,QAAQxD,IAAOC,KACnBv5B,EAAI+8B,YAAYpD,YAAO,KACvBjI,EAAI,IACJsI,EAAIuF,EAAek0B,EAAc,GACjCE,EAAO,IACPv1C,EAAS,KAIT4b,GAAK,EAAE65B,EAGT7zD,EAAI88B,QAAQxD,IAAOC,KACnBv5B,EAAI+8B,YAAYpD,YAAO,KACvB35B,EAAIk9B,aAAa,GAAM,GAAM,IAI7BoB,EAAO,CAAC,IAAK,IAAK,KAClBC,EAAY,CAAC,IAAK,IAAK,KACvBC,EAAS,CAAC,IAAK,IACf0B,EAAU,CAAC/uB,IAAW3B,GAAMgD,MAAO,IAEnCxS,EAAIq+B,SAASC,EAAMC,EAAW7M,EAAGsI,EAAGkG,EAAS9hB,EAAQogB,GAErDF,EAAO,CAAC,IAAK,IAAK,KAClBC,EAAY,CAAC,GAAM,GAAM,IACzB2B,EAAU,CAAC/uB,IAAW3B,GAAMqG,YAAa+nB,EAAO35B,QAAU,KAAKsiB,YAC/DyT,GAAK25B,EACL3zD,EAAIq+B,SAASC,EAAMC,EAAW7M,EAAGsI,EAAGkG,EAAS9hB,EAAQogB,GACrD0B,EAAU,CAACya,EAAaxpC,IAAW3B,GAAMuG,aAAa5E,IAAW3B,GAAMsG,YAAa8nB,EAAO7+B,QAAU,KAAKwnB,YAC1GyT,GAAK65B,EACL7zD,EAAIq+B,SAASC,EAAMC,EAAW7M,EAAGsI,EAAGkG,EAAS9hB,EAAQogB,GAErD0B,EAAU,CACR/uB,IAAW3B,GAAM+C,UAEfkP,WAAW9R,EAAMlE,UAAUqB,cAAc,GAAG7N,SAASssB,QAAQ,GAAK,KAClEhF,YAEJyT,GAAK65B,EACL7zD,EAAIq+B,SAASC,EAAMC,EAAW7M,EAAGsI,EAAGkG,EAAS9hB,EAAQogB,GAErDx+B,EAAI88B,QAAQxD,IAAOC,KACnBv5B,EAAI+8B,YAAYpD,YAAO,KACvB35B,EAAIk9B,aAAa,GAAM,GAAM,IAE7BlD,GAAK,EAAI25B,EAAK,IACd3zD,EAAI28B,SAASlD,YAAO,KAAMA,YAAOO,EAAI,KAAOP,YAxd7B,MA2dfk0B,EAAYhT,EAAaxpC,IAAW3B,GAAMkD,UAAWvB,IAAW3B,GAAMiD,QACtEzS,EAAIw8B,cAAcmxB,EAAWl0B,YAAO,KAAMA,YAAOO,GAAIP,YAAO,MAE5DO,GAAK25B,EAAM,IACXhG,EAAYx8C,IAAW3B,GAAMmD,QAC7B3S,EAAIw8B,cAAcmxB,EAAWl0B,YAAO,KAAMA,YAAOO,GAAIP,YAAO,MAuD5Dz5B,EAAIw/B,mBAAmBD,EAAcE,EAAYC,GAQjD/c,EAAOA,GAAU3iB,EAAI26B,eAAejhC,KAAuBkhC,EAAW9Z,GAAM,EAAMM,GAElFphB,EAAI88B,QAAQzD,IAAWE,KACV,OAAT/pB,EAAexP,EAAI+8B,YAAYpD,YAAO,KACrC35B,EAAI+8B,YAAYpD,YAAO,KAE5B35B,EAAIk9B,aAAa,GAAM,GAAM,IAC7Bl9B,EAAIm/B,KAAKwb,EAAaxpC,IAAW3B,GAAM8D,OAAOnC,IAAW3B,GAAM6D,KAAMomB,YAAO,KAAMA,YAAO8F,EAAei0B,IAGxG7F,EAAWhT,EAAaxpC,IAAW3B,GAAMgE,QAAQrC,IAAW3B,GAAM+D,MAClEvT,EAAI88B,QAAQxD,IAAOC,KACnBv5B,EAAI+8B,YAAYpD,YAAO,KACvB35B,EAAIk9B,aAAa,GAAM,GAAM,IAC7Bl9B,EAAIw8B,cACFmxB,EACAl0B,YAAO,KACPA,YAAO8F,EAAe,KACtB9F,YAjjBa,MAojBf/H,EAAI,IACJsI,EAAIuF,EAAe,IACnBo0B,EAAO,GACPv1C,EAAS,IACTogB,EAAS,CAAC,IAAK,KAEftP,EAAS,CAAC/d,IAAW3B,GAAMiE,SAC3B6qB,EAAO,CAAC,IAAK,IAAK,KAClBC,EAAY,CAAC,IAAK,IAAK,KACvBv+B,EAAIq+B,SAASC,EAAMC,EAAW7M,EAAGsI,EAAG9K,EAAQ9Q,EAAQ,CA7jBrC,MA+jBfkgB,EAAO,CAAC,IAAK,IAAK,KAClBC,EAAY,CAAC,GAAM,GAAM,IAEzBvE,GAAK25B,EACL/1B,EAAO18B,YAAY8uB,SAAQ,SAAUC,GACnCf,EAAS,CACPe,EAAQ7yB,KAENg2D,EAAqBnjC,EAAQpqB,MAAM2J,IAIvCxP,EAAIq+B,SAASC,EAAMC,EAAW7M,EAAGsI,EAAG9K,EAAQ9Q,EAAQogB,GACpDxE,GAAK65B,KAEP75B,GAAK65B,EACL3kC,EAAS,CACP/d,IAAW3B,GAAMkE,WAEf0/C,EAAqBx1B,EAAOjQ,UAAUne,IAI1CwqB,GAAK25B,EACL3zD,EAAIq+B,SAASC,EAAMC,EAAW7M,EAAGsI,EAAG9K,EAAQ9Q,EAAQogB,GACpDx+B,EAAI28B,SAASlD,YAAO,KAAMA,YAAOO,GAAIP,YAxlBtB,MAknBf/H,EAAI,IAEJsI,GAAK25B,EAELv1C,EAAS,IAGT8Q,EAAS,CAAC/d,IAAW3B,GAAMqE,SAC3ByqB,EAAO,CAAC,IAAK,IAAK,KAClBC,EAAY,CAAC,IAAK,IAAK,KACvBv+B,EAAIq+B,SAASC,EAAMC,EAAW7M,EAAGsI,EAAG9K,EAAQ9Q,EAAQ,CA5nBrC,MA8nBfkgB,EAAO,CAAC,IAAK,IAAK,KAClBC,EAAY,CAAC,GAAM,GAAM,IAEzBrP,EAAS,CACNyrB,EAAaxpC,IAAW3B,GAAMuE,aAAc5C,IAAW3B,GAAMsE,WAE5Ds/C,EAAqBx1B,EAAOvM,OAASuM,EAAO+H,QAAQn2B,IAKxDwqB,GAAK25B,EACL3zD,EAAIq+B,SAASC,EAAMC,EAAW7M,EAAGsI,EAAG9K,EAAQ9Q,EAAQogB,GAEpDxE,GAAK25B,EACL3zD,EAAIw8B,cACHme,EAAcxpC,IAAW3B,GAAMyE,aAAa9C,IAAW3B,GAAMwE,WAC5DylB,YAAO/H,EAAI,IACX+H,YAAOO,EAAI25B,GACXl6B,YAAO,IAITO,GAAK25B,EAAO,GACZ3zD,EAAI28B,SAASlD,YAAO,KAAMA,YAAOO,EAAI,KAAOP,YAtpB7B,MA0pBX85B,GACFrkC,EAAS,CACP/d,IAAW3B,GAAM2E,oBAChBypB,EAAO4K,SAAW,KAAKjiB,YAE1ByT,GAAK,IAAM25B,EACX3zD,EAAI28B,SAASlD,YAAO,KAAMA,YAAOO,GAAIP,YAhqBxB,MAiqBbz5B,EAAIq+B,SAASC,EAAMC,EAAW7M,EAAGsI,EAAG9K,EAAQ9Q,EAAQogB,GAEpDtP,EAAS,CACPmkC,EAECz1B,EAAO6K,SAASsF,KAAI,SAAC/L,GAAD,OAAUA,EAAO,QAAOzb,YAE/CyT,GAAK65B,EACL7zD,EAAIq+B,SAASC,EAAMC,EAAW7M,EAAGsI,EAAG9K,EAAQ9Q,EAAQogB,KAGpDtP,EAAS,CACPmkC,GACCz1B,EAAO4K,SAAW,KAAKjiB,YAE1ByT,GAAK,IAAM25B,EACX3zD,EAAIq+B,SAASC,EAAMC,EAAW7M,EAAGsI,EAAG9K,EAAQ9Q,EAAQogB,IAGtDtP,EAAS,CAAC/d,IAAW3B,GAAM0E,WAAY,IACvC8lB,GAAK,IAAM25B,EACX3zD,EAAIq+B,SAASC,EAAMC,EAAW7M,EAAGsI,EAAG9K,EAAQ9Q,EAAQogB,GAGhD+0B,GACFrkC,EAAS,CACP/d,IAAW3B,GAAM2E,mBAEfi/C,EAAqBx1B,EAAOiI,aAAar2B,IAI7CwqB,GAAK25B,EACL3zD,EAAIq+B,SAASC,EAAMC,EAAW7M,EAAGsI,EAAG9K,EAAQ9Q,EAAQogB,GACpDx+B,EAAI28B,SAASlD,YAAO,KAAMA,YAAOO,GAAIP,YAnsBxB,MAqsBbvK,EAAS,CACPmkC,EAEED,EAAqBx1B,EAAOkI,aAAa7T,QAAO,SAACniB,EAAGwf,GAAJ,OAAUxf,EAAIwf,IAAG,GAAG9f,KAKxE0f,EAAS,CACPmkC,EAEED,EAAqBx1B,EAAOiI,aAAar2B,IAK/CwqB,GAAK65B,EACL7zD,EAAIq+B,SAASC,EAAMC,EAAW7M,EAAGsI,EAAG9K,EAAQ9Q,EAAQogB,GAMpDx+B,EAAIw/B,mBAAmBD,EAAcE,EAAYC,GAKjD/c,EAAOA,GAAU3iB,EAAI26B,eAAejhC,KAAuBkhC,EAAW9Z,GAAM,EAAMM,GAElFod,EAAmB,OAAThvB,EAAc,CAAC,KAAM,IAAK,KAAK,CAAC,KAAM,IAAK,KACrDxP,EAAI88B,QAAQzD,IAAWE,KACV,OAAT/pB,EAAexP,EAAI+8B,YAAYpD,YAAO,KACrC35B,EAAI+8B,YAAYpD,YAAO,KAE5B35B,EAAIk9B,aAAa,GAAM,GAAM,IAC7Bl9B,EAAIm/B,KAAKwb,EAAaxpC,IAAW3B,GAAM+E,OAAOpD,IAAW3B,GAAM8E,KAAMmlB,YAAO,KAAMA,YAAO8F,EAAei0B,IAGxGxzD,EAAI88B,QAAQxD,IAAOC,KAEnBv5B,EAAI+8B,YAAYpD,YAAO,KAEvBjI,EAAI,IACJsI,EAAIuF,EAAek0B,EACnBE,EAAO,IACPv1C,EAAS,IAET8Q,EAAS,CACP/d,IAAW3B,GAAMgF,QACjBrD,IAAW3B,GAAMiF,SACjBtD,IAAW3B,GAAMkF,UAEnB4pB,EAAO,CAAC,IAAK,IAAK,KAClBC,EAAY,CAAC,IAAK,IAAK,KACvBv+B,EAAIq+B,SAASC,EAAMC,EAAW7M,EAAGsI,EAAG9K,EAAQ9Q,EAAQogB,GAEpDF,EAAO,CAAC,IAAK,IAAK,KAClBC,EAAY,CAAC,GAAM,GAAM,IACzBv+B,EAAIk9B,aAAa,GAAM,GAAM,IAsB3BhO,EAAS,CACP/d,IAAW3B,GAAMmF,WAEfy+C,EAAqBx1B,EAAOmI,MAAMv2B,GAGlC4jD,EAAqBx1B,EAAOmI,MAAMv2B,IAItCwqB,GAAK25B,EACL3zD,EAAIq+B,SAASC,EAAMC,EAAW7M,EAAGsI,EAAG9K,EAAQ9Q,EAAQogB,GAGtDxE,GAAK25B,EACL/1B,EAAO38B,OAAO+uB,SAAQ,SAAUC,GAC9Bf,EAAS,CACPe,EAAQ7yB,KAENg2D,EAAqBnjC,EAAQpqB,MAAM2J,GAGrCygB,EAAQoX,aAAe,EAEnB+rB,EAAqBnjC,EAAQoX,aAAa73B,GAG1C,IAENxP,EAAIq+B,SAASC,EAAMC,EAAW7M,EAAGsI,EAAG9K,EAAQ9Q,EAAQogB,GACpDxE,GAAK65B,KAGP3kC,EAAS,CACP/d,IAAW3B,GAAMoF,WAEfw+C,EAAqBx1B,EAAO9N,WAAWtgB,GAIvC4jD,EAAqBx1B,EAAOoI,kBAAkBx2B,IAIlDwqB,GAAK25B,EACL3zD,EAAIq+B,SAASC,EAAMC,EAAW7M,EAAGsI,EAAG9K,EAAQ9Q,EAAQogB,GAkBlDtP,EAAS,CACPyrB,EAAaxpC,IAAW3B,GAAMsF,aAAc3D,IAAW3B,GAAMqF,WAC7D,GAEEu+C,EAAqBx1B,EAAOjQ,UAAUne,IAI1CwqB,GAAK25B,EACL3zD,EAAIq+B,SAASC,EAAMC,EAAW7M,EAAGsI,EAAG9K,EAAQ9Q,EAAQogB,GAGtDxE,GAAK25B,EAOLzkC,EAAS,CACPyrB,EAAaxpC,IAAW3B,GAAMwF,aAAc7D,IAAW3B,GAAMuF,WAC7D,GAEEq+C,EAAqBx1B,EAAOoI,kBAAoBpI,EAAOjQ,UAAUne,IAKrExP,EAAIq+B,SAASC,EAAMC,EAAW7M,EAAGsI,EAAG9K,EAAQ9Q,EAAQogB,GAcpDxE,GAAK25B,EACL3zD,EAAI28B,SAASlD,YAAO,KAAMA,YAAOO,EAAI,KAAOP,YAh4B7B,MAk4Bfz5B,EAAIw/B,mBAAmBD,EAAcE,EAAYC,GASjD/c,EAAOA,GAAU3iB,EAAI26B,eAAejhC,KAAuBkhC,EAAW9Z,GAAM,EAAMM,GAClFod,EAAS,CAAC,IAAK,KACfA,EAAS,CAAC,EAAI,IAAK,IACnBx+B,EAAI88B,QAAQzD,IAAWE,KACV,OAAT/pB,EAAexP,EAAI+8B,YAAYpD,YAAO,KACrC35B,EAAI+8B,YAAYpD,YAAO,KAE5B35B,EAAIk9B,aAAa,GAAM,GAAM,IAC7Bl9B,EAAIm/B,KAAKwb,EAAaxpC,IAAW3B,GAAM0F,OAAQ/D,IAAW3B,GAAMyF,KAAMwkB,YAAO,KAAMA,YAAO8F,EAAei0B,IAGzGxzD,EAAI88B,QAAQxD,IAAOC,KAEnBv5B,EAAI+8B,YAAYpD,YAAO,KAEvBjI,EAAI,IACJsI,EAAIuF,EAAek0B,EACnBE,EAAO,IACPv1C,EAAS,IAOT8Q,EAAS,CACP/d,IAAW3B,GAAM2F,QACjBhE,IAAW3B,GAAMiF,SACjBtD,IAAW3B,GAAMkF,UAEnB4pB,EAAO,CAAC,IAAK,IAAK,KAClBC,EAAY,CAAC,IAAK,IAAK,KACvBv+B,EAAIq+B,SAASC,EAAMC,EAAW7M,EAAGsI,EAAG9K,EAAQ9Q,EAAQogB,GAIpDF,EAAO,CAAC,IAAK,IAAK,KAClBC,EAAY,CAAC,GAAM,GAAM,IAEzBvE,GAAK25B,EACL/1B,EAAOz8B,QAAQ6uB,SAAQ,SAAUC,GAC/Bf,EAAS,CACPe,EAAQ7yB,KAENg2D,EAAqBnjC,EAAQpqB,MAAM2J,GAGrC4jD,EAAqBnjC,EAAQ2X,aAAap4B,IAE5CxP,EAAIq+B,SAASC,EAAMC,EAAW7M,EAAGsI,EAAG9K,EAAQ9Q,EAAQogB,GACpDxE,GAAK65B,KAEP75B,GAAK25B,EACL3zD,EAAIw8B,cACFrrB,IAAW3B,GAAM4F,WACjBqkB,YAAO/H,EAAI,IACX+H,YAAOO,EAAI,KACXP,YAAO,IAETO,GAAK25B,EAAO,GACZ3zD,EAAI28B,SAASlD,YAAO,KAAMA,YAAOO,EAAI,KAAOP,YAv8B7B,MA28Bf+E,EAAS,CAAC,IAAK,IAEX+0B,GACFv5B,GAAK25B,EAAO,IAEZ3zD,EAAIq+B,SACFC,EACAC,EACA7M,EACAsI,EACA,CAAC7oB,IAAW3B,GAAM2E,oBAClBiK,EACAogB,GAGFx+B,EAAI+8B,YAAYpD,YAAO,KACvB35B,EAAIq+B,SACFC,EACAC,EACA7M,EAAI,IACJsI,EACA,CACE,IACE/F,EAAgBze,OAEd49C,EAAqBx1B,EAAOuK,uBAAuB34B,GAGnD+W,WACF,KAEJnI,EACAogB,GAEFx+B,EAAI+8B,YAAYpD,YAAO,KACvB35B,EAAIq+B,SACFC,EACAC,EACA7M,EAAI,IACJsI,EACA,CAEIo5B,EAAqBx1B,EAAOqK,mBAAmBz4B,IAInD4O,EACAogB,GAIFxE,GAAK45B,EAEL5zD,EAAIq+B,SACFC,EACAC,EACA7M,EACAsI,EACA,CAAEjG,EAA8Bu/B,EAAjBD,GACfj1C,EACAogB,GAGFx+B,EAAI+8B,YAAYpD,YAAO,KACvB35B,EAAIq+B,SACFC,EACAC,EACA7M,EAAI,IACJsI,EACA,CACE,IACE/F,EAAgBze,OAEd49C,EAAqBx1B,EAAOwK,wBAAwB54B,GAGpD+W,WACF,KAEJnI,EACAogB,GAEFx+B,EAAI+8B,YAAYpD,YAAO,KACvB35B,EAAIq+B,SACFC,EACAC,EACA7M,EAAI,IACJsI,EACA,CAEIo5B,EAAqBx1B,EAAOsK,oBAAoB14B,IAIpD4O,EACAogB,GA4BFx+B,EAAI+8B,YAAYpD,YAAO,OAWvBK,GAAK25B,EACL3zD,EAAIq+B,SACFC,EACAC,EACA7M,EACAsI,EACA,CAAEjG,EAA8Bu/B,EAAjBD,GACfj1C,EACAogB,GAGFx+B,EAAI+8B,YAAYpD,YAAO,KACvB35B,EAAIq+B,SACFC,EACAC,EACA7M,EAAI,IACJsI,EACA,CACE,IACE/F,EAAgBze,OAEd49C,EAAqBx1B,EAAOuK,uBAAuB34B,GAIrD,KAEJ4O,EAAO,GACPogB,GAEFx+B,EAAI+8B,YAAYpD,YAAO,KACvB35B,EAAIq+B,SACFC,EACAC,EACA7M,EAAI,IACJsI,EACA,CAEIo5B,EAAqBx1B,EAAOqK,mBAAmBz4B,IAInD4O,EAAO,GACPogB,IAKJxE,GAAK25B,EAAO,GACZ3zD,EAAIw8B,cACFrrB,IAAW3B,GAAM2E,mBACjBslB,YAAO/H,EAAI,IACX+H,YAAOO,GACPP,YAAO,IAETO,GAAK25B,EAAO,IACZ3zD,EAAI28B,SAASlD,YAAO,KAAMA,YAAOO,EAAI,KAAOP,YAzoC7B,MAspCfvK,EAAS,CAAC/d,IAAW3B,GAAM2E,oBAC3B6lB,GAAK25B,EAEL3zD,EAAIq+B,SAASC,EAAMC,EAAW7M,EAAGsI,EAAG9K,EAAQ9Q,EAAQogB,GAEhD+0B,GACFvzD,EAAI+8B,YAAYpD,YAAO,KACvB35B,EAAIq+B,SACFC,EACAC,EACA7M,EAAI,IACJsI,EACA,CACE,IAEInO,YAAY+R,EAAOiI,aAAc,EAAG3a,EAAac,GACjDzF,WACF,IAGEsF,YAAY+R,EAAOuK,uBAAwB,EAAGjd,EAAac,GAC3DzF,WACF,KAEJnI,EAAO,GACP,CAAC,MAGHpe,EAAI+8B,YAAYpD,YAAO,KACvB2E,EAAO,CAAC,IAAK,IAAK,KAElB4B,EACEkzB,EAAqB3nC,KAAKhF,IAAI,EAAGmX,EAAOiI,aAAejI,EAAOuK,wBAAwB34B,GASxFxP,EAAIigC,eAAe3B,EAAMC,EAAW7M,EAAE,IAAKsI,EAAGkG,EAAS9hB,EAAQogB,GAAQ,GAqBvEF,EAAO,CAAC,IAAK,IAAK,KAClBpP,EAAS,CAAE6E,EAA6Bu/B,EAAhBD,GAExBr5B,GAAK45B,EACL5zD,EAAIq+B,SAASC,EAAMC,EAAW7M,EAAGsI,EAAG9K,EAAQ9Q,EAAQogB,GAEpDx+B,EAAI+8B,YAAYpD,YAAO,KACvB35B,EAAIq+B,SACFC,EACAC,EACA7M,EAAI,IACJsI,EACA,CACE,IAEInO,YAAY+R,EAAOkI,aAAa7T,QAAO,SAACniB,EAAGwf,GAAJ,OAAUxf,EAAIwf,IAAG,GAAI,EAAGpE,EAAac,GAC5EzF,WACF,IAEEsF,YAAY+R,EAAOwK,wBAAyB,EAAGld,EAAac,GAC5DzF,WACF,KAEJnI,EAAO,GACP,CAAC,MAGHpe,EAAI+8B,YAAYpD,YAAO,KACvB2E,EAAO,CAAC,IAAK,IAAK,KAClB4B,EACEkzB,EAAqB3nC,KAAKhF,IAAI,EAAGmX,EAAOkI,aAAa7T,QAAO,SAACniB,EAAGwf,GAAJ,OAAUxf,EAAIwf,IAAG,GAAKsO,EAAOwK,yBAAyB54B,GASpHxP,EAAIigC,eAAe3B,EAAMC,EAAW7M,EAAE,IAAKsI,EAAGkG,EAAS9hB,EAAQogB,GAAQ,KAsBvEF,EAAO,CAAC,IAAK,IAAK,KAClBt+B,EAAI+8B,YAAYpD,YAAO,KACvB35B,EAAIq+B,SACFC,EACAC,EACA7M,EAAI,IACJsI,EACA,CACE,IAEInO,YAAY+R,EAAOiI,aAAc,EAAG3a,EAAac,GACjDzF,WACF,IAGEsF,YAAY+R,EAAOuK,uBAAwB,EAAGjd,EAAac,GAC3DzF,WACF,KAEJnI,EAAO,GACP,CAAC,MAEHpe,EAAI+8B,YAAYpD,YAAO,KACvB2E,EAAO,CAAC,IAAK,IAAK,KAElB4B,EACEkzB,EAAqB3nC,KAAKhF,IAAI,EAAGmX,EAAOiI,aAAejI,EAAOuK,wBAAwB34B,GASxFxP,EAAIigC,eAAe3B,EAAMC,EAAW7M,EAAE,IAAKsI,EAAGkG,EAAS9hB,EAAQogB,GAAQ,IAIzEx+B,EAAI+8B,YAAYpD,YAAO,KAwBvB35B,EAAIw/B,mBAAmBD,EAAcE,EAAYC,GA6MjD/c,EAAOA,GAAU3iB,EAAI26B,eAAejhC,KAAuBkhC,EAAW9Z,GAAM,EAAMM,GAElFod,EAAS,CAAC,IAAK,KACfx+B,EAAI88B,QAAQzD,IAAWE,KACV,OAAT/pB,EAAexP,EAAI+8B,YAAYpD,YAAO,KACrC35B,EAAI+8B,YAAYpD,YAAO,KAE5B35B,EAAIk9B,aAAa,GAAM,GAAM,IAC7Bl9B,EAAIm/B,KAAKhuB,IAAW3B,GAAM6G,KAAMojB,YAAO,KAAMA,YAAO8F,EAAei0B,IAGnExzD,EAAI88B,QAAQxD,IAAOC,KAEnBv5B,EAAI+8B,YAAYpD,YAAO,KAEvBjI,EAAI,IACJsI,EAAIuF,EAAek0B,EACnBE,EAAO,IACPv1C,EAAS,IAET8Q,EAAS,CAACyrB,EAAaxpC,IAAW3B,GAAM+G,UAAWpF,IAAW3B,GAAM8G,SACpEgoB,EAAO,CAAC,IAAK,IAAK,KAClBC,EAAY,CAAC,IAAK,IAAK,KACvBv+B,EAAIq+B,SAASC,EAAMC,EAAW7M,EAAGsI,EAAG9K,EAAQ9Q,EAAQ,CApjDrC,MAsjDfkgB,EAAO,CAAC,IAAK,IAAK,KAClBC,EAAY,CAAC,GAAM,GAAM,IACzBv+B,EAAIk9B,aAAa,GAAM,GAAM,IAM7BlD,GAAK25B,EAAO,GACZ3zD,EAAIw8B,cACFrrB,IAAW3B,GAAMgH,WACjBijB,YAAO/H,GACP+H,YAAOO,GACPP,YAAO,IAETz5B,EAAIm/B,KAEAi0B,EAAqBx1B,EAAOoI,kBAAoBpI,EAAOjQ,UAAUne,GASnEiqB,YAAO/H,EAAI,MACX+H,YAAOO,EAAI,MAGbA,GAAK25B,EAAO,GACZ3zD,EAAIw8B,cACFrrB,IAAW3B,GAAMiH,WACjBgjB,YAAO/H,GACP+H,YAAOO,GACPP,YAAO,IAETO,GAAK25B,EAAO,GAER5/B,IAEJ7E,EAAS,CACP/d,IAAW3B,GAAMkH,WAAa/G,EAAM8gB,GAAK,IAEvC2iC,EAAqBx1B,EAAO9K,UAAUtjB,IAI1CwqB,GAAK25B,EAAO,GACZ3zD,EAAIq+B,SAASC,EAAMC,EAAW7M,EAAGsI,EAAG9K,EAAQ9Q,EAAQogB,IAGpDtP,EAAS,CACP6E,EAAc5iB,IAAW3B,GAAMsH,cAAcwP,QAAQ,MAAM,IAAKnV,IAAW3B,GAAMmH,WAE/Ey8C,EAAqBx1B,EAAO/K,WAAWrjB,IAI3CwqB,GAAK25B,EACL3zD,EAAIq+B,SAASC,EAAMC,EAAW7M,EAAGsI,EAAG9K,EAAQ9Q,EAAQogB,GAEhDZ,EAAO8I,WACL9I,EAAO6I,QAAUI,IACnB3X,EAAS,CACP6E,EAAa5iB,IAAW3B,GAAMoH,WAAW0P,QAAQ,KAAK,MAAMA,QAAQ,KAAKsX,EAAOkJ,qBAAsB31B,IAAW3B,GAAMoH,WAAW0P,QAAQ,KAAKsX,EAAOkJ,qBAEpJssB,EAAqBx1B,EAAOmJ,iBAAiBv3B,IAKjDwqB,GAAK25B,EACL3zD,EAAIq+B,SAASC,EAAMC,EAAW7M,EAAGsI,EAAG9K,EAAQ9Q,EAAQogB,IAGlDZ,EAAO6I,QAAU6Q,IACnBpoB,EAAS,CACP6E,EAAa5iB,IAAW3B,GAAMqH,WAAWyP,QAAQ,KAAK,MAAOnV,IAAW3B,GAAMqH,WAE5Eu8C,EAAqBx1B,EAAOoJ,iBAAiBx3B,IAKjDwqB,GAAK25B,EACL3zD,EAAIq+B,SAASC,EAAMC,EAAW7M,EAAGsI,EAAG9K,EAAQ9Q,EAAQogB,KAGxDx+B,EAAI+6B,SAAS,OAAQtB,YAAO,KAAMA,YAAOO,EAAI,IAAMP,YAAO,GAAIA,YAAO,IAErEz5B,EAAIw/B,mBAAmBD,EAAcE,EAAYC,GAKjD/c,EAAOA,GAAU3iB,EAAI26B,eAAejhC,KAAuBkhC,EAAW9Z,GAAM,EAAMM,GAElFphB,EAAI88B,QAAQzD,IAAWE,KACV,OAAT/pB,EAAexP,EAAI+8B,YAAYpD,YAAO,KACrC35B,EAAI+8B,YAAYpD,YAAO,KAE5B35B,EAAIk9B,aAAa,GAAM,GAAM,IAC7Bl9B,EAAIm/B,KAAKhuB,IAAW3B,GAAMuH,KAAM0iB,YAAO,KAAMA,YAAO8F,EAAai0B,IAGjE7F,EAAYx8C,IAAW3B,GAAMwH,MAC7BhX,EAAI88B,QAAQxD,IAAOC,KACnBv5B,EAAI+8B,YAAYpD,YAAO,KACvB35B,EAAIk9B,aAAa,GAAM,GAAM,IAC7Bl9B,EAAIw8B,cAAcmxB,EAAWl0B,YAAO,KAAMA,YAAO8F,EAAa,KAAM9F,YApqDrD,MAuqDfz5B,EAAIggC,kBAAkBT,EAAaG,GAInC/c,EAAOA,GAAU3iB,EAAI26B,eAAejhC,KAAuBkhC,EAAW9Z,GAAM,EAAMM,GAElFphB,EAAI88B,QAAQzD,IAAWE,KACV,OAAT/pB,EAAexP,EAAI+8B,YAAYpD,YAAO,KACrC35B,EAAI+8B,YAAYpD,YAAO,KAE5B35B,EAAIk9B,aAAa,GAAM,GAAM,IAC7Bl9B,EAAIm/B,KAAKhuB,IAAW3B,GAAM0H,MAAOuiB,YAAO,KAAMA,YAAO8F,EAAei0B,IAGpE7F,EAAYx8C,IAAW3B,GAAM2H,OAC7BnX,EAAI88B,QAAQxD,IAAOC,KACnBv5B,EAAI+8B,YAAYpD,YAAO,KACvB35B,EAAIk9B,aAAa,GAAM,GAAM,IAC7Bl9B,EAAIw8B,cACFmxB,EACAl0B,YAAO,KACPA,YAAO8F,EAAe,KACtB9F,YA7rDa,MAgsDfz5B,EAAI88B,QAAQxD,IAAOC,KAEnBv5B,EAAI+8B,YAAYpD,YAAO,KAEvBjI,EAAI,IACJsI,EAAIuF,EAAe,IACnBo0B,EAAO,IACPv1C,EAAS,IAETkgB,EAAO,CAAC,IAAK,IAAK,KAClBC,EAAY,CAAC,GAAM,GAAM,IACzBv+B,EAAIk9B,aAAa,GAAM,GAAM,IAEzB+2B,EAAyB,OAAftkD,EAAMH,KAAgB,EAAI,EACxCwqB,GAAK25B,EAAO,GACZ3zD,EAAIw8B,cACFrrB,IAAW3B,GAAM4H,YACjBqiB,YAAO/H,GACP+H,YAAOO,GACPP,YAAO,IAETz5B,EAAIm/B,KAAKhuB,IAAW3B,GAAM6H,aAAcoiB,YAAO/H,EAAIuiC,GAAUx6B,YAAOO,IAEpEA,GAAK25B,EACL3zD,EAAIw8B,cACFrrB,IAAW3B,GAAM8H,YACjBmiB,YAAO/H,GACP+H,YAAOO,GACPP,YAAO,IAETz5B,EAAIm/B,KAAKhuB,IAAW3B,GAAM6H,aAAcoiB,YAAO/H,EAAIuiC,GAAUx6B,YAAOO,IAEpEA,GAAK25B,EACL3zD,EAAIw8B,cACFrrB,IAAW3B,GAAM+H,YACjBkiB,YAAO/H,GACP+H,YAAOO,GACPP,YAAO,IAETz5B,EAAIm/B,KAAKhuB,IAAW3B,GAAM6H,aAAcoiB,YAAO/H,EAAIuiC,GAAUx6B,YAAOO,IAEpEh6B,EAAI2/B,OAAOxuB,IAAW3B,GAAMyH,WAEhB,IAAT0L,GACDsvB,MAAa,OAAPziC,EAAa,kDAAkD,gFAGvExP,EAAIg9B,KAAK,eA3tDN,8C,0CCjCMk3B,EAAb,kDACE,WAAYvkD,GAAQ,IAAD,8BACjB,cAAMA,IAQR+/C,MAAQ,YDuBH,SAAP,2BCtBIyE,CAAgB,EAAKxkD,QAVJ,EAanBykD,OAbmB,sBAaV,sBAAAtkD,EAAA,sEAIDyX,OAAOgyB,OAAOiW,YAClB,QACE,EAAK7/C,MAAMlE,UAAUqB,cAAc,GAAGyC,SACtC,IACA,EAAKI,MAAMgiC,oBACb,KATK,2CAbU,EAyBnB0iB,KAzBmB,sBAyBZ,sBAAAvkD,EAAA,sEAGCyX,OAAOgyB,OAAOiW,YAClB,MACE,EAAK7/C,MAAMlE,UAAUqB,cAAc,GAAGyC,SACtC,IACA,EAAKI,MAAMgiC,oBACb,KARG,2CAzBY,EAoCnB2iB,KApCmB,sBAoCZ,sBAAAxkD,EAAA,sEAICyX,OAAOgyB,OAAOiW,YAClB,MACE,EAAK7/C,MAAMlE,UAAUqB,cAAc,GAAGyC,SACtC,IACA,EAAKI,MAAM8hC,6BACb,KATG,2CApCY,EAiDnB8iB,YAAc,WACZ,IAAM/kD,EAAO,EAAKG,MAAMlE,UAAUqB,cAAc,GAAGyC,SAE7C3R,EAAK6jB,WAAW2E,YAAY,EAAKzW,MAAMyjB,cAAe5jB,IACtDrQ,EAAW,EAAKwQ,MAAMlE,UAAUqB,cAAc,GAAGi0B,YACnDrkC,EAAQ,IAAI+mC,KACV+wB,EAAU93D,EAAMinC,cAAgB,EAAKh0B,MAAMlE,UAAUQ,QAAQ,GAAGxH,IAChEgwD,EAAW/3D,EAAMknC,WAAa,EAC9B8wB,EAAWh4D,EAAMmnC,UACnB8wB,EAAe,EACflrB,EAAM,4CAGVA,EACEA,EACA,SACAj6B,EAFAi6B,2BAQAxvB,SAASrc,GACT,WACA,EAAK+R,MAAMlE,UAAUqB,cAAc,GAAG1N,WACtC,SAEED,IAAa0K,KAASC,GAAI6qD,EAAe,IACpCx1D,IAAa0K,KAASE,GAAI4qD,EAAe,IACzCx1D,IAAa0K,KAASK,GAAIyqD,EAAe,IACzCx1D,IAAa0K,KAASO,GAAIuqD,EAAe,IACzCx1D,IAAa0K,KAASQ,GAAIsqD,EAAe,IACzCx1D,IAAa0K,KAASM,GAAIwqD,EAAe,IACzCx1D,IAAa0K,KAASa,GAAIiqD,EAAe,IACzCx1D,IAAa0K,KAASY,GAAIkqD,EAAe,IACzCx1D,IAAa0K,KAASG,GAAI2qD,EAAe,IACzCx1D,IAAa0K,KAASU,GAAIoqD,EAAe,KACzCx1D,IAAa0K,KAASI,GAAI0qD,EAAe,KACzCx1D,IAAa0K,KAASS,GAAIqqD,EAAe,KACzCx1D,IAAa0K,KAASW,KAAImqD,EAAe,MAchDlrB,GAJAA,GAHAA,GAFAA,GAHFA,GAAYkrB,GAIF,YAAc,EAAKhlD,MAAMlE,UAAUqB,cAAc,GAAGzN,aAEpD,UAAYm1D,EAAU,WAAaC,EAAW,SAAWC,GAI/D,SACC,EAAK/kD,MAAMlE,UAAUQ,QAAQ,GAAGC,SAAWpB,KAAIC,KAAKjF,IAAM,IAAM,MAGjE,YACC,EAAK6J,MAAMlE,UAAUQ,QAAQ,GAAGG,YAAchB,KAAQC,WAAWvF,IAC9D,IACA,KAGR,IAAMsY,EAASqN,KAAK7E,IAAIW,OAAOqtC,YAAc,IAAM,GAAI,KACvD,EAAKC,eAAiBttC,OAAOpX,KAC3Bs5B,EACA,SACA,oBAAsBrrB,EAAS,oBAEjC,EAAK02C,YAAc,EAAKD,eAAehxC,SAASgnC,cAAc,OAC9D,EAAKgK,eAAehxC,SAAS1d,KAAK2kD,YAAY,EAAKgK,cAnHnD,EAAK5kD,MAAQ,CACX4Q,MAAO,EAAKnR,MAAMlE,UAAUqB,cAAc,GAAGkkB,aAE/C,EAAK0U,WAAa,GAClB,EAAKqvB,OAASpxC,IAAMkB,YANH,EADrB,0CA8HE,WAGE,IAAI+Y,EAAS6H,YAAgBl1B,KAAKZ,OAC5BH,EAAOe,KAAKZ,MAAMlE,UAAUqB,cAAc,GAAGyC,SAC7C0kB,EAAkB9iB,IAAW3B,GAC7B0b,EAAuB,OAAT1b,EAAgB,IAAM,IACpCwc,EAAqB,OAATxc,EAAgB,IAAM,IAKlCmrC,EAAuD,IAAxCpqC,KAAKZ,MAAMlE,UAAUQ,QAAQK,OAC5C+mD,EAAiB1Y,EAAa1mB,EAAgB5f,qBAAqB4f,EAAgB7f,mBACnFk/C,EAAmB3Y,EAAa1mB,EAAgB3e,aAAa2e,EAAgB5e,WAE7EtU,EAAUwP,KAAKZ,MAAMlE,UAAUQ,QAC/BonC,EAAY5gB,YAChB1xB,EACAwP,KAAKZ,MAAMlE,UAAUqB,cAAc,GAAG4lB,aACtCniB,KAAKZ,MAAM8gB,GACXlgB,KAAKZ,MAAM8gB,IAKPsD,GAHasf,EAAU/gB,cACJ+gB,EAAU9gB,gBACpB8gB,EAAU7gB,YACJjB,YAAexwB,IAC9Bi0D,EAAara,GAAgB51B,cAAiBiI,gBAAgB,MAS9D+T,EAAcrR,YAAuB7lB,KAAU+zB,EAAOz+B,UACxD0nC,EACc,OAAhB9F,EAAuBjlC,KAAoBC,KACzCu7C,EAA0B,OAAhBvW,EAAuBnlC,KAAgBC,KAG/CwtD,EAAU,CACdv0B,OAAQ,CACNjS,SAAS,GAEX6R,YAAY,EACZC,qBAAqB,EACrB2yB,OAAQ,CACNC,MAAO,CAAC,CAAEC,SAAS,IACnBG,MAAO,CACL,CACEH,SAAS,EAMTC,MAAO,CACLC,aAAa,EACbE,SAAU,SAAU/hD,EAAOurB,EAAOlC,GAKhC,OAHErpB,EAAQ,IACJA,EACAgjB,KAAKC,aAAatZ,GAAMkX,OAAO7gB,EAAQ,KAAQ,UAa7DovD,EAAata,EAAc,CAAC,KAAK,CAAC,IAAK,KAKvCua,EAAS,CAAC,UAAW,WAEvBt3B,EAAO6I,QAAUI,IACbjJ,EAAOmJ,iBAAmBnJ,EAAO9N,WAAa8N,EAAOjQ,WAGzDiQ,EAAO6I,QAAU6Q,IACb1Z,EAAOoJ,iBAAmBpJ,EAAO9N,WAAa8N,EAAOjQ,WAIvDiQ,EAAO8I,UAEajb,KAAK7E,IAAIigB,EAASt2B,KAAKZ,MAAMlE,UAAUQ,QAAQkjB,QAAO,SAAC6S,GAAU,OAAOA,EAAKv9B,MAAMm5B,EAAO6I,WAAU,GAAGrU,eAM3HwL,EAAO8I,WACTuuB,EAAa,CAAC,IAAK,IAAK,IAAK,KAO7BC,EAAS,CAAC,UAAW,UAAW,UAAW,YAI7C,IAAIC,EAAcxa,EAAc,CAAC/c,EAAO9K,WAAY,CAAC8K,EAAO9K,UAAW8K,EAAO/K,YAC1E+K,EAAO8I,WACN3S,GAEDkhC,EAAa,CAAC,IAAK,IAAK,KACxBE,EAAc,CACZv3B,EAAO/K,WACP+K,EAAOmJ,iBACPnJ,EAAOoJ,kBAETkuB,EAAS,CAAC,UAAW,UAAW,aAGlCD,EAAa,CAAC,IAAK,IAAK,IAAK,KAC7BE,EAAc,CACZv3B,EAAO9K,UACP8K,EAAO/K,WACP+K,EAAOmJ,iBACPnJ,EAAOoJ,kBAETkuB,EAAS,CAAC,UAAW,UAAW,UAAW,aAiB7C,IAAME,EAAiB,CACrBrgC,OAAQkgC,EACRx+B,SAAU,CACR,CACEmnB,MAAO,GACPvkC,KAAM87C,EACN72B,MAAM,EACNtG,YAAa,UACbtB,gBAAiBw+B,KAKjB9gC,EAAS7jB,KAAKZ,MAAMirC,YACpBrV,EAAS3O,YACbrmB,KAAKZ,MAAMlE,UACX8E,KAAKZ,MAAMmS,YACXvR,KAAKZ,MAAM2R,aAGP4V,EAAUqO,EAAOrO,QACjBC,EAAaoO,EAAOpO,WAEpBk+B,EAAathC,EAAa,GAAG,GAEnC,OAAIihC,EAEA,6BACE,wBAAInkD,UAAU,QAAQujB,IAKxB,6BACE,yBAAKvjB,UAAU,cAEf,yBAAKmT,IAAKzT,KAAKwkD,OAAQtkD,MAAO,CAAEyN,MAAO,OAAQvN,MAAO,OAAQ6T,MAAO,SAEnE,2BACE3T,UAAU,mBACVJ,MAAO,CAELuN,UAAWq3C,EAAa,GAAI,KAC5BvnB,YAAa,MACb0U,aAAc,MACd7xC,MAAO,SAETC,QAASL,KAAKm/C,MACdpyD,KAAK,SACLuI,MAAO7I,IAAawS,GAAMxP,MAb9B,IAcM,yBAAKyQ,MAAO,CAEXuN,UAAWq3C,EAAa,GAAI,KAC5BvnB,YAAoB,OAAPt+B,EAAa,QAAQ,QAClCgzC,aAAc,MACd7xC,MAAO,UACN,kBAAC4nB,EAAA,EAAD,CAAMvnB,SAAUiO,YAAWzP,OAGnC,yBAAKiB,MAAO,CAAEyN,MAAO,OAAQvN,MAAO,OAAQ6T,MAAO,SAGjD,2BACE3T,UAAU,mBACVJ,MAAO,CAELuN,UAAWq3C,EAAe,KAC1B7S,aAAc,MACd7xC,MAAO,SAETC,QAASL,KAAKgkD,YACdj3D,KAAK,SACLuI,MAAO7I,IAAawS,GAAMlP,aAG9B,yBAAKmQ,MAAO,CAAEyN,MAAO,OAAQvN,MAAO,OAAQ6T,MAAO,SACjD,2BACE3T,UAAU,mBACVJ,MAAO,CAELuN,UAAW,OACX8vB,YAAa,MACb0U,aAAc,MACd7xC,MAAO,SAETC,QAASL,KAAK+jD,KACdh3D,KAAK,SACLuI,MAAO7I,IAAawS,GAAMnP,MAG9B,yBAAKoQ,MAAO,CAAEyN,MAAO,OAAQvN,MAAO,OAAQ6T,MAAO,SACjD,2BACE3T,UAAU,mBACVJ,MAAO,CAELuN,UAAW,MACX8vB,YAAa,MACb0U,aAAc,MACd7xC,MAAO,SAETC,QAASL,KAAK6jD,OACd92D,KAAK,SACLuI,MAAO7I,IAAawS,GAAMrP,QAG9B,yBAAKsQ,MAAO,CAAEyN,MAAO,OAAQvN,MAAO,OAAQ6T,MAAO,SACjD,2BACE3T,UAAU,mBACVJ,MAAO,CAELuN,UAAW,MACX8vB,YAAa,MACb0U,aAAc,MACd7xC,MAAO,SAETC,QAASL,KAAK8jD,KACd/2D,KAAK,SACLuI,MAAO7I,IAAawS,GAAMpP,OAI9B,yBAAKyQ,UAAU,eACb,wBAAIA,UAAU,QACXujB,EAQD,kBAACmE,EAAA,EAAD,CAAMvnB,SAAUgO,YAAWxP,MAK1B+1B,EAAOnO,YAEPmO,EAAOlO,OAGR,wBAAIxmB,UAAU,QAAQojB,EAAgBtiB,MACtC,wBAAId,UAAU,QACXojB,EAAgBriB,MADnB,IAC2BgsB,EAAOv+B,YAChC,6BACC40B,EAAgBpiB,MAHnB,IAG2B+rB,EAAOx+B,WAChC,6BACC60B,EAAgBniB,MALnB,IAK2B8rB,EAAO8H,WAChC,6BACCzR,EAAgBliB,MAPnB,IAO2B6rB,EAAOz+B,SAChC,8BAEDg4B,EAED,wBAAItmB,UAAU,SACbqmB,EACD,wBAAIrmB,UAAU,QAAQojB,EAAgBtiB,MACtC,yBACElB,MAAO,CACLyhD,UAAW,OACXY,UAAW,SACX50C,MAAO,SAGT,2BAAOrN,UAAU,aACf,+BACE,4BACE,wBAAIJ,MAAO,CAAEyN,MAAO,MAAOH,WAAY,QACpC48B,EAAa1mB,EAAgBhiB,WAAWgiB,EAAgBjiB,UAE3D,wBAAIvB,MAAO,CAAEyN,MAAO,QACjB+V,EAAgB/hB,UAEnB,wBAAIzB,MAAO,CAAEyN,MAAO,QACjB+V,EAAgB9hB,UAEnB,wBAAI1B,MAAO,CAAEyN,MAAO,QACjB6V,EACGE,EAAgB5hB,YAChB4hB,EAAgB7hB,UAEtB,wBAAI3B,MAAO,CAAEyN,MAAO,QACjB+V,EAAgB3hB,YAIvB,+BACGsrB,EAAO78B,QAAQgtC,KAAI,SAAC/L,GAAD,OAClB,wBAAI1X,IAAK0X,EAAK/xB,IACZ,4BACG+xB,EAAKrQ,YAAchnB,KAAO1C,OAAOnC,IAC9B6E,KAAO1C,OAAOpC,MAAM2J,GAAQ6kB,YAAQ2N,EAAK5kC,KAAKoS,GAC9CwyB,EAAKrQ,YAAchnB,KAAOzC,OAAOpC,IACjC6E,KAAOzC,OAAOrC,MAAM2J,GAAQ6kB,YAAQ2N,EAAK5kC,KAAKoS,GAC7CwyB,EAAKrQ,YAAchnB,KAAOC,MAAM9E,IAAK6E,KAAOC,MAAM/E,MAAM2J,GAAQ6kB,YAAQ2N,EAAK5kC,KAAKoS,GAAM7E,KAAOE,gBAAgBhF,MAAM2J,GAAQ6kB,YAAQ2N,EAAK5kC,KAAKoS,IAEtJ,wBAAIqB,UAAU,kBAAkBmxB,EAAK/kC,KACrC,wBAAI4T,UAAU,kBACbya,YAAU0W,EAAKvjC,OAAO+Q,IASvB,wBAAIqB,UAAU,kBACXkjB,EACGiO,EAAKrQ,YAAchnB,KAAO1C,OAAOnC,IAC/B,IACAk8B,EAAKoF,IAAIpF,EAAK/kC,IAChB+kC,EAAKoF,KAEX,wBAAIv2B,UAAU,kBACXmxB,EAAKrQ,YAAchnB,KAAO1C,OAAOnC,IAC9B+kB,YACE9pB,EAAQ7H,MAAco4B,YACtB,EACA,EAAGtF,EACHd,GAEF8W,EAAKrQ,YAAchnB,KAAOzC,OAAOpC,IACjC+kB,YACE9pB,EAAQ5H,MAAcm4B,YACtB,EACA,EAAEtF,EACFd,GAEFL,YACE9pB,EAAQihC,EAAK/xB,GAAK,GAAGqhB,YACrB,EACA,EAAEtF,EACFd,WAgBlB,wBAAIra,UAAU,SACd,yBAAKA,UAAU,cAAcojB,EAAgBrhB,OAC7C,2BAAO/B,UAAU,kBACf,+BACE,4BACE,wBAAIA,UAAU,iBAAiBojB,EAAgBphB,OAC/C,wBAAIhC,UAAU,kBACXya,YAAUsS,EAAO0J,2BAA2B93B,KAUjD,4BACE,wBAAIqB,UAAU,iBAAiBojB,EAAgBnhB,OAC/C,wBAAIjC,UAAU,kBACbya,YAAUsS,EAAOqJ,6BAA6Bz3B,KAUjD,4BACE,wBACEqB,UAAU,gBACVJ,MAAO,CAAEkiD,UAAW,UAEnB1+B,EAAgBlhB,OAEnB,wBAAIlC,UAAU,kBACbya,YAAUsS,EAAO0J,2BACZ1J,EAAOqJ,6BAA6Bz3B,KAY5C,4BACE,wBAAIqB,UAAU,iBAAiBojB,EAAgBjhB,MAAMsT,QAAQ,MAAMgF,YAAUsS,EAAOmI,MAAMv2B,KAC1F,wBAAIqB,UAAU,kBACbya,YAAUsS,EAAO2J,oBAAsB3J,EAAOmI,MAAMv2B,KAWvD,4BACE,wBAAIqB,UAAU,iBAAiBojB,EAAgBhhB,OAC/C,wBAAIpC,UAAU,kBACbya,YAAUsS,EAAOjQ,UAAYiQ,EAAOqJ,6BAA6Bz3B,OAcxE,wBAAIqB,UAAU,SACd,yBAAKA,UAAU,cAAcojB,EAAgBzhB,OAC7C,2BAAO3B,UAAU,kBACf,+BACE,4BACE,wBAAIA,UAAU,iBACXojB,EAAgBpe,YAEnB,wBAAIhF,UAAU,kBACXga,YAAU+S,EAAO35B,SAAS,EAAO,EAAE+nB,EAAWd,KAGnD,4BACE,wBAAIra,UAAU,iBACX8pC,EAAc1mB,EAAgBle,aAAcke,EAAgBne,YAE/D,wBAAIjF,UAAU,kBACXga,YAAU+S,EAAO7+B,SAAS,EAAO,EAAEitB,EAAWd,KAGnD,4BACE,wBAAIra,UAAU,iBACXojB,EAAgB1hB,UAEnB,wBAAI1B,UAAU,kBACXga,YACCta,KAAKZ,MAAMlE,UAAUqB,cAAc,GAAG7N,SACtC,EACA,EAAE+sB,EACFd,KAIN,6BACA,6BACA,+BAQJ,uBAAGra,UAAU,OAAOJ,MAAO,CAAEyN,MAAO,QACjCy8B,EAAa1mB,EAAgBvhB,UAAUuhB,EAAgBxhB,SAE1D,uBAAG5B,UAAU,OAAOJ,MAAO,CAAEyN,MAAO,QACjC+V,EAAgBthB,SAjQvB,iBAwQSwkB,EAEL,wBAAItmB,UAAU,SACbqmB,EACD,6BACA,wBAAIrmB,UAAU,QAAQ8pC,EAAa1mB,EAAgB3gB,OAAQ2gB,EAAgB5gB,MAC3E,uBAAGxC,UAAU,QAAQ8pC,EAAa1mB,EAAgBzgB,QAAQygB,EAAgB1gB,OAC1E,yBACE9C,MAAO,CACLyhD,UAAW,OACXY,UAAW,SACX50C,MAAO,SAGT,yBAAKrN,UAAU,cAAcojB,EAAgBxgB,SAC7C,2BAAO5C,UAAU,aACf,gCACA,+BACG+sB,EAAO18B,YAAY6sC,KAAI,SAAC/L,GAAD,OACtB,wBAAI1X,IAAK0X,EAAK5kC,MACZ,wBAAIqT,MAAO,CAAEyN,MAAO,QAAU8jB,EAAK5kC,MACnC,wBAAIyT,UAAU,kBACbya,YAAU0W,EAAKn8B,MAAM2J,QAM1B,wBAAIqB,UAAU,yBACZ,4BACE,gCAASojB,EAAgBvgB,aAE3B,wBAAI7C,UAAU,gCACZ,gCACCya,YAAUsS,EAAOjQ,UAAUne,SAwBtC,wBAAIqB,UAAU,SACd,yBACEJ,MAAO,CACLyhD,UAAW,OACXY,UAAW,SACX50C,MAAO,SAGT,yBAAKrN,UAAU,cAAcojB,EAAgBpgB,SAC7C,2BAAOhD,UAAU,eACf,gCACA,+BACE,4BACE,wBAAIA,UAAU,gBAAgBJ,MAAO,CAAEyN,MAAO,QAC3Cy8B,EAAa1mB,EAAgBlgB,aAAckgB,EAAgBngB,YAE9D,wBAAIjD,UAAU,kBACbya,YAAWsS,EAAOvM,OAASuM,EAAO+H,QAAQn2B,KAW7C,wBAAIqB,UAAU,yBACZ,4BACE,6BACC8pC,EAAa1mB,EAAgBhgB,aAAcggB,EAAgBjgB,YAE9D,8BAGD4pB,EAAO6K,SAASn8B,OAAS,GACxB,4BACE,wBAAIuE,UAAU,iBACXojB,EAAgBqhC,YAEnB,wBAAIzkD,UAAU,kBAAkB+sB,EAAO4K,SAAvC,MAGH5K,EAAO6K,SAASn8B,OAAS,GACxB,4BACE,wBAAIuE,UAAU,iBACXojB,EAAgBshC,YAEnB,wBAAI1kD,UAAU,kBAAkB+sB,EAAO6K,SAASsF,KAAI,SAAC/L,GAAD,OAAU,8BAAOA,EAAP,WAGtC,IAA3BpE,EAAO6K,SAASn8B,QACf,4BACE,wBAAIuE,UAAU,iBACXojB,EAAgBshC,YAEnB,wBAAI1kD,UAAU,kBAAkB+sB,EAAO4K,SAAvC,MAIJ,wBAAI33B,UAAU,yBACZ,6BACA,8BAEF,wBAAIA,UAAU,yBACZ,4BAAKojB,EAAgB/f,YACrB,8BAED0pB,EAAO6K,SAASn8B,OAAS,GACxB,4BACE,wBAAIuE,UAAU,iBACXojB,EAAgB9f,oBAEnB,wBAAItD,UAAU,kBACbya,YAAUsS,EAAOiI,aAAar2B,KAYlCouB,EAAO6K,SAASn8B,OAAS,GACxB,4BACE,wBAAIuE,UAAU,iBACXwiD,GAEH,wBAAIxiD,UAAU,kBACbya,YAAUsS,EAAOkI,aAAa7T,QAAO,SAACniB,EAAGwf,GAAJ,OAAUxf,EAAIwf,IAAG,GAAG9f,KAYlC,IAA3BouB,EAAO6K,SAASn8B,QACf,4BACE,wBAAIuE,UAAU,iBACbwiD,GAED,wBAAIxiD,UAAU,kBACbya,YAAUsS,EAAOiI,aAAar2B,QAezC,6BACA,wBAAIqB,UAAU,SACbsmB,EAEAD,EACD,wBAAIrmB,UAAU,QAAQ8pC,EAAa1mB,EAAgB1f,OAAO0f,EAAgB3f,MAC1E,yBACE7D,MAAO,CACLyhD,UAAW,OACXY,UAAW,SACX50C,MAAO,SAGT,2BAAOrN,UAAU,aAAaJ,MAAO,CAAEyN,MAAO,QAC9C,4BAAK,wBAAKzN,MAAO,CAAEyN,MAAO,MAAMqL,OAAO,SAAW0K,EAAgBzf,SAChE,wBAAI/D,MAAO,CAAEyN,MAAO,MAAMqL,OAAO,SAC9B0K,EAAgBxf,UAEnB,wBAAIhE,MAAO,CAAEyN,MAAO,MAAMqL,OAAO,SAC9B0K,EAAgBvf,YAItB,2BAAO7D,UAAU,eACd,+BAEE,4BACE,wBAAIJ,MAAO,CAAE2N,OAAQ,MAAOF,MAAO,QAChC+V,EAAgBtf,YAEnB,wBACE9D,UAAU,iBACVJ,MAAO,CAAE2N,OAAQ,MAAOF,MAAO,QAE9BoN,YAAUsS,EAAOmI,MAAMv2B,IAI1B,wBACEqB,UAAU,iBACVJ,MAAO,CAAE2N,OAAQ,MAAOF,MAAO,QAE9BoN,YAAUsS,EAAOmI,MAAMv2B,KAK3BouB,EAAO38B,OAAO8sC,KAAI,SAAC/L,GAAD,OACjB,wBAAI1X,IAAK0X,EAAK5kC,MACZ,wBAAIqT,MAAO,CAAE2N,OAAQ,MAAOF,MAAO,QAChC8jB,EAAK5kC,MAER,wBACEyT,UAAU,iBACVJ,MAAO,CAAE2N,OAAQ,MAAOF,MAAO,QAE9BoN,YAAU0W,EAAKn8B,MAAM2J,IAIxB,wBACEqB,UAAU,iBACVJ,MAAO,CAAE2N,OAAQ,MAAOF,MAAO,QAE9B8jB,EAAKqF,aAAe,EAEnB/b,YAAU0W,EAAKqF,aAAa73B,GAQ1B,QAIV,wBAAIqB,UAAU,yBACZ,4BAAKojB,EAAgBrf,YAIrB,wBAAI/D,UAAU,kBACbya,YAAUsS,EAAO9N,WAAWtgB,IAU7B,wBAAIqB,UAAU,kBACbya,YAAUsS,EAAOoI,kBAAkBx2B,KAWtC,wBAAIqB,UAAU,yBACZ,4BAAK8pC,EAAa1mB,EAAgBnf,aAAcmf,EAAgBpf,YAChE,6BACA,wBACEhE,UAAU,iBACVJ,MAAO,CAAE2N,OAAQ,MAAOF,MAAO,QAE9BoN,YAAUsS,EAAOjQ,UAAUne,KAWhC,4BACE,4BAAKmrC,EAAa1mB,EAAgBjf,aAAcif,EAAgBlf,YAChE,iCACA,wBAAIlE,UAAU,kBACbya,YAAUsS,EAAOoI,kBAAoBpI,EAAOjQ,UAAUne,QAc/D,wBAAIqB,UAAU,SACbsmB,EAEAD,EACD,6BACA,wBAAIrmB,UAAU,QAAQ8pC,EAAa1mB,EAAgB/e,OAAQ+e,EAAgBhf,MAC3E,yBACExE,MAAO,CACLyhD,UAAW,OACXY,UAAW,SACX50C,MAAO,SAIT,2BAAOrN,UAAU,aAAaJ,MAAO,CAAEyN,MAAO,QAC9C,4BAAK,wBAAKzN,MAAO,CAAEyN,MAAO,MAAMqL,OAAO,SAAW0K,EAAgB9e,SAChE,wBAAI1E,MAAO,CAAEyN,MAAO,MAAMqL,OAAO,SAC9B0K,EAAgBxf,UAEnB,wBAAIhE,MAAO,CAAEyN,MAAO,MAAMqL,OAAO,SAC9B0K,EAAgBvf,YAOrB,2BAAO7D,UAAU,iBACf,+BACG+sB,EAAOz8B,QAAQ4sC,KAAI,SAAC/L,GAAD,OAClB,wBAAI1X,IAAK0X,EAAK5kC,MACZ,wBAAIqT,MAAO,CAAEyN,MAAO,QAAU8jB,EAAK5kC,MACnC,wBAAIyT,UAAU,iBAAkBJ,MAAO,CAAEyN,MAAO,QAC/CoN,YAAU0W,EAAKn8B,MAAM2J,IAEtB,wBAAIqB,UAAU,iBAAkBJ,MAAO,CAAEyN,MAAO,QAC/CoN,YAAU0W,EAAK4F,aAAap4B,QAIjC,wBAAIqB,UAAU,yBACZ,wBAAI6hD,QAAS,MACb,wBAAIA,QAAS,OAEf,wBAAI7hD,UAAU,yBACd,wBAAI6hD,QAAS,KAAKz+B,EAAgB7e,YAClC,wBAAIs9C,QAAS,OAEZ90B,EAAO6K,SAASn8B,OAAS,GACxB,4BACE,wBAAIomD,QAAS,IAAI7hD,UAAU,iBACxBojB,EAAgBuhC,YAEnB,wBAAI9C,QAAS,IAAI7hD,UAAU,kBACzB,0BACEJ,MAAO,CAAEC,SAAU,OAAQo9B,YAAa,SAD1C,IAGI7Z,EAAgBze,OAAS,IAC1BqW,YAEC+R,EAAOuK,uBACP,EACAjd,EACAc,GATJ,KAcCV,YAAUsS,EAAOqK,mBAAmBz4B,KAY1CouB,EAAO6K,SAASn8B,OAAS,GACxB,4BACE,wBAAIomD,QAAS,IAAI7hD,UAAU,iBACvBkjB,EAAiCu/B,EAAlBD,GAEnB,wBAAIX,QAAS,IAAI7hD,UAAU,kBACzB,0BACEJ,MAAO,CAAEC,SAAU,OAAQo9B,YAAa,SAD1C,IAGI7Z,EAAgBze,OAAS,IAC1BqW,YAEC+R,EAAOwK,wBACP,EACAld,EACAc,GATJ,KAcCV,YAAUsS,EAAOsK,oBAAoB14B,KAYhB,IAA3BouB,EAAO6K,SAASn8B,QACf,4BACE,wBAAIomD,QAAS,IAAI7hD,UAAU,iBACvBkjB,EAAgCu/B,EAAlBD,GAElB,wBAAIX,QAAS,IAAI7hD,UAAU,kBAE1Bya,YAAUsS,EAAOqK,mBAAmBz4B,KAYzC,wBAAIqB,UAAU,yBACd,wBAAI6hD,QAAS,MACb,wBAAIA,QAAS,OAEb,wBAAI7hD,UAAU,yBACd,wBAAI6hD,QAAS,KAAKz+B,EAAgB1e,YAClC,wBAAIm9C,QAAS,OAEZ90B,EAAO6K,SAASn8B,OAAS,GACxB,4BACE,wBAAIomD,QAAS,IAAI7hD,UAAU,iBACxBojB,EAAgB9f,oBAInB,wBAAIu+C,QAAS,IAAI7hD,UAAU,kBACzB,0BACEJ,MAAO,CAAEC,SAAU,OAAQo9B,YAAa,SAD1C,IAMIjiB,YAAY+R,EAAOiI,aAAc,EAAG3a,EAAac,GANrD,IAUMH,YAAY+R,EAAOuK,uBAAwB,EAAGjd,EAAac,GAVjE,KAaA,gCACCV,YAAUG,KAAKhF,IAAI,EAAGmX,EAAOiI,aAAejI,EAAOuK,wBAAwB34B,MAKjFouB,EAAO6K,SAASn8B,OAAS,GACxB,4BACE,wBAAIomD,QAAS,IAAI7hD,UAAU,iBACzBkjB,EAAgCu/B,EAAlBD,GAEhB,wBAAIX,QAAS,IAAI7hD,UAAU,uCACjD,0BAC0BJ,MAAO,CAAEC,SAAU,OAAQo9B,YAAa,SADlE,IAMYjiB,YAAY+R,EAAOkI,aAAa7T,QAAO,SAACniB,EAAGwf,GAAJ,OAAUxf,EAAIwf,IAAG,GAAI,EAAGpE,EAAac,GANxF,IAWYH,YAAY+R,EAAOwK,wBAAyB,EAAGld,EAAac,GAXxE,KAewB,gCAECV,YAAUG,KAAKhF,IAAI,EAAGmX,EAAOkI,aAAa7T,QAAO,SAACniB,EAAGwf,GAAJ,OAAUxf,EAAIwf,IAAG,GAAKsO,EAAOwK,yBAAyB54B,MAiBlF,IAA3BouB,EAAO6K,SAASn8B,QACf,4BACE,wBAAIomD,QAAS,IAAI7hD,UAAU,iBACvBkjB,EAAgCu/B,EAAlBD,GAElB,wBAAIX,QAAS,IAAI7hD,UAAU,uCAIzB,0BACEJ,MAAO,CAAEC,SAAU,OAAQo9B,YAAa,SAD1C,IAMMjiB,YAAY+R,EAAOiI,aAAc,EAAG3a,EAAac,GANvD,IAWMH,YAAY+R,EAAOuK,uBAAwB,EAAGjd,EAAac,GAXjE,KAcA,gCAECV,YAAUG,KAAKhF,IAAI,EAAGmX,EAAOiI,aAAejI,EAAOuK,wBAAwB34B,SA0MxF,wBAAIqB,UAAU,SACbsmB,EAEAD,EACD,6BACA,wBAAIrmB,UAAU,QAAd,IAAuBojB,EAAgB5d,MACvC,yBAAKxF,UAAU,cAAc8pC,EAAe1mB,EAAgB1d,UAAU0d,EAAgB3d,SACtF,yBACE7F,MAAO,CACLyhD,UAAW,OACXY,UAAW,SACX50C,MAAO,SAGT,2BAAOrN,UAAU,kBACf,+BACE,4BACE,wBAAIqN,MAAM,OAAO+V,EAAgBzd,YACjC,wBAAI3F,UAAU,iBAAiBqN,MAAM,OACpCoN,YAAUsS,EAAOoI,kBAAoBpI,EAAOjQ,UAAUne,KAWzD,4BACE,wBAAIqB,UAAU,yBACZ,6BACCojB,EAAgBxd,YAEnB,wBAAI5F,UAAU,4BAEdkjB,GAEA,4BACA,4BACE,iCACCE,EAAgBvd,WAChBnG,KAAKZ,MAAM8gB,GAHd,KAKA,wBAAI5f,UAAU,kBAEXya,YAAU/a,KAAKZ,MAAM62B,gBAAgBh3B,KAG1C,4BACE,4BACE,iCACCukB,GAAgB4mB,EAAc1mB,EAAgBnd,cAAcwP,QAAQ,KAAK,MAAO2N,EAAgBtd,YAEnG,wBAAI9F,UAAU,kBAEXya,YAAU/a,KAAKZ,MAAM42B,iBAAiB/2B,KAG1CouB,EAAO8I,UAAY9I,EAAO6I,QAAUI,GACnC,4BACE,4BACE,iCACC9S,EAAcE,EAAgBrd,WAAW0P,QAAQ,KAAK,MAAMA,QAAQ,KAAKsX,EAAOkJ,qBAAqB7S,EAAgBrd,WAAW0P,QAAQ,KAAKsX,EAAOkJ,sBAEvJ,wBAAIj2B,UAAU,kBACbya,YAAUsS,EAAOmJ,iBAAiBv3B,KAYtCouB,EAAO8I,UAAY9I,EAAO6I,QAAU6Q,GACnC,4BACE,4BACE,iCACCvjB,EAAcE,EAAgBpd,WAAWyP,QAAQ,KAAK,MAAM2N,EAAgBpd,YAE/E,wBAAIhG,UAAU,kBACbya,YAAUsS,EAAOoJ,iBAAiBx3B,KAYvC,gCAKN,yBAAKiB,MAAO,CAAEmL,MAAO,WAAYoC,UAAW,SAC1C,6BACA,yBAAKvN,MAAO,CAAEsN,WAAY,OAAQG,MAAO,QACvC,yBAAKzN,MAAO,CAAEyN,MAAO,QACnB,6BACEjO,GAAG,OACHY,UAAU,mBACVJ,MAAO,CAAE2N,OAAQ,UAEjB,kBAAC,MAAD,CAAK/E,KAAM+7C,EAAgB/L,QAASA,QAK5C,6BACA,6BA8BClyB,EAEAD,EACD,6BACA,6BAvpCJ,IAupCW,6BACP,wBAAIrmB,UAAU,QAAQojB,EAAgBld,MACtC,uBAAGlG,UAAU,QAAQojB,EAAgBjd,OACrC,6BA1pCJ,IA0pCW,6BACP,6BACA,6BACA,6BAGCmgB,EAEAD,EACD,6BACA,6BApqCJ,IAoqCW,6BACP,wBAAIrmB,UAAU,QAAQojB,EAAgB/c,OACtC,uBAAGrG,UAAU,QAAQojB,EAAgB9c,QACrC,6BAvqCJ,IAuqCW,6BACP,6BACA,6BACA,6BACA,uBAAGtG,UAAU,QACVojB,EAAgB7c,YACjB,6BACA,0BAAM3G,MAAO,CAAEwS,YAAa,UACzBgR,EAAgB5c,eAGrB,6BACA,6BACA,uBAAGxG,UAAU,QACVojB,EAAgB3c,YACjB,6BACA,0BAAM7G,MAAO,CAAEwS,YAAa,UACzBgR,EAAgB5c,eAGrB,6BACA,6BACA,uBAAGxG,UAAU,QACVojB,EAAgB1c,YACjB,6BACA,0BAAM9G,MAAO,CAAEwS,YAAa,UACzBgR,EAAgB5c,eAGrB,6BACA,wBAAIxG,UAAU,SACbsmB,QAnlDf,GAAwCjmB,c,uRCDjC,WAA0CvB,GAA1C,mCAAAG,EAAA,6DAGK9P,EAAM,IAAI65B,KACV6B,SAGS,GACA,CAAC,IAAK,GAAK,IAAK,KAEX,EACD,IACE,KACJ,IACX2E,EAAQ,EAKN7wB,EAAOG,EAAMlE,UAAUqB,cAAc,GAAGyC,SAC5B,IAKpBq9C,EAAgB5sD,EAAKwP,EAAM,IACvBm+C,EAAYx8C,IAAW3B,GAAMgI,WAAa,KAAOrG,IAAW3B,GAAMiI,YACtEu1C,EAAWhtD,EAAK2tD,EAhBG,IAgBiB,GAAIttB,EAjBpB,GAmBpB0sB,EAAgB/sD,GAChB2tD,EAAYx8C,IAAW3B,GAAMkI,aAE/Bs1C,EAAWhtD,EAAK2tD,EArBK,IAoBnBttB,GAAgB,KArBI,GAwBtBA,GAAgB,IAtBO,KAwBJC,EACbpG,EAAGrW,SAASC,eAAe,YAAY2xC,aACvCx7B,EAAGpW,SAASC,eAAe,YAAY4xC,YAChC,EACC,IACRC,EALar1B,EAKKpG,EAAED,EAFb,IAHMqG,EAK8BpG,EAAED,EAC7C27B,EANat1B,EAMKpG,EAAED,EAHb,IAGyBA,EAAEC,EANrBoG,EAQjBtgC,EAAI+6B,SACF,WACAtB,YAAO2G,IACP3G,YAAO4G,GACP5G,YAAOm8B,GACPn8B,YAAOk8B,IAMTt1B,GAAgB,GA3CK,KA4CrBstB,EAAYx8C,IAAW3B,GAAMmI,aAC7Bq1C,EAAWhtD,EAAK2tD,EA9CG,IA8CkBttB,EA/CjB,GAgDpBA,GAAgB,IA9CK,KAgDrBnG,EAAGrW,SAASC,eAAe,gBAAgB2xC,aAC3Cx7B,EAAGpW,SAASC,eAAe,gBAAgB4xC,YAC3CC,EA1BiBr1B,EA0BCpG,EAAED,EAvBT,IAHMqG,EA0B0BpG,EAAED,EAC7C27B,EA3BiBt1B,EA2BCpG,EAAED,EAxBT,IAwBqBA,EAAEC,EA3BjBoG,EA4BjBtgC,EAAI+6B,SACF,eACAtB,YAAO2G,IACP3G,YAAO4G,GACP5G,YAAOm8B,GACPn8B,YAAOk8B,IAGTz7B,EAAGrW,SAASC,eAAe,aAAa2xC,aACxCx7B,EAAGpW,SAASC,eAAe,aAAa4xC,YACxCC,EAtCiBr1B,EAsCCpG,EAAED,EAlCR,QAJKqG,EAsC4BpG,EAAED,EAC/C27B,EAvCiBt1B,EAuCCpG,EAAED,EAnCR,IAmCgB,EAAQA,EAAEC,EAAE27B,IAExCx1B,GAAgB,MAChBstB,EAAYx8C,IAAW3B,GAAMoI,aAC7Bo1C,EAAWhtD,EAAK2tD,EApEG,IAoEkBttB,EArEjB,GAsEpBA,GAAgB,IApEK,KAqErBrgC,EAAI+6B,SACF,YACAtB,YAxEiB,IAwED,GAChBA,YAAO4G,GAGP5G,YAAOo8B,KACPp8B,YApDe6G,EAoDGpG,EAAED,IAGvBC,EAAGrW,SAASC,eAAe,YAAY2xC,aACvCx7B,EAAGpW,SAASC,eAAe,YAAY4xC,YACvCC,EAzDkBr1B,EAyDApG,EAAED,EArDP,QAJKqG,EAyD2BpG,EAAED,EAC/C27B,EA1DkBt1B,EA0DApG,EAAED,EAtDP,IAsDe,EAAQA,EAAEC,EAAE27B,IACvC71D,EAAI+6B,SACF,WACAtB,YAAO2G,KACP3G,YAAO4G,GAGP5G,YAAOo8B,KACPp8B,YAlEe6G,EAkEGpG,EAAED,IAGtBj6B,EAAI2/B,OAAOxuB,IAAW3B,GAAMyH,UAEtBwZ,EAAK9gB,EAAM8gB,GACXqlC,EAAQnmD,EAAMkiC,cAAcz2B,eAAe,GAAG9O,OACpDqhD,EAAYx8C,IAAW3B,GAAMgI,WAAa,KAAOrG,IAAW3B,GAAMiI,YAelEs+C,EACE/1D,EACA2P,EAAMkiC,cACNphB,EACA2P,EACA,KAvHkB,EAwHlB5wB,GACA,EACA,YACA,EACAsmD,EA9IiB,EAgJjB,IACAnI,EAAW,GAAI,GAAI,GAAIx8C,IAAW3B,GAAMyH,UAKxC6+C,EAnJ2B,IAoJ3BA,EAAU,GAEVC,EACE/1D,EACA2P,EAAMkiC,cACNphB,EACA2P,EACA,KA5IgB,EA6IhB5wB,GACA,EACA,YA9JyB,GAgKzBsmD,EAnKe,EAoKA,IACfnI,EAAW,GAAI,GAAI,GAAIx8C,IAAW3B,GAAMyH,UAEnC6+C,EAAU,KACjBC,EACE/1D,EACA2P,EAAMkiC,cACNphB,EACA2P,EACA,KA3JgB,EA4JhB5wB,GACA,EACA,YA7KyB,GA+KzBsmD,EAlLe,EAmLA,IACfnI,EAAW,GAAI,GAAI,GAAIx8C,IAAW3B,GAAMyH,UAE1C8+C,EACE/1D,EACA2P,EAAMkiC,cACNphB,EACA2P,EACA,KAzKgB,EA0KhB5wB,GACA,EACA,YACA,GACAsmD,EAhMe,EAiMA,IACfnI,EAAW,GAAI,GAAI,GAAIx8C,IAAW3B,GAAMyH,WAI5CjX,EAAI2/B,OAAOxuB,IAAW3B,GAAMyH,UAmGpBoC,EAAOrZ,EAAI29B,aAGf39B,EAAIg9B,KAAK,wBApSZ,kBAqSU3jB,GArSV,6C,sBA2SH,SAASuzC,EAAgB5sD,EAAKwP,EAAMyR,GAClCjhB,EAAI88B,QAAQzD,IAAWE,UACVxoB,IAATkQ,EACW,OAATzR,EAAexP,EAAI+8B,YAAYpD,YAAO,KACrC35B,EAAI+8B,YAAYpD,YAAO,MAE5B35B,EAAI88B,QAAQzD,IAAWG,KACV,OAAThqB,EAAexP,EAAI+8B,YAAYpD,YAAO1Y,IACrCjhB,EAAI+8B,YAAYpD,YAAO1Y,EAAO,KAGrCjhB,EAAIk9B,aAAa,GAAM,GAAM,IAW/B,SAAS6vB,EAAgB/sD,GACvBA,EAAI88B,QAAQxD,IAAOC,KACnBv5B,EAAI+8B,YAAYpD,YAAO,KACvB35B,EAAIk9B,aAAa,GAAM,GAAM,IAiB/B,SAAS8vB,EAAWhtD,EAAK8sD,EAAM/rC,EAAMsf,EAAOC,GAC1CtgC,EAAIw8B,cAAcswB,EAAMrzB,YAAO1Y,GAAO0Y,YAAO4G,GAAQ5G,YAAO6G,IA+B9D,SAASgtB,EACPttD,EACAogC,EACAC,EACAnR,EACA9Q,EACAgvC,EACAG,EACAF,EACA3uB,GAEA1+B,EAAIk9B,aAAa,GAAM,GAAM,IAC7B,IAAMoB,OAAqBvtB,IAAds8C,EAA0B,CAAC,IAAK,IAAK,KAAOA,EAEzDrtD,EAAI88B,QAAQxD,IAAOi0B,EAAO/zB,IAAOD,KACjCv5B,EAAIq+B,SACFC,EAHgB,CAAC,GAAM,GAAM,IAK7B8B,EACAC,EACAnR,EACA9Q,EACAgvC,GACA,EACA1uB,GAoCD,SAASq3B,EACd/1D,EACA21B,EACAlF,EACA2P,EACAE,EACA9wB,EACAi+C,EACA7iC,EACA8iC,EACAoI,EACA9qC,EACAgrC,EACAC,EAAOC,EAAOC,EAAMC,EAAMn/C,GAE1B,IAAInL,EAEA8yB,EAAOjJ,EAAKxa,cAAc7O,OAE1B+zB,EAAO21B,EACPvvC,EACc,cAAhBmE,EACgB,IAAZ8iC,EA5c2B,GA8czB,GA7cwB,GA+c1BxiC,EAAuB,OAAT1b,EAAgB,IAAM,IACpCwc,EAAqB,OAATxc,EAAgB,IAAM,IAEpCgvB,EAAS,GAEbx+B,EAAIw7B,QAAQ5Q,GAGZgiC,EAAgB5sD,EAAKwP,EAAM,IAC3B,IAAIm+C,EAAYsI,EAAS,KAAOE,EAmBhC,IAlBAnJ,EAAWhtD,EAAK2tD,EAAWvtB,EAAUC,EAAOC,GAG5CysB,EAAgB/sD,GAOhBgtD,EAAWhtD,EALX2tD,GAleuB,IAmepB3iC,EACGkrC,EACAE,GACwC,GACnBh2B,EAN3BC,GAAgB,IAtBD,GA4B6BC,GAE5CD,GAAgB,GAIhB7B,EAAOxyB,KAAKs0B,GAAa1B,EAAO,IAChCJ,EAAOxyB,KAAKs0B,GAAa1B,EAAO,IAC3B9yB,EAAI,EAAGA,EAAI8yB,IAAQ9yB,EACtB0yB,EAAOxyB,MAAMs0B,EAAa,EAAIA,GAAc1B,EAAO,KAAOA,EAAO,IAInE,IAAIkvB,EAAiBxtB,EAnfG,IAofpBtV,IAA0B8iC,EAAkBlvB,EAAO0B,EAAa,GAEpE,IAAIpR,EAASyG,EAAKxa,cACd4yC,EAAY,GAEhB,IAAKjiD,EAAI,EAAGA,EAAI8yB,IAAQ9yB,EACtBiiD,EAAU/hD,KAAKhM,EAAI+9B,UAAU7O,EAAOpjB,KAClBiiD,EAAUjiD,GAG9B,IAAKA,EAAI,EAAGA,EAAI8yB,IAAQ9yB,EACtB0yB,EAAO1yB,GAAKiiD,EAAUjiD,GAAK,IAE7B,IAAIkiD,EAAa,EACjB,IAAKliD,EAAI,EAAGA,EAAI8yB,IAAQ9yB,EAAGkiD,GAAcxvB,EAAO1yB,GAGhD,IAAImiD,EAAqB,GAGrBC,GACDJ,EAAiBE,EAAaxvB,EAAO,GAAKA,EAAO,KAAOI,EAAO,GAClE,GA1gBwB,IA0gBpB5T,EACF,IAAKlf,EAAI,EAAGA,EAAI8yB,IAAQ9yB,EAAG0yB,EAAO1yB,IAAMoiD,OACnC,GA7gBgB,IA6gBZljC,EAGT,IAFAkjC,GACGJ,EAAiBE,EAAaxvB,EAAO,GAAKA,EAAO,KAAOI,EAAO,GAC7D9yB,EAAI,EAAGA,EAAI8yB,IAAQ9yB,EAAa,IAANA,IAAS0yB,EAAO1yB,IAAMoiD,GAGvD,IAAKpiD,EAAI,EAAGA,EAAI8yB,IAAQ9yB,EACtBmiD,EAAmBjiD,KAAKhM,EAAIm+B,mBAAmBjP,EAAOpjB,GAAI0yB,EAAO1yB,KACtCmiD,EAAmBniD,GAe9Cu0B,GAAgB,GAzFH,GA0FbstB,EAAYh4B,EAAK1a,UACjBjb,EAAI+8B,YAAYpD,YAAO,KACvB35B,EAAIk9B,aAAa,GAAM,GAAM,IAC7B8vB,EAAWhtD,EAAK2tD,EAAWvtB,EAAUC,EAAOC,GAM9C,IAYI+sB,EAZEc,EA7MJ,SACEnuD,EACAogC,EACAC,EACAnR,EACA9Q,EACAgvC,EACAC,GAEArtD,EAAI+8B,YAAYpD,YAAO,KACvB,IAAM2E,OAAqBvtB,IAAds8C,EAA0B,CAAC,IAAK,IAAK,KAAOA,EAezD,OAbArtD,EAAI88B,QAAQxD,IAAOE,KACTx5B,EAAIq+B,SACZC,EAHgB,CAAC,IAAK,IAAK,KAK3B8B,EACAC,EACAnR,EACA9Q,EACAgvC,GACA,GACA,GACA,GAsLUD,CACdntD,EACAogC,EAPAC,GAAgB,GA9FH,GAuGbnR,EAvGa,GAyGbsP,EACA,CAAC,GAAI,GAAI,MAIP/4B,EAAOioD,EAIX,IAFID,IAAiBptB,GAAgB8tB,GAE9B1oD,EAAOqwD,GAAS,CAGrB,GACErwD,IAASghB,IACK,IAAZinC,GAAiBoI,EAAUrwD,EAAO,GA/jBP,KAgkB1BioD,GACCoI,EAjkByB,GAikBYrwD,EAAO,GAChD,CACA,GAtkBmB,IAskBfulB,EASF,OARAgiC,EACEhtD,EACA,GACAogC,EACAC,EAAS,EAhIF,GAgIgB,EAAI,GAC3BC,GAEFtgC,EAAI6/B,gBAAgB5oB,GACbxR,EAGTA,EAAOqwD,EAAU,EACjBz1B,GAxIW,GAyIXrgC,EAAI88B,QAAQxD,IAAOE,KACnBwzB,EAAWhtD,EAAK,SAAUogC,EAAUC,EAAQjiB,GAAYkiB,GACxDtgC,EAAI88B,QAAQxD,IAAOC,KAErBrK,EAAS,GACb+iB,MAAOxwB,WAAWkU,EAAKva,eAAe,IAAI,GAAI5L,GAAM+W,WAAYoP,EAAKva,eAAe,IAAI,GAAI5L,EAAK+W,YAC7F,IAAImY,EAAQ,GACZ,IAAK5yB,EAAI,EAAGA,EAAI8yB,IAAQ9yB,EAEtBojB,EAAOljB,KACE,IAANF,GAAoB,IAATrG,GAAqB,IAANqG,EACvBsiD,OAAOz4B,EAAKva,eAAetP,GAAGrG,IACxB,KAANqG,EACF2V,WAAWkU,EAAKva,eAAetP,GAAGrG,GAAO+J,GAAM+W,WAC7CsF,YACEpK,WAAW2E,YAAYuP,EAAKva,eAAetP,GAAGrG,GAAO+J,IACrD,EACA0b,EACAc,GACAzF,YAERmY,EAAM1yB,KAAK,GAEbq0B,GAhKa,GAiKbgtB,EAAY5nD,EAAO,EAAI,CAAC,IAAK,IAAK,KAAO,CAAC,IAAK,IAAK,KAChDA,GAAQgrB,IACV48B,EAAY,CAAC,IAAK,IAAK,KACvBL,EACEhtD,EACS,OAATwP,EAAgB,KAAO,KACvB4wB,EAAW0tB,EAAiB,IAC5BztB,EAAQjiB,GAAa,IACrBkiB,IAIJgtB,EACEttD,EACAogC,EACAC,EACAnR,EAjLW,GAmLXsP,GACA,EACA6uB,EACA3uB,GAGFj5B,IAGkB,cAAhBmlB,EACF5qB,EAAI6/B,gBAAgB5oB,GACjBjX,EAAI2/B,OAAO1oB,GCjpBX,IAAMo/C,EAAb,kDACE,WAAY1mD,GAAQ,IAAD,8BACjB,cAAMA,IAKR+/C,MAAQ,YDSH,SAAP,2BCRI4G,CAA2B,EAAK3mD,QAPf,EADrB,0CAYE,WAAU,IAAD,EA8GH7D,EACAsgB,EACAmqC,EA9GE/mD,EAAKe,KAAKZ,MAAMlE,UAAUqB,cAAc,GAAGyC,SAC3CinD,EAAUjmD,KAAKZ,MAAM+7B,kBAAkBqC,KAAI,SAAArc,GAAC,OAAKA,KAEnD+kC,EAAWlvC,OAAOmvC,YAAc,KAAWnvC,OAAOqtC,aAAe,IAE/D+B,EACJ,IACAlrC,KAAKmrC,KACH,EACEnrC,KAAKhF,IACHgF,KAAKhF,IAAL,MAAAgF,KAAI,YAAQlb,KAAKZ,MAAM67B,kBACvB/f,KAAKhF,IAAL,MAAAgF,KAAI,YAAQlb,KAAKZ,MAAM+7B,oBACvBjgB,KAAKhF,IAAL,MAAAgF,KAAI,YAAQlb,KAAKZ,MAAM4e,gBACvB9C,KAAKhF,IAAL,MAAAgF,KAAI,YAAQlb,KAAKZ,MAAM87B,wBAEvB,KAMF4d,EAAU,CACd30B,YAAY,EACZC,qBAAqB,EACrBG,OAAQ,CACNjS,SAAS,EACTkS,OAAQ,CACNF,UAAW,OACXnkB,SAAU+lD,EAAO,GAAG,KAGxBnP,OAAQ,CACNC,MAAO,CACL,CACEC,SAAS,EACTC,MAAO,CACL/2C,SAAW+lD,EAAO,GAAG,GACrB/O,aAAa,KAInBC,MAAO,CACL,CACEH,SAAS,EACTC,OAAK,GACH/2C,SAAW+lD,EAAO,GAAG,GACrB/O,aAAa,GAFV,6BAGY,GAHZ,sBAIM,IAJN,0BAKU,GALV,oBAMIiP,GANJ,0BAOH,SAAU9wD,EAAOurB,EAAOlC,GAUpB,OARErpB,EAAQ,KAAQA,GAAS,IACrBA,EACS,OAAT2J,EACAqZ,KAAKC,eAAepC,OAAO7gB,EAAQ,KAAQ,KAC1CgjB,KAAKC,eAAepC,OAAO7gB,EAAQ,KAAQ,KAAKygB,QAC/C,IACA,QAfT,OAwBP2N,EAAgBpc,IAAcrI,GAK9BzO,EAAQwP,KAAKZ,MAAMlE,UAAUQ,QAE7BopD,EADe9jC,YAAexwB,GACJ,GAAG,GAE7BsY,EAAO,CACX0b,OAAQxkB,KAAKZ,MAAM47B,WACnB9U,SAAU,CACR,CACEmnB,MAAO3pB,EAAgBlc,OACvBsB,KAAM9I,KAAKZ,MAAM87B,qBACjBnN,MAAM,EACNtG,YAAa,iBACbtB,gBAAiB,kBAEnB,CACEknB,MACA3pB,EAAgBjc,MAChBqB,KAAM9I,KAAKZ,MAAM67B,gBACjBlN,MAAM,EACNtG,YAAa,UACbtB,gBAAiB,WAEnB,CACEknB,MACA3pB,EAAgBhc,YAChBoB,KAAMm9C,EACNl4B,MAAM,EACNtG,YAAa,UACbtB,gBAAiB,aAMnBmgC,EAAgB,GAIhBlpC,EAAY,EAChB,IAAK7hB,EAAI,EAAGA,EAAIyE,KAAKZ,MAAMlE,UAAU6hB,WAAWhhB,OAAQR,IACtD6hB,GAAapd,KAAKZ,MAAMlE,UAAU6hB,WAAWxhB,GAAG8hB,UAGlD,IAAIkpC,EAAa,GAEjB,IAAKhrD,EAAI,EAAGA,EAAIyE,KAAKZ,MAAM4e,cAAcjiB,SAAUR,EAAG,CAGpD,IAFAgrD,EAAa9qD,MAAMuE,KAAKZ,MAAM4e,cAAcziB,IAC5CyqD,EAAK,EACAnqC,EAAItgB,EAAGsgB,EAAI7b,KAAKZ,MAAM4e,cAAcjiB,SAAU8f,EACjDmqC,GAAMhmD,KAAKZ,MAAM4e,cAAcnC,GAAKX,KAAKuC,IAAI,KAAM5B,EAAItgB,GAErDA,EAAI,GAAKA,EAAI,KAAIyqD,GAAM5oC,EAAYlC,KAAKuC,IAAI,KAAMliB,IACtD+qD,EAAc7qD,KAAKuqD,GAanB,IAAMhoC,EAAgB,CACtBwG,OAAQxkB,KAAKZ,MAAM47B,WACnB9U,SAAU,CACR,CACEmnB,MAAO3pB,EAAgB/b,UACvBmB,KAAMy9C,EAENx4B,MAAM,EACNtG,YAAa,UACbtB,gBAAiB,aAKnBjC,EAAa,CACfC,YAAY,EACZ5jB,MAAO,CACL+R,SAAS,EACT/E,SAAU,MACV8W,KAAMX,EAAgB9b,UACtBzH,SAAW+lD,EAAO,GAAG,GACrB5hC,UAAW,QAEbC,OAAQ,CACNjS,SAAS,EACT/E,SAAU,QACViX,OAAQ,CACNF,UAAW,OACXnkB,SAAU+lD,EAAO,GAAG,MAKtBM,EAAkB7hC,KAAKC,MAAMD,KAAKE,UAAUX,IAGhDsiC,EAAgBjmD,MAAM8jB,KAAMX,EAAgB7b,SAE5C,IAAM4+C,EAAgB,CACpBjiC,OAAQ,CACNd,EAAgB5b,SAAS4b,EAAgB3b,KAAK2b,EAAgB1b,OAAO0b,EAAgBzb,WAAWyb,EAAgBxb,aAElHge,SAAU,CACR,CACKpd,KAAM,CACP+W,YAAuB7f,KAAKZ,MAAMlE,UAAUtE,IAAOQ,KAAK7B,KACxDsqB,YAAuB7f,KAAKZ,MAAMlE,UAAUtE,IAAOU,eAAe/B,KAClEsqB,YAAuB7f,KAAKZ,MAAMlE,UAAUtE,IAAOW,4BAA4BhC,KAC9EsqB,YAAuB7f,KAAKZ,MAAMlE,UAAUtE,IAAOY,KAAKjC,KAEzDsqB,YAAuB7f,KAAKZ,MAAMlE,UAAUtE,IAAOM,UAAU3B,KAC7DsqB,YAAuB7f,KAAKZ,MAAMlE,UAAUtE,IAAOK,sBAAsB1B,KACzEsqB,YAAuB7f,KAAKZ,MAAMlE,UAAUtE,IAAOI,aAAazB,KAChEsqB,YAAuB7f,KAAKZ,MAAMlE,UAAUtE,IAAOG,YAAYxB,KAC/DsqB,YAAuB7f,KAAKZ,MAAMlE,UAAUtE,IAAOC,mBAAmBtB,KACtEsqB,YAAuB7f,KAAKZ,MAAMlE,UAAUtE,IAAOS,aAAa9B,MAElE4wB,gBAAiB,CAAC,UAAW,UAAW,UAAW,UAAW,cAK9DugC,EAAe,CACnBliC,OAAQ,CACNd,EAAgBvb,MAAOub,EAAgBtb,MAAOsb,EAAgBrb,UAAWqb,EAAgBpb,WAAWob,EAAgBnb,SAGtH2d,SAAU,CACR,CACKpd,KAAM,CACPkX,YAAsBhgB,KAAKZ,MAAMlE,UAAUrF,KAAYI,kBAAkBV,KACzEyqB,YAAsBhgB,KAAKZ,MAAMlE,UAAUrF,KAAYK,oBAAoBX,KAC3EyqB,YAAsBhgB,KAAKZ,MAAMlE,UAAUrF,KAAYU,aAAahB,KACpEyqB,YAAsBhgB,KAAKZ,MAAMlE,UAAUrF,KAAYa,qBAAqBnB,KAE5EyqB,YAAsBhgB,KAAKZ,MAAMlE,UAAUrF,KAAYW,aAAajB,KACpEyqB,YAAsBhgB,KAAKZ,MAAMlE,UAAUrF,KAAYM,eAAeZ,KACtEyqB,YAAsBhgB,KAAKZ,MAAMlE,UAAUrF,KAAYY,MAAMlB,KAC7DyqB,YAAsBhgB,KAAKZ,MAAMlE,UAAUrF,KAAYS,gBAAgBf,KACvEyqB,YAAsBhgB,KAAKZ,MAAMlE,UAAUrF,KAAYC,cAAcP,KACzEyqB,YAAsBhgB,KAAKZ,MAAMlE,UAAUrF,KAAYG,wBAAwBT,KAC/EyqB,YAAsBhgB,KAAKZ,MAAMlE,UAAUrF,KAAYQ,oBAAoBd,KAC3EyqB,YAAsBhgB,KAAKZ,MAAMlE,UAAUrF,KAAYO,iBAAiBb,KACxEyqB,YAAsBhgB,KAAKZ,MAAMlE,UAAUrF,KAAYc,QAAQpB,MAE7D4wB,gBAAiB,CAAC,UAAW,UAAW,UAAW,UAAW,cAkC3DtC,EAAO7jB,KAAKZ,MAAMirC,YASzBsc,EAAW3mD,KAAKZ,MAAMlE,UAAUskB,OAAOzjB,OAAO,GAChD,6BAAS2D,GAAG,aAKhB,yBAAKY,UAAU,UACf,kBAAC,MAAD,CAAMwI,KAAM29C,EAAe3N,QAAS50B,MAW9B0iC,EAAU5mD,KAAKZ,MAAMlE,UAAU6hB,WAAWhhB,OAAO,GACnD,6BAAW2D,GAAG,YAIlB,yBAAKY,UAAU,UACf,kBAAC,MAAD,CAAKwI,KAAM49C,EAAc5N,QAAS0N,MAOlC,OAH6D,IAAxCxmD,KAAKZ,MAAMlE,UAAUQ,QAAQK,QACfyY,cAAiBiI,gBAAgB,MAIhE,6BACE,wBAAInc,UAAU,QAAQujB,IAKtB,6BAEE,yBAAK3jB,MAAO,CAAEyN,MAAO,OAAQvN,MAAO,OAAQ6T,MAAO,SAE/C,2BACE3T,UAAU,mBACVJ,MAAO,CAELuN,UAAWq3C,EAAc,KACzBvnB,YAAa,MACb0U,aAAc,MACd7xC,MAAO,SAETC,QAASL,KAAKm/C,MACdpyD,KAAK,SACLuI,MAAO7I,IAAawS,GAAMvP,kBAGhC,wBAAI4Q,UAAU,QACXujB,EACD,kBAACmE,EAAA,EAAD,CACIvnB,SAAUgO,YAAWxP,MAI3B,6BACA,yBAAKiB,MAAO,CAAEyN,MAAO,QACnB,yBAAKzN,MAAO,CAAEyN,MAAO,SACrB,6BAAUjO,GAAG,WAAWY,UAAU,6BAC9B,kBAAC,MAAD,CAAKwI,KAAMA,EAAMgwC,QAASA,KAE5B,6BAAUp5C,GAAG,eAAeY,UAAU,6BACpC,kBAAC,MAAD,CAAMwI,KAAMkV,EAAe86B,QAASA,KAEtC,6BACA,wBAAIx4C,UAAU,QACTojB,EAAgBlb,UAIlB,6BACGm+C,EAAU,6BAAK,6BAAMC,UAxWvC,GAAkCxzC,IAAMzS,Y,mOCO3BkmD,EAAb,kDACE,WAAYznD,GAAQ,IAAD,8BACjB,cAAMA,IA6CR0nD,kBAAoB,WAClB,OAAO/tB,QAAQC,IAAI,CAAC,EAAK+tB,qBAAsB,EAAKC,wBA/CnC,EAkDnBD,mBAAqB,WACnB,IACIE,EAvDqB,IAwDvB,EAAKpR,gBACDhtD,KACAF,KACF0E,EA/De,IA+DZ,EAAK+R,MAAMwqC,UACZ,EAAKxqC,MAAMyjB,cACX,EAAKzjB,MAAMorC,oBAAoB,GAC3B0c,EAAQh2C,WAAW2E,YAAYxoB,IACrC85D,EAAUlsD,YACZ,EAAKmE,MAAMuW,MAVK,GAYhBsxC,EACAC,GAIC75D,EAAG,GAENyrC,YACE,EAAK15B,MAAMyrC,YACXsc,EACAD,GAECzuB,MAAK,SAAA3vB,QAEYtI,IAAZsI,EAAK,KAEP,EAAKs+C,QAAU19C,SAASmM,YAAY/M,EAAK,GAAG,GAAG7W,OAAO,KAEtD,EAAKgsB,QAAU,EAAK7e,MAAM6e,YAM7Bwa,MAAK,SAAA3vB,GACJ,EAAKk+C,yBAxFQ,EA8FnBA,mBA9FmB,sBA8FE,sCAAAznD,EAAA,sDACD,GACd0nD,EAnGqB,IAoGvB,EAAKpR,gBACDhtD,KACAF,KACF0E,EA3Ge,IA2GX,EAAK+R,MAAMwqC,UACb,EAAKxqC,MAAMyjB,cACX,EAAKzjB,MAAMorC,oBAAoB,GAC/B0c,EAAQh2C,WAAW2E,YAAYxoB,IACjC85D,EAAUlsD,YACZ,EAAKmE,MAAMuW,MAVK,GAYhBsxC,EACAC,GAEEx6D,EAAMy6D,EAAQt1D,QAAQwJ,MAAM,GAAG3O,IAC/By6D,EAAQt1D,QAAQoK,WAAa,GAAKvP,EAAMy6D,EAAQt1D,QAAQwJ,MAAM,GAAG3O,MACnEA,EAAMy6D,EAAQt1D,QAAQwJ,MAAM,GAAG3O,KAC7BwU,EAAQ,EAAK9B,MAAMkf,WACvB6oC,EAAQjrD,OAAOO,WAAWG,SAAU,GACN,IAA1B,EAAKg5C,kBACPuR,EAAQjrD,OAAOI,WACb4qD,EAAU,EACZC,EAAQjrD,OAAOqB,SAASI,OAAQ,EAChCwpD,EAAQjrD,OAAOqB,SAASY,OACtB+oD,EAAU,EACZC,EAAQjrD,OAAOgB,YAAYC,oBAAqB,EAChDgqD,EAAQjrD,OAAOgB,YAAYI,SAjIV,IAkIf,EAAK8B,MAAMwqC,UACP,EAAKyd,mBACL,EAAKjoD,MAAMorC,sBAEjB2c,EAAQjrD,OAAOgB,YAAYI,SAAW,GACtC6pD,EAAQjrD,OAAOgB,YAAYC,oBAAqB,EAChDgqD,EAAQjrD,OAAOO,WAAW6qD,WAAa,EAAKhS,KAC5C6R,EAAQjrD,OAAOO,WAAWK,WAAa4M,SAAS,EAAK+rC,aAEvD0R,EAAQjrD,OAAOO,WAAWI,WAAY,EACtCi8B,YACE,EAAK15B,MAAMyrC,YACXsc,EACAD,GACAzuB,MAAK,SAAA3vB,GAgBH,IAAIvN,EAfL,QAAmBiF,IAAfsI,EAAK,GAAG,GAiBX,IAhBAC,QAAQC,IAAI,kCACZ,EAAKmX,SAAWrX,EAAK,GAAG,GAAG7W,OAAO0lB,MAAM,EAAGzW,GAAOs8B,KAAI,SAAArc,GAAC,OACrDzX,SAASmM,YAAYsL,OAEvB,EAAK+zB,aAAepsC,EAAK,GAAG,GAAG7W,OAAOurC,KAAI,SAAArc,GAAC,OACzCzX,SAASmM,YAAYsL,OAEvB,EAAKg0B,OAASrsC,EAAK,GAAG,GAAG7W,OAAO0lB,MAAM,EAAGzW,GAAOs8B,KAAI,SAAArc,GAAC,OACnDzX,SAASmM,YAAYsL,OAEvB,EAAKi0B,gBAAkBtsC,EAAK,GAAG,GAAG7W,OAAO0lB,MAAM,EAAGzW,GAAOs8B,KAAI,SAAArc,GAAC,OAC5DzX,SAASmM,YAAYsL,OAEvB,EAAKg0B,OAAOoS,QAAQL,GAIlB3rD,EAAI,EACJA,EAAI,EAAK45C,OAAOp5C,OAASrP,EAAM,EAAK0S,MAAMkf,WAAa,IACrD/iB,EAEF,EAAK4kB,SAAS6mB,MACd,EAAKmO,OAAOnO,MACZ,EAAKkO,aAAalO,MAClB,EAAKoO,gBAAgBpO,SArER,4CA9FF,EA6KnBwgB,sBA7KmB,sBA6KK,sCAAAjoD,EAAA,sDACJ,GACd0nD,EAlLqB,IAmLvB,EAAKpR,gBACDhtD,KACAF,KACE0E,EA1LW,IA0LN,EAAK+R,MAAMwqC,UAClB,EAAKxqC,MAAMyjB,cACX,EAAKzjB,MAAMorC,oBAAoB,GAC3B0c,EAAQh2C,WAAW2E,YAAYxoB,IACrC85D,EAAUlsD,YACZ,EAAKmE,MAAMuW,MAVK,GAYhBsxC,EACAC,GAGEx6D,EAAMy6D,EAAQt1D,QAAQwJ,MAAM,GAAG3O,IAC/By6D,EAAQt1D,QAAQoK,WAAa,GAAKvP,EAAMy6D,EAAQt1D,QAAQwJ,MAAM,GAAG3O,MACnEA,EAAMy6D,EAAQt1D,QAAQwJ,MAAM,GAAG3O,KAC7BwU,EAAQ,EAAK9B,MAAMkf,WACvB6oC,EAAQjrD,OAAOO,WAAWG,SAAU,EACpCuqD,EAAQjrD,OAAOO,WAAWI,WAAY,EACtCsqD,EAAQjrD,OAAOO,WAAWM,aAAe,GACzCoqD,EAAQjrD,OAAOgB,YAAYI,SAAW,GACtC6pD,EAAQjrD,OAAOgB,YAAYC,oBAAqB,EAChDgqD,EAAQjrD,OAAOzI,QAAU,KACzB0zD,EAAQjrD,OAAOtN,SAAW,KAC1BkqC,YACE,EAAK15B,MAAMyrC,YACXsc,EACAD,GACAzuB,MAAK,SAAA3vB,GAiBH,IAAIvN,EAhBL,QAAmBiF,IAAfsI,EAAK,GAAG,GAkBX,IAjBAC,QAAQC,IAAI,kCACZ,EAAKmX,SAAWrX,EAAK,GAAG,GAAG7W,OAAO0lB,MAAM,EAAGzW,GAAOs8B,KAAI,SAAArc,GAAC,OACrDzX,SAASmM,YAAYsL,OAEvB,EAAK+zB,aAAepsC,EAAK,GAAG,GAAG7W,OAAOurC,KAAI,SAAArc,GAAC,OACzCzX,SAASmM,YAAYsL,OAEvB,EAAKg0B,OAASrsC,EAAK,GAAG,GAAG7W,OAAO0lB,MAAM,EAAGzW,GAAOs8B,KAAI,SAAArc,GAAC,OACnDzX,SAASmM,YAAYsL,OAEvB,EAAKk0B,eAAiBvsC,EAAK,GAAG,GAAG7W,OAAO0lB,MAAM,EAAGzW,GAAOs8B,KAAI,SAAArc,GAAC,OAC3DzX,SAASmM,YAAYsL,OAGvB,EAAKg0B,OAAOoS,QAAQL,GAIlB3rD,EAAI,EACJA,EAAI,EAAK45C,OAAOp5C,OAASrP,EAAM,EAAK0S,MAAMkf,WAAa,IACrD/iB,EAEF,EAAK4kB,SAAS6mB,MACd,EAAKmO,OAAOnO,MACZ,EAAKkO,aAAalO,MAClB,EAAKqO,eAAerO,SA3DJ,4CA7KL,EAkPnB9zB,kBAAoB,SAACxT,EAAIpK,QACTkL,IAAVlL,IACS,IAAPoK,EAAU,EAAK+1C,WAAangD,EAChB,IAAPoK,EAAU,EAAKg2C,YAAcpgD,EACtB,IAAPoK,EAAU,EAAKi2C,YAAcrgD,EACtB,IAAPoK,IAAU,EAAK+nD,oBAAsBnyD,IAEhD,EAAKwxD,oBAGL,IAAI/nC,GAAK,EAAKpf,MAAMm1C,WACpB,EAAKj1C,SAAS,CAAEi1C,WAAY/1B,IAC5B,EAAKqoC,QAAU,GA9PE,EAiQnBM,qBAjQmB,sBAiQI,8CAAAnoD,EAAA,sDACjB8W,EAAM,EACV,EAAKk/B,eAAiB,IAGlB+Q,EAAgB,EAAKe,mBAEzB,EAAKzR,kBAAmB,EAPH,4BAWH+R,GAAS,IAXN,iBAYZ1R,EAAI,EAZQ,YAYLA,EAAI,EAAKh4B,QAAU,GAZd,wBAaf,EAAKw3B,WAAaQ,EAClB,EAAKX,MAAQ,EAAIqS,EAAQ,IAAM,EAAKP,QAEhCQ,EAAgB,EAAKC,iBACtB,EAAKzoD,MAAMwqC,UACR0c,GAlBS,UAsBT,EAAKU,qBAtBI,QAyBf,IAFIc,EAAkB,EAClBvsD,OAxBW,EAyBVA,EAAI,EAAGA,EAAI,EAAK0iB,UAAW1iB,EAC1BwsD,EACAzB,EAAc/qD,GAGlBusD,GAAmB5sC,KAAKuC,IAAImqC,EAAcrsD,GAAKwsD,EAAQ,GAEzDD,EAAkB5sC,KAAKC,MACrB2sC,GAAmB,IAAU,EAAK7pC,UAGxB,IAAR5H,EAAWA,EAAMyxC,EACZzxC,EAAMyxC,GAEbzxC,EAAMyxC,EACN,EAAKvS,eAAiBU,EACtB,EAAKT,gBAAkB,EAAImS,EAC3BK,GAAqB,IACW,IAAvBA,IAA6B/R,EAAI,EAAKh4B,QAAU,GA3C5C,QAYiBg4B,IAZjB,uBAgDjB+R,GAAqB,EAhDJ,QAWUL,IAXV,uBAkDnB,EAAKlS,WAAa,EAAKF,eACvB,EAAKG,YAAc,EAAKF,gBAnDL,+BAyDnB,EAAKF,MAAQ,EAAI,EAAKE,iBAAmB,EAAK4R,QAzD3B,UA2Db,EAAKN,oBA3DQ,eA6DjB/nC,GAAK,EAAKpf,MAAMm1C,WA7DC,UA8Df,EAAKj1C,SAAS,CAAEi1C,WAAY/1B,IA9Db,4CAjQJ,EAkUnBkpC,yBAlUmB,uCAkUQ,WAAM3oD,GAAN,2BAAAC,EAAA,yDACf,IAAND,EADqB,wBAEvB,EAAKi2C,eAAiB,IAClB+Q,EAAgB,EAAKe,mBAGzB,EAAKzR,kBAAmB,EAND,SAOjB,EAAKoR,qBAPY,OAYvB,IAHIY,EAAgB,EAAKC,iBAAiBvB,GACtCwB,EAAkB,EAEjBvsD,EAAI,EAAGA,EAAI,EAAK0iB,UAAW1iB,EAC1BwsD,EACAzB,EAAc/qD,GAGlBusD,GAAmB5sC,KAAKuC,IAAImqC,EAAcrsD,GAAKwsD,EAAQ,GAEzDD,EAAkB5sC,KAAKC,MAAM2sC,GAAmB,IAAU,EAAK7pC,UAnBxC,2BAqBR,IAAN3e,EArBc,wBAsBvB,EAAKi2C,eAAiB,IAClB+Q,EAAgB,EAAKe,mBAEzB,EAAKzR,kBAAmB,EAzBD,UA0BjB,EAAK4R,wBA1BY,QA4BH,EAAKK,iBAAiBvB,GA5BnB,eAgCrBvnC,GAAK,EAAKpf,MAAMm1C,WAhCK,UAiCnB,EAAKj1C,SAAS,CAAEi1C,WAAY/1B,IAjCT,4CAlUR,wDAsWnB4qB,0BAA4B,SAACrqC,GA1WA,IA2WvBA,EACF,EAAKu2C,gBA5WoB,EACF,IA4Wdv2C,IACT,EAAKu2C,gBA7WkB,GAiXzB,EAAK4R,oBArXc,IAsXjB,EAAKroD,MAAMwqC,UACP,EAAKxqC,MAAMyjB,cACX,EAAKzjB,MAAMorC,oBAAoB,GAErC,EAAKsc,oBAIL,IAAI/nC,GAAK,EAAKpf,MAAMm1C,WACpB,EAAKj1C,SAAS,CAAEi1C,WAAY/1B,IAC5B,EAAKqoC,QAAU,GAzXE,EA+XrBc,uBA/XqB,sBA+XG,4CAAA3oD,EAAA,6DAEdud,EAAuBD,YAC3B,EAAKzd,MAAMuW,MAAMza,UACjB,EAAKkE,MAAMkf,WACX,EAAKlf,MAAMJ,UAOT0J,EAASsnB,YAAe,EAAK5wB,MAAMuW,MAAO,IAE1CwyC,EAAY,IACJ1sD,KAAKqhB,EAAqB,IAflB,SAgBJsD,YAAwB,EAAKhhB,MAAMuW,MAAMza,UAAUlD,IAAUI,WAAW7C,IAAImT,EAAQ,GAhBhF,cAgBd0/C,EAhBc,OAiBpB,EAAKvoD,SAAS,CAACo1C,KAAMmT,IACrBD,EAAY1sD,KAAK2sD,GAlBG,UAmBLhoC,YAAwB,EAAKhhB,MAAMuW,MAAMza,UAAUlD,IAAUG,qBAAqB5C,IAAImT,EAAQ,GAnBzF,eAmBd2/C,EAnBc,iBAoBLjoC,YAAwB,EAAKhhB,MAAMuW,MAAMza,UAAUlD,IAAUE,uBAAuB3C,IAAImT,EAAQ,GApB3F,eAoBd4/C,EApBc,OAqBpBH,EAAY1sD,KAAK4sD,EAAGC,GArBA,KAsBpBH,EAtBoB,UAsBG/nC,YAAwB,EAAKhhB,MAAMuW,MAAMza,UAAUlD,IAAUK,cAAc9C,IAAImT,EAAQ,GAtB1F,gCAsBRjN,KAtBQ,qBAuBpB0sD,EAvBoB,UAuBG/nC,YAAwB,EAAKhhB,MAAMuW,MAAMza,UAAUlD,IAAUM,SAAS/C,IAAImT,EAAQ,GAvBrF,gCAuBRjN,KAvBQ,gBA0BpB,EAAKoE,SAAS,CAACk1C,WAAYoT,KAEvBI,EAAY,IACJ9sD,KAAKqhB,EAAqB,EAAKmB,UA7BvB,KA8BpBsqC,EA9BoB,UA8BGnoC,YAAwB,EAAKhhB,MAAMuW,MAAMza,UAAUlD,IAAUI,WAAW7C,IAAImT,EAAQ,EAAKuV,SA9B5F,gCA8BRxiB,KA9BQ,0BA+BH2kB,YAAwB,EAAKhhB,MAAMuW,MAAMza,UAAUlD,IAAUG,qBAAqB5C,IAAImT,EAAQ,EAAKuV,SA/BhG,eA+BduqC,EA/Bc,iBAgCHpoC,YAAwB,EAAKhhB,MAAMuW,MAAMza,UAAUlD,IAAUE,uBAAuB3C,IAAImT,EAAQ,EAAKuV,SAhClG,eAgCdwqC,EAhCc,OAiCpBF,EAAY9sD,KAAK+sD,EAAKC,GAjCF,KAkCpBF,EAlCoB,UAkCGnoC,YAAwB,EAAKhhB,MAAMuW,MAAMza,UAAUlD,IAAUK,cAAc9C,IAAImT,EAAQ,EAAKuV,SAlC/F,gCAkCRxiB,KAlCQ,qBAmCpB8sD,EAnCoB,UAmCGnoC,YAAwB,EAAKhhB,MAAMuW,MAAMza,UAAUlD,IAAUM,SAAS/C,IAAImT,EAAQ,EAAKuV,SAnC1F,yBAmCRxiB,KAnCQ,gBAoCpB,EAAKoE,SAAS,CAACm1C,aAAcuT,IApCT,4CA/XH,EA6anBlB,iBAAmB,WACjB,IACI9rD,EAEAyqD,EAEAlpC,EALAwpC,EAAgB,GAQpBxpC,EAAuBD,YACrB,EAAKzd,MAAMuW,MAAMza,UACjB,EAAKkE,MAAMkf,WACX,EAAKlf,MAAMJ,UAKb,IAAM0pD,EAAUx3C,WAAW2E,YAAY,EAAKzW,MAAMyjB,gBAC5CpvB,EAAUyd,WACd,EAAK9R,MAAMuW,MAAMza,UAAUqB,cAAc,GAAG/N,QAAU,KAEtC0iB,WAChB,EAAK9R,MAAMuW,MAAMza,UAAUqB,cAAc,GAAG9N,UAAY,KAI1D,IAFA63D,EAAc7qD,KAAKitD,GAEdntD,EAAI,EAAGA,EAAI,EAAK6D,MAAMkf,aAAc/iB,EACvCyqD,GACGM,EAAc/qD,EAAI,GAAK,EAAK6D,MAAM4e,cAAcziB,EAAI,KACpD,EAAI9H,GAEP6yD,EAAc7qD,KAAKyf,KAAKC,MAAMD,KAAKhF,IAAI,EAAG8vC,KAG5C,IAAKzqD,EAAI,EAAGA,EAAI,EAAK6D,MAAMkf,aAAc/iB,EACvC+qD,EAAc/qD,IAAMuhB,EAAqBvhB,GAE3C,OAAO+qD,GAldU,EA4erB/vC,YAAc,SAACzD,GACbA,EAAMjB,OAAO8E,UA7eM,EAgfnBkxC,iBAAmB,SAAAc,GACjB,IACIptD,EADAqsD,EAAgB,GAEhBgB,EAAK,EAET,IAAKrtD,EAAI,EAAGA,EAAI,EAAK25C,aAAan5C,SAAUR,EAAG,CAC7C,IAAIoM,EAAYghD,EAAWptD,GAAK,EAAK45C,OAAO55C,GAC5CqtD,EAAmC,QAA7BA,EAAK,EAAK1T,aAAa35C,IAC7BqsD,EAAcnsD,KAAKmtD,EAAKjhD,GAE1B,IAAKpM,EAAI,EAAK25C,aAAan5C,OAAQR,EAAI,EAAK6D,MAAMkf,aAAc/iB,EAAG,CACjE,IAAIoM,EAAYghD,EAAWptD,GAAK,EAAK45C,OAAO55C,GAC5CqtD,GAAU,OACVhB,EAAcnsD,KAAKmtD,EAAKjhD,GAG1B,OAAOigD,GA9fP,EAAKjoD,MAAQ,CACXm1C,YAAY,EACZC,WAAY,GACZC,aAAc,GACdC,KAAK,GAEP,EAAK90B,SAAW,GAChB,EAAK+0B,aAAe,GACpB,EAAKC,OAAS,GACd,EAAKC,gBAAkB,GACvB,EAAKC,eAAiB,GACtB,EAAKC,KAAO,EACZ,EAAKC,eAAiB,IACtB,EAAKC,gBAAkB,EACvB,EAAKC,WAAa,GAClB,EAAKx3B,QAAU,EACf,EAAKy3B,YAAc,EACnB,EAAKC,YAAc,EACnB,EAAKC,kBAAmB,EACxB,EAAKC,gBAzBsB,EA0B3B,EAAK4R,oBA7Bc,IA6BQ,EAAKroD,MAAMwqC,UAChC,EAAKxqC,MAAMyjB,cACX,EAAKzjB,MAAMorC,oBAAoB,GACzC,EAAKsL,SAAW1iC,IAAMkB,YACpB,EAAKyhC,gBAAkB3iC,IAAMkB,YA1BV,EADrB,qDA8BE,WACEtU,KAAKkoD,2BA/BT,mCAoCE,SAAsBnoD,EAAW8oD,EAAW53C,GAC1C,OACEjR,KAAKZ,MAAMkf,aAAeve,EAAUue,YACpCte,KAAKL,MAAMm1C,aAAe7jC,EAAU6jC,YAAc90C,KAAKZ,MAAMwqC,YAAc7pC,EAAU6pC,YAvC3F,oBAogBE,WACE,IACIqM,EADAD,EAAa,GAEb/3B,EAAUje,KAAKZ,MAAM6e,QACrBvxB,EAAMsT,KAAKZ,MAAMuW,MAAMza,UAAUQ,QAAQ,GAAGxH,IAWhD,IAthB2B,IA6gBvB8L,KAAK61C,iBACP53B,EAAUje,KAAKZ,MAAM86B,cACrBxtC,EAAMsT,KAAKZ,MAAMuW,MAAMza,UAAUQ,QAAQ,GAAGxH,KA9gBrB,IA+gBd8L,KAAK61C,kBACd53B,EAAUje,KAAKZ,MAAM+6B,YACjBztC,EAAMsT,KAAKZ,MAAMuW,MAAMza,UAAUQ,QAAQ,GAAGxH,MAC9CxH,EAAMsT,KAAKZ,MAAMuW,MAAMza,UAAUQ,QAAQ,GAAGxH,MAG3C+hD,EAAI,EAAGA,EAAIh4B,EAAU,IAAKg4B,EAC7BD,EAAWv6C,KAAK/O,EAAMupD,GAIxB,IAAIqQ,EAAgBtmD,KAAKqnD,mBACnByB,EAAkB,CACtBtkC,OAAQwxB,EACR9vB,SAAU,CACR,CACEmnB,MAC0B,OAAxBrtC,KAAKZ,MAAMJ,SACP,yBACA,kCACN8J,KAAMw9C,EAENv4B,MAAM,EACNtG,YAAa,UACbtB,gBAAiB,8BAKnBqwB,EAAqB,GACrBC,EAAc,GAElB,IAAKR,EAAI,EAAGA,EAAIh4B,EAAU,IAAKg4B,EAC7BO,EAAmB/6C,KAAK,GACxBg7C,EAAYh7C,KAAKuE,KAAKZ,MAAMorC,oBAAoByL,IAElDO,EAAmBv4B,GAAWw4B,EAAYx4B,GAC1Cw4B,EAAYx4B,GAAW,EAGvB,IAAMI,EAAmB,CACvBmG,OAAQwxB,EACR9vB,SAAU,CACR,CACEmnB,MAC0B,OAAxBrtC,KAAKZ,MAAMJ,SACP,yBACA,4BAEN8J,KAAM2tC,EAEN1oB,MAAM,EACNtG,YAAa,WACbtB,gBAAiB,WAEnB,CACEknB,MAC0B,OAAxBrtC,KAAKZ,MAAMJ,SACP,mBACA,sBAEN8J,KAAM0tC,EACNzoB,MAAM,EACNtG,YAAa,UACbtB,gBAAiB,yBAKnBsgC,EAAgB,CACtBjiC,OAAQ,CACN,sBAAuB,YAAa,wBAAyB,cAAe,SAE9E0B,SAAU,CACR,CACKpd,KAAM,CACP+W,YAAuB7f,KAAKZ,MAAMuW,MAAMza,UAAUtE,IAAOQ,KAAK7B,KAC9DsqB,YAAuB7f,KAAKZ,MAAMuW,MAAMza,UAAUtE,IAAOU,eAAe/B,KACxEsqB,YAAuB7f,KAAKZ,MAAMuW,MAAMza,UAAUtE,IAAOW,4BAA4BhC,KAErFsqB,YAAuB7f,KAAKZ,MAAMuW,MAAMza,UAAUtE,IAAOM,UAAU3B,KACnEsqB,YAAuB7f,KAAKZ,MAAMuW,MAAMza,UAAUtE,IAAOK,sBAAsB1B,KAC/EsqB,YAAuB7f,KAAKZ,MAAMuW,MAAMza,UAAUtE,IAAOI,aAAazB,KACtEsqB,YAAuB7f,KAAKZ,MAAMuW,MAAMza,UAAUtE,IAAOG,YAAYxB,KACrEsqB,YAAuB7f,KAAKZ,MAAMuW,MAAMza,UAAUtE,IAAOC,mBAAmBtB,KAC5EsqB,YAAuB7f,KAAKZ,MAAMuW,MAAMza,UAAUtE,IAAOS,aAAa9B,MAExE4wB,gBAAiB,CAAC,UAAW,UAAW,UAAW,UAAW,cAI9D4iC,EAAa,CACjBvkC,OAAQ,CACN,cAAe,YAAa,gBAAiB,kBAAmB,YAElE0B,SAAU,CACR,CACKpd,KAAM,CACPwW,YAA0Btf,KAAKZ,MAAMuW,MAAMza,UAAUlD,IAAUC,YAAY1C,KAC3E+pB,YAA0Btf,KAAKZ,MAAMuW,MAAMza,UAAUlD,IAAUI,WAAW7C,KAC1E+pB,YAA0Btf,KAAKZ,MAAMuW,MAAMza,UAAUlD,IAAUG,qBAAqB5C,KACpF+pB,YAA0Btf,KAAKZ,MAAMuW,MAAMza,UAAUlD,IAAUE,uBAAuB3C,KACtF+pB,YAA0Btf,KAAKZ,MAAMuW,MAAMza,UAAUlD,IAAUK,cAAc9C,KAC7E+pB,YAA0Btf,KAAKZ,MAAMuW,MAAMza,UAAUlD,IAAUM,SAAS/C,MAE1E4wB,gBAAiB,CAAC,UAAW,UAAW,UAAW,UAAW,cAK9DugC,EAAe,CACnBliC,OAAQ,CACN,QAAS,QAAS,iBAAkB,SAEtC0B,SAAU,CACR,CACKpd,KAAM,CACPkX,YAAsBhgB,KAAKZ,MAAMuW,MAAMza,UAAUrF,KAAYI,kBAAkBV,KAC/EyqB,YAAsBhgB,KAAKZ,MAAMuW,MAAMza,UAAUrF,KAAYK,oBAAoBX,KACjFyqB,YAAsBhgB,KAAKZ,MAAMuW,MAAMza,UAAUrF,KAAYU,aAAahB,KAC1EyqB,YAAsBhgB,KAAKZ,MAAMuW,MAAMza,UAAUrF,KAAYa,qBAAqBnB,KAElFyqB,YAAsBhgB,KAAKZ,MAAMuW,MAAMza,UAAUrF,KAAYW,aAAajB,KAC1EyqB,YAAsBhgB,KAAKZ,MAAMuW,MAAMza,UAAUrF,KAAYM,eAAeZ,KAC5EyqB,YAAsBhgB,KAAKZ,MAAMuW,MAAMza,UAAUrF,KAAYY,MAAMlB,KACnEyqB,YAAsBhgB,KAAKZ,MAAMuW,MAAMza,UAAUrF,KAAYS,gBAAgBf,MAE/E4wB,gBAAiB,CAAC,UAAW,UAAW,UAAW,cAInD6iC,EAAsB,CAC1BxkC,OAAQ,CACN,gBAAiB,mCAA2B,sBAE9C0B,SAAU,CACR,CACKpd,KAAM,CACJkX,YAAsBhgB,KAAKZ,MAAMuW,MAAMza,UAAUrF,KAAYC,cAAcP,KAC9EyqB,YAAsBhgB,KAAKZ,MAAMuW,MAAMza,UAAUrF,KAAYG,wBAAwBT,KACrFyqB,YAAsBhgB,KAAKZ,MAAMuW,MAAMza,UAAUrF,KAAYQ,oBAAoBd,KACjFyqB,YAAsBhgB,KAAKZ,MAAMuW,MAAMza,UAAUrF,KAAYO,iBAAiBb,MAEhF4wB,gBAAiB,CAAC,UAAW,UAAW,cASxCjC,EAAa,CACfC,YAAY,EACZ5jB,MAAO,CACL+R,SAAS,EACT/E,SAAU,MACV8W,KAAM,yBACNlkB,SAAU,GACVmkB,UAAW,QAEbC,OAAQ,CACNjS,SAAS,EACT/E,SAAU,QACViX,OAAQ,CACNF,UAAW,OACXnkB,SAAU,MAMX8oD,EAAgBtkC,KAAKC,MAAMD,KAAKE,UAAUX,IAC9C+kC,EAAc1oD,MAAM8jB,KAAK,0BAE5B,IAAI6kC,EAAyBvkC,KAAKC,MAAMD,KAAKE,UAAUX,IACpDglC,EAAuB3oD,MAAM8jB,KAAK,uBAErC,IAAImiC,EAAkB7hC,KAAKC,MAAMD,KAAKE,UAAUX,IAC7CsiC,EAAgBjmD,MAAM8jB,KAAK,wBAK9B,IAAM0zB,EAAuB,CAC3BvzB,OAAQ,CACN,cAAe,mBAAoB,uBAAwB,mBAAoB,mBAEjF0B,SAAU,CACR,CACKpd,KAAM9I,KAAKL,MAAMo1C,WACpB5uB,gBAAiB,CAAC,UAAW,UAAW,UAAW,UAAW,cAI9DuyB,EAAsB,CAC1Bl0B,OAAQ,CACN,cAAe,mBAAoB,uBAAwB,mBAAoB,mBAEjF0B,SAAU,CACR,CACKpd,KAAM9I,KAAKL,MAAMq1C,aACpB7uB,gBAAiB,CAAC,UAAW,UAAW,UAAW,UAAW,cAI/DgjC,EAAsBxkC,KAAKC,MAAMD,KAAKE,UAAUX,IAClDilC,EAAqB5oD,MAAM8jB,KAAK,yBAEnC,IAAI+kC,EAAwBzkC,KAAKC,MAAMD,KAAKE,UAAUX,IACnDklC,EAAuB7oD,MAAM8jB,KAAK,yCA+EjC,IAuCI9oB,EAvCAqsD,EAAgB5nD,KAAK6nD,iBAAiBvB,GAIpC+C,EAAgB,CACpB7kC,OAAQwxB,EACR9vB,SAAU,CACR,CACEmnB,MAC0B,OAAxBrtC,KAAKZ,MAAMJ,SACP,yCACA,qBACN8J,KAAM8+C,EACN75B,MAAM,EACNtG,YAAa,YACbtB,gBAAiB,0BAEnB,CACEknB,MAC0B,OAAxBrtC,KAAKZ,MAAMJ,SACP,mCACA,4BACN8J,KA10Ba,IA20BX9I,KAAKZ,MAAMwqC,UACP0c,EACAtmD,KAAKZ,MAAMorC,oBAEjBzc,MAAM,EACNtG,YAh1Ba,IAi1BXznB,KAAKZ,MAAMwqC,UAA+B,UAAY,WACxDzjB,gBAl1Ba,IAm1BXnmB,KAAKZ,MAAMwqC,UACP,2BACA,aAKRke,EAAkB,EAEtB,IAAKvsD,EAAI,EAAGA,EAAIyE,KAAKie,UAAW1iB,EAAG,CACjC,IAAIwsD,EACAzB,EAAc/qD,GAGlBusD,GAAmB5sC,KAAKuC,IAAImqC,EAAcrsD,GAAKwsD,EAAQ,GAEzDD,EAAkBxtC,YAChBY,KAAKC,MAAM2sC,GAAmB,IAAU9nD,KAAKie,WAC7C,EACA,EACA,KAGF,IAAMqrC,EAAiB,CACrB9kC,OAAQwxB,EACR9vB,SAAU,CACR,CACEmnB,MAC0B,OAAxBrtC,KAAKZ,MAAMJ,SACP,kBACA,qBACN8J,KAAM9I,KAAKm1C,OACXpnB,MAAM,EACNtG,YAAa,WACbtB,gBAAiB,2BAEnB,CACEknB,MAC0B,OAAxBrtC,KAAKZ,MAAMJ,SACP,yBACA,4BACN8J,KA53Ba,IA63BX9I,KAAKZ,MAAMwqC,UACP0c,EACAtmD,KAAKZ,MAAMorC,oBAEjBzc,MAAM,EACNtG,YAl4Ba,IAm4BXznB,KAAKZ,MAAMwqC,UAA+B,UAAY,WACxDzjB,gBAp4Ba,IAq4BXnmB,KAAKZ,MAAMwqC,UACP,2BACA,aAKN2f,EAAY,CAChBplC,YAAY,EACZC,qBAAqB,EACrB2yB,OAAQ,CACNC,MAAO,CACL,CACEC,SAAS,EACTC,MAAO,CACLC,aAAa,KAInBC,MAAO,CACL,CACEH,SAAS,EACTC,MAAO,CACLC,aAAa,EACbG,MAAO,GACPC,UAAW,OAejB1sC,EAAiB,GACrBA,EAAepP,KAAKuE,KAAKmgB,UACzBtV,EAAepP,KA/6BI,IAg7BjBuE,KAAKZ,MAAMwqC,UACP0c,EACAtmD,KAAKZ,MAAMorC,qBAEjB3/B,EAAepP,KAAKuE,KAAKk1C,cACzBrqC,EAAepP,KAAKuE,KAAKm1C,QACzBtqC,EAAepP,KAAKmsD,GAEpB,IAAI4B,EAAmB,GACvBA,EAAiB/tD,KAAKuE,KAAKmgB,UAC3BqpC,EAAiB/tD,KAAKuE,KAAKo1C,iBAC3BoU,EAAiB/tD,KAAKuE,KAAKq1C,gBAE3B,IAAIoU,EACF,2EACAxrC,EACA,QACEyrC,EACF,uCACAzrC,EACA,yBACE4F,EAAiC,OAAxB7jB,KAAKZ,MAAMJ,SAAoByqD,EAAUC,EAItD,OACE,yBAAKxpD,MAAO,CAAEmL,MAAO,WAAYoC,UAAW,SA18B3B,IA28BdzN,KAAKZ,MAAMwqC,WACV,kBAAC5M,EAAA,EAAD,CACEjqB,UAAW,EACXC,cAAe,CAAC,mBAAoB,oBACpCE,kBAAmBlT,KAAK2pC,4BAI5B,yBAAKzpC,MAAO,CAAEyN,MAAO,QACrB,yBAAKzN,MAAO,CAAEyN,MAAO,SAElB,wBAAIrN,UAAU,QAt9BF,IAu9BZN,KAAKZ,MAAMwqC,UACR,wDACA,6BAAK,6BAAK,6BAAV,yEAAqF,+BAMzF,yBAAK1pC,MAAO,CAAEyN,MAAO,SA/9BR,IAg+BV3N,KAAKZ,MAAMwqC,UACT,6BAAK,6BAAStpC,UAAU,mBAAmBJ,MAAO,CAAC2N,OAAQ,UAC1D,yBAAK3N,MAAO,CAAC4+C,SAAS,SAAU1+C,MAAO,OAAQuN,MAAO,MAAME,OAAQ,UAAW,kBAAC,MAAD,CAAK/E,KAAM29C,EAAe3N,QAAS50B,KAClH,yBAAKhkB,MAAO,CAACE,MAAO,OAAOuN,MAAO,MAAME,OAAQ,UAAU,kBAAC,MAAD,CAAK/E,KAAMigD,EAAYjQ,QAASmQ,MAE5F,6BAAS3oD,UAAU,mBAAmBJ,MAAO,CAAC2N,OAAQ,UACpD,yBAAK3N,MAAO,CAAC4+C,SAAS,SAAU1+C,MAAO,OAAQuN,MAAO,MAAME,OAAQ,UAAW,kBAAC,MAAD,CAAK/E,KAAM49C,EAAc5N,QAAS0N,KACjH,yBAAKtmD,MAAO,CAACE,MAAO,OAAOuN,MAAO,MAAME,OAAQ,UAAU,kBAAC,MAAD,CAAK/E,KAAMkgD,EAAqBlQ,QAASoQ,OAIvG,6BAAS5oD,UAAU,mBAAmBJ,MAAO,CAAC2N,OAAQ,UAClD,yBAAK3N,MAAO,CAAC4+C,SAAS,SAAU1+C,MAAO,OAAQuN,MAAO,MAAME,OAAQ,UAAW,kBAAC,MAAD,CAAK/E,KAAMivC,EAAsBe,QAASqQ,KACzH,yBAAKjpD,MAAO,CAACE,MAAO,OAAOuN,MAAO,MAAME,OAAQ,UAAU,kBAAC,MAAD,CAAK/E,KAAM4vC,EAAqBI,QAASsQ,OAInH,6BACW,wBAAI9oD,UAAU,QAl/BF,IAm/BZN,KAAKZ,MAAMwqC,UACR,kDAAuB,6BAAvB,aAAsC,6BAAtC,mBACA,8BAON,wBAAItpC,UAAU,QACXujB,EADH,KAEG7jB,KAAKZ,MAAMwqC,UACR,KA//BS,IAogCT5pC,KAAKZ,MAAMwqC,UACX,6BAAStpC,UAAU,mBAAmBJ,MAAO,CAAE2N,OAAQ,UACrD,kBAAC,OAAD,CAAM/E,KAAMggD,EAAiBhQ,QAASyQ,KAGxC,6BAASjpD,UAAU,mBAAmBJ,MAAO,CAAE2N,OAAQ,UACrD,kBAAC,MAAD,CAAK/E,KAAMuV,EAAkBy6B,QAASyQ,KAU1C,6BAhEJ,IAgEW,6BAhEX,IAgEkB,6BAhElB,IAgEyB,6BACrB,6BACA,gDACA,yBAAKrpD,MAAO,CAAEyN,MAAO,OAAQvN,MAAO,OAAQ6T,MAAO,SACjD,kBAAC+oB,EAAA,EAAD,CACEjqB,UAAW,EACXC,cAAe,CAAC,YAChBE,kBAAmBlT,KAAK0nD,wBAG5B,yBAAKxnD,MAAO,CAAEyN,MAAO,OAAQvN,MAAO,OAAQ6T,MAAO,SACjD,kBAAC+oB,EAAA,EAAD,CACEjqB,UAAW,EACXC,cAAe,CAAC,qBAAsB,mBACtCE,kBAAmBlT,KAAKioD,4BAG5B,kBAAC,IAAD,CACEzvC,UAAU,oBACV9Y,GAAI,EACJyW,OAAQ,EACRg4B,MAAO,EACPnvC,SAAUgB,KAAKZ,MAAMJ,SACrBqY,WA3iCS,IA2iCGrX,KAAKZ,MAAMwqC,UAC3B5pC,KAAKZ,MAAMyjB,cACX7iB,KAAKZ,MAAMorC,oBAAoB,GAC3Bp0B,SAAU,IACVgC,kBAAmBpY,KAAKkT,oBAE1B,kBAAC,IAAD,CACEsF,UAAU,kBACV9Y,GAAI,EACJyW,OAAQ,EACRg4B,MAAO,EACPnvC,SAAUgB,KAAKZ,MAAMJ,SACrBqY,WAAYrX,KAAKy1C,WACjBr9B,kBAAmBpY,KAAKkT,oBAE1B,kBAAC,IAAD,CACEsF,UAAU,oBACV9Y,GAAI,EACJyW,OAAQ,EACRg4B,MAAO,EACP/3B,SAAU,IACVpX,SAAUgB,KAAKZ,MAAMJ,SACrBqY,WAAYrX,KAAK01C,YACjBt9B,kBAAmBpY,KAAKkT,oBAE1B,wBAAIhT,MAAO,CAAEuN,UAAW,OAAQD,WAAY,SAA5C,6CAC6Cs6C,EAAiB,IAC5D,0BAAM5nD,MAAO,CAAEypD,YAAa,SACzB,IADH,qBAEqB3pD,KAAKu1C,gBAClB,KAEV,6BAASj1C,UAAU,mBAAmBJ,MAAO,CAAE2N,OAAQ,UACrD,kBAAC,OAAD,CAAM/E,KAAMwgD,EAAgBxQ,QAASyQ,KAEvC,6BA1HJ,IA0HW,6BA1HX,IA0HkB,6BA1HlB,IA0HyB,6BACrB,6BA3HJ,IA2HW,6BA3HX,IA2HkB,6BA3HlB,IA2HyB,6BACrB,6BACA,+CACA,6BAASjpD,UAAU,mBAAmBJ,MAAO,CAAE2N,OAAQ,UACrD,kBAAC,OAAD,CAAM/E,KAAMugD,EAAevQ,QAASyQ,KAEtC,4BACA,6BACA,4BACA,6BACA,6BAEA,yBAAKrpD,MAAO,CAAEyN,MAAO,QACnB,kBAAC0rC,EAAA,EAAD,CACEzuC,cAvLK,CACf,iBACA,iBACA,WACA,6BACA,4BAmLUC,eAAgBA,EAChBH,UAAW,kBACX1L,SAAUgB,KAAKZ,MAAMJ,YAGzB,6BACCgB,KAAKq1C,eAAet5C,OAAS,GAAKiE,KAAKo1C,gBAAgBr5C,OAAS,GAC/D,yBAAKmE,MAAO,CAAEyN,MAAO,QACnB,kBAAC0rC,EAAA,EAAD,CACEzuC,cAAe,CACb,MACA,2BACA,8BAEFC,eAAgB2+C,EAChB9+C,UAAW,qDACX1L,SAAUgB,KAAKZ,MAAMJ,mBAxmCvC,GAAoCoU,IAAMzS,Y,0HCrC1C2U,EAAOC,QAAU,0qH,kBCAjBD,EAAOC,QAAU,k+F,kBCAjBD,EAAOC,QAAU,8tD,kBCAjBD,EAAOC,QAAU,0hG,4DCAjB,IAAIioB,EAAM,CACT,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,UAAW,IACX,aAAc,IACd,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,UAAW,IACX,aAAc,IACd,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,UAAW,IACX,aAAc,KAIf,SAASosB,EAAeC,GACvB,IAAInqD,EAAKoqD,EAAsBD,GAC/B,OAAOE,EAAoBrqD,GAE5B,SAASoqD,EAAsBD,GAC9B,IAAIE,EAAoBC,EAAExsB,EAAKqsB,GAAM,CACpC,IAAIvqD,EAAI,IAAIi6B,MAAM,uBAAyBswB,EAAM,KAEjD,MADAvqD,EAAE2qD,KAAO,mBACH3qD,EAEP,OAAOk+B,EAAIqsB,GAEZD,EAAeM,KAAO,WACrB,OAAOxrC,OAAOwrC,KAAK1sB,IAEpBosB,EAAeO,QAAUL,EACzBx0C,EAAOC,QAAUq0C,EACjBA,EAAelqD,GAAK,K,6NC7Gd0qD,EAAYC,IAAYD,UACxBE,EAAaD,IAAYD,UAAUE,WAEpBC,E,4JACnB,WAEE,IAkCI1uC,EACAtgB,EACAivD,EApCEC,EAAY,CAAEC,UAAW,CAAEC,WAAY,SAAWC,KAAM,CAAC/9D,KAAM,gBAAkBg+D,OAAQ,UACzFC,EAAgB,CAAEJ,UAAW,CAAEC,WAAY,SAAWC,KAAM,CAAC/9D,KAAM,gBAAkBg+D,OAAQ,KAC7FE,EAAe,CAAEL,UAAW,CAAEC,WAAY,SAAWC,KAAM,CAAC/9D,KAAM,gBAAiBkhC,KAAM,CAAEi9B,YAAa,QAASC,QAAS,CAAEC,IAAK,WAAaL,OAAQ,UACtJM,EAAmB,CAAET,UAAW,CAAEC,WAAY,SAAWC,KAAM,CAAC/9D,KAAM,gBAAiBkhC,KAAM,CAAEi9B,YAAa,QAASC,QAAS,CAAEC,IAAK,WAAaL,OAAQ,KAC1JO,EAAoB,CACxBR,KAAM,CAAC/9D,KAAM,eAAgBwe,MAAO,CAAE6/C,IAAK,UAAYlO,MAAM,GAC7D0N,UAAW,CAAEW,UAAU,EAAKV,WAAY,UACxC3xC,OAAQ,CACNnI,IAAK,CAAE3Q,MAAO,OAAQmL,MAAO,CAAE6/C,IAAK,WACpCI,OAAQ,CAAEprD,MAAO,OAAQmL,MAAO,CAAE6/C,IAAK,WACvCp2C,MAAO,CAAE5U,MAAO,OAAQmL,MAAO,CAAE6/C,IAAK,WACtC16C,KAAM,CAAEtQ,MAAO,OAAQmL,MAAO,CAAE6/C,IAAK,YAEvCn9B,KAAM,CAAEi9B,YAAa,QAASC,QAAS,CAAEC,IAAK,YAE1CK,EAAsB,CAAEb,UAAW,CAAEC,WAAY,QAASC,KAAM,CAAC/9D,KAAM,iBACvE2+D,EAAgB,CACpBZ,KAAM,CAAC/9D,KAAM,eAAgBwe,MAAO,CAAE6/C,IAAK,UAAYlO,MAAM,GAC7D0N,UAAW,CAACW,UAAU,EAAOV,WAAY,UACzC3xC,OAAQ,CACNnI,IAAK,CAAE3Q,MAAO,OAAQmL,MAAO,CAAE6/C,IAAK,WACpCI,OAAQ,CAAEprD,MAAO,OAAQmL,MAAO,CAAE6/C,IAAK,WACvCp2C,MAAO,CAAE5U,MAAO,OAAQmL,MAAO,CAAE6/C,IAAK,WACtC16C,KAAM,CAAEtQ,MAAO,OAAQmL,MAAO,CAAE6/C,IAAK,YAEvCn9B,KAAM,CAAEi9B,YAAa,QAASC,QAAS,CAAEC,IAAK,YAI5CO,EAA8B,GAC9BlrD,EAAQ,GACRmrD,EAAiB,GACjBC,EAAW,GACXC,EAAU,GAQdA,EAAU,GACV,IAAM3sD,EAAOe,KAAKZ,MAAMJ,SAIxB,QAA+CwB,IAA3CR,KAAKZ,MAAMqsD,4BACb,IAAK5vC,EAAI,EAAGA,EAAI7b,KAAKZ,MAAMqsD,4BAA4B1vD,SAAU8f,EAAG,CAClE,IAAKtgB,EAAI,EAAGA,EAAIyE,KAAKZ,MAAMqsD,4BAA4B,GAAG1vD,SAAUR,EACjEivD,OACkDhqD,IAAjDR,KAAKZ,MAAMqsD,4BAA4B5vC,GAAGtgB,GACtC,GACCyE,KAAKZ,MAAMqsD,4BAA4B5vC,GAAGtgB,GAAGya,WAAW0B,QAAQ,MAAM,IAAsE,IAAjE5B,MAAM9V,KAAKZ,MAAMqsD,4BAA4B5vC,GAAGtgB,GAAGya,aAAiF,KAA1DhW,KAAKZ,MAAMqsD,4BAA4B5vC,GAAGtgB,GAAGya,WACrMhW,KAAKZ,MAAMqsD,4BAA4B5vC,GAAGtgB,GAAGya,WAC3C9E,WAAW2E,YAAY7V,KAAKZ,MAAMqsD,4BAA4B5vC,GAAGtgB,IAAI0D,GAC3E2sD,EAAQnwD,KAAK,CACXnG,MAAOk1D,EACPtqD,MAAa,IAAN2b,EAAUuvC,EAAoBX,IAGzCgB,EAA4BhwD,KAAKmwD,GACjCA,EAAU,GAQd,QAAuCprD,IAAnCR,KAAKZ,MAAMysD,oBAAmC,CAIhD,IAFAtrD,EAAM9E,KAAK,CAAC,CAAEnG,MAAO0K,KAAKZ,MAAMmB,MAAOL,MAAO,CAAC0qD,KAAM,CAACkB,GAAI,KAAMj/D,KAAM,eAAgBmwD,MAAM,OAEvFnhC,EAAI,EAAGA,EAAI7b,KAAKZ,MAAMysD,oBAAoB9vD,SAAU8f,EACvD6vC,EAAejwD,KAAK,CAAE8E,MAAO,GAAIoN,MAAO,CAAEo+C,IAAK/rD,KAAKZ,MAAMuO,OAASi9C,KAAM,CAAC/9D,KAAM,eAAgBmwD,MAAM,KAGxG,IAAKnhC,EAAI,EAAGA,EAAI7b,KAAKZ,MAAMysD,oBAAoB9vD,SAAU8f,EAEvD+vC,EAAQnwD,KAAK,CAAEnG,MAAO0K,KAAKZ,MAAMysD,oBAAoBhwC,GAAI3b,MAAOsrD,IAElEG,EAASlwD,KAAKmwD,GAIhB,GADAA,EAAU,QAC8BprD,IAApCR,KAAKZ,MAAM4sD,qBACb,IAAKzwD,EAAI,EAAGA,EAAIyE,KAAKZ,MAAM4sD,qBAAqB,GAAGjwD,SAAUR,EAAG,CAC9D,IAAKsgB,EAAI,EAAGA,EAAI7b,KAAKZ,MAAMysD,oBAAoB9vD,SAAU8f,EACvD2uC,OAC4ChqD,IAA1CR,KAAKZ,MAAM4sD,qBAAqBnwC,GAAGtgB,GAC/B,GACAyE,KAAKZ,MAAM4sD,qBAAqBnwC,GAAGtgB,GAAGya,WAAW0B,QAAQ,MAAM,IAA+D,IAA1D5B,MAAM9V,KAAKZ,MAAM4sD,qBAAqBnwC,GAAGtgB,GAAGya,aAA0E,KAAnDhW,KAAKZ,MAAM4sD,qBAAqBnwC,GAAGtgB,GAAGya,WAC/KhW,KAAKZ,MAAM4sD,qBAAqBnwC,GAAGtgB,GAAGya,WACpC9E,WAAW2E,YAAY7V,KAAKZ,MAAM4sD,qBAAqBnwC,GAAGtgB,IAAI0D,GAEpE2sD,EAAQnwD,KAAK,CACXnG,MAAOk1D,EACPtqD,MAAO4V,MAAM5E,WAAW2E,YAAY20C,EAASvrD,KACzCssD,EACChwD,EAAE,EAAO,IAAJsgB,EAAMsvC,EAAiBJ,EAAmB,IAAJlvC,EAAMivC,EAAcL,IAGxEkB,EAASlwD,KAAKmwD,GACdA,EAAU,GAGd,IAAMK,EAAe,CAEnB,CACEC,QAAS,GACTpjD,KAAMvI,GAGR,CACE2rD,QAAS,GACTpjD,KAAM2iD,GAIR,CACEU,OAAQ,EACRC,OAAQ,EACRF,QAASR,EACT5iD,KAAM6iD,IAGN14B,EAAW,IAAIC,KACfC,EAAOF,EAASK,UAAWL,EAASo5B,eAAe,QAAS,CAAE12B,MAAO,UAAc1C,EAASG,cAEhG,OAA+B,IAA3BpzB,KAAKZ,MAAMktD,YAA0B,GAGrC,kBAAClC,EAAD,CAAWmC,aAAa,EAAMC,UAAYlkE,IAAW,MAAM,OAAS,SAAW6qC,GAC7E,kBAACm3B,EAAD,CAAYmC,QAASR,EAAcp/D,KAAMvE,IAAW,OAAO,a,GAxI1B8qB,IAAMzS,W,kBCE5B+rD,G,mNAEjBxd,YAAc,WACV,EAAK9vC,MAAMutD,Y,4CAGf,WACwB3sD,KAAKZ,MAAjBwtD,QAAR,IAEMrsD,EAAM,0BAAOL,MAAO,CAACC,SAAU,OAAQoS,aAAc,MAAO8+B,OAAQ,MAAOwb,QAAS,QAAY7sD,KAAKZ,MAAM0tD,kBACjH,OACI,kBAAC,IAAMvY,SAAP,KACI,kBAACwY,EAAA,EAAD,CAASC,UAAU,WAAW9sD,MAAO,CAACC,SAAU,OAAQkxC,OAAQ,MAAOwb,QAAS,OAAWtsD,MAAOA,GAC9F,kBAAC0sD,EAAA,EAAD,CAAa5sD,QAASL,KAAKkvC,aACvB,yBAAK5uC,UAAU,OAAO4sD,MAAM,6BAA+BL,QAAS,MAAMl/C,MAAM,KAAKE,OAAO,KAAMs/C,QAAQ,aAAY,0BAAM3tB,EAAE,+L,GAd5GpsB,IAAMzS,Y,4BCQ3BysD,E,kDACnB,WAAYhuD,GAAQ,IAAD,8BACjB,cAAMA,IAQRiuD,YAAc,kBACZhmC,YAAe,CACbC,WAAY,CACVC,WAAY,iBACZpnB,SAAU,GACVmL,WAAY,OAEdgiD,UAAW,CACTC,aAAc,CACZC,UAAW,CACTnc,OAAQ,GAGVoc,MAAO,CACLC,UAAW,OACXC,aAAa,+BACbC,YAAY,iCAGhBC,YAAa,CACXzc,KAAM,CAEJvjC,OAAQ,QAEVigD,KAAM,CAEJjgD,OAAQ,QAEV2hB,OAAQ,CACNld,QAAS,SAGby7C,aAAc,CACZD,KAAM,CACJ3tD,SAAU,SAGZ6tD,UAAW,CACTnB,QAAS,oBAIboB,oBAAqB,CACnB7c,KAAM,CACJ1+B,YAAa,OAEfw7C,UAAW,CACT/tD,SAAU,GACVmL,WAAY,QAEd6iD,KAAM,CACJhuD,SAAU,KAGdiuD,qBAAsB,CACpBhd,KAAM,CACJjrB,gBAAiB,YAGrBkoC,cAAe,CACbjd,KAAM,CACJjrB,gBAAiB,QAGjBmoC,MAAO,CACLjjD,MAAO,SAGbkjD,mBAAoB,CAClBC,QAAS,CACLl5D,MAAO,aA/EA,EAqFnBq3D,SAAW,WACT,IAAIL,EAA8C,IAAhC,EAAK3sD,MAAM8uD,iBAAyB,EAAI,EAC1D,EAAK5uD,SAAS,CAAE4uD,iBAAkBnC,KArFlC,EAAK3sD,MAAQ,CACX8uD,iBAAkB,GAHH,E,0CA0FnB,WAAU,IAGJ5yC,EACAtgB,EAJG,OACHuN,EAAO,GACP8iD,EAAU,GAMVvgC,EAAK,GAENrrB,KAAKZ,MAAMwL,cAAc7O,OAAO,IACjCsvB,EAAK,IAEL,IAAIqjC,EAAS,CAAE/gD,MAJN,IAIoB0d,EAAMrrB,KAAKZ,MAAMwL,cAAc7O,OAAUwW,aAAa,QAJ1E,IAKD8Y,EAAKrrB,KAAKZ,MAAMwL,cAAc7O,OAAQ,EALrC,IAKgDib,OAAOmvC,aAGhEuI,EAAS,CAAE/gD,MARF,KAOT0d,EAAO,EAPE,IAOQrU,OAAOmvC,YAPf,IAOkCnmD,KAAKZ,MAAMwL,cAAc7O,SACrCiE,KAAKZ,MAAMwL,cAAc7O,SAGtDsvB,EAAK,KAEPA,EAAK,GACLqjC,EAAS,CAAE/gD,MAAO,SAIpB,IAAIu+C,EAAU,GAEd,QAAkC1rD,IAA9BR,KAAKZ,MAAMyL,eAA8B,CAE3C,IAAKtP,EAAI,EAAGA,EAAIyE,KAAKZ,MAAMyL,eAAe,GAAG9O,SAAUR,EAAG,CACxD,IAAKsgB,EAAI,EAAGA,EAAI7b,KAAKZ,MAAMwL,cAAc7O,SAAU8f,EAEjD+vC,EAAQnwD,KAAKuE,KAAKZ,MAAMyL,eAAegR,GAAGtgB,IAI5CuN,EAAKrN,KAAKmwD,GACVA,EAAU,GAIZ,IACI+C,EAAc,CAChBxoC,gBAAiB,UACjB9a,MAAO,UACP+2C,UAAW,SACXz0C,MALe0d,EAMf/f,WAAY,OACZiC,SAAU,SACVsD,IAAK,EACL6X,OAAQ,GAGNkmC,EAAe,SAAC,GAA0B,IAAxB/tC,EAAuB,EAAvBA,MAAUguC,EAAa,iBAC3C,OAEE,kBAACC,EAAA,EAAD,CAAW/0C,IAAK8G,EAAO3gB,MAAOyuD,QACFnuD,IAAzB,EAAKpB,MAAMu1C,gBACoBn0C,IAAhC,EAAKpB,MAAMu1C,UAAU9zB,IAAwB,6BAAK,kBAACmH,EAAA,EAAD,CAAMvnB,SAAU,EAAKrB,MAAMu1C,UAAU9zB,KAAS,8BAEhGguC,EAAOhiE,OAKb,IAAK0O,EAAI,EAAGA,EAAIyE,KAAKZ,MAAMwL,cAAc7O,SAAUR,EACjD2wD,EAAQzwD,KAAK,CACX5O,KAAMmT,KAAKZ,MAAMwL,cAAcrP,GAC/Bu9C,QAAS,CACPl6B,QAAQ,EACRmwC,iBAAkBH,KAK1B,IAAMI,EAAUh6D,IAAuBgL,KAAKZ,MAAMJ,UAI5C8tD,GAH0CkC,EAAS/5D,MAGlC+5D,EAAS/5D,OACzB6jD,EAAU,CACfl6B,QAAQ,EACRqwC,WAAY,WACZC,eAAgB,OAChB/qC,WAAY,kBACZgrC,kBAAkB,EAClBC,sBAAsB,EACtBC,aAAa,EACbn1C,QAAQ,EACRo1C,UAAU,EACV3/D,OAAM,EACN4/D,WAAW,CACTC,WAAY,CACVC,YAAaT,EAAS95D,KACtBw6D,YAAaV,EAAS75D,KAK1Bs6D,YAAa,IACbE,cAAe,WACb,MAAO,CACL9C,QAAS,UACTn8C,KAAM,QACN2gC,OAAQ,QAGZue,gBAAiB,CACfpD,SAAU,uBACVqD,UAAW,KAEbC,WAAY,SAACC,EAAWC,EAAW9D,EAASpjD,GAI1C,OAFA,EAAK6jD,YAEE,GAETsD,gBAAiB,SAACnnD,EAAMonD,EAAWC,GACjC,IAAIjwD,EAAQ,CAACkiD,UAAW,SACR,YAAZt5C,EAAK,KACP5I,EAAMimB,gBAAkB,QACxBjmB,EAAMC,SAAW,QAEnB,IAEI5E,EAFArG,EAAO,GAGX,IAAKqG,EAAI,EAAGA,EAAI,EAAK6D,MAAMwL,cAAc7O,SAAUR,EAAG,CACpD,IAAI60D,EAAQtnD,EAAKvN,GACjBrG,EAAKuG,KACH,kBAACqzD,EAAA,EAAD,CAAW/0C,IAAKxe,EAAG2E,MAAOA,GACxB,kBAAC4nB,EAAA,EAAD,KAMNsoC,KAKA,OACE,kBAACC,EAAA,EAAD,CAAUt2C,IAAKo2C,EAAUjwD,MAAO,CAAEimB,qBAAyC3lB,IAAxB,EAAKpB,MAAMw1C,WAA0Bub,EAAS,EAAE,UAAU,UAAYA,IAAW,EAAK/wD,MAAMw1C,WAAW,UAAWub,EAAS,EAAE,UAAU,YACvLj7D,IAIPo7D,cAAe,kBAAM,kBAAC,EAAD,CAAcxD,iBAAkBA,EAAkBH,SAAU,EAAKA,aAKxF,OACI,yBAAKzsD,MAAOwuD,GAEZ,kBAAC,IAAD,CAAkBtnC,MAAOpnB,KAAKqtD,eAC5B,kBAAC,IAAD,CACE9sD,MAAOP,KAAKZ,MAAMsL,UAClB5B,KAAMA,EACNojD,QAASA,EACTpT,QAASA,KAGmB,IAA/B94C,KAAKL,MAAM8uD,kBAAyB,kBAAC,EAAD,CACnCzC,qBAAsBhsD,KAAKZ,MAAMyL,eACjC8C,MAAO,KACPk+C,oBAAqB7rD,KAAKZ,MAAMwL,cAChCrK,MAAOP,KAAKZ,MAAMsL,UAClB+gD,4BAA6BzrD,KAAKZ,MAAMq1C,gCACxC6X,YAAatsD,KAAKL,MAAM8uD,iBACxBlC,aAAa,EACbvtD,SAAUgB,KAAKZ,MAAMJ,gB,GAxQQoU,IAAMzS,Y,+HCnBhCy7C,EAAb,kDACE,WAAYh9C,GAAQ,IAAD,8BACjB,cAAMA,IAKRmxD,SAAW,SAAC7wD,GACL,EAAKN,MAAMoa,UAAa,EAAKpa,MAAMkxC,gBACtC,EAAKlxC,MAAMusC,eAAejsC,IARX,EAWnB8wD,MAAQ,WACD,EAAKpxD,MAAMoa,UACd,EAAKpa,MAAMssC,eAXb,EAAK8kB,MAAQ,EAAKA,MAAM12C,KAAX,gBACb,EAAKy2C,SAAW,EAAKA,SAASz2C,KAAd,gBAHC,EADrB,0CAiBE,WAAU,IAAD,OAEHxZ,EAAU,YACVmwD,EAAgB,YACjBzwD,KAAKZ,MAAMoa,WAEZlZ,EAAU,8BACVmwD,EAAgB,+BAEfzwD,KAAKZ,MAAMkxC,iBACZmgB,EAAgB,qCAErB,IAAIC,EAAU1wD,KAAKZ,MAAMosC,SAChB+C,OAA+B/tC,IAAvBR,KAAKZ,MAAMmvC,QAAsB,IAAIvuC,KAAKZ,MAAMmvC,aAE9C/tC,IAAZkwD,IAAuBA,EAAU,GACrC,IAAIC,EAAW,GAiDf,OA7CG3wD,KAAKZ,MAAMmsC,WAAavrC,KAAKZ,MAAMqsC,aACT,IAA3BzrC,KAAKZ,MAAMqsC,cAAsBzrC,KAAKZ,MAAMmsC,UAAYgD,GAExDoiB,EACE,8BACE,4BAAQrwD,UAAWA,EAAWD,QAASL,KAAKwwD,OAA5C,OAMDE,EAAU,GAAK1wD,KAAKZ,MAAMmsC,UAAYmlB,GACvC1wD,KAAKZ,MAAMmsC,UAAYmlB,KAEvBC,EACE,8BACE,4BAAQrwD,UAAWA,EAAWD,QAASL,KAAKwwD,OAA5C,KAGA,4BACElwD,UAAWmwD,EACXpwD,QAAS,WACP,EAAKkwD,SAAS,EAAKnxD,MAAMmsC,aAH7B,SAWyB,IAA7BvrC,KAAKZ,MAAMkvC,eAAmD,IAAzBtuC,KAAKZ,MAAMmsC,aACjDvrC,KAAKZ,MAAMmsC,UAAYmlB,GAAWA,GAAW,KAE9CC,EACE,8BACE,4BACErwD,UAAWmwD,EACXpwD,QAAS,WACP,EAAKkwD,SAAS,EAAKnxD,MAAMmsC,aAH7B,OAUColB,MAlFX,GAA+Bv9C,IAAMzS,Y,sJCIxBs7C,EAAb,kDACE,WAAY78C,GAAQ,IAAD,8BACjB,cAAMA,IAgBRwxD,aAAe,SAAC99C,GACd,EAAKjT,SACH,CACEotC,UAAWn6B,EAAMu6B,MAAMwjB,UACvBC,cAAeh+C,EAAMu6B,MAAMwjB,YAE7B,kBAAM,EAAKt5C,sBAEb,EAAKw5C,QAAS,GAzBG,EA0CnB1iB,cAAgB,SAAC2iB,GAEf,YADuCxwD,IAA3B,EAAKpB,MAAMivC,eAAiC,EAAKjvC,MAAMivC,cAAc2iB,EAAO17D,MAAM,IAzC9F,EAAKqK,MAAQ,CAGXstC,UAAW,IACX6jB,cAAe,EAAK1xD,MAAMuuC,UAE5B,EAAKojB,QAAS,EARG,EADrB,6DAYE,SAA0BhxD,GACpBA,IAAcC,KAAKZ,YAAgCoB,IAAvBT,EAAU4tC,UACxC3tC,KAAKH,SAAS,CAAEixD,cAAe/wD,EAAU4tC,aAd/C,8BA6BE,WACE3tC,KAAKZ,MAAM4tC,YAAYhtC,KAAKZ,MAAMM,GAAIM,KAAKL,MAAMstC,aA9BrD,wBAiCE,WAAc,IAAD,OACX,IACE,OAAOjtC,KAAKZ,MAAMnN,OAChB+N,KAAKZ,MAAMnN,OAAOitB,MAAK,SAACiC,GAAD,OAAOA,EAAEksB,QAAU,EAAKjuC,MAAMuuC,YAAUr4C,MAAQ,GAEzE,MAAO60B,GACP,OAAOnqB,KAAKZ,MAAMuuC,YAvCxB,oBAwDE,WAAU,IAAD,OACHsjB,EAAU,WACVjxD,KAAKZ,MAAMuO,QAAU1jB,MAAegnE,EAAU,sBAClD,IAAM1wD,EAAQP,KAAKZ,MAAMsuC,MAEnBwjB,EAAe,CACnBC,QAAS,SAACC,GAAD,mBAAC,eACLA,GADI,IAEPvjD,OAAQ,GACRwjD,UAAW,GACXlrC,gBAAiB,UACjB,UAAW,CACTA,gBAAiB,eAKjB6e,EACJhlC,KAAKsxD,eAAiBtxD,KAAKZ,MAAM+8C,cAC/BoV,EAAS,GACbA,EAAO91D,KAAK,CACV4xC,MAAOrtC,KAAKZ,MAAM+8C,cAClB7mD,MAAO,IAGT,IAAIk8D,EACF,kBAAC,IAAD,CACEC,cAAc,EACdC,QAAS1xD,KAAK2xD,GACdC,OAAQV,EACRn3C,IAAK/Z,KAAKZ,MAAMuuC,SAChBkD,WAAY7wC,KAAKZ,MAAMqZ,QACvBnjB,MAAO0K,KAAKsxD,aACZ5xD,GAAIM,KAAKZ,MAAMM,GACfmT,SAAU7S,KAAK4wD,aACf9X,QAAS94C,KAAKZ,MAAMnN,OACpB4/D,iBAAkB,SAACb,GAAD,OAAY,EAAK3iB,cAAc2iB,MA+BrD,OA3BkB,IAAdhsB,IACFwsB,EACE,kBAAC,IAAD,CACEC,cAAc,EACdG,OAAQV,EACRn3C,IAAK/Z,KAAKZ,MAAMuuC,SAChBkD,YAAY,EACZv7C,MAAOi8D,EAAO,GACd7xD,GAAIM,KAAKZ,MAAMM,GACfo5C,QAASyY,UAIyB/wD,IAApCR,KAAKZ,MAAM8wC,uBACbshB,EACE,kBAAC,IAAD,CACEC,cAAc,EACdG,OAAQV,EACRn3C,IAAK/Z,KAAKZ,MAAMuuC,SAChBkD,YAAY,EACZv7C,MAAO0K,KAAKZ,MAAM8wC,qBAAqB,GACvCxwC,GAAIM,KAAKZ,MAAMM,GACfo5C,QAAS94C,KAAKZ,MAAM8wC,wBAMxB,6BACE,yBAAK5vC,UAAW2wD,EAASl3C,IAAK/Z,KAAKZ,MAAMuuC,UACvC,yBAAKrtC,UAAU,gBACZC,OAEwBC,IAAxBR,KAAKZ,MAAMqB,SACV,kBAAC,IAAD,CAAMA,SAAUT,KAAKZ,MAAMqB,SAAUioB,OAAQ,MAE7C,IAIH8oC,QAxIX,GAA8B7wD,c,+BCN9B,kTAAO,IAAMmxD,EAA+B,EAC/Bra,EAA6B,EAC7BC,EAAwB,EACxBC,EAA2B,EAC3BC,EAAsB,EACtBC,EAA0B,EAC1BC,EAAuB,EAGvBia,EAAuB,EAGvBjtC,EAAe,CAC1B54B,GAAI,CACFkV,KAAM,yBACNC,MAAO,iBACPC,MAAO,gBACPC,MAAO,SACPC,MAAO,aAEP49C,KAAM,eACNE,cAAe,CACb,0TACA,uTACA,wCACA,qCACA,2GACA,oCACA,8FACA,iHACA,4CACA,sBACA,sDAGFx8C,KAAM,2BACNE,MACE,wOACFE,QAAS,SACTC,WAAY,yBACZ28C,SAAU,cACVJ,YAAa,QACbK,UAAW,YAEXC,MAAO,6BACPC,MACE,kLACFoC,MAAO,GACPnC,YAAa,SACbC,YAAa,cACbC,YAAa,sBACbC,YAAa,+BAEbnI,YAAa,8BACb8Z,YAAa,GACbC,YAAa,GACbC,YAAa,GAEb/Z,YAAa,iBACbga,YAAa,GACbC,YAAa,GACbC,YAAa,GAEbja,YAAa,wBACbka,YAAa,GACbC,YAAa,GACbC,YAAa,GAEbna,YAAa,YACboa,YAAa,GACbC,YAAa,GACbC,YAAa,GAEbra,YAAa,mBACbsa,YAAa,GACbC,YAAa,GACbC,YAAa,GAEbva,YAAa,QACbwa,YAAa,GACbC,YAAa,GACbC,YAAa,GAEb1S,YAAa,QACb2S,YAAa,GACbC,YAAa,GACbC,YAAa,GACb5S,MAAM,8GACNC,MAAM,mHACNr9C,KAAM,8BACNC,MACE,yNACFg7C,MAAM,+BACNqC,MAAO,iEACPC,MACE,gIAEF58C,KAAM,iCACN88C,cAAe,CACb,gNACA,oGACA,oBACA,6DACA,sEACA,4DACA,yEACA,kUACA,oXACA,0MACA,8SAEFC,SACE,gIAEFp8C,KAAM,+CACNq8C,eAAgB,CACd,mRACA,mOACA,iBACA,aACA,cACA,qZACA,uSAEFsS,eAAgB,CACd,gPACA,kDACA,wHACA,kDACA,kEACA,uOAGFnuD,KAAM,UACN87C,MACE,6QACFl7C,KAAM,WACNu3C,MACE,8DACFC,MAAO,mEACPkF,MAAO,OACPC,MAAO,OAEP/7C,SAAU,4DAEVF,KAAM,uBACNC,MACE,8aACFw6C,MACE,uPAEApI,SAAS,wEACTzC,SAAS,yBACTC,SAAS,yCACT2B,SAAS,cACTsb,SAAS,mBACTC,SAAS,uBACTC,SAAS,mBACTC,SAAS,kBACTza,UAAU,yBACVpC,UAAU,kBACVqB,YAAY,UACZc,gBAAiB,4DACjBh0B,gBAAiB,uBACjBE,gBAAiB,uCACjBe,eAAgB,mBAChBC,eAAgB,gBAChB4wB,eAAgB,qBAGpBzqD,GAAK,CACCgV,KAAM,iCACVC,MAAO,wBACPC,MAAO,uBACPC,MAAO,UACPC,MAAO,cAEP49C,KAAM,eACNE,cAAe,CACb,kWACA,qdACA,oDACA,2CACA,6KACA,sCACA,uIACA,0LACA,gEACA,0BACA,8EAGFx8C,KAAM,gCACNE,MACE,oRACFE,QAAS,SACTC,WAAY,+BACZ28C,SAAU,UACVJ,YAAa,QACbK,UAAW,eAEXC,MAAO,2CACPC,MACE,kQACFoC,MAAO,GACPnC,YAAa,SACbC,YAAa,qBACbC,YAAa,8BACbC,YAAa,6DAEbnI,YAAa,qCACb8Z,YAAa,GACbC,YAAa,GACbC,YAAa,GAEb/Z,YAAa,yBACbga,YAAa,GACbC,YAAa,GACbC,YAAa,GAEbja,YAAa,iCACbka,YAAa,GACbC,YAAa,GACbC,YAAa,GAEbna,YAAa,cACboa,YAAa,GACbC,YAAa,GACbC,YAAa,GAEbra,YAAa,mCACbsa,YAAa,GACbC,YAAa,GACbC,YAAa,GAEbva,YAAa,SACbwa,YAAa,GACbC,YAAa,GACbC,YAAa,GAGb1S,YAAa,QACb2S,YAAa,GACbC,YAAa,GACbC,YAAa,GAEb5S,MACE,+IACFC,MACE,+IAEFr9C,KAAM,oCACNC,MACM,6OACNg7C,MAAM,6CACNqC,MAAO,sGACPC,MACE,0JAEF58C,KAAM,sCACN88C,cAAe,CACb,qSACA,kJACA,sBACA,4FACA,8GACA,yEACA,+EACA,yXACA,scACN,oQACM,0YAEFC,SA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","file":"static/js/main.002fa62d.chunk.js","sourcesContent":["import { buildMode } from \"../../package.json\";\r\nimport { appletMode } from \"../../package.json\";\r\n\r\nexport const APPLET_INA = appletMode === \"INA\";\r\nexport const APPLET_EP = appletMode === \"EP\";\r\nexport const DISPLAY_NAME = appletMode;\r\nexport const DEFAULT_QUOTE = appletMode === \"INA\" ? \"INADefaultData\" : \"EPDefaultData\";\r\n\r\nexport const QUOTE_CLIENT = 0;\r\nexport const QUOTE_SPOUSE = 1;\r\nexport const QUOTE_JOINT = 2;\r\nexport const FIRST_BENEFICIARY_ID = 2; // index is 1 in Clients\r\n\r\nexport const ALIGN_LEFT = 1;\r\nexport const ALIGN_CENTRE = 2;\r\nexport const ALIGN_RIGHT = 3;\r\n\r\nexport const OUTPUT_WIDTH_PCT = 97.5;\r\nexport const OUTPUT_PADDING_LEFT = 2.5;\r\n\r\nexport const IMAGE_APPLET_EP = \"EPPage1\";\r\nexport const IMAGE_APPLET_INA = \"INAPage1\";\r\nexport const IMAGE_LOGO = \"AdvisorLogo\";\r\nexport const IMAGE_LOGO_OTHERPAGES = \"AdvisorLogoOtherPages\";\r\n\r\nexport const ASSET_PersonalResidence = 0;\r\nexport const ASSET_RealEstate = 1;\r\nexport const ASSET_Stocks = 2;\r\nexport const ASSET_company = 3;\r\nexport const ASSET_RRSP = 4;\r\nexport const ASSET_Bank = 5;\r\nexport const ASSET_Cash = 6;\r\nexport const ASSET_Other = 7;\r\nexport const ASSET_Insurance = 8;\r\nexport const ASSET_TaxCredit = 0;\r\n\r\nexport const TAX_NonTaxable = 0;\r\nexport const TAX_CapGains = 1;\r\nexport const TAX_CapGainsAnnual = 2;\r\nexport const TAX_RRSP = 3;\r\nexport const TAX_Taxable = 4;\r\nexport const TAX_Dividend = 5;\r\n\r\nexport const LIABILITY_LastExpenses = 0;\r\nexport const LIABILITY_LegalExecutorFees = 1;\r\nexport const LIABILITY_OutstandingLoans = 2;\r\nexport const LIABILITY_MortgageRedemption = 3;\r\nexport const LIABILITY_EmergencyFund = 4;\r\nexport const LIABILITY_CharitableGifts = 5;\r\nexport const LIABILITY_LegacyforChildren = 6;\r\nexport const LIABILITY_ChildHomeCare = 7;\r\nexport const LIABILITY_CreditCards = 8;\r\nexport const LIABILITY_IncomeTaxes = 9;\r\nexport const LIABILITY_ClientTaxliability = 10;\r\nexport const LIABILITY_Other = 11;\r\n\r\nexport const ASSET_API_OUTPUT_Year = 0;\r\nexport const ASSET_API_OUTPUT_Age = 1;\r\nexport const ASSET_API_OUTPUT_FMV = 2;\r\nexport const ASSET_API_OUTPUT_EOYBalance = 3;\r\nexport const ASSET_API_OUTPUT_ACB = 4;\r\nexport const ASSET_API_OUTPUT_UCC = 5;\r\nexport const ASSET_API_OUTPUT_CCA = 6;\r\nexport const ASSET_API_OUTPUT_CapitalGain = 7;\r\nexport const ASSET_API_OUTPUT_TaxabaleGain = 8;\r\nexport const ASSET_API_OUTPUT_Recapture = 9;\r\nexport const ASSET_API_OUTPUT_TaxPayable = 10;\r\nexport const ASSET_API_OUTPUT_CapGainsExemption = 11;\r\nexport const ASSET_API_OUTPUT_Deposits = 12;\r\nexport const ASSET_API_OUTPUT_Withdrawals = 13;\r\nexport const ASSET_API_OUTPUT_RRIF = 14;\r\nexport const ASSET_API_OUTPUT_TaxPayableonIncome = 15;\r\nexport const ASSET_API_OUTPUT_DispositionAmount = 16;\r\n\r\nexport const LIABILITY_API_OUTPUT_Year = 0;\r\nexport const LIABILITY_API_OUTPUT_Age = 1;\r\nexport const LIABILITY_API_OUTPUT_ProjectedValue = 2;\r\nexport const LIABILITY_API_OUTPUT_TaxCredit = 3;\r\n\r\nexport const DROPDOWN_WIDE = 1;\r\n\r\nexport const OWNER_ACTION_CLIENTLIQUIDATE = 0;\r\nexport const OWNER_ACTION_CLIENTROLLOVER = 1;\r\nexport const OWNER_ACTION_Spouse = 2;\r\nexport const OWNER_ACTION_Joint = 3;\r\n\r\nexport const DEFAULT_DIVIDEND_TAX_RATE = 30;\r\nexport const DEFAULT_AVG_TAX_RATE = 25;\r\nexport const DEFAULT_CLIENT_AGE = 45;\r\nexport const DEFAULT_SPOUSE_AGE = 40;\r\nexport const DEFAULT_SPOUSE_SALARY = 60000;\r\nexport const DEFAULT_CLIENT_SALARY = 60000;\r\nexport const DEFAULT_SPOUSE_CPP = 100;\r\nexport const DEFAULT_CLIENT_CPP = 50;\r\nexport const DEFAULT_SPOUSE_RETIREMENT = 65;\r\nexport const DEFAULT_CLIENT_RETIREMENT = 65;\r\nexport const DEFAULT_PROVINCE = \"BC\";\r\nexport const DEFAULT_INFLATION = 2;\r\nexport const DEFAULT_INVESTMENT = 3;\r\nexport const DEFAULT_NEED_PERCENT1 = 75;\r\nexport const DEFAULT_NEED_PERCENT2 = 60;\r\n\r\nexport const DEFAULT_RRIF_AGE = 71;\r\n\r\nexport const DISPLAY_RETIREMENT = 0;\r\nexport const DISPLAY_LIFEEXP = 1;\r\nexport const DISPLAY_ENDAGE = 2;\r\nexport const DISPLAY_LIFEEXP_PLUS_3 = 3;\r\n\r\nexport const ORPHAN_AGE_QC = 17;\r\nexport const ORPHAN_AGE_NON_QC = 18;\r\nexport const MAX_ORPHAN_DUR_QC = 18;\r\nexport const MAX_ORPHAN_DUR_NON_QC = 25;\r\nexport const UNIVERSITY_START_AGE = 18;\r\nexport const UNIVERSITY_END_AGE = 22;\r\n\r\nexport const DISPLAY_PRESENTATION = 1;\r\nexport const DISPLAY_GRAPHS = 2;\r\nexport const DISPLAY_SPREADSHEET = 3;\r\nexport const DISPLAY_ANALYSIS = 4;\r\n\r\nconst API_SITE_PROD = \"\"; //\"https://privateapi.ppi.ca/ToolkitDirect\"\r\nconst API_SITE_TEST = \"\"; //\"https://test-tkdirectapi.ppi.ca\";\r\nconst API_SITE_LOCAL = \"http://localhost:8082\"; // \"\"; turn this to \"\" and use proxy server on 3003, first turn on from toolkitDirectProxy Server projet by npm start\r\n\r\nexport const appSiteAPI =\r\n  buildMode === 0\r\n    ? API_SITE_LOCAL\r\n    : buildMode === 1\r\n    ? API_SITE_TEST\r\n    : API_SITE_PROD;\r\n\r\n\r\nexport const ASSET_YEAR_TODAY = {\r\n  en: {\r\n    today: \"today\",\r\n  },\r\n  fr: {\r\n    today: \"auj.\",\r\n  },\r\n};\r\n\r\nexport const TAXASSETS = {\r\n  en: {\r\n    header: \"Tax Treatment\",\r\n    Values: [\r\n      /* 'Non-taxable',\t\r\n\t\t\t'Capital Gains Income',\t\r\n\t\t\t'Registered',\t\r\n\t\t\t'Fully Taxable',\t\r\n\t\t\t'RRIF',\t\r\n\t\t\t'Life Insurance',\t\r\n\t\t\t'Dividend'\t */\r\n      \"Non-taxable\",\r\n      \"Capital Gains Deferred\",\r\n      \"Capital Gains Annual\",\r\n      \"Registered\",\r\n      \"Fully Taxable\",\r\n      \"Dividend\",\r\n    ],\r\n  },\r\n  fr: {\r\n    header: \"Traitement fiscal\",\r\n    Values: [\r\n      \"Non imposable\",\r\n      \"Gains en capital diffrs\",\r\n      \"Gains en capital annuels\",\r\n      \"Enregistr\",\r\n      \"Pleinement imposable\",\r\n      \"Dividende\",\r\n      /* 'Non imposable',\t\r\n\t\t\t'Revenus de gains en capital',\t\r\n\t\t\t'Enregistr',\t\r\n\t\t\t'Pleinement imposable',\t\r\n\t\t\t'FERR',\t\r\n\t\t\t'Assurance vie',\t\r\n\t\t\t'Dividendes/Participations'\t */\r\n    ],\r\n  },\r\n};\r\n\r\nexport const CONTROLTITLEASSETS = {\r\n  en: {\r\n    type: \"Type\",\r\n    owner: \"Owner\",\r\n    amount: \"Current Value\",\r\n    tax: \"Tax Method\",\r\n    disposeYr: \"Year to Dispose\",\r\n    disposeDur: \"Duration of Disposal\",\r\n    ACB: \"ACB\",\r\n    smallBusinessCapGainExemption: \"Exemption ...\",\r\n    \r\n  },\r\n  fr: {\r\n    type: \"Type\",\r\n    owner: \"Propritaire\",\r\n    amount: \"Valeur actuelle\",\r\n    tax: \"Moyen de taxation\",\r\n    disposeYr: \"Anne d'limination\",\r\n    disposeDur: \"Dure de la cession\",\r\n    ACB: \"PBR\",\r\n    smallBusinessCapGainExemption: \"Exonration ...\",\r\n    \r\n  },\r\n};\r\n\r\nexport const CONTROLTITLELIABS = {\r\n  en: {\r\n    year: \"Year\",\r\n    repay: \"Repayment\",\r\n    projValue: \"Projected Value\",\r\n  },\r\n  fr: {\r\n    year: \"Anne\",\r\n    repay: \"Remboursement\",\r\n    projValue: \"Valeur projete\",\r\n  },\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n/* export const LIABILITIES = {\r\n  en: {\r\n    header: \"Cash Needs at Death\",\r\n    Values: [\r\n      \"Last Expenses\",\r\n      \"Legal and Executor Fees\",\r\n      \"Outstanding Loans\",\r\n      \"Mortgage Redemption\",\r\n      \"Emergency Fund\",\r\n      \"Charitable Gifts\",\r\n      \"Legacy for Children\",\r\n      \"Child/Home Care\",\r\n      \"Credit Cards\",\r\n      \"Income Taxes\",\r\n      \"Other\",\r\n      \"Client Tax liability\"\r\n    ]\r\n  },\r\n  fr: {\r\n    header: \"Liquidits requises au dcs\",\r\n    Values: [\r\n      \"Derniers frais\",\r\n      \"Frais juridiques et successoraux\",\r\n      \"Emprunts  rembourser\",\r\n      \"Acquittement de l'hypothque\",\r\n      \"Fonds d'urgence\",\r\n      \"Dons de bienfaisance\",\r\n      \"Hritage pour les enfants\",\r\n      \"Garde d'enfants/soins  domicile\",\r\n      \"Cartes de crdit\",\r\n      \"Impt sur le revenu\",\r\n      \"Autre\",\r\n      \"Impt  payer par le client\"\r\n    ]\r\n  }\r\n}; */\r\n\r\nexport const INCSOURCESATDEATH = {\r\n  en: {\r\n    options: {\r\n      header: \"Options\",\r\n      client: \"Client Retirement Age\",\r\n      spouse: \"Spouse Retirement Age\",\r\n    },\r\n    CPP: {\r\n      header: \"Canada Pension Plan\",\r\n      client: \"Client Participation\",\r\n      spouse: \"Spouse Participation\",\r\n    },\r\n    survivorRetInc: {\r\n      header: \"Estimated Survivor's Retirement Income (in today's dollars)\",\r\n      client: \"Client Annual Income\",\r\n      spouse: \"Spouse Annual Income\",\r\n    },\r\n  },\r\n  fr: {\r\n    options: {\r\n      header: \"Options\",\r\n      client: \"ge de la retraite - client\",\r\n      spouse: \"ge de la retraite - conjoint\",\r\n    },\r\n    CPP: {\r\n      header: \"Rgime de pensions du Canada\",\r\n      client: \"Contribution du client\",\r\n      spouse: \"Contribution du conjoint\",\r\n    },\r\n    survivorRetInc: {\r\n      header:\r\n        \"Estimation du revenu de retraite du survivant (en dollars d'aujourd'hui)\",\r\n      client: \"Revenu annuel du client\",\r\n      spouse: \"Revenu annuel du conjoint\",\r\n    },\r\n  },\r\n};\r\n\r\nexport const PRESENTATION = {\r\n  en: {\r\n    illustrate: {\r\n      header: \"Illustrate Death Of\",\r\n      client: \"Client (New Client)\",\r\n      spouse: \"Spouse\",\r\n      combined: \"Combined\",\r\n    },\r\n    pres: {\r\n      header: \"Presentation\",\r\n      assump: {\r\n        header: \"Presentation Options\",\r\n        inf: \"Inflation Rate\",\r\n        inv: \"Investment Interest Rate\",\r\n      },\r\n      type: {\r\n        header: \"Presentation Type\",\r\n        power: \"PowerPoint\",\r\n        excel: \"Excel\",\r\n      },\r\n      lang: {\r\n        header: \"Presentation Language\",\r\n        en: \"English\",\r\n        fr: \"French\",\r\n      },\r\n      template: {\r\n        header: \"Presentation Templates - 1 available\",\r\n        file: \"File Name\",\r\n      },\r\n    },\r\n    insQuote: {\r\n      header: \"Life Insurance Quote\",\r\n      lifeExp: \"For survivor's normal life expectancy\",\r\n      65: \"Until survivor is age 65\",\r\n      25: \"Until youngest child is age 25\",\r\n      18: \"Until youngest child is age 18\",\r\n    },\r\n  },\r\n  fr: {\r\n    illustrate: {\r\n      header: \"Exemple prsentant le dcs...\",\r\n      client: \"Client (nouveau client)\",\r\n      spouse: \"Conjoint\",\r\n      combined: \"Combin\",\r\n    },\r\n    pres: {\r\n      header: \"Prsentation\",\r\n      assump: {\r\n        header: \"Options de la prsentation\",\r\n        inf: \"Taux d'inflation\",\r\n        inv: \"Taux d'intrt des placements\",\r\n      },\r\n      type: {\r\n        header: \"Type de prsentation\",\r\n        power: \"PowerPoint\",\r\n        excel: \"Excel\",\r\n      },\r\n      lang: {\r\n        header: \"Langue de la prsentation\",\r\n        en: \"Anglais\",\r\n        fr: \"Franais\",\r\n      },\r\n      template: {\r\n        header: \"Modles de prsentation - 1 disponible\",\r\n        file: \"Nom du fichier\",\r\n      },\r\n    },\r\n    insQuote: {\r\n      header: \"Soumission d'assurance vie\",\r\n      lifeExp: \"Pour l'esprance de vie moyenne du survivant\",\r\n      65: \"Jusqu'au 65e anniversaire du survivant\",\r\n      25: \"Jusqu'au 25e anniversaire de l'enfant le plus jeune\",\r\n      18: \"Jusqu'au 18e anniversaire de l'enfant le plus jeune\",\r\n    },\r\n  },\r\n};\r\n\r\nexport const ASSUMPTIONS = {\r\n  en: {\r\n    client: {\r\n      header: \"Client\",\r\n      retAge: \"Retirement Age\",\r\n      margTax: \"Current Marginal Tax Rate\",\r\n      avTax: \"Average Tax Rate at Retirement\",\r\n    },\r\n    spouse: {\r\n      header: \"Spouse\",\r\n      retAge: \"Retirement Age\",\r\n      margTax: \"Current Marginal Tax Rate\",\r\n      avTax: \"Average Tax Rate at Retirement\",\r\n    },\r\n    incAndInf: {\r\n      header: \"Retirement Income and Inflation\",\r\n      aftTaxInc: \"Current After-Tax Income\",\r\n      avTax: \"Current Average Tax Rate\",\r\n      aftTaxRetInc: \"Desired After-Tax Retirement Income\",\r\n      infRate: \"Inflation Rate\",\r\n    },\r\n  },\r\n  fr: {\r\n    client: {\r\n      header: \"Client\",\r\n      retAge: \"ge de la retraite\",\r\n      margTax: \"Taux d'imposition marginal actuel\",\r\n      avTax: \"Taux d'imposition moyen  la retraite\",\r\n    },\r\n    spouse: {\r\n      header: \"Conjoint\",\r\n      retAge: \"ge de la retraite\",\r\n      margTax: \"Taux d'imposition marginal actuel\",\r\n      avTax: \"Taux d'imposition moyen  la retraite\",\r\n    },\r\n    incAndInf: {\r\n      header: \"Revenus de retraite et inflation\",\r\n      aftTaxInc: \"Revenus actuels aprs impts\",\r\n      avTax: \"Taux d'imposition moyen actuel\",\r\n      aftTaxRetInc: \"Revenus de retraite souhaits aprs impts\",\r\n      infRate: \"Taux d'inflation\",\r\n    },\r\n  },\r\n};\r\n\r\nexport const CURRENTSAVE = {\r\n  en: {\r\n    client: {\r\n      header: \"Client\",\r\n      regist: {\r\n        header: \"Registered\",\r\n        currVal: \"Current Value\",\r\n        annCont: \"Annual Contributions\",\r\n        RoR: \"Current Rate of Return\",\r\n        RoRAtRet: \"Assumed Rate of Return at Retirement\",\r\n      },\r\n      nonRegist: {\r\n        header: \"Non-Registered\",\r\n        currVal: \"Current Value\",\r\n        annCont: \"Annual Contributions\",\r\n        RoR: \"Current Rate of Return\",\r\n        RoRAtRet: \"Assumed Rate of Return at Retirement\",\r\n      },\r\n      TFSA: {\r\n        header: \"TFSA\",\r\n        currVal: \"Current Value\",\r\n        annCont: \"Annual Contributions\",\r\n        RoR: \"Current Rate of Return\",\r\n        RoRAtRet: \"Assumed Rate of Return at Retirement\",\r\n      },\r\n    },\r\n    spouse: {\r\n      header: \"Spouse\",\r\n      regist: {\r\n        header: \"Registered\",\r\n        currVal: \"Current Value\",\r\n        annCont: \"Annual Contributions\",\r\n        RoR: \"Current Rate of Return\",\r\n        RoRAtRet: \"Assumed Rate of Return at Retirement\",\r\n      },\r\n      nonRegist: {\r\n        header: \"Non-Registered\",\r\n        currVal: \"Current Value\",\r\n        annCont: \"Annual Contributions\",\r\n        RoR: \"Current Rate of Return\",\r\n        RoRAtRet: \"Assumed Rate of Return at Retirement\",\r\n      },\r\n      TFSA: {\r\n        header: \"TFSA\",\r\n        currVal: \"Current Value\",\r\n        annCont: \"Annual Contributions\",\r\n        RoR: \"Current Rate of Return\",\r\n        RoRAtRet: \"Assumed Rate of Return at Retirement\",\r\n      },\r\n    },\r\n  },\r\n  fr: {\r\n    client: {\r\n      header: \"Client\",\r\n      regist: {\r\n        header: \"Enregistre\",\r\n        currVal: \"Valeur actuelle\",\r\n        annCont: \"Cotisations annuelles\",\r\n        RoR: \"Taux de rendement actuel\",\r\n        RoRAtRet: \"Taux de rendement hypothtique  la retraite\",\r\n      },\r\n      nonRegist: {\r\n        header: \"Non enregistre\",\r\n        currVal: \"Valeur actuelle\",\r\n        annCont: \"Cotisations annuelles\",\r\n        RoR: \"Taux de rendement actuel\",\r\n        RoRAtRet: \"Taux de rendement hypothtique  la retraite\",\r\n      },\r\n      TFSA: {\r\n        header: \"CELI\",\r\n        currVal: \"Valeur actuelle\",\r\n        annCont: \"Cotisations annuelles\",\r\n        RoR: \"Taux de rendement actuel\",\r\n        RoRAtRet: \"Taux de rendement hypothtique  la retraite\",\r\n      },\r\n    },\r\n    spouse: {\r\n      header: \"Spouse\",\r\n      regist: {\r\n        header: \"Enregistre\",\r\n        currVal: \"Valeur actuelle\",\r\n        annCont: \"Cotisations annuelles\",\r\n        RoR: \"Taux de rendement actuel\",\r\n        RoRAtRet: \"Taux de rendement hypothtique  la retraite\",\r\n      },\r\n      nonRegist: {\r\n        header: \"Non enregistre\",\r\n        currVal: \"Valeur actuelle\",\r\n        annCont: \"Cotisations annuelles\",\r\n        RoR: \"Taux de rendement actuel\",\r\n        RoRAtRet: \"Taux de rendement hypothtique  la retraite\",\r\n      },\r\n      TFSA: {\r\n        header: \"CELI\",\r\n        currVal: \"Valeur actuelle\",\r\n        annCont: \"Cotisations annuelles\",\r\n        RoR: \"Taux de rendement actuel\",\r\n        RoRAtRet: \"Taux de rendement hypothtique  la retraite\",\r\n      },\r\n    },\r\n  },\r\n};\r\n\r\nexport const PROGGOUV = {\r\n  en: {\r\n    CPP: {\r\n      header: \"Canada Pension Plan\",\r\n      part: \"Client Participation\",\r\n      start: \"Client Start Age\",\r\n      spousePart: \"Spouse Participation\",\r\n      spouseStart: \"Spouse Start Age\",\r\n    },\r\n    oldAgeSec: {\r\n      header: \"Old Age Security\",\r\n      part: \"Client Participation\",\r\n      start: \"Client Start Age\",\r\n      spousePart: \"Spouse Participation\",\r\n      spouseStart: \"Spouse Start Age\",\r\n    },\r\n  },\r\n  fr: {\r\n    CPP: {\r\n      header: \"Rgime de pensions du Canada\",\r\n      part: \"Contribution du client\",\r\n      start: \"ge du client au dpart\",\r\n      spousePart: \"Contribution du conjoint\",\r\n      spouseStart: \"ge du conjoint au dpart\",\r\n    },\r\n    oldAgeSec: {\r\n      header: \"Scurit de la vieillesse\",\r\n      part: \"Contribution du client\",\r\n      start: \"ge du client au dpart\",\r\n      spousePart: \"Contribution du conjoint\",\r\n      spouseStart: \"ge du conjoint au dpart\",\r\n    },\r\n  },\r\n};\r\n\r\nexport const INCSOURCESATRET = {\r\n  en: {\r\n    client: {\r\n      header: \"Client\",\r\n      from: \"From Age\",\r\n      to: \"To Age\",\r\n      inc: \"Income Amount\",\r\n    },\r\n    spouse: {\r\n      header: \"Spouse\",\r\n      from: \"From Age\",\r\n      to: \"To Age\",\r\n      inc: \"Income Amount\",\r\n    },\r\n  },\r\n  fr: {\r\n    client: {\r\n      header: \"Client\",\r\n      from: \"de l'ge\",\r\n      to: \" l'ge\",\r\n      inc: \"Montant des revenus\",\r\n    },\r\n    spouse: {\r\n      header: \"Spouse\",\r\n      from: \"de l'ge\",\r\n      to: \" l'ge\",\r\n      inc: \"Montant des revenus\",\r\n    },\r\n  },\r\n};\r\n\r\nexport const CONTROLTITLE = {\r\n  en: {\r\n    age: \"Age\",\r\n    sex: \"Sex\",\r\n    smoking: \"Smoking Status\",\r\n    name: \"Name\",\r\n    member: \"Member\",\r\n    type: \"Type\",\r\n    owner: \"Owner\",\r\n    growthDir: \"Grows/Reduces\",\r\n    exposureDur: \"Exposure Duration\",\r\n    changeRate: \"Reduction Rate\",\r\n    repay: \"Annual Repayment\",\r\n    amount: \"Current Value\",\r\n    FA: \"Face Amount\",\r\n    amountGross: \"Gross Value\",\r\n    afterTaxAmount: \"After-tax Value\",\r\n    percent: \"Percent\",\r\n    tax: \"Tax Method\",\r\n    desc: \"Description\",\r\n    disposeYr: \"Year to Dispose\",\r\n    disposeDur: \"Dur. of Disposal\",\r\n    startYear: \"Start Year\",\r\n    dur: \"Duration\",\r\n    ACB: \"ACB\",\r\n    smallBusinessCapGainExemption: \"Exemption...\",\r\n    growth: \"Growth Rate\",\r\n    income: \"Gross Income\",\r\n    avgTax: \"Avg. Tax Rate\",\r\n    retAge: \"Retirement Age\",\r\n    protectToAge: \"Protect to Age\",\r\n    cppElig: \"CPP Eligibility\",\r\n    qppElig: \"QPP Eligibility\",\r\n    invRate: \"Investment Rate\",\r\n    inflation: \"Inflation Rate\",\r\n    taxRate: \"Marginal Tax Rate\",\r\n    dividendTaxRate: \"Dividend Tax Rate\",\r\n    province: \"Province\",\r\n    designedBy: \"Designed By\",\r\n    designedFor: \"Designed For\",\r\n    contributionAmt: \"Contribution\",\r\n    contributionStartYr: \"From Year\",\r\n    contributionDur: \"Duration\",\r\n    withdrawalAmt: \"Withdrawal\",\r\n    withdrawalStartYr: \"From Year\",\r\n    withdrawalDur: \"Duration\",\r\n    incomeRate: \"Income Rate\",\r\n    RRIFRate: \"RRIF Growth Rate\",\r\n    RRIFAge: \"RRIF Age\",\r\n    ownershipAction: \"Ownership\",\r\n    pdf: \"Export to PDF\",\r\n    pdfINAAppendix: \"Export to PDF Appendix\",\r\n    print: \"Printable Page\",\r\n    lifo: \"Life Insurance Funding Options\",\r\n    wl: \"Insurance for Your Whole Life\",\r\n    ep: \"Protecting Your Estate \",\r\n    compulife: \"Get a Quote ...\",\r\n    save: \"Save\",\r\n    load: \"Load\",\r\n    rec: \"Recover\",\r\n    notes: \"Notes\",\r\n    switch: \"Switch Client\"\r\n  },\r\n  fr: {\r\n    age: \"ge\",\r\n    sex: \"Sexe\",\r\n    smoking: \"Fumeur/ non-fumeur\",\r\n    name: \"Nom\",\r\n    member: \"Membre\",\r\n    type: \"Type\",\r\n    owner: \"Propritaire\",\r\n    growthDir: \"Augmente/diminue\",\r\n    exposureDur: \"Dure de l'exposition\",\r\n    changeRate: \"Taux de rduction\",\r\n    repay: \"Remboursement annuel\",\r\n    amount: \"Valeur actuelle\",\r\n    FA: \"Capital assur\",\r\n    amountGross: \"Valeur brute\",\r\n    afterTaxAmount: \"Valeur aprs impt\",\r\n    percent: \"Pourcentage\",\r\n    tax: \"Mthode fiscale\",\r\n    desc: \"Description\",\r\n    disposeYr: \"Anne  liminer\",\r\n    disposeDur: \"Dure de l'limination\",\r\n    startYear: \"Anne de dmarrage\",\r\n    dur: \"Dure\",\r\n    ACB: \"PBR\",\r\n    smallBusinessCapGainExemption: \"Exonration...\",\r\n    growth: \"Taux de croissance\",\r\n    income: \"Revenu brut\",\r\n    avgTax: \"% d'impt moyen\",\r\n    retAge: \"ge de la retraite\",\r\n    protectToAge: \"Protection  l'ge\",\r\n    cppElig: \"Admissibilit au RPC\",\r\n    qppElig: \"Admissibilit au RRQ\",\r\n    invRate: \"Taux de rendement\",\r\n    inflation: \"Taux d'inflation\",\r\n    taxRate: \"% d'impt marginal\",\r\n    dividendTaxRate: \"Taux d'imposition\", // des dividendes\",\r\n    province: \"Province\",\r\n    designedBy: \"Par\",\r\n    designedFor: \"Conu pour\",\r\n    contributionAmt: \"Contribution\",\r\n    contributionStartYr: \"From Year\",\r\n    contributionDur: \"Dure\",\r\n\r\n    withdrawalAmt: \"Retrait\",\r\n    withdrawalStartYr: \"De l'anne\",\r\n    withdrawalDur: \"Dure\",\r\n\r\n    incomeRate: \"Revenu en %\",\r\n    RRIFRate: \"Taux de crois. FERR\",\r\n    RRIFAge: \"ge  FERR\",\r\n    ownershipAction: \"Proprit\",\r\n    pdf: \"Exporter en format PDF\",\r\n    pdfINAAppendix: \"Exporter vers l'annexe PDF\",\r\n    print: \"Page imprimable\",\r\n    lifo: \"Modes de financement de l'assurance vie\",\r\n    wl: \"L'assurance pour votre vie entire\",\r\n    ep: \"Protection de votre patrimoine\",\r\n    compulife: \"Gnrer une cotation\",\r\n    save: \"Enregistrer\",\r\n    load: \"Charger\",\r\n    rec: \"Rcuprer\",\r\n    notes: \"Notes\",\r\n    switch: \"Client d'change\"\r\n  },\r\n};\r\n\r\nexport const TITLES = {\r\n  en: {\r\n    appletINA: \"Insurance Needs Analysis\",\r\n    appletEP: \"Protecting Your Estate\",\r\n    clients: \"Family Profile\",\r\n    clients_1: \"Client Profile\",\r\n    assets: \"Assets, Sources of Cash\",\r\n    liabilities: \"Liabilities, Cash Needs at Death\",\r\n    sources: \"Sources of Income of the Survivor\",\r\n    sources_1: \"Sources of Income of the Estate\",\r\n    needs: \"Income Needs of the Survivor\",\r\n    needs_1: \"Income Needs of the Estate\",\r\n    settings: \"Presentation Options\",\r\n    presentations: \"Presentation Details\",\r\n    results: \"Results\",\r\n    presBut: \"Presentation\",\r\n    graphsBut: \"Graphs\",\r\n    retBut: \"Retirement\",\r\n    protectButton: \"Protection Period\",\r\n    leBut: \"Life Expectancy\",\r\n    age100But: \"Age 100\",\r\n    spreadsheetBut: \"Spreadsheet\",\r\n    analysisBut: \"Analysis\",\r\n    benef: \"beneficiary...\",\r\n    insuredJLTD: \"insure as JLTD\",\r\n    insured: \"to be insured...\",\r\n\r\n    default: \"Set as Default\",\r\n    defaultClear: \"Clear Default\",\r\n  },\r\n  fr: {\r\n    appletINA: \"Analyse des besoins en matire d'assurance\",\r\n    appletEP: \"Protection de votre patrimoine\",\r\n    clients: \"Profil familial\",\r\n    clients_1: \"Profil du client\",\r\n    assets: \"Sources de capitaux\",\r\n    liabilities: \"Liquidits requises au dcs\",\r\n    sources: \"Sources de revenus au dcs\",\r\n    sources_1: \"Sources de revenus de la succession\",\r\n    needs: \"Besoins de revenu du survivant\",\r\n    needs_1: \"Besoins de revenu du la succession\",\r\n    settings: \"Options de la prsentation\",\r\n    presentations: \"Prcisions sur la prsentation\",\r\n    results: \"Rsultats\",\r\n    presBut: \"Prsentation\",\r\n    graphsBut: \"Graphique\",\r\n    retBut: \"Retraite\",\r\n    protectButton: \"Priode de protection\",\r\n    leBut: \"Esprance de vie\",\r\n    age100But: \"100 ans\",\r\n    spreadsheetBut: \"Feuille de calcul\",\r\n    analysisBut: \"Analyse\",\r\n    benef: \"bnficiaire...\",\r\n    insured: \"tre assur...\",\r\n    default: \"Dfinir par dfaut\",\r\n    defaultClear: \"Effacer Par dfaut\",\r\n  },\r\n};\r\n\r\nexport const UNLISTED = {\r\n  en: {\r\n    Assets: {\r\n      Values: [\"Charit. Gifts Tax Credit\"],\r\n    },\r\n  },\r\n  fr: {\r\n    Assets: {\r\n      Values: [\"Crdit d'impt pour don de bienfaisance\"],\r\n    },\r\n  },\r\n};\r\n\r\nexport const OUTPUTTITLE = {\r\n  en: {\r\n    Values: [\r\n      \"Insurance Needs Analysis\",\r\n      \"Family Cash Needs at Death\",\r\n      \"Family Income Needs at Death\",\r\n      \"Family Cash Sources at Death\",\r\n      \"Family Income Sources at Death\",\r\n      \"Life Insurance Analysis\",\r\n      \"Some Important Notes\",\r\n    ],\r\n  },\r\n  fr: {\r\n    Values: [\r\n      \"Analyse des besoins en matire d'assurance\",\r\n      \"Liquidits requises pour la famille au dcs\",\r\n      \"Revenus requis pour la famille au dcs\",\r\n      \"Sources de liquidits de la famille au dcs\",\r\n      \"Sources de revenus de la famille au dcs\",\r\n      \"Analyse des besoins d'assurance vie\",\r\n      \"Notes importantes\",\r\n    ],\r\n  },\r\n};\r\n\r\nexport const OUTPUTTITLE_EP = {\r\n  en: {\r\n    Values: [\r\n      \"Protecting your Estate\",\r\n      \"Family Cash Needs at Death\",\r\n      \"Family Income Needs at Death\",\r\n      \"Family Cash Sources at Death\",\r\n      \"Family Income Sources at Death\",\r\n      \"Life Insurance Analysis\",\r\n      \"Some Important Notes\",\r\n    ],\r\n  },\r\n  fr: {\r\n    Values: [\r\n      \"Protection de votre patrimoine\",\r\n      \"Liquidits requises pour la famille au dcs\",\r\n      \"Revenus requis pour la famille au dcs\",\r\n      \"Sources de liquidits de la famille au dcs\",\r\n      \"Sources de revenus de la famille au dcs\",\r\n      \"Analyse des besoins d'assurance vie\",\r\n      \"Notes importantes\",\r\n    ],\r\n  },\r\n};\r\n\r\nexport const MESSAGES = {\r\n  en: {\r\n    insNeed: \"Insurance Needs\",\r\n    graphLine2: \"To provide for the income shortfall until retirement\",\r\n    graphT1: \"Personal cash Flow\",\r\n    graphT2: \"Government cash Flow\",\r\n    graphT3: \"Income Needs\",\r\n    graphT4: \"Shortfall(-)/Surplus(+)\",\r\n    \r\n    ever: \" ... for ever\",\r\n    taxMsg: \"Tax methods need to be discussed with your financial advisor\",\r\n    fetch: \"Failed to connect to the server\",\r\n    \r\n  },\r\n  fr: {\r\n    insNeed: \"Besoins d'assurance\",\r\n    graphLine2:\r\n      \"Pour couvrir le manque  gagner en matire de revenus jusqu' la retraite\",\r\n    graphT1: \"Liquidits personnelles\",\r\n    graphT2: \"Liquidits verses par l'tat\",\r\n    graphT3: \"Revenus requis\",\r\n    graphT4: \"Manque  gagner(-)/surplus(+)\",\r\n    infoYr0:\r\n      \"L'anne 0 est l'anne d                                                                                     u dcs\",\r\n    infoRetDur: \"Le nombre d'annes avant la retraite est de .... ans\",\r\n    infoAvgTax:\r\n      \"Survivor's tax rate is applied to annual income and interest and annual asset disposition. Marginal tax rate (under Presentaion Details) is applied to planned or potential full disposition of an asset\",\r\n    infoAdjust:\r\n      \"Ajuster les besoins de revenu et les dures de la source de revenu  dernier ge (99) or l'esprance de vie de\",\r\n    clientOnly:\r\n      \"L'analyse des besoins est toujours effectue pour le client membre de la famille\",\r\n    infoElig:\r\n      \"Les prestations du survivant et de l'orphelin sont bases sur l'admissibilit du client\",\r\n    ever: \" ... pour toujours\",\r\n    taxMsg:\r\n      \"Les mthodes fiscales doivent tre discutes avec votre conseiller financier\",\r\n    fetch: \"Dfaut de connexion au serveur\",\r\n    ie:\r\n      \"s'il vous plat utiliser les navigateurs Edge ou Chrome pour les graphiques et les fonctionnalits compltes\",\r\n    govB:\r\n      \"Ne supprimez pas les prestations gouvernementales. Pour les ajuster, modifier l'admissibilit du client\",\r\n    assetTax:\r\n      \"Veuillez utiliser les valeurs des actifs aprs impt jusqu' ce que la mthode d'imposition devienne disponibl\",\r\n  },\r\n};\r\n\r\nexport const COLUMN_TITLES = {\r\n  INA_SHEET_HEADERS: {\r\n    en: {\r\n      Full: [\r\n        \"Calendar Year\",\r\n        \"Survivor Age\",\r\n        \"Income Needs\",\r\n        \"Survivors' CPP/QPP\",\r\n        \"Survivors' Income\",\r\n        \"Other Income\",\r\n        \"Total Income\",\r\n        \"Assets, Liabilities Cash Flow\",\r\n        \"Additional Amounts Required\",\r\n        \"Additional Capital Required\",\r\n        \"Capital Fund\",\r\n      ],\r\n    },\r\n    fr: {\r\n      Full: [\r\n        \"Anne calendaire\",\r\n        \"ge du survivant\",\r\n        \"Revenus requis\",\r\n        \"RPC/RRQ des survivants\",\r\n        \"Revenu des survivants\",\r\n        \"Autre revenu\",\r\n        \"Revenu total\",\r\n        \"Flux de trsorerie des actifs et des passifs\",\r\n        \"Montants additionnel requis\",\r\n        \"Capital additionnel requis\",\r\n        \"Fonds de capitaux\",\r\n      ],\r\n    },\r\n  },\r\n  EP_SHEET_HEADERS: {\r\n    en: {\r\n      Full: [\r\n        \"Year\",\r\n        \"Age\",\r\n        \"BOY Balance\",\r\n        \"Fair Market Value\",\r\n        \"Contributions\",\r\n        \"Income, RRIF\",\r\n        \"Sale Proceeds\",\r\n        \"Tax on Income\",\r\n        \"Capital Gain\",\r\n        \"Capital Gains Exemption\",\r\n        \"EOY Balance\",\r\n        \"Average Growth\",\r\n        \"Tax Payable at Death\",\r\n      ],\r\n    },\r\n    fr: {\r\n      Full: [\r\n        \"Anne\",\r\n        \"ge\",\r\n        \"Valeur en dbut d'anne\",\r\n        \"Juste valeur marchande\",\r\n        \"Contributions\",\r\n        \"Revenus, FEER\",\r\n        \"Produits de la vente\",\r\n        \"Impt sur le revenu\",\r\n        \"Gain en capital\",\r\n        \"Exonration des gains en capital\",\r\n        \"Valeur en fin d'anne\",\r\n        \"Croissance moyenne\",\r\n        \"Impt payable au dcs\",\r\n      ],\r\n    },\r\n  },\r\n\r\n  en: {\r\n    intRate: \"Interest Rate\",\r\n    infRate: \"Inflation Rate\",\r\n    surplusCapital: \"Surplus Capital\",\r\n    blank: \"\",\r\n    additionalCapitalReq: \"Additional Capital Required:\",\r\n    survivorLE: \"For survivor's normal life expectancy\",\r\n    survivor65: \"Until survivor is age 65\",\r\n    survivorProtection: \"Until the end of Protection Period\",\r\n    Year: \"Year\",\r\n    Age: \"Age\",\r\n    FMV: \"Fair Market Value\",\r\n    FA: \"Face Amount\",\r\n    EOYBalance: \"EOY Balance\",\r\n    AvgGrowth: \"Average Growth\",\r\n    ACB: \"ACB\",\r\n    AnnualContribution: \"Annual Contribution\",\r\n    MinRRIFIncome: \"Min. RRIF Income\",\r\n    Withdrawal: \"Income, Withdrawal\",\r\n    SaleProceeds: \"Sale Proceeds\",\r\n    RentalIncome: \"Rental Income\",\r\n    TaxLiability: \"Tax Liability\",\r\n    Taxonincome: \"Tax on income\",\r\n    TaxLiabilityatDeath: \"Tax Liability at Death\",\r\n    CapitalGain: \"Capital Gain\",\r\n    CapitalGainsExemption: \"Capital Gains Exemption\",\r\n  },\r\n  fr: {\r\n    intRate: \"Taux d'intrt\",\r\n    infRate: \"Taux d'inflation\",\r\n    surplusCapital: \"Capital excdentaire\",\r\n    blank: \"\",\r\n    additionalCapitalReq: \"Capital additionnel requis: \",\r\n    survivorLE: \"Pour l'esprance de vie moyenne du survivant\",\r\n    survivor65: \"Jusqu'au 65e anniversaire du survivant\",\r\n    survivorProtection: \"Jusqu' la fin de la priode de protection\",\r\n    Year: \"Anne\",\r\n    Age: \"ge\",\r\n    FMV: \"Juste valeur marchande\",\r\n    FA: \"Capital assur\",\r\n    EOYBalance: \"Valeur FDA\",\r\n    AvgGrowth: \"Croissance moyenne\",\r\n    ACB: \"PBR\",\r\n    AnnualContribution: \"Cotisations annuelles\",\r\n    MinRRIFIncome: \"Revenu minimal d'un FERR\",\r\n    Withdrawal: \"Revenu, retrait\",\r\n    SaleProceeds: \"Produits de la vente\",\r\n    RentalIncome: \"Revenus locatifs\",\r\n    TaxLiability: \"Impt  payer\",\r\n    Taxonincome: \"Impt sur le revenu\",\r\n    TaxLiabilityatDeath: \"Impt  payer au dcs\",\r\n    CapitalGain: \"Gain en capital\",\r\n    CapitalGainsExemption: \"Exonration des gains en capital\",    \r\n  },\r\n};\r\n\r\nexport const GRID_INTERNAL_CAPTIONS = {\r\n  en: {\r\n    excel: \"Download Excel\",\r\n    rows: \"Rows per page\",\r\n    of: \"of\",\r\n  },\r\n  fr: {\r\n    excel: \"Tlcharger le fichier Excel\",\r\n    rows: \"Lignes par page\",\r\n    of: \"lignes 1-5 sur 10\",\r\n  },\r\n};\r\n\r\nexport const TOTALS = {\r\n  ESTATE_LIAB: {\r\n    value: { en: \"Estate Liability\", fr: \"Droits successoraux\" },\r\n    Key: \"ESTATE_LIAB\",\r\n    order: 1,\r\n    colour: \"#872651\",\r\n  },\r\n  TAX_LIAB: {\r\n    value: { en: \"Tax Liability\", fr: \"Impt  payer\" },\r\n    Key: \"TAX_LIAB\",\r\n    order: 1,\r\n    colour: \"#872651\",\r\n  },\r\n};\r\n\r\nexport const EMAIL = {\r\n  en: {\r\n    body: \"The following link opens your quote in Toolkit Direct\", //. Once there, click on Insurance Needs Analysis to open up the attached quote.\",\r\n  },\r\n  fr: {\r\n    body:\r\n      \"Le lien suivant ouvre vos valeurs d'entre dans Bote  outils directe\",\r\n  },\r\n};\r\n\r\nexport const LIABILITIES = {\r\n  LAST_EXPENSES: {\r\n    value: { en: \"Last Expenses\", fr: \"Derniers frais\" },\r\n    Key: \"LAST_EXPENSES\",\r\n    order: 2,\r\n    ID: 0,\r\n  },\r\n  LEGAL_AND_EXECUTOR_FEES: {\r\n    value: {\r\n      en: \"Legal and Executor Fees\",\r\n      fr: \"Frais juridiques et successoraux\",\r\n    },\r\n    Key: \"LEGAL_AND_EXECUTOR_FEES\",\r\n    order: 3,\r\n    ID: 1,\r\n  },\r\n  OUTSTANDING_LOANS: {\r\n    value: { en: \"Outstanding Loans\", fr: \"Empruntsrembourser\" },\r\n    Key: \"OUTSTANDING_LOANS\",\r\n    order: 4,\r\n    ID: 2,\r\n  },\r\n  MORTGAGE_REDEMPTION: {\r\n    value: { en: \"MortgageRedemption\", fr: \"Acquittementdel'hypothque\" },\r\n    Key: \"MORTGAGE_REDEMPTION\",\r\n    order: 5,\r\n    ID: 3,\r\n  },\r\n  EMERGENCY_FUND: {\r\n    value: { en: \"EmergencyFund\", fr: \"Fondsd'urgence\" },\r\n    Key: \"EMERGENCY_FUND\",\r\n    order: 6,\r\n    ID: 4,\r\n  },\r\n  CHARITABLE_GIFTS: {\r\n    value: { en: \"CharitableGifts\", fr: \"Donsdebienfaisance\" },\r\n    Key: \"CHARITABLE_GIFTS\",\r\n    order: 7,\r\n    ID: 5,\r\n  },\r\n  LEGACY_FOR_CHILDREN: {\r\n    value: { en: \"LegacyforChildren\", fr: \"Hritagepourlesenfants\" },\r\n    Key: \"LEGACY_FOR_CHILDREN\",\r\n    order: 8,\r\n    ID: 6,\r\n  },\r\n  CHILD_HOME_CARE: {\r\n    value: { en: \"Child/HomeCare\", fr: \"Garded'enfants/soinsdomicile\" },\r\n    Key: \"CHILD_HOME_CARE\",\r\n    order: 9,\r\n    ID: 7,\r\n  },\r\n  CREDIT_CARDS: {\r\n    value: { en: \"CreditCards\", fr: \"Cartesdecrdit\" },\r\n    Key: \"CREDIT_CARDS\",\r\n    order: 10,\r\n    ID: 8,\r\n  },\r\n  INCOME_TAXES: {\r\n    value: { en: \"IncomeTaxes\", fr: \"Imptsurlerevenu\" },\r\n    Key: \"INCOME_TAXES\",\r\n    order: 11,\r\n    ID: 9,\r\n  },\r\n  OTHER: { value: { en: \"Other\", fr: \"Autre\" }, Key: \"OTHER\", order: 10 },\r\n  CLIENT_TAX_LIABILITY: {\r\n    value: { en: \"ClientTaxliability\", fr: \"Impt  payer par le client\" },\r\n    Key: \"CLIENT_TAX_LIABILITY\",\r\n    order: 0, // no show\r\n    ID: 10,\r\n  },\r\n  PROBATE: {\r\n    value: { en: \"Probate\", fr: \"Frais d'homologation\" },\r\n    Key: \"PROBATE\",\r\n    order: 1,\r\n    ID: 11,\r\n  },\r\n  \r\n};\r\n\r\nexport const ASSETS = {\r\n  PERSONAL_RESIDENCE: {\r\n    value: {\r\n      en: \"Principal Residence\",\r\n      fr: \"Rsidence principale\",\r\n      oldName: \"Personal Residence\",\r\n    },\r\n    Key: \"PERSONAL_RESIDENCE\",\r\n    order: 1,\r\n    ID: 0,\r\n    colour: \"#9B5BA5\",\r\n  },\r\n  REAL_ESTATE: {\r\n    value: { en: \"Real Estate\", fr: \"Immobilier\" },\r\n    Key: \"REAL_ESTATE\",\r\n    order: 2,\r\n    ID: 1,\r\n    colour: \"#0093b2\",\r\n  },\r\n  STOCKS_BONDS: {\r\n    value: { en: \"Stocks & Bonds\", fr: \"Actions et obligations\" },\r\n    Key: \"STOCKS_BONDS\",\r\n    order: 3,\r\n    ID: 2,\r\n    colour: \"#00215b\",\r\n  },\r\n  SMALL_BUSINESS_SHARES: {\r\n    value: {\r\n      en: \"Small Business Shares\",\r\n      fr: \"Actions de petites entreprises \",\r\n    },\r\n    Key: \"SMALL_BUSINESS_SHARES\",\r\n    order: 4,\r\n    ID: 3,\r\n    colour: \"#c4dfe0\",\r\n  },\r\n  RRSP_RRIF: {\r\n    value: { en: \"RRSP/RRIF\", fr: \"REER/FERR\" },\r\n    Key: \"RRSP_RRIF\",\r\n    order: 5,\r\n    ID: 4,\r\n    colour: \"#cf7f00\",\r\n  },\r\n  INTEREST_BEARING: {\r\n    value: { en: \"Interest Bearing\", fr: \"Placement  intrt\" },\r\n    Key: \"INTEREST_BEARING\",\r\n    order: 7,\r\n    ID: 5,\r\n    colour: \"#dfd666\",\r\n  },\r\n  CASH: {\r\n    value: { en: \"Cash\", fr: \"Liquidits\" },\r\n    Key: \"CASH\",\r\n    order: 8,\r\n    ID: 6,\r\n    colour: \"darkred\",\r\n  },\r\n  OTHER_ASSETS: {\r\n    value: { en: \"Other Assets\", fr: \"Autres actifs\" },\r\n    Key: \"OTHER_ASSETS\",\r\n    order: 9,\r\n    ID: 7,\r\n    colour: \"#949a9e\",\r\n  },\r\n  LIFE_INSURANCE: {\r\n    value: { en: \"Life Insurance\", fr: \"Assurance vie\" },\r\n    Key: \"LIFE_INSURANCE\",\r\n    order: 10,\r\n    ID: 8,\r\n    colour: \"872651\",\r\n  },\r\n  CHARITABLE_GIFTS_TAX_CREDIT: {\r\n    value: {\r\n      en: \"Charit. Gifts Tax Credit\",\r\n      fr: \"Crdit d'impt pour don de bienfaisance\",\r\n    },\r\n    Key: \"CHARITABLE_GIFTS_TAX_CREDIT\",\r\n    order: 0, // no show,\r\n    ID: 9,\r\n    colour: \"872651\",\r\n  },\r\n  TFSA: {\r\n    value: {\r\n      en: \"TFSA\",\r\n      fr: \"CELI\",\r\n    },\r\n    Key: \"TFSA\",\r\n    order: 6,\r\n    ID: 10,\r\n    colour: \"872651\",\r\n  },\r\n};\r\n\r\nexport const OWNERSHIP = {\r\n  CLIENT: {\r\n    value: { en: \"Client\", fr: \"Client\" },\r\n    Key: \"CLIENT\",\r\n    order: 0,\r\n    ID: 0,\r\n  },\r\n  SPOUSE: {\r\n    value: { en: \"Spouse\", fr: \"Conjoint\" },\r\n    Key: \"SPOUSE\",\r\n    order: 3,\r\n    ID: 1,\r\n  },\r\n  JOINT: {\r\n    value: { en: \"Joint\", fr: \"Conjoint\" },\r\n    Key: \"JOINT\",\r\n    order: 4,\r\n    ID: 2,\r\n  },\r\n};\r\n\r\nexport const ASSET_OWNERSHIP_ACTION = {\r\n  CLIENT: {\r\n    value: { en: \"Client\", fr: \"Client\" },\r\n    Key: \"CLIENT\",\r\n    order: 0,\r\n    ID: 0,\r\n  },\r\n  SPOUSE: {\r\n    value: { en: \"Spouse\", fr: \"Conjoint\" },\r\n    Key: \"SPOUSE\",\r\n    order: 3,\r\n    ID: 1,\r\n  },\r\n  JOINT: {\r\n    value: { en: \"Joint\", fr: \"Conjoint\" },\r\n    Key: \"JOINT\",\r\n    order: 4,\r\n    ID: 2,\r\n  },\r\n  CLIENT_LIQUIDATE: {\r\n    value: { en: \"Client: Liquidate\", fr: \"Client : Liquider\" },\r\n    Key: \"CLIENT_LIQUIDATE\",\r\n    order: 1,\r\n    ID: 3,\r\n  },\r\n  CLIENT_ROLLOVER: {\r\n    value: { en: \"Client: Roll-over\", fr: \"Client : Report\" },\r\n    Key: \"CLIENT_ROLLOVER\",\r\n    order: 2,\r\n    ID: 4,\r\n  },\r\n};\r\n\r\nexport const ASSET_TAX = {\r\n  NON_TAXABLE: {\r\n    value: { en: \"Non-taxable\", fr: \"Non imposable\" },\r\n    Key: \"NON_TAXABLE\",\r\n    order: 1,\r\n    ID: 0,\r\n  },\r\n  CAPITAL_GAINS_DEFERRED: {\r\n    value: { en: \"Capital Gains Deferred\", fr: \"Gains en capital diffrs\" },\r\n    Key: \"CAPITAL_GAINS_DEFERRED\",\r\n    order: 2,\r\n    ID: 1,\r\n  },\r\n  CAPITAL_GAINS_ANNUAL: {\r\n    value: { en: \"Capital Gains Annual\", fr: \"Gains en capital annuels\" },\r\n    Key: \"CAPITAL_GAINS_ANNUAL\",\r\n    order: 3,\r\n    ID: 2,\r\n  },\r\n  REGISTERED: {\r\n    value: { en: \"Registered\", fr: \"Enregistr\" },\r\n    Key: \"REGISTERED\",\r\n    order: 4,\r\n    ID: 3,\r\n  },\r\n  FULLY_TAXABLE: {\r\n    value: { en: \"Fully Taxable\", fr: \"Pleinement imposable\" },\r\n    Key: \"FULLY_TAXABLE\",\r\n    order: 5,\r\n    ID: 4,\r\n  },\r\n  DIVIDEND: {\r\n    value: { en: \"Dividend\", fr: \"Dividende\" },\r\n    Key: \"DIVIDEND\",\r\n    order: 0,\r\n    ID: 5,\r\n  },\r\n  INTEREST: {\r\n    value: { en: \"Interest\", fr: \"Intrts\" },\r\n    Key: \"INTEREST\",\r\n    order: 6,\r\n    ID: 6,\r\n  },\r\n  QUALIFYING_SMALL_BUSINESS: {\r\n    value: { en: \"Qualif. Small Business\", fr: \"petites entreprises\" },\r\n    Key: \"QUALIFYING_SMALL_BUSINESS\",\r\n    order: 7,\r\n    ID: 7,\r\n  },\r\n};\r\n\r\nexport const INCOMESOURCES = {\r\n  SURVIVORS_INCOME: {\r\n    value: { en: \"Survivor's Income\", fr: \"Revenus du survivant\" },\r\n    Key: \"SURVIVORS_INCOME\",\r\n    order: 1,\r\n    ID: 0,\r\n  },\r\n  GOV_SURVIVORS_PENSION: {\r\n    value: {\r\n      en: \"Gov. Survivor's Pension\",\r\n      fr: \"Pension de survivant du gouv.\",\r\n    },\r\n    Key: \"GOV_SURVIVORS_PENSION\",\r\n    order: 2,\r\n    ID: 1,\r\n  },\r\n  GOV_DEATH_BENEFIT: {\r\n    value: { en: \"Gov. Death Benefit\", fr: \"Prestation de dcs du gouv.\" },\r\n    Key: \"GOV_DEATH_BENEFIT\",\r\n    order: 3,\r\n    ID: 2,\r\n  },\r\n  GOV_ORPHANS_BENEFIT: {\r\n    value: {\r\n      en: \"Gov. Orphan's Benefit\",\r\n      fr: \"Prestation d'orphelin du gouv.\",\r\n    },\r\n    Key: \"GOV_ORPHANS_BENEFIT\",\r\n    order: 4,\r\n    ID: 3,\r\n  },\r\n  RENTAL_INCOME: {\r\n    value: { en: \"Rental Income\", fr: \"Revenus locatifs\" },\r\n    Key: \"RENTAL_INCOME\",\r\n    order: 5,\r\n    ID: 4,\r\n  },\r\n  DIVIDEND_INCOME: {\r\n    value: { en: \"Dividend Income\", fr: \"Revenu de dividendes\" },\r\n    Key: \"DIVIDEND_INCOME\",\r\n    order: 6,\r\n    ID: 5,\r\n  },\r\n\r\n  RETIREMENT_INCOME: {\r\n    value: { en: \"Retirement Income\", fr: \"Revenus de retraite\" },\r\n    Key: \"RETIREMENT_INCOME\",\r\n    order: 7,\r\n    ID: 6,\r\n  },\r\n  OTHER: {\r\n    value: { en: \"Other\", fr: \"Autre\" },\r\n    Key: \"OTHER\",\r\n    order: 8,\r\n    ID: 7,\r\n  },\r\n  RRIF: {\r\n    value: { en: \"RRIF\", fr: \"FERR\" },\r\n    Key: \"RRIF\",\r\n    order: 0,\r\n    ID: 8,\r\n  },\r\n};\r\n\r\nexport const INCOMENEEDS = {\r\n  PERCET_OF_INCOME: {\r\n    value: { en: \"% of Total Income\", fr: \"% du revenu total\" },\r\n    Key: \"PERCET_OF_INCOME\",\r\n    order: 1,\r\n    ID: 0,\r\n  },\r\n\r\n  EDUCATION_FUND: {\r\n    value: { en: \"Education Fund\", fr: \"Fonds d'tudes\" },\r\n    Key: \"EDUCATION_FUND\",\r\n    order: 2,\r\n    ID: 1,\r\n  },\r\n\r\n  TEMPORARY_INCOME: {\r\n    value: { en: \"Temporary Income\", fr: \"Revenus temporaires\" },\r\n    Key: \"TEMPORARY_INCOME\",\r\n    order: 3,\r\n    ID: 2,\r\n  },\r\n\r\n  OTHER: {\r\n    value: { en: \"Other\", fr: \"Autre\" },\r\n    Key: \"OTHER\",\r\n    order: 4,\r\n    ID: 3,\r\n  },\r\n};\r\n\r\nexport const PROVINCE = {\r\n  // \r\n  // {AB, BC, ON, QC, MB, NS, NB, NF, SK, PE, NT, NU,YU,YT}\r\n  AB: {\r\n    value: { en: \"Alberta\", fr: \"Alberta\" },\r\n    Key: \"AB\",\r\n    order: 1,\r\n    ID: 0,\r\n  },\r\n  BC: {\r\n    value: { en: \"British Columbia\", fr: \"Colombie-Britannique\" },\r\n    Key: \"BC\",\r\n    order: 2,\r\n    ID: 1,\r\n  },\r\n  ON: {\r\n    value: { en: \"Ontario\", fr: \"Ontario\" },\r\n    Key: \"ON\",\r\n    order: 8,\r\n    ID: 2,\r\n  },\r\n  QC: {\r\n    value: { en: \"Quebec\", fr: \"Qubec\" },\r\n    Key: \"QC\",\r\n    order: 10,\r\n    ID: 3,\r\n  },\r\n  MB: {\r\n    value: { en: \"Manitoba\", fr: \"Manitoba\" },\r\n    Key: \"MB\",\r\n    order: 3,\r\n    ID: 4,\r\n  },\r\n  NS: {\r\n    value: { en: \"Nova Scotia\", fr: \"Nouvelle-cosse\" },\r\n    Key: \"NS\",\r\n    order: 6,\r\n    ID: 5,\r\n  },\r\n  NB: {\r\n    value: { en: \"New Brunswick\", fr: \"Nouveau-Brunswick\" },\r\n    Key: \"NB\",\r\n    order: 4,\r\n    ID: 6,\r\n  },\r\n  NF: {\r\n    value: { en: \"Newfoundland and Labrador\", fr: \"Terre-Neuve-et-Labrador\" },\r\n    Key: \"NF\",\r\n    order: 3,\r\n    ID: 7,\r\n  },\r\n  SK: {\r\n    value: { en: \"Saskatchewan\", fr: \"Saskatchewan\" },\r\n    Key: \"SK\",\r\n    order: 11,\r\n    ID: 8,\r\n  },\r\n  PE: {\r\n    value: { en: \"Prince Edward Island\", fr: \"le-du-Prince-douard\" },\r\n    Key: \"PE\",\r\n    order: 9,\r\n    ID: 9,\r\n  },\r\n  YU: {\r\n    value: { en: \"Yukon\", fr: \"Yukon\" },\r\n    Key: \"YU\",\r\n    order: 12,\r\n    ID: 12,\r\n  },\r\n  NU: {\r\n    value: { en: \"Nunavut\", fr: \"Nunavut\" },\r\n    Key: \"NU\",\r\n    order: 7,\r\n    ID: 11,\r\n  },\r\n  NT: {\r\n    value: { en: \"Northwest Territories\", fr: \"Territoires du Nord-Ouest\" },\r\n    Key: \"NT\",\r\n    order: 5,\r\n    ID: 10,\r\n  },\r\n};\r\n\r\nexport const MEMBER = {\r\n  CLIENT: {\r\n    value: { en: \"Client\", fr: \"Client\" },\r\n    Key: \"CLIENT\",\r\n    order: 1,\r\n    ID: 0,\r\n  },\r\n  SPOUSE: {\r\n    value: { en: \"Spouse\", fr: \"Conjoint\" },\r\n    Key: \"SPOUSE\",\r\n    order: 2,\r\n    ID: 1,\r\n  },\r\n  CHILD: {\r\n    value: { en: \"Child\", fr: \"Enfant\" },\r\n    Key: \"CHILD\",\r\n    order: 3,\r\n    ID: 2,\r\n  },\r\n  DEPENDENT_ADULT: {\r\n    value: { en: \"Dependent Adult\", fr: \"Adulte  charge\" },\r\n    Key: \"DEPENDENT_ADULT\",\r\n    order: 4,\r\n    ID: 3,\r\n  },\r\n};\r\n\r\nexport const SEX = {\r\n  MALE: {\r\n    value: { en: \"Male\", fr: \"Homme\" },\r\n    Key: \"MALE\",\r\n    order: 1,\r\n    ID: 0,\r\n  },\r\n  FEMALE: {\r\n    value: { en: \"Female\", fr: \"Femme\" },\r\n    Key: \"FEMALE\",\r\n    order: 2,\r\n    ID: 1,\r\n  },\r\n};\r\n\r\nexport const GROWTHDIR = {\r\n  GROWS: {\r\n    value: { en: \"Grows\", fr: \"Augmente\" },\r\n    Key: \"GROWS\",\r\n    order: 1,\r\n    ID: 0,\r\n  },\r\n  REDUCES: {\r\n    value: { en: \"Reduces\", fr: \"Diminue\" },\r\n    Key: \"REDUCES\",\r\n    order: 2,\r\n    ID: 1,\r\n  },\r\n  /* en: {\r\n    Values: [\"Grows\", \"Reduces\"],\r\n  },\r\n  fr: {\r\n    Values: [\"Augmente\", \"Diminue\"],\r\n  }, */\r\n};\r\n\r\nexport const SMOKING = {\r\n  NON_SMOKER: {\r\n    value: { en: \"Non-Smoker\", fr: \"Non-fumeur\" },\r\n    Key: \"NON_SMOKER\",\r\n    order: 1,\r\n    ID: 0,\r\n  },\r\n  SMOKER: {\r\n    value: { en: \"Smoker\", fr: \"Fumeur\" },\r\n    Key: \"SMOKER\",\r\n    order: 2,\r\n    ID: 1,\r\n  },\r\n};\r\n\r\nexport const MONTHS = {\r\n  en: [\r\n    \"January\",\r\n    \"February\",\r\n    \"March\",\r\n    \"April\",\r\n    \"May\",\r\n    \"June\",\r\n    \"July\",\r\n    \"August\",\r\n    \"September\",\r\n    \"October\",\r\n    \"November\",\r\n    \"December\",\r\n  ],\r\n  fr: [\r\n    \"janvier\",\r\n    \"fvrier\",\r\n    \"mars\",\r\n    \"avril\",\r\n    \"mai\",\r\n    \"juin\",\r\n    \"juillet\",\r\n    \"aot\",\r\n    \"septembre\",\r\n    \"octobre\",\r\n    \"novembre\",\r\n    \"dcembre\",\r\n  ],\r\n};\r\n","import { name, version } from \"../../package.json\";\r\nimport { SEX, SMOKING } from \"../definitions/generalDefinitions\";\r\nimport { QUOTE_CLIENT, QUOTE_SPOUSE, QUOTE_JOINT } from \"../definitions/generalDefinitions\";\r\n\r\nexport function readMCCData(dataInput, planID, client, insNeed) {\r\n   let dataLives = setLives(\r\n    client,\r\n    dataInput\r\n  );\r\n  let dataMCC = {\r\n    insured: {\r\n      lives: dataLives,\r\n      lifeStatus: client===QUOTE_JOINT?1:0\r\n    },\r\n    policy: {\r\n      planName: \"EquiBuild\",\r\n      carrierName: \"Industrial Alliance\",\r\n      planID: planID,\r\n      carrierID:5,\r\n      faceAmount: insNeed,\r\n      intRate: 0.0375,\r\n      province: dataInput.Presentations[0].Province,\r\n      objPremium: {\r\n        DepositMode: 1, //annual\r\n        PremCustom: false,\r\n        PremSet: false,\r\n        PremSolve: true,\r\n        PremSetDur: 50,\r\n        PremSolveDur: 99,\r\n        PremOffsetOn: false,\r\n        PremOffsetYear: 0\r\n      },\r\n      objCustomDB: {\r\n        solveForPremium_On: false,\r\n        solveForPUA_On: false,\r\n        solveRider_On: false,\r\n        customDB: []\r\n      },\r\n      objRider: {\r\n      T10: false,\r\n      T20: false,\r\n      ICO10: false,\r\n      ICO20: false,\r\n      T25: false,\r\n      T30: false,\r\n      T25Amt: 0.0,\r\n      T30Amt: 0.0,\r\n      T10Dur: 10,\r\n      T20Dur: 20,\r\n      T10Amt: 0.0,\r\n      T20Amt: 0.0\r\n    }\r\n    },\r\n    objPUA: {\r\n      MaxPUA: false,\r\n      MaxPUAAmt: 90000000.0,\r\n      BonusPUA: true,\r\n      FundPUA: false,\r\n      FundPUAAmt: 0.0,\r\n      FundPUADur: 10.0\r\n    },\r\n    outputOptions: {\r\n      extCoverage: false,\r\n      IRR_ERR: false,\r\n      outputColumnIDs: [0, 1, 2, 105, 14, 25]\r\n    },\r\n    generalInfo: {\r\n      designedFor: \"\",\r\n      designedBy: \"\",\r\n      language: dataInput.lang === \"en\" ? 0 : 1,\r\n      formatNumericOutput: true\r\n    }\r\n  };\r\n  return dataMCC;\r\n}\r\n\r\nfunction setLives(clientID, dataInput) {\r\n  let dataE = [];\r\n  let i;\r\n  // for calc purposes\r\n  if (clientID === QUOTE_SPOUSE)\r\n    dataE.push({\r\n      age: dataInput.Clients[1].Age,\r\n      sex: dataInput.Clients[1].sexKey === SEX.FEMALE.Key ? 1 : 0,\r\n      smk:\r\n        dataInput.Clients[1].smokerKey === SMOKING.SMOKER.Key ? \"S_STD\" : \"NS_STD\", //Smoker === SMOKING[lang].Values[1]\r\n          //? \"S_STD\"\r\n          //: \"NS_STD\",\r\n      rating: 100 //dataInput.Clients[1].Rating\r\n    });\r\n  else if (clientID === QUOTE_CLIENT)\r\n    dataE.push({\r\n      age: dataInput.Clients[0].Age,\r\n      sex: dataInput.Clients[0].sexKey === SEX.FEMALE.Key ? 1 : 0,\r\n      smk:\r\n        dataInput.Clients[0].smokerKey === SMOKING.SMOKER.Key ? \"S_STD\" : \"NS_STD\", //Smoker === SMOKING[lang].Values[1]\r\n          //? \"S_STD\"\r\n          //: \"NS_STD\",\r\n      rating: 100 //dataInput.Clients[0].Rating\r\n    });\r\n  else {\r\n    for (i = 0; i < dataInput.Clients.length; i++) {\r\n      dataE.push({\r\n        age: dataInput.Clients[i].Age,\r\n        sex: dataInput.Clients[i].sexKey === SEX.FEMALE.Key ? 1 : 0,\r\n        smk:\r\n          dataInput.Clients[i].smokerKey === SMOKING.SMOKER.Key ? \"S_STD\" : \"NS_STD\", //Smoker === SMOKING[lang].Values[1]\r\n            //? \"S_STD\"\r\n            //: \"NS_STD\",\r\n        rating: 100\r\n      });\r\n    }\r\n  }\r\n  return dataE;\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Info } from \"./Info\";\r\n\r\nexport class Collapsible extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      open: this.props.openCollapsible.open,\r\n      id: this.props.openCollapsible.id,\r\n    };\r\n    // console.log(this.state)\r\n  }\r\n  componentWillReceiveProps(nextProps) {\r\n    if (this.state.open !== nextProps.openCollapsible.open)\r\n      this.setState({\r\n        open: nextProps.openCollapsible.open,\r\n        id: nextProps.openCollapsible.id,\r\n      });\r\n  }\r\n\r\n  togglePanel = async (e) => {\r\n    if(this.props.enabled!==false)\r\n      {\r\n    await this.props.handleCollapsibleClick({\r\n      id: this.state.id,\r\n      open: this.state.open,\r\n    });\r\n    this.setState({ open: !this.state.open });\r\n  }\r\n  };\r\n  render() {\r\n    const arr = this.state.open ? (\r\n      <span style={{ fontSize: \"14px\", float: \"right\" }}>&#9650;</span>\r\n    ) : (\r\n      <span style={{ fontSize: \"14px\", float: \"right\" }}>&#9660;</span>\r\n    );\r\n    return (\r\n      <div >\r\n        <div onClick={this.togglePanel} className=\"header\">\r\n          {this.props.title}\r\n          {this.props.infoIcon !== undefined && <Info infoIcon={this.props.infoIcon} /> }\r\n             {arr}\r\n        </div>\r\n        {this.state.open ? (\r\n          <div className=\"content\">{this.props.children}</div>\r\n        ) : null}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","export const OUTPUTTEXT = {\r\n  en: {\r\n    insNeeds100: \"Insurance Needs to age 100\",\r\n    insNeedsRet: \"Insurance Needs to retirement (age \",\r\n    insNeedsRetLE: \"Insurance Needs to life expectancy (age \",\r\n    insNeedsSingleFamily: \"Insurance Needs for a Single Parent with Protection Period of \",\r\n    insNeedsSinglePerson: \"Insurance Needs for a Single Person with Protection Period of \",\r\n    years: \" years\",\r\n    addSurvivor: \"Survivors need to be added under Family Profile. Single Person 'Insurance Needs' is coming soon!\",\r\n    pg1T: \"Insurance Needs Analysis - Estate\",\r\n    pg1P1: \"Designed for:\",\r\n    pg1P2: \"Designed by:\",\r\n    pg1P3: \"Date: \",\r\n    pg1P4: \"Province:\",\r\n    pg2TabT1: \"Family Profile\",\r\n    pg2TabT1_1: \"Profile\",\r\n    pg2TabT2: \"Age\",\r\n    pg2TabT3: \"Annual Income\",\r\n    pg2TabT4: \"Retirement Age\",\r\n    pg2TabT4Alt: \"Protection Period\",\r\n    pg2TabT5: \"Avg. Tax Rate\",\r\n    pg2TabT6: \"Marginal Tax Rate\",\r\n    pg2T2: \"Assumptions\",\r\n    /* pg3T: \"Family Cash Needs at Death\", */\r\n    pg2Tab2: \"Needs Analysis is always done for the family member 'Client'\",\r\n    pg2Tab2_1: \"Needs Analysis is always done for 'Client'\",\r\n    pg2Tab3: \"Using these factors the total capital required to generate an inflation indexed income thus depleting all capital at the end of the desired insurance time period is calculated. This amount is based on the present value of shortfalls, discounted at the after tax investment rate. It is adjusted, if necessary to make sure early shortfalls are provided for\",\r\n    pg2T3: \"Financial Summary\",\r\n    pg2P5:\"Total Assets (excluding insurance)\",\r\n    pg2P6: \"Total Liabilities (excluding death related)\",//OUTPUTTEXT[lang].pg7TabRow4,\r\n    pg2P7: \"Net Worth\",//OUTPUTTEXT[lang].pg7TabRow4,\r\n    pg2P8: \"Total insurance available at death, yyy of which is taxable\",//OUTPUTTEXT[lang].pg7TabRow4, //  + output.govDB already part of totalassets\r\n    pg2P9: \"Total death related liabilities\",\r\n    pg2P10: \"Additional Life Insurance for Client\",\r\n    pg2P12: \"This is a good opportunity to consider life insurance for Spouse as well (survivor now changes)\",\r\n    pg2P11: \"Life Insurance for Spouse NAME in addition to:\",\r\n    \r\n    pg3T: \"Family Cash and Income Needs\",\r\n    pg3T_1: \"Estate Cash and Income Needs\",\r\n    pg3P1:\r\n      \"When you die, your family will face two important money needs, a need for Cash and a need for Income. While some cash needs are temporary, others are required at all stages of life.\",\r\n    pg3P1_1:\r\n      \"When you die, your Estate will face two important money needs, a need for Cash and a need for Income. While some cash needs are temporary, others are required at all stages of life.\",\r\n    pg3TabT: \"Cash Needs\",\r\n    pg3TabRTot: \"Total\",\r\n    /* pg4T: \"Family Income Needs\", */\r\n    pg4T: \"\",\r\n    /* pg4P1: \"When you die, your family will face two important money needs, a need for Cash and a need for Income.\", */\r\n    pg4P1: \"Continued ...\",\r\n    pg4TabT: \"Income Needs\",\r\n    pg4TabRow1: \"Current Total Annual Family Income\",\r\n    pg4TabRow1_1: \"Current Total Annual Income\",\r\n    pg4TabRow2:\r\n      \"Percentage of this income you want your family to have to maintain your present standard of living for these time periods is:\",\r\n    pg4TabRow2_1:\r\n      \"Percentage of this income you want your Estate to have for these time periods is:\",\r\n    //pg4TabRow3: \"While more income is required\",\r\n    //pg4TabRow4: \"For survivor thereafter\",\r\n    pg4TabRow5: \"Therefore your desired after-tax income is:\",\r\n    pgTabRowMoreIncome: \"While more income is required\",\r\n    pgTabRowThereAfter: \"For the survivor thereafter\",\r\n    pgTabRowThereAfter_1: \"For the Estate thereafter\",\r\n    //pgTabRowThereAfter: \"For the survivor thereafter\",\r\n    pg5T: \"Family Cash Sources\",// at Death\",\r\n    pg5T_1: \"Estate Cash Sources\",// at Death\",\r\n    pg5TabT: \"Cash Sources\",\r\n    pg5TabT2: \"All\", \r\n    pg5TabT3: \"At Death\",\r\n    pg5TabRow1: \"CPP/QPP Lump Sum Death Benefit\",\r\n    pg5TabRow3: \"Total Cash Available\",\r\n    pg5TabRow4: \"Less Family Cash needs at Death\",\r\n    pg5TabRow4_1: \"Less Estate Cash needs at Death\",\r\n    pg5TabRow5:\r\n      \"Surplus Cash available to produce income for surviving members of the family\",\r\n    pg5TabRow5_1:\r\n      \"Surplus Cash available to produce income for the Estate\",\r\n    pg6T: \"Family Income Sources\",// at Death\",\r\n    pg6T_1: \"Estate Income Sources\",// at Death\",\r\n    pg6TabT: \"Income Sources\",\r\n    pg6TabRow1:\r\n      \"Therefore the total annual income available for this time period is:\",\r\n    //pg6TabRow2: \"While more income is required\",\r\n    //pg6TabRow3: \"For survivor thereafter\",\r\n    pg5TabRow7: \"For surviving members of the family\",\r\n    pg5TabRow7_1: \"For the Estate\",\r\n    pg6TabRow4:\r\n      \"The additional after tax income required (desired income less income available) for this time period is:\",\r\n    //pg6TabRow5: \"While more income is required\",\r\n    //pg6TabRow6: \"For survivor thereafter\",\r\n    pg6Net: \"net \",\r\n    pg7T: \"Life Insurance Analysis\",\r\n    pg7TabT: \"Your Family Income Position at Death\",\r\n    pg7TabT_1: \"Your Estate Income Position at your Death\",\r\n    pg7TabRow1:\r\n      \"The additional  after tax income required (desired income less income available) for this time period is:\",\r\n    //pg7TabRow2: \"While more income is required\",\r\n    //pg7TabRow3: \"For survivor thereafter\",\r\n    pg7TabRow4: \"Rate of inflation you think will continue\",\r\n    pg7TabRow5:\r\n      \"Rate of interest the survivor could earn on investments in future years\",\r\n    pg7TabRow5_1:\r\n      \"Rate of interest the Estate could earn on investments in future years\",\r\n    pg7TabRow6:\r\n      \"Using these factors the total capital required to generate an inflation indexed income thus depleting all capital at the end of this time period is:\",\r\n    pg7TabRow7: \"A.For survivor's normal life expectancy (age \",\r\n    pg7TabRow8: \"B.Until survivor retirement\",\r\n    pg7TabRow9: \"C.Until youngest child is age 25\",\r\n    pg7TabRow10: \"D.Until youngest child is age 18\",\r\n    pg8T: \"Life Insurance Analysis\",\r\n    pg8TabT: \"Your Family Financial Position at Death\",\r\n    pg8TabT_1: \"Your Estate's Financial Position at Death\",\r\n    pg8TabRow1:\r\n      \"Present surplus capital available for investment after covering cash needs is:\",\r\n    pg8TabRow2:\r\n      \"Therefore the additional  income-producing capital (i.e. Life Insurance) needed to solve the income requirement for these time periods is:\",\r\n    pg8TabRow3: \"A.For survivor's normal life expectancy (age \",\r\n    pg8TabRow4: \"B.Until survivor retirement\",\r\n    pg8TabRow5: \"C.Until youngest child is age 25\",\r\n    pg8TabRow6: \"D.Until youngest child is age 18\",\r\n    pg8TabRow4Alt: \"A.Until end of Protection Period\",\r\n    pg9T: \"Some Important Notes\",\r\n    pg9P1:\r\n      \"This presentation is for general information purposes. The information contained in this presentation must not be taken or relied upon by the reader as legal, accounting, taxation or actuarial advice. For these matters readers should seek independent professional advice. Please refer to insurance company illustrations, policy contracts and information folders regarding any insurance matters referred to in this presentation, as those documents will govern in all cases.\",\r\n    //pgFooter: \"See Some Important Notes at the end of this presentation.\",\r\n    pgFooter: \"See Some Important Notes at the end of this presentation.\",\r\n    pg10T: \"Acknowledgments\",\r\n    pg10P1:\r\n      \"I, ____________________________ acknowledge receipt of this Presentation and any quotes related to the information therein, and confirm my understanding of it as a summary and general overview of the illustrated benefits and values. I understand that the aforementioned illustrated benefits and values are neither estimates nor guarantees of future performance; and that actual results may vary based on timing, market performance, health and insurability. These values are subject to change and may differ from those illustrated.\",\r\n    pg10TabRow1: \"Signature of Client(s): ____________________\",\r\n    pg10TabRow11: \"Date: ___________\",\r\n    pg10TabRow2: \"Signature of Client(s): ____________________\",\r\n    pg10TabRow3: \"Signature of Advisor: ____________________\",\r\n    pgAppendix: \"Appendix\",\r\n    pgAppendixT:\r\n      \"INA Graphs and Spreadsheet\",\r\n      pgAppendixP1: \"Incoming cash flows (+) vs outgoing income needs (-)\",\r\n      pgAppendixP2: \"Shortfall = incoming - outgoing cash flows and is funded by insurance\",\r\n      pgAppendixP3 : \"Current financial situation\"\r\n  },\r\n  fr: {\r\n    insNeeds100: \"Besoins en assurance jusqu' l'ge de 100 ans\",\r\n    insNeedsRet: \"Besoins en assurance jusqu' la retraite(ge \",\r\n    insNeedsRetLE: \"Besoins en assurance jusqu' l'esprance de vie (ge \",\r\n    insNeedsSingleFamily: \"Besoins d'assurance pour un parent isol avec une priode de protection de \",\r\n    insNeedsSinglePerson: \"Besoins d'assurance pour un seul individu avec une priode de protection de \",\r\n    years: \" annes\",\r\n    addSurvivor: \"Les survivants doivent tre ajouts dans le profil familial. Besoins d'assurance pour un seul individu arrive bientt!\",\r\n    pg1T: \"Analyse des besoins en matire d'assurance - successorale\",\r\n    pg1P1: \"Conu pour :\",\r\n    pg1P2: \"Par:\",\r\n    pg1P3: \"Date: \",\r\n    pg1P4: \"Province:\",\r\n    pg2TabT1: \"Profil familial\",\r\n    pg2TabT1_1: \"Profil\",\r\n    pg2TabT2: \"ge\",\r\n    pg2TabT3: \"Revenu annuel\",\r\n    pg2TabT4: \"ge de la retraite\",\r\n    pg2TabT4Alt: \"Priode de protection\",\r\n    pg2T2: \"Hypothses\",\r\n    pg2Tab2: \"L'analyse des besoins est toujours faite pour le membre de la famille 'Client'\",\r\n    pg2Tab2_1: \"L'analyse des besoins est toujours faite pour le 'Client'\",\r\n    pg2Tab3: \"Ces facteurs permettent de calculer le capital total ncessaire pour gnrer un revenu index  l'inflation, le capital tant donc compltement puis  la fin de la priode d'assurance souhaite. Ce montant est bas sur la valeur actuelle des manques  gagner, actualise au taux de rendement aprs impt. Il est rajust au besoin, afin que l'on puisse s'assurer que les manques  gagner initiaux sont prvus pour.\",\r\n    \r\n    pg2TabT5: \"Taux d'imposition moyen\",\r\n    pg2TabT6: \"Taux marginal d'imposition\",\r\n   /*  pg3T: \"Besoin de liquidits pour la famille au dcs\", */\r\n    pg2T3: \"Rsum financier \",\r\n    pg2P5:\"Total des actifs (hors assurance)\",\r\n    pg2P6: \"Total des passifs (non lis au dcs)\",//OUTPUTTEXT[lang].pg7TabRow4,\r\n    pg2P7: \"Valeur nette\",//OUTPUTTEXT[lang].pg7TabRow4,\r\n    pg2P8: \"Assurance totale disponible au dcs, dont yyy imposables\",//OUTPUTTEXT[lang].pg7TabRow4, //  + output.govDB already part of totalassets\r\n    pg2P9: \"Total des passifs lis au dcs\",\r\n    pg2P10: \"Client d'assurance vie supplmentaire\",\r\n    pg2P12: \"C'est aussi une bonne occasion d'envisager une assurance-vie pour le conjoint galement (le survivant change maintenant)\",\r\n    pg2P11: \"Assurance vie pour NOM du conjoint en plus de : \",\r\n    \r\n    pg3T: \"Besoins familiaux en matire de liquidits et de revenus\",\r\n    pg3T_1: \"Besoins la succession en matire de liquidits et de revenus\",\r\n   \r\n    pg3P1:\r\n      /* \" votre dcs, votre famille fera face  deux importants besoins financiers, soient d'obtenir des liquidits ainsi que des revenus. Bien que certains besoins de liquidits soient temporaires, d'autres sont ncessaires lors de toutes les tapes de la vie, ils sont donc identifis comme 'Besoins de liquidits permanents'..\", */\r\n      \" votre dcs, votre famille fera face  deux importants besoins financiers, soient d'obtenir des liquidits ainsi que des revenus. Bien que certains besoins de liquidits soient temporaires, d'autres sont ncessaires lors de toutes les tapes de la vie.\",\r\n    pg3P1_1:\r\n      /* \" votre dcs, votre famille fera face  deux importants besoins financiers, soient d'obtenir des liquidits ainsi que des revenus. Bien que certains besoins de liquidits soient temporaires, d'autres sont ncessaires lors de toutes les tapes de la vie, ils sont donc identifis comme 'Besoins de liquidits permanents'..\", */\r\n      \" votre dcs, votre succession fera face  deux importants besoins financiers, soient d'obtenir des liquidits ainsi que des revenus. Bien que certains besoins de liquidits soient temporaires, d'autres sont ncessaires lors de toutes les tapes de la vie.\",\r\n    pg3TabT: \"Besoins de liquidits\",\r\n    pg3TabRTot: \"Total\",\r\n    /* pg4T: \"Besoin de revenus pour la famille au dcs\", */\r\n    pg4T: \"\",\r\n    /* pg4P1:\r\n      \" votre dcs, votre famille fera face  deux importants besoins financiers, soient d'obtenir des liquidits ainsi que des revenus.\",\r\n    */\r\n   pg4P1: \"Suite ... \", \r\n    pg4TabT: \"Besoins de revenus\",\r\n    pg4TabRow1: \"Montant actuel du revenu familial annuel\",\r\n    pg4TabRow1_1: \"Montant actuel du revenu annuel\",\r\n    pg4TabRow2:\r\n      \"Pourcentage du revenu souhait pour maintenir le niveau de vie actuel de votre famille pendant la priode:\",\r\n    pg4TabRow2_1:\r\n      \"Pourcentage du revenu souhait pour les besoins votre succession pendant la priode:\",\r\n    //pg4TabRow3: \"While more income is required\",\r\n    //pg4TabRow3: \"Un revenu plus lev est requis\",\r\n   \r\n    //pg4TabRow4: \"Pour le survivant par la suite\",\r\n    pg4TabRow5: \"Le revenu souhait s'lve donc :\",\r\n    pgTabRowMoreIncome: \"Un revenu plus lev est requis\",\r\n    pgTabRowThereAfter: \"Pour le survivant par la suite\",\r\n    pgTabRowThereAfter_1: \"Pour la succession par la suite\",\r\n    pg5T: \"Sources de liquidit pour la famille\",// au dcs\",\r\n    pg5T_1: \"Sources de liquidit pour la succession\",// au dcs\",\r\n    pg5TabT: \"Sources de liquidit\",\r\n    pg5TabT2: \"Tous\",\r\n    pg5TabT3: \"Au dcs\",\r\n  \r\n    pg5TabRow1:\r\n      \"Prestation de dcs forfaitaire du RPC/RRQ\",\r\n    pg5TabRow3: \"Total des liquidits disponibles\",\r\n    pg5TabRow4: \"Moinsles liquidits ncessaires au dcs de l'assur\",\r\n    pg5TabRow4_1: \"Moinsles liquidits ncessaires au dcs de l'assur\",\r\n    pg5TabRow5:\r\n      \"Excdent sur les liquidits disponibles pouvant assurer un revenu  la famille\",\r\n    pg5TabRow5_1:\r\n      \"Excdent sur les liquidits disponibles pouvant assurer un revenu  la succession\",\r\n    pg6T: \"Sources de revenu pour la famille\",// au dcs\",\r\n    pg6T_1: \"Sources de revenu pour la succession\",// au dcs\",\r\n    pg6TabT: \"Sources de revenu\",\r\n    pg6TabRow1:\r\n      \"Le revenu annuel total disponible pour cette priode s'lve donc :\",\r\n    //pg6TabRow2: \"Un revenu plus lev est requis\",\r\n    //pg6TabRow3: \"Pour le survivant par la suite\",\r\n    pg5TabRow7:\r\n    \"Pour les membres survivants de la famille\",\r\n    pg5TabRow7_1:\r\n    \"Pour la succession\",\r\n    \r\n    pg6TabRow4:\r\n    \"Le revenu supplmentaire aprs impt requis (revenu souhait moins revenu disponible) pour cette priode est :\",      \r\n    //pg6TabRow5: \"Un revenu plus lev est requis\",\r\n    //pg6TabRow6: \"Pour le survivant par la suite\",\r\n    pg6Net: \"net\",\r\n    \r\n    pg7T: \"Besoins d'assurance\",\r\n    pg7TabT: \"tat des revenus de la famille au dcs\",\r\n    pg7TabT_1: \"tat des revenus de la succession au dcs\",\r\n    pg7TabRow1:\r\n    \"Le revenu supplmentaire aprs impt requis (revenu souhait moins revenu disponible) pour cette priode est :\",\r\n    //pg7TabRow2: \"Un revenu plus lev est requis\",\r\n    //pg7TabRow3: \"Pour le survivant par la suite\",\r\n    pg7TabRow4: \"Taux d'inflation prvu\",\r\n    pg7TabRow5: \"Taux d'intrt potentiel des placements futurs du survivant\",\r\n    pg7TabRow5_1: \"Taux d'intrt potentiel des placements futurs de la succession\",\r\n    pg7TabRow6:\r\n      \"Bas sur ces facteurs financiers, le capital total requis pour gnrer des revenus indexs  l'inflation et qui sera puis  la fin de la priode est:\",\r\n    pg7TabRow7: \"A.Pour la dure de vie prsume du survivant (ge \",\r\n    pg7TabRow8: \"B. Jusqu' la retraite du survivant\",\r\n    pg7TabRow9: \"C.Jusqu'au 25e anniv. du benjamin\",\r\n    pg7TabRow10: \"D.Jusqu'au 18e anniv. du benjamin\",\r\n    pg8T: \"Besoins d'assurance\",\r\n    pg8TabT: \"tat des revenus de la famille au dcs\",\r\n    pg8TabT_1: \"tat des revenus de la succession au dcs\",\r\n    pg8TabRow1:\r\n      \"Capitaux excdentaires actuellement disponibles pour investissement aprs couverture des besoins financiers:\",\r\n    pg8TabRow2:\r\n      \"Manque  gagner en capitaux productifs de revenu(ex. assurance) pour les priodes ci-dessous:\",\r\n    pg8TabRow3: \"A.Pour la dure de vie prsume du survivant (ge \",\r\n    pg8TabRow4: \"B. Jusqu' la retraite du survivant\",\r\n    pg8TabRow5: \"C.Jusqu'au 25e anniv. du benjamin\",\r\n    pg8TabRow6: \"D.Jusqu'au 18e anniv. du benjamin\",\r\n    pg8TabRow4Alt: \"A. Jusqu' la fin de la priode de protection\",\r\n    pg9T: \"Notes importantes\",\r\n    pg9P1:\r\n      \"Le prsent expos ne comporte que des renseignements gnraux. L'information qui s'y trouve ne doit pas tre considre par le lecteur comme des conseils juridiques, comptables, fiscaux ou actuariels. Pour ces questions, le lecteur devrait consulter un professionnel indpendant. Veuillez-vous reporter aux illustrations d'assurance, aux libells des contrats et aux documents d'information des socits d'assurance pour obtenir des prcisions sur les questions d'assurance mentionnes dans le prsent expos, puisque dans tous les cas, ce sont ces documents qui prvalent.\",\r\n    pgFooter: \"Voir les Notes importantes  la fin du prsent expos.\",\r\n      pg10T: \"Accus de rception\",\r\n    pg10P1:\r\n      \"Je soussign, _______________________ accuse rception du prsent document et des soumissions connexes, et considre toute l'information sur les prestations et les valeurs comme un rsum seulement. Je comprends que les prestations et les valeurs susmentionnes ne sont ni estimatives ni garantes du rendement futur. Je comprends aussi que les rsultats rels peuvent fluctuer en fonction du temps et du rendement du march, ainsi que de l'tat de sant et de l'assurabilit de la personne. Ces rsultats peuvent faire l'objet de modifications et diffrer des valeurs prsentes dans l'expos.\",\r\n    pg10TabRow1: \"Signature du client: ____________________\",\r\n    pg10TabRow11: \"jour, mois, anne: ___________\",\r\n    pg10TabRow2: \"Signature du client: ____________________\",\r\n    pg10TabRow3: \"Signature du conseiller en assurance: ____________________\",\r\n    pgAppendix:  \"Annexe\",\r\n    pgAppendixT:\r\n      \"Graphiques et feuilles de calcul de l'analyse des besoins en matire d'assurance\",\r\n      pgAppendixP1: \"Flux de trsorerie entrants (+) et sortants (-)\",\r\n      pgAppendixP2: \"Le manque  gagner = flux de trsorerie entrants - sortants et est financ par l'assurance\",\r\n      pgAppendixP3 : \"Situation financire actuelle\"\r\n\r\n  }\r\n};\r\n\r\nexport const GRAPHS_LABLES = {\r\n  en: {\r\n    insNeed: \"Insurance Needs\",\r\n    graphMsg: \"To provide for the income shortfall until retirement\",\r\n    persCF: \"Personal cash Flow\",\r\n    govCF: \"Government cash Flow\",\r\n    incomeNeeds: \"Income Needs\",\r\n    shortfall: \"Shortfall (-) / Surplus (+)\",\r\n    assetsBrk: \"Assets Breakdown Today\",\r\n    liabsBrk: \"Liabilities Breakdown\" ,\r\n    cashLike:        \"Cash/TFSA/Insurance\", \r\n    RRSP: \"RRSP/RRIF\", \r\n    shares: \"Public/Private shares\", \r\n    realEstate: \"Real Estate\", \r\n    otherAssets:\"Other\",\r\n    loans: \"Loans\", \r\n    taxes:\"Taxes\", \r\n    emergency:\"Emergency Fund\", \r\n    otherLiabs:\"Other\",\r\n    atDeath: \"At Death and Future Amts.\",\r\n    insNeeds100: \"Insurance Needs to age 100\",\r\n    insNeedsRet: \"Insurance Needs to retirement (age \",\r\n    insNeedsRetLE: \"Insurance Needs to life expectancy (age \",\r\n    \r\n    currFins: \"Your current financial situation is summarized below: \"\r\n  },\r\n  fr: {\r\n    insNeed: \"Besoins d'assurance\",\r\n    graphMsg:\r\n      \"Pour couvrir le manque  gagner en matire de revenus jusqu' la retraite\",\r\n      persCF: \"Liquidits personnelles\",\r\n      govCF: \"Liquidits verses par l'tat\",\r\n      incomeNeeds: \"Revenus requis\",\r\n      shortfall: \"Manque  gagner (-) / Surplus (+)\",\r\n      \r\n    assetsBrk: \"Ventilation des actifs (aujourd'hui)\",\r\n    liabsBrk: \"Ventilation des passifs\",\r\n    cashLike:        \"Liquidits/CELI/Assurance\",\r\n    RRSP: \"REER/FERR\",\r\n    shares: \"Titres publics/privs\",\r\n    realEstate: \"Immobilier\",\r\n    otherAssets:\"Autre\",\r\n    loans: \"Prts\",\r\n    taxes:\"Charges fiscales\",\r\n    emergency:\"Fonds d'urgence\",\r\n    otherLiabs:\"Autre\",\r\n    atDeath: \"Au dcs et engagements futurs\",\r\n    insNeeds100: \"Besoins en assurance jusqu' l'ge de 100 ans\",\r\n    insNeedsRet: \"Besoins en assurance jusqu' la retraite(ge \",\r\n    insNeedsRetLE: \"Besoins en assurance jusqu' l'esprance de vie (ge \",\r\n    \r\n    currFins: \"YLe sommaire de votre situation financire actuelle se trouve ci-dessous: \"\r\n  }\r\n}\r\n","import {\r\n  ASSETS,\r\n  ASSET_TAX,\r\n  ASSET_OWNERSHIP_ACTION,\r\n  COLUMN_TITLES,\r\n} from \"../definitions/generalDefinitions\";\r\nimport { getListItemNameFromKey, arrayFormatMoney } from \"../utils/helper\";\r\n\r\nimport { fetchAssetAllGridColumns } from \"../utils/FetchAPIs\";\r\n\r\nimport {\r\n  ASSET_API_OUTPUT_Year,\r\n  ASSET_API_OUTPUT_Age,\r\n  ASSET_API_OUTPUT_FMV,\r\n  ASSET_API_OUTPUT_EOYBalance,\r\n  ASSET_API_OUTPUT_ACB,\r\n  ASSET_API_OUTPUT_CapitalGain,\r\n  ASSET_API_OUTPUT_TaxPayable,\r\n  ASSET_API_OUTPUT_CapGainsExemption,\r\n  ASSET_API_OUTPUT_Deposits,\r\n  ASSET_API_OUTPUT_Withdrawals,\r\n  ASSET_API_OUTPUT_RRIF,\r\n  ASSET_API_OUTPUT_TaxPayableonIncome,\r\n  ASSET_API_OUTPUT_DispositionAmount,\r\n  ASSET_YEAR_TODAY,\r\n  APPLET_INA,\r\n  APPLET_EP,\r\n} from \"../definitions/generalDefinitions\";\r\nimport { appletMode } from \"../../package.json\";\r\n\r\nexport async function getAssetGridValues(dataNA, assetCurr, lang, aggregate) {\r\n  const title = COLUMN_TITLES[lang];\r\n\r\n  let data = await fetchAssetAllGridColumns(dataNA, assetCurr.id);\r\n  if (data !== undefined && data !== undefined) {\r\n    console.log(\"POST: NA_AssetProj success\");\r\n\r\n    let taxOnDisposition = [];\r\n    let yr;\r\n    for (\r\n      yr = 0;\r\n      yr < data[ASSET_API_OUTPUT_TaxPayable].numericValues.length;\r\n      ++yr\r\n    ) {\r\n      taxOnDisposition[yr] =\r\n        data[ASSET_API_OUTPUT_DispositionAmount].numericValues[yr] > 0\r\n          ? data[ASSET_API_OUTPUT_TaxPayable].numericValues[yr]\r\n          : 0;\r\n    }\r\n    taxOnDisposition = arrayFormatMoney(taxOnDisposition, lang, 0);\r\n\r\n    let arrYear = data[ASSET_API_OUTPUT_Year].numericValues;\r\n    \r\n    // year 0 is today, change it\r\n    arrYear[0] = ASSET_YEAR_TODAY[lang].today;\r\n    const arrAge = data[ASSET_API_OUTPUT_Age].numericValues;\r\n    let arrAdjAge = [];// to be used for all and JLTD\r\n    if(appletMode === \"EP\" && dataNA.lives.length>1) // JLTD\r\n    {\r\n      const age1=dataNA.lives[0].Age // missing age is clients if 2 lives surviver is picked up in API\r\n      const age2=dataNA.lives[1].Age // missing age is clients if 2 lives surviver is picked up in API\r\n      \r\n      for (\r\n          let i = 0;\r\n          i < arrYear.length;\r\n          ++i\r\n        ) {\r\n          arrAdjAge.push(parseInt(age1+i) + \"/\" + parseInt(age2+i));\r\n      }\r\n    }\r\n    else\r\n      arrAdjAge =arrAge\r\n    \r\n    const arrDeposits = arrayFormatMoney(\r\n      data[ASSET_API_OUTPUT_Deposits].numericValues,\r\n      lang,\r\n      0\r\n    );\r\n    const arrFMV = arrayFormatMoney(\r\n      data[ASSET_API_OUTPUT_FMV].numericValues,\r\n      lang,\r\n      0\r\n    );\r\n    \r\n    const arrRRIF = arrayFormatMoney(\r\n      data[ASSET_API_OUTPUT_RRIF].numericValues,\r\n      lang,\r\n      0\r\n    );\r\n    const arrEOYBalance = arrayFormatMoney(\r\n      data[ASSET_API_OUTPUT_EOYBalance].numericValues,\r\n      lang,\r\n      0\r\n    );\r\n    const arrWithdrawals = arrayFormatMoney(\r\n      data[ASSET_API_OUTPUT_Withdrawals].numericValues,\r\n      lang,\r\n      0\r\n    );\r\n    const arrTaxPayableonIncome = arrayFormatMoney(\r\n      data[ASSET_API_OUTPUT_TaxPayableonIncome].numericValues,\r\n      lang,\r\n      0\r\n    );\r\n    const arrTaxPayable = arrayFormatMoney(\r\n      data[ASSET_API_OUTPUT_TaxPayable].numericValues,\r\n      lang,\r\n      0\r\n    );\r\n    const arrDispositionAmount = arrayFormatMoney(\r\n      data[ASSET_API_OUTPUT_DispositionAmount].numericValues,\r\n      lang,\r\n      0\r\n    );\r\n    const arrACB = arrayFormatMoney(\r\n      data[ASSET_API_OUTPUT_ACB].numericValues,\r\n      lang,\r\n      0\r\n    );\r\n\r\n\r\n\r\n    const arrCapitalGain = arrayFormatMoney(\r\n      data[ASSET_API_OUTPUT_CapitalGain].numericValues,\r\n      lang,\r\n      0\r\n    );\r\n    const arrCapGainsExemption = arrayFormatMoney(\r\n      data[ASSET_API_OUTPUT_CapGainsExemption].numericValues,\r\n      lang,\r\n      0\r\n    );\r\n    const gridTitleSection =\r\n      appletMode === \"INA\"\r\n        ? \" (\" +\r\n          getListItemNameFromKey(\r\n            ASSET_OWNERSHIP_ACTION,\r\n            assetCurr.ownerKey,\r\n            lang\r\n          ) +\r\n          \")\"\r\n        : \"\" +\r\n          (assetCurr.description !== \"\"\r\n            ? \" (\" + assetCurr.description + \")\"\r\n            : \"\");\r\n    const gridTitle =\r\n      getListItemNameFromKey(ASSETS, assetCurr.assetTypeKey, lang) +\r\n      gridTitleSection +\r\n      \" Projection\";\r\n\r\n    let dataColTitles = [];\r\n    let dataProjection = [];\r\n\r\n   // console.log(arrCapitalGain)\r\n    // aggregate table\r\n    if (aggregate === true) {\r\n      for (\r\n        let i = 0;\r\n        i < COLUMN_TITLES.EP_SHEET_HEADERS[lang].Full.length;\r\n        ++i\r\n      ) {\r\n        dataColTitles.push(COLUMN_TITLES.EP_SHEET_HEADERS[lang].Full[i]);\r\n      }\r\n\r\n      dataProjection[0] = arrYear;\r\n      dataProjection[1] = arrAdjAge;\r\n      dataProjection[2] = arrFMV;\r\n      dataProjection[3] = arrFMV;\r\n      dataProjection[4] = arrDeposits;\r\n      dataProjection[5] = arrRRIF; //+ arrWithdrawals;\r\n      dataProjection[6] = arrDispositionAmount;\r\n      dataProjection[7] = arrTaxPayableonIncome;\r\n      dataProjection[8] = arrCapitalGain;\r\n      dataProjection[9] = arrCapGainsExemption;\r\n      dataProjection[10] = arrEOYBalance;\r\n      dataProjection[11] = arrFMV;\r\n      dataProjection[12] = arrTaxPayable;\r\n    }\r\n\r\n    // individual tables\r\n    else {\r\n      if (assetCurr.assetTaxTypeKey === ASSET_TAX.REGISTERED.Key) {\r\n        //\t\t'Registered')\r\n        if (APPLET_INA) {\r\n          dataColTitles = [\r\n            title.Year,\r\n            title.Age,\r\n            title.FMV,\r\n            title.AnnualContribution,\r\n            title.MinRRIFIncome,\r\n            title.Withdrawal,\r\n            //title.Taxonincome,\r\n            title.EOYBalance,\r\n          ];\r\n\r\n          // F^\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] = arrFMV;\r\n          dataProjection[3] = arrDeposits;\r\n          dataProjection[4] = arrRRIF;\r\n          dataProjection[5] = arrWithdrawals;\r\n          //dataProjection[6] = arrTaxPayableonIncome;\r\n          dataProjection[6] = arrEOYBalance;\r\n        } else {\r\n          dataColTitles = [\r\n            title.Year,\r\n            title.Age,\r\n            title.FMV,\r\n            title.AnnualContribution,\r\n            title.MinRRIFIncome,\r\n            title.Withdrawal,\r\n            //title.Taxonincome,\r\n            title.EOYBalance,\r\n            //title.TaxLiabilityatDeath,\r\n            title.TaxLiability,\r\n          ];\r\n\r\n          // F^\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] = arrFMV;\r\n          dataProjection[3] = arrDeposits;\r\n          dataProjection[4] = arrRRIF;\r\n          dataProjection[5] = arrWithdrawals;\r\n          //dataProjection[6] = arrTaxPayableonIncome;\r\n          dataProjection[6] = arrEOYBalance;\r\n          dataProjection[7] = arrTaxPayable;\r\n        }\r\n      } else if (assetCurr.assetTypeKey === ASSETS.PERSONAL_RESIDENCE.Key) {\r\n        if (APPLET_INA) {\r\n          dataColTitles = [\r\n            title.Year,\r\n            title.Age,\r\n            title.FMV,\r\n            title.SaleProceeds,\r\n          ];\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] =\r\n            //arrEOYBalance;\r\n            arrFMV;\r\n          dataProjection[3] = arrDispositionAmount;\r\n        } else {\r\n          dataColTitles = [\r\n            title.Year,\r\n            title.Age,\r\n            title.FMV,\r\n            title.SaleProceeds,\r\n            title.TaxLiability,\r\n          ];\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] =\r\n            //arrEOYBalance;\r\n            arrFMV;\r\n          dataProjection[3] = arrDispositionAmount;\r\n          dataProjection[4] = arrTaxPayable;\r\n        }\r\n\r\n      } else if (assetCurr.assetTypeKey === ASSETS.LIFE_INSURANCE.Key) {\r\n        if (APPLET_INA) {\r\n          dataColTitles = [title.Year, title.Age, title.FA];\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] =\r\n            //arrEOYBalance;\r\n            arrFMV;\r\n        } else {\r\n          dataColTitles = [title.Year, title.Age, title.FA];\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] =\r\n            //arrEOYBalance;\r\n            arrFMV;\r\n        }\r\n\r\n      } else if (assetCurr.assetTypeKey === ASSETS.REAL_ESTATE.Key) {\r\n        if (APPLET_INA) {\r\n          dataColTitles = [\r\n            title.Year,\r\n            title.Age,\r\n            title.FMV,\r\n            title.ACB,\r\n            title.RentalIncome,\r\n            title.SaleProceeds,\r\n          ];\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] =\r\n            //arrEOYBalance;\r\n            arrFMV;\r\n          dataProjection[3] = arrACB;\r\n          dataProjection[4] = arrWithdrawals;\r\n          dataProjection[5] = arrDispositionAmount;\r\n          dataProjection[6] = taxOnDisposition;\r\n        } else {\r\n          dataColTitles = [\r\n            title.Year,\r\n            title.Age,\r\n            title.FMV,\r\n            title.ACB,\r\n          //  title.RentalIncome,\r\n          //  title.Taxonincome,\r\n            title.SaleProceeds,\r\n            title.CapitalGain,\r\n            title.TaxLiability,\r\n          ];\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] =\r\n            //arrEOYBalance;\r\n            arrFMV;\r\n          dataProjection[3] = arrACB;\r\n       //   dataProjection[4] = arrWithdrawals;\r\n       //   dataProjection[5] = arrTaxPayableonIncome;\r\n          dataProjection[4] = arrDispositionAmount;\r\n          dataProjection[5] = arrCapitalGain;\r\n          dataProjection[6] = arrTaxPayable;\r\n        }\r\n      } else if (assetCurr.assetTypeKey === ASSETS.SMALL_BUSINESS_SHARES.Key) {\r\n        if (APPLET_INA) {\r\n          dataColTitles = [\r\n            title.Year,\r\n            title.Age,\r\n            title.FMV,\r\n            title.ACB,\r\n            title.SaleProceeds,\r\n            title.TaxLiability,\r\n          ];\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] =\r\n            //arrEOYBalance;\r\n\r\n            arrFMV;\r\n          dataProjection[3] = arrACB;\r\n          dataProjection[4] = arrDispositionAmount;\r\n          dataProjection[5] = taxOnDisposition;\r\n        } else {\r\n          dataColTitles = [\r\n            title.Year,\r\n            title.Age,\r\n            title.FMV,\r\n            title.ACB,\r\n            title.SaleProceeds,\r\n            title.CapitalGainsExemption,\r\n            title.CapitalGain,\r\n            title.TaxLiability,\r\n          ];\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] =\r\n            //arrEOYBalance;\r\n\r\n            arrFMV;\r\n          dataProjection[3] = arrACB;\r\n          dataProjection[4] = arrDispositionAmount;\r\n          dataProjection[5] = arrCapGainsExemption;\r\n          dataProjection[6] = arrCapitalGain;\r\n          dataProjection[7] = arrTaxPayable;\r\n        }\r\n      } else if (\r\n        assetCurr.assetTypeKey === ASSETS.INTEREST_BEARING.Key ||\r\n        assetCurr.assetTypeKey === ASSETS.STOCKS_BONDS.Key ||\r\n        assetCurr.assetTypeKey === ASSETS.TFSA.Key\r\n      ) {\r\n        if (APPLET_INA) {\r\n          dataColTitles = [\r\n            title.Year,\r\n            title.Age,\r\n            title.FMV,\r\n            title.AnnualContribution,\r\n            title.Withdrawal,\r\n            title.EOYBalance,\r\n          ];\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] = arrFMV;\r\n          dataProjection[3] = arrDeposits;\r\n          dataProjection[4] = arrWithdrawals;\r\n          dataProjection[5] = arrEOYBalance;\r\n        } else {\r\n          dataColTitles = [\r\n            title.Year,\r\n            title.Age,\r\n            title.FMV,\r\n            title.AnnualContribution,\r\n            title.Withdrawal,\r\n            title.EOYBalance,\r\n            title.TaxLiability,\r\n          ];\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] = arrFMV;\r\n          dataProjection[3] = arrDeposits;\r\n          dataProjection[4] = arrWithdrawals;\r\n          dataProjection[5] = arrEOYBalance;\r\n          dataProjection[6] = arrTaxPayable;\r\n          if (assetCurr.assetTypeKey === ASSETS.STOCKS_BONDS.Key) {\r\n            dataColTitles = [\r\n              title.Year,\r\n              title.Age,\r\n              title.FMV,\r\n              title.ACB,\r\n              title.AnnualContribution,\r\n              title.Withdrawal,\r\n              title.SaleProceeds,\r\n              title.CapitalGain,\r\n              title.EOYBalance,\r\n              title.TaxLiability,\r\n            ];\r\n            dataProjection[0] = arrYear;\r\n            dataProjection[1] = arrAdjAge;\r\n            dataProjection[2] = arrFMV;\r\n            dataProjection[3] = arrACB;\r\n            dataProjection[4] = arrDeposits;\r\n            dataProjection[5] = arrWithdrawals;\r\n            dataProjection[6] = arrDispositionAmount;\r\n            dataProjection[7] = arrCapitalGain;\r\n            dataProjection[8] = arrEOYBalance;\r\n            dataProjection[9] = arrTaxPayable;\r\n          }\r\n        }\r\n\r\n        //  arrTaxPayable;\r\n      } else {\r\n        if (APPLET_INA) {\r\n          dataColTitles = [title.Year, title.Age, title.FMV, title.EOYBalance];\r\n\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] = arrFMV;\r\n          dataProjection[3] = arrEOYBalance;\r\n        } else {\r\n          dataColTitles = [\r\n            title.Year,\r\n            title.Age,\r\n            title.FMV,\r\n            title.EOYBalance,\r\n            title.Withdrawal,\r\n            title.TaxLiability,\r\n          ];\r\n\r\n          dataProjection[0] = arrYear;\r\n          dataProjection[1] = arrAdjAge;\r\n          dataProjection[2] = arrFMV;\r\n          dataProjection[3] = arrEOYBalance;\r\n          dataProjection[4] = arrWithdrawals;\r\n          dataProjection[5] = arrTaxPayable;\r\n        }\r\n      }\r\n    }\r\n    return { dataColTitles, dataProjection, gridTitle };\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { appletMode } from \"../../package.json\";\r\nimport { INCOMENEEDS } from \"./generalDefinitions\";\r\n\r\nconst DEFAULT_MARGIN_LEFT = -67;\r\nconst DEFAULT_MARGIN_TOP = 0;\r\nconst DEFAULT_WIDTH = 140;\r\nconst DEFAULT_HEIGHT = 100;\r\n\r\nconst POPUP_BORDER_INFO = \"#7399C6\";\r\nconst POPUP_BORDER_ALERT = \"red\";\r\nconst POPUP_BORDER_MESSAGE = \"#7399C6\";\r\n\r\nexport const SHOW_AUTOMATIC_RED = 0;\r\nexport const SHOW_STANDARD = 1;\r\nexport const SHOW_STANDARD_RED = 2;\r\nexport const SHOW_NONE = 3;\r\nexport const SHOW_STANDARD_LIGHT_BLUE = 4;\r\nexport const SHOW_STANDARD_WHITE = 5;\r\n\r\nconst infoHighlightStyle = { color: \"#6f2852\", fontWeight: \"bold\" };\r\n\r\nconst MESSAGES = {\r\n  en: {\r\n    infoYr0: appletMode===\"INA\"?\"Year 0 stands for 'at death': today\":\"Year 0 stands for 'today'\",\r\n    infoRetDur: \"Duration to retirement is  years\",\r\n    infoAvgTax: (\r\n      <div>\r\n        {\" \"}\r\n        {/* style={{color:\"#54585a\"}}> */}\r\n        Survivor's <span style={infoHighlightStyle}>Avg. Tax Rate</span> is\r\n        applied to annual income, interest and annual asset disposition. <br />\r\n        <span style={infoHighlightStyle}>Marginal Tax Rate </span>(under\r\n        Presentation Details) is applied to planned or potential full\r\n        disposition of an asset\r\n      </div>\r\n    ),\r\n    infoIconRetire: (\r\n      <div>\r\n        {\" \"}\r\n        {/* style={{color:\"#54585a\"}}> */}\r\n        <span style={infoHighlightStyle}>Income Source</span> and <span style={infoHighlightStyle}>Income Needs</span> durations are usually based on this value.\r\n        <br />They will be adjusted automatically, <br />please recheck.\r\n      </div>\r\n    ),\r\n    infoAdjust:\r\n      \"Adjust Income Needs and Income Source durations to end age (99) or Life Expectancy of\",\r\n    clientOnly: \"Needs Analysis is always done for member 'Client'\",\r\n    infoElig: (\r\n      <div>\r\n        {\" \"}\r\n        Survivor's and orphan's benefits are based on Client's eligibility\r\n        <br />\r\n        Set <span style={infoHighlightStyle}>Province</span> under \"Presentation\r\n        Details\" for CPP or QPP\r\n      </div>\r\n    ),\r\n    infoEligSinglePerson:\r\n    \"for government Death Benefit\",\r\n    infoSpouseElig:\r\n      \"100% means the Survivor is assumed to be fully eligible for government benefits by the age of 65\",\r\n    ever: \" ... for ever\",\r\n    taxMsg: \"Tax methods need to be discussed with your financial advisor\",\r\n    fetch: \"Failed to connect to the server\",\r\n    ie: \"Please use Edge or Chrome browsers for graphs and full functionality\",\r\n    govB: (\r\n      <div>\r\n        Do not delete government benefits. <br />\r\n        To adjust them, change{\" \"}\r\n        <span style={infoHighlightStyle}>Client's \"CPP/QPP Eligibility\"</span>\r\n      </div>\r\n    ),\r\n    assetTax:\r\n      \"Please use after tax asset values until Tax Method becomes available\",\r\n    internet:\r\n      \"You need to login to the PPI site again.\" +\r\n      \"You can save your data before clicking on this message or use \" +\r\n      \"'Recover' in INA to reload your input data.\" +\r\n      \"Please click to refresh.\",\r\n\r\n    RRIF:\r\n      \"RRIF is reflected in survivor's income based on their own or rolled-over RRSP. Maximum withdrawal age is 71\",\r\n    rollOver:\r\n      \"Client's assets can usually be rolled-over to their spouse to avoid liquidation\",\r\n    insurance:\r\n      \"Client's insurance is available to the survivor while Spouse or Joint (JLTD) insurance is not.\",\r\n    rental:\r\n      \"This is rental income for Real Estate and Dividend income for Stocks. Both as a % of Current Value. Alternatively they can be entered under 'Sources of Income ...'. Such income (after tax) impacts survivors' cash flows and therefore 'Insurance Needs' of the Client\",\r\n    note:\r\n      \"Pull down on lower bottom to enlarge. A few small paragraphs can be saved (up to 5000 characters)\",\r\n    save: (\r\n      <div>\r\n        To save files to your desired location:\r\n        <br />\r\n        <span style={infoHighlightStyle}>Microsoft Edge:</span>\r\n        <li>Go to menu ..., Downloads, Download Settings</li>\r\n        <span style={infoHighlightStyle}>Google Chrome:</span>\r\n        <li>Go to menu ..., Settings, Advanced, Downloads</li>\r\n        <span style={infoHighlightStyle}>then in either browser:</span>\r\n        <li>Turn on \"Ask where to save each file before downloading\"</li>\r\n      </div>\r\n    ),\r\n    gridCapFund:\r\n      \"Capital Fund consists of Additional Capital required (Insurance Needs) less Additional Income Required, accruing at after-tax 'Investment Rate'\",\r\n    salary:\r\n      \"Gross income, government benefits and other annual income types are assumed to grow at inflation rate\",\r\n    salaryPercent:\r\n      \"The After-tax value is shown in today's dollars. It will grow at inflation rate\",\r\n    afterTax: \"All amounts are after tax\",\r\n    taxExempt: (\r\n      <div>\r\n        Small Business{\" \"}\r\n        <span style={infoHighlightStyle}>Capital Gains Tax Exemption</span> is\r\n        assumed to grow at inflation rate\r\n      </div>\r\n    ),\r\n    infoINA:\r\n      \"This amount is based on the present value of shortfalls, discounted at the after tax investment rate. It is adjusted if necessary, to make sure early shortfalls are provided for\",\r\n      infoBOYEOY: \"BOY stands for Beginning of Year and EOY for End of Year\",\r\n      infoAvgGrowth:  <div>Average Growth = ( <br/>EOY Balance + Sale Proceeds <br/> - BOY Balance <br/>) / BOY Balance </div>,\r\n      infoPDF:\r\n      \"INA Graphs and Spreadsheet can be exported to PDF under 'Graphs' tab\",  \r\n      probate:\r\n      appletMode===\"INA\"?\"Probate is based on Client's assets at time of death and does not include Joint assets or assets that belong to, or can be rolled-over to Spouse\":\r\n      \"Probate is based on Client's assets at time of death. If a Spouse is added, hence JLTD coverage, it will also include Joint assets or assets that belong to, or can be rolled-over to Spouse\",  \r\n      TFSA:\r\n      \"RRSP and TFSA contributions and withdrawals are subject to limitations set by CRA\",  \r\n      DepositWithd:\r\n      \"Contributions and Withdrawals affect asset's fair market value and also cash flows. Survivors' cash flows from all sources directly impact 'Insurance Needs' of the Client\",  \r\n      inflationGrowth:\r\n      \"Gross income, government benefits and other annual income types are assumed to grow at your selected inflation rate\",  \r\n      PYE_JLTD:\r\n      \"When a Spouse is added, the Estate liability needs to be insured with a JLTD coverage. As such, it includes tax and other liabilities of both at the last death\",  \r\n      needGrowth:\r\n      \"Income Needs are assumed to grow at your selected inflation rate\",\r\n      needGrowth_1:\r\n      \"Estate Income Needs are assumed to grow at your selected inflation rate\",\r\n      exportINA:\r\n      \"Data can be exported to Insurance Needs Analysis, where insurance needs to support survivor(s) life style can be calculated\",\r\n      taxLiab:\r\n      \"Asset projections take Tax Liability into account. You don't need to enter a separate liability related to taxes such as capital gains\",\r\n      liabDesc:\r\n      \"You may use this to indicate a permanent/non-permanent liability\",\r\n  },\r\n  fr: {\r\n    infoYr0:\r\n    appletMode===\"INA\"?\"L'anne 0 est l'anne du dcs: aujourd'hui\":\"L'anne 0 reprsente aujourd'hui\",\r\n    infoRetDur: \"Le nombre d'annes avant la retraite est de .... ans\",\r\n    infoAvgTax: (\r\n      <div>\r\n        Le taux d'imposition marginal (sous la rubrique  Prcisions sur la\r\n        prsentation ) s'applique  la disposition planifie ou potentielle\r\n        complte d'un actif.{\" \"}\r\n        <span style={infoHighlightStyle}>Le taux d'imposition moyen</span> du\r\n        survivant s'applique au revenu annuel, aux intrts et  la disposition\r\n        annuelle des actifs.\r\n        <br />\r\n        <span style={infoHighlightStyle}>\r\n          Le taux d'imposition marginal{\" \"}\r\n        </span>{\" \"}\r\n        (sous la rubrique  Prcisions sur la prsentation ) s'applique  la\r\n        disposition planifie ou potentielle complte d'un actif.\r\n      </div>\r\n    ),\r\n    infoIconRetire: <div>\r\n    {\" \"}\r\n    {/* style={{color:\"#54585a\"}}> */}\r\n    Les dures de la <span style={infoHighlightStyle}>source de revenus</span> et des <span style={infoHighlightStyle}>besoins en matire de revenus</span> sont gnralement bases sur cette valeur.\r\n        <br />Elles seront rajustes automatiquement, veuillez les vrifier de nouveau.\r\n  </div>,\r\n    \r\n    infoAdjust:\r\n      \"Ajuster les besoins de revenu et les dures de la source de revenu  ge  l'chance (99) or l'esprance de vie de\",\r\n    clientOnly:\r\n      \"L'analyse des besoins est toujours effectue pour le client membre de la famille\",\r\n    infoElig: (\r\n      <div>\r\n        Les prestations du survivant et de l'orphelin sont bases sur\r\n        l'admissibilit du client\r\n        <br />\r\n        Dfinir{\" \"}\r\n        <span style={infoHighlightStyle}>la province</span> (RPC ou RRQ)  la\r\n        rubrique 'Prcisions sur la prsentation'\r\n      </div>\r\n    ),\r\n    infoEligSinglePerson:\r\n    \"pour prestation de dcs du gouvernment\",\r\n    \r\n    infoSpouseElig:\r\n      \"100 % signifie que le survivant est suppos tre pleinement admissible aux prestations gouvernementales avant l'ge de 65 ans\",\r\n    ever: \" ... pour toujours\",\r\n    taxMsg:\r\n      \"Les mthodes fiscales doivent tre discutes avec votre conseiller financier\",\r\n    fetch: \"Dfaut de connexion au serveur\",\r\n    ie:\r\n      \"s'il vous plat utiliser les navigateurs Edge ou Chrome pour les graphiques et les fonctionnalits compltes\",\r\n    govB: (\r\n      <div>\r\n        Ne supprimez pas les prestations gouvernementales. <br />\r\n        Pour les ajuster, modifier{\" \"}\r\n        <span style={infoHighlightStyle}>l'admissibilit du client</span>\r\n      </div>\r\n    ),\r\n    assetTax:\r\n      \"Veuillez utiliser les valeurs des actifs aprs impt jusqu' ce que la mthode d'imposition devienne disponibl\",\r\n    internet:\r\n      \"  Vous devez vous connecter  nouveau au site PPI.\" +\r\n      \"Vous pouvez enregistrer vos donnes avant de cliquer sur ce message\" +\r\n      \"pour recharger vos donnes d'entre.\" +\r\n      \"S'il vous plat cliquez pour rafrachir.\",\r\n    RRIF:\r\n      \"Le FERR est pris en compte dans le revenu du survivant sur la base de son propre REER ou d'un REER transfr. L'ge maximal pour retirer des fonds est de 71 ans.\",\r\n    rollOver:\r\n      \"Les actifs du client peuvent habituellement tre transfrs au conjoint pour viter une liquidation.\",\r\n    insurance:\r\n      \"L'assurance du client est offerte au survivant, alors que l'assurance du conjoint ou l'assurance conjointe (sur deux ttes) ne le sont pas.\",\r\n    rental:\r\n      \"Il s'agit du revenu de location li aux biens immobiliers et du revenu de dividende li aux actions. Il s'agit dans les deux cas d'un pourcentage de la valeur actuelle. Ils peuvent galement tre saisis dans la rubrique  Sources de revenus . Un tel revenu (aprs impt) aura un impact sur les flux montaires des survivants et par consquent, sur les  besoins en assurance  du client.\",\r\n    note:\r\n      \"Abaissez le bord infrieur pour agrandir. Quelques petits paragraphes peuvent tre enregistrs (jusqu' 5 000 caractres).\",\r\n    save: (\r\n      <div>\r\n        Pour enregistrer les fichiers  l'emplacement voulu :<br />\r\n        <span style={infoHighlightStyle}>Microsoft Edge:</span>\r\n        <li>Aller au menu..., Tlchargements, Paramtres de tlchargement</li>\r\n        <span style={infoHighlightStyle}>Google Chrome:</span>\r\n        <li>\r\n          Aller au menu..., Paramtres, Paramtres avancs, Tlchargements\r\n        </li>\r\n        <span style={infoHighlightStyle}>\r\n          puis dans l'un ou l'autre des navigateurs :\r\n        </span>\r\n        <li>\r\n          Activer la fonction  Me demander quoi faire avec chaque\r\n          tlchargement  ou  Toujours demander o enregistrer les fichiers .\r\n        </li>\r\n      </div>\r\n    ),\r\n    gridCapFund:\r\n      \"Le fonds de capitaux est constitu du capital additionnel requis (besoins d'assurance), diminu du revenu additionnel requis et accru du taux de rendement aprs impt.\",\r\n    salary:\r\n      \"Le revenu brut, les prestations de l'tat et les autres types de revenus annuels sont prsums crotre au taux d'inflation\",\r\n    salaryPercent:\r\n      \"La valeur aprs impt est indique en dollars d'aujourd'hui. Il augmentera au taux d'inflation\",\r\n    afterTax: \"Tous les montants sont aprs impt\",\r\n    taxExempt: (\r\n      <div>\r\n        {\" \"}\r\n        <span style={infoHighlightStyle}>\r\n          Exonration des gains en capital\r\n        </span>{\" \"}\r\n        pour les petites entreprises est prsume crotre au taux d'inflation\r\n      </div>\r\n    ),\r\n    infoINA:\r\n      \"Ce montant est bas sur la valeur actualise des manques  gagner en matire de revenus, actualise au taux de rendement aprs impt. Il est ajust, si ncessaire, pour s'assurer que des manque  gagner prcoces sont prvus\",\r\n      infoBOYEOY: \"DDA signifie Dbut d'anne et FDA, Fin d'anne\",\r\n      infoAvgGrowth:  <div>Croissance moyenne = ( <br/>Valeur FDA + Produits de la vente <br/> - Valeur en dbut d'anne <br/>)/Valeur en dbut d'anne </div>,\r\n      infoPDF:\r\n      \"Les graphiques et la feuille de calcul de l'analyse des besoins en matire d'assurance peuvent tre exports en format PDF sous l'onglet 'Graphique'\",      \r\n      probate:\r\n      appletMode===\"INA\"?\"L'homologation est base sur les actifs du client au moment du dcs et n'inclut pas les actifs communs ou les actifs qui appartiennent au conjoint ou qui peuvent tre transfrs  celui-ci\":\r\n      \"L'homologation est base sur les actifs du client au moment du dcs. Si un conjoint est ajout, donc la couverture CDD (conjointe au dernier dcs), elle comprendra galement les actifs communs ou les actifs qui appartiennent au conjoint ou qui peuvent lui tre transfrs\",  \r\n   TFSA:\r\n      \"Les cotisations et les retraits REER et CELI sont assujettis aux limites tablies par l'ARC\",  \r\n      DepositWithd:\r\n      \"Les cotisations et les retraits affectent la juste valeur marchande des actifs et les flux montaires. Les flux montaires des survivants, quelle que soit leur origine, ont un impact direct sur les 'besoins en assurance' du client\",  \r\n      inflationGrowth:\r\n      \"Le revenu brut, les prestations gouvernementales et les autres types de revenus annuels sont supposs crotre au taux d'inflation que vous avez slectionn\",  \r\n      PYE_JLTD:\r\n      \"Lorsqu'un conjoint est ajout, la responsabilit de la succession doit tre assure avec une couverture CDD. En tant que telle, elle comprend les obligations fiscales et les autres dettes des deux conjoints au dernier dcs\",  \r\n      needGrowth:\r\n      \"Les besoins en revenu sont supposs crotre au taux d'inflation que vous avez choisi\",\r\n      needGrowth_1:\r\n      \"Les besoins en revenu de la succession sont supposs crotre au taux d'inflation que vous avez choisi\",\r\n      exportINA:\r\n      \"Les donnes peuvent tre exportes vers l'analyse des besoins en assurance, qui permet de calculer les besoins en assurance pour soutenir le style de vie du ou des survivant(s)\",\r\n      taxLiab:\r\n      \"Les projections d'actifs prennent en compte le passif fiscal. Vous n'avez pas besoin d'entrer un passif spar li aux impts tel que les gains en capital\",\r\n      liabDesc:\r\n      \"You may use this to indicate a permanent/non-permanent liability ^F\",\r\n  },\r\n};\r\n\r\nexport function getGenericMessage(lang) {\r\n  return {\r\n    infoID: \"infoGenericMsg\",\r\n    infoText: \"\",\r\n    iconMode: SHOW_NONE,\r\n    popupOpenByProps: true,\r\n    popupBorderColor: POPUP_BORDER_ALERT,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT,\r\n      marginTop: DEFAULT_MARGIN_TOP + 5,\r\n      width: DEFAULT_WIDTH + 30,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconTaxExempt(lang) {\r\n  return {\r\n    infoID: \"infoExempt\",\r\n    infoText: MESSAGES[lang].taxExempt,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH + 20,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconSourcesGov(lang) {\r\n  return {\r\n    infoID: \"infogov\",\r\n    infoText: MESSAGES[lang].govB,\r\n    iconMode: SHOW_STANDARD_RED,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_ALERT,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 12,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoNoInternetAccess(lang) {\r\n  return {\r\n    infoID: \"infoNoInternetAccess\",\r\n    infoText: MESSAGES[lang].internet,\r\n    iconMode: SHOW_NONE,\r\n    popupOpenByProps: true,\r\n    popupBorderColor: POPUP_BORDER_ALERT,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT,\r\n      marginTop: DEFAULT_MARGIN_TOP + 5,\r\n      width: DEFAULT_WIDTH + 80,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconSourcesRRIF(lang) {\r\n  return {\r\n    infoID: \"RRIF\",\r\n    infoText: MESSAGES[lang].RRIF,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconClientsMember(lang) {\r\n  return {\r\n    infoID: \"infoMember\",\r\n    infoText: MESSAGES[lang].clientOnly,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 12,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIncome(lang) {\r\n  return {\r\n    infoID: \"infosalary\",\r\n    infoText: MESSAGES[lang].salary,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 12,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoSalaryPercent(lang) {\r\n  return {\r\n    infoID: \"infoSalaryPercent\",\r\n    infoText: MESSAGES[lang].salaryPercent,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconAssetsIncomeRate(lang) {\r\n  return {\r\n    infoID: \"infoIconIncomeRate\",\r\n    infoText: MESSAGES[lang].rental,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH +100,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconPYE_JLTD(lang) {\r\n  return {\r\n    infoID: \"infoIconPYE_JLTD\",\r\n    infoText: MESSAGES[lang].PYE_JLTD,\r\n    iconMode: SHOW_STANDARD_WHITE,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH +100,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\n\r\nexport function getInfoIconNeedGrowth(lang) {\r\n  return {\r\n    infoID: \"infoIconNeedGrowth\",\r\n    infoText: MESSAGES[lang].needGrowth,\r\n    iconMode: SHOW_STANDARD_WHITE,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH +100,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\n\r\nexport function getInfoINA(lang) {\r\n  return {\r\n    infoID: \"infoINA\",\r\n    infoText: MESSAGES[lang].infoINA,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH + 50,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoPDF(lang) {\r\n  return {\r\n    infoID: \"infoPDF\",\r\n    infoText: MESSAGES[lang].infoPDF,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH + 30,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\n\r\n\r\nexport function getInfoExportINA(lang) {\r\n  return {\r\n    infoID: \"exportINA\",\r\n    infoText: MESSAGES[lang].exportINA,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH + 30,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconAssetsOwner(lang) {\r\n  return {\r\n    infoID: \"infoIconOwner\",\r\n    infoText: MESSAGES[lang].rollOver,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 12,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconTFSA(lang) {\r\n  return {\r\n    infoID: \"infoIconTFSA\",\r\n    infoText: MESSAGES[lang].TFSA,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 20,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconProbate(lang) {\r\n  return {\r\n    infoID: \"infoIconProbate\",\r\n    infoText: MESSAGES[lang].probate,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 20,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH +30,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\n\r\n\r\nexport function getInfoIconLiabDesc(lang) {\r\n  return {\r\n    infoID: \"infoIconLiabDesc\",\r\n    infoText: MESSAGES[lang].liabDesc,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 20,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH +80,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconDepositWithd(lang) {\r\n  return {\r\n    infoID: \"infoIconDepositWithd\",\r\n    infoText: MESSAGES[lang].DepositWithd,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 20,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH +50,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\n\r\nexport function getInfoIconInflationGrowth(lang) {\r\n  return {\r\n    infoID: \"infoIconInflationGrowth\",\r\n    infoText: MESSAGES[lang].inflationGrowth,\r\n    iconMode: SHOW_STANDARD_WHITE,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 20,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH +50,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconAssetsIns(lang) {\r\n  return {\r\n    infoID: \"insurance\",\r\n    infoText: MESSAGES[lang].insurance,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 30,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconAssetsYr0(lang) {\r\n  return {\r\n    infoID: \"infoIconYr0\",\r\n    infoText: MESSAGES[lang].infoYr0,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 12,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconClientsElig(lang) {\r\n  return {\r\n    infoID: \"infoIconElig\",\r\n    infoText: MESSAGES[lang].infoElig,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 6,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH + 25,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconClientsEligSinglePerson(lang) {\r\n  return {\r\n    infoID: \"infoIconEligSP\",\r\n    infoText: MESSAGES[lang].infoEligSinglePerson,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 6,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH + 25,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconSpouseElig(lang) {\r\n  return {\r\n    infoID: \"infoIconSpouseElig\",\r\n    infoText: MESSAGES[lang].infoSpouseElig,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 6,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH + 25,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconClientsTax(lang) {\r\n  return {\r\n    infoID: \"infoIconAvgTax\",\r\n    infoText: MESSAGES[lang].infoAvgTax,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT - 20,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH + 70,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\n\r\n\r\nexport function getInfoIconClientsRetire(lang,flagRed) {\r\n  return {\r\n    infoID: \"infoIconRetire\",\r\n    infoText: MESSAGES[lang].infoIconRetire,\r\n    iconMode: flagRed?SHOW_STANDARD_RED:SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT - 20,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH + 45,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoTaxLiability(lang) {\r\n  return {\r\n    infoID: \"infoIconAvgTax\",\r\n    infoText: MESSAGES[lang].infoAvgTax,\r\n    iconMode: SHOW_STANDARD_LIGHT_BLUE,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT - 88,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH + 70,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconTaxLiab(lang) {\r\n  return {\r\n    infoID: \"infoIcontaxLiab\",\r\n    infoText: MESSAGES[lang].taxLiab,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT - 20,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH + 70,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\nexport function getInfoBOYEOY(lang) {\r\n  return {\r\n    infoID: \"infoBOYEOY\",\r\n    infoText: MESSAGES[lang].infoBOYEOY,\r\n    iconMode: SHOW_STANDARD_LIGHT_BLUE,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT - 70,\r\n      marginTop: DEFAULT_MARGIN_TOP+45,\r\n      width: DEFAULT_WIDTH + 35,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoAvgGrowth(lang) {\r\n  return {\r\n    infoID: \"infoAvgGrowth\",\r\n    infoText: MESSAGES[lang].infoAvgGrowth,\r\n    iconMode: SHOW_STANDARD_LIGHT_BLUE,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT - 70,\r\n      marginTop: DEFAULT_MARGIN_TOP+45,\r\n      width: DEFAULT_WIDTH + 70,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoIconNotes(lang) {\r\n  return {\r\n    infoID: \"InfoIconNotes\",\r\n    infoText: MESSAGES[lang].note,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 20,\r\n      marginTop: DEFAULT_MARGIN_TOP,\r\n      width: DEFAULT_WIDTH + 70,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoSave(lang) {\r\n  return {\r\n    infoID: \"InfoSave\",\r\n    infoText: MESSAGES[lang].save,\r\n    iconMode: SHOW_STANDARD,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 105,\r\n      marginTop: DEFAULT_MARGIN_TOP - 172,\r\n      width: DEFAULT_WIDTH + 225,\r\n      height: DEFAULT_HEIGHT - 280,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoExcelcapFund(lang) {\r\n  return {\r\n    infoID: \"InfoExcelcapFun\",\r\n    infoText: MESSAGES[lang].gridCapFund,\r\n    iconMode: SHOW_STANDARD_LIGHT_BLUE,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT - 88,\r\n      marginTop: DEFAULT_MARGIN_TOP+35,\r\n      width: DEFAULT_WIDTH + 110,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n\r\nexport function getInfoExcelAllAfterTax(lang) {\r\n  return {\r\n    infoID: \"InfoATax\",\r\n    infoText: MESSAGES[lang].afterTax,\r\n    iconMode: SHOW_STANDARD_LIGHT_BLUE,\r\n    popupOpenByProps: false,\r\n    popupBorderColor: POPUP_BORDER_INFO,\r\n    position: {\r\n      marginLeft: DEFAULT_MARGIN_LEFT + 30,\r\n      marginTop: DEFAULT_MARGIN_TOP+45,\r\n      width: DEFAULT_WIDTH + 20,\r\n      height: DEFAULT_HEIGHT,\r\n    },\r\n  };\r\n}\r\n","import React from \"react\";\r\nimport { MultiButtons } from \"./MultiButtons\";\r\n\r\nimport { OUTPUT_WIDTH_PCT } from \"../definitions/generalDefinitions\";\r\n\r\nexport class AdjustibleImage extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      imageSize: this.props.size,\r\n      imageLeft: this.props.imageLeft,\r\n      allPages: this.props.allPages,\r\n      imageTop: this.props.top,\r\n      showDetails: false,\r\n      image: this.props.image,\r\n      undo: false,\r\n    };\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    this.setState({ showDetails: false });\r\n  };\r\n\r\n  updateImage = () => {\r\n    const image = {\r\n      image: this.state.image,\r\n      left: this.state.imageLeft,\r\n      size: this.state.imageSize,\r\n      allPages: this.state.allPages,\r\n      top: this.state.imageTop,\r\n      showDetails: this.state.showDetails,\r\n    };\r\n    this.props.imageAdjust(image, this.props.ID);\r\n  };\r\n\r\n  imageBigger = () => {\r\n    this.setState(\r\n      (prevState) => ({\r\n        imageSize: parseFloat(prevState.imageSize * 1.1),\r\n      }),\r\n      this.updateImage\r\n    );\r\n  };\r\n\r\n  imageSmaller = () => {\r\n    this.setState(\r\n      (prevState) => ({\r\n        imageSize: parseFloat(prevState.imageSize * 0.9),\r\n      }),\r\n      this.updateImage\r\n    );\r\n  };\r\n\r\n  imageLeft = () => {\r\n    this.setState(\r\n      (prevState) => ({\r\n        imageLeft: parseFloat(prevState.imageLeft - 2),\r\n      }),\r\n      this.updateImage\r\n    );\r\n  };\r\n\r\n  imageRight = () => {\r\n    this.setState(\r\n      (prevState) => ({\r\n        imageLeft: parseFloat(prevState.imageLeft + 2),\r\n      }),\r\n      this.updateImage\r\n    );\r\n  };\r\n\r\n  imagePosition = (e) => {\r\n    let top = e === 1 ? true : false;\r\n    this.setState(\r\n      { imageTop: top },\r\n\r\n      this.updateImage\r\n    );\r\n  };\r\n\r\n  imagePages = (e) => {\r\n    let allPages = e === 1 ? false : true;\r\n    this.setState(\r\n      { allPages: allPages },\r\n\r\n      this.updateImage\r\n    );\r\n  };\r\n\r\n  imageRemove = () => {\r\n    this.setState(\r\n      {\r\n        image: null,\r\n        showDetails: false,\r\n      },\r\n      this.updateImage\r\n    );\r\n  };\r\n\r\n  showDetails = () => {\r\n    const image = {\r\n      image: this.state.image,\r\n      left: this.state.imageLeft,\r\n      size: this.state.imageSize,\r\n      allPages: this.state.allPages,\r\n      imageTop: this.state.imageTop,\r\n      showDetails: !this.state.showDetails,\r\n    };\r\n    this.props.imageAdjust(image, this.props.ID);\r\n  };\r\n\r\n  undoImage = () => {\r\n    const image = {\r\n      image: this.state.image,\r\n      left: this.state.imageLeft,\r\n      size: this.state.imageSize,\r\n      allPages: this.state.allPages,\r\n      imageTop: this.state.imageTop,\r\n      showDetails: false,\r\n    };\r\n    \r\n    if(this.props.undoImage!==undefined)\r\n      image.image=this.props.undoImage\r\n      this.setState(\r\n      {\r\n        image: image,\r\n        undo: true\r\n      },\r\n    );\r\n\r\n  };\r\n\r\n  imageDone = () => {\r\n    this.setState({\r\n      showDetails: false,\r\n    });\r\n  };\r\n\r\n  loadImage = (e) => {\r\n    let file = e.target.files[0];\r\n\r\n    let reader = new FileReader();\r\n    reader.readAsDataURL(file);\r\n\r\n    let image;\r\n    reader.onload = () => {\r\n      image = reader.result;\r\n\r\n      const imageObj = {\r\n        image: image,\r\n        left: this.state.imageLeft,\r\n        size: this.state.imageSize,\r\n        allPages: false,\r\n        imageTop: this.state.imageTop,\r\n        showDetails: this.props.showDetails,\r\n      };\r\n      this.setState(\r\n        () => ({\r\n          image: image,\r\n          showDetails: this.props.showDetails,\r\n          allPages: this.props.allPages,\r\n          undo: false\r\n        }),\r\n        this.props.imageAdjust(imageObj, this.props.ID)\r\n      );\r\n    };\r\n  };\r\n\r\n  render() {\r\n    const styleImage = {\r\n      float: \"left\",\r\n      width: OUTPUT_WIDTH_PCT + \"%\",\r\n      display: \"table-cell\",\r\n      marginTop: \"-3px\",\r\n      marginBottom: \"15px\",\r\n      marginLeft: this.state.imageLeft + \"%\",\r\n    };\r\n    //console.log(this.state.image)\r\n    const lang = this.props.language !== undefined ? this.props.language : \"en\";\r\n    const cmdWidth =\r\n      this.props.buttonText !== undefined\r\n        ? this.props.buttonText.length * (lang === \"en\" ? 10 : 14)\r\n        : 0;\r\n\r\n    return (\r\n      <div\r\n        id=\"image\"\r\n        style={{\r\n          float: \"left\",\r\n          marginTop: \"12px\",\r\n          marginBottom: \"12px\",\r\n          width: OUTPUT_WIDTH_PCT + \"%\",\r\n        }}\r\n      >\r\n        <div style={{ paddingLeft: \"2.5%\" }}>\r\n          {this.state.showDetails === false && cmdWidth > 0 && (\r\n            <label className=\"roundedCornerCmd\">\r\n              <input\r\n                type=\"file\"\r\n                required\r\n                style={{ display: \"none\" }}\r\n                accept=\".jpg, .png, .jpeg, .gif, .bmp, .tif, .ico, .tiff, .svg,|image/*\"\r\n                onChange={this.loadImage}\r\n                onClick={(event) => {\r\n                  event.target.value = null;\r\n                }}\r\n              />\r\n              <span style={{ marginTop: \"10px\", width: \"40px\" }}>\r\n                {this.props.buttonText}\r\n              </span>\r\n              \r\n            </label>\r\n          )}\r\n          {this.props.undoImage!==undefined && <input\r\n             className=\"roundedCornerCmd\"\r\n              style={{marginLeft:\"10px\"}}\r\n              onClick={this.undoImage}\r\n              type=\"button\"\r\n              value={lang === \"en\" ? \"Undo\":\"Annuler\"}\r\n            />}\r\n        </div>\r\n        <br /> <br />\r\n        <hr className=\"ppi1\" />\r\n        {this.state.showDetails && (\r\n          <>\r\n            <div style={{ marginLeft: \"20px\" }}>\r\n              <MultiButtons\r\n                width={\"80px\"}\r\n                noButtons={2}\r\n                buttonCaption={[\r\n                  lang === \"en\" ? \"Top\" : \"Haut\",\r\n                  lang === \"en\" ? \"Bottom\" : \"Bas\",\r\n                ]}\r\n                selected={this.state.imageTop ? 1 : 2}\r\n                selectMultiButton={this.imagePosition}\r\n              />\r\n\r\n              <MultiButtons\r\n                width={\"40px\"}\r\n                noButtons={1}\r\n                buttonCaption={[\"+\"]}\r\n                selected={1}\r\n                selectMultiButton={this.imageBigger}\r\n              />\r\n              <MultiButtons\r\n                width={\"40px\"}\r\n                noButtons={1}\r\n                buttonCaption={[\"-\"]}\r\n                selected={1}\r\n                selectMultiButton={this.imageSmaller}\r\n              />\r\n\r\n              <MultiButtons\r\n                width={\"50px\"}\r\n                noButtons={1}\r\n                buttonCaption={[<text>&#8592;</text>]}\r\n                selected={1}\r\n                selectMultiButton={this.imageLeft}\r\n              />\r\n              <MultiButtons\r\n                width={\"50px\"}\r\n                noButtons={1}\r\n                buttonCaption={[<text>&#8594;</text>]}\r\n                selected={1}\r\n                selectMultiButton={this.imageRight}\r\n              />\r\n\r\n              <MultiButtons\r\n                width={lang === \"en\" ?\"80px\":\"120px\"}\r\n                noButtons={2}\r\n                buttonCaption={[\r\n                  lang === \"en\" ? \"1st page\" : \"1re page\",\r\n                  lang === \"en\" ? \"All pages\" : \"toutes les pages\",\r\n                ]}\r\n                selected={this.state.allPages ? 2 : 1}\r\n                selectMultiButton={this.imagePages}\r\n              />\r\n              <MultiButtons\r\n                width={\"40px\"}\r\n                noButtons={1}\r\n                buttonCaption={[\"x\"]}\r\n                selected={1}\r\n                selectMultiButton={this.imageRemove}\r\n              />\r\n              <MultiButtons\r\n                style={{ marginLeft: \"20px\" }}\r\n                width={\"80px\"}\r\n                noButtons={1}\r\n                buttonCaption={[lang === \"en\" ? \"done\" : \"termin\"]}\r\n                selected={1}\r\n                selectMultiButton={this.imageDone}\r\n              />\r\n            </div>\r\n          </>\r\n        )}\r\n        <p />\r\n        <div style={styleImage}>\r\n          {this.state.image === null ? (\r\n            \"\"\r\n          ) : (\r\n            <img\r\n              className=\"ppi1\"\r\n              id={this.props.ID}\r\n              src={this.state.undo?this.state.image.image: this.state.image}\r\n              width={this.state.imageSize + \"%\"}\r\n            />\r\n          )}\r\n        </div>\r\n        <br />\r\n        <br />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import { TITLES, APPLET_INA, DEFAULT_QUOTE  } from \"../definitions/generalDefinitions\";\r\nimport React, { Component } from \"react\";\r\nimport { Info } from \"./Info\";\r\n\r\n//import {convertToINA} from '../utils/helper'\r\nimport { versionDetails, isVersion2019, isMobileDevice } from \"../utils/helper\";\r\nimport { version } from \"../../package.json\";\r\n\r\nexport function hideRecover() {\r\n  document.getElementById(\"last\").style.display = \"none\";\r\n}\r\n\r\nexport class Header extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.last = React.createRef();\r\n    this.default = React.createRef();\r\n//    this.defaultButton=this.defaultCommand(this.props.language); \r\nconst language=this.props.language\r\n    const storageName=DEFAULT_QUOTE\r\n    const set= TITLES[language ].default \r\n    const clear=TITLES[language ].defaultClear \r\n    this.defaultButton= localStorage.getItem(storageName) === null?set:clear\r\n \r\n  }\r\n\r\n  hideRecover = () => {\r\n    const ref = this.last.current;\r\n    //const last = document.getElementById(\"last\");\r\n    if (ref !== undefined) ref.style.display = \"none\";\r\n  };\r\n\r\n  saveDefault = () => {\r\n    //const def = document.getElementById(\"default\");\r\n\r\n    const ref = this.default.current;\r\n    const val = ref.value;\r\n    //console.log(ref)\r\n    if (ref !== undefined) {\r\n     \r\n      if (ref.value===TITLES[this.props.language ].default)\r\n      {\r\n        this.props.saveAsDefaultCase(false);\r\n    \r\n    //  ref.style.backgroundColor = \"lightgrey\";\r\n     // ref.style.color = \"white\";\r\n      ref.value = TITLES[this.props.language ].defaultClear\r\n   //  setTimeout(() => {\r\n    //    ref.style.backgroundColor = \"white\";\r\n        //ref.style.color = \"#455560\";\r\n       // ref.value = val;\r\n    //  }, 1000);\r\n\r\n    }\r\n    else{\r\n      this.props.saveAsDefaultCase(true);\r\n    \r\n      ref.value = TITLES[this.props.language ].default\r\n    } \r\n    }\r\n  };\r\n\r\n  defaultCommand=(language)=>{\r\n    const storageName=DEFAULT_QUOTE;\r\n    const set= TITLES[language ].default \r\n    const clear=TITLES[language ].defaultClear \r\n    return localStorage.getItem(storageName) === null?set:clear\r\n  }\r\n\r\n  changeLanguage=()=>{\r\n    this.defaultButton=this.defaultCommand(this.props.language===\"en\"?\"en\":\"fr\")\r\n    //this.props.changeLang()\r\n  }\r\n\r\n  render() {\r\n    const vd = versionDetails();\r\n    const emailAllowed = vd.allowEmail;\r\n    let style1 =\r\n      this.props.language === \"en\" ? { right: \"45px\" } : { right: \"55px\" };\r\n    let style2 =\r\n      this.props.language === \"en\" ? { right: \"90px\" } : { right: \"152px\" };\r\n    let style3 =\r\n      this.props.language === \"en\"\r\n        ? { right: emailAllowed ? \"145px\" : \"97px\" }\r\n        : { right: emailAllowed ? \"210px\" : \"158px\" };\r\n    let style4 =\r\n      this.props.language === \"en\"\r\n        ? { right: emailAllowed ? \"255px\" : \"197px\" }\r\n        : { right: emailAllowed ? \"320px\" : \"256px\" };\r\n    //if(isVersion2019())\r\n    //\tstyle3= this.props.language===\"en\" ? {right: '90px'}:  {right: '152px'};\r\n    var iOS = isMobileDevice(); // /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\r\n    const class1 = iOS === true ? \"headerBarIOS\" : \"headerBar\";\r\n    const styleTitle =\r\n      iOS === true\r\n        ? { color: \"#282e31\", marginBottom: \"8px\", marginTop: \"-10px\" }\r\n        : { color: \"#282e31\", marginBottom: \"8px\" };\r\n    const styleVersion =\r\n      iOS === true\r\n        ? { fontSize: \"10px\" }\r\n        : { display: \"inline-block\", fontSize: \"10px\", paddingLeft: \"4px\" };\r\n    return (\r\n      <div className={class1}>\r\n        <input\r\n          className=\"language\"\r\n          style={{ marginTop: \"0px\", right: \"0px\" }}\r\n          onClick={this.changeLanguage(), this.props.changeLang} /* this.changeLanguage()} */ \r\n          type=\"button\"\r\n          value={this.props.language === \"en\" ? \"Franais\" : \"English\"}\r\n        />\r\n        <span>\r\n          <div style={{ maxWidth: \"70%\" }}>\r\n            <div style={{ display: \"inline-block\" }}>\r\n              <h2 className=\"headerTitle\" /* style={styleTitle} */>{this.props.title}</h2>\r\n            </div>\r\n            <div style={styleVersion}>({version})</div>\r\n          </div>\r\n        </span>\r\n        <span className=\"topCommandLine\">\r\n          <input\r\n            className=\"titleButtons\"\r\n            onClick={this.props.saveToFile}\r\n           // style={style1}\r\n            type=\"button\"\r\n            value={this.props.language === \"en\" ? \"Save\" : \"Enregistrer\"}\r\n          />\r\n          <label className=\"titleButtons\" style={{ right: \"0px\" }}>\r\n            <input\r\n              type=\"file\"\r\n              required\r\n              style={{ display: \"none\" }}\r\n              accept=\".ppi_INA_TKD, .ppi_EP_TKD, .json\"\r\n              onChange={this.props.loadFromFile}\r\n              onClick={(event) => {\r\n                event.target.value = null;\r\n              }}\r\n            />\r\n            <span className=\"titleLoad\">\r\n              {this.props.language === \"en\" ? \"Load\" : \"Ouvrir\"}\r\n            </span>\r\n          </label>\r\n          {emailAllowed && (\r\n            <input\r\n              className=\"titleButtons\"\r\n            //  style={style2}\r\n              onClick={this.props.EmailINA}\r\n              type=\"button\"\r\n              value={this.props.language === \"en\" ? \"e-mail\" : \"e-mail\"}\r\n              id=\"email\"\r\n            />\r\n          )}\r\n          <input\r\n            className=\"titleButtons\"\r\n          //  style={style3}\r\n            onClick={(event) => {\r\n              this.saveDefault();\r\n            }}\r\n            type=\"button\"\r\n            ref={this.default}\r\n            value={\r\n              this.defaultButton\r\n            }\r\n            id=\"default\"\r\n          />\r\n          <input\r\n            className=\"titleButtons\"\r\n          //  style={style4}\r\n            onClick={(event) => {\r\n              this.props.loadStorage();\r\n              hideRecover();\r\n            }}\r\n            type=\"button\"\r\n            ref={this.last}\r\n            value={this.props.language === \"en\" ? \"Recover\" : \"Rcuprer\"}\r\n            id=\"last\"\r\n          />\r\n\r\n          {/*<input className=\"titleButtons\" onClick={this.EmailINA} style={{right: '130px'}} type=\"button\" value={this.props.language=== \"en\"?\"Email\":\"Email\"} />*/}\r\n        </span>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","module.exports = __webpack_public_path__ + \"static/media/INA.07a8e16f.png\";","module.exports = __webpack_public_path__ + \"static/media/estate.protection.applet.cover.graphic.d3f3dbc3.png\";","import React, { Component } from \"react\";\r\nimport { cleanFormat } from \"../utils/helper\";\r\nimport { Info } from \"./Info\";\r\n\r\nexport class InputField extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      inputValue: this.toFormat(this.props.inputValue),\r\n      isEditing: false,\r\n    };\r\n    \r\n    /* this.infoIcon= this.props.infoIcon === undefined? \r\n\t\t{\r\n\t\t\tmsg: \"\",\r\n\t\t\ticonAlert: false,\r\n      checkInfo: false,\r\n      popupRight:false,\r\n\t\t\tidM: 0\r\n\t\t} : {\r\n\t\t\tmsg: this.props.infoIcon.infoText,\r\n\t\t\ticonAlert: this.props.infoIcon.infoAlert,\r\n      checkInfo: this.props.infoIcon.showInfoIcon,\r\n      popupRight: this.props.infoIcon.popupRight,\r\n\t\t\tidM: this.props.infoIcon.infoID\r\n\t\t} */\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (nextProps.inputValue !== this.props.inputValue) {\r\n      this.setState({ inputValue: this.toFormat(nextProps.inputValue) });\r\n    }\r\n  }\r\n\r\n  updateInputValue(evt) {\r\n    //  const input = this.getInut(evt);\r\n    this.setState({ inputValue: evt.target.value }); // input });\r\n  }\r\n\r\n  getInut = (evt) => {\r\n    var input;\r\n    let chkNum;\r\n    const value = evt.target.value;\r\n    \r\n    /* if (\r\n      this.props.language === \"fr\" &&\r\n      this.props.format === 3 \r\n    )\r\n      chkNum = cleanFormat(value, true, lang);\r\n    else */ \r\n    chkNum = cleanFormat(value, this.props.language);\r\n\r\n    if (\r\n      (isNaN(chkNum.replace(\",\", \".\")) || value === \"\") &&\r\n      !(\r\n        value.toString()[value.toString().length - 1] === \".\" ||\r\n        value.toString()[value.toString().length - 1] === \",\"\r\n      )\r\n    )\r\n      input = value.substring(0, value.length - 1);\r\n    else input = chkNum;\r\n\r\n    const max =\r\n      this.props.format === 2\r\n        ? this.props.maxValue === undefined\r\n          ? 1000000000\r\n          : this.props.maxValue\r\n        : this.props.maxValue === undefined\r\n        ? 100\r\n        : this.props.maxValue;\r\n\r\n    if (input > max) input = max;\r\n    const min = this.props.minValue === undefined ? 0 : this.props.minValue;\r\n\r\n    if (input < min) input = min;\r\n  \r\n    return input;\r\n  };\r\n\r\n  afterStateUpdate() {\r\n    //this.props.handleUpdateInput(this.props.inputName, this.state.inputValue);\r\n    this.props.handleUpdateInput(this.props.id, this.state.inputValue);\r\n  }\r\n\r\n  handleFocus = (event) => {\r\n    if (navigator.userAgent.match(/Edge\\/(13|14|15|16|17)/)) {\r\n      //\treturn setTimeout( event.target.select.bind( event.target ), 1)\r\n    } else event.target.select();\r\n  };\r\n\r\n  selectField = (event) => {\r\n    if (navigator.userAgent.match(/Edge\\/(13|14|15|16|17)/)) {\r\n      event.target.setSelectionRange(0, event.target.value.length);\r\n    }\r\n  };\r\n  onMouseUpSelect = (event) => {\r\n    if (/iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream) {\r\n      event.target.select();\r\n    }\r\n  };\r\n\r\n  handleFocusIOS = (event) => {\r\n    event.target.value = cleanFormat(event.target.value, this.props.language);\r\n  };\r\n\r\n  toFormat(number) {\r\n    let formatter;\r\n    const lang = this.props.language;\r\n    /* if ((lang === \"fr\" || global.langFr) && this.props.format === 3)\r\n      number = cleanFormat(number, true); \r\n    else */\r\n    number = cleanFormat(number, lang);\r\n\r\n    if (isNaN(number) || number === \"\") number = 0;\r\n    if (this.props.format === 2) {\r\n      formatter =\r\n        (lang === \"fr\" ? \"\" : \"$\") +\r\n        new Intl.NumberFormat(lang).format(parseInt(number));\r\n    } else if (this.props.format === 3) {\r\n      if (lang === \"fr\") {\r\n        formatter =\r\n          number.toString()[number.toString().length - 1] === \".\"\r\n            ? parseFloat(number) + \",\"\r\n            : parseFloat(number);\r\n        formatter = formatter.toString().replace(\".\", \",\");\r\n      } else\r\n        formatter =\r\n          number.toString()[number.toString().length - 1] === \".\"\r\n            ? parseFloat(number) + \".\"\r\n            : parseFloat(number);\r\n    } else formatter = parseInt(number);\r\n    return formatter;\r\n  }\r\n\r\n  toggleEditing = (e) => {\r\n    /* e.target.value=this.toFormat(e.target.value);\t\t\r\n\t\t\t\tif(this.props.format === 3)e.target.value+=\"%\"; */\r\n    let input = this.getInut(e);\r\n    input = this.toFormat(input);\r\n    this.setState({ inputValue: input, isEditing: !this.state.isEditing }, () =>\r\n      this.afterStateUpdate()\r\n    );\r\n    //\tthis.props.handleUpdateInput(this.props.id, this.state.inputValue);\r\n  };\r\n\r\n  getValue = (value) => {\r\n    const dec = value.toString().indexOf(\".\");\r\n    const first = value.toString()[0];\r\n\r\n    if (first === 0 && dec === -1)\r\n      return (\r\n        parseFloat(100 * value.toString().slice(1, value.toString().length)) /\r\n        100\r\n      );\r\n    else return parseFloat(100 * value) / 100;\r\n  };\r\n\r\n  selectText = () => {\r\n    var s = this.refs.InputTxt.value;\r\n    if (s.length) {\r\n      window.setTimeout(function () {\r\n        this.refs.InputTxt.setSelectionRange(s.length - 1, s.length);\r\n      }, 0);\r\n    }\r\n  };\r\n\r\n  getRidOfZerosAfterDecimal = (displayValue) => {\r\n    const decimalPos = displayValue.indexOf(\".\");\r\n    if (decimalPos >= 0) {\r\n      if (displayValue.length >= decimalPos + 3)\r\n        // 2 decimals max\r\n        displayValue = displayValue.substring(0, decimalPos + 3);\r\n      // get rid of zeros\r\n      while (\r\n        displayValue.slice(-1) === \"0\" &&\r\n        displayValue.length > decimalPos + 3\r\n      ) {\r\n        displayValue = displayValue.substring(0, displayValue.length - 1);\r\n      }\r\n    }\r\n\r\n    return displayValue;\r\n  };\r\n\r\n  render() {\r\n    let displayValue =\r\n      this.state.inputValue !== undefined\r\n        ? this.state.inputValue.toString()\r\n        : \"\";\r\n    if (displayValue.indexOf(\".\") >= 0)\r\n      displayValue = this.getRidOfZerosAfterDecimal(displayValue);\r\n    //  displayValue=parseFloat(displayValue).toFixed(2);\r\n\r\n    const title = this.props.inputName; //  this.props.Count === 1 ? this.state.inputName : this.state.inputName;\r\n    const disable = this.props.readOnly ? true : false;\r\n    let styleClass = disable ? \"inputField inputFieldDisabled\" : \"inputField\";\r\n    styleClass += this.props.language === \"fr\" ? \" inputFieldFrench\" : \"\";\r\n    const styleClass2 =\r\n      styleClass +\r\n      (this.props.format === 3 ||\r\n      (this.props.format === 2 && this.props.language === \"fr\")\r\n        ? \" percentField\"\r\n        : \"\");\r\n\r\n    let divStyleClass = \"dropDown inputDiv\";\r\n    divStyleClass += this.props.language === \"fr\" ? \" inputDivFrench\" : \"\";\r\n\r\n    let inputColorStyle =\r\n      this.props.colorDiv === undefined\r\n        ? {}\r\n        : { border: \"1px solid \" + this.props.colorDiv };\r\n\r\n    //iOS=false;\r\n    var iOS2 = false;\r\n\r\n    if (\r\n      this.props.info !== undefined &&\r\n      (this.props.showInfo === true || this.props.showInfo === undefined)\r\n    ) {\r\n    }\r\n    //\tlet st1=this.props.format===3?\"styleClass st1percentField\":\"\";\r\n    let perc = this.props.format === 3;\r\n    const style = (this.props.titleColour===undefined || this.props.titleColour===\"\")?{}:{color:this.props.titleColour}\r\n\r\n    if (this.props.language === \"fr\" && this.props.format === 2) {\r\n      return (\r\n        <div\r\n          className={divStyleClass}\r\n          french={this.props.language === \"en\" ? \"true\" : \"false\"}\r\n        >\r\n          <div className=\"controlTitle\" style={style}>\r\n            {title}\r\n            {/*  {checkInfo === true ? (\r\n              <Info id={idM} msg={msg} infoPosition={this.props.infoPosition} />\r\n            ) : (\r\n              \"\"\r\n            )} */}\r\n            {this.props.infoIcon !== undefined ? (\r\n              <Info infoIcon={this.props.infoIcon} /> //id={this.props.infoIcon.infoID} msg={this.props.infoIcon.infoText}  popupRight={this.props.infoIcon.popupRight}  iconName={this.props.infoIcon.infoAlert? \"infoRed.png\":\"info.png\"} />\r\n            ) : (\r\n              \"\"\r\n            )}\r\n          </div>\r\n          {/*{iOS ? <input type=\"number\" inputmode=\"numeric\" pattern=\"\\d*\"  min=\"0\" max={max} step={step} className={styleClass} isDisabled={disable} onFocus={this.handleFocus} onClick={this.select} value={this.getValue(displayValue)} onChange={evt => this.updateInputValue(evt)} onBlur={this.toggleEditing.bind(this)} />*/}\r\n          {iOS2 ? (\r\n            \"\" //<input type=\"text\" inputmode=\"decimal\" min=\"0.0\" max={max} step={step} className={styleClass} isDisabled={disable} onFocus={this.handleFocus} onClick={this.select} value={displayValue} onChange={evt => this.updateInputValue(evt)}  />\r\n          ) : (\r\n            <div className={styleClass}>\r\n              <span>\r\n                <input\r\n                  type=\"text\"\r\n                  className={styleClass2}\r\n                  style={{ paddingTop: \"0px\", width: \"86%\" }}\r\n                  inputMode=\"decimal\"\r\n                  disabled={disable}\r\n                  value={displayValue}\r\n                  autoFocus\r\n                  onFocus={(e) => this.handleFocus(e)}\r\n                  onMouseUp={this.onMouseUpSelect}\r\n                  onClick={this.selectField}\r\n                  onChange={(evt) => this.updateInputValue(evt)}\r\n                  onBlur={this.toggleEditing.bind(this)}\r\n                />\r\n                <label\r\n                  style={{\r\n                    display: \"inline-block\",\r\n                    float: \"left\",\r\n                    width: \"3%\",\r\n                  }}\r\n                >\r\n                  $\r\n                </label>\r\n              </span>\r\n            </div>\r\n          )}\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div\r\n          className={divStyleClass}\r\n          french={this.props.language === \"en\" ? \"true\" : \"false\"}\r\n        >\r\n         <div className=\"controlTitle\" style={style}>\r\n            {title}\r\n            {/*  {checkInfo === true && (\r\n              <Info id={idM} msg={msg} infoPosition={this.props.infoPosition}/>\r\n            )} */}\r\n            {this.props.infoIcon !== undefined ? (\r\n              <Info infoIcon={this.props.infoIcon} /> // id={this.props.infoIcon.infoID} msg={this.props.infoIcon.infoText} popupRight={this.props.infoIcon.popupRight} iconName={this.props.infoIcon.infoAlert? \"infoRed.png\":\"info.png\"} />\r\n            ) : (\r\n              \"\"\r\n            )}\r\n          </div>\r\n          {/*{iOS ? <input type=\"number\" inputmode=\"numeric\" pattern=\"\\d*\"  min=\"0\" max={max} step={step} className={styleClass} isDisabled={disable} onFocus={this.handleFocus} onClick={this.select} value={this.getValue(displayValue)} onChange={evt => this.updateInputValue(evt)} onBlur={this.toggleEditing.bind(this)} />*/}\r\n          {iOS2 ? (\r\n            \"\" //<input type=\"text\" inputmode=\"decimal\" min=\"0.0\" max={max} step={step} className={styleClass} isDisabled={disable} onFocus={this.handleFocus} onClick={this.select} value={displayValue} onChange={evt => this.updateInputValue(evt)}  />\r\n          ) : (\r\n            <div>\r\n              {perc === false ? (\r\n                <div>\r\n                  <input\r\n                    style={inputColorStyle}\r\n                    type=\"text\"\r\n                    key=\"if\"\r\n                    className={styleClass}\r\n                    inputMode=\"decimal\"\r\n                    disabled={disable}\r\n                    value={displayValue}\r\n                    onFocus={(e) => this.handleFocus(e)}\r\n                    onClick={this.selectField}\r\n                    onMouseUp={this.onMouseUpSelect}\r\n                    onChange={(evt) => this.updateInputValue(evt)}\r\n                    onBlur={this.toggleEditing.bind(this)}\r\n                  />\r\n                </div>\r\n              ) : (\r\n                <div className={styleClass}>\r\n                  {/* <div className=\"percentDiv\"> */}\r\n                  <span>\r\n                    <input\r\n                      type=\"text\"\r\n                      key=\"if1\"\r\n                      className={styleClass2}\r\n                      style={{ paddingTop: \"0px\", width: \"86%\" }}\r\n                      inputMode=\"decimal\"\r\n                      disabled={disable}\r\n                      value={displayValue}\r\n                      onFocus={(e) => this.handleFocus(e)}\r\n                      onMouseUp={this.onMouseUpSelect}\r\n                      onClick={this.selectField}\r\n                      onChange={(evt) => this.updateInputValue(evt)}\r\n                      onBlur={this.toggleEditing.bind(this)}\r\n                    />\r\n                    <label\r\n                      style={{\r\n                        display: \"inline-block\",\r\n                        float: \"left\",\r\n                        width: \"3%\",\r\n                      }}\r\n                    >\r\n                      %\r\n                    </label>\r\n                  </span>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n}\r\n","import { version } from \"../../package.json\";\r\nimport {\r\n  GROWTHDIR,\r\n  MEMBER,\r\n  LIABILITIES,\r\n  APPLET_EP,\r\n  APPLET_INA,\r\n} from \"../definitions/generalDefinitions\";\r\nimport XLSX from \"xlsx\";\r\nimport React from \"react\";\r\nimport { fetchMCCData, fetchAssetProjection2 } from \"../utils/FetchAPIs\";\r\nimport { readMCCData } from \"../data/dataExchangeMCC\";\r\nimport {\r\n  ASSET_API_OUTPUT_TaxPayable,\r\n  QUOTE_CLIENT,QUOTE_SPOUSE\r\n} from \"../definitions/generalDefinitions\";\r\nimport { OUTPUTTEXT } from \"../definitions/outputDefinitions\";\r\nimport { OUTPUTTEXTEP } from \"../definitions/outputDefinitionsEP\";\r\nimport {\r\n  DISPLAY_RETIREMENT,\r\n  DISPLAY_LIFEEXP,\r\n  DISPLAY_ENDAGE,\r\n  DISPLAY_LIFEEXP_PLUS_3,\r\n  DISPLAY_ANALYSIS,\r\n  OUTPUT_WIDTH_PCT,\r\n  IMAGE_LOGO_OTHERPAGES,\r\n  IMAGE_LOGO,\r\n  IMAGE_APPLET_INA,\r\n  IMAGE_APPLET_EP,\r\n  TITLES\r\n} from \"../definitions/generalDefinitions\";\r\nimport { AdjustibleImage } from \"../components/AdjustibleImage\";\r\nimport { MAX_LOGO_HEIGHT, PAGE_HEIGHT } from \"../components/PDF\";\r\nimport { getMessages } from \"validatorjs\";\r\n\r\nglobal.langFr =\r\n  (\r\n    (navigator.languages && navigator.languages[0]) ||\r\n    navigator.language ||\r\n    navigator.userLanguage\r\n  )\r\n    .toString()\r\n    .indexOf(\"fr\") >= 0;\r\n\r\nexport function cleanFormat(value, lang) {\r\n  if (value !== null) {\r\n    if (value !== undefined) {\r\n      if(lang===undefined) lang=\"en\"\r\n      if (!EngToFrConversion(value) && lang===\"fr\")\r\n        return value\r\n          .toString()\r\n          .replace(\",\", \".\")\r\n          .replace(\"$\", \"\")\r\n          .replace(\"%\", \"\")\r\n          .replace(/ /g, \"\")\r\n          .replace(\" \", \"\")\r\n          .replace(\r\n            /[\\u00A0\\u1680\\u180e\\u2000-\\u2009\\u200a\\u200b\\u202f\\u205f\\u3000]/g,\r\n            \"\"\r\n          );\r\n      else\r\n        return value\r\n          .toString()\r\n          .replace(/,/g, \"\")\r\n          .replace(\"$\", \"\")\r\n          .replace(\"%\", \"\")\r\n          .replace(/ /g, \"\")\r\n          .replace(\" \", \"\")\r\n          .replace(\r\n            /[\\u00A0\\u1680\\u180e\\u2000-\\u2009\\u200a\\u200b\\u202f\\u205f\\u3000]/g,\r\n            \"\"\r\n          );\r\n    }\r\n  }\r\n}\r\n\r\nfunction EngToFrConversion(amt){\r\n  let nSeperator=amt.toString().search(\",\");\r\n  if( nSeperator <0)\r\n    return false\r\n  else\r\n  {\r\n    let s1= amt;   \r\n    while (nSeperator >=0)\r\n    {\r\n      s1= s1.toString().substring(nSeperator+1, parseInt(s1.length));\r\n      nSeperator=s1.toString().search(\",\");\r\n      \r\n    }\r\n    if (s1.length>=3) \r\n      return true\r\n    else\r\n      return false\r\n  \r\n}\r\n}\r\n\r\nexport function isMobileDevice() {\r\n  return (\r\n    typeof window.orientation !== \"undefined\" ||\r\n    navigator.userAgent.indexOf(\"IEMobile\") !== -1\r\n  );\r\n}\r\n\r\nexport function numFormat(v, bInput, mode, seperator,decimalChar) {\r\n   var v1;\r\n  var v2;\r\n  var v3;\r\n\r\n  \r\n  var formatted;\r\n  const lang=decimalChar===\".\" || decimalChar=== undefined ? \"en\":\"fr\";\r\n  //const seperator = this.props.language === \"en\" ? \",\" : \" \";\r\n  //console.log(v);\r\n  if (typeof v !== \"undefined\") {\r\n    //console.log(v);\r\n    v = cleanFormat(v, lang);\r\n    if (mode !== 3) v = parseInt(v).toFixed(0);\r\n\r\n    if (mode === 3 && bInput) {\r\n      if (v[v.length - 1] === \".\") v = v.substring(0, v.length - 1);\r\n      else {\r\n        if (v.length > 1) v = (v * 10).toFixed(2);\r\n        if (v > 100) v = (v / 10).toFixed(2);\r\n      }\r\n    }\r\n\r\n    //console.log(v);\r\n    v1 = get1000(v);\r\n    v2 = get1000((v - v1) / 1000);\r\n    v3 = parseInt((v - v1 - 1000 * v2) / 1000000);\r\n\r\n    if (v2 > 0 || v3 > 0) {\r\n      v = v2 + seperator + (v1 > 99 ? v1 : v1 > 10 ? \"0\" + v1 : \"00\" + v1);\r\n      if (v3 > 0)\r\n        v =\r\n          v3 +\r\n          seperator +\r\n          (v2 > 99 ? v2 : v2 > 10 ? \"0\" + v2 : \"00\" + v2) +\r\n          seperator +\r\n          (v1 > 99 ? v1 : v1 > 10 ? \"0\" + v1 : \"00\" + v1);\r\n    }\r\n    \r\n    if (mode === 3) {\r\n      if (\r\n        /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\r\n          navigator.userAgent\r\n        )\r\n      )\r\n        formatted = parseFloat(Math.round(v * 100) / 100).toFixed(2);\r\n      else {\r\n        formatted = parseFloat(\r\n          Math.round(100 * v) / 100 / (v.length === 1 && bInput ? 100 : 1)\r\n        ); // + '%';\r\n        formatted = formatted > 100 ? 100 : formatted;\r\n        formatted = formatted.toFixed(2) + \"%\";\r\n        if(decimalChar!==undefined){\r\n          if(formatted.includes(\".\"))formatted=formatted.replace(\".\",decimalChar)\r\n        }\r\n      }\r\n    } else if (mode === 4) {\r\n      formatted =\r\n        25 * parseInt(parseFloat(Math.round(v * 100) / 100).toFixed(0) / 25);\r\n      if (formatted < 100) formatted = 100;\r\n      if (formatted > 400) formatted = 400;\r\n      if (\r\n        /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\r\n          navigator.userAgent\r\n        )\r\n      )\r\n        formatted = formatted;\r\n      else formatted = formatted + \"%\";\r\n    } else if (mode === 2) formatted = \"$\" + v;\r\n    else formatted = v;\r\n  }\r\n  if (isNaN(cleanFormat(formatted, lang))) formatted = 0;\r\n  return formatted;\r\n}\r\n\r\n//valueChanged = (num, mode) => {\r\n//\tlet seperator = this.props.language === \"en\" ? \",\" : \" \";\r\n//\tvar v = num.value.replace('$', '').replace('%', '').replace(seperator, '');\r\n//\tnum.value = this.numFormat(v);\r\n//}\r\n\r\n\r\nfunction get1000(num) {\r\n  return parseFloat(num) - 1000 * parseInt(num / 1000);\r\n}\r\n\r\n\r\nexport function formatMoney(amount, decimalCount, decimal, thousands) {\r\n  try {\r\n    const lang=decimal===\".\" || decimal=== undefined ? \"en\":\"fr\";\r\n\r\n    cleanFormat(amount, lang);\r\n    decimalCount = Math.abs(decimalCount);\r\n    decimalCount = isNaN(decimalCount) ? 2 : decimalCount;\r\n\r\n    const negativeSign = amount < 0 ? \"-\" : \"\";\r\n\r\n    let i = parseFloat(\r\n      (amount = Math.abs(Number(amount) || 0).toFixed(decimalCount))\r\n    ).toString();\r\n\r\n    let j = i.length > 3 ? i.length % 3 : 0;\r\n\r\n    return (\r\n      negativeSign +\r\n      (j ? i.substr(0, j) + thousands : \"\") +\r\n      i.substr(j).replace(/(\\d{3})(?=\\d)/g, \"$1\" + thousands) +\r\n      (decimalCount\r\n        ? decimal +\r\n          Math.abs(amount - i)\r\n            .toFixed(decimalCount)\r\n            .slice(2)\r\n        : \"\")\r\n    );\r\n  } catch (e) {\r\n    //\tconsole.log(e);\r\n  }\r\n}\r\n\r\nexport function formatMoney2(amount, decimalCount, lang, dollarSign) {\r\n  const decimalChar = lang === \"en\" ? \".\" : \",\";\r\n  const thousands = lang === \"en\" ? \",\" : \" \";\r\n // const formatFr = lang === \"fr\" ? true : false;\r\n\r\n  try {\r\n    cleanFormat(amount, lang);\r\n    decimalCount = Math.abs(decimalCount);\r\n    decimalCount = isNaN(decimalCount) ? 2 : decimalCount;\r\n\r\n    const negativeSign = amount < 0 ? \"-\" : \"\";\r\n\r\n    let i = parseFloat(\r\n      (amount = Math.abs(Number(amount) || 0).toFixed(decimalCount))\r\n    ).toString();\r\n\r\n    let j = i.length > 3 ? i.length % 3 : 0;\r\n\r\n    const returnValue = (\r\n      negativeSign +\r\n      (lang === \"en\" && dollarSign ? \"$\" : \"\") +\r\n      (j ? i.substr(0, j) + thousands : \"\") +\r\n      i.substr(j).replace(/(\\d{3})(?=\\d)/g, \"$1\" + thousands) +\r\n      (decimalCount\r\n        ? decimalChar +\r\n          Math.abs(amount - i)\r\n            .toFixed(decimalCount)\r\n            .slice(2)\r\n        : \"\") +\r\n      (lang === \"fr\" && dollarSign ? \" $\" : \"\")\r\n    ).toString();\r\n\r\n    return returnValue;\r\n  } catch (e) {\r\n    //\tconsole.log(e);\r\n  }\r\n}\r\n\r\nexport function arrayFormatMoney(array, language, noOfDecimals) {\r\n  let arrayFormatted = [];\r\n\r\n  for (let i = 0; i < array.length; i++) {\r\n    arrayFormatted[i] = formatMoney2(\r\n      array[i],\r\n      noOfDecimals,\r\n      language,\r\n      false\r\n      /* decimalChar,\r\n      thousands */\r\n    );\r\n  }\r\n  // console.log(arrayFormatted,array)\r\n  return arrayFormatted;\r\n}\r\n\r\nexport function clearListCookies() {\r\n  // console.log(document.cookie);\r\n  var cookies = document.cookie.split(\";\");\r\n  for (var i = 0; i < cookies.length; i++) {\r\n    var spcook = cookies[i].split(\"=\");\r\n    deleteCookie(spcook[0]);\r\n  }\r\n  function deleteCookie(cookiename) {\r\n    var d = new Date();\r\n    d.setDate(d.getDate() - 1);\r\n    var expires = \";expires=\" + d;\r\n    var name = cookiename;\r\n    var value = \"\";\r\n    document.cookie = name + \"=\" + value + \"; \" + expires + \"; path=/acc/html\";\r\n  }\r\n  localStorage.clear();\r\n  //window .location = \"\"; // TO REFRESH THE PAGE\r\n}\r\n\r\nexport function isVersion2019() {\r\n  const ver = version;\r\n  let verNo = 0;\r\n  let inS = ver.indexOf(\".\");\r\n  verNo = ver.substring(0, inS);\r\n  let verS = num(Number(verNo));\r\n  let inS2 = ver.indexOf(\".\", inS + 1);\r\n  verNo = ver.substring(inS + 1, inS2);\r\n  verS += num(Number(verNo));\r\n  verNo = ver.substring(inS2 + 1, ver.length);\r\n  verS += num(Number(verNo));\r\n  \r\n  return Number(verS) <= 10002;\r\n}\r\n\r\nexport function versionDetails() {\r\n  const ver = version;\r\n  let verNo = 0;\r\n  let inS = ver.indexOf(\".\");\r\n  verNo = ver.substring(0, inS);\r\n  let verS = num(Number(verNo));\r\n  let inS2 = ver.indexOf(\".\", inS + 1);\r\n  verNo = ver.substring(inS + 1, inS2);\r\n  verS += num(Number(verNo));\r\n  verNo = ver.substring(inS2 + 1, ver.length);\r\n  verS += num(Number(verNo));\r\n  let versionNumeric = Number(verS);\r\n\r\n  // 1.0.4\r\n  let allowEmail = false;\r\n  let saveEncrypt = versionNumeric >= 10003 ? true : false;\r\n  let allowAnalysis = versionNumeric > 10004 ? true : false;\r\n  // 1.0.5\r\n  allowEmail = true;\r\n  saveEncrypt = true;\r\n  allowAnalysis = true;\r\n  let verDetails = {\r\n    version: ver,\r\n    versionNumeric: versionNumeric,\r\n    allowEmail: allowEmail,\r\n    saveEncrypt: saveEncrypt,\r\n    allowAnalysis: allowAnalysis,\r\n  };\r\n  // 1.0.6\r\n  allowEmail = true;\r\n  saveEncrypt = true;\r\n  allowAnalysis = false;\r\n  verDetails = {\r\n    version: ver,\r\n    versionNumeric: versionNumeric,\r\n    allowEmail: allowEmail,\r\n    saveEncrypt: saveEncrypt,\r\n    allowAnalysis: allowAnalysis,\r\n  };\r\n  return verDetails;\r\n}\r\n\r\nfunction num(n) {\r\n  return n > 9 ? \"\" + n : \"0\" + n;\r\n}\r\n\r\n/* 16\r\n */\r\n/* \r\nexport function INAAssetSpreadsheetData(asset, taxRate, Spouse, inflation,language) {\r\n  let dataColumns = [];\r\n  let dataColumn = [];\r\n  let noYrs = 100 - Spouse.Age;\r\n\r\n  let i;\r\n  let j;\r\n\r\n  for (i = 0; i < 4; i++) {\r\n    dataColumn = [];\r\n    for (j = 0; j < noYrs; j++) {\r\n      if (i === 0) dataColumn.push(1 + j);\r\n      else if (i === 1) dataColumn.push(Spouse.Age + j);\r\n      else if (i === 2)\r\n        dataColumn.push(numFormat(asset.currValue * 1.03,   language===\"en\"?false:true, 2, language===\"en\"?\",\":\" \"));\r\n      else if (i === 3)\r\n        dataColumn.push(\r\n          numFormat(\r\n            (asset.currValue * 1.03 - asset.ACB) * taxRate,\r\n            language===\"en\"?false:true, 2, language===\"en\"?\",\":\" \"\r\n          )\r\n        );\r\n    }\r\n    dataColumns.push(dataColumn);\r\n    dataColumn = [];\r\n  }\r\n\r\n  //console.log(dataColumns);\r\n  return dataColumns;\r\n}\r\n */\r\nexport function handleCSVDownload2() {\r\n  var de = document.getElementById(\"DExcel\");\r\n  de.setAttribute(\"downloadNow\", \"1\");\r\n}\r\n\r\nexport function handleCSVDownload(data, columns) {\r\n  const CSVHead =\r\n    columns\r\n      .reduce((soFar, column) => soFar + '\"' + column.name + '\",', \"\")\r\n      .slice(0, -1) + \"\\r\\n\";\r\n  const CSVBody = data\r\n    .reduce((soFar, row) => soFar + '\"' + row.data.join('\",\"') + '\"\\r\\n', [])\r\n    .trim();\r\n\r\n  /* taken from react-csv */\r\n  const csv = `${CSVHead}${CSVBody}`;\r\n  const blob = new Blob([csv], { type: \"text/csv\" });\r\n  const dataURI = `data:text/csv;charset=utf-8,${csv}`;\r\n\r\n  const URL = window.URL || window.webkitURL;\r\n  const downloadURI =\r\n    typeof URL.createObjectURL === \"undefined\"\r\n      ? dataURI\r\n      : URL.createObjectURL(blob);\r\n\r\n  let link = document.createElement(\"a\");\r\n  link.setAttribute(\"href\", downloadURI);\r\n  link.setAttribute(\"download\", \"tableDownload.csv\");\r\n  /* document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link); */\r\n  const workbook = XLSX.utils.book_new();\r\n  workbook.SheetNames.push(\"T1\");\r\n  var d = [[\"hey\", \"goh\"]];\r\n  var v = XLSX.utils.aoa_to_sheet(d);\r\n  workbook.Sheets[\"T1\"] = v;\r\n  const worksheet = XLSX.utils.aoa_to_sheet(\r\n    [columns.map((r) => r.name)].concat(data.map((r) => r.data))\r\n  );\r\n\r\n  //\tworksheet.cells(10,10).value=3333333\r\n  XLSX.utils.book_append_sheet(workbook, worksheet, \"Tabela Exportada\");\r\n  XLSX.writeFile(workbook, \"TabelaExportada.xls\", { compression: true });\r\n}\r\n\r\nexport function INAMCCQuote() {\r\n  let MCC = async function (input, insuranceNeed) {\r\n    const minPrem = await getMCCQuoteOutput1(input, insuranceNeed);\r\n    const MCCData = await getMCCQuoteOutput2(input, insuranceNeed, minPrem);\r\n    // console.log(minPrem);\r\n    return MCCData;\r\n  };\r\n\r\n  // console.log(MCC);\r\n  return MCC;\r\n}\r\n\r\n\r\n/* function getMCCQuoteOutput(){\r\n  \t\treturn Promise.all([getMCCQuoteOutput1(),getMCCQuoteOutput2()])\r\n\t} */\r\n\r\nfunction getMCCQuoteOutput1(input, insuranceNeed) {\r\n  let quotePlanID = 48;\r\n  let quoteClient = 1; //\r\n  let dataMCC = readMCCData(input, quotePlanID, quoteClient, insuranceNeed);\r\n\r\n  //let dataAPISite = \"http://localhost:8082\";\r\n  fetchMCCData(dataMCC, insuranceNeed).then((data) => {\r\n    // console.log(data[0]);\r\n    if (data[0][1] !== undefined) {\r\n      console.log(\"POST: MCC_OutputArrays success\");\r\n      return data[0];\r\n    }\r\n  });\r\n}\r\n\r\nfunction getMCCQuoteOutput2(input, insuranceNeed, minPrem) {\r\n  let dataDB = [];\r\n  let quotePlanID = 48;\r\n  let quoteClient = 1; //\r\n  //let dataAPISite = \"http://localhost:8082\";\r\n  let dataMCC = readMCCData(input, quotePlanID, quoteClient, insuranceNeed);\r\n\r\n  dataMCC.policy.objPremium.PremSet = true;\r\n  dataMCC.policy.objPremium.PremSetAmt = minPrem;\r\n  dataMCC.policy.objPremium.PremSetDur = 19;\r\n  dataMCC.policy.objPremium.PremSolve = false;\r\n  fetchMCCData(dataMCC, insuranceNeed).then((data) => {\r\n    //console.log(data[0]);\r\n    if (data[0][1] !== undefined) {\r\n      //console.log(\"POST: MCC_OutputArrays success\");\r\n      dataDB = data[0][3].Values.map((x) => parseInt(cleanFormat(x)));\r\n      dataDB.unshift(parseInt(cleanFormat(insuranceNeed)));\r\n      return dataDB;\r\n    }\r\n  });\r\n}\r\n\r\nexport function getProjectedLiabilities(dataInput, years, probate) {\r\n  let i;\r\n  let j;\r\n  var totalLiabProjections = [];\r\n  for (i = 0; i < years; ++i) totalLiabProjections.push(0);\r\n  // add probate seperately\r\n  for (j = 0; j < dataInput.Liabilitys.length; j++) {\r\n    if (dataInput.Liabilitys[j].liabTypeKey!==LIABILITIES.PROBATE.Key)\r\n    {\r\n      const liabProj = getProjectedLiability(dataInput.Liabilitys[j]);\r\n      for (i = 0; i < Math.min(years, liabProj.length); ++i)\r\n        totalLiabProjections[i] += liabProj[i];\r\n    }\r\n  }\r\n  //console.log(probate.numericValues,years, probate.length)\r\n  // add probate\r\n  if(probate!==undefined)\r\n  {\r\n    for (i = 0; i < Math.min(years, probate.numericValues.length); ++i)\r\n    totalLiabProjections[i] += probate.numericValues[i];\r\n   // console.log(probate.numericValues[i],totalLiabProjections[i])\r\n  }\r\n\r\n  return totalLiabProjections;\r\n}\r\n\r\nexport function getProjectedLiability(liability,probate) {\r\n  let i;\r\n  var totalLiab = 0;\r\n  var totalLiabProjections = [];\r\n\r\n  if (\r\n    liability.liabTypeKey === LIABILITIES.OUTSTANDING_LOANS.Key ||\r\n    liability.liabTypeKey === LIABILITIES.MORTGAGE_REDEMPTION.Key\r\n  ) {\r\n    let amt = liability.currValue;\r\n    totalLiabProjections.push(Math.round(amt));\r\n    liability.growth = getLoanBalance(\r\n      liability.currValue,\r\n      liability.exposureDur,\r\n      liability.repay\r\n    );\r\n    //console.log(liability.growth);\r\n    for (i = 0; i < liability.exposureDur; ++i) {\r\n      amt = (amt - liability.repay) * (1 + liability.growth);\r\n      totalLiabProjections.push(Math.round(amt));\r\n    }\r\n  } else if (liability.liabTypeKey === LIABILITIES.CLIENT_TAX_LIABILITY.Key) {\r\n    //console.log(liability.assetTaxLiabProj)\r\n    let amt = liability.currValue;\r\n    totalLiabProjections.push(Math.round(amt));\r\n    for (i = 1; i < liability.exposureDur; ++i) {\r\n      amt = liability.assetTaxLiabProj[i];\r\n      totalLiabProjections.push(Math.round(amt));\r\n    }\r\n  } else if (liability.liabTypeKey === LIABILITIES.PROBATE.Key) {\r\n    if (probate ===undefined){\r\n      for (i = 0; i < liability.exposureDur; ++i) {\r\n        const amt = i < liability.exposureDur ? liability.currValue : 0;\r\n        totalLiab = amt;\r\n        totalLiabProjections.push(totalLiab);\r\n      }  \r\n    }\r\n    else\r\n      {\r\n        for (i = 0; i < liability.exposureDur; ++i) {\r\n        totalLiab = probate.numericValues[i];\r\n        totalLiabProjections.push(totalLiab);\r\n      }\r\n    }\r\n  } else {\r\n    for (i = 0; i < liability.exposureDur; ++i) {\r\n      const amt = i < liability.exposureDur ? liability.currValue : 0;\r\n      const change =\r\n        //liability.growthDir === GROWTHDIR[lang].Values[0]\r\n        liability.growthDirKey === GROWTHDIR.GROWS.Key\r\n          ? liability.growth / 100\r\n          : -liability.growth / 100;\r\n      totalLiab = amt * Math.pow(1 + change, i);\r\n      totalLiabProjections.push(totalLiab);\r\n    }\r\n  }\r\n\r\n  return totalLiabProjections;\r\n}\r\n\r\nfunction getLoanBalance(currValue, exposureDur, repay) {\r\n  //console.log(currValue,exposureDur,repay)\r\n  let rate = 0.1;\r\n  let dU = 0.2;\r\n  let dL = 0; //-.1111111;\r\n  let dBal = 1;\r\n\r\n  while (dU - dL > 0.0000001) {\r\n    dBal =\r\n      (currValue - repay) * Math.pow(1 + rate, exposureDur) -\r\n      (repay * (1 + rate) * (1 - Math.pow(1 + rate, exposureDur - 1))) / -rate;\r\n\r\n    if (dBal > 0) dU = rate;\r\n    else dL = rate;\r\n\r\n    rate = (dL + dU) / 2;\r\n  }\r\n\r\n  return rate;\r\n}\r\n\r\nexport function getINA_LifeExp_Plus_yrs(\r\n  INALifeExp,\r\n  dataShortfall,\r\n  invRate,\r\n  lifeExp,\r\n  yrs\r\n) {\r\n  let i;\r\n  let INA = INALifeExp;\r\n  \r\n  for (i = 0; i < yrs; ++i) {\r\n    INA =parseInt(INA)+parseInt(\r\n      dataShortfall[lifeExp + i] *\r\n      Math.pow(1 / (1 + invRate / 100), lifeExp + i));\r\n  \r\n  }\r\n\r\n  //console.log(INA)\r\n  return numFormat(INA, false, 2, \",\");\r\n}\r\n\r\nexport function getDataFutureEstateLiability(\r\n  dataTaxLiability,\r\n  totalLiabProjections\r\n) {\r\n  let i;\r\n  let projectEnd = Math.min(\r\n    totalLiabProjections.length,\r\n    dataTaxLiability.length\r\n  );\r\n  let dataFutureEstateLiability = [];\r\n\r\n  for (i = 0; i < projectEnd; ++i) {\r\n    dataFutureEstateLiability.push(dataTaxLiability[i]);\r\n  }\r\n  // add liab\r\n  for (i = 0; i < projectEnd; ++i) {\r\n    dataFutureEstateLiability[i] += totalLiabProjections[i];\r\n  }\r\n  return dataFutureEstateLiability;\r\n}\r\n\r\nexport function getListToShowByOrder(fullListOfItems) {\r\n  const showableList = Object.values(fullListOfItems)\r\n    .filter((obj) => obj.order > 0)\r\n    .slice(0);\r\n\r\n  return showableList.sort(function (a, b) {\r\n    return a.order - b.order;\r\n  });\r\n}\r\n\r\nexport function getListItemNameFromKey(list, Key, lang) {\r\n  let found = Object.values(list).find((obj) => obj.Key === Key);\r\n  if (found === undefined) found = \"\";\r\n  else found = found.value[lang];\r\n  return found;\r\n}\r\n\r\nexport function getListItemKeyFromName(list, name) {\r\n  // console.log(name,list)\r\n  name = name.split(\" \").join(\"\").split(\"\").join(\"\");\r\n  /*  Object.values(list).forEach(\r\n    obj => console.log(obj.value.en.split(\" \").join(\"\").split(\"\").join(\"\"),name,obj.value.en==name))\r\n   */\r\n\r\n  let found = Object.values(list).find(\r\n    (obj) =>\r\n      obj.value.en.split(\" \").join(\"\").split(\"\").join(\"\") == name ||\r\n      obj.value.fr.split(\" \").join(\"\").split(\"\").join(\"\") == name\r\n  );\r\n  if (found === undefined) found = 0;\r\n  else found = found.Key;\r\n  return found;\r\n}\r\n\r\nexport function getAssetsTaxCategoryTotal(dataInput, key) {\r\n  var totalAsset = 0;\r\n  dataInput.Assets.forEach((element) => {\r\n    if (element.assetTaxTypeKey === key) totalAsset += element.currValue;\r\n  });\r\n\r\n  return totalAsset;\r\n}\r\n\r\nexport function getDisableValues(list) {\r\n  let val = [];\r\n  Object.values(list).forEach(() => {\r\n    val.push(false);\r\n  });\r\n  return val;\r\n}\r\n\r\nexport function getAssetsCategoryTotal(dataList, key) {\r\n  var total = 0;\r\n  dataList.Assets.forEach((element) => {\r\n    if (element.assetTypeKey === key) total += element.currValue;\r\n  });\r\n  // // console.log(total,dataList,key)\r\n  return total;\r\n}\r\n\r\nexport function getLiabsCategoryTotal(dataList, key) {\r\n  var total = 0;\r\n  dataList.Liabilitys.forEach((element) => {\r\n    if (element.liabTypeKey === key) total += element.currValue;\r\n  });\r\n  // console.log(total,dataList,key)\r\n  return total;\r\n}\r\n\r\nexport function getAgesEP(clients,LE)\r\n{\r\n  const age1= clients[QUOTE_CLIENT].Age\r\n        \r\n  let dataAges=[]\r\n    //for (let i = startAge; i < parseFloat(startAge + LE + 4); i++)\r\n      if(clients.length > 1)\r\n      {\r\n        const age2= clients[QUOTE_SPOUSE].Age\r\n        for (let i = 0; i < parseFloat(LE + 4); i++)\r\n          dataAges.push(parseInt(age1+i) + \"/\" + parseInt(age2+i));\r\n      }\r\n      else\r\n      {\r\n        for (let i = 0; i < parseFloat(LE + 4); i++)\r\n          dataAges.push(parseInt(age1+i));\r\n      } \r\n\r\n      return dataAges\r\n}\r\n\r\n\r\nexport async function getTaxLiabCategoryTotal(dataInput, key, dataNA, yr) {\r\n  //let appSiteAPI = \"http://localhost:8082\";\r\n\r\n  var totalAsset = 0;\r\n\r\n  let dataAss = dataInput.Assets.filter(\r\n    (obj) => obj.assetTaxTypeKey === key\r\n  ).slice(0);\r\n\r\n  //await dataInput.Assets.forEach(async (element) => {\r\n  // if(element.assetTaxTypeKey === key)\r\n  //{\r\n  for (var i = 0; i < dataAss.length; ++i) {\r\n    let data = await getAssetTL(dataNA, dataAss[i].id, yr);\r\n    if (data !== undefined) {\r\n      totalAsset += data;\r\n    }\r\n  }\r\n  return totalAsset;\r\n}\r\n\r\nasync function getAssetTL(dataNA, id, yr) {\r\n  let data = await fetchAssetProjection2(dataNA, id);\r\n  if (data !== undefined) {\r\n    if (data[ASSET_API_OUTPUT_TaxPayable] !== undefined) {\r\n      return data[ASSET_API_OUTPUT_TaxPayable].numericValues[yr];\r\n    }\r\n   }\r\n}\r\n\r\n\r\n\r\n  export function getDefaultImages()\r\n  {\r\n    return{\r\n      adviserLogo:{image:null, left: 0,size: OUTPUT_WIDTH_PCT, allPages: false, top:true, showDetails:false},\r\n      appletImage:{image:APPLET_INA? require(\"../images/INA.png\"):require(\"../images/estate.protection.applet.cover.graphic.png\"), left: 0,size: OUTPUT_WIDTH_PCT, allPages: false, top:true, showDetails:false}\r\n    }\r\n  }\r\n  \r\n  \r\n\r\nexport function getAfterTaxTotalIncome(clients, index) {\r\n  return (\r\n    clients[QUOTE_CLIENT].Income *\r\n      (1 - clients[QUOTE_CLIENT].avgTaxRate / 100) +\r\n    clients[index].Income * (1 - clients[index].avgTaxRate / 100)\r\n  ); //* Math.pow(1+this.state.dataInput.Presentations[0].inflation / 100,data2.Needs[i].startYear)\r\n}\r\n\r\nexport function isSingleFamily(clients) {\r\n  const spouseKey = MEMBER.SPOUSE.Key;\r\n  let survivors = clients.filter((x) => x.memberKey === spouseKey);\r\n  if (APPLET_INA) return survivors === undefined || survivors.length === 0;\r\n  else if (APPLET_INA) return false;\r\n}\r\n\r\nexport function singleFamilyProjectionYears(clients) {\r\n  let minAge = 0;\r\n  let maxRet = 0;\r\n  let noYrs = 0;\r\n  const clientKey = MEMBER.CLIENT.Key;\r\n  let survivors = clients.filter((x) => x.memberKey !== clientKey);\r\n  if (survivors !== undefined && survivors.length > 0) {\r\n    minAge = survivors.reduce(function (prev, curr) {\r\n      return prev.Age < curr.Age ? prev : curr;\r\n    }).Age;\r\n\r\n    maxRet = survivors.reduce(function (prev, curr) {\r\n      return prev.retirementAge > curr.retirementAge ? prev : curr;\r\n    }).retirementAge;\r\n    \r\n    let noYrsDiff = survivors.reduce(function (prev, curr) {\r\n      return prev.Age - prev.retirementAge < curr.Age - curr.retirementAge ? prev : curr;\r\n    });\r\n    noYrs=noYrsDiff.retirementAge-noYrsDiff.Age\r\n  \r\n  }\r\n  else\r\n  {\r\n    maxRet=clients[0].retirementAge\r\n    minAge=clients[0].Age\r\n    noYrs=clients[0].retirementAge-clients[0].Age\r\n  }\r\n  return {\r\n    projectionEnd: maxRet,\r\n    noProjectionYrs: noYrs,//maxRet - minAge,\r\n    survivorAge: minAge,\r\n  };\r\n}\r\n\r\nexport function familyProjectionYears(\r\n  clients,\r\n  periodOption,\r\n  LE,\r\n  insuranceNeeds,\r\n  dataShortfall,\r\n  presentation\r\n) {\r\n  let insNeed = 0;\r\n  let insNeedRet = 0;\r\n  let insNeedLE = 0;\r\n  let insNeedLE3 = 0;\r\n  let insNeedEAge = 0;\r\n\r\n  if (insuranceNeeds.length > 0) {\r\n    insNeedRet = cleanFormat(insuranceNeeds[DISPLAY_RETIREMENT].Value, presentation.language);\r\n    insNeedLE =  cleanFormat(insuranceNeeds[DISPLAY_LIFEEXP].Value, presentation.language);\r\n    insNeedEAge =  cleanFormat(insuranceNeeds[DISPLAY_ENDAGE].Value, presentation.language);\r\n    const lifeExp=parseFloat(cleanFormat(LE.joint, presentation.language)) // this is either client or jltd if two lives\r\n\r\n    insNeed =\r\n      periodOption === DISPLAY_RETIREMENT\r\n        ? insNeedRet\r\n        : periodOption === DISPLAY_LIFEEXP\r\n        ? insNeedLE\r\n        : periodOption === DISPLAY_LIFEEXP_PLUS_3\r\n        ? getINA_LifeExp_Plus_yrs(\r\n          insNeedLE,\r\n            dataShortfall,\r\n            presentation.invRate,\r\n            //LE.spouse,\r\n            lifeExp, // this is either client or jltd if two lives\r\n            3\r\n          )\r\n        : insNeedEAge;\r\n    \r\n    insNeedLE3 =\r\n      dataShortfall !== undefined\r\n        ? getINA_LifeExp_Plus_yrs(\r\n          insNeedLE ,\r\n            dataShortfall,\r\n            presentation.invRate,\r\n            lifeExp,\r\n            3\r\n          )\r\n        : insNeed;\r\n  }\r\n\r\n  // if single family survivor Index could be more than on child, otherwise it is always 1 for spouse\r\n  if (isSingleFamily(clients) && !APPLET_EP) {\r\n    let singleFamilyvalues = singleFamilyProjectionYears(clients);\r\n    singleFamilyvalues.insuranceNeed = insNeedRet;\r\n    singleFamilyvalues.insuranceNeedToRet = insNeedRet;\r\n    singleFamilyvalues.insuranceNeedToLE = insNeedRet;\r\n    singleFamilyvalues.insuranceNeedToLE3 = insNeedRet;\r\n    singleFamilyvalues.insuranceNeedToEnd = insNeedRet;\r\n    return singleFamilyvalues;\r\n  } else {\r\n    let projectEnd = 65;\r\n    let noProjectYrs = 0;\r\n    let survAge;\r\n    const survIdx = 1; // spouse\r\n\r\n    if (APPLET_EP) {\r\n      // survivorExists or EP\r\n      if(clients.length===1){\r\n      projectEnd = LE.client + clients[QUOTE_CLIENT].Age + 3;\r\n      noProjectYrs = projectEnd - clients[QUOTE_CLIENT].Age;\r\n      survAge = clients[QUOTE_CLIENT].Age;\r\n      }\r\n      else // jltd\r\n      {\r\n        const minAge=Math.min(clients[QUOTE_CLIENT].Age, clients[QUOTE_SPOUSE].Age)\r\n        projectEnd = LE.joint + minAge + 3;\r\n        noProjectYrs = projectEnd - minAge;\r\n        survAge = minAge;\r\n      \r\n      }\r\n    } else if (clients.length > 1) {\r\n      // survivorExists or EP\r\n      projectEnd =\r\n        periodOption === DISPLAY_RETIREMENT\r\n          ? clients[survIdx].retirementAge\r\n          : periodOption === DISPLAY_LIFEEXP\r\n          ? LE.spouse + clients[survIdx].Age\r\n          : periodOption === DISPLAY_ANALYSIS\r\n          ? LE.joint + clients[survIdx].Age + 3\r\n          : 100;\r\n      noProjectYrs = projectEnd - clients[survIdx].Age;\r\n      survAge = clients[survIdx].Age;\r\n    } else {\r\n      survAge = clients[QUOTE_CLIENT].Age;\r\n      noProjectYrs = 0;\r\n    }\r\n    return {\r\n      projectionEnd: projectEnd,\r\n      noProjectionYrs: noProjectYrs,\r\n      survivorAge: survAge,\r\n      insuranceNeed: insNeed,\r\n      insuranceNeedToRet: insNeedRet,\r\n      insuranceNeedToLE: insNeedLE,\r\n      insuranceNeedToLE3: insNeedLE3,\r\n      insuranceNeedToEnd: insNeedEAge,\r\n    };\r\n  }\r\n}\r\n\r\nexport function getInsNeedLine(\r\n  presentation,\r\n  projEnd,\r\n  lang,\r\n  numSurvivor,\r\n  singleFamily,\r\n  protectionPeriod,\r\n  insuranceNeed,\r\n  name\r\n) {\r\n  const labelsBilingual = OUTPUTTEXT[lang];\r\n  const decimalChar = lang === \"en\" ? \".\" : \",\";\r\n  const thousands = lang === \"en\" ? \",\" : \" \";\r\n // const formatFr = lang === \"fr\" ? true : false;\r\n  const dollarEn= lang === \"fr\" ? \"\" : \"$\";\r\n  const dollarFr= lang === \"fr\" ? \"$\" : \"\";\r\n\r\n  let needTo =\r\n    presentation.periodOption === DISPLAY_RETIREMENT\r\n      ? singleFamily\r\n        ? (numSurvivor>0?labelsBilingual.insNeedsSingleFamily:labelsBilingual.insNeedsSinglePerson)\r\n        : labelsBilingual.insNeedsRet\r\n      : presentation.periodOption === DISPLAY_ENDAGE\r\n      ? labelsBilingual.insNeeds100\r\n      : labelsBilingual.insNeedsRetLE;\r\n\r\n  if (versionDetails().versionNumeric<=10014 && numSurvivor === 0) needTo = labelsBilingual.addSurvivor;\r\n  else if (singleFamily)\r\n    needTo +=\r\n      +protectionPeriod +\r\n      labelsBilingual.years +\r\n      \": \" + dollarEn +\r\n      formatMoney(\r\n        cleanFormat(insuranceNeed, lang),\r\n        0,\r\n        decimalChar,\r\n        thousands\r\n      )+dollarFr;\r\n  else if (presentation.periodOption !== DISPLAY_ENDAGE)\r\n    needTo +=\r\n      +projEnd +\r\n      \"): \" + dollarEn +\r\n      formatMoney(\r\n        cleanFormat(insuranceNeed, lang),\r\n        0,\r\n        decimalChar,\r\n        thousands\r\n      ) +dollarFr;\r\n  else\r\n    needTo +=\r\n      \": \" + dollarEn +\r\n      formatMoney(\r\n        cleanFormat(insuranceNeed, lang),\r\n        0,\r\n        decimalChar,\r\n        thousands\r\n      ) +dollarFr;\r\n  if (name !== \"\" && name !== undefined && name !== TITLES[lang].insured) needTo += \"  (\" + name + \")\";\r\n  return needTo;\r\n}\r\n\r\nexport function getName(name,lang) {\r\n  if (!(name === \"\" || name === undefined || name === TITLES[lang].insured  || name === TITLES[lang].benef)) return \" (\" + name + \")\";\r\n  else return \"\";\r\n}\r\n\r\nexport function formatted(value,lang){\r\n  const decimalChar = lang === \"en\" ? \".\" : \",\";\r\n  const thousands = lang === \"en\" ? \",\" : \" \";\r\n  \r\n  const formattedValue= (lang === \"en\" ? \"$\" : \"\" )+\r\n  formatMoney(\r\n    value,\r\n    0,\r\n    decimalChar,\r\n    thousands\r\n  )+(lang === \"en\" ? \"\" : \"$\" )\r\n\r\n  return formattedValue\r\n }\r\n \r\n\r\n\r\nexport function getLeakageGraphs(\r\n  assets,\r\n  assetProjections,\r\n  AssetLiabProjs,\r\n  totalLiabProjections,\r\n  lang,\r\n  lifeExp\r\n) {\r\n  const optionsPie = {\r\n    responsive: true,\r\n    maintainAspectRatio: true,\r\n    title: {\r\n      display: true,\r\n      position: \"top\",\r\n      text: \"\",\r\n      fontSize: 14, //8,\r\n      fontColor: \"#111\",\r\n    },\r\n    legend: {\r\n      display: true,\r\n      position: \"right\",\r\n      labels: {\r\n        fontColor: \"#333\",\r\n        fontSize: 12, //16\r\n      },\r\n    },\r\n    /*  plugins: {\r\n      // Change options for ALL labels of THIS CHART\r\n      display: true,\r\n      datalabels: {\r\n        color: \"white\",\r\n      },\r\n    },  */\r\n  };\r\n\r\n  const space = \"                                       \";\r\n  let optionsPieEstateLeakage = JSON.parse(JSON.stringify(optionsPie));\r\n  optionsPieEstateLeakage.title.text =\r\n    OUTPUTTEXTEP[lang].graphsLeakageT2 + space;\r\n  //optionsPieEstateLeakage.legend.labels.boxWidth = 20;\r\n  //optionsPieEstateLeakage.plugins.display = true;\r\n\r\n  let optionsPieEstateLeakageLE = JSON.parse(JSON.stringify(optionsPie));\r\n  optionsPieEstateLeakageLE.title.text =\r\n    OUTPUTTEXTEP[lang].graphsLeakageT3 + space; // needTo += +this.props.projectEnd + \")\";\r\n  // optionsPieEstateLeakageLE.legend.labels.boxWidth = 20;\r\n  //optionsPieEstateLeakageLE.plugins.display = true;\r\n \r\n  // asset info\r\n  let assetsTotalNow = 0;\r\n  let assetsTotalLE3 = 0;\r\n // const formatFr = lang === \"fr\" ? true : false;\r\n  const FMVCol = 2;\r\n  for (let i = 0; i < assets.length; ++i) {\r\n    assetsTotalNow += assets[i].currValue;\r\n    assetsTotalLE3 += parseFloat(\r\n      cleanFormat(\r\n        assetProjections[i].grid.dataProjection[FMVCol][lifeExp + 3],\r\n        lang\r\n      )\r\n    );\r\n  }\r\n\r\n  // liab info\r\n  const totalLiabProjectionsNow = parseInt(totalLiabProjections[0]);\r\n  const totalLiabProjectionsLE3 = parseInt(totalLiabProjections[lifeExp + 3]);\r\n\r\n  // leakage data\r\n  // use net worth as full circle in pie chart\r\n  const assetPercent =\r\n    assetsTotalNow - totalLiabProjectionsNow === 0\r\n      ? 0\r\n      : parseInt(\r\n          (100 *\r\n            (assetsTotalNow -\r\n              totalLiabProjectionsNow -\r\n              AssetLiabProjs.EstateLiabsByTypeTotal)) /\r\n            (assetsTotalNow - totalLiabProjectionsNow) +\r\n            0.5\r\n        );\r\n  const taxPercent =\r\n    AssetLiabProjs.EstateLiabsByTypeTotal === 0 ? 0 : 100 - assetPercent;\r\n\r\n  let dataEstateLeakage = [];\r\n  let dataEstateLeakageLE = [];\r\n  dataEstateLeakage.push(\r\n    assetsTotalNow -\r\n      totalLiabProjectionsNow -\r\n      AssetLiabProjs.EstateLiabsByTypeTotal >=\r\n      0\r\n      ? assetsTotalNow -\r\n          totalLiabProjectionsNow -\r\n          AssetLiabProjs.EstateLiabsByTypeTotal\r\n      : 0\r\n  );\r\n  dataEstateLeakage.push(AssetLiabProjs.EstateLiabsByTypeTotal);\r\n  dataEstateLeakageLE.push(\r\n    assetsTotalLE3 -\r\n      totalLiabProjectionsLE3 -\r\n      AssetLiabProjs.EstateLiabsByTypeLE3Total >=\r\n      0\r\n      ? assetsTotalLE3 -\r\n          totalLiabProjectionsLE3 -\r\n          AssetLiabProjs.EstateLiabsByTypeLE3Total\r\n      : 0\r\n  );\r\n  dataEstateLeakageLE.push(AssetLiabProjs.EstateLiabsByTypeLE3Total);\r\n\r\n  const assetPercentLE3 =\r\n    assetsTotalLE3 - totalLiabProjectionsLE3 === 0\r\n      ? 0\r\n      : parseInt(\r\n          (100 *\r\n            (assetsTotalLE3 -\r\n              totalLiabProjectionsLE3 -\r\n              AssetLiabProjs.EstateLiabsByTypeLE3Total)) /\r\n            (assetsTotalLE3 - totalLiabProjectionsLE3) +\r\n            0.5\r\n        );\r\n  const taxPercentLE3 =\r\n    AssetLiabProjs.EstateLiabsByTypeLE3Total +\r\n      assetsTotalLE3 -\r\n      totalLiabProjectionsLE3 ===\r\n    0\r\n      ? 0\r\n      : 100 - assetPercentLE3;\r\n\r\n  //var ctx = document.getElementById('pieEstateLeakage').getContext('2d');\r\n  var dataPieEstateLeakage = {\r\n    labels: [\r\n      // OUTPUTTEXT[lang].graphsL1,OUTPUTTEXT[lang].graphsL2,OUTPUTTEXT[lang].graphsL3,OUTPUTTEXT[lang].graphsL4,OUTPUTTEXT[lang].graphsL5,\r\n      OUTPUTTEXTEP[lang].graphsLeakage1 + \" (\" + assetPercent + \"%)\" + space,\r\n      OUTPUTTEXTEP[lang].graphsLeakage2 + \" (\" + taxPercent + \"%)\" + space,\r\n    ],\r\n    datasets: [\r\n      {\r\n        //data: this.state.estateLiabLE,\r\n        data: dataEstateLeakage,\r\n        //backgroundColor: [\"#F7464A\", \"#46BFBD\", \"#FDB45C\", \"#949FB1\", \"#4D5360\"]\r\n        backgroundColor: [\"#4D7966\", \"#872651\"],\r\n      },\r\n    ],\r\n  };\r\n  const dataPieEstateLeakageLE = {\r\n    labels: [\r\n      // OUTPUTTEXT[lang].graphsL1,OUTPUTTEXT[lang].graphsL2,OUTPUTTEXT[lang].graphsL3,OUTPUTTEXT[lang].graphsL4,OUTPUTTEXT[lang].graphsL5,\r\n      OUTPUTTEXTEP[lang].graphsLeakage1 + \" (\" + assetPercentLE3 + \"%)\" + space,\r\n      OUTPUTTEXTEP[lang].graphsLeakage2 + \" (\" + taxPercentLE3 + \"%)\" + space,\r\n    ],\r\n    datasets: [\r\n      {\r\n        //data: this.state.estateLiabLE,\r\n        data: dataEstateLeakageLE,\r\n        //backgroundColor: [\"#F7464A\", \"#46BFBD\", \"#FDB45C\", \"#949FB1\", \"#4D5360\"]\r\n        backgroundColor: [\"#4D7966\", \"#872651\"],\r\n      },\r\n    ],\r\n  };\r\n  return {\r\n    dataPieEstateLeakage: dataPieEstateLeakage,\r\n    dataPieEstateLeakageLE: dataPieEstateLeakageLE,\r\n    optionsPieEstateLeakage: optionsPieEstateLeakage,\r\n    optionsPieEstateLeakageLE: optionsPieEstateLeakageLE,\r\n  };\r\n}\r\n\r\nexport function getLogoAndAppletImage(dataInput, imageRemove, imageAdjust) {\r\n  const lang = dataInput.Presentations[0].language;\r\n  const allPages =\r\n      dataInput.Presentations[0].adviserLogo.image !== null &&\r\n      dataInput.Presentations[0].adviserLogo.allPages;\r\n  const appletImage =\r\n    dataInput.Presentations[0].appletImage === undefined\r\n      ? APPLET_INA\r\n        ? require(\"../images/INA.png\")\r\n        : require(\"../images/estate.protection.applet.cover.graphic.png\")\r\n      : dataInput.Presentations[0].appletImage.image;\r\n  const logoSize = Math.max(\r\n    500 * (MAX_LOGO_HEIGHT / PAGE_HEIGHT),\r\n    Math.min(\r\n      500 * (MAX_LOGO_HEIGHT / PAGE_HEIGHT),\r\n      (100 *\r\n        (MAX_LOGO_HEIGHT / PAGE_HEIGHT) *\r\n        dataInput.Presentations[0].adviserLogo.size) /\r\n        OUTPUT_WIDTH_PCT\r\n    )\r\n  );\r\n  const logoLeft =\r\n    dataInput.Presentations[0].adviserLogo.size / 2 +\r\n    dataInput.Presentations[0].adviserLogo.left -\r\n    logoSize / 2;\r\n  const logo = (allPages && \r\n    <AdjustibleImage\r\n      image={dataInput.Presentations[0].adviserLogo.image}\r\n      showDetails={false}\r\n      size={logoSize}\r\n      imageLeft={logoLeft}\r\n      ID={IMAGE_LOGO_OTHERPAGES}\r\n    />\r\n  );\r\n  const top=dataInput.Presentations[0].adviserLogo.top \r\n  /* const logoTop = dataInput.Presentations[0].adviserLogo.top && logo\r\n  const logoBottom = !dataInput.Presentations[0].adviserLogo.top && logo\r\n   */\r\n  const logo1stPage = dataInput.Presentations[0].adviserLogo.image !==\r\n    undefined && ( // from older files not null but undefined\r\n    <AdjustibleImage\r\n      image={dataInput.Presentations[0].adviserLogo.image}\r\n      showDetails={true}\r\n      size={dataInput.Presentations[0].adviserLogo.size}\r\n      imageLeft={dataInput.Presentations[0].adviserLogo.left}\r\n      allPages={dataInput.Presentations[0].adviserLogo.allPages}\r\n      top={dataInput.Presentations[0].adviserLogo.top}\r\n      imageRemove={imageRemove}\r\n      imageAdjust={imageAdjust}\r\n      buttonText={lang === \"en\" ? \"Add/Edit logo\" : \"Ajouter/modifier le logo\"}\r\n      ID={IMAGE_LOGO}\r\n      language={lang}\r\n    />\r\n  );\r\n  const applet = (\r\n    <div>\r\n    <AdjustibleImage\r\n      image={appletImage}\r\n      showDetails={false}\r\n      size={OUTPUT_WIDTH_PCT}\r\n      imageLeft={0}\r\n      imageAdjust={imageAdjust}\r\n      //newImagethis.props.loadImage\r\n      buttonText={lang === \"en\" ? \"Replace Applet image\" : \"Remplacer limage de lapplet\"}\r\n      language={lang}\r\n      top={true}\r\n      ID={APPLET_INA ? IMAGE_APPLET_INA : IMAGE_APPLET_EP}\r\n      undoImage={APPLET_INA\r\n      ? require(\"../images/INA.png\")\r\n      : require(\"../images/estate.protection.applet.cover.graphic.png\")}\r\n    />\r\n    \r\n    </div>\r\n  );\r\n  return {\r\n    //appletImage: appletImage,\r\n    logoSize: logoSize,\r\n    logoLeft: logoLeft,\r\n    logoTop: top?logo:\"\",\r\n    logoBottom: !top?logo:\"\",\r\n    logo1stPage: logo1stPage,\r\n    applet:applet\r\n  };\r\n}\r\n\r\nexport function extractCSS() {\r\n  const allCSS = Object.values(document.styleSheets)\r\n    // eslint-disable-next-line array-callback-return\r\n    .map((styleSheet) => {\r\n      try {\r\n        return Object.values(styleSheet.cssRules)\r\n          .map((rule) => rule.cssText)\r\n          .join(\"\");\r\n      } catch (e) {\r\n        console.log(\r\n          \"Access to stylesheet %s is denied. Ignoring...\",\r\n          styleSheet.href\r\n        );\r\n      }\r\n    })\r\n    .filter(Boolean)\r\n    .join(\"\");\r\n\r\n  return allCSS;\r\n}\r\n","import React, { Component } from 'react';\r\nimport { Box, Card, CardContent, Typography } from '@material-ui/core'\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { createMuiTheme, ThemeProvider } from \"@material-ui/core/styles\";\r\n\r\nimport {\r\n  getInfoSave\r\n} from \"../definitions/infoIconsDefinitions.js\";\r\n\r\n\r\n\r\nexport class PopupInfoDialog extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      open: this.props.infoIcon.popupOpenByProps,\r\n      name: '',\r\n      showInfo: false\r\n    }\r\n  };\r\n\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (nextProps !== this.props) {\r\n\r\n      this.setState({\r\n        open: nextProps.infoIcon.popupOpenByProps\r\n      })\r\n    }\r\n  }\r\n\r\n  render() {\r\n\r\n    const theme = createMuiTheme({\r\n      typography: {\r\n        fontFamily: '\"Trebuchet MS\"',\r\n        fontSize: 12,\r\n        color: 'red',      \r\n      },\r\n    })  \r\n\r\n    return (\r\n\r\n    \r\n\r\n<Box width=\"100%\" border={2} borderColor={ this.props.infoIcon.popupBorderColor} borderRadius={5}>\r\n        <Card> <CardContent >\r\n        <ThemeProvider theme={theme}>\r\n          <Typography color=\"textPrimary\" component=\"p\" >\r\n                {this.props.infoIcon.infoText}\r\n             \r\n               {/*  <div>\r\n                To save files in your desired location:<ul><li>Microsofrft Edge:\r\n              <ul>\r\n                <li>Go to Options {this.state.showInfo && <img  alt=\"info\" src={optionsEdge}  />} </li>\r\n                <li>Click Downlods - Click Download settings</li>\r\n                <li>Turn on \"Ask where to save each file before downloading\" {this.state.showInfo && <img  alt=\"info\" src={sourceEdge}  />}\r\n              </li>\r\n               </ul>\r\n               </li><li>Google Chrome:\r\n               <ul>\r\n               <li>Go to Options {this.state.showInfo && <img  alt=\"info\" src={optionsChrome}  />} </li>\r\n                <li>Click Settings - Advanced - Downloads</li>\r\n                <li>Turn on \"Ask where to save each file before downloading\" {this.state.showInfo && <img  alt=\"info\" src={sourceChrome}  />}\r\n                </li>\r\n               </ul>\r\n              \r\n              </li></ul></div> */}\r\n             \r\n          </Typography>\r\n          </ThemeProvider>\r\n         \r\n        </CardContent></Card>\r\n        </Box>\r\n \r\n    )\r\n\r\n\r\n  }\r\n}","import React, { Component } from 'react';\r\nimport './info.css';\r\nimport {\r\n\tSHOW_AUTOMATIC_RED,\r\n\tSHOW_STANDARD,\r\n\tSHOW_STANDARD_RED,\r\n\tSHOW_STANDARD_LIGHT_BLUE,\r\n\tSHOW_NONE,\r\n\tSHOW_STANDARD_WHITE,\r\n}\r\n\tfrom \"../definitions/infoIconsDefinitions.js\";\r\nimport { PopupInfoDialog } from \"./PopupInfo\";\r\n\r\nexport class Info extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\topen: this.props.infoIcon.popupOpenByProps\r\n\t\t};\r\n\t\tthis.chkClose = false;\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tif (this.props.iconMode === SHOW_AUTOMATIC_RED) {\r\n\t\t\t//\t  console.log('in info');\r\n\r\n\t\t\tthis.popupInfo(0);\r\n\t\t\tthis.chkClose = true;\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tthis.setState({ open:  this.props.infoIcon.popupOpenByProps })\r\n\t}\r\n\r\n\tshowPopup = () => {\r\n\t\tthis.setState({ open: !this.state.open })\r\n\t\tif (this.props.respondToPopUp!==undefined)this.props.respondToPopUp();\r\n\t}\r\n\r\n\tpopupInfo = () => {\r\n\t\tvar popup = document.getElementById(this.props.infoIcon.infoID);\r\n\t\tpopup.classList.toggle(\"show\");\r\n\t//\tif (this.props.infoIcon.iconMode === SHOW_AUTOMATIC_RED && this.chkClose === true) {\r\n\t\t\tthis.props.respondToPopUp();\r\n\t\t\tthis.chkClose = false;\r\n\t//\t}\r\n\t}\r\n\r\n\r\n\trender() {\r\n\t\tconst position = this.props.infoIcon.position\r\n\t\t// console.log(position)\r\n\r\n\t\t//var icon=this.props.icon===undefined?'../images/info.png':this.props.icon;\r\n\r\n\t\t//var style1=this.props.popupRightMiddle? {paddingLeft:\"14px\", marginLeft: '75px',marginTop: '-135px', width:'196px' }:(this.props.popupRight===true?{marginLeft: '50px'}:{});\r\n\r\n\t\tvar stylePosition = position !== undefined ?\r\n\t\t\t({ marginLeft: position.marginLeft + 'px', marginTop: position.marginTop + 'px', width: position.width + 'px' }) : {};\r\n\t//var style={paddingLeft: this.props.popupRightMiddle?'25px':'8px', height: this.props.sizeIcon===undefined?'14px':this.props.sizeIcon, };\r\n\t\tconst style = { paddingLeft: '8px', height: '14px'};\r\n\t\t//var sour=this.props.iconName===undefined || this.props.iconName==='info.png'?require('../images/info.png'):require('../images/'+this.props.iconName);\r\n\t\tconst source = this.props.infoIcon.iconMode === SHOW_STANDARD ? require('../images/info.png') : (this.props.infoIcon.iconMode === SHOW_NONE ? \"\": (this.props.infoIcon.iconMode === SHOW_STANDARD_LIGHT_BLUE ?require('../images/infoLightBlue.png'): (this.props.infoIcon.iconMode === SHOW_STANDARD_WHITE ?require('../images/infoWhite.png'): require('../images/infoRed.png'))));\r\n\r\n\t\tconst classP = this.state.open === true ? \"popup2\" : \"popup\"\r\n\t\t\r\n\t\t//const width=this.props.infoIcon.infoText.length>120?'600%': (this.props.infoIcon.infoText.length>90?'420%':'350%');\r\n\t\t\r\n\t\tconst marginLeft=position.marginLeft//this.props.infoIcon.infoText.length>120?'-275%':'-125%';\r\n\t\tconst marginTop=position.marginTop\r\n\t\tconst width=position.width\r\n\t\tconst height=position.height\r\n\r\n\t\tconst zIndx=this.props.zIndex===undefined?1:this.props.zIndex\r\n\t\t\r\n\t\tlet borderColor\r\n\r\n\t\treturn (\r\n\t\t\t<div  className={classP} style={{ float: 'right', width: '40px', height: '40px'   }}><div>\r\n\t\t\t\t{this.props.iconMode !== SHOW_AUTOMATIC_RED && this.props.infoIcon.iconMode !== SHOW_NONE && <img onMouseEnter={this.showPopup} onMouseLeave={this.showPopup} onClick={this.showPopup} id={\"info\"} alt=\"info\" src={source} style={style} />}\r\n\t\t\t\t{/* <div className=\"popup\"  onMouseEnter={this.popupInfo} onMouseLeave={this.popupInfo}   onClick={this.popupInfo}>{this.props.showMode!==SHOW_AUTOMATIC_RED && <img  id={\"info\"} alt=\"info\" src={source} style={style} />} */}\r\n\t\t\t\t{/* <span className=\"popuptextBottom\"   style={stylePosition} id={this.props.infoIcon.infoID}>{this.props.infoIcon.infoText}</span> */}\r\n\t\t\t</div>\r\n\t\t\t <div style={{position:'absolute', marginTop: '2px',marginTop:marginTop,  marginLeft: marginLeft, width: width, zIndex: zIndx}}>\t\t\t<span onMouseEnter={this.showPopup} onMouseLeave={this.showPopup}  onClick={this.showPopup} >{this.state.open === true && <PopupInfoDialog  infoIcon={this.props.infoIcon} />}</span>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\r\n}\r\n","// Imports\r\nimport React, { Component } from \"react\";\r\nimport jsPDF from \"jspdf\";\r\n\r\n// Constants\r\nconst PORTRAIT = \"portrait\";\r\nconst PT = \"pt\";\r\nconst LETTER = \"letter\";\r\n\r\nconst PNG = \"png\";\r\n\r\nexport const HELVETICA = \"Helvetica\";\r\nexport const TIMES = \"Times\";\r\n\r\nexport const NORMAL = \"normal\";\r\nexport const BOLD = \"bold\";\r\nexport const ITALIC = \"italic\";\r\n\r\nexport const HEADER_RECT_IN_X: number = 1;\r\nexport const HEADER_RECT_IN_Y: number = 0.48;\r\nexport const HEADER_RECT_IN_W: number = 6.4;\r\nexport const HEADER_RECT_IN_H: number = 0.45;\r\nexport const HEADER_RECT_R: number = 148;\r\nexport const HEADER_RECT_G: number = 148;\r\nexport const HEADER_RECT_B: number = 148;\r\n\r\nexport const HEADER_TEXT_PT_SIZE: number = 10;\r\nexport const HEADER_TEXT_IN_X: number = 1;\r\nexport const HEADER_TEXT_IN_Y: number = 0.75;\r\nexport const HEADER_TEXT_IN_W: number = 6;\r\nexport const HEADER_TEXT_R: number = 0xff;\r\nexport const HEADER_TEXT_G: number = 0xff;\r\nexport const HEADER_TEXT_B: number = 0xff;\r\n\r\nexport const FOOTER_TEXT_PT_SIZE: number = 8;\r\nexport const FOOTER_TEXT_IN_X: number = 1.5;\r\nexport const FOOTER_TEXT_IN_Y: number = 11 - 3 * 0.125;\r\nexport const FOOTER_TEXT_IN_Y_L: number = 8 - 3 * 0.125;\r\n\r\nexport const TEXT_R: number = 0x45;\r\nexport const TEXT_G: number = 0x55;\r\nexport const TEXT_B: number = 0x60;\r\n\r\nexport const MAX_LOGO_HEIGHT = 0.38;\r\n// Functions\r\nexport const InToPt = (in_) => {\r\n  return in_ * 25;\r\n};\r\n\r\nexport const PxToPt = (px) => {\r\n  return (px / 96) * 72;\r\n};\r\n\r\nconst fontName = HELVETICA;\r\nconst fontStyle = NORMAL;\r\nconst fontSize = 16;\r\n\r\nconst textRed = 0x00;\r\nconst textGreen = 0x00;\r\nconst textBlue = 0x00;\r\n\r\nconst fillRed = 0xff;\r\nconst fillGreen = 0xff;\r\nconst fillBlue = 0xff;\r\n\r\nconst showGrids = true;\r\n\r\nconst PAGE_WIDTH = 8.4;\r\nexport const PAGE_HEIGHT = 11;\r\nconst PAGE_USED_AREA_LEFT = 1.2;\r\nconst PAGE_USED_AREA_RIGHT = 7.24;\r\n\r\n// Classes\r\nexport class PDF extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {};\r\n    this.pdf = new jsPDF();\r\n  }\r\n\r\n  AddImage = (imageID, x, y, w, h) => {\r\n    if (this.pdf === null) return;\r\n    const imgData = document.getElementById(imageID);\r\n    const imgProps = this.pdf.getImageProperties(imgData);\r\n    const pdfHeight = (imgProps.height * w) / imgProps.width;\r\n    if (pdfHeight > h) {\r\n      w = (imgProps.width * h) / imgProps.height;\r\n    } else h = pdfHeight;\r\n    this.pdf.addImage(document.getElementById(imageID), PNG, x, y, w, h);\r\n  };\r\n\r\n  AddImageFitWidthOnly = (imageID, x, y, w, maxHeight) => {\r\n    if (this.pdf === null) return;\r\n    let imgData = document.getElementById(imageID);\r\n\r\n    if (imgData !== null) {\r\n      try {\r\n        const imgProps = this.pdf.getImageProperties(imgData);\r\n\r\n        //const pdfWidth = this.pdf.internal.pageSize.getWidth();\r\n        let pdfHeight = (imgProps.height * w) / imgProps.width;\r\n\r\n        if (pdfHeight > maxHeight) {\r\n          if (x + w > (3 * InToPt(PAGE_WIDTH)) / 4)\r\n            x += w - (w * maxHeight) / pdfHeight;\r\n          else if (x + (w * maxHeight) / pdfHeight / 2 > InToPt(PAGE_WIDTH) / 4)\r\n            x += w / 2 - (w * maxHeight) / pdfHeight / 2;\r\n\r\n          /*  else if(x+w/2>InToPt(PAGE_WIDTH/4))\r\n          x-=(w-w*maxHeight / pdfHeight)/2 */\r\n\r\n          w *= maxHeight / pdfHeight;\r\n          pdfHeight = maxHeight;\r\n        }\r\n        this.pdf.addImage(imgData, PNG, x, y, w, pdfHeight);\r\n        return true;\r\n      } catch (error) {\r\n        return false;\r\n      }\r\n    }\r\n  };\r\n\r\n  addCustomImage = (id, pg1TitleY, image, firstPage, top) => {\r\n     const left =\r\n      image === null || image === undefined\r\n        ? 0\r\n        : (image.left * HEADER_RECT_IN_W) / 100;\r\n    const result = this.AddImageFitWidthOnly(\r\n      id,\r\n      InToPt(pg1TitleY - 3 + left), //1.51),\r\n      InToPt(\r\n        firstPage\r\n          ? top\r\n            ? 1.06\r\n            : FOOTER_TEXT_IN_Y + 0.25\r\n          : top\r\n          ? 0.29\r\n          : FOOTER_TEXT_IN_Y + 0.25\r\n      ),\r\n      InToPt((6.04 * image.size) / 100),\r\n      InToPt(firstPage ? (top ? 2.76 : MAX_LOGO_HEIGHT) : MAX_LOGO_HEIGHT) // max height\r\n    );\r\n    return result;\r\n  };\r\n\r\n  AddChart = (containerID, x, y, w, h) => {\r\n    if (this.pdf === null) return;\r\n\r\n    const CANVAS_CLASS_NAME = \"chartjs-render-monitor\";\r\n\r\n    let containerElement = document.getElementById(containerID);\r\n    let canvasElement = null;\r\n\r\n    if (containerElement !== null)\r\n      if (\r\n        containerElement.getElementsByClassName(CANVAS_CLASS_NAME).length === 1\r\n      )\r\n        canvasElement = containerElement.getElementsByClassName(\r\n          CANVAS_CLASS_NAME\r\n        )[0];\r\n\r\n    let dataUrl = canvasElement.toDataURL();\r\n\r\n    if (dataUrl !== null) this.pdf.addImage(dataUrl, \"JPEG\", x, y, w, h);\r\n  };\r\n\r\n  AddCanvas = (canvasID, x, y, w, h) => {\r\n    if (this.pdf === null) return;\r\n\r\n    let canvasElement = null;\r\n    let dataUrl = null;\r\n\r\n    canvasElement = document.getElementById(canvasID);\r\n\r\n    if (canvasElement !== null) dataUrl = canvasElement.toDataURL();\r\n\r\n    if (dataUrl !== null) this.pdf.addImage(dataUrl, \"JPEG\", x, y, w, h);\r\n  };\r\n\r\n  AddPage = (mode) => {\r\n    if (this.pdf === null) return;\r\n\r\n    this.pdf.addPage(\"\", mode);\r\n  };\r\n\r\n  Create = () => {\r\n    if (this.pdf !== null) return;\r\n\r\n    this.pdf = new jsPDF({\r\n      orientation: PORTRAIT,\r\n      unit: PT,\r\n      format: LETTER,\r\n    });\r\n  };\r\n\r\n  ShowGrids = () => {\r\n    return this.showGrids;\r\n  };\r\n\r\n  ShowGrids = (showGrids) => {\r\n    this.showGrids = showGrids;\r\n  };\r\n\r\n  Grid = () => {\r\n    if (this.pdf === null) return;\r\n\r\n    if (this.showGrids === false) return;\r\n\r\n    const FONT_SIZE = 12;\r\n    const LARGE_FONT_SIZE = 16;\r\n\r\n    this.pdf.setFontSize(12);\r\n    this.pdf.setFont(HELVETICA, NORMAL);\r\n    this.pdf.setTextColor(0x00, 0x88, 0x00);\r\n\r\n    let x;\r\n    let y;\r\n\r\n    this.pdf.text(\"0\", 0, FONT_SIZE);\r\n\r\n    for (x = 1; x <= 8; x++) this.pdf.text(\"\" + x, InToPt(x), FONT_SIZE);\r\n\r\n    for (y = 1; y <= 11; y++) this.pdf.text(\"\" + y, 0, InToPt(y));\r\n\r\n    for (x = 0.25; x <= 8.5; x += 0.25)\r\n      for (y = 0.25; y <= 11; y += 0.25)\r\n        this.pdf.text(\".\", InToPt(x), InToPt(y));\r\n\r\n    this.pdf.setFont(HELVETICA, BOLD);\r\n    this.pdf.setFontSize(LARGE_FONT_SIZE);\r\n    for (x = 1; x <= 8; x += 1)\r\n      for (y = 1; y <= 11; y += 1) this.pdf.text(\".\", InToPt(x), InToPt(y));\r\n\r\n    if (this.fontSize !== null) this.pdf.setFontSize(this.fontSize);\r\n\r\n    if (\r\n      this.textRed !== null &&\r\n      this.textGreen !== null &&\r\n      this.textBlue !== null\r\n    )\r\n      this.pdf.setTextColor(this.textRed, this.textGreen, this.textBlue);\r\n\r\n    if (this.fontName !== null && this.fontStyle !== null)\r\n      this.pdf.setFont(this.fontName, this.fontStyle);\r\n  };\r\n\r\n  MultilineText = (text, x, y, w) => {\r\n    if (this.pdf === null) return;\r\n\r\n    let textLines = [];\r\n\r\n    textLines = this.pdf.splitTextToSize(text, w, {\r\n      fontName: this.fontName,\r\n      fontSize: this.fontSize,\r\n    });\r\n\r\n    this.pdf.text(textLines, x, y);\r\n  };\r\n\r\n  DrawLine = (x, y, w) => {\r\n    this.pdf.line(x, y, x + w, y);\r\n  };\r\n\r\n  Reset = () => {\r\n    this.pdf = null;\r\n  };\r\n\r\n  SetFont = (fontName, fontStyle) => {\r\n    if (this.pdf === null) return;\r\n\r\n    this.pdf.setFont(fontName, fontStyle);\r\n\r\n    this.fontName = fontName;\r\n    this.fontStyle = fontStyle;\r\n  };\r\n\r\n  SetFontSize = (fontSize) => {\r\n    if (this.pdf === null) return;\r\n\r\n    this.pdf.setFontSize(fontSize);\r\n\r\n    this.fontSize = fontSize;\r\n  };\r\n\r\n  Save = (fileName) => {\r\n    if (this.pdf === null) return;\r\n\r\n    this.pdf.save(fileName);\r\n  };\r\n\r\n  SetTextColor = (red, green, blue) => {\r\n    if (this.pdf === null) return;\r\n\r\n    this.pdf.setTextColor(red, green, blue);\r\n\r\n    this.textRed = red;\r\n    this.textGreen = green;\r\n    this.textBlue = blue;\r\n  };\r\n\r\n  SetFillColor = (red, green, blue) => {\r\n    if (this.pdf === null) return;\r\n\r\n    this.pdf.setFillColor(red, green, blue);\r\n\r\n    this.fillRed = red;\r\n    this.fillGreen = green;\r\n    this.fillBlue = blue;\r\n  };\r\n\r\n  showOnPage = () => {\r\n    //this.pdf.output('datauri');\r\n    //window.open(this.pdf.output('bloburl'))\r\n    //this.pdf.output('dataurlnewwindow');\r\n    //return this.pdf.output('datauri')\r\n    var blob = this.pdf.output(\"bloburl\");\r\n    return blob;\r\n  };\r\n  Rectangle = (x, y, w, h) => {\r\n    if (this.pdf === null) return;\r\n\r\n    this.pdf.roundedRect(x, y, w, h, 0, 0, \"F\");\r\n  };\r\n\r\n  textWidth = (text) => {\r\n    var arrayText = text.split(\" \");\r\n    let minWidth = 0;\r\n    //console.log(arrayText)\r\n    for (let i = 0; i < arrayText.length; i++) {\r\n      minWidth = Math.max(minWidth, this.pdf.getTextWidth(arrayText[i]));\r\n    }\r\n    return minWidth / 25; // pt to int\r\n  };\r\n  textWidthMultiLine = (text, width) => {\r\n    let arrayText = this.pdf.splitTextToSize(text, InToPt(width));\r\n    let minWidth = 0;\r\n    for (let i = 0; i < arrayText.length; i++) {\r\n      minWidth = Math.max(minWidth, this.pdf.getTextWidth(arrayText[i]));\r\n    }\r\n    return minWidth / 25; // pt to int\r\n  };\r\n\r\n  adjustTextWidth = (arrayText) => {\r\n    let minWidth = 0;\r\n    for (let i = 0; i < arrayText.length; i++) {\r\n      minWidth = Math.max(minWidth, this.pdf.getTextWidth(arrayText[i]));\r\n    }\r\n    return minWidth / 25; // pt to int\r\n  };\r\n\r\n  tableRow = (\r\n    fill,\r\n    textColor,\r\n    x,\r\n    y,\r\n    values,\r\n    height,\r\n    Widths,\r\n    box,\r\n    align,\r\n    title\r\n  ) => {\r\n    const lines2Fac = 1.75;\r\n    const lines3Fac = 2.7;\r\n    const cols = values.length;\r\n    let textY = y + height / 2 + 0.05;\r\n    // wrap if needed\r\n    let h = height;\r\n    for (i = 1; i <= cols; i++) {\r\n      if (\r\n        this.pdf.getTextWidth(values[i - 1]) > 2 * InToPt(Widths[i - 1]) &&\r\n        h < parseFloat(lines3Fac * height)\r\n      ) {\r\n        //console.log(values[i - 1],this.pdf.getTextWidth(values[i - 1]),.8*InToPt(Widths[i - 1]))\r\n        h = lines3Fac * height;\r\n        textY = y + height / 2 + 0.07;\r\n      } else if (\r\n        this.pdf.getTextWidth(values[i - 1]) > InToPt(Widths[i - 1]) &&\r\n        h < parseFloat(lines2Fac * height)\r\n      ) {\r\n        //console.log(values[i - 1],this.pdf.getTextWidth(values[i - 1]),.8*InToPt(Widths[i - 1]))\r\n        h = lines2Fac * height;\r\n        textY = y + height / 2 + 0.07;\r\n      }\r\n      let textOut;\r\n      if (h > height) {\r\n        textOut = this.pdf.splitTextToSize(\r\n          values[i - 1],\r\n          InToPt(Widths[i - 1] - 0.1)\r\n        );\r\n        // adjust width if necessary\r\n        //console.log(textOut,h,height)\r\n        if (title === true) {\r\n          if (textOut.length > 2 && h < parseFloat(lines3Fac * height))\r\n            h = lines3Fac * height;\r\n          else if (textOut.length > 1 && h < parseFloat(lines2Fac * height))\r\n            h = lines2Fac * height;\r\n          textY = y + height / 2 + 0.07;\r\n          // console.log(textOut,h,height)\r\n        }\r\n      }\r\n    }\r\n    this.SetTextColor(textColor[0], textColor[1], textColor[2]);\r\n    //this.SetFontSize(12);\r\n    var i;\r\n    let rightAlign;\r\n    let xi = x;\r\n    for (i = 1; i <= cols; i++) {\r\n      // wrap if needed\r\n      let textOut;\r\n      if (h > height) {\r\n        textOut = this.pdf.splitTextToSize(\r\n          values[i - 1],\r\n          InToPt(Widths[i - 1] - 0.1)\r\n        );\r\n      } else {\r\n        textOut = values[i - 1];\r\n        if (align !== undefined) {\r\n          if (align[i - 1] !== undefined) {\r\n            if (align[i - 1] === 2) rightAlign = true;\r\n          }\r\n        }\r\n      }\r\n      this.SetFillColor(fill[0], fill[1], fill[2]);\r\n      this.Rectangle(\r\n        InToPt(xi),\r\n        InToPt(y),\r\n        InToPt(Widths[i - 1] + 0.1),\r\n        InToPt(h)\r\n      );\r\n      if (box) {\r\n        this.pdf.setDrawColor(155, 155, 155);\r\n        this.pdf.rect(\r\n          InToPt(xi),\r\n          InToPt(y),\r\n          InToPt(Widths[i - 1] + 0.1),\r\n          InToPt(h)\r\n        );\r\n      }\r\n      if (rightAlign)\r\n        this.RightText(\r\n          values[i - 1],\r\n          InToPt(xi - 0.05),\r\n          InToPt(textY),\r\n          InToPt(Widths[i - 1])\r\n        );\r\n      else this.pdf.text(textOut, InToPt(xi + 0.1), InToPt(textY));\r\n\r\n      //  this.MultilineText(values[i - 1], InToPt(xi + .1), InToPt(y + .25), InToPt(3));\r\n      xi += Widths[i - 1];\r\n    }\r\n    //pdf.SetFillColor(fill[0], fill[1], fill[2]);\r\n    //pdf.Rectangle(InToPt(x), InToPt(y), InToPt(w), InToPt(height));\r\n    //pdf.Text(\"Family Profile\", InToPt(x[0] + .1), InToPt(y + .25));\r\n    //pdf.SetFillColor(115, 153, 198);\r\n    //pdf.Rectangle(InToPt(x[1]), InToPt(y), InToPt(w), InToPt(0.4));\r\n    //pdf.Text(\"Income\", InToPt(x[1] + .1), InToPt(y + .25));\r\n    //pdf.SetFillColor(115, 153, 198);\r\n    //pdf.Rectangle(InToPt(x[2]), InToPt(y), InToPt(w), InToPt(0.4));\r\n    //pdf.Text(\"Retirement Age\", InToPt(x[2] + .1), InToPt(y + .25));\r\n\r\n    return h - height; // excess height from here\r\n  };\r\n\r\n  Text = (text, x, y) => {\r\n    if (this.pdf === null) return;\r\n\r\n    this.pdf.text(text, x, y);\r\n  };\r\n\r\n  CenterText = (text, x, y, w) => {\r\n    if (this.pdf === null) return;\r\n\r\n    let tw = this.pdf.getTextWidth(text);\r\n\r\n    this.pdf.text(text, x + (w - tw) / 2, y);\r\n  };\r\n\r\n  RightText = (text, x, y, w) => {\r\n    if (this.pdf === null) return;\r\n\r\n    let tw = this.pdf.getTextWidth(text);\r\n\r\n    this.pdf.text(text, x + (w - tw) + 0.1, y);\r\n  };\r\n\r\n  Header = (textH, headerOffset) => {\r\n    if (headerOffset === undefined) headerOffset = 0;\r\n    this.SetFillColor(HEADER_RECT_R, HEADER_RECT_G, HEADER_RECT_B);\r\n\r\n    this.Rectangle(\r\n      InToPt(HEADER_RECT_IN_X),\r\n      InToPt(HEADER_RECT_IN_Y + headerOffset),\r\n      InToPt(HEADER_RECT_IN_W),\r\n      InToPt(HEADER_RECT_IN_H)\r\n    );\r\n\r\n    this.SetTextColor(HEADER_TEXT_R, HEADER_TEXT_G, HEADER_TEXT_B);\r\n    this.SetFont(HELVETICA, NORMAL);\r\n    this.SetFontSize(HEADER_TEXT_PT_SIZE);\r\n    this.CenterText(\r\n      textH,\r\n      InToPt(HEADER_TEXT_IN_X),\r\n      InToPt(HEADER_TEXT_IN_Y + headerOffset),\r\n      InToPt(HEADER_TEXT_IN_W)\r\n    );\r\n  };\r\n\r\n  addFooterAndHeader = (headerOffset, footerText, headerText) => {\r\n    this.Footer(footerText);\r\n    this.AddPage();\r\n    this.Header(headerText, headerOffset);\r\n  };\r\n\r\n  Footer = (textF) => {\r\n    this.SetTextColor(TEXT_R, TEXT_G, TEXT_B);\r\n    this.SetFont(TIMES, NORMAL);\r\n    this.SetFontSize(FOOTER_TEXT_PT_SIZE);\r\n    this.Text(textF, InToPt(FOOTER_TEXT_IN_X), InToPt(FOOTER_TEXT_IN_Y));\r\n  };\r\n\r\n  FooterLandscape = (textF) => {\r\n    this.SetTextColor(TEXT_R, TEXT_G, TEXT_B);\r\n    this.SetFont(TIMES, NORMAL);\r\n    this.SetFontSize(FOOTER_TEXT_PT_SIZE);\r\n    this.Text(textF, InToPt(FOOTER_TEXT_IN_X), InToPt(FOOTER_TEXT_IN_Y_L));\r\n  };\r\n\r\n  drawRect(paraLeft, paraY, paraWidth, height, color) {\r\n    this.SetFillColor(color[0], color[1], color[2]);\r\n    this.pdf.rect(\r\n      InToPt(paraLeft),\r\n      InToPt(paraY),\r\n      InToPt(paraWidth),\r\n      InToPt(height),\r\n      \"F\"\r\n    );\r\n  }\r\n\r\n  addFooter = (footer, title) => {\r\n    this.Footer(footer);\r\n    this.AddPage();\r\n    this.Header(title);\r\n  };\r\n\r\n  addHeaderNoFooter = (headerOffset, headerText) => {\r\n    this.AddPage();\r\n    this.Header(headerText, headerOffset);\r\n  };\r\n\r\n  tableRowSingle = (\r\n    fill,\r\n    textColor,\r\n    x,\r\n    y,\r\n    values2,\r\n    height,\r\n    Widths,\r\n    coloured\r\n  ) => {\r\n    const values = [values2];\r\n\r\n    if (coloured)\r\n      // has colour\r\n      this.tableRow(fill, textColor, x, y + 0.1, values, height - 0.1, [1.2]);\r\n    else this.tableRow(fill, textColor, x, y, values, height, Widths);\r\n  };\r\n\r\n}","import { name, version } from \"../../package.json\";\r\nimport {\r\n  GROWTHDIR,\r\n  MONTHS,\r\n  ASSETS,\r\n  ASSET_OWNERSHIP_ACTION,\r\n  ASSET_TAX,\r\n  INCOMESOURCES,\r\n  OWNERSHIP,\r\n  SEX,\r\n  SMOKING,\r\n  MEMBER,\r\n  LIABILITIES,\r\n  INCOMENEEDS,\r\n  PROVINCE,\r\n  QUOTE_SPOUSE,\r\n  QUOTE_CLIENT,\r\n  DEFAULT_QUOTE,\r\n  OUTPUT_WIDTH_PCT,\r\n  APPLET_EP,\r\n  MAX_ORPHAN_DUR_QC,\r\n  MAX_ORPHAN_DUR_NON_QC,\r\n} from \"../definitions/generalDefinitions\";\r\nimport {\r\n  cleanFormat,\r\n  formatMoney,\r\n  getListItemNameFromKey,\r\n  isSingleFamily,\r\n  getDefaultImages,\r\n  getListItemKeyFromName,\r\n} from \"../utils/helper\";\r\n\r\nimport { versionDetails, getAfterTaxTotalIncome } from \"../utils/helper\";\r\nimport { appletMode } from \"../../package.json\";\r\nimport { element } from \"prop-types\";\r\n\r\nexport function setUIDataToAPI(dataInput, outputInsuranceNeed) {\r\n// console.log(dataInput)\r\n  let age = dataInput.Clients[0].Age;\r\n  const taxRate =\r\n    dataInput.length > 1\r\n      ? dataInput.Clients[QUOTE_SPOUSE].avgTaxRate / 100\r\n      : dataInput.Clients[QUOTE_CLIENT].avgTaxRate / 100;\r\n  if (dataInput.length > 1 && dataInput.Clients[QUOTE_SPOUSE].Age < age)\r\n    age = dataInput.Clients[QUOTE_SPOUSE].Age;\r\n  let dataLives = setLives(dataInput);\r\n  let dataAssets = setAssets(dataInput);\r\n  let dataLiabs = setLiabs(dataInput);\r\n  let dataSources = setSources(dataInput, taxRate);\r\n  let dataEstateContings = setEstateContings();\r\n  let dataIncomeNeeds = setIncomeNeeds(dataInput);\r\n  let dataRates = setRates(dataInput);\r\n  let dataProjSettings = setProjSettings(age, dataInput, parseFloat(cleanFormat(outputInsuranceNeed, dataInput.Presentations[0].language)));\r\n  let dataNA = {\r\n    lives: dataLives,\r\n    assets: dataAssets,\r\n    liabilities: dataLiabs,\r\n    personalIncomeSources: dataSources,\r\n    estateContingiencies: dataEstateContings,\r\n    incomeNeeds: dataIncomeNeeds,\r\n    ratesPack: dataRates,\r\n    projectionSettings: dataProjSettings,\r\n    //liabilities: null,\r\n    //personalIncomeSources: null,\r\n    //estateContingiencies:  null,\r\n    //incomeNeeds:  null\r\n    //ratesPack:  null,\r\n    //projectionSettings:  null\r\n  };\r\n // console.log(dataNA)\r\n  return dataNA;\r\n}\r\n\r\nfunction setLives(dataInput) {\r\n  let dataE = [];\r\n  let i;\r\n  // for calc purposes\r\n  for (i = 0; i < dataInput.Clients.length; i++) {\r\n    dataE.push({\r\n      Age: dataInput.Clients[i].Age,\r\n      Sex: dataInput.Clients[i].sexKey, // === SEX.FEMALE.Key ? SEX.FEMALE : SEX.MALE,\r\n      Smk:\r\n        dataInput.Clients[i].smokerKey === SMOKING.SMOKER.Key\r\n          ? \"S_STD\"\r\n          : \"NS_STD\", // 2 and 5 : this MCC stuff with 5 leveles elite ...\r\n      Rating: 100,\r\n      //\t\tmember: (i===1 && dataInput.Clients[i].memberKey===MEMBER.DEPENDENT_ADULT.Key)? MEMBER.SPOUSE.Key: //MEMBER[\"en\"].Values[MEMBER[lang].Values.indexOf(dataInput.Clients[i].member)],\r\n      //\t\t\t\t\tdataInput.Clients[i].memberKey,//Object.values(MEMBER).filter(obj => obj.Key=== dataInput.Clients[i].memberKey)[0],//.value.en,\r\n      member: dataInput.Clients[i].memberKey,\r\n      salary: dataInput.Clients[i].Income,\r\n      CPPeligibility: dataInput.Clients[i].Eligibility / 100,\r\n      retirementAge: dataInput.Clients[i].retirementAge,\r\n      avgTaxRate: dataInput.Clients[i].avgTaxRate / 100,\r\n      isQC: dataInput.Presentations[0].provinceKey === \"QC\" ? true : false,\r\n      Name: dataInput.Clients[i].Name,\r\n    });\r\n  }\r\n  return dataE;\r\n}\r\n\r\nfunction setTaxAPIMethod(TaxKey, assetKey) {\r\n  // based on API enum\r\n  /* public enum taxTreatments\r\n        {\r\n            NonTaxable=0,\r\n            CapitalGainIncome, 1\r\n            CapitalGainAnnual, 2\r\n            Registered, 3\r\n            FullyTaxable, 4\r\n            CapitalGainDividend,  5\r\n            Dividend, 6\r\n            RRIF, 7\r\n            LifeInsurance, 8\r\n            Cash, 9\r\n            InterestIncome, 10\r\n            CapitalGainQSmallBusiness, 11\r\n        } */\r\n  // from\r\n  /* 'Non-taxable',\t\r\n\t\t\t\"Capital Gains Deferred\",\r\n\t\t\t\"Capital Gains Annual\",\r\n\t\t\t'Registered',\t\r\n\t\t\t'Fully Taxable',\t\r\n\t\t\t'Dividend'\t */\r\n  //console.log(Tax,Type,)\r\n\r\n  let taxMethodIndex = 0;\r\n\r\n  if (TaxKey === ASSET_TAX.NON_TAXABLE.Key) taxMethodIndex = 0;\r\n  //NonTaxable\r\n  else if (TaxKey === ASSET_TAX.CAPITAL_GAINS_DEFERRED.Key) {\r\n    if (assetKey === ASSETS.SMALL_BUSINESS_SHARES.Key)\r\n      //value[lang])\r\n      taxMethodIndex = 11;\r\n    // CapitalGainQSmallBusiness, 11\r\n    else taxMethodIndex = 1; // CapitalGainIncome, 1\r\n  } else if (TaxKey === ASSET_TAX.CAPITAL_GAINS_ANNUAL.Key) taxMethodIndex = 2;\r\n  //  CapitalGainAnnual\r\n  else if (TaxKey === ASSET_TAX.FULLY_TAXABLE.Key) {\r\n    if (assetKey === ASSETS.INTEREST_BEARING.Key)\r\n      //value[lang])\r\n      taxMethodIndex = 10;\r\n    //InterestIncome, 10\r\n    else taxMethodIndex = 4; // FullyTaxable, 4\r\n  } else if (TaxKey === ASSET_TAX.REGISTERED.Key) taxMethodIndex = 3;\r\n  //Registered, 3\r\n  else if (TaxKey === ASSET_TAX.DIVIDEND.Key) taxMethodIndex = 6; //  Dividend, 6\r\n\r\n  // console.log(taxMethodIndex)\r\n  return taxMethodIndex;\r\n}\r\n\r\nfunction setAssets(dataInput) {\r\n  let dataE = [];\r\n  let i;\r\n  for (i = 0; i < dataInput.Assets.length; i++) {\r\n    const asset = dataInput.Assets[i];\r\n    const assetDesc = asset.description;\r\n    const assetTypeKey =\r\n      asset.assetTypeKey; /*\r\n      dataInput,\r\n      asset.assetTypeKey,\r\n      asset.assetTaxTypeKey\r\n    ); */ // don't add survivor's insurance do in API // const nonClientInsurance=!(asset.assetTypeKey===ASSETS.LIFE_INSURANCE.Key && (asset.ownerKey===ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key || element.ownerKey===ASSET_OWNERSHIP_ACTION.CLIENT_ROLLOVER.Key))\r\n    /*    console.log(asset) */ dataE.push({\r\n      name: Object.values(ASSETS).filter((obj) => obj.Key === assetTypeKey)[0]\r\n        .value.en,\r\n      desc: assetDesc,\r\n      ID: Object.values(ASSETS).filter((obj) => obj.Key === assetTypeKey)[0].ID,\r\n      //taxMethod: setTaxAPIMethod( asset.assetTaxTypeKey,asset.assetTypeKey),\r\n      taxMethod: asset.assetTaxTypeKey,\r\n      //Object.values(ASSET_TAX).filter(obj => obj.Key=== asset.assetTaxTypeKey)[0].value.en,\r\n      owner: Object.values(ASSET_OWNERSHIP_ACTION).filter(\r\n        (obj) => obj.Key === asset.ownerKey\r\n      )[0].ID, // enums in API is same 0-4\r\n      ACB: asset.ACB,\r\n      smallBusinessCapGainExemption: asset.smallBusinessCapGainExemption,\r\n      dispositionYr:\r\n        asset.assetTaxTypeKey === ASSET_TAX.REGISTERED.Key &&\r\n        asset.ownerKey !== ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key\r\n          ? 99\r\n          : asset.DisposeYr,\r\n      dispositionDur: asset.DisposeDur === 0 ? 1 : asset.DisposeDur,\r\n      dispositionYrUlt: 100,\r\n      currValue: asset.currValue,\r\n      annualGrowth: asset.growth / 100,\r\n      incomeRate: asset.incomeRate / 100,\r\n      contributionAmt: asset.contributionAmt,\r\n      contributionStartYr: asset.contributionStartYr,\r\n      contributionDur: asset.contributionDur,\r\n      withdrawalAmt: asset.withdrawalAmt,\r\n      withdrawalStartYr: asset.withdrawalStartYr,\r\n      withdrawalDur: asset.withdrawalDur,\r\n      RRIFStartAge: asset.RRIFStartAge - 1, // changed from 70 to 71 so adjust here API uses 70\r\n    });\r\n  }\r\n  return dataE;\r\n}\r\n\r\nfunction setLiabs(dataInput) {\r\n  let dataE = [];\r\n  let i;\r\n  for (i = 0; i < dataInput.Liabilitys.length; i++) {\r\n    const growth =\r\n      /*  GROWTHDIR[dataInput.Presentations[0].language].Values.indexOf(\r\n        dataInput.Liabilitys[i].growthDir\r\n      ) */\r\n\r\n      dataInput.Liabilitys[i].growthDirKey === GROWTHDIR.GROWS.Key\r\n        ? dataInput.Liabilitys[i].growth / 100\r\n        : -dataInput.Liabilitys[i].growth / 100;\r\n    const liabTypeKey = dataInput.Liabilitys[i].liabTypeKey;\r\n    const liabDesc = dataInput.Liabilitys[i].description;\r\n  \r\n    dataE.push({\r\n      name: Object.values(LIABILITIES).filter(\r\n        (obj) => obj.Key === liabTypeKey\r\n      )[0].value.en,\r\n      ID: Object.values(LIABILITIES).filter((obj) => obj.Key === liabTypeKey)[0]\r\n        .ID,\r\n      owner: dataInput.Liabilitys[i].ownerKey, // OWNERSHIP[\"en\"].Values[OWNERSHIP[lang].Values.indexOf(dataInput.Liabilitys[i].Owner)],\r\n      desc: liabDesc,\r\n      currValue: dataInput.Liabilitys[i].currValue,\r\n      annualGrowth: growth,\r\n      exposureDur: dataInput.Liabilitys[i].exposureDur,\r\n      annualRepay: dataInput.Liabilitys[i].repay,\r\n    });\r\n  }\r\n  return dataE;\r\n}\r\n\r\nfunction setSources(dataInput, avgTaxRate) {\r\n  let dataE = [];\r\n  let i;\r\n  for (i = 0; i < dataInput.Sources.length; i++) {\r\n    // find source owner avgtaxrate\r\n    let avgTaxRate;\r\n    let salaryOwner = dataInput.Clients.filter((item) => {\r\n      return item.id === dataInput.Sources[i].ownerID;\r\n    });\r\n    if (salaryOwner !== undefined && salaryOwner.length > 0)\r\n      avgTaxRate = salaryOwner[0].avgTaxRate / 100;\r\n\r\n    const sourceTypeKey = dataInput.Sources[i].sourceTypeKey;\r\n    // gov is taken care of in API only needs elig %\r\n    //if (dataInput.Sources[i].Type !== INCOMESOURCES[lang].Values[1] && dataInput.Sources[i].Type !== INCOMESOURCES[lang].Values[2] && dataInput.Sources[i].Type !== INCOMESOURCES[lang].Values[3]) {\r\n    if (\r\n      !(\r\n        dataInput.Sources[i].sourceTypeKey ===\r\n          INCOMESOURCES.GOV_SURVIVORS_PENSION.Key ||\r\n        dataInput.Sources[i].sourceTypeKey ===\r\n          INCOMESOURCES.GOV_ORPHANS_BENEFIT.Key ||\r\n        dataInput.Sources[i].sourceTypeKey ===\r\n          INCOMESOURCES.GOV_DEATH_BENEFIT.Key\r\n      )\r\n    ) {\r\n      dataE.push({\r\n        ID: Object.values(INCOMESOURCES).filter(\r\n          (obj) => obj.Key === sourceTypeKey\r\n        )[0].ID,\r\n        name: Object.values(INCOMESOURCES).filter(\r\n          (obj) => obj.Key === sourceTypeKey\r\n        )[0].value.en,\r\n        amount: dataInput.Sources[i].amount,\r\n        startYear: dataInput.Sources[i].startYear,\r\n        duration: dataInput.Sources[i].duration,\r\n        annualGrowth: dataInput.Presentations[0].inflation / 100,\r\n        taxRate:\r\n          sourceTypeKey === INCOMESOURCES.DIVIDEND_INCOME.Key\r\n            ? dataInput.Sources[i].taxRate / 100\r\n            : avgTaxRate,\r\n        ownerID: dataInput.Sources[i].ownerID,\r\n      });\r\n    }\r\n  }\r\n  return dataE;\r\n}\r\n\r\nfunction setEstateContings() {\r\n  let dataE = [];\r\n  return dataE;\r\n}\r\n\r\nfunction setIncomeNeeds(dataInput) {\r\n  let dataItems = [];\r\n  let i;\r\n  for (i = 0; i < dataInput.Needs.length; i++) {\r\n    const needTypeKey = dataInput.Needs[i].needTypeKey;\r\n    dataItems.push({\r\n      ID: Object.values(INCOMENEEDS).filter((obj) => obj.Key === needTypeKey)[0]\r\n        .ID,\r\n      name: Object.values(INCOMENEEDS).filter(\r\n        (obj) => obj.Key === needTypeKey\r\n      )[0].value.en,\r\n\r\n      amount: dataInput.Needs[i].amount,\r\n      incomePercent: dataInput.Needs[i].Percent / 100,\r\n      startYear: dataInput.Needs[i].startYear,\r\n      duration: dataInput.Needs[i].duration,\r\n      annualGrowth: dataInput.Presentations[0].inflation / 100,\r\n    });\r\n  }\r\n  let dataE = {\r\n    incomePercentAfterDeath: 0.6,\r\n    incomeNeedItems: dataItems,\r\n    upToChildrenOutYrs: 0,\r\n    childrenOutToRetirementYrs: 0,\r\n    retirementToEndYrs: 0,\r\n  };\r\n\r\n  return dataE;\r\n}\r\n\r\nfunction setProjSettings(age, dataInput, outputInsuranceNeed) {\r\n  var tempDate = new Date();\r\n  var date =\r\n    tempDate.getFullYear() +\r\n    \"-\" +\r\n    (tempDate.getMonth() + 1) +\r\n    \"-\" +\r\n    tempDate.getDate();\r\n\r\n  let dataE = {\r\n    deathYear: 0,\r\n    deathOf: 0,\r\n    startYear: 1,\r\n    endYear: 100 - age + 1,\r\n    province: dataInput.Presentations[0].provinceKey,\r\n    language: dataInput.Presentations[0].language === \"en\" ? 0 : 1,\r\n    returnType: 4,\r\n    projectEndOption: dataInput.Presentations[0].periodOption, //toRetirement ? 0 : 1,\r\n    clientsName1: dataInput.Presentations[0].designedFor,\r\n    agentName: dataInput.Presentations[0].designedBy,\r\n    valuationDate: date,\r\n    notes: dataInput.Presentations[0].notes,\r\n    version: versionDetails().version,\r\n    caller: appletMode,\r\n    insuranceAmt: outputInsuranceNeed,\r\n    /*   imageLogo: dataInput.Presentations[0].adviserLogo.image,\r\n    imageLogoSize:dataInput.Presentations[0].adviserLogo.size,\r\n    imageLogoLeft:dataInput.Presentations[0].adviserLogo.left,\r\n    imageLogoAllPages: dataInput.Presentations[0].adviserLogo.allPages,\r\n    imageApplet: dataInput.Presentations[0].adviserLogo.imageApplet */\r\n  };\r\n  return dataE;\r\n}\r\n\r\nfunction setRates(dataInput) {\r\n  // console.log(dataInput.Presentations[0].taxRate / 100)\r\n  let dataE = {\r\n    investmentRate: dataInput.Presentations[0].invRate / 100,\r\n    taxRate: dataInput.Presentations[0].taxRate / 100,\r\n    dividendTaxRate: 0.33,\r\n    capitalGainsInclusion: 0.5,\r\n    inflationRate: dataInput.Presentations[0].inflation / 100,\r\n  };\r\n\r\n  return dataE;\r\n}\r\n\r\nexport function loadSavedDataToUI(savedJSon, dataInput) {\r\n  //console.log(savedJSon)\r\n  dataInput.Presentations[0].language =\r\n    savedJSon.projectionSettings.language === 0 ? \"en\" : \"fr\";\r\n  let i;\r\n  dataInput.Clients = [];\r\n  dataInput.clientsNo = savedJSon.lives.length;\r\n  //console.log(dataInput.Clients)\r\n\r\n  let smk;\r\n  for (i = 0; i < savedJSon.lives.length; i++) {\r\n    smk = savedJSon.lives[i].Smk <= 2 ? \"NS_STD\" : \"S_STD\";\r\n    const memberKey = Object.values(MEMBER).filter(\r\n      (obj) => obj.ID === savedJSon.lives[i].member\r\n    )[0].Key;\r\n    let addLife = true;\r\n\r\n    if (\r\n      APPLET_EP &&\r\n      !(memberKey === MEMBER.CLIENT.Key || memberKey === MEMBER.SPOUSE.Key)\r\n    )\r\n      addLife = false;\r\n\r\n    if (addLife) {\r\n      dataInput.Clients.push({\r\n        id: i + 1,\r\n        Age: savedJSon.lives[i].Age,\r\n        //savedJSon.lives[i].Sex===0? SEX.MALE.Key : SEX.FEMALE.Key,\r\n        sexKey: Object.values(SEX).filter(\r\n          (obj) => obj.ID === savedJSon.lives[i].Sex\r\n        )[0].Key,\r\n        smokerKey:\r\n          smk === \"NS_STD\" ? SMOKING.NON_SMOKER.Key : SMOKING.SMOKER.Key,\r\n        Income: savedJSon.lives[i].salary,\r\n        avgTaxRate: 100 * savedJSon.lives[i].avgTaxRate,\r\n        //member: MEMBER[data.lang].Values[savedJSon.lives[i].member],\r\n        //MEMBER.[savedJSon.lives[i].member].value[data.lang],\r\n        memberKey: memberKey,\r\n        retirementAge: savedJSon.lives[i].retirementAge,\r\n        Eligibility: 100 * savedJSon.lives[i].CPPeligibility,\r\n        Name: savedJSon.lives[i].Name,\r\n      });\r\n    }\r\n  }\r\n\r\n  //console.log(dataInput.Clients)\r\n\r\n  dataInput.Assets = [];\r\n  dataInput.assetsNo = savedJSon.assets.length;\r\n\r\n  for (i = 0; i < savedJSon.assets.length; i++) {\r\n    // console.log((savedJSon.assets[i].owner),Object.values(ASSET_OWNERSHIP_ACTION).filter(obj => obj.ID=== savedJSon.assets[i].owner)[0].Key)\r\n    // console.log(Object.values(ASSET_OWNERSHIP_ACTION).filter(obj => obj.ID=== savedJSon.assets[i].owner)[0].Key, Object.values(ASSET_TAX).filter(obj => obj.ID=== savedJSon.assets[i].taxMethod)[0].Key)\r\n    // as of ver 1.0.7 personal residence became principal residence\r\n\r\n    if (savedJSon.assets[i].name === ASSETS.PERSONAL_RESIDENCE.value.oldName)\r\n      savedJSon.assets[i].name = ASSETS.PERSONAL_RESIDENCE.value.en;\r\n\r\n    let ownerKey = Object.values(ASSET_OWNERSHIP_ACTION).filter(\r\n      (obj) => obj.ID === savedJSon.assets[i].owner\r\n    )[0].Key;\r\n\r\n    if (APPLET_EP && savedJSon.assets[i].name === ASSETS.RRSP_RRIF.value.en) {\r\n      if (savedJSon.lives.length === 1)\r\n        ownerKey = ASSET_OWNERSHIP_ACTION.CLIENT.Key;\r\n      else {\r\n        if (ownerKey !== ASSET_OWNERSHIP_ACTION.CLIENT.Key)\r\n          ownerKey = ASSET_OWNERSHIP_ACTION.SPOUSE.Key;\r\n      }\r\n    }\r\n\r\n    dataInput.Assets.push({\r\n      id: i + 1,\r\n      //assetTypeKey: Object.values(ASSETS).filter(obj => obj.ID=== savedJSon.assets[i].ID)[0].Key,\r\n      assetTypeKey: findMatchingKey(\r\n        Object.values(ASSETS),\r\n        savedJSon.assets[i].name\r\n      ),\r\n      description: savedJSon.assets[i].desc,\r\n      ownerKey: ownerKey,\r\n      assetTaxTypeKey: Object.values(ASSET_TAX).filter(\r\n        (obj) => obj.ID === savedJSon.assets[i].taxMethod\r\n      )[0].Key,\r\n      currValue: savedJSon.assets[i].currValue,\r\n      growth: savedJSon.assets[i].annualGrowth * 100,\r\n      DisposeYr: savedJSon.assets[i].dispositionYr,\r\n      DisposeDur: savedJSon.assets[i].dispositionDur,\r\n      ACB: savedJSon.assets[i].ACB,\r\n      smallBusinessCapGainExemption:\r\n        savedJSon.assets[i].smallBusinessCapGainExemption,\r\n      contributionAmt: savedJSon.assets[i].contributionAmt,\r\n      contributionStartYr: savedJSon.assets[i].contributionStartYr,\r\n      contributionDur: savedJSon.assets[i].contributionDur,\r\n      withdrawalAmt: savedJSon.assets[i].withdrawalAmt,\r\n      withdrawalStartYr: savedJSon.assets[i].withdrawalStartYr,\r\n      withdrawalDur: savedJSon.assets[i].withdrawalDur,\r\n      incomeRate: savedJSon.assets[i].incomeRate * 100,\r\n      RRIFStartAge: savedJSon.assets[i].RRIFStartAge + 1 ,  // changed from 70 to 71 so adjust here API uses 70\r\n    });\r\n  }\r\n\r\n  dataInput.Liabilitys = [];\r\n  dataInput.liabilitysNo = savedJSon.liabilities.length;\r\n\r\n  for (i = 0; i < savedJSon.liabilities.length; i++) {\r\n    // console.log(savedJSon.liabilities[i])\r\n    // console.log(findMatchingKey(Object.values(LIABILITIES),savedJSon.liabilities[i].name))\r\n    dataInput.Liabilitys.push({\r\n      id: i + 1,\r\n      //liabTypeKey: Object.values(LIABILITIES).filter(obj => obj.ID=== savedJSon.liabilities[i].ID)[0].Key,\r\n      liabTypeKey: findMatchingKey(\r\n        Object.values(LIABILITIES),\r\n        savedJSon.liabilities[i].name\r\n      ),\r\n      description: savedJSon.liabilities[i].desc,\r\n   \r\n      ownerKey: OWNERSHIP.CLIENT.Key,\r\n      currValue: savedJSon.liabilities[i].currValue,\r\n      /* growthDir:\r\n        savedJSon.liabilities[i].annualGrowth >= 0\r\n          ? GROWTHDIR[dataInput.Presentations[0].language].Values[0]\r\n          : GROWTHDIR[dataInput.Presentations[0].language].Values[1], */\r\n      growthDirKey:\r\n        savedJSon.liabilities[i].annualGrowth >= 0\r\n          ? GROWTHDIR.GROWS.Key\r\n          : GROWTHDIR.REDUCES.Key,\r\n      growth: Math.abs(savedJSon.liabilities[i].annualGrowth * 100),\r\n      exposureDur: savedJSon.liabilities[i].exposureDur,\r\n      assetTaxLiabID: 0,\r\n      repay: savedJSon.liabilities[i].annualRepay,\r\n    });\r\n  }\r\n\r\n  dataInput.Sources = [];\r\n\r\n  dataInput.sourcesNo = savedJSon.personalIncomeSources.length;\r\n\r\n  for (i = 0; i < savedJSon.personalIncomeSources.length; i++) {\r\n    dataInput.Sources.push({\r\n      id: i + 1,\r\n      //sourceTypeKey: Object.values(INCOMESOURCES).filter(obj => obj.ID=== savedJSon.personalIncomeSources[i].ID)[0].Key,\r\n      //sourceTypeKey: Object.values(INCOMESOURCES).filter(obj => obj.value.en=== savedJSon.personalIncomeSources[i].Name)[0].Key,\r\n      sourceTypeKey: findMatchingKey(\r\n        Object.values(INCOMESOURCES),\r\n        savedJSon.personalIncomeSources[i].Name\r\n      ),\r\n\r\n      amount: savedJSon.personalIncomeSources[i].amount,\r\n      startYear: savedJSon.personalIncomeSources[i].startYear,\r\n      duration: savedJSon.personalIncomeSources[i].duration,\r\n      taxRate: savedJSon.personalIncomeSources[i].taxRate * 100,\r\n      ownerID:\r\n        savedJSon.personalIncomeSources[i].ownerID === undefined ||\r\n        savedJSon.personalIncomeSources[i].ownerID === 0\r\n          ? dataInput.Clients.length > 1\r\n            ? 2\r\n            : 1\r\n          : savedJSon.personalIncomeSources[i].ownerID, // spouse or 1st child\r\n    });\r\n  }\r\n\r\n  dataInput.Needs = [];\r\n\r\n  //console.log(savedJSon.incomeNeeds.incomeNeedItems.length)\r\n\r\n  dataInput.needsNo = savedJSon.incomeNeeds.incomeNeedItems.length;\r\n\r\n  for (i = 0; i < savedJSon.incomeNeeds.incomeNeedItems.length; i++) {\r\n    //console.log(i,savedJSon.incomeNeeds.incomeNeedItems[i].amount, Object.values(INCOMENEEDS).filter(obj => obj.ID=== savedJSon.incomeNeeds.incomeNeedItems[i].ID)[0].Key)\r\n    const needKey = findMatchingKey(\r\n      Object.values(INCOMENEEDS),\r\n      savedJSon.incomeNeeds.incomeNeedItems[i].name\r\n    );\r\n    let amt = savedJSon.incomeNeeds.incomeNeedItems[i].amount;\r\n    if (\r\n      needKey === INCOMENEEDS.PERCET_OF_INCOME.Key &&\r\n      dataInput.Clients.length > 1\r\n    )\r\n      // ie not single or EP\r\n      amt = parseInt(\r\n        savedJSon.incomeNeeds.incomeNeedItems[i].incomePercent *\r\n          getAfterTaxTotalIncome(dataInput.Clients, 1)\r\n      );\r\n    dataInput.Needs.push({\r\n      id: i + 1,\r\n      //needTypeKey: Object.values(INCOMENEEDS).filter(obj => obj.ID=== savedJSon.incomeNeeds.incomeNeedItems[i].ID)[0].Key,\r\n      //needTypeKey: Object.values(INCOMENEEDS).filter(obj => obj.value.en=== savedJSon.incomeNeeds.incomeNeedItems[i].name)[0].Key,\r\n      needTypeKey: needKey,\r\n\r\n      Percent: savedJSon.incomeNeeds.incomeNeedItems[i].incomePercent * 100,\r\n      amount: amt,\r\n      startYear: savedJSon.incomeNeeds.incomeNeedItems[i].startYear,\r\n      duration: savedJSon.incomeNeeds.incomeNeedItems[i].duration,\r\n    });\r\n  }\r\n\r\n  dataInput.Presentations = [];\r\n  dataInput.presentationsNo = 1;\r\n\r\n  //for (i = 0; i < savedJSon.liabilities.length; i++) {\r\n\r\n  const dataInputDefImages = loadDefaultCase();\r\n  let logo;\r\n  let appletImage;\r\n  /* console.log(dataInputDefImages) */\r\n  if (dataInputDefImages !== undefined && dataInputDefImages !== null) {\r\n    logo = dataInputDefImages.Presentations[0].adviserLogo;\r\n    appletImage = dataInputDefImages.Presentations[0].appletImage;\r\n  } else {\r\n    /* logo={image:null, left: 0,size: 90, allPages: false}\r\n    appletImage={image:null, left: 0,size: 90, allPages: false} */\r\n    const images = getDefaultImages();\r\n    logo = images.adviserLogo; //  {image:null, left: 0,size: OUTPUT_WIDTH_PCT, allPages: false, top:true, showDetails:false}\r\n    appletImage = images.appletImage; //{image:APPLET_INA? require(\"../images/INA.png\"):require(\"../images/estate.protection.applet.cover.graphic.png\"), left: 0,size: OUTPUT_WIDTH_PCT, allPages: false, top:true, showDetails:false}\r\n  }\r\n\r\n  dataInput.Presentations.push({\r\n    id: 1,\r\n    provinceKey: Object.values(PROVINCE).filter(\r\n      (obj) => obj.ID === savedJSon.projectionSettings.province\r\n    )[0].Key,\r\n    invRate: savedJSon.ratesPack.investmentRate * 100,\r\n    inflation: savedJSon.ratesPack.inflationRate * 100,\r\n    taxRate: savedJSon.ratesPack.taxRate * 100,\r\n    designedFor: savedJSon.projectionSettings.clientsName1,\r\n    designedBy: savedJSon.projectionSettings.agentName,\r\n    valuationDate: savedJSon.projectionSettings.valuationDate,\r\n    notes: savedJSon.projectionSettings.notes,\r\n    // version: savedJSon.projectionSettings.version, keep curr app version as opposed to saved ver\r\n    language: savedJSon.projectionSettings.language === 0 ? \"en\" : \"fr\",\r\n    periodOption: savedJSon.projectionSettings.projectEndOption, //=== DISPLAY_RETIREMENT add this for saved files\r\n\r\n    adviserLogo: logo,\r\n    appletImage: appletImage,\r\n    //imageApplet:savedJSon.projectionSettings.imageApplet,\r\n  });\r\n\r\n  return dataInput;\r\n}\r\n\r\nexport function loadDefaultCase() {\r\n  let storageKey = DEFAULT_QUOTE;\r\n\r\n  const objJSONData = JSON.parse(localStorage.getItem(storageKey));\r\n  // make sure details dont show\r\n  //objJSONData.Presentations[0].adviserLogo.showDetails=false\r\n  return objJSONData;\r\n}\r\n\r\nexport function getOutputValues(data) {\r\n  let output = {\r\n    designedFor: \"\",\r\n    designedBy: \"\",\r\n    dateApplet: \"\",\r\n    province: \"\",\r\n    clients: [],\r\n    assets: [],\r\n    liabilities: [],\r\n    source: [],\r\n    totalLiab: 0,\r\n    Income: 0,\r\n    Income2: 0,\r\n    survivorATaxIncome: 0,\r\n    percentNeed1: 0,\r\n    percentNeed2: [],\r\n    govDB: 0,\r\n    totalAsset: 0,\r\n    totalDisposeAsset: 0,\r\n    totalLiab: 0,\r\n    totalSource: 0,\r\n    totalSource2: 0,\r\n    percentNeed1: 0,\r\n    totalSource: 0,\r\n    totalSourceATax: 0,\r\n    totalSource2ATax: 0,\r\n    infRate: 0,\r\n    invRate: 0,\r\n    insNeedLE: 0,\r\n    insNeedRet: 0,\r\n    insNeedYgChild25: 0,\r\n    insNeedYgChild18: 0,\r\n    ygChild: 100,\r\n    hasChild: false,\r\n  };\r\n\r\n  let dateObj = new Date();\r\n  let month = dateObj.getUTCMonth() + 1; //months from 1-12\r\n  let day = dateObj.getUTCDate();\r\n  let year = dateObj.getUTCFullYear();\r\n  const input = data.dataInput;\r\n  const singleFamily = isSingleFamily(input.Clients);\r\n\r\n  output.language = input.Presentations[0].language;\r\n  output.dateApplet =\r\n    output.language === \"en\"\r\n      ? MONTHS[output.language][month - 1] + \" \" + day + \", \" + year\r\n      : day + \" \" + MONTHS[output.language][month - 1] + \" \" + year;\r\n  //output.language === \"en\"\r\n  //\t? months[month - 1] + \" \" + day + \", \" + year\r\n  //\t: day + \" \" + monthsFr[month - 1] + \" \" + year;\r\n  output.designedFor = input.Presentations[0].designedFor;\r\n  output.designedBy = input.Presentations[0].designedBy;\r\n  output.province = getListItemNameFromKey(\r\n    //input.Presentations[0].Province\r\n    PROVINCE,\r\n    input.Presentations[0].provinceKey,\r\n    output.language\r\n  );\r\n\r\n  //const retAge = input.Clients[0].retirementAge;\r\n  //const retAge2 = input.Clients[1].retirementAge;\r\n  output.Income = input.Clients[QUOTE_CLIENT].Income;\r\n  output.Income2 =\r\n    input.Clients.length > 1 ? input.Clients[QUOTE_SPOUSE].Income : 0;\r\n\r\n  output.invRate = input.Presentations[0].invRate;\r\n  output.infRate = input.Presentations[0].inflation;\r\n \r\n  output.insNeedRet = parseFloat(cleanFormat(data.insuranceNeedRet, output.language));\r\n  output.insNeedLE = parseFloat(cleanFormat(data.insuranceNeedLE, output.language));\r\n\r\n  output.ygChild = 100;\r\n  output.hasChild = false;\r\n  const childMember = MEMBER.CHILD.Key;\r\n  let Children = input.Clients.filter(function (item) {\r\n    return item.memberKey === childMember;\r\n  });\r\n  if (Children.length > 0) {\r\n    output.hasChild = true;\r\n    Children.forEach((element) => {\r\n      if (element.Age <= output.ygChild) output.ygChild = element.Age;\r\n    });\r\n  }\r\n\r\n  const provinceKey = getListItemKeyFromName(PROVINCE, output.province);\r\n  const maxDur =\r\n    provinceKey === \"QC\" ? MAX_ORPHAN_DUR_QC : MAX_ORPHAN_DUR_NON_QC;\r\n  output.youngestChildEndAge = maxDur;\r\n  if (output.hasChild)\r\n    output.youngestChildEndAge = Math.min(\r\n      maxDur,\r\n      input.Clients.filter((item) => {\r\n        return item.Age === output.ygChild;\r\n      })[0].retirementAge\r\n    );\r\n\r\n  //console.log(data);\r\n  output.insNeedYgChild25 = 0;\r\n  output.insNeedYgChild18 = 0;\r\n  for (\r\n    let i = 0;\r\n    i < output.youngestChildEndAge - output.ygChild;\r\n    output.insNeedYgChild25 +=\r\n      data.dataShortfall[i++] / Math.pow(1 + output.invRate / 100, i - 1)\r\n  );\r\n\r\n  for (\r\n    let i = 0;\r\n    i < 18 - output.ygChild;\r\n    output.insNeedYgChild18 +=\r\n      data.dataShortfall[i++] / Math.pow(1 + output.invRate / 100, i - 1)\r\n  );\r\n\r\n  output.insNeedYgChild25 =\r\n    output.insNeedYgChild25 < 0 ? 0 : output.insNeedYgChild25;\r\n  output.insNeedYgChild18 =\r\n    output.insNeedYgChild18 < 0 ? 0 : output.insNeedYgChild18;\r\n\r\n  /* let insNeedYgChild18=cleanFormat(insNeedRet)*((Math.pow(1+invRate/100,18-ygChild))/(Math.pow(1+invRate/100,retAge2-input.Clients[1].Age)));\r\n\t\t\t let insNeedYgChild25=cleanFormat(insNeedRet)*((Math.pow(1+invRate/100,25-ygChild))/(Math.pow(1+invRate/100,retAge2-input.Clients[1].Age)));*/\r\n\r\n  output.liabilities = [];\r\n\r\n  Object.values(LIABILITIES).forEach((element) => {\r\n    if (element.order > 0)\r\n      output.liabilities.push({\r\n        name: element.value[output.language],\r\n        value: 0,\r\n      });\r\n  });\r\n\r\n  /* LIABILITIES[output.language].Values.forEach(function(element) {\r\n\t\t  liabilities.push({ name: element, value: 0 });\r\n\t\t}); */\r\n  /* \t\toutput.incomeNeeds = [];\r\n\t\tINCOMENEEDS[output.language].Values.forEach(function(element) {\r\n\t\t  output.incomeNeeds.push({ name: element, value: 0 });\r\n\t\t});\r\n */\r\n\r\n  output.incomeNeeds = [];\r\n  Object.values(INCOMENEEDS).forEach((element) => {\r\n    output.incomeNeeds.push({ name: element.value[output.language], value: 0 });\r\n  });\r\n\r\n  // populate with what was assigned'\r\n  output.totalLiab = 0;\r\n  output.totalLiabExcludeDeathRelated = 0;\r\n  input.Liabilitys.forEach((element) => {\r\n    //let pos = liabilities.findIndex(i => i.name === element.Type);\r\n    /* let pos = liabilities.indexOf(\r\n\t\t\tliabilities.filter(i => i.name === element.Type)[0]\r\n\t\t  ); */\r\n    let pos = output.liabilities.indexOf(\r\n      output.liabilities.filter(\r\n        (i) =>\r\n          i.name ===\r\n          getListItemNameFromKey(\r\n            LIABILITIES,\r\n            element.liabTypeKey,\r\n            output.language\r\n          )\r\n      )[0]\r\n    );\r\n    output.totalLiab += element.currValue;\r\n\r\n    output.totalLiabExcludeDeathRelated +=\r\n      element.liabTypeKey === LIABILITIES.LAST_EXPENSES.Key ||\r\n      element.liabTypeKey === LIABILITIES.LEGAL_AND_EXECUTOR_FEES.Key ||\r\n      element.liabTypeKey === LIABILITIES.PROBATE.Key\r\n        ? 0\r\n        : element.currValue;\r\n    if (pos !== undefined) output.liabilities[pos].value += element.currValue;\r\n  });\r\n\r\n  output.clients = [];\r\n  let grossIncome = 0;\r\n  input.Clients.forEach(function (element) {\r\n    //let income = \"$\" + formatMoney(element.Income, 0, \",\", \",\");\r\n    grossIncome += element.Income;\r\n    output.clients.push({\r\n      id: element.id,\r\n      memberKey: element.memberKey,\r\n      age: element.Age,\r\n      name: element.Name,\r\n      income: element.Income, //income,//element.memberKey === childMember ? \" - \" : income,\r\n      ret:\r\n        element.memberKey === childMember && !singleFamily\r\n          ? \" - \"\r\n          : element.retirementAge,\r\n    });\r\n  });\r\n\r\n  output.assets = [];\r\n  Object.values(ASSETS).forEach((element) => {\r\n    // console.log(element)\r\n    if (\r\n      !(\r\n        appletMode === \"EP\" &&\r\n        element.Key === ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.Key\r\n      )\r\n    )\r\n      output.assets.push({\r\n        name: element.value[output.language],\r\n        value: 0,\r\n        disposeValue: 0,\r\n      });\r\n  });\r\n\r\n  /*     ASSETS[output.language].Values.forEach(function(element) {\r\n\t\t  assets.push({ name: element, value: 0 });\r\n\t\t}); */\r\n  /*  UNLISTED[output.language].Assets.Values.forEach(function(element) {\r\n\t\t  assets.push({ name: element, value: 0 });\r\n\t\t}); */\r\n  output.totalAsset = 0;\r\n  output.totalAssetExcludeInsurance = 0;\r\n  output.totalAssetInsurance = 0;\r\n  output.totalAssetInsuranceIfSpouse = 0;\r\n  input.Assets.forEach((element) => {\r\n    // console.log(element)\r\n    //let pos = assets.findIndex(i => i.name === element.Type);\r\n    let pos = output.assets.indexOf(\r\n      output.assets.filter(\r\n        (i) =>\r\n          i.name ===\r\n          getListItemNameFromKey(ASSETS, element.assetTypeKey, output.language)\r\n      )[0]\r\n    );\r\n    let showAsDisposed =\r\n      pos !== undefined && pos >= 0 && element.DisposeYr === 0;\r\n    if (\r\n      element.assetTypeKey === ASSETS.LIFE_INSURANCE.Key &&\r\n      !(\r\n        element.ownerKey === ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key ||\r\n        element.ownerKey === ASSET_OWNERSHIP_ACTION.CLIENT_ROLLOVER.Key\r\n      )\r\n    )\r\n      showAsDisposed = false;\r\n    output.totalAsset += element.currValue;\r\n    output.totalAssetExcludeInsurance +=\r\n      element.assetTypeKey === ASSETS.LIFE_INSURANCE.Key\r\n        ? 0\r\n        : element.currValue;\r\n    output.totalAssetInsurance +=\r\n      element.assetTypeKey === ASSETS.LIFE_INSURANCE.Key &&\r\n      !(\r\n        element.ownerKey === ASSET_OWNERSHIP_ACTION.SPOUSE.Key ||\r\n        element.ownerKey === ASSET_OWNERSHIP_ACTION.JOINT.Key\r\n      )\r\n        ? element.currValue\r\n        : 0;\r\n    output.totalAssetInsuranceIfSpouse +=\r\n      element.assetTypeKey === ASSETS.LIFE_INSURANCE.Key &&\r\n      element.ownerKey !== ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key &&\r\n      element.ownerKey !== ASSET_OWNERSHIP_ACTION.CLIENT_ROLLOVER.Key\r\n        ? element.currValue\r\n        : 0;\r\n    output.totalDisposeAsset += showAsDisposed ? element.currValue : 0;\r\n\r\n    if (pos !== undefined && pos >= 0)\r\n      output.assets[pos].value += element.currValue;\r\n    if (showAsDisposed) output.assets[pos].disposeValue += element.currValue;\r\n  });\r\n\r\n  let otherAssetsList = \"\";\r\n  input.Assets.forEach((element) => {\r\n    if (\r\n      element.assetTypeKey === ASSETS.OTHER_ASSETS.Key &&\r\n      element.currValue > 0\r\n    )\r\n      otherAssetsList +=\r\n        \" \" +\r\n        (element.description === \"\" ? \"...\" : element.description) +\r\n        \" - \";\r\n  });\r\n  if (otherAssetsList !== \"\")\r\n    output.otherAssetsList =\r\n      \"* \" +\r\n      ASSETS.OTHER_ASSETS.value[output.language] +\r\n      \":\" +\r\n      otherAssetsList.substring(0, otherAssetsList.length - 3);\r\n  else output.otherAssetsList = \"\";\r\n  /* output.sources = [];\r\n\t\toutput.govDB = 0;\r\n\t\tconst srcDB =INCOMESOURCES.GOV_DEATH_BENEFIT.value[output.language];\r\n\t\tINCOMESOURCES[output.language].Values.forEach(function(element) {\r\n\t\t  output.sources.push({ name: element, value: 0 });\r\n\t\t}); */\r\n\r\n  output.sources = [];\r\n  output.govDB = 0;\r\n  const srcDB = INCOMESOURCES.GOV_DEATH_BENEFIT.Key; //value[output.language];\r\n  Object.values(INCOMESOURCES).forEach((element) => {\r\n    output.sources.push({\r\n      name: element.value[output.language],\r\n      value: 0,\r\n      valueAtDeath: 0,\r\n    });\r\n  });\r\n\r\n  // populate with what was assigned'\r\n  output.totalSource = 0;\r\n  output.totalSource2 = 0;\r\n  output.totalSourceATax = 0;\r\n  output.totalSource2ATax = 0;\r\n  output.totalSourceAtDeath = 0;\r\n  output.totalSource2AtDeath = 0;\r\n  output.totalSourceATaxAtDeath = 0;\r\n  output.totalSource2ATaxAtDeath = 0;\r\n  output.totalDesiredGrossIncome = 0;\r\n  output.totalDesiredGrossIncome2 = 0;\r\n  // NOTE \"this\" is not available inside inline functions, hence:\r\n  // or just use arrow functions\r\n  let srcOrphan = INCOMESOURCES.GOV_ORPHANS_BENEFIT.Key; //value[output.language];\r\n // console.log(input.Sources);\r\n  input.Sources.forEach(function (element) {\r\n    /*  let pos = output.sources.indexOf(\r\n\t\t\toutput.sources.filter(i => i.name === element.Type)[0]\r\n\t\t  );\r\n\t\t   */\r\n    let pos = output.sources.indexOf(\r\n      output.sources.filter(\r\n        (i) =>\r\n          i.name ===\r\n          getListItemNameFromKey(\r\n            INCOMESOURCES,\r\n            element.sourceTypeKey,\r\n            output.language\r\n          )\r\n      )[0]\r\n    );\r\n\r\n    if (element.sourceTypeKey === srcDB) {\r\n      // add gov DB\r\n      output.govDB = element.amount;\r\n      output.totalAsset += output.govDB;\r\n      output.totalDisposeAsset += output.govDB;\r\n    } else {\r\n      output.totalSource += element.amount;\r\n      if (element.startYear === 0) output.totalSourceAtDeath += element.amount;\r\n      // no orphans\r\n      output.totalSource2 +=\r\n        element.sourceTypeKey !== srcOrphan ? element.amount : 0;\r\n      if (element.startYear === 0)\r\n        output.totalSource2AtDeath +=\r\n          element.sourceTypeKey !== srcOrphan ? element.amount : 0;\r\n    }\r\n    if (pos !== undefined) {\r\n      output.sources[pos].value += element.amount;\r\n      if (element.startYear === 0)\r\n        output.sources[pos].valueAtDeath += element.amount;\r\n    }\r\n  });\r\n  // remove gov db from sources\r\n  output.sources = output.sources.filter(\r\n    (i) =>\r\n      i.name !== getListItemNameFromKey(INCOMESOURCES, srcDB, output.language)\r\n  ); //output.srcDB);\r\n  // after tax\r\n  output.totalSourceATax =\r\n    input.Clients.length > 1\r\n      ? output.totalSource * (1 - input.Clients[QUOTE_SPOUSE].avgTaxRate / 100)\r\n      : output.totalSource * (1 - input.Clients[QUOTE_CLIENT].avgTaxRate / 100);\r\n  output.totalSource2ATax =\r\n    input.Clients.length > 1\r\n      ? output.totalSource2 * (1 - input.Clients[QUOTE_SPOUSE].avgTaxRate / 100)\r\n      : output.totalSource2 *\r\n        (1 - input.Clients[QUOTE_CLIENT].avgTaxRate / 100);\r\n\r\n  output.totalSourceATaxAtDeath =\r\n    input.Clients.length > 1\r\n      ? output.totalSourceAtDeath *\r\n        (1 - input.Clients[QUOTE_SPOUSE].avgTaxRate / 100)\r\n      : output.totalSourceAtDeath *\r\n        (1 - input.Clients[QUOTE_CLIENT].avgTaxRate / 100);\r\n  output.totalSource2ATaxAtDeath =\r\n    input.Clients.length > 1\r\n      ? output.totalSource2AtDeath *\r\n        (1 - input.Clients[QUOTE_SPOUSE].avgTaxRate / 100)\r\n      : output.totalSource2AtDeath *\r\n        (1 - input.Clients[QUOTE_CLIENT].avgTaxRate / 100);\r\n\r\n  output.percentNeed1 = 0;\r\n  output.percentNeed2 = [];\r\n  output.percent1 = 0;\r\n  output.percent2 = [];\r\n  var totalNeed = 0;\r\n  const needPercent = INCOMENEEDS.PERCET_OF_INCOME.Key;\r\n  /* output.needs = [];\r\n\t\tINCOMENEEDS[output.language].Values.forEach(function(element) {\r\n\t\t  output.needs.push({ name: element, value: 0 });\r\n\t\t});\r\n */\r\n  output.needs = [];\r\n  Object.values(INCOMENEEDS).forEach((element) => {\r\n    output.needs.push({ name: element.value[output.language], value: 0 });\r\n  });\r\n\r\n  output.totalNeed = 0;\r\n  input.Needs.forEach(function (element) {\r\n    //let pos = needs.findIndex(i => i.name === element.Type);\r\n    //let pos = output.needs.indexOf(output.needs.filter(i => i.name === element.Type)[0]);\r\n    let pos = output.needs.indexOf(\r\n      output.needs.filter(\r\n        (i) =>\r\n          i.name ===\r\n          getListItemNameFromKey(\r\n            INCOMENEEDS,\r\n            element.needTypeKey,\r\n            output.language\r\n          )\r\n      )[0]\r\n    );\r\n\r\n    output.totalNeed += element.amount;\r\n    if (element.needTypeKey === needPercent) {\r\n      if (output.percent1 === 0) {\r\n        output.percent1 = element.Percent;\r\n        output.percentNeed1 = element.amount;\r\n        output.totalDesiredGrossIncome = (grossIncome * element.Percent) / 100;\r\n      } else {\r\n        output.percent2.push(element.Percent);\r\n        output.percentNeed2.push(element.amount);\r\n        output.totalDesiredGrossIncome2 +=\r\n          (grossIncome * element.Percent) / 100;\r\n      }\r\n    }\r\n    if (pos !== undefined) output.needs[pos].value += element.amount;\r\n  });\r\n\r\n  //\t\tif (data.dataCashFlowGov !== undefined)\r\n  //\t\t\tvar maxYScale = 10000 * Math.ceil(1 + Math.max(Math.max(...data.dataCashFlowGov), Math.max(...data.dataCashFlowNeeds), Math.max(...data.dataShortfall), Math.max(...data.dataCashFlowPersonal)) / 10000);\r\n // console.log(output);\r\n\r\n  return output;\r\n}\r\n\r\nfunction findMatchingKey(objValues, nameFromFile) {\r\n  return objValues.filter(\r\n    (obj) =>\r\n      obj.value.en\r\n        .replace(/ /g, \"\")\r\n        .replace(\r\n          /[\\u00A0\\u1680\\u180e\\u2000-\\u2009\\u200a\\u200b\\u202f\\u205f\\u3000]/g,\r\n          \"\"\r\n        ) ==\r\n        nameFromFile\r\n          .replace(/ /g, \"\")\r\n          .replace(\r\n            /[\\u00A0\\u1680\\u180e\\u2000-\\u2009\\u200a\\u200b\\u202f\\u205f\\u3000]/g,\r\n            \"\"\r\n          ) ||\r\n      obj.value.fr\r\n        .replace(/ /g, \"\")\r\n        .replace(\r\n          /[\\u00A0\\u1680\\u180e\\u2000-\\u2009\\u200a\\u200b\\u202f\\u205f\\u3000]/g,\r\n          \"\"\r\n        ) ==\r\n        nameFromFile\r\n          .replace(/ /g, \"\")\r\n          .replace(\r\n            /[\\u00A0\\u1680\\u180e\\u2000-\\u2009\\u200a\\u200b\\u202f\\u205f\\u3000]/g,\r\n            \"\"\r\n          )\r\n  )[0].Key;\r\n}\r\n","import { readMCCData } from \"../data/dataExchangeMCC\";\r\nimport {\r\n  PROVINCE,\r\n  ASSET_API_OUTPUT_Year,\r\n  ASSET_API_OUTPUT_Age,\r\n  ASSET_API_OUTPUT_FMV,\r\n  ASSET_API_OUTPUT_EOYBalance,\r\n  ASSET_API_OUTPUT_ACB,\r\n  ASSET_API_OUTPUT_UCC,\r\n  ASSET_API_OUTPUT_CCA,\r\n  ASSET_API_OUTPUT_CapitalGain,\r\n  ASSET_API_OUTPUT_TaxabaleGain,\r\n  ASSET_API_OUTPUT_Recapture,\r\n  ASSET_API_OUTPUT_TaxPayable,\r\n  ASSET_API_OUTPUT_CapGainsExemption,\r\n  ASSET_API_OUTPUT_Deposits,\r\n  ASSET_API_OUTPUT_Withdrawals,\r\n  ASSET_API_OUTPUT_RRIF,\r\n  ASSET_API_OUTPUT_TaxPayableonIncome,\r\n  ASSET_API_OUTPUT_DispositionAmount,\r\n  appSiteAPI,\r\n  ASSETS,\r\n  ASSET_TAX,\r\n} from \"../definitions/generalDefinitions\";\r\n\r\nexport function fetchTimerAPICheck() {\r\n  let fails = parseInt(localStorage.getItem(\"INAAPIFails\"));\r\n  fetch(appSiteAPI + \"/api/MCC_Carriers?id=1\")\r\n    .then((response) => {\r\n      //console.log(response);\r\n      response.json();\r\n    })\r\n    .then((data) => console.log(\"timer API check\"))\r\n    .catch((error) => {\r\n      if (!fails) fails = 0;\r\n      fails++;\r\n      localStorage.setItem(\"INAAPIFails\", parseInt(fails));\r\n      //console.log(error);\r\n    });\r\n\r\n  return fails;\r\n}\r\n\r\nexport function fetchAssetProjection(dataNA, assetID) {\r\n  return Promise.all([fetchAP(dataNA, assetID)]);\r\n}\r\n\r\nfunction fetchAP(dataNA, assetID) {\r\n  let url = appSiteAPI + \"/api/NA_AssetProjection/\";\r\n  let dataAsset = {};\r\n\r\n  if (assetID === undefined) assetID = 0;\r\n  dataAsset.lives = dataNA.lives;\r\n  dataAsset.asset = dataNA.assets[assetID - 1];\r\n  dataAsset.projectionSettings = dataNA.projectionSettings;\r\n  dataAsset.ratesPack = dataNA.ratesPack;\r\n  /* \r\n dataAsset.asset.incomeRate= 0.0;\r\n            dataAsset.asset.contributionAmt= 1000;\r\n            dataAsset.asset.contributionStartYr= 1;\r\n            dataAsset.asset.contributionDur= 20;  */\r\n\r\n   return fetch(url, {\r\n    method: \"POST\",\r\n    //\t\t\tredirect: 'follow',\r\n    //\t\t\tcredentials: 'same-origin',\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(dataAsset),\r\n  })\r\n    .then((response) => {\r\n      if (response.ok === false) {\r\n        throw Error(response.statusText);\r\n      }\r\n      return response;\r\n    })\r\n    .then((response) => response.json())\r\n    .then((data) => {\r\n      return data;\r\n    })\r\n    .catch((error) => {\r\n      console.log(\"handleAssetProjection failed: \" + error);\r\n      // this.setState({failedAPI: true});\r\n    });\r\n}\r\n\r\nexport function fetchMCCData(dataNA, insNeed) {\r\n  return Promise.all([fetchMCC(dataNA, insNeed)]);\r\n}\r\n\r\nfunction fetchMCC(dataNA, insNeed) {\r\n  // let dataMCC=readMCCData(dataNA, 48,insNeed);\r\n\r\n  let url = appSiteAPI + \"/api/MCC_OutputArrays/\";\r\n  // console.log(url, dataNA);\r\n\r\n  return fetch(url, {\r\n    method: \"POST\",\r\n    //\t\t\tredirect: 'follow',\r\n    //\t\t\tcredentials: 'same-origin',\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(dataNA),\r\n  })\r\n    .then((response) => {\r\n      if (response.ok === false) {\r\n        throw Error(response.statusText);\r\n      }\r\n      return response;\r\n    })\r\n    .then((response) => response.json())\r\n    .then((data) => {\r\n      // console.log(data);\r\n      return data;\r\n    })\r\n    .catch((error) => {\r\n      console.log(\"handleFetchMCCData failed: \" + error);\r\n      // this.setState({failedAPI: true});\r\n    });\r\n}\r\n\r\n\r\n//async function fetchTaxRate1(appSiteAPI, type, province) {\r\nexport async function getTaxRate(type, province) {\r\n  try {\r\n    let taxRate = await fetch(\r\n      appSiteAPI + \"/api/RATES?type=\" + type + \"&province=\" + province\r\n    );\r\n    let data = await taxRate.json();\r\n    // console.log(data)\r\n\r\n    return (Math.round(parseFloat(data) * 10000) / 10000).toFixed(4);\r\n  } catch (error) {\r\n    console.log(\"error, rates API failed\", error);\r\n  }\r\n}\r\n\r\nexport async function fetchGovBenefits(dataNA, provincekey) {\r\n  try {\r\n    if (provincekey !== undefined) {\r\n      dataNA.projectionSettings.province = provincekey;\r\n      dataNA.lives[1].isQC = provincekey === \"QC\" ? true : false;\r\n    }\r\n    let url = appSiteAPI + \"/api/NA_GovBenefits/\";\r\n    let govBenefits = await fetch(url, {\r\n      method: \"POST\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(dataNA),\r\n    });\r\n    let data = await govBenefits.json();\r\n    // console.log(data)\r\n\r\n    return {\r\n      cpp: data[0].Values[0],\r\n      cppDB: Math.round(data[1].Values[0]),\r\n      orphan: Math.round(data[2].Values[0]),\r\n    };\r\n  } catch (error) {\r\n    console.log(\"error, InsuranceNeedsData API failed\", error);\r\n  }\r\n}\r\n\r\nexport async function fetchInsuranceNeedsData(dataNA, provincekey) {\r\n  try {\r\n    if (provincekey !== undefined) {\r\n      dataNA.projectionSettings.province = provincekey;\r\n      dataNA.lives[1].isQC = provincekey === \"QC\" ? true : false;\r\n    }\r\n    let url = appSiteAPI + \"/api/NA_OutputAll/\";\r\n    let insuranceNeedsData = await fetch(url, {\r\n      method: \"POST\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(dataNA),\r\n    });\r\n    let data = await insuranceNeedsData.json();\r\n  //  console.log(dataNA, data)\r\n\r\n    return {\r\n      ages: data[1],\r\n      govCF: data[3],\r\n      personalCF: data[4],\r\n      needs: data[5],\r\n      shortfall: data[6],\r\n      cpp: data[7].Values[0],\r\n      cppDB: Math.round(data[8].Values[0]),\r\n      orphan: Math.round(data[9].Values[0]),\r\n      lifeExp: Math.round(data[12].Values[0]),\r\n      lifeExpClient: Math.round(data[13].Values[0]),\r\n      lifeExpJLTD: Math.round(data[14].Values[0]),\r\n      provinceMargTax: data[15].Values[0],\r\n      dataTaxLiability: data[16],\r\n      encryptedInput: data[17].Values[0],\r\n      probate: data[18],\r\n    };\r\n  } catch (error) {\r\n    console.log(\"error, InsuranceNeedsData API failed\", error);\r\n  }\r\n}\r\n\r\nexport async function handleFetchInsuranceNeeds(dataNA, dataP) {\r\n  try {\r\n    console.log(\"Data sent to POST:\");\r\n    // console.log(dataNA);\r\n\r\n    let url = appSiteAPI + \"/api/NA_InsuranceNeeds/\";\r\n    let insuranceNeeds = await fetch(url, {\r\n      method: \"POST\",\r\n      //\t\t\tredirect: 'follow',\r\n      //\t\t\tcredentials: 'same-origin',\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(dataNA),\r\n    });\r\n\r\n    let data = await insuranceNeeds.json();\r\n   \r\n    return data;\r\n  } catch (error) {\r\n    console.log(\"handleFetchInsuranceNeeds failed: \", error);\r\n  }\r\n}\r\n\r\n/* export async function fetchTaxRate(appSiteAPI, type, province) {\r\n  await fetch(\r\n    appSiteAPI +\r\n      \"/api/RATES?type=\" +\r\n      type +\r\n      \"&province=\" +\r\n      province\r\n  )\r\n    .then(response => response.json())\r\n    .then(data => {\r\n      console.log(data);\r\n      return data;\r\n    })\r\n    .catch(error => {\r\n      console.log(\"error, rates API failed\", error);\r\n    });\r\n}\r\n\r\n */\r\n\r\n// BEGIN TEMPALTE\r\n// THIS IS THE WAY TO MAKE SURE DATA HAS COME BACK FROM API\r\n// IN THE CALLING MODULE\r\n/* updateClientTaxLiability = async () => {\r\n    let dataNA = this.props.getAssetProjection();\r\n    let appSiteAPI = \"http://localhost:8082\";\r\n    let data = await fetchAssetProjection2(appSiteAPI, dataNA, this.props.id);\r\n    console.log(data);\r\n    if (data !== undefined) {\r\n      console.log(data[ASSET_API_OUTPUT_TaxPayable].numericValues[0]);\r\n\r\n      return data[ASSET_API_OUTPUT_TaxPayable].numericValues;\r\n    }\r\n  }; */\r\n\r\n// USE componentDidUpdate IF NEED TO UPDATE SOMETHING BASED ON THE LATEST VALUE OF ANOTHER AFTER setState or changed props\r\n// componentDidUpdate= async (prevProps, prevState) => {\r\n\r\n// FETCH\r\nexport async function fetchAssetProjection2(dataNA, assetID) {\r\n  try {\r\n    let url = appSiteAPI + \"/api/NA_AssetProjection/\";\r\n    let dataAsset = {};\r\n\r\n    if (assetID === undefined) assetID = 0;\r\n    dataAsset.lives = dataNA.lives;\r\n    dataAsset.asset = dataNA.assets[assetID - 1];\r\n    dataAsset.projectionSettings = dataNA.projectionSettings;\r\n    dataAsset.ratesPack = dataNA.ratesPack;\r\n    //   console.log(dataAsset);\r\n\r\n    let dataProj = await fetch(url, {\r\n      method: \"POST\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(dataAsset),\r\n    });\r\n\r\n    let data = await dataProj.json();\r\n    //      console.log(data);\r\n    return data;\r\n  } catch (error) {\r\n    console.log(\"error, Asset proj API failed\", error);\r\n  }\r\n}\r\n// END TEMPALTE\r\n\r\nasync function asyncAPICall(dataNA, assetID) {\r\n  let data = await fetchAssetProjection2(dataNA, assetID);\r\n  // console.log(data);\r\n  if (data !== undefined) {\r\n    //   console.log(data);\r\n\r\n    return data; //[ASSET_API_OUTPUT_TaxPayable].numericValues;\r\n  }\r\n}\r\n\r\n/* async function fetchAssetProjectionAPI2 (appSiteAPI,dataNA, assetID){\r\n  let data = await asyncAPICall(appSiteAPI, dataNA, assetID);\r\n\r\n  return data\r\n}\r\n */\r\nexport async function fetchAssetProjectionAPI(dataNA, assetID) {\r\n   let dataProjection = {\r\n    dataColTitles: [],\r\n    dataValues: [],\r\n  };\r\n  // console.log(appSiteAPI,dataNA, assetID);\r\n\r\n  //let data =await fetchAssetProjectionAPI2(appSiteAPI, dataNA, assetID);\r\n  let data = await asyncAPICall(dataNA, assetID);\r\n\r\n  return data;\r\n\r\n}\r\n\r\nexport async function fetchAssetFMVandTaxLiab(dataNA, assetID) {\r\n  let dataProjection = {\r\n    FMV: [],\r\n    TaxLiab: [],\r\n  };\r\n  let data = await asyncAPICall(dataNA, assetID);\r\n  if (data[0] !== undefined) {\r\n    dataProjection.FMV = data[ASSET_API_OUTPUT_FMV].numericValues;\r\n    dataProjection.TaxLiab = data[ASSET_API_OUTPUT_TaxPayable].numericValues;\r\n  }\r\n  //console.log(dataProjection);\r\n  return dataProjection;\r\n}\r\n\r\nexport async function fetchAssetAllGridColumns(dataNA, assetID) {\r\n  let data = await asyncAPICall(dataNA, assetID);\r\n  //console.log(data);\r\n  return data;\r\n}\r\n\r\nexport async function handleFetchInsuranceNeedsNew(dataNA, dataInput) {\r\n  try {\r\n    let url = appSiteAPI + \"/api/NA_InsuranceNeeds/\";\r\n\r\n    let data = await fetch(url, {\r\n      method: \"POST\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(dataNA),\r\n    });\r\n\r\n    let dataINA = await data.json();\r\n    // console.log(data)\r\n\r\n    let dataDetails = await fetchInsuranceNeedsData(\r\n      dataNA,\r\n      dataInput.Presentations[0].provincekey\r\n    );\r\n\r\n    if (dataINA !== undefined && dataDetails !== undefined) {\r\n       console.log(\"POST: NA_OutputAll success\");\r\n       return {\r\n        dataInsuranceNeeds: dataINA,\r\n        dataNAAges: dataDetails.ages,\r\n        dataCashFlowGov: dataDetails.govCF,\r\n        dataCashFlowPersonal: dataDetails.personalCF,\r\n        dataCashFlowNeeds: dataDetails.needs,\r\n        dataShortfall: dataDetails.shortfall,\r\n        cpp: dataDetails.cpp,\r\n        cppDB: dataDetails.cppDB,\r\n        orphan: dataDetails.orphan,\r\n        probate: dataDetails.probate,\r\n        lifeExp: dataDetails.lifeExp,\r\n        lifeExpClient: dataDetails.lifeExpClient,\r\n        lifeExpJLTD: dataDetails.lifeExpJLTD,\r\n        provinceMargTax: dataDetails.provinceMargTax,\r\n        dataTaxLiability: dataDetails.dataTaxLiability,\r\n        encryptedInput: dataDetails.encryptedInput,\r\n      };\r\n    }\r\n  } catch (error) {\r\n    console.log(\"error, rates API failed\", error);\r\n  }\r\n}\r\n\r\nexport async function handleFetchQueryStringSave(dataNA) {\r\n  //console.log(dataNA);\r\n\r\n  let url = appSiteAPI + \"/api/NA_QS/\";\r\n\r\n  fetch(url, {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(dataNA),\r\n  })\r\n    .then((response) => {\r\n      if (response.ok === false) {\r\n        throw Error(response.statusText);\r\n      }\r\n      return response;\r\n    })\r\n    .then((response) => response.json())\r\n    .then((data) => {\r\n      if (data !== undefined) {\r\n        //console.log(data);\r\n\r\n        return data;\r\n      }\r\n    })\r\n    .catch((error) => {\r\n      console.log(\"handleFetchQueryString failed: \" + error);\r\n      // this.setState({failedAPI: true});\r\n    });\r\n}\r\n\r\nexport async function handleFetchLoadFromQueryString(contentsFile) {\r\n\r\n  fetch(appSiteAPI + \"/api/NA_QS?QS=\" + contentsFile)\r\n    .then((response) => {\r\n      if (response.ok === false) {\r\n        throw Error(response.statusText);\r\n      }\r\n      return response;\r\n    })\r\n    .then((response) => response.json())\r\n    .then(async (data) => {\r\n    \r\n      return data;\r\n    })\r\n    .catch((error) => {\r\n      console.log(\"handleFetchLoadFromQueryString failed: \" + error);\r\n    });\r\n}\r\n\r\nexport async function handleFetchINADataFromQueryString(savedINA) {\r\n  try {\r\n    let url = appSiteAPI + \"/api/NA_QS?QS=\" + savedINA;\r\n    \r\n    try {\r\n      let savedData = await fetch(url);\r\n      let data = await savedData.json();\r\n      \r\n      return data;\r\n    } catch (error) {\r\n      console.log(\"error, handleFetchINADataFromQueryString failed\", error);\r\n    }\r\n  } catch (error) {\r\n    console.log(\"error, handleFetchINADataFromQueryString\", error);\r\n  }\r\n}\r\n\r\n\r\nexport async function handleFetchQueryString2(dataNA){\r\n\r\n  //const lang=this.state.dataInput.Presentations[0].language\r\n  /* console.log(\r\n    this.state.dataOutput.dataInsuranceNeeds[\r\n      this.state.dataInput.Presentations[0].periodOption\r\n    ].Value\r\n  ); */\r\n  /* const insuranceNeed = this.state.dataOutput.dataInsuranceNeeds[\r\n    this.state.dataInput.Presentations[0].periodOption\r\n  ].Value;\r\n  let dataNA = setUIDataToAPI(this.state.dataInput, insuranceNeed); */\r\n  //console.log(dataNA);\r\n\r\n  let url = appSiteAPI + \"/api/NA_QS/\";\r\n\r\n  //this.setState({ ...this.state });\r\n  await fetch(url, {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(dataNA),\r\n  })\r\n    .then((response) => {\r\n      if (response.ok === false) {\r\n        throw Error(response.statusText);\r\n      }\r\n      return response;\r\n    })\r\n    .then((response) => response.json())\r\n    .then((data) => {\r\n      if (data !== undefined) {\r\n        return data;\r\n\r\n        /* this.dataQS = data;\r\n        if (mode === MODE_SAVE) this.setState({ showMsg: true });\r\n        else if (mode === MODE_EMAIL){\r\n       let url=\"mailto: ?subject= \" +  (appletMode===\"INA\"?TITLES[lang].appletINA:TITLES[lang].appletEP) + \" &body= \" + (EMAIL[lang].body+ \".%0D%0A\"  + appSiteParent + \"?applet=EP\\&QS=\" + this.dataQS);\r\n       /* const s1 =\"?applet=EP\"\r\n       const s2=\"&QS=\" + this.dataQS\r\n        url=\"mailto: ?subject= Needs Analysis Quote &body=The following link takes you to the landing page of Toolkit Direct. Once there, click on Insurance Needs Analysis to open up the attached quote.%0D%0A\" +\r\n        + appSiteParent + [\"applet=EP\",\"QS=\" + this.dataQS].join('&')\r\n*/\r\n\r\n      //  const ft=appSiteParent + \"/?\" + [\"applet=\"+appletMode , \"QS=\"+this.dataQS].join('&')\r\n        /* url=\"mailto: ?subject= Needs Analysis Quote &body= The following link takes you to the landing page of Toolkit Direct. Once there, click on Insurance Needs Analysis to open up the attached quote.%0D%0A\" +\r\n        encodeURIComponent(ft) */\r\n       // url=\"mailto: ?subject= \" +  (appletMode===\"INA\"?TITLES[lang].appletINA:TITLES[lang].appletEP) + \" &body= \" + EMAIL[lang].body+ \".%0D%0A\"  + encodeURIComponent(ft)\r\n\r\n        //return url;\r\n       // console.log(url)\r\n        //  window.location.href = url; */\r\n        }\r\n      }\r\n    )\r\n    .catch((error) => {\r\n      console.log(\"handleFetchQueryString failed: \" + error);\r\n      // this.setState({failedAPI: true});\r\n      return \"\";\r\n    });\r\n};\r\n\r\nexport async function handleFetchQueryString(dataNA){\r\n\r\n  try {\r\n    const url = appSiteAPI + \"/api/NA_QS/\";\r\n  let fetchData = await fetch(url, {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(dataNA),\r\n  })\r\n  let data = await fetchData.json();\r\n  if (data !== undefined)\r\n        return data;\r\n } catch (error) {\r\n    console.log(\"handleFetchQueryString\", error);\r\n  }\r\n}\r\n\r\nexport async function handleFetchPDF(){\r\n\r\n  try {\r\n    const dataNA={\r\n      Html:\"<span>goh</span>\",\r\n      Css:\".canvas-containerWeb {Height: 20vh;}\"\r\n      \r\n      }\r\n\r\n      console.log( JSON.stringify(dataNA))\r\n    const url = appSiteAPI + \"/api/TKD_PDFGenerator/\";\r\n  let fetchData = await fetch(url, {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(dataNA),\r\n  })\r\n  let data = await fetchData.json();\r\n  if (data !== undefined){\r\n        console.log(data)\r\n        return data;}\r\n } catch (error) {\r\n    console.log(\"handleFetchQueryString\", error);\r\n  }\r\n}\r\n","import { appletMode } from \"../../package.json\";\r\nimport {\r\n  ASSETS,\r\n  ASSET_TAX,\r\n  ASSET_OWNERSHIP_ACTION,\r\n  INCOMESOURCES,\r\n  LIABILITIES,\r\n  OWNERSHIP,\r\n  GROWTHDIR,\r\n  INCOMENEEDS,\r\n  PROVINCE,\r\n  APPLET_INA,\r\n  OUTPUT_WIDTH_PCT,\r\n  DEFAULT_QUOTE\r\n} from \"../definitions/generalDefinitions\";\r\n\r\nimport {\r\n  SEX,\r\n  SMOKING,\r\n  MEMBER,\r\n  DEFAULT_DIVIDEND_TAX_RATE,\r\n  DEFAULT_AVG_TAX_RATE,\r\n  DEFAULT_CLIENT_AGE,\r\n  DEFAULT_SPOUSE_AGE,\r\n  DEFAULT_SPOUSE_SALARY,\r\n  DEFAULT_CLIENT_SALARY,\r\n  DEFAULT_SPOUSE_CPP,\r\n  DEFAULT_CLIENT_CPP,\r\n  DEFAULT_SPOUSE_RETIREMENT,\r\n  DEFAULT_CLIENT_RETIREMENT,\r\n  DEFAULT_PROVINCE,\r\n  DEFAULT_INFLATION,\r\n  DEFAULT_INVESTMENT,\r\n  DEFAULT_NEED_PERCENT1,\r\n  DEFAULT_NEED_PERCENT2,\r\n  QUOTE_CLIENT,\r\n  QUOTE_SPOUSE,\r\n  DEFAULT_RRIF_AGE,\r\n  appSiteAPI,\r\n  DISPLAY_RETIREMENT,\r\n  DISPLAY_LIFEEXP,\r\n  DISPLAY_ENDAGE,\r\n  DISPLAY_LIFEEXP_PLUS_3,\r\n  ORPHAN_AGE_QC,\r\n  ORPHAN_AGE_NON_QC,\r\n  MAX_ORPHAN_DUR_QC,\r\n  MAX_ORPHAN_DUR_NON_QC,\r\n  UNIVERSITY_START_AGE,\r\n  UNIVERSITY_END_AGE,\r\n  DISPLAY_PRESENTATION,\r\n} from \"../definitions/generalDefinitions\";\r\nimport { versionDetails, getDefaultImages } from \"../utils/helper\";\r\nimport {loadDefaultCase} from \"../data/dataExchange\";\r\n\r\n\r\nexport function createDefaultAsset(id) {\r\n  let asset = {\r\n    id: id,\r\n    assetTypeKey: ASSETS.PERSONAL_RESIDENCE.Key,\r\n    description: \"\",\r\n    ownerKey: appletMode===\"EP\" ?ASSET_OWNERSHIP_ACTION.CLIENT_ROLLOVER.Key:ASSET_OWNERSHIP_ACTION.JOINT.Key,\r\n    currValue: 0,\r\n    assetTaxTypeKey: ASSET_TAX.NON_TAXABLE.Key,\r\n    growth: 0,\r\n    DisposeYr: 99,\r\n    DisposeDur: 1,\r\n    ACB: 0,\r\n    smallBusinessCapGainExemption: 0,\r\n    contributionAmt: 0,\r\n    contributionStartYr: 0,\r\n    contributionDur: 0,\r\n    withdrawalAmt: 0,\r\n    withdrawalStartYr: 1,\r\n    withdrawalDur: 0,\r\n    incomeRate: 0,\r\n    RRIFStartAge: DEFAULT_RRIF_AGE,\r\n    projection: null,\r\n  };\r\n  return asset;\r\n}\r\n\r\nexport function copyFromAnotherAsset(anotherAsset) {\r\n  return JSON.parse(JSON.stringify(anotherAsset));\r\n}\r\n\r\nexport function copyFromAnotherObject(sourceObject) {\r\n  return JSON.parse(JSON.stringify(sourceObject));\r\n}\r\nexport function createDefaultClient(id) {\r\n  const defaultClient1 = {\r\n    id: 1,\r\n    Age: DEFAULT_CLIENT_AGE,\r\n    sexKey: SEX.MALE.Key, //[\"en\"].Values[0],\r\n    smokerKey: SMOKING.NON_SMOKER.Key,\r\n    Income: DEFAULT_CLIENT_SALARY,\r\n    avgTaxRate: DEFAULT_AVG_TAX_RATE,\r\n    //  member: MEMBER.CLIENT.value[\"en\"],\r\n    memberKey: MEMBER.CLIENT.Key,\r\n    retirementAge: DEFAULT_CLIENT_RETIREMENT,\r\n    Eligibility: DEFAULT_CLIENT_CPP,\r\n    Name: \"\",\r\n  };\r\n  const defaultClient2 = {\r\n    id: 2,\r\n    Age: DEFAULT_SPOUSE_AGE,\r\n    //Sex: SEX[\"en\"].Values[1],\r\n    sexKey: SEX.FEMALE.Key, //[\"en\"].Values[0],\r\n    smokerKey: SMOKING.NON_SMOKER.Key,\r\n    Income: DEFAULT_SPOUSE_SALARY,\r\n    avgTaxRate: DEFAULT_AVG_TAX_RATE,\r\n    //member: MEMBER.SPOUSE.value[\"en\"],\r\n    memberKey: MEMBER.SPOUSE.Key,\r\n    retirementAge: DEFAULT_SPOUSE_RETIREMENT,\r\n    Eligibility: DEFAULT_SPOUSE_CPP,\r\n    Name: \"\",\r\n  };\r\n  const child = {\r\n    id: id, //this.state.dataInput.clientsNo,\r\n    Age: 1,\r\n    sexKey: SEX.MALE.Key,\r\n    smokerKey: SMOKING.NON_SMOKER.Key,\r\n    Income: 0,\r\n    avgTaxRate: 0.0,\r\n    memberKey: MEMBER.CHILD.Key,\r\n    retirementAge: 65,\r\n    Eligibility: 0,\r\n    Name: \"\",\r\n  };\r\n  if (id === 1) return defaultClient1;\r\n  else if (id === 2) return defaultClient2;\r\n  else return child;\r\n}\r\n\r\nexport function createDefaultSource(id) {\r\n  const defaultSource = {\r\n    id: id,\r\n    //Type: INCOMESOURCES.SURVIVORS_INCOME.value[\"en\"],\r\n    sourceTypeKey: INCOMESOURCES.SURVIVORS_INCOME.Key,\r\n    amount: DEFAULT_SPOUSE_SALARY,\r\n    startYear: 0,\r\n    duration: DEFAULT_SPOUSE_RETIREMENT - DEFAULT_SPOUSE_AGE,\r\n    ownerID: 2,\r\n    taxRate: DEFAULT_AVG_TAX_RATE,\r\n    growthRate: DEFAULT_INFLATION,\r\n  };\r\n  return defaultSource;\r\n}\r\n\r\nexport function createDefaultLiab(id) {\r\n  const defaultLiab = {\r\n    id: id,\r\n    //Type: LIABILITIES.LAST_EXPENSES.value[\"en\"],\r\n    liabTypeKey: LIABILITIES.PROBATE.Key,//.LAST_EXPENSES.Key,\r\n    description: \"\",\r\n    ownerKey: OWNERSHIP.CLIENT.Key,\r\n    currValue: 0,\r\n    //growthDir: GROWTHDIR[\"en\"].Values[0], //increases\r\n    growthDirKey: GROWTHDIR.GROWS.Key, //increases\r\n    growth: 0,\r\n    repay: 0,\r\n    exposureDur: 99,\r\n    assetTaxLiabID: 0,\r\n    assetTaxLiabProj: [],\r\n  };\r\n  return defaultLiab;\r\n}\r\n\r\nexport function createDefaultNeed(id) {\r\n  const defaultNeed1 = {\r\n    id: 1,\r\n    needTypeKey: INCOMENEEDS.PERCET_OF_INCOME.Key,\r\n    Percent: DEFAULT_NEED_PERCENT1,\r\n    amount:\r\n      (DEFAULT_NEED_PERCENT1 *\r\n        (DEFAULT_SPOUSE_SALARY + DEFAULT_CLIENT_SALARY) *\r\n        (1 - DEFAULT_AVG_TAX_RATE / 100)) /\r\n      100,\r\n    startYear: 0,\r\n    duration: DEFAULT_SPOUSE_RETIREMENT - DEFAULT_SPOUSE_AGE,\r\n  };\r\n  const defaultNeed2 = {\r\n    id: id,\r\n    needTypeKey: INCOMENEEDS.PERCET_OF_INCOME.Key,\r\n    Percent: DEFAULT_NEED_PERCENT2,\r\n    amount:\r\n      (DEFAULT_NEED_PERCENT2 *\r\n        (DEFAULT_SPOUSE_SALARY + DEFAULT_CLIENT_SALARY) *\r\n        (1 - DEFAULT_AVG_TAX_RATE / 100)) /\r\n      100,\r\n    startYear: DEFAULT_SPOUSE_RETIREMENT - DEFAULT_SPOUSE_AGE,\r\n    duration: 100,\r\n  };\r\n  if (id === 1) return defaultNeed1;\r\n  else return defaultNeed2;\r\n}\r\n\r\nexport function createDefaultPres(id, tax) {\r\n  const images=getDefaultImages()\r\n  const defaultPres = {\r\n    id: id,\r\n    provinceKey: PROVINCE.BC.Key,\r\n    invRate: DEFAULT_INVESTMENT,\r\n    inflation: DEFAULT_INFLATION,\r\n    taxRate: tax,\r\n    designedFor: \"\",\r\n    designedBy: \"\",\r\n    valuationDate: new Date(),\r\n    presentationDate: new Date(),\r\n    notes: \"\",\r\n    version: versionDetails().version,\r\n    periodOption: APPLET_INA ? DISPLAY_RETIREMENT : DISPLAY_ENDAGE,\r\n    language: global.langFr? \"fr\" : \"en\",// \"en\",\r\n    resultsOption: DISPLAY_PRESENTATION,\r\n    adviserLogo: images.adviserLogo,// {image:null, left: 0,size: OUTPUT_WIDTH_PCT, allPages: false, top:true, showDetails:false},\r\n    appletImage:images.appletImage ,//{image:APPLET_INA? require(\"../images/INA.png\"):require(\"../images/estate.protection.applet.cover.graphic.png\"), left: 0,size: OUTPUT_WIDTH_PCT, allPages: false, top:true, showDetails:false},\r\n  };\r\n  return defaultPres;\r\n}\r\n\r\n\r\nexport function getDefaultData(){\r\n  let dataInput;\r\n \r\n  if(localStorage.getItem(DEFAULT_QUOTE)===null)\r\n  {\r\n    dataInput= getDefaultCase()\r\n\r\n    }\r\n    else\r\n{\r\n  try {\r\n    dataInput=loadDefaultCase()  \r\n  } catch (error) {\r\n    dataInput= getDefaultCase()\r\n  }  \r\n  \r\n}\r\nreturn dataInput;\r\n}\r\n\r\nfunction getDefaultCase()\r\n{\r\n  let dataInput;\r\n  let defaultClients = [];\r\ndefaultClients.push(createDefaultClient(1));\r\nif (APPLET_INA) defaultClients.push(createDefaultClient(2));\r\nlet defaultAssets = [];\r\ndefaultAssets.push(createDefaultAsset(1));\r\nlet defaultSources =[]\r\nif (APPLET_INA) defaultSources.push(createDefaultSource(1));\r\n \r\nconst defaultLiab = [createDefaultLiab(1)];\r\nlet defaultNeeds = [];\r\ndefaultNeeds.push(createDefaultNeed(1));\r\ndefaultNeeds.push(createDefaultNeed(2));\r\nconst defaultPresentation = [createDefaultPres(1, 0)];\r\n\r\n// build state with defaults\r\ndataInput={      \r\n    Clients: defaultClients, //, clientsNo: defaultClients.length },\r\n    Assets: defaultAssets, //, assetsNo: defaultAsset.length },\r\n    Liabilitys: defaultLiab, //, liabilitysNo: 1 },\r\n    Sources: defaultSources, //, sourcesNo: 1 },\r\n    Needs: defaultNeeds, //,  needsNo: 2},\r\n    Presentations: defaultPresentation, //, presentationsNo: 1 },\r\n  }\r\n  return dataInput;\r\n}","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAAAhdEVYdENyZWF0aW9uIFRpbWUAMjAxOTowODozMSAwOTowOTo1NrtZ+qQAAAJgSURBVEhL7ZVLaBNRFIb/ySRNTCaPJjUqIii4sG4tahRxJ924qkUQoaCCO6HV2oi616JSqFtFdFGVboRu4kJQrOAiuvCxEgSpVfsgSTPJZJJ5eO7t1DyamSYt3fnN3MWcO3P+c+8954xgEiB6ztzGr4UleNwimGnZ2iYC4BIEaLqBsOTDh4kkuMDU60/ov/oQ8aiE2fkcOjxueDvcaE9FgGEakIsq+QkhXyxh7Eof82GaqekvppQYMgOJQfa4YY6du2cGDg+aT6bemxSmBS3PS5E/S6Uh+b0I+n0UUesroJ1BSdWgqBUsZApwucjAbqb48t1X9A0/QDTkR04uwTCMDZ1BKOCDrKgYT/bDZU1xBJqMBLcgGg4gFlk9omE/RFFAkBw0m4/Rd50UpChW3dYJOMFWNTOXxfPR89jRFeKH2QotCWi6jp+UXZ8nr+NEohvpiRHs270N2bxivWHPmgLlisbPZe7VLXTv2W5ZgbePhnD8wF4sZguWpTmOAhVN5zWRn77L97eRF2MXMXDyIDJLRcuyGlsBSi7oVJEfnyZ58el0Bo3M/Mni/rXT6D26H2pZs6z12AqwjGLVvKv3BnYeuYwfvzPWTJVDZ0fh6bmEN+lvy5XfBMctYiJdEQm+aBDumtRbgaVmnObsnDMcBWrhlbkOWhJgztnVCLOwFuEEbxUpahWnqFU0y5QV5jMyKpSytcRjbOtE66menKxgfKSmVRSUMs8Eu8H6S4zOo3boutn0XTaK5I/9F/79cAZuPsb32UV4bCJqB+Z4a6eEyTsXqgKbRctZtF7+C6zJJgsAfwFSJkjpY7Y95gAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAAAhdEVYdENyZWF0aW9uIFRpbWUAMjAxOTowODozMSAwOTowOTo1NrtZ+qQAAAMVSURBVEhLpZVLTBNRFIb/PqcPKoXyKoqvsFFZ4GPloqJBowkLHxDApSy6MCExxkeKG2OMcYHEsEDcqEsDNRHi0hWiGBegYmIMwZAYCaIgUNppO9N6zm2bTgEHCl9z03bm3vnvOf85dwxJ4sOXKdT7u+F22WEwGLBV6JFYCMl4fv8ShMDVzhd4OjiCAruE5UgMiUQCyfTkfDEZjXDYrYjGFDT4alICge4B9Pa/gWQ1o+3sUXjcTvE7LxUKXFFUzM6H8GRgRAg0nTyYFejpG6IUOfD91e30is1zqOUepqbn0XL6cFbgcXBY7JrSh3KPi9JlRSKPCIwUwbIcw6+5EFQ1QWuTaKyvzRUocEiIxRXEKdREPk9PwwViMZtgtZggU4pWCdgoApvNgqryItglS3rZxlFpU9OzC5j5s8hquQJscjQeR+htV3r65mlo78Hw2CQunjmiEaAIzCYDzp+oRYm7AC6nJPK4UTg9shzH4rKM4OsxhKncm05pqohT5CRjI9G4yH8+D8/ALWokt+0S9QF5ySkypm5licXVlNH0ne9IrVVFJ2egbkqRpE8oEkXvrRZxZPAutBPXhbbPkS+EIgh0D1K5LqUuZ1KUMlkhkx+IG1vB19aF8YlptK5sNPbgJ5WZ2WSE3ZYbATePNh4jmcr5zsAmc2rlqIKyYheVbGK1Bzxpe5lbTOCDz+WwieEgsZ0VxdjtLcYuGnsqPfCWbBPXM3N4vqfQiR3lbtFoGVaZzLAQ7y4zfv8NYTzYgc/9HRin8akvgJddfpFv7Txet5I1BdaCT0ct80vh9C991hUI0wEWE++I3IpSyBN+d8jUN3roCvDDLzf74G8+JozXUkEetLfWoZHOfD0RXQHO6+jXH3hEvWHRGMdUV5Xi4fVGvPs4CdMKcS26AjarBUOjE9h37k76ShY2uMh3TZQ1H9H/Q1eA4RKcWwyj9PhNUefMt6kZeOpuwEllKtEm9BAC3ER68LuBd1lRH8CzgfeouXAXleSBWWfnDBeCEDhQ7RV/9ODm4dfolc4gvKWF5I9+8IqqYv9eL/4BgXeca9Es3FcAAAAASUVORK5CYII=\"","import React, { Component } from \"react\";\r\n\r\nexport class MultiButtons extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const buttonsDefault = this.setupButtons(\r\n      this.props.selected,\r\n      this.props.noButtons,\r\n      this.props.buttonCaption\r\n    );\r\n    this.state = {\r\n      buttons: buttonsDefault,\r\n    };\r\n  }\r\n\r\n /*  getDerivedStateFromProps(){\r\n\r\n  } */\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    const buttonsDefault = this.setupButtons(\r\n      nextProps.selected,\r\n      nextProps.noButtons,\r\n      nextProps.buttonCaption\r\n    );\r\n    this.setState({ buttons: buttonsDefault });\r\n  }\r\n\r\n  setupButtons = (selected, noButtons, buttonCaption) => {\r\n    selected = selected === undefined ? 0 : selected - 1;\r\n    let buttonsDefault = [];\r\n    let i;\r\n    for (i = 0; i < noButtons; ++i) {\r\n      if (i === selected)\r\n        buttonsDefault.push({\r\n          id: selected,\r\n          name: buttonCaption[selected],\r\n          style:\r\n            noButtons === 1\r\n              ? \"roundedCornerCmd\"\r\n              : \"multiButtons multiButtonsAct\",\r\n        });\r\n      else\r\n        buttonsDefault.push({\r\n          id: i,\r\n          name: buttonCaption[i],\r\n          style: \"multiButtons\",\r\n        });\r\n    }\r\n    return buttonsDefault;\r\n  };\r\n\r\n  selectButton = (index) => {\r\n    let buttonsDefault = this.state.buttons;\r\n    let i;\r\n    for (i = 0; i < this.props.noButtons; ++i) {\r\n      buttonsDefault[i].style =\r\n        buttonsDefault[i].id === index\r\n          ? \"multiButtons multiButtonsAct\"\r\n          : \"multiButtons\";\r\n    }\r\n    this.setState({ buttons: buttonsDefault });\r\n    this.props.selectMultiButton(index + 1);\r\n  };\r\n\r\n  render() {\r\n    const stylePosition =\r\n      this.props.width !== undefined ? { width: this.props.width } : {};\r\n    const stylePositionLast =\r\n      this.props.width !== undefined\r\n        ? { width: this.props.width, marginRight: \"5px\" }\r\n        : { marginRight: \"5px\" };\r\n\r\n    return (\r\n      <div style={{ marginRight: \"10px\" }}>\r\n        {this.state.buttons.map((item) => (\r\n          <button\r\n            key={item.id}\r\n            className={item.style}\r\n            style={\r\n              item.id === this.props.noButtons - 1\r\n                ? stylePositionLast\r\n                : stylePosition\r\n            }\r\n            onClick={() => this.selectButton(item.id)}\r\n          >\r\n            {item.name}\r\n          </button>\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Client } from \"./Client\";\r\nimport { defaults } from \"react-chartjs-2\";\r\nimport { Asset } from \"./Asset\";\r\nimport { Liability } from \"./Liability\";\r\nimport { Source } from \"./Source\";\r\nimport { Need } from \"./Need\";\r\nimport { Header, hideRecover } from \"./Header\";\r\nimport { Presentation } from \"./Presentation\";\r\nimport { PopupUserinputDialog } from \"./PopupUserInput\";\r\nimport { Collapsible } from \"./Collapsible\";\r\nimport PasteClients from \"./PasteClients\";\r\nimport {\r\n  getEPGridData,\r\n  getINAGridData,\r\n} from \"../data/aggregateGridProjections\";\r\nimport { AggregateGrid } from \"./AggregateGrid\";\r\nimport _ from \"lodash\";\r\nimport {\r\n  fetchTimerAPICheck,\r\n  getTaxRate,\r\n  handleFetchInsuranceNeedsNew,\r\n  handleFetchINADataFromQueryString,\r\n  handleFetchQueryString,\r\n  handleFetchPDF,\r\n} from \"../utils/FetchAPIs\";\r\nimport debounce from \"lodash.debounce\";\r\nimport queryString from \"query-string\";\r\nimport { MultiButtons } from \"./MultiButtons\";\r\nimport { saveAs } from \"file-saver\";\r\nimport { OutputPresentation } from \"./outputPresentation\";\r\nimport { OutputPresentationEP } from \"./outputPresentationEP\";\r\nimport { OutputGraphs } from \"./OutputGraphs\";\r\nimport { OutputGraphsEP } from \"./OutputGraphsEP\";\r\nimport { AnalysisGraphs } from \"./AnalysisGraph\";\r\nimport { AddRemove } from \"./AddRemove\";\r\nimport { Info } from \"./Info\";\r\nimport {\r\n  isMobileDevice,\r\n  //isVersion2019,\r\n  versionDetails,\r\n  getDataFutureEstateLiability,\r\n  getProjectedLiabilities,\r\n  getListItemKeyFromName,\r\n  familyProjectionYears,\r\n  singleFamilyProjectionYears,\r\n  isSingleFamily,\r\n  getInsNeedLine,\r\n} from \"../utils/helper\";\r\nimport {\r\n  QUOTE_CLIENT,\r\n  QUOTE_SPOUSE,\r\n  appSiteAPI,\r\n  DISPLAY_RETIREMENT,\r\n  DISPLAY_LIFEEXP,\r\n  DISPLAY_ENDAGE,\r\n  DISPLAY_LIFEEXP_PLUS_3,\r\n  ORPHAN_AGE_QC,\r\n  ORPHAN_AGE_NON_QC,\r\n  MAX_ORPHAN_DUR_QC,\r\n  MAX_ORPHAN_DUR_NON_QC,\r\n  UNIVERSITY_START_AGE,\r\n  UNIVERSITY_END_AGE,\r\n  DISPLAY_PRESENTATION,\r\n  DISPLAY_GRAPHS,\r\n  DISPLAY_SPREADSHEET,\r\n  DISPLAY_ANALYSIS,\r\n  MESSAGES,\r\n  ASSETS,\r\n  PROVINCE,\r\n  ASSET_TAX,\r\n  INCOMESOURCES,\r\n  OWNERSHIP,\r\n  SEX,\r\n  SMOKING,\r\n  MEMBER,\r\n  LIABILITIES,\r\n  TITLES,\r\n  INCOMENEEDS,\r\n  GROWTHDIR,\r\n  EMAIL,\r\n  ASSET_OWNERSHIP_ACTION,\r\n  APPLET_INA,\r\n  APPLET_EP,\r\n  DISPLAY_NAME,\r\n  IMAGE_LOGO,\r\n  DEFAULT_QUOTE,\r\n  DEFAULT_RRIF_AGE,\r\n} from \"../definitions/generalDefinitions\";\r\n\r\nimport \"isomorphic-fetch\";\r\nimport shortid from \"shortid\";\r\nimport { buildMode } from \"../../package.json\";\r\nimport { setUIDataToAPI, loadSavedDataToUI } from \"../data/dataExchange\";\r\nimport {\r\n  createDefaultAsset,\r\n  createDefaultClient,\r\n  createDefaultSource,\r\n  createDefaultNeed,\r\n  getDefaultData,\r\n} from \"../data/createDefaults\";\r\nimport {\r\n  getInfoNoInternetAccess,\r\n  getInfoIconSourcesGov,\r\n  getGenericMessage,\r\n  getInfoIconInflationGrowth,\r\n  getInfoIconPYE_JLTD,\r\n  getInfoIconNeedGrowth,\r\n} from \"../definitions/infoIconsDefinitions\";\r\n\r\nimport { getAssetGridValues } from \"../data/assetGridProjections\";\r\nimport Loader from \"react-loader-spinner\";\r\n\r\nconst COLLAPSIBLE_CLIENTS = 0;\r\nconst COLLAPSIBLE_ASSETS = 1;\r\nconst COLLAPSIBLE_LIABS = 2;\r\nconst COLLAPSIBLE_SOURCES = 3;\r\nconst COLLAPSIBLE_NEEDS = 4;\r\nconst COLLAPSIBLE_PRESENTATION = 5;\r\nconst COLLAPSIBLE_RESULTS = 6;\r\nconst COLLAPSIBLE_UPDATE_ALL = 7;\r\n\r\nconst COLLAPSIBLES_COUNT = 7;\r\nconst COLLAPSIBLES_CLOSED = false;\r\nconst COLLAPSIBLES_OPEN = true;\r\n\r\nconst DISPLAY_INCOME = 1;\r\nconst DISPLAY_TAXLIAB = 2;\r\nconst INA_FILE_TYPE = \".ppi_INA_TKD\";\r\nconst EP_FILE_TYPE = \".ppi_EP_TKD\";\r\nconst waitTime = 1800;\r\n//const RRIF_LAST_START_AGE = 71;\r\n\r\nconst SITE_TEST = \"https://test-tkdirect\";\r\n\r\n// to send it to Proxy make API site \"\"\r\n//const API_SITE=\"https://ppitoolkitapi.azurewebsites.net\"\r\n//const API_SITE_LOCAL=\"http://www.toolkitdirectapi.com\";\r\n//const API_SITE=\"\";\r\n\r\nconst PARENT_SITE_LOCAL = \"http://localhost:8083\";\r\nconst PARENT_SITE_TEST = \"https://test-tkdirect.ppi.ca/\";\r\nconst PARENT_SITE_PROD = \"https://toolkitdirect.ppi.ca/\";\r\nconst MODE_SAVE = 0;\r\nconst MODE_EMAIL = 1;\r\nconst MODE_ONLY_GET_ENCRYPTED_QS = 2;\r\n\r\n//\"local\"=0 \"test-tkdirect\"=1 \"toolkitdirect\" =2}\r\n/* let appSiteAPI =\r\n  buildMode === 0\r\n    ? API_SITE_LOCAL\r\n    : buildMode === 1\r\n    ? API_SITE_TEST\r\n    : API_SITE_PROD; */\r\nlet appSiteParent =\r\n  buildMode === 0\r\n    ? PARENT_SITE_LOCAL\r\n    : buildMode === 1\r\n    ? PARENT_SITE_TEST\r\n    : PARENT_SITE_PROD;\r\n\r\ndefaults.global.maintainAspectRatio = false;\r\n\r\nexport class NA extends Component {\r\n  displayName = DISPLAY_NAME;\r\n  constructor(props) {\r\n    super(props);\r\n  \r\n    // define default starting clients assets .etc. rows\r\n    let defaultClients = [];\r\n    defaultClients.push(createDefaultClient(1));\r\n    if (APPLET_INA) defaultClients.push(createDefaultClient(2));\r\n    let defaultAssets = [];\r\n    defaultAssets.push(createDefaultAsset(1));\r\n    //  const defaultSources = [createDefaultSource(1)];\r\n    //  const defaultLiab = [createDefaultLiab(1)];\r\n    let defaultNeeds = [];\r\n    defaultNeeds.push(createDefaultNeed(1));\r\n    defaultNeeds.push(createDefaultNeed(2));\r\n    // const defaultPresentation = [createDefaultPres(1, this.provinceMargTax)];\r\n\r\n    // build state with defaults\r\n    this.state = {\r\n      dataInput: getDefaultData(),\r\n      loading: true,\r\n      initialLoading: true,\r\n      failedAPI: false,\r\n      showMsg: false,\r\n      failedRemove: false,\r\n      SnapImport: false,\r\n\r\n      dataOutput: {\r\n        dataInsuranceNeeds: [],\r\n        dataCashFlowPersonal: [],\r\n        dataTaxLiability: [],\r\n        dataCashFlowGov: [],\r\n        dataCashFlowNeeds: [],\r\n        dataNAAges: [],\r\n        dataShortfall: [],\r\n        govBenefits: { cppSurvivor: null, cppDB: null, cppOrphan: null },\r\n        lifeExpectancy: { client: 0, spouse: 0, joint: 0 },\r\n        assetProjections: [],\r\n        aggregateGrid: null,\r\n        encryptedInputLife1AndSpouse: \"\",\r\n        encryptedInputLife1: \"\",\r\n      },\r\n    };\r\n    this.openCollapsible = [];\r\n    let i;\r\n    for (i = 0; i < COLLAPSIBLES_COUNT; ++i) {\r\n      this.openCollapsible.push({\r\n        open: COLLAPSIBLES_CLOSED,\r\n        id: i,\r\n      });\r\n    }\r\n    // open first bar\r\n    this.openCollapsible[COLLAPSIBLE_CLIENTS].open = this.state.dataInput.Presentations[0].language===\"en\"?COLLAPSIBLES_OPEN:COLLAPSIBLES_CLOSED;\r\n\r\n    this.tag = { t: 0, y: 0 };\r\n    this.showRecover = 1;\r\n    this.survIdx = APPLET_INA ? QUOTE_SPOUSE : QUOTE_CLIENT;\r\n    this.graphs = false;\r\n    this.caseFromFile = false;\r\n    this.OKToRemove = true;\r\n    this.accessedAPI = false;\r\n    this.openParent = true;\r\n    this.openForce = true;\r\n    this.resultIsOpen = false;\r\n    this.langText = \"Franais\";\r\n    this.provinceMargTax = 0;\r\n    this.visibleOutputSection = 0;\r\n    this.dataQS = \"\";\r\n    this.intervalID = 0;\r\n    this.INAOption = APPLET_INA ? DISPLAY_INCOME : DISPLAY_TAXLIAB;\r\n  }\r\n\r\n  probateSync = async (dataInput, dataOutput) => {\r\n    // if not there add\r\n    let qbProbate = new Array(dataOutput.probate.numericValues.length).fill(0);\r\n    if (dataInput.Presentations[0].provinceKey === \"QC\")\r\n      dataOutput.probate.numericValues = qbProbate;\r\n\r\n    //  console.log(dataOutput.probate.numericValues)\r\n    let probate = LIABILITIES.PROBATE.Key;\r\n    let hasProbate = dataInput.Liabilitys.find(\r\n      (x) => x.liabTypeKey === probate\r\n    );\r\n    if (hasProbate !== undefined) {\r\n      hasProbate.currValue = dataOutput.probate.numericValues[0];\r\n    }\r\n    //console.log(hasProbate,dataInput)\r\n\r\n    return dataInput;\r\n  };\r\n\r\n  govBenefitsSync = async (dataInput, dataOutput) => {\r\n    // if not there add\r\n\r\n    if (APPLET_INA) {\r\n      //this.failedRemove=false\r\n      let gov1 = INCOMESOURCES.GOV_SURVIVORS_PENSION.Key; //value[this.state.dataInput.Presentations[0].language];\r\n      let gov = dataInput.Sources.find((x) => x.sourceTypeKey === gov1);\r\n\r\n      let gov2 = INCOMESOURCES.GOV_DEATH_BENEFIT.Key; //value[this.state.dataInput.Presentations[0].language];\r\n      let govDB = dataInput.Sources.find((x) => x.sourceTypeKey === gov2);\r\n\r\n      let hasSpouseArray = dataInput.Clients.find(\r\n        (x) => x.memberKey === MEMBER.SPOUSE.Key\r\n      );\r\n      const hasSpouse =\r\n        hasSpouseArray === undefined || hasSpouseArray.length === 0\r\n          ? false\r\n          : true;\r\n\r\n      const ownerID = dataInput.Clients.length > 1 ? 2 : 1;\r\n\r\n      if (gov === undefined) {\r\n        const sourceGovSurv = {\r\n          id: dataInput.Sources.length + 1, //sourcesNo + 1,\r\n          sourceTypeKey: INCOMESOURCES.GOV_SURVIVORS_PENSION.Key,\r\n          amount: hasSpouse ? parseInt(dataOutput.govBenefits.cppSurvivor) : 0, // * this.state.dataInput.Clients[QUOTE_CLIENT].Eligibility) / 100,\r\n          startYear: 0,\r\n          duration: 100,\r\n          ownerID: ownerID,\r\n        };\r\n        if (hasSpouse) dataInput.Sources.push(sourceGovSurv); // add at begi\r\n      } else {\r\n        gov.amount = hasSpouse\r\n          ? parseInt(dataOutput.govBenefits.cppSurvivor)\r\n          : 0;\r\n      }\r\n\r\n      if (govDB === undefined) {\r\n        const sourceGovDB = {\r\n          id: dataInput.Sources.length + 2,\r\n          sourceTypeKey: INCOMESOURCES.GOV_DEATH_BENEFIT.Key,\r\n          amount: parseInt(dataOutput.govBenefits.cppDB),\r\n          startYear: 0,\r\n          duration: 100,\r\n          ownerID: ownerID,\r\n        };\r\n        dataInput.Sources.push(sourceGovDB);\r\n      } else {\r\n        govDB.amount = parseInt(dataOutput.govBenefits.cppDB);\r\n      }\r\n\r\n      dataInput = await this.manageOrphanSync(dataInput, dataOutput); //}\r\n    }\r\n    return dataInput;\r\n  };\r\n\r\n  componentDidMount = async () => {\r\n    document.title = APPLET_INA ? \"INA\" : \"EP\";\r\n    this.intervalID = setInterval(this.loadData, 100000);\r\n    localStorage.setItem(\"INAAPIFails\", parseInt(0));\r\n    this.OKToRemove = true;\r\n    const query = queryString.parse(window.location.search);\r\n\r\n    if (query.QS !== undefined) {\r\n      await this.handleInitilizeQuoteFromQueryString(query.QS);\r\n    } else {\r\n      await this.handleIntitalFetch(\r\n        query.lang === \"fr\" || global.langFr ? \"fr\" : \"en\"\r\n      );\r\n    }\r\n\r\n    if (query.recover !== undefined) {\r\n      if (query.recover === \"true\") {\r\n        let d = new Date();\r\n        d = d.setHours(d.getHours(), d.getMinutes() - 5, 0, 0);\r\n        const objJSONData = JSON.parse(\r\n          localStorage.getItem(APPLET_INA ? \"INAData\" : \"EP\")\r\n        );\r\n\r\n        var dRecover = new Date(\r\n          objJSONData.dataPresentations.Presentations[0].valuationDate\r\n        );\r\n        dRecover = new Date(\r\n          objJSONData.dataPresentations.Presentations[0].presentationDate\r\n        );\r\n        if (dRecover > d) {\r\n          await this.loadStorage();\r\n          hideRecover();\r\n        }\r\n      }\r\n    }\r\n    // console.log(query)\r\n    if (query.snapimport !== undefined) {\r\n      if (query.snapimport === \"1\") {\r\n        this.setState({ SnapImport: true });\r\n      }\r\n    }\r\n  };\r\n\r\n  handleIntitalFetch = async (lang) => {\r\n    //let presentation = this.state.dataInput.Presentations[0];\r\n    /* await this.handleUpdatePresentation(presentation, true);\r\n\r\n    await this.govBenefits(); */\r\n\r\n    this.setState({ loading: true });\r\n    let { dataInput, dataOutput } = this.state;\r\n    const newDataInput = _.cloneDeep(dataInput);\r\n    const newDataOutput = _.cloneDeep(dataOutput);\r\n\r\n    let presentation = newDataInput.Presentations[0];\r\n\r\n    {\r\n      const tr = await getTaxRate(\r\n        \"PERSONAL_INCOME\",\r\n        presentation.provinceKey\r\n        //convertProvince(presentation.provinceKey, this.state.dataInput.Presentations[0].language)\r\n      );\r\n      presentation.taxRate = (Math.round(tr * 10000) / 100).toFixed(4);\r\n    }\r\n\r\n    // set new lang if coming from lang change in landing page\r\n    presentation.language = lang;\r\n    newDataInput.Presentations[0] = presentation;\r\n\r\n    //this.AddInitialGovBenefits(newDataInput);\r\n\r\n    // first asset needs to be updated with grid etc\r\n    const newState = await this.reSync_reCalculate_reRender(\r\n      newDataInput,\r\n      newDataOutput,\r\n      //COLLAPSIBLE_ASSETS,\r\n      COLLAPSIBLE_UPDATE_ALL, // make sure initial from file, new default updates all\r\n      1,\r\n      0,\r\n      false // initial case is on set to 1, any change after this removes recover\r\n    );\r\n\r\n    // before eupdating state, resync, recalcuate, update state to re_render\r\n    this.setState({ ...newState, loading: false, initialLoading: false });\r\n  };\r\n\r\n  handleUpdateOutput = async (\r\n    newStateCandidateInput,\r\n    dataOutput,\r\n    itemToUpdateGroup,\r\n    itemToUpdateID\r\n  ) => {\r\n    try {\r\n      //await this.handleFetchInsuranceNeeds();\r\n      const dataNA = await setUIDataToAPI(newStateCandidateInput);\r\n\r\n      // close results tab to avoid numerous recalcs\r\n      // this.openCollapsible[COLLAPSIBLE_RESULTS].open = false;\r\n\r\n      // main output data\r\n      const data = await handleFetchInsuranceNeedsNew(\r\n        dataNA,\r\n        newStateCandidateInput\r\n      );\r\n      let newStateCandidateOutput = this.populateOutput2(data, dataOutput);\r\n      // assets projs , do all assets if it is from a saved file we need all for RESULTS\r\n      if (\r\n        newStateCandidateOutput.assetProjections !== null &&\r\n        (itemToUpdateGroup === COLLAPSIBLE_ASSETS ||\r\n          itemToUpdateGroup === COLLAPSIBLE_RESULTS ||\r\n          itemToUpdateGroup === COLLAPSIBLE_UPDATE_ALL ||\r\n          newStateCandidateOutput.assetProjections.length <\r\n            newStateCandidateInput.Assets.length)\r\n      )\r\n        newStateCandidateOutput.assetProjections =\r\n          await this.updateAssetProjectionOutput(\r\n            dataNA,\r\n            newStateCandidateInput,\r\n            newStateCandidateOutput,\r\n            itemToUpdateGroup,\r\n            itemToUpdateID\r\n          );\r\n\r\n      // set new encrpt file that now has calculated ins. Amt\r\n      // need to only pass client & spouse to EP and Client only to others\r\n      let newDataInputClient12 = _.cloneDeep(newStateCandidateInput);\r\n      // remove sources based on child\r\n      newDataInputClient12.Clients.forEach((element) => {\r\n        if (\r\n          element.memberKey === MEMBER.CHILD.Key ||\r\n          element.memberKey === MEMBER.DEPENDENT_ADULT.Key\r\n        )\r\n          newDataInputClient12.Sources = newDataInputClient12.Sources.filter(\r\n            (item) => {\r\n              return item.ownerID !== element.id;\r\n            }\r\n          );\r\n      });\r\n      newDataInputClient12.Clients = newDataInputClient12.Clients.filter(\r\n        (item) => {\r\n          return (\r\n            item.memberKey === MEMBER.CLIENT.Key ||\r\n            item.memberKey === MEMBER.SPOUSE.Key\r\n          );\r\n        }\r\n      );\r\n\r\n      newStateCandidateOutput.encryptedInputLife1AndSpouse =\r\n        await this.handleQueryString(\r\n          MODE_ONLY_GET_ENCRYPTED_QS,\r\n          newDataInputClient12,\r\n          newStateCandidateOutput\r\n        );\r\n\r\n      // need to only pass client who is to be insured and not JLTD\r\n      let newDataInputClient1 = _.cloneDeep(newStateCandidateInput);\r\n      newDataInputClient1.Clients = newDataInputClient1.Clients.filter(\r\n        (item) => {\r\n          return item.memberKey === MEMBER.CLIENT.Key;\r\n        }\r\n      );\r\n\r\n      newStateCandidateOutput.encryptedInputLife1 =\r\n        await this.handleQueryString(\r\n          MODE_ONLY_GET_ENCRYPTED_QS,\r\n          newDataInputClient1,\r\n          newStateCandidateOutput\r\n        ); // set this.dataQS\r\n      //newStateCandidateOutput.encryptedInput = this.dataQS;\r\n      // liabs projs\r\n      // aggregate grid proj\r\n      newStateCandidateOutput.aggregateGrid = await this.updateOutputData(\r\n        newStateCandidateInput,\r\n        newStateCandidateOutput\r\n      );\r\n      return newStateCandidateOutput;\r\n    } catch (error) {\r\n      return null;\r\n    }\r\n  };\r\n  /* end Region */\r\n\r\n  updateAssetProjectionOutput = async (\r\n    dataNA,\r\n    newStateCandidateInput,\r\n    newStateCandidateOutput,\r\n    itemToUpdateGroup,\r\n    itemToUpdateID\r\n  ) => {\r\n    for (let i = 0; i < newStateCandidateInput.Assets.length; i++) {\r\n      const element = newStateCandidateInput.Assets[i];\r\n      if (\r\n        element.id === itemToUpdateID ||\r\n        itemToUpdateGroup === COLLAPSIBLE_RESULTS ||\r\n        itemToUpdateGroup === COLLAPSIBLE_UPDATE_ALL\r\n      ) {\r\n        let projection = await getAssetGridValues(\r\n          dataNA,\r\n          element,\r\n          newStateCandidateInput.Presentations[0].language,\r\n          false\r\n        ); //    this.updateProjection2(element,dataNA)\r\n        let a = newStateCandidateOutput.assetProjections.find(\r\n          (e) => e.id === element.id\r\n        );\r\n        if (a !== undefined) {\r\n          a.grid = projection;\r\n        } else\r\n          newStateCandidateOutput.assetProjections.push({\r\n            id: element.id,\r\n            grid: projection,\r\n          });\r\n      }\r\n    }\r\n\r\n    return newStateCandidateOutput.assetProjections;\r\n  };\r\n\r\n  populateOutput2 = (dataOutputCandidate, dataOutput) => {\r\n    try {\r\n      // console.log( dataOutput)\r\n      dataOutput.dataInsuranceNeeds = dataOutputCandidate.dataInsuranceNeeds;\r\n      dataOutput.dataCashFlowPersonal =\r\n        dataOutputCandidate.dataCashFlowPersonal.numericValues;\r\n      dataOutput.dataTaxLiability =\r\n        dataOutputCandidate.dataTaxLiability.numericValues;\r\n      dataOutput.dataCashFlowGov =\r\n        dataOutputCandidate.dataCashFlowGov.numericValues;\r\n      dataOutput.dataCashFlowNeeds =\r\n        dataOutputCandidate.dataCashFlowNeeds.numericValues;\r\n      dataOutput.dataNAAges = dataOutputCandidate.dataNAAges.numericValues;\r\n      dataOutput.dataShortfall =\r\n        dataOutputCandidate.dataShortfall.numericValues;\r\n      dataOutput.govBenefits.cppSurvivor = dataOutputCandidate.cpp;\r\n      dataOutput.govBenefits.cppDB = dataOutputCandidate.cppDB;\r\n      dataOutput.govBenefits.cppOrphan = dataOutputCandidate.orphan;\r\n      dataOutput.probate = dataOutputCandidate.probate;\r\n      dataOutput.lifeExpectancy.client = dataOutputCandidate.lifeExpClient;\r\n      dataOutput.lifeExpectancy.spouse = dataOutputCandidate.lifeExp;\r\n      dataOutput.lifeExpectancy.joint = dataOutputCandidate.lifeExpJLTD;\r\n      dataOutput.encryptedInputLife1AndSpouse =\r\n        dataOutputCandidate.encryptedInputLife1AndSpouse;\r\n      dataOutput.encryptedInputLife1 = dataOutputCandidate.encryptedInputLife1;\r\n      return dataOutput;\r\n    } catch (error) {\r\n      alert(\"Could not connect to the calculation engine API\");\r\n      return dataOutput;\r\n    }\r\n  };\r\n\r\n  populateOutput = async (data) => {\r\n    let dataOutput = this.state.dataOutput;\r\n\r\n    dataOutput.dataInsuranceNeeds = data.dataInsuranceNeeds;\r\n    dataOutput.dataCashFlowPersonal = data.dataCashFlowPersonal.numericValues;\r\n    dataOutput.dataTaxLiability = data.dataTaxLiability.numericValues;\r\n    dataOutput.dataCashFlowGov = data.dataCashFlowGov.numericValues;\r\n    dataOutput.dataCashFlowNeeds = data.dataCashFlowNeeds.numericValues;\r\n    dataOutput.dataNAAges = data.dataNAAges.numericValues;\r\n    dataOutput.dataShortfall = data.dataShortfall.numericValues;\r\n    dataOutput.govBenefits.cppSurvivor = data.cpp;\r\n    dataOutput.govBenefits.cppDB = data.cppDB;\r\n    dataOutput.govBenefits.cppOrphan = data.orphan;\r\n    dataOutput.lifeExpectancy.client = data.lifeExpClient;\r\n    dataOutput.lifeExpectancy.spouse = data.lifeExp;\r\n    dataOutput.lifeExpectancy.joint = data.lifeExpJLTD;\r\n\r\n    this.setState({ dataOutput: dataOutput, SnapImport: false });\r\n  };\r\n\r\n  handleQueryString = async (mode, dataInput, dataOutput) => {\r\n    const lang = dataInput.Presentations[0].language;\r\n    const insuranceNeed =\r\n      dataOutput.dataInsuranceNeeds[dataInput.Presentations[0].periodOption]\r\n        .Value;\r\n    let dataNA = await setUIDataToAPI(dataInput, insuranceNeed);\r\n    let data = await handleFetchQueryString(dataNA);\r\n    if (data !== undefined) {\r\n      this.dataQS = data;\r\n      if (mode === MODE_ONLY_GET_ENCRYPTED_QS) return data;\r\n      else if (mode === MODE_SAVE) this.setState({ showMsg: true });\r\n      else if (mode === MODE_EMAIL) {\r\n        let url =\r\n          \"mailto: ?subject= \" +\r\n          (APPLET_INA ? TITLES[lang].appletINA : TITLES[lang].appletEP) +\r\n          \" &body= \" +\r\n          (EMAIL[lang].body +\r\n            \".%0D%0A\" +\r\n            appSiteParent +\r\n            \"?applet=EP&QS=\" +\r\n            this.dataQS);\r\n\r\n        const ft =\r\n          appSiteParent +\r\n          \"/?\" +\r\n          [\"applet=\" + DISPLAY_NAME, \"QS=\" + this.dataQS].join(\"&\");\r\n        url =\r\n          \"mailto: ?subject= \" +\r\n          (APPLET_INA ? TITLES[lang].appletINA : TITLES[lang].appletEP) +\r\n          \" &body= \" +\r\n          EMAIL[lang].body +\r\n          \".%0D%0A\" +\r\n          encodeURIComponent(ft);\r\n\r\n        window.location.href = url;\r\n      }\r\n    }\r\n  };\r\n\r\n  handleInitilizeQuoteFromQueryString = async (savedINA_QS) => {\r\n    //log(savedINA_QS)\r\n    const data = await handleFetchINADataFromQueryString(savedINA_QS);\r\n    //  console.log(data)\r\n\r\n    let objJSONData = await loadSavedDataToUI(data, this.state.dataInput);\r\n\r\n    // put loaded data to quote and show\r\n    this.updateStateFromJSon(objJSONData);\r\n  };\r\n\r\n  handleUpdateClient = async (client) => {\r\n    // keep render to just once until or if needed. this also avoids flshing page before final render\r\n\r\n    {\r\n      this.setState({ loading: true });\r\n\r\n      const { dataOutput, dataInput } = this.state;\r\n      let newDataInput = _.cloneDeep(dataInput);\r\n      const newDataOutput = _.cloneDeep(dataOutput);\r\n\r\n      if (client.Age > client.retirementAge)\r\n        client.retirementAge = client.Age + 1;\r\n      const redoAll =\r\n        client.memberKey !== newDataInput.Clients[QUOTE_CLIENT].memberKey ||\r\n        client.Age !== newDataInput.Clients[QUOTE_CLIENT].Age ||\r\n        client.Eligibility !== newDataInput.Clients[QUOTE_CLIENT].Eligibility ||\r\n        client.avgTaxRate !== newDataInput.Clients[QUOTE_CLIENT].avgTaxRate ||\r\n        (newDataInput.Clients.count > 1 &&\r\n          (client.Age !== newDataInput.Clients[QUOTE_SPOUSE].Age ||\r\n            client.avgTaxRate !==\r\n              newDataInput.Clients[QUOTE_SPOUSE].avgTaxRate));\r\n      newDataInput.Clients[client.id - 1] = client;\r\n\r\n      const newState = await this.reSync_reCalculate_reRender(\r\n        newDataInput,\r\n        newDataOutput,\r\n        redoAll ? COLLAPSIBLE_UPDATE_ALL : COLLAPSIBLE_CLIENTS, // need to redo a\r\n        client.id\r\n      );\r\n      this.setState({ ...newState, loading: false });\r\n    }\r\n  };\r\n\r\n  reSync_reCalculate_reRender = async (\r\n    newStateCandidateInput,\r\n    dataOutput,\r\n    itemToUpdateGroup,\r\n    itemToUpdateID,\r\n    debounce,\r\n    saveToStorage\r\n  ) => {\r\n    try {\r\n      // reSync\r\n      newStateCandidateInput = await this.syncPanelsValues2(\r\n        newStateCandidateInput,\r\n        itemToUpdateGroup\r\n      );\r\n\r\n      let newStateCandidateOutput;\r\n\r\n      // reCalculate\r\n      if (debounce)\r\n        newStateCandidateOutput = await this.debounceHandleUpdateOutput(\r\n          newStateCandidateInput,\r\n          dataOutput,\r\n          itemToUpdateGroup,\r\n          itemToUpdateID\r\n        );\r\n      else\r\n        newStateCandidateOutput = await this.handleUpdateOutput(\r\n          newStateCandidateInput,\r\n          dataOutput,\r\n          itemToUpdateGroup,\r\n          itemToUpdateID\r\n        );\r\n\r\n      newStateCandidateInput = await this.govBenefitsSync(\r\n        newStateCandidateInput,\r\n        newStateCandidateOutput\r\n      );\r\n\r\n      newStateCandidateInput = await this.probateSync(\r\n        newStateCandidateInput,\r\n        newStateCandidateOutput\r\n      );\r\n\r\n      if (this.state.SnapImport) this.setState({ SnapImport: false });\r\n\r\n      if (saveToStorage !== false) this.debounceSaveToStorage();\r\n      return {\r\n        dataInput: newStateCandidateInput,\r\n        dataOutput: newStateCandidateOutput,\r\n      };\r\n    } catch (error) {}\r\n  };\r\n\r\n  updateOutputData = async (\r\n    newStateCandidateInput,\r\n    newStateCandidateOutput\r\n  ) => {\r\n    if (true) {\r\n      let dataGov;\r\n      let dataPCV;\r\n      let dataNeed;\r\n      let dataShort;\r\n\r\n      //    let hasSurivor = false;\r\n\r\n      let aggregateGrid;\r\n\r\n      /*       const spKey = APPLET_INA ? MEMBER.SPOUSE.Key : MEMBER.CLIENT.Key;\r\n            let Survivor = this.state.dataInput.Clients.find(x => x.memberKey === spKey);\r\n      \r\n            if (Survivor !== undefined) {\r\n              hasSurivor = true;\r\n            }\r\n       */\r\n      const Survivor = newStateCandidateInput.Clients[this.survIdx]; //.find(x => x.memberKey === spKey);\r\n      const Survivors = newStateCandidateInput.Clients.filter((item) => {\r\n        return item.id > 1;\r\n      });\r\n\r\n      /* if (Survivor !== undefined) {\r\n        hasSurivor = true;\r\n      }\r\n */\r\n      const insuranceNeeds = newStateCandidateOutput.dataInsuranceNeeds;\r\n      const periodOption = newStateCandidateInput.Presentations[0].periodOption;\r\n\r\n      const inputOutputIsValid =\r\n        insuranceNeeds.length > 0 &&\r\n        newStateCandidateOutput.dataNAAges !== undefined &&\r\n        Survivor !== undefined;\r\n\r\n      if (inputOutputIsValid) {\r\n        const projYears = familyProjectionYears(\r\n          newStateCandidateInput.Clients,\r\n          periodOption,\r\n          newStateCandidateOutput.lifeExpectancy,\r\n          insuranceNeeds,\r\n          newStateCandidateOutput.dataShortfall,\r\n          newStateCandidateInput.Presentations[0]\r\n        );\r\n        const insNeed = projYears.insuranceNeed;\r\n        const insNeedRet = projYears.insuranceNeedToRet;\r\n        const insNeedLE = projYears.insuranceNeedToLE;\r\n        const singleFamily = isSingleFamily(newStateCandidateInput.Clients);\r\n        const noProjectYrs = projYears.noProjectionYrs;\r\n        if (singleFamily) {\r\n          // use years\r\n          newStateCandidateOutput.dataNAAges = [];\r\n          for (let i = 0; i < noProjectYrs; i++)\r\n            newStateCandidateOutput.dataNAAges.push(i + 1);\r\n        }\r\n\r\n        dataGov = newStateCandidateOutput.dataCashFlowGov.slice(\r\n          0,\r\n          noProjectYrs\r\n        );\r\n        dataPCV = newStateCandidateOutput.dataCashFlowPersonal.slice(\r\n          0,\r\n          noProjectYrs\r\n        );\r\n        dataNeed = newStateCandidateOutput.dataCashFlowNeeds.slice(\r\n          0,\r\n          noProjectYrs\r\n        );\r\n        dataShort = newStateCandidateOutput.dataShortfall.slice(\r\n          0,\r\n          noProjectYrs\r\n        );\r\n\r\n        if (APPLET_INA) {\r\n          aggregateGrid = await getINAGridData(\r\n            insNeed,\r\n            insNeedRet,\r\n            insNeedLE,\r\n            dataPCV,\r\n            //  Survivor,\r\n            Survivors,\r\n            dataNeed,\r\n            dataGov,\r\n            dataShort,\r\n            newStateCandidateInput.Presentations[0].inflation,\r\n            newStateCandidateInput.Presentations[0].language,\r\n            newStateCandidateInput.Presentations[0].invRate,\r\n            newStateCandidateInput.Sources,\r\n            newStateCandidateOutput.govBenefits.cppDB *\r\n              (1 -\r\n                newStateCandidateInput.Clients[QUOTE_CLIENT].avgTaxRate / 100)\r\n          );\r\n        } else if (APPLET_EP) {\r\n          aggregateGrid = await getEPGridData(\r\n            noProjectYrs,\r\n            newStateCandidateInput\r\n          );\r\n        }\r\n      }\r\n      return aggregateGrid;\r\n    }\r\n  };\r\n\r\n  switchClients = async () => {\r\n    if (\r\n      this.state.dataInput.Clients.find(\r\n        (x) => x.memberKey === MEMBER.SPOUSE.Key\r\n      ) !== undefined\r\n    ) {\r\n      this.setState({ loading: true });\r\n\r\n      const newState = await this.getSwitchClientsState();\r\n\r\n      this.setState({ ...newState, loading: false });\r\n    }\r\n  };\r\n\r\n  getSwitchClientsState = async () => {\r\n    const { dataOutput, dataInput } = this.state;\r\n    const newDataInput = _.cloneDeep(dataInput);\r\n    const newDataOutput = _.cloneDeep(dataOutput);\r\n    let client1 = newDataInput.Clients[QUOTE_CLIENT];\r\n    newDataInput.Clients[QUOTE_CLIENT] = newDataInput.Clients[QUOTE_SPOUSE];\r\n    newDataInput.Clients[QUOTE_SPOUSE] = client1;\r\n    newDataInput.Assets.forEach((element) => {\r\n      if (\r\n        element.ownerKey === ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key ||\r\n        element.ownerKey === ASSET_OWNERSHIP_ACTION.CLIENT_ROLLOVER.Key\r\n      ) {\r\n        element.ownerKey = ASSET_OWNERSHIP_ACTION.SPOUSE.Key;\r\n      } else if (element.ownerKey === ASSET_OWNERSHIP_ACTION.SPOUSE.Key) {\r\n        element.ownerKey =\r\n          element.assetTypeKey === ASSETS.LIFE_INSURANCE.Key\r\n            ? ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key\r\n            : ASSET_OWNERSHIP_ACTION.CLIENT_ROLLOVER.Key;\r\n      }\r\n    });\r\n    newDataInput.Liabilitys.forEach((element) => {\r\n      if (element.ownerID === 0) {\r\n        element.ownerID = QUOTE_SPOUSE + 1;\r\n      }\r\n    });\r\n\r\n    newDataInput.Liabilitys.forEach((element) => {\r\n      if (element.ownerID === QUOTE_CLIENT + 1) {\r\n        element.ownerID = 0;\r\n      }\r\n      if (element.ownerID === QUOTE_SPOUSE + 1) {\r\n        element.ownerID = QUOTE_CLIENT + 1;\r\n      }\r\n    });\r\n    newDataInput.Liabilitys.forEach((element) => {\r\n      if (element.ownerID === 0) {\r\n        element.ownerID = QUOTE_SPOUSE + 1;\r\n      }\r\n    });\r\n\r\n    // keep member\r\n    newDataInput.Clients[QUOTE_CLIENT].memberKey = MEMBER.CLIENT.Key;\r\n    newDataInput.Clients[QUOTE_SPOUSE].memberKey = MEMBER.SPOUSE.Key;\r\n\r\n    newDataInput.Clients[QUOTE_CLIENT].id = QUOTE_CLIENT + 1;\r\n    newDataInput.Clients[QUOTE_SPOUSE].id = QUOTE_SPOUSE + 1;\r\n\r\n    const newState = await this.reSync_reCalculate_reRender(\r\n      newDataInput,\r\n      newDataOutput,\r\n      COLLAPSIBLE_UPDATE_ALL, // to updateAll\r\n      0\r\n    );\r\n\r\n    return newState;\r\n  };\r\n\r\n  handleUpdateAsset = async (asset) => {\r\n    this.setState({ loading: true });\r\n    const { dataInput, dataOutput } = this.state;\r\n    let newDataInput = _.cloneDeep(dataInput);\r\n    const newDataOutput = _.cloneDeep(dataOutput);\r\n    if (asset.assetTypeKey === ASSETS.RRSP_RRIF.Key) {\r\n      if (APPLET_EP) {\r\n        if (\r\n          asset.ownerKey === ASSET_OWNERSHIP_ACTION.SPOUSE.Key &&\r\n          newDataInput.Clients.length === 1\r\n        )\r\n          asset.ownerKey = ASSET_OWNERSHIP_ACTION.CLIENT.Key; // if no spouse\r\n        if (asset.assetTypeKey === ASSETS.RRSP_RRIF.Key) {\r\n          if (asset.ownerKey !== ASSET_OWNERSHIP_ACTION.SPOUSE.Key)\r\n            asset.ownerKey = ASSET_OWNERSHIP_ACTION.CLIENT.Key;\r\n        }\r\n      }\r\n      asset = this.manageRRIFBounds(asset, newDataInput.Clients);\r\n      newDataInput = this.addRRIFSource2(newDataInput, asset);\r\n    }\r\n    newDataInput.Assets[asset.id - 1] = asset;\r\n\r\n    const newState = await this.reSync_reCalculate_reRender(\r\n      newDataInput,\r\n      newDataOutput,\r\n      COLLAPSIBLE_ASSETS,\r\n      asset.id\r\n    );\r\n    this.setState({ ...newState, loading: false });\r\n  };\r\n\r\n  manageRRIFBounds = (asset, clients) => {\r\n    const age =\r\n      asset.ownerKey === ASSET_OWNERSHIP_ACTION.SPOUSE.Key\r\n        ? clients[QUOTE_SPOUSE].Age\r\n        : clients[QUOTE_CLIENT].Age;\r\n    if (asset.RRIFStartAge < age) asset.RRIFStartAge = age;\r\n    else if (asset.RRIFStartAge > DEFAULT_RRIF_AGE)\r\n      asset.RRIFStartAge = DEFAULT_RRIF_AGE;\r\n    return asset;\r\n  };\r\n\r\n  handleUpdateLiability = async (liability) => {\r\n    this.setState({ loading: true });\r\n    let { dataInput, dataOutput } = this.state;\r\n    const newDataInput = _.cloneDeep(dataInput);\r\n    const newDataOutput = _.cloneDeep(dataOutput);\r\n    newDataInput.Liabilitys[liability.id - 1] = liability;\r\n\r\n    const redoAll =\r\n      liability.liabTypeKey === LIABILITIES.CHARITABLE_GIFTS.Key ? true : false;\r\n    // before updating state, resync, recalcuate, then update state to re_render\r\n    let newState = await this.reSync_reCalculate_reRender(\r\n      newDataInput,\r\n      newDataOutput,\r\n      redoAll ? COLLAPSIBLE_UPDATE_ALL : COLLAPSIBLE_LIABS, //updateAll if liab is charitable\r\n      liability.id\r\n    );\r\n\r\n    this.setState({ ...newState, loading: false });\r\n  };\r\n\r\n  handleUpdateSource = async (source) => {\r\n    this.setState({ loading: true });\r\n    let { dataInput, dataOutput } = this.state;\r\n    const newDataInput = _.cloneDeep(dataInput);\r\n    const newDataOutput = _.cloneDeep(dataOutput);\r\n    newDataInput.Sources[source.id - 1] = source;\r\n\r\n    // before updating state, resync, recalcuate, then update state to re_render\r\n    const newState = await this.reSync_reCalculate_reRender(\r\n      newDataInput,\r\n      newDataOutput,\r\n      COLLAPSIBLE_SOURCES,\r\n      source.id\r\n    );\r\n    this.setState({ ...newState, loading: false, failedRemove: false });\r\n  };\r\n\r\n  handleUpdateNeed = async (need) => {\r\n    this.setState({ loading: true });\r\n    let { dataInput, dataOutput } = this.state;\r\n    const newDataInput = _.cloneDeep(dataInput);\r\n    const newDataOutput = _.cloneDeep(dataOutput);\r\n    newDataInput.Needs[need.id - 1] = need;\r\n\r\n    // before updating state, resync, recalcuate, then update state to re_render\r\n    const newState = await this.reSync_reCalculate_reRender(\r\n      newDataInput,\r\n      newDataOutput,\r\n      COLLAPSIBLE_NEEDS,\r\n      need.id\r\n    );\r\n    this.setState({ ...newState, loading: false });\r\n\r\n    //this.setState({ dataInput: data2 }, () => this.waitForSetStateCallback(0));\r\n  };\r\n\r\n  handleUpdatePresentation = async (presentation) => {\r\n    this.setState({ loading: true });\r\n    let { dataInput, dataOutput } = this.state;\r\n    let newDataInput = _.cloneDeep(dataInput);\r\n    const newDataOutput = _.cloneDeep(dataOutput);\r\n\r\n    // update tax rate\r\n    if (\r\n      //init === true ||\r\n      newDataInput.Presentations[0].provinceKey !== presentation.provinceKey\r\n    ) {\r\n      const tr = await getTaxRate(\r\n        \"PERSONAL_INCOME\",\r\n        presentation.provinceKey\r\n        //convertProvince(presentation.provinceKey, this.state.dataInput.Presentations[0].language)\r\n      );\r\n      presentation.taxRate = (Math.round(tr * 10000) / 100).toFixed(4);\r\n    }\r\n\r\n    const redoAll = true; //presentation.taxRate !== newDataInput.Presentations[0].taxRate || presentation.inflation !== newDataInput.Presentations[0].inflation\r\n\r\n    let debounce = false;\r\n    if (\r\n      newDataInput.Presentations[0].designedBy !== presentation.designedBy ||\r\n      newDataInput.Presentations[0].designedFor !== presentation.designedFor ||\r\n      newDataInput.Presentations[0].notes !== presentation.notes\r\n    )\r\n      debounce = true;\r\n\r\n    newDataInput.Presentations[presentation.id - 1] = presentation;\r\n    const newState = await this.reSync_reCalculate_reRender(\r\n      newDataInput,\r\n      newDataOutput,\r\n      redoAll ? COLLAPSIBLE_UPDATE_ALL : COLLAPSIBLE_PRESENTATION, //updateAll if tax rate or inf rate change\r\n      presentation.id\r\n    );\r\n\r\n    // before eupdating state, resync, recalcuate, update state to re_render\r\n    this.setState({ ...newState, loading: false });\r\n  };\r\n\r\n  saveAsDefaultCase = (clear) => {\r\n    // save as default if needed\r\n    const storageName = DEFAULT_QUOTE;\r\n    if (clear) {\r\n      localStorage.removeItem(storageName);\r\n    } else {\r\n      localStorage.setItem(storageName, JSON.stringify(this.state.dataInput));\r\n    }\r\n  };\r\n\r\n  // this updates all and changes languge for all grids\r\n  handleUpdatePresentationChange = async (presentation, noRecalc) => {\r\n    if (noRecalc) {\r\n      this.setState((prevState) => ({\r\n        dataInput: {\r\n          ...prevState.dataInput,\r\n          Presentations: [\r\n            {\r\n              ...prevState.dataInput.Presentations[0],\r\n              resultsOption: presentation.resultsOption,\r\n              periodOption: presentation.periodOption,\r\n            },\r\n          ],\r\n        },\r\n      }));\r\n    } else {\r\n      this.setState({ loading: true });\r\n      let { dataInput, dataOutput } = this.state;\r\n      const newDataInput = _.cloneDeep(dataInput);\r\n      const newDataOutput = _.cloneDeep(dataOutput);\r\n\r\n      newDataInput.Presentations[0] = presentation;\r\n\r\n      const newState = await this.reSync_reCalculate_reRender(\r\n        newDataInput,\r\n        newDataOutput,\r\n        COLLAPSIBLE_RESULTS,\r\n        0,\r\n        false,\r\n        false\r\n      );\r\n\r\n      // before eupdating state, resync, recalcuate, update state to re_render\r\n      this.setState({ ...newState, loading: false });\r\n    }\r\n  };\r\n\r\n  handleAddClient = async (client) => {\r\n    this.setState({ loading: true });\r\n    const { dataInput, dataOutput } = this.state;\r\n    let newDataInput = _.cloneDeep(dataInput);\r\n    const newDataOutput = _.cloneDeep(dataOutput);\r\n    newDataInput.Clients.push(client);\r\n    //if (client.memberKey === MEMBER.CHILD.Key)\r\n    //newDataInput = this.manageAddingChild(newDataInput);\r\n    // resync, recalcuate, then update state to re_render\r\n    // if has salary, add source\r\n\r\n    newDataInput = await this.manageAddingClientWithIncome(\r\n      newDataInput,\r\n      client\r\n    );\r\n\r\n    // adding a client to EP changes to JLTD and existing assets are affected\r\n\r\n    const newState = await this.reSync_reCalculate_reRender(\r\n      newDataInput,\r\n      newDataOutput,\r\n      APPLET_EP ? COLLAPSIBLE_UPDATE_ALL : COLLAPSIBLE_CLIENTS,\r\n      APPLET_EP ? 0 : client.id\r\n    );\r\n    this.setState({ ...newState, loading: false });\r\n    //this.setState({ dataInput: data2 }, () => this.manageAddingChild());\r\n  };\r\n\r\n  manageAddingChild = (input) => {\r\n    input = this.manageEducation2(input);\r\n    input = this.manageOrphan2(input);\r\n    return input;\r\n  };\r\n\r\n  manageAddingClientWithIncome = async (newDataInput, client) => {\r\n    let source = createDefaultSource(newDataInput.Sources.length + 1);\r\n    source.amount = client.Income;\r\n    source.duration = client.retirementAge - client.Age;\r\n    source.ownerID = client.id;\r\n    source.taxRate = client.avgTaxRate;\r\n    newDataInput.Sources.push(source);\r\n\r\n    return newDataInput;\r\n  };\r\n\r\n  manageRemovingClientWithIncome = async (dataInput) => {\r\n    // remove all salaryPct sources and re-add\r\n    dataInput.Sources = dataInput.Sources.filter(\r\n      (item) => item.sourceTypeKey !== INCOMESOURCES.SURVIVORS_INCOME.Key\r\n    );\r\n    dataInput.Clients.forEach(async (element) => {\r\n      if (element.memberKey !== MEMBER.CLIENT.Key) {\r\n        dataInput = await this.manageAddingClientWithIncome(dataInput, element);\r\n      }\r\n    });\r\n\r\n    return dataInput;\r\n  };\r\n\r\n  handleAddAsset = async (asset) => {\r\n    this.setState({ loading: true });\r\n\r\n    const { dataInput, dataOutput } = this.state;\r\n    let newDataInput = _.cloneDeep(dataInput);\r\n    let newDataOutput = _.cloneDeep(dataOutput);\r\n    if (asset === undefined) {\r\n      asset = createDefaultAsset(1);\r\n      // single person\r\n      if (newDataInput.Clients.length === 1)\r\n        asset.ownerKey = ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key;\r\n    }\r\n\r\n    //  dataInput.assetsNo++;\r\n    newDataInput.Assets.push(asset);\r\n\r\n    // resync, recalcuate, then update state to re_render\r\n    const newState = await this.reSync_reCalculate_reRender(\r\n      newDataInput,\r\n      newDataOutput,\r\n      COLLAPSIBLE_ASSETS,\r\n      asset.id\r\n    );\r\n    this.setState({ ...newState, loading: false });\r\n\r\n    /*     this.setState({ dataInput: dataInput, loading: true }, () =>\r\n      this.waitForSetStateCallback(0) // no need to save to storage when default is added\r\n    );\r\n */ //await this.updateProjection(asset)\r\n  };\r\n\r\n  updateProjection = async (asset) => {\r\n    let dataInput = this.state.dataInput;\r\n\r\n    const insuranceNeed =\r\n      this.state.dataOutput.dataInsuranceNeeds[\r\n        dataInput.Presentations[0].periodOption\r\n      ].Value;\r\n    let dataNA = await setUIDataToAPI(this.state.dataInput, insuranceNeed);\r\n    dataInput.Assets[asset.id - 1].projection = await getAssetGridValues(\r\n      dataNA,\r\n      asset,\r\n      this.state.dataInput.Presentations[0].language,\r\n      false\r\n    );\r\n\r\n    this.setState({ dataInput: dataInput, loading: false });\r\n  };\r\n\r\n  handleAddLiability = async (Liab) => {\r\n    this.setState({ loading: true });\r\n    const { dataInput, dataOutput } = this.state;\r\n    const newDataInput = _.cloneDeep(dataInput);\r\n    const newDataOutput = _.cloneDeep(dataOutput);\r\n    if (Liab === undefined) {\r\n      Liab = {\r\n        id: 1,\r\n        //Type: LIABILITIES.LAST_EXPENSES.value[\"en\"],\r\n        liabTypeKey: LIABILITIES.LAST_EXPENSES.Key,\r\n        ownerKey: OWNERSHIP.CLIENT.Key,\r\n        currValue: 0,\r\n        //growthDir: GROWTHDIR[\"en\"].Values[0], //increases\r\n        growthDirKey: GROWTHDIR.GROWS.Key, //increases\r\n        growth: 0,\r\n        repay: 0,\r\n        exposureDur: 99,\r\n        assetTaxLiabID: 0,\r\n        assetTaxLiabProj: [],\r\n      };\r\n    }\r\n\r\n    newDataInput.Liabilitys.push(Liab);\r\n\r\n    // resync, recalcuate, then update state to re_render\r\n\r\n    const newState = await this.reSync_reCalculate_reRender(\r\n      newDataInput,\r\n      newDataOutput,\r\n      COLLAPSIBLE_LIABS,\r\n      Liab.id\r\n    );\r\n    this.setState({ ...newState, loading: false });\r\n\r\n    /*     this.setState({ dataInput: data2 }, () =>\r\n      this.waitForSetStateCallback(0) // no need to save to storage when default is added\r\n    ); */\r\n  };\r\n\r\n  handleAddAssetTaxCredit = (type) => {\r\n    let data2 = this.state.dataInput;\r\n    // check if already there\r\n    let taxCredit = 0;\r\n    this.state.dataInput.Liabilitys.forEach((element) => {\r\n      if (element.liabTypeKey === LIABILITIES.CHARITABLE_GIFTS.Key) {\r\n        taxCredit += element.currValue;\r\n      }\r\n    });\r\n\r\n    taxCredit *= this.state.dataInput.Presentations[0].taxRate / 100;\r\n    let exists = false;\r\n    data2.Assets.forEach((element) => {\r\n      if (element.assetTypeKey === type) {\r\n        exists = true;\r\n        if (Math.abs(element.currValue - taxCredit) > 1) {\r\n          element.currValue = taxCredit;\r\n          this.handleUpdateAsset(element);\r\n        }\r\n      }\r\n    });\r\n    if (taxCredit > 0 && exists === false) {\r\n      const asset = createDefaultAsset(this.state.dataInput.Assets.length + 1); //assetsNo + 1)\r\n      asset.assetTypeKey = ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.Key;\r\n      asset.ownerKey = ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key;\r\n      asset.assetTaxTypeKey = ASSET_TAX.NON_TAXABLE.Key;\r\n      asset.currValue = taxCredit;\r\n      asset.DisposeYr = 0;\r\n\r\n      this.handleAddAsset(asset);\r\n      this.openCollapsible[COLLAPSIBLE_ASSETS].open = COLLAPSIBLES_OPEN;\r\n    }\r\n  };\r\n\r\n  handleAddAssetTaxCredit2 = (dataInput) => {\r\n    // check if already there\r\n    let taxCredit = 0;\r\n    dataInput.Liabilitys.forEach((element) => {\r\n      if (element.liabTypeKey === LIABILITIES.CHARITABLE_GIFTS.Key) {\r\n        taxCredit += element.currValue;\r\n      }\r\n    });\r\n\r\n    taxCredit *= dataInput.Presentations[0].taxRate / 100;\r\n    let exists = false;\r\n    dataInput.Assets.forEach((element) => {\r\n      if (element.assetTypeKey === ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.Key) {\r\n        exists = true;\r\n        if (Math.abs(element.currValue - taxCredit) > 1) {\r\n          element.currValue = taxCredit;\r\n          // this.handleUpdateAsset(element);\r\n        }\r\n      }\r\n    });\r\n    if (taxCredit > 0 && exists === false) {\r\n      const asset = createDefaultAsset(dataInput.Assets.length + 1); //assetsNo + 1)\r\n      asset.assetTypeKey = ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.Key;\r\n      asset.ownerKey = ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key;\r\n      asset.assetTaxTypeKey = ASSET_TAX.NON_TAXABLE.Key;\r\n      asset.currValue = taxCredit;\r\n      asset.DisposeYr = 0;\r\n\r\n      dataInput.Assets.push(asset);\r\n      this.openCollapsible[COLLAPSIBLE_ASSETS].open = COLLAPSIBLES_OPEN;\r\n    }\r\n    return dataInput;\r\n  };\r\n\r\n  handleAddSource = async (source) => {\r\n    this.setState({ loading: true });\r\n    const { dataInput, dataOutput } = this.state;\r\n    let newDataInput = _.cloneDeep(dataInput);\r\n    let newDataOutput = _.cloneDeep(dataOutput);\r\n    if (source === undefined) {\r\n      source = createDefaultSource();\r\n    }\r\n    // duration, growthRate,ownerID,taxRate depends on clients\r\n    source.ownerID = 2; // spouse or 1st child if single family57\r\n    source.duration = newDataInput.Sources[0].duration;\r\n    source.growthRate = newDataInput.Presentations[0].inflation;\r\n    source.taxRate =\r\n      newDataInput.Clients.length > 1\r\n        ? newDataInput.Clients[1].avgTaxRate\r\n        : newDataInput.Clients[0].avgTaxRate; // first survivor\r\n\r\n    newDataInput.Sources.push(source);\r\n    // resync, recalcuate, then update state to re_render\r\n    const newState = await this.reSync_reCalculate_reRender(\r\n      newDataInput,\r\n      newDataOutput,\r\n      COLLAPSIBLE_SOURCES,\r\n      source.id\r\n    );\r\n\r\n    this.setState({ ...newState, loading: false, failedRemove: false });\r\n  };\r\n\r\n  handleAddNeed = async (nextKey, startYear, duration) => {\r\n    if (nextKey === undefined) {\r\n      nextKey = INCOMENEEDS.TEMPORARY_INCOME.Key;\r\n      startYear = 0;\r\n      duration = 10;\r\n    }\r\n    this.setState({ loading: true });\r\n    const { dataInput, dataOutput } = this.state;\r\n    const newDataInput = _.cloneDeep(dataInput);\r\n    const newDataOutput = _.cloneDeep(dataOutput);\r\n\r\n    const need = {\r\n      id: newDataInput.Needs.length + 1, //needsNo,\r\n      needTypeKey: nextKey,\r\n      amount: 0,\r\n      Percent: 0,\r\n      startYear: startYear,\r\n      duration: duration,\r\n    };\r\n    newDataInput.Needs.push(need);\r\n\r\n    // resync, recalcuate, then update state to re_render\r\n    const newState = await this.reSync_reCalculate_reRender(\r\n      newDataInput,\r\n      newDataOutput,\r\n      COLLAPSIBLE_NEEDS,\r\n      need.id\r\n    );\r\n    this.setState({ ...newState, loading: false });\r\n\r\n    //    this.setState({ dataInput: data2 }, () => this.waitForSetStateCallback());\r\n  };\r\n\r\n  handleRemoveClient = async (id) => {\r\n    if (this.OKToRemove) {\r\n      this.setState({ loading: true });\r\n      const { dataInput, dataOutput } = this.state;\r\n      let newDataInput = _.cloneDeep(dataInput);\r\n      const newDataOutput = _.cloneDeep(dataOutput);\r\n      //   this.OKToRemove = false;\r\n\r\n      // first remove source if child\r\n      let cl = newDataInput.Clients.find((x) => x.id === id);\r\n\r\n      if (cl !== undefined && cl.memberKey === MEMBER.CHILD.Key)\r\n        newDataInput = await this.manageRemoveOrphan(newDataInput, cl.ownerID);\r\n\r\n      newDataInput.Clients.splice(id - 1, 1);\r\n      let i;\r\n      newDataInput.Sources = newDataInput.Sources.filter((item) => {\r\n        if (item.ownerID >= id) item.ownerID -= 1;\r\n      });\r\n\r\n      for (i = 1; i <= newDataInput.Clients.length; ++i) {\r\n        newDataInput.Clients[i - 1].id = i;\r\n      }\r\n      newDataInput = await this.manageRemovingClientWithIncome(newDataInput);\r\n      //data2.clientsNo = data2.Clients.length;\r\n      let redoAll = false;\r\n    \r\n      if (newDataInput.Clients.length === 1) {\r\n        // single person\r\n        newDataInput = await this.setAssetActionToLiquidate(newDataInput);\r\n        newDataInput = await this.setNeedsSinglePerson(newDataInput);\r\n        redoAll = true;\r\n    \r\n      }\r\n      // resync, recalcuate, then update state to re_render\r\n      const newState = await this.reSync_reCalculate_reRender(\r\n        newDataInput,\r\n        newDataOutput,\r\n        redoAll ? COLLAPSIBLE_UPDATE_ALL : COLLAPSIBLE_CLIENTS,\r\n        id\r\n      );\r\n      this.setState({ ...newState, loading: false });\r\n    }\r\n  };\r\n\r\n  handleRemoveAsset = async (id) => {\r\n    if (this.OKToRemove) {\r\n      //  this.OKToRemove = false;\r\n\r\n      this.setState({ loading: true });\r\n      const { dataInput, dataOutput } = this.state;\r\n      let newDataInput = _.cloneDeep(dataInput);\r\n      const newDataOutput = _.cloneDeep(dataOutput);\r\n\r\n      // remove RRIF\r\n      if (newDataInput.Assets[id - 1].assetTypeKey === ASSETS.RRSP_RRIF.Key)\r\n        newDataInput = this.removeRRIFSource(newDataInput);\r\n\r\n      newDataInput.Assets.splice(id - 1, 1);\r\n      newDataOutput.assetProjections.splice(id - 1, 1);\r\n      let i;\r\n      for (i = 1; i <= newDataInput.Assets.length; ++i) {\r\n        newDataInput.Assets[i - 1].id = i;\r\n        newDataOutput.assetProjections[i - 1].id = i;\r\n      }\r\n\r\n      // resync, recalcuate, then update state to re_render\r\n      // removing asset redoes ids need to do all grids\r\n      const newState = await this.reSync_reCalculate_reRender(\r\n        newDataInput,\r\n        newDataOutput,\r\n        COLLAPSIBLE_UPDATE_ALL,\r\n        0\r\n        //COLLAPSIBLE_ASSETS,\r\n        //id\r\n      );\r\n      this.setState({ ...newState, loading: false });\r\n    }\r\n  };\r\n\r\n  handleRemoveLiability = async (id) => {\r\n    if (this.OKToRemove) {\r\n      // this.OKToRemove = false;\r\n\r\n      this.setState({ loading: true });\r\n      const { dataInput, dataOutput } = this.state;\r\n      const newDataInput = _.cloneDeep(dataInput);\r\n      const newDataOutput = _.cloneDeep(dataOutput);\r\n      // if charit remove corresp asset\r\n      const charit = newDataInput.Liabilitys.filter(\r\n        (liab) =>\r\n          liab.liabTypeKey === LIABILITIES.CHARITABLE_GIFTS.Key &&\r\n          liab.id === id\r\n      );\r\n      if (charit !== undefined && charit.length > 0) {\r\n        const charitAsset = newDataInput.Assets.filter(\r\n          (asset) =>\r\n            asset.assetTypeKey === ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.Key\r\n        );\r\n        if (charitAsset !== undefined && charitAsset.length > 0) {\r\n          newDataInput.Assets = newDataInput.Assets.filter(\r\n            (asset) =>\r\n              asset.assetTypeKey !== ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.Key\r\n          );\r\n          let i;\r\n          for (i = 1; i <= newDataInput.Assets.length; ++i) {\r\n            newDataInput.Assets[i - 1].id = i;\r\n            newDataOutput.assetProjections[i - 1].id = i;\r\n          }\r\n        }\r\n      }\r\n\r\n      newDataInput.Liabilitys.splice(id - 1, 1);\r\n      let i;\r\n      for (i = 1; i <= newDataInput.Liabilitys.length; ++i) {\r\n        newDataInput.Liabilitys[i - 1].id = i;\r\n      }\r\n\r\n      // resync, recalcuate, then update state to re_render\r\n      const newState = await this.reSync_reCalculate_reRender(\r\n        newDataInput,\r\n        newDataOutput,\r\n        COLLAPSIBLE_LIABS,\r\n        id\r\n      );\r\n      this.setState({ ...newState, loading: false });\r\n    }\r\n  };\r\n\r\n  handleRemoveSource = async (id) => {\r\n    if (this.OKToRemove) {\r\n      //  this.OKToRemove = false;\r\n\r\n      let failedRemove = false;\r\n      this.setState({ loading: true });\r\n      const { dataInput, dataOutput } = this.state;\r\n      const newDataInput = _.cloneDeep(dataInput);\r\n      const newDataOutput = _.cloneDeep(dataOutput);\r\n      let i;\r\n      //this.failedRemove=false\r\n      for (i = 0; i < newDataInput.Sources.length; ++i) {\r\n        if (\r\n          newDataInput.Sources[i].id === id &&\r\n          (newDataInput.Sources[i].sourceTypeKey ===\r\n            INCOMESOURCES.GOV_SURVIVORS_PENSION.Key ||\r\n            newDataInput.Sources[i].sourceTypeKey ===\r\n              INCOMESOURCES.GOV_DEATH_BENEFIT.Key ||\r\n            newDataInput.Sources[i].sourceTypeKey ===\r\n              INCOMESOURCES.GOV_ORPHANS_BENEFIT.Key)\r\n        )\r\n          failedRemove = true;\r\n      }\r\n      //this.setState({ failedRemove: failedRemove})\r\n\r\n      this.setState((prevState) => ({\r\n        failedRemove: prevState.failedRemove === true ? false : failedRemove,\r\n      }));\r\n\r\n      if (failedRemove === false) {\r\n        newDataInput.Sources.splice(id - 1, 1);\r\n        for (i = 1; i <= newDataInput.Sources.length; ++i) {\r\n          newDataInput.Sources[i - 1].id = i;\r\n        }\r\n        //dataInput.sourcesNo = dataInput.Sources.length;\r\n\r\n        // resync, recalcuate, then update state to re_render\r\n        const newState = await this.reSync_reCalculate_reRender(\r\n          newDataInput,\r\n          newDataOutput,\r\n          COLLAPSIBLE_SOURCES,\r\n          id\r\n        );\r\n        this.setState({ ...newState, loading: false });\r\n      }\r\n    }\r\n  };\r\n\r\n  handleRemoveNeed = async (id) => {\r\n    if (this.OKToRemove) {\r\n      // this.OKToRemove = false;\r\n\r\n      this.setState({ loading: true });\r\n      const { dataInput, dataOutput } = this.state;\r\n      const newDataInput = _.cloneDeep(dataInput);\r\n      const newDataOutput = _.cloneDeep(dataOutput);\r\n      newDataInput.Needs.splice(id - 1, 1);\r\n      let i;\r\n      for (i = 1; i <= newDataInput.Needs.length; ++i) {\r\n        newDataInput.Needs[i - 1].id = i;\r\n      }\r\n\r\n      // resync, recalcuate, then update state to re_render\r\n      const newState = await this.reSync_reCalculate_reRender(\r\n        newDataInput,\r\n        newDataOutput,\r\n        COLLAPSIBLE_NEEDS,\r\n        id\r\n      );\r\n      this.setState({ ...newState, loading: false });\r\n    }\r\n  };\r\n\r\n  addRRIFSource = (asset) => {\r\n    const existingRRIF = this.state.dataInput.Sources.find(\r\n      (x) => x.sourceTypeKey === INCOMESOURCES.RRIF.Key\r\n    );\r\n    // this is done based on asset in API. this display only\r\n\r\n    if (existingRRIF === undefined) {\r\n      const sourceRRIF = {\r\n        id: this.state.dataInput.Sources.length + 1,\r\n        sourceTypeKey: INCOMESOURCES.RRIF.Key,\r\n        amount: 0,\r\n        startYear: asset.RRIFStartAge,\r\n        duration: 99,\r\n        ownerID: 2,\r\n        taxRate: 0,\r\n        growthRate: 0,\r\n      };\r\n\r\n      this.handleAddSource(sourceRRIF);\r\n    } else {\r\n      existingRRIF.startYear = asset.RRIFStartAge;\r\n      this.handleUpdateSource(existingRRIF);\r\n    }\r\n  };\r\n\r\n  addRRIFSource2 = (dataInput, asset) => {\r\n    const existingRRIF = dataInput.Sources.find(\r\n      (x) => x.sourceTypeKey === INCOMESOURCES.RRIF.Key\r\n    );\r\n    // this is done based on asset in API. this display only\r\n\r\n    if (existingRRIF === undefined) {\r\n      const sourceRRIF = {\r\n        id: this.state.dataInput.Sources.length + 1,\r\n        sourceTypeKey: INCOMESOURCES.RRIF.Key,\r\n        amount: 0,\r\n        startYear: asset.RRIFStartAge,\r\n        duration: 99,\r\n        ownerID: 2,\r\n        taxRate: 0,\r\n        growthRate: 0,\r\n      };\r\n\r\n      // do it right here\r\n      dataInput.Sources.push(sourceRRIF);\r\n\r\n      //dataInput = this.handleAddSource(sourceRRIF);\r\n    } else {\r\n      existingRRIF.startYear = asset.RRIFStartAge;\r\n      // do it right here\r\n      dataInput.Sources[existingRRIF.id - 1] = existingRRIF;\r\n    }\r\n\r\n    return dataInput;\r\n  };\r\n\r\n  removeRRIFSource = (dataInput) => {\r\n    const existingRRIF = dataInput.Sources.find(\r\n      (x) => x.sourceTypeKey === INCOMESOURCES.RRIF.Key\r\n    );\r\n    // this is done based on asset in API. this display only\r\n\r\n    if (existingRRIF !== undefined) {\r\n      const id = existingRRIF.id;\r\n      dataInput.Sources.splice(id - 1, 1);\r\n    }\r\n\r\n    return dataInput;\r\n  };\r\n\r\n  copyPresentation = () => {\r\n    return JSON.parse(JSON.stringify(this.state.dataInput.Presentations[0]));\r\n  };\r\n\r\n  changeLang = () => {\r\n    let pres = this.copyPresentation();\r\n    pres.language = pres.language === \"en\" ? \"fr\" : \"en\";\r\n    const noRecalc = false;\r\n\r\n    this.handleUpdatePresentationChange(pres, noRecalc);\r\n    // close all\r\n    let i;\r\n    for (i = 0; i < COLLAPSIBLES_COUNT; ++i) {\r\n      this.openCollapsible[i].open = COLLAPSIBLES_CLOSED;\r\n    }\r\n  };\r\n\r\n  debounceSaveToStorage = debounce(\r\n    () => {\r\n      return this.saveToStorage();\r\n    },\r\n    waitTime,\r\n    { leading: false, trailing: true }\r\n  );\r\n\r\n  areThereChildren = () => {\r\n    let Children = this.state.dataInput.Clients.find(\r\n      (x) => x.memberKey === MEMBER.CHILD.Key\r\n    );\r\n    if (Children !== undefined) return true;\r\n    else return false;\r\n  };\r\n\r\n  manageEducation = () => {\r\n    let Children = this.state.dataInput.Clients.find(\r\n      (x) => x.memberKey === MEMBER.CHILD.Key\r\n    );\r\n    if (Children !== undefined) {\r\n      let eduFunds = this.state.dataInput.Needs.find(\r\n        (x) => x.needTypeKey === INCOMENEEDS.EDUCATION_FUND.Key\r\n      );\r\n      if (eduFunds === undefined)\r\n        this.handleAddNeed(\r\n          INCOMENEEDS.EDUCATION_FUND.Key,\r\n          Math.max(0, UNIVERSITY_START_AGE - Children.Age),\r\n          Math.min(4, Math.max(0, UNIVERSITY_END_AGE - Children.Age))\r\n        );\r\n    }\r\n  };\r\n\r\n  manageEducation2 = (input) => {\r\n    let Children = input.Clients.find((x) => x.memberKey === MEMBER.CHILD.Key);\r\n    if (Children !== undefined) {\r\n      let eduFunds = input.Needs.find(\r\n        (x) => x.needTypeKey === INCOMENEEDS.EDUCATION_FUND.Key\r\n      );\r\n      if (eduFunds === undefined)\r\n        input.Needs.push({\r\n          id: input.Needs.length + 1, //needsNo,\r\n          needTypeKey: INCOMENEEDS.EDUCATION_FUND.Key,\r\n          amount: 0,\r\n          Percent: 0,\r\n          startYear: Math.max(0, UNIVERSITY_START_AGE - Children.Age),\r\n          duration: Math.min(4, Math.max(0, UNIVERSITY_END_AGE - Children.Age)),\r\n        });\r\n    }\r\n    return input;\r\n  };\r\n\r\n  manageOrphan2 = (input) => {\r\n    const childMember = MEMBER.CHILD.Key;\r\n    //const orphanBen = INCOMESOURCES.GOV_ORPHANS_BENEFIT.value[this.state.dataInput.Presentations[0].language];\r\n    const orphanBen = INCOMESOURCES.GOV_ORPHANS_BENEFIT.Key;\r\n    let Children = input.Clients.filter(function (item) {\r\n      return item.memberKey === childMember;\r\n    });\r\n    let orphSources = input.Sources.filter(function (item) {\r\n      return item.sourceTypeKey === orphanBen;\r\n    });\r\n\r\n    let maxDur =\r\n      input.Presentations[0].provinceKey === \"QC\"\r\n        ? MAX_ORPHAN_DUR_QC\r\n        : MAX_ORPHAN_DUR_NON_QC;\r\n    let orphAge =\r\n      input.Presentations[0].provinceKey === \"QC\"\r\n        ? ORPHAN_AGE_QC\r\n        : ORPHAN_AGE_NON_QC;\r\n\r\n    if (Children.length > 0) {\r\n      Children.forEach((element) => {\r\n        if (\r\n          element.Age <= orphAge &&\r\n          orphSources.filter((item) => {\r\n            return item.ownerID === element.id;\r\n          }).length === 0\r\n        ) {\r\n          const source = {\r\n            id: input.Sources.length + 1, //sourcesNo + 1,\r\n            sourceTypeKey: orphanBen,\r\n            amount: this.state.dataOutput.govBenefits.cppOrphan,\r\n            startYear: 0,\r\n            duration: maxDur - element.Age,\r\n            ownerID: element.id,\r\n          };\r\n          // no elig jan 2019 this.handleAddSource(orphanBen,this.orphan * this.state.dataInput.Clients[QUOTE_CLIENT].Eligibility / 100,25-element.Age,element.id, 1);\r\n          input.Sources.push(source);\r\n\r\n          //this.handleAddSource(source);\r\n        }\r\n      });\r\n    } else orphSources = [];\r\n\r\n    return input;\r\n  };\r\n\r\n  setAssetActionToLiquidate = async (dataInput) => {\r\n    dataInput.Assets.forEach((element) => {\r\n      element.ownerKey = ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key;\r\n      element.DisposeYr=0;\r\n    });\r\n    return dataInput;\r\n  };\r\n\r\n  setNeedsSinglePerson = async (dataInput) => {\r\n    dataInput.Needs.pop();\r\n    return dataInput;\r\n  };\r\n\r\n  manageOrphanSync = async (dataInput, dataOutput) => {\r\n    const childMember = MEMBER.CHILD.Key;\r\n    //const orphanBen = INCOMESOURCES.GOV_ORPHANS_BENEFIT.value[this.state.dataInput.Presentations[0].language];\r\n    const orphanBen = INCOMESOURCES.GOV_ORPHANS_BENEFIT.Key;\r\n\r\n    let sources = dataInput.Sources;\r\n\r\n    let orphSources = sources.filter(function (item) {\r\n      return item.sourceTypeKey === orphanBen;\r\n    });\r\n\r\n    let Children = dataInput.Clients.filter(function (item) {\r\n      return item.memberKey === childMember;\r\n    });\r\n\r\n    let sourcesNo = sources.length;\r\n    let maxDur =\r\n      dataInput.Presentations[0].provinceKey === \"QC\"\r\n        ? MAX_ORPHAN_DUR_QC\r\n        : MAX_ORPHAN_DUR_NON_QC;\r\n    let orphAge =\r\n      dataInput.Presentations[0].provinceKey === \"QC\"\r\n        ? ORPHAN_AGE_QC\r\n        : ORPHAN_AGE_NON_QC;\r\n\r\n    let setChildIDs = new Set();\r\n    if (Children.length > 0) {\r\n      Children.forEach((element) => {\r\n        setChildIDs.add(element.id);\r\n        sourcesNo = sources.length;\r\n        if (\r\n          element.Age <= orphAge &&\r\n          orphSources.filter((item) => {\r\n            return (\r\n              item.ownerID === element.id && item.sourceTypeKey === orphanBen\r\n            );\r\n          }).length === 0\r\n        ) {\r\n          /* let childID=orphSourcesIDs.length>0?orphSourcesIDs[0]:sources.length + 1\r\n          if(orphSourcesIDs.length>0)orphSourcesIDs=orphSourcesIDs.shift(); */\r\n          const source = {\r\n            id: sourcesNo + 1,\r\n            sourceTypeKey: orphanBen,\r\n            amount: dataOutput.govBenefits.cppOrphan,\r\n            startYear: 0,\r\n            duration: maxDur - element.Age,\r\n            ownerID: element.id,\r\n          };\r\n          // no elig jan 2019 this.handleAddSource(orphanBen,this.orphan * this.state.dataInput.Clients[QUOTE_CLIENT].Eligibility / 100,25-element.Age,element.id, 1);\r\n          sources.push(source);\r\n        } // exists but needs adj\r\n        else {\r\n          sources.forEach((source) => {\r\n            if (\r\n              source.sourceTypeKey === orphanBen &&\r\n              source.ownerID === element.id\r\n            )\r\n              source.amount = dataOutput.govBenefits.cppOrphan;\r\n          });\r\n        }\r\n      });\r\n      /*  for (let i = 1; i <= sources.length; ++i) {\r\n        sources[i - 1].id = i; \r\n      }*/\r\n    } else dataInput = await this.manageRemoveOrphan(dataInput);\r\n\r\n    sources = sources.filter((item) => {\r\n      return (\r\n        item.sourceTypeKey !== orphanBen ||\r\n        (setChildIDs.has(item.ownerID) && item.sourceTypeKey === orphanBen)\r\n      );\r\n    });\r\n\r\n    dataInput.Sources = sources;\r\n    return dataInput;\r\n  };\r\n\r\n  manageRemoveOrphan = async (input, childID) => {\r\n    //const orphanBen = INCOMESOURCES.GOV_ORPHANS_BENEFIT.value[this.state.dataInput.Presentations[0].language];\r\n    const orphanBen = INCOMESOURCES.GOV_ORPHANS_BENEFIT.Key;\r\n    input.Sources = input.Sources.filter(function (item) {\r\n      if (childID === undefined)\r\n        // remove all\r\n        return !(item.sourceTypeKey === orphanBen);\r\n      else\r\n        return !(item.ownerID === childID && item.sourceTypeKey === orphanBen);\r\n    });\r\n    let i;\r\n\r\n    //input.Sources.splice(orphSource.id - 1, 1);\r\n    for (i = 1; i <= input.Sources.length; ++i) {\r\n      input.Sources[i - 1].id = i;\r\n    }\r\n\r\n    return input;\r\n  };\r\n\r\n  updateDataLang = () => {\r\n    this.openParent = false;\r\n    this.openForce = false;\r\n  };\r\n\r\n  getAfterTaxTotalIncome = (newStateCandidateInput) => {\r\n    let totalATaxIncome = 0;\r\n    for (let i = 0; i < newStateCandidateInput.Clients.length; i++)\r\n      totalATaxIncome +=\r\n        newStateCandidateInput.Clients[i].Income *\r\n        (1 - newStateCandidateInput.Clients[i].avgTaxRate / 100);\r\n\r\n    return totalATaxIncome;\r\n  };\r\n\r\n  setSurivorIndex = () => {\r\n    const spKey = APPLET_INA ? MEMBER.SPOUSE.Key : MEMBER.CLIENT.Key;\r\n    let Survivor = this.state.dataInput.Clients.find(\r\n      (x) => x.memberKey === spKey\r\n    );\r\n\r\n    if (Survivor === undefined && APPLET_INA) {\r\n      if (this.state.dataInput.Clients.length === 1)\r\n        Survivor = this.state.dataInput.Clients.find(\r\n          (x) => x.memberKey === MEMBER.CLIENT.Key\r\n        );\r\n      else {\r\n        Survivor = this.state.dataInput.Clients.find(\r\n          (x) => x.memberKey === MEMBER.DEPENDENT_ADULT.Key\r\n        );\r\n        if (Survivor === undefined)\r\n          Survivor = this.state.dataInput.Clients.find(\r\n            (x) => x.memberKey === MEMBER.CHILD.Key\r\n          );\r\n      }\r\n    }\r\n\r\n    return Survivor.id - 1; // id is 1-based\r\n  };\r\n\r\n  setSurivorIndex2 = (newStateCandidateInput) => {\r\n    const spKey = APPLET_INA ? MEMBER.SPOUSE.Key : MEMBER.CLIENT.Key;\r\n    let Survivor = newStateCandidateInput.Clients.find(\r\n      (x) => x.memberKey === spKey\r\n    );\r\n\r\n    if (Survivor === undefined && APPLET_INA) {\r\n      if (newStateCandidateInput.Clients.length === 1)\r\n        Survivor = newStateCandidateInput.Clients.find(\r\n          (x) => x.memberKey === MEMBER.CLIENT.Key\r\n        );\r\n      else {\r\n        Survivor = newStateCandidateInput.Clients.find(\r\n          (x) => x.memberKey === MEMBER.DEPENDENT_ADULT.Key\r\n        );\r\n        if (Survivor === undefined)\r\n          Survivor = newStateCandidateInput.Clients.find(\r\n            (x) => x.memberKey === MEMBER.CHILD.Key\r\n          );\r\n      }\r\n    }\r\n\r\n    return Survivor.id - 1; // id is 1-based\r\n  };\r\n\r\n  syncPanelsValues2 = (newStateCandidateInput, itemToUpdateGroup) => {\r\n    // EP dosent have needs and sources to sync\r\n\r\n    this.survIdx = this.setSurivorIndex2(newStateCandidateInput);\r\n    let protectionPeriod =\r\n      newStateCandidateInput.Clients[this.survIdx].retirementAge -\r\n      newStateCandidateInput.Clients[this.survIdx].Age;\r\n    const singleFamily = isSingleFamily(newStateCandidateInput.Clients);\r\n    if (singleFamily) {\r\n      const yrs = singleFamilyProjectionYears(newStateCandidateInput.Clients);\r\n      protectionPeriod = yrs.noProjectionYrs;\r\n    }\r\n\r\n    newStateCandidateInput = this.handleAddAssetTaxCredit2(\r\n      newStateCandidateInput\r\n    );\r\n\r\n    if (APPLET_INA) {\r\n      if (this.survIdx !== -1) {\r\n        let i;\r\n        for (i = 0; i < newStateCandidateInput.Needs.length; i++) {\r\n          const needPercent = parseInt(\r\n            (newStateCandidateInput.Needs[i].Percent / 100) *\r\n              this.getAfterTaxTotalIncome(newStateCandidateInput)\r\n          );\r\n\r\n          const dur = protectionPeriod;\r\n          //const dur = 100 - newStateCandidateInput.Clients[this.survIdx].Age;\r\n          if (\r\n            this.caseFromFile === false &&\r\n            itemToUpdateGroup !== COLLAPSIBLE_RESULTS && // dont change if clicking on results\r\n            newStateCandidateInput.Needs[i].needTypeKey ===\r\n              INCOMENEEDS.PERCET_OF_INCOME.Key /* &&\r\n            newStateCandidateInput.Clients.length !== 1 */ // not for single person\r\n          ) {\r\n            if (\r\n              needPercent !== newStateCandidateInput.Needs[i].amount &&\r\n              newStateCandidateInput.Needs[i].Percent >= 0\r\n            ) {\r\n              newStateCandidateInput.Needs[i].amount = needPercent;\r\n            }\r\n\r\n            if (itemToUpdateGroup !== COLLAPSIBLE_NEEDS && newStateCandidateInput.Clients.length !== 1) {\r\n              // change duration of % of income\r\n              if (\r\n                (singleFamily &&\r\n                  newStateCandidateInput.Needs[i].startYear === 0) ||\r\n                (dur !== newStateCandidateInput.Needs[i].duration &&\r\n                  newStateCandidateInput.Needs[i].duration !== 100 &&\r\n                  dur > 0)\r\n              ) {\r\n                newStateCandidateInput.Needs[i].duration = dur;\r\n              }\r\n              if (\r\n                newStateCandidateInput.Needs[i].duration === 100 &&\r\n                dur > 0 &&\r\n                newStateCandidateInput.Needs[i].startYear !== dur\r\n              ) {\r\n                newStateCandidateInput.Needs[i].startYear = dur;\r\n              }\r\n            }\r\n          }\r\n\r\n          if (\r\n            this.caseFromFile === false &&\r\n            newStateCandidateInput.Needs[i].needTypeKey ===\r\n              INCOMENEEDS.EDUCATION_FUND.Key\r\n          ) {\r\n            let children = newStateCandidateInput.Clients.find(\r\n              (x) => x.memberKey === MEMBER.CHILD.Key\r\n            );\r\n            if (children !== undefined) {\r\n              if (\r\n                newStateCandidateInput.Needs[i].startYear !==\r\n                  Math.max(0, UNIVERSITY_START_AGE - children.Age) &&\r\n                children.length > 0\r\n              ) {\r\n                newStateCandidateInput.Needs[i].startYear = Math.max(\r\n                  0,\r\n                  UNIVERSITY_START_AGE - children.Age\r\n                );\r\n                newStateCandidateInput.Needs[i].duration = Math.max(\r\n                  0,\r\n                  Math.min(4, UNIVERSITY_END_AGE - children.Age)\r\n                );\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n        for (i = 0; i < newStateCandidateInput.Sources.length; i++) {\r\n          // all at income tax except divdend\r\n          if (\r\n            newStateCandidateInput.Sources[i].sourceTypeKey !==\r\n            INCOMESOURCES.DIVIDEND_INCOME.Key\r\n          )\r\n            newStateCandidateInput.Sources[i].taxRate =\r\n              newStateCandidateInput.Clients[this.survIdx].avgTaxRate; // spouse\r\n\r\n          // allow a different surv income dur if they input directly\r\n          if (\r\n            itemToUpdateGroup !== COLLAPSIBLE_SOURCES &&\r\n            itemToUpdateGroup !== COLLAPSIBLE_RESULTS\r\n          ) {\r\n            const dur = protectionPeriod;\r\n            if (\r\n              newStateCandidateInput.Sources[i].sourceTypeKey ===\r\n                INCOMESOURCES.SURVIVORS_INCOME.Key &&\r\n              newStateCandidateInput.Sources[i].startYear === 0 &&\r\n              dur !== newStateCandidateInput.Sources[i].duration &&\r\n              dur > 0\r\n            ) {\r\n              newStateCandidateInput.Sources[i].duration = dur;\r\n            }\r\n          }\r\n\r\n          if (newStateCandidateInput.Sources[i].ownerID === undefined)\r\n            newStateCandidateInput.Sources[i].ownerID =\r\n              newStateCandidateInput.Clients.length === 1 ? 1 : 2; // first surv\r\n          // allow a different surv income if they input directly\r\n          if (newStateCandidateInput.Clients.length > 1) {\r\n            //!singleFamily){\r\n            if (\r\n              itemToUpdateGroup !== COLLAPSIBLE_SOURCES &&\r\n              itemToUpdateGroup !== COLLAPSIBLE_RESULTS &&\r\n              newStateCandidateInput.Sources[i].ownerID - 1 > 0\r\n            ) {\r\n              if (\r\n                newStateCandidateInput.Sources[i].sourceTypeKey ===\r\n                  INCOMESOURCES.SURVIVORS_INCOME.Key &&\r\n                newStateCandidateInput.Sources[i].amount !==\r\n                  parseInt(\r\n                    newStateCandidateInput.Clients[\r\n                      newStateCandidateInput.Sources[i].ownerID - 1\r\n                    ].Income\r\n                  )\r\n              ) {\r\n                newStateCandidateInput.Sources[i].amount = parseInt(\r\n                  newStateCandidateInput.Clients[\r\n                    newStateCandidateInput.Sources[i].ownerID - 1\r\n                  ].Income\r\n                );\r\n              }\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        let i;\r\n        for (i = 0; i < newStateCandidateInput.Needs.length; i++) {\r\n          if (\r\n            newStateCandidateInput.Needs[i].needTypeKey ===\r\n            INCOMENEEDS.PERCET_OF_INCOME.Key\r\n          )\r\n            newStateCandidateInput.Needs[i].amount = 0;\r\n        }\r\n        //let newStateCandidateInput = newStateCandidateInput;\r\n        for (i = 0; i < newStateCandidateInput.Sources.length; i++) {\r\n          if (\r\n            newStateCandidateInput.Sources[i].sourceTypeKey ===\r\n            INCOMESOURCES.GOV_SURVIVORS_PENSION.Key\r\n          )\r\n            newStateCandidateInput.Sources[i].amount = 0;\r\n          else if (\r\n            newStateCandidateInput.Sources[i].sourceTypeKey ===\r\n            INCOMESOURCES.GOV_DEATH_BENEFIT.Key\r\n          )\r\n            newStateCandidateInput.Sources[i].amount = 0;\r\n          else if (\r\n            newStateCandidateInput.Sources[i].sourceTypeKey ===\r\n            INCOMESOURCES.GOV_ORPHANS_BENEFIT.Key\r\n          )\r\n            newStateCandidateInput.Sources[i].amount = 0;\r\n          else if (\r\n            newStateCandidateInput.Sources[i].sourceTypeKey ===\r\n            INCOMESOURCES.SURVIVORS_INCOME.Key\r\n          )\r\n            newStateCandidateInput.Sources[i].amount = 0;\r\n        }\r\n        this.OKToRemove = true;\r\n      }\r\n    }\r\n\r\n    return newStateCandidateInput;\r\n  };\r\n\r\n  setRates = () => {\r\n    let dataE = {\r\n      investmentRate: this.state.dataInput.Presentations[0].invRate / 100,\r\n      taxRate: this.state.dataInput.Presentations[0].taxRate / 100,\r\n      dividendTaxRate: 0.33,\r\n      capitalGainsInclusion: 0.5,\r\n      inflationRate: this.state.dataInput.Presentations[0].inflation / 100,\r\n    };\r\n\r\n    return dataE;\r\n  };\r\n\r\n  loadStorage = async () => {\r\n    let storageKey = APPLET_INA ? \"INAData\" : \"EPData\";\r\n\r\n    const objJSONData = JSON.parse(localStorage.getItem(storageKey));\r\n    this.updateStateFromJSon(objJSONData);\r\n  };\r\n\r\n  updateStateFromJSon = async (objJSONData) => {\r\n    if (objJSONData !== null && objJSONData !== undefined) {\r\n      // put loaded data to quote and show\r\n      this.setState({ loading: true });\r\n      //  console.log(objJSONData)\r\n      this.caseFromFile = true;\r\n      const { dataOutput } = this.state;\r\n      const newDataOutput = _.cloneDeep(dataOutput);\r\n      const newState = await this.reSync_reCalculate_reRender(\r\n        objJSONData,\r\n        newDataOutput,\r\n        COLLAPSIBLE_UPDATE_ALL, // to updateAll\r\n        0\r\n      );\r\n      this.setState({ ...newState, loading: false, initialLoading: false });\r\n    } //this.updateStateInput(objJSONData, () => this.waitForSetStateCallback());\r\n    this.caseFromFile = false;\r\n  };\r\n\r\n  saveToStorage = () => {\r\n    // in case we need to clear all\r\n    // localStorage.clear();\r\n    localStorage.setItem(\r\n      APPLET_INA ? \"INAData\" : \"EPData\",\r\n      JSON.stringify(this.state.dataInput)\r\n    );\r\n\r\n    // no recovery anymore\r\n    this.showRecover = 0;\r\n    hideRecover();\r\n  };\r\n\r\n  loadFromFile = (e) => {\r\n    const fileTarget = e.target.files[0];\r\n    if (!fileTarget) {\r\n      return;\r\n    }\r\n    this.setState({ loading: true });\r\n\r\n    // close all\r\n    let i;\r\n    for (i = 0; i < COLLAPSIBLES_COUNT; ++i) {\r\n      this.openCollapsible[i].open = COLLAPSIBLES_CLOSED;\r\n    }\r\n\r\n    const reader = new FileReader();\r\n    reader.onload = (e) => {\r\n      let contentsFile = e.target.result;\r\n      var objJSONData;\r\n      // is this a non-encrypted file\r\n      const encrptedSave =\r\n        contentsFile.search(\"dataInput\") > 0 ||\r\n        versionDetails().saveEncrypt === false\r\n          ? false\r\n          : true;\r\n\r\n      if (encrptedSave === true) {\r\n        // file is saved a s querystring\r\n        this.handleInitilizeQuoteFromQueryString(contentsFile);\r\n      } else {\r\n        // name changes\r\n        contentsFile = contentsFile.split(\"Amount\").join(\"amount\");\r\n        contentsFile = contentsFile.split(\"StartYr\").join(\"startYear\");\r\n        contentsFile = contentsFile.split(\"Duration\").join(\"duration\");\r\n        contentsFile = contentsFile\r\n          .split(\"\" + \"Tax\" + \"\")\r\n          .join(\"\" + \"avgTaxRate\" + \"\");\r\n        contentsFile = contentsFile.split(\"retireAge\").join(\"retirementAge\");\r\n\r\n        objJSONData = JSON.parse(contentsFile);\r\n        objJSONData.dataPresentations.Presentations[0].presentationDate =\r\n          new Date();\r\n\r\n        // old files\r\n        objJSONData.dataInput.Clients.forEach(function (element) {\r\n          if (element.sexKey == undefined) {\r\n            element.sexKey = getListItemKeyFromName(SEX, element.Sex);\r\n            delete element.Sex;\r\n          }\r\n        });\r\n        // old files\r\n        objJSONData.dataInput.Clients.forEach(function (element) {\r\n          if (element.smokerKey == undefined) {\r\n            element.smokerKey = getListItemKeyFromName(SMOKING, element.Smoker);\r\n            delete element.Smoker;\r\n          }\r\n        });\r\n        // old files\r\n        objJSONData.dataInput.Clients.forEach(function (element) {\r\n          if (element.memberKey == undefined) {\r\n            element.memberKey = getListItemKeyFromName(MEMBER, element.member);\r\n            delete element.member;\r\n          }\r\n        });\r\n\r\n        // old files\r\n        objJSONData.dataInput.Assets.forEach(function (element) {\r\n          if (element.assetTypeKey == undefined) {\r\n            element.assetTypeKey = getListItemKeyFromName(ASSETS, element.Type);\r\n            delete element.Type;\r\n          }\r\n        });\r\n        // old files\r\n        objJSONData.dataInput.Assets.forEach(function (element) {\r\n          if (element.assetTaxTypeKey == undefined) {\r\n            element.assetTaxTypeKey = getListItemKeyFromName(\r\n              ASSET_TAX,\r\n              element.Tax\r\n            );\r\n            delete element.Tax;\r\n          }\r\n        });\r\n\r\n        // old files\r\n        objJSONData.dataInput.Assets.forEach(function (element) {\r\n          if (element.ownerKey == undefined) {\r\n            element.ownerKey = ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key;\r\n          }\r\n        });\r\n\r\n        // old files note change in spelling\r\n        objJSONData.dataInput.Liabilitys.forEach(function (element) {\r\n          if (element.liabTypeKey == undefined) {\r\n            element.liabTypeKey = getListItemKeyFromName(\r\n              LIABILITIES,\r\n              element.Type\r\n            );\r\n            delete element.Type;\r\n          }\r\n        });\r\n\r\n        // old files\r\n        objJSONData.dataInput.Sources.forEach(function (element) {\r\n          if (element.sourceTypeKey == undefined) {\r\n            element.sourceTypeKey = getListItemKeyFromName(\r\n              INCOMESOURCES,\r\n              element.Type\r\n            );\r\n            delete element.Type;\r\n          }\r\n        });\r\n\r\n        // old files\r\n        objJSONData.dataInput.Needs.forEach(function (element) {\r\n          if (element.needTypeKey == undefined) {\r\n            element.needTypeKey = getListItemKeyFromName(\r\n              INCOMENEEDS,\r\n              element.Type\r\n            );\r\n            delete element.Type;\r\n          }\r\n        });\r\n\r\n        // old files\r\n        objJSONData.dataInput.Presentations.forEach(function (element) {\r\n          if (element.provinceKey == undefined) {\r\n            element.provinceKey = getListItemKeyFromName(\r\n              PROVINCE,\r\n              element.Province\r\n            );\r\n            delete element.Province;\r\n          }\r\n        });\r\n        this.updateStateFromJSon(objJSONData);\r\n      }\r\n    };\r\n    reader.readAsText(fileTarget);\r\n    this.setState({ loading: false });\r\n  };\r\n\r\n  respondToSaveRequest = (fileName) => {\r\n    this.setState({ showMsg: false });\r\n    let blob;\r\n    if (versionDetails().saveEncrypt === false)\r\n      // regular text file\r\n      blob = new Blob([JSON.stringify(this.state.dataInput)], {\r\n        type: \"text/plain;charset=utf-8\",\r\n      });\r\n    else blob = new Blob([this.dataQS], { type: \"text/plain;charset=utf-8\" });\r\n\r\n    // iphone\r\n    var iOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\r\n    if (fileName !== \"\") {\r\n      if (iOS === false) {\r\n        // works on IE and Edge to save file, would also work on Chrome, Firedox for desktop\r\n        saveAs(\r\n          blob,\r\n          fileName === undefined\r\n            ? \"INASavedData.json\"\r\n            : fileName + (APPLET_INA ? INA_FILE_TYPE : EP_FILE_TYPE) //\".json\"\r\n        );\r\n        //saveAs(blob, fileName===undefined?\"INASavedData.json\":prompt('Please enter file name:'))\r\n      } else {\r\n        blob = new Blob([JSON.stringify(this.state.dataInput)]);\r\n        saveAs(\r\n          blob,\r\n          fileName === undefined\r\n            ? \"INASavedData.json\"\r\n            : \"SignInINASavedData.json\"\r\n        );\r\n      }\r\n    }\r\n  };\r\n\r\n  saveToFile_OLD = () => {\r\n    const blob = new Blob([JSON.stringify(this.state.dataInput)], {\r\n      type: \"text/plain;charset=utf-8\",\r\n    });\r\n    saveAs(blob, \"INASavedData.json\");\r\n  };\r\n\r\n  saveToFile = () => {\r\n    if (versionDetails().saveEncrypt === false)\r\n      // regular text file\r\n      this.respondToSaveRequest(\"fileINA\");\r\n    else {\r\n      this.handleQueryString(\r\n        MODE_SAVE,\r\n        this.state.dataInput,\r\n        this.state.dataOutput\r\n      );\r\n    }\r\n  };\r\n\r\n  loadData = () => {\r\n    let fails = fetchTimerAPICheck();\r\n    if (fails > 1) this.setState({ failedAPI: true });\r\n  };\r\n\r\n  respondToPopUp = () => {\r\n    this.saveToStorage();\r\n\r\n    let urlReload = PARENT_SITE_PROD + \"?ina=\" + shortid.generate();\r\n    const url2 = window.location.href;\r\n\r\n    if (url2.indexOf(SITE_TEST) !== -1)\r\n      urlReload = PARENT_SITE_TEST + \"?ina=\" + shortid.generate();\r\n\r\n    const urlLogoff = \"https://adfs.ppi.ca/adfs/ls/?wa=wsignout1.0\";\r\n    //\tif(fails>1){\r\n    //localStorage.setItem('INAAPIFails', parseInt(0));\r\n    window.parent.location.href = urlLogoff;\r\n    //\t}\r\n    //\telse\r\n    {\r\n      window.parent.location.href = urlReload;\r\n    }\r\n  };\r\n\r\n  EmailINA = () => {\r\n    // test\r\n\r\n    this.handleQueryString(\r\n      MODE_EMAIL,\r\n      this.state.dataInput,\r\n      this.state.dataOutput\r\n    );\r\n    //window.location.href ='mailto: msamiei@ppi.ca ?subject= Needs Analysis Quote &body=' + this.dataQS;\r\n  };\r\n\r\n  callCalculateResultsAPI = (e) => {\r\n    if (!this.resultIsOpen)\r\n      //this.handleUpdataData();\r\n      this.resultIsOpen = !e;\r\n  };\r\n\r\n  adjustVisibleOutputSection = (unit) => {\r\n    this.visibleOutputSection = this.visibleOutputSection + unit;\r\n  };\r\n\r\n  hasPersonalResidenceAlready = () => {\r\n    let PR = this.state.dataInput.Assets.find(\r\n      (x) => x.assetTypeKey === ASSETS.PERSONAL_RESIDENCE.Key\r\n    );\r\n\r\n    return PR !== undefined;\r\n  };\r\n\r\n  handleCollapsibleClick = async (collapsible) => {\r\n    if (collapsible.id === COLLAPSIBLE_RESULTS) {\r\n      this.adjustVisibleOutputSection(\r\n        this.openCollapsible[COLLAPSIBLE_RESULTS].open ? -1 : 1\r\n      );\r\n\r\n      this.callCalculateResultsAPI(collapsible.open);\r\n    }\r\n    if (collapsible.id === COLLAPSIBLE_SOURCES) {\r\n      // recheck gov\r\n      // await this.govBenefits();\r\n    }\r\n    // this.setState({failedRemove : false});\r\n    if (this.state.SnapImport) this.setState({ SnapImport: false });\r\n    this.openCollapsible[collapsible.id].open = !collapsible.open;\r\n  };\r\n\r\n  setOutput = (e) => {\r\n    // Internet Explorer 6-11\r\n    let isIE = /*@cc_on!@*/ false || !!document.documentMode;\r\n\r\n    if (isIE)\r\n      alert(MESSAGES[this.state.dataInput.Presentations[0].language].ie);\r\n    else this.graphs = e === 2 ? true : false;\r\n    this.setState({ loading: false });\r\n  };\r\n\r\n  selectMultiButtonPeriod = (e) => {\r\n    // selection is 1-based\r\n    let pres = this.copyPresentation();\r\n    if (e === DISPLAY_RETIREMENT + 1) {\r\n      pres.periodOption = DISPLAY_RETIREMENT;\r\n    } else if (e === DISPLAY_LIFEEXP + 1) {\r\n      pres.periodOption = DISPLAY_LIFEEXP;\r\n    } else if (e === DISPLAY_ENDAGE + 1) {\r\n      pres.periodOption = DISPLAY_ENDAGE;\r\n    } else if (e === DISPLAY_LIFEEXP_PLUS_3 + 1) {\r\n      pres.periodOption = DISPLAY_LIFEEXP_PLUS_3;\r\n    }\r\n    const noRecalc = false;\r\n    this.handleUpdatePresentationChange(pres, noRecalc);\r\n  };\r\n\r\n  selectMultiButton = (e) => {\r\n    //let pres = this.state.dataInput.Presentations;\r\n    let pres = this.copyPresentation();\r\n\r\n    if (e === DISPLAY_SPREADSHEET) {\r\n      pres.resultsOption = DISPLAY_SPREADSHEET;\r\n    } else if (e === DISPLAY_GRAPHS) {\r\n      pres.resultsOption = DISPLAY_GRAPHS;\r\n    } else if (e === DISPLAY_ANALYSIS) {\r\n      pres.resultsOption = DISPLAY_ANALYSIS;\r\n      pres.periodOption = DISPLAY_ENDAGE;\r\n      // try this now\r\n      pres.resultsOption = DISPLAY_LIFEEXP_PLUS_3;\r\n      pres.periodOption = DISPLAY_LIFEEXP_PLUS_3;\r\n    } else {\r\n      pres.resultsOption = DISPLAY_PRESENTATION;\r\n      //periodOption = DISPLAY_RETIREMENT;\r\n    }\r\n    // these don't require rescalc or resync\r\n    const noRecalc = true;\r\n    this.handleUpdatePresentationChange(pres, noRecalc);\r\n    //this.setState({ Presentations: pres });\r\n  };\r\n\r\n  selectMultiButtonINAorTax = (e) => {\r\n    if (e === DISPLAY_TAXLIAB) {\r\n      this.INAOption = DISPLAY_TAXLIAB;\r\n      // }else if (e === DISPLAY_TAXLIAB_JLTD) {\r\n      //  this.INAOption = DISPLAY_TAXLIAB_JLTD;\r\n    } else if (e === DISPLAY_INCOME) {\r\n      this.INAOption = DISPLAY_INCOME;\r\n    }\r\n    let l = this.state.loading;\r\n    l = !l;\r\n    this.setState({ loading: l });\r\n  };\r\n\r\n  hideEstateRemoveMsg = () => {\r\n    this.setState({ failedRemove: false });\r\n  };\r\n\r\n  imageRemove = () => {\r\n    this.setState((prevState) => ({\r\n      dataInput: {\r\n        ...prevState.dataInput,\r\n        Presentations: [\r\n          {\r\n            ...prevState.dataInput.Presentations[0],\r\n            adviserLogo: {\r\n              image: null,\r\n              left: 0,\r\n              size: 90,\r\n              allPages: false,\r\n              showDetails: false,\r\n            },\r\n          },\r\n        ],\r\n      },\r\n    }));\r\n  };\r\n\r\n  imageAdjust = (image, ID) => {\r\n    if (ID === IMAGE_LOGO)\r\n      this.setState((prevState) => ({\r\n        dataInput: {\r\n          ...prevState.dataInput,\r\n          Presentations: [\r\n            {\r\n              ...prevState.dataInput.Presentations[0],\r\n              adviserLogo: image,\r\n            },\r\n          ],\r\n        },\r\n      }));\r\n    else\r\n      this.setState((prevState) => ({\r\n        dataInput: {\r\n          ...prevState.dataInput,\r\n          Presentations: [\r\n            {\r\n              ...prevState.dataInput.Presentations[0],\r\n              appletImage: image,\r\n            },\r\n          ],\r\n        },\r\n      }));\r\n  };\r\n\r\n  render() {\r\n    let i = 1;\r\n    let j = 1;\r\n    let k = 1;\r\n    let l = 1;\r\n    let n = 1;\r\n\r\n    const showInput = this.state.showMsg;\r\n\r\n    const dataInput = this.state.dataInput;\r\n    const lang = dataInput.Presentations[0].language;\r\n\r\n    const dataOutput = this.state.dataOutput;\r\n    const insuranceNeeds = this.state.dataOutput.dataInsuranceNeeds;\r\n    const periodOption = dataInput.Presentations[0].periodOption;\r\n\r\n    const projYears = familyProjectionYears(\r\n      dataInput.Clients,\r\n      periodOption,\r\n      dataOutput.lifeExpectancy,\r\n      insuranceNeeds,\r\n      dataOutput.dataShortfall,\r\n      dataInput.Presentations[0]\r\n    );\r\n    const insNeed = projYears.insuranceNeed;\r\n    const insNeedRet = projYears.insuranceNeedToRet;\r\n    const insNeedLE = projYears.insuranceNeedToLE;\r\n    const insNeedLE3 = projYears.insuranceNeedToLE3;\r\n    const insNeedEAge = projYears.insuranceNeedToEnd;\r\n    let projectEnd = projYears.projectionEnd;\r\n    let noProjectYrs = projYears.noProjectionYrs;\r\n    const survAge = projYears.survivorAge;\r\n\r\n    const singleFamily = isSingleFamily(dataInput.Clients);\r\n    const singlePerson = dataInput.Clients.length === 1 ? true : false;\r\n    const showSinglePerson =\r\n      singlePerson && versionDetails().numericValues > 10014;\r\n\r\n    if (singleFamily) {\r\n      // this is protection period now\r\n      dataInput.Presentations[0].periodOption = DISPLAY_RETIREMENT;\r\n    }\r\n\r\n    // single person\r\n    if (dataInput.Clients.length === 1) {\r\n      noProjectYrs = 0;\r\n      dataInput.Needs.forEach((element) => {\r\n        if (noProjectYrs < element.duration) noProjectYrs = element.duration;\r\n      });\r\n      projectEnd = noProjectYrs + dataInput.Clients[0].Age;\r\n    }\r\n\r\n    const numSurvivor = dataInput.Clients.length - 1;\r\n    const insNeedLine = getInsNeedLine(\r\n      dataInput.Presentations[0],\r\n      projectEnd,\r\n      lang,\r\n      numSurvivor,\r\n      singleFamily,\r\n      noProjectYrs,\r\n      insNeed,\r\n      dataInput.Clients[0].Name\r\n    );\r\n\r\n    // if  singleFamily show years instead of ages as no children may be >1\r\n    if (singleFamily) {\r\n      dataOutput.dataNAAges = [];\r\n      for (let i = 0; i < noProjectYrs; i++) dataOutput.dataNAAges.push(i + 1);\r\n    }\r\n    // if file is PYE\r\n    if (dataInput.Clients.length === 1) this.survIdx = 0;\r\n\r\n    const Survivor = this.state.dataInput.Clients[this.survIdx]; //.find(x => x.memberKey === spKey);\r\n\r\n    const inputOutputIsValid =\r\n      insuranceNeeds.length > 0 &&\r\n      dataOutput.dataNAAges !== undefined &&\r\n      Survivor !== undefined;\r\n\r\n    //Survivor !== undefined\r\n\r\n    if (this.state.failedAPI) console.log(\"timer API call failed re ADSF\");\r\n\r\n    let dataAges;\r\n    let dataGov;\r\n    let dataPCV;\r\n    let dataNeed;\r\n    let dataShort;\r\n    let buttonCaption;\r\n    let buttonCaption3;\r\n    let buttonCaptionPeriod;\r\n    let tableWidth;\r\n    let dataEstateLiability;\r\n\r\n    buttonCaption = [\r\n      TITLES[lang].presBut,\r\n      TITLES[lang].graphsBut,\r\n      TITLES[lang].spreadsheetBut,\r\n      TITLES[lang].analysisBut,\r\n    ];\r\n    buttonCaption3 = [\r\n      TITLES[lang].presBut,\r\n      TITLES[lang].graphsBut,\r\n      TITLES[lang].spreadsheetBut,\r\n    ];\r\n    buttonCaptionPeriod = [\r\n      TITLES[lang].retBut,\r\n      TITLES[lang].leBut,\r\n      TITLES[lang].age100But,\r\n    ];\r\n\r\n    if (\r\n      this.survIdx !== undefined &&\r\n      dataInput.Clients[this.survIdx].memberKey !== MEMBER.SPOUSE.Key &&\r\n      dataInput.Clients[this.survIdx].memberKey !== MEMBER.CLIENT.Key\r\n    )\r\n      buttonCaptionPeriod = [TITLES[lang].protectButton];\r\n    if (inputOutputIsValid) {\r\n      // project liabs\r\n      var totalLiabProjections = getProjectedLiabilities(\r\n        dataInput,\r\n        projectEnd,\r\n        dataOutput.probate\r\n      );\r\n\r\n      dataAges = dataOutput.dataNAAges.slice(0, noProjectYrs);\r\n      dataGov = dataOutput.dataCashFlowGov.slice(0, noProjectYrs);\r\n      dataPCV = dataOutput.dataCashFlowPersonal.slice(0, noProjectYrs);\r\n      // if(this.INAOption!==DISPLAY_INCOME)\r\n      dataEstateLiability = getDataFutureEstateLiability(\r\n        //getDataFutureEstateLiability(this.dataTaxLiability.numericValues, totalLiabProjections).slice(0, noProjectYrs);\r\n        dataOutput.dataTaxLiability,\r\n        totalLiabProjections\r\n      );\r\n      dataNeed = dataOutput.dataCashFlowNeeds.slice(0, noProjectYrs);\r\n      dataShort = dataOutput.dataShortfall.slice(0, noProjectYrs);\r\n\r\n      let dataSurvivorSalaryIncome = dataInput.Sources.find(\r\n        (x) => x.sourceTypeKey === INCOMESOURCES.SURVIVORS_INCOME\r\n      );\r\n      if (dataSurvivorSalaryIncome !== undefined) {\r\n        dataSurvivorSalaryIncome.reduce((a, b) => a + b, 0);\r\n      }\r\n      dataSurvivorSalaryIncome = dataOutput.dataShortfall.slice(\r\n        0,\r\n        noProjectYrs\r\n      );\r\n\r\n      if (dataOutput.aggregateGrid != undefined)\r\n        tableWidth =\r\n          Math.min(\r\n            100,\r\n            10 * this.state.dataOutput.aggregateGrid.dataColTitles.length\r\n          ) + \"%\";\r\n\r\n      // MCC quote\r\n      // dataMCC= INAMCCQuote(this.state,insNeed);\r\n    }\r\n\r\n    const altRow = \"#F8F8F8\";\r\n\r\n    const graphs = (\r\n      <OutputGraphs\r\n        insuranceNeed={insNeed}\r\n        projectEnd={projectEnd}\r\n        dataCashFlowPersonal={dataPCV}\r\n        dataInput={dataInput}\r\n        dataNAAges={dataAges}\r\n        dataCashFlowNeeds={dataNeed}\r\n        dataCashFlowGov={dataGov}\r\n        dataShortfall={dataShort}\r\n        insNeedLine={insNeedLine}\r\n        aggregateGrid={dataOutput.aggregateGrid}\r\n        LE={dataOutput.lifeExpectancy.spouse} // + survAge}\r\n        //language={lang}\r\n        //projectTo={this.toRetirement ? 0 : 1}\r\n\r\n        periodOption={periodOption}\r\n        /* projectTo={\r\n        periodOption === DISPLAY_RETIREMENT\r\n          ? DISPLAY_RETIREMENT\r\n          : periodOption === DISPLAY_LIFEEXP\r\n            ? DISPLAY_LIFEEXP\r\n            : DISPLAY_ENDAGE\r\n      } */\r\n      />\r\n    );\r\n    const graphsEP = (\r\n      <OutputGraphsEP\r\n        insuranceNeed={insNeedLE3}\r\n        projectEnd={projectEnd} // try this now // always to the end\r\n        dataEstateLiability={dataEstateLiability}\r\n        dataInput={dataInput}\r\n        dataNAAges={dataAges}\r\n        lifeExp={dataOutput.lifeExpectancy.joint} // client or if spouse JLTD\r\n        lifeExpJLTD={dataOutput.lifeExpectancy.joint}\r\n        lifeExpClient={dataOutput.lifeExpectancy.client}\r\n        probate={dataOutput.probate}\r\n        INAOption={this.INAOption}\r\n        //dataShortfall={dataShort}\r\n        //dataAPISite={appSiteAPI}\r\n        LE={dataOutput.lifeExpectancy.spouse} // + survAge}\r\n        assetProjections={dataOutput.assetProjections}\r\n        //language={lang}\r\n        //projectTo={this.toRetirement ? 0 : 1}\r\n        // periodOption={DISPLAY_LIFEEXP_PLUS_3}\r\n      />\r\n    );\r\n\r\n    const analysis = (\r\n      <div\r\n        style={{\r\n          marginTop: \"-4px\",\r\n          backgroundColor: \"lightgrey\",\r\n          paddingLeft: \"5px\",\r\n        }}\r\n      >\r\n        <AnalysisGraphs\r\n          insuranceNeed={insNeedLE3}\r\n          projectEnd={projectEnd} // try this now // always to the end\r\n          dataEstateLiability={dataEstateLiability}\r\n          dataInput={dataInput}\r\n          dataNAAges={dataAges}\r\n          lifeExp={dataOutput.lifeExpectancy.spouse}\r\n          lifeExpJLTD={dataOutput.lifeExpectancy.joint}\r\n          lifeExpClient={dataOutput.lifeExpectancy.client}\r\n          INAOption={this.INAOption}\r\n          dataShortfall={dataShort}\r\n          dataAPISite={appSiteAPI}\r\n          language={lang}\r\n          //projectTo={this.toRetirement ? 0 : 1}\r\n          periodOption={DISPLAY_LIFEEXP_PLUS_3}\r\n          //projectTo={this.lifeExp + 3} // always to the end\r\n          /* periodOption === DISPLAY_RETIREMENT\r\n          ? 0\r\n          : periodOption === DISPLAY_LIFEEXP\r\n          ? 1\r\n          : 2\r\n      } */\r\n        />\r\n      </div>\r\n    );\r\n\r\n    let infoIcon = getGenericMessage(lang);\r\n    infoIcon.infoText = getInfoIconSourcesGov(lang).infoText;\r\n    const govPopup = this.state.failedRemove && (\r\n      <div style={{ paddingLeft: \"45%\" }}>\r\n        {\" \"}\r\n        <Info infoIcon={infoIcon} respondToPopUp={this.hideEstateRemoveMsg} />\r\n      </div>\r\n    );\r\n\r\n    //const singleFamily = isSingleFamily(dataInput.Clients); //this.survivorExists(dataInput.Clients.length) &&\r\n    //dataInput.Clients[this.survIdx].memberKey !==\r\n    //  MEMBER.SPOUSE.Key;\r\n\r\n    return (\r\n      <div\r\n        id=\"main\"\r\n        className={\r\n          this.state.initialLoading === true ? \"mainDivBlocked\" : \"mainDiv\"\r\n        }\r\n      >\r\n        <style>{`@media print {display: none;}`}</style>\r\n        <Header\r\n          title={\r\n            this.INAOption === DISPLAY_INCOME\r\n              ? TITLES[lang].appletINA\r\n              : TITLES[lang].appletEP\r\n          }\r\n          saveToFile={this.saveToFile}\r\n          loadFromFile={this.loadFromFile}\r\n          loadStorage={this.loadStorage}\r\n          EmailINA={this.EmailINA}\r\n          changeLang={this.changeLang}\r\n          saveAsDefaultCase={this.saveAsDefaultCase}\r\n          language={lang}\r\n        />\r\n\r\n        {/* <div style={{marginTop:'15px'}} ><MultiButtons\r\n        \r\n          noButtons={2}\r\n          buttonCaption={[\"Income Protection\", \"Estate Protection\"]}\r\n          selectMultiButton={this.selectMultiButtonINAorTax}\r\n        /></div>\r\n         */}\r\n\r\n        <div className=\"topMargin\" />\r\n\r\n        <div style={{ height: \"0px\" }}>\r\n          <PopupUserinputDialog\r\n            openDialog={showInput === true}\r\n            language={lang}\r\n            respondToInput={this.respondToSaveRequest}\r\n          />\r\n        </div>\r\n        <Collapsible\r\n          id={COLLAPSIBLE_PRESENTATION}\r\n          title={TITLES[lang].presentations}\r\n          openParent={this.openParent}\r\n          openCollapsible={this.openCollapsible[COLLAPSIBLE_PRESENTATION]}\r\n          handleCollapsibleClick={this.handleCollapsibleClick}\r\n        >\r\n          {dataInput.Presentations.map((presentation) => (\r\n            <Presentation\r\n              key={presentation.id}\r\n              id={1}\r\n              provinceKey={presentation.provinceKey}\r\n              presentationCurr={presentation}\r\n              language={lang}\r\n              presentationsNo={1}\r\n              //saveAsDefaultCase={this.saveAsDefaultCase}\r\n              handleUpdate={this.handleUpdatePresentation}\r\n            />\r\n          ))}\r\n        </Collapsible>\r\n        <Collapsible\r\n          id={COLLAPSIBLE_CLIENTS}\r\n          title={singlePerson ? TITLES[lang].clients_1 : TITLES[lang].clients}\r\n          openParent={this.openParent}\r\n          openForce={this.openForce}\r\n          handleCollapsibleClick={this.handleCollapsibleClick}\r\n          openCollapsible={this.openCollapsible[COLLAPSIBLE_CLIENTS]}\r\n          infoIcon={APPLET_EP ? getInfoIconPYE_JLTD(lang) : undefined}\r\n        >\r\n          {dataInput.Clients.map((client) => (\r\n            <Client\r\n              key={client.id}\r\n              id={i++}\r\n              clientCurr={client}\r\n              singleFamily={singleFamily}\r\n              isTheSurvivor={\r\n                (this.survIdx !== undefined &&\r\n                  dataInput.Clients[this.survIdx].memberKey ===\r\n                    client.memberKey) ||\r\n                (singleFamily && client.id > 1)\r\n                  ? true\r\n                  : false\r\n              }\r\n              themeColor={i % 2 && isMobileDevice() ? altRow : \"white\"}\r\n              language={lang}\r\n              isQC={dataInput.Presentations[0].provinceKey === \"QC\"}\r\n              clientsNo={dataInput.Clients.length} //clientsNo}\r\n              handleUpdate={this.handleUpdateClient}\r\n              handleAddClient={this.handleAddClient}\r\n              handleRemoveClient={this.handleRemoveClient}\r\n              switchClients={this.switchClients}\r\n              disableAddRemove={this.state.loading}\r\n            />\r\n          ))}\r\n        </Collapsible>\r\n\r\n        <Collapsible\r\n          id={COLLAPSIBLE_ASSETS}\r\n          title={TITLES[lang].assets}\r\n          openParent={this.openParent}\r\n          openCollapsible={this.openCollapsible[COLLAPSIBLE_ASSETS]}\r\n          handleCollapsibleClick={this.handleCollapsibleClick}\r\n        >\r\n          {dataInput.Assets.map((asset) => (\r\n            <Asset\r\n              key={asset.id}\r\n              assetCurr={asset}\r\n              id={j++}\r\n              language={lang}\r\n              themeColor={j % 2 && isMobileDevice() ? altRow : \"white\"}\r\n              assetsNo={dataInput.Assets.length} //.assetsNo}\r\n              clientsNo={dataInput.Clients.length} //.assetsNo}\r\n              handleUpdate={this.handleUpdateAsset}\r\n              handleAddAsset={this.handleAddAsset}\r\n              handleRemoveAsset={this.handleRemoveAsset}\r\n              // handleAddAssetTaxLiability={this.handleAddAssetTaxLiability}\r\n              adjustVisibleOutputSection={this.adjustVisibleOutputSection}\r\n              hasPersonalResidenceAlready={this.hasPersonalResidenceAlready()}\r\n              projection={dataOutput.assetProjections}\r\n              disableAddRemove={this.state.loading}\r\n            />\r\n          ))}\r\n          {/* allow zero rows */}\r\n          {dataInput.Assets.length === 0 ? ( //).assetsNo === 0 ? (\r\n            <AddRemove\r\n              currentID={0}\r\n              minComps={0}\r\n              numberComps={0}\r\n              handleDoAdd={this.handleAddAsset}\r\n              handleDoRemove={this.handleRemoveAsset}\r\n            />\r\n          ) : (\r\n            \"\"\r\n          )}\r\n        </Collapsible>\r\n        <Collapsible\r\n          id={COLLAPSIBLE_LIABS}\r\n          title={TITLES[lang].liabilities}\r\n          openParent={this.openParent}\r\n          openCollapsible={this.openCollapsible[COLLAPSIBLE_LIABS]}\r\n          handleCollapsibleClick={this.handleCollapsibleClick}\r\n        >\r\n          {dataInput.Liabilitys.map((liability) => (\r\n            <Liability\r\n              key={liability.id}\r\n              liabilityCurr={liability}\r\n              probate={dataOutput.probate}\r\n              language={lang}\r\n              liabilitysNo={dataInput.Liabilitys.length} //.liabilitysNo}\r\n              themeColor={k % 2 && isMobileDevice() ? altRow : \"white\"}\r\n              handleUpdate={this.handleUpdateLiability}\r\n              handleAddLiability={this.handleAddLiability}\r\n              handleRemoveLiability={this.handleRemoveLiability}\r\n              // handleAddAssetTaxCredit={this.handleAddAssetTaxCredit}\r\n              disableAddRemove={this.state.loading}\r\n            />\r\n          ))}\r\n          {/* allow zero rows */}\r\n          {dataInput.Liabilitys.length === 0 ? ( //).liabilitysNo === 0 ? (\r\n            <AddRemove\r\n              currentID={0}\r\n              minComps={0}\r\n              numberComps={0}\r\n              handleDoAdd={this.handleAddLiability}\r\n              handleDoRemove={this.handleRemoveLiability}\r\n            />\r\n          ) : (\r\n            \"\"\r\n          )}\r\n        </Collapsible>\r\n\r\n        {this.INAOption === DISPLAY_INCOME && (\r\n          <Collapsible\r\n            id={COLLAPSIBLE_SOURCES}\r\n            title={singlePerson ? TITLES[lang].sources_1 : TITLES[lang].sources}\r\n            openParent={this.openParent}\r\n            openCollapsible={this.openCollapsible[COLLAPSIBLE_SOURCES]}\r\n            handleCollapsibleClick={this.handleCollapsibleClick}\r\n            infoIcon={getInfoIconInflationGrowth(lang)}\r\n          >\r\n            {govPopup}\r\n            {dataInput.Sources.map((source) => {\r\n              let OrphanAges;\r\n              let maxOrphanDur;\r\n              if (\r\n                source.sourceTypeKey === INCOMESOURCES.GOV_ORPHANS_BENEFIT.Key\r\n              ) {\r\n                OrphanAges = dataInput.Clients.filter(function (item) {\r\n                  return source.ownerID === item.id;\r\n                });\r\n\r\n                if (OrphanAges.length > 0)\r\n                  maxOrphanDur =\r\n                    (dataInput.Presentations[0].provinceKey === \"QC\"\r\n                      ? MAX_ORPHAN_DUR_QC\r\n                      : MAX_ORPHAN_DUR_NON_QC) - OrphanAges[0].Age;\r\n              }\r\n              return (\r\n                /* !(source.amount === 0 && source.id < noSources && source.sourceTypeKey === INCOMESOURCES.SURVIVORS_INCOME.Key) && */ <Source // notSurvivorWithZeroIncome and not new sources\r\n                  key={source.id}\r\n                  id={n++}\r\n                  sourceCurr={\r\n                    source.sourceTypeKey ===\r\n                    INCOMESOURCES.GOV_ORPHANS_BENEFIT.Key\r\n                      ? {\r\n                          ...source,\r\n                          maxOrphan: this.orphan,\r\n                          maxOrphanDur: maxOrphanDur,\r\n                        }\r\n                      : source\r\n                  }\r\n                  /* Type={source.Type}\r\n              amount={source.amount}\r\n              startYear={source.startYear}\r\n              duration={source.duration}\r\n              ownerID={source.ownerID} */\r\n                  includeGovOrphanBenefit={this.areThereChildren()}\r\n                  language={lang}\r\n                  sourcesNo={dataInput.Sources.length} //sourcesNo}\r\n                  themeColor={n % 2 && isMobileDevice() ? altRow : \"white\"}\r\n                  handleUpdate={this.handleUpdateSource}\r\n                  handleAddSource={this.handleAddSource}\r\n                  handleRemoveSource={this.handleRemoveSource}\r\n                  disableAddRemove={this.state.loading}\r\n                />\r\n              );\r\n            })}\r\n          </Collapsible>\r\n        )}\r\n        {this.INAOption === DISPLAY_INCOME && (\r\n          <Collapsible\r\n            id={COLLAPSIBLE_NEEDS}\r\n            title={singlePerson ? TITLES[lang].needs_1 : TITLES[lang].needs}\r\n            openParent={this.openParent}\r\n            openCollapsible={this.openCollapsible[COLLAPSIBLE_NEEDS]}\r\n            handleCollapsibleClick={this.handleCollapsibleClick}\r\n            infoIcon={getInfoIconNeedGrowth(lang)}\r\n          >\r\n            {dataInput.Needs.map((need) => (\r\n              <Need\r\n                key={need.id}\r\n                id={l++}\r\n                needCurr={need}\r\n                language={lang}\r\n                needsNo={dataInput.Needs.length} //needsNo}\r\n                afterTaxTotalIncome={this.getAfterTaxTotalIncome(dataInput)}\r\n                themeColor={l % 2 && isMobileDevice() ? altRow : \"white\"}\r\n                handleUpdate={this.handleUpdateNeed}\r\n                handleAddNeed={this.handleAddNeed}\r\n                handleRemoveNeed={this.handleRemoveNeed}\r\n                disableAddRemove={this.state.loading}\r\n              />\r\n            ))}\r\n            {/* allow zero rows */}\r\n            {dataInput.Needs.length === 0 ? ( //).liabilitysNo === 0 ? (\r\n              <AddRemove\r\n                currentID={0}\r\n                minComps={0}\r\n                numberComps={0}\r\n                handleDoAdd={this.handleAddNeed}\r\n                handleDoRemove={this.handleRemoveNeed}\r\n              />\r\n            ) : (\r\n              \"\"\r\n            )}\r\n          </Collapsible>\r\n        )}\r\n        {/*<Collapsible id=\"8\" title={TITLES[lang].settings} openParent={this.openParent}  handleCollapsibleClick\r\n={this. handleCollapsibleClick\r\n}>\r\n\t\t\t\t\t<Setting key={this.state.dataSettings.Settings.id} index={1} Province={this.state.dataSettings.Settings.Province} invRate={this.state.dataSettings.Settings.invRate} inflation={this.state.dataSettings.Settings.inflation} taxRate={this.state.dataSettings.Settings.taxRate} language={lang}  handleUpdate={this.handleUpdateSetting} />\r\n\t\t\t\t\t\r\n\t\t\t\t</Collapsible>*/}\r\n\r\n        {this.state.failedAPI ? (\r\n          <div style={{ paddingLeft: \"40%\" }}>\r\n            <Info\r\n              infoIcon={getInfoNoInternetAccess(lang)}\r\n              respondToPopUp={this.respondToPopUp}\r\n              ref={(Info) => (this.dlgLogin = Info)}\r\n            />\r\n          </div>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n\r\n        {\r\n          /* this.state.loading===false &&  */ <Collapsible\r\n            id={COLLAPSIBLE_RESULTS}\r\n            title={TITLES[lang].results}\r\n            enabled={this.state.loading === false}\r\n            openParent={this.openParent}\r\n            openCollapsible={this.openCollapsible[COLLAPSIBLE_RESULTS]}\r\n            handleCollapsibleClick={this.handleCollapsibleClick}\r\n          >\r\n            <div style={{ width: \"100%\", float: \"left\", clear: \"left\" }}>\r\n              {versionDetails().allowAnalysis === true && !APPLET_INA ? (\r\n                <MultiButtons\r\n                  noButtons={4}\r\n                  buttonCaption={buttonCaption}\r\n                  selected={dataInput.Presentations[0].resultsOption}\r\n                  selectMultiButton={this.selectMultiButton}\r\n                />\r\n              ) : (\r\n                <MultiButtons\r\n                  noButtons={3}\r\n                  buttonCaption={buttonCaption3}\r\n                  selected={dataInput.Presentations[0].resultsOption}\r\n                  selectMultiButton={this.selectMultiButton}\r\n                />\r\n              )}\r\n            </div>\r\n\r\n            <div style={{ width: \"100%\", float: \"left\", clear: \"left\" }}>\r\n              {/* <MultiButtons\r\n              button1={ret}\r\n              button2={le}\r\n              buttonActive={this.toRetirement ? 1 : 2}\r\n              selectButton={this.setInsDuration}\r\n            /> */}\r\n              {this.INAOption === DISPLAY_INCOME &&\r\n                dataInput.Presentations[0].resultsOption !== DISPLAY_ANALYSIS &&\r\n                !singleFamily && (\r\n                  <MultiButtons\r\n                    noButtons={3}\r\n                    buttonCaption={buttonCaptionPeriod}\r\n                    selected={dataInput.Presentations[0].periodOption + 1}\r\n                    selectMultiButton={this.selectMultiButtonPeriod}\r\n                  />\r\n                )}\r\n\r\n              {periodOption !== DISPLAY_RETIREMENT &&\r\n                dataInput.Presentations[0].resultsOption !==\r\n                  DISPLAY_ANALYSIS && (\r\n                  <span style={{ fontSize: \"10px\", fontColor: \"grey\" }}>\r\n                    {/* <Info iconName=\"infoRed.png\" id=\"warning\" msg={msg1} /> */}\r\n                  </span>\r\n                )}\r\n            </div>\r\n            {dataOutput.dataCashFlowPersonal.length === 0 ? (\r\n              \"\"\r\n            ) : dataInput.Presentations[0].resultsOption === DISPLAY_GRAPHS ? (\r\n              APPLET_INA ? (\r\n                graphs\r\n              ) : (\r\n                graphsEP\r\n              )\r\n            ) : dataInput.Presentations[0].resultsOption ===\r\n              DISPLAY_SPREADSHEET ? (\r\n              //<div style={{ width: tableWidth }}>\r\n              <div>\r\n                {/* {APPLET_INA && this.state.dataOutput.aggregateGrid !== null && this.state.dataOutput.aggregateGrid !== undefined ? */}\r\n                {dataOutput.aggregateGrid !== null &&\r\n                  dataOutput.aggregateGrid !== undefined &&\r\n                  /* !showSinglePerson && */ (\r\n                    <AggregateGrid\r\n                      aggregateGrid={dataOutput.aggregateGrid}\r\n                      LE={\r\n                        APPLET_INA\r\n                          ? dataOutput.lifeExpectancy.spouse\r\n                          : dataOutput.lifeExpectancy.joint\r\n                      }\r\n                      lang={lang}\r\n                      insNeedLine={insNeedLine}\r\n                    />\r\n                  )}\r\n\r\n                {/* : APPLET_EP && <ExcelSpreadsheetEP input={this.state} noProjectYrs={noProjectYrs} />} */}\r\n              </div>\r\n            ) : dataInput.Presentations[0].resultsOption ===\r\n              DISPLAY_ANALYSIS ? (\r\n              analysis\r\n            ) : this.INAOption === DISPLAY_INCOME ? (\r\n              <OutputPresentation\r\n                insuranceNeed={insNeed}\r\n                insuranceNeedRet={insNeedRet}\r\n                insuranceNeedLE={insNeedLE}\r\n                insuranceNeedEAge={insNeedEAge}\r\n                projectEnd={projectEnd}\r\n                insNeedLine={insNeedLine}\r\n                LE={dataOutput.lifeExpectancy.spouse + survAge}\r\n                dataInput={dataInput}\r\n                INAOption={this.INAOption}\r\n                dataShortfall={dataShort}\r\n                imageRemove={this.imageRemove}\r\n                imageAdjust={this.imageAdjust}\r\n                encryptedInputLife1AndSpouse={\r\n                  dataOutput.encryptedInputLife1AndSpouse\r\n                }\r\n                encryptedInputLife1={dataOutput.encryptedInputLife1}\r\n                //periodOption={periodOption}\r\n                getSpouseINA={this.getSwitchClientsState}\r\n              />\r\n            ) : (\r\n              <OutputPresentationEP\r\n                //insuranceNeed={insNeed}\r\n                insuranceNeedRet={insNeedRet}\r\n                insuranceNeedLE={insNeedLE}\r\n                //insuranceNeedEAge={insNeedEAge}\r\n                //projectEnd={projectEnd}\r\n                LE={dataOutput.lifeExpectancy.joint} //client} //{dataOutput.lifeExpectancy.spouse + survAge}\r\n                dataInput={dataInput}\r\n                assetProjections={dataOutput.assetProjections}\r\n                aggregateGrid={dataOutput.aggregateGrid}\r\n                probate={dataOutput.probate}\r\n                INAOption={this.INAOption}\r\n                //dataEstateLiability={dataEstateLiability} //getDataFutureEstateLiability(this.dataTaxLiability.numericValues, totalLiabProjections)}\r\n                dataShortfall={dataShort}\r\n                imageRemove={this.imageRemove}\r\n                imageAdjust={this.imageAdjust}\r\n                //periodOption={periodOption}\r\n                encryptedInputLife1AndSpouse={\r\n                  dataOutput.encryptedInputLife1AndSpouse\r\n                }\r\n                encryptedInputLife1={dataOutput.encryptedInputLife1}\r\n              />\r\n            )}\r\n          </Collapsible>\r\n        }\r\n        {this.state.initialLoading === true && (\r\n          <div style={{ marginTop: \"20px\", marginLeft: \"90px\" }}>\r\n            <Loader type=\"TailSpin\" color=\"black\" height={30} width={30} />\r\n          </div>\r\n        )}\r\n        {this.state.SnapImport ? <PasteClients /> : \"\"}\r\n        <div id=\"copyDiv\" style={{ paddingBottom: \"40px\" }}></div>\r\n\r\n        \r\n        <br />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nimport { DropDown } from \"./DropDown\";\r\n//import { InputField4 } from './inputField4';\r\nimport { InputField } from \"./inputField\";\r\nimport { AddRemove } from \"./AddRemove\";\r\nimport { cleanFormat } from \"../utils/helper\";\r\nimport {\r\n  getInfoIconClientsMember,\r\n  getInfoIconClientsElig,\r\n  getInfoIconClientsEligSinglePerson,\r\n  getInfoIconSpouseElig,\r\n  getInfoIconClientsTax,\r\n  getInfoIconClientsRetire,\r\n  getInfoIncome,\r\n} from \"../definitions/infoIconsDefinitions\";\r\nimport { appletMode } from \"../../package.json\";\r\n\r\nimport {\r\n  MESSAGES,\r\n  SEX,\r\n  SMOKING,\r\n  MEMBER,\r\n  CONTROLTITLE,\r\n  TITLES,\r\n  QUOTE_CLIENT,\r\n  QUOTE_SPOUSE,\r\n  APPLET_EP,\r\n  APPLET_INA,\r\n} from \"../definitions/generalDefinitions\";\r\nimport {\r\n  getListItemNameFromKey,\r\n  getDisableValues,\r\n  getListItemKeyFromName,\r\n} from \"../utils/helper\";\r\nimport { createDefaultClient } from \"../data/createDefaults\";\r\nexport class Client extends Component {\r\n  displayName = Client.name;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      name: this.props.clientCurr.Name,\r\n    };\r\n    var sexValues = [\r\n      {\r\n        label: SEX.MALE.value[this.props.language],\r\n        value: 1,\r\n      },\r\n      { label: SEX.FEMALE.value[this.props.language], value: 2 },\r\n    ];\r\n\r\n    var smokingValues = [\r\n      {\r\n        label: SMOKING.NON_SMOKER.value[this.props.language],\r\n        value: 1,\r\n      },\r\n      { label: SMOKING.SMOKER.value[this.props.language], value: 2 },\r\n    ];\r\n\r\n    var memberValues = [\r\n      {\r\n        label: MEMBER.CLIENT.value[this.props.language],\r\n        value: 1,\r\n      },\r\n      { label: MEMBER.SPOUSE.value[this.props.language], value: 2 },\r\n      { label: MEMBER.CHILD.value[this.props.language], value: 3 },\r\n      { label: MEMBER.DEPENDENT_ADULT.value[this.props.language], value: 4 },\r\n    ];\r\n\r\n    if (APPLET_EP) {\r\n      memberValues = [\r\n        {\r\n          label: MEMBER.CLIENT.value[this.props.language],\r\n          value: 1,\r\n        },\r\n        { label: MEMBER.SPOUSE.value[this.props.language], value: 2 },\r\n      ];\r\n    }\r\n\r\n    const bilingual = CONTROLTITLE[this.props.language];\r\n    this.dataValues = {\r\n      DD: [\r\n        {\r\n          id: 1,\r\n          Title: bilingual.sex,\r\n          defValue: getListItemNameFromKey(\r\n            SEX,\r\n            this.props.clientCurr.sexKey,\r\n            this.props.language\r\n          ),\r\n          disableOptionValue: getDisableValues(SEX),\r\n          Values: sexValues,\r\n        },\r\n        {\r\n          id: 2,\r\n          Title: bilingual.smoking,\r\n          defValue: getListItemNameFromKey(\r\n            SMOKING,\r\n            this.props.clientCurr.smokerKey,\r\n            this.props.language\r\n          ),\r\n          disableOptionValue: getDisableValues(SMOKING),\r\n          Values: smokingValues,\r\n        },\r\n        {\r\n          id: 3,\r\n          Title: bilingual.member,\r\n          defValue: getListItemNameFromKey(\r\n            MEMBER,\r\n            this.props.clientCurr.memberKey,\r\n            this.props.language\r\n          ),\r\n          disableOptionValue: getDisableValues(MEMBER),\r\n          Values: memberValues,\r\n        },\r\n      ],\r\n    };\r\n    this.infoRetireRed = false;\r\n  \r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    // console.log(getListItemNameFromKey(SEX,nextProps.clientCurr.sexKey,this.props.language),nextProps.clientCurr.memberKey,this.props.language)\r\n    if (\r\n      nextProps.clientCurr !== this.props.clientCurr ||\r\n      nextProps.id !== this.props.id ||\r\n      // || nextProps.hasSurivor !== this.props.hasSurivor\r\n      nextProps.clientsNo !== this.props.clientsNo\r\n    ) {\r\n      // console.log(nextProps, this.props,this.dataValues)\r\n      this.dataValues.DD[0].defValue = getListItemNameFromKey(\r\n        SEX,\r\n        nextProps.clientCurr.sexKey,\r\n        this.props.language\r\n      );\r\n      this.dataValues.DD[1].defValue = getListItemNameFromKey(\r\n        SMOKING,\r\n        nextProps.clientCurr.smokerKey,\r\n        this.props.language\r\n      );\r\n      this.dataValues.DD[2].defValue = getListItemNameFromKey(\r\n        MEMBER,\r\n        nextProps.clientCurr.memberKey,\r\n        this.props.language\r\n      );\r\n      // console.log(nextProps, this.props,this.dataValues)\r\n\r\n      this.setState({ name: nextProps.clientCurr.Name });\r\n    }\r\n    //  if (nextProps.clientCurr.retirementAge == this.props.clientCurr.retirementAge)\r\n    //  this.infoRetireRed= false;\r\n  }\r\n\r\n  handleDoRemove = (id) => {\r\n    if (this.props.disableAddRemove === false) {\r\n      this.props.handleRemoveClient(id);\r\n    }\r\n  };\r\n\r\n  handleDoAdd = () => {\r\n    if (this.props.disableAddRemove === false) {\r\n      let newCliet;\r\n      if (this.props.clientsNo === 1) newCliet = createDefaultClient(2);\r\n      else {\r\n        newCliet = createDefaultClient(this.props.clientsNo + 1); //add spouse\r\n        newCliet.Age =\r\n          18 - 2 * (this.props.clientsNo > 6 ? 4 : this.props.clientsNo + 1);\r\n        newCliet.sexKey =\r\n          this.props.clientsNo % 2 ? SEX.MALE.Key : SEX.FEMALE.Key;\r\n        newCliet.retirementAge = 25;\r\n      }\r\n      this.props.handleAddClient(newCliet);\r\n    }\r\n  };\r\n\r\n  doSwitch = () => {\r\n    this.props.switchClients();\r\n  };\r\n  handleUpdateInput = (id, value) => {\r\n    let client = this.getCurrClient();\r\n    /*    let client = {\r\n      id: this.props.id,\r\n      Age: this.props.clientCurr.Age,\r\n      sexKey: this.props.clientCurr.sexKey,\r\n      smokerKey: this.props.clientCurr.smokerKey,\r\n      Income: this.props.clientCurr.Income,\r\n      avgTaxRate: this.props.clientCurr.avgTaxRate,\r\n      memberKey: this.props.clientCurr.memberKey,\r\n      retirementAge: this.props.clientCurr.retirementAge,\r\n      Eligibility: this.props.clientCurr.Eligibility,\r\n      Name:this.props.clientCurr.Name\r\n    };\r\n */\r\n    const lang = this.props.language;\r\n    const valueClean = cleanFormat(value, lang);\r\n    const valueCleanInt = parseInt(valueClean);\r\n\r\n    let changed = false;\r\n    //this.infoRetireRed= false;\r\n    if (id === 0) {\r\n      changed = client.Age !== parseInt(value) ? true : false;\r\n      client.Age = parseInt(value);\r\n    } else if (id === 1) {\r\n      changed = client.Income !== valueCleanInt ? true : false;\r\n      client.Income = valueCleanInt;\r\n    } else if (id === 2) {\r\n      changed =\r\n        client.avgTaxRate !==\r\n        parseInt(100 * valueClean) / 100\r\n          ? true\r\n          : false;\r\n      client.avgTaxRate =\r\n        parseInt(100 * valueClean) / 100;\r\n    } else if (id === 3) {\r\n      changed = client.retirementAge !== parseInt(value) ? true : false;\r\n      if (changed) {\r\n        this.infoRetireRed = true;\r\n        setTimeout(() => {\r\n          this.infoRetireRed = false;\r\n        }, 4000);\r\n      }\r\n      client.retirementAge = parseInt(value);\r\n    } else if (id === 4) {\r\n      changed =\r\n        client.Eligibility !==\r\n        parseInt(100 * valueClean) / 100\r\n          ? true\r\n          : false;\r\n      client.Eligibility =\r\n        parseInt(100 * valueClean) / 100;\r\n    }\r\n\r\n    if (changed) {\r\n      this.props.handleUpdate(client);\r\n      this.setState({ loading: this.props.disableAddRemove });\r\n    }\r\n  };\r\n\r\n  updateDDown = (id, selection) => {\r\n    let client = this.getCurrClient();\r\n    /*  {\r\n      id: this.props.id,\r\n      Age: this.props.clientCurr.Age,\r\n      sexKey: this.props.clientCurr.sexKey,\r\n      smokerKey: this.props.clientCurr.smokerKey,\r\n      Income: this.props.clientCurr.Income,\r\n      avgTaxRate: this.props.clientCurr.avgTaxRate,\r\n      memberKey: this.props.clientCurr.memberKey,\r\n      retirementAge: this.props.clientCurr.retirementAge,\r\n      Eligibility: this.props.clientCurr.Eligibility,\r\n      Name:this.props.clientCurr.Name\r\n    }; */\r\n    if (id === 1) client.sexKey = getListItemKeyFromName(SEX, selection);\r\n    else if (id === 2)\r\n      client.smokerKey = getListItemKeyFromName(SMOKING, selection);\r\n    else if (id === 3)\r\n      client.memberKey = getListItemKeyFromName(MEMBER, selection);\r\n    else if (id === 5) client.Name = selection;\r\n\r\n    if (\r\n      client.memberKey === MEMBER.CHILD.Key &&\r\n      this.props.clientCurr.memberKey !== MEMBER.CHILD.Key\r\n    ) {\r\n      client.Income = 0;\r\n      client.avgTaxRate = 0;\r\n      client.Age = 16;\r\n      client.retirementAge = 25;\r\n    } else if (\r\n      client.memberKey === MEMBER.DEPENDENT_ADULT.Key &&\r\n      this.props.clientCurr.memberKey !== MEMBER.DEPENDENT_ADULT.Key\r\n    ) {\r\n      client.Income = 0;\r\n      client.avgTaxRate = 0;\r\n      client.Age = 25;\r\n      client.retirementAge = 65;\r\n    } else if (\r\n      client.memberKey === MEMBER.SPOUSE.Key &&\r\n      this.props.clientCurr.memberKey !== MEMBER.SPOUSE.Key\r\n    ) {\r\n      client.Income = 60000;\r\n      client.avgTaxRate = 25;\r\n      client.Age = 40;\r\n      client.retirementAge = 65;\r\n    }\r\n    this.props.handleUpdate(client);\r\n  };\r\n\r\n  writeBack = (name) => {\r\n    let client = this.getCurrClient();\r\n    client.Name = name;\r\n    this.props.handleUpdate(client);\r\n  };\r\n\r\n  updateName = (evt) => {\r\n    this.setState({ name: evt.target.value }, this.writeBack(evt.target.value));\r\n  };\r\n\r\n  getCurrClient = () => {\r\n    let client = {\r\n      id: this.props.id,\r\n      Age: this.props.clientCurr.Age,\r\n      sexKey: this.props.clientCurr.sexKey,\r\n      smokerKey: this.props.clientCurr.smokerKey,\r\n      Income: this.props.clientCurr.Income,\r\n      avgTaxRate: this.props.clientCurr.avgTaxRate,\r\n      memberKey: this.props.clientCurr.memberKey,\r\n      retirementAge: this.props.clientCurr.retirementAge,\r\n      Eligibility: this.props.clientCurr.Eligibility,\r\n      Name: this.props.clientCurr.Name,\r\n    };\r\n    return client;\r\n  };\r\n\r\n  handleFocus = (event) => {\r\n    event.target.select();\r\n  };\r\n\r\n  render() {\r\n    const nonSpouse =\r\n      this.props.clientCurr.memberKey === MEMBER.CHILD.Key ||\r\n      this.props.clientCurr.memberKey === MEMBER.DEPENDENT_ADULT.Key;\r\n    const nonSpouseIsTheSurvivor = nonSpouse && this.props.isTheSurvivor;\r\n    const nonSpouseHasIncome =\r\n      this.props.clientCurr.Income > 0 &&\r\n      (this.props.clientCurr.memberKey === MEMBER.CHILD.Key ||\r\n        this.props.clientCurr.memberKey === MEMBER.DEPENDENT_ADULT.Key);\r\n    const bilingual = CONTROLTITLE[this.props.language];\r\n    const singlePerson = this.props.clientsNo === 1 ? true : false;\r\n    let clientMember =\r\n      this.props.clientCurr.memberKey === MEMBER.CLIENT.Key &&\r\n      this.props.id === 1;\r\n    let disableMember = clientMember; // || (this.props.clientCurr.memberKey === MEMBER.SPOUSE.Key &&\r\n    //     this.props.id === 2);\r\n    // console.log(CONTROLTITLE[this.props.language].member, this.props.language,this.dataValues.DD[2])\r\n    // disable Client\r\n    this.dataValues.DD[2].disableOptionValue[QUOTE_CLIENT] = true;\r\n    this.dataValues.DD[2].disableOptionValue[\r\n      QUOTE_SPOUSE\r\n    ] = nonSpouseIsTheSurvivor ? this.props.clientCurr.id !== 2 : true;\r\n    let desc =\r\n      this.props.clientCurr.id === 1\r\n        ? TITLES[this.props.language].insured\r\n        : this.props.clientCurr.id === 2\r\n        ? TITLES[this.props.language].benef\r\n        : \"\";\r\n    if (APPLET_EP)\r\n      desc =\r\n        this.props.clientCurr.id === 1\r\n          ? singlePerson\r\n            ? TITLES[this.props.language].insured\r\n            : TITLES[this.props.language].insuredJLTD\r\n          : this.props.clientCurr.id === 2\r\n          ? TITLES[this.props.language].insuredJLTD\r\n          : \"\";\r\n    const greyedName = desc;\r\n    const nameHolder = this.state.name === \"\" ? desc : this.state.name;\r\n\r\n    const textColourStyle =\r\n      this.state.name === \"\" || this.state.name === greyedName\r\n        ? { color: \"#99A4be\" }\r\n        : { color: \"black\" };\r\n    if (this.state.loading === true && this.props.disableAddRemove === true) {\r\n      return \"\";\r\n    } else {\r\n      return (\r\n        <div className=\"inputRow\">\r\n          <div className=\"dropDown inputDiv\">\r\n            <div className=\"controlTitle\">\r\n              {CONTROLTITLE[this.props.language].name}\r\n            </div>\r\n            <input\r\n              key={5}\r\n              id={5}\r\n              className=\"inputField  textareaAssetName\"\r\n              /*                 style={textColourStyle} */\r\n              placeholder={greyedName}\r\n              value={this.state.name}\r\n              onClick={(e) => this.handleFocus(e)}\r\n              onFocus={(e) => this.handleFocus(e)}\r\n              type=\"text\"\r\n              onBlur={(evt) => this.updateName(evt)}\r\n              onChange={(evt) => this.setState({ name: evt.target.value })}\r\n\r\n              //onBlur={(evt) => this.updateName(evt)}\r\n            />\r\n\r\n            {/* \r\n              <input\r\n                id={12}\r\n                type=\"text\"\r\n                className=\"inputField  textareaAssetName\"\r\n                onChange={this.updateDesc}\r\n                value={assetCurr.description}\r\n              /> */}\r\n          </div>\r\n          <InputField\r\n            id={0}\r\n            inputName={bilingual.age}\r\n            format={1}\r\n            Count={this.props.clientsNo}\r\n            language={this.props.language}\r\n            inputValue={this.props.clientCurr.Age}\r\n            handleUpdateInput={this.handleUpdateInput}\r\n          />\r\n          {this.dataValues.DD.map((dd) => {\r\n            return (nonSpouse && dd.Title === bilingual.smoking) ||\r\n              dd.Title === bilingual.age ? (\r\n              \"\"\r\n            ) : (\r\n              <DropDown\r\n                key={dd.id}\r\n                id={dd.id}\r\n                Count={this.props.clientsNo}\r\n                Title={dd.Title}\r\n                defValue={dd.defValue}\r\n                disable={dd.Title === bilingual.member ? disableMember : false}\r\n                infoIcon={\r\n                  dd.Title === bilingual.member &&\r\n                  dd.defValue ===\r\n                    getListItemNameFromKey(\r\n                      MEMBER,\r\n                      MEMBER.CLIENT.Key,\r\n                      this.props.language\r\n                    )\r\n                    ? getInfoIconClientsMember(this.props.language)\r\n                    : undefined\r\n                }\r\n                // hasSurivor={this.props.hasSurivor}\r\n                Values={dd.Values}\r\n                language={this.props.language}\r\n                disableOption={dd.disableOptionValue}\r\n                updateDDown={this.updateDDown}\r\n              />\r\n            );\r\n          })}\r\n\r\n          {\r\n            /* nonSpouse && !nonSpouseHasIncome   && !nonSpouseIsTheSurvivor ? (\r\n          \"\"\r\n        ) :  */ <InputField\r\n              id={1}\r\n              inputName={bilingual.income}\r\n              format={2}\r\n              Count={this.props.clientsNo}\r\n              infoIcon={\r\n                this.props.id === 1\r\n                  ? getInfoIncome(this.props.language)\r\n                  : undefined\r\n              }\r\n              language={this.props.language}\r\n              inputValue={this.props.clientCurr.Income}\r\n              handleUpdateInput={this.handleUpdateInput}\r\n            />\r\n          }\r\n          {\r\n            /* nonSpouse && !nonSpouseHasIncome  && !nonSpouseIsTheSurvivor ? (\r\n          \"\"\r\n        ) : */ <InputField\r\n              id={2}\r\n              inputName={bilingual.avgTax}\r\n              format={3}\r\n              Count={this.props.clientsNo}\r\n              //info={MESSAGES[this.props.language].infoAvgTax}\r\n              infoIcon={\r\n                this.props.id === 1 && !singlePerson\r\n                  ? getInfoIconClientsTax(this.props.language)\r\n                  : undefined\r\n              }\r\n              showInfo={!disableMember} //infoOnlyForRowID={2}\r\n              language={this.props.language}\r\n              inputValue={\r\n                Math.round(10000 * this.props.clientCurr.avgTaxRate) / 10000\r\n              }\r\n              handleUpdateInput={this.handleUpdateInput}\r\n            />\r\n          }\r\n          {singlePerson || (nonSpouse && !nonSpouseIsTheSurvivor) ? (\r\n            \"\"\r\n          ) : (\r\n            <InputField\r\n              id={3}\r\n              inputName={\r\n                nonSpouseIsTheSurvivor || singlePerson\r\n                  ? bilingual.protectToAge\r\n                  : bilingual.retAge\r\n              }\r\n              format={1}\r\n              Count={this.props.clientsNo}\r\n              language={this.props.language}\r\n              inputValue={this.props.clientCurr.retirementAge}\r\n              infoIcon={\r\n                this.props.id !== 1\r\n                  ? getInfoIconClientsRetire(\r\n                      this.props.language,\r\n                      this.infoRetireRed\r\n                    )\r\n                  : undefined\r\n              }\r\n              titleColour= {nonSpouseIsTheSurvivor || singlePerson?\"red\":\"\"}\r\n              handleUpdateInput={this.handleUpdateInput}\r\n            />\r\n          )}\r\n          {nonSpouse ? (\r\n            \"\"\r\n          ) : (\r\n            <InputField\r\n              id={4}\r\n              inputName={this.props.isQC?bilingual.qppElig:bilingual.cppElig}\r\n              format={3}\r\n              Count={this.props.clientsNo}\r\n              //info={MESSAGES[this.props.language].infoElig}\r\n              infoIcon={\r\n                this.props.id === 1\r\n                  ? (singlePerson?getInfoIconClientsEligSinglePerson(this.props.language):getInfoIconClientsElig(this.props.language))\r\n                  : getInfoIconSpouseElig(this.props.language)\r\n              }\r\n              showInfo={disableMember}\r\n              language={this.props.language}\r\n              inputValue={\r\n                Math.round(10000 * this.props.clientCurr.Eligibility) / 10000\r\n              }\r\n              handleUpdateInput={this.handleUpdateInput}\r\n            />\r\n          )}\r\n          {/* {isVersion2019() === false && disableMember ? ( */}\r\n          {clientMember === true &&\r\n            this.props.clientsNo > 1 &&\r\n            !this.props.singleFamily &&\r\n            APPLET_INA && (\r\n              <button\r\n                className=\"switchClient\"\r\n                style={{\r\n                  width: this.props.language === \"en\" ? \"115px\" : \"125px\",\r\n                }}\r\n                onClick={this.doSwitch}\r\n              >\r\n                {/* <font size=\"-4\">&#8645;</font> */}\r\n                {bilingual.switch}\r\n                {/* Switch Client */}\r\n              </button>\r\n            )}\r\n          <AddRemove\r\n            currentID={this.props.id}\r\n            numberComps={this.props.clientsNo}\r\n            fixedFirstRow={true}\r\n            minComps={1} //{appletMode===\"INA\"?2:1}\r\n            disabled={this.props.disableAddRemove}\r\n            maxRows={APPLET_INA ? 100 : 2}\r\n            handleDoAdd={this.handleDoAdd}\r\n            handleDoRemove={this.handleDoRemove}\r\n           />\r\n          {/* {isMobileDevice() && this.props.id < this.props.clientsNo ? (\r\n          <hr className=\"ppi2\" />\r\n        ) : (\r\n          \"\"\r\n        )} */}\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { DropDown } from \"./DropDown\";\r\nimport { InputField } from \"./inputField\";\r\nimport { Info } from \"./Info\";\r\n\r\nimport {\r\n  getInfoIconProbate,\r\n  getInfoIconLiabDesc,\r\n} from \"../definitions/infoIconsDefinitions\";\r\n\r\nimport { AddRemove } from \"./AddRemove\";\r\nimport {\r\n  getListToShowByOrder,\r\n  getProjectedLiability,\r\n  cleanFormat,\r\n  getListItemNameFromKey,\r\n  getListItemKeyFromName,\r\n  arrayFormatMoney,\r\n} from \"../utils/helper\";\r\n\r\nimport {\r\n  LIABILITIES,\r\n  ASSETS,\r\n  OWNERSHIP,\r\n  CONTROLTITLE,\r\n  GROWTHDIR,\r\n  UNLISTED,\r\n  ASSET_TaxCredit,\r\n  APPLET_INA,\r\n  APPLET_EP,\r\n  ASSET_YEAR_TODAY,\r\n  CONTROLTITLELIABS  \r\n} from \"../definitions/generalDefinitions\";\r\nimport { isMobileDevice } from \"../utils/helper\";\r\nimport DataTable from \"./GridExcelComponent/DataTable\";\r\nimport { fetchAssetProjection } from \"../utils/FetchAPIs\";\r\nimport {\r\n  LIABILITY_API_OUTPUT_Year,\r\n  LIABILITY_API_OUTPUT_Age,\r\n  LIABILITY_API_OUTPUT_ProjectedValue,\r\n  LIABILITY_API_OUTPUT_TaxCredit,\r\n  DROPDOWN_WIDE,\r\n} from \"../definitions/generalDefinitions\";\r\n\r\nexport class Liability extends Component {\r\n  displayName = Liability.name;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      description: \"\",\r\n      displaySreadsheet: false,\r\n      loading: false,\r\n      dataProjection:[]\r\n    };\r\n    var i;\r\n    var typeValues = [];\r\n    this.desc = this.props.liabilityCurr.description;\r\n    const listLiabsToShow = getListToShowByOrder(LIABILITIES);\r\n    for (i = 0; i < listLiabsToShow.length; ++i) {\r\n      typeValues.push({\r\n        label: listLiabsToShow[i].value[this.props.language],\r\n        value: i + 1,\r\n      });\r\n    }\r\n    var ownerValues = [\r\n      { label: OWNERSHIP.CLIENT.value[this.props.language], value: 1 },\r\n      { label: OWNERSHIP.SPOUSE.value[this.props.language], value: 2 },\r\n      { label: OWNERSHIP.JOINT.value[this.props.language], value: 3 },\r\n    ];\r\n\r\n    var growthDirValues = [\r\n      //{ label: GROWTHDIR[this.props.language].Values[0], value: 1 },\r\n      //{ label: GROWTHDIR[this.props.language].Values[1], value: 2 },\r\n      { label: GROWTHDIR.GROWS.value[this.props.language], value: 1 },\r\n      { label: GROWTHDIR.REDUCES.value[this.props.language], value: 2 },\r\n    ];\r\n\r\n    this.dataValues = {\r\n      DD: [\r\n        {\r\n          id: 1,\r\n          Title: CONTROLTITLE[this.props.language].type,\r\n          defValue: getListItemNameFromKey(\r\n            LIABILITIES,\r\n            this.props.liabilityCurr.liabTypeKey,\r\n            this.props.language\r\n          ),\r\n          Values: typeValues,\r\n        },\r\n        {\r\n          id: 2,\r\n          Title: CONTROLTITLE[this.props.language].owner,\r\n          defValue: getListItemNameFromKey(\r\n            OWNERSHIP,\r\n            this.props.liabilityCurr.ownerKey,\r\n            this.props.language\r\n          ),\r\n          Values: ownerValues,\r\n        },\r\n        {\r\n          id: 3,\r\n          Title: CONTROLTITLE[this.props.language].growthDir,\r\n          defValue: //this.props.liabilityCurr.growthDir,\r\n          getListItemNameFromKey(\r\n            GROWTHDIR,\r\n            this.props.liabilityCurr.growthDirKey,\r\n            this.props.language\r\n          ),\r\n          Values: growthDirValues,\r\n        },\r\n      ],\r\n    };\r\n    //this.dataProjection = [];\r\n    this.dataColTitles = [];\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (\r\n      nextProps.liabilityCurr !== this.props.liabilityCurr ||\r\n      nextProps.id !== this.props.id ||\r\n      nextProps.liabilitysNo !== this.props.liabilitysNo\r\n    ) {\r\n      // console.log(nextProps.liabilityCurr.liabTypeKey)\r\n      this.dataValues.DD[0].defValue = getListItemNameFromKey(\r\n        LIABILITIES,\r\n        nextProps.liabilityCurr.liabTypeKey,\r\n        this.props.language\r\n      );\r\n      this.dataValues.DD[1].defValue = getListItemNameFromKey(\r\n        OWNERSHIP,\r\n        nextProps.liabilityCurr.ownerKey,\r\n        this.props.language\r\n      );\r\n      this.dataValues.DD[2].defValue = // nextProps.liabilityCurr.growthDir;\r\n      getListItemNameFromKey(\r\n        GROWTHDIR,\r\n        nextProps.liabilityCurr.growthDirKey,\r\n        this.props.language\r\n      );\r\n      \r\n      this.setState({ description: nextProps.liabilityCurr.description });\r\n\r\n    }\r\n    if (nextProps.probate !== this.props.probate)\r\n    {\r\n      this.setLiabData(nextProps.liabilityCurr,nextProps.probate)\r\n    }\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    this.setState({ description: this.props.liabilityCurr.description });\r\n  };\r\n\r\n  handleDoRemove = (id) => {\r\n    this.props.handleRemoveLiability(id);\r\n  };\r\n\r\n  handleDoAdd = () => {\r\n    var liabNo =\r\n      this.props.liabilitysNo > this.dataValues.DD[0].Values.length - 1\r\n        ? this.dataValues.DD[0].Values.length - 1\r\n        : this.props.liabilitysNo;\r\n\r\n    var liabNext = this.dataValues.DD[0].Values[liabNo].label;\r\n    const liabTypeKey = getListItemKeyFromName(LIABILITIES, liabNext);\r\n\r\n    let liability = {\r\n      id: this.props.liabilitysNo + 1,\r\n      //Type: liabNext,\r\n      liabTypeKey: liabTypeKey,\r\n      description : \"\",\r\n      ownerKey: OWNERSHIP.CLIENT.Key,\r\n      currValue: 0,\r\n      //growthDir: GROWTHDIR[this.props.language].Values[0],\r\n      growthDirKey: GROWTHDIR.GROWS.Key,\r\n      growth: 0,\r\n      repay: 0,\r\n      exposureDur: 99,\r\n      assetTaxLiabID: 0,\r\n      assetTaxLiabProj: [],\r\n    };\r\n\r\n    liability = this.setLiabilityValuesToDefault(liability);\r\n\r\n    this.props.handleAddLiability(liability); //liabNext);\r\n  };\r\n\r\n  updateDDown = (id, selection) => {\r\n    let liability = {\r\n      id: this.props.liabilityCurr.id,\r\n      //Type: this.props.liabilityCurr.Type,\r\n      liabTypeKey: this.props.liabilityCurr.liabTypeKey,\r\n      ownerKey: this.props.liabilityCurr.ownerKey,\r\n      currValue: this.props.liabilityCurr.currValue,\r\n      growth: this.props.liabilityCurr.growth,\r\n      //growthDir: this.props.liabilityCurr.growthDir,\r\n      growthDirKey: this.props.liabilityCurr.growthDirKey,\r\n      exposureDur: this.props.liabilityCurr.exposureDur,\r\n      repay: this.props.liabilityCurr.repay,\r\n    };\r\n    if (id === 1) {\r\n      //liability.Type = selection;\r\n      liability.liabTypeKey = getListItemKeyFromName(LIABILITIES, selection);\r\n    } else if (id === 2) {\r\n      liability.ownerKey = getListItemKeyFromName(OWNERSHIP, selection);\r\n    } else if (id === 3) {\r\n      //liability.growthDir = selection;\r\n      liability.growthDirKey = getListItemKeyFromName(GROWTHDIR, selection);;\r\n    }\r\n\r\n    liability = this.setLiabilityValuesToDefault(liability);\r\n\r\n    this.props.handleUpdate(liability);\r\n    if(this.state.displaySreadsheet) this.setLiabData(liability);// this.handleClick()\r\n  };\r\n\r\n  updateDesc = (evt) => {\r\n    //console.log(evt.target.value);\r\n    let liab =  JSON.parse(JSON.stringify(this.props.liabilityCurr)); \r\n    liab.description = evt.target.value;\r\n    this.props.handleUpdate(liab);\r\n  };\r\n\r\n  handleUpdateInput = (id, value) => {\r\n    let liability = {\r\n      id: this.props.liabilityCurr.id,\r\n      //Type: this.props.liabilityCurr.Type,\r\n      liabTypeKey: this.props.liabilityCurr.liabTypeKey,\r\n      ownerKey: this.props.liabilityCurr.ownerKey,\r\n      currValue: this.props.liabilityCurr.currValue,\r\n      growth: this.props.liabilityCurr.growth,\r\n      exposureDur: this.props.liabilityCurr.exposureDur,\r\n      repay: this.props.liabilityCurr.repay,\r\n      //growthDir: this.props.liabilityCurr.growthDir,\r\n      growthDirKey: this.props.liabilityCurr.growthDirKey,\r\n    };\r\n\r\n    let changed = false;\r\n    const lang = this.props.language;\r\n    const valueClean = cleanFormat(value,lang);\r\n    const valueCleanInt = parseInt(valueClean);\r\n   \r\n    if (id === 1) {\r\n      changed =\r\n        liability.currValue !== valueCleanInt ? true : false;\r\n      liability.currValue = valueCleanInt;\r\n    } else if (id === 2) {\r\n      changed =\r\n        liability.growth !==\r\n        parseInt(100 * valueClean) / 100\r\n          ? true\r\n          : false;\r\n      liability.growth =\r\n        parseInt(100 * valueClean) / 100;\r\n    } else if (id === 3) {\r\n      changed = liability.exposureDur !== parseInt(value) ? true : false;\r\n      liability.exposureDur = parseInt(value);\r\n    } else if (id === 5) {\r\n      changed = liability.description !== value ? true : false;\r\n      liability.description = value;\r\n    }\r\n    if (id === 4) {\r\n      changed = liability.repay !== valueCleanInt ? true : false;\r\n      liability.repay = valueCleanInt;\r\n    }\r\n\r\n    if (changed){\r\n      \r\n      this.props.handleUpdate(liability);\r\n      if(this.state.displaySreadsheet) this.setLiabData(liability);//  this.handleClick()\r\n      \r\n  }\r\n   // if(!this.state.displaySreadsheet)  this.setState({ loading: this.props.disableAddRemove });\r\n    \r\n  };\r\n\r\n\r\n  setLiabData=(liability,probate)=>{\r\n    this.setState({ loading: true});\r\n    let dataProjection=[]\r\n  const lang=this.props.language  \r\n  const loan =\r\n  liability.liabTypeKey ===\r\n      LIABILITIES.OUTSTANDING_LOANS.Key ||\r\n      liability.liabTypeKey ===\r\n      LIABILITIES.MORTGAGE_REDEMPTION.Key;\r\n\r\n  if (loan)\r\n    this.dataColTitles = [\r\n      CONTROLTITLELIABS[lang].year,\r\n      CONTROLTITLELIABS[lang].repay,\r\n      CONTROLTITLELIABS[lang].projValue,\r\n      //   \"Tax Credit\"\r\n    ];\r\n  else\r\n    this.dataColTitles = [\r\n      CONTROLTITLELIABS[lang].year,\r\n      CONTROLTITLELIABS[lang].projValue,\r\n      //   \"Tax Credit\"\r\n    ];\r\n\r\n  //console.log(this.props.probate)\r\n  let liabs = getProjectedLiability(liability,probate);\r\n\r\n  let years = [];\r\n  let repays = [];\r\n  let i;\r\n  let repay;\r\n  let year;\r\n  for (i = 0; i < liability.exposureDur + 1; ++i) {\r\n    repay=i>0?liability.repay:0;\r\n    year=i>0?i: ASSET_YEAR_TODAY[lang].today;;\r\n    years.push(year);\r\n    repays.push(repay);\r\n  }\r\n\r\n  let taxCredits = [];\r\n  dataProjection[0] = years;\r\n  if (loan) {\r\n    dataProjection[1] = arrayFormatMoney(repays, lang, 0);\r\n    dataProjection[2] = arrayFormatMoney(liabs, lang, 0);\r\n  } else dataProjection[1] = arrayFormatMoney(liabs, lang, 0);\r\n\r\n  this.setState({dataProjection:dataProjection, loading: false});\r\n    \r\n}\r\n\r\n\r\n  handleClick = () => {\r\n    if(!this.props.disableAddRemove)\r\n    {\r\n    this.setState({ loading: true });\r\n    \r\n    this.setLiabData(this.props.liabilityCurr, this.props.probate)\r\n    /* const loan =\r\n      this.props.liabilityCurr.liabTypeKey ===\r\n        LIABILITIES.OUTSTANDING_LOANS.Key ||\r\n      this.props.liabilityCurr.liabTypeKey ===\r\n        LIABILITIES.MORTGAGE_REDEMPTION.Key;\r\n\r\n    if (loan)\r\n      this.dataColTitles = [\r\n        \"Year\",\r\n        \"Repayment\",\r\n        \"Projected Value\",\r\n        //   \"Tax Credit\"\r\n      ];\r\n    else\r\n      this.dataColTitles = [\r\n        \"Year\",\r\n        \"Projected Value\",\r\n        //   \"Tax Credit\"\r\n      ];\r\n\r\n    const lang = this.props.language;\r\n    let liabs = getProjectedLiability(this.props.liabilityCurr, lang);\r\n\r\n    let years = [];\r\n    let repays = [];\r\n    let i;\r\n    let repay;\r\n    let year;\r\n    for (i = 0; i < this.props.liabilityCurr.exposureDur + 1; ++i) {\r\n      repay=i>0?this.props.liabilityCurr.repay:0;\r\n      year=i>0?i:\"today\";\r\n      years.push(year);\r\n      repays.push(repay);\r\n    }\r\n\r\n    let taxCredits = [];\r\n    this.dataProjection[0] = years;\r\n    if (loan) {\r\n      this.dataProjection[1] = arrayFormatMoney(repays, lang, 0);\r\n      this.dataProjection[2] = arrayFormatMoney(liabs, lang, 0);\r\n    } else this.dataProjection[1] = arrayFormatMoney(liabs, lang, 0);\r\n */\r\n    //this.dataProjection[3] = taxCredits;\r\n\r\n    // console.log(this.dataProjection);\r\n\r\n    this.setState((prevState) => {\r\n      let display = prevState.displaySreadsheet;\r\n      return { displaySreadsheet: !display, loading: this.props.disableAddRemove };\r\n      \r\n    });\r\n  }\r\n  };\r\n  //});\r\n  //}\r\n\r\n  \r\n  setLiabilityValuesToDefault = (liability) => {\r\n    if (liability.liabTypeKey === LIABILITIES.OUTSTANDING_LOANS.Key) {\r\n      liability.exposureDur = 10;\r\n    } else if (liability.liabTypeKey === LIABILITIES.MORTGAGE_REDEMPTION.Key) {\r\n      liability.exposureDur = 25;\r\n    }\r\n\r\n    return liability;\r\n  };\r\n\r\n  render() {\r\n\r\n    //const growthSel = GROWTHDIR[this.props.language].Values.indexOf(\r\n    //  this.props.liabilityCurr.growthDir );\r\n      const growthSel = this.props.liabilityCurr.growthDirKey===GROWTHDIR.GROWS.Key?GROWTHDIR.GROWS.ID:GROWTHDIR.REDUCES.ID; \r\n   \r\n\r\n    const loanOrTax =\r\n      this.props.liabilityCurr.liabTypeKey ===\r\n        LIABILITIES.OUTSTANDING_LOANS.Key ||\r\n      this.props.liabilityCurr.liabTypeKey ===\r\n        LIABILITIES.MORTGAGE_REDEMPTION.Key ||\r\n      this.props.liabilityCurr.liabTypeKey ===\r\n        LIABILITIES.CLIENT_TAX_LIABILITY.Key;\r\n\r\n    const probate=     this.props.liabilityCurr.liabTypeKey ===   LIABILITIES.PROBATE.Key\r\n    \r\n    const showGrowth =\r\n    !APPLET_INA &&\r\n      !loanOrTax && !probate && \r\n      this.dataValues.DD.map((dd) => dd.id === 3);\r\n    const showRepay =\r\n    !APPLET_INA &&\r\n      (this.props.liabilityCurr.liabTypeKey ===\r\n        LIABILITIES.MORTGAGE_REDEMPTION.Key ||\r\n        this.props.liabilityCurr.liabTypeKey ===\r\n          LIABILITIES.OUTSTANDING_LOANS.Key);\r\n\r\n    const showExposure =\r\n    !APPLET_INA && !probate && \r\n      !(\r\n        this.props.liabilityCurr.liabTypeKey ===\r\n        LIABILITIES.CLIENT_TAX_LIABILITY.Key\r\n      );\r\n\r\n    // console.log(this.props.liabilityCurr.id,this.props.liabilityCurr.liabTypeKey,this.props.liabilitysNo)\r\n\r\n\r\n    if (this.state.loading === true && this.props.disableAddRemove=== true) {\r\n      return (\r\n       \"\"\r\n      );\r\n    } else {\r\n    return (\r\n      <div className=\"inputRow\">\r\n        {this.dataValues.DD.map(\r\n          (\r\n            dd // don't show ownership dosen't matter \r\n          ) =>\r\n            dd.id < 3 &&\r\n             !(dd.id === 2) &&  ( \r\n              <DropDown\r\n                key={dd.id}\r\n                id={dd.id}\r\n                Count={this.props.liabilitysNo}\r\n                Title={dd.Title}\r\n                infoIcon={\r\n                  dd.Title === CONTROLTITLE[this.props.language].type && this.props.liabilityCurr.liabTypeKey===LIABILITIES.PROBATE.Key\r\n                    ? getInfoIconProbate(this.props.language)\r\n                    : undefined\r\n                }\r\n                width={DROPDOWN_WIDE}\r\n                defValue={dd.defValue}\r\n                Values={dd.Values}\r\n                updateDDown={this.updateDDown}\r\n              />\r\n            )\r\n        )}\r\n         <div className=\"dropDown inputDiv\">\r\n                <div className=\"controlTitle\">\r\n                  {CONTROLTITLE[this.props.language].desc}\r\n                  {this.props.language===\"en\"?<Info infoIcon={getInfoIconLiabDesc(this.props.language)} />:undefined}{\" \"}\r\n    \r\n                </div>\r\n                <input\r\n                  key={\"desc\"}\r\n                  id={5}\r\n                  \r\n                  className=\"inputField  textareaAssetName\"\r\n                  value={this.state.description}\r\n                  onClick={this.select}\r\n                  type=\"text\"\r\n                  onChange={(evt) =>\r\n                    this.setState({ description: evt.target.value })\r\n                  }\r\n                  onBlur={(evt) => this.updateDesc(evt)}\r\n                />\r\n                \r\n              </div>\r\n\r\n        <InputField\r\n          inputName={CONTROLTITLE[this.props.language].amount}\r\n          id={1}\r\n          format={2}\r\n          Count={this.props.liabilitysNo}\r\n          language={this.props.language}\r\n          readOnly={probate}\r\n          inputValue={this.props.liabilityCurr.currValue}\r\n          handleUpdateInput={this.handleUpdateInput}\r\n        />\r\n\r\n        {showRepay && (\r\n          <InputField\r\n            inputName={CONTROLTITLE[this.props.language].repay}\r\n            id={4}\r\n            format={2}\r\n            Count={this.props.liabilitysNo}\r\n            language={this.props.language}\r\n            inputValue={this.props.liabilityCurr.repay}\r\n            handleUpdateInput={this.handleUpdateInput}\r\n          />\r\n        )}\r\n\r\n        {!APPLET_INA  &&\r\n          !loanOrTax && !probate && \r\n          this.dataValues.DD.map(\r\n            (dd) =>\r\n              dd.id === 3 && (\r\n                <DropDown\r\n                  key={dd.id}\r\n                  id={dd.id}\r\n                  Count={this.props.liabilitysNo}\r\n                  Title={dd.Title}\r\n                  defValue={dd.defValue}\r\n                  Values={dd.Values}\r\n                  updateDDown={this.updateDDown}\r\n                />\r\n              )\r\n          )}\r\n        {!APPLET_INA  && !loanOrTax && !probate &&  (\r\n          <InputField\r\n            inputName={\r\n              growthSel === 0\r\n                ? CONTROLTITLE[this.props.language].growth\r\n                : CONTROLTITLE[this.props.language].changeRate\r\n            }\r\n            id={2}\r\n            format={3}\r\n            Count={this.props.liabilitysNo}\r\n            language={this.props.language}\r\n            inputValue={Math.round(10000*this.props.liabilityCurr.growth)/10000}\r\n            handleUpdateInput={this.handleUpdateInput}\r\n          />\r\n        )}\r\n\r\n        {showExposure && (\r\n          <InputField\r\n            inputName={CONTROLTITLE[this.props.language].exposureDur}\r\n            id={3}\r\n            format={1}\r\n            Count={this.props.liabilitysNo}\r\n            language={this.props.language}\r\n            inputValue={this.props.liabilityCurr.exposureDur}\r\n            handleUpdateInput={this.handleUpdateInput}\r\n          />\r\n        )}\r\n\r\n        {!APPLET_INA  && (\r\n          <img\r\n            className=\"iconMore\"\r\n            onClick={this.handleClick}\r\n            id=\"gridOn\"\r\n            alt=\"ll\"\r\n            src={\r\n              this.state.displaySreadsheet === true\r\n                ? require(\"../images/gridOff.png\")\r\n                : require(\"../images/gridOn.png\")\r\n            }\r\n          />\r\n        )}\r\n\r\n        <AddRemove\r\n          currentID={this.props.liabilityCurr.id}\r\n          minComps={0}\r\n          id={this.props.liabilityCurr.liabTypeKey}\r\n          numberComps={this.props.liabilitysNo}\r\n          handleDoAdd={this.handleDoAdd}\r\n          handleDoRemove={this.handleDoRemove}\r\n          disabled={this.props.disableAddRemove}\r\n        />\r\n        {/*isMobileDevice() &&\r\n        this.props.liabilityCurr.id < this.props.liabilitysNo ? (\r\n          <hr className=\"ppi2\" />\r\n        ) : (\r\n          \"\"\r\n        )*/}\r\n        {this.state.displaySreadsheet === true && (\r\n          <div style={{ clear: \"both\", float: \"left\", width: \"60%\" }}>\r\n            <DataTable\r\n              dataColTitles={this.dataColTitles}\r\n              dataProjection={this.state.dataProjection}\r\n              gridTitle={\r\n                getListItemNameFromKey(\r\n                  LIABILITIES,\r\n                  this.props.liabilityCurr.liabTypeKey,\r\n                  this.props.language\r\n                ) + \" Projection\"\r\n              }\r\n              language={this.props.language}\r\n            />\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { DropDown } from \"./DropDown\";\r\nimport { AddRemove } from \"./AddRemove\";\r\nimport { cleanFormat, getListToShowByOrder, getDisableValues } from \"../utils/helper\";\r\n\r\nimport { copyFromAnotherObject }  from \"../data/createDefaults\";\r\nimport {\r\n  CONTROLTITLE,\r\n  INCOMESOURCES,\r\n  DEFAULT_DIVIDEND_TAX_RATE,\r\n} from \"../definitions/generalDefinitions\";\r\n//import { InputField4 } from './inputField4';\r\nimport { InputField } from \"./inputField\";\r\nimport {\r\n  isMobileDevice,\r\n  getListItemNameFromKey,\r\n  getListItemKeyFromName,\r\n} from \"../utils/helper\";\r\nimport { DROPDOWN_WIDE } from \"../definitions/generalDefinitions\";\r\nimport {\r\n  getInfoIconSourcesGov,\r\n  getInfoIconAssetsYr0,\r\n  getInfoIconInflationGrowth\r\n} from \"../definitions/infoIconsDefinitions\";\r\n\r\nexport class Source extends Component {\r\n  displayName = Source.name;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    let i;\r\n    let typeValues = [];\r\n    const listSourcesToShow = getListToShowByOrder(INCOMESOURCES);\r\n    for (i = 0; i < listSourcesToShow.length; ++i) {\r\n      {\r\n        typeValues.push({\r\n          label: listSourcesToShow[i].value[this.props.language],\r\n          value: i + 1,\r\n        });\r\n      }\r\n    }\r\n\r\n    /* \r\n    for (i = 0; i <= 5; ++i) {\r\n      typeValues.push({\r\n        label: INCOMESOURCES[this.props.language].Values[i],\r\n        value: i + 1\r\n      });\r\n    }\r\n */\r\n    // console.log(this.props.sourceCurr)\r\n    this.state = {};\r\n    this.dataValues = {\r\n      DD: [\r\n        {\r\n          id: 1,\r\n          Title: CONTROLTITLE[this.props.language].type,\r\n          defValue: getListItemNameFromKey(\r\n            INCOMESOURCES,\r\n            this.props.sourceCurr.sourceTypeKey,\r\n            this.props.language\r\n          ),\r\n          disableOptionValue: getDisableValues(INCOMESOURCES),\r\n          Values: typeValues,\r\n        },\r\n      ],\r\n    };\r\n    this.dataValues.DD[0].disableOptionValue[INCOMESOURCES.GOV_DEATH_BENEFIT.ID]=true;\r\n    this.dataValues.DD[0].disableOptionValue[INCOMESOURCES.GOV_SURVIVORS_PENSION.ID]=true;\r\n    this.dataValues.DD[0].disableOptionValue[INCOMESOURCES.GOV_ORPHANS_BENEFIT.ID]=true;\r\n\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (\r\n      nextProps.sourceCurr !== this.props.sourceCurr ||\r\n      nextProps.id !== this.props.id ||\r\n      nextProps.sourcesNo !== this.props.sourcesNo\r\n    ) {\r\n      // console.log(nextProps.sourceCurr.sourceTypeKey)\r\n      this.dataValues.DD[0].defValue = getListItemNameFromKey(\r\n        INCOMESOURCES,\r\n        nextProps.sourceCurr.sourceTypeKey,\r\n        this.props.language\r\n      );\r\n    }\r\n  }\r\n\r\n  handleDoRemove = (id) => {\r\n    if (this.props.disableAddRemove === false) {\r\n      this.props.handleRemoveSource(id);\r\n    }  \r\n  };\r\n\r\n  isSourceGovNonOrphanBenefit = (key) => {\r\n    if (\r\n      key === INCOMESOURCES.GOV_SURVIVORS_PENSION.Key ||\r\n      key === INCOMESOURCES.GOV_DEATH_BENEFIT.Key\r\n    )\r\n      return true;\r\n    else return false;\r\n  };\r\n\r\n  isDividendIncome = (key) => {\r\n    if (key === INCOMESOURCES.DIVIDEND_INCOME.Key) return true;\r\n    else return false;\r\n  };\r\n  isSourceGovOrphansBenefit = (key) => {\r\n    if (key === INCOMESOURCES.GOV_ORPHANS_BENEFIT.Key) return true;\r\n    else return false;\r\n  };\r\n\r\n  handleDoAdd = () => {\r\n    // no gov stuff\r\n    if (this.props.disableAddRemove === false) {\r\n    \r\n    var sourceNo =\r\n      this.props.sourcesNo > this.dataValues.DD[0].Values.length - 1\r\n        ? this.dataValues.DD[0].Values.length - 1\r\n        : this.props.sourcesNo;\r\n    //if(this.props.includeGovOrphanBenefit===false)\r\n    //  sourceNo +=1;\r\n    if (sourceNo > this.dataValues.DD[0].Values.length - 1) sourceNo -= 1;\r\n\r\n    let sourceNextKey = getListItemKeyFromName(\r\n      INCOMESOURCES,\r\n      this.dataValues.DD[0].Values[sourceNo].label\r\n    );\r\n\r\n    // dont add gov stuff unless has child && orphanben\r\n    while (\r\n      sourceNextKey === INCOMESOURCES.GOV_DEATH_BENEFIT.Key ||\r\n      sourceNextKey === INCOMESOURCES.GOV_SURVIVORS_PENSION.Key ||\r\n      (sourceNextKey === INCOMESOURCES.GOV_ORPHANS_BENEFIT.Key &&\r\n        this.props.includeGovOrphanBenefit === false)\r\n    ) {\r\n      sourceNo += 1;\r\n      sourceNextKey = getListItemKeyFromName(\r\n        INCOMESOURCES,\r\n        this.dataValues.DD[0].Values[sourceNo].label\r\n      );\r\n    }\r\n\r\n    // dont repeat\r\n    while (\r\n      sourceNextKey === this.props.sourceCurr.sourceTypeKey &&\r\n      this.props.sourceCurr.sourceTypeKey !== INCOMESOURCES.OTHER.Key\r\n    ) {\r\n      sourceNo += 1;\r\n      sourceNextKey = getListItemKeyFromName(\r\n        INCOMESOURCES,\r\n        this.dataValues.DD[0].Values[sourceNo].label\r\n      );\r\n    }\r\n\r\n    const source = {\r\n      id: this.props.sourcesNo + 1,\r\n      sourceTypeKey: sourceNextKey,\r\n      amount: 0,\r\n      startYear: 0,\r\n      // set others based on INA other values tax infl\r\n      // duration, growthRate,ownerID,taxRate depends on clients\r\n\r\n    };\r\n    if (sourceNextKey === INCOMESOURCES.DIVIDEND_INCOME.Key)\r\n      source.taxRate = DEFAULT_DIVIDEND_TAX_RATE;\r\n    // console.log(source)\r\n    this.props.handleAddSource(source);\r\n  }\r\n  };\r\n\r\n  updateDDown = (id, selection) => {\r\n    let source = {\r\n      id: this.props.sourceCurr.id,\r\n      //Type: this.props.Type,\r\n      sourceTypeKey: this.props.sourceCurr.sourceTypeKey,\r\n      amount: this.props.sourceCurr.amount,\r\n      startYear: this.props.sourceCurr.startYear,\r\n      duration: this.props.sourceCurr.duration,\r\n      taxRate: this.props.sourceCurr.taxRate,\r\n      annualGrowth: this.props.sourceCurr.annualGrowth,\r\n    };\r\n\r\n    if (id === 1)\r\n      source.sourceTypeKey = getListItemKeyFromName(INCOMESOURCES, selection);\r\n    else if (id === 2) source.ownerID = selection;\r\n    this.props.handleUpdate(source);\r\n  };\r\n\r\n  handleUpdateInput = (id, value) => {\r\n    let  s1 = {\r\n      id: this.props.sourceCurr.id,\r\n      //Type: this.props.Type,\r\n      sourceTypeKey: this.props.sourceCurr.sourceTypeKey,\r\n      amount: this.props.sourceCurr.amount,\r\n      startYear: this.props.sourceCurr.startYear,\r\n      duration: this.props.sourceCurr.duration,\r\n      ownerID: this.props.sourceCurr.ownerID,\r\n      taxRate: this.props.sourceCurr.taxRate,\r\n      annualGrowth: this.props.sourceCurr.annualGrowth,\r\n    };\r\n\r\n//    s1 =copyFromAnotherObject(this.props.sourceCurr)\r\n\r\n    let changed = false;\r\n    const lang = this.props.language;\r\n    const valueClean = cleanFormat(value,lang);\r\n    const valueCleanInt = parseInt(valueClean);\r\n\r\n    if (id === 1) {\r\n      changed = s1.amount !== valueCleanInt ? true : false;\r\n      s1.amount = valueCleanInt;\r\n    } else if (id === 2) {\r\n      changed = s1.startYear !== value ? true : false;\r\n      s1.startYear = value;\r\n    } else if (id === 3) {\r\n      changed = s1.duration !== value ? true : false;\r\n      s1.duration = value;\r\n    } else if (id === 4) {\r\n      changed =\r\n        s1.taxRate !==\r\n        parseInt(100 * valueClean) / 100\r\n          ? true\r\n          : false;\r\n      s1.taxRate =\r\n        parseInt(100 * valueClean) / 100;\r\n    } else if (id === 5) {\r\n      changed =\r\n        s1.annualGrowth !==\r\n        parseInt(100 * valueClean) / 100\r\n          ? true\r\n          : false;\r\n      s1.annualGrowth =\r\n        parseInt(100 * valueClean) / 100;\r\n    }\r\n    if (changed){\r\n       this.props.handleUpdate(s1);\r\n       this.setState({ loading: this.props.disableAddRemove });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const gov = this.isSourceGovNonOrphanBenefit(\r\n      this.props.sourceCurr.sourceTypeKey\r\n    );\r\n    const govOrphan = this.isSourceGovOrphansBenefit(\r\n      this.props.sourceCurr.sourceTypeKey\r\n    );\r\n    const dividend = this.isDividendIncome(this.props.sourceCurr.sourceTypeKey);\r\n    const RRIF = this.props.sourceCurr.sourceTypeKey === INCOMESOURCES.RRIF.Key;\r\n    // console.log(this.props.sourceCurr,govOrphan,this.props.sourceCurr.maxOrphan)\r\n    \r\n    \r\n    let unlistedGreyedOption;\r\n    if (RRIF) {\r\n      unlistedGreyedOption = [];\r\n      unlistedGreyedOption.push({\r\n        label: INCOMESOURCES.RRIF.value[this.props.language],\r\n        value: 1,\r\n      });\r\n    }\r\n\r\n    if (this.state.loading === true && this.props.disableAddRemove=== true) {\r\n      return (\r\n       \"\"\r\n      );\r\n    } else {\r\n      return (\r\n      <div className=\"inputRow\">\r\n        {this.dataValues.DD.map((dd) => (\r\n          <DropDown\r\n            key={dd.id}\r\n            id={dd.id}\r\n            Count={this.props.sourcesNo}\r\n            Title={dd.Title}\r\n            // infoIcon={gov && !govOrphan ? getInfoIconSourcesGov(this.props.language): undefined}\r\n            width={DROPDOWN_WIDE}\r\n            language={this.props.language}\r\n            defValue={dd.defValue}\r\n            Values={dd.Values}\r\n            disableOption={dd.disableOptionValue}\r\n            unlistedGreyedOption={unlistedGreyedOption}\r\n            updateDDown={this.updateDDown}\r\n          />\r\n        ))}\r\n        {!RRIF && (\r\n          <InputField\r\n            format={2}\r\n            id={1}\r\n            key=\"amt\"\r\n            inputName={CONTROLTITLE[this.props.language].amountGross}\r\n            readOnly={gov}\r\n            Count={this.props.sourcesNo}\r\n            language={this.props.language}\r\n            infoIcon={\r\n              gov || govOrphan// && !govOrphan\r\n                ? getInfoIconSourcesGov(this.props.language)\r\n                : undefined\r\n            }\r\n            maxValue={govOrphan ? this.props.sourceCurr.maxOrphan : undefined}\r\n            inputValue={this.props.sourceCurr.amount}\r\n            inputTitle={this.props.sourceCurr.id}\r\n            handleUpdateInput={this.handleUpdateInput}\r\n          />\r\n        )}\r\n\r\n        {gov || govOrphan ? (\r\n          \"\"\r\n        ) : (\r\n          <InputField\r\n            format={1}\r\n            id={2}\r\n            inputName={\r\n              RRIF\r\n                ? CONTROLTITLE[this.props.language].RRIFAge\r\n                : CONTROLTITLE[this.props.language].startYear\r\n            }\r\n            Count={this.props.sourcesNo}\r\n            language={this.props.language}\r\n            inputValue={this.props.sourceCurr.startYear}\r\n            infoIcon={getInfoIconAssetsYr0(this.props.language)}\r\n            //infoIcon={RRIF ? getInfoIconSourcesRRIF(this.props.language): undefined}\r\n            readOnly={RRIF}\r\n            inputTitle={this.props.sourceCurr.id}\r\n            handleUpdateInput={this.handleUpdateInput}\r\n          />\r\n        )}\r\n        {gov || RRIF ? (\r\n          \"\"\r\n        ) : (\r\n          <InputField\r\n            format={1}\r\n            id={3}\r\n            inputName={CONTROLTITLE[this.props.language].dur}\r\n            Count={this.props.sourcesNo}\r\n            language={this.props.language}\r\n            inputValue={this.props.sourceCurr.duration}\r\n            maxValue={\r\n              govOrphan ? this.props.sourceCurr.maxOrphanDur : undefined\r\n            }\r\n            inputTitle={this.props.sourceCurr.id}\r\n            handleUpdateInput={this.handleUpdateInput}\r\n          />\r\n        )}\r\n\r\n        {dividend && (\r\n          <InputField\r\n            id={4}\r\n            inputName={CONTROLTITLE[this.props.language].dividendTaxRate}\r\n            format={3}\r\n            Count={this.props.sourcesNo}\r\n            language={this.props.language}\r\n            //   infoIcon={getInfoIconDividend(this.props.language)}\r\n            inputValue={this.props.sourceCurr.taxRate}\r\n            inputTitle={this.props.sourceCurr.id}\r\n            handleUpdateInput={this.handleUpdateInput}\r\n          />\r\n        )}\r\n\r\n        <AddRemove\r\n          currentID={this.props.sourceCurr.id}\r\n          numberComps={this.props.sourcesNo}\r\n          handleDoAdd={this.handleDoAdd}\r\n          handleDoRemove={this.handleDoRemove}\r\n          disabled={this.props.disableAddRemove}\r\n          disabledRemove={gov}\r\n        />\r\n        {/* {isMobileDevice() && this.props.sourceCurr.id < this.props.sourcesNo ? (\r\n          <hr className=\"ppi2\" />\r\n        ) : (\r\n          \"\"\r\n        )} */}\r\n      </div>\r\n    );\r\n      }\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { DropDown } from \"./DropDown\";\r\nimport { AddRemove } from \"./AddRemove\";\r\nimport { cleanFormat, getListItemKeyFromName } from \"../utils/helper\";\r\nimport {\r\n  MESSAGES,\r\n  CONTROLTITLE,\r\n  INCOMENEEDS,\r\n  DROPDOWN_WIDE,\r\n} from \"../definitions/generalDefinitions\";\r\n//import { InputField4 } from './inputField4';\r\nimport { InputField } from \"./inputField\";\r\nimport {\r\n  isMobileDevice,\r\n  getListToShowByOrder,\r\n  getListItemNameFromKey,\r\n} from \"../utils/helper\";\r\nimport {\r\n  getInfoSalaryPercent,\r\n  getInfoIconAssetsYr0,\r\n} from \"../definitions/infoIconsDefinitions\";\r\n\r\nexport class Need extends Component {\r\n  displayName = Need.name;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    let i;\r\n    let typeValues = [];\r\n    const listNeedsToShow = getListToShowByOrder(INCOMENEEDS);\r\n    for (i = 0; i < listNeedsToShow.length; ++i) {\r\n      typeValues.push({\r\n        label: listNeedsToShow[i].value[this.props.language],\r\n        value: i + 1,\r\n      });\r\n    }\r\n    this.state = {\r\n      loading: false,\r\n    };\r\n    this.dataValues = {\r\n      DD: [\r\n        {\r\n          id: 1,\r\n          Title: CONTROLTITLE[this.props.language].type,\r\n          defValue: getListItemNameFromKey(\r\n            INCOMENEEDS,\r\n            this.props.needCurr.needTypeKey,\r\n            this.props.language\r\n          ),\r\n          Values: typeValues,\r\n        },\r\n      ],\r\n    };\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (\r\n      nextProps.needCurr !== this.props.needCurr ||\r\n      nextProps.id !== this.props.id ||\r\n      nextProps.needsNo !== this.props.needsNo\r\n    ) {\r\n      this.dataValues.DD[0].defValue = getListItemNameFromKey(\r\n        INCOMENEEDS,\r\n        nextProps.needCurr.needTypeKey,\r\n        this.props.language\r\n      );\r\n    }\r\n  }\r\n\r\n  handleDoRemove = (id) => {\r\n//    if (this.props.disableAddRemove === false) {\r\n      this.props.handleRemoveNeed(id);\r\n //   }\r\n  };\r\n\r\n  handleDoAdd = () => {\r\n //   if (this.props.disableAddRemove === false) {\r\n\r\n      let needNo =\r\n      this.props.needsNo > this.dataValues.DD[0].Values.length - 1\r\n        ? this.dataValues.DD[0].Values.length - 1\r\n        : this.props.needsNo-1; // e % of income by default start from there\r\n\r\n    if (needNo > this.dataValues.DD[0].Values.length - 1) needNo -= 1\r\n    let needNext = this.dataValues.DD[0].Values[needNo].label;\r\n\r\n    const startYear = 0; //this.props.startYear\r\n    const dur = 1; //this.props.duration;\r\n\r\n    this.props.handleAddNeed(\r\n      getListItemKeyFromName(INCOMENEEDS, needNext),\r\n      startYear,\r\n      dur\r\n    );\r\n//    }\r\n  };\r\n\r\n\r\n\r\n  updateDDown = (id, selection) => {\r\n    let need = {\r\n      id: this.props.id,\r\n      needTypeKey: this.props.needCurr.needTypeKey,\r\n\r\n      Percent: this.props.needCurr.Percent,\r\n      amount: this.props.needCurr.amount,\r\n      startYear: this.props.needCurr.startYear,\r\n      duration: this.props.needCurr.duration,\r\n    };\r\n\r\n    if (id === 1)\r\n      need.needTypeKey = getListItemKeyFromName(INCOMENEEDS, selection);\r\n    else if (id === 2) need.Owner = selection;\r\n    // console.log(need)\r\n    this.props.handleUpdate(need);\r\n  };\r\n\r\n  handleUpdateInput = (id, value) => {\r\n    \r\n    let need = {\r\n      id: this.props.id,\r\n      needTypeKey: this.props.needCurr.needTypeKey,\r\n      Percent: this.props.needCurr.Percent,\r\n      amount: this.props.needCurr.amount,\r\n      startYear: this.props.needCurr.startYear,\r\n      duration: this.props.needCurr.duration,\r\n    };\r\n\r\n    let changed = false;\r\n    const lang = this.props.language;\r\n    const valueClean = cleanFormat(value,lang);\r\n    const valueCleanInt = parseInt(valueClean);\r\n   \r\n    if (id === 1) {\r\n      changed = need.amount !== valueCleanInt ? true : false;\r\n      need.amount = valueCleanInt;\r\n      need.Percent = //100*need.amount/this.props.afterTaxTotalIncome\r\n        (parseInt(1000000*need.amount / this.props.afterTaxTotalIncome)/10000).toFixed(2);\r\n     } else if (id === 2) {\r\n      changed = need.startYear !== value ? true : false;\r\n      need.startYear = value;\r\n    } else if (id === 3) {\r\n      changed = need.duration !== value ? true : false;\r\n      need.duration = value;\r\n    } else if (id === 4) {\r\n      changed =\r\n        need.Percent !==\r\n        parseInt(100 * valueClean) / 100\r\n          ? true\r\n          : false;\r\n      need.Percent = parseFloat(valueClean);\r\n    }\r\n     if (changed) {\r\n       this.props.handleUpdate(need);\r\n       //this.setState({ loading: this.props.disableAddRemove });\r\n     }\r\n  };\r\n\r\n  render() {\r\n    let rOnly =\r\n      this.props.needCurr.needTypeKey === INCOMENEEDS.PERCET_OF_INCOME.Key;\r\n    rOnly = false;\r\n    const percentN =\r\n      this.props.needCurr.needTypeKey === INCOMENEEDS.PERCET_OF_INCOME.Key;\r\n    let divStyleClass = \"dropDown inputDiv\";\r\n    divStyleClass += this.props.language === \"fr\" ? \" inputDivFrench\" : \"\";\r\n\r\n     if (this.state.loading === true && this.props.disableAddRemove=== true) {\r\n      return (\r\n       \"\"\r\n      );\r\n    } else {\r\n    return (\r\n      <div className=\"inputRow\">\r\n        {this.dataValues.DD.map((dd) => (\r\n          <DropDown\r\n            key={dd.id}\r\n            id={dd.id}\r\n            Count={this.props.needsNo}\r\n            disable={this.props.needCurr.duration === 100}\r\n            Title={dd.Title}\r\n            defValue={dd.defValue}\r\n            width={DROPDOWN_WIDE}\r\n            Values={dd.Values}\r\n            updateDDown={this.updateDDown}\r\n          />\r\n        ))}\r\n        {percentN ? (\r\n          <InputField\r\n            inputName={CONTROLTITLE[this.props.language].percent}\r\n            format={3}\r\n            id={4}\r\n            Count={this.props.needsNo}\r\n            language={this.props.language}\r\n            inputValue={this.props.needCurr.Percent}\r\n            handleUpdateInput={this.handleUpdateInput}\r\n          />\r\n        ) : (\r\n          \"\"\r\n        )}\r\n        <InputField\r\n          inputName={CONTROLTITLE[this.props.language].afterTaxAmount}\r\n          format={2}\r\n          id={1}\r\n          key={\"am1\"}\r\n          readOnly={rOnly}\r\n          Count={this.props.needsNo}\r\n          language={this.props.language}\r\n          infoIcon={getInfoSalaryPercent(this.props.language)}\r\n          inputValue={this.props.needCurr.amount}\r\n          handleUpdateInput={this.handleUpdateInput}\r\n        />\r\n        <InputField\r\n          format={1}\r\n          id={2}\r\n          inputName={CONTROLTITLE[this.props.language].startYear}\r\n          Count={this.props.needsNo}\r\n          language={this.props.language}\r\n          infoIcon={getInfoIconAssetsYr0(this.props.language)}\r\n          inputValue={this.props.needCurr.startYear}\r\n          handleUpdateInput={this.handleUpdateInput}\r\n        />\r\n        {this.props.needCurr.duration === 100 ? (\r\n          <div className={divStyleClass}>\r\n            <div className=\"controlTitle\">\r\n              {CONTROLTITLE[this.props.language].dur}\r\n            </div>\r\n            <input\r\n              type=\"text\"\r\n              className=\"inputField inputFieldDisabled\"\r\n              isDisabled={true}\r\n              value={MESSAGES[this.props.language].ever}\r\n            />\r\n          </div>\r\n        ) : (\r\n          <InputField\r\n            format={1}\r\n            id={3}\r\n            inputName={CONTROLTITLE[this.props.language].dur}\r\n            Count={this.props.needsNo}\r\n            language={this.props.language}\r\n            inputValue={this.props.needCurr.duration}\r\n            handleUpdateInput={this.handleUpdateInput}\r\n          />\r\n        )}\r\n\r\n        <AddRemove\r\n          currentID={this.props.needCurr.id}\r\n          minComps={0}\r\n          id={this.props.needCurr.needTypeKey}\r\n          numberComps={this.props.needsNo}\r\n          handleDoAdd={this.handleDoAdd}\r\n          handleDoRemove={this.handleDoRemove}\r\n          disabled={this.props.disableAddRemove}\r\n        />\r\n        {/* {isMobileDevice() && this.props.id < this.props.needsNo ? (\r\n          <hr className=\"ppi2\" />\r\n        ) : (\r\n          \"\"\r\n        )} */}\r\n      </div>\r\n    );\r\n      }\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { DropDown } from \"./DropDown\";\r\n//import { InputField4 } from './inputField4';\r\nimport { InputField } from \"./inputField\";\r\nimport { cleanFormat, getListItemKeyFromName } from \"../utils/helper\";\r\nimport { CONTROLTITLE, PROVINCE } from \"../definitions/generalDefinitions\";\r\nimport { DROPDOWN_WIDE } from \"../definitions/generalDefinitions\";\r\nimport { getListItemNameFromKey, getListToShowByOrder } from \"../utils/helper\";\r\nimport { getInfoIconNotes } from \"../definitions/infoIconsDefinitions\";\r\nimport { Info } from \"./Info\";\r\n\r\nexport class Presentation extends Component {\r\n  displayName = Presentation.name;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    /*     this.state = {\r\n      image: this.props.presentationCurr.adviserLogo\r\n    };\r\n */\r\n\r\n    let i;\r\n    /* let typeValues = [];\r\n    for (i = 0; i <= 9; ++i) {\r\n      typeValues.push({\r\n        label: PROVINCE[this.props.language].Values[i],\r\n        value: i + 1\r\n      });\r\n    } */\r\n\r\n    let typeValues = [];\r\n    const listProvincesToShow = getListToShowByOrder(PROVINCE);\r\n    // console.log(listProvincesToShow)\r\n    for (i = 0; i < listProvincesToShow.length; ++i) {\r\n      typeValues.push({\r\n        label: listProvincesToShow[i].value[this.props.language],\r\n        value: i + 1,\r\n      });\r\n    }\r\n\r\n    this.state = {\r\n      designedFor: \"\",\r\n      designedBy: \"\",\r\n      notes: \"\",\r\n      showSaved:false\r\n    };\r\n    \r\n    this.dataValues = {\r\n      DD: [\r\n        {\r\n          id: 1,\r\n          Title: CONTROLTITLE[this.props.language].province,\r\n          defValue: getListItemNameFromKey(\r\n            PROVINCE,\r\n            this.props.presentationCurr.provinceKey,\r\n            this.props.language\r\n          ),\r\n          Values: typeValues,\r\n        },\r\n      ],\r\n    };\r\n  }\r\n  // unsafe use getDerivedStateFromProps TBD\r\n\r\n  componentDidMount = () => {\r\n    this.setState({\r\n      designedFor: this.props.presentationCurr.designedFor,\r\n      designedBy: this.props.presentationCurr.designedBy,\r\n      notes: this.props.presentationCurr.notes,\r\n    });\r\n  };\r\n  componentWillReceiveProps(nextProps) {\r\n    if (nextProps.presentationCurr !== this.props.presentationCurr) {\r\n      this.dataValues.DD[0].defValue = getListItemNameFromKey(\r\n        PROVINCE,\r\n        nextProps.presentationCurr.provinceKey,\r\n        this.props.language\r\n      );\r\n      //\t\tthis.dataValues.DD[0].Title = CONTROLTITLE[this.props.language].province;\r\n     }\r\n  }\r\n\r\n  /* static getDerivedStateFromProps(nextProps, prevState){\r\n    \r\n    if(nextProps.presentationCurr!==prevState.presentationCurr){\r\n      return {presentationCurr : nextProps.presentationCurr};\r\n    }\r\n    else return null;\r\n  }\r\n\r\n */\r\n\r\n  getNewPresentation = () => {\r\n    return {\r\n      id: this.props.id,\r\n      provinceKey: this.props.presentationCurr.provinceKey,\r\n      invRate: this.props.presentationCurr.invRate,\r\n      inflation: this.props.presentationCurr.inflation,\r\n      taxRate: this.props.presentationCurr.taxRate,\r\n      designedFor: this.props.presentationCurr.designedFor,\r\n      designedBy: this.props.presentationCurr.designedBy,\r\n      notes: this.props.presentationCurr.notes,\r\n      periodOption: this.props.presentationCurr.periodOption,\r\n      language: this.props.presentationCurr.language,\r\n      resultsOption: this.props.presentationCurr.resultsOption,\r\n      adviserLogo: this.props.presentationCurr.adviserLogo,\r\n      appletImage: this.props.presentationCurr.appletImage,\r\n    };\r\n  };\r\n\r\n  updateDDown = (id, selection) => {\r\n    let pres = this.getNewPresentation();\r\n    if (id === 1)\r\n      pres.provinceKey = getListItemKeyFromName(PROVINCE, selection);\r\n    this.props.handleUpdate(pres);\r\n  };\r\n\r\n  handleUpdateInput = (id, value) => {\r\n    let pres = this.getNewPresentation();\r\n    const lang=this.props.language;\r\n    let changed = false;\r\n    const valueClean = cleanFormat(value,lang);\r\n   \r\n    if (id === 1) {\r\n      changed =\r\n        pres.invRate !==\r\n        parseInt(10000 * valueClean) / 10000\r\n          ? true\r\n          : false;\r\n      pres.invRate =\r\n        parseInt(10000 * valueClean) / 10000;\r\n    } else if (id === 2) {\r\n      changed =\r\n        pres.inflation !==\r\n        parseInt(10000 * valueClean) / 10000\r\n          ? true\r\n          : false;\r\n\r\n      pres.inflation =\r\n        parseInt(10000 * valueClean) / 10000;\r\n    } else if (id === 3) {\r\n       changed =\r\n        pres.taxRate !==\r\n        parseInt(10000 * valueClean) / 10000\r\n          ? true\r\n          : false;\r\n\r\n      pres.taxRate =\r\n        parseInt(10000 * valueClean) / 10000;\r\n    }\r\n    //changed = pres.adviserLogo !== this.state.image ? true : false;\r\n \r\n    \r\n    if (changed) this.props.handleUpdate(pres);\r\n  };\r\n\r\n  updateInputValue(id, evt) {\r\n     let pres = this.getNewPresentation();\r\n    let changed = false;\r\n    if (id === 3) {\r\n      changed = pres.designedFor !== evt.target.value;\r\n      pres.designedFor = evt.target.value;\r\n    } else if (id === 4) {\r\n      changed = pres.designedBy !== evt.target.value;\r\n      pres.designedBy = evt.target.value;\r\n    } else if (id === 5) {\r\n      changed = pres.notes !== evt.target.value;\r\n      pres.notes = evt.target.value;\r\n    }\r\n    if (changed) this.props.handleUpdate(pres);\r\n  }\r\n\r\n \r\n\r\n  render() {\r\n     const infoIcon = getInfoIconNotes(this.props.language);\r\n    return (\r\n      <div className=\"inputRow\">\r\n        {this.dataValues.DD.map((dd) => (\r\n          <DropDown\r\n            key={dd.id}\r\n            id={dd.id}\r\n            Count={1}\r\n            Title={dd.Title}\r\n            width={DROPDOWN_WIDE}\r\n            defValue={dd.defValue}\r\n            Values={dd.Values}\r\n            updateDDown={this.updateDDown}\r\n          />\r\n        ))}\r\n        <InputField\r\n          inputName={CONTROLTITLE[this.props.language].taxRate}\r\n          format={3}\r\n          id={3}\r\n          Count={1}\r\n          language={this.props.language}\r\n          inputValue={Math.round(10000*this.props.presentationCurr.taxRate)/10000}\r\n          inputTitle={this.props.id}\r\n          handleUpdateInput={this.handleUpdateInput}\r\n        />\r\n        <InputField\r\n          inputName={CONTROLTITLE[this.props.language].invRate}\r\n          format={3}\r\n          id={1}\r\n          Count={1}\r\n          language={this.props.language}\r\n          inputValue={Math.round(10000*this.props.presentationCurr.invRate)/10000}\r\n          inputTitle={this.props.id}\r\n          handleUpdateInput={this.handleUpdateInput}\r\n        />\r\n        <InputField\r\n          inputName={CONTROLTITLE[this.props.language].inflation}\r\n          format={3}\r\n          id={2}\r\n          Count={1}\r\n          language={this.props.language}\r\n          inputValue={Math.round(10000*this.props.presentationCurr.inflation)/10000}\r\n          inputTitle={this.props.id}\r\n          handleUpdateInput={this.handleUpdateInput}\r\n        />\r\n        <div className=\"dropDown inputText\">\r\n          <span className=\"controlTitle\">\r\n            {CONTROLTITLE[this.props.language].designedFor}\r\n          </span>\r\n          <input\r\n            id={3}\r\n            className=\"inputField Text\"\r\n            value={this.state.designedFor}\r\n            onFocus={this.handleFocus}\r\n            onClick={this.select}\r\n            type=\"text\"\r\n            onBlur={(evt) => this.updateInputValue(3, evt)}\r\n            onChange={(evt) => this.setState({ designedFor: evt.target.value })}\r\n          />\r\n        </div>\r\n        <div className=\"dropDown inputText\">\r\n          <span className=\"controlTitle\">\r\n            {CONTROLTITLE[this.props.language].designedBy}\r\n          </span>\r\n          <input\r\n            id={4}\r\n            className=\"inputField Text\"\r\n            onFocus={this.handleFocus}\r\n            onClick={this.select}\r\n            type=\"text\"\r\n            value={this.state.designedBy}\r\n            onBlur={(evt) => this.updateInputValue(4, evt)}\r\n            onChange={(evt) => this.setState({ designedBy: evt.target.value })}\r\n          />\r\n        </div>\r\n     \r\n        <div className=\"dropDown inputTextNotes\">\r\n          <span className=\"controlTitle\">\r\n            {CONTROLTITLE[this.props.language].notes}\r\n          </span>\r\n          <Info infoIcon={infoIcon} />{\" \"}\r\n          <textarea\r\n            id={5}\r\n            className=\"inputField textarea\"\r\n            onFocus={this.handleFocus}\r\n            onClick={this.select}\r\n            type=\"text\"\r\n            value={this.state.notes}\r\n            onBlur={(evt) => this.updateInputValue(5, evt)}\r\n            onChange={(evt) => this.setState({ notes: evt.target.value })}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\nimport { Dialog, Button, Card, CardContent, Typography } from '@material-ui/core'\r\nimport { DialogActions, DialogContent, DialogContentText, DialogTitle, TextField } from '@material-ui/core'\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport { Info } from \"./Info\";\r\nimport {\r\n  getInfoSave\r\n} from \"../definitions/infoIconsDefinitions.js\";\r\n\r\n\r\nconst MESSAGES = {\r\n  en: {\r\n  saveAs1: \"To save files in your desired location: \",\r\n  saveAs2: \" - Microsoft Edge: select 'SaveAs' when prompted \",\r\n  saveAs3: \" - Google Chrome: make a one time change: \",\r\n  saveAs4: \"go to Settings - Advanced - Downloads and turn on \",\r\n  saveAs5: \"'Ask where to save each file before downloading\"\r\n  \r\n  },\r\n  fr: {\r\n  saveAs1: \"To save files in your desired location: ^F\",\r\n  saveAs2: \" - Microsoft Edge: select 'SaveAs' when prompted  ^F\",\r\n  saveAs3: \" - Google Chrome: make a one time change:  ^F\",\r\n  saveAs4: \"go to Settings - Advanced - Downloads and turn on  ^F\",\r\n  saveAs5: \"'Ask where to save each file before downloading  ^F\"\r\n  \r\n  }\r\n};\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    '& > *': {\r\n      margin: theme.spacing(1),\r\n    },\r\n  },\r\n}));\r\n\r\n\r\nexport class PopupUserinputDialog extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      open: this.props.openDialog,\r\n      name: '',\r\n      showInfo: false\r\n    }\r\n  };\r\n\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (nextProps !== this.props) {\r\n\r\n      this.setState({\r\n        open: nextProps.openDialog\r\n      })\r\n    }\r\n  }\r\n\r\n  handleOK = () => {\r\n    this.props.respondToInput(this.state.name)\r\n    this.setState({\r\n      open: !this.state.open\r\n    })\r\n  }\r\n\r\n\r\n  handleCancel = () => {\r\n    this.props.respondToInput(\"\")\r\n    this.setState({\r\n      open: !this.state.open\r\n    })\r\n  }\r\n\r\n\r\n  handleInfo = () => {\r\n    this.setState({\r\n      showInfo: !this.state.showInfo\r\n    })\r\n  }\r\n\r\n\r\n\r\n  render() {\r\n\r\n    const handleChange = evt => {\r\n\r\n\r\n      this.setState({\r\n        name: evt.target.value\r\n      }\r\n\r\n      )\r\n\r\n\r\n    }\r\n    const infoIcon = getInfoSave(this.props.language);\r\n    var sourceEdge = require('../images/chooseButton.png');\r\n    var sourceChrome = require('../images/chooseButtonChrome.png');\r\n    var optionsEdge = require('../images/optionsEdge.png');\r\n    var optionsChrome = require('../images/optionsChrome.png');\r\n\r\n    const message=MESSAGES[this.props.language]\r\n\r\n    \r\n    return (\r\n\r\n      <div>\r\n\r\n       {/*  <Button/> */}\r\n        <Dialog\r\n          open={this.state.open}\r\n          onClose={this.handleToggle}\r\n          aria-labelledby=\"confirm-dialog\"\r\n\r\n        >\r\n          <DialogTitle id=\"confirm-dialog\"></DialogTitle>\r\n          <DialogContent >\r\n            <DialogContentText><span className=\"dialog\">Save to File</span>\r\n            </DialogContentText>\r\n\r\n            <form>\r\n              <TextField\r\n                id=\"1\"\r\n                label=\"file name\"\r\n                value={this.state.name}\r\n                onChange={handleChange}\r\n                margin=\"normal\">\r\n              </TextField>\r\n\r\n\r\n            </form>\r\n          </DialogContent>\r\n           \r\n          <DialogActions style={{ paddingRight: '12px', paddingBottom: '10px' }}>\r\n          <div  style={{ marginLeft: '10px'}}><Info  infoIcon={infoIcon}/>\r\n          {/* <Button onClick={this.handleInfo} variant=\"contained\"> <span className=\"dialog\"> Instructions </span></Button> */}\r\n          <Button onClick={this.handleCancel} variant=\"contained\"   style={{ marginLeft: '222px', marginRight: '8px'}} > <span className=\"dialog\"> Cancel </span></Button>\r\n            <Button onClick={this.handleOK} variant=\"contained\"> <span className=\"dialog\"> OK </span></Button></div>\r\n            \r\n          </DialogActions>\r\n          {this.state.showInfo &&\r\n            <Card> <CardContent>\r\n              <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n                <div>\r\n                To save files in your desired location:<ul><li>Microsofrft Edge:\r\n              <ul>\r\n                <li>Go to Options {this.state.showInfo && <img  alt=\"info\" src={optionsEdge}  />} </li>\r\n                <li>Click Downlods - Click Download settings</li>\r\n                <li>Turn on \"Ask where to save each file before downloading\" {this.state.showInfo && <img  alt=\"info\" src={sourceEdge}  />}\r\n              </li>\r\n               </ul>\r\n               </li><li>Google Chrome:\r\n               <ul>\r\n               <li>Go to Options {this.state.showInfo && <img  alt=\"info\" src={optionsChrome}  />} </li>\r\n                <li>Click Settings - Advanced - Downloads</li>\r\n                <li>Turn on \"Ask where to save each file before downloading\" {this.state.showInfo && <img  alt=\"info\" src={sourceChrome}  />}\r\n                </li>\r\n               </ul>\r\n              \r\n              </li></ul></div>\r\n             \r\n          </Typography>\r\n         \r\n        </CardContent></Card>}\r\n         \r\n        </Dialog>\r\n\r\n      </div >\r\n\r\n    )\r\n\r\n\r\n  }\r\n}","import React from 'react';\r\nimport { useEffect, useState } from 'react';\r\n\r\n// NOTE: USE FOR LOCAL DEVELOPMENT\r\n// const APP_SITE /*: string */ = \"https://test-tkdirectapi.ppi.ca\";\r\n\r\n// NOTE: USE FOR TESTING / PRODUCTION\r\nconst APP_SITE /*: string */ = \"\";\r\n\r\nconst NA_QS_URL /*: string */ = APP_SITE + \"/api/NA_QS\";\r\n\r\n\r\n// interface IClient {\r\n//   clientFileName: string;\r\n//   clientFileContent: string;\r\n//   clientJson: string;\r\n// }\r\n\r\n// interface IClients {\r\n//   id: string,\r\n//   clients: IClient[];\r\n// }\r\n\r\n// interface IClientProps {\r\n//   clientFileName: string;\r\n//   clientJson: string;\r\n//   clientIndex: number;\r\n//   setClientFileContent (index: number, fileContent: string): void;\r\n// }\r\n\r\nconst Client /*: React.FC<IClientProps> */ = (props) => {\r\n\r\n  const [encryptedJson, setEncryptedJson] = useState/*<string>*/(\"\");\r\n  const [jsonEncrypted, setJsonEncrypted] = useState/*<boolean>*/(false);\r\n  const [encryptedJsonAssigned, setEncryptedJsonAssigned] = useState/*<boolean>*/(false);\r\n\r\n  useEffect(\r\n    () => {\r\n\r\n      (async () => {\r\n\r\n        var myHeaders = new Headers();\r\n        myHeaders.append(\"Accept\", \"application/json\");\r\n        myHeaders.append(\"Content-Type\", \"application/json\");\r\n\r\n        let obj = JSON.parse(props.clientJson);\r\n        let raw = JSON.stringify(obj);\r\n\r\n\r\n        let data = await fetch(NA_QS_URL, {\r\n          method: 'POST',\r\n          headers: myHeaders,\r\n          body: raw,\r\n          redirect: 'follow'\r\n        })\r\n          .then(response => { return response.text(); })\r\n          .catch(error => { return error; });\r\n\r\n        if (typeof data === \"string\") {\r\n          setEncryptedJson(data);\r\n          setJsonEncrypted(true);\r\n\r\n        }\r\n\r\n      })();\r\n\r\n    },\r\n    [\r\n      jsonEncrypted,\r\n    ]\r\n  );\r\n\r\n  if (jsonEncrypted === true && encryptedJsonAssigned === false) {\r\n    setEncryptedJsonAssigned(true);\r\n    props.setClientFileContent(props.clientIndex, encryptedJson.substr(1, encryptedJson.length - 2));\r\n  }\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        marginTop: 16,\r\n        marginLeft: 16,\r\n        display: \"none\",\r\n      }}\r\n    >\r\n      <div>\r\n        {props.clientFileName}\r\n      </div>\r\n      <div>\r\n        {encryptedJson}\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n}\r\n\r\nfunction PasteClients() {  \r\n\r\n  const [clients, setClients] = useState/*<IClients>*/({ id: \"\", clients: [] });\r\n\r\n  const [note, setNote] = useState/*<string>*/(\"\");\r\n\r\n  const pasteClients = () => {\r\n\r\n    setNote(\"\");\r\n\r\n    navigator.clipboard.readText().then(\r\n      clipText => {\r\n\r\n        let parsedObject = null;\r\n\r\n        try {\r\n          parsedObject = JSON.parse(clipText);\r\n\r\n          if (parsedObject.id !== undefined) {\r\n            if (parsedObject.clients !== undefined) {\r\n              if (parsedObject.clientFileSpecs !== undefined) {\r\n\r\n                let id = parsedObject.id;\r\n\r\n                if (parsedObject.clients !== undefined) {\r\n                  if (parsedObject.clientFileSpecs !== undefined) {\r\n\r\n                    let pastedClients /*: IClient[] */ = [];\r\n\r\n                    if (Array.isArray(parsedObject.clients) === true) {\r\n                      if (Array.isArray(parsedObject.clientFileSpecs) === true) {\r\n\r\n                        for (let i = 0; i < parsedObject.clients.length; i++) {\r\n\r\n                          let clientJson = JSON.stringify(parsedObject.clients[i]);\r\n                          let clientFileName = parsedObject.clientFileSpecs[i].clientFileName;\r\n\r\n                          let client /*: IClient*/ = {\r\n                            clientFileName: clientFileName,\r\n                            clientJson: clientJson,\r\n                            clientFileContent: \"\",\r\n                          };\r\n\r\n                          pastedClients.push(client);\r\n                        }\r\n\r\n                      }\r\n                    }\r\n\r\n                    // Set new clients.\r\n                    setClients({ id: id, clients: pastedClients });\r\n\r\n                    // Clear clipboard if we have any clients.\r\n                    if (parsedObject.clients.length > 0) {\r\n\r\n                      navigator.clipboard.writeText(\"<empty clipboard>\").then(function () {\r\n                        /* clipboard successfully set */\r\n                      }, function () {\r\n                        /* clipboard write failed */\r\n                      });\r\n\r\n                      setNote(`${parsedObject.clients.length} files created.`);\r\n                      return;\r\n\r\n                    }\r\n                    else {\r\n                      setNote(\"No files created.\");\r\n                    }\r\n\r\n                  }\r\n                }\r\n\r\n              }\r\n            }\r\n          }\r\n\r\n\r\n        }\r\n        catch (e) {\r\n          setNote(\"No files created. Clipboard content not recognized.\");\r\n        }\r\n\r\n      }\r\n    );\r\n\r\n    setNote(\"No files created. Clipboard content not recognized.\");\r\n\r\n    setClients({id:\"\", clients:[]});\r\n\r\n  }\r\n\r\n  function setClientFileContent (index /*: number */, clientFileContent /*: string*/){\r\n\r\n    let newClients/*: IClient[]*/ = [];\r\n    let allClientFileContentsAssigned = true;\r\n\r\n    for (let i = 0; i < clients.clients.length; i++){\r\n      \r\n      let newClient /*: IClient*/ = {\r\n        clientFileName: clients.clients[i].clientFileName,\r\n        clientJson: clients.clients[i].clientJson,\r\n        clientFileContent: clients.clients[i].clientFileContent,\r\n      }\r\n\r\n      if (i === index){\r\n        newClient.clientFileContent = clientFileContent;\r\n      }\r\n\r\n      newClients.push(newClient);\r\n    }\r\n\r\n    for (let i = 0; i < clients.clients.length; i++){\r\n      \r\n      if (newClients[i].clientFileContent === null){\r\n        allClientFileContentsAssigned = false;\r\n        break;\r\n      }\r\n      else if (newClients[i].clientFileContent === \"\"){\r\n        allClientFileContentsAssigned = false;\r\n        break;\r\n      }\r\n\r\n    }\r\n\r\n    if (allClientFileContentsAssigned === true){\r\n\r\n      let clientFileSpecs = [];\r\n\r\n      for (let i = 0; i < clients.clients.length; i++){\r\n\r\n        let clientFileSpec = {\r\n          clientFileName: newClients[i].clientFileName,\r\n          clientFileContent: newClients[i].clientFileContent\r\n        };\r\n\r\n        clientFileSpecs.push(clientFileSpec);\r\n      }\r\n\r\n      let clientFileSpecsCollection = {id: clients.id, clientFileSpecs: clientFileSpecs};\r\n      let clientFileSpecsCollectionJson = JSON.stringify(clientFileSpecsCollection, null, 2);\r\n     \r\n      navigator.clipboard.writeText(clientFileSpecsCollectionJson).then(function () {\r\n        /* clipboard successfully set */\r\n      }, function () {\r\n        /* clipboard write failed */\r\n      });\r\n\r\n    }\r\n\r\n    setClients({id: clients.id, clients: newClients});\r\n\r\n  }\r\n\r\n  function clientComponents() /*: any*/ {\r\n\r\n    let clientComponents /*: any[]*/ = [];\r\n\r\n    for (let i = 0; i < clients.clients.length; i++) {\r\n      clientComponents.push(\r\n        <Client\r\n          key={i}\r\n          clientFileName={clients.clients[i].clientFileName}\r\n          clientJson={clients.clients[i].clientJson}\r\n          clientIndex={i}\r\n          setClientFileContent={setClientFileContent}\r\n        />\r\n      )\r\n    }\r\n\r\n    return (\r\n      <React.Fragment>\r\n        {clientComponents}\r\n      </React.Fragment>\r\n    );\r\n\r\n  }\r\n\r\n  return (\r\n    <div>\r\n\r\n      <div\r\n        style={{\r\n          marginTop: 16,\r\n        }}\r\n      >\r\n        <button\r\n          style={{\r\n            marginLeft: 16,\r\n          }}\r\n          onClick={pasteClients}\r\n          style={{backgroundColor:\"yellow\"}}\r\n        >\r\n          Create Exported Client Files\r\n        </button>\r\n\r\n      </div>\r\n\r\n      <div\r\n        style={{\r\n          marginTop: 16,\r\n          marginLeft: 16,\r\n        }}\r\n      >\r\n        {note}\r\n        </div>\r\n\r\n      <div\r\n        style={{\r\n          marginTop: 16,\r\n        }}\r\n      >\r\n        {clientComponents()}\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n\r\n}\r\n\r\nexport default PasteClients;\r\n","import React, { Component } from \"react\";\r\nimport DataTable from \"./GridExcelComponent/DataTable\";\r\nimport { getInfoINA } from \"../definitions/infoIconsDefinitions\";\r\nimport { Info } from \"./Info\";\r\nimport {\r\n  APPLET_INA,\r\n} from \"../definitions/generalDefinitions\";\r\n\r\nexport class AggregateGrid extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n  render() {\r\n    \r\n    return (\r\n      <div>\r\n        <h3 className=\"ppi1\">\r\n          {APPLET_INA ?this.props.insNeedLine:\"\"}\r\n          {APPLET_INA &&\r\n          <Info\r\n              infoIcon={getInfoINA(this.props.lang)}\r\n          />}\r\n        </h3>\r\n\r\n        <DataTable\r\n          gridTitle=\"\"// use same title as othr pages {this.props.aggregateGrid.gridTitle}\r\n          dataColTitles={this.props.aggregateGrid.dataColTitles}\r\n          dataProjection={this.props.aggregateGrid.dataProjection}\r\n          gridColumnsDataExcelInfoSection={\r\n            this.props.aggregateGrid.gridColumnsDataExcelInfoSection\r\n          }\r\n          gridColumnAligns={this.props.aggregateGrid.gridColumnAligns}\r\n          gridIcons={this.props.aggregateGrid.gridIcons}\r\n          specialRow={this.props.LE}\r\n          language={this.props.lang}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport { Chart, Bar, Pie } from \"react-chartjs-2\";\r\n//import ChartDataLabels from 'chartjs-plugin-datalabels';\r\n//import \"./Output.css\";\r\nimport \"./Output.css\";\r\nimport { setUIDataToAPI } from \"../data/dataExchange\";\r\nimport { getAssetLiabProjections } from \"../data/aggregateGridProjections\";\r\nimport {\r\n  getProjectedLiabilities,\r\n  getTaxLiabCategoryTotal,\r\n  getLeakageGraphs,\r\n  getAgesEP\r\n} from \"../utils/helper\";\r\nimport {\r\n  QUOTE_CLIENT,\r\n  QUOTE_SPOUSE,\r\n  ASSET_TAX,\r\n  ASSETS,\r\n  LIABILITIES,\r\n} from \"../definitions/generalDefinitions\";\r\nimport { OUTPUTTEXTEP } from \"../definitions/outputDefinitionsEP\";\r\nimport {\r\n  ASSET_TAX_TYPE_PRINCIPAL_RES,\r\n  ASSET_TAX_TYPE_REAL_ESTATE,\r\n  ASSET_TAX_TYPE_STOCKS,\r\n  ASSET_TAX_TYPE_SMALL_BUS,\r\n  ASSET_TAX_TYPE_RRSP,\r\n  ASSET_TAX_TYPE_INTEREST,\r\n  ASSET_TAX_TYPE_OTHER,\r\n  ASSET_TAX_TYPE_COUNT,\r\n} from \"../definitions/outputDefinitionsEP\";\r\n\r\n// props option\r\nconst DISPLAY_INCOME = 1;\r\n\r\n// for Estate\r\nconst DISPLAY_TAXLIAB_CLIENT = 1;\r\nconst DISPLAY_TAXLIAB_JLTD = 2;\r\n\r\nexport class OutputGraphsEP extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      loadingMCC: true,\r\n      estateLiab: [],\r\n      estateLiabLE: [],\r\n      taxL: 0,\r\n    };\r\n    this.dataAges = [];\r\n    this.dataPremiums = [];\r\n    this.dataDB = [];\r\n    this.dataSVEquiBuild = [];\r\n    this.dataSVManulife = [];\r\n    this.Prem = 0;\r\n    this.bestPremiumDur = 100;\r\n    this.bestMinMultiple = 0;\r\n    this.premiumDur = 10;\r\n    this.lifeExp = 0;\r\n    this.minMultiple = 0;\r\n    this.insMultiple = 0;\r\n    this.bestFitEquiBuild = false;\r\n    this.INAEstateOption = DISPLAY_TAXLIAB_CLIENT;\r\n\r\n    this.chartRef = React.createRef();\r\n    this.taxLiabChartRef = React.createRef();\r\n    //   Chart.plugins.unregister(ChartDataLabels)\r\n\r\n  }\r\n\r\n\r\n  render() {\r\n    // get data similar to presentation\r\n    const AssetLiabProjs = getAssetLiabProjections(this.props);\r\n    const lang = this.props.dataInput.Presentations[0].language;\r\n    const totalLiabProjections = getProjectedLiabilities(\r\n      this.props.dataInput,\r\n      this.props.projectEnd,\r\n      this.props.probate\r\n    );\r\n\r\n//console.log(this.props,totalLiabProjections)\r\n\r\n    let dtaAgesAll = [];\r\n    let k;\r\n    let lifeExp = this.props.lifeExp;\r\n    const clients = this.props.dataInput.Clients;\r\n    let age =\r\n      clients.length > 1\r\n        ? Math.min(clients[QUOTE_SPOUSE].Age, clients[QUOTE_CLIENT].Age)\r\n        : clients[QUOTE_CLIENT].Age;\r\n\r\n    //let age = this.props.dataInput.Clients[1].Age;\r\n\r\n    if (this.INAEstateOption === DISPLAY_TAXLIAB_CLIENT) {\r\n      lifeExp = this.props.lifeExp;//Client;\r\n      age = this.props.dataInput.Clients[QUOTE_CLIENT].Age;\r\n    } else if (this.INAEstateOption === DISPLAY_TAXLIAB_JLTD) {\r\n      lifeExp = this.props.lifeExp;//JLTD;\r\n      age =\r\n        clients.length > 1\r\n          ? Math.min(clients[QUOTE_SPOUSE].Age, clients[QUOTE_CLIENT].Age)\r\n          : clients[QUOTE_CLIENT].Age;\r\n    }\r\n\r\n    /* for (k = 0; k <= lifeExp + 3; ++k) {\r\n      dtaAgesAll.push(age + k);\r\n    } */\r\n\r\n    dtaAgesAll=getAgesEP(clients, lifeExp)\r\n\r\n    \r\n\r\n    //options\r\n\r\n    const leakageGraps = getLeakageGraphs(\r\n      this.props.dataInput.Assets,\r\n      this.props.assetProjections,\r\n      AssetLiabProjs,\r\n      totalLiabProjections,\r\n      lang,\r\n      lifeExp\r\n    );\r\n\r\n    const optionsPie = {\r\n      responsive: true,\r\n      maintainAspectRatio: false,\r\n      title: {\r\n        display: true,\r\n        position: \"top\",\r\n        text: \"\",\r\n        fontSize: 14, //8,\r\n        fontColor: \"#111\",\r\n      },\r\n      legend: {\r\n        display: true,\r\n        position: \"right\",\r\n        labels: {\r\n          fontColor: \"#333\",\r\n          fontSize: 12, //16\r\n        },\r\n      },\r\n      /*   plugins: {\r\n    // Change options for ALL labels of THIS CHART\r\n    display: false,\r\n    datalabels: {\r\n        color: 'white'\r\n    }\r\n} */\r\n    };\r\n\r\n    let optionsPieEstateLiab = JSON.parse(JSON.stringify(optionsPie));\r\n    optionsPieEstateLiab.title.text = OUTPUTTEXTEP[lang].graphsT2;\r\n\r\n    let optionsPieEstateLiabLE = JSON.parse(JSON.stringify(optionsPie));\r\n    optionsPieEstateLiabLE.title.text =\r\n      OUTPUTTEXTEP[\r\n        lang\r\n      ].graphsT3; \r\n    const taxLiabTotal_Index =\r\n      AssetLiabProjs.AssetnEstateLiabs.length - 1; //last row\r\n    let dataTaxLiabLifeExp = [];\r\n    let dataTaxLiab = [];\r\n    let dataLiabAtDeath=[];\r\n    let taxLiabs = AssetLiabProjs.AssetnEstateLiabs[taxLiabTotal_Index].values;\r\n    for (k = 0; k <= lifeExp + 3; ++k) {\r\n      dataTaxLiabLifeExp.push(0);\r\n      dataTaxLiab.push(taxLiabs[k]);\r\n      dataLiabAtDeath.push(totalLiabProjections[k]);\r\n    }\r\n    dataTaxLiabLifeExp[lifeExp] = taxLiabs[lifeExp];\r\n    dataTaxLiab[lifeExp]=0;\r\n    // bar chart\r\n    const dataTaxLiability = {\r\n      labels: dtaAgesAll,\r\n      datasets: [\r\n        {\r\n          label: OUTPUTTEXTEP[lang].graphs2L2,\r\n          //type: \"line\",\r\n          data: dataTaxLiabLifeExp,\r\n          fill: true, // Don't fill area under the line\r\n          borderColor: \"#6AAd8b\",\r\n          backgroundColor: \"rgb(106,173,139,.5)\", // \"rgba(96, 125, 139, .7)\"\r\n        },\r\n        {\r\n          label: OUTPUTTEXTEP[lang].graphsLeakage2,\r\n          //type: \"line\",\r\n          data: dataTaxLiab,\r\n\r\n          fill: true, // Don't fill area under the line\r\n          borderColor: \"darkGrey\", // Line color\r\n          backgroundColor: \"#607d8b\",\r\n        },\r\n        {\r\n          label:  OUTPUTTEXTEP[lang].graphsLeakage3,\r\n          //type: \"line\",\r\n          data: dataLiabAtDeath,\r\n\r\n          fill: true, // Don't fill area under the line\r\n          borderColor: \"white\", // Line color\r\n          backgroundColor: \"#910d48\",\r\n        },\r\n      ],\r\n    };\r\n    // bar chart\r\n    const optionsTaxLiab = {\r\n      responsive: true,\r\n      maintainAspectRatio: false,\r\n      scales: {\r\n        xAxes: [\r\n          {\r\n            stacked: true,\r\n            ticks: {\r\n              beginAtZero: true,\r\n            },\r\n          },\r\n        ],\r\n        yAxes: [\r\n          {\r\n            stacked: true,\r\n            ticks: {\r\n              beginAtZero: true,\r\n              callback: function (value, index, values) {\r\n                let result =\r\n                  value < 1000\r\n                    ? value\r\n                    : lang === \"en\"\r\n                    ? Intl.NumberFormat().format(value / 1000) + \"K\"\r\n                    : (Intl.NumberFormat().format(value / 1000) + \"K\").replace(\r\n                        \",\",\r\n                        \" \"\r\n                      );\r\n                return result;\r\n              },\r\n\r\n              steps: 10,\r\n              stepValue: 5,\r\n            },\r\n          },\r\n        ],\r\n      },\r\n    };\r\n\r\n    /*   let optionsPieTax = JSON.parse(JSON.stringify(optionsPie));\r\n    optionsPieTax.title.text = \"Tax Treatment of Assets\";\r\n\r\n    let optionsPieLiabsAtDeath = JSON.parse(JSON.stringify(optionsPie));\r\n    optionsPieLiabsAtDeath.title.text = \"Liabilities At Death\";\r\n\r\n    let optionsPieLiabs = JSON.parse(JSON.stringify(optionsPie));\r\n    optionsPieLiabs.title.text = \"Liabilities Breakdown\";\r\n */\r\n    let estateLiab = [];\r\n    const totalLiabProjectionsNow = parseInt(totalLiabProjections[0]);\r\n    const totalLiabProjectionsLE3 = parseInt(totalLiabProjections[lifeExp + 3]);\r\n    estateLiab.push(totalLiabProjectionsNow);\r\n    estateLiab.push(\r\n      AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_REAL_ESTATE]\r\n    );\r\n    estateLiab.push(AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_STOCKS]);\r\n    estateLiab.push(AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_SMALL_BUS]);\r\n    estateLiab.push(AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_RRSP]);\r\n    estateLiab.push(AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_INTEREST]);\r\n    estateLiab.push(AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_OTHER]);\r\n\r\n    const dataPieEstateLiabNow = {\r\n      labels: [\r\n        //OUTPUTTEXTEP[lang].graphsL1,OUTPUTTEXTEP[lang].graphsL2,OUTPUTTEXTEP[lang].graphsL3,OUTPUTTEXTEP[lang].graphsL4,OUTPUTTEXTEP[lang].graphsL5,\r\n        OUTPUTTEXTEP[lang].graphsL1,\r\n        OUTPUTTEXTEP[lang].graphsTaxes + OUTPUTTEXTEP[lang].pg3Tab3R2C1,\r\n        OUTPUTTEXTEP[lang].graphsTaxes + OUTPUTTEXTEP[lang].pg3Tab3R3C1,\r\n        OUTPUTTEXTEP[lang].graphsTaxes + OUTPUTTEXTEP[lang].pg3Tab3R4C1,\r\n        OUTPUTTEXTEP[lang].graphsTaxes + OUTPUTTEXTEP[lang].pg3Tab3R5C1,\r\n        OUTPUTTEXTEP[lang].graphsTaxes + OUTPUTTEXTEP[lang].pg3Tab3R6C1,\r\n        OUTPUTTEXTEP[lang].graphsTaxes + OUTPUTTEXTEP[lang].pg3Tab3R7C1,\r\n      ],\r\n      datasets: [\r\n        {\r\n          //data: this.state.estateLiab,\r\n          data: estateLiab,\r\n          //backgroundColor: [\"#F7464A\", \"#46BFBD\", \"#FDB45C\", \"#949FB1\", \"#4D5360\"]\r\n          backgroundColor: [\r\n            \"#872651\",\r\n            ASSETS.REAL_ESTATE.colour,\r\n            ASSETS.STOCKS_BONDS.colour,\r\n            ASSETS.SMALL_BUSINESS_SHARES.colour,\r\n            ASSETS.RRSP_RRIF.colour,\r\n            ASSETS.INTEREST_BEARING.colour,\r\n            ASSETS.OTHER_ASSETS.colour,\r\n          ],\r\n        },\r\n      ],\r\n    };\r\n\r\n    let estateLiabLE3 = [];\r\n    estateLiabLE3.push(totalLiabProjectionsNow);\r\n    estateLiabLE3.push(\r\n      AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_REAL_ESTATE]\r\n    );\r\n    estateLiabLE3.push(\r\n      AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_STOCKS]\r\n    );\r\n    estateLiabLE3.push(\r\n      AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_SMALL_BUS]\r\n    );\r\n    estateLiabLE3.push(\r\n      AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_RRSP]\r\n    );\r\n    estateLiabLE3.push(\r\n      AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_INTEREST]\r\n    );\r\n    estateLiabLE3.push(\r\n      AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_OTHER]\r\n    );\r\n\r\n    const dataPieEstateLiabLE = {\r\n      labels: [\r\n        // OUTPUTTEXTEP[lang].graphsL1,OUTPUTTEXTEP[lang].graphsL2,OUTPUTTEXTEP[lang].graphsL3,OUTPUTTEXTEP[lang].graphsL4,OUTPUTTEXTEP[lang].graphsL5,\r\n        OUTPUTTEXTEP[lang].graphsL1,\r\n        OUTPUTTEXTEP[lang].graphsTaxes + OUTPUTTEXTEP[lang].pg3Tab3R2C1,\r\n        OUTPUTTEXTEP[lang].graphsTaxes + OUTPUTTEXTEP[lang].pg3Tab3R3C1,\r\n        OUTPUTTEXTEP[lang].graphsTaxes + OUTPUTTEXTEP[lang].pg3Tab3R4C1,\r\n        OUTPUTTEXTEP[lang].graphsTaxes + OUTPUTTEXTEP[lang].pg3Tab3R5C1,\r\n        OUTPUTTEXTEP[lang].graphsTaxes + OUTPUTTEXTEP[lang].pg3Tab3R6C1,\r\n        OUTPUTTEXTEP[lang].graphsTaxes + OUTPUTTEXTEP[lang].pg3Tab3R7C1,\r\n      ],\r\n      datasets: [\r\n        {\r\n          //data: this.state.estateLiabLE,\r\n          data: estateLiabLE3,\r\n          //backgroundColor: [\"#F7464A\", \"#46BFBD\", \"#FDB45C\", \"#949FB1\", \"#4D5360\"]\r\n          backgroundColor: [\r\n            \"#872651\",\r\n            ASSETS.REAL_ESTATE.colour,\r\n            ASSETS.STOCKS_BONDS.colour,\r\n            ASSETS.SMALL_BUSINESS_SHARES.colour,\r\n            ASSETS.RRSP_RRIF.colour,\r\n            ASSETS.INTEREST_BEARING.colour,\r\n            ASSETS.OTHER_ASSETS.colour,\r\n          ],\r\n        },\r\n      ],\r\n    };\r\n\r\n    \r\n    let optionsLiab= JSON.parse(JSON.stringify(leakageGraps.optionsPieEstateLeakage));\r\n    let optionsLiabLE= JSON.parse(JSON.stringify(leakageGraps.optionsPieEstateLeakageLE));\r\n    \r\n    optionsLiab.title.text=OUTPUTTEXTEP[lang].graphsT2;\r\n    optionsLiabLE.title.text=OUTPUTTEXTEP[lang].graphsT3;\r\n\r\n    return (\r\n      <div style={{ width: \"90%\" }}>\r\n        <div style={{ width: \"50%\" }}>\r\n        <br />\r\n          <h3 className=\"ppi1\">\r\n            <div>\r\n              {OUTPUTTEXTEP[lang].graphsT1} <br />\r\n            </div>\r\n          </h3>\r\n\r\n         {/* </div> <div style={{ width: \"100%\" }}> */}\r\n          {/* <div style={{ width: \"100%\", marginLeft: \"31px\" }}>\r\n            <article\r\n               className=\"canvas-containerLeakage\"\r\n                style={{ position: \"relative\"}}  \r\n            >\r\n              <div className=\"EPGraphDiv\">\r\n                <Pie\r\n                  data={dataPieEstateLiabNow}\r\n                  options={leakageGraps.dataPieEstateLeakage}\r\n                />\r\n              </div>\r\n              <div className=\"EPGraphDiv\">\r\n                <Pie\r\n                  data={dataPieEstateLiabLE}\r\n                  options={leakageGraps.dataPieEstateLeakage}\r\n                />\r\n              </div>\r\n            </article>\r\n          </div>\r\n */}\r\n\r\n          <div style={{ width: \"100%\", marginLeft: \"31px\" }}>\r\n            <article\r\n              className=\"canvas-containerLiab\"\r\n              /* style={{ position: \"relative\", height: \"35vh\", width: \"80vw\" }} */\r\n            >\r\n              <div className=\"EPGraphDiv\">\r\n                <Pie\r\n                  data={dataPieEstateLiabNow}\r\n                  options={optionsLiab}\r\n                />\r\n              </div>\r\n              <div className=\"EPGraphDiv\">\r\n                <Pie\r\n                  data={dataPieEstateLiabLE}\r\n                  options={optionsLiabLE}\r\n                />\r\n              </div>\r\n            </article>\r\n          </div>\r\n\r\n          <br/>\r\n          <br />\r\n          <h3 className=\"ppi1\">\r\n            <div>\r\n              {OUTPUTTEXTEP[lang].graphsLeakageT1} <br />\r\n            </div>\r\n          </h3>\r\n          <div style={{ width: \"100%\", marginLeft: \"31px\" }}>\r\n            <article\r\n              className=\"canvas-containerLeakage\"\r\n              /* style={{ position: \"relative\", height: \"35vh\", width: \"80vw\" }} */\r\n            >\r\n              <div className=\"EPGraphDiv\">\r\n                <Pie\r\n                  data={leakageGraps.dataPieEstateLeakage}\r\n                  options={leakageGraps.optionsPieEstateLeakage}\r\n                />\r\n              </div>\r\n              <div className=\"EPGraphDiv\">\r\n                <Pie\r\n                  data={leakageGraps.dataPieEstateLeakageLE}\r\n                  options={leakageGraps.optionsPieEstateLeakageLE}\r\n                />\r\n              </div>\r\n            </article>\r\n          </div>\r\n          <h3 className=\"ppi1\">\r\n            <div>\r\n              {OUTPUTTEXTEP[lang].graphs2L1} <br />\r\n            </div>\r\n          </h3>\r\n          </div>\r\n          <div style={{ width: \"100%\" }}>\r\n            <article className=\"canvas-container\" style={{ height: \"200px\" }}>\r\n              <Bar data={dataTaxLiability} options={optionsTaxLiab} />\r\n            </article>\r\n          </div>\r\n\r\n          <br />\r\n          <hr />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport DataTable from \"./GridExcelComponent/DataTable\";\r\nimport Loader from 'react-loader-spinner'\r\nimport _ from 'lodash';\r\n\r\nexport class ProjectionGrid extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            loading: true,\r\n            projectionGrid: this.props.assetProjection,\r\n        }\r\n        this.dataAges = []\r\n    }\r\n\r\n    async componentWillReceiveProps(nextProps) {\r\n        if (!_.isEqual(nextProps.assetProjection, this.props.assetProjection)) {\r\n           this.setState({ loading: true });\r\n           this.setState({\r\n               projectionGrid: nextProps.assetProjection,\r\n               loading: false,\r\n           })\r\n       }\r\n   }\r\n   async componentDidMount() {\r\n    this.setState({ loading: true });\r\n    this.setState({\r\n        projectionGrid: this.props.assetProjection,\r\n        loading: false,\r\n    })\r\n}\r\n    render() {\r\n        \r\n        const projectionGrid=this.state.projectionGrid\r\n         if (this.state.loading) {// || this.state.projectionGrid===null || this.state.projectionGrid===undefined) {\r\n            return   <div><Loader type=\"TailSpin\" color=\"black\" height={30} width={30} /></div>;\r\n        }\r\n        return (\r\n            <div>\r\n                <DataTable\r\n                    gridTitle={projectionGrid.gridTitle}\r\n                    dataColTitles={projectionGrid.dataColTitles}\r\n                    dataProjection={projectionGrid.dataProjection}\r\n                    \r\n                    language={this.props.lang}\r\n                />\r\n            </div>);\r\n    }\r\n}\r\n\r\n","import React, { useState,useEffect } from \"react\";\r\nimport DataTable from \"./GridExcelComponent/DataTable\";\r\n\r\n\r\n\r\nexport default function ProjectionGrid1({assetProjection,lang}) {\r\n    const [projectionGrid, setProjectionGrid] = useState(assetProjection);\r\n\r\n  \r\n    useEffect(() => {\r\n        /* getGridData(input, assetCurr)\r\n            .then(response => response.json())\r\n            .then(data => setProjectionGrid(data)); */\r\n\r\n           setProjectionGrid(assetProjection)\r\n    }, [assetProjection])\r\n\r\n\r\n    //if(projectionGrid!==null && projectionGrid!==undefined){\r\n    return (\r\n        <div>\r\n         \r\n            { assetProjection ?\r\n            <DataTable\r\n                gridTitle={projectionGrid.gridTitle}\r\n                dataColTitles={  projectionGrid.dataColTitles}\r\n                dataProjection={projectionGrid.dataProjection}\r\n                \r\n                language={lang}\r\n            /> : null}\r\n        </div>);\r\n}\r\n\r\n","import React, { Component } from 'react';\r\n\r\nexport class GridButton extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.handleClick = this.handleClick.bind(this);\r\n    }\r\n    \r\n\thandleClick = () => {\r\n\t\tthis.props.handleClickGridButton();\r\n    }\r\n\r\n\trender() {\r\n\t\treturn (\r\n            <span>\r\n                    <img\r\n                    className={this.props.className}\r\n                    onClick={this.handleClick}\r\n                    id={this.props.id}\r\n                    alt={this.props.alt}\r\n                    src = {this.props.src}\r\n                    />  \r\n            </span>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { DropDown } from \"./DropDown\";\r\n//import { InputField4 } from './inputField4';\r\nimport { InputField } from \"./inputField\";\r\nimport { AddRemove } from \"./AddRemove\";\r\nimport { cleanFormat, getDisableValues } from \"../utils/helper\";\r\nimport {\r\n  getInfoIconAssetsIncomeRate,\r\n  getInfoIconAssetsYr0,\r\n  getInfoIconAssetsOwner,\r\n  getInfoIconSourcesRRIF,\r\n  getInfoTaxLiability,\r\n  getInfoIconTaxExempt,\r\n  getInfoIconAssetsIns,\r\n  getInfoIconTFSA,\r\n  getInfoIconDepositWithd,\r\n  getInfoIconTaxLiab,\r\n} from \"../definitions/infoIconsDefinitions\";\r\n\r\nimport {\r\n  createDefaultAsset,\r\n  copyFromAnotherAsset,\r\n} from \"../data/createDefaults\";\r\nimport {\r\n  MESSAGES,\r\n  ASSETS,\r\n  ASSET_TAX,\r\n  CONTROLTITLE,\r\n  OWNERSHIP,\r\n  ASSET_OWNERSHIP_ACTION,\r\n  //  ASSET_OWNERSHIP_ACTION2,\r\n  COLUMN_TITLES,\r\n} from \"../definitions/generalDefinitions\";\r\nimport {\r\n  getListItemNameFromKey,\r\n  getListItemKeyFromName,\r\n  isMobileDevice,\r\n  getListToShowByOrder,\r\n  arrayFormatMoney,\r\n} from \"../utils/helper\";\r\n\r\nimport { ProjectionGrid } from \"./ProjectionGrid.js\";\r\nimport ProjectionGrid1 from \"./ProjectionGrid1.js\";\r\nimport DataTable from \"./GridExcelComponent/DataTable\";\r\nimport {\r\n  fetchAssetProjection2,\r\n  fetchAssetProjectionAPI,\r\n} from \"../utils/FetchAPIs\";\r\nimport {\r\n  DEFAULT_RRIF_AGE,\r\n  DROPDOWN_WIDE,\r\n} from \"../definitions/generalDefinitions\";\r\nimport _ from \"lodash\";\r\n\r\nimport {\r\n  ASSET_API_OUTPUT_TaxPayable,\r\n  APPLET_INA,\r\n  APPLET_EP,\r\n} from \"../definitions/generalDefinitions\";\r\n\r\nimport { GridButton } from \"./GridButton\";\r\nimport { getAssetGridValues } from \"../data/assetGridProjections\";\r\nimport debounce from \"lodash.debounce\";\r\nimport { Language } from \"@material-ui/icons\";\r\n\r\nconst ASSET_DROPDOWN_TYPE = 0;\r\n// inserted desc here not a dropdown no need for indes\r\nconst ASSET_DROPDOWN_OWNER = 2;\r\nconst ASSET_DROPDOWN_TAXTYPE = 3;\r\n\r\nexport class Asset extends Component {\r\n  displayName = Asset.name;\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      description: \"\",\r\n      displaySreadsheet: false,\r\n      loading: false,\r\n    };\r\n    var i;\r\n    var typeValues = [];\r\n    const listAssetsToShow = getListToShowByOrder(ASSETS);\r\n    for (i = 0; i < listAssetsToShow.length; ++i) {\r\n      typeValues.push({\r\n        label: listAssetsToShow[i].value[this.props.language],\r\n        value: i + 1,\r\n      });\r\n    }\r\n    /* for (i = 0; i < ASSETS[this.props.language].Values.length; ++i) {\r\n      typeValues.push({\r\n        label: ASSETS[this.props.language].Values[i],\r\n        value: i + 1\r\n      });\r\n    } */\r\n\r\n    /* var ownerValues = [\r\n      {\r\n        label: OWNERSHIP[this.props.language].Values[0],\r\n        value: 1\r\n      },\r\n      { label: OWNERSHIP[this.props.language].Values[1], value: 2 },\r\n      { label: OWNERSHIP[this.props.language].Values[2], value: 3 },\r\n      { label: OWNERSHIP[this.props.language].Values[3], value: 4 }\r\n    ];\r\n */\r\n    var ownerActionValues = [\r\n      {\r\n        label:\r\n          ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.value[this.props.language],\r\n        value: 1,\r\n      },\r\n      {\r\n        label:\r\n          ASSET_OWNERSHIP_ACTION.CLIENT_ROLLOVER.value[this.props.language],\r\n        value: 2,\r\n      },\r\n      {\r\n        label: ASSET_OWNERSHIP_ACTION.SPOUSE.value[this.props.language],\r\n        value: 3,\r\n      },\r\n      {\r\n        label: ASSET_OWNERSHIP_ACTION.JOINT.value[this.props.language],\r\n        value: 4,\r\n      },\r\n    ];\r\n    if (APPLET_EP) {\r\n      ownerActionValues = [\r\n        {\r\n          label: ASSET_OWNERSHIP_ACTION.CLIENT.value[this.props.language],\r\n          value: 1,\r\n        },\r\n        {\r\n          label: ASSET_OWNERSHIP_ACTION.SPOUSE.value[this.props.language],\r\n          value: 2,\r\n        },\r\n      ];\r\n    }\r\n\r\n    /* var ownerActionValues2 = [\r\n          {\r\n            label:\r\n              ASSET_OWNERSHIP_ACTION2.properties[this.props.language].Values[\r\n                OWNER_ACTION_CLIENTLIQUIDATE\r\n              ],\r\n            value: 1\r\n          },\r\n          {\r\n            label:\r\n              ASSET_OWNERSHIP_ACTION[this.props.language].Values[\r\n                OWNER_ACTION_CLIENTROLLOVER\r\n              ],\r\n            value: 2\r\n          },\r\n          {\r\n            label:\r\n              ASSET_OWNERSHIP_ACTION[this.props.language].Values[\r\n                OWNER_ACTION_Spouse\r\n              ],\r\n            value: 3\r\n          },\r\n          {\r\n            label:\r\n              ASSET_OWNERSHIP_ACTION[this.props.language].Values[\r\n                OWNER_ACTION_Joint\r\n              ],\r\n            value: 4\r\n          }\r\n        ];\r\n    \r\n     */\r\n    this.taxValues = [];\r\n    this.desc = this.props.assetCurr.description;\r\n    const listAssetTaxesToShow = getListToShowByOrder(ASSET_TAX);\r\n    // console.log(listAssetTaxesToShow)\r\n    for (i = 0; i < listAssetTaxesToShow.length; ++i) {\r\n      this.taxValues.push({\r\n        label: listAssetTaxesToShow[i].value[this.props.language],\r\n        value: i + 1,\r\n      });\r\n    }\r\n    // console.log(this.props.assetCurr)\r\n    /*     for (i = 0; i < ASSET_TAX[this.props.language].Values.length; ++i) {\r\n          this.taxValues.push({\r\n            label: ASSET_TAX[this.props.language].Values[i],\r\n            value: i + 1\r\n          });\r\n        }\r\n     */\r\n\r\n    // console.log(this.props.assetCurr.ownerKey)\r\n    this.dataValues = {\r\n      DD: [\r\n        // asset types\r\n        {\r\n          //ASSET_DROPDOWN_TYPE index =0\r\n          id: 1,\r\n          Title: CONTROLTITLE[this.props.language].type,\r\n          defValue: getListItemNameFromKey(\r\n            ASSETS,\r\n            this.props.assetCurr.assetTypeKey,\r\n            this.props.language\r\n          ),\r\n          Values: typeValues,\r\n          disableOptionValue: getDisableValues(ASSETS),\r\n        },\r\n        {\r\n          id: 12,\r\n          Title: \"Description\",\r\n        },\r\n        {\r\n          //ASSET_DROPDOWN_OWNER index =2\r\n          id: 2,\r\n          Title: CONTROLTITLE[this.props.language].owner,\r\n          /* defValue: this.props.assetCurr.ownerKey,\r\n          Values: ownerValues \r\n          Title: ASSET_OWNERSHIP.Title.value[this.props.language],//CONTROLTITLE[this.props.language].ownershipAction,           */\r\n          defValue: getListItemNameFromKey(\r\n            ASSET_OWNERSHIP_ACTION,\r\n            this.props.assetCurr.ownerKey,\r\n            this.props.language\r\n          ),\r\n          Values: ownerActionValues,\r\n          disableOptionValue: getDisableValues(ASSET_OWNERSHIP_ACTION),\r\n        },\r\n        {\r\n          id: 3, //ASSET_DROPDOWN_TAXTYPE index =3\r\n          Title: CONTROLTITLE[this.props.language].tax,\r\n          defValue: getListItemNameFromKey(\r\n            ASSET_TAX,\r\n            this.props.assetCurr.assetTaxTypeKey,\r\n            this.props.language\r\n          ), // this.props.assetCurr.Tax,\r\n          disableOptionValue: getDisableValues(ASSET_TAX),\r\n          Values: this.taxValues,\r\n        },\r\n      ],\r\n    };\r\n\r\n    this.DDTax = {\r\n      disableOptionValue: getDisableValues(ASSET_TAX),\r\n    };\r\n    for (let i = 3; i < this.DDTax.disableOptionValue.length; i++)\r\n      this.DDTax.disableOptionValue[i] = true;\r\n\r\n    this.dataColTitles = [];\r\n    this.taxLiabOfClient = [];\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    //console.log(nextProps.assetCurr, this.props.assetCurr);\r\n    if (\r\n      !_.isEqual(nextProps.assetCurr, this.props.assetCurr) ||\r\n      nextProps.id !== this.props.id ||\r\n      nextProps.assetsNo !== this.props.assetsNo ||\r\n      nextProps.clientsNo !== this.props.clientsNo ||\r\n      !_.isEqual(nextProps.projection, this.props.projection)\r\n    ) {\r\n      if (\r\n        this.props.assetCurr.assetTypeKey ===\r\n          ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.Key ||\r\n        nextProps.assetCurr.assetTypeKey ===\r\n          ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.Key\r\n      ) {\r\n        // console.log(this.dataValues.DD[0].Values);\r\n        //console.log(nextProps.projection, this.props.projection);\r\n\r\n        this.dataValues.DD[ASSET_DROPDOWN_TYPE].Values.push({\r\n          label: ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.value[this.props.language],\r\n          value: this.dataValues.DD[ASSET_DROPDOWN_TYPE].Values.length + 1,\r\n        });\r\n        // console.log(this.dataValues.DD[0].Values);\r\n      }\r\n\r\n      this.dataValues.DD[ASSET_DROPDOWN_TYPE].defValue = getListItemNameFromKey(\r\n        ASSETS,\r\n        nextProps.assetCurr.assetTypeKey,\r\n        this.props.language\r\n      );\r\n      this.dataValues.DD[ASSET_DROPDOWN_OWNER].defValue =\r\n        getListItemNameFromKey(\r\n          ASSET_OWNERSHIP_ACTION,\r\n          nextProps.assetCurr.ownerKey,\r\n          this.props.language\r\n        );\r\n      this.dataValues.DD[ASSET_DROPDOWN_TAXTYPE].defValue =\r\n        getListItemNameFromKey(\r\n          ASSET_TAX,\r\n          nextProps.assetCurr.assetTaxTypeKey,\r\n          this.props.language\r\n        ); //nextProps.assetCurr.Tax;\r\n\r\n      this.dataValues.DD[2].disableOptionValue[1] =\r\n        (APPLET_EP && nextProps.clientsNo === 1) ||\r\n        nextProps.assetCurr.assetTypeKey === ASSETS.LIFE_INSURANCE.Key;\r\n      //APPLET_EP && nextProps.clientsNo === 1;\r\n      if (APPLET_INA && nextProps.clientsNo === 1) {\r\n        nextProps.assetCurr.ownerKey =\r\n          ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key;\r\n        this.dataValues.DD[2].disableOptionValue[1] = true;\r\n        this.dataValues.DD[2].disableOptionValue[2] = true;\r\n        this.dataValues.DD[2].disableOptionValue[3] = true;\r\n      }\r\n\r\n      this.setState({ description: nextProps.assetCurr.description });\r\n      //this.dataValues.DD[3].defValue = nextProps.assetCurr.ownerKey;\r\n\r\n      /* \r\nlet i;\r\n      this.typeValues = [];\r\n       if(this.props.Type===ASSETS[this.props.language].Values[4])\t//\t\t'Registered')  \r\n      {\r\n        this.dataValues.DD[2].defValue =ASSET_TAX[this.props.language].Values[TAX_RRSP] \r\n\r\n      this.typeValues.push({\r\n        label: ASSETS[this.props.language].Values[2],\r\n       });\r\n     }\r\n      else{\r\n      for (i = 0; i <= ASSETS[this.props.language].Values.length; ++i) {\r\n        this.typeValues.push({\r\n        label: ASSETS[this.props.language].Values[i],\r\n        value: i + 1\r\n      });\r\n      }} */\r\n    }\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    this.setState({ description: this.props.assetCurr.description });\r\n  };\r\n\r\n  handleDoRemove = (id) => {\r\n    if (this.props.disableAddRemove === false) {\r\n      this.props.handleRemoveAsset(id);\r\n    }\r\n  };\r\n\r\n  handleDoAdd = () => {\r\n    if (this.props.disableAddRemove === false) {\r\n      var assNo =\r\n        this.props.assetsNo >\r\n        this.dataValues.DD[ASSET_DROPDOWN_TYPE].Values.length - 1\r\n          ? this.dataValues.DD[ASSET_DROPDOWN_TYPE].Values.length - 2\r\n          : this.props.assetsNo;\r\n      var assNext = this.dataValues.DD[ASSET_DROPDOWN_TYPE].Values[assNo].label;\r\n      if (assNo === 4 || assNo === 5) assNo = 0;\r\n      else\r\n        assNo =\r\n          this.props.assetsNo >\r\n          this.dataValues.DD[ASSET_DROPDOWN_TAXTYPE].Values.length - 1\r\n            ? this.dataValues.DD[ASSET_DROPDOWN_TAXTYPE].Values.length - 1\r\n            : this.props.assetsNo;\r\n      var assTax =\r\n        this.dataValues.DD[ASSET_DROPDOWN_TAXTYPE].Values[assNo].label;\r\n      const assTaxTypeKey = getListItemKeyFromName(\r\n        ASSET_TAX,\r\n        this.dataValues.DD[ASSET_DROPDOWN_TAXTYPE].Values[assNo].label\r\n      );\r\n      // console.log(assTaxTypeKey,assTax )\r\n      let asset = createDefaultAsset(this.props.assetsNo + 1);\r\n      asset.assetTypeKey = getListItemKeyFromName(ASSETS, assNext);\r\n      asset.description = \"\";\r\n      /* asset.ownerKey = APPLET_INA\r\n        ? (this.props.clientsNo === 1?ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key:ASSET_OWNERSHIP_ACTION.CLIENT_ROLLOVER.Key)\r\n        : ASSET_OWNERSHIP_ACTION.CLIENT.Key; // in EP RRSP owner client or spouse */\r\n      if (APPLET_INA) {\r\n        if (this.props.clientsNo === 1)\r\n          asset.ownerKey = ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key;\r\n      } else asset.ownerKey = ASSET_OWNERSHIP_ACTION.CLIENT.Key; // in EP RRSP owner client or spouse\r\n\r\n      if (asset.assetTypeKey === ASSETS.LIFE_INSURANCE.Key)\r\n        asset.ownerKey = ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key;\r\n      asset.assetTaxTypeKey = assTaxTypeKey;\r\n\r\n      asset = this.setAssetValuesToDefault(asset);\r\n\r\n      this.dataValues.DD[ASSET_DROPDOWN_TAXTYPE].Values = this.taxValues;\r\n\r\n      this.props.handleAddAsset(asset);\r\n    }\r\n  };\r\n\r\n  updateDDown = (id, selection) => {\r\n    const { id: propId, assetCurr } = this.props;\r\n\r\n    let asset = copyFromAnotherAsset(assetCurr);\r\n    asset.id = propId;\r\n    if (id === 1) {\r\n      asset = createDefaultAsset(propId);\r\n      asset.assetTypeKey = getListItemKeyFromName(ASSETS, selection);\r\n      asset = this.setAssetValuesToDefault(asset);\r\n     \r\n    } else if (id === 2) {\r\n      asset.ownerKey = getListItemKeyFromName(\r\n        ASSET_OWNERSHIP_ACTION,\r\n        selection\r\n      );\r\n      asset = this.setAssetValuesToDefault(asset);\r\n    } else if (id === 3)\r\n      //asset.Tax = selection;\r\n      asset.assetTaxTypeKey = getListItemKeyFromName(ASSET_TAX, selection);\r\n\r\n    /* asset = this.setAssetValuesToDefault(asset);  */\r\n\r\n    this.props.handleUpdate(asset);\r\n    //if (this.state.displaySreadsheet === true)\r\n    //this.handleUpdateGrid();\r\n  };\r\n  /*  debounceHandleUpdataDesc = debounce(\r\n    (asset) => this.props.handleUpdate(asset),\r\n    500\r\n  ); */\r\n\r\n  updateDesc = (evt) => {\r\n    //console.log(evt.target.value);\r\n    let asset = copyFromAnotherAsset(this.props.assetCurr);\r\n    asset.description = evt.target.value;\r\n    this.props.handleUpdate(asset);\r\n  };\r\n\r\n  handleUpdateInput = (id, value) => {\r\n    //this.setState({ loading: true });\r\n    let asset = copyFromAnotherAsset(this.props.assetCurr);\r\n    asset.id = this.props.id;\r\n    //console.log(value);\r\n    /* let asset = {\r\n      id: this.props.id,\r\n      //Type: this.props.assetCurr.Type,\r\n      assetTypeKey: this.props.assetCurr.assetTypeKey,\r\n      ownerKey: this.props.assetCurr.ownerKey,\r\n      //OwnerID: this.props.assetCurr.OwnerID,\r\n      currValue: this.props.assetCurr.currValue,\r\n      //Tax: this.props.assetCurr.Tax,\r\n      assetTaxTypeKey: this.props.assetCurr.assetTaxTypeKey,\r\n      //TaxID: this.props.assetCurr.TaxID,\r\n      growth: this.props.assetCurr.growth,\r\n      DisposeYr: this.props.assetCurr.DisposeYr,\r\n      DisposeDur: this.props.assetCurr.DisposeDur,\r\n      ACB: this.props.assetCurr.ACB,\r\n      smallBusinessCapGainExemption: this.props.assetCurr\r\n        .smallBusinessCapGainExemption,\r\n      contributionAmt: this.props.assetCurr.contributionAmt,\r\n      contributionStartYr: this.props.assetCurr.contributionStartYr,\r\n      contributionDur: this.props.assetCurr.contributionDur,\r\n      incomeRate: this.props.assetCurr.incomeRate,\r\n      RRIFStartAge: this.props.assetCurr.RRIFStartAge\r\n    };\r\n */\r\n    let changed = false;\r\n    const lang = this.props.language;\r\n    const valueClean = cleanFormat(value, lang);\r\n    const valueCleanInt = parseInt(valueClean);\r\n\r\n    if (id === 2) {\r\n      changed = asset.DisposeYr !== parseInt(value) ? true : false;\r\n      asset.DisposeYr = parseInt(value);\r\n    } else if (id === 3) {\r\n      changed = asset.DisposeDur !== parseInt(value) ? true : false;\r\n      asset.DisposeDur = parseInt(value);\r\n    } else if (id === 4) {\r\n      changed = asset.ACB !== valueCleanInt ? true : false;\r\n      asset.ACB = valueCleanInt;\r\n    } else if (id === 10) {\r\n      changed =\r\n        asset.smallBusinessCapGainExemption !== valueCleanInt ? true : false;\r\n      asset.smallBusinessCapGainExemption = valueCleanInt;\r\n    } else if (id === 1) {\r\n      changed = asset.currValue !== valueCleanInt ? true : false;\r\n      asset.currValue = valueCleanInt;\r\n    } else if (id === 5) {\r\n      changed =\r\n        asset.growth !== parseInt(10000 * valueClean) / 10000 ? true : false;\r\n      asset.growth = parseInt(10000 * valueClean) / 10000;\r\n    } else if (id === 6) {\r\n      changed = asset.contributionAmt !== valueCleanInt ? true : false;\r\n      asset.contributionAmt = valueCleanInt;\r\n    } else if (id === 7) {\r\n      changed = asset.contributionStartYr !== parseInt(value) ? true : false;\r\n      asset.contributionStartYr = parseInt(value);\r\n    } else if (id === 8) {\r\n      changed = asset.contributionDur !== parseInt(value) ? true : false;\r\n      asset.contributionDur = parseInt(value);\r\n    } else if (id === 13) {\r\n      changed = asset.withdrawalAmt !== valueCleanInt ? true : false;\r\n      asset.withdrawalAmt = valueCleanInt;\r\n    } else if (id === 14) {\r\n      changed = asset.withdrawalStartYr !== parseInt(value) ? true : false;\r\n      asset.withdrawalStartYr = parseInt(value);\r\n    } else if (id === 15) {\r\n      changed = asset.withdrawalDur !== parseInt(value) ? true : false;\r\n      asset.withdrawalDur = parseInt(value);\r\n    } else if (id === 9) {\r\n      changed =\r\n        asset.incomeRate !== parseInt(10000 * valueClean) / 10000\r\n          ? true\r\n          : false;\r\n      asset.incomeRate = parseInt(10000 * valueClean) / 10000;\r\n    } else if (id === 11) {\r\n      changed = asset.RRIFStartAge !== parseInt(value) ? true : false;\r\n      asset.RRIFStartAge = parseInt(value);\r\n    } else if (id === 12) {\r\n      changed = asset.description !== value ? true : false;\r\n      asset.description = value;\r\n    }\r\n    if (changed) {\r\n      this.props.handleUpdate(asset);\r\n      this.setState({ loading: this.props.disableAddRemove });\r\n\r\n      //this.setState({ loading: false });\r\n      // this.handleUpdateGrid();\r\n    }\r\n  };\r\n\r\n  updateClientTaxLiability = async () => {\r\n    let dataNA = this.props.getAssetProjection();\r\n    //let appSiteAPI = \"http://localhost:8082\";\r\n    let data = await fetchAssetProjection2(dataNA, this.props.id);\r\n    if (data !== undefined) {\r\n      // console.log(data[ASSET_API_OUTPUT_TaxPayable].numericValues[0]);\r\n\r\n      return data[ASSET_API_OUTPUT_TaxPayable].numericValues;\r\n    }\r\n  };\r\n\r\n  getData = async (dataNA, id) => {\r\n    let data = await fetchAssetProjectionAPI(dataNA, id);\r\n\r\n    return data;\r\n  };\r\n\r\n  handleClickGridButton = () => {\r\n    this.setState({ loading: true });\r\n    const display = this.state.displaySreadsheet;\r\n\r\n    this.props.adjustVisibleOutputSection(display === false ? 1 : -1);\r\n    this.setState({ displaySreadsheet: !display, loading: false });\r\n\r\n    /* if (this.state.displaySreadsheet === true) {\r\n      this.setState(prevState => {\r\n        let display = prevState.displaySreadsheet;\r\n        return { displaySreadsheet: !display,  loading:false };\r\n      });\r\n    }\r\n    else {\r\n      //await this.handleUpdateGrid()\r\n      this.setState(prevState => {\r\n        let display = prevState.displaySreadsheet;\r\n        return { displaySreadsheet: !display,  loading:false };\r\n      });\r\n      } */\r\n  };\r\n\r\n  setAssetValuesToDefault = (asset) => {\r\n    this.dataValues.DD[ASSET_DROPDOWN_TAXTYPE].Values = this.taxValues;\r\n\r\n    if (asset.assetTypeKey === ASSETS.RRSP_RRIF.Key) {\r\n      //value[this.props.language]) {\r\n      //asset.Tax = ASSET_TAX.REGISTERED.value[this.props.language];\r\n      asset.assetTaxTypeKey = ASSET_TAX.REGISTERED.Key;\r\n      if (\r\n        APPLET_INA &&\r\n        this.props.clientsNo > 1 &&\r\n        asset.ownerKey === ASSET_OWNERSHIP_ACTION.JOINT.Key\r\n      ) {\r\n        asset.ownerKey = ASSET_OWNERSHIP_ACTION.CLIENT_ROLLOVER.Key;\r\n      }\r\n    } else if (\r\n      asset.assetTypeKey === ASSETS.PERSONAL_RESIDENCE.Key ||\r\n      asset.assetTypeKey === ASSETS.TFSA.Key //value[this.props.language]\r\n    ) {\r\n      //asset.Tax = ASSET_TAX.NON_TAXABLE.value[this.props.language];\r\n      asset.assetTaxTypeKey = ASSET_TAX.NON_TAXABLE.Key;\r\n      asset.ACB = 0;\r\n      asset.DisposeYr = 99;\r\n      asset.DisposeDur = 1;\r\n      if (asset.assetTypeKey === ASSETS.TFSA.Key && asset.ownerKey === ASSET_OWNERSHIP_ACTION.JOINT.Key)\r\n        asset.ownerKey = ASSET_OWNERSHIP_ACTION.CLIENT_ROLLOVER.Key;\r\n    } else if (asset.assetTypeKey === ASSETS.CASH.Key) {\r\n      //value[this.props.language]) {\r\n      //asset.Tax = ASSET_TAX.NON_TAXABLE.value[this.props.language];\r\n      asset.assetTaxTypeKey = ASSET_TAX.NON_TAXABLE.Key;\r\n\r\n      asset.ACB = 0;\r\n    } else if (\r\n      asset.assetTypeKey === ASSETS.LIFE_INSURANCE.Key //value[this.props.language]\r\n    ) {\r\n      //asset.Tax = ASSET_TAX.NON_TAXABLE.value[this.props.language];\r\n      asset.assetTaxTypeKey = ASSET_TAX.NON_TAXABLE.Key;\r\n\r\n      asset.DisposeYr = APPLET_INA ? 0 : 99;\r\n      asset.DisposeDur = 1;\r\n      asset.ACB = 0;\r\n\r\n      //  asset.ownerKey = APPLET_INA?ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key:ASSET_OWNERSHIP_ACTION.CLIENT_ROLLOVER.Key;  allow spouse ins\r\n    } else if (\r\n      asset.assetTypeKey === ASSETS.STOCKS_BONDS.Key || //value[this.props.language] ||\r\n      asset.assetTypeKey === ASSETS.REAL_ESTATE.Key //value[this.props.language]\r\n    ) {\r\n      //asset.Tax = ASSET_TAX.CAPITAL_GAINS_DEFERRED.value[this.props.language];\r\n      asset.assetTaxTypeKey = ASSET_TAX.CAPITAL_GAINS_DEFERRED.Key;\r\n\r\n      /* this.dataValues.DD[ASSET_DROPDOWN_TAXTYPE].Values = [];\r\n      this.dataValues.DD[ASSET_DROPDOWN_TAXTYPE].Values.push({\r\n        label: ASSET_TAX.CAPITAL_GAINS_DEFERRED.value[this.props.language],\r\n        value: 1,\r\n      });\r\n      this.dataValues.DD[ASSET_DROPDOWN_TAXTYPE].Values.push({\r\n        label: ASSET_TAX.CAPITAL_GAINS_ANNUAL.value[this.props.language],\r\n        value: 2,\r\n      }); */\r\n    } else if (asset.assetTypeKey === ASSETS.SMALL_BUSINESS_SHARES.Key)\r\n      //value[this.props.language])\r\n      //asset.Tax = ASSET_TAX.CAPITAL_GAINS_DEFERRED.value[this.props.language];\r\n      asset.assetTaxTypeKey = ASSET_TAX.QUALIFYING_SMALL_BUSINESS.Key;\r\n    //.CAPITAL_GAINS_DEFERRED.Key;\r\n    else if (asset.assetTypeKey === ASSETS.INTEREST_BEARING.Key)\r\n      asset.assetTaxTypeKey = ASSET_TAX.INTEREST.Key;\r\n    //.FULLY_TAXABLE.Key;\r\n    //asset.assetTaxTypeKey= ASSET_TAX.INTEREST.Key;\r\n    else if (\r\n      asset.assetTypeKey === ASSETS.OTHER_ASSETS.Key //value[this.props.language] ||\r\n    )\r\n      //asset.Tax = ASSET_TAX.FULLY_TAXABLE.value[this.props.language];\r\n      asset.assetTaxTypeKey = ASSET_TAX.FULLY_TAXABLE.Key;\r\n    \r\n    if(APPLET_EP) \r\n      {\r\n        if(asset.assetTypeKey === ASSETS.RRSP_RRIF.Key || asset.assetTypeKey === ASSETS.TFSA.Key)\r\n        {   \r\n         if(asset.ownerKey !== ASSET_OWNERSHIP_ACTION.CLIENT.Key  && asset.ownerKey !== ASSET_OWNERSHIP_ACTION.SPOUSE.Key)\r\n            asset.ownerKey = ASSET_OWNERSHIP_ACTION.CLIENT.Key\r\n        } \r\n      } \r\n      \r\n\r\n\r\n    if (\r\n      asset.ownerKey === ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key //ASSET_OWNERSHIP.CLIENTLIQUIDATE.value[this.props.language]\r\n    ) {\r\n      asset.DisposeYr = 0;\r\n      asset.DisposeDur = 1;\r\n    }\r\n    // console.log(asset)\r\n\r\n    // single person\r\n    if (APPLET_INA && this.props.clientsNo === 1) {\r\n      asset.ownerKey = ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key;\r\n      asset.DisposeYr = 0;\r\n    }\r\n    return asset;\r\n  };\r\n\r\n  clone2 = () => {\r\n    let id = \"assetGrid\";\r\n    if (this.state.displaySreadsheet === true) {\r\n      // console.log(this.state.displaySreadsheet)\r\n\r\n      var itm = document.getElementById(id);\r\n      // console.log(itm)\r\n\r\n      var cln = itm.cloneNode(true);\r\n      cln.id = \"ll\";\r\n      //cln.style.position=\"relative\"\r\n      let cln2 = document.createElement(\"div\");\r\n      cln2.appendChild(cln);\r\n      cln2.id = \"lll\";\r\n      document.addEventListener(\"click\", function (e) {\r\n        if (e.target && e.target.id === \"lll\") {\r\n        }\r\n      });\r\n\r\n      document.getElementById(\"copyDiv\").appendChild(cln2);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      id,\r\n      assetCurr,\r\n      /* Type,\r\n      Owner,\r\n      index,\r\n      currValue,\r\n      Tax,\r\n      growth,\r\n      Dispos\r\n      eYr,\r\n      DisposeDur,\r\n      ACB,\r\n      smallBusinessCapGainExemption,\r\n      contributionAmt,\r\n      contributionStartYr,\r\n      contributionDur,\r\n      incomeRate, */\r\n      language,\r\n      themeColor,\r\n      assetsNo,\r\n    } = this.props;\r\n    const assetID = assetCurr.assetTypeKey; //ASSETS.INTEREST_BEARING.value[this.props.language]\r\n    //Object.values(ASSETS).filter(obj => obj.value[language]=== assetCurr.Type)[0].Key\r\n    let disableTaxMethods =\r\n      assetCurr.assetTypeKey === ASSETS.LIFE_INSURANCE.Key || //value[language] ||\r\n      assetCurr.assetTypeKey === ASSETS.CASH.Key || //value[language] ||\r\n      assetCurr.assetTypeKey === ASSETS.PERSONAL_RESIDENCE.Key || //value[language] ||\r\n      assetCurr.assetTypeKey === ASSETS.TFSA.Key || //value[language] ||\r\n      assetCurr.assetTypeKey === ASSETS.RRSP_RRIF.Key || //value[language] ||\r\n      assetCurr.assetTypeKey === ASSETS.INTEREST_BEARING.Key ||\r\n      assetCurr.assetTypeKey === ASSETS.SMALL_BUSINESS_SHARES.Key\r\n        ? true\r\n        : false;\r\n    const disableOwner = false; // allow ins for both\r\n    const insurance = assetCurr.assetTypeKey === ASSETS.LIFE_INSURANCE.Key;\r\n\r\n    const taxStocks = assetCurr.assetTypeKey === ASSETS.STOCKS_BONDS.Key;\r\n    const taxRS = assetCurr.assetTypeKey === ASSETS.REAL_ESTATE.Key;\r\n\r\n    // assetCurr.assetTypeKey === ASSETS.LIFE_INSURANCE.Key ? true : false;\r\n    let hideOwner = false;\r\n    if(APPLET_EP && this.props.assetCurr.assetTypeKey !== ASSETS.RRSP_RRIF.Key && this.props.assetCurr.assetTypeKey !== ASSETS.TFSA.Key)\r\n        hideOwner = true;\r\n\r\n    const taxT = CONTROLTITLE[language].tax;\r\n    const ownerT = CONTROLTITLE[language].owner;\r\n    const assetTypeIns =\r\n      CONTROLTITLE[language].type &&\r\n      assetCurr.assetTypeKey === ASSETS.LIFE_INSURANCE.Key;\r\n\r\n    let assetTax = MESSAGES[language].assetTax;\r\n\r\n    //const taxCredit=assetCurr.Type === UNLISTED[this.props.language].Assets.Values[ASSET_TaxCredit]\r\n    const taxCredit =\r\n      assetCurr.Type ===\r\n      ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.value[this.props.language];\r\n\r\n    const rrsp = assetCurr.assetTaxTypeKey === ASSET_TAX.REGISTERED.Key; //value[language];\r\n    const showACB = !(\r\n      //assetCurr.Tax === ASSET_TAX.NON_TAXABLE.value[language] ||\r\n      (\r\n        assetCurr.assetTaxTypeKey === ASSET_TAX.NON_TAXABLE.Key || //value[language] ||\r\n        rrsp ||\r\n        assetCurr.assetTypeKey === ASSETS.INTEREST_BEARING.Key || //value[language] ||\r\n        //assetCurr.Tax === ASSET_TAX.CAPITAL_GAINS_ANNUAL.value[language]\r\n        assetCurr.assetTaxTypeKey === ASSET_TAX.CAPITAL_GAINS_ANNUAL.Key\r\n      )\r\n    );\r\n    const showIncome =\r\n      APPLET_INA &&\r\n      assetCurr.assetTaxTypeKey === ASSET_TAX.CAPITAL_GAINS_DEFERRED.Key;\r\n    //assetCurr.Tax === ASSET_TAX.CAPITAL_GAINS_DEFERRED.value[language] ||\r\n    /* (APPLET_EP &&\r\n        (assetCurr.assetTaxTypeKey === ASSET_TAX.CAPITAL_GAINS_DEFERRED.Key ||\r\n        assetCurr.assetTypeKey === ASSETS.OTHER_ASSETS.Key || //value[language] ||\r\n          rrsp)) ||\r\n      (APPLET_INA &&\r\n        rrsp &&\r\n       assetCurr.ownerKey !== ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key); //ASSET_OWNERSHIP.CLIENTLIQUIDATE.value[this.props.language]\r\n     */\r\n\r\n    const showDur = !(\r\n      rrsp ||\r\n      assetCurr.assetTypeKey === ASSETS.PERSONAL_RESIDENCE.Key || //value[language] ||\r\n      assetCurr.assetTypeKey === ASSETS.REAL_ESTATE.Key || //value[language] ||\r\n      taxCredit ||\r\n      ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key\r\n    );\r\n    const showGrowth = !(\r\n      (\r\n        assetCurr.assetTypeKey === ASSETS.LIFE_INSURANCE.Key ||\r\n        assetCurr.assetTypeKey === ASSETS.CASH.Key || //value[language] ||\r\n        taxCredit ||\r\n        assetCurr.ownerKey === ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key\r\n      ) //ASSET_OWNERSHIP.CLIENTLIQUIDATE.value[this.props.language]\r\n    );\r\n\r\n    const showDispose = !(\r\n      rrsp ||\r\n      (APPLET_INA && assetCurr.assetTypeKey === ASSETS.LIFE_INSURANCE.Key) || //value[language] ||\r\n      assetCurr.ownerKey === ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key || //ASSET_OWNERSHIP.CLIENTLIQUIDATE.value[this.props.language]\r\n      taxCredit\r\n    );\r\n\r\n    let showContribution = //APPLET_EP &&\r\n      (APPLET_EP || (APPLET_INA && assetCurr.ownerKey !== ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key)) && //ASSET_OWNERSHIP.CLIENTLIQUIDATE.value[this.props.language]\r\n      (rrsp ||\r\n        assetCurr.assetTypeKey === ASSETS.INTEREST_BEARING.Key || //value[language] ||\r\n        assetCurr.assetTypeKey === ASSETS.STOCKS_BONDS.Key ||\r\n        assetCurr.assetTypeKey === ASSETS.TFSA.Key); //value[language];\r\n    let showWithdrawal =\r\n      (APPLET_EP ||\r\n        (APPLET_INA && assetCurr.withdrawalAmt > 0) ||\r\n        APPLET_INA) &&\r\n      assetCurr.ownerKey !== ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key && //ASSET_OWNERSHIP.CLIENTLIQUIDATE.value[this.props.language]\r\n      (assetCurr.assetTypeKey === ASSETS.INTEREST_BEARING.Key || //value[language] ||\r\n        assetCurr.assetTypeKey === ASSETS.STOCKS_BONDS.Key ||\r\n        rrsp ||\r\n        assetCurr.assetTypeKey === ASSETS.TFSA.Key); //value[language];\r\n\r\n     // if client rollover dont contribute to rrsp ortfsa\r\n    if (\r\n      APPLET_INA &&\r\n      assetCurr.ownerKey === ASSET_OWNERSHIP_ACTION.CLIENT_ROLLOVER.Key &&\r\n      (rrsp || assetCurr.assetTypeKey === ASSETS.TFSA.Key)\r\n    ) {\r\n      showContribution = false;\r\n      showWithdrawal = false;\r\n    }\r\n    \r\n    const showCGE = assetCurr.assetTypeKey === ASSETS.SMALL_BUSINESS_SHARES.Key; //value[language]\r\n    // console.log(this.dataValues);\r\n\r\n    let gridIcons = new Array(this.dataColTitles.length);\r\n    this.dataColTitles.forEach((item) => {\r\n      if (item === COLUMN_TITLES[this.props.language].TaxLiability)\r\n        gridIcons[this.dataColTitles.length - 1] =\r\n          getInfoTaxLiability(language);\r\n    });\r\n\r\n    //const disableDD=(dd.Title === CONTROLTITLE[language].owner && disableOwner)  || (dd.Title === taxT && disableTaxMethods) || (taxCredit && (dd.Title === taxT || dd.Title ===CONTROLTITLE[this.props.language].ownerAction))\r\n    let disableAll = false;\r\n    if (\r\n      this.props.assetCurr.assetTypeKey ===\r\n      ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.Key\r\n    ) {\r\n      disableAll = true;\r\n      this.dataValues.DD[ASSET_DROPDOWN_TYPE].Values.push({\r\n        label: ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.value[this.props.language],\r\n        value: this.dataValues.DD[ASSET_DROPDOWN_TYPE].Values.length + 1,\r\n      });\r\n    }\r\n\r\n    const p =\r\n      this.props.projection[this.props.assetCurr.id - 1] === undefined\r\n        ? null\r\n        : this.props.projection[this.props.assetCurr.id - 1].grid;\r\n\r\n    this.dataValues.DD[0].disableOptionValue[ASSETS.PERSONAL_RESIDENCE.ID] =\r\n      this.props.hasPersonalResidenceAlready; // disable more\r\n\r\n    this.dataValues.DD[2].disableOptionValue[1] =\r\n      (APPLET_EP && this.props.clientsNo === 1) ||\r\n      assetCurr.assetTypeKey === ASSETS.LIFE_INSURANCE.Key;\r\n\r\n    this.dataValues.DD[2].disableOptionValue[3] =\r\n      this.props.assetCurr.assetTypeKey === ASSETS.TFSA.Key ||\r\n      this.props.assetCurr.assetTypeKey === ASSETS.RRSP_RRIF.Key;\r\n\r\n    // single person\r\n    if (APPLET_INA && this.props.clientsNo === 1) {\r\n      this.dataValues.DD[2].disableOptionValue[1] = true;\r\n      this.dataValues.DD[2].disableOptionValue[2] = true;\r\n      this.dataValues.DD[2].disableOptionValue[3] = true;\r\n    }\r\n\r\n    //console.log(this.props.assetCurr.projection, this.props.projection[0].grid);\r\n    if (this.state.loading === true && this.props.disableAddRemove === true) {\r\n      return \"\";\r\n    } else {\r\n      return (\r\n        <div className=\"inputRow\">\r\n          {this.dataValues.DD.map((dd) =>\r\n            dd.id < 4 ? (\r\n              !(hideOwner === true && dd.id === 2) && (\r\n                <DropDown\r\n                  key={dd.id.toString()}\r\n                  id={dd.id}\r\n                  Count={assetsNo}\r\n                  Title={dd.Title}\r\n                  disable={\r\n                    disableAll === true ||\r\n                    (dd.Title === CONTROLTITLE[language].owner &&\r\n                      disableOwner) ||\r\n                    (dd.Title === taxT && disableTaxMethods) ||\r\n                    (taxCredit &&\r\n                      (dd.Title === taxT ||\r\n                        dd.Title ===\r\n                          CONTROLTITLE[this.props.language].ownerAction))\r\n                  }\r\n                  defValue={dd.defValue}\r\n                  unlistedValue={\r\n                    taxCredit\r\n                      ? ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.value[\r\n                          this.props.language\r\n                        ]\r\n                      : \"\"\r\n                  } // TODO ideally find in list of values\r\n                  Values={dd.Values}\r\n                  //info={dd.Title === \"Type\" && id === 1 ? assetTax : \"\"}\r\n                  infoIcon={\r\n                    (dd.Title === ownerT && assetCurr.id === 1\r\n                      ? getInfoIconAssetsOwner(this.props.language)\r\n                      : assetTypeIns\r\n                      ? getInfoIconAssetsIns(this.props.language)\r\n                      : undefined) ||\r\n                    (dd.Title === CONTROLTITLE[language].type &&\r\n                    (this.props.assetCurr.assetTypeKey === ASSETS.TFSA.Key ||\r\n                      this.props.assetCurr.assetTypeKey ===\r\n                        ASSETS.RRSP_RRIF.Key)\r\n                      ? getInfoIconTFSA(this.props.language)\r\n                      : undefined) ||\r\n                    (dd.Title === CONTROLTITLE[language].tax &&\r\n                    this.props.assetCurr.id === 1 &&\r\n                    APPLET_INA\r\n                      ? getInfoIconTaxLiab(this.props.language)\r\n                      : undefined)\r\n                  }\r\n                  language={language}\r\n                  //   disableOption={dd.disableOptionValue}\r\n                  disableOption={\r\n                    dd.id !== 3\r\n                      ? dd.disableOptionValue\r\n                      : taxStocks || taxRS\r\n                      ? this.DDTax.disableOptionValue\r\n                      : dd.disableOptionValue\r\n                  }\r\n                  width={DROPDOWN_WIDE}\r\n                  updateDDown={this.updateDDown}\r\n                />\r\n              )\r\n            ) : (\r\n              <div className=\"dropDown inputDiv\">\r\n                <div className=\"controlTitle\">\r\n                  {CONTROLTITLE[this.props.language].desc}\r\n                </div>\r\n                <input\r\n                  key={dd.id.toString()}\r\n                  id={12}\r\n                  className=\"inputField  textareaAssetName\"\r\n                  value={this.state.description}\r\n                  onClick={this.select}\r\n                  type=\"text\"\r\n                  onChange={(evt) =>\r\n                    this.setState({ description: evt.target.value })\r\n                  }\r\n                  onBlur={(evt) => this.updateDesc(evt)}\r\n                />\r\n\r\n                {/* \r\n              <input\r\n                id={12}\r\n                type=\"text\"\r\n                className=\"inputField  textareaAssetName\"\r\n                onChange={this.updateDesc}\r\n                value={assetCurr.description}\r\n              /> */}\r\n              </div>\r\n            )\r\n          )}\r\n          <InputField\r\n            inputName={\r\n              insurance\r\n                ? CONTROLTITLE[language].FA\r\n                : CONTROLTITLE[language].amount\r\n            }\r\n            id={1}\r\n            format={2}\r\n            Count={assetsNo}\r\n            language={language}\r\n            inputValue={assetCurr.currValue}\r\n            handleUpdateInput={this.handleUpdateInput}\r\n          />\r\n\r\n          {showGrowth && (\r\n            <InputField\r\n              inputName={CONTROLTITLE[language].growth}\r\n              format={3}\r\n              id={5}\r\n              Count={assetsNo}\r\n              language={language}\r\n              inputValue={Math.round(10000 * assetCurr.growth) / 10000}\r\n              inputTitle={id}\r\n              handleUpdateInput={this.handleUpdateInput}\r\n            />\r\n          )}\r\n\r\n          {showDispose && (\r\n            <InputField\r\n              inputName={\r\n                APPLET_INA\r\n                  ? CONTROLTITLE[language].disposeYr\r\n                  : CONTROLTITLE[language].disposeYr\r\n              } //CONTROLTITLE[language].dur}\r\n              id={2}\r\n              //info={MESSAGES[language].infoYr0}\r\n              infoIcon={getInfoIconAssetsYr0(this.props.language)}\r\n              format={1}\r\n              Count={assetsNo}\r\n              language={language}\r\n              inputValue={assetCurr.DisposeYr}\r\n              handleUpdateInput={this.handleUpdateInput}\r\n            />\r\n          )}\r\n          {showDur && (\r\n            <InputField\r\n              inputName={CONTROLTITLE[language].disposeDur}\r\n              id={3}\r\n              format={1}\r\n              Count={assetsNo}\r\n              language={language}\r\n              inputValue={assetCurr.DisposeDur}\r\n              handleUpdateInput={this.handleUpdateInput}\r\n            />\r\n          )}\r\n          {(rrsp) &&  //|| this.props.assetCurr.assetTypeKey === ASSETS.TFSA.Key) &&\r\n            assetCurr.ownerKey !== //ASSET_OWNERSHIP.CLIENTLIQUIDATE.value[this.props.language]\r\n              ASSET_OWNERSHIP_ACTION.CLIENT_LIQUIDATE.Key && (\r\n              <InputField\r\n                inputName={CONTROLTITLE[language].RRIFAge}\r\n                format={1}\r\n                id={11}\r\n                Count={assetsNo}\r\n                infoIcon={getInfoIconSourcesRRIF(this.props.language)}\r\n                language={language}\r\n                inputValue={assetCurr.RRIFStartAge}\r\n                handleUpdateInput={this.handleUpdateInput}\r\n              />\r\n            )}\r\n          {showIncome && (\r\n            <InputField\r\n              inputName={\r\n                rrsp\r\n                  ? CONTROLTITLE[language].RRIFRate\r\n                  : CONTROLTITLE[language].incomeRate\r\n              }\r\n              format={3}\r\n              id={9}\r\n              Count={assetsNo}\r\n              infoIcon={getInfoIconAssetsIncomeRate(this.props.language)}\r\n              language={language}\r\n              inputValue={Math.round(10000 * assetCurr.incomeRate) / 10000}\r\n              handleUpdateInput={this.handleUpdateInput}\r\n            />\r\n          )}\r\n\r\n          {showCGE && (\r\n            <InputField\r\n              inputName={CONTROLTITLE[language].smallBusinessCapGainExemption}\r\n              format={2}\r\n              id={10}\r\n              Count={assetsNo}\r\n              language={language}\r\n              infoIcon={getInfoIconTaxExempt(this.props.language)}\r\n              inputValue={assetCurr.smallBusinessCapGainExemption}\r\n              handleUpdateInput={this.handleUpdateInput}\r\n            />\r\n          )}\r\n          {showACB && (\r\n            <InputField\r\n              inputName={CONTROLTITLE[language].ACB}\r\n              format={2}\r\n              id={4}\r\n              Count={assetsNo}\r\n              language={language}\r\n              inputValue={assetCurr.ACB}\r\n              //{/*readOnly={disableTaxMethods}*/}\r\n\r\n              handleUpdateInput={this.handleUpdateInput}\r\n            />\r\n          )}\r\n\r\n          {showContribution && (\r\n            <div>\r\n              <InputField\r\n                inputName={CONTROLTITLE[language].contributionAmt}\r\n                id={6}\r\n                format={2}\r\n                Count={assetsNo}\r\n                language={language}\r\n                inputValue={assetCurr.contributionAmt}\r\n                infoIcon={getInfoIconDepositWithd(this.props.language)}\r\n                colorDiv={\"green\"}\r\n                handleUpdateInput={this.handleUpdateInput}\r\n              />\r\n              {/* <InputField\r\n              inputName={CONTROLTITLE[language].contributionStartYr}\r\n              id={7}\r\n              format={1}\r\n              //info={MESSAGES[language].infoYr0}\r\n              Count={assetsNo}\r\n              language={language}\r\n              inputValue={assetCurr.contributionStartYr}\r\n              handleUpdateInput={this.handleUpdateInput}\r\n            />  */}\r\n              <InputField\r\n                inputName={CONTROLTITLE[language].contributionDur}\r\n                id={8}\r\n                format={1}\r\n                Count={assetsNo}\r\n                language={language}\r\n                inputValue={assetCurr.contributionDur}\r\n                colorDiv={\"green\"}\r\n                handleUpdateInput={this.handleUpdateInput}\r\n              />\r\n            </div>\r\n          )}\r\n\r\n          {showWithdrawal && (\r\n            <div>\r\n              <InputField\r\n                inputName={CONTROLTITLE[language].withdrawalAmt}\r\n                id={13}\r\n                format={2}\r\n                Count={assetsNo}\r\n                language={language}\r\n                inputValue={assetCurr.withdrawalAmt}\r\n                colorDiv={\"red\"}\r\n                handleUpdateInput={this.handleUpdateInput}\r\n              />\r\n              <InputField\r\n                inputName={CONTROLTITLE[language].withdrawalStartYr}\r\n                id={14}\r\n                format={1}\r\n                //info={MESSAGES[language].infoYr0}\r\n                Count={assetsNo}\r\n                language={language}\r\n                inputValue={assetCurr.withdrawalStartYr}\r\n                minValue={1}\r\n                colorDiv={\"red\"}\r\n                handleUpdateInput={this.handleUpdateInput}\r\n              />\r\n              <InputField\r\n                inputName={CONTROLTITLE[language].withdrawalDur}\r\n                id={15}\r\n                format={1}\r\n                Count={assetsNo}\r\n                language={language}\r\n                inputValue={assetCurr.withdrawalDur}\r\n                colorDiv={\"red\"}\r\n                handleUpdateInput={this.handleUpdateInput}\r\n              />\r\n            </div>\r\n          )}\r\n          {/*  <svg\r\n          className=\"iconMore\"\r\n          onClick={this.handleClickGridButton}\r\n          style={{ top: \"140px\" }}\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          width=\"24\"s\r\n          height=\"24\"\r\n          viewBox=\"0 0 24 24\"\r\n        >\r\n          <path d=\"M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z\" />\r\n        </svg> */}\r\n          {!taxCredit && !disableAll && (\r\n            <GridButton\r\n              className=\"iconMore\"\r\n              handleClickGridButton={this.handleClickGridButton}\r\n              id=\"gridOn\"\r\n              alt=\"ll\"\r\n              src={\r\n                this.state.displaySreadsheet === true\r\n                  ? require(\"../images/gridOff.png\")\r\n                  : require(\"../images/gridOn.png\")\r\n              }\r\n            />\r\n          )}\r\n\r\n          <AddRemove\r\n            currentID={id}\r\n            minComps={0}\r\n            //currentIndex={index}\r\n            id={assetID}\r\n            numberComps={assetsNo}\r\n            disabled={this.props.disableAddRemove}\r\n            handleDoAdd={this.handleDoAdd}\r\n            handleDoRemove={this.handleDoRemove}\r\n          />\r\n          {/* {isMobileDevice() && id < assetsNo ? <hr className=\"ppi2\" /> : \"\"} */}\r\n\r\n          {this.state.displaySreadsheet === true && (\r\n            <div\r\n              id=\"assetGrid\"\r\n              style={{\r\n                clear: \"both\",\r\n                float: \"left\",\r\n              }} /*    onClick={this.clone2}  */\r\n            >\r\n              {p !== null && (\r\n                <ProjectionGrid1 assetProjection={p} lang={language} />\r\n              )}{\" \"}\r\n            </div>\r\n          )}\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n}\r\n","import {\r\n  TITLES,\r\n  ASSETS,\r\n  IMAGE_LOGO,\r\n  IMAGE_LOGO_OTHERPAGES,\r\n  IMAGE_APPLET_EP,\r\n} from \"../definitions/generalDefinitions\";\r\nimport { OUTPUTTEXTEP } from \"../definitions/outputDefinitionsEP\";\r\nimport { formatMoney, formatMoney2, cleanFormat } from \"../utils/helper\";\r\nimport { getOutputValues } from \"../data/dataExchange\";\r\n\r\nimport {\r\n  PDF,\r\n  InToPt,\r\n  PxToPt,\r\n  HELVETICA,\r\n  TIMES,\r\n  NORMAL,\r\n  BOLD,\r\n  HEADER_RECT_IN_W,\r\n} from \"./PDF\";\r\nimport {\r\n  ASSET_TAX_TYPE_PRINCIPAL_RES,\r\n  ASSET_TAX_TYPE_REAL_ESTATE,\r\n  ASSET_TAX_TYPE_STOCKS,\r\n  ASSET_TAX_TYPE_SMALL_BUS,\r\n  ASSET_TAX_TYPE_RRSP,\r\n  ASSET_TAX_TYPE_INTEREST,\r\n  ASSET_TAX_TYPE_OTHER,\r\n  ASSET_TAX_TYPE_COUNT,\r\n} from \"../definitions/outputDefinitionsEP\";\r\n\r\nconst DISPLAY_INCOME = 1;\r\n\r\nconst BULLET_FONT_SIZE = 24;\r\nconst NUMBER_BULLET_FONT_SIZE = 11;\r\nconst GRID_AGGREGATE = 0;\r\nconst GRID_INDIVIDUAL = 1;\r\n\r\nconst LINES_PER_PAGE_LANDSCAPE = 27;\r\nconst LINES_PER_PAGE_PORTRAIT = 37;\r\n\r\nexport function doSavePdfActionEP(props, AssetLiabProjs) {\r\n  try {\r\n    let pdf = new PDF();\r\n    pdf.Create();\r\n\r\n    var paragraph;\r\n    let height = 0.2;\r\n    let Widths = [1.2, 0.6, 1.8, 1.4];\r\n    let values;\r\n    const paraWidth = 6;\r\n    const paraLeft = 1.2;\r\n    const lineHeight = 0.196;\r\n    const indent = 0.15;\r\n    let paraY = 8 * lineHeight;\r\n\r\n    // pdf output shared with presentation\r\n    let output = getOutputValues(props);\r\n\r\n    const lang = props.dataInput.Presentations[0].language;\r\n    const pg1TitleY = 4.2;\r\n\r\n   \r\n    pdf.SetFont(HELVETICA, NORMAL);\r\n    if (lang === \"en\") pdf.SetFontSize(PxToPt(36));\r\n    else pdf.SetFontSize(PxToPt(36));\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    pdf.Text(\r\n      props.INAOption === DISPLAY_INCOME\r\n        ? TITLES[lang].appletINA\r\n        : TITLES[lang].appletEP,\r\n      InToPt(paraLeft),\r\n      InToPt(pg1TitleY)\r\n    );\r\n    /* page 1: Cover page */\r\n\r\n    //pdf.addCustomImage(\"AdvisorLogo\", pg1TitleY, image, true);\r\n    const image = props.dataInput.Presentations[0].adviserLogo;\r\n    const headerOffset = image.image === null ? 0 : 0.25;\r\n    const top = props.dataInput.Presentations[0].adviserLogo.top;\r\n\r\n    let result;\r\n    result = pdf.addCustomImage(IMAGE_LOGO, pg1TitleY, image, true, top);\r\n\r\n    pdf.AddImage(\r\n      IMAGE_APPLET_EP,\r\n      InToPt(paraLeft + 0.01),\r\n      InToPt(pg1TitleY + 0.5),\r\n      InToPt(6.04),\r\n      InToPt(2.76)\r\n    );\r\n\r\n    pdf.SetFontSize(PxToPt(18));\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    pdf.Text(\r\n      OUTPUTTEXTEP[lang].pg1P1 + output.designedFor,\r\n      InToPt(paraLeft + 0.02),\r\n      InToPt(pg1TitleY + 3.63)\r\n    );\r\n    pdf.Text(\r\n      OUTPUTTEXTEP[lang].pg1P2 + output.designedBy,\r\n      InToPt(paraLeft + 0.02),\r\n      InToPt(pg1TitleY + 4.13)\r\n    );\r\n    pdf.Text(\r\n      OUTPUTTEXTEP[lang].pg1P3 + output.dateApplet,\r\n      InToPt(paraLeft + 0.02),\r\n      InToPt(pg1TitleY + 4.42)\r\n    );\r\n    pdf.Text(\r\n      OUTPUTTEXTEP[lang].pg1P4 + output.province,\r\n      InToPt(paraLeft + 0.02),\r\n      InToPt(pg1TitleY + 4.69)\r\n    );\r\n\r\n    {\r\n      /*end ofPage 1*/\r\n      const footerText = OUTPUTTEXTEP[lang].pgFooter;\r\n      const headerText = OUTPUTTEXTEP[lang].pg1T;\r\n      pdf.addFooterAndHeader(headerOffset, footerText, headerText);\r\n\r\n      /*-Introduction\t\t// Page 2*/\r\n      // logo if asked for\r\n      //    pdf.addCustomImage(\"EPOtherPagesLogo\", pg1TitleY, image);\r\n      result =\r\n        result &&\r\n        pdf.addCustomImage(IMAGE_LOGO_OTHERPAGES, pg1TitleY, image, false, top);\r\n\r\n      setFontForTitle(pdf, lang);\r\n      pdf.Text(OUTPUTTEXTEP[lang].pg2T, InToPt(paraLeft), InToPt(paraY));\r\n      setFontForParas(pdf);\r\n\r\n      let parag = [];\r\n      OUTPUTTEXTEP[lang].pg2Paragraphs.map((item) => parag.push(item));\r\n\r\n      paraY = paraY + 2 * lineHeight;\r\n      insertPara(pdf, parag[0], paraLeft, paraY, paraWidth);\r\n\r\n      paraY = paraY + 5 * lineHeight;\r\n      insertPara(pdf, parag[1], paraLeft, paraY, paraWidth);\r\n\r\n      paraY = paraY + (lang === \"en\" ? 4.5 : 5.5) * lineHeight;\r\n      insertBullet(pdf, \".\", paraLeft + indent, paraY, BULLET_FONT_SIZE);\r\n      insertPara(pdf, parag[2], paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      paraY = paraY + 1.2 * lineHeight;\r\n      insertBullet(pdf, \".\", paraLeft + indent, paraY, BULLET_FONT_SIZE);\r\n      insertPara(pdf, parag[3], paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      paraY = paraY + 2 * lineHeight;\r\n      insertPara(pdf, parag[4], paraLeft, paraY, paraWidth);\r\n\r\n      paraY = paraY + 3 * lineHeight;\r\n      insertBullet(pdf, \".\", paraLeft + indent, paraY, BULLET_FONT_SIZE);\r\n      insertPara(pdf, parag[5], paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      paraY = paraY + 1.2 * lineHeight;\r\n      insertBullet(pdf, \".\", paraLeft + indent, paraY, BULLET_FONT_SIZE);\r\n      insertPara(pdf, parag[6], paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      paraY = paraY + 3 * lineHeight;\r\n      insertPara(pdf, parag[7], paraLeft, paraY, paraWidth);\r\n\r\n      paraY = paraY + 3 * lineHeight;\r\n      insertBullet(pdf, \".\", paraLeft + indent, paraY, BULLET_FONT_SIZE);\r\n      insertPara(pdf, parag[8], paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      paraY = paraY + 1.2 * lineHeight;\r\n      insertBullet(pdf, \".\", paraLeft + indent, paraY, BULLET_FONT_SIZE);\r\n      insertPara(pdf, parag[9], paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      paraY = paraY + 1.2 * lineHeight;\r\n      insertBullet(pdf, \".\", paraLeft + indent, paraY, BULLET_FONT_SIZE);\r\n      insertPara(pdf, parag[10], paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      /*end ofPage 2*/\r\n      pdf.addFooterAndHeader(headerOffset, footerText, headerText);\r\n\r\n      /*/*-Your FEPncial Situation\t\t// Page 3*/\r\n      // logo if asked for\r\n      //    pdf.addCustomImage(\"EPOtherPagesLogo\", pg1TitleY, image);\r\n      result =\r\n        result &&\r\n        pdf.addCustomImage(IMAGE_LOGO_OTHERPAGES, pg1TitleY, image, false, top);\r\n\r\n      paraY = 8 * lineHeight;\r\n      setFontForTitle(pdf, lang);\r\n      pdf.Text(OUTPUTTEXTEP[lang].pg3T, InToPt(paraLeft), InToPt(paraY));\r\n      setFontForParas(pdf);\r\n\r\n      paraY = paraY + 2 * lineHeight;\r\n      paragraph = OUTPUTTEXTEP[lang].pg3P1;\r\n      insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n      // assets table\r\n      let tableWidthAss =\r\n        lang === \"fr\" ? paraWidth / 2 + 0.3 : paraWidth / 2 - 0.2;\r\n      let totalAssets = 0;\r\n      height = 0.24;\r\n      Widths = [paraWidth / 4 + 0.4, paraWidth / 4 - 0.6];\r\n      if (lang === \"fr\")\r\n        Widths = [(3 * tableWidthAss) / 4 + 0.1, tableWidthAss / 4 - 0.1];\r\n\r\n      paraY = paraY + 3.2 * lineHeight;\r\n      const tmpY = paraY;\r\n      values = [OUTPUTTEXTEP[lang].pg3TabT];\r\n\r\n      let align = [];\r\n      insertTableTitle(pdf, paraLeft, paraY, values, height, [\r\n        tableWidthAss + 0.01,\r\n      ]);\r\n\r\n      output.assets.map((element) => {\r\n        values = [\r\n          element.name +\r\n            (element.name === ASSETS.OTHER_ASSETS.value[lang] &&\r\n            element.value > 0\r\n              ? \" *\"\r\n              : \"\"),\r\n          formatMoney2(element.value, 0, lang),\r\n        ];\r\n        //   console.log(values)\r\n        align.push(0);\r\n        align.push(2);\r\n        totalAssets += parseFloat(element.value);\r\n        paraY = paraY + height;\r\n        insertTableRow(\r\n          pdf,\r\n          paraLeft,\r\n          paraY,\r\n          values,\r\n          height,\r\n          Widths,\r\n          false,\r\n          [249, 249, 249],\r\n          align\r\n        );\r\n      });\r\n\r\n      align = [];\r\n      align.push(2);\r\n      align.push(2);\r\n      paraY = paraY + height;\r\n      insertTableRow(\r\n        pdf,\r\n        paraLeft,\r\n        paraY,\r\n        [OUTPUTTEXTEP[lang].pg3Tab2RTot, formatMoney2(totalAssets, 0, lang)],\r\n        height,\r\n        Widths,\r\n        true,\r\n        [235, 235, 235],\r\n        align\r\n      );\r\n      // other assets footnote\r\n\r\n      if (output.otherAssetsList !== \"\") {\r\n        paraY = paraY + 2.2 * lineHeight;\r\n        paragraph = output.otherAssetsList;\r\n        addNote(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n      }\r\n      setFontForParas(pdf);\r\n      //\r\n\r\n      // liabs table\r\n      let tableWidth =\r\n        lang === \"fr\" ? paraWidth / 2 - 0.05 : paraWidth / 2 - 0.2;\r\n      Widths = [paraWidth / 4 + 0.4, paraWidth / 4 - 0.6];\r\n      if (lang === \"fr\") Widths = [(3 * tableWidth) / 4, tableWidth / 4];\r\n\r\n      let totalLiabs = 0;\r\n      const tableLeft = paraLeft + tableWidthAss + 0.2;\r\n      paraY = tmpY;\r\n      values = [OUTPUTTEXTEP[lang].pg3Tab2T];\r\n      insertTableTitle(pdf, tableLeft, paraY, values, height, [\r\n        tableWidth + 0.01,\r\n      ]);\r\n\r\n      align = [];\r\n      output.liabilities.map((element) => {\r\n        values = [element.name, formatMoney2(element.value, 0, lang)];\r\n        align.push(0);\r\n        align.push(2);\r\n\r\n        totalLiabs += parseFloat(element.value);\r\n        paraY = paraY + height;\r\n        insertTableRow(\r\n          pdf,\r\n          tableLeft,\r\n          paraY,\r\n          values,\r\n          height,\r\n          Widths,\r\n          false,\r\n          [249, 249, 249],\r\n          align\r\n        );\r\n      });\r\n\r\n      align = [];\r\n      align.push(2);\r\n      align.push(2);\r\n\r\n      paraY = paraY + height;\r\n      insertTableRow(\r\n        pdf,\r\n        tableLeft,\r\n        paraY,\r\n        [OUTPUTTEXTEP[lang].pg3Tab2RTot, formatMoney2(totalLiabs, 0, lang)],\r\n        height,\r\n        Widths,\r\n        true,\r\n        [235, 235, 235],\r\n        align\r\n      );\r\n      paraY = paraY + height;\r\n      insertTableRow(\r\n        pdf,\r\n        tableLeft,\r\n        paraY,\r\n        [\r\n          OUTPUTTEXTEP[lang].pg3Tab2NW,\r\n          formatMoney2(totalAssets - totalLiabs, 0, lang),\r\n        ],\r\n        height,\r\n        Widths,\r\n        true,\r\n        [205, 205, 205],\r\n        align\r\n      );\r\n\r\n      //Your growing tax liab\r\n      paraY = paraY + 4.6 * lineHeight;\r\n      setFontForTitle(pdf, lang);\r\n      pdf.Text(OUTPUTTEXTEP[lang].pg3T2, InToPt(paraLeft), InToPt(paraY));\r\n      setFontForParas(pdf);\r\n      //\r\n      paraY = paraY + 2 * lineHeight;\r\n      paragraph = OUTPUTTEXTEP[lang].pg3P2;\r\n      insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n      tableWidth = paraWidth;\r\n      Widths = [\r\n        tableWidth / 4 + 0.4,\r\n        tableWidth / 4 - 0.5,\r\n        tableWidth / 4 - 0.1,\r\n        tableWidth / 4 + 0.12,\r\n      ];\r\n      if (lang === \"fr\")\r\n        Widths = [\r\n          tableWidth / 4 + 0.85,\r\n          tableWidth / 4 - 0.45,\r\n          tableWidth / 4 - 0.25,\r\n          tableWidth / 4 + 0.25,\r\n        ];\r\n\r\n      paraY = paraY + (lang === \"fr\" ? 3.2 : 2.8) * lineHeight;\r\n      values = [\r\n        OUTPUTTEXTEP[lang].pg3Tab3R1C1,\r\n        OUTPUTTEXTEP[lang].pg3Tab3R1C2,\r\n        OUTPUTTEXTEP[lang].pg3Tab3R1C3,\r\n        OUTPUTTEXTEP[lang].pg3Tab3R1C4,\r\n      ];\r\n      const height2 = insertTableTitle(\r\n        pdf,\r\n        paraLeft,\r\n        paraY,\r\n        values,\r\n        height,\r\n        Widths\r\n      );\r\n      paraY = paraY + height + height2;\r\n      //paraY = paraY + height;\r\n      insertTableRow(\r\n        pdf,\r\n        paraLeft,\r\n        paraY,\r\n        [\r\n          OUTPUTTEXTEP[lang].pg3Tab3R2C1,\r\n          AssetLiabProjs.EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_REAL_ESTATE],\r\n          formatMoney2(\r\n            AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_REAL_ESTATE],\r\n            0,\r\n            lang\r\n          ),\r\n          formatMoney2(\r\n            AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_REAL_ESTATE],\r\n            0,\r\n            lang\r\n          ),\r\n        ],\r\n        height,\r\n        Widths,\r\n        false,\r\n        [249, 249, 249],\r\n        align\r\n      );\r\n      paraY = paraY + height;\r\n      insertTableRow(\r\n        pdf,\r\n        paraLeft,\r\n        paraY,\r\n        [\r\n          OUTPUTTEXTEP[lang].pg3Tab3R3C1,\r\n          AssetLiabProjs.EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_STOCKS],\r\n          formatMoney2(\r\n            AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_STOCKS],\r\n            0,\r\n            lang\r\n          ),\r\n          formatMoney2(\r\n            AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_STOCKS],\r\n            0,\r\n            lang\r\n          ),\r\n        ],\r\n\r\n        height,\r\n        Widths,\r\n        false,\r\n        [249, 249, 249],\r\n        align\r\n      );\r\n      paraY = paraY + height;\r\n      insertTableRow(\r\n        pdf,\r\n        paraLeft,\r\n        paraY,\r\n        [\r\n          OUTPUTTEXTEP[lang].pg3Tab3R4C1,\r\n          AssetLiabProjs.EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_SMALL_BUS],\r\n          formatMoney2(\r\n            AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_SMALL_BUS],\r\n            0,\r\n            lang\r\n          ),\r\n          formatMoney2(\r\n            AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_SMALL_BUS],\r\n            0,\r\n            lang\r\n          ),\r\n        ],\r\n\r\n        height,\r\n        Widths,\r\n        false,\r\n        [249, 249, 249],\r\n        align\r\n      );\r\n      paraY = paraY + height;\r\n      insertTableRow(\r\n        pdf,\r\n        paraLeft,\r\n        paraY,\r\n        [\r\n          OUTPUTTEXTEP[lang].pg3Tab3R5C1,\r\n          AssetLiabProjs.EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_RRSP],\r\n          formatMoney2(\r\n            AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_RRSP],\r\n            0,\r\n            lang\r\n          ),\r\n          formatMoney2(\r\n            AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_RRSP],\r\n            0,\r\n            lang\r\n          ),\r\n        ],\r\n        height,\r\n        Widths,\r\n        false,\r\n        [249, 249, 249],\r\n        align\r\n      );\r\n      paraY = paraY + height;\r\n      insertTableRow(\r\n        pdf,\r\n        paraLeft,\r\n        paraY,\r\n        [\r\n          OUTPUTTEXTEP[lang].pg3Tab3R6C1,\r\n          AssetLiabProjs.EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_INTEREST],\r\n          formatMoney2(\r\n            AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_INTEREST],\r\n            0,\r\n            lang\r\n          ),\r\n          formatMoney2(\r\n            AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_INTEREST],\r\n            0,\r\n            lang\r\n          ),\r\n        ],\r\n        height,\r\n        Widths,\r\n        false,\r\n        [249, 249, 249],\r\n        align\r\n      );\r\n      paraY = paraY + height;\r\n      insertTableRow(\r\n        pdf,\r\n        paraLeft,\r\n        paraY,\r\n        [\r\n          OUTPUTTEXTEP[lang].pg3Tab3R7C1,\r\n          AssetLiabProjs.EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_OTHER],\r\n          formatMoney2(\r\n            AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_OTHER],\r\n            0,\r\n            lang\r\n          ),\r\n          formatMoney2(\r\n            AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_OTHER],\r\n            0,\r\n            lang\r\n          ),\r\n        ],\r\n        height,\r\n        Widths,\r\n        false,\r\n        [249, 249, 249],\r\n        align\r\n      );\r\n\r\n      Widths = [\r\n        tableWidth / 4 + (lang === \"fr\" ? 0.6 : 0.1) + tableWidth / 4 - 0.2,\r\n        tableWidth / 4 - (lang === \"fr\" ? 0.25 : 0.1),\r\n        tableWidth / 4 + (lang === \"fr\" ? 0.25 : 0.12),\r\n      ];\r\n      paraY = paraY + height;\r\n      insertTableRow(\r\n        pdf,\r\n        paraLeft,\r\n        paraY,\r\n        [\r\n          OUTPUTTEXTEP[lang].pg3Tab3R8C1,\r\n          formatMoney2(AssetLiabProjs.EstateLiabsByTypeTotal, 0, lang),\r\n          formatMoney2(AssetLiabProjs.EstateLiabsByTypeLE3Total, 0, lang),\r\n        ],\r\n        height,\r\n        Widths,\r\n        true,\r\n        [235, 235, 235],\r\n        align\r\n      );\r\n\r\n      paraY = paraY + 2.2 * lineHeight;\r\n      paragraph = OUTPUTTEXTEP[lang].pg3P4;\r\n      addNote(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n      paraY = paraY + (lang === \"fr\" ? 1.7 : 0.8) * lineHeight;\r\n      paragraph = OUTPUTTEXTEP[lang].pg3P5;\r\n      addNote(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n      /*end ofPage 3*/\r\n      pdf.addFooterAndHeader(headerOffset, footerText, headerText);\r\n      /*/*-Future value of estate\t\t// Page 4*/\r\n      // logo if asked for\r\n      //pdf.addCustomImage(\"EPOtherPagesLogo\", pg1TitleY, image);\r\n      result =\r\n        result &&\r\n        pdf.addCustomImage(IMAGE_LOGO_OTHERPAGES, pg1TitleY, image, false, top);\r\n\r\n      paraY = 8 * lineHeight;\r\n      setFontForTitle(pdf, lang);\r\n      pdf.Text(OUTPUTTEXTEP[lang].pg4T, InToPt(paraLeft), InToPt(paraY));\r\n      setFontForParas(pdf);\r\n\r\n      paraY = paraY + 2 * lineHeight;\r\n      paragraph = OUTPUTTEXTEP[lang].pg4P1;\r\n      insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n      paraY = paraY + 4.7 * lineHeight;\r\n      pdf.AddChart(\r\n        \"stackedChart\",\r\n        InToPt(paraLeft),\r\n        InToPt(paraY),\r\n        InToPt(paraWidth),\r\n        InToPt(20 * lineHeight)\r\n      );\r\n\r\n      paraY = paraY + 20.5 * lineHeight;\r\n      paragraph = OUTPUTTEXTEP[lang].pg4P2 + props.LE + \")\";\r\n      addNote(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n      paraY = paraY + 3.7 * lineHeight;\r\n      paragraph = OUTPUTTEXTEP[lang].pg4P3\r\n        .replace(\r\n          \"X1\",\r\n          formatMoney2(AssetLiabProjs.EstateLiabsByTypeTotal, 0, lang)\r\n        )\r\n        .replace(\r\n          \"X2\",\r\n          formatMoney2(AssetLiabProjs.EstateLiabsByTypeLE3Total, 0, lang)\r\n        );\r\n      pdf.drawRect(paraLeft, paraY - 0.3, paraWidth + 0.4, 3 * height, [\r\n        235,\r\n        235,\r\n        235,\r\n      ]);\r\n      insertPara(pdf, paragraph, paraLeft + 0.2, paraY, paraWidth);\r\n\r\n      paraY = paraY + 3 * lineHeight;\r\n      pdf.AddChart(\r\n        \"pieEstateLeakage\",\r\n        InToPt(paraLeft - 0.7),\r\n        InToPt(paraY),\r\n        InToPt(0.75 * paraWidth),\r\n        InToPt((43 * paraWidth) / 120)\r\n      );\r\n      // paraY = paraY + 5*lineHeight;\r\n      pdf.AddChart(\r\n        \"pieEstateLeakage2\",\r\n        InToPt(paraLeft + 0.48 * paraWidth),\r\n        InToPt(paraY),\r\n        InToPt(0.75 * paraWidth),\r\n        InToPt((43 * paraWidth) / 120)\r\n      );\r\n\r\n      /*end ofPage 4*/\r\n      pdf.addFooterAndHeader(headerOffset, footerText, headerText);\r\n\r\n      /*/*-Estate Protection Alternatives\t\t// Page 5*/\r\n      // logo if asked for\r\n      //    pdf.addCustomImage(\"EPOtherPagesLogo\", pg1TitleY, image);\r\n      result =\r\n        result &&\r\n        pdf.addCustomImage(IMAGE_LOGO_OTHERPAGES, pg1TitleY, image, false, top);\r\n\r\n      paraY = 8 * lineHeight;\r\n      setFontForTitle(pdf, lang);\r\n      pdf.Text(OUTPUTTEXTEP[lang].pg5T, InToPt(paraLeft), InToPt(paraY));\r\n      setFontForParas(pdf);\r\n\r\n      parag = [];\r\n      OUTPUTTEXTEP[lang].pg5Paragraphs.map((item) => parag.push(item));\r\n      //console.log(parag);\r\n\r\n      paraY = paraY + 2 * lineHeight;\r\n      paragraph = parag[0];\r\n      insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n      paraY = paraY + 4 * lineHeight;\r\n      paragraph = parag[1];\r\n      insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n      paraY = paraY + 2.5 * lineHeight;\r\n      paragraph = parag[2];\r\n      insertBullet(\r\n        pdf,\r\n        \"1.\",\r\n        paraLeft + indent,\r\n        paraY,\r\n        NUMBER_BULLET_FONT_SIZE\r\n      );\r\n      insertPara(pdf, paragraph, paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      paraY = paraY + 1.5 * lineHeight;\r\n      paragraph = parag[3];\r\n      insertBullet(\r\n        pdf,\r\n        \"2.\",\r\n        paraLeft + indent,\r\n        paraY,\r\n        NUMBER_BULLET_FONT_SIZE\r\n      );\r\n      insertPara(pdf, paragraph, paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      paraY = paraY + 1.5 * lineHeight;\r\n      paragraph = parag[4];\r\n      insertBullet(\r\n        pdf,\r\n        \"3.\",\r\n        paraLeft + indent,\r\n        paraY,\r\n        NUMBER_BULLET_FONT_SIZE\r\n      );\r\n      insertPara(pdf, paragraph, paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      paraY = paraY + (lang === \"fr\" ? 2.5 : 1.5) * lineHeight;\r\n      paragraph = parag[5];\r\n      insertBullet(\r\n        pdf,\r\n        \"4.\",\r\n        paraLeft + indent,\r\n        paraY,\r\n        NUMBER_BULLET_FONT_SIZE\r\n      );\r\n      insertPara(pdf, paragraph, paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      paraY = paraY + 2 * lineHeight;\r\n      paragraph = parag[6];\r\n      insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n      paraY = paraY + 1.5 * lineHeight;\r\n      paragraph = parag[7];\r\n      insertBullet(\r\n        pdf,\r\n        \"1.\",\r\n        paraLeft + indent,\r\n        paraY,\r\n        NUMBER_BULLET_FONT_SIZE\r\n      );\r\n      insertPara(pdf, paragraph, paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      paraY = paraY + 5 * lineHeight;\r\n      paragraph = parag[8];\r\n      insertBullet(\r\n        pdf,\r\n        \"2.\",\r\n        paraLeft + indent,\r\n        paraY,\r\n        NUMBER_BULLET_FONT_SIZE\r\n      );\r\n      insertPara(pdf, paragraph, paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      paraY = paraY + 6 * lineHeight;\r\n      paragraph = parag[9];\r\n      insertBullet(\r\n        pdf,\r\n        \"3.\",\r\n        paraLeft + indent,\r\n        paraY,\r\n        NUMBER_BULLET_FONT_SIZE\r\n      );\r\n      insertPara(pdf, paragraph, paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      paraY = paraY + 4 * lineHeight;\r\n      paragraph = parag[10];\r\n      insertBullet(\r\n        pdf,\r\n        \"4.\",\r\n        paraLeft + indent,\r\n        paraY,\r\n        NUMBER_BULLET_FONT_SIZE\r\n      );\r\n      insertPara(pdf, paragraph, paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      paraY = paraY + 6 * lineHeight;\r\n      paragraph = OUTPUTTEXTEP[lang].pg5Plast;\r\n\r\n      //this.setDrawColor(235, 235, 235);\r\n      pdf.drawRect(paraLeft, paraY - 0.3, paraWidth + 0.4, 3 * height, [\r\n        235,\r\n        235,\r\n        235,\r\n      ]);\r\n      insertPara(pdf, paragraph, paraLeft + 0.2, paraY, paraWidth);\r\n\r\n      /*end ofPage 5*/\r\n      pdf.addFooterAndHeader(headerOffset, footerText, headerText);\r\n\r\n      /*/*-Using Life Insurance to Preserve Your Estate\t\t// Page 6*/\r\n      // logo if asked for\r\n      //    pdf.addCustomImage(\"EPOtherPagesLogo\", pg1TitleY, image);\r\n      result =\r\n        result &&\r\n        pdf.addCustomImage(IMAGE_LOGO_OTHERPAGES, pg1TitleY, image, false, top);\r\n\r\n      paraY = 8 * lineHeight;\r\n      setFontForTitle(pdf, lang);\r\n      pdf.Text(OUTPUTTEXTEP[lang].pg6T, InToPt(paraLeft), InToPt(paraY));\r\n      setFontForParas(pdf);\r\n\r\n      parag = [];\r\n      OUTPUTTEXTEP[lang].pg6Paragraphs1.map((item) => parag.push(item));\r\n      //console.log(parag);\r\n\r\n      paraY = paraY + 2 * lineHeight;\r\n      paragraph = parag[0];\r\n      insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n      paraY = paraY + 5 * lineHeight;\r\n      paragraph = parag[1];\r\n      insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n      paraY = paraY + 3.5 * lineHeight;\r\n      paragraph = parag[2];\r\n      insertBullet(\r\n        pdf,\r\n        \"1.\",\r\n        paraLeft + indent,\r\n        paraY,\r\n        NUMBER_BULLET_FONT_SIZE\r\n      );\r\n      insertPara(pdf, paragraph, paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      paraY = paraY + 1.4 * lineHeight;\r\n      paragraph = parag[3];\r\n      insertBullet(\r\n        pdf,\r\n        \"2.\",\r\n        paraLeft + indent,\r\n        paraY,\r\n        NUMBER_BULLET_FONT_SIZE\r\n      );\r\n      insertPara(pdf, paragraph, paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      paraY = paraY + 1.4 * lineHeight;\r\n      paragraph = parag[4];\r\n      insertBullet(\r\n        pdf,\r\n        \"3.\",\r\n        paraLeft + indent,\r\n        paraY,\r\n        NUMBER_BULLET_FONT_SIZE\r\n      );\r\n      insertPara(pdf, paragraph, paraLeft + 2.3 * indent, paraY, paraWidth);\r\n\r\n      paraY = paraY + 2 * lineHeight;\r\n      paragraph = parag[5];\r\n      insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n      paraY = paraY + 6 * lineHeight;\r\n      paragraph = parag[6];\r\n      insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n      // reduced after edit\r\n      /*   paraY = paraY + 4 * lineHeight;\r\n    paragraph = parag[7];\r\n    insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n    paraY = paraY + 4 * lineHeight;\r\n    paragraph = parag[8];\r\n    insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n    paraY = paraY + 3 * lineHeight;\r\n    paragraph = parag[9];\r\n    insertPara(pdf, paragraph, paraLeft, paraY, paraWidth); */\r\n\r\n      /*end ofPage 6*/\r\n      //    addFooterAndHeader(pdf, lang);\r\n\r\n      // combine summary page with last\r\n\r\n      /*/*-Summary\t\t// Page 7*/\r\n      // paraY = 8 * lineHeight;\r\n      // logo if asked for\r\n      //    pdf.addCustomImage(\"EPOtherPagesLogo\", pg1TitleY, image);\r\n      result =\r\n        result &&\r\n        pdf.addCustomImage(IMAGE_LOGO_OTHERPAGES, pg1TitleY, image, false, top);\r\n\r\n      paraY = paraY + 8 * lineHeight;\r\n      setFontForTitle(pdf, lang);\r\n      pdf.Text(OUTPUTTEXTEP[lang].pg7T, InToPt(paraLeft), InToPt(paraY));\r\n      setFontForParas(pdf);\r\n\r\n      paraY = paraY + 2 * lineHeight;\r\n      paragraph = OUTPUTTEXTEP[lang].pg7P1;\r\n      pdf.MultilineText(\r\n        paragraph,\r\n        InToPt(paraLeft),\r\n        InToPt(paraY),\r\n        InToPt(paraWidth)\r\n      );\r\n\r\n      /*end ofPage 7*/\r\n      pdf.Footer(OUTPUTTEXTEP[lang].pgFooter);\r\n\r\n      /*/*-Appendix\t\tgrids // Page 8*/\r\n\r\n      // add a landscape page for aggregate grid\r\n\r\n      const LE = props.LE; //- props.assetProjections[0].grid.dataProjection[1][0];\r\n      const offsetLE=4;\r\n      insertGrid2(\r\n        pdf,\r\n        props.aggregateGrid,\r\n        LE,\r\n        paraLeft - 0.2,\r\n        1.65 * paraWidth,\r\n        lang,\r\n        true,\r\n        \"landscape\",\r\n        0,\r\n        GRID_AGGREGATE\r\n      );\r\n      // if too long add another page\r\n      if (\r\n        LE + offsetLE > LINES_PER_PAGE_LANDSCAPE &&\r\n        LE + offsetLE < 2 * LINES_PER_PAGE_LANDSCAPE\r\n      )\r\n        insertGrid2(\r\n          pdf,\r\n          props.aggregateGrid,\r\n          LE,\r\n          paraLeft - 0.2,\r\n          1.65 * paraWidth,\r\n          lang,\r\n          true,\r\n          \"landscape\",\r\n          LINES_PER_PAGE_LANDSCAPE,\r\n          GRID_AGGREGATE\r\n        );\r\n      else if (LE + offsetLE > 2 * LINES_PER_PAGE_LANDSCAPE) {\r\n        insertGrid2(\r\n          pdf,\r\n          props.aggregateGrid,\r\n          LE,\r\n          paraLeft - 0.2,\r\n          1.65 * paraWidth,\r\n          lang,\r\n          true,\r\n          \"landscape\",\r\n          LINES_PER_PAGE_LANDSCAPE,\r\n          GRID_AGGREGATE\r\n        );\r\n        insertGrid2(\r\n          pdf,\r\n          props.aggregateGrid,\r\n          LE,\r\n          paraLeft - 0.2,\r\n          1.65 * paraWidth,\r\n          lang,\r\n          true,\r\n          \"landscape\",\r\n          2 * LINES_PER_PAGE_LANDSCAPE,\r\n          GRID_AGGREGATE\r\n        );\r\n      }\r\n      for (let j = 0; j < props.assetProjections.length; ++j)\r\n        insertGrid2(\r\n          pdf,\r\n          props.assetProjections[j].grid,\r\n          LE,\r\n          paraLeft,\r\n          paraWidth,\r\n          lang,\r\n          true,\r\n          \"portrait\",\r\n          0,\r\n          GRID_INDIVIDUAL\r\n        );\r\n\r\n      /*end ofPage 8*/\r\n      pdf.addFooterAndHeader(headerOffset, footerText, headerText);\r\n\r\n      /*/*-Using Life Insurance to Preserve Your Estate\t\t// Page 6*/\r\n      // logo if asked for\r\n      //    pdf.addCustomImage(\"EPOtherPagesLogo\", pg1TitleY, image);\r\n      result =\r\n        result &&\r\n        pdf.addCustomImage(IMAGE_LOGO_OTHERPAGES, pg1TitleY, image, false, top);\r\n\r\n      paraY = 8 * lineHeight;\r\n      setFontForTitle(pdf, lang);\r\n      pdf.Text(OUTPUTTEXTEP[lang].pg9T, InToPt(paraLeft), InToPt(paraY));\r\n      setFontForParas(pdf);\r\n\r\n      paraY = paraY + 2 * lineHeight;\r\n      insertPara(pdf, OUTPUTTEXTEP[lang].pg9P1, paraLeft, paraY, paraWidth);\r\n      paraY = paraY + (lang === \"fr\" ? 7 : 6) * lineHeight;\r\n      insertPara(pdf, OUTPUTTEXTEP[lang].pg9P2, paraLeft, paraY, paraWidth);\r\n\r\n      //pdf.Footer(OUTPUTTEXTEP[lang].pgFooter);\r\n      // pdf.showOnPage();\r\n      var data = pdf.showOnPage();\r\n\r\n      if (result === false) alert(lang===\"en\"?\"PDF image error\":\"Erreur dimage PDF\");\r\n\r\n      // Done\r\n      pdf.Save(\"PYE_PDF.pdf\");\r\n      return data;\r\n    }\r\n  } catch (error) {}\r\n}\r\n\r\nfunction setFontForTitle(pdf, lang, size) {\r\n  pdf.SetFont(HELVETICA, NORMAL);\r\n  if (size === undefined) {\r\n    if (lang === \"en\") pdf.SetFontSize(PxToPt(25));\r\n    else pdf.SetFontSize(PxToPt(20));\r\n  } else {\r\n    pdf.SetFont(HELVETICA, BOLD);\r\n    if (lang === \"en\") pdf.SetFontSize(PxToPt(size));\r\n    else pdf.SetFontSize(PxToPt(size - 1));\r\n  }\r\n\r\n  pdf.SetTextColor(0x45, 0x55, 0x60);\r\n}\r\n\r\nfunction addNote(pdf, para, left, paraY, paraWidth) {\r\n  setFontForParas(pdf);\r\n  pdf.SetTextColor(150, 150, 150);\r\n  pdf.SetFontSize(PxToPt(12));\r\n  insertPara(pdf, para, left, paraY, paraWidth);\r\n  setFontForParas(pdf);\r\n}\r\n\r\nfunction setFontForParas(pdf) {\r\n  pdf.SetFont(TIMES, NORMAL);\r\n  pdf.SetFontSize(PxToPt(16));\r\n  pdf.SetTextColor(0x45, 0x55, 0x60);\r\n}\r\n\r\nfunction insertBullet(pdf, bullet, left, y, size) {\r\n  pdf.SetTextColor(115, 153, 198);\r\n  pdf.SetFontSize(PxToPt(size));\r\n  pdf.SetFont(TIMES, BOLD);\r\n  pdf.Text(\r\n    bullet,\r\n    InToPt(left + (size === BULLET_FONT_SIZE ? 0.02 : 0)),\r\n    InToPt(y - (size === BULLET_FONT_SIZE ? 0.03 : 0))\r\n  );\r\n  pdf.SetFont(TIMES, NORMAL);\r\n  pdf.SetFontSize(PxToPt(16));\r\n  pdf.SetTextColor(0x45, 0x55, 0x60);\r\n}\r\n\r\nfunction insertPara(pdf, para, left, paraY, paraWidth) {\r\n  pdf.MultilineText(para, InToPt(left), InToPt(paraY), InToPt(paraWidth));\r\n}\r\n\r\nfunction insertTableTitle(\r\n  pdf,\r\n  paraLeft,\r\n  paraY,\r\n  values,\r\n  height,\r\n  paraWidths,\r\n  fillColor\r\n) {\r\n  pdf.SetFontSize(PxToPt(12));\r\n  const fill = fillColor === undefined ? [115, 153, 198] : fillColor;\r\n  const textColor = [255, 255, 255];\r\n  pdf.SetFont(TIMES, BOLD);\r\n  const h = pdf.tableRow(\r\n    fill,\r\n    textColor,\r\n    paraLeft,\r\n    paraY,\r\n    values,\r\n    height,\r\n    paraWidths,\r\n    false,\r\n    false,\r\n    true\r\n  );\r\n  return h;\r\n}\r\n\r\nfunction insertTableRow(\r\n  pdf,\r\n  paraLeft,\r\n  paraY,\r\n  values,\r\n  height,\r\n  paraWidths,\r\n  bold,\r\n  fillColor,\r\n  align\r\n) {\r\n  pdf.SetTextColor(0x45, 0x55, 0x60);\r\n  const fill = fillColor === undefined ? [249, 249, 249] : fillColor;\r\n  const textColor = [0x45, 0x55, 0x60];\r\n  pdf.SetFont(TIMES, bold ? BOLD : NORMAL);\r\n  pdf.tableRow(\r\n    fill,\r\n    textColor,\r\n    paraLeft,\r\n    paraY,\r\n    values,\r\n    height,\r\n    paraWidths,\r\n    true,\r\n    align\r\n  );\r\n}\r\n/* function insertTableRowBold(pdf, paraLeft, paraY, values, height, paraWidths,align) {\r\n  pdf.SetTextColor(0x45, 0x55, 0x60);\r\n  const fill = [235, 235, 235];\r\n  const textColor = [0x45, 0x55, 0x60];\r\n  pdf.SetFont(TIMES, BOLD);\r\n  pdf.tableRow(\r\n    fill,\r\n    textColor,\r\n    paraLeft,\r\n    paraY,\r\n    values,\r\n    height,\r\n    paraWidths,\r\n    true,\r\n    align\r\n  );\r\n}\r\n */\r\n\r\n/* function pdf.addCustomImage( id,pg1TitleY,image,firstPage){\r\n \r\npdf.AddImageFitWidthOnly(\r\n  id,\r\n  InToPt(pg1TitleY - 3 + image.left*HEADER_RECT_IN_W/100), //1.51),\r\n  InToPt(firstPage?1.06:.29),\r\n  InToPt(6.04*image.size/100),\r\n  InToPt(firstPage?2.76:.38) // max height\r\n);\r\n} */\r\n\r\nfunction insertGrid2(\r\n  pdf,\r\n  grid,\r\n  LE,\r\n  paraLeft,\r\n  paraWidth,\r\n  lang,\r\n  wrappedTitleBar,\r\n  orientation,\r\n  startYr,\r\n  mode\r\n) {\r\n  let i;\r\n  let j;\r\n  let cols = grid.dataColTitles.length;\r\n  const height = 0.2;\r\n  let paraY = 2.2 * height;\r\n  let max =\r\n    orientation === \"landscape\"\r\n      ? startYr === 0\r\n        ? LINES_PER_PAGE_LANDSCAPE\r\n        : 2 * LINES_PER_PAGE_LANDSCAPE\r\n      : LINES_PER_PAGE_PORTRAIT;\r\n  const decimalChar = lang === \"en\" ? \".\" : \",\";\r\n  const thousands = lang === \"en\" ? \",\" : \" \";\r\n  //const formatFr = lang === \"fr\" ? true : false;\r\n  let Widths = [];\r\n\r\n  pdf.AddPage(orientation);\r\n\r\n  // Appendix title\r\n  setFontForTitle(pdf, lang, 16);\r\n  let paragraph = OUTPUTTEXTEP[lang].pg8T + \": \" + OUTPUTTEXTEP[lang].pg3T;\r\n  insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n  // Appendix para\r\n  setFontForParas(pdf);\r\n  paraY = paraY + 1.6 * height;\r\n  paragraph =\r\n    (mode === GRID_AGGREGATE\r\n      ? OUTPUTTEXTEP[lang].pg8P1\r\n      : OUTPUTTEXTEP[lang].pg8P2) +\r\n    (mode === GRID_AGGREGATE ? (startYr === 0 ? \"\" : \"\") : \"\");\r\n  insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n  paraY = paraY + 0.5 * height;\r\n\r\n  // grid name and title\r\n  // grid col widths\r\n  Widths.push(paraWidth / (cols + 5)); // year\r\n  Widths.push(paraWidth / (cols + 5)); // age\r\n  for (i = 2; i < cols; ++i) {\r\n    Widths.push((paraWidth - (2 * paraWidth) / (cols + 4)) / (cols - 2));\r\n  }\r\n\r\n  \r\n  // max of 8 columns in portrait\r\n  let totalGridWidth = paraWidth;\r\n  if (mode === GRID_INDIVIDUAL) totalGridWidth = (cols * paraWidth) / 8;\r\n\r\n  let values = grid.dataColTitles;\r\n  let goodWidth = [];\r\n  let totalGoodWidth = 0;\r\n  for (i = 0; i < cols; ++i) {\r\n    goodWidth.push(pdf.textWidth(values[i]));\r\n    totalGoodWidth += goodWidth[i];\r\n  }\r\n  // aportion grid title\r\n  for (i = 0; i < cols; ++i) {\r\n    Widths[i] =goodWidth[i] + 0.15;\r\n    if(Widths[i]>2.1*Widths[0])Widths[i]=2.1*Widths[0]\r\n  }\r\n\r\n  \r\n  let widthTotal = 0;\r\n  for (i = 2; i < cols; ++i) widthTotal += Widths[i];\r\n\r\n  // now check multilines\r\n  let goodWidthMultiLine = [];\r\n  let totalGoodWidthMultiLine = 0;\r\n\r\n  let addMore =\r\n    (totalGridWidth - widthTotal - Widths[0] - Widths[1]) / (cols - 2);\r\n  if (mode === GRID_INDIVIDUAL) {\r\n    if(cols<8)\r\n      for (i = 2; i < cols; ++i) Widths[i] += addMore;\r\n  } else if (mode === GRID_AGGREGATE) {\r\n    addMore =\r\n      (totalGridWidth - widthTotal - Widths[0] - Widths[1]) / (cols - 3);\r\n    for (i = 2; i < cols; ++i) if (i !== 4) Widths[i] += addMore;\r\n  }\r\n\r\n  \r\n\r\n  for (i = 0; i < cols; ++i) {\r\n    goodWidthMultiLine.push(pdf.textWidthMultiLine(values[i], Widths[i]));\r\n    totalGoodWidthMultiLine += goodWidthMultiLine[i];\r\n  }\r\n  // aportion grid title\r\n\r\n  /*  for (i = 0; i < cols; ++i)\r\n    if(Widths[i]<.9*goodWidthMultiLine[i])\r\n        Widths[i]=goodWidthMultiLine[i]/.9\r\n */\r\n  //for (i = 0; i < cols; ++i)\r\n  //console.log(values[i],goodWidth[i],goodWidthMultiLine[i],Widths[i])\r\n  // for (i = 0; i < cols; ++i)\r\n  //  Widths[i]=goodWidthMultiLine[i]/.9*totalGridWidth/totalGoodWidthMultiLine\r\n\r\n  // if(mode===GRID_AGGREGATE)\r\n  {\r\n    paraY = paraY + 0.8 * height;\r\n    paragraph = grid.gridTitle;\r\n    pdf.SetFontSize(PxToPt(12));\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n    paraY = paraY + 0.4 * height;\r\n  }\r\n\r\n  // headers\r\n  //console.log(values)\r\n  const height2 = insertTableTitle(\r\n    pdf,\r\n    paraLeft,\r\n    paraY,\r\n    values,\r\n    height,\r\n    Widths,\r\n    [51, 77, 124]\r\n  );\r\n\r\n  // grid rows\r\n  let rows = startYr;\r\n  let fillColor;\r\n  if (wrappedTitleBar) paraY = paraY + height2;\r\n  // 40 rows per page\r\n  const offsetLE=4\r\n \r\n  while (rows < LE + offsetLE) {\r\n    //grid.dataProjection[0].length) {\r\n\r\n    if (\r\n      rows === max &&\r\n      ((startYr === 0 && LE + offsetLE - rows > 2) ||\r\n        (startYr === LINES_PER_PAGE_LANDSCAPE &&\r\n          LE + LINES_PER_PAGE_LANDSCAPE + offsetLE - rows > 2))\r\n    ) {\r\n      if (mode === GRID_AGGREGATE) {\r\n        insertPara(\r\n          pdf,\r\n          \"\",\r\n          paraLeft,\r\n          paraY + (3 * height) / 2 + 0.1,\r\n          paraWidth\r\n        );\r\n        pdf.FooterLandscape(OUTPUTTEXTEP[lang].pgFooter);\r\n        return rows;\r\n      }\r\n\r\n      rows = LE + offsetLE - 2;\r\n      paraY = paraY + height;\r\n      pdf.SetFont(TIMES, BOLD);\r\n      insertPara(pdf, \"......\", paraLeft, paraY + height / 2, paraWidth);\r\n      pdf.SetFont(TIMES, NORMAL);\r\n    }\r\n    values = [];\r\n\r\n    let align = [];\r\n    for (i = 0; i < cols; ++i) {\r\n      //if(i===0) console.log(grid.dataProjection[i][rows])\r\n      values.push(\r\n        (i === 0 && rows === 0) || i === 1 || i === 11\r\n          ? String(grid.dataProjection[i][rows])\r\n          : formatMoney(\r\n              parseFloat(cleanFormat(grid.dataProjection[i][rows], lang)),\r\n              0,\r\n              decimalChar,\r\n              thousands\r\n            ).toString()\r\n      );\r\n      align.push(2);\r\n    }\r\n    paraY = paraY + height;\r\n    fillColor = rows % 2 ? [249, 249, 249] : [228, 229, 230];\r\n    if (rows == LE) {\r\n      fillColor = [208, 215, 230];\r\n      insertPara(\r\n        pdf,\r\n        lang === \"en\" ? \"LE\" : \"EV\",\r\n        paraLeft + totalGridWidth + 0.15,\r\n        paraY + height / 2 + 0.01,\r\n        paraWidth\r\n      );\r\n    }\r\n    //console.log(values)\r\n    insertTableRow(\r\n      pdf,\r\n      paraLeft,\r\n      paraY,\r\n      values,\r\n      height,\r\n      Widths,\r\n      false,\r\n      fillColor,\r\n      align\r\n    );\r\n\r\n    rows++;\r\n  }\r\n\r\n  if (orientation === \"landscape\")\r\n    pdf.FooterLandscape(OUTPUTTEXTEP[lang].pgFooter);\r\n  else pdf.Footer(OUTPUTTEXTEP[lang].pgFooter);\r\n}","import React from \"react\";\r\nimport { Chart,Bar, Pie } from \"react-chartjs-2\";\r\n//import ChartDataLabels from 'chartjs-plugin-datalabels';\r\n//import \"./Output.css\";\r\nimport \"./Output.css\";\r\nimport { setUIDataToAPI } from \"../data/dataExchange\";\r\nimport { getAssetLiabProjections } from \"../data/aggregateGridProjections\";\r\nimport {\r\n  getProjectedLiabilities,\r\n  getLeakageGraphs\r\n} from \"../utils/helper\";\r\nimport {\r\n  QUOTE_CLIENT,\r\n  QUOTE_SPOUSE,\r\n} from \"../definitions/generalDefinitions\";\r\nimport { OUTPUTTEXTEP } from \"../definitions/outputDefinitionsEP\";\r\n\r\n// for Estate\r\nconst DISPLAY_TAXLIAB_CLIENT = 1;\r\nconst DISPLAY_TAXLIAB_JLTD = 2;\r\n\r\nexport class OutputGraphsEPLeakage extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n   // Chart.plugins.unregister(ChartDataLabels)\r\n  }\r\n  \r\n  render() {\r\n    // get data similar to presentation\r\n  \r\n    const AssetLiabProjs = getAssetLiabProjections(this.props);\r\n    const lang =this.props.dataInput.Presentations[0].language;\r\n    const totalLiabProjections = getProjectedLiabilities(\r\n      this.props.dataInput,\r\n      this.props.projectEnd,\r\n      this.props.probate\r\n    );\r\n\r\n    let dtaAgesAll = [];\r\n    let k;\r\n    let lifeExp = this.props.lifeExp;\r\n    const clients = this.props.dataInput.Clients;\r\n    let age =\r\n      clients.length > 1\r\n        ? Math.min(clients[QUOTE_SPOUSE].Age, clients[QUOTE_CLIENT].Age)\r\n        : clients[QUOTE_CLIENT].Age;\r\n\r\n    //let age = this.props.dataInput.Clients[1].Age;\r\n\r\n    if (this.INAEstateOption === DISPLAY_TAXLIAB_CLIENT) {\r\n      lifeExp = this.props.lifeExpClient;\r\n      age = this.props.dataInput.Clients[QUOTE_CLIENT].Age;\r\n    } else if (this.INAEstateOption === DISPLAY_TAXLIAB_JLTD) {\r\n      lifeExp = this.props.lifeExpJLTD;\r\n      age =\r\n        clients.length > 1\r\n          ? Math.min(clients[QUOTE_SPOUSE].Age, clients[QUOTE_CLIENT].Age)\r\n          : clients[QUOTE_CLIENT].Age;\r\n    }\r\n\r\n    for (k = 0; k <= lifeExp + 3; ++k) {\r\n      dtaAgesAll.push(age + k);\r\n    }\r\n\r\n  const leakageGraps=getLeakageGraphs(this.props.dataInput.Assets,this.props.assetProjections,AssetLiabProjs,totalLiabProjections,\r\n  lang,\r\n  lifeExp)\r\n\r\n\r\n\r\n // leakageGraps.dataPieEstateLeakage.plugins=[ChartDataLabels]\r\n // leakageGraps.dataPieEstateLeakageLE.plugins=[ChartDataLabels]\r\n\r\n leakageGraps.optionsPieEstateLeakage.legend.labels.boxWidth = 20;\r\n leakageGraps.optionsPieEstateLeakageLE.legend.labels.boxWidth = 20;\r\n //optionsPieEstateLeakageLE.legend.labels.position = \"left\";\r\n //leakageGraps.dataPieEstateLeakage.responsive=false\r\n //leakageGraps.dataPieEstateLeakage.maintainAspectRatio=false\r\n  //leakageGraps.optionsPieEstateLeakage.legend.position= \"bottom\"\r\n  //leakageGraps.optionsPieEstateLeakageLE.legend.position= \"bottom\"\r\n \r\nreturn (\r\n  <div style={{ width: \"90%\" }}>\r\n    <div style={{ width: \"100%\" }}>\r\n\r\n        <h3 className=\"ppi1\">\r\n        <div>\r\n          {OUTPUTTEXTEP[lang].graphsLeakageT1} <br />\r\n        </div>\r\n      </h3>\r\n        \r\n        <div style={{ width: \"90%\" }}>\r\n        <article  id=\"pieEstateLeakage\"\r\n            className=\"canvas-containerLeakage\">\r\n            <div className=\"EPGraphDiv\">\r\n            <Pie\r\n              data={leakageGraps.dataPieEstateLeakage}\r\n              options={leakageGraps.optionsPieEstateLeakage}\r\n            />\r\n          </div >\r\n          </article>\r\n        <article  id=\"pieEstateLeakage2\"\r\n            className=\"canvas-containerLeakage\" >\r\n            <div className=\"EPGraphDiv\">\r\n            <Pie\r\n              data={leakageGraps.dataPieEstateLeakageLE}\r\n              options={leakageGraps.optionsPieEstateLeakageLE}\r\n            />\r\n          </div>\r\n        </article>\r\n        </div>\r\n        \r\n\r\n      <br />\r\n      <hr />\r\n    </div>\r\n  </div>\r\n);\r\n\r\n}\r\n\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Pie, Bar, Line, Chart } from \"react-chartjs-2\";\r\nimport \"./Output.css\";\r\nimport { OUTPUTTEXTEP } from \"../definitions/outputDefinitionsEP\";\r\n\r\nimport { TOTALS } from \"../definitions/generalDefinitions\";\r\nexport class OutputGraphStacked extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  render() {\r\n    const lang = this.props.language;\r\n    var optionsEstate = {\r\n      /*  \"hover\": {\r\n        \"animationDuration\": 0\r\n      },\r\n      \"animation\": {\r\n        \"duration\": 1,\r\n        \"onComplete\": function() {\r\n          var chartInstance = this.chart,\r\n            ctx = chartInstance.ctx;\r\n  \r\n          ctx.font = Chart.helpers.fontString(Chart.defaults.global.defaultFontSize, Chart.defaults.global.defaultFontStyle, Chart.defaults.global.defaultFontFamily);\r\n          ctx.textAlign = 'center';\r\n          ctx.textBaseline = 'bottom';\r\n  \r\n          this.data.datasets.forEach(function(dataset, i) {\r\n            var meta = chartInstance.controller.getDatasetMeta(i);\r\n            meta.data.forEach(function(bar, index) {\r\n              var data = dataset.data[index];\r\n              ctx.fillText(data, bar._model.x, bar._model.y - 5);\r\n            });\r\n          });\r\n        }\r\n      }, */\r\n      elements: { point: { radius: 0 } },\r\n      responsive: true,\r\n      title: {\r\n        display: true,\r\n        position: \"top\",\r\n        text: OUTPUTTEXTEP[lang].pg4GT,\r\n        fontSize: 14, //8,\r\n        fontColor: \"#111\",\r\n      },\r\n      legend: {\r\n        display: true,\r\n        position: \"bottom\",\r\n        labels: {\r\n          fontColor: \"#333\",\r\n          fontSize: 12, //16\r\n        },\r\n      },\r\n      scales: {\r\n        yAxes: [\r\n          {\r\n            stacked: true,\r\n            ticks: {\r\n              beginAtZero: true,\r\n              callback: function (value, index, values) {\r\n                let result =\r\n                  value < 1000\r\n                    ? value\r\n                    : lang === \"en\"\r\n                    ? Intl.NumberFormat().format(value / 1000) + \"K\"\r\n                    : (Intl.NumberFormat().format(value / 1000) + \"K\").replace(\r\n                        \",\",\r\n                        \" \"\r\n                      );\r\n                return result;\r\n              },\r\n            },\r\n          },\r\n        ],\r\n        xAxes: [\r\n          {\r\n            stacked: true,\r\n            ticks: {\r\n              beginAtZero: true,\r\n            },\r\n          },\r\n        ],\r\n      },\r\n    };\r\n\r\n    let dataAssetnEstateLiabProj = [];\r\n\r\n    let type = [\"line\", \"bar\"];\r\n\r\n    let col = [];\r\n\r\n    // Estate Liability has to be first to stay on top!\r\n    let data = [];\r\n    const taxLiab = TOTALS.TAX_LIAB.value[this.props.language];\r\n    for (let i = 0; i < this.props.dataAssetnEstateLiabProj.length; ++i) {\r\n      if (this.props.dataAssetnEstateLiabProj[i].name === taxLiab)\r\n        data.push(this.props.dataAssetnEstateLiabProj[i]);\r\n    }\r\n    for (let i = 0; i < this.props.dataAssetnEstateLiabProj.length; ++i) {\r\n      if (this.props.dataAssetnEstateLiabProj[i].name !== taxLiab)\r\n        data.push(this.props.dataAssetnEstateLiabProj[i]);\r\n    }\r\n\r\n    for (let i = 0; i < data.length; ++i) {\r\n      col = [];\r\n      let taxLiabLine = data[i].name === taxLiab ? true : false;\r\n      for (let k = 0; k < this.props.dataAges.length; ++k) {\r\n        col.push(data[i].colour);\r\n      }\r\n      col[this.props.LE] = shadeColor(data[i].colour, -20);\r\n      dataAssetnEstateLiabProj.push({\r\n        type: type[taxLiabLine ? 0 : 1],\r\n        label: data[i].name,\r\n        data: data[i].values, //!== undefined?this.props.dataRE:[],\r\n        fill: taxLiabLine ? false : true,\r\n        borderColor: data[i].colour,\r\n        backgroundColor: col, //this.props.dataAssetnEstateLiabProj[i].colour\r\n      });\r\n    }\r\n\r\n    \r\n\r\n    function shadeColor(color, percent) {\r\n      var R = parseInt(color.substring(1, 3), 16);\r\n      var G = parseInt(color.substring(3, 5), 16);\r\n      var B = parseInt(color.substring(5, 7), 16);\r\n\r\n      R = parseInt((R * (100 + percent)) / 100);\r\n      G = parseInt((G * (100 + percent)) / 100);\r\n      B = parseInt((B * (100 + percent)) / 100);\r\n\r\n      R = R < 255 ? R : 255;\r\n      G = G < 255 ? G : 255;\r\n      B = B < 255 ? B : 255;\r\n\r\n      var RR =\r\n        R.toString(16).length == 1 ? \"0\" + R.toString(16) : R.toString(16);\r\n      var GG =\r\n        G.toString(16).length == 1 ? \"0\" + G.toString(16) : G.toString(16);\r\n      var BB =\r\n        B.toString(16).length == 1 ? \"0\" + B.toString(16) : B.toString(16);\r\n\r\n      return \"#\" + RR + GG + BB;\r\n    }\r\n\r\n    const dataEstate = {\r\n      labels: this.props.dataAges, // this.dataAges,\r\n      datasets: dataAssetnEstateLiabProj,\r\n    };\r\n\r\n    return (\r\n      <div style={{ width: \"90%\" }}>\r\n        <div>\r\n          <article\r\n            id=\"stackedChart\"\r\n            className=\"canvas-containerWeb\"\r\n            style={{ marginLeft: \"25px\", height: \"450px\" }}\r\n          >\r\n            <div\r\n              style={{\r\n                overflow: \"hidden\",\r\n                float: \"left\",\r\n                width: \"100%\",\r\n                height: \"400px\",\r\n              }}\r\n            >\r\n              <Bar data={dataEstate} options={optionsEstate} />\r\n            </div>\r\n          </article>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport \"./Output.css\";\r\nimport { Table } from \"react-bootstrap\";\r\nimport {\r\n  ASSETS,\r\n  ASSET_TAX,\r\n  CONTROLTITLE,\r\n  TOTALS,\r\n  TITLES,\r\n  QUOTE_SPOUSE,\r\n  QUOTE_CLIENT,\r\n  OUTPUT_WIDTH_PCT,\r\n} from \"../definitions/generalDefinitions\";\r\nimport { OUTPUTTEXTEP } from \"../definitions/outputDefinitionsEP\";\r\n//import { Bar } from \"react-chartjs-2\";\r\nimport { doSavePdfActionEP } from \"./OutputPDFEP\";\r\nimport { MultiButtons } from \"./MultiButtons\";\r\nimport { OutputGraphsEPLeakage } from \"./OutputGraphsEPLeakage\";\r\nimport {getLogoAndAppletImage,getAgesEP} from \"../utils/helper\";\r\nimport { getInfoExportINA  } from \"../definitions/infoIconsDefinitions\";\r\nimport { Info } from \"./Info\";\r\n\r\n//import { AdjustibleImage } from \"./AdjustibleImage\";\r\n//import jsPDF from 'jspdf';\r\n//import * as jsPDF from 'jspdf';\r\nimport {\r\n  formatMoney,\r\n  formatMoney2,\r\n  getListItemNameFromKey,\r\n  getProjectedLiabilities,\r\n} from \"../utils/helper\";\r\nimport { getOutputValues, setUIDataToAPI } from \"../data/dataExchange\";\r\nimport { getAssetLiabProjections } from \"../data/aggregateGridProjections\";\r\nimport { OutputGraphStacked } from \"./OutputGraphStacked\";\r\nimport {\r\n  fetchAssetProjectionAPI,\r\n  fetchAssetProjection,\r\n  fetchAssetFMVandTaxLiab,\r\n} from \"../utils/FetchAPIs\";\r\n\r\nimport { getAssetGridValues } from \"../data/assetGridProjections\";\r\nimport DataTable from \"./GridExcelComponent/DataTable\";\r\nimport { isEqual } from \"lodash\";\r\nimport Loader from \"react-loader-spinner\";\r\nimport { AddToHomeScreenOutlined } from \"@material-ui/icons\";\r\n\r\nimport {\r\n  ASSET_TAX_TYPE_PRINCIPAL_RES,\r\n  ASSET_TAX_TYPE_REAL_ESTATE,\r\n  ASSET_TAX_TYPE_STOCKS,\r\n  ASSET_TAX_TYPE_SMALL_BUS,\r\n  ASSET_TAX_TYPE_RRSP,\r\n  ASSET_TAX_TYPE_INTEREST,\r\n  ASSET_TAX_TYPE_OTHER,\r\n  ASSET_TAX_TYPE_COUNT,\r\n} from \"../definitions/outputDefinitionsEP\";\r\n\r\nexport class OutputPresentationEP extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      loading: true,\r\n      showGrids: false,\r\n      image: this.props.dataInput.Presentations[0].adviserLogo.image,\r\n      imageSize: 90,\r\n      imageAlign: 2,\r\n    };\r\n    this.AssetLiabProjs = null;\r\n  }\r\n\r\n\r\n  doINA = async () => {\r\n    //window.top.location.href = 'localhost:8086';\r\n    //window.parent.changeLogo();\r\n   // console.log(this.props);\r\n    /* console.log(\"INA_\" +\r\n    this.props.dataInput.Presentations[0].language +\r\n    \"_\" +\r\n    this.props.encryptedInput,\r\n  \"*\") */\r\n   await window.parent.postMessage(\r\n      \"INA_\" +\r\n        this.props.dataInput.Presentations[0].language +\r\n        \"_\" +\r\n        this.props.encryptedInputLife1AndSpouse,\r\n      \"*\"\r\n    );\r\n\r\n   \r\n  };\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    this.setState({ showGrids: false });\r\n  }\r\n\r\n  clickMultiButton = (e) => {\r\n    let showGrids = true;\r\n    if (e === 1) showGrids = false;\r\n\r\n    this.setState({ showGrids: showGrids });\r\n  };\r\n\r\n  doPDF = () => {\r\n    var data = doSavePdfActionEP(this.props, this.AssetLiabProjs); //, this.dateApplet);\r\n\r\n    // option to embed the pdf\r\n    /* {\r\n      setTimeout(function () {\r\n        document.getElementById(\"obj\").setAttribute(\"data\", data);\r\n        document.getElementById(\"obj\").setAttribute(\"height\", \"0px\");\r\n      }, 1000);\r\n    } */\r\n  };\r\n\r\n  doPrint = () => {\r\n    var mywindow = window.open(\"\", \"PRINT\");\r\n\r\n    mywindow.document.write(\r\n      \"<html><head><title>\" + document.title + \"</title>\"\r\n    );\r\n    mywindow.document.write(\"</head><body >\");\r\n    mywindow.document.write(\"<h1>\" + \"Protecting Your Estate\" + \"</h1>\");\r\n    mywindow.document.write(document.getElementById(\"presentation\").innerHTML);\r\n    mywindow.document.write(\"</body></html>\");\r\n\r\n    mywindow.document.close(); // necessary for IE >= 10\r\n    mywindow.focus(); // necessary for IE >= 10*/\r\n\r\n    mywindow.print();\r\n    mywindow.close();\r\n\r\n    return true;\r\n  };\r\n\r\n  /*  onImageChange = (event) => {\r\n    if (event.target.files && event.target.files[0]) {\r\n      this.setState({\r\n        image: URL.createObjectURL(event.target.files[0])\r\n      });\r\n    }\r\n   } */\r\n\r\n  render() {\r\n    this.AssetLiabProjs = getAssetLiabProjections(this.props);\r\n    \r\n    this.output = getOutputValues(this.props);\r\n    const styleWithLogo = { overflow: \"hidden\", width: \"100%\", overflowX: \"auto\" };\r\n    const styleWithLogoGrids = {width: \"100%\" };\r\n    \r\n    const lang = this.props.dataInput.Presentations[0].language;\r\n    const LE = this.props.LE;\r\n    const clients = this.props.dataInput.Clients;\r\n\r\n    let loaded =\r\n      this.AssetLiabProjs.AssetnEstateLiabs.length > 0 ? true : false;\r\n\r\n    \r\n  \r\n    //let dataAges = [];\r\n\r\n    const startAge =\r\n      clients.length > 1\r\n        ? Math.min(clients[QUOTE_SPOUSE].Age, clients[QUOTE_CLIENT].Age)\r\n        : clients[QUOTE_CLIENT].Age;\r\n    // do to LE+3\r\n\r\n\r\n    let dataAges=getAgesEP (clients, LE)\r\n    \r\n\r\n    let p2 = 1;\r\n    let p5 = 1;\r\n    let p6 = 1;\r\n   \r\n    //const { grids, loading } = this.state;\r\n    let totalAssets = 0;\r\n    let totalLiabs = 0;\r\n    if (this.AssetLiabProjs.projectionsGrids[0] === undefined) {\r\n      return <Loader type=\"TailSpin\" color=\"black\" height={30} width={30} />;\r\n    }\r\n\r\n\r\n    const allPages =\r\n      this.props.dataInput.Presentations[0].adviserLogo.image !== null &&\r\n      this.props.dataInput.Presentations[0].adviserLogo.allPages;\r\n\r\n    let j = 0;\r\n\r\n    const images=getLogoAndAppletImage(this.props.dataInput, this.props.imageRemove,this.props.imageAdjust)\r\n    const logoTop=images.logoTop\r\n    const logoBottom=images.logoBottom\r\n   \r\n\r\n    return (\r\n      <div id=\"presentation\">\r\n        <input\r\n          className=\"roundedCornerCmd\"\r\n          style={{\r\n            //width: \"90px\",\r\n            marginTop: \"-32px\",\r\n                marginRight: \"0px\",\r\n                paddingRight: \"8px\",\r\n                float: \"right\",\r\n          }}\r\n          onClick={this.doPDF}\r\n          type=\"button\"\r\n          value={CONTROLTITLE[lang].pdf}\r\n        />\r\n        <div style={{ width: \"100%\", float: \"left\", clear: \"left\" }}>\r\n\r\n      \r\n\r\n            <input\r\n              className=\"roundedCornerCmd\"\r\n              style={{\r\n           //     width: \"180px\",\r\n                marginTop: \"25px\",\r\n                marginRight: \"0px\",\r\n                paddingRight: \"8px\",\r\n                float: \"right\",\r\n              }}\r\n              onClick={this.doINA}\r\n              type=\"button\"\r\n              value={TITLES[lang].appletINA}\r\n            />{<div style={{\r\n                 paddingTop: \"10px\",\r\n                 float: \"right\",\r\n               }}><Info infoIcon={getInfoExportINA(lang)}/></div>} \r\n          </div>\r\n        {/* <object id=\"obj\" type=\"application/pdf\" width=\"50%\" height=\"0px\">\r\n          <p>\r\n            It appears you don't have a PDF plugin for this browser. Please\r\n            download the PDF file.\r\n          </p>\r\n        </object> */}\r\n\r\n        {/* \r\n<iframe id='iframe' type=\"application/pdf\" style={{width:\"100%\", height:\"auto\", float:\"left\"}}></iframe>\r\n        <input\r\n          className=\"multiButtons multiButtonsAct\"\r\n          style={{\r\n            width: \"90px\",\r\n            marginTop: \"0px\",\r\n            paddingRight: \"8px\",\r\n            float: \"right\",\r\n          }}\r\n          onClick={this.doPDF2}\r\n          type=\"button\"\r\n          value={CONTROLTITLE[lang].pdf}\r\n        />\r\n */}\r\n        {/*  <input\r\n          className=\"multiButtons multiButtonsAct\"\r\n          style={{\r\n            width: \"130px\",\r\n            marginTop: \"0px\",\r\n            paddingRight: \"8px\",\r\n            float: \"right\",\r\n          }}\r\n          onClick={this.doPrint}\r\n          type=\"button\"\r\n          value={CONTROLTITLE[lang].print}\r\n        />\r\n */}\r\n        {/* <h3 className=\"ppi1\">\r\n          {needTo}: {this.props.insuranceNeed}\r\n        </h3>\r\n */}\r\n\r\n        <div className=\"contentPres\">\r\n          {/* PAGE 1 */}\r\n\r\n          <p />\r\n        {/* add logo */}\r\n          {images.logo1stPage}\r\n            {/* add image */}\r\n            {images.applet}\r\n\r\n{/*           {this.props.dataInput.Presentations[0].adviserLogo.image !== null && (\r\n            <AdjustibleImage\r\n              image={this.props.dataInput.Presentations[0].adviserLogo.image}\r\n              showDetails={\r\n                this.props.dataInput.Presentations[0].adviserLogo.showDetails\r\n              }\r\n              size={this.props.dataInput.Presentations[0].adviserLogo.size}\r\n              imageLeft={this.props.dataInput.Presentations[0].adviserLogo.left}\r\n              allPages={\r\n                this.props.dataInput.Presentations[0].adviserLogo.allPages\r\n              }\r\n              imageRemove={this.props.imageRemove}\r\n              imageAdjust={this.props.imageAdjust}\r\n              ID={\"AdvisorLogo\"}\r\n            />\r\n          )}\r\n          <AdjustibleImage\r\n            image={require(\"../images/estate.protection.applet.cover.graphic.png\")}\r\n            showDetails={false}\r\n            size={OUTPUT_WIDTH_PCT}\r\n            imageLeft={0}\r\n            ID={\"EPPage1\"}\r\n          />\r\n */}          {/*            <img\r\n            className=\"ppi1\"\r\n            id=\"EPPage1\"\r\n            src={require(\"../images/estate.protection.applet.cover.graphic.png\")}\r\n            width=\"90%\"\r\n          />  */}\r\n          <h1 className=\"ppi1\">{OUTPUTTEXTEP[lang].pg1T}</h1>\r\n          <h5 className=\"ppi2\">\r\n            {OUTPUTTEXTEP[lang].pg1P1} {this.output.designedFor}\r\n            <br />\r\n            {OUTPUTTEXTEP[lang].pg1P2} {this.output.designedBy}\r\n            <br />\r\n            {OUTPUTTEXTEP[lang].pg1P3} {this.output.dateApplet}\r\n            <br />\r\n            {OUTPUTTEXTEP[lang].pg1P4} {this.output.province}\r\n            <br />\r\n          </h5>\r\n          <hr className=\"ppi1\" />\r\n          \r\n          {logoBottom}\r\n          {/* PAGE 2 Intro*/}\r\n\r\n          <div style={styleWithLogo}>\r\n          {logoTop}\r\n            {/* {allPages && (\r\n              <AdjustibleImage\r\n                image={this.props.dataInput.Presentations[0].adviserLogo.image}\r\n                showDetails={false}\r\n                size={this.props.dataInput.Presentations[0].adviserLogo.size}\r\n                imageLeft={\r\n                  this.props.dataInput.Presentations[0].adviserLogo.left\r\n                }\r\n                allPages={\r\n                  this.props.dataInput.Presentations[0].adviserLogo.allPages\r\n                }\r\n                imageRemove={this.props.imageRemove}\r\n                imageAdjust={this.props.imageAdjust}\r\n                ID={\"EPOtherPagesLogo\"}\r\n              />\r\n            )} */}\r\n            <br />\r\n            <h2 className=\"ppi1\">{OUTPUTTEXTEP[lang].pg2T}</h2>\r\n            {/* number changed to bullets feek */}\r\n            {OUTPUTTEXTEP[lang].pg2Paragraphs.map((item) => (\r\n              <p className=\"ppi1\" key={p2++}>\r\n                {p2 >= 4 && p2 !== 6 && p2 !== 9 && p2 <= 12 && (\r\n                  <span\r\n                    style={{\r\n                      paddingLeft: \"15px\",\r\n                      paddingRight: \"5px\",\r\n                      color: \"#759AC7\",\r\n                      fontSize: \"18px\",\r\n                      whiteSpace: \"nowrap\",\r\n                    }}\r\n                  >\r\n                    {/*{p2 < 6 ? p2 - 3 : p2 < 9 ? p2 - 4 : p2 - 5}.{\" \"}*/}\r\n                    &#8226;\r\n                  </span>\r\n                )}{\" \"}\r\n                {item}\r\n                <br />\r\n              </p>\r\n            ))}\r\n          </div>\r\n\r\n          {/* PAGE 3 fin situation*/}\r\n          {logoBottom}\r\n          \r\n          <div style={styleWithLogo}>\r\n          {logoTop}\r\n            {/* {allPages && (\r\n              <AdjustibleImage\r\n                image={this.props.dataInput.Presentations[0].adviserLogo.image}\r\n                showDetails={false}\r\n                size={this.props.dataInput.Presentations[0].adviserLogo.size}\r\n                imageLeft={\r\n                  this.props.dataInput.Presentations[0].adviserLogo.left\r\n                }\r\n                allPages={\r\n                  this.props.dataInput.Presentations[0].adviserLogo.allPages\r\n                }\r\n                imageRemove={this.props.imageRemove}\r\n                imageAdjust={this.props.imageAdjust}\r\n              />\r\n            )} */}\r\n            <br />\r\n            <h2 className=\"ppi1\">{OUTPUTTEXTEP[lang].pg3T}</h2>\r\n            <p className=\"ppi1\">{OUTPUTTEXTEP[lang].pg3P1}</p>\r\n\r\n            <div style={{ fontSize: \"14px\" }}>\r\n              <div style={{ paddingLeft: \"20px\", width: \"35%\", float: \"left\" }}>\r\n                <div>\r\n                  <table\r\n                    className=\"tableEP\"\r\n                    style={{ paddingLeft: \"10px\", width: \"100%\" }}\r\n                  >\r\n                    <tbody>\r\n                      <tr>\r\n                        <th className=\"tableTitleEP\" colSpan=\"2\">\r\n                          {OUTPUTTEXTEP[lang].pg3TabT}\r\n                        </th>\r\n                      </tr>\r\n                      {/* add assets*/}\r\n                      {this.output.assets.map((item) => {\r\n                        totalAssets += item.value;\r\n                        return (\r\n                          <tr key={item.name}>\r\n                            <td style={{ height: \"1px\", width: \"65%\" }}>\r\n                              {item.name}\r\n                              {item.name === ASSETS.OTHER_ASSETS.value[lang] &&\r\n                              item.value > 0\r\n                                ? \" *\"\r\n                                : \"\"}\r\n                            </td>\r\n                            <td\r\n                              className=\"textalignright\"\r\n                              style={{ height: \"1px\" }}\r\n                            >\r\n                              {/* ${formatMoney(item.value, 0, \",\", \",\")} */}\r\n                              {formatMoney2(item.value, 0, lang)}\r\n                            </td>\r\n                          </tr>\r\n                        );\r\n                      })}\r\n                      <tr\r\n                        key={\"totalAssets\"}\r\n                        style={{\r\n                          height: \"1px\",\r\n                          width: \"65%\",\r\n                          backgroundColor: \"#f0f0f5\",\r\n                          textAlign: \"right\",\r\n                        }}\r\n                      >\r\n                        <td>{OUTPUTTEXTEP[lang].pg3Tab2RTot}</td>\r\n                        <td\r\n                          className=\"textalignright\"\r\n                          style={{ height: \"1px\" }}\r\n                        >\r\n                          {/* ${formatMoney(totalAssets, 0, \",\", \",\")} */}\r\n                          {formatMoney2(totalAssets, 0, lang)}\r\n                        </td>\r\n                      </tr>\r\n                    </tbody>\r\n                  </table>\r\n                  {this.output.otherAssetsList !== \"\" && (\r\n                    <p\r\n                      className=\"ppi1\"\r\n                      style={{\r\n                        color: \"darkgrey\",\r\n                        marginTop: \"3px\",\r\n                        marginLeft: \"-10px\",\r\n                        fontSize: \"12px\",\r\n                        float: \"left\",\r\n                      }}\r\n                    >\r\n                      {this.output.otherAssetsList}\r\n                    </p>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              <div style={{ paddingLeft: \"23px\", width: \"38%\", float: \"left\" }}>\r\n                <div>\r\n                  <table\r\n                    className=\"tableEP\"\r\n                    style={{ paddingLeft: \"10px\", width: \"100%\" }}\r\n                  >\r\n                    <tbody>\r\n                      <tr>\r\n                        <th className=\"tableTitleEP\" colSpan=\"2\">\r\n                          {OUTPUTTEXTEP[lang].pg3Tab2T}\r\n                        </th>\r\n                      </tr>\r\n                      {/* liabs*/}\r\n                      {this.output.liabilities.map((item) => {\r\n                        totalLiabs += item.value;\r\n                        return (\r\n                          <tr key={item.name}>\r\n                            <td style={{ width: \"60%\" }}>{item.name}</td>\r\n                            <td className=\"textalignright\">\r\n                              {/* ${formatMoney(item.value, 0, \",\", \",\")} */}\r\n                              {formatMoney2(item.value, 0, lang)}\r\n                            </td>\r\n                          </tr>\r\n                        );\r\n                      })}\r\n                      <tr\r\n                        key={\"totalLiabs\"}\r\n                        style={{\r\n                          height: \"1px\",\r\n                          width: \"65%\",\r\n                          backgroundColor: \"#f0f0f5\",\r\n                          textAlign: \"right\",\r\n                        }}\r\n                      >\r\n                        <td>{OUTPUTTEXTEP[lang].pg3Tab2RTot}</td>\r\n                        <td\r\n                          className=\"textalignright\"\r\n                          style={{ height: \"1px\" }}\r\n                        >\r\n                          {/* ${formatMoney(totalLiabs, 0, \",\", \",\")} */}\r\n                          {formatMoney2(totalLiabs, 0, lang)}\r\n                        </td>\r\n                      </tr>\r\n                      <tr\r\n                        key={\"netWorth\"}\r\n                        style={{\r\n                          height: \"1px\",\r\n                          width: \"65%\",\r\n                          backgroundColor: \"#d1d1e0\",\r\n                          textAlign: \"right\",\r\n                        }}\r\n                      >\r\n                        <td>{OUTPUTTEXTEP[lang].pg3Tab2NW}</td>\r\n                        <td\r\n                          className=\"textalignright\"\r\n                          style={{ height: \"1px\" }}\r\n                        >\r\n                          {/* ${formatMoney(totalAssets-totalLiabs, 0, \",\", \",\")} */}\r\n                          {formatMoney2(totalAssets - totalLiabs, 0, lang)}\r\n                        </td>\r\n                      </tr>\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <h2 className=\"ppi1\">{OUTPUTTEXTEP[lang].pg3T2}</h2>\r\n          <p className=\"ppi1\">{OUTPUTTEXTEP[lang].pg3P2}</p>\r\n          <p className=\"ppi1\">{OUTPUTTEXTEP[lang].pg3P3}</p>\r\n\r\n          <div\r\n            style={{\r\n              fontFamily: \"Georgia, 'Times New Roman', imes, serif\",\r\n              fontSize: \"14px\",\r\n            }}\r\n          >\r\n            <div style={{ paddingLeft: \"20px\", width: \"70%\", float: \"left\" }}>\r\n              <div>\r\n                <table\r\n                  className=\"tableEP\"\r\n                  style={{ paddingLeft: \"10px\", width: \"100%\" }}\r\n                >\r\n                  <tbody>\r\n                    <tr>\r\n                      <th className=\"tableTitleEP\" style={{ width: \"30%\" }}>\r\n                        {OUTPUTTEXTEP[lang].pg3Tab3R1C1}\r\n                      </th>\r\n                      <th className=\"tableTitleEP\" style={{ width: \"20%\" }}>\r\n                        {OUTPUTTEXTEP[lang].pg3Tab3R1C2}\r\n                      </th>\r\n                      <th className=\"tableTitleEP\" style={{ width: \"20%\" }}>\r\n                        {OUTPUTTEXTEP[lang].pg3Tab3R1C3}\r\n                      </th>\r\n                      <th className=\"tableTitleEP\" style={{ width: \"20%\" }}>\r\n                        {OUTPUTTEXTEP[lang].pg3Tab3R1C4}\r\n                      </th>\r\n                    </tr>\r\n                    <tr>\r\n                      <td>{OUTPUTTEXTEP[lang].pg3Tab3R2C1}</td>\r\n                      <td className=\"textalignright\">\r\n                        {\r\n                          this.AssetLiabProjs.EstateLiabsByTypeGrowth[\r\n                            ASSET_TAX_TYPE_REAL_ESTATE\r\n                          ]\r\n                        }\r\n                      </td>\r\n                      <td className=\"textalignright\">\r\n                        {/* $\r\n                        {formatMoney(\r\n                          this.AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_REAL_ESTATE],\r\n                          0,\r\n                          \",\",\r\n                          \",\"\r\n                        )} */}\r\n                        {formatMoney2(\r\n                          this.AssetLiabProjs.EstateLiabsByType[\r\n                            ASSET_TAX_TYPE_REAL_ESTATE\r\n                          ],\r\n                          0,\r\n                          lang\r\n                        )}\r\n                      </td>\r\n                      <td className=\"textalignright\">\r\n                        {/* $\r\n                        {formatMoney(\r\n                          this.AssetLiabProjs.EstateLiabsByTypeLE3[\r\n                            ASSET_TAX_TYPE_REAL_ESTATE\r\n                          ],\r\n                          0,\r\n                          \",\",\r\n                          \",\"\r\n                        )} */}\r\n                        {formatMoney2(\r\n                          this.AssetLiabProjs.EstateLiabsByTypeLE3[\r\n                            ASSET_TAX_TYPE_REAL_ESTATE\r\n                          ],\r\n                          0,\r\n                          lang\r\n                        )}\r\n                      </td>\r\n                    </tr>\r\n                    <tr>\r\n                      <td>{OUTPUTTEXTEP[lang].pg3Tab3R3C1}</td>\r\n                      <td className=\"textalignright\">\r\n                        {\r\n                          this.AssetLiabProjs.EstateLiabsByTypeGrowth[\r\n                            ASSET_TAX_TYPE_STOCKS\r\n                          ]\r\n                        }\r\n                      </td>\r\n                      <td className=\"textalignright\">\r\n                        {/* $\r\n                        {formatMoney(\r\n                          this.AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_STOCKS],\r\n                          0,\r\n                          \",\",\r\n                          \",\"\r\n                        )} */}\r\n                        {formatMoney2(\r\n                          this.AssetLiabProjs.EstateLiabsByType[\r\n                            ASSET_TAX_TYPE_STOCKS\r\n                          ],\r\n                          0,\r\n                          lang\r\n                        )}\r\n                      </td>\r\n                      <td className=\"textalignright\">\r\n                        {/* $\r\n                        {formatMoney(\r\n                          this.AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_STOCKS],\r\n                          0,\r\n                          \",\",\r\n                          \",\"\r\n                        )} */}\r\n                        {formatMoney2(\r\n                          this.AssetLiabProjs.EstateLiabsByTypeLE3[\r\n                            ASSET_TAX_TYPE_STOCKS\r\n                          ],\r\n                          0,\r\n                          lang\r\n                        )}\r\n                      </td>\r\n                    </tr>\r\n                    <tr>\r\n                      <td>{OUTPUTTEXTEP[lang].pg3Tab3R4C1}</td>\r\n                      <td className=\"textalignright\">\r\n                        {\r\n                          this.AssetLiabProjs.EstateLiabsByTypeGrowth[\r\n                            ASSET_TAX_TYPE_SMALL_BUS\r\n                          ]\r\n                        }\r\n                      </td>\r\n                      <td className=\"textalignright\">\r\n                        {/* $\r\n                        {formatMoney(\r\n                          this.AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_SMALL_BUS],\r\n                          0,\r\n                          \",\",\r\n                          \",\"\r\n                        )} */}\r\n                        {formatMoney2(\r\n                          this.AssetLiabProjs.EstateLiabsByType[\r\n                            ASSET_TAX_TYPE_SMALL_BUS\r\n                          ],\r\n                          0,\r\n                          lang\r\n                        )}\r\n                      </td>\r\n                      <td className=\"textalignright\">\r\n                        {/* $\r\n                        {formatMoney(\r\n                          this.AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_SMALL_BUS],\r\n                          0,\r\n                          \",\",\r\n                          \",\"\r\n                        )} */}\r\n                        {formatMoney2(\r\n                          this.AssetLiabProjs.EstateLiabsByTypeLE3[\r\n                            ASSET_TAX_TYPE_SMALL_BUS\r\n                          ],\r\n                          0,\r\n                          lang\r\n                        )}\r\n                      </td>\r\n                    </tr>\r\n                    <tr>\r\n                      <td>{OUTPUTTEXTEP[lang].pg3Tab3R5C1}</td>\r\n                      <td className=\"textalignright\">\r\n                        {\r\n                          this.AssetLiabProjs.EstateLiabsByTypeGrowth[\r\n                            ASSET_TAX_TYPE_RRSP\r\n                          ]\r\n                        }\r\n                      </td>\r\n                      <td className=\"textalignright\">\r\n                        {/* $\r\n                        {formatMoney(\r\n                          this.AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_RRSP],\r\n                          0,\r\n                          \",\",\r\n                          \",\"\r\n                        )} */}\r\n                        {formatMoney2(\r\n                          this.AssetLiabProjs.EstateLiabsByType[\r\n                            ASSET_TAX_TYPE_RRSP\r\n                          ],\r\n                          0,\r\n                          lang\r\n                        )}\r\n                      </td>\r\n                      <td className=\"textalignright\">\r\n                        {/* $\r\n                        {formatMoney(\r\n                          this.AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_RRSP],\r\n                          0,\r\n                          \",\",\r\n                          \",\"\r\n                        )} */}\r\n                        {formatMoney2(\r\n                          this.AssetLiabProjs.EstateLiabsByTypeLE3[\r\n                            ASSET_TAX_TYPE_RRSP\r\n                          ],\r\n                          0,\r\n                          lang\r\n                        )}\r\n                      </td>\r\n                    </tr>\r\n                    <tr>\r\n                      <td>{OUTPUTTEXTEP[lang].pg3Tab3R6C1}</td>\r\n                      <td className=\"textalignright\">\r\n                        {\r\n                          this.AssetLiabProjs.EstateLiabsByTypeGrowth[\r\n                            ASSET_TAX_TYPE_INTEREST\r\n                          ]\r\n                        }\r\n                      </td>\r\n                      <td className=\"textalignright\">\r\n                        {/* $\r\n                        {formatMoney(\r\n                          this.AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_INTEREST],\r\n                          0,\r\n                          \",\",\r\n                          \",\"\r\n                        )} */}\r\n                        {formatMoney2(\r\n                          this.AssetLiabProjs.EstateLiabsByType[\r\n                            ASSET_TAX_TYPE_INTEREST\r\n                          ],\r\n                          0,\r\n                          lang\r\n                        )}\r\n                      </td>\r\n                      <td className=\"textalignright\">\r\n                        {/* $\r\n                        {formatMoney(\r\n                          this.AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_INTEREST],\r\n                          0,\r\n                          \",\",\r\n                          \",\"\r\n                        )} */}\r\n                        {formatMoney2(\r\n                          this.AssetLiabProjs.EstateLiabsByTypeLE3[\r\n                            ASSET_TAX_TYPE_INTEREST\r\n                          ],\r\n                          0,\r\n                          lang\r\n                        )}\r\n                      </td>\r\n                    </tr>\r\n                    <tr>\r\n                      <td>{OUTPUTTEXTEP[lang].pg3Tab3R7C1}</td>\r\n                      <td className=\"textalignright\">\r\n                        {\r\n                          this.AssetLiabProjs.EstateLiabsByTypeGrowth[\r\n                            ASSET_TAX_TYPE_OTHER\r\n                          ]\r\n                        }\r\n                      </td>\r\n                      <td className=\"textalignright\">\r\n                        {/* $\r\n                        {formatMoney(\r\n                          this.AssetLiabProjs.EstateLiabsByType[ASSET_TAX_TYPE_INTEREST],\r\n                          0,\r\n                          \",\",\r\n                          \",\"\r\n                        )} */}\r\n                        {formatMoney2(\r\n                          this.AssetLiabProjs.EstateLiabsByType[\r\n                            ASSET_TAX_TYPE_OTHER\r\n                          ],\r\n                          0,\r\n                          lang\r\n                        )}\r\n                      </td>\r\n                      <td className=\"textalignright\">\r\n                        {/* $\r\n                        {formatMoney(\r\n                          this.AssetLiabProjs.EstateLiabsByTypeLE3[ASSET_TAX_TYPE_INTEREST],\r\n                          0,\r\n                          \",\",\r\n                          \",\"\r\n                        )} */}\r\n                        {formatMoney2(\r\n                          this.AssetLiabProjs.EstateLiabsByTypeLE3[\r\n                            ASSET_TAX_TYPE_OTHER\r\n                          ],\r\n                          0,\r\n                          lang\r\n                        )}\r\n                      </td>\r\n                    </tr>\r\n                    <tr\r\n                      style={{ backgroundColor: \"#f0f0f5\", textAlign: \"right\" }}\r\n                    >\r\n                      <td colSpan=\"2\">{OUTPUTTEXTEP[lang].pg3Tab3R8C1}</td>\r\n                      <td className=\"textalignright\">\r\n                        {/* ${formatMoney(this.AssetLiabProjs.EstateLiabsByTypeTotal, 0, \",\", \",\")} */}\r\n                        {formatMoney2(\r\n                          this.AssetLiabProjs.EstateLiabsByTypeTotal,\r\n                          0,\r\n                          lang\r\n                        )}\r\n                      </td>\r\n                      <td className=\"textalignright\">\r\n                        {/* ${formatMoney(this.AssetLiabProjs.EstateLiabsByTypeLE3Total, 0, \",\", \",\")} */}\r\n                        {formatMoney2(\r\n                          this.AssetLiabProjs.EstateLiabsByTypeLE3Total,\r\n                          0,\r\n                          lang\r\n                        )}\r\n                      </td>\r\n                    </tr>\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </div>\r\n            <p\r\n              className=\"ppi1\"\r\n              style={{\r\n                color: \"darkgrey\",\r\n                marginTop: \"3px\",\r\n                fontSize: \"12px\",\r\n                float: \"left\",\r\n              }}\r\n            >\r\n              {OUTPUTTEXTEP[lang].pg3P4}\r\n              <br />\r\n              {OUTPUTTEXTEP[lang].pg3P5}\r\n            </p>\r\n          </div>\r\n\r\n          {logoBottom}\r\n          \r\n          {/* PAGE 4 fin situation*/}\r\n          <div style={styleWithLogo}>\r\n          {logoTop}\r\n            {/* {allPages && (\r\n              <AdjustibleImage\r\n                image={this.props.dataInput.Presentations[0].adviserLogo.image}\r\n                showDetails={false}\r\n                size={this.props.dataInput.Presentations[0].adviserLogo.size}\r\n                imageLeft={\r\n                  this.props.dataInput.Presentations[0].adviserLogo.left\r\n                }\r\n                allPages={\r\n                  this.props.dataInput.Presentations[0].adviserLogo.allPages\r\n                }\r\n                imageRemove={this.props.imageRemove}\r\n                imageAdjust={this.props.imageAdjust}\r\n              />\r\n            )} */}\r\n            <br />\r\n            <h2 className=\"ppi1\">{OUTPUTTEXTEP[lang].pg4T}</h2>\r\n            <p className=\"ppi1\">{OUTPUTTEXTEP[lang].pg4P1}</p>\r\n          </div>\r\n\r\n          {\r\n            (loaded === true && (\r\n              <OutputGraphStacked\r\n                language={lang}\r\n                dataAges={dataAges}\r\n                dataAssetnEstateLiabProj={this.AssetLiabProjs.AssetnEstateLiabs}\r\n                LE={LE} //\r\n              />\r\n            ))\r\n          }\r\n\r\n          <p\r\n            className=\"ppi1\"\r\n            style={{\r\n              color: \"darkgrey\",\r\n              marginTop: \"-30px\",\r\n              fontSize: \"12px\",\r\n              float: \"left\",\r\n            }}\r\n          >\r\n            {OUTPUTTEXTEP[lang].pg4P2 + LE + \")\"}\r\n          </p>\r\n\r\n          <p\r\n            className=\"ppi1\"\r\n            style={{\r\n              backgroundColor: \"lightgrey\",\r\n              width: \"84%\",\r\n              marginTop: \"30px\",\r\n              paddingTop: \"10px\",\r\n              paddingBottom: \"12px\",\r\n              marginLeft: \"30px\",\r\n            }}\r\n          >\r\n            {OUTPUTTEXTEP[lang].pg4P3\r\n              .replace(\r\n                \"X1\",\r\n                formatMoney2(\r\n                  this.AssetLiabProjs.EstateLiabsByTypeTotal,\r\n                  0,\r\n                  lang\r\n                )\r\n              )\r\n              .replace(\r\n                \"X2\",\r\n                formatMoney2(\r\n                  this.AssetLiabProjs.EstateLiabsByTypeLE3Total,\r\n                  0,\r\n                  lang\r\n                )\r\n              )}\r\n          </p>\r\n\r\n          <div>\r\n            <OutputGraphsEPLeakage\r\n              insuranceNeed={this.props.insuranceNeed}\r\n              projectEnd={startAge + LE + 3}\r\n              dataEstateLiability={this.props.dataEstateLiability}\r\n              dataInput={this.props.dataInput}\r\n              dataNAAges={dataAges}\r\n              probate={this.props.probate}\r\n              lifeExp={LE}\r\n              lifeExpJLTD={LE}\r\n              lifeExpClient={LE}\r\n              INAOption={this.INAOption}\r\n              //dataShortfall={dataShort}\r\n              //dataAPISite={appSiteAPI}\r\n              LE={this.props.LE}\r\n              assetProjections={this.props.assetProjections}\r\n              showLeakageOnly={true}\r\n              //language={lang}\r\n              //projectTo={this.toRetirement ? 0 : 1}\r\n              //periodOption={DISPLAY_LIFEEXP_PLUS_3}\r\n            />\r\n          </div>\r\n\r\n          {logoBottom}\r\n          \r\n          {/* PAGE 5 Estate Protection Alternatives*/}\r\n\r\n          <div style={styleWithLogo}>\r\n          {logoTop}\r\n            {/* {allPages && (\r\n              <AdjustibleImage\r\n                image={this.props.dataInput.Presentations[0].adviserLogo.image}\r\n                showDetails={false}\r\n                size={this.props.dataInput.Presentations[0].adviserLogo.size}\r\n                imageLeft={\r\n                  this.props.dataInput.Presentations[0].adviserLogo.left\r\n                }\r\n                allPages={\r\n                  this.props.dataInput.Presentations[0].adviserLogo.allPages\r\n                }\r\n                imageRemove={this.props.imageRemove}\r\n                imageAdjust={this.props.imageAdjust}\r\n              />\r\n            )} */}\r\n            <br />\r\n            <h2 className=\"ppi1\">{OUTPUTTEXTEP[lang].pg5T}</h2>\r\n\r\n            {OUTPUTTEXTEP[lang].pg5Paragraphs.map((item) => (\r\n              <p className=\"ppi1\" key={p5++}>\r\n                {p5 >= 4 && p5 !== 8 && p5 <= 12 && (\r\n                  <span style={{ paddingLeft: \"15px\", color: \"#759AC7\" }}>\r\n                    {p5 < 8 ? p5 - 3 : p5 - 8}.{\" \"}\r\n                  </span>\r\n                )}{\" \"}\r\n                {item}\r\n                <br />\r\n              </p>\r\n            ))}\r\n\r\n            <p\r\n              className=\"ppi1\"\r\n              style={{\r\n                backgroundColor: \"lightgrey\",\r\n                width: \"84%\",\r\n                marginTop: \"30px\",\r\n                paddingTop: \"10px\",\r\n                paddingBottom: \"12px\",\r\n                marginLeft: \"30px\",\r\n              }}\r\n            >\r\n              {OUTPUTTEXTEP[lang].pg5Plast}\r\n            </p>\r\n          </div>\r\n\r\n          {logoBottom}\r\n          \r\n          {/* PAGE 6 Using Life Insurance to Preserve Your Estate*/}\r\n\r\n          <div\r\n            style={{ overflowX: \"hidden\", overflowY: \"hidden\", width: \"100%\" }}\r\n          >\r\n            {logoTop}\r\n            {/* {allPages && (\r\n              <AdjustibleImage\r\n                image={this.props.dataInput.Presentations[0].adviserLogo.image}\r\n                showDetails={false}\r\n                size={this.props.dataInput.Presentations[0].adviserLogo.size}\r\n                imageLeft={\r\n                  this.props.dataInput.Presentations[0].adviserLogo.left\r\n                }\r\n                allPages={\r\n                  this.props.dataInput.Presentations[0].adviserLogo.allPages\r\n                }\r\n                imageRemove={this.props.imageRemove}\r\n                imageAdjust={this.props.imageAdjust}\r\n              />\r\n            )}\r\n */}\r\n            <br />\r\n            <h2 className=\"ppi1\">{OUTPUTTEXTEP[lang].pg6T}</h2>\r\n            {OUTPUTTEXTEP[lang].pg6Paragraphs1.map((item) => (\r\n              <p className=\"ppi1\" key={p6++}>\r\n                {p6 >= 4 && p6 <= 6 && (\r\n                  <span style={{ paddingLeft: \"15px\", color: \"#759AC7\" }}>\r\n                    {p6 < 8 ? p6 - 3 : p6 - 8}.{\" \"}\r\n                  </span>\r\n                )}{\" \"}\r\n                {item}\r\n                <br />\r\n              </p>\r\n            ))}\r\n            {/*} don't show for now*/}\r\n            {/* {OUTPUTTEXTEP[lang].pg6Paragraphs2.map(item =>\r\n              (<p className=\"ppi1\" key={p6++}>{p6 > 12 && <span style={{ paddingLeft: '15px', color: '#759AC7' }}>&#8226;  </span>} {item}<br /></p>)\r\n            )} */}\r\n          </div>\r\n\r\n          {logoBottom}\r\n          \r\n          {/* PAGE 7 Summary*/}\r\n\r\n          <div style={styleWithLogo}>\r\n          {logoTop}\r\n            {/* {allPages && (\r\n              <AdjustibleImage\r\n                image={this.props.dataInput.Presentations[0].adviserLogo.image}\r\n                showDetails={false}\r\n                size={this.props.dataInput.Presentations[0].adviserLogo.size}\r\n                imageLeft={\r\n                  this.props.dataInput.Presentations[0].adviserLogo.left\r\n                }\r\n                allPages={\r\n                  this.props.dataInput.Presentations[0].adviserLogo.allPages\r\n                }\r\n                imageRemove={this.props.imageRemove}\r\n                imageAdjust={this.props.imageAdjust}\r\n              />\r\n            )} */}\r\n            <br />\r\n            <h2 className=\"ppi1\">{OUTPUTTEXTEP[lang].pg7T}</h2>\r\n            <p className=\"ppi1\">{OUTPUTTEXTEP[lang].pg7P1}</p>\r\n          </div>\r\n\r\n          {/* PAGE 8 appendix ledgers*/}\r\n\r\n          <div style={styleWithLogoGrids}>\r\n            <br />\r\n            <h2 className=\"ppi1\">{OUTPUTTEXTEP[lang].pg8T}</h2>\r\n\r\n            <p className=\"ppi1\">{OUTPUTTEXTEP[lang].pg8P2}</p>\r\n\r\n            <div style={{ marginLeft: \"24px\" }}>\r\n              <MultiButtons\r\n                noButtons={2}\r\n                buttonCaption={[\r\n                  OUTPUTTEXTEP[lang].pg8O1,\r\n                  OUTPUTTEXTEP[lang].pg8O2,\r\n                ]}\r\n                selected={this.state.showGrids ? 2 : 1}\r\n                selectMultiButton={this.clickMultiButton}\r\n              />\r\n            </div>\r\n            <div\r\n              id=\"assetGrid\"\r\n              style={{\r\n                clear: \"both\",\r\n                float: \"left\",\r\n                marginLeft: \"25px\",\r\n              }} /*    onClick={this.clone2}  */\r\n            >\r\n              {this.state.showGrids &&\r\n                this.AssetLiabProjs.projectionsGrids.map((grid) => {\r\n                  //console.log(grid.dataColTitles)\r\n                  return (\r\n                    <DataTable\r\n                      key={j++}\r\n                      dataColTitles={grid.dataColTitles}\r\n                      dataProjection={grid.dataProjection}\r\n                      gridTitle={grid.gridTitle}\r\n                      gridIcons={[]}\r\n                      specialRow={LE - startAge}\r\n                      language={lang}\r\n                    />\r\n                  );\r\n                })}\r\n            </div>\r\n          </div>\r\n\r\n          {logoBottom}\r\n          \r\n          {/* PAGE 9 notes*/}\r\n\r\n          <div style={styleWithLogo}>\r\n          {logoTop}\r\n            {/* {allPages && (\r\n              <AdjustibleImage\r\n                image={this.props.dataInput.Presentations[0].adviserLogo.image}\r\n                showDetails={false}\r\n                size={this.props.dataInput.Presentations[0].adviserLogo.size}\r\n                imageLeft={\r\n                  this.props.dataInput.Presentations[0].adviserLogo.left\r\n                }\r\n                allPages={\r\n                  this.props.dataInput.Presentations[0].adviserLogo.allPages\r\n                }\r\n                imageRemove={this.props.imageRemove}\r\n                imageAdjust={this.props.imageAdjust}\r\n              />\r\n            )} */}\r\n            <br />\r\n            <h2 className=\"ppi1\">{OUTPUTTEXTEP[lang].pg9T}</h2>\r\n\r\n            <p className=\"ppi1\">{OUTPUTTEXTEP[lang].pg9P1}</p>\r\n            <p className=\"ppi1\">{OUTPUTTEXTEP[lang].pg9P2}</p>\r\n\r\n            {logoBottom}\r\n          \r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport {\r\n  OUTPUTTITLE,\r\n  TITLES,\r\n  MEMBER,\r\n  MAX_ORPHAN_DUR_QC,\r\n  MAX_ORPHAN_DUR_NON_QC,\r\n  ORPHAN_AGE_QC,\r\n  ORPHAN_AGE_NON_QC,\r\n  PROVINCE,\r\n  IMAGE_LOGO,\r\n  IMAGE_LOGO_OTHERPAGES,\r\n  IMAGE_APPLET_INA\r\n} from \"../definitions/generalDefinitions\";\r\nimport { OUTPUTTEXT } from \"../definitions/outputDefinitions\";\r\nimport {\r\n  getListItemNameFromKey,\r\n  formatMoney,\r\n  getListItemKeyFromName,\r\n  cleanFormat,\r\n  isSingleFamily,\r\n  getName,\r\n  formatted\r\n} from \"../utils/helper\";\r\nimport { getOutputValues } from \"../data/dataExchange\";\r\n\r\nimport {\r\n  PDF,\r\n  InToPt,\r\n  PxToPt,\r\n  HELVETICA,\r\n  TIMES,\r\n  NORMAL,\r\n  BOLD,\r\n  ITALIC,\r\n} from \"./PDF\";\r\n\r\nconst DISPLAY_INCOME = 1;\r\nconst DISPLAY_TAXLIAB = 2;\r\n\r\nconst LINE_CHART_DIV_ID = \"bar1\";\r\nconst LINE_CHART_DIV2_ID = \"lineChartDiv2\";\r\n\r\nconst LINE_CHART_DIV_STYLE = {\r\n  marginTop: \"65px\",\r\n  marginLeft: \"64px\",\r\n  marginBottom: \"64px\",\r\n  height: \"192px\",\r\n  width: \"384px\",\r\n};\r\n\r\nconst LINE_CHART_DIV2_STYLE = {\r\n  marginTop: \"65px\",\r\n  marginLeft: \"64px\",\r\n  marginBottom: \"64px\",\r\n  height: \"192px\",\r\n  width: \"384px\",\r\n};\r\n\r\nconst TOP_MARGIN = 0.48;\r\nconst PARA_WIDTH = 5.5;\r\n\r\n\r\nasync function getSpouseINA(props)\r\n{\r\n  let data;\r\n  data= await props.getSpouseINA();\r\n  const spouseInsRet=data.dataOutput.dataInsuranceNeeds[0].Value;\r\n  const spouseInsLE=data.dataOutput.dataInsuranceNeeds[1].Value;\r\n  const LESpouse=data.dataOutput.lifeExpectancy.spouse+data.dataInput.Clients[1].Age\r\n\r\n  return {spouseInsRet:spouseInsRet,spouseInsLE:spouseInsLE, LESpouse:LESpouse};\r\n}\r\n\r\nfunction formattedMoneyString(value,lang){\r\n  return formatted(value,lang).toString()\r\n}\r\n\r\n\r\n\r\nexport async function doSavePdfAction(props) {\r\n  let pdf = new PDF();\r\n  pdf.Create();\r\n\r\n  // pdf.ShowGrids = false;\r\n\r\n  var htmlElement;\r\n  var paragraph;\r\n\r\n  // pdf output shared with presentation\r\n  let output = getOutputValues(props);\r\n  const lang = props.dataInput.Presentations[0].language;\r\n  const provinceKey = getListItemKeyFromName(PROVINCE, output.province);\r\n  let maxDur = provinceKey === \"QC\" ? MAX_ORPHAN_DUR_QC : MAX_ORPHAN_DUR_NON_QC;\r\n  let orphAge = provinceKey === \"QC\" ? ORPHAN_AGE_QC : ORPHAN_AGE_NON_QC;\r\n  const clients = props.dataInput.Clients;\r\n  const assets = props.dataInput.Assets;\r\n  const singleFamily = isSingleFamily(clients);\r\n  const labelsBilingual = OUTPUTTEXT[lang];\r\n\r\n  const singlePerson = props.dataInput.Clients.length === 1 ? true : false;\r\n  const thereAfterText=singlePerson ? OUTPUTTEXT[lang].pgTabRowThereAfter_1:OUTPUTTEXT[lang].pgTabRowThereAfter;\r\n  const thereAfterTextSF= singlePerson ? OUTPUTTEXT[lang].pg5TabRow7_1:OUTPUTTEXT[lang].pg5TabRow7\r\n\r\n  const decimalChar = lang === \"en\" ? \".\" : \",\";\r\n  const thousands = lang === \"en\" ? \",\" : \" \";\r\n  const formatFr = lang === \"fr\" ? true : false;\r\n\r\n\r\n  // are there two need periods eg when children this or that\r\n  const twoNeedPercents = output.percent2.length > 0 ? true : false;\r\n  const pg1TitleY = 4.2;\r\n  // Page 1\r\n  pdf.SetFont(HELVETICA, NORMAL);\r\n  if (lang === \"en\") pdf.SetFontSize(PxToPt(36));\r\n  else pdf.SetFontSize(PxToPt(24));\r\n  pdf.SetTextColor(0x45, 0x55, 0x60);\r\n  pdf.Text(\r\n    props.INAOption === DISPLAY_INCOME\r\n      ? TITLES[lang].appletINA\r\n      : TITLES[lang].appletEP,\r\n    InToPt(1.5),\r\n    InToPt(pg1TitleY) //3.5)\r\n  );\r\n  /* \r\n  pdf.AddImageFitWidthOnly(\r\n    \"INAPage1Logo\",\r\n    InToPt(1.51), //1.51),\r\n    InToPt(1.06),\r\n    InToPt(5.54),\r\n    InToPt(2.76) // max height\r\n  ); */\r\n  const image = props.dataInput.Presentations[0].adviserLogo;\r\n  const top = props.dataInput.Presentations[0].adviserLogo.top;\r\n  const pg1ImageID=props.dataInput.Presentations[0].adviserLogo.ID;\r\n\r\n  const imageApp = props.dataInput.Presentations[0].appletImage;\r\n  \r\n  let result;\r\n  result=pdf.addCustomImage(IMAGE_LOGO, pg1TitleY, image, true,top);\r\n\r\n  //result=pdf.addCustomImage(IMAGE_APPLET_INA, InToPt(pg1TitleY + 0.5), imageApp, true,top);\r\n    pdf.AddImage(\r\n    IMAGE_APPLET_INA,\r\n    InToPt(1.51),\r\n    InToPt(pg1TitleY + 0.5), //4.06),\r\n    InToPt(5.54),\r\n    InToPt(2.75)\r\n  ); \r\n   //\tconsole.log(output.clients);\r\n  //\tconsole.log(OUTPUTTEXT[lang].pg1P1);\r\n\r\n  pdf.SetFont(HELVETICA, NORMAL);\r\n  pdf.SetFontSize(PxToPt(18));\r\n  pdf.SetTextColor(0x45, 0x55, 0x60);\r\n  pdf.Text(\r\n    OUTPUTTEXT[lang].pg1P1 + output.designedFor,\r\n    InToPt(1.52),\r\n    InToPt(pg1TitleY + 3.63) //7.13\r\n  );\r\n  pdf.Text(\r\n    OUTPUTTEXT[lang].pg1P2 + output.designedBy,\r\n    InToPt(1.52),\r\n    InToPt(pg1TitleY + 4.13) //7.63)\r\n  );\r\n  pdf.Text(\r\n    OUTPUTTEXT[lang].pg1P3 + output.dateApplet,\r\n    InToPt(1.52),\r\n    InToPt(pg1TitleY + 4.42) //7.92)\r\n  );\r\n  pdf.Text(\r\n    OUTPUTTEXT[lang].pg1P4 + output.province,\r\n    InToPt(1.52),\r\n    InToPt(pg1TitleY + 4.69) //8.19)\r\n  );\r\n\r\n  \r\n\r\n  const headerOffset = image.image === null ? 0 : 0.25;\r\n  const topToTitle_Y  =1.35\r\n  const titleToPara_Y  =1.6\r\n  \r\n  const topMargin = pdf.HEADER_RECT_IN_Y + headerOffset;\r\n  {\r\n    /*---}\t\t\t// Page 2*/\r\n    const footerText = OUTPUTTEXT[lang].pgFooter;\r\n    const headerText = OUTPUTTEXT[lang].pg1T;\r\n    \r\n    pdf.addFooterAndHeader(headerOffset, footerText, headerText);\r\n\r\n    result=result && pdf.addCustomImage(IMAGE_LOGO_OTHERPAGES, pg1TitleY, image,false,top);\r\n\r\n    pdf.SetFont(HELVETICA, NORMAL);\r\n    if (lang === \"en\") pdf.SetFontSize(PxToPt(25));\r\n    else pdf.SetFontSize(PxToPt(20));\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    pdf.Text(\r\n      OUTPUTTITLE[lang].Values[0],\r\n      InToPt(1.5),\r\n      InToPt(headerOffset + topToTitle_Y)\r\n    );\r\n\r\n    pdf.SetFont(TIMES, NORMAL);\r\n    pdf.SetFontSize(PxToPt(16));\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n\r\n    // profile table\r\n    let x = 1.5;\r\n    let y = headerOffset + titleToPara_Y;\r\n    let incY = 0.4;\r\n    let incTableY = 0.25;\r\n    const incColourdRowsY= incTableY + 0.08;\r\n    let height = 0.35;\r\n    const val = singleFamily\r\n      ? labelsBilingual.pg2TabT4Alt\r\n      : labelsBilingual.pg2TabT4;\r\n    let values = [\r\n     (singlePerson? OUTPUTTEXT[lang].pg2TabT1_1:OUTPUTTEXT[lang].pg2TabT1),\r\n      OUTPUTTEXT[lang].pg2TabT2,\r\n      OUTPUTTEXT[lang].pg2TabT3,\r\n      val,\r\n      OUTPUTTEXT[lang].pg2TabT5,\r\n    ];\r\n    let fill = [115, 153, 198];\r\n    let textColor = [255, 255, 255];\r\n    let Widths = [2.3, 0.5, .9, .9,.8]; // add up to PARA_WIDTH=5.5\r\n    if(lang===\"fr\") Widths = [2.0, 0.4, .85, .75,1.4];\r\n    pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n\r\n    \r\n    y += incY+.2;\r\n    fill = [255, 255, 255];\r\n    textColor = [0x45, 0x55, 0x60];\r\n    output.clients.forEach(function (element) {\r\n      \r\n      const len=(getListItemNameFromKey(MEMBER, element.memberKey, lang) + getName(element.name,lang)).length\r\n      values = [\r\n        len>26?getListItemNameFromKey(MEMBER, element.memberKey, lang) :getListItemNameFromKey(MEMBER, element.memberKey, lang) + getName(element.name,lang),\r\n        element.age.toString(),\r\n        formattedMoneyString(element.income,lang)\r\n        /* \"$\" +\r\n          formatMoney(\r\n           element.income,\r\n            0,\r\n            decimalChar,\r\n            thousands\r\n          ) */,\r\n        (singleFamily\r\n          ? (element.memberKey === MEMBER.CLIENT.Key\r\n            ? \"-\"\r\n            : element.ret-element.age) //protectionPeriod\r\n          : element.ret).toString(),\r\n        (clients[element.id - 1].avgTaxRate + \"%\").toString(),\r\n      ];\r\n      pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n      y += incTableY;\r\n      if(len>26){\r\n        values= [\r\n          getName(element.name,lang),\r\n          \"\",\r\n          \"\",\r\n          \"\",\r\n          \"\",\r\n        ];\r\n        pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n        y += incTableY;\r\n    \r\n      }\r\n    });\r\n\r\n    // fin. summary table\r\n    pdf.SetFont(TIMES, NORMAL);\r\n    pdf.SetFontSize(PxToPt(16));\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n\r\n    y += incTableY-.05;\r\n    fill = [115, 153, 198];\r\n    textColor = [255, 255, 255];\r\n    Widths = [4.3, 1.2]; // add up to PARA_WIDTH=5.5\r\n    let values2 = [OUTPUTTEXT[lang].pg2T3, \"\"];\r\n\r\n    pdf.tableRow(fill, textColor, x, y, values2, height, Widths);\r\n\r\n    fill = [255, 255, 255];\r\n    textColor = [0x45, 0x55, 0x60];\r\n    values2 = [\r\n      OUTPUTTEXT[lang].pg2P5,\r\n      (\r\n        formattedMoneyString(output.totalAssetExcludeInsurance,lang)\r\n        /* \"$\" +\r\n        formatMoney(\r\n          output.totalAssetExcludeInsurance,\r\n          0,\r\n          decimalChar,\r\n          thousands\r\n        ) */\r\n      ),\r\n    ];\r\n    y += incY;\r\n    pdf.tableRow(fill, textColor, x, y, values2, height, Widths);\r\n    values2 = [\r\n      OUTPUTTEXT[lang].pg2P6,\r\n      (\r\n        formattedMoneyString(output.totalLiabExcludeDeathRelated,lang)\r\n        /* \r\n        \"$\" +\r\n        formatMoney(\r\n          output.totalLiabExcludeDeathRelated,\r\n          0,\r\n          decimalChar,\r\n          thousands\r\n        ) */\r\n      ),\r\n    ];\r\n    y += incTableY;\r\n    pdf.tableRow(fill, textColor, x, y, values2, height, Widths);\r\n    values2 = OUTPUTTEXT[lang].pg2P7;\r\n    y += incTableY;\r\n    pdf.tableRowSingle(fill, textColor, x+2.8, y, values2, height, Widths,false);\r\n    \r\n    values2 =\r\n      (\r\n        formattedMoneyString(output.totalAssetExcludeInsurance -\r\n          output.totalLiabExcludeDeathRelated,lang)\r\n        \r\n        /* \"$\" +\r\n        formatMoney(\r\n          output.totalAssetExcludeInsurance -\r\n            output.totalLiabExcludeDeathRelated,\r\n          0,\r\n          decimalChar,\r\n          thousands\r\n        ) */\r\n      );\r\n    fill = [196, 223, 224];\r\n    pdf.tableRowSingle(fill, textColor, x+4.3, y, values2, height, Widths, true);\r\n    \r\n    //pdf.tableRow(fill, textColor, x+4.3, y+.065, values2, height-.10, [1.2]);\r\n    fill = [255, 255, 255];\r\n    const allDB=formattedMoneyString(output.totalAssetInsurance+output.govDB,lang);\r\n    const govDB=formattedMoneyString(output.govDB,lang);\r\n    values2 = [\r\n      OUTPUTTEXT[lang].pg2P8.replace(\"yyy\",govDB), \r\n      (\r\n        allDB\r\n      ),\r\n    ];\r\n    y += incColourdRowsY;\r\n    pdf.tableRow(fill, textColor, x, y, values2, height, Widths);\r\n\r\n    values2 = [\r\n      OUTPUTTEXT[lang].pg2P9,\r\n      (\r\n        formattedMoneyString(output.totalLiab - output.totalLiabExcludeDeathRelated,lang)\r\n        \r\n        /* \"$\" +\r\n        formatMoney(\r\n          output.totalLiab - output.totalLiabExcludeDeathRelated,\r\n          0,\r\n          decimalChar,\r\n          thousands\r\n        ) */\r\n      ),\r\n    ];\r\n    y += incTableY;\r\n    pdf.tableRow(fill, textColor, x, y, values2, height, Widths);\r\n    pdf.DrawLine(InToPt(1.5), InToPt(y + incY), InToPt(PARA_WIDTH));\r\n\r\n    // ins\r\n    y += 1.2*incY;\r\n    values2 =  OUTPUTTEXT[lang].pg2P10 + getName(clients[0].Name,lang) +\":\"\r\n    pdf.tableRowSingle(fill, textColor, x, y, values2, height, [PARA_WIDTH],false);\r\n    \r\n    if(!singleFamily)\r\n    {\r\n    values2 = [\r\n      OUTPUTTEXT[lang].pg8TabRow3 + props.LE + \")\",\r\n      \"\"\r\n    ];\r\n    y += incColourdRowsY;\r\n    pdf.tableRow(fill, textColor, x, y, values2, height, Widths);\r\n\r\n    values2 = (\r\n      formattedMoneyString(output.insNeedLE,lang)\r\n        \r\n      /* \"$\" + formatMoney(output.insNeedLE, 0, decimalChar, thousands) */)\r\n    fill = [196, 223, 224];\r\n    pdf.tableRowSingle(fill, textColor, x+4.3, y, values2, height, Widths, true);\r\n\r\n  }\r\n   \r\n  //pdf.tableRow(fill, textColor, x+4.3, y+.065, values2, height-.10, [1.2]);\r\n    fill = [255, 255, 255];\r\n    \r\n    values2 = [\r\n      singleFamily? OUTPUTTEXT[lang].pg8TabRow4Alt.replace(\"A. \",\"\"): OUTPUTTEXT[lang].pg8TabRow4\r\n      \r\n      ,\r\n      \"\",\r\n    ];\r\n    y += incColourdRowsY;\r\n    pdf.tableRow(fill, textColor, x, y, values2, height, Widths);\r\n    \r\n    values2 =(\r\n      formattedMoneyString(output.insNeedRet,lang)\r\n        /* \"$\" + formatMoney(output.insNeedRet, 0, decimalChar, thousands) */)\r\n    fill = [196, 223, 224];\r\n    pdf.tableRowSingle(fill, textColor, x+4.3, y, values2, height, Widths, true);\r\n    fill = [255, 255, 255];\r\n    \r\n    // spouse ins\r\n    if(!singleFamily)\r\n    {\r\n        const spouseSwitched= await getSpouseINA(props)\r\n        const spouseInsRet=cleanFormat(spouseSwitched.spouseInsRet, lang);\r\n        const spouseInsLE=cleanFormat(spouseSwitched.spouseInsLE, lang);\r\n        const LESpouse=spouseSwitched.LESpouse\r\n        pdf.DrawLine(InToPt(1.5), InToPt(y + incY), InToPt(PARA_WIDTH));\r\n    \r\n\r\n        y += 1.2*incY;\r\n        pdf.tableRow(fill, textColor, x, y, [OUTPUTTEXT[lang].pg2P12], height, Widths);\r\n   \r\n        y += 1.35*incY;\r\n        \r\n        values2 =  [OUTPUTTEXT[lang].pg2P11.replace(lang===\"en\"?\" NAME\":\" NOM\", getName(clients[1].Name,lang)) ,\r\n          (\r\n            formattedMoneyString(output.totalAssetInsuranceIfSpouse+output.govDB,lang)\r\n            /*  \"$\" +\r\n            formatMoney(\r\n              output.totalAssetInsuranceIfSpouse+output.govDB,              \r\n              0,\r\n              decimalChar,\r\n              thousands\r\n            ) */\r\n          )]\r\n\r\n          pdf.tableRow(fill, textColor, x, y, values2, height, Widths);\r\n        \r\n        values2 = [\r\n          OUTPUTTEXT[lang].pg8TabRow3 + LESpouse + \")\",\r\n          \"\"\r\n        ];\r\n        y += incColourdRowsY;\r\n        pdf.tableRow(fill, textColor, x, y, values2, height, Widths);\r\n    \r\n        values2 = (\r\n          formattedMoneyString(spouseInsLE,lang)\r\n        /* \"$\" + formatMoney( spouseInsLE, 0, decimalChar, thousands) */)\r\n        fill = [196, 223, 224];\r\n        pdf.tableRowSingle(fill, textColor, x+4.3, y, values2, height, Widths, true);\r\n    \r\n      \r\n      //pdf.tableRow(fill, textColor, x+4.3, y+.065, values2, height-.10, [1.2]);\r\n        fill = [255, 255, 255];\r\n        \r\n        values2 = [\r\n          OUTPUTTEXT[lang].pg8TabRow4\r\n          ,\r\n          \"\",\r\n        ];\r\n        y += incColourdRowsY;\r\n        pdf.tableRow(fill, textColor, x, y, values2, height, Widths);\r\n        \r\n        values2 =(\r\n          formattedMoneyString(spouseInsRet,lang)\r\n        /* \"$\" + formatMoney( spouseInsRet, 0, decimalChar, thousands) */)\r\n        fill = [196, 223, 224];\r\n        pdf.tableRowSingle(fill, textColor, x+4.3, y, values2, height, Widths, true);\r\n        fill = [255, 255, 255];\r\n      \r\n\r\n    }\r\n\r\n\r\n\r\n    // if more than 5 clients move\r\n    if(output.clients.length>lang===\"en\"?4:3){\r\n      pdf.addFooterAndHeader(headerOffset, footerText, headerText);\r\n      /* extra assump PAGE */\r\n      result=result && pdf.addCustomImage(IMAGE_LOGO_OTHERPAGES, pg1TitleY, image,false,top);\r\n      pdf.SetFont(HELVETICA, NORMAL);\r\n      if (lang === \"en\") pdf.SetFontSize(PxToPt(25));\r\n      else pdf.SetFontSize(PxToPt(20));\r\n      pdf.SetFont(TIMES, NORMAL);\r\n      pdf.SetFontSize(PxToPt(16));\r\n      x = 1.5;\r\n      y = headerOffset + titleToPara_Y-.3;\r\n      incY = 0.44;\r\n      height = 0.35;\r\n\r\n    }\r\n    else\r\n      y += 2*incTableY;\r\n    \r\n    // assump table\r\n    pdf.SetFont(TIMES, NORMAL);\r\n    pdf.SetFontSize(PxToPt(16));\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n\r\n    //  pdf.DrawLine(InToPt(1.5), InToPt(y - 0.13), InToPt(PARA_WIDTH));\r\n    // y += .3*incY;\r\n    fill = [115, 153, 198];\r\n    textColor = [255, 255, 255];\r\n    Widths = [4.9, 0.6]; // add up to PARA_WIDTH=5.5\r\n    values2 = [OUTPUTTEXT[lang].pg2T2, \"\"];\r\n\r\n    pdf.tableRow(fill, textColor, x, y, values2, height, Widths);\r\n\r\n    fill = [255, 255, 255];\r\n    textColor = [0x45, 0x55, 0x60];\r\n    values2 = [OUTPUTTEXT[lang].pg7TabRow4, (output.infRate + \"%\").toString()];\r\n    y += incY;\r\n    pdf.tableRow(fill, textColor, x, y, values2, height, Widths);\r\n    values2 = [singlePerson?OUTPUTTEXT[lang].pg7TabRow5_1:OUTPUTTEXT[lang].pg7TabRow5, (output.invRate + \"%\").toString()];\r\n    y += incTableY;\r\n    pdf.tableRow(fill, textColor, x, y, values2, height, Widths);\r\n\r\n    values2 = [\r\n      OUTPUTTEXT[lang].pg2TabT6,\r\n      (\r\n        parseFloat(props.dataInput.Presentations[0].taxRate).toFixed(2) + \"%\"\r\n      ).toString(),\r\n    ];\r\n    y += incTableY;\r\n    pdf.tableRow(fill, textColor, x, y, values2, height, Widths);\r\n\r\n    pdf.SetFont(TIMES, NORMAL);\r\n    pdf.SetFontSize(PxToPt(16));\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n\r\n    y += 2 * incY-.07;\r\n    pdf.DrawLine(InToPt(1.5), InToPt(y - 0.35), InToPt(PARA_WIDTH));\r\n   // y += 0.7 * incY;\r\n\r\n    paragraph = singlePerson?OUTPUTTEXT[lang].pg2Tab2_1: OUTPUTTEXT[lang].pg2Tab2;\r\n    pdf.MultilineText(paragraph, InToPt(1.5), InToPt(y), InToPt(5.6));\r\n\r\n    y += incY -.05;\r\n    paragraph = OUTPUTTEXT[lang].pg2Tab3;\r\n    pdf.MultilineText(paragraph, InToPt(1.5), InToPt(y), InToPt(5.6));\r\n    \r\n    /* // notes\r\n    pdf.SetFont(TIMES, NORMAL);\r\n    pdf.SetFontSize(PxToPt(16));\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n\r\n    y += 2.8 * incY;\r\n    fill = [115, 153, 198];\r\n    textColor = [255, 255, 255];\r\n    Widths = [4.9, 0.6]; // add up to PARA_WIDTH=5.5\r\n    values2 = [OUTPUTTEXT[lang].pg9T, \"\"];\r\n\r\n    pdf.tableRow(fill, textColor, x, y, values2, height, Widths);\r\n\r\n    y += 1.6 * incY;\r\n    paragraph = OUTPUTTEXT[lang].pg9P1;\r\n    pdf.SetFont(TIMES, NORMAL);\r\n    pdf.SetFontSize(PxToPt(16));\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    pdf.MultilineText(paragraph, InToPt(1.5), InToPt(y), InToPt(PARA_WIDTH));\r\n */\r\n    /* \tvalues = [\"Client\", \"$70,000\", \"65\"];\r\n\t\t\ty += incY;\t\r\n\t\t\tpdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n\t\t\tvalues = [\"Spouse\", \"$50,000\", \"65\"];\r\n\t\t\ty +=incY;\r\n\t\t\tpdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n\t\t  */\r\n\r\n    //pdf.SetFillColor(255, 255, 255);\r\n    //pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    //pdf.Rectangle(InToPt(1.5), InToPt(2), InToPt(1.8), InToPt(0.4));\r\n    //pdf.Text(\"Client\", InToPt(1.61), InToPt(2.25));\r\n    //pdf.SetFillColor(255, 255, 255);\r\n    //pdf.Rectangle(InToPt(3.32), InToPt(2), InToPt(1.8), InToPt(0.4));\r\n    //pdf.Text(\"$70,000\", InToPt(3.43), InToPt(2.25));\r\n    //pdf.SetFillColor(255, 255, 255);\r\n    //pdf.Rectangle(InToPt(5.14), InToPt(2), InToPt(1.8), InToPt(0.4));\r\n    //pdf.Text(\"65\", InToPt(5.25), InToPt(2.25));\r\n\r\n    //pdf.SetFillColor(255, 255, 255);\r\n    //pdf.Rectangle(InToPt(1.5), InToPt(2.5), InToPt(1.8), InToPt(0.4));\r\n    //pdf.Text(\"Spouse\", InToPt(1.61), InToPt(2.75));\r\n    //pdf.SetFillColor(255, 255, 255);\r\n    //pdf.Rectangle(InToPt(3.32), InToPt(2.5), InToPt(1.8), InToPt(0.4));\r\n    //pdf.Text(\"$50,000\", InToPt(3.43), InToPt(2.75));\r\n    //pdf.SetFillColor(255, 255, 255);\r\n    //pdf.Rectangle(InToPt(5.14), InToPt(2.5), InToPt(1.8), InToPt(0.4));\r\n    //pdf.Text(\"65\", InToPt(5.25), InToPt(2.75));\r\n\r\n    //\t// Page 3\r\n//    pdf.AddPage();\r\n  //  pdf.Header(headerText, headerOffset);\r\n\r\n    pdf.addFooterAndHeader(headerOffset, footerText, headerText);\r\n\r\n    {\r\n      /* PAGE 3 Family Cash Needs at Death*/\r\n    }\r\n\r\n    // combine 2 and 3\r\n    // logo if asked for\r\n    result=result && pdf.addCustomImage(IMAGE_LOGO_OTHERPAGES, pg1TitleY, image,false,top);\r\n\r\n    pdf.SetFont(HELVETICA, NORMAL);\r\n    if (lang === \"en\") pdf.SetFontSize(PxToPt(25));\r\n    else pdf.SetFontSize(PxToPt(20));\r\n\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    pdf.Text(singlePerson?OUTPUTTEXT[lang].pg3T_1:OUTPUTTEXT[lang].pg3T, InToPt(1.5), InToPt(headerOffset + topToTitle_Y\r\n  ));\r\n\r\n    paragraph =singlePerson?OUTPUTTEXT[lang].pg3P1_1:OUTPUTTEXT[lang].pg3P1;\r\n    pdf.SetFont(TIMES, NORMAL);\r\n    pdf.SetFontSize(PxToPt(16));\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    pdf.MultilineText(\r\n      paragraph,\r\n      InToPt(1.5),\r\n      InToPt(headerOffset + 1.8),\r\n      InToPt(PARA_WIDTH)\r\n    );\r\n\r\n    x = 1.5;\r\n    y = headerOffset + 2.5;\r\n    incY = 0.4;\r\n    height = 0.35;\r\n    Widths = [4.3, 1.2]; // add up to PARA_WIDTH=5.5\r\n\r\n    values = [OUTPUTTEXT[lang].pg3TabT];\r\n    fill = [115, 153, 198];\r\n    textColor = [255, 255, 255];\r\n    pdf.tableRow(fill, textColor, x, y, values, height, [PARA_WIDTH]);\r\n\r\n    fill = [255, 255, 255];\r\n    textColor = [0x45, 0x55, 0x60];\r\n\r\n    y += incY;\r\n    output.liabilities.forEach(function (element) {\r\n      values = [\r\n        element.name,\r\n        (\r\n          formattedMoneyString(element.value,lang)\r\n        /* \"$\" + formatMoney(element.value, 0, decimalChar, thousands) */\r\n        ),\r\n      ];\r\n      pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n      y += incTableY;\r\n    });\r\n    y -= incTableY;\r\n    values = [\r\n      OUTPUTTEXT[lang].pg3TabRTot,\r\n      (\r\n        formattedMoneyString(output.totalLiab,lang)\r\n        /* \"$\" + formatMoney(output.totalLiab, 0, decimalChar, thousands) */\r\n      ),\r\n    ];\r\n    y += incY;\r\n    pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n    pdf.DrawLine(InToPt(1.5), InToPt(y), InToPt(PARA_WIDTH));\r\n\r\n    // pdf.addFooterAndHeader(headerOffset,footerText, headerText);\r\n\r\n    {\r\n      /* PAGE 4 Family Income Needs at Death*/\r\n    }\r\n    // pdf.addCustomImageIMAGE_LOGO_OTHERPAGES, pg1TitleY, image);\r\n\r\n    // combined with page 3\r\n    /*    pdf.SetFont(HELVETICA, NORMAL);\r\n    if (lang === \"en\") pdf.SetFontSize(PxToPt(25));\r\n    else pdf.SetFontSize(PxToPt(20));\r\n\r\n     pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    pdf.Text(OUTPUTTEXT[lang].pg4T, InToPt(1.5), InToPt(topToTitle_Y\r\n  ));\r\n    \r\n    paragraph = OUTPUTTEXT[lang].pg4P1;\r\n    pdf.SetFont(TIMES, NORMAL);\r\n    pdf.SetFontSize(PxToPt(16));\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    pdf.MultilineText(paragraph, InToPt(1.5), InToPt(headerOffset+topToTitle_Y\r\n  ), InToPt(PARA_WIDTH));\r\n/ / this is already in pg 3 so no para here\r\n*/\r\n    x = 1.5;\r\n    //   y = headerOffset+1.65;//2.3; don't go down\r\n    y += incY;\r\n    //incY = 0.44;\r\n    height = 0.35;\r\n    //const Widths = 5;\r\n\r\n    values = [OUTPUTTEXT[lang].pg4TabT];\r\n    fill = [115, 153, 198];\r\n    textColor = [255, 255, 255];\r\n    pdf.tableRow(fill, textColor, x, y, values, height, [PARA_WIDTH]);\r\n\r\n    fill = [255, 255, 255];\r\n    textColor = [0x45, 0x55, 0x60];\r\n\r\n    values = [\r\n      (singlePerson?OUTPUTTEXT[lang].pg4TabRow1_1: OUTPUTTEXT[lang].pg4TabRow1),\r\n      (\r\n        formattedMoneyString(output.Income + output.Income2,lang)\r\n        /* \"$\" +\r\n        formatMoney(output.Income + output.Income2, 0, decimalChar, thousands) */\r\n      ),\r\n    ];\r\n    y += incY;\r\n    pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n\r\n    y += incY;\r\n    pdf.MultilineText(\r\n     singlePerson? OUTPUTTEXT[lang].pg4TabRow2_1:OUTPUTTEXT[lang].pg4TabRow2,\r\n      InToPt(x + 0.1),\r\n      InToPt(y + incY),\r\n      InToPt(3)\r\n    );\r\n\r\n    //values = [OUTPUTTEXT[lang].pg4TabRow2,\"\"];\r\n    y += incY - 0.3;\r\n    pdf.DrawLine(InToPt(1.5), InToPt(y - 0.13), InToPt(PARA_WIDTH));\r\n\r\n    //pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n\r\n    if (twoNeedPercents) {\r\n      values = [\r\n        OUTPUTTEXT[lang].pgTabRowMoreIncome,\r\n        (output.percent1 + \"%\").toString(),\r\n      ];\r\n      y += 2.1 * incY;\r\n      pdf.DrawLine(InToPt(1.5), InToPt(y), InToPt(PARA_WIDTH));\r\n      pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n\r\n      values = [\r\n        thereAfterText,\r\n        //(output.percent2 + \"%\").toString(),\r\n        (output.percent2.map((item) => item + \"% \")).toString(),\r\n      ];\r\n      y += incTableY;\r\n      pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n      //    pdf.DrawLine(InToPt(1.5), InToPt(y), InToPt(PARA_WIDTH));\r\n    } else {\r\n      values = [\r\n        thereAfterText,\r\n        (output.percent1 + \"%\").toString(),\r\n      ];\r\n      y += 2.1 * incY;\r\n      pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n      //  pdf.DrawLine(InToPt(1.5), InToPt(y), InToPt(PARA_WIDTH));\r\n    }\r\n    values = [OUTPUTTEXT[lang].pg4TabRow5, \"\"];\r\n    y += 1.5 * incY;\r\n    pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n    //pdf.DrawLine(InToPt(1.5), InToPt(y), InToPt(PARA_WIDTH));\r\n\r\n    if (twoNeedPercents) {\r\n      values = [\r\n        OUTPUTTEXT[lang].pgTabRowMoreIncome,\r\n        (\r\n          formattedMoneyString(output.percentNeed1,lang)\r\n        /* \"$\" + formatMoney(output.percentNeed1, 0, decimalChar, thousands) */\r\n        ),\r\n      ];\r\n      y += incY;\r\n      pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n      pdf.DrawLine(InToPt(1.5), InToPt(y), InToPt(PARA_WIDTH));\r\n\r\n      values = [\r\n        thereAfterText,\r\n        (\r\n          formattedMoneyString(output.percentNeed2.reduce((a, b) => a + b, 0),lang)\r\n        /* \"$\" + formatMoney(output.percentNeed2.reduce((a, b) => a + b, 0), 0, decimalChar, thousands) */\r\n        ),\r\n      ];\r\n    } else\r\n      values = [\r\n        thereAfterText,\r\n        (\r\n          formattedMoneyString(output.percentNeed1,lang)\r\n        /* \"$\" + formatMoney(output.percentNeed1, 0, decimalChar, thousands) */\r\n        ),\r\n      ];\r\n\r\n    y += incTableY;\r\n    pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n    //pdf.DrawLine(InToPt(1.5), InToPt(y), InToPt(PARA_WIDTH));\r\n    //pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n    //y += incY;\r\n    //pdf.DrawLine(InToPt(1.5), InToPt(y), InToPt(PARA_WIDTH));\r\n\r\n    pdf.addFooterAndHeader(headerOffset, footerText, headerText);\r\n\r\n    {\r\n      /* PAGE 5 Family Cash Sources at Death*/\r\n    }\r\n    result=result && pdf.addCustomImage(IMAGE_LOGO_OTHERPAGES, pg1TitleY, image,false,top);\r\n\r\n    Widths =  lang === \"en\"?[3.35, 1.1, 1.1]:[3.65, .95, .95]; // add up to PARA_WIDTH=5.5\r\n    pdf.SetFont(HELVETICA, NORMAL);\r\n    if (lang === \"en\") pdf.SetFontSize(PxToPt(25));\r\n    else pdf.SetFontSize(PxToPt(20));\r\n\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    pdf.Text(singlePerson?OUTPUTTEXT[lang].pg5T_1:OUTPUTTEXT[lang].pg5T, InToPt(1.5), InToPt(headerOffset + topToTitle_Y\r\n  ));\r\n\r\n    pdf.SetFont(TIMES, NORMAL);\r\n\r\n    pdf.SetFontSize(PxToPt(16));\r\n\r\n    x = 1.5;\r\n    y = headerOffset + titleToPara_Y;\r\n    incY = 0.44;\r\n    height = 0.35;\r\n    //const Widths = 5;\r\n    values = [\r\n      OUTPUTTEXT[lang].pg5TabT,\r\n      OUTPUTTEXT[lang].pg5TabT2,\r\n      OUTPUTTEXT[lang].pg5TabT3,\r\n    ];\r\n    fill = [115, 153, 198];\r\n    textColor = [255, 255, 255];\r\n    pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n\r\n    fill = [255, 255, 255];\r\n    textColor = [0x45, 0x55, 0x60];\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n\r\n    /* if (lang === \"fr\") {\r\n      y += incY;\r\n      y += 0.3;\r\n      pdf.MultilineText(\r\n        OUTPUTTEXT[lang].pg5TabRow1,\r\n        InToPt(x + 0.1),\r\n        InToPt(y),\r\n        InToPt(3)\r\n      );\r\n      pdf.Text(\r\n        \"$\" + formatMoney(output.govDB, 0, decimalChar, thousands),\r\n        InToPt(x + 3.35),\r\n        InToPt(y)\r\n      );\r\n      pdf.Text(\r\n        \"$\" + formatMoney(output.govDB, 0, decimalChar, thousands),\r\n        InToPt(x + 4.45),\r\n        InToPt(y)\r\n      );\r\n    } else */ {\r\n      values = [\r\n        OUTPUTTEXT[lang].pg5TabRow1,\r\n        (\r\n          formattedMoneyString(output.govDB,lang)\r\n        /* \"$\" + formatMoney(output.govDB, 0, decimalChar, thousands) */),\r\n        (\r\n          formattedMoneyString(output.govDB,lang)\r\n        /* \"$\" + formatMoney(output.govDB, 0, decimalChar, thousands) */),\r\n          \r\n      ];\r\n      y += incY;\r\n      pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n    }\r\n\r\n    y += incY;\r\n    output.assets.forEach(function (element) {\r\n      values = [\r\n        element.name,\r\n        (\r\n          formattedMoneyString(element.value,lang)\r\n        /* \"$\" + formatMoney(element.value, 0, decimalChar, thousands) */\r\n        ),\r\n        element.disposeValue > 0\r\n          ? (\r\n            formattedMoneyString(element.disposeValue,lang)\r\n            /* \"$\" + formatMoney(element.disposeValue, 0, decimalChar, thousands) */\r\n            )\r\n          : \"\",\r\n      ];\r\n      pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n      y += incTableY;\r\n    });\r\n\r\n    values = [\r\n      OUTPUTTEXT[lang].pg5TabRow3,\r\n      (\r\n        formattedMoneyString(output.totalAsset,lang)\r\n        /* \"$\" + formatMoney(output.totalAsset, 0, decimalChar, thousands) */\r\n      ),\r\n      (\r\n        formattedMoneyString(output.totalDisposeAsset,lang)\r\n        /* \"$\" + formatMoney(output.totalDisposeAsset, 0, decimalChar, thousands) */\r\n      ),\r\n    ];\r\n    y += incY;\r\n    pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n\r\n   /*  if (lang === \"fr\") {\r\n      y += 0.73 * incY;\r\n      pdf.MultilineText(\r\n        OUTPUTTEXT[lang].pg5TabRow4,\r\n        InToPt(x + 0.1),\r\n        InToPt(y + 0.4),\r\n        InToPt(3)\r\n      );\r\n      pdf.Text(\r\n        \"$\" +\r\n          formatMoney(output.totalLiab, 0, decimalChar, thousands),\r\n        InToPt(x + 4.45),\r\n        InToPt(y + 0.41)\r\n      );\r\n      y += 0.73 * incY;\r\n    } else */ {\r\n      values = [\r\n        singlePerson?OUTPUTTEXT[lang].pg5TabRow4_1: OUTPUTTEXT[lang].pg5TabRow4,\r\n        \"\",\r\n        (\r\n          formattedMoneyString(output.totalLiab,lang)\r\n        /* \"$\" + formatMoney(output.totalLiab, 0, decimalChar, thousands) */\r\n        ),\r\n      ];\r\n      y += incY;\r\n      pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n    }\r\n\r\n    y += incY;\r\n    /* pdf.MultilineText(\r\n      OUTPUTTEXT[lang].pg5TabRow5,\r\n      InToPt(x + 0.1),\r\n      InToPt(y + 0.4),\r\n      InToPt(3)\r\n    ); */\r\n    values = [\r\n      singlePerson?OUTPUTTEXT[lang].pg5TabRow5_1: OUTPUTTEXT[lang].pg5TabRow5,\r\n      \"\",\r\n      (\r\n        formattedMoneyString(output.totalDisposeAsset - output.totalLiab,lang)\r\n        /* \"$\" + formatMoney(output.totalDisposeAsset - output.totalLiab, 0, decimalChar, thousands) */\r\n      ),\r\n    ];\r\n    //y += incY;\r\n    pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n    \r\n    /* pdf.Text(\r\n      \"$\" +\r\n        formatMoney(\r\n          output.totalDisposeAsset - output.totalLiab,\r\n          0,\r\n          decimalChar,\r\n          thousands\r\n        ),\r\n      InToPt(x + 4.45),\r\n      InToPt(y + 0.41)\r\n    ); */\r\n\r\n    y += incY;\r\n    pdf.DrawLine(InToPt(1.5), InToPt(y - 0.43), InToPt(PARA_WIDTH));\r\n\r\n    pdf.addFooterAndHeader(headerOffset, footerText, headerText);\r\n\r\n   \r\n   \r\n   \r\n   \r\n    {\r\n      /* PAGE 6 Family Income Sources at Death*/\r\n    }\r\n    result=result && pdf.addCustomImage(IMAGE_LOGO_OTHERPAGES, pg1TitleY, image,false,top);\r\n    Widths = [4.4, 1.1]; // add up to PARA_WIDTH=5.5\r\n    Widths = [3.0,1.6, .9]; // add up to PARA_WIDTH=5.5\r\n    pdf.SetFont(HELVETICA, NORMAL);\r\n    if (lang === \"en\") pdf.SetFontSize(PxToPt(25));\r\n    else pdf.SetFontSize(PxToPt(20));\r\n\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    pdf.Text(singlePerson?OUTPUTTEXT[lang].pg6T_1: OUTPUTTEXT[lang].pg6T, InToPt(1.5), InToPt(headerOffset + topToTitle_Y\r\n  ));\r\n\r\n    pdf.SetFont(TIMES, NORMAL);\r\n\r\n    pdf.SetFontSize(PxToPt(16));\r\n\r\n    x = 1.5;\r\n    y = headerOffset + titleToPara_Y;\r\n    incY = 0.44;\r\n    height = 0.35;\r\n    //const Widths = 5;\r\n    /* values = [OUTPUTTEXT[lang].pg6TabT];\r\n    fill = [115, 153, 198];\r\n    textColor = [255, 255, 255];\r\n    pdf.tableRow(fill, textColor, x, y, values, height, [PARA_WIDTH]); */\r\n\r\n    values = [\r\n      OUTPUTTEXT[lang].pg6TabT,\r\n      OUTPUTTEXT[lang].pg5TabT2,\r\n      OUTPUTTEXT[lang].pg5TabT3,\r\n    ];\r\n    fill = [115, 153, 198];\r\n    textColor = [255, 255, 255];\r\n    pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n\r\n\r\n\r\n    fill = [255, 255, 255];\r\n    textColor = [0x45, 0x55, 0x60];\r\n\r\n    y += incY;\r\n    output.sources.forEach(function (element) {\r\n      values = [\r\n        element.name,\r\n        (\r\n          formattedMoneyString(element.value,lang)\r\n        /* \"$\" + formatMoney(element.value, 0, decimalChar, thousands) */\r\n        ),\r\n        formattedMoneyString(element.valueAtDeath,lang),\r\n      ];\r\n      pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n      y += incTableY;\r\n    });\r\n    y += incY;\r\n    pdf.MultilineText(\r\n      OUTPUTTEXT[lang].pg6TabRow1,\r\n      InToPt(x + 0.1),\r\n      InToPt(y + 0.35),\r\n      InToPt(3)\r\n    );\r\n    y += incY + 0.3;\r\n    pdf.DrawLine(InToPt(1.5), InToPt(y - 0.04), InToPt(PARA_WIDTH));\r\n    //y += incY+.1;\r\n\r\n    // Widths = [3.1, 1.2, 1.2]; // add up to PARA_WIDTH=5.5\r\n    Widths = [4.8, .8]; // add up to PARA_WIDTH=5.5\r\n  \r\n    if (twoNeedPercents) {\r\n      y += incY - 0.27;\r\n\r\n      pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        x,\r\n        y,\r\n        [OUTPUTTEXT[lang].pgTabRowMoreIncome],\r\n        height,\r\n        Widths\r\n      );\r\n\r\n      pdf.SetFontSize(PxToPt(12));\r\n      pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        x + 3.6,\r\n        y,\r\n        [\r\n          \"(\" +\r\n            labelsBilingual.pg6Net +\r\n            (\r\n              formattedMoneyString(output.totalSourceATaxAtDeath,lang)\r\n        /* \"  $\" +\r\n              formatMoney(output.totalSourceATax, 0, decimalChar, thousands) */\r\n            ).toString() +\r\n            \")\",\r\n        ],\r\n        height,\r\n        Widths\r\n      );\r\n      pdf.SetFontSize(PxToPt(16));\r\n      pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        x + 4.6,\r\n        y,\r\n        [\r\n          (\r\n            formattedMoneyString(output.totalSourceAtDeath,lang)\r\n        /* \"$\" + formatMoney(output.totalSource, 0, decimalChar, thousands) */\r\n          ),\r\n        ],\r\n        height,\r\n        Widths\r\n      );\r\n\r\n      // y += incY;\r\n      y += incColourdRowsY;\r\n\r\n      pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        x,\r\n        y,\r\n        [!singleFamily?thereAfterText: (thereAfterTextSF)],\r\n        height,\r\n        Widths\r\n      );\r\n\r\n      pdf.SetFontSize(PxToPt(12));\r\n      pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        x + 3.6,\r\n        y,\r\n        [\r\n          \"(\" +\r\n            labelsBilingual.pg6Net +\r\n            (\r\n              formattedMoneyString(output.totalSource2ATaxAtDeath,lang)\r\n        /* \"  $\" +\r\n              formatMoney(output.totalSource2ATax, 0, decimalChar, thousands) */\r\n            ).toString() +\r\n            \")\",\r\n        ],\r\n        height,\r\n        Widths\r\n      );\r\n      pdf.SetFontSize(PxToPt(16));\r\n      pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        x + 4.6,\r\n        y,\r\n        [\r\n          (\r\n            formattedMoneyString(output.totalSource2AtDeath,lang)\r\n        /* \"$\" + formatMoney(output.totalSource2, 0, decimalChar, thousands) */\r\n          ),\r\n        ],\r\n        height,\r\n        Widths\r\n      );\r\n\r\n      /* values = [\r\n        OUTPUTTEXT[lang].pgTabRowMoreIncome,\r\n        (\r\n          \"$\" + formatMoney(output.totalSource, 0, decimalChar, thousands)\r\n        ),\r\n      ];\r\n      y += incY - 0.27;\r\n      pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n */\r\n      /*     values = [\r\n        thereAfterText,\r\n        (\r\n          \"$\" + formatMoney(output.totalSource2, 0, decimalChar, thousands)\r\n        ),\r\n      ];\r\n      y += incY;\r\n      pdf.SetFontSize(PxToPt(16));\r\n      pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n\r\n      values = [\r\n        \"(\" + (\"$\" + formatMoney(output.totalSourceATax, 0, decimalChar, thousands)\r\n      ) + \" \" + labelsBilingual.pg6Net + \")\",\r\n    ];\r\n    pdf.SetFontSize(PxToPt(12));\r\n    pdf.tableRow(fill, textColor, x+3, y, values, height, Widths); */\r\n      pdf.SetFontSize(PxToPt(16));\r\n    } else {\r\n      /*    values = [\r\n        thereAfterText,\r\n        (\r\n          \"$\" + formatMoney(output.totalSource1, 0, decimalChar, thousands)\r\n        )\r\n        +\r\n        \"          (\" + (\"$\" + formatMoney(output.totalSource2ATax, 0, decimalChar, thousands)\r\n      ) + \" \" + labelsBilingual.pg6Net + \")\",\r\n      ]; */\r\n      y += incY;\r\n      pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        x,\r\n        y,\r\n        [!singleFamily?thereAfterText: (thereAfterTextSF)],\r\n        height,\r\n        Widths\r\n      );\r\n\r\n      pdf.SetFontSize(PxToPt(12));\r\n      pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        x + 3.6,\r\n        y,\r\n        [\r\n          \"(\" +\r\n            labelsBilingual.pg6Net +\r\n            (\r\n              formattedMoneyString(output.totalSourceATaxAtDeath,lang)\r\n        /* \"  $\" +\r\n              formatMoney(output.totalSourceATax, 0, decimalChar, thousands) */\r\n            ) +\r\n            \")\",\r\n        ],\r\n        height+.1,\r\n        Widths\r\n      );\r\n      pdf.SetFontSize(PxToPt(16));\r\n      pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        x + 4.6,\r\n        y,\r\n        [\r\n          (\r\n            formattedMoneyString(output.totalSourceAtDeath,lang)\r\n        /* \"$\" + formatMoney(output.totalSource, 0, decimalChar, thousands) */\r\n          ),\r\n        ],\r\n        height+.1,\r\n        Widths\r\n      );\r\n\r\n      /*      pdf.tableRow(fill, textColor, x, y, values, height, Widths); */\r\n    }\r\n    y += incY + 0.5;\r\n    pdf.MultilineText(\r\n      OUTPUTTEXT[lang].pgTabRowMoreIncome,\r\n      InToPt(x + 0.1),\r\n      InToPt(y),\r\n      InToPt(3)\r\n    );\r\n    y += incY - 0.13;\r\n    pdf.DrawLine(InToPt(1.5), InToPt(y + 0.26), InToPt(PARA_WIDTH));\r\n\r\n    //values = [OUTPUTTEXT[lang].pgTabRowMoreIncome, (\"$\"+ formatMoney(output.percentNeed1-output.totalSource, 0,decimalChar,thousands))];\r\n    //y += incY;\r\n    //pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n\r\n    //\tvalues = [thereAfterText, (\"$\"+ formatMoney(output.percentNeed2-output.totalSource2, 0,decimalChar,thousands))];\r\n    //\ty += incY;\r\n    //pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n    //#7399C6\r\n    //pdf.Text(thereAfterText,  x, y);\r\n    //pdf.tableRow(fill, textColor, x, y, thereAfterText, [1]);\r\n\r\n    values = [OUTPUTTEXT[lang].pgTabRowMoreIncome];\r\n    y += incY;\r\n    //Widths = [3.1,1.2, 1.2]; // add up to PARA_WIDTH=5.5\r\n    pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n\r\n    if (twoNeedPercents) {\r\n      pdf.SetFontSize(PxToPt(12));\r\n      pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        x + 3.6,\r\n        y,\r\n        [\r\n          \"(\" +\r\n            (\r\n              formatMoney(output.percentNeed1, 0, decimalChar, thousands)\r\n            ).toString() +\r\n            \"-\" +\r\n            (\r\n              \r\n              formatMoney(output.totalSourceATaxAtDeath, 0, decimalChar, thousands)\r\n            ).toString() +\r\n            \")\",\r\n        ],\r\n        height+.1,\r\n        [1.2]\r\n      );\r\n\r\n      pdf.SetFontSize(PxToPt(16));\r\n      fill = [196, 223, 224];\r\n      \r\n      values2=(\r\n        formattedMoneyString(Math.max(0, output.percentNeed1 - output.totalSourceATaxAtDeath),lang)\r\n        /* \"$\" +\r\n        formatMoney(\r\n          Math.max(0, output.percentNeed1 - output.totalSourceATax),\r\n          0,\r\n          decimalChar,\r\n          thousands\r\n        ) */\r\n      )\r\n      pdf.tableRowSingle(fill, textColor, x+4.6, y, values2, height, Widths, true);\r\n      /* pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        x + 4.4,\r\n        y,\r\n        [\r\n          (\r\n            \"$\" +\r\n            formatMoney(\r\n              Math.max(0, output.percentNeed1 - output.totalSourceATax),\r\n              0,\r\n              decimalChar,\r\n              thousands\r\n            )\r\n          ),\r\n        ],\r\n        height,\r\n        [1]\r\n      );\r\n */\r\n      fill = [255, 255, 255];\r\n      values = [!singleFamily?thereAfterText:(thereAfterTextSF)];\r\n      //y += incY;\r\n      y += incColourdRowsY;\r\n      pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n\r\n      pdf.SetFontSize(PxToPt(12));\r\n      pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        x + 3.6,\r\n        y,\r\n        [\r\n          \"(\" +\r\n            (\r\n              formatMoney(output.percentNeed2.reduce((a, b) => a + b, 0), 0, decimalChar, thousands)\r\n            ).toString() +\r\n            \"-\" +\r\n            (\r\n              formatMoney(output.totalSource2ATaxAtDeath, 0, decimalChar, thousands)\r\n            ).toString() +\r\n            \")\",\r\n        ],\r\n        height+.1,\r\n        [1.2]\r\n      );\r\n\r\n      pdf.SetFontSize(PxToPt(16));\r\n      fill = [196, 223, 224];\r\n      values2=(\r\n        formattedMoneyString(Math.max(0, output.percentNeed2.reduce((a, b) => a + b, 0) - output.totalSource2ATaxAtDeath),lang)\r\n        /* \"$\" +\r\n        formatMoney(\r\n          Math.max(0, output.percentNeed2.reduce((a, b) => a + b, 0) - output.totalSource2ATax),          \r\n          0,\r\n          decimalChar,\r\n          thousands\r\n        ) */\r\n      )\r\n      pdf.tableRowSingle(fill, textColor, x+4.6, y, values2, height, Widths, true);\r\n/* \r\n      pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        x + 4.4,\r\n        y,\r\n        [\r\n          (\r\n            \"$\" +\r\n            formatMoney(\r\n              Math.max(0, output.percentNeed2 - output.totalSource2ATax),\r\n              0,\r\n              decimalChar,\r\n              thousands\r\n            )\r\n          ),\r\n        ],\r\n        height,\r\n        [1]\r\n      ); */\r\n    } else {\r\n      fill = [255, 255, 255];\r\n      pdf.SetFontSize(PxToPt(12));\r\n      pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        x + 3.6,\r\n        y,\r\n        [\r\n          \"(\" +\r\n            (\r\n              formatMoney(output.percentNeed1, 0, decimalChar, thousands)\r\n            ).toString() +\r\n            \"-\" +\r\n            (\r\n              \r\n              formatMoney(output.totalSourceATaxAtDeath, 0, decimalChar, thousands)\r\n            ).toString() +\r\n            \")\",\r\n        ],\r\n        height+.1,\r\n        [1.2]\r\n      );\r\n      pdf.SetFontSize(PxToPt(16));\r\n      fill = [196, 223, 224];\r\n      \r\n      values2=(\r\n        formattedMoneyString(Math.max(0, output.percentNeed1 - output.totalSourceATaxAtDeath),lang)\r\n        /* \"$\" +\r\n        formatMoney(\r\n          Math.max(0, output.percentNeed1 - output.totalSourceATax),\r\n          0,\r\n          decimalChar,\r\n          thousands\r\n        ) */\r\n      )\r\n      pdf.tableRowSingle(fill, textColor, x+4.6, y, values2, height, Widths, true);\r\n      \r\n    }\r\n\r\n    pdf.SetFontSize(PxToPt(16));\r\n    /*       fill = [196, 223, 224];\r\n\r\n\r\n    pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        x + 4.4,\r\n        y,\r\n        [\r\n          (\r\n            \"$\" +\r\n            formatMoney(\r\n              Math.max(0, output.percentNeed1 - output.totalSource),\r\n              0,\r\n              decimalChar,\r\n              thousands\r\n            )\r\n          ),\r\n        ],\r\n        height,\r\n        [1]\r\n      ); */\r\n\r\n    pdf.addFooterAndHeader(headerOffset, footerText, headerText);\r\n\r\n   \r\n   \r\n   \r\n   \r\n   \r\n   \r\n   \r\n   \r\n   \r\n    {\r\n      // remove this page\r\n      /* PAGE 7 Life info anal*/\r\n    } /* \r\n    pdf.addCustomImage(IMAGE_LOGO_OTHERPAGES, pg1TitleY, image);\r\n\r\n    Widths = [4.3, 1.2];\r\n    pdf.SetFont(HELVETICA, NORMAL);\r\n    if (lang === \"en\") pdf.SetFontSize(PxToPt(25));\r\n    else pdf.SetFontSize(PxToPt(20));\r\n\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    pdf.Text(OUTPUTTEXT[lang].pg7T, InToPt(1.5), InToPt(headerOffset+topToTitle_Y\r\n  ));\r\n\r\n    pdf.SetFont(TIMES, NORMAL);\r\n\r\n    pdf.SetFontSize(PxToPt(16));\r\n\r\n    x = 1.5;\r\n    y = headerOffset+titleToPara_Y;\r\n    incY = 0.42;\r\n    height = 0.35;\r\n    //const Widths = 5;\r\n    values = [OUTPUTTEXT[lang].pg7TabT];\r\n    fill = [115, 153, 198];\r\n    textColor = [255, 255, 255];\r\n    pdf.tableRow(fill, textColor, x, y, values, height, [PARA_WIDTH]);\r\n\r\n    fill = [255, 255, 255];\r\n    textColor = [0x45, 0x55, 0x60];\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n\r\n    y += incY + 0.2;\r\n    pdf.MultilineText(\r\n      OUTPUTTEXT[lang].pg7TabRow1,\r\n      InToPt(x + 0.1),\r\n      InToPt(y),\r\n      InToPt(3)\r\n    );\r\n    y += incY / 2;\r\n\r\n    //if (output.hasChild) {\r\n    //\tif (output.ygChild < 18) {\r\n    if (twoNeedPercents) {\r\n      values = [\r\n        OUTPUTTEXT[lang].pg7TabRow2,\r\n        (\r\n          \"$\" +\r\n          formatMoney(\r\n            Math.max(0, output.percentNeed1 - output.totalSource),\r\n            0,\r\n            decimalChar,\r\n            thousands\r\n          )\r\n        ),\r\n      ];\r\n      y += incY;\r\n      pdf.tableRow(fill, textColor, x + 0.1, y, values, height, Widths);\r\n\r\n      values = [\r\n        thereAfterText,\r\n        (\r\n          \"$\" +\r\n          formatMoney(\r\n            Math.max(0, output.percentNeed2 - output.totalSource2),\r\n            0,\r\n            decimalChar,\r\n            thousands\r\n          )\r\n        ),\r\n      ];\r\n    } else\r\n      values = [\r\n        thereAfterText,\r\n        (\r\n          \"$\" +\r\n          formatMoney(\r\n            Math.max(0, output.percentNeed1 - output.totalSource),\r\n            0,\r\n            decimalChar,\r\n            thousands\r\n          )\r\n        ),\r\n      ];\r\n\r\n    y += incY;\r\n    pdf.tableRow(fill, textColor, x + 0.1, y, values, height, Widths);\r\n\r\n    values = [OUTPUTTEXT[lang].pg7TabRow4, (output.infRate + \"%\")];\r\n    y += incY;\r\n    pdf.tableRow(fill, textColor, x + 0.1, y, values, height, Widths);\r\n\r\n    y += incY + 0.22;\r\n    pdf.MultilineText(\r\n      OUTPUTTEXT[lang].pg7TabRow5,\r\n      InToPt(x + 0.2),\r\n      InToPt(y),\r\n      InToPt(3)\r\n    );\r\n    pdf.Text(\r\n      (output.invRate + \"%\"),\r\n      InToPt(x + 4.25),\r\n      InToPt(y + 0.21)\r\n    );\r\n\r\n    y += incY + 0.3;\r\n    pdf.DrawLine(InToPt(1.5), InToPt(y - 0.23), InToPt(PARA_WIDTH));\r\n    y += incY - 0.2;\r\n    pdf.MultilineText(\r\n      OUTPUTTEXT[lang].pg7TabRow6,\r\n      InToPt(x + 0.2),\r\n      InToPt(y),\r\n      InToPt(3)\r\n    );\r\n    y += incY - 0.2;\r\n    values = [\r\n      OUTPUTTEXT[lang].pg7TabRow7 + props.LE + \")\",\r\n      (\r\n        \"$\" +\r\n        formatMoney(\r\n          Math.max(0, output.insNeedLE + output.totalAsset - output.totalLiab),\r\n          0,\r\n          decimalChar,\r\n          thousands\r\n        )\r\n      ),\r\n    ];\r\n    y += incY + 0.1;\r\n    pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n\r\n    values = [\r\n      OUTPUTTEXT[lang].pg7TabRow8,\r\n      (\r\n        \"$\" +\r\n        formatMoney(\r\n          Math.max(0, output.insNeedRet + output.totalAsset - output.totalLiab),\r\n          0,\r\n          decimalChar,\r\n          thousands\r\n        )\r\n      ),\r\n    ];\r\n    y += incY;\r\n    pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n\r\n    if (output.hasChild) {\r\n      if (output.ygChild < maxDur) {\r\n        values = [\r\n          OUTPUTTEXT[lang].pg7TabRow9,\r\n          (\r\n            \"$\" +\r\n            formatMoney(\r\n              Math.max(\r\n                0,\r\n                output.insNeedYgChild25 + output.totalAsset - output.totalLiab\r\n              ),\r\n              0,\r\n              decimalChar,\r\n              thousands\r\n            )\r\n          ),\r\n        ];\r\n        y += incY;\r\n        pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n      }\r\n\r\n      if (output.ygChild < orphAge) {\r\n        values = [\r\n          OUTPUTTEXT[lang].pg7TabRow10,\r\n          (\r\n            \"$\" +\r\n            formatMoney(\r\n              Math.max(\r\n                0,\r\n                output.insNeedYgChild18 + output.totalAsset - output.totalLiab\r\n              ),\r\n              0,\r\n              decimalChar,\r\n              thousands\r\n            )\r\n          ),\r\n        ];\r\n        y += incY;\r\n        pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n      }\r\n    }\r\n    //  pdf.AddChart(\"bar1\", InToPt(1.5), InToPt(y + 0.7), InToPt(4), InToPt(2));\r\n\r\n    pdf.addFooterAndHeader(headerOffset,footerText, headerText);\r\n */\r\n    {\r\n      /* PAGE 8 Life info anal 2 */\r\n    }\r\n    result=result && pdf.addCustomImage(IMAGE_LOGO_OTHERPAGES, pg1TitleY, image,false,top);\r\n\r\n    Widths = [4.3, 1.2];\r\n    pdf.SetFont(HELVETICA, NORMAL);\r\n    if (lang === \"en\") pdf.SetFontSize(PxToPt(25));\r\n    else pdf.SetFontSize(PxToPt(20));\r\n\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    pdf.Text(OUTPUTTEXT[lang].pg8T, InToPt(1.5), InToPt(headerOffset + topToTitle_Y\r\n  ));\r\n\r\n    pdf.SetFont(TIMES, NORMAL);\r\n\r\n    pdf.SetFontSize(PxToPt(16));\r\n\r\n    x = 1.5;\r\n    y = headerOffset + titleToPara_Y;\r\n    incY = 0.42;\r\n    height = 0.35;\r\n    //const Widths = 5;\r\n    values = [singlePerson?OUTPUTTEXT[lang].pg8TabT_1: OUTPUTTEXT[lang].pg8TabT];\r\n    fill = [115, 153, 198];\r\n    textColor = [255, 255, 255];\r\n    pdf.tableRow(fill, textColor, x, y, values, height, [PARA_WIDTH]);\r\n\r\n    fill = [255, 255, 255];\r\n    textColor = [0x45, 0x55, 0x60];\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n\r\n    /* values = [OUTPUTTEXT[lang].pg8TabRow1, (\"$\"+ formatMoney(totalAsset-output.totalLiab, 0,decimalChar,thousands))];\r\n\t  y += incY;\t\r\n\t  pdf.tableRow(fill, textColor, x, y, values, height, Widths); */\r\n\r\n    y += incY + 0.2;\r\n    pdf.MultilineText(\r\n      OUTPUTTEXT[lang].pg8TabRow1,\r\n      InToPt(x),\r\n      InToPt(y),\r\n      InToPt(3)\r\n    );\r\n    pdf.Text(\r\n      (\r\n        formattedMoneyString(output.totalDisposeAsset - output.totalLiab,lang)\r\n        /* \"$\" +\r\n        formatMoney(\r\n          output.totalDisposeAsset - output.totalLiab,\r\n          0,\r\n          decimalChar,\r\n          thousands\r\n        ) */\r\n      ),\r\n      InToPt(x + 4.42),\r\n      InToPt(y + 0.21)\r\n    );\r\n\r\n    y += incY + 0.3;\r\n    pdf.MultilineText(\r\n      OUTPUTTEXT[lang].pg8TabRow2,\r\n      InToPt(x),\r\n      InToPt(y),\r\n      InToPt(3)\r\n    );\r\n    y += incY - 0.1;\r\n\r\n    if(!singleFamily)\r\n    {\r\n    values = [\r\n      OUTPUTTEXT[lang].pg8TabRow3 + props.LE + \")\",\r\n      (\r\n        formattedMoneyString(output.insNeedLE,lang)\r\n        /* \"$\" + formatMoney(output.insNeedLE, 0, decimalChar, thousands) */\r\n      ),\r\n    ];\r\n    y += incY + 0.1;\r\n    pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n  }\r\n\r\n    values = [\r\n      singleFamily? OUTPUTTEXT[lang].pg8TabRow4Alt.replace(\"A. \",\"\"): OUTPUTTEXT[lang].pg8TabRow4,\r\n      (\r\n        formattedMoneyString(output.insNeedRet,lang)\r\n        /* \"$\" + formatMoney(output.insNeedRet, 0, decimalChar, thousands) */\r\n      ),\r\n    ];\r\n    y += incY;\r\n    pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n\r\n    if (output.hasChild) {\r\n      if (output.ygChild < maxDur) {\r\n        values = [\r\n          singleFamily?OUTPUTTEXT[lang].pg8TabRow5.replace(\"C.\",\"B.\").replace(\"25\",output.youngestChildEndAge): OUTPUTTEXT[lang].pg8TabRow5.replace(\"25\",output.youngestChildEndAge),\r\n          (\r\n            formattedMoneyString(output.insNeedYgChild25,lang)\r\n        /* \"$\" +\r\n            formatMoney(output.insNeedYgChild25, 0, decimalChar, thousands) */\r\n          ),\r\n        ];\r\n        y += incY;\r\n        pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n      }\r\n\r\n      if (output.ygChild < orphAge) {\r\n        values = [\r\n          singleFamily?OUTPUTTEXT[lang].pg8TabRow6.replace(\"D.\",\"C.\"): OUTPUTTEXT[lang].pg8TabRow6,\r\n          (\r\n            formattedMoneyString(output.insNeedYgChild18,lang)\r\n        /* \"$\" +\r\n            formatMoney(output.insNeedYgChild18, 0, decimalChar, thousands) */\r\n          ),\r\n        ];\r\n        y += incY;\r\n        pdf.tableRow(fill, textColor, x, y, values, height, Widths);\r\n      }\r\n    }\r\n    pdf.AddChart(\"bar2\", InToPt(1.5), InToPt(y + 0.7), InToPt(4), InToPt(2));\r\n\r\n    pdf.addFooterAndHeader(headerOffset, footerText, headerText);\r\n\r\n    {\r\n      /* Nptes*/\r\n    }\r\n    result=result && pdf.addCustomImage(IMAGE_LOGO_OTHERPAGES, pg1TitleY, image,false,top);\r\n\r\n    pdf.SetFont(HELVETICA, NORMAL);\r\n    if (lang === \"en\") pdf.SetFontSize(PxToPt(25));\r\n    else pdf.SetFontSize(PxToPt(20));\r\n\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    pdf.Text(OUTPUTTEXT[lang].pg9T, InToPt(1.5), InToPt(headerOffset+topToTitle_Y\r\n  ));\r\n\r\n    paragraph = OUTPUTTEXT[lang].pg9P1;\r\n    pdf.SetFont(TIMES, NORMAL);\r\n    pdf.SetFontSize(PxToPt(16));\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    pdf.MultilineText(paragraph, InToPt(1.5), InToPt(headerOffset+1.8), InToPt(PARA_WIDTH));\r\n\r\n    //pdf.addFooterAndHeader(headerOffset,footerText, headerText);\r\n    pdf.addHeaderNoFooter(headerOffset,headerText);\r\n    {\r\n      /* Acknow*/\r\n    }\r\n    result=result && pdf.addCustomImage(IMAGE_LOGO_OTHERPAGES, pg1TitleY, image,false,top);\r\n\r\n    pdf.SetFont(HELVETICA, NORMAL);\r\n    if (lang === \"en\") pdf.SetFontSize(PxToPt(25));\r\n    else pdf.SetFontSize(PxToPt(20));\r\n\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    pdf.Text(OUTPUTTEXT[lang].pg10T, InToPt(1.5), InToPt(headerOffset + topToTitle_Y\r\n  ));\r\n\r\n    paragraph = OUTPUTTEXT[lang].pg10P1;\r\n    pdf.SetFont(TIMES, NORMAL);\r\n    pdf.SetFontSize(PxToPt(16));\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    pdf.MultilineText(\r\n      paragraph,\r\n      InToPt(1.5),\r\n      InToPt(headerOffset + 1.8),\r\n      InToPt(PARA_WIDTH)\r\n    );\r\n\r\n    pdf.SetFont(TIMES, NORMAL);\r\n\r\n    pdf.SetFontSize(PxToPt(16));\r\n\r\n    x = 1.5;\r\n    y = headerOffset + 3.6;\r\n    incY = 0.42;\r\n    height = 0.35;\r\n    //const Widths = 5;\r\n    fill = [255, 255, 255];\r\n    textColor = [0x45, 0x55, 0x60];\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n\r\n    let yOffset = props.lang === \"fr\" ? 3 : 4;\r\n    y += incY + 0.2;\r\n    pdf.MultilineText(\r\n      OUTPUTTEXT[lang].pg10TabRow1,\r\n      InToPt(x),\r\n      InToPt(y),\r\n      InToPt(4)\r\n    );\r\n    pdf.Text(OUTPUTTEXT[lang].pg10TabRow11, InToPt(x + yOffset), InToPt(y));\r\n\r\n    y += incY;\r\n    pdf.MultilineText(\r\n      OUTPUTTEXT[lang].pg10TabRow2,\r\n      InToPt(x),\r\n      InToPt(y),\r\n      InToPt(4)\r\n    );\r\n    pdf.Text(OUTPUTTEXT[lang].pg10TabRow11, InToPt(x + yOffset), InToPt(y));\r\n\r\n    y += incY;\r\n    pdf.MultilineText(\r\n      OUTPUTTEXT[lang].pg10TabRow3,\r\n      InToPt(x),\r\n      InToPt(y),\r\n      InToPt(4)\r\n    );\r\n    pdf.Text(OUTPUTTEXT[lang].pg10TabRow11, InToPt(x + yOffset), InToPt(y));\r\n\r\n    pdf.Footer(OUTPUTTEXT[lang].pgFooter);\r\n\r\n    if(result===false)\r\n      alert(lang===\"en\"? \"PDF image error, SVG extension is not supported\":\"Erreur dimage PDF, lextension SVG nest pas prise en charge\")  \r\n\r\n    // Done\r\n    pdf.Save(\"INA_PDF.pdf\");\r\n  }\r\n}\r\n\r\n","import React, { Component } from \"react\";\r\nimport \"./Output.css\";\r\nimport { Table } from \"react-bootstrap\";\r\nimport {\r\n  CONTROLTITLE,\r\n  DISPLAY_RETIREMENT,\r\n  DISPLAY_LIFEEXP,\r\n  DISPLAY_ENDAGE,\r\n  MAX_ORPHAN_DUR_QC,\r\n  MAX_ORPHAN_DUR_NON_QC,\r\n  ORPHAN_AGE_QC,\r\n  ORPHAN_AGE_NON_QC,\r\n  PROVINCE,\r\n  SEX,\r\n  SMOKING,\r\n  MEMBER,\r\n  QUOTE_CLIENT,\r\n  QUOTE_SPOUSE,\r\n  OUTPUT_WIDTH_PCT,\r\n  IMAGE_APPLET_INA,\r\n  IMAGE_LOGO,\r\n  IMAGE_LOGO_OTHERPAGES,\r\n  APPLET_INA,\r\n} from \"../definitions/generalDefinitions\";\r\nimport { MAX_LOGO_HEIGHT, PAGE_HEIGHT } from \"./PDF\";\r\nimport { getName, getLogoAndAppletImage,formatted,isMobileDevice, extractCSS, versionDetails } from \"../utils/helper\";\r\nimport { setUIDataToAPI } from \"../data/dataExchange\";\r\nimport { handleFetchQueryStringSave } from \"../utils/FetchAPIs\";\r\nimport { OUTPUTTEXT } from \"../definitions/outputDefinitions\";\r\nimport { Bar } from \"react-chartjs-2\";\r\nimport { doSavePdfAction } from \"./OutputPDF\";\r\n//import { AdjustibleImage } from \"./AdjustibleImage\";\r\n//import jsPDF from 'jspdf';\r\n//import * as jsPDF from 'jspdf';\r\nimport {\r\n  cleanFormat,\r\n  formatMoney,\r\n  getListItemKeyFromName,\r\n  numFormat,\r\n  familyProjectionYears,\r\n  isSingleFamily,\r\n  \r\n} from \"../utils/helper\";\r\nimport { getOutputValues } from \"../data/dataExchange\";\r\nimport { getInfoINA, getInfoPDF  } from \"../definitions/infoIconsDefinitions\";\r\nimport { Info } from \"./Info\";\r\n\r\nexport class OutputPresentation extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      image: this.props.dataInput.Presentations[0].adviserLogo,\r\n    };\r\n    this.dateApplet = \"\";\r\n    this.pdfRef = React.createRef();\r\n  }\r\n\r\n  doPDF = () => {\r\n    doSavePdfAction(this.props);\r\n  };\r\n\r\n  doLIFO = async () => {\r\n    //window.top.location.href = 'localhost:8086';\r\n    //window.parent.changeLogo();\r\n\r\n    await window.parent.postMessage(\r\n      \"LIFO_\" +\r\n        this.props.dataInput.Presentations[0].language +\r\n        \"_\" +\r\n        this.props.encryptedInputLife1,\r\n      \"*\"\r\n    );\r\n  };\r\n  doWL = async () => {\r\n    //window.top.location.href = 'localhost:8086';\r\n    //window.parent.changeLogo();\r\n    await window.parent.postMessage(\r\n      \"WL_\" +\r\n        this.props.dataInput.Presentations[0].language +\r\n        \"_\" +\r\n        this.props.encryptedInputLife1,\r\n      \"*\"\r\n    );\r\n  };\r\n  doEP = async () => {\r\n    \r\n  \r\n\r\n    await window.parent.postMessage(\r\n      \"EP_\" +\r\n        this.props.dataInput.Presentations[0].language +\r\n        \"_\" +\r\n        this.props.encryptedInputLife1AndSpouse,\r\n      \"*\"\r\n    );\r\n  };\r\n\r\n  doCompuLife = () => {\r\n    const lang = this.props.dataInput.Presentations[0].language;\r\n   // const formatFr = lang === \"fr\" ? true : false;\r\n    const FA = parseFloat(cleanFormat(this.props.insuranceNeed, lang));\r\n    const province = this.props.dataInput.Presentations[0].provinceKey;\r\n    var today = new Date();\r\n    const birthYr = today.getFullYear() - this.props.dataInput.Clients[0].Age;\r\n    const birthMth = today.getMonth() + 1;\r\n    const birthDay = today.getDate();\r\n    let provinceCode = 2;\r\n    let url = \"http://quotes.ppi.ca/canmain.html?comp=so\";\r\n\r\n    //console.log(url);\r\n    url =\r\n      url +\r\n      \"&lang=\" +\r\n      lang +\r\n      \"&ID=\" +\r\n      \"TKD\" +\r\n      \"&ORIGIN=\" +\r\n      \"TKD\" +\r\n      \"&face=\" +\r\n      parseInt(FA) +\r\n      \"&prepby=\" +\r\n      this.props.dataInput.Presentations[0].designedBy +\r\n      \"&prov=\";\r\n\r\n    if (province === PROVINCE.AB) provinceCode = \"1\";\r\n    else if (province === PROVINCE.BC) provinceCode = \"2\";\r\n    else if (province === PROVINCE.MB) provinceCode = \"3\";\r\n    else if (province === PROVINCE.NB) provinceCode = \"4\";\r\n    else if (province === PROVINCE.NF) provinceCode = \"5\";\r\n    else if (province === PROVINCE.NS) provinceCode = \"6\";\r\n    else if (province === PROVINCE.NT) provinceCode = \"7\";\r\n    else if (province === PROVINCE.NU) provinceCode = \"8\";\r\n    else if (province === PROVINCE.ON) provinceCode = \"9\";\r\n    else if (province === PROVINCE.PE) provinceCode = \"10\";\r\n    else if (province === PROVINCE.QC) provinceCode = \"11\";\r\n    else if (province === PROVINCE.SK) provinceCode = \"12\";\r\n    else if (province === PROVINCE.YU) provinceCode = \"13\";\r\n\r\n    url = url + provinceCode;\r\n   \r\n    {\r\n      url =\r\n        url + \"&prepfor=\" + this.props.dataInput.Presentations[0].designedFor;\r\n      url =\r\n        url + \"&byear=\" + birthYr + \"&bmonth=\" + birthMth + \"&bday=\" + birthDay;\r\n\r\n      url =\r\n        url +\r\n        \"&sex=\" +\r\n        (this.props.dataInput.Clients[0].sexKey === SEX.MALE.Key ? \"M\" : \"F\");\r\n      url =\r\n        url +\r\n        \"&smoker=\" +\r\n        (this.props.dataInput.Clients[0].smokerKey === SMOKING.NON_SMOKER.Key\r\n          ? \"N\"\r\n          : \"Y\");\r\n    }\r\n    //console.log(url);\r\n    const height = Math.min(window.innerHeight - 130 - 20, 800);\r\n    this.externalWindow = window.open(\r\n      url,\r\n      \"_blank\",\r\n      \"width=950,height=\" + height + \",left=25,top=130\"\r\n    );\r\n    this.containerEl = this.externalWindow.document.createElement(\"div\");\r\n    this.externalWindow.document.body.appendChild(this.containerEl);\r\n\r\n    /* try {\r\n      window.open(url, \"_blank\");\r\n    } catch (e) {} */\r\n  };\r\n\r\n\r\n  render() {\r\n    // presentation output shared with pdf\r\n    \r\n    let output = getOutputValues(this.props);\r\n    const lang = this.props.dataInput.Presentations[0].language;\r\n    const labelsBilingual = OUTPUTTEXT[lang];\r\n    const decimalChar = lang === \"en\" ? \".\" : \",\";\r\n    const thousands = lang === \"en\" ? \",\" : \" \";\r\n    const formatFr = lang === \"fr\" ? true : false;\r\n    const dollarEn= lang === \"fr\" ? \"\" : \"$\";\r\n    const dollarFr= lang === \"fr\" ? \"$\" : \"\";\r\n\r\n    const singlePerson = this.props.dataInput.Clients.length === 1 ? true : false;\r\n    const thereAfterText = singlePerson?labelsBilingual.pgTabRowThereAfter_1:labelsBilingual.pgTabRowThereAfter\r\n    const thereAfterTextSF = singlePerson?labelsBilingual.pg5TabRow7_1:labelsBilingual.pg5TabRow7\r\n\r\n    const clients = this.props.dataInput.Clients;\r\n    const projYears = familyProjectionYears(\r\n      clients,\r\n      this.props.dataInput.Presentations[0].periodOption,\r\n      this.props.LE,\r\n      this.props.LE\r\n    );\r\n    const projectEnd = projYears.projectionEnd;\r\n    const protectionPeriod = projYears.noProjectionYrs;\r\n    const minAge = projYears.survivorAge;\r\n    const singleFamily = isSingleFamily(clients);\r\n    const noSurvivor = singlePerson && versionDetails().versionNumeric<=10014\r\n\r\n    \r\n    \r\n\r\n    //const insNeedLine= getInsNeedLine(this.props.dataInput.Presentations[0], this.props.projectEnd, lang,noSurvivor,singleFamily,protectionPeriod)\r\n\r\n    /* const protectionPeriod=this.props.projectEnd-minAge  */\r\n\r\n    const provinceKey = getListItemKeyFromName(PROVINCE, output.province);\r\n    let maxDur =\r\n      provinceKey === \"QC\" ? MAX_ORPHAN_DUR_QC : MAX_ORPHAN_DUR_NON_QC;\r\n    let orphAge = provinceKey === \"QC\" ? ORPHAN_AGE_QC : ORPHAN_AGE_NON_QC;\r\n\r\n    // graph details\r\n    const options = {\r\n      legend: {\r\n        display: false,\r\n      },\r\n      responsive: true,\r\n      maintainAspectRatio: false,\r\n      scales: {\r\n        xAxes: [{ stacked: true }],\r\n        yAxes: [\r\n          {\r\n            stacked: true,\r\n            /* ticks: {\r\n              beginAtZero: true,\r\n              steps: 10,\r\n              stepValue: 5,\r\n            }, */\r\n            ticks: {\r\n              beginAtZero: true,\r\n              callback: function (value, index, values) {\r\n                let result =\r\n                  value < 1000\r\n                    ? value\r\n                    : Intl.NumberFormat(lang).format(value / 1000) + \"K\"\r\n                return result;\r\n              },\r\n            },\r\n\r\n\r\n          },\r\n        ],\r\n      },\r\n    };\r\n\r\n    // //console.log(output)\r\n\r\n    var dataLabels = singlePerson? [\"A\"]:[\"A\", \"B\"];\r\n    /* var dataValues = [\r\n      output.insNeedLE + output.totalAsset - output.totalLiab,\r\n      output.insNeedRet + output.totalAsset - output.totalLiab,\r\n    ]; */\r\n    var dColor = [\"#7399c6\", \"#d9d3a4\"];\r\n    const under25 =\r\n      output.ygChild < maxDur\r\n        ? output.insNeedYgChild25 + output.totalAsset - output.totalLiab\r\n        : 0;\r\n    const under18 =\r\n      output.ygChild < orphAge\r\n        ? output.insNeedYgChild18 + output.totalAsset - output.totalLiab\r\n        : 0;\r\n\r\n    let youngestChildEndAge=maxDur \r\n    if (output.hasChild)\r\n      {\r\n        youngestChildEndAge=Math.min(maxDur , this.props.dataInput.Clients.filter((item)=> { return item.Age===output.ygChild})[0].retirementAge)\r\n    \r\n        \r\n      }\r\n    \r\n    \r\n    if (output.hasChild) {\r\n      dataLabels = [\"A\", \"B\", \"C\", \"D\"];\r\n      /* dataValues = [\r\n        output.insNeedLE + output.totalAsset - output.totalLiab,\r\n        output.insNeedRet + output.totalAsset - output.totalLiab,\r\n        under25,\r\n        under18,\r\n      ]; */\r\n      dColor = [\"#7399c6\", \"#d9d3a4\", \"#949ca1\", \"#847a18\"];\r\n    }\r\n\r\n    /* console.log(output.clients) */\r\n    var dataValues2 = singlePerson? [output.insNeedLE]: [output.insNeedLE, output.insNeedRet];\r\n    if (output.hasChild) {\r\n      if(singleFamily)\r\n      {\r\n        dataLabels = [\"A\", \"B\", \"C\"];\r\n        dataValues2 = [\r\n          output.insNeedRet,\r\n          output.insNeedYgChild25,\r\n          output.insNeedYgChild18,\r\n        ];\r\n        dColor = [\"#d9d3a4\", \"#949ca1\", \"#847a18\"];\r\n      }\r\n      else{\r\n      dataLabels = [\"A\", \"B\", \"C\", \"D\"];\r\n      dataValues2 = [\r\n        output.insNeedLE,\r\n        output.insNeedRet,\r\n        output.insNeedYgChild25,\r\n        output.insNeedYgChild18,\r\n      ];\r\n      dColor = [\"#7399c6\", \"#d9d3a4\", \"#949ca1\", \"#847a18\"];\r\n    }\r\n    }\r\n\r\n    /* const dataInsurance = {\r\n      labels: dataLabels,\r\n      datasets: [\r\n        {\r\n          label: \"\", //Income Shortfall',\r\n          data: dataValues,\r\n          fill: false, // Don't fill area under the line\r\n          borderColor: \"#2B3856\", // Line color\r\n          backgroundColor: dColor,\r\n        },\r\n      ],\r\n    };\r\n */\r\n    const dataInsurance2 = {\r\n      labels: dataLabels,\r\n      datasets: [\r\n        {\r\n          label: \"\", //Income Shortfall',\r\n          data: dataValues2,\r\n          fill: false, // Don't fill area under the line\r\n          borderColor: \"#2B3856\", // Line color\r\n          backgroundColor: dColor,\r\n        },\r\n      ],\r\n    };\r\n\r\n    const needTo = this.props.insNeedLine;\r\n    const images = getLogoAndAppletImage(\r\n      this.props.dataInput,\r\n      this.props.imageRemove,\r\n      this.props.imageAdjust\r\n    );\r\n\r\n    const logoTop = images.logoTop;\r\n    const logoBottom = images.logoBottom;\r\n\r\n    const PDFTopMargin=singleFamily?0:-37  \r\n\r\n    if (noSurvivor) {\r\n      return (\r\n        <div>\r\n          <h3 className=\"ppi1\">{needTo}</h3>\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          <div className=\"exportArea\"/*  style={{ width: \"20%\", float: \"right\", clear: \"left\" }} */>\r\n          \r\n          <div ref={this.pdfRef} style={{ width: \"100%\", float: \"left\", clear: \"left\" }}>\r\n          \r\n            <input\r\n              className=\"roundedCornerCmd\"\r\n              style={{\r\n             //   width: \"80px\",\r\n                marginTop: PDFTopMargin-35 +\"px\",\r\n                marginRight: \"0px\",\r\n                paddingRight: \"8px\",\r\n                float: \"right\",\r\n              }}\r\n              onClick={this.doPDF}\r\n              type=\"button\"\r\n              value={CONTROLTITLE[lang].pdf}\r\n            /> {<div style={{\r\n              //   width: \"80px\",\r\n                 marginTop: PDFTopMargin-26 +\"px\",\r\n                 marginRight: lang===\"en\"? \"122px\":\"180px\",\r\n                 paddingRight: \"8px\",\r\n                 float: \"right\",\r\n               }}><Info infoIcon={getInfoPDF(lang)}/></div>} \r\n           \r\n          </div>\r\n          <div style={{ width: \"100%\", float: \"left\", clear: \"left\" }}>\r\n            {/* <input type=\"file\" onChange={this.onImageChange} id=\"logo\"/> */}\r\n\r\n            <input\r\n              className=\"roundedCornerCmd\"\r\n              style={{\r\n               // width: \"180px\",\r\n                marginTop: PDFTopMargin + \"px\",\r\n                paddingRight: \"8px\",\r\n                float: \"right\",\r\n              }}\r\n              onClick={this.doCompuLife}\r\n              type=\"button\"\r\n              value={CONTROLTITLE[lang].compulife}\r\n            />\r\n          </div>\r\n          <div style={{ width: \"100%\", float: \"left\", clear: \"left\" }}>\r\n            <input\r\n              className=\"roundedCornerCmd\"\r\n              style={{\r\n           //     width: \"180px\",\r\n                marginTop: \"10px\",\r\n                marginRight: \"0px\",\r\n                paddingRight: \"8px\",\r\n                float: \"right\",\r\n              }}\r\n              onClick={this.doEP}\r\n              type=\"button\"\r\n              value={CONTROLTITLE[lang].ep}\r\n            />\r\n          </div>\r\n          <div style={{ width: \"100%\", float: \"left\", clear: \"left\" }}>\r\n            <input\r\n              className=\"roundedCornerCmd\"\r\n              style={{\r\n            //    width: \"80px\",\r\n                marginTop: \"0px\",\r\n                marginRight: \"0px\",\r\n                paddingRight: \"8px\",\r\n                float: \"right\",\r\n              }}\r\n              onClick={this.doLIFO}\r\n              type=\"button\"\r\n              value={CONTROLTITLE[lang].lifo}\r\n            />\r\n          </div>\r\n          <div style={{ width: \"100%\", float: \"left\", clear: \"left\" }}>\r\n            <input\r\n              className=\"roundedCornerCmd\"\r\n              style={{\r\n            //    width: \"80px\",\r\n                marginTop: \"0px\",\r\n                marginRight: \"0px\",\r\n                paddingRight: \"8px\",\r\n                float: \"right\",\r\n              }}\r\n              onClick={this.doWL}\r\n              type=\"button\"\r\n              value={CONTROLTITLE[lang].wl}\r\n            />\r\n          </div>\r\n          </div>\r\n          <div className=\"contentPres\">\r\n            <h3 className=\"ppi1\">\r\n              {needTo}\r\n              {/* : {dollarEn}\r\n          {formatMoney(\r\n            cleanFormat(this.props.insuranceNeed, formatFr),\r\n            0,\r\n            decimalChar,\r\n            thousands\r\n          ) */}\r\n              <Info infoIcon={getInfoINA(lang)} />\r\n            </h3>\r\n\r\n             \r\n              {/* add logo */}\r\n              {images.logo1stPage}\r\n              {/* add image */}\r\n              {images.applet}\r\n\r\n            \r\n              <h1 className=\"ppi1\">{labelsBilingual.pg1T}</h1>\r\n              <h5 className=\"ppi2\">\r\n                {labelsBilingual.pg1P1} {output.designedFor}\r\n                <br />\r\n                {labelsBilingual.pg1P2} {output.designedBy}\r\n                <br />\r\n                {labelsBilingual.pg1P3} {output.dateApplet}\r\n                <br />\r\n                {labelsBilingual.pg1P4} {output.province}\r\n                <br />\r\n              </h5>\r\n              {logoBottom}\r\n              {/* PAGE 2 profile*/}\r\n              <hr className=\"ppi1\" />\r\n              {logoTop}\r\n              <h2 className=\"ppi1\">{labelsBilingual.pg1T}</h2>\r\n              <div\r\n                style={{\r\n                  overflowX: \"auto\",\r\n                  overflowY: \"hidden\",\r\n                  width: \"100%\",\r\n                }}\r\n              >\r\n                <table className=\"blueTable\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th style={{ width: \"30%\", marginLeft: \"0px\" }}>\r\n                        {singlePerson?labelsBilingual.pg2TabT1_1:labelsBilingual.pg2TabT1}\r\n                      </th>\r\n                      <th style={{ width: \"10%\" }}>\r\n                        {labelsBilingual.pg2TabT2}\r\n                      </th>\r\n                      <th style={{ width: \"18%\" }}>\r\n                        {labelsBilingual.pg2TabT3}\r\n                      </th>\r\n                      <th style={{ width: \"19%\" }}>\r\n                        {singleFamily\r\n                          ? labelsBilingual.pg2TabT4Alt\r\n                          : labelsBilingual.pg2TabT4}\r\n                      </th>\r\n                      <th style={{ width: \"19%\" }}>\r\n                        {labelsBilingual.pg2TabT5}\r\n                      </th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {output.clients.map((item) => (\r\n                      <tr key={item.id}>\r\n                        <td>\r\n                          {item.memberKey === MEMBER.CLIENT.Key\r\n                            ? MEMBER.CLIENT.value[lang] + getName(item.name,lang)\r\n                            : item.memberKey === MEMBER.SPOUSE.Key\r\n                            ? MEMBER.SPOUSE.value[lang] + getName(item.name,lang)\r\n                            : (item.memberKey === MEMBER.CHILD.Key? MEMBER.CHILD.value[lang] + getName(item.name,lang):MEMBER.DEPENDENT_ADULT.value[lang] + getName(item.name,lang))}\r\n                        </td>\r\n                        <td className=\"textalignright\">{item.age}</td>\r\n                        <td className=\"textalignright\">\r\n                        {formatted(item.income,lang)}\r\n                        {/* {dollarFr}\r\n                          {formatMoney(\r\n                            item.income,\r\n                            0,\r\n                            decimalChar,\r\n                            thousands\r\n                          )} */}\r\n                        </td>\r\n                        <td className=\"textalignright\">\r\n                          {singleFamily\r\n                            ? item.memberKey === MEMBER.CLIENT.Key\r\n                              ? \"-\"\r\n                              : item.ret-item.age //protectionPeriod\r\n                            : item.ret}\r\n                        </td>\r\n                        <td className=\"textalignright\">\r\n                          {item.memberKey === MEMBER.CLIENT.Key\r\n                            ? numFormat(\r\n                                clients[QUOTE_CLIENT].avgTaxRate,\r\n                                false,\r\n                                3, thousands,\r\n                                decimalChar\r\n                              )\r\n                            : item.memberKey === MEMBER.SPOUSE.Key\r\n                            ? numFormat(\r\n                                clients[QUOTE_SPOUSE].avgTaxRate,\r\n                                false,\r\n                                3,thousands,\r\n                                decimalChar\r\n                              )\r\n                            : numFormat(\r\n                                clients[item.id - 1].avgTaxRate,\r\n                                false,\r\n                                3,thousands,\r\n                                decimalChar\r\n                              )}\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                    {/*}\t\t\t<tr>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<td>Client</td><td className=\"textalignrightwidth110\">{dollarEn}{formatMoney(Income, 0,decimalChar,thousands)}</td><td className=\"textalignright\">{retAge}</td><td className=\"textalignright\">{retAge}</td></tr>\r\n\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<td>Spouse</td><td className=\"textalignrightwidth110\">{dollarEn}{formatMoney(Income2, 0,decimalChar,thousands)}</td><td className=\"textalignright\">{retAge2}</td><td className=\"textalignright\">{retAge}</td></tr>\r\n\t\t\t\t\t\t*/}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n              {/* financial summary\r\n               */}\r\n              <h4 className=\"ppi1\"></h4>\r\n              <div className=\"tableTitle\">{labelsBilingual.pg2T3}</div>\r\n              <table className=\"incomePosition\">\r\n                <tbody>\r\n                  <tr>\r\n                    <td className=\"paddingleft25\">{labelsBilingual.pg2P5}</td>\r\n                    <td className=\"textalignright\">\r\n                      {formatted(output.totalAssetExcludeInsurance,lang)}\r\n                      {/* {dollarEn}\r\n                      {formatMoney(\r\n                        output.totalAssetExcludeInsurance,\r\n                        0,\r\n                        decimalChar,\r\n                        thousands\r\n                      )} */}\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td className=\"paddingleft25\">{labelsBilingual.pg2P6}</td>\r\n                    <td className=\"textalignright\">\r\n                    {formatted(output.totalLiabExcludeDeathRelated,lang)}\r\n                      {/* {dollarEn}\r\n                      {formatMoney(\r\n                        output.totalLiabExcludeDeathRelated,\r\n                        0,\r\n                        decimalChar,\r\n                        thousands\r\n                      )} */}\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td\r\n                      className=\"paddingleft25\"\r\n                      style={{ textAlign: \"right\" }}\r\n                    >\r\n                      {labelsBilingual.pg2P7}\r\n                    </td>\r\n                    <td className=\"textalignright\">\r\n                    {formatted(output.totalAssetExcludeInsurance -\r\n                          output.totalLiabExcludeDeathRelated,lang)}\r\n                    \r\n                    {/*   {dollarEn}\r\n                      {formatMoney(\r\n                        output.totalAssetExcludeInsurance -\r\n                          output.totalLiabExcludeDeathRelated,\r\n                        0,\r\n                        decimalChar,\r\n                        thousands\r\n                      )} */}\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td className=\"paddingleft25\">{labelsBilingual.pg2P8.replace(\"yyy\",formatted(output.govDB,lang))}</td>\r\n                    <td className=\"textalignright\">\r\n                    {formatted(output.totalAssetInsurance + output.govDB,lang)}\r\n                    \r\n                    {/*   {dollarEn}\r\n                      {formatMoney(\r\n                        output.totalAssetInsurance + output.govDB,\r\n                        0,\r\n                        decimalChar,\r\n                        thousands\r\n                      )} */}\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td className=\"paddingleft25\">{labelsBilingual.pg2P9}</td>\r\n                    <td className=\"textalignright\">\r\n                    {formatted(output.totalLiab - output.totalLiabExcludeDeathRelated,lang)}\r\n                    {/* \r\n                      {dollarEn}\r\n                      {formatMoney(\r\n                        output.totalLiab - output.totalLiabExcludeDeathRelated,\r\n                        0,\r\n                        decimalChar,\r\n                        thousands\r\n                      )} */}\r\n                    </td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n              {/* assumptions <h2 className=\"ppi1\">{labelsBilingual.pg2T2}</h2> */}\r\n              <h4 className=\"ppi1\"></h4>\r\n              <div className=\"tableTitle\">{labelsBilingual.pg2T2}</div>\r\n              <table className=\"incomePosition\">\r\n                <tbody>\r\n                  <tr>\r\n                    <td className=\"paddingleft25\">\r\n                      {labelsBilingual.pg7TabRow4}\r\n                    </td>\r\n                    <td className=\"textalignright\">\r\n                      {numFormat(output.infRate, false, 3,thousands, decimalChar)}\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td className=\"paddingleft25\">\r\n                      {singlePerson? labelsBilingual.pg7TabRow5_1: labelsBilingual.pg7TabRow5}\r\n                    </td>\r\n                    <td className=\"textalignright\">\r\n                      {numFormat(output.invRate, false, 3,thousands, decimalChar)}\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td className=\"paddingleft25\">\r\n                      {labelsBilingual.pg2TabT6}\r\n                    </td>\r\n                    <td className=\"textalignright\">\r\n                      {numFormat(\r\n                        this.props.dataInput.Presentations[0].taxRate,\r\n                        false,\r\n                        3,thousands,\r\n                        decimalChar\r\n                      )}\r\n                    </td>\r\n                  </tr>\r\n                  <tr></tr>\r\n                  <tr></tr>\r\n                  <tr></tr>\r\n                  {/* <tr >\r\n                  <td className=\"backgroundcolorFFFFFF\" colSpan=\"2\" >\r\n                    {labelsBilingual.pg2Tab3}\r\n                  </td> \r\n                </tr>*/}\r\n                </tbody>\r\n              </table>\r\n              <p className=\"ppi1\" style={{ width: \"90%\" }}>\r\n                {singlePerson?labelsBilingual.pg2Tab2_1:labelsBilingual.pg2Tab2}\r\n              </p>\r\n              <p className=\"ppi1\" style={{ width: \"90%\" }}>\r\n                {labelsBilingual.pg2Tab3}\r\n              </p>\r\n              {/* Notes */}\r\n              {/* <h4 className=\"ppi1\"></h4>\r\n              <div className=\"tableTitle\">{labelsBilingual.pg9T}</div>\r\n              <p className=\"ppi1\">{labelsBilingual.pg9P1}</p>\r\n              <p />\r\n */}              {logoBottom}\r\n              {/* PAGE 3 Family Cash Needs at Death Combine with Income needs*/}\r\n              <hr className=\"ppi1\" />\r\n              {logoTop}\r\n              <br />\r\n              <h2 className=\"ppi1\">{singlePerson?labelsBilingual.pg3T_1: labelsBilingual.pg3T}</h2>\r\n              <p className=\"ppi1\">{singlePerson?labelsBilingual.pg3P1_1:labelsBilingual.pg3P1}</p>\r\n              <div\r\n                style={{\r\n                  overflowX: \"auto\",\r\n                  overflowY: \"hidden\",\r\n                  width: \"100%\",\r\n                }}\r\n              >\r\n                <div className=\"tableTitle\">{labelsBilingual.pg3TabT}</div>\r\n                <table className=\"cashNeeds\">\r\n                  <thead></thead>\r\n                  <tbody>\r\n                    {output.liabilities.map((item) => (\r\n                      <tr key={item.name}>\r\n                        <td style={{ width: \"50%\" }}>{item.name}</td>\r\n                        <td className=\"textalignright\">\r\n                        {formatted(item.value,lang)}\r\n                    \r\n                    {/*       {dollarEn}{formatMoney(item.value, 0, decimalChar, thousands)} */}\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                    <tr className=\"backgroundcolorDCE5F0\">\r\n                      <td>\r\n                        <strong>{labelsBilingual.pg3TabRTot}</strong>\r\n                      </td>\r\n                      <td className=\"textalignrightpaddingright20\">\r\n                        <strong>\r\n                        {formatted(output.totalLiab,lang)}\r\n                    \r\n                    {/*       {dollarEn}\r\n                          {formatMoney(\r\n                            output.totalLiab,\r\n                            0,\r\n                            decimalChar,\r\n                            thousands\r\n                          )} */}\r\n                        </strong>\r\n                      </td>\r\n                    </tr>\r\n                    {/*\t<tr className=\"backgroundcolorDCE5F0\">\r\n\t\t\t\t\t\t\t\t<td><strong>Permanent Cash Needs <sup>p</sup></strong></td>\r\n\t\t\t\t\t\t\t\t\t\t<td className=\"textalignright\"><strong>{dollarEn}200 <sup>p</sup></strong></td>\r\n\t\t\t\t\t\t\t\t\t</tr>*/}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n              {/* combined with pg 3 PAGE 4 Family Income Needs at Death*/}\r\n              {/* <br />\r\n          <hr className=\"ppi1\" />\r\n          <h2 className=\"ppi1\">{labelsBilingual.pg4T}</h2>\r\n          <p className=\"ppi1\">{labelsBilingual.pg4P1}</p>*/}\r\n              <h4 className=\"ppi1\"></h4>\r\n              <div\r\n                style={{\r\n                  overflowX: \"auto\",\r\n                  overflowY: \"hidden\",\r\n                  width: \"100%\",\r\n                }}\r\n              >\r\n                <div className=\"tableTitle\">{labelsBilingual.pg4TabT}</div>\r\n                <table className=\"incomeNeeds\">\r\n                  <thead></thead>\r\n                  <tbody>\r\n                    <tr>\r\n                      <td className=\"paddingleft25\" style={{ width: \"70%\" }}>\r\n                        {singlePerson?labelsBilingual.pg4TabRow1_1: labelsBilingual.pg4TabRow1}\r\n                      </td>\r\n                      <td className=\"textalignright\">\r\n                      {formatted( output.Income + output.Income2,lang)}\r\n                    \r\n                    {/*     {dollarEn}\r\n                        {formatMoney(\r\n                          output.Income + output.Income2,\r\n                          0,\r\n                          decimalChar,\r\n                          thousands\r\n                        )} */}\r\n                      </td>\r\n                    </tr>\r\n                    <tr className=\"backgroundcolorFFFFFF\">\r\n                      <td>\r\n                        <br />\r\n                        {singlePerson?labelsBilingual.pg4TabRow2_1: labelsBilingual.pg4TabRow2}\r\n                      </td>\r\n                      <td></td>\r\n                    </tr>\r\n\r\n                    {output.percent2.length > 0 && (\r\n                      <tr>\r\n                        <td className=\"paddingleft25\">\r\n                          {labelsBilingual.pg4TabRow3}\r\n                        </td>\r\n                        <td className=\"textalignright\">{output.percent1}%</td>\r\n                      </tr>\r\n                    )}\r\n                    {output.percent2.length > 0 && (\r\n                      <tr>\r\n                        <td className=\"paddingleft25\">\r\n                          {labelsBilingual.pg4TabRow4}\r\n                        </td>\r\n                        <td className=\"textalignright\">{output.percent2.map((item) => <span>{item}% </span>)}</td>\r\n                      </tr>\r\n                    )}\r\n                    {output.percent2.length === 0 && (\r\n                      <tr>\r\n                        <td className=\"paddingleft25\">\r\n                          {labelsBilingual.pg4TabRow4}\r\n                        </td>\r\n                        <td className=\"textalignright\">{output.percent1}%</td>\r\n                      </tr>\r\n                    )}\r\n\r\n                    <tr className=\"backgroundcolorFFFFFF\">\r\n                      <td></td>\r\n                      <td></td>\r\n                    </tr>\r\n                    <tr className=\"backgroundcolorFFFFFF\">\r\n                      <td>{labelsBilingual.pg4TabRow5}</td>\r\n                      <td></td>\r\n                    </tr>\r\n                    {output.percent2.length > 0 && (\r\n                      <tr>\r\n                        <td className=\"paddingleft25\">\r\n                          {labelsBilingual.pgTabRowMoreIncome}\r\n                        </td>\r\n                        <td className=\"textalignright\">\r\n                        {formatted(output.percentNeed1,lang)}\r\n                    \r\n                    {/*       {dollarEn}\r\n                          {formatMoney(\r\n                            output.percentNeed1,\r\n                            0,\r\n                            decimalChar,\r\n                            thousands\r\n                          )} */}\r\n                        </td>\r\n                      </tr>\r\n                    )}\r\n                    {output.percent2.length > 0 && (\r\n                      <tr>\r\n                        <td className=\"paddingleft25\">\r\n                          {thereAfterText}\r\n                        </td>\r\n                        <td className=\"textalignright\">\r\n                        {formatted(output.percentNeed2.reduce((a, b) => a + b, 0),lang)}\r\n                    \r\n                    {/*       {dollarEn}\r\n                          {formatMoney(\r\n                            output.percentNeed2.reduce((a, b) => a + b, 0),\r\n                            0,\r\n                            decimalChar,\r\n                            thousands\r\n                          )} */}\r\n                        </td>\r\n                      </tr>\r\n                    )}\r\n                    {output.percent2.length === 0 && (\r\n                      <tr>\r\n                        <td className=\"paddingleft25\">\r\n                        {thereAfterText}\r\n                        </td>\r\n                        <td className=\"textalignright\">\r\n                        {formatted(output.percentNeed1,lang)}\r\n                    \r\n                          {/* {dollarEn}\r\n                          {formatMoney(\r\n                            output.percentNeed1,\r\n                            0,\r\n                            decimalChar,\r\n                            thousands\r\n                          )} */}\r\n                        </td>\r\n                      </tr>\r\n                    )}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n              <br />\r\n              <hr className=\"ppi1\" />\r\n              {logoBottom}\r\n              {/* PAGE 5 Family Cash Sourcess at Death*/}\r\n              {logoTop}\r\n              <h2 className=\"ppi1\">{singlePerson?labelsBilingual.pg5T_1:labelsBilingual.pg5T}</h2>\r\n              <div\r\n                style={{\r\n                  overflowX: \"auto\",\r\n                  overflowY: \"hidden\",\r\n                  width: \"100%\",\r\n                }}\r\n              >\r\n                <table className=\"tableTitle\" style={{ width: \"90%\"}}>\r\n                <tr ><td  style={{ width: \"50%\",border:\"none\" }}>{labelsBilingual.pg5TabT}</td>\r\n                  <td style={{ width: \"25%\",border:\"none\" }}>\r\n                    {labelsBilingual.pg5TabT2}\r\n                  </td>\r\n                  <td style={{ width: \"25%\",border:\"none\" }}>\r\n                    {labelsBilingual.pg5TabT3}\r\n                  </td></tr>\r\n                 </table>\r\n                \r\n               <table className=\"cashSources\">\r\n                  <tbody>\r\n                    {/* add gov db*/}\r\n                    <tr>\r\n                      <td style={{ height: \"1px\", width: \"50%\" }}>\r\n                        {labelsBilingual.pg5TabRow1}\r\n                      </td>\r\n                      <td\r\n                        className=\"textalignright\"\r\n                        style={{ height: \"1px\", width: \"25%\" }}\r\n                      >\r\n                        {formatted(output.govDB,lang)}\r\n                    \r\n                    {/*     {dollarEn}{formatMoney(output.govDB, 0, decimalChar, thousands)} */}\r\n                      </td>\r\n                      <td\r\n                        className=\"textalignright\"\r\n                        style={{ height: \"1px\", width: \"25%\" }}\r\n                      >\r\n                        {formatted(output.govDB,lang)}\r\n                    \r\n                    {/*     {dollarEn}{formatMoney(output.govDB, 0, decimalChar, thousands)} */}\r\n                      </td>\r\n                    </tr>\r\n                    {output.assets.map((item) => (\r\n                      <tr key={item.name}>\r\n                        <td style={{ height: \"1px\", width: \"50%\" }}>\r\n                          {item.name}\r\n                        </td>\r\n                        <td\r\n                          className=\"textalignright\"\r\n                          style={{ height: \"1px\", width: \"25%\" }}\r\n                        >\r\n                          {formatted(item.value,lang)}\r\n                    \r\n                    {/*       {dollarEn}{formatMoney(item.value, 0, decimalChar, thousands)} */}\r\n                        </td>\r\n                        <td\r\n                          className=\"textalignright\"\r\n                          style={{ height: \"1px\", width: \"25%\" }}\r\n                        >\r\n                          {item.disposeValue > 0\r\n                            ? \r\n                            formatted(item.disposeValue,lang)\r\n                              /* {dollarEn} +\r\n                              formatMoney(\r\n                                item.disposeValue,\r\n                                0,\r\n                                decimalChar,\r\n                                thousands\r\n                              ) */\r\n                            : \"\"}\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                    <tr className=\"backgroundcolorDCE5F0\">\r\n                      <td>{labelsBilingual.pg5TabRow3}</td>\r\n                      {/* <td className=\"textalignright\">\r\n                    {dollarEn}{formatMoney(output.totalAsset, 0, decimalChar, thousands)}\r\n                  </td> */}\r\n                      <td className=\"textalignright\">\r\n                      {formatted(output.totalAsset,lang)}\r\n                    {/* \r\n                        {dollarEn}\r\n                        {formatMoney(\r\n                          output.totalAsset,\r\n                          0,\r\n                          decimalChar,\r\n                          thousands\r\n                        )} */}\r\n                      </td>\r\n                      <td className=\"textalignright\">\r\n                      {formatted(output.totalDisposeAsset,lang)}\r\n                    \r\n                    {/*     {dollarEn}\r\n                        {formatMoney(\r\n                          output.totalDisposeAsset,\r\n                          0,\r\n                          decimalChar,\r\n                          thousands\r\n                        )} */}\r\n                      </td>\r\n                    </tr>\r\n                    <tr className=\"backgroundcolorDCE5F0\">\r\n                      <td>{singlePerson?labelsBilingual.pg5TabRow4_1: labelsBilingual.pg5TabRow4}</td>\r\n                      <td></td>\r\n                      <td\r\n                        className=\"textalignright\"\r\n                        style={{ height: \"1px\", width: \"25%\" }}\r\n                      >\r\n                        {formatted(output.totalLiab,lang)}\r\n                    {/* \r\n                        {dollarEn}\r\n                        {formatMoney(\r\n                          output.totalLiab,\r\n                          0,\r\n                          decimalChar,\r\n                          thousands\r\n                        )} */}\r\n                      </td>\r\n                    </tr>\r\n                    <tr>\r\n                      <td>{singlePerson?labelsBilingual.pg5TabRow5_1: labelsBilingual.pg5TabRow5}</td>\r\n                      <td> </td>\r\n                      <td className=\"textalignright\">\r\n                      {formatted(output.totalDisposeAsset - output.totalLiab,lang)}\r\n                    \r\n                    {/*     {dollarEn}\r\n                        {formatMoney(\r\n                          output.totalDisposeAsset - output.totalLiab,\r\n                          0,\r\n                          decimalChar,\r\n                          thousands\r\n                        )} */}\r\n                      </td>\r\n                    </tr>\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n              <hr className=\"ppi1\" />\r\n              {logoBottom}\r\n              {/* PAGE 6 Family Income Sources at Death*/}\r\n              {logoTop}\r\n              <br />\r\n              <h2 className=\"ppi1\">{singlePerson?labelsBilingual.pg6T_1: labelsBilingual.pg6T}</h2>\r\n              <div\r\n                style={{\r\n                  overflowX: \"auto\",\r\n                  overflowY: \"hidden\",\r\n                  width: \"100%\",\r\n                }}\r\n              >\r\n                {/* <div className=\"tableTitle\">{labelsBilingual.pg6TabT}</div> */}\r\n                <table className=\"tableTitle\" style={{ width: \"90%\"}}>\r\n                <tr ><td  style={{ width: \"51%\",border:\"none\" }}>{labelsBilingual.pg6TabT}</td>\r\n                  <td style={{ width: \"14%\",border:\"none\" }}>\r\n                    {labelsBilingual.pg5TabT2}\r\n                  </td>\r\n                  <td style={{ width: \"25%\",border:\"none\" }}>\r\n                    {labelsBilingual.pg5TabT3}\r\n                  </td></tr>\r\n                 </table>\r\n                \r\n           \r\n\r\n\r\n                <table className=\"incomeSources\">\r\n                  <tbody>\r\n                    {output.sources.map((item) => (\r\n                      <tr key={item.name}>\r\n                        <td style={{ width: \"51%\" }}>{item.name}</td>\r\n                        <td className=\"textalignright\"  style={{ width: \"14%\" }}>\r\n                        {formatted(item.value,lang)}\r\n                          </td>\r\n                        <td className=\"textalignright\"  style={{ width: \"25%\" }}>\r\n                        {formatted(item.valueAtDeath,lang)}\r\n                          </td>\r\n                      </tr>\r\n                    ))}\r\n                    <tr className=\"backgroundcolorFFFFFF\">\r\n                      <td colSpan =\"2\"></td>\r\n                      <td colSpan =\"2\"></td>\r\n                    </tr>\r\n                    <tr className=\"backgroundcolorFFFFFF\">\r\n                    <td colSpan =\"2\">{labelsBilingual.pg6TabRow1}</td>\r\n                    <td colSpan =\"2\"></td>\r\n                    </tr>\r\n                    {output.percent2.length > 0 && (\r\n                      <tr>\r\n                        <td colSpan =\"2\" className=\"paddingleft25\">\r\n                          {labelsBilingual.pg6TabRow2}\r\n                        </td>\r\n                        <td colSpan =\"2\" className=\"textalignright\">\r\n                          <span\r\n                            style={{ fontSize: \"10px\", marginRight: \"30px\" }}\r\n                          >\r\n                            ({labelsBilingual.pg6Net + \" \"}\r\n                            {formatMoney(\r\n                              //output.totalSourceATax,\r\n                              output.totalSourceATaxAtDeath,\r\n                              0,\r\n                              decimalChar,\r\n                              thousands\r\n                            )}\r\n                            )\r\n                          </span>\r\n                          {/* {formatted(output.totalSource,lang)} */}\r\n                          {formatted(output.totalSourceAtDeath,lang)}\r\n                    \r\n                    {/*       {dollarEn}\r\n                          {formatMoney(\r\n                            output.totalSource,\r\n                            0,\r\n                            decimalChar,\r\n                            thousands\r\n                          )} */}\r\n                        </td>\r\n                      </tr>\r\n                    )}\r\n                    {output.percent2.length > 0 && (\r\n                      <tr>\r\n                        <td colSpan =\"2\" className=\"paddingleft25\">\r\n                          {!singleFamily? (thereAfterText): (thereAfterTextSF)}\r\n                        </td>\r\n                        <td colSpan =\"2\" className=\"textalignright\">\r\n                          <span\r\n                            style={{ fontSize: \"10px\", marginRight: \"30px\" }}\r\n                          >\r\n                            ({labelsBilingual.pg6Net + \" \"}\r\n                            {formatMoney(\r\n                              //output.totalSource2ATax,\r\n                              output.totalSource2ATaxAtDeath,\r\n                              0,\r\n                              decimalChar,\r\n                              thousands\r\n                            )}\r\n                            )\r\n                          </span>\r\n                          {/* {formatted(output.totalSource2,lang)} */}\r\n                          {formatted(output.totalSource2AtDeath,lang)}\r\n                    \r\n                    {/*       {dollarEn}\r\n                          {formatMoney(\r\n                            output.totalSource2,\r\n                            0,\r\n                            decimalChar,\r\n                            thousands\r\n                          )} */}\r\n                        </td>\r\n                      </tr>\r\n                    )}\r\n                    {output.percent2.length === 0 && (\r\n                      <tr>\r\n                        <td colSpan =\"2\" className=\"paddingleft25\">\r\n                          {!singleFamily?(thereAfterText): (thereAfterTextSF)}\r\n                        </td>\r\n                        <td colSpan =\"2\" className=\"textalignright\">\r\n                        {/* {formatted(output.totalSource,lang)} */}\r\n                        {formatted(output.totalSourceAtDeath,lang)}\r\n                    \r\n                    {/*       {dollarEn}\r\n                          {formatMoney(\r\n                            output.totalSource,\r\n                            0,\r\n                            decimalChar,\r\n                            thousands\r\n                          )} */}\r\n                        </td>\r\n                      </tr>\r\n                    )}\r\n                    <tr className=\"backgroundcolorFFFFFF\">\r\n                    <td colSpan =\"2\"></td>\r\n                    <td colSpan =\"2\"></td>\r\n                    </tr>\r\n                    <tr className=\"backgroundcolorFFFFFF\">\r\n                    <td colSpan =\"2\">{labelsBilingual.pg6TabRow4}</td>\r\n                    <td colSpan =\"2\"></td>\r\n                    </tr>\r\n                    {output.percent2.length > 0 && (\r\n                      <tr>\r\n                        <td colSpan =\"2\" className=\"paddingleft25\">\r\n                          {labelsBilingual.pgTabRowMoreIncome}\r\n                        </td>\r\n\r\n\r\n                        <td colSpan =\"2\" className=\"textalignright\">\r\n                          <span\r\n                            style={{ fontSize: \"10px\", marginRight: \"20px\" }}\r\n                          >\r\n              \r\n\r\n                            ({\r\n                              formatMoney(output.percentNeed1, 0, decimalChar, thousands)\r\n                              } \r\n                              - \r\n                              {             \r\n                                formatMoney(output.totalSourceATaxAtDeath, 0, decimalChar, thousands)\r\n                              })\r\n                          </span>\r\n                          <strong>\r\n                          {formatted(Math.max(0, output.percentNeed1 - output.totalSourceATaxAtDeath),lang)}\r\n                          </strong>\r\n                        </td>\r\n                      </tr>\r\n                    )}\r\n                    {output.percent2.length > 0 && (\r\n                      <tr>\r\n                        <td colSpan =\"2\" className=\"paddingleft25\">\r\n                        {!singleFamily?(thereAfterText): (thereAfterTextSF)}\r\n                        </td>\r\n                        <td colSpan =\"2\" className=\"textalignrightbackgroundcolorDCE5F0\">\r\n  <span\r\n                            style={{ fontSize: \"10px\", marginRight: \"30px\" }}\r\n                          >\r\n              \r\n\r\n                            ({\r\n              formatMoney(output.percentNeed2.reduce((a, b) => a + b, 0), 0, decimalChar, thousands)\r\n            } \r\n            - \r\n            {             \r\n              /* formatMoney(output.totalSource2ATax, 0, decimalChar, thousands) */\r\n              formatMoney(output.totalSource2ATaxAtDeath, 0, decimalChar, thousands)\r\n            })\r\n\r\n</span>\r\n                          <strong>\r\n                          {/* {formatted(Math.max(0, output.percentNeed2.reduce((a, b) => a + b, 0) - output.totalSource2ATax),lang)} */}\r\n                          {formatted(Math.max(0, output.percentNeed2.reduce((a, b) => a + b, 0) - output.totalSource2ATaxAtDeath),lang)}\r\n                    \r\n                    {/*         {dollarEn}\r\n                            {formatMoney(\r\n                              Math.max(\r\n                                0,\r\n                                //output.percentNeed2.reduce((a, b) => a + b, 0) - output.totalSource2ATax\r\n                                output.totalDesiredGrossIncome2- output.totalSource2\r\n                              ),\r\n                              0,\r\n                              decimalChar,\r\n                              thousands\r\n                            )} */}\r\n                          </strong>\r\n                        </td>\r\n                      </tr>\r\n                    )}\r\n                    {output.percent2.length === 0 && (\r\n                      <tr>\r\n                        <td colSpan =\"2\" className=\"paddingleft25\">\r\n                          {!singleFamily?(thereAfterText): (thereAfterTextSF)}\r\n                        </td>\r\n                        <td colSpan =\"2\" className=\"textalignrightbackgroundcolorDCE5F0\">\r\n\r\n\r\n                       {/*  <td className=\"textalignright\"> */}\r\n                          <span\r\n                            style={{ fontSize: \"10px\", marginRight: \"30px\" }}\r\n                          >\r\n              \r\n\r\n                            ({\r\n                                formatMoney(output.percentNeed1, 0, decimalChar, thousands)\r\n                              } \r\n                              - \r\n                              {             \r\n                                /* formatMoney(output.totalSourceATax, 0, decimalChar, thousands) */\r\n                                formatMoney(output.totalSourceATaxAtDeath, 0, decimalChar, thousands)\r\n                              })\r\n                          </span>\r\n                          <strong>\r\n                          \r\n                          {formatted(Math.max(0, output.percentNeed1 - output.totalSourceATaxAtDeath),lang)}{/* output.totalDesiredGrossIncome - output.totalSource,lang)} */}\r\n                    \r\n                   \r\n                          </strong>\r\n                        </td>\r\n                      </tr>\r\n                    )}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n              {/* PAGE 7 life i anal*/}\r\n              {/* <br />\r\n          <hr className=\"ppi1\" />\r\n          <h2 className=\"ppi1\">{labelsBilingual.pg7T}</h2>\r\n          <div\r\n            style={{ overflowX: \"auto\", overflowY: \"hidden\", width: \"100%\" }}\r\n          >\r\n            <div className=\"tableTitle\">{labelsBilingual.pg7TabT}</div>\r\n\r\n            <table className=\"incomePosition\">\r\n              <tbody>\r\n                <tr className=\"backgroundcolorFFFFFF\">\r\n                  <td style={{ width: \"70%\" }}> </td>\r\n                  <td> </td>\r\n                </tr>\r\n                <tr>\r\n                  <td className=\"backgroundcolorFFFFFF\">\r\n                    {labelsBilingual.pg7TabRow1}\r\n                  </td>\r\n                  <td className=\"backgroundcolorFFFFFF\"></td>\r\n                </tr>\r\n                {output.percent2 > 0 && (\r\n                  <tr>\r\n                    <td className=\"paddingleft25\">\r\n                      {labelsBilingual.pg7TabRow2}\r\n                    </td>\r\n                    <td className=\"textalignright\">\r\n                      {dollarEn}\r\n                      {formatMoney(\r\n                        Math.max(0, output.percentNeed1 - output.totalSource),\r\n                        0,\r\n                        decimalChar,\r\n                        thousands\r\n                      )}\r\n                    </td>\r\n                  </tr>\r\n                )}\r\n                {output.percent2 > 0 && (\r\n                  <tr>\r\n                    <td className=\"paddingleft25\">\r\n                      {labelsBilingual.pgTabRowThereAfter}\r\n                    </td>\r\n                    <td className=\"textalignright\">\r\n                      {dollarEn}\r\n                      {formatMoney(\r\n                        Math.max(0, output.percentNeed2 - output.totalSource2),\r\n                        0,\r\n                        decimalChar,\r\n                        thousands\r\n                      )}\r\n                    </td>\r\n                  </tr>\r\n                )}\r\n                {output.percent2 === 0 && (\r\n                  <tr>\r\n                    <td className=\"paddingleft25\">\r\n                      {labelsBilingual.pgTabRowThereAfter}\r\n                    </td>\r\n                    <td className=\"textalignright\">\r\n                      {dollarEn}\r\n                      {formatMoney(\r\n                        Math.max(0, output.percentNeed1 - output.totalSource),\r\n                        0,\r\n                        decimalChar,\r\n                        thousands\r\n                      )}\r\n                    </td>\r\n                  </tr>\r\n                )}\r\n\r\n                <tr>\r\n                  <td className=\"paddingleft25\">\r\n                    {labelsBilingual.pg7TabRow4}\r\n                  </td>\r\n                  <td className=\"textalignright\">{output.infRate}%</td>\r\n                </tr>\r\n                <tr>\r\n                  <td className=\"paddingleft25\">\r\n                    {labelsBilingual.pg7TabRow5}\r\n                  </td>\r\n                  <td className=\"textalignright\">{output.invRate}%</td>\r\n                </tr>\r\n                <tr className=\"backgroundcolorFFFFFF\">\r\n                  <td> </td>\r\n                  <td> </td>\r\n                </tr>\r\n                <tr>\r\n                  <td className=\"backgroundcolorFFFFFF\">\r\n                    {labelsBilingual.pg7TabRow6}\r\n                  </td>\r\n                  <td className=\"backgroundcolorFFFFFF\"> </td>\r\n                </tr>\r\n                <tr>\r\n                  <td>\r\n                    <strong></strong>\r\n                    {labelsBilingual.pg7TabRow7} {this.props.LE})\r\n                  </td>\r\n                  <td className=\"textalignright\">\r\n                    {dollarEn}\r\n                    {formatMoney(\r\n                      Math.max(\r\n                        0,\r\n                        output.insNeedLE + output.totalAsset - output.totalLiab\r\n                      ),\r\n                      0,\r\n                      decimalChar,\r\n                      thousands\r\n                    )}\r\n                  </td>\r\n                </tr>\r\n                <tr>\r\n                  <td>\r\n                    <strong></strong>\r\n                    {labelsBilingual.pg7TabRow8}\r\n                  </td>\r\n                  <td className=\"textalignright\">\r\n                    {dollarEn}\r\n                    {formatMoney(\r\n                      Math.max(\r\n                        0,\r\n                        output.insNeedRet + output.totalAsset - output.totalLiab\r\n                      ),\r\n                      0,\r\n                      decimalChar,\r\n                      thousands\r\n                    )}\r\n                  </td>\r\n                </tr>\r\n                {output.hasChild && output.ygChild < maxDur && (\r\n                  <tr>\r\n                    <td>\r\n                      <strong></strong>\r\n                      {labelsBilingual.pg7TabRow9}\r\n                    </td>\r\n                    <td className=\"textalignright\">\r\n                      {dollarEn}\r\n                      {formatMoney(\r\n                        Math.max(\r\n                          0,\r\n                          output.insNeedYgChild25 +\r\n                            output.totalAsset -\r\n                            output.totalLiab\r\n                        ),\r\n                        0,\r\n                        decimalChar,\r\n                        thousands\r\n                      )}\r\n                    </td>\r\n                  </tr>\r\n                )}\r\n                {output.hasChild && output.ygChild < orphAge && (\r\n                  <tr>\r\n                    <td>\r\n                      <strong></strong>\r\n                      {labelsBilingual.pg7TabRow10}\r\n                    </td>\r\n                    <td className=\"textalignright\">\r\n                      {dollarEn}\r\n                      {formatMoney(\r\n                        Math.max(\r\n                          0,\r\n                          output.insNeedYgChild18 +\r\n                            output.totalAsset -\r\n                            output.totalLiab\r\n                        ),\r\n                        0,\r\n                        decimalChar,\r\n                        thousands\r\n                      )}\r\n                    </td>\r\n                  </tr>\r\n                )}\r\n              </tbody>\r\n            </table>\r\n          </div> */}\r\n              {/* PAGE 7 chart*/}\r\n              {/* <div style={{ color: \"darkBlue\", marginTop: \"55px\" }}>\r\n            <br />\r\n            <div style={{ marginLeft: \"20px\", width: \"90%\" }}>\r\n              <div style={{ width: \"75%\" }}>\r\n                <article\r\n                  id=\"bar1\"\r\n                  className=\"canvas-container\"\r\n                  style={{ height: \"200px\" }}\r\n                >\r\n                  <Bar data={dataInsurance} options={options} />\r\n                </article>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <br />\r\n          <br /> */}\r\n              <hr className=\"ppi1\" />\r\n              {logoBottom}\r\n              {/* PAGE 8 life i anal 2*/}\r\n              {logoTop}\r\n              <br />\r\n              <h2 className=\"ppi1\"> {labelsBilingual.pg8T}</h2>\r\n              <div className=\"tableTitle\">{singlePerson?  labelsBilingual.pg8TabT_1:labelsBilingual.pg8TabT}</div>\r\n              <div\r\n                style={{\r\n                  overflowX: \"auto\",\r\n                  overflowY: \"hidden\",\r\n                  width: \"100%\",\r\n                }}\r\n              >\r\n                <table className=\"incomePosition\">\r\n                  <tbody>\r\n                    <tr>\r\n                      <td width=\"70%\">{labelsBilingual.pg8TabRow1}</td>\r\n                      <td className=\"textalignright\" width=\"30%\">\r\n                      {formatted(output.totalDisposeAsset - output.totalLiab,lang)}\r\n                    \r\n                    {/*     {dollarEn}\r\n                        {formatMoney(\r\n                          output.totalDisposeAsset - output.totalLiab,\r\n                          0,\r\n                          decimalChar,\r\n                          thousands\r\n                        )} */}\r\n                      </td>\r\n                    </tr>\r\n                    <tr>\r\n                      <td className=\"backgroundcolorFFFFFF\">\r\n                        <br />\r\n                        {labelsBilingual.pg8TabRow2}\r\n                      </td>\r\n                      <td className=\"backgroundcolorFFFFFF\"></td>\r\n                    </tr>\r\n                    {!singleFamily &&\r\n      \r\n                      <tr>\r\n                      <td>\r\n                        <strong></strong>\r\n                        {labelsBilingual.pg8TabRow3}\r\n                        {this.props.LE})\r\n                      </td>\r\n                      <td className=\"textalignright\">\r\n                        {/* {dollarEn+this.props.insuranceNeedLE+dollarFr} */}\r\n                        {formatted(this.props.insuranceNeedLE,lang)}\r\n                      </td>\r\n                    </tr>}\r\n                    <tr>\r\n                      <td>\r\n                        <strong></strong>\r\n                        {singleFamily || singlePerson? labelsBilingual.pg8TabRow4Alt.replace(\"B.\",\"A.\"): labelsBilingual.pg8TabRow4}\r\n                      </td>\r\n                      <td className=\"textalignright\">\r\n                        {/* {dollarEn+this.props.insuranceNeedRet+dollarFr} */}\r\n                        {formatted(this.props.insuranceNeedRet,lang)}\r\n                      </td>\r\n                    </tr>\r\n                    {output.hasChild && output.ygChild < maxDur && (\r\n                      <tr>\r\n                        <td>\r\n                          <strong></strong>\r\n                          {singleFamily? labelsBilingual.pg8TabRow5.replace(\"C.\",\"B.\").replace(\"25\",output.youngestChildEndAge):labelsBilingual.pg8TabRow5.replace(\"25\",output.youngestChildEndAge)}\r\n                        </td>\r\n                        <td className=\"textalignright\">\r\n                        {formatted(output.insNeedYgChild25,lang)}\r\n                    \r\n                    {/*       {dollarEn}\r\n                          {formatMoney(\r\n                            output.insNeedYgChild25,\r\n                            0,\r\n                            decimalChar,\r\n                            thousands\r\n                          )} */}\r\n                        </td>\r\n                      </tr>\r\n                    )}\r\n                    {output.hasChild && output.ygChild < orphAge && (\r\n                      <tr>\r\n                        <td>\r\n                          <strong></strong>\r\n                          {singleFamily? labelsBilingual.pg8TabRow6.replace(\"D.\",\"C.\"):labelsBilingual.pg8TabRow6}\r\n                        </td>\r\n                        <td className=\"textalignright\">\r\n                        {formatted(output.insNeedYgChild18,lang)}\r\n                    \r\n                    {/*       {dollarEn}\r\n                          {formatMoney(\r\n                            output.insNeedYgChild18,\r\n                            0,\r\n                            decimalChar,\r\n                            thousands\r\n                          )} */}\r\n                        </td>\r\n                      </tr>\r\n                    )}\r\n                    <tr></tr>\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n              {/* PAGE 8 chart*/}\r\n              <div style={{ color: \"darkBlue\", marginTop: \"55px\" }}>\r\n                <br />\r\n                <div style={{ marginLeft: \"20px\", width: \"90%\" }}>\r\n                  <div style={{ width: \"75%\" }}>\r\n                    <article\r\n                      id=\"bar2\"\r\n                      className=\"canvas-container\"\r\n                      style={{ height: \"200px\" }}\r\n                    >\r\n                      <Bar data={dataInsurance2} options={options} />\r\n                    </article>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <br />\r\n              <br />\r\n              {/* PAGE 9 notes*/}\r\n              {/*  <hr className=\"ppi1\" />\r\n             {allPages && (\r\n              <AdjustibleImage\r\n                image={this.props.dataInput.Presentations[0].adviserLogo.image}\r\n                showDetails={false}\r\n                size={this.props.dataInput.Presentations[0].adviserLogo.size}\r\n                imageLeft={\r\n                  this.props.dataInput.Presentations[0].adviserLogo.left\r\n                }\r\n                allPages={\r\n                  this.props.dataInput.Presentations[0].adviserLogo.allPages\r\n                }\r\n                imageRemove={this.props.imageRemove}\r\n                imageAdjust={this.props.imageAdjust}\r\n                \r\n              />\r\n            )}\r\n            <br />\r\n            <img className=\"ppi2\" src=\"img/desktop/picture1.png\" width=\"400\" alt=\"Capital Requirements Chart\" />\r\n            <br /> <br /> \r\n            {logoTop}\r\n              <br />\r\n              <br /> <br />\r\n            <h2 className=\"ppi1\">{labelsBilingual.pg9T}</h2>\r\n            <p className=\"ppi1\">{labelsBilingual.pg9P1}</p>\r\n            <br /> */}\r\n\r\n\r\n              {logoBottom}\r\n              {/* PAGE 9 Notes*/}\r\n              {logoTop}\r\n              <br />\r\n              <br /> <br />\r\n              <h2 className=\"ppi1\">{labelsBilingual.pg9T}</h2>\r\n              <p className=\"ppi1\">{labelsBilingual.pg9P1}</p>\r\n              <br /> <br />\r\n              <br />\r\n              <br />\r\n              <br />\r\n\r\n\r\n              {logoBottom}\r\n              {/* PAGE 10 ackno*/}\r\n              {logoTop}\r\n              <br />\r\n              <br /> <br />\r\n              <h2 className=\"ppi1\">{labelsBilingual.pg10T}</h2>\r\n              <p className=\"ppi1\">{labelsBilingual.pg10P1}</p>\r\n              <br /> <br />\r\n              <br />\r\n              <br />\r\n              <br />\r\n              <p className=\"ppi1\">\r\n                {labelsBilingual.pg10TabRow1}\r\n                <br />\r\n                <span style={{ paddingLeft: \"118px\" }}>\r\n                  {labelsBilingual.pg10TabRow11}\r\n                </span>\r\n              </p>\r\n              <br />\r\n              <br />\r\n              <p className=\"ppi1\">\r\n                {labelsBilingual.pg10TabRow2}\r\n                <br />\r\n                <span style={{ paddingLeft: \"118px\" }}>\r\n                  {labelsBilingual.pg10TabRow11}\r\n                </span>\r\n              </p>\r\n              <br />\r\n              <br />\r\n              <p className=\"ppi1\">\r\n                {labelsBilingual.pg10TabRow3}\r\n                <br />\r\n                <span style={{ paddingLeft: \"110px\" }}>\r\n                  {labelsBilingual.pg10TabRow11}\r\n                </span>\r\n              </p>\r\n              <br />\r\n              <hr className=\"ppi1\" />\r\n              {logoBottom}\r\n            </div>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n}\r\n","import {\r\n    TITLES,\r\n    ASSETS,\r\n    IMAGE_LOGO,\r\n    IMAGE_LOGO_OTHERPAGES,\r\n    IMAGE_APPLET_EP,\r\n  } from \"../definitions/generalDefinitions\";\r\n  import { OUTPUTTEXT} from \"../definitions/outputDefinitions\";\r\n  import { OUTPUTTEXTEP  } from \"../definitions/outputDefinitionsEP\";\r\n  import { formatMoney, formatMoney2, cleanFormat } from \"../utils/helper\";\r\n  import { getOutputValues } from \"../data/dataExchange\";\r\n  //import {insertGrid} from \"./OutputPDFEP\"\r\n\r\n  import {\r\n    PDF,\r\n    InToPt,\r\n    PxToPt,\r\n    HELVETICA,\r\n    TIMES,\r\n    NORMAL,\r\n    BOLD,\r\n    HEADER_RECT_IN_W,\r\n  } from \"./PDF\";\r\n  import {\r\n    ASSET_TAX_TYPE_PRINCIPAL_RES,\r\n    ASSET_TAX_TYPE_REAL_ESTATE,\r\n    ASSET_TAX_TYPE_STOCKS,\r\n    ASSET_TAX_TYPE_SMALL_BUS,\r\n    ASSET_TAX_TYPE_RRSP,\r\n    ASSET_TAX_TYPE_INTEREST,\r\n    ASSET_TAX_TYPE_OTHER,\r\n    ASSET_TAX_TYPE_COUNT,\r\n  } from \"../definitions/outputDefinitionsEP\";\r\n  \r\n  const DISPLAY_INCOME = 1;\r\n  \r\n  const BULLET_FONT_SIZE = 24;\r\n  const NUMBER_BULLET_FONT_SIZE = 11;\r\n  const GRID_AGGREGATE = 0;\r\n  const GRID_INDIVIDUAL = 1;\r\n  \r\n  const LINES_PER_PAGE_LANDSCAPE = 27;\r\n  const LINES_PER_PAGE_PORTRAIT = 37;\r\n  \r\n\r\n\r\nexport async function doSavePdfINAAppendixAction(props) {\r\n  //  try \r\n  {\r\n        let pdf = new PDF();\r\n        pdf.Create();\r\n    \r\n       // var paragraph;\r\n        let height = 0.2;\r\n        let Widths = [1.2, 0.6, 1.8, 1.4];\r\n        let values;\r\n        const paraWidth = 6;\r\n        const paraLeft = 1.2;\r\n        const lineHeight = 0.196;\r\n        const indent = 0.15;\r\n        let paraY = 1;// 2.2 * lineHeight;\r\n    \r\n        // pdf output shared with presentation\r\n      //  let output = getOutputValues(props);\r\n    \r\n        const lang = props.dataInput.Presentations[0].language;\r\n        const pg1TitleY = 4.2;\r\n    \r\n    //  pdf.Header(OUTPUTTEXT[lang].pg1T);\r\n\r\n// Appendix title\r\n      setFontForTitle(pdf, lang, 16);\r\n      let paragraph = OUTPUTTEXT[lang].pgAppendix + \": \" + OUTPUTTEXT[lang].pgAppendixT;\r\n      insertPara(pdf, paragraph, paraLeft-.4, paraY, paraWidth);\r\n    \r\n      setFontForParas(pdf);\r\n      paragraph = OUTPUTTEXT[lang].pgAppendixP1;\r\n      paraY = paraY + 4 *lineHeight;\r\n    insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n     \r\n    paraY = paraY + 1.5* lineHeight;\r\n     \r\n      const graphWidth=paraWidth+1\r\n      let h= document.getElementById(\"barNeeds\").clientHeight\r\n      let w= document.getElementById(\"barNeeds\").clientWidth\r\n      const maxH=2;\r\n      const maxH2=2.5\r\n      let hFinal=graphWidth*h/w>maxH?maxH:graphWidth*h/w\r\n      let wFinal=graphWidth*h/w>maxH?maxH*w/h:graphWidth\r\n      \r\n      pdf.AddChart(\r\n        \"barNeeds\",\r\n        InToPt(paraLeft-.5),\r\n        InToPt(paraY),\r\n        InToPt(wFinal),\r\n        InToPt(hFinal)\r\n        //InToPt(graphWidth),\r\n        //InToPt(graphWidth*h/w)\r\n      );\r\n      // paraY = paraY + 5*lineHeight;\r\n      \r\n      paraY = paraY + 12* lineHeight;\r\n      paragraph = OUTPUTTEXT[lang].pgAppendixP2;\r\n      insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n      paraY = paraY + 1.5* lineHeight;\r\n     \r\n      h= document.getElementById(\"barShortfall\").clientHeight\r\n      w= document.getElementById(\"barShortfall\").clientWidth\r\n      hFinal=graphWidth*h/w>maxH?maxH:graphWidth*h/w\r\n      wFinal=graphWidth*h/w>maxH?maxH*w/h:graphWidth\r\n      pdf.AddChart(\r\n        \"barShortfall\",\r\n        InToPt(paraLeft-.5),\r\n        InToPt(paraY),\r\n        InToPt(wFinal),\r\n        InToPt(hFinal)\r\n      );\r\n      \r\n      h= document.getElementById(\"pieAssets\").clientHeight\r\n      w= document.getElementById(\"pieAssets\").clientWidth\r\n      hFinal=graphWidth*h/w>maxH2?maxH2:graphWidth*h/w\r\n      wFinal=graphWidth*h/w>maxH2?2*maxH2*w/h:graphWidth/2\r\n      \r\n      paraY = paraY + 13 * lineHeight;\r\n      paragraph = OUTPUTTEXT[lang].pgAppendixP3;\r\n      insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n      paraY = paraY + 1.5* lineHeight;\r\n      pdf.AddChart(\r\n        \"pieAssets\",\r\n        InToPt(paraLeft-1),\r\n        InToPt(paraY),\r\n        /* InToPt(wFinal),\r\n        InToPt(.8*hFinal) */\r\n        InToPt(graphWidth/2),\r\n        InToPt(graphWidth*h/w)\r\n      );\r\n     // paraY = paraY + 10 * lineHeight;\r\n     h= document.getElementById(\"pieLiabs\").clientHeight\r\n     w= document.getElementById(\"pieLiabs\").clientWidth\r\n     hFinal=graphWidth*h/w>maxH2?maxH2:graphWidth*h/w\r\n     wFinal=graphWidth*h/w>maxH2?2*maxH2*w/h:graphWidth/2\r\n      pdf.AddChart(\r\n        \"pieLiabs\",\r\n        InToPt(paraLeft+graphWidth/2-.5),\r\n        InToPt(paraY),\r\n        /* InToPt(wFinal),\r\n        InToPt(.8*hFinal) */\r\n        InToPt(graphWidth/2),\r\n        InToPt(graphWidth*h/w)\r\n      );\r\n\r\n      pdf.Footer(OUTPUTTEXT[lang].pgFooter);\r\n\r\n      const LE = props.LE; //- props.assetProjections[0].grid.dataProjection[1][0];\r\n      const lastRow=props.aggregateGrid.dataProjection[0].length\r\n      paragraph = OUTPUTTEXT[lang].pgAppendix + \": \" + OUTPUTTEXT[lang].pgAppendixT;\r\n    /* \r\n      insertGrid2(\r\n        pdf,\r\n        props.aggregateGrid,\r\n        LE,\r\n        paraLeft - 0.2,\r\n        1.65 * paraWidth,\r\n        lang,\r\n        true,\r\n        \"landscape\",\r\n        0,\r\n        GRID_AGGREGATE,\r\n        lastRow\r\n      ); */\r\n      insertGrid(\r\n        pdf,\r\n        props.aggregateGrid,\r\n        LE,\r\n        paraLeft - 0.2,\r\n        1.65 * paraWidth,\r\n        lang,\r\n        true,\r\n        \"landscape\",\r\n        0,\r\n        lastRow,        \r\n        GRID_AGGREGATE,\r\n        .65,\r\n        paragraph, \"\", \"\", \"\", OUTPUTTEXT[lang].pgFooter\r\n      )  \r\n\r\n      // if too long add another page\r\n      if (\r\n        lastRow > LINES_PER_PAGE_LANDSCAPE &&\r\n        lastRow < 2 * LINES_PER_PAGE_LANDSCAPE\r\n      )\r\n        insertGrid(\r\n          pdf,\r\n          props.aggregateGrid,\r\n          LE,\r\n          paraLeft - 0.2,\r\n          1.65 * paraWidth,\r\n          lang,\r\n          true,\r\n          \"landscape\",\r\n          LINES_PER_PAGE_LANDSCAPE,\r\n          lastRow,\r\n          GRID_AGGREGATE,.65,\r\n          paragraph, \"\", \"\", \"\", OUTPUTTEXT[lang].pgFooter\r\n          );\r\n      else if (lastRow > 2 * LINES_PER_PAGE_LANDSCAPE) {\r\n        insertGrid(\r\n          pdf,\r\n          props.aggregateGrid,\r\n          LE,\r\n          paraLeft - 0.2,\r\n          1.65 * paraWidth,\r\n          lang,\r\n          true,\r\n          \"landscape\",\r\n          LINES_PER_PAGE_LANDSCAPE,\r\n          lastRow,  \r\n          GRID_AGGREGATE,.65,\r\n          paragraph, \"\", \"\", \"\", OUTPUTTEXT[lang].pgFooter\r\n        );\r\n        insertGrid(\r\n          pdf,\r\n          props.aggregateGrid,\r\n          LE,\r\n          paraLeft - 0.2,\r\n          1.65 * paraWidth,\r\n          lang,\r\n          true,\r\n          \"landscape\",\r\n          2 * LINES_PER_PAGE_LANDSCAPE,\r\n          lastRow,  \r\n          GRID_AGGREGATE,.65,\r\n          paragraph, \"\", \"\", \"\", OUTPUTTEXT[lang].pgFooter\r\n        );\r\n      }\r\n\r\n      pdf.Footer(OUTPUTTEXT[lang].pgFooter);\r\n    \r\n          /*/*-Appendix\t\tgrids // Page 8*/\r\n    \r\n          // add a landscape page for aggregate grid\r\n    \r\n/*           const LE = props.LE; //- props.assetProjections[0].grid.dataProjection[1][0];\r\n          insertGrid2(\r\n            pdf,\r\n            props.aggregateGrid,\r\n            LE,\r\n            paraLeft - 0.2,\r\n            1.65 * paraWidth,\r\n            lang,\r\n            true,\r\n            \"landscape\",\r\n            0,\r\n            GRID_AGGREGATE\r\n          );\r\n          // if too long add another page\r\n          if (\r\n            LE + 3 > LINES_PER_PAGE_LANDSCAPE &&\r\n            LE + 3 < 2 * LINES_PER_PAGE_LANDSCAPE\r\n          )\r\n            insertGrid2(\r\n              pdf,\r\n              props.aggregateGrid,\r\n              LE,\r\n              paraLeft - 0.2,\r\n              1.65 * paraWidth,\r\n              lang,\r\n              true,\r\n              \"landscape\",\r\n              LINES_PER_PAGE_LANDSCAPE,\r\n              GRID_AGGREGATE\r\n            );\r\n          else if (LE + 3 > 2 * LINES_PER_PAGE_LANDSCAPE) {\r\n            insertGrid2(\r\n              pdf,\r\n              props.aggregateGrid,\r\n              LE,\r\n              paraLeft - 0.2,\r\n              1.65 * paraWidth,\r\n              lang,\r\n              true,\r\n              \"landscape\",\r\n              LINES_PER_PAGE_LANDSCAPE,\r\n              GRID_AGGREGATE\r\n            );\r\n            insertGrid2(\r\n              pdf,\r\n              props.aggregateGrid,\r\n              LE,\r\n              paraLeft - 0.2,\r\n              1.65 * paraWidth,\r\n              lang,\r\n              true,\r\n              \"landscape\",\r\n              2 * LINES_PER_PAGE_LANDSCAPE,\r\n              GRID_AGGREGATE\r\n            );\r\n          }\r\n          for (let j = 0; j < props.assetProjections.length; ++j)\r\n            insertGrid2(\r\n              pdf,\r\n              props.assetProjections[j].grid,\r\n              LE,\r\n              paraLeft,\r\n              paraWidth,\r\n              lang,\r\n              true,\r\n              \"portrait\",\r\n              0,\r\n              GRID_INDIVIDUAL\r\n            );\r\n    \r\n          //end ofPage 8\r\n          pdf.addFooterAndHeader(headerOffset, footerText, headerText);\r\n    \r\n          //-Using Life Insurance to Preserve Your Estate\t\t// Page 6\r\n          // logo if asked for\r\n          //    pdf.addCustomImage(\"EPOtherPagesLogo\", pg1TitleY, image);\r\n          result =\r\n            result &&\r\n            pdf.addCustomImage(IMAGE_LOGO_OTHERPAGES, pg1TitleY, image, false, top);\r\n    \r\n          paraY = 8 * lineHeight;\r\n          setFontForTitle(pdf, lang);\r\n          pdf.Text(OUTPUTTEXTEP[lang].pg9T, InToPt(paraLeft), InToPt(paraY));\r\n          setFontForParas(pdf);\r\n    \r\n          paraY = paraY + 2 * lineHeight;\r\n          insertPara(pdf, OUTPUTTEXTEP[lang].pg9P1, paraLeft, paraY, paraWidth);\r\n          paraY = paraY + (lang === \"fr\" ? 7 : 6) * lineHeight;\r\n          insertPara(pdf, OUTPUTTEXTEP[lang].pg9P2, paraLeft, paraY, paraWidth);\r\n    \r\n          //pdf.Footer(OUTPUTTEXTEP[lang].pgFooter);\r\n          // pdf.showOnPage();\r\n*/\r\n          var data = pdf.showOnPage();\r\n    \r\n//        // Done\r\n          pdf.Save(\"INA_Appendix_PDF.pdf\");\r\n          return data;\r\n        }\r\n    \r\n  \r\n}\r\n\r\n    function setFontForTitle(pdf, lang, size) {\r\n      pdf.SetFont(HELVETICA, NORMAL);\r\n      if (size === undefined) {\r\n        if (lang === \"en\") pdf.SetFontSize(PxToPt(25));\r\n        else pdf.SetFontSize(PxToPt(20));\r\n      } else {\r\n        pdf.SetFont(HELVETICA, BOLD);\r\n        if (lang === \"en\") pdf.SetFontSize(PxToPt(size));\r\n        else pdf.SetFontSize(PxToPt(size - 1));\r\n      }\r\n    \r\n      pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    }\r\n    \r\n    function addNote(pdf, para, left, paraY, paraWidth) {\r\n      setFontForParas(pdf);\r\n      pdf.SetTextColor(150, 150, 150);\r\n      pdf.SetFontSize(PxToPt(12));\r\n      insertPara(pdf, para, left, paraY, paraWidth);\r\n      setFontForParas(pdf);\r\n    }\r\n    \r\n    function setFontForParas(pdf) {\r\n      pdf.SetFont(TIMES, NORMAL);\r\n      pdf.SetFontSize(PxToPt(16));\r\n      pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    }\r\n    \r\n    function insertBullet(pdf, bullet, left, y, size) {\r\n      pdf.SetTextColor(115, 153, 198);\r\n      pdf.SetFontSize(PxToPt(size));\r\n      pdf.SetFont(TIMES, BOLD);\r\n      pdf.Text(\r\n        bullet,\r\n        InToPt(left + (size === BULLET_FONT_SIZE ? 0.02 : 0)),\r\n        InToPt(y - (size === BULLET_FONT_SIZE ? 0.03 : 0))\r\n      );\r\n      pdf.SetFont(TIMES, NORMAL);\r\n      pdf.SetFontSize(PxToPt(16));\r\n      pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    }\r\n    \r\n    function insertPara(pdf, para, left, paraY, paraWidth) {\r\n      pdf.MultilineText(para, InToPt(left), InToPt(paraY), InToPt(paraWidth));\r\n    }\r\n    \r\n    function insertTableTitle(\r\n      pdf,\r\n      paraLeft,\r\n      paraY,\r\n      values,\r\n      height,\r\n      paraWidths,\r\n      fillColor\r\n    ) {\r\n      pdf.SetFontSize(PxToPt(12));\r\n      const fill = fillColor === undefined ? [115, 153, 198] : fillColor;\r\n      const textColor = [255, 255, 255];\r\n      pdf.SetFont(TIMES, BOLD);\r\n      const h = pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        paraLeft,\r\n        paraY,\r\n        values,\r\n        height,\r\n        paraWidths,\r\n        false,\r\n        false,\r\n        true\r\n      );\r\n      return h;\r\n    }\r\n    \r\n    function insertTableRow(\r\n      pdf,\r\n      paraLeft,\r\n      paraY,\r\n      values,\r\n      height,\r\n      paraWidths,\r\n      bold,\r\n      fillColor,\r\n      align\r\n    ) {\r\n      pdf.SetTextColor(0x45, 0x55, 0x60);\r\n      const fill = fillColor === undefined ? [249, 249, 249] : fillColor;\r\n      const textColor = [0x45, 0x55, 0x60];\r\n      pdf.SetFont(TIMES, bold ? BOLD : NORMAL);\r\n      pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        paraLeft,\r\n        paraY,\r\n        values,\r\n        height,\r\n        paraWidths,\r\n        true,\r\n        align\r\n      );\r\n    }\r\n    /* function insertTableRowBold(pdf, paraLeft, paraY, values, height, paraWidths,align) {\r\n      pdf.SetTextColor(0x45, 0x55, 0x60);\r\n      const fill = [235, 235, 235];\r\n      const textColor = [0x45, 0x55, 0x60];\r\n      pdf.SetFont(TIMES, BOLD);\r\n      pdf.tableRow(\r\n        fill,\r\n        textColor,\r\n        paraLeft,\r\n        paraY,\r\n        values,\r\n        height,\r\n        paraWidths,\r\n        true,\r\n        align\r\n      );\r\n    }\r\n     */\r\n    \r\n    /* function pdf.addCustomImage( id,pg1TitleY,image,firstPage){\r\n     \r\n    pdf.AddImageFitWidthOnly(\r\n      id,\r\n      InToPt(pg1TitleY - 3 + image.left*HEADER_RECT_IN_W/100), //1.51),\r\n      InToPt(firstPage?1.06:.29),\r\n      InToPt(6.04*image.size/100),\r\n      InToPt(firstPage?2.76:.38) // max height\r\n    );\r\n    } */\r\n\r\n\r\n    \r\n\r\nexport function insertGrid (\r\n  pdf,\r\n  grid,\r\n  LE,\r\n  paraLeft,\r\n  paraWidth,\r\n  lang,\r\n  wrappedTitleBar,\r\n  orientation,\r\n  startYr,\r\n  lastRow,\r\n  mode,\r\n  titleY,\r\n  title1,title2,para1,para2,pgFooter\r\n){\r\n  let i;\r\n  let j;\r\n  let cols = grid.dataColTitles.length;\r\n  const height = 0.2;\r\n  let paraY =titleY;// 2.2 * height;\r\n  let max =\r\n    orientation === \"landscape\"\r\n      ? startYr === 0\r\n        ? LINES_PER_PAGE_LANDSCAPE\r\n        : 2 * LINES_PER_PAGE_LANDSCAPE\r\n      : LINES_PER_PAGE_PORTRAIT;\r\n  const decimalChar = lang === \"en\" ? \".\" : \",\";\r\n  const thousands = lang === \"en\" ? \",\" : \" \";\r\n // const formatFr = lang === \"fr\" ? true : false;\r\n  let Widths = [];\r\n\r\n  pdf.AddPage(orientation);\r\n\r\n  // Appendix title\r\n  setFontForTitle(pdf, lang, 16);\r\n  let paragraph = title1 + \": \" + para1;\r\n  insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n  // Appendix para\r\n  setFontForParas(pdf);\r\n  paraY = paraY + 1.6 * height;\r\n  paragraph =\r\n    (mode === GRID_AGGREGATE\r\n      ? title2\r\n      : para2) +\r\n    (mode === GRID_AGGREGATE ? (startYr === 0 ? \"\" : \"\") : \"\");\r\n  insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n\r\n  paraY = paraY + 0.5 * height;\r\n\r\n  // grid name and title\r\n  // grid col widths\r\n  Widths.push(paraWidth / (cols + 5)); // year\r\n  Widths.push(paraWidth / (cols + 5)); // age\r\n  for (i = 2; i < cols; ++i) {\r\n    Widths.push((paraWidth - (2 * paraWidth) / (cols + 4)) / (cols - 2));\r\n  }\r\n\r\n  // max of 8 columns in portrait\r\n  let totalGridWidth = paraWidth;\r\n  if (mode === GRID_INDIVIDUAL) totalGridWidth = (cols * paraWidth) / 8;\r\n\r\n  let values = grid.dataColTitles;\r\n  let goodWidth = [];\r\n  let totalGoodWidth = 0;\r\n  for (i = 0; i < cols; ++i) {\r\n    goodWidth.push(pdf.textWidth(values[i]));\r\n    totalGoodWidth += goodWidth[i];\r\n  }\r\n  // aportion grid title\r\n  for (i = 0; i < cols; ++i) {\r\n    Widths[i] = goodWidth[i] + 0.15;\r\n  }\r\n  let widthTotal = 0;\r\n  for (i = 2; i < cols; ++i) widthTotal += Widths[i];\r\n\r\n  // now check multilines\r\n  let goodWidthMultiLine = [];\r\n  let totalGoodWidthMultiLine = 0;\r\n\r\n  let addMore =\r\n    (totalGridWidth - widthTotal - Widths[0] - Widths[1]) / (cols - 2);\r\n  if (mode === GRID_INDIVIDUAL) {\r\n    for (i = 2; i < cols; ++i) Widths[i] += addMore;\r\n  } else if (mode === GRID_AGGREGATE) {\r\n    addMore =\r\n      (totalGridWidth - widthTotal - Widths[0] - Widths[1]) / (cols - 3);\r\n    for (i = 2; i < cols; ++i) if (i !== 4) Widths[i] += addMore;\r\n  }\r\n\r\n  for (i = 0; i < cols; ++i) {\r\n    goodWidthMultiLine.push(pdf.textWidthMultiLine(values[i], Widths[i]));\r\n    totalGoodWidthMultiLine += goodWidthMultiLine[i];\r\n  }\r\n  // aportion grid title\r\n\r\n  /*  for (i = 0; i < cols; ++i)\r\n  if(Widths[i]<.9*goodWidthMultiLine[i])\r\n      Widths[i]=goodWidthMultiLine[i]/.9\r\n*/\r\n  //for (i = 0; i < cols; ++i)\r\n  //console.log(values[i],goodWidth[i],goodWidthMultiLine[i],Widths[i])\r\n  // for (i = 0; i < cols; ++i)\r\n  //  Widths[i]=goodWidthMultiLine[i]/.9*totalGridWidth/totalGoodWidthMultiLine\r\n\r\n  // if(mode===GRID_AGGREGATE)\r\n  {\r\n    paraY = paraY + 0.8 * height;\r\n    paragraph = grid.gridTitle;\r\n    pdf.SetFontSize(PxToPt(12));\r\n    pdf.SetTextColor(0x45, 0x55, 0x60);\r\n    insertPara(pdf, paragraph, paraLeft, paraY, paraWidth);\r\n    paraY = paraY + 0.4 * height;\r\n  }\r\n\r\n  // headers\r\n  //console.log(values)\r\n  const height2 = insertTableTitle(\r\n    pdf,\r\n    paraLeft,\r\n    paraY,\r\n    values,\r\n    height,\r\n    Widths,\r\n    [51, 77, 124]\r\n  );\r\n\r\n  // grid rows\r\n  let rows = startYr;\r\n  let fillColor;\r\n  if (wrappedTitleBar) paraY = paraY + height2;\r\n  // 40 rows per page\r\n  while (rows < lastRow) {\r\n    //grid.dataProjection[0].length) {\r\n\r\n    if (\r\n      rows === max &&\r\n      ((startYr === 0 && lastRow - rows > 6) ||\r\n        (startYr === LINES_PER_PAGE_LANDSCAPE &&\r\n          lastRow + LINES_PER_PAGE_LANDSCAPE - rows > 6))\r\n    ) {\r\n      if (mode === GRID_AGGREGATE) {\r\n        insertPara(\r\n          pdf,\r\n          \"\",\r\n          paraLeft,\r\n          paraY + (3 * height) / 2 + 0.1,\r\n          paraWidth\r\n        );\r\n        pdf.FooterLandscape(pgFooter);\r\n        return rows;\r\n      }\r\n\r\n      rows = lastRow - 6;\r\n      paraY = paraY + height;\r\n      pdf.SetFont(TIMES, BOLD);\r\n      insertPara(pdf, \"......\", paraLeft, paraY + height / 2, paraWidth);\r\n      pdf.SetFont(TIMES, NORMAL);\r\n    }\r\n    values = [];\r\nalert( parseFloat(grid.dataProjection[11][3], lang).toString(), grid.dataProjection[11][3], lang.toString())\r\n    let align = [];\r\n    for (i = 0; i < cols; ++i) {\r\n      //if(i===0) console.log(grid.dataProjection[i][rows])\r\n      values.push(\r\n        (i === 0 && rows === 0) || i === 1\r\n          ? String(grid.dataProjection[i][rows])\r\n          :(i === 11?\r\n          parseFloat(grid.dataProjection[i][rows], lang).toString()\r\n          : formatMoney(\r\n              parseFloat(cleanFormat(grid.dataProjection[i][rows], lang)),\r\n              0,\r\n              decimalChar,\r\n              thousands\r\n            ).toString())\r\n      );\r\n      align.push(2);\r\n    }\r\n    paraY = paraY + height;\r\n    fillColor = rows % 2 ? [249, 249, 249] : [228, 229, 230];\r\n    if (rows == LE) {\r\n      fillColor = [208, 215, 230];\r\n      insertPara(\r\n        pdf,\r\n        lang === \"en\" ? \"LE\" : \"EV\",\r\n        paraLeft + totalGridWidth + 0.15,\r\n        paraY + height / 2 + 0.01,\r\n        paraWidth\r\n      );\r\n    }\r\n    //console.log(values)\r\n    insertTableRow(\r\n      pdf,\r\n      paraLeft,\r\n      paraY,\r\n      values,\r\n      height,\r\n      Widths,\r\n      false,\r\n      fillColor,\r\n      align\r\n    );\r\n\r\n    rows++;\r\n  }\r\n\r\n  if (orientation === \"landscape\")\r\n    pdf.FooterLandscape(pgFooter);\r\n  else pdf.Footer(pgFooter);\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Pie, Bar, Line } from \"react-chartjs-2\";\r\n//import \"./Output.css\";\r\nimport \"./Output.css\";\r\nimport {\r\n  getAssetsCategoryTotal,\r\n  getLiabsCategoryTotal,\r\n  cleanFormat, formatMoney,\r\n  familyProjectionYears,\r\n  getInsNeedLine,\r\n  isSingleFamily,\r\n} from \"../utils/helper\";\r\nimport {\r\n  ASSETS,\r\n  LIABILITIES,\r\n  CONTROLTITLE,\r\n  DISPLAY_RETIREMENT,\r\nDISPLAY_LIFEEXP,\r\nDISPLAY_ENDAGE,\r\nDISPLAY_LIFEEXP_PLUS_3\r\n} from \"../definitions/generalDefinitions\";\r\nimport {GRAPHS_LABLES \r\n} from \"../definitions/outputDefinitions\";\r\nimport {\r\n  getInfoINA,\r\n} from \"../definitions/infoIconsDefinitions\";\r\nimport { Info } from \"./Info\";\r\nimport { doSavePdfINAAppendixAction } from \"./OutputPDFINAAppendix\";\r\nimport { versionDetails } from \"../utils/helper\";\r\n\r\nexport class OutputGraphs extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n\r\n\r\n  doPDF = () => {\r\n    doSavePdfINAAppendixAction(this.props);\r\n  };\r\n  \r\n\r\n  render() {\r\n    //if (this.props.dataCashFlowGov !== undefined)\r\n    const lang=this.props.dataInput.Presentations[0].language\r\n    const negNeed = this.props.dataCashFlowNeeds.map(x => -x);\r\n\r\n  const mobile=  ( window.innerWidth <= 840 ) && ( window.innerHeight <= 840 );\r\n // console.log(window.innerWidth, window.innerHeight)\r\n    const maxYScale =\r\n      10000 *\r\n      Math.ceil(\r\n        1 +\r\n          Math.max(\r\n            Math.max(...this.props.dataCashFlowGov),\r\n            Math.max(...this.props.dataCashFlowNeeds),\r\n            Math.max(...this.props.dataShortfall),\r\n            Math.max(...this.props.dataCashFlowPersonal)\r\n          ) /\r\n            10000\r\n      );\r\n    //\tconst negNeedMax = negNeed.map(x => -maxYScale*1.05);\r\n    //\tnegNeedMax.push(- maxYScale * 1.05);\r\n    //\tnegNeedMax.push(- maxYScale * 1.05)\r\n \r\n    const options = {\r\n      responsive: true,\r\n      maintainAspectRatio: false,\r\n      legend: {\r\n        display: true,\r\n        labels: {\r\n          fontColor: \"#333\",\r\n          fontSize: mobile?10:14//16\r\n        }\r\n      },\r\n      scales: {\r\n        xAxes: [\r\n          {\r\n            stacked: true,\r\n            ticks: {\r\n              fontSize:  mobile?10:14,\r\n              beginAtZero: true\r\n            }\r\n          }\r\n        ],\r\n        yAxes: [\r\n          {\r\n            stacked: true,\r\n            ticks: {\r\n              fontSize:  mobile?10:14,\r\n              beginAtZero: true,\r\n                beginAtZero: true,\r\n                steps: 10,\r\n                stepValue: 5,\r\n                max: maxYScale,\r\n    callback: function (value, index, values) {\r\n                  let result =\r\n                    value < 1000 && value > -1000\r\n                      ? value\r\n                      : lang === \"en\"\r\n                      ? Intl.NumberFormat().format(value / 1000) + \"K\"\r\n                      : (Intl.NumberFormat().format(value / 1000) + \"K\").replace(\r\n                          \",\",\r\n                          \" \"\r\n                        );\r\n                  return result;\r\n                },\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    };\r\n    const labelsBilingual=GRAPHS_LABLES[lang]\r\n    const decimalChar = lang === \"en\" ? \".\" : \",\"\r\n    const thousands = lang === \"en\" ? \",\" : \" \"\r\n    const formatFr=lang===\"fr\"? true:false\r\n    \r\n    const clients=this.props.dataInput.Clients\r\n    const singleFamily = isSingleFamily(clients);\r\n    const PDFTopMargin=singleFamily?0:-37  \r\n\r\n    const data = {\r\n      labels: this.props.dataNAAges,\r\n      datasets: [\r\n        {\r\n          label: labelsBilingual.persCF,\r\n          data: this.props.dataCashFlowPersonal,\r\n          fill: false,\r\n          borderColor: \"LightSteelBlue\", // Line color\r\n          backgroundColor: \"LightSteelBlue\"\r\n        },\r\n        {\r\n          label:\r\n          labelsBilingual.govCF,\r\n          data: this.props.dataCashFlowGov,\r\n          fill: false, // Don't fill area under the line\r\n          borderColor: \"#FAD7A0\", // Line color\r\n          backgroundColor: \"#FAD7A0\"\r\n        },\r\n        {\r\n          label:\r\n          labelsBilingual.incomeNeeds,\r\n          data: negNeed,\r\n          fill: false, // Don't fill area under the line\r\n          borderColor: \"#2B3856\", // Line color\r\n          backgroundColor: \"#2B3856\"\r\n        }\r\n        \r\n      ]\r\n    };\r\n\r\n    var dataFutureINA = [];\r\n    let i;\r\n    let j;\r\n    var pv;\r\n    var totalLiab = 0;\r\n    for (i = 0; i < this.props.dataInput.Liabilitys.length; i++) {\r\n      totalLiab += this.props.dataInput.Liabilitys[i].currValue;\r\n    }\r\n\r\n    let shortfallNeg=[]\r\n     \r\n    for (i = 0; i < this.props.dataShortfall.length; ++i) {\r\n      shortfallNeg.push(-this.props.dataShortfall[i])\r\n      pv = 0;\r\n      for (j = i; j < this.props.dataShortfall.length; ++j)\r\n        pv += this.props.dataShortfall[j] / Math.pow(1.03, j - i);\r\n\r\n      if (i > 0 && i < 20) pv += totalLiab * Math.pow(1.02, i);\r\n      dataFutureINA.push(pv);\r\n    }\r\n    // console.log(totalLiab, dataFutureINA);\r\n\r\n/*     let dataPositiveShortfall = [];\r\n    for (j = 0; j < this.props.dataShortfall.length; ++j)\r\n        dataPositiveShortfall[j]= this.props.dataShortfall[j]>0?this.props.dataShortfall[j]:0;\r\n     \r\n\r\n\r\n\r\n */   \r\n      \r\n      const dataShortfall = {\r\n      labels: this.props.dataNAAges, // [39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84],\r\n      datasets: [\r\n        {\r\n          label: labelsBilingual.shortfall,\r\n          data: shortfallNeg,//this.props.dataShortfall,\r\n          //[10964, 13734, 14008, 14288, 14574, 14866, 15163, 15466, 15776, 16091, 16413, 16741, 17076, 17417, 17766, 18121, 18484, 18853, 19230, 19615, 20007, 20407, 20815, 21232, 21656, 22090, 27632, 28184, 28748, 29323, 29910, 30508, 31118, 31740, 32375, 33023, 33683, 34357, 35044, 35745, 36460, 37189, 37933, 38691, 39465, 40254],\r\n          fill: false, // Don't fill area under the line\r\n          borderColor: \"darkred\", // Line color\r\n          backgroundColor: \"darkred\"\r\n        }\r\n      ]\r\n    };\r\n\r\n    var optionsPie = {\r\n      responsive: true,\r\n      title: {\r\n        display: true,\r\n        position: \"top\",\r\n        text: labelsBilingual.assetsBrk,//\"Assets Breakdown Today\",\r\n        fontSize:  mobile?10:14,//8,\r\n        fontColor: \"#111\"\r\n      },\r\n      legend: {\r\n        display: true,\r\n        position: \"right\",\r\n        labels: {\r\n          fontColor: \"#333\",\r\n          fontSize: mobile?10:12//16\r\n        }\r\n      }\r\n    };\r\n     \r\n    let optionsPieLiabs = JSON.parse(JSON.stringify(optionsPie));\r\n\r\n    \r\n    optionsPieLiabs.title.text= labelsBilingual.liabsBrk//\"Liabilities Breakdown\" \r\n     \r\n    const dataPieAssets = {\r\n      labels: [\r\n        labelsBilingual.cashLike,labelsBilingual.RRSP,labelsBilingual.shares,labelsBilingual.realEstate,labelsBilingual.otherAssets\r\n      ],\r\n      datasets: [\r\n        {\r\n             data: [\r\n            getAssetsCategoryTotal(this.props.dataInput,ASSETS.CASH.Key)+\r\n            getAssetsCategoryTotal(this.props.dataInput,ASSETS.LIFE_INSURANCE.Key)+\r\n            getAssetsCategoryTotal(this.props.dataInput,ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.Key)\r\n            +getAssetsCategoryTotal(this.props.dataInput,ASSETS.TFSA.Key)\r\n            , \r\n            getAssetsCategoryTotal(this.props.dataInput,ASSETS.RRSP_RRIF.Key), \r\n            getAssetsCategoryTotal(this.props.dataInput,ASSETS.SMALL_BUSINESS_SHARES.Key)+\r\n            getAssetsCategoryTotal(this.props.dataInput,ASSETS.STOCKS_BONDS.Key),\r\n            getAssetsCategoryTotal(this.props.dataInput,ASSETS.REAL_ESTATE.Key)+\r\n            getAssetsCategoryTotal(this.props.dataInput,ASSETS.PERSONAL_RESIDENCE.Key),\r\n            getAssetsCategoryTotal(this.props.dataInput,ASSETS.OTHER_ASSETS.Key)\r\n          ],\r\n          backgroundColor: [\"#F7464A\", \"#46BFBD\", \"#FDB45C\", \"#949FB1\", \"#4D5360\"]\r\n        }\r\n      ]\r\n    }\r\n\r\n    const dataPieLiabs = {\r\n      labels: [\r\n        labelsBilingual.loans, labelsBilingual.taxes, labelsBilingual.emergency, labelsBilingual.otherLiabs,labelsBilingual.atDeath\r\n        \r\n      ],\r\n      datasets: [\r\n        {\r\n             data: [\r\n            getLiabsCategoryTotal(this.props.dataInput,LIABILITIES.OUTSTANDING_LOANS.Key)+\r\n            getLiabsCategoryTotal(this.props.dataInput,LIABILITIES.MORTGAGE_REDEMPTION.Key)+\r\n            getLiabsCategoryTotal(this.props.dataInput,LIABILITIES.CREDIT_CARDS.Key)+\r\n            getLiabsCategoryTotal(this.props.dataInput,LIABILITIES.CLIENT_TAX_LIABILITY.Key)\r\n            , \r\n            getLiabsCategoryTotal(this.props.dataInput,LIABILITIES.INCOME_TAXES.Key), \r\n            getLiabsCategoryTotal(this.props.dataInput,LIABILITIES.EMERGENCY_FUND.Key),\r\n            getLiabsCategoryTotal(this.props.dataInput,LIABILITIES.OTHER.Key)+\r\n            getLiabsCategoryTotal(this.props.dataInput,LIABILITIES.CHILD_HOME_CARE.Key),\r\n            getLiabsCategoryTotal(this.props.dataInput,LIABILITIES.LAST_EXPENSES.Key)+\r\n        getLiabsCategoryTotal(this.props.dataInput,LIABILITIES.LEGAL_AND_EXECUTOR_FEES.Key)+\r\n        getLiabsCategoryTotal(this.props.dataInput,LIABILITIES.LEGACY_FOR_CHILDREN.Key)+\r\n        getLiabsCategoryTotal(this.props.dataInput,LIABILITIES.CHARITABLE_GIFTS.Key)+\r\n        getLiabsCategoryTotal(this.props.dataInput,LIABILITIES.PROBATE.Key)\r\n          ],\r\n          backgroundColor: [\"#F7464A\", \"#46BFBD\", \"#FDB45C\", \"#949FB1\", \"#4D5360\"]\r\n        }\r\n      ]\r\n    }\r\n/* \r\n    let needToE =\r\n      this.props.periodOption === 0 ? labels.insNeedsRet: labels.insNeedsRetLE\r\n      /*   ? \"Insurance Needs to retirement (age \"\r\n        : \"Insurance Needs to life expectancy (age \";\r\n    let needToF =\r\n      this.props.periodOption === 0\r\n        ? \"Besoins en assurance jusqu' la retraite(ge \"\r\n        : \"Besoins en assurance jusqu' l'esprance de vie (ge \"; \r\n    let needTo = lang === \"en\" ? needToE : needToF;\r\n */\r\n    /* let needTo =\r\n      this.props.periodOption ===DISPLAY_RETIREMENT ? labelsBilingual.insNeedsRet: (this.props.periodOption === DISPLAY_ENDAGE?labelsBilingual.insNeeds100:labelsBilingual.insNeedsRetLE)\r\n    if(this.props.periodOption !== DISPLAY_ENDAGE)\r\n      needTo += +this.props.projectEnd + \")\";\r\n */\r\n/* \r\n      const clients=this.props.dataInput.Clients\r\n      const projYears = familyProjectionYears(\r\n        clients,\r\n        this.props.dataInput.Presentations[0].periodOption,\r\n        this.props.LE,\r\n        this.props.LE\r\n      );\r\n      //const projectEnd = projYears.projectionEnd;\r\n      const protectionPeriod = projYears.noProjectionYrs;\r\n     // const minAge = projYears.survivorAge;\r\n      const singleFamily = isSingleFamily(clients);\r\n      const noSurvivor = clients.length===1;  \r\n      const insNeedLine= getInsNeedLine(this.props.dataInput.Presentations[0], this.props.projectEnd, lang,noSurvivor,singleFamily,protectionPeriod)\r\n     */const needTo=this.props.insNeedLine\r\n\r\n    \r\n/*     const assetsPie= this.props.dataInput.Assets.length>0 &&\r\n    <article className=\"canvas-container\" style={{height: \"450px\" }}>\r\n     <div style={{overflow:'hidden', float: 'left', width: '50%',height: \"400px\" }}><Pie data={dataPieAssets} options={optionsPie} /></div>\r\n    </article>\r\n */\r\n\r\nconst assetsPie= this.props.dataInput.Assets.length>0 &&\r\n    <article id=\"pieAssets\" \r\n\r\n/* style={{ position: \"relative\", left: \"20px\", height: \"400px\"}} */\r\n>\r\n\r\n<div className=\"INAPie\">\r\n<Pie  data={dataPieAssets} options={optionsPie}  />\r\n</div>\r\n</article>\r\n\r\n\r\n/* \r\nconst liabsPie= this.props.dataInput.Liabilitys.length>0 &&\r\n   <article className=\"canvas-container\" style={{height: \"450px\" }}>\r\n   <div style={{overflow:'hidden', float: 'left', width: '50%',height: \"400px\" }}><Pie data={dataPieLiabs} options={optionsPieLiabs} /></div>\r\n </article>\r\n */\r\nconst liabsPie= this.props.dataInput.Liabilitys.length>0 &&\r\n    <article   id=\"pieLiabs\" \r\n/* style={{ position: \"relative\", height: \"400px\"}} */\r\n>\r\n\r\n<div className=\"INAPie\">\r\n<Pie data={dataPieLiabs} options={optionsPieLiabs} />\r\n</div>\r\n</article>\r\n\r\nconst singlePerson = this.props.dataInput.Clients.length === 1 ? true : false;\r\nconst noSurvivor = singlePerson && versionDetails().versionNumeric<=10014\r\n\r\nif (noSurvivor) {\r\n  return (\r\n    <div>\r\n      <h3 className=\"ppi1\">{needTo}</h3>\r\n    </div>\r\n  );\r\n}else {\r\n    return (\r\n      <div>\r\n        \r\n        <div style={{ width: \"100%\", float: \"left\", clear: \"left\" }}>\r\n            \r\n            <input\r\n              className=\"roundedCornerCmd\"\r\n              style={{\r\n             //   width: \"80px\",\r\n                marginTop: PDFTopMargin +\"px\",\r\n                marginRight: \"0px\",\r\n                paddingRight: \"8px\",\r\n                float: \"right\",\r\n              }}\r\n              onClick={this.doPDF}\r\n              type=\"button\"\r\n              value={CONTROLTITLE[lang].pdfINAAppendix}\r\n            />\r\n          </div>\r\n        <h3 className=\"ppi1\">\r\n          {needTo}{/* : ${formatMoney(cleanFormat(this.props.insuranceNeed,formatFr), 0, decimalChar, thousands)} */} \r\n          <Info\r\n              infoIcon={getInfoINA(lang)}\r\n          />\r\n        </h3>\r\n\r\n        <br />\r\n        <div style={{ width: \"90%\" }}>\r\n          <div style={{ width: \"100%\" }}>\r\n          <article  id=\"barNeeds\" className=\"canvas-containerINAGraphs\">\r\n              <Bar data={data} options={options} />\r\n            </article>\r\n            <article  id=\"barShortfall\" className=\"canvas-containerINAGraphs\">\r\n              <Bar  data={dataShortfall} options={options} />\r\n            </article>\r\n            <br />\r\n            <h3 className=\"ppi1\">\r\n                {labelsBilingual.currFins}\r\n                \r\n            </h3>\r\n            {\r\n               <div>\r\n                 {assetsPie}<br/><br/>{liabsPie}\r\n              </div> \r\n            }\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Bar, Line, Chart,Pie } from \"react-chartjs-2\";\r\n//import \"./Output.css\";\r\nimport \"./Output.css\";\r\nimport { readMCCData } from \"../data/dataExchangeMCC\";\r\nimport { fetchMCCData } from \"../utils/FetchAPIs\";\r\nimport { setUIDataToAPI} from \"../data/dataExchange\";\r\nimport {\r\n  getProjectedLiabilities,\r\n  cleanFormat,\r\n  numFormat,\r\n  getAssetsTaxCategoryTotal,\r\n  getAssetsCategoryTotal,\r\n  getTaxLiabCategoryTotal,\r\n  getLiabsCategoryTotal\r\n} from \"../utils/helper\";\r\nimport {\r\n  GROWTHDIR,\r\n  QUOTE_CLIENT,\r\n  QUOTE_SPOUSE,\r\n  QUOTE_JOINT,\r\n  ASSET_TAX,\r\n  ASSETS,\r\n  LIABILITIES\r\n} from \"../definitions/generalDefinitions\";\r\nimport MCCGraph from \"./MCCGraph\";\r\nimport { MultiButtons } from \"./MultiButtons\";\r\nimport { InputField } from \"./inputField\";\r\nimport DataTable from \"./GridExcelComponent/DataTable\";\r\n\r\n// props option\r\nconst DISPLAY_INCOME = 1;\r\n\r\n// for Estate\r\nconst DISPLAY_TAXLIAB_CLIENT = 1;\r\nconst DISPLAY_TAXLIAB_JLTD = 2;\r\n\r\nexport class AnalysisGraphs extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      loadingMCC: true,\r\n      estateLiab: [],\r\n      estateLiabLE: [],\r\n      taxL:0\r\n    };\r\n    this.dataAges = [];\r\n    this.dataPremiums = [];\r\n    this.dataDB = [];\r\n    this.dataSVEquiBuild = [];\r\n    this.dataSVManulife = [];\r\n    this.Prem = 0;\r\n    this.bestPremiumDur = 100;\r\n    this.bestMinMultiple = 0;\r\n    this.premiumDur = 10;\r\n    this.lifeExp = 0;\r\n    this.minMultiple = 0;\r\n    this.insMultiple = 0;\r\n    this.bestFitEquiBuild = false;\r\n    this.INAEstateOption = DISPLAY_TAXLIAB_CLIENT;\r\n    this.insuranceAmtInitial = this.props.INAOption === DISPLAY_INCOME\r\n        ? this.props.insuranceNeed\r\n        : this.props.dataEstateLiability[0];\r\nthis.chartRef = React.createRef();\r\n  this.taxLiabChartRef = React.createRef();\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getEstateLiabPieCharts()\r\n\r\n  }\r\n\r\n\r\n  shouldComponentUpdate(nextProps, nextState, prevState) {\r\n    if (\r\n      this.props.projectEnd !== nextProps.projectEnd ||\r\n      this.state.loadingMCC !== prevState.loadingMCC || this.props.INAOption !== nextProps.INAOption\r\n    ) {\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  getMCCQuoteOutput = () => {\r\n    return Promise.all([this.getMCCQuoteOutput1(), this.getMCCQuoteOutput4()]);\r\n  };\r\n\r\n  getMCCQuoteOutput1 = () => {\r\n    let quotePlanID = 48;\r\n    let quoteClient =\r\n      this.INAEstateOption === DISPLAY_TAXLIAB_JLTD\r\n        ? QUOTE_JOINT\r\n        : QUOTE_CLIENT;\r\n    let FA=this.props.INAOption === DISPLAY_INCOME\r\n        ? this.props.insuranceNeed\r\n        : this.props.dataEstateLiability[0];\r\n        const FAClean=parseFloat(cleanFormat(FA))\r\n    let dataMCC = readMCCData(\r\n      this.props.input,\r\n      quotePlanID,\r\n      quoteClient,\r\n      FAClean\r\n    );\r\n\r\n    // console.log(this.props.dataAPISite, dataMCC, FA);\r\n    if(FA>0)\r\n    {\r\n    fetchMCCData(\r\n      this.props.dataAPISite,\r\n      dataMCC,\r\n      FAClean\r\n    )\r\n      .then(data => {\r\n        // console.log(data[0]);\r\n        if (data[0] !== undefined) {\r\n          //  console.log(\"POST: MCC_OutputArrays success\");\r\n          this.minPrem = parseInt(cleanFormat(data[0][2].Values[0]));\r\n          //this.dataDB = data[0][3].Values.map(x=>parseInt(cleanFormat(x)));\r\n          this.lifeExp = this.props.lifeExp; // Math.round(parseInt(data[0][4].Values[0]));\r\n\r\n          //console.log(this.lifeExp,data[0][4].Values)\r\n          // make render\r\n        }\r\n      })\r\n      .then(data => {\r\n        this.getMCCQuoteOutput4();\r\n      });\r\n    }\r\n  };\r\n\r\n \r\n  getMCCQuoteOutput4 = async () => {\r\n    let quotePlanID = 48;\r\n    let quoteClient =\r\n      this.INAEstateOption === DISPLAY_TAXLIAB_JLTD\r\n        ? QUOTE_JOINT\r\n        : QUOTE_CLIENT;\r\n    let FA= this.props.INAOption === DISPLAY_INCOME\r\n        ? this.props.insuranceNeed\r\n        : this.props.dataEstateLiability[0];    \r\n    const FAClean=parseFloat(cleanFormat(FA))\r\n    let dataMCC = readMCCData(\r\n      this.props.input,\r\n      quotePlanID,\r\n      quoteClient,\r\n      FAClean\r\n    );\r\n    let age = dataMCC.insured.lives[0].age;\r\n    if (dataMCC.insured.lifeStatus > 0 && age > dataMCC.insured.lives[1].age)\r\n      age = dataMCC.insured.lives[1].age;\r\n    let years = this.props.projectEnd;\r\n    dataMCC.policy.objPremium.PremSet = true;\r\n    if (this.bestFitEquiBuild === true) {\r\n      dataMCC.policy.faceAmount =\r\n        FAClean / 2;\r\n      dataMCC.policy.objRider.ICO20 = true;\r\n      dataMCC.policy.objRider.T20Amt =\r\n        FAClean / 2;\r\n      dataMCC.policy.objCustomDB.solveForPremium_On = true;\r\n      dataMCC.policy.objCustomDB.customDB =\r\n        this.props.INAOption === DISPLAY_INCOME\r\n          ? this.getDataFutureINA()\r\n          : this.props.dataEstateLiability;\r\n    } else {\r\n      dataMCC.policy.objCustomDB.customDB = [];\r\n      dataMCC.policy.objCustomDB.solveForPremium_On = false;\r\n      dataMCC.policy.objPremium.PremSetAmt = this.Prem;\r\n      dataMCC.policy.objPremium.PremSetDur = parseInt(this.premiumDur);\r\n    }\r\n    dataMCC.policy.objPremium.PremSolve = false;\r\n    fetchMCCData(\r\n      this.props.dataAPISite,\r\n      dataMCC,\r\n      FAClean\r\n    ).then(data => {\r\n       if (data[0][1] !== undefined) {\r\n        console.log(\"POST: MCC_OutputArrays success\");\r\n        this.dataAges = data[0][1].Values.slice(0, years).map(x =>\r\n          parseInt(cleanFormat(x))\r\n        );\r\n        this.dataPremiums = data[0][2].Values.map(x =>\r\n          parseInt(cleanFormat(x))\r\n        );\r\n        this.dataDB = data[0][3].Values.slice(0, years).map(x =>\r\n          parseInt(cleanFormat(x))\r\n        );\r\n        this.dataSVEquiBuild = data[0][4].Values.slice(0, years).map(x =>\r\n          parseInt(cleanFormat(x))\r\n        );\r\n        this.dataDB.unshift(FAClean);\r\n        let i;\r\n\r\n        for (\r\n          i = 0;\r\n          i < this.dataDB.length + age - this.props.projectEnd + 3;\r\n          ++i\r\n        ) {\r\n          this.dataAges.pop();\r\n          this.dataDB.pop();\r\n          this.dataPremiums.pop();\r\n          this.dataSVEquiBuild.pop();\r\n        }\r\n        //console.log(this.dataDB);\r\n        /* let l = this.state.loadingMCC;\r\n        l = false;\r\n        this.setState({ l }); */\r\n      }\r\n    });\r\n  };\r\n\r\n  getMCCQuoteOutputManu = async () => {\r\n    let quotePlanID = 47; //MANU_UL_CLIENT_INVSEL = 47\r\n    let quoteClient =\r\n      this.INAEstateOption === DISPLAY_TAXLIAB_JLTD\r\n        ? QUOTE_JOINT\r\n        : QUOTE_CLIENT;\r\n        let FA = this.props.INAOption === DISPLAY_INCOME\r\n        ? this.props.insuranceNeed\r\n        : this.props.dataEstateLiability[0];\r\n        const FAClean=parseFloat(cleanFormat(FA))\r\n    let dataMCC = readMCCData(\r\n      this.props.input,\r\n      quotePlanID,\r\n      quoteClient,\r\n      FAClean\r\n    );\r\n    //console.log(dataMCC);\r\n    let age = dataMCC.insured.lives[0].age;\r\n    if (dataMCC.insured.lifeStatus > 0 && age > dataMCC.insured.lives[1].age)\r\n      age = dataMCC.insured.lives[1].age;\r\n    let years = this.props.projectEnd;\r\n    dataMCC.policy.objPremium.PremSet = false;\r\n    dataMCC.policy.objPremium.PremSolve = true;\r\n    dataMCC.policy.objPremium.PremSolveDur = 99; //years-age;\r\n    dataMCC.policy.objCustomDB.customDB = [];\r\n    dataMCC.policy.objCustomDB.solveForPremium_On = false;\r\n    dataMCC.policy.intRate = 0.035;\r\n    dataMCC.policy.province = \"AB\"; // data.dataInput.Presentations[0].Province,\r\n    fetchMCCData(\r\n      this.props.dataAPISite,\r\n      dataMCC,\r\n      FAClean\r\n    ).then(data => {\r\n       if (data[0][1] !== undefined) {\r\n        console.log(\"POST: MCC_OutputArrays success\");\r\n        this.dataAges = data[0][1].Values.slice(0, years).map(x =>\r\n          parseInt(cleanFormat(x))\r\n        );\r\n        this.dataPremiums = data[0][2].Values.map(x =>\r\n          parseInt(cleanFormat(x))\r\n        );\r\n        this.dataDB = data[0][3].Values.slice(0, years).map(x =>\r\n          parseInt(cleanFormat(x))\r\n        );\r\n        this.dataSVManulife = data[0][4].Values.slice(0, years).map(x =>\r\n          parseInt(cleanFormat(x))\r\n        );\r\n\r\n        this.dataDB.unshift(FAClean);\r\n        let i;\r\n\r\n        for (\r\n          i = 0;\r\n          i < this.dataDB.length + age - this.props.projectEnd + 8;\r\n          ++i\r\n        ) {\r\n          this.dataAges.pop();\r\n          this.dataDB.pop();\r\n          this.dataPremiums.pop();\r\n          this.dataSVManulife.pop();\r\n        }\r\n        //console.log(this.dataDB);\r\n        /* let l = this.state.loadingMCC;\r\n        l = false;\r\n        this.setState({ l }); */\r\n      }\r\n    });\r\n  };\r\n\r\n  selectMultiButton = (id, value) => {\r\n    if (value !== undefined) {\r\n      if (id === 1) this.premiumDur = value;\r\n      else if (id === 2) this.minMultiple = value;\r\n      else if (id === 3) this.insMultiple = value;\r\n      else if (id === 4) this.insuranceAmtInitial = value;\r\n    }\r\n    this.getMCCQuoteOutput();\r\n    //console.log(value);\r\n\r\n    let b = !this.state.loadingMCC;\r\n    this.setState({ loadingMCC: b });\r\n    this.minPrem = 1;\r\n  };\r\n\r\n  solveForOptimumQuote = async () => {\r\n    let min = 0;\r\n    this.bestPremiumDur = 100;\r\n    let k;\r\n    let ratio;\r\n    let dataFutureINA = this.getDataFutureINA();\r\n    //let dataFutureEstateLiab = this.getDataFutureEstateLiability();\r\n    this.bestFitEquiBuild = false;\r\n\r\n    if (false) {\r\n      let gotHereInInnerLoop = false;\r\n      for (ratio = 0; ratio <= 40; ratio++) {\r\n        for (k = 5; k < this.lifeExp + 1; k++) {\r\n          this.premiumDur = k;\r\n          this.Prem = (1 + ratio / 20) * this.minPrem;\r\n\r\n          let dataFVofPrems = this.getDataFVofPrems(\r\n            (this.props.INAOption = DISPLAY_INCOME\r\n              ? dataFutureINA\r\n              : this.props.dataEstateLiability)\r\n          );\r\n\r\n          await this.getMCCQuoteOutput4();\r\n          let SumOfSquresDiff = 0;\r\n          let i;\r\n          for (i = 0; i < this.lifeExp; ++i) {\r\n            let insVal = DISPLAY_INCOME\r\n              ? dataFutureINA[i]\r\n              : this.props.dataEstateLiability[i];\r\n            //console.log(SumOfSquresDiff,dataFVofPrems,insVal)\r\n            SumOfSquresDiff += Math.pow(dataFVofPrems[i] - insVal, 2);\r\n          }\r\n          SumOfSquresDiff = Math.round(\r\n            SumOfSquresDiff / (1000000 * this.lifeExp)\r\n          );\r\n\r\n          if (min === 0) min = SumOfSquresDiff;\r\n          else if (min > SumOfSquresDiff) {\r\n            //console.log(\"k, min, SumOfSquresDiff\");\r\n            min = SumOfSquresDiff;\r\n            this.bestPremiumDur = k;\r\n            this.bestMinMultiple = 5 * ratio;\r\n            gotHereInInnerLoop = true;\r\n          } else if (gotHereInInnerLoop === true) k = this.lifeExp + 1; //get out\r\n          //console.log(k, min, SumOfSquresDiff, ratio);\r\n          //let b = !this.state.loadingMCC;\r\n          //await this.setState({ loadingMCC: b });\r\n        }\r\n        gotHereInInnerLoop = false;\r\n      }\r\n      this.premiumDur = this.bestPremiumDur;\r\n      this.minMultiple = this.bestMinMultiple;\r\n      //await this.getMCCQuoteOutput();\r\n    } else {\r\n      //this.premiumDur = this.bestPremiumDur;\r\n      //this.minMultiple =  this.bestMinMultiple;\r\n      //this.premiumDur = k;\r\n      this.Prem = (1 + this.bestMinMultiple) * this.minPrem;\r\n\r\n      await this.getMCCQuoteOutput();\r\n    }\r\n    let b = !this.state.loadingMCC;\r\n    await this.setState({ loadingMCC: b });\r\n  };\r\n\r\n  solveForOptimumEquiBuild = async e => {\r\n    if (e === 1) {\r\n      this.bestPremiumDur = 100;\r\n      let dataFutureINA = this.getDataFutureINA();\r\n      //let dataFutureEstateLiab = this.getDataFutureEstateLiability();\r\n\r\n      this.bestFitEquiBuild = true;\r\n      await this.getMCCQuoteOutput4();\r\n\r\n      let dataFVofPrems = this.getDataFVofPrems(dataFutureINA);\r\n      let SumOfSquresDiff = 0;\r\n      let i;\r\n      for (i = 0; i < this.lifeExp; ++i) {\r\n        let insVal = DISPLAY_INCOME\r\n          ? dataFutureINA[i]\r\n          : this.props.dataEstateLiability[i];\r\n        //console.log(SumOfSquresDiff,dataFVofPrems,insVal)\r\n        SumOfSquresDiff += Math.pow(dataFVofPrems[i] - insVal, 2);\r\n      }\r\n      SumOfSquresDiff = Math.round(SumOfSquresDiff / (1000000 * this.lifeExp));\r\n      //console.log(SumOfSquresDiff)\r\n    } else if (e === 2) {\r\n      this.bestPremiumDur = 100;\r\n      let dataFutureINA = this.getDataFutureINA();\r\n\r\n      this.bestFitEquiBuild = true;\r\n      await this.getMCCQuoteOutputManu();\r\n\r\n      let dataFVofPrems = this.getDataFVofPrems(dataFutureINA);\r\n    }\r\n    // await this.getMCCQuoteOutput();\r\n\r\n    let b = !this.state.loadingMCC;\r\n    await this.setState({ loadingMCC: b });\r\n  };\r\n\r\n  selectMultiButtonINAorTax = (e) => {\r\n    if (e === DISPLAY_TAXLIAB_CLIENT) {\r\n      this.INAEstateOption = DISPLAY_TAXLIAB_CLIENT;\r\n    } else if (e === DISPLAY_TAXLIAB_JLTD) {\r\n      this.INAEstateOption = DISPLAY_TAXLIAB_JLTD;\r\n    }\r\n\r\n    //let dataFutureEstateLiab = this.getDataFutureEstateLiability();\r\n    this.insuranceAmtInitial =\r\n      this.props.INAOption === DISPLAY_INCOME\r\n        ? this.props.insuranceNeed\r\n        : this.props.dataEstateLiability[0];\r\n    //this.insuranceAmtInitial =parseInt(cleanFormat(this.insuranceAmtInitial))*(1 + this.insMultiple / 100);\r\n    this.getMCCQuoteOutput();\r\n\r\n    \r\n\r\n    let b = !this.state.loadingMCC;\r\n    this.setState({ loadingMCC: b });\r\n    this.minPrem = 1;\r\n    //this.setState({ loading: false });\r\n  };\r\n\r\n\r\n\r\ngetEstateLiabPieCharts= async () => {\r\n     \r\n    const totalLiabProjections = getProjectedLiabilities(\r\n      this.props.input.dataInput,\r\n      this.props.projectEnd,\r\n      this.props.language\r\n    );\r\n\r\n\r\n\r\n    // console.log(this.state.estateLiab,this.state.estateLiabLE)\r\n\r\n    let dataNA = setUIDataToAPI(this.props.input, 0);\r\n\r\n    let estateLiab2=[]\r\n    estateLiab2.push(totalLiabProjections[0])\r\n    const l1= await getTaxLiabCategoryTotal(this.props.input.dataInput,ASSET_TAX.REGISTERED.Key,dataNA, 0);\r\n    this.setState({taxL: l1})\r\n    estateLiab2.push(l1)\r\n    const l2=await getTaxLiabCategoryTotal(this.props.input.dataInput,ASSET_TAX.CAPITAL_GAINS_ANNUAL.Key,dataNA, 0)\r\n    const l3=await getTaxLiabCategoryTotal(this.props.input.dataInput,ASSET_TAX.CAPITAL_GAINS_DEFERRED.Key,dataNA, 0)\r\n    estateLiab2.push(l2+l3)\r\n    estateLiab2.push(await getTaxLiabCategoryTotal(this.props.input.dataInput,ASSET_TAX.FULLY_TAXABLE.Key,dataNA, 0))\r\n    estateLiab2.push(await getTaxLiabCategoryTotal(this.props.input.dataInput,ASSET_TAX.DIVIDEND.Key,dataNA, 0));\r\n\r\n\r\n    this.setState({estateLiab: estateLiab2});\r\n\r\n    let estateLiab3=[]\r\n    estateLiab3.push(totalLiabProjections[this.lifeExp])\r\n    estateLiab3.push(await getTaxLiabCategoryTotal(this.props.input.dataInput,ASSET_TAX.REGISTERED.Key,dataNA, this.lifeExp))\r\n    const l2LE=await getTaxLiabCategoryTotal(this.props.input.dataInput,ASSET_TAX.CAPITAL_GAINS_ANNUAL.Key,dataNA, this.lifeExp)\r\n    const l3LE=await getTaxLiabCategoryTotal(this.props.input.dataInput,ASSET_TAX.CAPITAL_GAINS_DEFERRED.Key,dataNA, this.lifeExp)\r\n    estateLiab3.push(l2LE+l3LE)\r\n    estateLiab3.push(await getTaxLiabCategoryTotal(this.props.input.dataInput,ASSET_TAX.FULLY_TAXABLE.Key,dataNA, this.lifeExp))\r\n    estateLiab3.push(await getTaxLiabCategoryTotal(this.props.input.dataInput,ASSET_TAX.DIVIDEND.Key,dataNA, this.lifeExp));\r\n    this.setState({estateLiabLE: estateLiab3});\r\n\r\n    // console.log(this.state.estateLiab,this.state.estateLiabLE)\r\n// console.log(estateLiab2,estateLiab3)\r\n}\r\n\r\n\r\n\r\n\r\n\r\n  getDataFutureINA = () => {\r\n    let dataFutureINA = [];\r\n    let i;\r\n    let j;\r\n    var pv;\r\n    var totalLiab = 0;\r\n    var totalLiabProjections = [];\r\n    // project liabs\r\n\r\n    totalLiabProjections = getProjectedLiabilities(\r\n      this.props.input.dataInput,\r\n      this.props.projectEnd,\r\n      this.props.language\r\n    );\r\n\r\n    \r\n\r\n    const currINA = parseFloat(cleanFormat(this.props.insuranceNeed));\r\n    const intRate = parseFloat(\r\n      this.props.input.dataInput.Presentations[0].invRate / 100\r\n    );\r\n    const inflation = parseFloat(\r\n      this.props.input.dataInput.Presentations[0].inflation / 100\r\n    );\r\n    dataFutureINA.push(currINA);\r\n    //console.log(this.props.insuranceNeed)\r\n    for (i = 1; i < this.props.projectEnd; ++i) {\r\n      pv =\r\n        (dataFutureINA[i - 1] - this.props.dataShortfall[i - 1]) *\r\n        (1 + intRate);\r\n      //   console.log(pv)\r\n      dataFutureINA.push(Math.round(Math.max(0, pv)));\r\n    }\r\n    // add liab\r\n    for (i = 1; i < this.props.projectEnd; ++i) {\r\n      dataFutureINA[i] += totalLiabProjections[i];\r\n    }\r\n    return dataFutureINA;\r\n  };\r\n\r\n  /* getDataFutureEstateLiability = () => {\r\n    let i;\r\n    var totalLiabProjections = [];\r\n    \r\n    // project liabs\r\n    totalLiabProjections=getProjectedLiabilities(this.props.input.dataInput, this.props.projectEnd, this.props.language) \r\n\r\n    const currEstateLiability=parseFloat(cleanFormat(this.props.insuranceNeed));\r\n    const intRate=parseFloat(this.props.input.dataInput.Presentations[0].invRate/100);            \r\n    const inflation=parseFloat(this.props.input.dataInput.Presentations[0].inflation/100);\r\n    let dataFutureEstateLiability=[]\r\n    \r\n    for (i = 1; i < this.props.projectEnd; ++i) {\r\n        dataFutureEstateLiability.push(this.props.dataTaxLiability[i]);\r\n    }\r\n    // add liab\r\n    for (i = 1; i < this.props.projectEnd; ++i) {\r\n        dataFutureEstateLiability[i]+=totalLiabProjections[i];\r\n    }\r\n    return dataFutureEstateLiability;\r\n  };\r\n */\r\n\r\nhandleFocus = (event) => {\r\n  event.target.select();\r\n};\r\n\r\n  getDataFVofPrems = dataFuture => {\r\n    let dataFVofPrems = [];\r\n    let i;\r\n    let fv = 0;\r\n\r\n    for (i = 0; i < this.dataPremiums.length; ++i) {\r\n      let shortfall = dataFuture[i] - this.dataDB[i];\r\n      fv = (fv + this.dataPremiums[i]) * 1.0375;\r\n      dataFVofPrems.push(fv + shortfall);\r\n    }\r\n    for (i = this.dataPremiums.length; i < this.props.projectEnd; ++i) {\r\n      let shortfall = dataFuture[i] - this.dataDB[i];\r\n      fv = fv * 1.0375;\r\n      dataFVofPrems.push(fv + shortfall);\r\n    }\r\n\r\n    return dataFVofPrems;\r\n  };\r\n\r\n  render() {\r\n    let dtaAgesAll = [];\r\n    let k;\r\n    let lifeExp = this.props.lifeExp;\r\n    let age = this.props.input.dataInput.Clients[1].Age;\r\n\r\n    if (this.INAEstateOption === DISPLAY_TAXLIAB_CLIENT) {\r\n      lifeExp = this.props.lifeExpClient;\r\n      age = this.props.input.dataInput.Clients[0].Age;\r\n    } else if (this.INAEstateOption === DISPLAY_TAXLIAB_JLTD) {\r\n      lifeExp = this.props.lifeExpJLTD;\r\n      if (age > this.props.input.dataInput.Clients[1].Age)\r\n        age = this.props.input.dataInput.Clients[1].Age;\r\n    }\r\n\r\n    for (k = 0; k < lifeExp + 3; ++k) {\r\n      dtaAgesAll.push(age + k);\r\n    }\r\n\r\n    //if (this.props.INAOption !== DISPLAY_INCOME) {\r\n    var dataFutureINA = this.getDataFutureINA();\r\n    const dataShortfallFV = {\r\n      labels: dtaAgesAll, // this.dataAges,\r\n      datasets: [\r\n        {\r\n          label:\r\n            this.props.language === \"en\"\r\n              ? \"Future insurance needs\"\r\n              : \"Besoins dassurance futurs\", //Income Shortfall',\r\n          data: dataFutureINA,\r\n\r\n          fill: true, // Don't fill area under the line\r\n          borderColor: \"darkred\", // Line color\r\n          backgroundColor: \"rgba(244, 144, 128, 0.8)\"\r\n        }\r\n      ]\r\n    };\r\n    //} else {\r\n    let dataTaxLiabLifeExp = [];\r\n    let dataTaxLiab = []; // this.props.dataEstateLiability;\r\n\r\n    for (k = 0; k < lifeExp + 3; ++k) {\r\n      dataTaxLiabLifeExp.push(0);\r\n      dataTaxLiab.push(this.props.dataEstateLiability[k]);\r\n    }\r\n    dataTaxLiabLifeExp[lifeExp] = dataTaxLiab[lifeExp];\r\n    dataTaxLiab[lifeExp] = 0;\r\n\r\n    // console.log(this.INAEstateOption, age, dtaAgesAll, lifeExp);\r\n    const dataTaxLiability = {\r\n      labels: dtaAgesAll,\r\n      datasets: [\r\n        {\r\n          label:\r\n            this.props.language === \"en\"\r\n              ? \"Future insurance Needs\"\r\n              : \"Future insurance Needs ^F\", //Income Shortfall',\r\n          //type: \"line\",\r\n          data: dataTaxLiab,\r\n\r\n          fill: true, // Don't fill area under the line\r\n          borderColor: \"darkGrey\", // Line color\r\n          backgroundColor: \"#607d8b\"\r\n        },\r\n        {\r\n          label:\r\n            this.props.language === \"en\"\r\n              ? \"Life Expectancy \"\r\n              : \"Esprance de vie\", //Income Shortfall',\r\n          //type: \"line\",\r\n          data: dataTaxLiabLifeExp,\r\n          fill: true, // Don't fill area under the line\r\n          borderColor: \"#6AAd8b\",\r\n          backgroundColor: \"rgb(106,173,139,.5)\"// \"rgba(96, 125, 139, .7)\"\r\n        }\r\n      ]\r\n    };\r\n\r\n  const dataPieAssets = {\r\n  labels: [\r\n    \"Cash/TFSA/Insurance\", \"RRSP/RRIF\", \"Public/Private shares\", \"Real Estate\", \"Other\"\r\n  ],\r\n  datasets: [\r\n    {\r\n         data: [\r\n        getAssetsCategoryTotal(this.props.input.dataInput,ASSETS.CASH.Key)+\r\n        getAssetsCategoryTotal(this.props.input.dataInput,ASSETS.LIFE_INSURANCE.Key)+\r\n        getAssetsCategoryTotal(this.props.input.dataInput,ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.Key)\r\n        , \r\n        getAssetsCategoryTotal(this.props.input.dataInput,ASSETS.RRSP_RRIF.Key), \r\n        getAssetsCategoryTotal(this.props.input.dataInput,ASSETS.SMALL_BUSINESS_SHARES.Key)+\r\n        getAssetsCategoryTotal(this.props.input.dataInput,ASSETS.STOCKS_BONDS.Key),\r\n        getAssetsCategoryTotal(this.props.input.dataInput,ASSETS.REAL_ESTATE.Key)+\r\n        getAssetsCategoryTotal(this.props.input.dataInput,ASSETS.PERSONAL_RESIDENCE.Key),\r\n        getAssetsCategoryTotal(this.props.input.dataInput,ASSETS.OTHER_ASSETS.Key)\r\n      ],\r\n      backgroundColor: [\"#F7464A\", \"#46BFBD\", \"#FDB45C\", \"#949FB1\", \"#4D5360\"]\r\n    }\r\n  ]\r\n}\r\nconst dataPieTax = {\r\n  labels: [\r\n    \"Non-Taxable\", \"RRSP/RRIF\", \"Capital Gains\", \"Taxed As Income\", \"Dividend\"\r\n  ],\r\n  datasets: [\r\n    {\r\n         data: [\r\n        getAssetsTaxCategoryTotal(this.props.input.dataInput,ASSET_TAX.NON_TAXABLE.Key), \r\n        getAssetsTaxCategoryTotal(this.props.input.dataInput,ASSET_TAX.REGISTERED.Key), \r\n        getAssetsTaxCategoryTotal(this.props.input.dataInput,ASSET_TAX.CAPITAL_GAINS_ANNUAL.Key)+\r\n        getAssetsTaxCategoryTotal(this.props.input.dataInput,ASSET_TAX.CAPITAL_GAINS_DEFERRED.Key),\r\n        getAssetsTaxCategoryTotal(this.props.input.dataInput,ASSET_TAX.FULLY_TAXABLE.Key), \r\n        getAssetsTaxCategoryTotal(this.props.input.dataInput,ASSET_TAX.DIVIDEND.Key)\r\n      ],\r\n      backgroundColor: [\"#F7464A\", \"#46BFBD\", \"#FDB45C\", \"#949FB1\", \"#4D5360\"]\r\n    }\r\n  ]\r\n}\r\n\r\nconst dataPieLiabs = {\r\n  labels: [\r\n    \"Loans\", \"Taxes\", \"Emergency Fund\", \"Other\"\r\n  ],\r\n  datasets: [\r\n    {\r\n         data: [\r\n        getLiabsCategoryTotal(this.props.input.dataInput,LIABILITIES.OUTSTANDING_LOANS.Key)+\r\n        getLiabsCategoryTotal(this.props.input.dataInput,LIABILITIES.MORTGAGE_REDEMPTION.Key)+\r\n        getLiabsCategoryTotal(this.props.input.dataInput,LIABILITIES.CREDIT_CARDS.Key)+\r\n        getLiabsCategoryTotal(this.props.input.dataInput,LIABILITIES.CLIENT_TAX_LIABILITY.Key)\r\n        , \r\n        getLiabsCategoryTotal(this.props.input.dataInput,LIABILITIES.INCOME_TAXES.Key), \r\n        getLiabsCategoryTotal(this.props.input.dataInput,LIABILITIES.EMERGENCY_FUND.Key),\r\n        getLiabsCategoryTotal(this.props.input.dataInput,LIABILITIES.OTHER.Key)+\r\n        getLiabsCategoryTotal(this.props.input.dataInput,LIABILITIES.CHILD_HOME_CARE.Key)\r\n      ],\r\n      backgroundColor: [\"#F7464A\", \"#46BFBD\", \"#FDB45C\", \"#949FB1\"]\r\n    }\r\n  ]\r\n}\r\nconst dataPieLiabsAtDeath = {\r\n  labels: [\r\n    \"Last Expenses\", \"LegalandExecutorFees\", \"Future Commitments\"\r\n  ],\r\n  datasets: [\r\n    {\r\n         data: [\r\n           getLiabsCategoryTotal(this.props.input.dataInput,LIABILITIES.LAST_EXPENSES.Key),\r\n        getLiabsCategoryTotal(this.props.input.dataInput,LIABILITIES.LEGAL_AND_EXECUTOR_FEES.Key), \r\n        getLiabsCategoryTotal(this.props.input.dataInput,LIABILITIES.LEGACY_FOR_CHILDREN.Key)+\r\n        getLiabsCategoryTotal(this.props.input.dataInput,LIABILITIES.CHARITABLE_GIFTS.Key)\r\n      ],\r\n      backgroundColor: [\"#F7464A\", \"#46BFBD\", \"#FDB45C\"]\r\n    }\r\n  ]\r\n}\r\n\r\n\r\n\r\n\r\n//options\r\n  var optionsPie = {\r\n    responsive: true,\r\n    title: {\r\n      display: true,\r\n      position: \"top\",\r\n      text: \"Assets Breakdown Today\",\r\n      fontSize: 14,//8,\r\n      fontColor: \"#111\"\r\n    },\r\n    legend: {\r\n      display: true,\r\n      position: \"right\",\r\n      labels: {\r\n        fontColor: \"#333\",\r\n        fontSize: 12//16\r\n      }\r\n    }\r\n  };\r\n   \r\n   \r\n   let optionsPieTax = JSON.parse(JSON.stringify(optionsPie));\r\n   optionsPieTax.title.text=\"Tax Treatment of Assets\"\r\n\r\nlet optionsPieLiabsAtDeath = JSON.parse(JSON.stringify(optionsPie));\r\n   optionsPieLiabsAtDeath.title.text=\"Liabilities At Death\"\r\n\r\nlet optionsPieLiabs = JSON.parse(JSON.stringify(optionsPie));\r\n   optionsPieLiabs.title.text=\"Liabilities Breakdown\"\r\n\r\n\r\n\r\n\r\nconst dataPieEstateLiabNow = {\r\n  labels: [\r\n    \"Liabilities\", \"Taxes: RRSP/RRIF\", \"Taxes: Capital Gains\", \"Taxes: As Income\", \"Taxes: Dividend\"\r\n  ],\r\n  datasets: [\r\n    {\r\n         data: this.state.estateLiab,\r\n      backgroundColor: [\"#F7464A\", \"#46BFBD\", \"#FDB45C\", \"#949FB1\", \"#4D5360\"]\r\n    }\r\n  ]\r\n}\r\nconst dataPieEstateLiabLE = {\r\n  labels: [\r\n    \"Liabilities\", \"Taxes: RRSP/RRIF\", \"Taxes: Capital Gains\", \"Taxes: As Income\", \"Taxes: Dividend\"\r\n  ],\r\n  datasets: [\r\n    {\r\n         data: this.state.estateLiabLE,\r\n      backgroundColor: [\"#F7464A\", \"#46BFBD\", \"#FDB45C\", \"#949FB1\", \"#4D5360\"]\r\n    }\r\n  ]\r\n}\r\n let optionsPieEstateLiab= JSON.parse(JSON.stringify(optionsPie));\r\n   optionsPieEstateLiab.title.text=\"Estate Liability Today\"\r\n\r\nlet optionsPieEstateLiabLE= JSON.parse(JSON.stringify(optionsPie));\r\n   optionsPieEstateLiabLE.title.text=\"Estate Liability at Life Expectancy +3\"\r\n\r\n\r\n\r\n\r\n\r\n    /* var ctx = document.getElementById('myChart3');\r\n\r\n    var myChart3=new Chart(ctx, {\r\n      type: \"bar\", // override the default type\r\n\r\n      data: {\r\n        labels: dtaAgesAll,\r\n        datasets: [\r\n          {\r\n            label:\r\n              this.props.language === \"en\"\r\n                ? \"Life Expectancy\"\r\n                : \"Life Expectancy ^F\", //Income Shortfall',\r\n            data: dataTaxLiabLifeExp,\r\n            borderColor: \"#6AAd8b\",\r\n            backgroundColor: \"rgb(106,173,139,.5)\"\r\n          },\r\n          {\r\n            type: \"line\", // set the default type\r\n            label:\r\n              this.props.language === \"en\"\r\n                ? \"Future insurance Needs\"\r\n                : \"Future insurance Needs ^F\", //Income Shortfall',\r\n            //type: \"line\",\r\n            data: this.props.dataEstateLiability,\r\n            fill: true, // Don't fill area under the line\r\n            borderColor: \"darkGrey\", // Line color\r\n            backgroundColor: \"#607d8b\"\r\n          }\r\n        ]\r\n      },\r\n      options: {\r\n        //Customize chart options\r\n      }\r\n    });\r\n */\r\n    \r\n    //this.taxLiabChartRef = this.chartRef.current.getContext(\"2d\");\r\n    /* new Chart(this.taxLiabChartRef, {\r\n      type: \"bar\", // override the default type\r\n\r\n      data: {\r\n        labels: dtaAgesAll,\r\n        datasets: [\r\n          {\r\n            label:\r\n              this.props.language === \"en\"\r\n                ? \"Life Expectancy\"\r\n                : \"Life Expectancy ^F\", //Income Shortfall',\r\n            data: dataTaxLiabLifeExp,\r\n            borderColor: \"#6AAd8b\",\r\n            backgroundColor: \"rgb(106,173,139,.5)\"\r\n          },\r\n          {\r\n            type: \"line\", // set the default type\r\n            label:\r\n              this.props.language === \"en\"\r\n                ? \"Future insurance Needs\"\r\n                : \"Future insurance Needs ^F\", //Income Shortfall',\r\n            //type: \"line\",\r\n            data: this.props.dataEstateLiability,\r\n            fill: true, // Don't fill area under the line\r\n            borderColor: \"darkGrey\", // Line color\r\n            backgroundColor: \"#607d8b\"\r\n          }\r\n        ]\r\n      },\r\n      options: {\r\n        //Customize chart options\r\n      }\r\n    }); */\r\n\r\n    // FV of prems\r\n    let dataFVofPrems = this.getDataFVofPrems(dataFutureINA);\r\n\r\n    // console.log(this.props.dataEstateLiability);\r\n\r\n    const dataMCCpremFV = {\r\n      labels: dtaAgesAll, // this.dataAges,\r\n      datasets: [\r\n        {\r\n          label:\r\n            this.props.language === \"en\"\r\n              ? \"Future Value of premiums paid      vs \"\r\n              : \"EquiBuild quote ^F\", //Income Shortfall',\r\n          data: dataFVofPrems,\r\n          fill: true,\r\n          borderColor: \"darkgreen\", // Line color\r\n          backgroundColor: \"rgba(144, 244, 88, .2)\"\r\n        },\r\n        {\r\n          label:\r\n            this.props.language === \"en\"\r\n              ? \"Raise cash to pay for shortfall \"\r\n              : \"Future insurance needs ^F\", //Income Shortfall',\r\n          data:\r\n            this.props.INAOption === DISPLAY_INCOME\r\n              ? dataFutureINA\r\n              : this.props.dataEstateLiability,\r\n          //[10964, 13734, 14008, 14288, 14574, 14866, 15163, 15466, 15776, 16091, 16413, 16741, 17076, 17417, 17766, 18121, 18484, 18853, 19230, 19615, 20007, 20407, 20815, 21232, 21656, 22090, 27632, 28184, 28748, 29323, 29910, 30508, 31118, 31740, 32375, 33023, 33683, 34357, 35044, 35745, 36460, 37189, 37933, 38691, 39465, 40254],\r\n          fill: true, // Don't fill area under the line\r\n          borderColor:\r\n            this.props.INAOption === DISPLAY_INCOME ? \"darkred\" : \"darkGrey\",\r\n          backgroundColor:\r\n            this.props.INAOption === DISPLAY_INCOME\r\n              ? \"rgba(244, 144, 128, 0.9)\"\r\n              : \"#607D8B\"\r\n        }\r\n      ]\r\n    };\r\n\r\n    let SumOfSquresDiff = 0;\r\n    let i;\r\n    for (i = 0; i < this.lifeExp; ++i) {\r\n      let insVal = DISPLAY_INCOME\r\n        ? dataFutureINA[i]\r\n        : this.props.dataEstateLiability[i];\r\n      //console.log(SumOfSquresDiff,dataFVofPrems,insVal)\r\n      SumOfSquresDiff += Math.pow(dataFVofPrems[i] - insVal, 2);\r\n    }\r\n    SumOfSquresDiff = numFormat(\r\n      Math.round(SumOfSquresDiff / (1000000 * this.lifeExp)),\r\n      false,\r\n      5,\r\n      \",\"\r\n    );\r\n\r\n    const dataMCCQuoteDB = {\r\n      labels: dtaAgesAll, // this.dataAges,\r\n      datasets: [\r\n        {\r\n          label:\r\n            this.props.language === \"en\"\r\n              ? \"EquiBuild quote\"\r\n              : \"EquiBuild quote ^F\", //Income Shortfall',\r\n          data: this.dataDB,\r\n          fill: true,\r\n          borderColor: \"darkblue\", // Line color\r\n          backgroundColor: \"rgba(144, 144, 188, .3)\"\r\n        },\r\n        {\r\n          label:\r\n            this.props.language === \"en\"\r\n              ? \"Future insurance needs\"\r\n              : \"Future insurance needs ^F\", //Income Shortfall',\r\n          data:\r\n            this.props.INAOption === DISPLAY_INCOME\r\n              ? dataFutureINA\r\n              : this.props.dataEstateLiability,\r\n          //[10964, 13734, 14008, 14288, 14574, 14866, 15163, 15466, 15776, 16091, 16413, 16741, 17076, 17417, 17766, 18121, 18484, 18853, 19230, 19615, 20007, 20407, 20815, 21232, 21656, 22090, 27632, 28184, 28748, 29323, 29910, 30508, 31118, 31740, 32375, 33023, 33683, 34357, 35044, 35745, 36460, 37189, 37933, 38691, 39465, 40254],\r\n          fill: true, // Don't fill area under the line\r\n          borderColor:\r\n            this.props.INAOption === DISPLAY_INCOME ? \"darkred\" : \"darkGrey\",\r\n          backgroundColor:\r\n            this.props.INAOption === DISPLAY_INCOME\r\n              ? \"rgba(244, 144, 128, 0.9)\"\r\n              : \"#607D8B\"\r\n        }\r\n      ]\r\n    };\r\n\r\n    const optionsFV = {\r\n      responsive: true,\r\n      maintainAspectRatio: false,\r\n      scales: {\r\n        xAxes: [\r\n          {\r\n            stacked: true,\r\n            ticks: {\r\n              beginAtZero: true\r\n            }\r\n          }\r\n        ],\r\n        yAxes: [\r\n          {\r\n            stacked: false,\r\n            ticks: {\r\n              beginAtZero: true,\r\n              steps: 10,\r\n              stepValue: 5\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    };\r\n\r\n    //let colHeaders=[\"Year\", \"Survivor's Age\", \"Insurance Need\", \"Propsed Plan Death Benefit\", \"Future Value of Premiums\", \"Net Advantage of Insurance\" ];\r\n    let colHeaders = [\r\n      \"Survivor's Age\",\r\n      \"Insurance Need\",\r\n      \"Premiums\",\r\n      \"Propsed Plan Death Benefit\",\r\n      \"Future Value of Premiums\"\r\n    ];\r\n    let dataProjection = [];\r\n    dataProjection.push(this.dataAges);\r\n    dataProjection.push(\r\n      this.props.INAOption === DISPLAY_INCOME\r\n        ? dataFutureINA\r\n        : this.props.dataEstateLiability\r\n    );\r\n    dataProjection.push(this.dataPremiums);\r\n    dataProjection.push(this.dataDB);\r\n    dataProjection.push(dataFVofPrems);\r\n\r\n    let dataProjectionCV = [];\r\n    dataProjectionCV.push(this.dataAges);\r\n    dataProjectionCV.push(this.dataSVEquiBuild);\r\n    dataProjectionCV.push(this.dataSVManulife);\r\n\r\n    let needToE =\r\n      \"Insurance Needs Projections from today to life expectancy plus 3 years (\" +\r\n      lifeExp +\r\n      \" + 3)\";\r\n    let needToF =\r\n      \"Insurance Needs to life expectancy (\" +\r\n      lifeExp +\r\n      \" years) plus 3 years^F\";\r\n    let needTo = this.props.language === \"en\" ? needToE : needToF;\r\n    // needTo += +this.props.projectEnd + \")\";\r\n\r\n    //console.log(this.state.loadingMCC);\r\n    return (\r\n      <div style={{ color: \"darkBlue\", marginTop: \"15px\" }}>\r\n        {this.props.INAOption !== DISPLAY_INCOME && (\r\n          <MultiButtons\r\n            noButtons={2}\r\n            buttonCaption={[\"Estate of Client\", \"Estate of Couple\"]}\r\n            selectMultiButton={this.selectMultiButtonINAorTax}\r\n          />\r\n        )}\r\n        \r\n        <div style={{ width: \"90%\" }}>\r\n        <div style={{ width: \"100%\" }}> \r\n        \r\n           <h3 className=\"ppi1\">\r\n          {this.props.INAOption === DISPLAY_INCOME\r\n            ? \"Your current financial situation is summerized below:\" //this.props.insuranceNeed\r\n            : <div><br/><br/>Estate Liability breakdown Today and at Life Expectancy plus 3 years: <br/></div>\r\n            }\r\n          {/*numFormat(this.props.dataTaxLiability[0], false, 2, \",\")}*/}\r\n        </h3>\r\n\r\n \r\n          <div style={{ width: \"100%\" }}>\r\n            {this.props.INAOption === DISPLAY_INCOME ? (\r\n               <div><article className=\"canvas-container\" style={{height: \"450px\" }}>\r\n                <div style={{overflow:'hidden', float: 'left', width: '50%',height: \"400px\" }}><Pie data={dataPieAssets} options={optionsPie} /></div>\r\n                <div style={{float: 'left',width: '50%',height: \"400px\"}}><Pie data={dataPieTax} options={optionsPieTax} /></div>\r\n              </article>\r\n              <article className=\"canvas-container\" style={{height: \"450px\" }}>\r\n                <div style={{overflow:'hidden', float: 'left', width: '50%',height: \"400px\" }}><Pie data={dataPieLiabs} options={optionsPieLiabs} /></div>\r\n                <div style={{float: 'left',width: '50%',height: \"400px\"}}><Pie data={dataPieLiabsAtDeath} options={optionsPieLiabsAtDeath} /></div>\r\n              </article></div>\r\n         ) : (\r\n           \r\n            <article className=\"canvas-container\" style={{height: \"450px\" }}>\r\n                <div style={{overflow:'hidden', float: 'left', width: '50%',height: \"400px\" }}><Pie data={dataPieEstateLiabNow} options={optionsPieEstateLiab} /></div >\r\n                <div style={{float: 'left',width: '50%',height: \"400px\"}}><Pie data={dataPieEstateLiabLE} options={optionsPieEstateLiabLE} /></div>\r\n              </article>)}\r\n          </div>\r\n\r\n<br/>\r\n           <h3 className=\"ppi1\">\r\n          {this.props.INAOption === DISPLAY_INCOME\r\n            ? <div>\"Net Worth Today:\"<br/> \"Assets:\"<br/> \"Liabilities:\"</div> //this.props.insuranceNeed\r\n            : <br/>\r\n            }\r\n          {/*numFormat(this.props.dataTaxLiability[0], false, 2, \",\")}*/}\r\n        </h3>\r\n\r\n\r\n\r\n        <h3 className=\"ppi1\">\r\n          {needTo} {/*:{\" \"}*/}\r\n          {this.props.INAOption === DISPLAY_INCOME\r\n            ? \"\" //this.props.insuranceNeed\r\n            : \"\"}\r\n          {/*numFormat(this.props.dataTaxLiability[0], false, 2, \",\")}*/}\r\n        </h3>\r\n\r\n             {this.props.INAOption === DISPLAY_INCOME ? (\r\n              <article className=\"canvas-container\" style={{ height: \"200px\" }}>\r\n                <Line data={dataShortfallFV} options={optionsFV} />\r\n              </article>\r\n            ) : (\r\n              <article className=\"canvas-container\" style={{ height: \"200px\" }}>\r\n                <Bar data={dataTaxLiability} options={optionsFV} />\r\n              </article>\r\n            )}\r\n\r\n            {/*  {this.props.INAOption !== DISPLAY_INCOME &&\r\n             <div>\r\n              <canvas id=\"myChart\" ref={this.chartRef} />\r\n            </div>}\r\n             */}\r\n          \r\n            <br /> <br /> <br /> <br />\r\n            <hr />\r\n            <h2>Insurance Quote:</h2>\r\n            <div style={{ width: \"100%\", float: \"left\", clear: \"left\" }}>\r\n              <MultiButtons\r\n                noButtons={1}\r\n                buttonCaption={[\"Optimize\"]}\r\n                selectMultiButton={this.solveForOptimumQuote}\r\n              />\r\n            </div>\r\n            <div style={{ width: \"100%\", float: \"left\", clear: \"left\" }}>\r\n              <MultiButtons\r\n                noButtons={2}\r\n                buttonCaption={[\"Best EquiBuild fit\", \"Manulife UL fit\"]}\r\n                selectMultiButton={this.solveForOptimumEquiBuild}\r\n              />\r\n            </div>\r\n            <InputField\r\n              inputName=\"Insurance Amtount\"\r\n              id={4}\r\n              format={2}\r\n              Count={1}\r\n              language={this.props.language}\r\n              inputValue={this.props.INAOption === DISPLAY_INCOME\r\n        ? this.props.insuranceNeed\r\n        : this.props.dataEstateLiability[0]}\r\n              maxValue={1000}\r\n              handleUpdateInput={this.selectMultiButton}\r\n            />\r\n            <InputField\r\n              inputName=\"No. of deposits\"\r\n              id={1}\r\n              format={1}\r\n              Count={1}\r\n              language={this.props.language}\r\n              inputValue={this.premiumDur}\r\n              handleUpdateInput={this.selectMultiButton}\r\n            />\r\n            <InputField\r\n              inputName=\"Over min. deposit\"\r\n              id={2}\r\n              format={3}\r\n              Count={1}\r\n              maxValue={300}\r\n              language={this.props.language}\r\n              inputValue={this.minMultiple}\r\n              handleUpdateInput={this.selectMultiButton}\r\n            />\r\n            <h3 style={{ marginTop: \"20px\", marginLeft: \"20px\" }}>\r\n              Minimize this measure of goodness of fit: {SumOfSquresDiff}{\" \"}\r\n              <span style={{ leftPadding: \"20px\" }}>\r\n                {\" \"}\r\n                Premium duration: {this.bestPremiumDur}\r\n              </span>{\" \"}\r\n            </h3>\r\n            <article className=\"canvas-container\" style={{ height: \"200px\" }}>\r\n              <Line data={dataMCCQuoteDB} options={optionsFV} />\r\n            </article>\r\n            <br /> <br /> <br /> <br />\r\n            <br /> <br /> <br /> <br />\r\n            <hr />\r\n            <h2>Compare Options</h2>\r\n            <article className=\"canvas-container\" style={{ height: \"200px\" }}>\r\n              <Line data={dataMCCpremFV} options={optionsFV} />\r\n            </article>\r\n            <p />\r\n            <br />\r\n            <p />\r\n            <br />\r\n            <hr />\r\n           \r\n            <div style={{ width: \"60%\" }}>\r\n              <DataTable\r\n                dataColTitles={colHeaders}\r\n                dataProjection={dataProjection}\r\n                gridTitle={\"Compare Options\"}\r\n                language={this.props.language}\r\n              />\r\n            </div>\r\n            <br />\r\n            {this.dataSVManulife.length > 0 && this.dataSVEquiBuild.length > 0 && (\r\n              <div style={{ width: \"60%\" }}>\r\n                <DataTable\r\n                  dataColTitles={[\r\n                    \"Age\",\r\n                    \"EquiBuild Surrnder Value\",\r\n                    \"ManuLife UL Surrnder Value\"\r\n                  ]}\r\n                  dataProjection={dataProjectionCV}\r\n                  gridTitle={\"Compare Surrender Values: EquiBuild vs Manulife UL\"}\r\n                  language={this.props.language}\r\n                />\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAhdEVYdENyZWF0aW9uIFRpbWUAMjAxOTowODozMSAwOTowOTo1NrtZ+qQAAAR6SURBVHhe7ZyLjVNBDEUXuqIhGoAytgEoCMoCTTazmrzkfWb8t++RVkRCSM++Z+zJE9ovP379+fcGylJCgPfv3+6f5vj5++/9U15SCbAa9CyZxAgtgFbgZ0QWIpwAXkLfI5oMIQTwHvoeEWRwK0DU0PfwKoM7AbIFv8WbCG4EyB78Fi8ifL3/aUq18ButZg91mwrgpQmWWNdvsgKqh76HxVpQF8Aq/JXmWjyrtgSqAmg1VLKJGWoYURFAumkWo7MjWZtGXeICRG/QDBK1StcoKkDEhnDAXbdkzWICRGqCFJw9kKpfRIAIhWvC1Q+JXrAL4LlYazz2hvVNIMI/xmNdbAIg/Gu0+qg1cvW6wSIAxwNxNCYSXiQgC8AVfkU8SEASAOHTsZZgWQCEz4elBGyXwFkQ/iNWEiwJQDGuFYrwX2PRm2kBOEY/kGElmykBqOHj5F+D0qfZjNTuAAh/Dq1+XRaAuvfBPKt9m8lKfAIgfBrSElwSgLr7gV9OBcDot0dyCoitAM/ht8Zsf7wj1c9DASI0ZoajsKOIMMtZTSITwOPpvxquZwkk+rorwGojIoffySbBUT1idwAQA1YBMpz+TrYpsMdLATwXD9bYy5RtAng8/Znh6jfuAIV4NQWeBMg2/ldPSpWJxjIBMP5t4Oh7iRUw26jMQm8n/IMAmW//V0ONFj71eckTIFLD2rPuPe/R32WmxArY0sMef6pSUoDqjKv+U4DM+z87lAlGmgCVR2cWsAKKAwGKAwGKAwGK0i/9t98StvININoFEDU+0+rDBChOCQFW33Gs/rtIYAIUBwIUBwIUBwIUBwIUBwIUBwIUBwIUBwIUBwIUZ1mACq9JI7Gax00A/NeuumAFFKUfeghQHAhQHJIAuAjGBxMgAZSD+CkAvgnUBBOgIONhJwuAe0BsMAGCQz2ADwLgHlAPlgmANWDDSt+3hxwroDhPAmAN1IJtAmAN6MIx/htYAcV5KcDqGsAU0IHr9DcwAYrDLgCmgCzc/d0VgPJtABL44ihLrIBASBysQwEwBfyw2s+zDEUnACTwz6kAlCnghdUavNQudfob4ncATAEa0v27/Zq4++dDqA+SYZJoQ+n51X5fngDUADEJ5tAIvyG+AkYgwTU0+zQlAMa4f2Yzmp4AHKsAk2AfrdHfUV0BI5DgEauDsSQA1yqABB9w9GE1k+UJAAl4sAy/QVoBkICGdfgN8h0AEqzhIfzG5TeBZ3AGyCWVR7j6xNUjtm8BnKFlnQYe62ITgJvWrCwicNfCedjYVsCIRHAR10KEPogI0JA6vRFEiHQAxARoSEnQ8ChCROlFBWhIStCxlEG6PunaxAVoaEgwIt00rXo0xFYRoKEtwZaVZlo+s9ZUUxOgYy2Cd7SC76i/B9AuMBIWvVGfACOYBh9YHgrTN4Gt8OoTwbp+F6+CK0rgRX7TFfCK7GvBm+zuBOhkE8HrlHMrwEhUGSKsthACdKKIECH4TigBRrzJECn0kbACbNEWImrgW9IIsAdVjCxB75FeAHDE29t/eyk/hYljv2IAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,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\"","var map = {\n\t\"./ar\": 366,\n\t\"./ar.js\": 366,\n\t\"./az\": 367,\n\t\"./az.js\": 367,\n\t\"./be\": 368,\n\t\"./be.js\": 368,\n\t\"./bg\": 369,\n\t\"./bg.js\": 369,\n\t\"./bs\": 370,\n\t\"./bs.js\": 370,\n\t\"./ca\": 371,\n\t\"./ca.js\": 371,\n\t\"./cs\": 372,\n\t\"./cs.js\": 372,\n\t\"./cy\": 373,\n\t\"./cy.js\": 373,\n\t\"./da\": 374,\n\t\"./da.js\": 374,\n\t\"./de\": 375,\n\t\"./de.js\": 375,\n\t\"./el\": 376,\n\t\"./el.js\": 376,\n\t\"./en\": 238,\n\t\"./en.js\": 238,\n\t\"./es\": 377,\n\t\"./es.js\": 377,\n\t\"./et\": 378,\n\t\"./et.js\": 378,\n\t\"./eu\": 379,\n\t\"./eu.js\": 379,\n\t\"./fa\": 380,\n\t\"./fa.js\": 380,\n\t\"./fi\": 381,\n\t\"./fi.js\": 381,\n\t\"./fr\": 382,\n\t\"./fr.js\": 382,\n\t\"./hr\": 383,\n\t\"./hr.js\": 383,\n\t\"./hu\": 384,\n\t\"./hu.js\": 384,\n\t\"./id\": 385,\n\t\"./id.js\": 385,\n\t\"./it\": 386,\n\t\"./it.js\": 386,\n\t\"./ja\": 387,\n\t\"./ja.js\": 387,\n\t\"./ka\": 388,\n\t\"./ka.js\": 388,\n\t\"./ko\": 389,\n\t\"./ko.js\": 389,\n\t\"./lt\": 390,\n\t\"./lt.js\": 390,\n\t\"./lv\": 391,\n\t\"./lv.js\": 391,\n\t\"./mk\": 392,\n\t\"./mk.js\": 392,\n\t\"./mn\": 393,\n\t\"./mn.js\": 393,\n\t\"./ms\": 394,\n\t\"./ms.js\": 394,\n\t\"./nb_NO\": 395,\n\t\"./nb_NO.js\": 395,\n\t\"./nl\": 396,\n\t\"./nl.js\": 396,\n\t\"./pl\": 397,\n\t\"./pl.js\": 397,\n\t\"./pt\": 398,\n\t\"./pt.js\": 398,\n\t\"./pt_BR\": 399,\n\t\"./pt_BR.js\": 399,\n\t\"./ro\": 400,\n\t\"./ro.js\": 400,\n\t\"./ru\": 401,\n\t\"./ru.js\": 401,\n\t\"./se\": 402,\n\t\"./se.js\": 402,\n\t\"./sl\": 403,\n\t\"./sl.js\": 403,\n\t\"./sq\": 404,\n\t\"./sq.js\": 404,\n\t\"./sr\": 405,\n\t\"./sr.js\": 405,\n\t\"./sv\": 406,\n\t\"./sv.js\": 406,\n\t\"./tr\": 407,\n\t\"./tr.js\": 407,\n\t\"./ua\": 408,\n\t\"./ua.js\": 408,\n\t\"./uk\": 409,\n\t\"./uk.js\": 409,\n\t\"./vi\": 410,\n\t\"./vi.js\": 410,\n\t\"./zh\": 411,\n\t\"./zh.js\": 411,\n\t\"./zh_TW\": 412,\n\t\"./zh_TW.js\": 412\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 589;","import React from \"react\";\r\nimport ReactExport from \"react-data-export\";\r\nimport { cleanFormat } from \"../../utils/helper\";\r\nimport { APPLET_INA,\r\n  APPLET_EP\r\n} from \"../../definitions/generalDefinitions\";\r\n\r\n\r\nconst ExcelFile = ReactExport.ExcelFile;\r\nconst ExcelSheet = ReactExport.ExcelFile.ExcelSheet;\r\n\r\nexport default class DownloadExcel extends React.Component {\r\n  render() {\r\n    // see https://github.com/securedeveloper/react-data-export for formatting\r\n    const styleCell = { alignment: { horizontal: \"right\" } ,font: {name: \"Trebuchet MS\"} , numFmt: \"##,##0\" };\r\n    const styleCellCol1 = { alignment: { horizontal: \"right\" } ,font: {name: \"Trebuchet MS\"} , numFmt: \"0\" };\r\n    const styleCellAlt = { alignment: { horizontal: \"right\" } ,font: {name: \"Trebuchet MS\"}, fill: { patternType: \"solid\", fgColor: { rgb: \"E9EAEB\" }}, numFmt: \"##,##0\" };\r\n    const styleCellAltCol1 = { alignment: { horizontal: \"right\" } ,font: {name: \"Trebuchet MS\"}, fill: { patternType: \"solid\", fgColor: { rgb: \"E9EAEB\" }}, numFmt: \"0\" };\r\n    const styleTitleRowInfo = {\r\n      font: {name: \"Trebuchet MS\", color: { rgb: \"FFFFFF\" }, bold: true},\r\n      alignment: { wrapText: true,horizontal: \"center\" },\r\n      border: {\r\n        top: { style: \"thin\", color: { rgb: \"C0C0C0\" } },\r\n        bottom: { style: \"thin\", color: { rgb: \"C0C0C0\" } },\r\n        right: { style: \"thin\", color: { rgb: \"C0C0C0\" } },\r\n        left: { style: \"thin\", color: { rgb: \"C0C0C0\" } }\r\n      },\r\n      fill: { patternType: \"solid\", fgColor: { rgb: \"7399c6\" } }\r\n    };\r\n    const styleCellLeftAllign = { alignment: { horizontal: \"left\" },font: {name: \"Trebuchet MS\"}};\r\n    const styleTitleRow = {\r\n      font: {name: \"Trebuchet MS\", color: { rgb: \"FFFFFF\" }, bold: true},\r\n      alignment: {wrapText: true , horizontal: \"center\" },\r\n      border: {\r\n        top: { style: \"thin\", color: { rgb: \"C0C0C0\" } },\r\n        bottom: { style: \"thin\", color: { rgb: \"C0C0C0\" } },\r\n        right: { style: \"thin\", color: { rgb: \"C0C0C0\" } },\r\n        left: { style: \"thin\", color: { rgb: \"C0C0C0\" } }\r\n      },\r\n      fill: { patternType: \"solid\", fgColor: { rgb: \"334D7C\" } }\r\n     \r\n    };\r\n\r\n    let excelColumnsDataInfoSection = [];\r\n    let title = [];\r\n    let dataBodyTitles = []\r\n    let dataBody = [];\r\n    let dataRow = [];\r\n    let j;\r\n    let i;\r\n    let dataCell;\r\n\r\n    // console.log(this.props.excelColumnsDataInfoSection);\r\n\r\n    // section 1 title and header data\r\n    dataRow = [];\r\n    const lang = this.props.language;\r\n    \r\n    // always name and its value: length 2\r\n\r\n    if (this.props.excelColumnsDataInfoSection !== undefined) {\r\n      for (j = 0; j < this.props.excelColumnsDataInfoSection.length; ++j) {\r\n        for (i = 0; i < this.props.excelColumnsDataInfoSection[0].length; ++i) {\r\n           dataCell =\r\n            this.props.excelColumnsDataInfoSection[j][i] === undefined\r\n              ? \"\"\r\n              : (this.props.excelColumnsDataInfoSection[j][i].toString().indexOf(\"%\")>=0 || isNaN(this.props.excelColumnsDataInfoSection[j][i].toString())===true  || this.props.excelColumnsDataInfoSection[j][i].toString()===\"\" ?\r\n              this.props.excelColumnsDataInfoSection[j][i].toString():\r\n                parseFloat(cleanFormat(this.props.excelColumnsDataInfoSection[j][i]),lang));\r\n          dataRow.push({\r\n            value: dataCell,\r\n            style: j === 0 ? styleTitleRowInfo : styleCell\r\n          });\r\n        }\r\n        excelColumnsDataInfoSection.push(dataRow);\r\n        dataRow = [];\r\n      }\r\n    }\r\n\r\n    // section 2 column headers and data\r\n    // add column titles as first data row to be able to style with another stupid libaray\r\n    // empty titles\r\n\r\n    if (this.props.excelColumnsHeaders !== undefined) {\r\n\r\n      title.push([{ value: this.props.title, style: {font: {sz: \"14\", name: \"Trebuchet MS\", bold: true}}}]);\r\n      \r\n      for (j = 0; j < this.props.excelColumnsHeaders.length; ++j) {\r\n        dataBodyTitles.push({ title: \"\", width: { wpx: this.props.width }, font: {name: \"Trebuchet MS\", bold: true}} );\r\n      }\r\n\r\n      for (j = 0; j < this.props.excelColumnsHeaders.length; ++j) {\r\n        \r\n        dataRow.push({ value: this.props.excelColumnsHeaders[j], style: styleTitleRow });\r\n      }\r\n      dataBody.push(dataRow);\r\n    }\r\n\r\n    dataRow = [];\r\n    if (this.props.excelColumnsDataMain !== undefined) {\r\n      for (i = 0; i < this.props.excelColumnsDataMain[0].length; ++i) {\r\n        for (j = 0; j < this.props.excelColumnsHeaders.length; ++j) {\r\n          dataCell =\r\n            this.props.excelColumnsDataMain[j][i] === undefined\r\n              ? \"\"\r\n              :(this.props.excelColumnsDataMain[j][i].toString().indexOf(\"%\")>=0 || isNaN(this.props.excelColumnsDataMain[j][i].toString())===true  || this.props.excelColumnsDataMain[j][i].toString()===\"\" ?\r\n              this.props.excelColumnsDataMain[j][i].toString():\r\n                parseFloat(cleanFormat(this.props.excelColumnsDataMain[j][i]),lang));\r\n\r\n          dataRow.push({\r\n            value: dataCell,\r\n            style: isNaN(parseFloat(cleanFormat(dataCell,lang)))\r\n              ? styleCellLeftAllign\r\n              : (i%2?(j===0?styleCellAltCol1:styleCellAlt):(j===0?styleCellCol1:styleCell))\r\n          });\r\n        }\r\n        dataBody.push(dataRow);\r\n        dataRow = [];\r\n      }\r\n    }\r\n    const multiDataSet = [\r\n      // section 1 title\r\n      {\r\n        columns: [],\r\n        data: title\r\n      },\r\n      // section 1 key values\r\n      {\r\n        columns: [],\r\n        data: excelColumnsDataInfoSection\r\n      },\r\n\r\n      // section 2\r\n      {\r\n        xSteps: 0,\r\n        ySteps: 1,\r\n        columns: dataBodyTitles,\r\n        data: dataBody\r\n      }\r\n    ];\r\n    var tempDate = new Date();\r\n    var date = tempDate.getDate()+ tempDate.toLocaleString('en-us', { month: 'short' })  + tempDate.getFullYear()\r\n\r\n    if (this.props.downloadNow === 0) return \"\";\r\n    else\r\n      return (\r\n        <ExcelFile hideElement={true} filename= {(APPLET_INA?\"INA\":\"PYE\") + \"_Data_\" + date}>\r\n          <ExcelSheet dataSet={multiDataSet} name={APPLET_INA?\"INAd\":\"PYE\" }/>\r\n        </ExcelFile>\r\n      );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport AddIcon from \"@material-ui/icons/Add\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\n//import { ReactComponent as Icon} from './icon.svg';\r\nimport \"./ExcelToolbar.css\";\r\n\r\nconst defaultToolbarStyles = {\r\n    iconButton: {\r\n    },\r\n};\r\n\r\nexport default class ExcelToolbar extends React.Component {\r\n\r\n    handleClick = () => {\r\n        this.props.setExcel();\r\n    };\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n        // console.log(\"classes\", classes)\r\n        const title=<span  style={{fontSize: '12px', marginBottom: '0px', margin: '0px', padding: '0px' }}  >{this.props.excelToolbarText}</span>\r\n        return (\r\n            <React.Fragment>\r\n                <Tooltip placement='left-end' style={{fontSize: '12px', margin: '0px', padding: '0px' }}   title={title}>\r\n                    <IconButton  onClick={this.handleClick}>\r\n                        <svg className=\"icon\" xmlns=\"http://www.w3.org/2000/svg\"   padding= '0px' width=\"30\" height=\"30\"  viewBox=\"0 0 24 24\"><path d=\"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM17 13l-5 5-5-5h3V9h4v4h3z\"/></svg>\r\n                    </IconButton>\r\n                </Tooltip>\r\n            </React.Fragment>\r\n        );\r\n    }\r\n\r\n}\r\n","import React from \"react\";\r\nimport MUIDataTable from \"mui-datatables\";\r\nimport {\r\n  Typography,\r\n  TableRow,\r\n  TableCell,\r\n  Card,\r\n  CardContent\r\n} from \"@material-ui/core\";\r\nimport { createMuiTheme, MuiThemeProvider } from \"@material-ui/core/styles\";\r\nimport {GRID_INTERNAL_CAPTIONS} from '../../definitions/generalDefinitions';\r\n//import DownloadExcel from './DownloadExcel'\r\nimport DownloadExcel from \"./DownloadExcel\";\r\nimport ExcelToolbar from \"./ExcelToolbar\";\r\n//import PrintToolbar from \"./printToolbar\";\r\nimport {\r\n  getInfoIconNotes\r\n} from \"../../definitions/infoIconsDefinitions.js\";\r\nimport { Info } from \"../Info\";\r\n\r\n\r\nexport default class Datatable extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      downloadExcelNow: 0\r\n    };\r\n  }\r\n\r\n\r\n\r\n  getMuiTheme = () =>\r\n    createMuiTheme({\r\n      typography: {\r\n        fontFamily: '\"Trebuchet MS\"',\r\n        fontSize: 11,\r\n        fontWeight: \"100\"\r\n      },\r\n      overrides: {\r\n        MUIDataTable: {\r\n          tableRoot: {\r\n            margin: 0,\r\n            \r\n          },\r\n          paper: {\r\n            boxShadow: \"none\",\r\n            borderBottom:\"1px solid rgb(150, 150, 150)\",\r\n            borderRight:\"1px solid rgb(200, 200, 200)\",\r\n          }\r\n        },\r\n        MuiTableRow: {\r\n          root: {\r\n            //for the body\r\n            height: \"100%\"\r\n          },\r\n          head: {\r\n            //for the head\r\n            height: \"100%\"\r\n          },\r\n          footer: {\r\n            display: \"none\"\r\n          }\r\n        },\r\n        MuiTableCell: {\r\n          head: {\r\n            fontSize: \".8rem\"\r\n          },\r\n          \r\n          sizeSmall: {\r\n            padding: \"8px 3px 8px 3px\"\r\n          }\r\n\r\n        },\r\n        MUIDataTableToolbar: {\r\n          root: {\r\n            paddingLeft: \"0px\"\r\n          },\r\n          titleRoot: {\r\n            fontSize: 24,\r\n            fontWeight: 'bold'\r\n          },\r\n          icon: {\r\n            fontSize: 24\r\n          }\r\n        },\r\n        MUIDataTableBodyCell: {\r\n          root: {\r\n            backgroundColor: \"#FF0000\"\r\n           }\r\n        },\r\n        MUITypography: {\r\n          root: {\r\n            backgroundColor: \"blue\"\r\n           },\r\n           \r\n            body2: {\r\n              color: 'blue',\r\n            },\r\n        },\r\n        MUITablePagination: {\r\n          caption: {\r\n              value: 'blue',\r\n            },\r\n        }\r\n      }\r\n    });\r\n\r\n  setExcel = () => {\r\n    let downloadNow = this.state.downloadExcelNow === 1 ? 0 : 1;\r\n    this.setState({ downloadExcelNow: downloadNow });\r\n  };\r\n\r\n  render() {\r\n    let data = [];\r\n    let dataRow = [];\r\n    let j;\r\n    let i;\r\n\r\n\r\n    \r\n    let unit=65\r\n    let factor=1.3\r\n    if(this.props.dataColTitles.length<4) // for liabs\r\n      unit=95\r\n   \r\n      let divStyle={ width: factor*unit*(this.props.dataColTitles.length),  marginBottom:\"10px\"  }   \r\n    if(factor*unit*this.props.dataColTitles.length>(1/factor)* window.innerWidth)\r\n    {\r\n      unit=((1/factor)*window.innerWidth/(factor*this.props.dataColTitles.length))\r\n      divStyle={ width: factor*unit*(this.props.dataColTitles.length) }   \r\n    \r\n    } \r\n     if(unit<60)\r\n    {\r\n      unit=60 \r\n      divStyle={ width: \"100%\" } \r\n    } \r\n    \r\n    \r\n    let columns = [];\r\n\r\n    if (this.props.dataProjection !== undefined) {\r\n    \r\n      for (i = 0; i < this.props.dataProjection[0].length; ++i) {\r\n        for (j = 0; j < this.props.dataColTitles.length; ++j) {\r\n          if(j<1)\r\n          dataRow.push(this.props.dataProjection[j][i]);\r\n          else\r\n          dataRow.push(this.props.dataProjection[j][i]);\r\n        }\r\n        data.push(dataRow);\r\n        dataRow = [];\r\n      }\r\n\r\n      // build and style header and columns\r\n      let widthCustom =unit;// Math.max(80,6 * this.props.dataColTitles.length); //+'%';\r\n      let styleHeader = {\r\n        backgroundColor: \"#334d7c\",\r\n        color: \"#FFFFFF\",\r\n        textAlign: \"center\",\r\n        width: widthCustom,\r\n        fontWeight: \"bold\",\r\n        position: \"sticky\",\r\n        top: 0,\r\n        zIndex: 0,\r\n      };\r\n\r\n      let customHeader = ({ index, ...column }) => {\r\n        return (\r\n          \r\n          <TableCell key={index} style={styleHeader}>\r\n            {this.props.gridIcons !== undefined && \r\n            this.props.gridIcons[index] !== undefined && <div><Info infoIcon={this.props.gridIcons[index]}/><br/></div>} \r\n          {/* {index===this.props.headerIndex && <div><Info infoIcon={getInfoIconNotes(this.props.language)}/><br/></div>}  */}\r\n           {column.name}\r\n           </TableCell>\r\n        );\r\n      };\r\n\r\n      for (i = 0; i < this.props.dataColTitles.length; ++i) {\r\n        columns.push({\r\n          name: this.props.dataColTitles[i],\r\n          options: {\r\n            filter: false,\r\n            customHeadRender: customHeader\r\n          }\r\n        });\r\n      }\r\n    }\r\n    const captions= GRID_INTERNAL_CAPTIONS[this.props.language]\r\n    const title=<span style={{fontSize: '14px'}}  >{captions.excel}</span>\r\n            \r\n              \r\n    const excelToolbarText=captions.excel \r\n     const options = {\r\n      filter: false,\r\n      filterType: \"dropdown\",\r\n      selectableRows: \"none\",\r\n      responsive: \"scrollMaxHeight\", //this removes horiz\r\n      resizableColumns: true,\r\n      selectableRowsHeader: false,\r\n      viewColumns: false,\r\n      search: false,\r\n      download: false,\r\n      print:false,\r\n      textLabels:{\r\n        pagination: {\r\n          rowsPerPage: captions.rows,\r\n          displayRows: captions.of\r\n        },\r\n        \r\n      },\r\n      \r\n      rowsPerPage: 100,\r\n      setTableProps: () => {\r\n        return {\r\n          padding: \"default\",\r\n          size: \"small\",\r\n          margin: \"0px\"\r\n        };\r\n      },\r\n      downloadOptions: {\r\n        filename: \"INAtableDownload.csv\",\r\n        separator: \",\"\r\n      },\r\n      onDownload: (buildHead, buildBody, columns, data) => {\r\n        //handleCSVDownload2(data, columns);\r\n        this.setExcel();\r\n        //return \"\\uFEFF\" + \"dfof\\n \" + \"go to hell\\n\" + buildHead(headerNames) + buildBody(data);\r\n        return false;\r\n      },\r\n      customRowRender: (data, dataIndex, rowIndex) => {\r\n        let style = {textAlign: \"right\"};\r\n        if (data[0] === \"wwwwwww\") {\r\n          style.backgroundColor = \"green\";\r\n          style.fontSize = \"36px\";\r\n        }\r\n        var rows = [];\r\n\r\n        let i;\r\n        for (i = 0; i < this.props.dataColTitles.length; ++i) {\r\n          let dataI = data[i];\r\n          rows.push(\r\n            <TableCell key={i} style={style}>\r\n              <Typography>{\r\n /* this.formatMoney(\r\n  dataI,\r\n    this.props.gridColumnAligns[i],\r\n    \".\",\r\n    \",\"\r\n  ) } */dataI}</Typography>\r\n            </TableCell>\r\n          );\r\n        }\r\n        // console.log(rows)\r\n        return (\r\n          <TableRow key={rowIndex} style={{ backgroundColor: this.props.specialRow===undefined ? (rowIndex%2?\"#f9f9f9\":\"#e4e5e6\"):(rowIndex===this.props.specialRow?\"#d0d7e6\":(rowIndex%2?\"#f9f9f9\":\"#e4e5e6\")) }}>\r\n            {rows}\r\n          </TableRow>\r\n        );\r\n      },\r\n      customToolbar: () => <ExcelToolbar excelToolbarText={excelToolbarText} setExcel={this.setExcel} />\r\n    };\r\n\r\n   \r\n\r\n    return (\r\n        <div style={divStyle} >\r\n          \r\n        <MuiThemeProvider theme={this.getMuiTheme()}>\r\n          <MUIDataTable\r\n            title={this.props.gridTitle}\r\n            data={data}\r\n            columns={columns}\r\n            options={options}\r\n          />\r\n        </MuiThemeProvider>\r\n        {this.state.downloadExcelNow ===1 && <DownloadExcel\r\n          excelColumnsDataMain={this.props.dataProjection}\r\n          width={\"90\"}\r\n          excelColumnsHeaders={this.props.dataColTitles}\r\n          title={this.props.gridTitle}\r\n          excelColumnsDataInfoSection={this.props.gridColumnsDataExcelInfoSection}\r\n          downloadNow={this.state.downloadExcelNow}\r\n          hideElement={true}\r\n          language={this.props.language}\r\n        />}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport class AddRemove extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.doAdd = this.doAdd.bind(this);\r\n    this.doRemove = this.doRemove.bind(this);\r\n  }\r\n\r\n  doRemove = (id) => {\r\n    if (!this.props.disabled && !this.props.disabledRemove )\r\n      this.props.handleDoRemove(id);\r\n  };\r\n\r\n  doAdd = () => {\r\n    if (!this.props.disabled)\r\n      this.props.handleDoAdd();\r\n  };\r\n\r\n  render() {\r\n    const noRow = 0; //this.props.minComps === 2 ? 2 : 0;\r\n    let className=\"addRemove\";\r\n    let classNameRemove=\"addRemove\";\r\n    if(this.props.disabled)\r\n    {\r\n      className=\"addRemove addRemoveDisabled\";\r\n      classNameRemove=\"addRemove addRemoveDisabled\";\r\n    }  \r\n    if(this.props.disabledRemove)\r\n      classNameRemove=\"addRemove addRemoveDisabledRemove\";\r\n    \r\n\tlet minRows = this.props.minComps;\r\n    const maxRows=this.props.maxRows === undefined?100:this.props.maxRows;\r\n    \r\n    if (minRows === undefined) minRows = 1;\r\n    var returnAR = \"\";\r\n\r\n    \r\n    if (\r\n      (this.props.currentID >= this.props.numberComps ||\r\n      this.props.numberComps === 0) && this.props.currentID < maxRows\r\n    ) {\r\n      returnAR = (\r\n        <span>\r\n          <button className={className} onClick={this.doAdd}>\r\n            +\r\n          </button>\r\n        </span>\r\n      );\r\n      if (\r\n        (minRows > 1 && this.props.currentID > minRows) ||\r\n        this.props.currentID > minRows\r\n      )\r\n        returnAR = (\r\n          <span>\r\n            <button className={className} onClick={this.doAdd}>\r\n              +\r\n            </button>\r\n            <button\r\n              className={classNameRemove}\r\n              onClick={() => {\r\n                this.doRemove(this.props.currentID);\r\n              }}\r\n            >\r\n              -\r\n            </button>\r\n          </span>\r\n        );\r\n    } else if (\r\n      !(this.props.fixedFirstRow === true && this.props.currentID === 1) &&\r\n      (this.props.currentID > minRows || minRows <= 1)\r\n    )\r\n      returnAR = (\r\n        <span>\r\n          <button\r\n            className={classNameRemove}\r\n            onClick={() => {\r\n              this.doRemove(this.props.currentID);\r\n            }}\r\n          >\r\n            -\r\n          </button>\r\n        </span>\r\n      );\r\n    return returnAR;\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport Select from \"react-select\";\r\nimport { MESSAGES } from \"../definitions/generalDefinitions\";\r\nimport { Info } from \"./Info\";\r\nimport { DROPDOWN_WIDE } from \"../definitions/generalDefinitions\";\r\n\r\nexport class DropDown extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      //\tid: this.props.Count,\r\n      //Title: this.props.Title,\r\n      selection: \"?\",\r\n      valueSelected: this.props.defValue,\r\n    };\r\n    this.update = false;\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (nextProps !== this.props && nextProps.defValue !== undefined) {\r\n      this.setState({ valueSelected: nextProps.defValue });\r\n    }\r\n  }\r\n\r\n  handleChange = (event) => {\r\n    this.setState(\r\n      {\r\n        selection: event.label.valueOf(),\r\n        valueSelected: event.label.valueOf(),\r\n      },\r\n      () => this.afterStateUpdate()\r\n    );\r\n    this.update = true;\r\n  };\r\n\r\n  afterStateUpdate() {\r\n    this.props.updateDDown(this.props.id, this.state.selection);\r\n  }\r\n\r\n  getDefault() {\r\n    try {\r\n      return this.props.Values[\r\n        this.props.Values.find((x) => x.label === this.props.defValue).value - 1\r\n      ];\r\n    } catch (error) {\r\n      return this.props.defValue;\r\n    }\r\n  }\r\n\r\n  disableOption = (option) => {\r\n    let disable=this.props.disableOption===undefined?false:(this.props.disableOption[option.value-1])\r\n    return  disable;\r\n    //(\r\n\r\n    //  this.props.disableOption[option.value-1]===true\r\n      /* (this.props.Title === \"Member\" || this.props.Title === \"Membre\") &&\r\n      (option.label === \"Client\" ||\r\n        (this.props.hasSurivor &&\r\n          (option.label === \"Spouse\" || option.label === \"Conjoint\"))) */\r\n    //);\r\n  };\r\n\r\n  render() {\r\n    let styleDD = \"dropDown\";\r\n    if (this.props.width === DROPDOWN_WIDE) styleDD = \"dropDown dropDown2\";\r\n    const title = this.props.Title; // this.state.Title;\r\n    // console.log(this.props.Title)\r\n    const customStyles = {\r\n      control: (base) => ({\r\n        ...base,\r\n        height: 35,\r\n        minHeight: 35,\r\n        backgroundColor: \"#e9eef1\",\r\n        \"&:hover\": {\r\n          backgroundColor: \"#d6e5ee\",\r\n        },\r\n      }),\r\n    };\r\n\r\n    const taxCredit =\r\n      this.getDefault() === this.props.unlistedValue ? true : false;\r\n    var charOp = [];\r\n    charOp.push({\r\n      label: this.props.unlistedValue,\r\n      value: 1,\r\n    });\r\n\r\n    let selectComponent = (\r\n      <Select\r\n        isSearchable={true}\r\n        onfocus={this.oc}\r\n        styles={customStyles}\r\n        key={this.props.defValue}\r\n        isDisabled={this.props.disable}\r\n        value={this.getDefault()}\r\n        id={this.props.id}\r\n        onChange={this.handleChange}\r\n        options={this.props.Values}\r\n        isOptionDisabled={(option) => this.disableOption(option)}\r\n      />\r\n    );\r\n\r\n    if (taxCredit === true)\r\n      selectComponent = (\r\n        <Select\r\n          isSearchable={true}\r\n          styles={customStyles}\r\n          key={this.props.defValue}\r\n          isDisabled={false}\r\n          value={charOp[0]}\r\n          id={this.props.id}\r\n          options={charOp}\r\n        />\r\n      );\r\n\r\n    if (this.props.unlistedGreyedOption !== undefined)\r\n      selectComponent = (\r\n        <Select\r\n          isSearchable={true}\r\n          styles={customStyles}\r\n          key={this.props.defValue}\r\n          isDisabled={true}\r\n          value={this.props.unlistedGreyedOption[0]}\r\n          id={this.props.id}\r\n          options={this.props.unlistedGreyedOption}\r\n        />\r\n      );\r\n\r\n    // console.log(this.props.infoIcon)\r\n    return (\r\n      <div>\r\n        <div className={styleDD} key={this.props.defValue}>\r\n          <div className=\"controlTitle\">\r\n            {title}\r\n            {/* {checkInfo===true?<Info iconName={gov!==-1 || idM===\"infoOther\"?\"infoRed.png\":\"info.png\"}  id={idM} msg={msg} popupRight={idM===\"infoOther\"||idM===\"infogov\"?true:false}/>:''} */}\r\n            {this.props.infoIcon !== undefined ? (\r\n              <Info infoIcon={this.props.infoIcon} zIndex={999} /> //id={this.props.infoIcon.infoID} msg={this.props.infoIcon.infoText}  popupRight={this.props.infoIcon.popupRight}  iconName={this.props.infoIcon.infoAlert? \"infoRed.png\":\"info.png\"} />\r\n            ) : (\r\n              \"\"\r\n            )}\r\n          </div>\r\n\r\n          {selectComponent}\r\n          {/* <Select  isSearchable={false} onfocus={this.oc} styles={customStyles} key={this.state.valueSelected} isDisabled={this.props.disable} value={this.getDefault()} id={this.props.id} onChange={this.handleChange} options={this.props.Values} isOptionDisabled={(option)=>this.disableOption(option)} />\r\n\t\t\t\t\t{taxCredit===true&&<Select  isSearchable={false} onfocus={this.oc} styles={customStyles} key={this.state.valueSelected} isDisabled={true} value={charOp[0]} id={this.props.id} onChange={this.handleChange} options={charOp}  />} */}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","export const ASSET_TAX_TYPE_PRINCIPAL_RES = 0;\r\nexport const ASSET_TAX_TYPE_REAL_ESTATE = 1;\r\nexport const ASSET_TAX_TYPE_STOCKS = 2;\r\nexport const ASSET_TAX_TYPE_SMALL_BUS = 3;\r\nexport const ASSET_TAX_TYPE_RRSP = 4;\r\nexport const ASSET_TAX_TYPE_INTEREST = 5;\r\nexport const ASSET_TAX_TYPE_OTHER = 6;\r\n\r\n\r\nexport const ASSET_TAX_TYPE_COUNT = 7;\r\n\r\n\r\nexport const OUTPUTTEXTEP = {\r\n  en: {\r\n    pg1T: \"Protecting Your Estate\",\r\n    pg1P1: \"Designed for: \",\r\n    pg1P2: \"Designed by: \",\r\n    pg1P3: \"Date: \",\r\n    pg1P4: \"Province: \",\r\n\r\n    pg2T: \"Introduction\",\r\n    pg2Paragraphs: [\r\n      \"Throughout your lifetime, your success has allowed you to accumulate assets beyond those that you will need to provide for an enjoyable retirement. The ownership of some of these assets will result in a tax liability upon your death (or the death of your spouse). These assets can be divided into three groups: \",\r\n      \"First, assets of a capital nature. The current Canadian tax law provides for the deemed disposition of your capital assets on your death at fair market value, and any increase in value over the cost (the tax term is Adjusted Cost Base) is taxed as a capital gain. The most common assets in this category are:\",\r\n      \"Shares in private or public companies\",\r\n      \"Second home or vacation properties\",\r\n      \"Second, assets that generally produce income on your death. The most common assets in this category are:\",\r\n      \"Registered assets, RRSPs or RRIFs\",\r\n      \"Assets that are taxed as income such as interest bearing assets, GICs or money market funds\",\r\n      \"Third, are assets that are either fully tax paid or do not attract tax on death. The most common of these are:\",\r\n      \"Non-taxable assets such as cash and TFSAs\",\r\n      \"Principal residence\",\r\n      \"The tax free proceeds from a life insurance policy\",\r\n    ],\r\n\r\n    pg3T: \"Your Financial Situation\",\r\n    pg3P1:\r\n      \"Your current balance sheet and estimated net worth are summarized below. In order to calculate your future tax liability it is necessary to project the growth in the value of your assets going forward. (See Appendix for details.)\",\r\n    pg3TabT: \"Assets\",\r\n    pg3TabRTot: \"Total Assets Available\",\r\n    pg3Tab2T: \"Liabilities\",\r\n    pg3Tab2RTot: \"Total\",\r\n    pg3Tab2NW: \"Net Worth\",\r\n\r\n    pg3T2: \"Your Growing Tax Liability\",\r\n    pg3P2:\r\n      \"As the value of your assets grow so does the tax liability that your estate will incur upon death. To project this liability, we have assumed the following asset growth rates:\",\r\n    pg3P3: \"\",\r\n    pg3Tab3R1C1: \"Assets\",\r\n    pg3Tab3R1C2: \"Growth Rate\",\r\n    pg3Tab3R1C3: \"Tax Liability Today\",\r\n    pg3Tab3R1C4: \"Tax Liability Life Exp. + 3*\",\r\n\r\n    pg3Tab3R2C1: \"Real Estate (Non-Principal)\",\r\n    pg3Tab3R2C2: \"\",\r\n    pg3Tab3R2C3: \"\",\r\n    pg3Tab3R2C4: \"\",\r\n\r\n    pg3Tab3R3C1: \"Stocks & Bonds\",\r\n    pg3Tab3R3C2: \"\",\r\n    pg3Tab3R3C3: \"\",\r\n    pg3Tab3R3C4: \"\",\r\n\r\n    pg3Tab3R4C1: \"Small Business Shares\",\r\n    pg3Tab3R4C2: \"\",\r\n    pg3Tab3R4C3: \"\",\r\n    pg3Tab3R4C4: \"\",\r\n\r\n    pg3Tab3R5C1: \"RRSP/RRIF\",\r\n    pg3Tab3R5C2: \"\",\r\n    pg3Tab3R5C3: \"\",\r\n    pg3Tab3R5C4: \"\",\r\n\r\n    pg3Tab3R6C1: \"Interest Bearing\",\r\n    pg3Tab3R6C2: \"\",\r\n    pg3Tab3R6C3: \"\",\r\n    pg3Tab3R6C4: \"\",\r\n\r\n    pg3Tab3R7C1: \"Other\",\r\n    pg3Tab3R7C2: \"\",\r\n    pg3Tab3R7C3: \"\",\r\n    pg3Tab3R7C4: \"\",\r\n\r\n    pg3Tab3R8C1: \"Total\",\r\n    pg3Tab3R8C2: \"\",\r\n    pg3Tab3R8C3: \"\",\r\n    pg3Tab3R8C4: \"\",\r\n    pg3P4:\" * Tax liability is estimated based on today's  personal income tax rate and current income tax legislation\",\r\n    pg3P5:\" ** Please see assumptions in Appendix for withdrawals of amounts from RRIF as they factor into this calculation\",\r\n    pg4T: \"Future Value of Your Estate\",\r\n    pg4P1:\r\n      \"Using the growth rate and income tax assumptions, this chart shows the total value of your estate in the future and the corresponding tax liability on death that would need to be funded for each year going forward.\",\r\n    pg4GT:\"Estate Value & Tax Liability\",\r\n    pg4P2: \" * Life Expectancy is slightly shaded in the bar graph (year: \",\r\n    pg4P3:\r\n      \"Your future tax liability grows from $X1 today to $X2 at life expectancy plus 3 years, and will need to be funded upon death.\",\r\n\r\n    pg5T: \"Estate Protection Alternatives\",\r\n    pg5Paragraphs: [\r\n      \"Many people want to keep their estate intact to pass on to their heirs.  But what is the best method to fund this tax liability upon your death so that your assets can be passed to your heirs unencumbered?\",\r\n      \"Typically, there are four options to provide the liquidity to pay taxes that come due upon death:\",\r\n      \"Liquidate assets \",\r\n      \"Borrow funds, which usually means using assets as security\",\r\n      \"Create a cash reserve by systematically saving during your lifetime\",\r\n      \"Transfer the risk by purchasing life insurance in advance\",\r\n      \"Some of the advantages and disadvantages to each of these methods are:\",\r\n      \"Liquidate assets -  Business cycles and the state of the markets are critical in the value of an asset. You have no way of knowing what this will be at your death. Further, the sale of assets by an estate often signals to a purchaser that there is a degree of urgency, which does not help the seller realize full value.\",\r\n      \"Borrow Funds -  In estate situations, the main objective is usually to distribute the assets to the beneficiaries.  Borrowing against the assets, which will likely require pledging them as security, makes this more difficult. Further, it is not possible to predict the market conditions at the time of death. Financial institutions go through cycles, as do loan rates. \",\r\n      \"Create a cash reserve - In the context of an estate situation a cash reserve is not a practical option as you do not know when death will occur and whether there will be ample cash flow at that time.\",\r\n      \"Transfer the risk by purchasing life insurance -  Life insurance, purchased in advance, removes many of the risks associated with funding the tax liability upon death. The death benefit provides liquidity at exactly the time it is needed, and in Canada it is paid tax-free to the named beneficiary.\",\r\n    ],\r\n    pg5Plast:\r\n      \"The most practical, and cost effective, method to transfer the risk of funding a tax liability is to purchase life insurance.\",\r\n\r\n    pg6T: \"Using Life Insurance to Preserve Your Estate\",\r\n    pg6Paragraphs1: [\r\n      \"A permanent life insurance policy can be a good way to provide for this future tax liability. Life insurance removes many of the financial risks associated with a premature death. It provides the financial assistance when it is needed, upon the death of the life insured. \",\r\n      \"The type of life insurance that is most appropriate for this need is permanent insurance, because coverage stays in place until death, no matter the age. There are three types of permanent cash value life insurance coverage:\",\r\n      \"Universal Life\",\r\n      \"Whole Life\",\r\n      \"Hybrid Life\",\r\n      \"Cash values are made up of accumulated capital within the policy's tax deferred accumulation fund including any guaranteed cash surrender values that are offered to the policyowner by the insurance company upon cancellation of the contract. Depending on the type of policy the total cash value, including the guaranteed portion, may be accessed by the policyowner through a number of different methods.\",\r\n      \"One of the challenges facing the purchase of insurance is that the tax liability changes over time. Insurance policies can be custom designed to meet your unique situation by matching the death benefit as closely as possible to the need for cash to pay tax liabilities at the time of death. \",\r\n    ],\r\n    pg6Paragraphs2: [\r\n      \"This is a hybrid product that is customized to address your growing estate liability insurance needs. A hybrid life insurance policy offers a unique combination of the best elements of traditional whole life and universal life insurance:\",\r\n      \"Cost of insurance is guaranteed not to increase\",\r\n      \"Death benefit is a combination of the base insurance amount, additional paid up coverage and the value of investments\",\r\n      \"Policy has contractually guaranteed cash values\",\r\n      \"Additional funds, above the cost of insurance, may be deposited\",\r\n      \"The funds are invested at the discretion of the policy owner (not the insurance company) and include these options: fixed income, stock market index accounts, mutual fund mirrored accounts and smoothed return investment account\",\r\n    ],\r\n\r\n    pg7T: \"Summary\",\r\n    pg7P1:\r\n      \"The best method of covering a future tax liability upon death is to purchase life insurance, which effectively transfers the risk away from the estate. Not only does it give you peace of mind, it also outperforms other alternative methods in terms of financial cost.\",\r\n    pg8T: \"Appendix\",\r\n    pg8P1:\r\n      \"Detailed tax liability projections for all asset categories\",\r\n    pg8P2: \"Detailed tax liability projections by individual asset category:\",\r\n    pg8O1: \"Hide\",\r\n    pg8O2: \"Show\",\r\n\r\n    pgFooter: \"See Some Important Notes at the end of this presentation.\",\r\n\r\n    pg9T: \"Some Important Notes\",\r\n    pg9P1:\r\n      \"This presentation is for general information purposes. The information contained in this presentation must not be taken or relied upon by the reader as legal, accounting, taxation or actuarial advice. For these matters readers should seek independent professional advice. Please refer to insurance company illustrations, policy contracts and information folders regarding any insurance matters referred to in this presentation.\",\r\n    pg9P2:\r\n      \"Any tax calculations are provided as examples only and are based on the personal income tax rates and income tax legislation in effect on the date of the presentation. It is assumed that the taxpayer is a Canadian resident and not a US citizen.\",\r\n\r\n      graphsT1:\"Estate Liability breakdown Today and at Life Expectancy plus 3 years:\",\r\n      graphsT2:\"Estate Liability Today\",\r\n      graphsT3:\"Estate Liability at Life Expectancy +3\",\r\n      graphsL1:\"Liabilities\",\r\n      graphsL2:\"Taxes: RRSP/RRIF\",\r\n      graphsL3:\"Taxes: Capital Gains\",\r\n      graphsL4:\"Taxes: As Income\",\r\n      graphsL5:\"Taxes: Dividend\",\r\n      graphs2L1:\"Future Insurance Needs\",\r\n      graphs2L2:\"Life Expectancy\",\r\n      graphsTaxes:\"Taxes: \",\r\n      graphsLeakageT1: \"Estate Leakage Today and at Life Expectancy plus 3 years:\",\r\n      graphsLeakageT2: \"Estate Leakage Today\",\r\n      graphsLeakageT3: \"Estate Leakage at Life Expectancy +3\",\r\n      graphsLeakage1: \"Net Estate Value\",\r\n      graphsLeakage2: \"Tax Liability\",\r\n      graphsLeakage3: \"Other Liabilities\",\r\n      \r\n  },\r\n  fr:  {\r\n        pg1T: \"Protection de votre patrimoine\",\r\n    pg1P1: \"Prpar pour : \",\r\n    pg1P2: \"Prpar par : \",\r\n    pg1P3: \"Date : \",\r\n    pg1P4: \"Province : \",\r\n\r\n    pg2T: \"Introduction\",\r\n    pg2Paragraphs: [\r\n      \"Tout au long de votre vie, votre russite vous a permis d'accumuler plus d'actifs que ce dont vous aurez besoin pour vous assurer une retraite agrable. La proprit de certains de ces actifs entranera une obligation fiscale  votre dcs (ou au dcs de votre conjoint). Ces actifs se divisent en trois catgories : \",\r\n      \"Premirement, les immobilisations. La Loi de l'impt sur le revenu du Canada prvoit actuellement une disposition prsume de vos biens en immobilisation  la juste valeur marchande  votre dcs, et toute augmentation de la valeur par rapport au cot d'acquisition (le terme fiscal est  prix de base rajust ) sera impose comme un gain en capital. Les actifs les plus courants dans cette catgorie sont les suivants :\",\r\n      \"Actions de socits publiques ou fermes\",\r\n      \"Rsidences secondaires ou de vacances\",\r\n      \"Deuximement, les actifs qui produisent gnralement des revenus  votre dcs. Les actifs les plus courants dans cette catgorie sont les suivants :\",\r\n      \"Actifs enregistrs, REER ou FERR\",\r\n      \"Actifs imposs en tant que revenus, tels que les actifs porteurs d'intrts, les CPG ou les fonds du march montaire\",\r\n      \"Troisimement, les actifs totalement librs d'impt ou qui ne sont pas imposables au dcs. Les actifs les plus courants dans cette catgorie sont les suivants :\",\r\n      \"Actifs non imposables, tels que les liquidits et les CELI\",\r\n      \"Rsidence principale\",\r\n      \"Capital dcs libre d'impt au titre d'une police d'assurance vie\",\r\n    ],\r\n\r\n    pg3T: \"Votre situation financire\",\r\n    pg3P1:\r\n      \"Votre bilan actuel et la valeur nette approximative de vos actifs sont rsums ci-dessous. Afin de calculer l'impt que vous aurez  payer, il est ncessaire de prvoir la croissance future de vos actifs. (Voir les projections dtailles en annexe.)\",\r\n    pg3TabT: \"Actifs\",\r\n    pg3TabRTot: \"Total des actifs disponibles\",\r\n    pg3Tab2T: \"Passifs\",\r\n    pg3Tab2RTot: \"Total\",\r\n    pg3Tab2NW: \"Valeur nette\",\r\n\r\n    pg3T2: \"Augmentation de votre obligation fiscale\",\r\n    pg3P2:\r\n      \"L'obligation fiscale  laquelle sera assujetti votre patrimoine  votre dcs augmente proportionnellement  la valeur de vos biens. Pour prvoir cette obligation, nous avons utilis les hypothses de taux de croissance suivantes :\",\r\n    pg3P3: \"\",\r\n    pg3Tab3R1C1: \"Actifs\",\r\n    pg3Tab3R1C2: \"Taux de croissance\",\r\n    pg3Tab3R1C3: \"Obligation fiscale actuelle\",\r\n    pg3Tab3R1C4: \"Obligation fiscale  l'esprance de vie, plus 3 ans*\",\r\n\r\n    pg3Tab3R2C1: \"Biens immobiliers (non principaux)\",\r\n    pg3Tab3R2C2: \"\",\r\n    pg3Tab3R2C3: \"\",\r\n    pg3Tab3R2C4: \"\",\r\n\r\n    pg3Tab3R3C1: \"Actions et obligations\",\r\n    pg3Tab3R3C2: \"\",\r\n    pg3Tab3R3C3: \"\",\r\n    pg3Tab3R3C4: \"\",\r\n\r\n    pg3Tab3R4C1: \"Actions de petites entreprises\",\r\n    pg3Tab3R4C2: \"\",\r\n    pg3Tab3R4C3: \"\",\r\n    pg3Tab3R4C4: \"\",\r\n\r\n    pg3Tab3R5C1: \"REER/FERR**\",\r\n    pg3Tab3R5C2: \"\",\r\n    pg3Tab3R5C3: \"\",\r\n    pg3Tab3R5C4: \"\",\r\n\r\n    pg3Tab3R6C1: \"Actifs porteurs d'intrts\",\r\n    pg3Tab3R6C2: \"\",\r\n    pg3Tab3R6C3: \"\",\r\n    pg3Tab3R6C4: \"\",\r\n\r\n    pg3Tab3R7C1: \"Autres\",\r\n    pg3Tab3R7C2: \"\",\r\n    pg3Tab3R7C3: \"\",\r\n    pg3Tab3R7C4: \"\",\r\n\r\n    \r\n    pg3Tab3R8C1: \"Total\",\r\n    pg3Tab3R8C2: \"\",\r\n    pg3Tab3R8C3: \"\",\r\n    pg3Tab3R8C4: \"\",\r\n\r\n    pg3P4:\r\n      \" * L'obligation fiscale est projete en utilisant votre taux d'imposition personnel actuel et la loi de l'impt sur le revenu courante\",\r\n    pg3P5:\r\n      \" ** Veuillez consulter en annexe les hypothses relatives aux retraits de montants du FERR, puisqu'ils sont pris en compte dans ce calcul\",\r\n\r\n    pg4T: \"Valeur future de votre patrimoine\",\r\n    pg4P1:\r\n          \"Selon les taux de croissance et d'imposition prsums, le tableau ci-dessous prsente la valeur totale future de votre patrimoine et l'obligation fiscale au dcs qu'il faudrait financer pour chaque anne  venir.\",\r\n    pg4GT:\"Valeur du patrimoine et obligation fiscale\",\r\n    pg4P2: \" * L'esprance de vie est lgrement ombrage dans le graphique  barres (anne: \",\r\n    pg4P3:\r\n      \"Votre obligation fiscale future passe de X1 $ aujourd'hui  X2 $  l'esprance de vie plus 3 ans, et devra tre finance au dcs.\",\r\n\r\n    pg5T: \"Options de protection du patrimoine\",\r\n    pg5Paragraphs: [\r\n      \"Beaucoup de gens veulent garder leur patrimoine intact pour le transmettre  leurs hritiers.  Mais quel est le meilleur moyen de financer l'obligation fiscale qui en dcoule  au dcs afin que leurs actifs puissent tre transmis sans encombre  leurs hritiers?\",\r\n      \"En rgle gnrale, il y a quatre moyens d'obtenir les liquidits ncessaires pour payer les impts exigibles au dcs :\",\r\n      \"Liquider les actifs\",\r\n      \"Emprunter de l'argent, ce qui signifie gnralement utiliser des actifs en garantie\",\r\n      \"Crer une rserve de liquidits en pargnant de faon systmatique tout au long de sa vie\",\r\n      \"Transfrer le risque en souscrivant une assurance vie  l'avance\",\r\n      \"Voici certains des avantages et inconvnients de chacune de ces options :\",\r\n      \"Liquider les actifs - Les cycles conomiques et l'tat des marchs sont dterminants pour la valeur d'un actif. Vous n'avez aucun moyen de savoir ce qu'elle sera  votre dcs. En outre, la vente d'actifs par les ayants droit indique souvent  un acheteur qu'il y a une certaine urgence, ce qui n'aide pas le vendeur  en obtenir la pleine valeur.\",\r\n      \"Emprunter de l'argent -  En planification successorale, l'objectif principal est gnralement de distribuer les actifs aux bnficiaires. Emprunter de l'argent en cdant des actifs en garantie rend la tche plus difficile. En outre, il n'est pas possible de prvoir les conditions du march au moment du dcs. Les institutions financires connaissent des cycles, tout comme les taux d'intrt sur les prts. \",\r\n\"Crer une rserve de liquidits - en planification successorale, une rserve de liquidits n'est pas une option pratique, puisque vous ne savez pas quand le dcs surviendra et si,  ce moment-l, il y aura assez de liquidits.\",\r\n      \"Transfrer le risque en souscrivant une assurance vie -  la souscription  l'avance d'une assurance vie permet d'liminer une grande partie des risques associs au financement de l'obligation fiscale au dcs. Le capital dcs procure des liquidits au moment mme o on en a besoin. Au Canada, il est vers au bnficiaire en franchise d'impt.\",\r\n    ],\r\n    pg5Plast:\r\n      \"La souscription d'une assurance vie est la mthode la plus pratique et la plus rentable pour transfrer le risque associ au financement de l'obligation fiscale.\",\r\n\r\n    pg6T: \"Utiliser l'assurance vie pour protger votre patrimoine\",\r\n    pg6Paragraphs1: [\r\n      \"Une police d'assurance vie permanente peut tre un bon moyen de scuriser cette future obligation fiscale. L'assurance vie limine une grande partie des risques financiers associs  un dcs prmatur. Elle fournit l'aide financire ncessaire moment du dcs de l'assur. \",\r\n      \" cette fin, l'assurance permanente est le type d'assurance vie le plus appropri, car la protection reste en vigueur jusqu'au dcs, peu importe l'ge. Il y a trois formules d'assurance vie permanente avec valeur de rachat :\",\r\n      \"Vie universelle\",\r\n      \"Vie entire\",\r\n      \"Vie hybride\",\r\n      \"Les valeurs de rachat comprennent le capital accumul dans le fonds d'accumulation  impt diffr de la police, y compris toute valeur de rachat garantie offerte au titulaire de police par la compagnie d'assurance  la rsiliation du contrat. Selon le type de police, le titulaire peut avoir accs  la valeur de rachat totale, y compris la partie garantie, grce  un certain nombre de mthodes diffrentes.\",\r\n      \"L'une des difficults que pose l'achat d'une assurance est que l'obligation fiscale change au fil du temps. Les polices d'assurance peuvent tre conues sur mesure pour rpondre  votre situation particulire. Pour ce faire, on s'assure que le capital dcs correspond le plus possible aux liquidits ncessaires pour payer l'obligation fiscale au moment du dcs. \",\r\n    ],\r\n    pg6Paragraphs2: [\r\n      \"Il s'agit d'un produit hybride conu sur mesure pour rpondre  vos besoins d'assurance visant  prvoir les obligations croissantes lies  votre patrimoine. Une police d'assurance vie hybride combine de faon unique les meilleurs lments de l'assurance vie entire traditionnelle et de l'assurance vie universelle :\",\r\n      \"Le cot de l'assurance n'augmentera pas\",\r\n      \"Le capital dcs est constitu du montant d'assurance de base, d'une assurance supplmentaire libre et de la valeur des placements\",\r\n      \"La police comprend des valeurs de rachat garanties par le contrat\",\r\n      \"Des fonds supplmentaires, en sus du cot de l'assurance, peuvent tre dposs\",\r\n      \"Les fonds sont investis  la discrtion du titulaire de la police (et non de la compagnie d'assurance) et comprennent les options suivantes : revenu fixe, comptes indiciels d'actions, fonds distincts qui calquent des fonds communs et compte de placement  rendement stabilit\",\r\n    ],\r\n\r\n    pg7T: \"Rsum\",\r\n    pg7P1:\r\n      \"La souscription d'une assurance vie constitue le meilleur moyen de prvoir l'obligation fiscale au dcs. Elle dgage efficacement les ayants droit du risque financier. Non seulement elle vous apporte la tranquillit d'esprit, mais elle surpasse galement les autres mthodes alternatives en terme de cot financier..\",\r\n    pg8T: \"Annexe\",\r\n    pg8P1:\r\n      \"Projections dtailles de l'obligation fiscale pour toutes les catgories d'actifs combines\",\r\n    pg8P2: \"Projections dtailles de l'obligation fiscale par catgorie d'actifs :\",\r\n    pg8O1: \"Cacher\",\r\n    pg8O2: \"Montrer\",\r\n\r\n\r\n    pgFooter: \"Voir les notes importantes  la fin du document.\",\r\n\r\n    pg9T: \"Notes importantes\",\r\n    pg9P1:\r\n      \"Le prsent expos ne comporte que des renseignements gnraux. L'information qui s'y trouve ne doit pas tre considre par le lecteur comme des conseils juridiques, comptables, fiscaux ou actuariels. Pour ces questions, le lecteur devrait consulter un professionnel indpendant. Veuillez vous reporter aux exposs de vente, au libell des contrats et  la documentation des compagnies d'assurance pour obtenir des prcisions sur les questions d'assurance mentionnes dans le prsent document.\",\r\n    pg9P2:\r\n      \"Tous les calculs fiscaux sont fournis  titre d'exemple seulement et sont bass sur les taux d'impt et la Loi de l'impt sur le revenu en vigueur en date de la prsentation. Nous prsumons qu'il s'agit d'un rsident canadien et non pas d'un citoyen amricain.\",\r\n      graphsT1:\"Obligation fiscale aujourd'hui et  l'esprance de vie, plus 3 ans\",\r\n      graphsT2:\"Obligation fiscale aujourd'hui\",\r\n      graphsT3:\"Obligation fiscale  l'esprance de vie, plus 3 ans\",\r\n      graphsL1:\"Passifs\",\r\n      graphsL2:\"Impt: REER/FERR\",\r\n      graphsL3:\"Impt: Gain en capital\",\r\n      graphsL4:\"Impt: sur le revenu\",\r\n      graphsL5:\"Impt: sur dividende\",\r\n      graphs2L1:\"Besoins d'assurance futurs \",\r\n      graphs2L2:\" l'esprance de vie\",\r\n      graphsTaxes:\"Impt: \",\r\n      graphsLeakageT1: \"Rduction du patrimoine aujourd'hui et  l'esprance de vie, plus 3 ans\",\r\n      graphsLeakageT2: \"Rduction du patrimoine aujourd'hui\",\r\n      graphsLeakageT3: \"Rduction du patrimoine  l'esprance de vie, plus 3 ans\",\r\n      graphsLeakage1: \"Valeur successorale nette\",\r\n      graphsLeakage2: \"Obligation fiscale\",\r\n      graphsLeakage3: \"Autres lments de passif\",\r\n  },\r\n\r\n};\r\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAWCAIAAAANYFjGAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAFVSURBVEhLY/z//z/D4ANMUHqQASqH1o8fPyAMDg4OCIM8MEhDaxBHIjzkaQTIiNDRSCQFoEdi7d63yy5+efHlzz+iMygTI4MED0uUPk+zszBUCBWQEYkIZ917/9t1/rNnn/9AJMgAUrwsuxOllARZoXwYoChtUegmIABqBxoC5VAGoM4Cxh2pbprqL/mpQfN/uzaQBLIhgkBDgEZB2JQAqLOA6QnCIBIA3ZFlIcTLDtIOJIFsuMtINQorgDoLmMYhDCJBrKEAlAUDcBFSjcIKoM4iPt9BACSckAFchFSjsAKoWcBMThL4/PMflAUDcBFSjcIKoM4CFjwQBpFg8fkPUBYMwEVINQorgDoLWBhCGESC7I3Pp514BwkhIAlkA0UgUqQahRUgilPlvocUlltAACxR7xbJQzkwQFFxCiyggYZCOWQBSCkP5VAGBnGdCGUOHsDAAAC1IZnmPH6jBwAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAZCAIAAAD8NuoTAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAKjSURBVEhLzZbPahNBHMc3+6dJdpvQkEojvSRYKCJolYrgVYSiFyV49jXEB5AefQMfQIp4EArqA5SKYsFKD6VFqaS0mnbTbDY7s1m/uzPEdt3sziY55HOYzP42M/nkN38znudJk4fMPyeMCdUa2yCyfs73lslk+mVaxqCFHhi9AFQQhI0cgAqDfVmQUbWYDaV0c6+79tnZ2O8dnPgdzs9k7lTl+q2p27WsqqrMjzURYSQtCLmuSwh5/qb9+kuPRy/y5Kb84rGhaZqiKJDj0SQGan3aJzsNenzWc6N/LsiTSylx3m7Rn6cKj0Zxtya9empks37aBHMWoXViee+27ENzgE4AWsGKku6Hbef7kcqjg6nfkFbrBZgJjmZEVhOdAvxUHfwWcgJrX6WN3Q6m4P9ZiCSshbFLdApS5WEAtxuJ9v/AgsAsZG15aDBhLcwnXovFX34u/WXGTakQmz8kZAvt+HMsYS3McV6LA3/Y1zojKbQaLZlpDZMtUQIvlPxRANhgNxFxAmGt2ekUoobm8poAlUKKiRiWWKwIrSwcLrKsVHSbPwqwdJlgRxXct8Jay1VtrpiYMHQOK3Wh7PCAAA+uuuKnUITBw+u5RDP/HFbU+RnlSuGUh2JZWWgvV6eYFg/FMuThExw8xLEty/yzvmsc2tP8RRRLc9bLR7RcLhuGfziKmA15VKMVlnq32221Ws1mc/Wj8n6vyN9d5H7NfHbPLZVKhUKKw2f4GwQaYh+CWbvdNk0TF5v1He3bsX5kaXh7SSfXZq2VRYKLTbFYRJ5GParF6V9sbBvDaXU6HVgigldYdPDI5/O6rudyubFdbARho4m0QQ4l6GshNwBCKAXHrs+oWgA9MOAHUEEw2EJ8UGGwLwsyBi0G6+d8b0wlrZCPJP0F2oqhNNA6qd4AAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAZCAIAAAD8NuoTAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAACFSURBVEhL7dcxDoAgDAVQ6sSN4P6nYhKRdtA42B8YOvy3WBvT/AjRIL33FM9h12AYCxE01mvLt9as2i3nbJUPFxHBWAjGQvzHKqXUWu1m8nQWud7W93fu6azg5xTBWAjGQjAWImisDQeyMUGd0yhGU0SOaRRKH3badk7UOc9pGgUNdEvpAg55Of2PHimJAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAZCAIAAAD8NuoTAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAACBSURBVEhL7dRBCoAgEAVQ9XoRXaFFm04XUl0vmxyRcNUHQYP/FpNFDH/xy4YQTH9cunaGsRA/ibX5Y15Wmem+kTKW3888GypjTeOQZ0P8byFYeQQrj2DlEaw8gpVHMBai01gVKi8b1BXJQR5aa10kB6Uvf1TtS9Q9720aBQ30MOYGI+VMGsZJ3L0AAAAASUVORK5CYII=\"","\r\n// Imports\r\nimport React from 'react';\r\nimport packageJson from '../package.json';\r\n\r\nglobal.appVersion = packageJson.version;\r\n\r\nconst APP_VERSION = global.appVersion;\r\n\r\n// version from response - first param, local version second param\r\nconst semverGreaterThan = (versionA, versionB) => {\r\n  const versionsA = versionA.split(/\\./g);\r\n\r\n  const versionsB = versionB.split(/\\./g);\r\n  while (versionsA.length || versionsB.length) {\r\n    const a = Number(versionsA.shift());\r\n\r\n    const b = Number(versionsB.shift());\r\n    // eslint-disable-next-line no-continue\r\n    if (a === b) continue;\r\n    // eslint-disable-next-line no-restricted-globals\r\n    return a > b || isNaN(b);\r\n  }\r\n  return false;\r\n};\r\n\r\nclass CacheBuster extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      loading: true,\r\n      isLatestVersion: false,\r\n      refreshCacheAndReload: () => {\r\n        console.log('Clearing cache and hard reloading...')\r\n        if (caches) {\r\n          // Service worker cache should be cleared with caches.delete()\r\n          caches.keys().then(function(names) {\r\n            for (let name of names) caches.delete(name);\r\n          });\r\n        }\r\n\r\n        // delete browser cache and hard reload\r\n        window.location.reload(true);\r\n      }\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    fetch('/meta.json')\r\n      .then((response) => response.json())\r\n      .then((meta) => {\r\n        const latestVersion = meta.version;\r\n        const currentVersion = global.appVersion;\r\n\r\n        const shouldForceRefresh = semverGreaterThan(latestVersion, currentVersion);\r\n        if (shouldForceRefresh) {\r\n          console.log(`We have a new version - ${latestVersion}. Should force refresh`);\r\n          this.setState({ loading: false, isLatestVersion: false });\r\n        } else {\r\n          console.log(`You already have the latest version - ${latestVersion}. No cache refresh needed.`);\r\n          this.setState({ loading: false, isLatestVersion: true });\r\n        }\r\n      });\r\n  }\r\n  render() {\r\n    const { loading, isLatestVersion, refreshCacheAndReload } = this.state;\r\n    return this.props.children({ loading, isLatestVersion, refreshCacheAndReload });\r\n  }\r\n}\r\n\r\nexport {CacheBuster, APP_VERSION};","import React, { Component } from 'react';\r\nimport { NA } from './components/NA';\r\nimport './App.css';\r\nimport {CacheBuster} from \"./CacheBuster\"\r\n\r\nexport default class App extends Component {\r\n\tdisplayName = \"PPI Toolkit Direct\";\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = { language: \"en\", loading:true };\r\n\t\tthis.langText = \"English\";\r\n\t}\r\n\r\n\tchangeLang = () => {\r\n\t\tvar data2 = this.state;\r\n\t\tvar oldLang = this.state.language;\r\n\t\tdata2.language = this.state.language === \"en\" ? \"fr\" : \"en\";\r\n\t\tthis.langText = this.state.language === \"en\" ? \"Franais\" : \"English\";\r\n\t\tthis.setState({ data2, loading: false });// () => this.updateDataLang(oldLang));\r\n\t}\r\n\t\r\n\trender() {\r\n\r\n\t\treturn (\r\n\t\t\t<div> \r\n\t\t\t\t<NA />\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\t\t);\r\n\t  /* return (\r\n      {/* <CacheBuster>\r\n        {({ loading, isLatestVersion, refreshCacheAndReload }) => {\r\n          if (loading) return null;\r\n          if (!loading && !isLatestVersion) {\r\n            // You can decide how and when you want to force reload\r\n            refreshCacheAndReload();\r\n          } \r\n\r\n          return (*/}\r\n\t\t/* \t\t\t<NA />\r\n\t\t  \t\r\n          );\r\n\t\t */\r\n     /*     }}\r\n      </CacheBuster>\r\n    ); \r\n \r\n\r\n\t}*/\r\n}\r\n","\r\nimport './index.css';\r\nimport './components/NA.css';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport App from './App';\r\n//import registerServiceWorker from './registerServiceWorker';\r\n\r\nconst baseUrl = document.getElementsByTagName('base')[0].getAttribute('href');\r\nconst rootElement = document.getElementById('root');\r\n\r\nReactDOM.render(\r\n  \r\n  <BrowserRouter basename={baseUrl}>\r\n    <App />\r\n  </BrowserRouter>,\r\n  rootElement);\r\n\r\n//registerServiceWorker();\r\n","import { numFormat, cleanFormat, formatMoney2 } from \"../utils/helper\";\r\nimport { getAssetGridValues } from \"./assetGridProjections\";\r\nimport { setUIDataToAPI } from \"./dataExchange\";\r\nimport _ from \"lodash\";\r\n\r\nimport {\r\n  COLUMN_TITLES,\r\n  TITLES,\r\n  INCOMESOURCES,\r\n  MEMBER,\r\n} from \"../definitions/generalDefinitions\";\r\nimport {\r\n  getInfoExcelcapFund,\r\n  getInfoExcelAllAfterTax,\r\n  getInfoBOYEOY,\r\n  getInfoAvgGrowth\r\n} from \"../definitions/infoIconsDefinitions\";\r\n\r\nimport {\r\n  ASSETS,\r\n  ASSET_TAX,\r\n  CONTROLTITLE,\r\n  TOTALS,\r\n  QUOTE_SPOUSE,\r\n  QUOTE_CLIENT,\r\n  ASSET_YEAR_TODAY,\r\n  FIRST_BENEFICIARY_ID,\r\n} from \"../definitions/generalDefinitions\";\r\n\r\nimport {\r\n  ASSET_TAX_TYPE_PRINCIPAL_RES,\r\n  ASSET_TAX_TYPE_REAL_ESTATE,\r\n  ASSET_TAX_TYPE_STOCKS,\r\n  ASSET_TAX_TYPE_SMALL_BUS,\r\n  ASSET_TAX_TYPE_RRSP,\r\n  ASSET_TAX_TYPE_INTEREST,\r\n  ASSET_TAX_TYPE_OTHER,\r\n  ASSET_TAX_TYPE_COUNT,\r\n} from \"../definitions/outputDefinitionsEP\";\r\n\r\nconst COLUMN_YEAR = 0;\r\nconst COLUMN_AGE = 1;\r\nconst COLUMN_INCOME_NEED = 2;\r\nconst COLUMN_CPP = 3;\r\nconst COLUMN_SURVIVOR_INCOME = 4;\r\nconst COLUMN_OTHER_INCOME = 5;\r\nconst COLUMN_TOTAL_INCOME = 6;\r\nconst COLUMN_TOTAL_ASSET_LIAB = 7;\r\nconst COLUMN_SHORTFALL = 8;\r\nconst COLUMN_INSURANCE_NEED = 9;\r\nconst COLUMN_FUND = 10;\r\n\r\nconst EP_SHEET_HEADERS_AVG_GROWTH = 11;\r\n\r\n// INA\r\n\r\nfunction INAFullSpreadsheetData(\r\n  cols,\r\n  insNeed,\r\n  dataInput,\r\n  dataPCV,\r\n  //Spouse,\r\n  survivors,\r\n  dataNeed,\r\n  dataGov,\r\n  dataShort,\r\n  inflation,\r\n  invRate,\r\n  afterTaxCPP_DB,\r\n  language\r\n) {\r\n  let dataColumns = [];\r\n  let dataColumn = [];\r\n  let noYrs = dataNeed.length;\r\n  const tempDate = new Date();\r\n  const year = tempDate.getFullYear();\r\n\r\n  let dataColumnCapFund = [];\r\n\r\n  let colNo;\r\n  let yr;\r\n  let survivorsIncome = 0;\r\n  let surivorsSalaryProjection = getSurivorsSalaryProjection(\r\n    dataInput,\r\n    noYrs,\r\n    survivors,\r\n    inflation\r\n  );\r\n  let surivorsCashFlowsFromAllSources = dataPCV;\r\n  let survivorsNonGovNonAssetLiabIncomeProjection =\r\n    getSurvivorsNonGovNonAssetLiabIncomeProjections(\r\n      dataInput,\r\n      noYrs,\r\n      //Spouse.avgTaxRate,\r\n      survivors,\r\n      inflation\r\n    );\r\n  //const formatFr = language === \"fr\" ? true : false;\r\n  const decimalChar = language === \"en\" ? \".\" : \",\";\r\n  const thousands = language === \"en\" ? \",\" : \" \";\r\n  const capFundBase = cleanFormat(insNeed, language); //+parseFloat(CPP_DB)\r\n\r\n  //console.log(Spouse);\r\n\r\n  // console.log(surivorsSalaryProjection,survivorsNonGovNonAssetLiabIncomeProjection)\r\n  // for cap fund use first survivor tax rate\r\n  let avgTaxRate = 0;\r\n  let beneficiaryAge = 0;\r\n  if (survivors.length > 0) {\r\n    avgTaxRate = survivors.filter((item) => {\r\n      return item.id === FIRST_BENEFICIARY_ID;\r\n    })[0].avgTaxRate;\r\n    beneficiaryAge = survivors.filter((item) => {\r\n      return item.id === FIRST_BENEFICIARY_ID;\r\n    })[0].Age;\r\n  }\r\n  for (colNo = 0; colNo < cols; colNo++) {\r\n    dataColumn = [];\r\n    for (yr = 0; yr < noYrs; yr++) {\r\n      if (yr === 0)\r\n        dataColumnCapFund[yr] = Math.max(\r\n          0,\r\n          (capFundBase -\r\n            cleanFormat(dataShort[yr] > 0 ? dataShort[yr] : 0, language)) *\r\n            Math.pow(1 + (invRate / 100) * (1 - avgTaxRate / 100), 1)\r\n        );\r\n      else\r\n        dataColumnCapFund[yr] = Math.max(\r\n          0,\r\n          (dataColumnCapFund[yr - 1] -\r\n            cleanFormat(dataShort[yr] > 0 ? dataShort[yr] : 0, language)) *\r\n            Math.pow(1 + (invRate / 100) * (1 - avgTaxRate / 100), 1)\r\n        );\r\n\r\n      if (colNo === COLUMN_YEAR) dataColumn.push(year + yr);\r\n      else if (colNo === COLUMN_AGE) dataColumn.push(beneficiaryAge + yr);\r\n      else if (colNo === COLUMN_INCOME_NEED)\r\n        dataColumn.push(formatMoney2(-dataNeed[yr], 0, language, false));\r\n      //numFormat(dataNeed[yr],  language===\"en\"?false:true, 2, language===\"en\"?\",\":\" \"));\r\n      else if (colNo === COLUMN_CPP)\r\n        dataColumn.push(formatMoney2(dataGov[yr], 0, language, false));\r\n      //numFormat(dataGov[yr],   language===\"en\"?false:true, 2,  language===\"en\"?\",\":\" \"));\r\n      else if (colNo === COLUMN_SURVIVOR_INCOME) {\r\n        survivorsIncome = surivorsSalaryProjection[yr];\r\n        dataColumn.push(formatMoney2(survivorsIncome, 0, language, false)); //numFormat(spouseIncome,   language===\"en\"?false:true, 2, language===\"en\"?\",\":\" \"));\r\n      } else if (colNo === COLUMN_OTHER_INCOME) {\r\n        let otherIncome =\r\n          //Math.round((dataPCV[yr] - surivorsSalaryProjection[yr]) * 100) / 100\r\n          (\r\n            Math.round(\r\n              (parseFloat(survivorsNonGovNonAssetLiabIncomeProjection[yr]) -\r\n                parseFloat(surivorsSalaryProjection[yr])) *\r\n                100\r\n            ) / 100\r\n          ).toFixed(0);\r\n        if (Math.abs(otherIncome) <= 1) otherIncome = 0;\r\n        dataColumn.push(formatMoney2(otherIncome, 0, language, false)); //numFormat(otherIncome,   language===\"en\"?false:true, 2, language===\"en\"?\",\":\" \"));\r\n      } else if (colNo === COLUMN_TOTAL_INCOME)\r\n        dataColumn.push(\r\n          formatMoney2(\r\n            parseFloat(survivorsNonGovNonAssetLiabIncomeProjection[yr]) +\r\n              parseFloat(dataGov[yr]),\r\n            0,\r\n            language,\r\n            false\r\n          )\r\n        );\r\n      //numFormat(dataPCV[yr] + dataGov[yr],   language===\"en\"?false:true, 2, language===\"en\"?\",\":\" \"));\r\n      else if (colNo === COLUMN_TOTAL_ASSET_LIAB)\r\n        dataColumn.push(\r\n          formatMoney2(\r\n            Math.abs(\r\n              dataPCV[yr] -\r\n                parseFloat(survivorsNonGovNonAssetLiabIncomeProjection[yr])\r\n            ) > 1\r\n              ? dataPCV[yr] -\r\n                  parseFloat(survivorsNonGovNonAssetLiabIncomeProjection[yr])\r\n              : 0,\r\n            0,\r\n            language,\r\n            false\r\n          )\r\n        ); //numFormat(dataPCV[yr] + dataGov[yr],   language===\"en\"?false:true, 2, language===\"en\"?\",\":\" \"));\r\n      if (colNo === COLUMN_SHORTFALL)\r\n        dataColumn.push(\r\n          formatMoney2(\r\n            dataShort[yr] > 0 ? dataShort[yr] : 0,\r\n            0,\r\n            language,\r\n            false\r\n          )\r\n          // numFormat(dataShort[yr] > 0 ? dataShort[yr] : 0, false,   language===\"en\"?false:true, 2, language===\"en\"?\",\":\" \")\r\n        );\r\n      else if (colNo === COLUMN_INSURANCE_NEED)\r\n        dataColumn.push(\r\n          yr === 0 ? formatMoney2(capFundBase, 0, language, false) : 0\r\n        );\r\n      //numFormat(insNeed, false,   language===\"en\"?false:true, 2, language===\"en\"?\",\":\" \") : 0);\r\n      else if (colNo === COLUMN_FUND)\r\n        dataColumn.push(\r\n          formatMoney2(dataColumnCapFund[yr], 0, language, false)\r\n        ); //numFormat(0, false,   language===\"en\"?false:true, 2, language===\"en\"?\",\":\" \"));\r\n    }\r\n\r\n    // add CPP DB to other from CPP do this above before formatting\r\n    /* if (colNo === COLUMN_CPP)\r\n      dataColumn[0] = formatMoney2(parseFloat(cleanformat(dataColumn[0])) - parseFloat(afterTaxCPP_DB));\r\n    \r\n    if (colNo === COLUMN_OTHER_INCOME)\r\n      dataColumn[0] = formatMoney2(parseFloat(cleanformat(ddataColumn[0])) - parseFloat(afterTaxCPP_DB)); */\r\n\r\n    dataColumns.push(dataColumn);\r\n\r\n    dataColumn = [];\r\n  }\r\n  return dataColumns;\r\n}\r\n\r\nfunction getSurivorsSalaryProjection(sources, noYrs, survivors, inflation) {\r\n  let totalIncome = Array(noYrs).fill(0);\r\n  let yr;\r\n  // console.log(sources)\r\n\r\n  let avgTaxRate = 0;\r\n  sources.forEach((element) => {\r\n    if (element.sourceTypeKey === INCOMESOURCES.SURVIVORS_INCOME.Key) {\r\n      try {\r\n        avgTaxRate = survivors.filter((item) => {\r\n          return item.id === element.ownerID;\r\n        })[0].avgTaxRate;\r\n      } catch (error) {}\r\n      /* console.log(element,survivors,avgTaxRate) */\r\n      for (yr = 0; yr < noYrs; yr++) {\r\n        totalIncome[yr] +=\r\n          yr >= element.startYear &&\r\n          yr < parseInt(element.startYear) + parseInt(element.duration)\r\n            ? parseFloat(element.amount) *\r\n              (1 - avgTaxRate / 100) *\r\n              Math.pow(1 + inflation / 100, yr)\r\n            : 0;\r\n      }\r\n    }\r\n  });\r\n  for (yr = 0; yr < noYrs; yr++)\r\n    totalIncome[yr] = (Math.round(totalIncome[yr] * 100) / 100).toFixed(0);\r\n\r\n  return totalIncome;\r\n}\r\n\r\nfunction getSurvivorsNonGovNonAssetLiabIncomeProjections(\r\n  sources,\r\n  noYrs,\r\n  //avgTaxRate,\r\n  survivors,\r\n  inflation\r\n) {\r\n  let totalIncome = Array(noYrs).fill(0);\r\n  let yr;\r\n  // console.log(sources)\r\n\r\n  let avgTaxRate = 0;\r\n  sources.forEach((element) => {\r\n    if (\r\n      !(\r\n        element.sourceTypeKey === INCOMESOURCES.GOV_DEATH_BENEFIT.Key ||\r\n        element.sourceTypeKey === INCOMESOURCES.GOV_ORPHANS_BENEFIT.Key ||\r\n        element.sourceTypeKey === INCOMESOURCES.GOV_SURVIVORS_PENSION.Key\r\n      )\r\n    ) {\r\n      // console.log(element.sourceTypeKey)\r\n      try {\r\n        avgTaxRate = survivors.filter((item) => {\r\n          return item.id === element.ownerID;\r\n        })[0].avgTaxRate;\r\n      } catch (error) {}\r\n      for (yr = 0; yr < noYrs; yr++) {\r\n        totalIncome[yr] +=\r\n          yr >= element.startYear &&\r\n          yr < parseInt(element.startYear) + parseInt(element.duration)\r\n            ? parseFloat(element.amount) *\r\n              (1 - avgTaxRate / 100) *\r\n              Math.pow(1 + inflation / 100, yr)\r\n            : 0;\r\n      }\r\n    }\r\n  });\r\n  for (yr = 0; yr < noYrs; yr++)\r\n    totalIncome[yr] = (Math.round(totalIncome[yr] * 100) / 100).toFixed(0);\r\n\r\n  return totalIncome;\r\n}\r\n\r\n// INA spreadsheet\r\nexport function getINAGridData(\r\n  insNeed,\r\n  insNeedRet,\r\n  insNeedLE,\r\n  dataPCV,\r\n  // Spouse,\r\n  Survivors,\r\n  dataNeed,\r\n  dataGov,\r\n  dataShort,\r\n  inflation,\r\n  language,\r\n  invRate,\r\n  Sources,\r\n  afterTaxCPP_DB\r\n) {\r\n  let gridColumnAligns;\r\n  let dataTitle;\r\n  let dataColHeaders;\r\n  let dataColumns;\r\n  let excelDataInfoSection;\r\n  let gridIcons;\r\n\r\n  {\r\n    // spreadsheet\r\n    dataTitle = TITLES[language].appletINA;\r\n    dataColHeaders = INAFullSpreadsheetHeaders(language);\r\n    dataColumns = INAFullSpreadsheetData(\r\n      dataColHeaders.length,\r\n      insNeed,\r\n      Sources,\r\n      dataPCV,\r\n      //    Spouse,\r\n      Survivors,\r\n      dataNeed,\r\n      dataGov,\r\n      dataShort,\r\n      inflation,\r\n      invRate,\r\n      afterTaxCPP_DB,\r\n      language\r\n    );\r\n    gridColumnAligns = new Array(dataColHeaders.length).fill(2);\r\n\r\n    gridIcons = new Array(dataColHeaders.length);\r\n    gridIcons[COLUMN_FUND] = getInfoExcelcapFund(language);\r\n    gridIcons[COLUMN_YEAR] = getInfoExcelAllAfterTax(language);\r\n\r\n    const singleFamily =\r\n      Survivors.filter((client) => client.memberKey === MEMBER.SPOUSE.Key)\r\n        .length === 0;\r\n\r\n    const decimalChar = language === \"en\" ? \".\" : \",\";\r\n    const thousands = language === \"en\" ? \",\" : \" \";\r\n\r\n    if (singleFamily) {\r\n      excelDataInfoSection = [\r\n        [\r\n          COLUMN_TITLES[language].intRate,\r\n          COLUMN_TITLES[language].infRate,\r\n          COLUMN_TITLES[language].surplusCapital,\r\n          COLUMN_TITLES[language].blank,\r\n          COLUMN_TITLES[language].additionalCapitalReq,\r\n          COLUMN_TITLES[language].survivorProtection,\r\n        ],\r\n        [\r\n          invRate.toString() + \"%\",\r\n          inflation.toString() + \"%\",\r\n          parseFloat(afterTaxCPP_DB),\r\n          \"\",\r\n          \"\",\r\n          insNeedRet,\r\n        ],\r\n      ];\r\n    } else {\r\n      excelDataInfoSection = [\r\n        [\r\n          COLUMN_TITLES[language].intRate,\r\n          COLUMN_TITLES[language].infRate,\r\n          COLUMN_TITLES[language].surplusCapital,\r\n          COLUMN_TITLES[language].blank,\r\n          COLUMN_TITLES[language].additionalCapitalReq,\r\n          COLUMN_TITLES[language].survivor65,\r\n          COLUMN_TITLES[language].survivorLE,\r\n        ],\r\n        [\r\n          invRate.toString() + \"%\",\r\n          inflation.toString() + \"%\",\r\n          parseFloat(afterTaxCPP_DB),\r\n          \"\",\r\n          \"\",\r\n          insNeedRet,\r\n          insNeedLE,\r\n        ],\r\n      ];\r\n    }\r\n  }\r\n  return {\r\n    gridTitle: dataTitle,\r\n    dataColTitles: dataColHeaders,\r\n    dataProjection: dataColumns,\r\n    gridColumnsDataExcelInfoSection: excelDataInfoSection,\r\n    gridColumnAligns: gridColumnAligns,\r\n    gridIcons: gridIcons,\r\n  };\r\n}\r\n\r\nfunction INAFullSpreadsheetHeaders(lang) {\r\n  let headers = [];\r\n  let i;\r\n\r\n  for (i = 0; i < COLUMN_TITLES.INA_SHEET_HEADERS[lang].Full.length; ++i) {\r\n    headers.push(COLUMN_TITLES.INA_SHEET_HEADERS[lang].Full[i]);\r\n  }\r\n\r\n  return headers;\r\n}\r\n\r\n// ESTATE PROTECTION\r\nasync function EPFullSpreadsheetData(\r\n  cols,\r\n  noProjectYrs, // + 1,\r\n  input\r\n) {\r\n  let noYrs = noProjectYrs;\r\n  const language = input.Presentations[0].language;\r\n  // const formatFr = language === \"fr\" ? true : false;\r\n  const decimalChar = language === \"en\" ? \".\" : \",\";\r\n  const thousands = language === \"en\" ? \",\" : \" \";\r\n\r\n  let count = 0;\r\n  let dataColumns = new Array(cols).fill(0).map(() => new Array(noYrs).fill(0));\r\n\r\n  const dataNA = await setUIDataToAPI(input);\r\n\r\n  const assetsLength = input.Assets.length;\r\n\r\n  for (let i = 0; i < assetsLength; i++) {\r\n    const element = input.Assets[i];\r\n    const data = await getAssetGridValues(dataNA, element, language, true);\r\n    count += 1;\r\n\r\n    for (let col = 0; col < 2; col++) {\r\n      for (let yr = 0; yr < noYrs; yr++) {\r\n        dataColumns[col][yr] = data.dataProjection[col][yr];\r\n      }\r\n    }\r\n    // year 0 is today, change it\r\n    // dataColumns[0][0]=ASSET_YEAR_TODAY[language].today;\r\n    // dont add up year and age\r\n    for (let col = 2; col < Math.min(cols, data.dataProjection.length); col++) {\r\n      for (let yr = 0; yr < noYrs; yr++) {\r\n        dataColumns[col][yr] =\r\n          parseInt(cleanFormat(dataColumns[col][yr], language)) +\r\n          parseInt(cleanFormat(data.dataProjection[col][yr], language));\r\n      }\r\n    }\r\n    //  console.log(dataColumns)\r\n  }\r\n\r\n  for (let col = 0; col < cols; col++) {\r\n    for (let yr = 0; yr < noYrs; yr++) {\r\n      if (yr === 0)\r\n        dataColumns[2][yr] =\r\n          parseInt(dataColumns[10][yr]) -\r\n          parseInt(dataColumns[4][yr]) -\r\n          parseInt(dataColumns[5][yr]) +\r\n          parseInt(dataColumns[6][yr]) +\r\n          parseInt(dataColumns[7][yr]);\r\n      else dataColumns[2][yr] = dataColumns[10][yr - 1];\r\n\r\n      // average growth\r\n      const ratio =\r\n        -1 +\r\n        (parseFloat(dataColumns[10][yr]) + parseFloat(dataColumns[6][yr])) /\r\n          parseFloat(dataColumns[2][yr]);\r\n      dataColumns[EP_SHEET_HEADERS_AVG_GROWTH][yr] =\r\n        Math.round((ratio + Number.EPSILON) * 10000) / 100;\r\n\r\n      /* dataColumns[EP_SHEET_HEADERS_AVG_GROWTH][yr] =\r\n        Math.round(\r\n          10000 *\r\n            (-1 +\r\n              (parseInt(dataColumns[10][yr]) + parseInt(dataColumns[6][yr])) /\r\n                parseInt(dataColumns[2][yr]))\r\n        ).toFixed(2) /\r\n          100 +\r\n        \" %\"; */\r\n    }\r\n  }\r\n\r\n  for (let col = 0; col < cols; col++) {\r\n    if (col !== EP_SHEET_HEADERS_AVG_GROWTH && col !== 1) {\r\n      for (let yr = 0; yr < noYrs; yr++) {\r\n        dataColumns[col][yr] = formatMoney2(\r\n          dataColumns[col][yr],\r\n          0,\r\n          language,\r\n          false\r\n        );\r\n      }\r\n    } else\r\n      for (let yr = 0; yr < noYrs; yr++) {\r\n        if (col !== 1 && isNaN(dataColumns[col][yr])) dataColumns[col][yr] = 0;\r\n      }\r\n  }\r\n  // year 0 is today, change it\r\n  dataColumns[0][0] = ASSET_YEAR_TODAY[language].today;\r\n  return dataColumns;\r\n}\r\n\r\n// EP spreadsheet\r\nexport async function getEPGridData(noProjectYrs, input) {\r\n  let gridColumnAligns;\r\n  let dataTitle;\r\n  let dataColHeaders;\r\n  let dataColumns;\r\n  let excelDataInfoSection;\r\n  let gridIcons;\r\n\r\n  // spreadsheet\r\n  const language = input.Presentations[0].language;\r\n\r\n  dataTitle = TITLES[language].appletEP;\r\n  dataColHeaders = EPFullSpreadsheetHeaders(language);\r\n\r\n  dataColumns = await EPFullSpreadsheetData(\r\n    dataColHeaders.length,\r\n    noProjectYrs + 1, // + 1,\r\n    input\r\n  );\r\n  gridColumnAligns = new Array(dataColHeaders.length).fill(2);\r\n  gridIcons = new Array(dataColHeaders.length);\r\n  dataColHeaders.forEach((item) => {\r\n    if (item === COLUMN_TITLES[language].EOYBalance)\r\n      gridIcons[2] = getInfoBOYEOY(\r\n        // boy\r\n        language\r\n      );\r\n    gridIcons[dataColHeaders.length - 3] = gridIcons[2]; //eoy\r\n    if (item === COLUMN_TITLES[language].AvgGrowth)\r\n      gridIcons[dataColHeaders.length-2] = getInfoAvgGrowth(  // boy\r\n        language\r\n      );\r\n  });\r\n  const decimalChar = language === \"en\" ? \".\" : \",\";\r\n  const thousands = language === \"en\" ? \",\" : \" \";\r\n\r\n  return {\r\n    gridTitle: dataTitle,\r\n    dataColTitles: dataColHeaders,\r\n    dataProjection: dataColumns,\r\n    gridIcons: gridIcons,\r\n  };\r\n}\r\n\r\nfunction EPFullSpreadsheetHeaders(lang) {\r\n  let headers = [];\r\n  let i;\r\n\r\n  for (i = 0; i < COLUMN_TITLES.EP_SHEET_HEADERS[lang].Full.length; ++i) {\r\n    headers.push(COLUMN_TITLES.EP_SHEET_HEADERS[lang].Full[i]);\r\n  }\r\n\r\n  return headers;\r\n}\r\n\r\nexport function getAssetLiabProjections(props) {\r\n  // add liab and tax liab\r\n  const input = props.dataInput;\r\n  const assetProjections = props.assetProjections;\r\n  //console.log(assetProjections)\r\n  const lang = input.Presentations[0].language;\r\n  // const formatFr = lang === \"fr\" ? true : false;\r\n  const clients = input.Clients;\r\n  const startAge =\r\n    clients.length > 1\r\n      ? Math.min(clients[QUOTE_SPOUSE].Age, clients[QUOTE_CLIENT].Age)\r\n      : clients[QUOTE_CLIENT].Age;\r\n\r\n  const LE3 = parseInt(props.LE) + 3;\r\n  let EstateLiabsByType = Array(ASSET_TAX_TYPE_COUNT).fill(0);\r\n  let EstateLiabsByTypeLE3 = Array(ASSET_TAX_TYPE_COUNT).fill(0);\r\n  let proj = [];\r\n  let dataEstateLiability = Array(100 - startAge + 1).fill(0);\r\n\r\n  //const dataNA = setUIDataToAPI(props.dataInput);\r\n\r\n  let tmpGrids = [];\r\n  let AssetProjectionsGrid = [];\r\n  let taxLiabCol = 0;\r\n  let FMVCol = 0;\r\n  let EstateLiabsByTypeTotal = 0;\r\n  let EstateLiabsByTypeLE3Total = 0;\r\n  let EstateLiabsByTypeGrowth = [];\r\n  let EstateLiabsByTypeInitialAmt = [];\r\n  EstateLiabsByTypeGrowth = Array(ASSET_TAX_TYPE_COUNT).fill(0);\r\n  EstateLiabsByTypeInitialAmt = Array(ASSET_TAX_TYPE_COUNT).fill(0);\r\n  // add all assets\r\n\r\n  if (input.Assets.length === 0) {\r\n    proj.values = Array(100).fill(0);\r\n    const grid = assetProjections[0].grid;\r\n    tmpGrids.push(grid);\r\n  } else {\r\n    input.Assets.forEach((element) => {\r\n      proj.values = Array(100).fill(0);\r\n      //console.log(assetProjections);\r\n      //console.log(assetProjections[element.id - 1]);\r\n\r\n      const grid = assetProjections[element.id - 1].grid;\r\n      tmpGrids.push(grid);\r\n      FMVCol = 2;\r\n      let fmv = [];\r\n      for (let i = 0; i < 100 - startAge; i++) {\r\n        fmv.push(parseFloat(cleanFormat(grid.dataProjection[FMVCol][i])));\r\n      }\r\n\r\n      if (element.assetTaxTypeKey !== ASSET_TAX.NON_TAXABLE.Key) {\r\n        if (element.assetTypeKey === ASSETS.PERSONAL_RESIDENCE.Key) {\r\n          taxLiabCol = grid.dataProjection.length - 1;\r\n          EstateLiabsByType[ASSET_TAX_TYPE_PRINCIPAL_RES] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][0], lang)\r\n          );\r\n          EstateLiabsByTypeLE3[ASSET_TAX_TYPE_PRINCIPAL_RES] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][LE3], lang)\r\n          );\r\n          addAssetToProjections(\r\n            proj,\r\n            fmv,\r\n            ASSETS.PERSONAL_RESIDENCE.value[lang],\r\n            ASSETS.PERSONAL_RESIDENCE.colour\r\n          );\r\n        } else if (element.assetTypeKey === ASSETS.REAL_ESTATE.Key) {\r\n          taxLiabCol = grid.dataProjection.length - 1;\r\n          FMVCol = 2;\r\n\r\n          EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_REAL_ESTATE] +=\r\n            (parseFloat(cleanFormat(element.currValue, lang)) *\r\n              element.growth) /\r\n            100;\r\n          EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_REAL_ESTATE] += parseFloat(\r\n            cleanFormat(element.currValue, lang)\r\n          );\r\n\r\n          EstateLiabsByType[ASSET_TAX_TYPE_REAL_ESTATE] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][0], lang)\r\n          );\r\n\r\n          EstateLiabsByTypeLE3[ASSET_TAX_TYPE_REAL_ESTATE] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][LE3], lang)\r\n          );\r\n          addAssetToProjections(\r\n            proj,\r\n            fmv,\r\n            ASSETS.REAL_ESTATE.value[lang],\r\n            ASSETS.REAL_ESTATE.colour\r\n          );\r\n        } else if (element.assetTypeKey === ASSETS.STOCKS_BONDS.Key) {\r\n          taxLiabCol = grid.dataProjection.length - 1;\r\n          FMVCol = 2;\r\n          EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_STOCKS] +=\r\n            (parseFloat(cleanFormat(element.currValue, lang)) *\r\n              element.growth) /\r\n            100;\r\n          EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_STOCKS] += parseFloat(\r\n            cleanFormat(element.currValue, lang)\r\n          );\r\n          EstateLiabsByType[ASSET_TAX_TYPE_STOCKS] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][0], lang)\r\n          );\r\n          EstateLiabsByTypeLE3[ASSET_TAX_TYPE_STOCKS] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][LE3], lang)\r\n          );\r\n          addAssetToProjections(\r\n            proj,\r\n            fmv,\r\n            ASSETS.STOCKS_BONDS.value[lang],\r\n            ASSETS.STOCKS_BONDS.colour\r\n          );\r\n        } else if (element.assetTypeKey === ASSETS.SMALL_BUSINESS_SHARES.Key) {\r\n          taxLiabCol = grid.dataProjection.length - 1;\r\n          FMVCol = 2;\r\n          EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_SMALL_BUS] +=\r\n            (parseFloat(cleanFormat(element.currValue, lang)) *\r\n              element.growth) /\r\n            100;\r\n          EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_SMALL_BUS] += parseFloat(\r\n            cleanFormat(element.currValue, lang)\r\n          );\r\n          EstateLiabsByType[ASSET_TAX_TYPE_SMALL_BUS] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][0], lang)\r\n          );\r\n          EstateLiabsByTypeLE3[ASSET_TAX_TYPE_SMALL_BUS] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][LE3], lang)\r\n          );\r\n          addAssetToProjections(\r\n            proj,\r\n            fmv,\r\n            ASSETS.SMALL_BUSINESS_SHARES.value[lang],\r\n            ASSETS.SMALL_BUSINESS_SHARES.colour\r\n          );\r\n        } else if (element.assetTypeKey === ASSETS.RRSP_RRIF.Key) {\r\n          taxLiabCol = grid.dataProjection.length - 1;\r\n          FMVCol = 2;\r\n          EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_RRSP] +=\r\n            (parseFloat(cleanFormat(element.currValue, lang)) *\r\n              element.growth) /\r\n            100;\r\n          EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_RRSP] += parseFloat(\r\n            cleanFormat(element.currValue, lang)\r\n          );\r\n          EstateLiabsByType[ASSET_TAX_TYPE_RRSP] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][0], lang)\r\n          );\r\n          EstateLiabsByTypeLE3[ASSET_TAX_TYPE_RRSP] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][LE3], lang)\r\n          );\r\n          addAssetToProjections(\r\n            proj,\r\n            fmv,\r\n            ASSETS.RRSP_RRIF.value[lang],\r\n            ASSETS.RRSP_RRIF.colour\r\n          );\r\n        } else if (element.assetTypeKey === ASSETS.INTEREST_BEARING.Key) {\r\n          taxLiabCol = grid.dataProjection.length - 1;\r\n          FMVCol = 2;\r\n\r\n          EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_INTEREST] +=\r\n            (parseFloat(cleanFormat(element.currValue, lang)) *\r\n              element.growth) /\r\n            100;\r\n          EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_INTEREST] += parseFloat(\r\n            cleanFormat(element.currValue, lang)\r\n          );\r\n          EstateLiabsByType[ASSET_TAX_TYPE_INTEREST] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][0], lang)\r\n          );\r\n          EstateLiabsByTypeLE3[ASSET_TAX_TYPE_INTEREST] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][LE3], lang)\r\n          );\r\n          addAssetToProjections(\r\n            proj,\r\n            fmv,\r\n            ASSETS.INTEREST_BEARING.value[lang],\r\n            ASSETS.INTEREST_BEARING.colour\r\n          );\r\n        }\r\n        // take other, bundle taxable together\r\n        else if (element.assetTypeKey === ASSETS.OTHER_ASSETS.Key) {\r\n          taxLiabCol = grid.dataProjection.length - 1;\r\n          FMVCol = 2;\r\n          EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_OTHER] +=\r\n            (parseFloat(cleanFormat(element.currValue, lang)) *\r\n              element.growth) /\r\n            100;\r\n          EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_OTHER] += parseFloat(\r\n            cleanFormat(element.currValue, lang)\r\n          );\r\n          EstateLiabsByType[ASSET_TAX_TYPE_OTHER] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][0], lang)\r\n          );\r\n          EstateLiabsByTypeLE3[ASSET_TAX_TYPE_OTHER] += parseFloat(\r\n            cleanFormat(grid.dataProjection[taxLiabCol][LE3], lang)\r\n          );\r\n          addAssetToProjections(\r\n            proj,\r\n            fmv,\r\n            ASSETS.OTHER_ASSETS.value[lang],\r\n            ASSETS.OTHER_ASSETS.colour\r\n          );\r\n        }\r\n        // bundle non-taxable together\r\n        /* else if (element.assetTypeKey === ASSETS.CASH.Key) {\r\n      FMVCol = 2;\r\n      addAssetToProjections(\r\n        proj,\r\n        fmv,\r\n        ASSET_TAX.NON_TAXABLE.value[lang],\r\n        ASSETS.CASH.colour\r\n      );\r\n    } else if (element.assetTypeKey === ASSETS.LIFE_INSURANCE.Key) {\r\n      FMVCol = 2;\r\n      addAssetToProjections(\r\n        proj,\r\n        fmv,\r\n        ASSET_TAX.NON_TAXABLE.value[lang],\r\n        ASSETS.LIFE_INSURANCE.colour\r\n      );\r\n    } else if (\r\n      element.assetTypeKey === ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.Key\r\n    ) {\r\n      FMVCol = 2;\r\n      addAssetToProjections(\r\n        proj,\r\n        fmv,\r\n        ASSET_TAX.NON_TAXABLE.value[lang],\r\n        ASSETS.CHARITABLE_GIFTS_TAX_CREDIT.colour\r\n      );\r\n    } */\r\n        /* else {\r\n      taxLiabCol = grid.dataProjection.length - 1;\r\n      FMVCol = 2;\r\n     \r\n      EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_OTHER] +=  parseFloat(cleanFormat(element.currValue, lang))*element.growth/100;\r\n      EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_OTHER]+=parseFloat(cleanFormat(element.currValue, lang));\r\n      EstateLiabsByType[ASSET_TAX_TYPE_OTHER] += parseFloat(\r\n        cleanFormat(grid.dataProjection[taxLiabCol][0], lang)\r\n      );\r\n      EstateLiabsByTypeLE3[ASSET_TAX_TYPE_OTHER] += parseFloat(\r\n        cleanFormat(grid.dataProjection[taxLiabCol][LE3], lang)\r\n      );\r\n      addAssetToProjections(\r\n        proj,\r\n        fmv,\r\n        ASSETS.OTHER_BEARING.value[lang],\r\n        ASSETS.OTHER_BEARING.colour\r\n      );\r\n    }\r\n */\r\n        EstateLiabsByTypeTotal += parseFloat(\r\n          cleanFormat(grid.dataProjection[taxLiabCol][0], lang)\r\n        );\r\n        EstateLiabsByTypeLE3Total += parseFloat(\r\n          cleanFormat(grid.dataProjection[taxLiabCol][LE3], lang)\r\n        );\r\n        // sum all for total tax liab\r\n        if (proj.length > 0) {\r\n          for (let i = 0; i < grid.dataProjection[0].length - 1; i++) {\r\n            if (grid.dataProjection[taxLiabCol][i] !== undefined)\r\n              dataEstateLiability[i] += parseFloat(\r\n                cleanFormat(grid.dataProjection[taxLiabCol][i], lang)\r\n              );\r\n          }\r\n          dataEstateLiability[100 - startAge] =\r\n            dataEstateLiability[100 - startAge - 1];\r\n        }\r\n      }\r\n    });\r\n  }\r\n  proj.push({\r\n    name: TOTALS.TAX_LIAB.value[lang], // TOTALS.ESTATE_LIAB.value[lang],\r\n    colour: TOTALS.ESTATE_LIAB.colour,\r\n    values: dataEstateLiability,\r\n  });\r\n\r\n  const rateRS =\r\n    EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_REAL_ESTATE] === 0\r\n      ? 0\r\n      : (100 * EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_REAL_ESTATE]) /\r\n        EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_REAL_ESTATE];\r\n  const rateS =\r\n    EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_STOCKS] === 0\r\n      ? 0\r\n      : (100 * EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_STOCKS]) /\r\n        EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_STOCKS];\r\n  const rateSB =\r\n    EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_SMALL_BUS] === 0\r\n      ? 0\r\n      : (100 * EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_SMALL_BUS]) /\r\n        EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_SMALL_BUS];\r\n  const rateRR =\r\n    EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_RRSP] === 0\r\n      ? 0\r\n      : (100 * EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_RRSP]) /\r\n        EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_RRSP];\r\n  const rateI =\r\n    EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_INTEREST] === 0\r\n      ? 0\r\n      : (100 * EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_INTEREST]) /\r\n        EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_INTEREST];\r\n  const rateO =\r\n    EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_OTHER] === 0\r\n      ? 0\r\n      : (100 * EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_OTHER]) /\r\n        EstateLiabsByTypeInitialAmt[ASSET_TAX_TYPE_OTHER];\r\n\r\n  EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_REAL_ESTATE] =\r\n    lang === \"en\"\r\n      ? numFormat(rateRS, false, 3)\r\n      : numFormat(rateRS, false, 3).replace(\".\", \",\");\r\n  EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_STOCKS] =\r\n    lang === \"en\"\r\n      ? numFormat(rateS, false, 3)\r\n      : numFormat(rateS, false, 3).replace(\".\", \",\");\r\n  EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_SMALL_BUS] =\r\n    lang === \"en\"\r\n      ? numFormat(rateSB, false, 3)\r\n      : numFormat(rateSB, false, 3).replace(\".\", \",\");\r\n  EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_RRSP] =\r\n    lang === \"en\"\r\n      ? numFormat(rateRR, false, 3)\r\n      : numFormat(rateRR, false, 3).replace(\".\", \",\");\r\n  EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_INTEREST] =\r\n    lang === \"en\"\r\n      ? numFormat(rateI, false, 3)\r\n      : numFormat(rateI, false, 3).replace(\".\", \",\");\r\n  EstateLiabsByTypeGrowth[ASSET_TAX_TYPE_OTHER] =\r\n    lang === \"en\"\r\n      ? numFormat(rateO, false, 3)\r\n      : numFormat(rateO, false, 3).replace(\".\", \",\");\r\n\r\n  let projectionsGrids = tmpGrids;\r\n  //setState({ grids: tmpGrids, loading: false });\r\n\r\n  const AssetnEstateLiabs = proj;\r\n\r\n  return {\r\n    EstateLiabsByType,\r\n    EstateLiabsByTypeTotal,\r\n    EstateLiabsByTypeLE3,\r\n    EstateLiabsByTypeLE3Total,\r\n    EstateLiabsByTypeGrowth,\r\n    AssetnEstateLiabs,\r\n    projectionsGrids,\r\n  };\r\n}\r\n\r\nfunction addAssetToProjections(proj, data, assetName, colour) {\r\n  let alreadyThere = false;\r\n  for (let i = 0; i < proj.length; i++) {\r\n    if (proj[i].colour === colour) {\r\n      alreadyThere = true;\r\n      for (let j = 0; j < 100; j++) proj[i].values[j] += data[j];\r\n    }\r\n  }\r\n  if (alreadyThere === false)\r\n    proj.push({ name: assetName, colour: colour, values: data });\r\n\r\n  //console.log(proj);\r\n  return proj;\r\n}\r\n"],"sourceRoot":""}